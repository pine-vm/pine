module CompilationInterface.ElmMake.Generated_ElmMake exposing (..)

elm_make_output_src_Frontend_Main_elm_javascript =
    { base64 = "KGZ1bmN0aW9uKHNjb3BlKXsKJ3VzZSBzdHJpY3QnOwoKZnVuY3Rpb24gRihhcml0eSwgZnVuLCB3cmFwcGVyKSB7CiAgd3JhcHBlci5hID0gYXJpdHk7CiAgd3JhcHBlci5mID0gZnVuOwogIHJldHVybiB3cmFwcGVyOwp9CgpmdW5jdGlvbiBGMihmdW4pIHsKICByZXR1cm4gRigyLCBmdW4sIGZ1bmN0aW9uKGEpIHsgcmV0dXJuIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGZ1bihhLGIpOyB9OyB9KQp9CmZ1bmN0aW9uIEYzKGZ1bikgewogIHJldHVybiBGKDMsIGZ1biwgZnVuY3Rpb24oYSkgewogICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGZ1bmN0aW9uKGMpIHsgcmV0dXJuIGZ1bihhLCBiLCBjKTsgfTsgfTsKICB9KTsKfQpmdW5jdGlvbiBGNChmdW4pIHsKICByZXR1cm4gRig0LCBmdW4sIGZ1bmN0aW9uKGEpIHsgcmV0dXJuIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGZ1bmN0aW9uKGMpIHsKICAgIHJldHVybiBmdW5jdGlvbihkKSB7IHJldHVybiBmdW4oYSwgYiwgYywgZCk7IH07IH07IH07CiAgfSk7Cn0KZnVuY3Rpb24gRjUoZnVuKSB7CiAgcmV0dXJuIEYoNSwgZnVuLCBmdW5jdGlvbihhKSB7IHJldHVybiBmdW5jdGlvbihiKSB7IHJldHVybiBmdW5jdGlvbihjKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oZCkgeyByZXR1cm4gZnVuY3Rpb24oZSkgeyByZXR1cm4gZnVuKGEsIGIsIGMsIGQsIGUpOyB9OyB9OyB9OyB9OwogIH0pOwp9CmZ1bmN0aW9uIEY2KGZ1bikgewogIHJldHVybiBGKDYsIGZ1biwgZnVuY3Rpb24oYSkgeyByZXR1cm4gZnVuY3Rpb24oYikgeyByZXR1cm4gZnVuY3Rpb24oYykgewogICAgcmV0dXJuIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGZ1bmN0aW9uKGUpIHsgcmV0dXJuIGZ1bmN0aW9uKGYpIHsKICAgIHJldHVybiBmdW4oYSwgYiwgYywgZCwgZSwgZik7IH07IH07IH07IH07IH07CiAgfSk7Cn0KZnVuY3Rpb24gRjcoZnVuKSB7CiAgcmV0dXJuIEYoNywgZnVuLCBmdW5jdGlvbihhKSB7IHJldHVybiBmdW5jdGlvbihiKSB7IHJldHVybiBmdW5jdGlvbihjKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oZCkgeyByZXR1cm4gZnVuY3Rpb24oZSkgeyByZXR1cm4gZnVuY3Rpb24oZikgewogICAgcmV0dXJuIGZ1bmN0aW9uKGcpIHsgcmV0dXJuIGZ1bihhLCBiLCBjLCBkLCBlLCBmLCBnKTsgfTsgfTsgfTsgfTsgfTsgfTsKICB9KTsKfQpmdW5jdGlvbiBGOChmdW4pIHsKICByZXR1cm4gRig4LCBmdW4sIGZ1bmN0aW9uKGEpIHsgcmV0dXJuIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGZ1bmN0aW9uKGMpIHsKICAgIHJldHVybiBmdW5jdGlvbihkKSB7IHJldHVybiBmdW5jdGlvbihlKSB7IHJldHVybiBmdW5jdGlvbihmKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oZykgeyByZXR1cm4gZnVuY3Rpb24oaCkgewogICAgcmV0dXJuIGZ1bihhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKTsgfTsgfTsgfTsgfTsgfTsgfTsgfTsKICB9KTsKfQpmdW5jdGlvbiBGOShmdW4pIHsKICByZXR1cm4gRig5LCBmdW4sIGZ1bmN0aW9uKGEpIHsgcmV0dXJuIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGZ1bmN0aW9uKGMpIHsKICAgIHJldHVybiBmdW5jdGlvbihkKSB7IHJldHVybiBmdW5jdGlvbihlKSB7IHJldHVybiBmdW5jdGlvbihmKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oZykgeyByZXR1cm4gZnVuY3Rpb24oaCkgeyByZXR1cm4gZnVuY3Rpb24oaSkgewogICAgcmV0dXJuIGZ1bihhLCBiLCBjLCBkLCBlLCBmLCBnLCBoLCBpKTsgfTsgfTsgfTsgfTsgfTsgfTsgfTsgfTsKICB9KTsKfQoKZnVuY3Rpb24gQTIoZnVuLCBhLCBiKSB7CiAgcmV0dXJuIGZ1bi5hID09PSAyID8gZnVuLmYoYSwgYikgOiBmdW4oYSkoYik7Cn0KZnVuY3Rpb24gQTMoZnVuLCBhLCBiLCBjKSB7CiAgcmV0dXJuIGZ1bi5hID09PSAzID8gZnVuLmYoYSwgYiwgYykgOiBmdW4oYSkoYikoYyk7Cn0KZnVuY3Rpb24gQTQoZnVuLCBhLCBiLCBjLCBkKSB7CiAgcmV0dXJuIGZ1bi5hID09PSA0ID8gZnVuLmYoYSwgYiwgYywgZCkgOiBmdW4oYSkoYikoYykoZCk7Cn0KZnVuY3Rpb24gQTUoZnVuLCBhLCBiLCBjLCBkLCBlKSB7CiAgcmV0dXJuIGZ1bi5hID09PSA1ID8gZnVuLmYoYSwgYiwgYywgZCwgZSkgOiBmdW4oYSkoYikoYykoZCkoZSk7Cn0KZnVuY3Rpb24gQTYoZnVuLCBhLCBiLCBjLCBkLCBlLCBmKSB7CiAgcmV0dXJuIGZ1bi5hID09PSA2ID8gZnVuLmYoYSwgYiwgYywgZCwgZSwgZikgOiBmdW4oYSkoYikoYykoZCkoZSkoZik7Cn0KZnVuY3Rpb24gQTcoZnVuLCBhLCBiLCBjLCBkLCBlLCBmLCBnKSB7CiAgcmV0dXJuIGZ1bi5hID09PSA3ID8gZnVuLmYoYSwgYiwgYywgZCwgZSwgZiwgZykgOiBmdW4oYSkoYikoYykoZCkoZSkoZikoZyk7Cn0KZnVuY3Rpb24gQTgoZnVuLCBhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7CiAgcmV0dXJuIGZ1bi5hID09PSA4ID8gZnVuLmYoYSwgYiwgYywgZCwgZSwgZiwgZywgaCkgOiBmdW4oYSkoYikoYykoZCkoZSkoZikoZykoaCk7Cn0KZnVuY3Rpb24gQTkoZnVuLCBhLCBiLCBjLCBkLCBlLCBmLCBnLCBoLCBpKSB7CiAgcmV0dXJuIGZ1bi5hID09PSA5ID8gZnVuLmYoYSwgYiwgYywgZCwgZSwgZiwgZywgaCwgaSkgOiBmdW4oYSkoYikoYykoZCkoZSkoZikoZykoaCkoaSk7Cn0KCmNvbnNvbGUud2FybignQ29tcGlsZWQgaW4gREVWIG1vZGUuIEZvbGxvdyB0aGUgYWR2aWNlIGF0IGh0dHBzOi8vZWxtLWxhbmcub3JnLzAuMTkuMS9vcHRpbWl6ZSBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlIGFuZCBzbWFsbGVyIGFzc2V0cy4nKTsKCgp2YXIgX0pzQXJyYXlfZW1wdHkgPSBbXTsKCmZ1bmN0aW9uIF9Kc0FycmF5X3NpbmdsZXRvbih2YWx1ZSkKewogICAgcmV0dXJuIFt2YWx1ZV07Cn0KCmZ1bmN0aW9uIF9Kc0FycmF5X2xlbmd0aChhcnJheSkKewogICAgcmV0dXJuIGFycmF5Lmxlbmd0aDsKfQoKdmFyIF9Kc0FycmF5X2luaXRpYWxpemUgPSBGMyhmdW5jdGlvbihzaXplLCBvZmZzZXQsIGZ1bmMpCnsKICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkoc2l6ZSk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspCiAgICB7CiAgICAgICAgcmVzdWx0W2ldID0gZnVuYyhvZmZzZXQgKyBpKTsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0Owp9KTsKCnZhciBfSnNBcnJheV9pbml0aWFsaXplRnJvbUxpc3QgPSBGMihmdW5jdGlvbiAobWF4LCBscykKewogICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShtYXgpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4ICYmIGxzLmI7IGkrKykKICAgIHsKICAgICAgICByZXN1bHRbaV0gPSBscy5hOwogICAgICAgIGxzID0gbHMuYjsKICAgIH0KCiAgICByZXN1bHQubGVuZ3RoID0gaTsKICAgIHJldHVybiBfVXRpbHNfVHVwbGUyKHJlc3VsdCwgbHMpOwp9KTsKCnZhciBfSnNBcnJheV91bnNhZmVHZXQgPSBGMihmdW5jdGlvbihpbmRleCwgYXJyYXkpCnsKICAgIHJldHVybiBhcnJheVtpbmRleF07Cn0pOwoKdmFyIF9Kc0FycmF5X3Vuc2FmZVNldCA9IEYzKGZ1bmN0aW9uKGluZGV4LCB2YWx1ZSwgYXJyYXkpCnsKICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7CiAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KGxlbmd0aCk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykKICAgIHsKICAgICAgICByZXN1bHRbaV0gPSBhcnJheVtpXTsKICAgIH0KCiAgICByZXN1bHRbaW5kZXhdID0gdmFsdWU7CiAgICByZXR1cm4gcmVzdWx0Owp9KTsKCnZhciBfSnNBcnJheV9wdXNoID0gRjIoZnVuY3Rpb24odmFsdWUsIGFycmF5KQp7CiAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwogICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShsZW5ndGggKyAxKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKQogICAgewogICAgICAgIHJlc3VsdFtpXSA9IGFycmF5W2ldOwogICAgfQoKICAgIHJlc3VsdFtsZW5ndGhdID0gdmFsdWU7CiAgICByZXR1cm4gcmVzdWx0Owp9KTsKCnZhciBfSnNBcnJheV9mb2xkbCA9IEYzKGZ1bmN0aW9uKGZ1bmMsIGFjYywgYXJyYXkpCnsKICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykKICAgIHsKICAgICAgICBhY2MgPSBBMihmdW5jLCBhcnJheVtpXSwgYWNjKTsKICAgIH0KCiAgICByZXR1cm4gYWNjOwp9KTsKCnZhciBfSnNBcnJheV9mb2xkciA9IEYzKGZ1bmN0aW9uKGZ1bmMsIGFjYywgYXJyYXkpCnsKICAgIGZvciAodmFyIGkgPSBhcnJheS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkKICAgIHsKICAgICAgICBhY2MgPSBBMihmdW5jLCBhcnJheVtpXSwgYWNjKTsKICAgIH0KCiAgICByZXR1cm4gYWNjOwp9KTsKCnZhciBfSnNBcnJheV9tYXAgPSBGMihmdW5jdGlvbihmdW5jLCBhcnJheSkKewogICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDsKICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkobGVuZ3RoKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKQogICAgewogICAgICAgIHJlc3VsdFtpXSA9IGZ1bmMoYXJyYXlbaV0pOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7Cn0pOwoKdmFyIF9Kc0FycmF5X2luZGV4ZWRNYXAgPSBGMyhmdW5jdGlvbihmdW5jLCBvZmZzZXQsIGFycmF5KQp7CiAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwogICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShsZW5ndGgpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspCiAgICB7CiAgICAgICAgcmVzdWx0W2ldID0gQTIoZnVuYywgb2Zmc2V0ICsgaSwgYXJyYXlbaV0pOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7Cn0pOwoKdmFyIF9Kc0FycmF5X3NsaWNlID0gRjMoZnVuY3Rpb24oZnJvbSwgdG8sIGFycmF5KQp7CiAgICByZXR1cm4gYXJyYXkuc2xpY2UoZnJvbSwgdG8pOwp9KTsKCnZhciBfSnNBcnJheV9hcHBlbmROID0gRjMoZnVuY3Rpb24obiwgZGVzdCwgc291cmNlKQp7CiAgICB2YXIgZGVzdExlbiA9IGRlc3QubGVuZ3RoOwogICAgdmFyIGl0ZW1zVG9Db3B5ID0gbiAtIGRlc3RMZW47CgogICAgaWYgKGl0ZW1zVG9Db3B5ID4gc291cmNlLmxlbmd0aCkKICAgIHsKICAgICAgICBpdGVtc1RvQ29weSA9IHNvdXJjZS5sZW5ndGg7CiAgICB9CgogICAgdmFyIHNpemUgPSBkZXN0TGVuICsgaXRlbXNUb0NvcHk7CiAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KHNpemUpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVzdExlbjsgaSsrKQogICAgewogICAgICAgIHJlc3VsdFtpXSA9IGRlc3RbaV07CiAgICB9CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtc1RvQ29weTsgaSsrKQogICAgewogICAgICAgIHJlc3VsdFtpICsgZGVzdExlbl0gPSBzb3VyY2VbaV07CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKfSk7CgoKCi8vIExPRwoKdmFyIF9EZWJ1Z19sb2dfVU5VU0VEID0gRjIoZnVuY3Rpb24odGFnLCB2YWx1ZSkKewoJcmV0dXJuIHZhbHVlOwp9KTsKCnZhciBfRGVidWdfbG9nID0gRjIoZnVuY3Rpb24odGFnLCB2YWx1ZSkKewoJY29uc29sZS5sb2codGFnICsgJzogJyArIF9EZWJ1Z190b1N0cmluZyh2YWx1ZSkpOwoJcmV0dXJuIHZhbHVlOwp9KTsKCgovLyBUT0RPUwoKZnVuY3Rpb24gX0RlYnVnX3RvZG8obW9kdWxlTmFtZSwgcmVnaW9uKQp7CglyZXR1cm4gZnVuY3Rpb24obWVzc2FnZSkgewoJCV9EZWJ1Z19jcmFzaCg4LCBtb2R1bGVOYW1lLCByZWdpb24sIG1lc3NhZ2UpOwoJfTsKfQoKZnVuY3Rpb24gX0RlYnVnX3RvZG9DYXNlKG1vZHVsZU5hbWUsIHJlZ2lvbiwgdmFsdWUpCnsKCXJldHVybiBmdW5jdGlvbihtZXNzYWdlKSB7CgkJX0RlYnVnX2NyYXNoKDksIG1vZHVsZU5hbWUsIHJlZ2lvbiwgdmFsdWUsIG1lc3NhZ2UpOwoJfTsKfQoKCi8vIFRPIFNUUklORwoKZnVuY3Rpb24gX0RlYnVnX3RvU3RyaW5nX1VOVVNFRCh2YWx1ZSkKewoJcmV0dXJuICc8aW50ZXJuYWxzPic7Cn0KCmZ1bmN0aW9uIF9EZWJ1Z190b1N0cmluZyh2YWx1ZSkKewoJcmV0dXJuIF9EZWJ1Z190b0Fuc2lTdHJpbmcoZmFsc2UsIHZhbHVlKTsKfQoKZnVuY3Rpb24gX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCB2YWx1ZSkKewoJaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykKCXsKCQlyZXR1cm4gX0RlYnVnX2ludGVybmFsQ29sb3IoYW5zaSwgJzxmdW5jdGlvbj4nKTsKCX0KCglpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpCgl7CgkJcmV0dXJuIF9EZWJ1Z19jdG9yQ29sb3IoYW5zaSwgdmFsdWUgPyAnVHJ1ZScgOiAnRmFsc2UnKTsKCX0KCglpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykKCXsKCQlyZXR1cm4gX0RlYnVnX251bWJlckNvbG9yKGFuc2ksIHZhbHVlICsgJycpOwoJfQoKCWlmICh2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZykKCXsKCQlyZXR1cm4gX0RlYnVnX2NoYXJDb2xvcihhbnNpLCAiJyIgKyBfRGVidWdfYWRkU2xhc2hlcyh2YWx1ZSwgdHJ1ZSkgKyAiJyIpOwoJfQoKCWlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKQoJewoJCXJldHVybiBfRGVidWdfc3RyaW5nQ29sb3IoYW5zaSwgJyInICsgX0RlYnVnX2FkZFNsYXNoZXModmFsdWUsIGZhbHNlKSArICciJyk7Cgl9CgoJaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgJyQnIGluIHZhbHVlKQoJewoJCXZhciB0YWcgPSB2YWx1ZS4kOwoKCQlpZiAodHlwZW9mIHRhZyA9PT0gJ251bWJlcicpCgkJewoJCQlyZXR1cm4gX0RlYnVnX2ludGVybmFsQ29sb3IoYW5zaSwgJzxpbnRlcm5hbHM+Jyk7CgkJfQoKCQlpZiAodGFnWzBdID09PSAnIycpCgkJewoJCQl2YXIgb3V0cHV0ID0gW107CgkJCWZvciAodmFyIGsgaW4gdmFsdWUpCgkJCXsKCQkJCWlmIChrID09PSAnJCcpIGNvbnRpbnVlOwoJCQkJb3V0cHV0LnB1c2goX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCB2YWx1ZVtrXSkpOwoJCQl9CgkJCXJldHVybiAnKCcgKyBvdXRwdXQuam9pbignLCcpICsgJyknOwoJCX0KCgkJaWYgKHRhZyA9PT0gJ1NldF9lbG1fYnVpbHRpbicpCgkJewoJCQlyZXR1cm4gX0RlYnVnX2N0b3JDb2xvcihhbnNpLCAnU2V0JykKCQkJCSsgX0RlYnVnX2ZhZGVDb2xvcihhbnNpLCAnLmZyb21MaXN0JykgKyAnICcKCQkJCSsgX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCAkZWxtJGNvcmUkU2V0JHRvTGlzdCh2YWx1ZSkpOwoJCX0KCgkJaWYgKHRhZyA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicgfHwgdGFnID09PSAnUkJFbXB0eV9lbG1fYnVpbHRpbicpCgkJewoJCQlyZXR1cm4gX0RlYnVnX2N0b3JDb2xvcihhbnNpLCAnRGljdCcpCgkJCQkrIF9EZWJ1Z19mYWRlQ29sb3IoYW5zaSwgJy5mcm9tTGlzdCcpICsgJyAnCgkJCQkrIF9EZWJ1Z190b0Fuc2lTdHJpbmcoYW5zaSwgJGVsbSRjb3JlJERpY3QkdG9MaXN0KHZhbHVlKSk7CgkJfQoKCQlpZiAodGFnID09PSAnQXJyYXlfZWxtX2J1aWx0aW4nKQoJCXsKCQkJcmV0dXJuIF9EZWJ1Z19jdG9yQ29sb3IoYW5zaSwgJ0FycmF5JykKCQkJCSsgX0RlYnVnX2ZhZGVDb2xvcihhbnNpLCAnLmZyb21MaXN0JykgKyAnICcKCQkJCSsgX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCAkZWxtJGNvcmUkQXJyYXkkdG9MaXN0KHZhbHVlKSk7CgkJfQoKCQlpZiAodGFnID09PSAnOjonIHx8IHRhZyA9PT0gJ1tdJykKCQl7CgkJCXZhciBvdXRwdXQgPSAnWyc7CgoJCQl2YWx1ZS5iICYmIChvdXRwdXQgKz0gX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCB2YWx1ZS5hKSwgdmFsdWUgPSB2YWx1ZS5iKQoKCQkJZm9yICg7IHZhbHVlLmI7IHZhbHVlID0gdmFsdWUuYikgLy8gV0hJTEVfQ09OUwoJCQl7CgkJCQlvdXRwdXQgKz0gJywnICsgX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCB2YWx1ZS5hKTsKCQkJfQoJCQlyZXR1cm4gb3V0cHV0ICsgJ10nOwoJCX0KCgkJdmFyIG91dHB1dCA9ICcnOwoJCWZvciAodmFyIGkgaW4gdmFsdWUpCgkJewoJCQlpZiAoaSA9PT0gJyQnKSBjb250aW51ZTsKCQkJdmFyIHN0ciA9IF9EZWJ1Z190b0Fuc2lTdHJpbmcoYW5zaSwgdmFsdWVbaV0pOwoJCQl2YXIgYzAgPSBzdHJbMF07CgkJCXZhciBwYXJlbmxlc3MgPSBjMCA9PT0gJ3snIHx8IGMwID09PSAnKCcgfHwgYzAgPT09ICdbJyB8fCBjMCA9PT0gJzwnIHx8IGMwID09PSAnIicgfHwgc3RyLmluZGV4T2YoJyAnKSA8IDA7CgkJCW91dHB1dCArPSAnICcgKyAocGFyZW5sZXNzID8gc3RyIDogJygnICsgc3RyICsgJyknKTsKCQl9CgkJcmV0dXJuIF9EZWJ1Z19jdG9yQ29sb3IoYW5zaSwgdGFnKSArIG91dHB1dDsKCX0KCglpZiAodHlwZW9mIERhdGFWaWV3ID09PSAnZnVuY3Rpb24nICYmIHZhbHVlIGluc3RhbmNlb2YgRGF0YVZpZXcpCgl7CgkJcmV0dXJuIF9EZWJ1Z19zdHJpbmdDb2xvcihhbnNpLCAnPCcgKyB2YWx1ZS5ieXRlTGVuZ3RoICsgJyBieXRlcz4nKTsKCX0KCglpZiAodHlwZW9mIEZpbGUgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlIGluc3RhbmNlb2YgRmlsZSkKCXsKCQlyZXR1cm4gX0RlYnVnX2ludGVybmFsQ29sb3IoYW5zaSwgJzwnICsgdmFsdWUubmFtZSArICc+Jyk7Cgl9CgoJaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpCgl7CgkJdmFyIG91dHB1dCA9IFtdOwoJCWZvciAodmFyIGtleSBpbiB2YWx1ZSkKCQl7CgkJCXZhciBmaWVsZCA9IGtleVswXSA9PT0gJ18nID8ga2V5LnNsaWNlKDEpIDoga2V5OwoJCQlvdXRwdXQucHVzaChfRGVidWdfZmFkZUNvbG9yKGFuc2ksIGZpZWxkKSArICcgPSAnICsgX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCB2YWx1ZVtrZXldKSk7CgkJfQoJCWlmIChvdXRwdXQubGVuZ3RoID09PSAwKQoJCXsKCQkJcmV0dXJuICd7fSc7CgkJfQoJCXJldHVybiAneyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnIH0nOwoJfQoKCXJldHVybiBfRGVidWdfaW50ZXJuYWxDb2xvcihhbnNpLCAnPGludGVybmFscz4nKTsKfQoKZnVuY3Rpb24gX0RlYnVnX2FkZFNsYXNoZXMoc3RyLCBpc0NoYXIpCnsKCXZhciBzID0gc3RyCgkJLnJlcGxhY2UoL1xcL2csICdcXFxcJykKCQkucmVwbGFjZSgvXG4vZywgJ1xcbicpCgkJLnJlcGxhY2UoL1x0L2csICdcXHQnKQoJCS5yZXBsYWNlKC9cci9nLCAnXFxyJykKCQkucmVwbGFjZSgvXHYvZywgJ1xcdicpCgkJLnJlcGxhY2UoL1wwL2csICdcXDAnKTsKCglpZiAoaXNDaGFyKQoJewoJCXJldHVybiBzLnJlcGxhY2UoL1wnL2csICdcXFwnJyk7Cgl9CgllbHNlCgl7CgkJcmV0dXJuIHMucmVwbGFjZSgvXCIvZywgJ1xcIicpOwoJfQp9CgpmdW5jdGlvbiBfRGVidWdfY3RvckNvbG9yKGFuc2ksIHN0cmluZykKewoJcmV0dXJuIGFuc2kgPyAnXHgxYls5Nm0nICsgc3RyaW5nICsgJ1x4MWJbMG0nIDogc3RyaW5nOwp9CgpmdW5jdGlvbiBfRGVidWdfbnVtYmVyQ29sb3IoYW5zaSwgc3RyaW5nKQp7CglyZXR1cm4gYW5zaSA/ICdceDFiWzk1bScgKyBzdHJpbmcgKyAnXHgxYlswbScgOiBzdHJpbmc7Cn0KCmZ1bmN0aW9uIF9EZWJ1Z19zdHJpbmdDb2xvcihhbnNpLCBzdHJpbmcpCnsKCXJldHVybiBhbnNpID8gJ1x4MWJbOTNtJyArIHN0cmluZyArICdceDFiWzBtJyA6IHN0cmluZzsKfQoKZnVuY3Rpb24gX0RlYnVnX2NoYXJDb2xvcihhbnNpLCBzdHJpbmcpCnsKCXJldHVybiBhbnNpID8gJ1x4MWJbOTJtJyArIHN0cmluZyArICdceDFiWzBtJyA6IHN0cmluZzsKfQoKZnVuY3Rpb24gX0RlYnVnX2ZhZGVDb2xvcihhbnNpLCBzdHJpbmcpCnsKCXJldHVybiBhbnNpID8gJ1x4MWJbMzdtJyArIHN0cmluZyArICdceDFiWzBtJyA6IHN0cmluZzsKfQoKZnVuY3Rpb24gX0RlYnVnX2ludGVybmFsQ29sb3IoYW5zaSwgc3RyaW5nKQp7CglyZXR1cm4gYW5zaSA/ICdceDFiWzM2bScgKyBzdHJpbmcgKyAnXHgxYlswbScgOiBzdHJpbmc7Cn0KCmZ1bmN0aW9uIF9EZWJ1Z190b0hleERpZ2l0KG4pCnsKCXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKG4gPCAxMCA/IDQ4ICsgbiA6IDU1ICsgbik7Cn0KCgovLyBDUkFTSAoKCmZ1bmN0aW9uIF9EZWJ1Z19jcmFzaF9VTlVTRUQoaWRlbnRpZmllcikKewoJdGhyb3cgbmV3IEVycm9yKCdodHRwczovL2dpdGh1Yi5jb20vZWxtL2NvcmUvYmxvYi8xLjAuMC9oaW50cy8nICsgaWRlbnRpZmllciArICcubWQnKTsKfQoKCmZ1bmN0aW9uIF9EZWJ1Z19jcmFzaChpZGVudGlmaWVyLCBmYWN0MSwgZmFjdDIsIGZhY3QzLCBmYWN0NCkKewoJc3dpdGNoKGlkZW50aWZpZXIpCgl7CgkJY2FzZSAwOgoJCQl0aHJvdyBuZXcgRXJyb3IoJ1doYXQgbm9kZSBzaG91bGQgSSB0YWtlIG92ZXI/IEluIEphdmFTY3JpcHQgSSBuZWVkIHNvbWV0aGluZyBsaWtlOlxuXG4gICAgRWxtLk1haW4uaW5pdCh7XG4gICAgICAgIG5vZGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlbG0tbm9kZSIpXG4gICAgfSlcblxuWW91IG5lZWQgdG8gZG8gdGhpcyB3aXRoIGFueSBCcm93c2VyLnNhbmRib3ggb3IgQnJvd3Nlci5lbGVtZW50IHByb2dyYW0uJyk7CgoJCWNhc2UgMToKCQkJdGhyb3cgbmV3IEVycm9yKCdCcm93c2VyLmFwcGxpY2F0aW9uIHByb2dyYW1zIGNhbm5vdCBoYW5kbGUgVVJMcyBsaWtlIHRoaXM6XG5cbiAgICAnICsgZG9jdW1lbnQubG9jYXRpb24uaHJlZiArICdcblxuV2hhdCBpcyB0aGUgcm9vdD8gVGhlIHJvb3Qgb2YgeW91ciBmaWxlIHN5c3RlbT8gVHJ5IGxvb2tpbmcgYXQgdGhpcyBwcm9ncmFtIHdpdGggYGVsbSByZWFjdG9yYCBvciBzb21lIG90aGVyIHNlcnZlci4nKTsKCgkJY2FzZSAyOgoJCQl2YXIganNvbkVycm9yU3RyaW5nID0gZmFjdDE7CgkJCXRocm93IG5ldyBFcnJvcignUHJvYmxlbSB3aXRoIHRoZSBmbGFncyBnaXZlbiB0byB5b3VyIEVsbSBwcm9ncmFtIG9uIGluaXRpYWxpemF0aW9uLlxuXG4nICsganNvbkVycm9yU3RyaW5nKTsKCgkJY2FzZSAzOgoJCQl2YXIgcG9ydE5hbWUgPSBmYWN0MTsKCQkJdGhyb3cgbmV3IEVycm9yKCdUaGVyZSBjYW4gb25seSBiZSBvbmUgcG9ydCBuYW1lZCBgJyArIHBvcnROYW1lICsgJ2AsIGJ1dCB5b3VyIHByb2dyYW0gaGFzIG11bHRpcGxlLicpOwoKCQljYXNlIDQ6CgkJCXZhciBwb3J0TmFtZSA9IGZhY3QxOwoJCQl2YXIgcHJvYmxlbSA9IGZhY3QyOwoJCQl0aHJvdyBuZXcgRXJyb3IoJ1RyeWluZyB0byBzZW5kIGFuIHVuZXhwZWN0ZWQgdHlwZSBvZiB2YWx1ZSB0aHJvdWdoIHBvcnQgYCcgKyBwb3J0TmFtZSArICdgOlxuJyArIHByb2JsZW0pOwoKCQljYXNlIDU6CgkJCXRocm93IG5ldyBFcnJvcignVHJ5aW5nIHRvIHVzZSBgKD09KWAgb24gZnVuY3Rpb25zLlxuVGhlcmUgaXMgbm8gd2F5IHRvIGtub3cgaWYgZnVuY3Rpb25zIGFyZSAidGhlIHNhbWUiIGluIHRoZSBFbG0gc2Vuc2UuXG5SZWFkIG1vcmUgYWJvdXQgdGhpcyBhdCBodHRwczovL3BhY2thZ2UuZWxtLWxhbmcub3JnL3BhY2thZ2VzL2VsbS9jb3JlL2xhdGVzdC9CYXNpY3MjPT0gd2hpY2ggZGVzY3JpYmVzIHdoeSBpdCBpcyB0aGlzIHdheSBhbmQgd2hhdCB0aGUgYmV0dGVyIHZlcnNpb24gd2lsbCBsb29rIGxpa2UuJyk7CgoJCWNhc2UgNjoKCQkJdmFyIG1vZHVsZU5hbWUgPSBmYWN0MTsKCQkJdGhyb3cgbmV3IEVycm9yKCdZb3VyIHBhZ2UgaXMgbG9hZGluZyBtdWx0aXBsZSBFbG0gc2NyaXB0cyB3aXRoIGEgbW9kdWxlIG5hbWVkICcgKyBtb2R1bGVOYW1lICsgJy4gTWF5YmUgYSBkdXBsaWNhdGUgc2NyaXB0IGlzIGdldHRpbmcgbG9hZGVkIGFjY2lkZW50YWxseT8gSWYgbm90LCByZW5hbWUgb25lIG9mIHRoZW0gc28gSSBrbm93IHdoaWNoIGlzIHdoaWNoIScpOwoKCQljYXNlIDg6CgkJCXZhciBtb2R1bGVOYW1lID0gZmFjdDE7CgkJCXZhciByZWdpb24gPSBmYWN0MjsKCQkJdmFyIG1lc3NhZ2UgPSBmYWN0MzsKCQkJdGhyb3cgbmV3IEVycm9yKCdUT0RPIGluIG1vZHVsZSBgJyArIG1vZHVsZU5hbWUgKyAnYCAnICsgX0RlYnVnX3JlZ2lvblRvU3RyaW5nKHJlZ2lvbikgKyAnXG5cbicgKyBtZXNzYWdlKTsKCgkJY2FzZSA5OgoJCQl2YXIgbW9kdWxlTmFtZSA9IGZhY3QxOwoJCQl2YXIgcmVnaW9uID0gZmFjdDI7CgkJCXZhciB2YWx1ZSA9IGZhY3QzOwoJCQl2YXIgbWVzc2FnZSA9IGZhY3Q0OwoJCQl0aHJvdyBuZXcgRXJyb3IoCgkJCQknVE9ETyBpbiBtb2R1bGUgYCcgKyBtb2R1bGVOYW1lICsgJ2AgZnJvbSB0aGUgYGNhc2VgIGV4cHJlc3Npb24gJwoJCQkJKyBfRGVidWdfcmVnaW9uVG9TdHJpbmcocmVnaW9uKSArICdcblxuSXQgcmVjZWl2ZWQgdGhlIGZvbGxvd2luZyB2YWx1ZTpcblxuICAgICcKCQkJCSsgX0RlYnVnX3RvU3RyaW5nKHZhbHVlKS5yZXBsYWNlKCdcbicsICdcbiAgICAnKQoJCQkJKyAnXG5cbkJ1dCB0aGUgYnJhbmNoIHRoYXQgaGFuZGxlcyBpdCBzYXlzOlxuXG4gICAgJyArIG1lc3NhZ2UucmVwbGFjZSgnXG4nLCAnXG4gICAgJykKCQkJKTsKCgkJY2FzZSAxMDoKCQkJdGhyb3cgbmV3IEVycm9yKCdCdWcgaW4gaHR0cHM6Ly9naXRodWIuY29tL2VsbS92aXJ0dWFsLWRvbS9pc3N1ZXMnKTsKCgkJY2FzZSAxMToKCQkJdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgcGVyZm9ybSBtb2QgMC4gRGl2aXNpb24gYnkgemVybyBlcnJvci4nKTsKCX0KfQoKZnVuY3Rpb24gX0RlYnVnX3JlZ2lvblRvU3RyaW5nKHJlZ2lvbikKewoJaWYgKHJlZ2lvbi5zdGFydC5saW5lID09PSByZWdpb24uZW5kLmxpbmUpCgl7CgkJcmV0dXJuICdvbiBsaW5lICcgKyByZWdpb24uc3RhcnQubGluZTsKCX0KCXJldHVybiAnb24gbGluZXMgJyArIHJlZ2lvbi5zdGFydC5saW5lICsgJyB0aHJvdWdoICcgKyByZWdpb24uZW5kLmxpbmU7Cn0KCgoKLy8gRVFVQUxJVFkKCmZ1bmN0aW9uIF9VdGlsc19lcSh4LCB5KQp7Cglmb3IgKAoJCXZhciBwYWlyLCBzdGFjayA9IFtdLCBpc0VxdWFsID0gX1V0aWxzX2VxSGVscCh4LCB5LCAwLCBzdGFjayk7CgkJaXNFcXVhbCAmJiAocGFpciA9IHN0YWNrLnBvcCgpKTsKCQlpc0VxdWFsID0gX1V0aWxzX2VxSGVscChwYWlyLmEsIHBhaXIuYiwgMCwgc3RhY2spCgkJKQoJe30KCglyZXR1cm4gaXNFcXVhbDsKfQoKZnVuY3Rpb24gX1V0aWxzX2VxSGVscCh4LCB5LCBkZXB0aCwgc3RhY2spCnsKCWlmICh4ID09PSB5KQoJewoJCXJldHVybiB0cnVlOwoJfQoKCWlmICh0eXBlb2YgeCAhPT0gJ29iamVjdCcgfHwgeCA9PT0gbnVsbCB8fCB5ID09PSBudWxsKQoJewoJCXR5cGVvZiB4ID09PSAnZnVuY3Rpb24nICYmIF9EZWJ1Z19jcmFzaCg1KTsKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJaWYgKGRlcHRoID4gMTAwKQoJewoJCXN0YWNrLnB1c2goX1V0aWxzX1R1cGxlMih4LHkpKTsKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvKiovCglpZiAoeC4kID09PSAnU2V0X2VsbV9idWlsdGluJykKCXsKCQl4ID0gJGVsbSRjb3JlJFNldCR0b0xpc3QoeCk7CgkJeSA9ICRlbG0kY29yZSRTZXQkdG9MaXN0KHkpOwoJfQoJaWYgKHguJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicgfHwgeC4kID09PSAnUkJFbXB0eV9lbG1fYnVpbHRpbicpCgl7CgkJeCA9ICRlbG0kY29yZSREaWN0JHRvTGlzdCh4KTsKCQl5ID0gJGVsbSRjb3JlJERpY3QkdG9MaXN0KHkpOwoJfQoJLy8qLwoKCS8qKl9VTlVTRUQvCglpZiAoeC4kIDwgMCkKCXsKCQl4ID0gJGVsbSRjb3JlJERpY3QkdG9MaXN0KHgpOwoJCXkgPSAkZWxtJGNvcmUkRGljdCR0b0xpc3QoeSk7Cgl9CgkvLyovCgoJZm9yICh2YXIga2V5IGluIHgpCgl7CgkJaWYgKCFfVXRpbHNfZXFIZWxwKHhba2V5XSwgeVtrZXldLCBkZXB0aCArIDEsIHN0YWNrKSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CglyZXR1cm4gdHJ1ZTsKfQoKdmFyIF9VdGlsc19lcXVhbCA9IEYyKF9VdGlsc19lcSk7CnZhciBfVXRpbHNfbm90RXF1YWwgPSBGMihmdW5jdGlvbihhLCBiKSB7IHJldHVybiAhX1V0aWxzX2VxKGEsYik7IH0pOwoKCgovLyBDT01QQVJJU09OUwoKLy8gQ29kZSBpbiBHZW5lcmF0ZS9KYXZhU2NyaXB0LmhzLCBCYXNpY3MuanMsIGFuZCBMaXN0LmpzIGRlcGVuZHMgb24KLy8gdGhlIHBhcnRpY3VsYXIgaW50ZWdlciB2YWx1ZXMgYXNzaWduZWQgdG8gTFQsIEVRLCBhbmQgR1QuCgpmdW5jdGlvbiBfVXRpbHNfY21wKHgsIHksIG9yZCkKewoJaWYgKHR5cGVvZiB4ICE9PSAnb2JqZWN0JykKCXsKCQlyZXR1cm4geCA9PT0geSA/IC8qRVEqLyAwIDogeCA8IHkgPyAvKkxUKi8gLTEgOiAvKkdUKi8gMTsKCX0KCgkvKiovCglpZiAoeCBpbnN0YW5jZW9mIFN0cmluZykKCXsKCQl2YXIgYSA9IHgudmFsdWVPZigpOwoJCXZhciBiID0geS52YWx1ZU9mKCk7CgkJcmV0dXJuIGEgPT09IGIgPyAwIDogYSA8IGIgPyAtMSA6IDE7Cgl9CgkvLyovCgoJLyoqX1VOVVNFRC8KCWlmICh0eXBlb2YgeC4kID09PSAndW5kZWZpbmVkJykKCS8vKi8KCS8qKi8KCWlmICh4LiRbMF0gPT09ICcjJykKCS8vKi8KCXsKCQlyZXR1cm4gKG9yZCA9IF9VdGlsc19jbXAoeC5hLCB5LmEpKQoJCQk/IG9yZAoJCQk6IChvcmQgPSBfVXRpbHNfY21wKHguYiwgeS5iKSkKCQkJCT8gb3JkCgkJCQk6IF9VdGlsc19jbXAoeC5jLCB5LmMpOwoJfQoKCS8vIHRyYXZlcnNlIGNvbnNlcyB1bnRpbCBlbmQgb2YgYSBsaXN0IG9yIGEgbWlzbWF0Y2gKCWZvciAoOyB4LmIgJiYgeS5iICYmICEob3JkID0gX1V0aWxzX2NtcCh4LmEsIHkuYSkpOyB4ID0geC5iLCB5ID0geS5iKSB7fSAvLyBXSElMRV9DT05TRVMKCXJldHVybiBvcmQgfHwgKHguYiA/IC8qR1QqLyAxIDogeS5iID8gLypMVCovIC0xIDogLypFUSovIDApOwp9Cgp2YXIgX1V0aWxzX2x0ID0gRjIoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gX1V0aWxzX2NtcChhLCBiKSA8IDA7IH0pOwp2YXIgX1V0aWxzX2xlID0gRjIoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gX1V0aWxzX2NtcChhLCBiKSA8IDE7IH0pOwp2YXIgX1V0aWxzX2d0ID0gRjIoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gX1V0aWxzX2NtcChhLCBiKSA+IDA7IH0pOwp2YXIgX1V0aWxzX2dlID0gRjIoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gX1V0aWxzX2NtcChhLCBiKSA+PSAwOyB9KTsKCnZhciBfVXRpbHNfY29tcGFyZSA9IEYyKGZ1bmN0aW9uKHgsIHkpCnsKCXZhciBuID0gX1V0aWxzX2NtcCh4LCB5KTsKCXJldHVybiBuIDwgMCA/ICRlbG0kY29yZSRCYXNpY3MkTFQgOiBuID8gJGVsbSRjb3JlJEJhc2ljcyRHVCA6ICRlbG0kY29yZSRCYXNpY3MkRVE7Cn0pOwoKCi8vIENPTU1PTiBWQUxVRVMKCnZhciBfVXRpbHNfVHVwbGUwX1VOVVNFRCA9IDA7CnZhciBfVXRpbHNfVHVwbGUwID0geyAkOiAnIzAnIH07CgpmdW5jdGlvbiBfVXRpbHNfVHVwbGUyX1VOVVNFRChhLCBiKSB7IHJldHVybiB7IGE6IGEsIGI6IGIgfTsgfQpmdW5jdGlvbiBfVXRpbHNfVHVwbGUyKGEsIGIpIHsgcmV0dXJuIHsgJDogJyMyJywgYTogYSwgYjogYiB9OyB9CgpmdW5jdGlvbiBfVXRpbHNfVHVwbGUzX1VOVVNFRChhLCBiLCBjKSB7IHJldHVybiB7IGE6IGEsIGI6IGIsIGM6IGMgfTsgfQpmdW5jdGlvbiBfVXRpbHNfVHVwbGUzKGEsIGIsIGMpIHsgcmV0dXJuIHsgJDogJyMzJywgYTogYSwgYjogYiwgYzogYyB9OyB9CgpmdW5jdGlvbiBfVXRpbHNfY2hyX1VOVVNFRChjKSB7IHJldHVybiBjOyB9CmZ1bmN0aW9uIF9VdGlsc19jaHIoYykgeyByZXR1cm4gbmV3IFN0cmluZyhjKTsgfQoKCi8vIFJFQ09SRFMKCmZ1bmN0aW9uIF9VdGlsc191cGRhdGUob2xkUmVjb3JkLCB1cGRhdGVkRmllbGRzKQp7Cgl2YXIgbmV3UmVjb3JkID0ge307CgoJZm9yICh2YXIga2V5IGluIG9sZFJlY29yZCkKCXsKCQluZXdSZWNvcmRba2V5XSA9IG9sZFJlY29yZFtrZXldOwoJfQoKCWZvciAodmFyIGtleSBpbiB1cGRhdGVkRmllbGRzKQoJewoJCW5ld1JlY29yZFtrZXldID0gdXBkYXRlZEZpZWxkc1trZXldOwoJfQoKCXJldHVybiBuZXdSZWNvcmQ7Cn0KCgovLyBBUFBFTkQKCnZhciBfVXRpbHNfYXBwZW5kID0gRjIoX1V0aWxzX2FwKTsKCmZ1bmN0aW9uIF9VdGlsc19hcCh4cywgeXMpCnsKCS8vIGFwcGVuZCBTdHJpbmdzCglpZiAodHlwZW9mIHhzID09PSAnc3RyaW5nJykKCXsKCQlyZXR1cm4geHMgKyB5czsKCX0KCgkvLyBhcHBlbmQgTGlzdHMKCWlmICgheHMuYikKCXsKCQlyZXR1cm4geXM7Cgl9Cgl2YXIgcm9vdCA9IF9MaXN0X0NvbnMoeHMuYSwgeXMpOwoJeHMgPSB4cy5iCglmb3IgKHZhciBjdXJyID0gcm9vdDsgeHMuYjsgeHMgPSB4cy5iKSAvLyBXSElMRV9DT05TCgl7CgkJY3VyciA9IGN1cnIuYiA9IF9MaXN0X0NvbnMoeHMuYSwgeXMpOwoJfQoJcmV0dXJuIHJvb3Q7Cn0KCgoKdmFyIF9MaXN0X05pbF9VTlVTRUQgPSB7ICQ6IDAgfTsKdmFyIF9MaXN0X05pbCA9IHsgJDogJ1tdJyB9OwoKZnVuY3Rpb24gX0xpc3RfQ29uc19VTlVTRUQoaGQsIHRsKSB7IHJldHVybiB7ICQ6IDEsIGE6IGhkLCBiOiB0bCB9OyB9CmZ1bmN0aW9uIF9MaXN0X0NvbnMoaGQsIHRsKSB7IHJldHVybiB7ICQ6ICc6OicsIGE6IGhkLCBiOiB0bCB9OyB9CgoKdmFyIF9MaXN0X2NvbnMgPSBGMihfTGlzdF9Db25zKTsKCmZ1bmN0aW9uIF9MaXN0X2Zyb21BcnJheShhcnIpCnsKCXZhciBvdXQgPSBfTGlzdF9OaWw7Cglmb3IgKHZhciBpID0gYXJyLmxlbmd0aDsgaS0tOyApCgl7CgkJb3V0ID0gX0xpc3RfQ29ucyhhcnJbaV0sIG91dCk7Cgl9CglyZXR1cm4gb3V0Owp9CgpmdW5jdGlvbiBfTGlzdF90b0FycmF5KHhzKQp7Cglmb3IgKHZhciBvdXQgPSBbXTsgeHMuYjsgeHMgPSB4cy5iKSAvLyBXSElMRV9DT05TCgl7CgkJb3V0LnB1c2goeHMuYSk7Cgl9CglyZXR1cm4gb3V0Owp9Cgp2YXIgX0xpc3RfbWFwMiA9IEYzKGZ1bmN0aW9uKGYsIHhzLCB5cykKewoJZm9yICh2YXIgYXJyID0gW107IHhzLmIgJiYgeXMuYjsgeHMgPSB4cy5iLCB5cyA9IHlzLmIpIC8vIFdISUxFX0NPTlNFUwoJewoJCWFyci5wdXNoKEEyKGYsIHhzLmEsIHlzLmEpKTsKCX0KCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoYXJyKTsKfSk7Cgp2YXIgX0xpc3RfbWFwMyA9IEY0KGZ1bmN0aW9uKGYsIHhzLCB5cywgenMpCnsKCWZvciAodmFyIGFyciA9IFtdOyB4cy5iICYmIHlzLmIgJiYgenMuYjsgeHMgPSB4cy5iLCB5cyA9IHlzLmIsIHpzID0genMuYikgLy8gV0hJTEVfQ09OU0VTCgl7CgkJYXJyLnB1c2goQTMoZiwgeHMuYSwgeXMuYSwgenMuYSkpOwoJfQoJcmV0dXJuIF9MaXN0X2Zyb21BcnJheShhcnIpOwp9KTsKCnZhciBfTGlzdF9tYXA0ID0gRjUoZnVuY3Rpb24oZiwgd3MsIHhzLCB5cywgenMpCnsKCWZvciAodmFyIGFyciA9IFtdOyB3cy5iICYmIHhzLmIgJiYgeXMuYiAmJiB6cy5iOyB3cyA9IHdzLmIsIHhzID0geHMuYiwgeXMgPSB5cy5iLCB6cyA9IHpzLmIpIC8vIFdISUxFX0NPTlNFUwoJewoJCWFyci5wdXNoKEE0KGYsIHdzLmEsIHhzLmEsIHlzLmEsIHpzLmEpKTsKCX0KCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoYXJyKTsKfSk7Cgp2YXIgX0xpc3RfbWFwNSA9IEY2KGZ1bmN0aW9uKGYsIHZzLCB3cywgeHMsIHlzLCB6cykKewoJZm9yICh2YXIgYXJyID0gW107IHZzLmIgJiYgd3MuYiAmJiB4cy5iICYmIHlzLmIgJiYgenMuYjsgdnMgPSB2cy5iLCB3cyA9IHdzLmIsIHhzID0geHMuYiwgeXMgPSB5cy5iLCB6cyA9IHpzLmIpIC8vIFdISUxFX0NPTlNFUwoJewoJCWFyci5wdXNoKEE1KGYsIHZzLmEsIHdzLmEsIHhzLmEsIHlzLmEsIHpzLmEpKTsKCX0KCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoYXJyKTsKfSk7Cgp2YXIgX0xpc3Rfc29ydEJ5ID0gRjIoZnVuY3Rpb24oZiwgeHMpCnsKCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoX0xpc3RfdG9BcnJheSh4cykuc29ydChmdW5jdGlvbihhLCBiKSB7CgkJcmV0dXJuIF9VdGlsc19jbXAoZihhKSwgZihiKSk7Cgl9KSk7Cn0pOwoKdmFyIF9MaXN0X3NvcnRXaXRoID0gRjIoZnVuY3Rpb24oZiwgeHMpCnsKCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoX0xpc3RfdG9BcnJheSh4cykuc29ydChmdW5jdGlvbihhLCBiKSB7CgkJdmFyIG9yZCA9IEEyKGYsIGEsIGIpOwoJCXJldHVybiBvcmQgPT09ICRlbG0kY29yZSRCYXNpY3MkRVEgPyAwIDogb3JkID09PSAkZWxtJGNvcmUkQmFzaWNzJExUID8gLTEgOiAxOwoJfSkpOwp9KTsKCgoKLy8gTUFUSAoKdmFyIF9CYXNpY3NfYWRkID0gRjIoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYSArIGI7IH0pOwp2YXIgX0Jhc2ljc19zdWIgPSBGMihmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7CnZhciBfQmFzaWNzX211bCA9IEYyKGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEgKiBiOyB9KTsKdmFyIF9CYXNpY3NfZmRpdiA9IEYyKGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEgLyBiOyB9KTsKdmFyIF9CYXNpY3NfaWRpdiA9IEYyKGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIChhIC8gYikgfCAwOyB9KTsKdmFyIF9CYXNpY3NfcG93ID0gRjIoTWF0aC5wb3cpOwoKdmFyIF9CYXNpY3NfcmVtYWluZGVyQnkgPSBGMihmdW5jdGlvbihiLCBhKSB7IHJldHVybiBhICUgYjsgfSk7CgovLyBodHRwczovL3d3dy5taWNyb3NvZnQuY29tL2VuLXVzL3Jlc2VhcmNoL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE2LzAyL2Rpdm1vZG5vdGUtbGV0dGVyLnBkZgp2YXIgX0Jhc2ljc19tb2RCeSA9IEYyKGZ1bmN0aW9uKG1vZHVsdXMsIHgpCnsKCXZhciBhbnN3ZXIgPSB4ICUgbW9kdWx1czsKCXJldHVybiBtb2R1bHVzID09PSAwCgkJPyBfRGVidWdfY3Jhc2goMTEpCgkJOgoJKChhbnN3ZXIgPiAwICYmIG1vZHVsdXMgPCAwKSB8fCAoYW5zd2VyIDwgMCAmJiBtb2R1bHVzID4gMCkpCgkJPyBhbnN3ZXIgKyBtb2R1bHVzCgkJOiBhbnN3ZXI7Cn0pOwoKCi8vIFRSSUdPTk9NRVRSWQoKdmFyIF9CYXNpY3NfcGkgPSBNYXRoLlBJOwp2YXIgX0Jhc2ljc19lID0gTWF0aC5FOwp2YXIgX0Jhc2ljc19jb3MgPSBNYXRoLmNvczsKdmFyIF9CYXNpY3Nfc2luID0gTWF0aC5zaW47CnZhciBfQmFzaWNzX3RhbiA9IE1hdGgudGFuOwp2YXIgX0Jhc2ljc19hY29zID0gTWF0aC5hY29zOwp2YXIgX0Jhc2ljc19hc2luID0gTWF0aC5hc2luOwp2YXIgX0Jhc2ljc19hdGFuID0gTWF0aC5hdGFuOwp2YXIgX0Jhc2ljc19hdGFuMiA9IEYyKE1hdGguYXRhbjIpOwoKCi8vIE1PUkUgTUFUSAoKZnVuY3Rpb24gX0Jhc2ljc190b0Zsb2F0KHgpIHsgcmV0dXJuIHg7IH0KZnVuY3Rpb24gX0Jhc2ljc190cnVuY2F0ZShuKSB7IHJldHVybiBuIHwgMDsgfQpmdW5jdGlvbiBfQmFzaWNzX2lzSW5maW5pdGUobikgeyByZXR1cm4gbiA9PT0gSW5maW5pdHkgfHwgbiA9PT0gLUluZmluaXR5OyB9Cgp2YXIgX0Jhc2ljc19jZWlsaW5nID0gTWF0aC5jZWlsOwp2YXIgX0Jhc2ljc19mbG9vciA9IE1hdGguZmxvb3I7CnZhciBfQmFzaWNzX3JvdW5kID0gTWF0aC5yb3VuZDsKdmFyIF9CYXNpY3Nfc3FydCA9IE1hdGguc3FydDsKdmFyIF9CYXNpY3NfbG9nID0gTWF0aC5sb2c7CnZhciBfQmFzaWNzX2lzTmFOID0gaXNOYU47CgoKLy8gQk9PTEVBTlMKCmZ1bmN0aW9uIF9CYXNpY3Nfbm90KGJvb2wpIHsgcmV0dXJuICFib29sOyB9CnZhciBfQmFzaWNzX2FuZCA9IEYyKGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEgJiYgYjsgfSk7CnZhciBfQmFzaWNzX29yICA9IEYyKGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEgfHwgYjsgfSk7CnZhciBfQmFzaWNzX3hvciA9IEYyKGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEgIT09IGI7IH0pOwoKCgp2YXIgX1N0cmluZ19jb25zID0gRjIoZnVuY3Rpb24oY2hyLCBzdHIpCnsKCXJldHVybiBjaHIgKyBzdHI7Cn0pOwoKZnVuY3Rpb24gX1N0cmluZ191bmNvbnMoc3RyaW5nKQp7Cgl2YXIgd29yZCA9IHN0cmluZy5jaGFyQ29kZUF0KDApOwoJcmV0dXJuICFpc05hTih3b3JkKQoJCT8gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCTB4RDgwMCA8PSB3b3JkICYmIHdvcmQgPD0gMHhEQkZGCgkJCQk/IF9VdGlsc19UdXBsZTIoX1V0aWxzX2NocihzdHJpbmdbMF0gKyBzdHJpbmdbMV0pLCBzdHJpbmcuc2xpY2UoMikpCgkJCQk6IF9VdGlsc19UdXBsZTIoX1V0aWxzX2NocihzdHJpbmdbMF0pLCBzdHJpbmcuc2xpY2UoMSkpCgkJKQoJCTogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7Cn0KCnZhciBfU3RyaW5nX2FwcGVuZCA9IEYyKGZ1bmN0aW9uKGEsIGIpCnsKCXJldHVybiBhICsgYjsKfSk7CgpmdW5jdGlvbiBfU3RyaW5nX2xlbmd0aChzdHIpCnsKCXJldHVybiBzdHIubGVuZ3RoOwp9Cgp2YXIgX1N0cmluZ19tYXAgPSBGMihmdW5jdGlvbihmdW5jLCBzdHJpbmcpCnsKCXZhciBsZW4gPSBzdHJpbmcubGVuZ3RoOwoJdmFyIGFycmF5ID0gbmV3IEFycmF5KGxlbik7Cgl2YXIgaSA9IDA7Cgl3aGlsZSAoaSA8IGxlbikKCXsKCQl2YXIgd29yZCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpOwoJCWlmICgweEQ4MDAgPD0gd29yZCAmJiB3b3JkIDw9IDB4REJGRikKCQl7CgkJCWFycmF5W2ldID0gZnVuYyhfVXRpbHNfY2hyKHN0cmluZ1tpXSArIHN0cmluZ1tpKzFdKSk7CgkJCWkgKz0gMjsKCQkJY29udGludWU7CgkJfQoJCWFycmF5W2ldID0gZnVuYyhfVXRpbHNfY2hyKHN0cmluZ1tpXSkpOwoJCWkrKzsKCX0KCXJldHVybiBhcnJheS5qb2luKCcnKTsKfSk7Cgp2YXIgX1N0cmluZ19maWx0ZXIgPSBGMihmdW5jdGlvbihpc0dvb2QsIHN0cikKewoJdmFyIGFyciA9IFtdOwoJdmFyIGxlbiA9IHN0ci5sZW5ndGg7Cgl2YXIgaSA9IDA7Cgl3aGlsZSAoaSA8IGxlbikKCXsKCQl2YXIgY2hhciA9IHN0cltpXTsKCQl2YXIgd29yZCA9IHN0ci5jaGFyQ29kZUF0KGkpOwoJCWkrKzsKCQlpZiAoMHhEODAwIDw9IHdvcmQgJiYgd29yZCA8PSAweERCRkYpCgkJewoJCQljaGFyICs9IHN0cltpXTsKCQkJaSsrOwoJCX0KCgkJaWYgKGlzR29vZChfVXRpbHNfY2hyKGNoYXIpKSkKCQl7CgkJCWFyci5wdXNoKGNoYXIpOwoJCX0KCX0KCXJldHVybiBhcnIuam9pbignJyk7Cn0pOwoKZnVuY3Rpb24gX1N0cmluZ19yZXZlcnNlKHN0cikKewoJdmFyIGxlbiA9IHN0ci5sZW5ndGg7Cgl2YXIgYXJyID0gbmV3IEFycmF5KGxlbik7Cgl2YXIgaSA9IDA7Cgl3aGlsZSAoaSA8IGxlbikKCXsKCQl2YXIgd29yZCA9IHN0ci5jaGFyQ29kZUF0KGkpOwoJCWlmICgweEQ4MDAgPD0gd29yZCAmJiB3b3JkIDw9IDB4REJGRikKCQl7CgkJCWFycltsZW4gLSBpXSA9IHN0cltpICsgMV07CgkJCWkrKzsKCQkJYXJyW2xlbiAtIGldID0gc3RyW2kgLSAxXTsKCQkJaSsrOwoJCX0KCQllbHNlCgkJewoJCQlhcnJbbGVuIC0gaV0gPSBzdHJbaV07CgkJCWkrKzsKCQl9Cgl9CglyZXR1cm4gYXJyLmpvaW4oJycpOwp9Cgp2YXIgX1N0cmluZ19mb2xkbCA9IEYzKGZ1bmN0aW9uKGZ1bmMsIHN0YXRlLCBzdHJpbmcpCnsKCXZhciBsZW4gPSBzdHJpbmcubGVuZ3RoOwoJdmFyIGkgPSAwOwoJd2hpbGUgKGkgPCBsZW4pCgl7CgkJdmFyIGNoYXIgPSBzdHJpbmdbaV07CgkJdmFyIHdvcmQgPSBzdHJpbmcuY2hhckNvZGVBdChpKTsKCQlpKys7CgkJaWYgKDB4RDgwMCA8PSB3b3JkICYmIHdvcmQgPD0gMHhEQkZGKQoJCXsKCQkJY2hhciArPSBzdHJpbmdbaV07CgkJCWkrKzsKCQl9CgkJc3RhdGUgPSBBMihmdW5jLCBfVXRpbHNfY2hyKGNoYXIpLCBzdGF0ZSk7Cgl9CglyZXR1cm4gc3RhdGU7Cn0pOwoKdmFyIF9TdHJpbmdfZm9sZHIgPSBGMyhmdW5jdGlvbihmdW5jLCBzdGF0ZSwgc3RyaW5nKQp7Cgl2YXIgaSA9IHN0cmluZy5sZW5ndGg7Cgl3aGlsZSAoaS0tKQoJewoJCXZhciBjaGFyID0gc3RyaW5nW2ldOwoJCXZhciB3b3JkID0gc3RyaW5nLmNoYXJDb2RlQXQoaSk7CgkJaWYgKDB4REMwMCA8PSB3b3JkICYmIHdvcmQgPD0gMHhERkZGKQoJCXsKCQkJaS0tOwoJCQljaGFyID0gc3RyaW5nW2ldICsgY2hhcjsKCQl9CgkJc3RhdGUgPSBBMihmdW5jLCBfVXRpbHNfY2hyKGNoYXIpLCBzdGF0ZSk7Cgl9CglyZXR1cm4gc3RhdGU7Cn0pOwoKdmFyIF9TdHJpbmdfc3BsaXQgPSBGMihmdW5jdGlvbihzZXAsIHN0cikKewoJcmV0dXJuIHN0ci5zcGxpdChzZXApOwp9KTsKCnZhciBfU3RyaW5nX2pvaW4gPSBGMihmdW5jdGlvbihzZXAsIHN0cnMpCnsKCXJldHVybiBzdHJzLmpvaW4oc2VwKTsKfSk7Cgp2YXIgX1N0cmluZ19zbGljZSA9IEYzKGZ1bmN0aW9uKHN0YXJ0LCBlbmQsIHN0cikgewoJcmV0dXJuIHN0ci5zbGljZShzdGFydCwgZW5kKTsKfSk7CgpmdW5jdGlvbiBfU3RyaW5nX3RyaW0oc3RyKQp7CglyZXR1cm4gc3RyLnRyaW0oKTsKfQoKZnVuY3Rpb24gX1N0cmluZ190cmltTGVmdChzdHIpCnsKCXJldHVybiBzdHIucmVwbGFjZSgvXlxzKy8sICcnKTsKfQoKZnVuY3Rpb24gX1N0cmluZ190cmltUmlnaHQoc3RyKQp7CglyZXR1cm4gc3RyLnJlcGxhY2UoL1xzKyQvLCAnJyk7Cn0KCmZ1bmN0aW9uIF9TdHJpbmdfd29yZHMoc3RyKQp7CglyZXR1cm4gX0xpc3RfZnJvbUFycmF5KHN0ci50cmltKCkuc3BsaXQoL1xzKy9nKSk7Cn0KCmZ1bmN0aW9uIF9TdHJpbmdfbGluZXMoc3RyKQp7CglyZXR1cm4gX0xpc3RfZnJvbUFycmF5KHN0ci5zcGxpdCgvXHJcbnxccnxcbi9nKSk7Cn0KCmZ1bmN0aW9uIF9TdHJpbmdfdG9VcHBlcihzdHIpCnsKCXJldHVybiBzdHIudG9VcHBlckNhc2UoKTsKfQoKZnVuY3Rpb24gX1N0cmluZ190b0xvd2VyKHN0cikKewoJcmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpOwp9Cgp2YXIgX1N0cmluZ19hbnkgPSBGMihmdW5jdGlvbihpc0dvb2QsIHN0cmluZykKewoJdmFyIGkgPSBzdHJpbmcubGVuZ3RoOwoJd2hpbGUgKGktLSkKCXsKCQl2YXIgY2hhciA9IHN0cmluZ1tpXTsKCQl2YXIgd29yZCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpOwoJCWlmICgweERDMDAgPD0gd29yZCAmJiB3b3JkIDw9IDB4REZGRikKCQl7CgkJCWktLTsKCQkJY2hhciA9IHN0cmluZ1tpXSArIGNoYXI7CgkJfQoJCWlmIChpc0dvb2QoX1V0aWxzX2NocihjaGFyKSkpCgkJewoJCQlyZXR1cm4gdHJ1ZTsKCQl9Cgl9CglyZXR1cm4gZmFsc2U7Cn0pOwoKdmFyIF9TdHJpbmdfYWxsID0gRjIoZnVuY3Rpb24oaXNHb29kLCBzdHJpbmcpCnsKCXZhciBpID0gc3RyaW5nLmxlbmd0aDsKCXdoaWxlIChpLS0pCgl7CgkJdmFyIGNoYXIgPSBzdHJpbmdbaV07CgkJdmFyIHdvcmQgPSBzdHJpbmcuY2hhckNvZGVBdChpKTsKCQlpZiAoMHhEQzAwIDw9IHdvcmQgJiYgd29yZCA8PSAweERGRkYpCgkJewoJCQlpLS07CgkJCWNoYXIgPSBzdHJpbmdbaV0gKyBjaGFyOwoJCX0KCQlpZiAoIWlzR29vZChfVXRpbHNfY2hyKGNoYXIpKSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CglyZXR1cm4gdHJ1ZTsKfSk7Cgp2YXIgX1N0cmluZ19jb250YWlucyA9IEYyKGZ1bmN0aW9uKHN1Yiwgc3RyKQp7CglyZXR1cm4gc3RyLmluZGV4T2Yoc3ViKSA+IC0xOwp9KTsKCnZhciBfU3RyaW5nX3N0YXJ0c1dpdGggPSBGMihmdW5jdGlvbihzdWIsIHN0cikKewoJcmV0dXJuIHN0ci5pbmRleE9mKHN1YikgPT09IDA7Cn0pOwoKdmFyIF9TdHJpbmdfZW5kc1dpdGggPSBGMihmdW5jdGlvbihzdWIsIHN0cikKewoJcmV0dXJuIHN0ci5sZW5ndGggPj0gc3ViLmxlbmd0aCAmJgoJCXN0ci5sYXN0SW5kZXhPZihzdWIpID09PSBzdHIubGVuZ3RoIC0gc3ViLmxlbmd0aDsKfSk7Cgp2YXIgX1N0cmluZ19pbmRleGVzID0gRjIoZnVuY3Rpb24oc3ViLCBzdHIpCnsKCXZhciBzdWJMZW4gPSBzdWIubGVuZ3RoOwoKCWlmIChzdWJMZW4gPCAxKQoJewoJCXJldHVybiBfTGlzdF9OaWw7Cgl9CgoJdmFyIGkgPSAwOwoJdmFyIGlzID0gW107CgoJd2hpbGUgKChpID0gc3RyLmluZGV4T2Yoc3ViLCBpKSkgPiAtMSkKCXsKCQlpcy5wdXNoKGkpOwoJCWkgPSBpICsgc3ViTGVuOwoJfQoKCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoaXMpOwp9KTsKCgovLyBUTyBTVFJJTkcKCmZ1bmN0aW9uIF9TdHJpbmdfZnJvbU51bWJlcihudW1iZXIpCnsKCXJldHVybiBudW1iZXIgKyAnJzsKfQoKCi8vIElOVCBDT05WRVJTSU9OUwoKZnVuY3Rpb24gX1N0cmluZ190b0ludChzdHIpCnsKCXZhciB0b3RhbCA9IDA7Cgl2YXIgY29kZTAgPSBzdHIuY2hhckNvZGVBdCgwKTsKCXZhciBzdGFydCA9IGNvZGUwID09IDB4MkIgLyogKyAqLyB8fCBjb2RlMCA9PSAweDJEIC8qIC0gKi8gPyAxIDogMDsKCglmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBzdHIubGVuZ3RoOyArK2kpCgl7CgkJdmFyIGNvZGUgPSBzdHIuY2hhckNvZGVBdChpKTsKCQlpZiAoY29kZSA8IDB4MzAgfHwgMHgzOSA8IGNvZGUpCgkJewoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJfQoJCXRvdGFsID0gMTAgKiB0b3RhbCArIGNvZGUgLSAweDMwOwoJfQoKCXJldHVybiBpID09IHN0YXJ0CgkJPyAkZWxtJGNvcmUkTWF5YmUkTm90aGluZwoJCTogJGVsbSRjb3JlJE1heWJlJEp1c3QoY29kZTAgPT0gMHgyRCA/IC10b3RhbCA6IHRvdGFsKTsKfQoKCi8vIEZMT0FUIENPTlZFUlNJT05TCgpmdW5jdGlvbiBfU3RyaW5nX3RvRmxvYXQocykKewoJLy8gY2hlY2sgaWYgaXQgaXMgYSBoZXgsIG9jdGFsLCBvciBiaW5hcnkgbnVtYmVyCglpZiAocy5sZW5ndGggPT09IDAgfHwgL1tcc3hib10vLnRlc3QocykpCgl7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfQoJdmFyIG4gPSArczsKCS8vIGZhc3RlciBpc05hTiBjaGVjawoJcmV0dXJuIG4gPT09IG4gPyAkZWxtJGNvcmUkTWF5YmUkSnVzdChuKSA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwp9CgpmdW5jdGlvbiBfU3RyaW5nX2Zyb21MaXN0KGNoYXJzKQp7CglyZXR1cm4gX0xpc3RfdG9BcnJheShjaGFycykuam9pbignJyk7Cn0KCgoKCmZ1bmN0aW9uIF9DaGFyX3RvQ29kZShjaGFyKQp7Cgl2YXIgY29kZSA9IGNoYXIuY2hhckNvZGVBdCgwKTsKCWlmICgweEQ4MDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4REJGRikKCXsKCQlyZXR1cm4gKGNvZGUgLSAweEQ4MDApICogMHg0MDAgKyBjaGFyLmNoYXJDb2RlQXQoMSkgLSAweERDMDAgKyAweDEwMDAwCgl9CglyZXR1cm4gY29kZTsKfQoKZnVuY3Rpb24gX0NoYXJfZnJvbUNvZGUoY29kZSkKewoJcmV0dXJuIF9VdGlsc19jaHIoCgkJKGNvZGUgPCAwIHx8IDB4MTBGRkZGIDwgY29kZSkKCQkJPyAnXHVGRkZEJwoJCQk6CgkJKGNvZGUgPD0gMHhGRkZGKQoJCQk/IFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSkKCQkJOgoJCShjb2RlIC09IDB4MTAwMDAsCgkJCVN0cmluZy5mcm9tQ2hhckNvZGUoTWF0aC5mbG9vcihjb2RlIC8gMHg0MDApICsgMHhEODAwLCBjb2RlICUgMHg0MDAgKyAweERDMDApCgkJKQoJKTsKfQoKZnVuY3Rpb24gX0NoYXJfdG9VcHBlcihjaGFyKQp7CglyZXR1cm4gX1V0aWxzX2NocihjaGFyLnRvVXBwZXJDYXNlKCkpOwp9CgpmdW5jdGlvbiBfQ2hhcl90b0xvd2VyKGNoYXIpCnsKCXJldHVybiBfVXRpbHNfY2hyKGNoYXIudG9Mb3dlckNhc2UoKSk7Cn0KCmZ1bmN0aW9uIF9DaGFyX3RvTG9jYWxlVXBwZXIoY2hhcikKewoJcmV0dXJuIF9VdGlsc19jaHIoY2hhci50b0xvY2FsZVVwcGVyQ2FzZSgpKTsKfQoKZnVuY3Rpb24gX0NoYXJfdG9Mb2NhbGVMb3dlcihjaGFyKQp7CglyZXR1cm4gX1V0aWxzX2NocihjaGFyLnRvTG9jYWxlTG93ZXJDYXNlKCkpOwp9CgoKCi8qKi8KZnVuY3Rpb24gX0pzb25fZXJyb3JUb1N0cmluZyhlcnJvcikKewoJcmV0dXJuICRlbG0kanNvbiRKc29uJERlY29kZSRlcnJvclRvU3RyaW5nKGVycm9yKTsKfQovLyovCgoKLy8gQ09SRSBERUNPREVSUwoKZnVuY3Rpb24gX0pzb25fc3VjY2VlZChtc2cpCnsKCXJldHVybiB7CgkJJDogMCwKCQlhOiBtc2cKCX07Cn0KCmZ1bmN0aW9uIF9Kc29uX2ZhaWwobXNnKQp7CglyZXR1cm4gewoJCSQ6IDEsCgkJYTogbXNnCgl9Owp9CgpmdW5jdGlvbiBfSnNvbl9kZWNvZGVQcmltKGRlY29kZXIpCnsKCXJldHVybiB7ICQ6IDIsIGI6IGRlY29kZXIgfTsKfQoKdmFyIF9Kc29uX2RlY29kZUludCA9IF9Kc29uX2RlY29kZVByaW0oZnVuY3Rpb24odmFsdWUpIHsKCXJldHVybiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykKCQk/IF9Kc29uX2V4cGVjdGluZygnYW4gSU5UJywgdmFsdWUpCgkJOgoJKC0yMTQ3NDgzNjQ3IDwgdmFsdWUgJiYgdmFsdWUgPCAyMTQ3NDgzNjQ3ICYmICh2YWx1ZSB8IDApID09PSB2YWx1ZSkKCQk/ICRlbG0kY29yZSRSZXN1bHQkT2sodmFsdWUpCgkJOgoJKGlzRmluaXRlKHZhbHVlKSAmJiAhKHZhbHVlICUgMSkpCgkJPyAkZWxtJGNvcmUkUmVzdWx0JE9rKHZhbHVlKQoJCTogX0pzb25fZXhwZWN0aW5nKCdhbiBJTlQnLCB2YWx1ZSk7Cn0pOwoKdmFyIF9Kc29uX2RlY29kZUJvb2wgPSBfSnNvbl9kZWNvZGVQcmltKGZ1bmN0aW9uKHZhbHVlKSB7CglyZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKQoJCT8gJGVsbSRjb3JlJFJlc3VsdCRPayh2YWx1ZSkKCQk6IF9Kc29uX2V4cGVjdGluZygnYSBCT09MJywgdmFsdWUpOwp9KTsKCnZhciBfSnNvbl9kZWNvZGVGbG9hdCA9IF9Kc29uX2RlY29kZVByaW0oZnVuY3Rpb24odmFsdWUpIHsKCXJldHVybiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykKCQk/ICRlbG0kY29yZSRSZXN1bHQkT2sodmFsdWUpCgkJOiBfSnNvbl9leHBlY3RpbmcoJ2EgRkxPQVQnLCB2YWx1ZSk7Cn0pOwoKdmFyIF9Kc29uX2RlY29kZVZhbHVlID0gX0pzb25fZGVjb2RlUHJpbShmdW5jdGlvbih2YWx1ZSkgewoJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soX0pzb25fd3JhcCh2YWx1ZSkpOwp9KTsKCnZhciBfSnNvbl9kZWNvZGVTdHJpbmcgPSBfSnNvbl9kZWNvZGVQcmltKGZ1bmN0aW9uKHZhbHVlKSB7CglyZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpCgkJPyAkZWxtJGNvcmUkUmVzdWx0JE9rKHZhbHVlKQoJCTogKHZhbHVlIGluc3RhbmNlb2YgU3RyaW5nKQoJCQk/ICRlbG0kY29yZSRSZXN1bHQkT2sodmFsdWUgKyAnJykKCQkJOiBfSnNvbl9leHBlY3RpbmcoJ2EgU1RSSU5HJywgdmFsdWUpOwp9KTsKCmZ1bmN0aW9uIF9Kc29uX2RlY29kZUxpc3QoZGVjb2RlcikgeyByZXR1cm4geyAkOiAzLCBiOiBkZWNvZGVyIH07IH0KZnVuY3Rpb24gX0pzb25fZGVjb2RlQXJyYXkoZGVjb2RlcikgeyByZXR1cm4geyAkOiA0LCBiOiBkZWNvZGVyIH07IH0KCmZ1bmN0aW9uIF9Kc29uX2RlY29kZU51bGwodmFsdWUpIHsgcmV0dXJuIHsgJDogNSwgYzogdmFsdWUgfTsgfQoKdmFyIF9Kc29uX2RlY29kZUZpZWxkID0gRjIoZnVuY3Rpb24oZmllbGQsIGRlY29kZXIpCnsKCXJldHVybiB7CgkJJDogNiwKCQlkOiBmaWVsZCwKCQliOiBkZWNvZGVyCgl9Owp9KTsKCnZhciBfSnNvbl9kZWNvZGVJbmRleCA9IEYyKGZ1bmN0aW9uKGluZGV4LCBkZWNvZGVyKQp7CglyZXR1cm4gewoJCSQ6IDcsCgkJZTogaW5kZXgsCgkJYjogZGVjb2RlcgoJfTsKfSk7CgpmdW5jdGlvbiBfSnNvbl9kZWNvZGVLZXlWYWx1ZVBhaXJzKGRlY29kZXIpCnsKCXJldHVybiB7CgkJJDogOCwKCQliOiBkZWNvZGVyCgl9Owp9CgpmdW5jdGlvbiBfSnNvbl9tYXBNYW55KGYsIGRlY29kZXJzKQp7CglyZXR1cm4gewoJCSQ6IDksCgkJZjogZiwKCQlnOiBkZWNvZGVycwoJfTsKfQoKdmFyIF9Kc29uX2FuZFRoZW4gPSBGMihmdW5jdGlvbihjYWxsYmFjaywgZGVjb2RlcikKewoJcmV0dXJuIHsKCQkkOiAxMCwKCQliOiBkZWNvZGVyLAoJCWg6IGNhbGxiYWNrCgl9Owp9KTsKCmZ1bmN0aW9uIF9Kc29uX29uZU9mKGRlY29kZXJzKQp7CglyZXR1cm4gewoJCSQ6IDExLAoJCWc6IGRlY29kZXJzCgl9Owp9CgoKLy8gREVDT0RJTkcgT0JKRUNUUwoKdmFyIF9Kc29uX21hcDEgPSBGMihmdW5jdGlvbihmLCBkMSkKewoJcmV0dXJuIF9Kc29uX21hcE1hbnkoZiwgW2QxXSk7Cn0pOwoKdmFyIF9Kc29uX21hcDIgPSBGMyhmdW5jdGlvbihmLCBkMSwgZDIpCnsKCXJldHVybiBfSnNvbl9tYXBNYW55KGYsIFtkMSwgZDJdKTsKfSk7Cgp2YXIgX0pzb25fbWFwMyA9IEY0KGZ1bmN0aW9uKGYsIGQxLCBkMiwgZDMpCnsKCXJldHVybiBfSnNvbl9tYXBNYW55KGYsIFtkMSwgZDIsIGQzXSk7Cn0pOwoKdmFyIF9Kc29uX21hcDQgPSBGNShmdW5jdGlvbihmLCBkMSwgZDIsIGQzLCBkNCkKewoJcmV0dXJuIF9Kc29uX21hcE1hbnkoZiwgW2QxLCBkMiwgZDMsIGQ0XSk7Cn0pOwoKdmFyIF9Kc29uX21hcDUgPSBGNihmdW5jdGlvbihmLCBkMSwgZDIsIGQzLCBkNCwgZDUpCnsKCXJldHVybiBfSnNvbl9tYXBNYW55KGYsIFtkMSwgZDIsIGQzLCBkNCwgZDVdKTsKfSk7Cgp2YXIgX0pzb25fbWFwNiA9IEY3KGZ1bmN0aW9uKGYsIGQxLCBkMiwgZDMsIGQ0LCBkNSwgZDYpCnsKCXJldHVybiBfSnNvbl9tYXBNYW55KGYsIFtkMSwgZDIsIGQzLCBkNCwgZDUsIGQ2XSk7Cn0pOwoKdmFyIF9Kc29uX21hcDcgPSBGOChmdW5jdGlvbihmLCBkMSwgZDIsIGQzLCBkNCwgZDUsIGQ2LCBkNykKewoJcmV0dXJuIF9Kc29uX21hcE1hbnkoZiwgW2QxLCBkMiwgZDMsIGQ0LCBkNSwgZDYsIGQ3XSk7Cn0pOwoKdmFyIF9Kc29uX21hcDggPSBGOShmdW5jdGlvbihmLCBkMSwgZDIsIGQzLCBkNCwgZDUsIGQ2LCBkNywgZDgpCnsKCXJldHVybiBfSnNvbl9tYXBNYW55KGYsIFtkMSwgZDIsIGQzLCBkNCwgZDUsIGQ2LCBkNywgZDhdKTsKfSk7CgoKLy8gREVDT0RFCgp2YXIgX0pzb25fcnVuT25TdHJpbmcgPSBGMihmdW5jdGlvbihkZWNvZGVyLCBzdHJpbmcpCnsKCXRyeQoJewoJCXZhciB2YWx1ZSA9IEpTT04ucGFyc2Uoc3RyaW5nKTsKCQlyZXR1cm4gX0pzb25fcnVuSGVscChkZWNvZGVyLCB2YWx1ZSk7Cgl9CgljYXRjaCAoZSkKCXsKCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJEZhaWx1cmUsICdUaGlzIGlzIG5vdCB2YWxpZCBKU09OISAnICsgZS5tZXNzYWdlLCBfSnNvbl93cmFwKHN0cmluZykpKTsKCX0KfSk7Cgp2YXIgX0pzb25fcnVuID0gRjIoZnVuY3Rpb24oZGVjb2RlciwgdmFsdWUpCnsKCXJldHVybiBfSnNvbl9ydW5IZWxwKGRlY29kZXIsIF9Kc29uX3Vud3JhcCh2YWx1ZSkpOwp9KTsKCmZ1bmN0aW9uIF9Kc29uX3J1bkhlbHAoZGVjb2RlciwgdmFsdWUpCnsKCXN3aXRjaCAoZGVjb2Rlci4kKQoJewoJCWNhc2UgMjoKCQkJcmV0dXJuIGRlY29kZXIuYih2YWx1ZSk7CgoJCWNhc2UgNToKCQkJcmV0dXJuICh2YWx1ZSA9PT0gbnVsbCkKCQkJCT8gJGVsbSRjb3JlJFJlc3VsdCRPayhkZWNvZGVyLmMpCgkJCQk6IF9Kc29uX2V4cGVjdGluZygnbnVsbCcsIHZhbHVlKTsKCgkJY2FzZSAzOgoJCQlpZiAoIV9Kc29uX2lzQXJyYXkodmFsdWUpKQoJCQl7CgkJCQlyZXR1cm4gX0pzb25fZXhwZWN0aW5nKCdhIExJU1QnLCB2YWx1ZSk7CgkJCX0KCQkJcmV0dXJuIF9Kc29uX3J1bkFycmF5RGVjb2RlcihkZWNvZGVyLmIsIHZhbHVlLCBfTGlzdF9mcm9tQXJyYXkpOwoKCQljYXNlIDQ6CgkJCWlmICghX0pzb25faXNBcnJheSh2YWx1ZSkpCgkJCXsKCQkJCXJldHVybiBfSnNvbl9leHBlY3RpbmcoJ2FuIEFSUkFZJywgdmFsdWUpOwoJCQl9CgkJCXJldHVybiBfSnNvbl9ydW5BcnJheURlY29kZXIoZGVjb2Rlci5iLCB2YWx1ZSwgX0pzb25fdG9FbG1BcnJheSk7CgoJCWNhc2UgNjoKCQkJdmFyIGZpZWxkID0gZGVjb2Rlci5kOwoJCQlpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCB8fCAhKGZpZWxkIGluIHZhbHVlKSkKCQkJewoJCQkJcmV0dXJuIF9Kc29uX2V4cGVjdGluZygnYW4gT0JKRUNUIHdpdGggYSBmaWVsZCBuYW1lZCBgJyArIGZpZWxkICsgJ2AnLCB2YWx1ZSk7CgkJCX0KCQkJdmFyIHJlc3VsdCA9IF9Kc29uX3J1bkhlbHAoZGVjb2Rlci5iLCB2YWx1ZVtmaWVsZF0pOwoJCQlyZXR1cm4gKCRlbG0kY29yZSRSZXN1bHQkaXNPayhyZXN1bHQpKSA/IHJlc3VsdCA6ICRlbG0kY29yZSRSZXN1bHQkRXJyKEEyKCRlbG0kanNvbiRKc29uJERlY29kZSRGaWVsZCwgZmllbGQsIHJlc3VsdC5hKSk7CgoJCWNhc2UgNzoKCQkJdmFyIGluZGV4ID0gZGVjb2Rlci5lOwoJCQlpZiAoIV9Kc29uX2lzQXJyYXkodmFsdWUpKQoJCQl7CgkJCQlyZXR1cm4gX0pzb25fZXhwZWN0aW5nKCdhbiBBUlJBWScsIHZhbHVlKTsKCQkJfQoJCQlpZiAoaW5kZXggPj0gdmFsdWUubGVuZ3RoKQoJCQl7CgkJCQlyZXR1cm4gX0pzb25fZXhwZWN0aW5nKCdhIExPTkdFUiBhcnJheS4gTmVlZCBpbmRleCAnICsgaW5kZXggKyAnIGJ1dCBvbmx5IHNlZSAnICsgdmFsdWUubGVuZ3RoICsgJyBlbnRyaWVzJywgdmFsdWUpOwoJCQl9CgkJCXZhciByZXN1bHQgPSBfSnNvbl9ydW5IZWxwKGRlY29kZXIuYiwgdmFsdWVbaW5kZXhdKTsKCQkJcmV0dXJuICgkZWxtJGNvcmUkUmVzdWx0JGlzT2socmVzdWx0KSkgPyByZXN1bHQgOiAkZWxtJGNvcmUkUmVzdWx0JEVycihBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkSW5kZXgsIGluZGV4LCByZXN1bHQuYSkpOwoKCQljYXNlIDg6CgkJCWlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IHZhbHVlID09PSBudWxsIHx8IF9Kc29uX2lzQXJyYXkodmFsdWUpKQoJCQl7CgkJCQlyZXR1cm4gX0pzb25fZXhwZWN0aW5nKCdhbiBPQkpFQ1QnLCB2YWx1ZSk7CgkJCX0KCgkJCXZhciBrZXlWYWx1ZVBhaXJzID0gX0xpc3RfTmlsOwoJCQkvLyBUT0RPIHRlc3QgcGVyZiBvZiBPYmplY3Qua2V5cyBhbmQgc3dpdGNoIHdoZW4gc3VwcG9ydCBpcyBnb29kIGVub3VnaAoJCQlmb3IgKHZhciBrZXkgaW4gdmFsdWUpCgkJCXsKCQkJCWlmICh2YWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKQoJCQkJewoJCQkJCXZhciByZXN1bHQgPSBfSnNvbl9ydW5IZWxwKGRlY29kZXIuYiwgdmFsdWVba2V5XSk7CgkJCQkJaWYgKCEkZWxtJGNvcmUkUmVzdWx0JGlzT2socmVzdWx0KSkKCQkJCQl7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkRmllbGQsIGtleSwgcmVzdWx0LmEpKTsKCQkJCQl9CgkJCQkJa2V5VmFsdWVQYWlycyA9IF9MaXN0X0NvbnMoX1V0aWxzX1R1cGxlMihrZXksIHJlc3VsdC5hKSwga2V5VmFsdWVQYWlycyk7CgkJCQl9CgkJCX0KCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShrZXlWYWx1ZVBhaXJzKSk7CgoJCWNhc2UgOToKCQkJdmFyIGFuc3dlciA9IGRlY29kZXIuZjsKCQkJdmFyIGRlY29kZXJzID0gZGVjb2Rlci5nOwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGRlY29kZXJzLmxlbmd0aDsgaSsrKQoJCQl7CgkJCQl2YXIgcmVzdWx0ID0gX0pzb25fcnVuSGVscChkZWNvZGVyc1tpXSwgdmFsdWUpOwoJCQkJaWYgKCEkZWxtJGNvcmUkUmVzdWx0JGlzT2socmVzdWx0KSkKCQkJCXsKCQkJCQlyZXR1cm4gcmVzdWx0OwoJCQkJfQoJCQkJYW5zd2VyID0gYW5zd2VyKHJlc3VsdC5hKTsKCQkJfQoJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPayhhbnN3ZXIpOwoKCQljYXNlIDEwOgoJCQl2YXIgcmVzdWx0ID0gX0pzb25fcnVuSGVscChkZWNvZGVyLmIsIHZhbHVlKTsKCQkJcmV0dXJuICghJGVsbSRjb3JlJFJlc3VsdCRpc09rKHJlc3VsdCkpCgkJCQk/IHJlc3VsdAoJCQkJOiBfSnNvbl9ydW5IZWxwKGRlY29kZXIuaChyZXN1bHQuYSksIHZhbHVlKTsKCgkJY2FzZSAxMToKCQkJdmFyIGVycm9ycyA9IF9MaXN0X05pbDsKCQkJZm9yICh2YXIgdGVtcCA9IGRlY29kZXIuZzsgdGVtcC5iOyB0ZW1wID0gdGVtcC5iKSAvLyBXSElMRV9DT05TCgkJCXsKCQkJCXZhciByZXN1bHQgPSBfSnNvbl9ydW5IZWxwKHRlbXAuYSwgdmFsdWUpOwoJCQkJaWYgKCRlbG0kY29yZSRSZXN1bHQkaXNPayhyZXN1bHQpKQoJCQkJewoJCQkJCXJldHVybiByZXN1bHQ7CgkJCQl9CgkJCQllcnJvcnMgPSBfTGlzdF9Db25zKHJlc3VsdC5hLCBlcnJvcnMpOwoJCQl9CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigkZWxtJGpzb24kSnNvbiREZWNvZGUkT25lT2YoJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShlcnJvcnMpKSk7CgoJCWNhc2UgMToKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKEEyKCRlbG0kanNvbiRKc29uJERlY29kZSRGYWlsdXJlLCBkZWNvZGVyLmEsIF9Kc29uX3dyYXAodmFsdWUpKSk7CgoJCWNhc2UgMDoKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soZGVjb2Rlci5hKTsKCX0KfQoKZnVuY3Rpb24gX0pzb25fcnVuQXJyYXlEZWNvZGVyKGRlY29kZXIsIHZhbHVlLCB0b0VsbVZhbHVlKQp7Cgl2YXIgbGVuID0gdmFsdWUubGVuZ3RoOwoJdmFyIGFycmF5ID0gbmV3IEFycmF5KGxlbik7Cglmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKQoJewoJCXZhciByZXN1bHQgPSBfSnNvbl9ydW5IZWxwKGRlY29kZXIsIHZhbHVlW2ldKTsKCQlpZiAoISRlbG0kY29yZSRSZXN1bHQkaXNPayhyZXN1bHQpKQoJCXsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKEEyKCRlbG0kanNvbiRKc29uJERlY29kZSRJbmRleCwgaSwgcmVzdWx0LmEpKTsKCQl9CgkJYXJyYXlbaV0gPSByZXN1bHQuYTsKCX0KCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKHRvRWxtVmFsdWUoYXJyYXkpKTsKfQoKZnVuY3Rpb24gX0pzb25faXNBcnJheSh2YWx1ZSkKewoJcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpIHx8ICh0eXBlb2YgRmlsZUxpc3QgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlIGluc3RhbmNlb2YgRmlsZUxpc3QpOwp9CgpmdW5jdGlvbiBfSnNvbl90b0VsbUFycmF5KGFycmF5KQp7CglyZXR1cm4gQTIoJGVsbSRjb3JlJEFycmF5JGluaXRpYWxpemUsIGFycmF5Lmxlbmd0aCwgZnVuY3Rpb24oaSkgeyByZXR1cm4gYXJyYXlbaV07IH0pOwp9CgpmdW5jdGlvbiBfSnNvbl9leHBlY3RpbmcodHlwZSwgdmFsdWUpCnsKCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkRmFpbHVyZSwgJ0V4cGVjdGluZyAnICsgdHlwZSwgX0pzb25fd3JhcCh2YWx1ZSkpKTsKfQoKCi8vIEVRVUFMSVRZCgpmdW5jdGlvbiBfSnNvbl9lcXVhbGl0eSh4LCB5KQp7CglpZiAoeCA9PT0geSkKCXsKCQlyZXR1cm4gdHJ1ZTsKCX0KCglpZiAoeC4kICE9PSB5LiQpCgl7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCXN3aXRjaCAoeC4kKQoJewoJCWNhc2UgMDoKCQljYXNlIDE6CgkJCXJldHVybiB4LmEgPT09IHkuYTsKCgkJY2FzZSAyOgoJCQlyZXR1cm4geC5iID09PSB5LmI7CgoJCWNhc2UgNToKCQkJcmV0dXJuIHguYyA9PT0geS5jOwoKCQljYXNlIDM6CgkJY2FzZSA0OgoJCWNhc2UgODoKCQkJcmV0dXJuIF9Kc29uX2VxdWFsaXR5KHguYiwgeS5iKTsKCgkJY2FzZSA2OgoJCQlyZXR1cm4geC5kID09PSB5LmQgJiYgX0pzb25fZXF1YWxpdHkoeC5iLCB5LmIpOwoKCQljYXNlIDc6CgkJCXJldHVybiB4LmUgPT09IHkuZSAmJiBfSnNvbl9lcXVhbGl0eSh4LmIsIHkuYik7CgoJCWNhc2UgOToKCQkJcmV0dXJuIHguZiA9PT0geS5mICYmIF9Kc29uX2xpc3RFcXVhbGl0eSh4LmcsIHkuZyk7CgoJCWNhc2UgMTA6CgkJCXJldHVybiB4LmggPT09IHkuaCAmJiBfSnNvbl9lcXVhbGl0eSh4LmIsIHkuYik7CgoJCWNhc2UgMTE6CgkJCXJldHVybiBfSnNvbl9saXN0RXF1YWxpdHkoeC5nLCB5LmcpOwoJfQp9CgpmdW5jdGlvbiBfSnNvbl9saXN0RXF1YWxpdHkoYURlY29kZXJzLCBiRGVjb2RlcnMpCnsKCXZhciBsZW4gPSBhRGVjb2RlcnMubGVuZ3RoOwoJaWYgKGxlbiAhPT0gYkRlY29kZXJzLmxlbmd0aCkKCXsKCQlyZXR1cm4gZmFsc2U7Cgl9Cglmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKQoJewoJCWlmICghX0pzb25fZXF1YWxpdHkoYURlY29kZXJzW2ldLCBiRGVjb2RlcnNbaV0pKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCXJldHVybiB0cnVlOwp9CgoKLy8gRU5DT0RFCgp2YXIgX0pzb25fZW5jb2RlID0gRjIoZnVuY3Rpb24oaW5kZW50TGV2ZWwsIHZhbHVlKQp7CglyZXR1cm4gSlNPTi5zdHJpbmdpZnkoX0pzb25fdW53cmFwKHZhbHVlKSwgbnVsbCwgaW5kZW50TGV2ZWwpICsgJyc7Cn0pOwoKZnVuY3Rpb24gX0pzb25fd3JhcCh2YWx1ZSkgeyByZXR1cm4geyAkOiAwLCBhOiB2YWx1ZSB9OyB9CmZ1bmN0aW9uIF9Kc29uX3Vud3JhcCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUuYTsgfQoKZnVuY3Rpb24gX0pzb25fd3JhcF9VTlVTRUQodmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9CmZ1bmN0aW9uIF9Kc29uX3Vud3JhcF9VTlVTRUQodmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9CgpmdW5jdGlvbiBfSnNvbl9lbXB0eUFycmF5KCkgeyByZXR1cm4gW107IH0KZnVuY3Rpb24gX0pzb25fZW1wdHlPYmplY3QoKSB7IHJldHVybiB7fTsgfQoKdmFyIF9Kc29uX2FkZEZpZWxkID0gRjMoZnVuY3Rpb24oa2V5LCB2YWx1ZSwgb2JqZWN0KQp7CglvYmplY3Rba2V5XSA9IF9Kc29uX3Vud3JhcCh2YWx1ZSk7CglyZXR1cm4gb2JqZWN0Owp9KTsKCmZ1bmN0aW9uIF9Kc29uX2FkZEVudHJ5KGZ1bmMpCnsKCXJldHVybiBGMihmdW5jdGlvbihlbnRyeSwgYXJyYXkpCgl7CgkJYXJyYXkucHVzaChfSnNvbl91bndyYXAoZnVuYyhlbnRyeSkpKTsKCQlyZXR1cm4gYXJyYXk7Cgl9KTsKfQoKdmFyIF9Kc29uX2VuY29kZU51bGwgPSBfSnNvbl93cmFwKG51bGwpOwoKCgovLyBUQVNLUwoKZnVuY3Rpb24gX1NjaGVkdWxlcl9zdWNjZWVkKHZhbHVlKQp7CglyZXR1cm4gewoJCSQ6IDAsCgkJYTogdmFsdWUKCX07Cn0KCmZ1bmN0aW9uIF9TY2hlZHVsZXJfZmFpbChlcnJvcikKewoJcmV0dXJuIHsKCQkkOiAxLAoJCWE6IGVycm9yCgl9Owp9CgpmdW5jdGlvbiBfU2NoZWR1bGVyX2JpbmRpbmcoY2FsbGJhY2spCnsKCXJldHVybiB7CgkJJDogMiwKCQliOiBjYWxsYmFjaywKCQljOiBudWxsCgl9Owp9Cgp2YXIgX1NjaGVkdWxlcl9hbmRUaGVuID0gRjIoZnVuY3Rpb24oY2FsbGJhY2ssIHRhc2spCnsKCXJldHVybiB7CgkJJDogMywKCQliOiBjYWxsYmFjaywKCQlkOiB0YXNrCgl9Owp9KTsKCnZhciBfU2NoZWR1bGVyX29uRXJyb3IgPSBGMihmdW5jdGlvbihjYWxsYmFjaywgdGFzaykKewoJcmV0dXJuIHsKCQkkOiA0LAoJCWI6IGNhbGxiYWNrLAoJCWQ6IHRhc2sKCX07Cn0pOwoKZnVuY3Rpb24gX1NjaGVkdWxlcl9yZWNlaXZlKGNhbGxiYWNrKQp7CglyZXR1cm4gewoJCSQ6IDUsCgkJYjogY2FsbGJhY2sKCX07Cn0KCgovLyBQUk9DRVNTRVMKCnZhciBfU2NoZWR1bGVyX2d1aWQgPSAwOwoKZnVuY3Rpb24gX1NjaGVkdWxlcl9yYXdTcGF3bih0YXNrKQp7Cgl2YXIgcHJvYyA9IHsKCQkkOiAwLAoJCWU6IF9TY2hlZHVsZXJfZ3VpZCsrLAoJCWY6IHRhc2ssCgkJZzogbnVsbCwKCQloOiBbXQoJfTsKCglfU2NoZWR1bGVyX2VucXVldWUocHJvYyk7CgoJcmV0dXJuIHByb2M7Cn0KCmZ1bmN0aW9uIF9TY2hlZHVsZXJfc3Bhd24odGFzaykKewoJcmV0dXJuIF9TY2hlZHVsZXJfYmluZGluZyhmdW5jdGlvbihjYWxsYmFjaykgewoJCWNhbGxiYWNrKF9TY2hlZHVsZXJfc3VjY2VlZChfU2NoZWR1bGVyX3Jhd1NwYXduKHRhc2spKSk7Cgl9KTsKfQoKZnVuY3Rpb24gX1NjaGVkdWxlcl9yYXdTZW5kKHByb2MsIG1zZykKewoJcHJvYy5oLnB1c2gobXNnKTsKCV9TY2hlZHVsZXJfZW5xdWV1ZShwcm9jKTsKfQoKdmFyIF9TY2hlZHVsZXJfc2VuZCA9IEYyKGZ1bmN0aW9uKHByb2MsIG1zZykKewoJcmV0dXJuIF9TY2hlZHVsZXJfYmluZGluZyhmdW5jdGlvbihjYWxsYmFjaykgewoJCV9TY2hlZHVsZXJfcmF3U2VuZChwcm9jLCBtc2cpOwoJCWNhbGxiYWNrKF9TY2hlZHVsZXJfc3VjY2VlZChfVXRpbHNfVHVwbGUwKSk7Cgl9KTsKfSk7CgpmdW5jdGlvbiBfU2NoZWR1bGVyX2tpbGwocHJvYykKewoJcmV0dXJuIF9TY2hlZHVsZXJfYmluZGluZyhmdW5jdGlvbihjYWxsYmFjaykgewoJCXZhciB0YXNrID0gcHJvYy5mOwoJCWlmICh0YXNrLiQgPT09IDIgJiYgdGFzay5jKQoJCXsKCQkJdGFzay5jKCk7CgkJfQoKCQlwcm9jLmYgPSBudWxsOwoKCQljYWxsYmFjayhfU2NoZWR1bGVyX3N1Y2NlZWQoX1V0aWxzX1R1cGxlMCkpOwoJfSk7Cn0KCgovKiBTVEVQIFBST0NFU1NFUwoKdHlwZSBhbGlhcyBQcm9jZXNzID0KICB7ICQgOiB0YWcKICAsIGlkIDogdW5pcXVlX2lkCiAgLCByb290IDogVGFzawogICwgc3RhY2sgOiBudWxsIHwgeyAkOiBTVUNDRUVEIHwgRkFJTCwgYTogY2FsbGJhY2ssIGI6IHN0YWNrIH0KICAsIG1haWxib3ggOiBbbXNnXQogIH0KCiovCgoKdmFyIF9TY2hlZHVsZXJfd29ya2luZyA9IGZhbHNlOwp2YXIgX1NjaGVkdWxlcl9xdWV1ZSA9IFtdOwoKCmZ1bmN0aW9uIF9TY2hlZHVsZXJfZW5xdWV1ZShwcm9jKQp7CglfU2NoZWR1bGVyX3F1ZXVlLnB1c2gocHJvYyk7CglpZiAoX1NjaGVkdWxlcl93b3JraW5nKQoJewoJCXJldHVybjsKCX0KCV9TY2hlZHVsZXJfd29ya2luZyA9IHRydWU7Cgl3aGlsZSAocHJvYyA9IF9TY2hlZHVsZXJfcXVldWUuc2hpZnQoKSkKCXsKCQlfU2NoZWR1bGVyX3N0ZXAocHJvYyk7Cgl9CglfU2NoZWR1bGVyX3dvcmtpbmcgPSBmYWxzZTsKfQoKCmZ1bmN0aW9uIF9TY2hlZHVsZXJfc3RlcChwcm9jKQp7Cgl3aGlsZSAocHJvYy5mKQoJewoJCXZhciByb290VGFnID0gcHJvYy5mLiQ7CgkJaWYgKHJvb3RUYWcgPT09IDAgfHwgcm9vdFRhZyA9PT0gMSkKCQl7CgkJCXdoaWxlIChwcm9jLmcgJiYgcHJvYy5nLiQgIT09IHJvb3RUYWcpCgkJCXsKCQkJCXByb2MuZyA9IHByb2MuZy5pOwoJCQl9CgkJCWlmICghcHJvYy5nKQoJCQl7CgkJCQlyZXR1cm47CgkJCX0KCQkJcHJvYy5mID0gcHJvYy5nLmIocHJvYy5mLmEpOwoJCQlwcm9jLmcgPSBwcm9jLmcuaTsKCQl9CgkJZWxzZSBpZiAocm9vdFRhZyA9PT0gMikKCQl7CgkJCXByb2MuZi5jID0gcHJvYy5mLmIoZnVuY3Rpb24obmV3Um9vdCkgewoJCQkJcHJvYy5mID0gbmV3Um9vdDsKCQkJCV9TY2hlZHVsZXJfZW5xdWV1ZShwcm9jKTsKCQkJfSk7CgkJCXJldHVybjsKCQl9CgkJZWxzZSBpZiAocm9vdFRhZyA9PT0gNSkKCQl7CgkJCWlmIChwcm9jLmgubGVuZ3RoID09PSAwKQoJCQl7CgkJCQlyZXR1cm47CgkJCX0KCQkJcHJvYy5mID0gcHJvYy5mLmIocHJvYy5oLnNoaWZ0KCkpOwoJCX0KCQllbHNlIC8vIGlmIChyb290VGFnID09PSAzIHx8IHJvb3RUYWcgPT09IDQpCgkJewoJCQlwcm9jLmcgPSB7CgkJCQkkOiByb290VGFnID09PSAzID8gMCA6IDEsCgkJCQliOiBwcm9jLmYuYiwKCQkJCWk6IHByb2MuZwoJCQl9OwoJCQlwcm9jLmYgPSBwcm9jLmYuZDsKCQl9Cgl9Cn0KCgoKZnVuY3Rpb24gX1Byb2Nlc3Nfc2xlZXAodGltZSkKewoJcmV0dXJuIF9TY2hlZHVsZXJfYmluZGluZyhmdW5jdGlvbihjYWxsYmFjaykgewoJCXZhciBpZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCWNhbGxiYWNrKF9TY2hlZHVsZXJfc3VjY2VlZChfVXRpbHNfVHVwbGUwKSk7CgkJfSwgdGltZSk7CgoJCXJldHVybiBmdW5jdGlvbigpIHsgY2xlYXJUaW1lb3V0KGlkKTsgfTsKCX0pOwp9CgoKCgovLyBQUk9HUkFNUwoKCnZhciBfUGxhdGZvcm1fd29ya2VyID0gRjQoZnVuY3Rpb24oaW1wbCwgZmxhZ0RlY29kZXIsIGRlYnVnTWV0YWRhdGEsIGFyZ3MpCnsKCXJldHVybiBfUGxhdGZvcm1faW5pdGlhbGl6ZSgKCQlmbGFnRGVjb2RlciwKCQlhcmdzLAoJCWltcGwuaW5pdCwKCQlpbXBsLnVwZGF0ZSwKCQlpbXBsLnN1YnNjcmlwdGlvbnMsCgkJZnVuY3Rpb24oKSB7IHJldHVybiBmdW5jdGlvbigpIHt9IH0KCSk7Cn0pOwoKCgovLyBJTklUSUFMSVpFIEEgUFJPR1JBTQoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9pbml0aWFsaXplKGZsYWdEZWNvZGVyLCBhcmdzLCBpbml0LCB1cGRhdGUsIHN1YnNjcmlwdGlvbnMsIHN0ZXBwZXJCdWlsZGVyKQp7Cgl2YXIgcmVzdWx0ID0gQTIoX0pzb25fcnVuLCBmbGFnRGVjb2RlciwgX0pzb25fd3JhcChhcmdzID8gYXJnc1snZmxhZ3MnXSA6IHVuZGVmaW5lZCkpOwoJJGVsbSRjb3JlJFJlc3VsdCRpc09rKHJlc3VsdCkgfHwgX0RlYnVnX2NyYXNoKDIgLyoqLywgX0pzb25fZXJyb3JUb1N0cmluZyhyZXN1bHQuYSkgLyoqLyk7Cgl2YXIgbWFuYWdlcnMgPSB7fTsKCXZhciBpbml0UGFpciA9IGluaXQocmVzdWx0LmEpOwoJdmFyIG1vZGVsID0gaW5pdFBhaXIuYTsKCXZhciBzdGVwcGVyID0gc3RlcHBlckJ1aWxkZXIoc2VuZFRvQXBwLCBtb2RlbCk7Cgl2YXIgcG9ydHMgPSBfUGxhdGZvcm1fc2V0dXBFZmZlY3RzKG1hbmFnZXJzLCBzZW5kVG9BcHApOwoKCWZ1bmN0aW9uIHNlbmRUb0FwcChtc2csIHZpZXdNZXRhZGF0YSkKCXsKCQl2YXIgcGFpciA9IEEyKHVwZGF0ZSwgbXNnLCBtb2RlbCk7CgkJc3RlcHBlcihtb2RlbCA9IHBhaXIuYSwgdmlld01ldGFkYXRhKTsKCQlfUGxhdGZvcm1fZW5xdWV1ZUVmZmVjdHMobWFuYWdlcnMsIHBhaXIuYiwgc3Vic2NyaXB0aW9ucyhtb2RlbCkpOwoJfQoKCV9QbGF0Zm9ybV9lbnF1ZXVlRWZmZWN0cyhtYW5hZ2VycywgaW5pdFBhaXIuYiwgc3Vic2NyaXB0aW9ucyhtb2RlbCkpOwoKCXJldHVybiBwb3J0cyA/IHsgcG9ydHM6IHBvcnRzIH0gOiB7fTsKfQoKCgovLyBUUkFDSyBQUkVMT0FEUwovLwovLyBUaGlzIGlzIHVzZWQgYnkgY29kZSBpbiBlbG0vYnJvd3NlciBhbmQgZWxtL2h0dHAKLy8gdG8gcmVnaXN0ZXIgYW55IEhUVFAgcmVxdWVzdHMgdGhhdCBhcmUgdHJpZ2dlcmVkIGJ5IGluaXQuCi8vCgoKdmFyIF9QbGF0Zm9ybV9wcmVsb2FkOwoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9yZWdpc3RlclByZWxvYWQodXJsKQp7CglfUGxhdGZvcm1fcHJlbG9hZC5hZGQodXJsKTsKfQoKCgovLyBFRkZFQ1QgTUFOQUdFUlMKCgp2YXIgX1BsYXRmb3JtX2VmZmVjdE1hbmFnZXJzID0ge307CgoKZnVuY3Rpb24gX1BsYXRmb3JtX3NldHVwRWZmZWN0cyhtYW5hZ2Vycywgc2VuZFRvQXBwKQp7Cgl2YXIgcG9ydHM7CgoJLy8gc2V0dXAgYWxsIG5lY2Vzc2FyeSBlZmZlY3QgbWFuYWdlcnMKCWZvciAodmFyIGtleSBpbiBfUGxhdGZvcm1fZWZmZWN0TWFuYWdlcnMpCgl7CgkJdmFyIG1hbmFnZXIgPSBfUGxhdGZvcm1fZWZmZWN0TWFuYWdlcnNba2V5XTsKCgkJaWYgKG1hbmFnZXIuYSkKCQl7CgkJCXBvcnRzID0gcG9ydHMgfHwge307CgkJCXBvcnRzW2tleV0gPSBtYW5hZ2VyLmEoa2V5LCBzZW5kVG9BcHApOwoJCX0KCgkJbWFuYWdlcnNba2V5XSA9IF9QbGF0Zm9ybV9pbnN0YW50aWF0ZU1hbmFnZXIobWFuYWdlciwgc2VuZFRvQXBwKTsKCX0KCglyZXR1cm4gcG9ydHM7Cn0KCgpmdW5jdGlvbiBfUGxhdGZvcm1fY3JlYXRlTWFuYWdlcihpbml0LCBvbkVmZmVjdHMsIG9uU2VsZk1zZywgY21kTWFwLCBzdWJNYXApCnsKCXJldHVybiB7CgkJYjogaW5pdCwKCQljOiBvbkVmZmVjdHMsCgkJZDogb25TZWxmTXNnLAoJCWU6IGNtZE1hcCwKCQlmOiBzdWJNYXAKCX07Cn0KCgpmdW5jdGlvbiBfUGxhdGZvcm1faW5zdGFudGlhdGVNYW5hZ2VyKGluZm8sIHNlbmRUb0FwcCkKewoJdmFyIHJvdXRlciA9IHsKCQlnOiBzZW5kVG9BcHAsCgkJaDogdW5kZWZpbmVkCgl9OwoKCXZhciBvbkVmZmVjdHMgPSBpbmZvLmM7Cgl2YXIgb25TZWxmTXNnID0gaW5mby5kOwoJdmFyIGNtZE1hcCA9IGluZm8uZTsKCXZhciBzdWJNYXAgPSBpbmZvLmY7CgoJZnVuY3Rpb24gbG9vcChzdGF0ZSkKCXsKCQlyZXR1cm4gQTIoX1NjaGVkdWxlcl9hbmRUaGVuLCBsb29wLCBfU2NoZWR1bGVyX3JlY2VpdmUoZnVuY3Rpb24obXNnKQoJCXsKCQkJdmFyIHZhbHVlID0gbXNnLmE7CgoJCQlpZiAobXNnLiQgPT09IDApCgkJCXsKCQkJCXJldHVybiBBMyhvblNlbGZNc2csIHJvdXRlciwgdmFsdWUsIHN0YXRlKTsKCQkJfQoKCQkJcmV0dXJuIGNtZE1hcCAmJiBzdWJNYXAKCQkJCT8gQTQob25FZmZlY3RzLCByb3V0ZXIsIHZhbHVlLmksIHZhbHVlLmosIHN0YXRlKQoJCQkJOiBBMyhvbkVmZmVjdHMsIHJvdXRlciwgY21kTWFwID8gdmFsdWUuaSA6IHZhbHVlLmosIHN0YXRlKTsKCQl9KSk7Cgl9CgoJcmV0dXJuIHJvdXRlci5oID0gX1NjaGVkdWxlcl9yYXdTcGF3bihBMihfU2NoZWR1bGVyX2FuZFRoZW4sIGxvb3AsIGluZm8uYikpOwp9CgoKCi8vIFJPVVRJTkcKCgp2YXIgX1BsYXRmb3JtX3NlbmRUb0FwcCA9IEYyKGZ1bmN0aW9uKHJvdXRlciwgbXNnKQp7CglyZXR1cm4gX1NjaGVkdWxlcl9iaW5kaW5nKGZ1bmN0aW9uKGNhbGxiYWNrKQoJewoJCXJvdXRlci5nKG1zZyk7CgkJY2FsbGJhY2soX1NjaGVkdWxlcl9zdWNjZWVkKF9VdGlsc19UdXBsZTApKTsKCX0pOwp9KTsKCgp2YXIgX1BsYXRmb3JtX3NlbmRUb1NlbGYgPSBGMihmdW5jdGlvbihyb3V0ZXIsIG1zZykKewoJcmV0dXJuIEEyKF9TY2hlZHVsZXJfc2VuZCwgcm91dGVyLmgsIHsKCQkkOiAwLAoJCWE6IG1zZwoJfSk7Cn0pOwoKCgovLyBCQUdTCgoKZnVuY3Rpb24gX1BsYXRmb3JtX2xlYWYoaG9tZSkKewoJcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKQoJewoJCXJldHVybiB7CgkJCSQ6IDEsCgkJCWs6IGhvbWUsCgkJCWw6IHZhbHVlCgkJfTsKCX07Cn0KCgpmdW5jdGlvbiBfUGxhdGZvcm1fYmF0Y2gobGlzdCkKewoJcmV0dXJuIHsKCQkkOiAyLAoJCW06IGxpc3QKCX07Cn0KCgp2YXIgX1BsYXRmb3JtX21hcCA9IEYyKGZ1bmN0aW9uKHRhZ2dlciwgYmFnKQp7CglyZXR1cm4gewoJCSQ6IDMsCgkJbjogdGFnZ2VyLAoJCW86IGJhZwoJfQp9KTsKCgoKLy8gUElQRSBCQUdTIElOVE8gRUZGRUNUIE1BTkFHRVJTCi8vCi8vIEVmZmVjdHMgbXVzdCBiZSBxdWV1ZWQhCi8vCi8vIFNheSB5b3VyIGluaXQgY29udGFpbnMgYSBzeW5jaHJvbm91cyBjb21tYW5kLCBsaWtlIFRpbWUubm93IG9yIFRpbWUuaGVyZQovLwovLyAgIC0gVGhpcyB3aWxsIHByb2R1Y2UgYSBiYXRjaCBvZiBlZmZlY3RzIChGWF8xKQovLyAgIC0gVGhlIHN5bmNocm9ub3VzIHRhc2sgdHJpZ2dlcnMgdGhlIHN1YnNlcXVlbnQgYHVwZGF0ZWAgY2FsbAovLyAgIC0gVGhpcyB3aWxsIHByb2R1Y2UgYSBiYXRjaCBvZiBlZmZlY3RzIChGWF8yKQovLwovLyBJZiB3ZSBqdXN0IHN0YXJ0IGRpc3BhdGNoaW5nIEZYXzIsIHN1YnNjcmlwdGlvbnMgZnJvbSBGWF8yIGNhbiBiZSBwcm9jZXNzZWQKLy8gYmVmb3JlIHN1YnNjcmlwdGlvbnMgZnJvbSBGWF8xLiBObyBnb29kISBFYXJsaWVyIHZlcnNpb25zIG9mIHRoaXMgY29kZSBoYWQKLy8gdGhpcyBwcm9ibGVtLCBsZWFkaW5nIHRvIHRoZXNlIHJlcG9ydHM6Ci8vCi8vICAgaHR0cHM6Ly9naXRodWIuY29tL2VsbS9jb3JlL2lzc3Vlcy85ODAKLy8gICBodHRwczovL2dpdGh1Yi5jb20vZWxtL2NvcmUvcHVsbC85ODEKLy8gICBodHRwczovL2dpdGh1Yi5jb20vZWxtL2NvbXBpbGVyL2lzc3Vlcy8xNzc2Ci8vCi8vIFRoZSBxdWV1ZSBpcyBuZWNlc3NhcnkgdG8gYXZvaWQgb3JkZXJpbmcgaXNzdWVzIGZvciBzeW5jaHJvbm91cyBjb21tYW5kcy4KCgovLyBXaHkgdXNlIHRydWUvZmFsc2UgaGVyZT8gV2h5IG5vdCBqdXN0IGNoZWNrIHRoZSBsZW5ndGggb2YgdGhlIHF1ZXVlPwovLyBUaGUgZ29hbCBpcyB0byBkZXRlY3QgImFyZSB3ZSBjdXJyZW50bHkgZGlzcGF0Y2hpbmcgZWZmZWN0cz8iIElmIHdlCi8vIGFyZSwgd2UgbmVlZCB0byBiYWlsIGFuZCBsZXQgdGhlIG9uZ29pbmcgd2hpbGUgbG9vcCBoYW5kbGUgdGhpbmdzLgovLwovLyBOb3cgc2F5IHRoZSBxdWV1ZSBoYXMgMSBlbGVtZW50LiBXaGVuIHdlIGRlcXVldWUgdGhlIGZpbmFsIGVsZW1lbnQsCi8vIHRoZSBxdWV1ZSB3aWxsIGJlIGVtcHR5LCBidXQgd2UgYXJlIHN0aWxsIGFjdGl2ZWx5IGRpc3BhdGNoaW5nIGVmZmVjdHMuCi8vIFNvIHlvdSBjb3VsZCBnZXQgcXVldWUganVtcGluZyBpbiBhIHJlYWxseSB0cmlja3kgY2F0ZWdvcnkgb2YgY2FzZXMuCi8vCnZhciBfUGxhdGZvcm1fZWZmZWN0c1F1ZXVlID0gW107CnZhciBfUGxhdGZvcm1fZWZmZWN0c0FjdGl2ZSA9IGZhbHNlOwoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9lbnF1ZXVlRWZmZWN0cyhtYW5hZ2VycywgY21kQmFnLCBzdWJCYWcpCnsKCV9QbGF0Zm9ybV9lZmZlY3RzUXVldWUucHVzaCh7IHA6IG1hbmFnZXJzLCBxOiBjbWRCYWcsIHI6IHN1YkJhZyB9KTsKCglpZiAoX1BsYXRmb3JtX2VmZmVjdHNBY3RpdmUpIHJldHVybjsKCglfUGxhdGZvcm1fZWZmZWN0c0FjdGl2ZSA9IHRydWU7Cglmb3IgKHZhciBmeDsgZnggPSBfUGxhdGZvcm1fZWZmZWN0c1F1ZXVlLnNoaWZ0KCk7ICkKCXsKCQlfUGxhdGZvcm1fZGlzcGF0Y2hFZmZlY3RzKGZ4LnAsIGZ4LnEsIGZ4LnIpOwoJfQoJX1BsYXRmb3JtX2VmZmVjdHNBY3RpdmUgPSBmYWxzZTsKfQoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9kaXNwYXRjaEVmZmVjdHMobWFuYWdlcnMsIGNtZEJhZywgc3ViQmFnKQp7Cgl2YXIgZWZmZWN0c0RpY3QgPSB7fTsKCV9QbGF0Zm9ybV9nYXRoZXJFZmZlY3RzKHRydWUsIGNtZEJhZywgZWZmZWN0c0RpY3QsIG51bGwpOwoJX1BsYXRmb3JtX2dhdGhlckVmZmVjdHMoZmFsc2UsIHN1YkJhZywgZWZmZWN0c0RpY3QsIG51bGwpOwoKCWZvciAodmFyIGhvbWUgaW4gbWFuYWdlcnMpCgl7CgkJX1NjaGVkdWxlcl9yYXdTZW5kKG1hbmFnZXJzW2hvbWVdLCB7CgkJCSQ6ICdmeCcsCgkJCWE6IGVmZmVjdHNEaWN0W2hvbWVdIHx8IHsgaTogX0xpc3RfTmlsLCBqOiBfTGlzdF9OaWwgfQoJCX0pOwoJfQp9CgoKZnVuY3Rpb24gX1BsYXRmb3JtX2dhdGhlckVmZmVjdHMoaXNDbWQsIGJhZywgZWZmZWN0c0RpY3QsIHRhZ2dlcnMpCnsKCXN3aXRjaCAoYmFnLiQpCgl7CgkJY2FzZSAxOgoJCQl2YXIgaG9tZSA9IGJhZy5rOwoJCQl2YXIgZWZmZWN0ID0gX1BsYXRmb3JtX3RvRWZmZWN0KGlzQ21kLCBob21lLCB0YWdnZXJzLCBiYWcubCk7CgkJCWVmZmVjdHNEaWN0W2hvbWVdID0gX1BsYXRmb3JtX2luc2VydChpc0NtZCwgZWZmZWN0LCBlZmZlY3RzRGljdFtob21lXSk7CgkJCXJldHVybjsKCgkJY2FzZSAyOgoJCQlmb3IgKHZhciBsaXN0ID0gYmFnLm07IGxpc3QuYjsgbGlzdCA9IGxpc3QuYikgLy8gV0hJTEVfQ09OUwoJCQl7CgkJCQlfUGxhdGZvcm1fZ2F0aGVyRWZmZWN0cyhpc0NtZCwgbGlzdC5hLCBlZmZlY3RzRGljdCwgdGFnZ2Vycyk7CgkJCX0KCQkJcmV0dXJuOwoKCQljYXNlIDM6CgkJCV9QbGF0Zm9ybV9nYXRoZXJFZmZlY3RzKGlzQ21kLCBiYWcubywgZWZmZWN0c0RpY3QsIHsKCQkJCXM6IGJhZy5uLAoJCQkJdDogdGFnZ2VycwoJCQl9KTsKCQkJcmV0dXJuOwoJfQp9CgoKZnVuY3Rpb24gX1BsYXRmb3JtX3RvRWZmZWN0KGlzQ21kLCBob21lLCB0YWdnZXJzLCB2YWx1ZSkKewoJZnVuY3Rpb24gYXBwbHlUYWdnZXJzKHgpCgl7CgkJZm9yICh2YXIgdGVtcCA9IHRhZ2dlcnM7IHRlbXA7IHRlbXAgPSB0ZW1wLnQpCgkJewoJCQl4ID0gdGVtcC5zKHgpOwoJCX0KCQlyZXR1cm4geDsKCX0KCgl2YXIgbWFwID0gaXNDbWQKCQk/IF9QbGF0Zm9ybV9lZmZlY3RNYW5hZ2Vyc1tob21lXS5lCgkJOiBfUGxhdGZvcm1fZWZmZWN0TWFuYWdlcnNbaG9tZV0uZjsKCglyZXR1cm4gQTIobWFwLCBhcHBseVRhZ2dlcnMsIHZhbHVlKQp9CgoKZnVuY3Rpb24gX1BsYXRmb3JtX2luc2VydChpc0NtZCwgbmV3RWZmZWN0LCBlZmZlY3RzKQp7CgllZmZlY3RzID0gZWZmZWN0cyB8fCB7IGk6IF9MaXN0X05pbCwgajogX0xpc3RfTmlsIH07CgoJaXNDbWQKCQk/IChlZmZlY3RzLmkgPSBfTGlzdF9Db25zKG5ld0VmZmVjdCwgZWZmZWN0cy5pKSkKCQk6IChlZmZlY3RzLmogPSBfTGlzdF9Db25zKG5ld0VmZmVjdCwgZWZmZWN0cy5qKSk7CgoJcmV0dXJuIGVmZmVjdHM7Cn0KCgoKLy8gUE9SVFMKCgpmdW5jdGlvbiBfUGxhdGZvcm1fY2hlY2tQb3J0TmFtZShuYW1lKQp7CglpZiAoX1BsYXRmb3JtX2VmZmVjdE1hbmFnZXJzW25hbWVdKQoJewoJCV9EZWJ1Z19jcmFzaCgzLCBuYW1lKQoJfQp9CgoKCi8vIE9VVEdPSU5HIFBPUlRTCgoKZnVuY3Rpb24gX1BsYXRmb3JtX291dGdvaW5nUG9ydChuYW1lLCBjb252ZXJ0ZXIpCnsKCV9QbGF0Zm9ybV9jaGVja1BvcnROYW1lKG5hbWUpOwoJX1BsYXRmb3JtX2VmZmVjdE1hbmFnZXJzW25hbWVdID0gewoJCWU6IF9QbGF0Zm9ybV9vdXRnb2luZ1BvcnRNYXAsCgkJdTogY29udmVydGVyLAoJCWE6IF9QbGF0Zm9ybV9zZXR1cE91dGdvaW5nUG9ydAoJfTsKCXJldHVybiBfUGxhdGZvcm1fbGVhZihuYW1lKTsKfQoKCnZhciBfUGxhdGZvcm1fb3V0Z29pbmdQb3J0TWFwID0gRjIoZnVuY3Rpb24odGFnZ2VyLCB2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH0pOwoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9zZXR1cE91dGdvaW5nUG9ydChuYW1lKQp7Cgl2YXIgc3VicyA9IFtdOwoJdmFyIGNvbnZlcnRlciA9IF9QbGF0Zm9ybV9lZmZlY3RNYW5hZ2Vyc1tuYW1lXS51OwoKCS8vIENSRUFURSBNQU5BR0VSCgoJdmFyIGluaXQgPSBfUHJvY2Vzc19zbGVlcCgwKTsKCglfUGxhdGZvcm1fZWZmZWN0TWFuYWdlcnNbbmFtZV0uYiA9IGluaXQ7CglfUGxhdGZvcm1fZWZmZWN0TWFuYWdlcnNbbmFtZV0uYyA9IEYzKGZ1bmN0aW9uKHJvdXRlciwgY21kTGlzdCwgc3RhdGUpCgl7CgkJZm9yICggOyBjbWRMaXN0LmI7IGNtZExpc3QgPSBjbWRMaXN0LmIpIC8vIFdISUxFX0NPTlMKCQl7CgkJCS8vIGdyYWIgYSBzZXBhcmF0ZSByZWZlcmVuY2UgdG8gc3VicyBpbiBjYXNlIHVuc3Vic2NyaWJlIGlzIGNhbGxlZAoJCQl2YXIgY3VycmVudFN1YnMgPSBzdWJzOwoJCQl2YXIgdmFsdWUgPSBfSnNvbl91bndyYXAoY29udmVydGVyKGNtZExpc3QuYSkpOwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGN1cnJlbnRTdWJzLmxlbmd0aDsgaSsrKQoJCQl7CgkJCQljdXJyZW50U3Vic1tpXSh2YWx1ZSk7CgkJCX0KCQl9CgkJcmV0dXJuIGluaXQ7Cgl9KTsKCgkvLyBQVUJMSUMgQVBJCgoJZnVuY3Rpb24gc3Vic2NyaWJlKGNhbGxiYWNrKQoJewoJCXN1YnMucHVzaChjYWxsYmFjayk7Cgl9CgoJZnVuY3Rpb24gdW5zdWJzY3JpYmUoY2FsbGJhY2spCgl7CgkJLy8gY29weSBzdWJzIGludG8gYSBuZXcgYXJyYXkgaW4gY2FzZSB1bnN1YnNjcmliZSBpcyBjYWxsZWQgd2l0aGluIGEKCQkvLyBzdWJzY3JpYmVkIGNhbGxiYWNrCgkJc3VicyA9IHN1YnMuc2xpY2UoKTsKCQl2YXIgaW5kZXggPSBzdWJzLmluZGV4T2YoY2FsbGJhY2spOwoJCWlmIChpbmRleCA+PSAwKQoJCXsKCQkJc3Vicy5zcGxpY2UoaW5kZXgsIDEpOwoJCX0KCX0KCglyZXR1cm4gewoJCXN1YnNjcmliZTogc3Vic2NyaWJlLAoJCXVuc3Vic2NyaWJlOiB1bnN1YnNjcmliZQoJfTsKfQoKCgovLyBJTkNPTUlORyBQT1JUUwoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9pbmNvbWluZ1BvcnQobmFtZSwgY29udmVydGVyKQp7CglfUGxhdGZvcm1fY2hlY2tQb3J0TmFtZShuYW1lKTsKCV9QbGF0Zm9ybV9lZmZlY3RNYW5hZ2Vyc1tuYW1lXSA9IHsKCQlmOiBfUGxhdGZvcm1faW5jb21pbmdQb3J0TWFwLAoJCXU6IGNvbnZlcnRlciwKCQlhOiBfUGxhdGZvcm1fc2V0dXBJbmNvbWluZ1BvcnQKCX07CglyZXR1cm4gX1BsYXRmb3JtX2xlYWYobmFtZSk7Cn0KCgp2YXIgX1BsYXRmb3JtX2luY29taW5nUG9ydE1hcCA9IEYyKGZ1bmN0aW9uKHRhZ2dlciwgZmluYWxUYWdnZXIpCnsKCXJldHVybiBmdW5jdGlvbih2YWx1ZSkKCXsKCQlyZXR1cm4gdGFnZ2VyKGZpbmFsVGFnZ2VyKHZhbHVlKSk7Cgl9Owp9KTsKCgpmdW5jdGlvbiBfUGxhdGZvcm1fc2V0dXBJbmNvbWluZ1BvcnQobmFtZSwgc2VuZFRvQXBwKQp7Cgl2YXIgc3VicyA9IF9MaXN0X05pbDsKCXZhciBjb252ZXJ0ZXIgPSBfUGxhdGZvcm1fZWZmZWN0TWFuYWdlcnNbbmFtZV0udTsKCgkvLyBDUkVBVEUgTUFOQUdFUgoKCXZhciBpbml0ID0gX1NjaGVkdWxlcl9zdWNjZWVkKG51bGwpOwoKCV9QbGF0Zm9ybV9lZmZlY3RNYW5hZ2Vyc1tuYW1lXS5iID0gaW5pdDsKCV9QbGF0Zm9ybV9lZmZlY3RNYW5hZ2Vyc1tuYW1lXS5jID0gRjMoZnVuY3Rpb24ocm91dGVyLCBzdWJMaXN0LCBzdGF0ZSkKCXsKCQlzdWJzID0gc3ViTGlzdDsKCQlyZXR1cm4gaW5pdDsKCX0pOwoKCS8vIFBVQkxJQyBBUEkKCglmdW5jdGlvbiBzZW5kKGluY29taW5nVmFsdWUpCgl7CgkJdmFyIHJlc3VsdCA9IEEyKF9Kc29uX3J1biwgY29udmVydGVyLCBfSnNvbl93cmFwKGluY29taW5nVmFsdWUpKTsKCgkJJGVsbSRjb3JlJFJlc3VsdCRpc09rKHJlc3VsdCkgfHwgX0RlYnVnX2NyYXNoKDQsIG5hbWUsIHJlc3VsdC5hKTsKCgkJdmFyIHZhbHVlID0gcmVzdWx0LmE7CgkJZm9yICh2YXIgdGVtcCA9IHN1YnM7IHRlbXAuYjsgdGVtcCA9IHRlbXAuYikgLy8gV0hJTEVfQ09OUwoJCXsKCQkJc2VuZFRvQXBwKHRlbXAuYSh2YWx1ZSkpOwoJCX0KCX0KCglyZXR1cm4geyBzZW5kOiBzZW5kIH07Cn0KCgoKLy8gRVhQT1JUIEVMTSBNT0RVTEVTCi8vCi8vIEhhdmUgREVCVUcgYW5kIFBST0QgdmVyc2lvbnMgc28gdGhhdCB3ZSBjYW4gKDEpIGdpdmUgbmljZXIgZXJyb3JzIGluCi8vIGRlYnVnIG1vZGUgYW5kICgyKSBub3QgcGF5IGZvciB0aGUgYml0cyBuZWVkZWQgZm9yIHRoYXQgaW4gcHJvZCBtb2RlLgovLwoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9leHBvcnRfVU5VU0VEKGV4cG9ydHMpCnsKCXNjb3BlWydFbG0nXQoJCT8gX1BsYXRmb3JtX21lcmdlRXhwb3J0c1Byb2Qoc2NvcGVbJ0VsbSddLCBleHBvcnRzKQoJCTogc2NvcGVbJ0VsbSddID0gZXhwb3J0czsKfQoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9tZXJnZUV4cG9ydHNQcm9kKG9iaiwgZXhwb3J0cykKewoJZm9yICh2YXIgbmFtZSBpbiBleHBvcnRzKQoJewoJCShuYW1lIGluIG9iaikKCQkJPyAobmFtZSA9PSAnaW5pdCcpCgkJCQk/IF9EZWJ1Z19jcmFzaCg2KQoJCQkJOiBfUGxhdGZvcm1fbWVyZ2VFeHBvcnRzUHJvZChvYmpbbmFtZV0sIGV4cG9ydHNbbmFtZV0pCgkJCTogKG9ialtuYW1lXSA9IGV4cG9ydHNbbmFtZV0pOwoJfQp9CgoKZnVuY3Rpb24gX1BsYXRmb3JtX2V4cG9ydChleHBvcnRzKQp7CglzY29wZVsnRWxtJ10KCQk/IF9QbGF0Zm9ybV9tZXJnZUV4cG9ydHNEZWJ1ZygnRWxtJywgc2NvcGVbJ0VsbSddLCBleHBvcnRzKQoJCTogc2NvcGVbJ0VsbSddID0gZXhwb3J0czsKfQoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9tZXJnZUV4cG9ydHNEZWJ1Zyhtb2R1bGVOYW1lLCBvYmosIGV4cG9ydHMpCnsKCWZvciAodmFyIG5hbWUgaW4gZXhwb3J0cykKCXsKCQkobmFtZSBpbiBvYmopCgkJCT8gKG5hbWUgPT0gJ2luaXQnKQoJCQkJPyBfRGVidWdfY3Jhc2goNiwgbW9kdWxlTmFtZSkKCQkJCTogX1BsYXRmb3JtX21lcmdlRXhwb3J0c0RlYnVnKG1vZHVsZU5hbWUgKyAnLicgKyBuYW1lLCBvYmpbbmFtZV0sIGV4cG9ydHNbbmFtZV0pCgkJCTogKG9ialtuYW1lXSA9IGV4cG9ydHNbbmFtZV0pOwoJfQp9CgoKCgovLyBIRUxQRVJTCgoKdmFyIF9WaXJ0dWFsRG9tX2RpdmVydEhyZWZUb0FwcDsKCnZhciBfVmlydHVhbERvbV9kb2MgPSB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnID8gZG9jdW1lbnQgOiB7fTsKCgpmdW5jdGlvbiBfVmlydHVhbERvbV9hcHBlbmRDaGlsZChwYXJlbnQsIGNoaWxkKQp7CglwYXJlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpOwp9Cgp2YXIgX1ZpcnR1YWxEb21faW5pdCA9IEY0KGZ1bmN0aW9uKHZpcnR1YWxOb2RlLCBmbGFnRGVjb2RlciwgZGVidWdNZXRhZGF0YSwgYXJncykKewoJLy8gTk9URTogdGhpcyBmdW5jdGlvbiBuZWVkcyBfUGxhdGZvcm1fZXhwb3J0IGF2YWlsYWJsZSB0byB3b3JrCgoJLyoqX1VOVVNFRC8KCXZhciBub2RlID0gYXJnc1snbm9kZSddOwoJLy8qLwoJLyoqLwoJdmFyIG5vZGUgPSBhcmdzICYmIGFyZ3NbJ25vZGUnXSA/IGFyZ3NbJ25vZGUnXSA6IF9EZWJ1Z19jcmFzaCgwKTsKCS8vKi8KCglub2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKAoJCV9WaXJ0dWFsRG9tX3JlbmRlcih2aXJ0dWFsTm9kZSwgZnVuY3Rpb24oKSB7fSksCgkJbm9kZQoJKTsKCglyZXR1cm4ge307Cn0pOwoKCgovLyBURVhUCgoKZnVuY3Rpb24gX1ZpcnR1YWxEb21fdGV4dChzdHJpbmcpCnsKCXJldHVybiB7CgkJJDogMCwKCQlhOiBzdHJpbmcKCX07Cn0KCgoKLy8gTk9ERQoKCnZhciBfVmlydHVhbERvbV9ub2RlTlMgPSBGMihmdW5jdGlvbihuYW1lc3BhY2UsIHRhZykKewoJcmV0dXJuIEYyKGZ1bmN0aW9uKGZhY3RMaXN0LCBraWRMaXN0KQoJewoJCWZvciAodmFyIGtpZHMgPSBbXSwgZGVzY2VuZGFudHNDb3VudCA9IDA7IGtpZExpc3QuYjsga2lkTGlzdCA9IGtpZExpc3QuYikgLy8gV0hJTEVfQ09OUwoJCXsKCQkJdmFyIGtpZCA9IGtpZExpc3QuYTsKCQkJZGVzY2VuZGFudHNDb3VudCArPSAoa2lkLmIgfHwgMCk7CgkJCWtpZHMucHVzaChraWQpOwoJCX0KCQlkZXNjZW5kYW50c0NvdW50ICs9IGtpZHMubGVuZ3RoOwoKCQlyZXR1cm4gewoJCQkkOiAxLAoJCQljOiB0YWcsCgkJCWQ6IF9WaXJ0dWFsRG9tX29yZ2FuaXplRmFjdHMoZmFjdExpc3QpLAoJCQllOiBraWRzLAoJCQlmOiBuYW1lc3BhY2UsCgkJCWI6IGRlc2NlbmRhbnRzQ291bnQKCQl9OwoJfSk7Cn0pOwoKCnZhciBfVmlydHVhbERvbV9ub2RlID0gX1ZpcnR1YWxEb21fbm9kZU5TKHVuZGVmaW5lZCk7CgoKCi8vIEtFWUVEIE5PREUKCgp2YXIgX1ZpcnR1YWxEb21fa2V5ZWROb2RlTlMgPSBGMihmdW5jdGlvbihuYW1lc3BhY2UsIHRhZykKewoJcmV0dXJuIEYyKGZ1bmN0aW9uKGZhY3RMaXN0LCBraWRMaXN0KQoJewoJCWZvciAodmFyIGtpZHMgPSBbXSwgZGVzY2VuZGFudHNDb3VudCA9IDA7IGtpZExpc3QuYjsga2lkTGlzdCA9IGtpZExpc3QuYikgLy8gV0hJTEVfQ09OUwoJCXsKCQkJdmFyIGtpZCA9IGtpZExpc3QuYTsKCQkJZGVzY2VuZGFudHNDb3VudCArPSAoa2lkLmIuYiB8fCAwKTsKCQkJa2lkcy5wdXNoKGtpZCk7CgkJfQoJCWRlc2NlbmRhbnRzQ291bnQgKz0ga2lkcy5sZW5ndGg7CgoJCXJldHVybiB7CgkJCSQ6IDIsCgkJCWM6IHRhZywKCQkJZDogX1ZpcnR1YWxEb21fb3JnYW5pemVGYWN0cyhmYWN0TGlzdCksCgkJCWU6IGtpZHMsCgkJCWY6IG5hbWVzcGFjZSwKCQkJYjogZGVzY2VuZGFudHNDb3VudAoJCX07Cgl9KTsKfSk7CgoKdmFyIF9WaXJ0dWFsRG9tX2tleWVkTm9kZSA9IF9WaXJ0dWFsRG9tX2tleWVkTm9kZU5TKHVuZGVmaW5lZCk7CgoKCi8vIENVU1RPTQoKCmZ1bmN0aW9uIF9WaXJ0dWFsRG9tX2N1c3RvbShmYWN0TGlzdCwgbW9kZWwsIHJlbmRlciwgZGlmZikKewoJcmV0dXJuIHsKCQkkOiAzLAoJCWQ6IF9WaXJ0dWFsRG9tX29yZ2FuaXplRmFjdHMoZmFjdExpc3QpLAoJCWc6IG1vZGVsLAoJCWg6IHJlbmRlciwKCQlpOiBkaWZmCgl9Owp9CgoKCi8vIE1BUAoKCnZhciBfVmlydHVhbERvbV9tYXAgPSBGMihmdW5jdGlvbih0YWdnZXIsIG5vZGUpCnsKCXJldHVybiB7CgkJJDogNCwKCQlqOiB0YWdnZXIsCgkJazogbm9kZSwKCQliOiAxICsgKG5vZGUuYiB8fCAwKQoJfTsKfSk7CgoKCi8vIExBWlkKCgpmdW5jdGlvbiBfVmlydHVhbERvbV90aHVuayhyZWZzLCB0aHVuaykKewoJcmV0dXJuIHsKCQkkOiA1LAoJCWw6IHJlZnMsCgkJbTogdGh1bmssCgkJazogdW5kZWZpbmVkCgl9Owp9Cgp2YXIgX1ZpcnR1YWxEb21fbGF6eSA9IEYyKGZ1bmN0aW9uKGZ1bmMsIGEpCnsKCXJldHVybiBfVmlydHVhbERvbV90aHVuayhbZnVuYywgYV0sIGZ1bmN0aW9uKCkgewoJCXJldHVybiBmdW5jKGEpOwoJfSk7Cn0pOwoKdmFyIF9WaXJ0dWFsRG9tX2xhenkyID0gRjMoZnVuY3Rpb24oZnVuYywgYSwgYikKewoJcmV0dXJuIF9WaXJ0dWFsRG9tX3RodW5rKFtmdW5jLCBhLCBiXSwgZnVuY3Rpb24oKSB7CgkJcmV0dXJuIEEyKGZ1bmMsIGEsIGIpOwoJfSk7Cn0pOwoKdmFyIF9WaXJ0dWFsRG9tX2xhenkzID0gRjQoZnVuY3Rpb24oZnVuYywgYSwgYiwgYykKewoJcmV0dXJuIF9WaXJ0dWFsRG9tX3RodW5rKFtmdW5jLCBhLCBiLCBjXSwgZnVuY3Rpb24oKSB7CgkJcmV0dXJuIEEzKGZ1bmMsIGEsIGIsIGMpOwoJfSk7Cn0pOwoKdmFyIF9WaXJ0dWFsRG9tX2xhenk0ID0gRjUoZnVuY3Rpb24oZnVuYywgYSwgYiwgYywgZCkKewoJcmV0dXJuIF9WaXJ0dWFsRG9tX3RodW5rKFtmdW5jLCBhLCBiLCBjLCBkXSwgZnVuY3Rpb24oKSB7CgkJcmV0dXJuIEE0KGZ1bmMsIGEsIGIsIGMsIGQpOwoJfSk7Cn0pOwoKdmFyIF9WaXJ0dWFsRG9tX2xhenk1ID0gRjYoZnVuY3Rpb24oZnVuYywgYSwgYiwgYywgZCwgZSkKewoJcmV0dXJuIF9WaXJ0dWFsRG9tX3RodW5rKFtmdW5jLCBhLCBiLCBjLCBkLCBlXSwgZnVuY3Rpb24oKSB7CgkJcmV0dXJuIEE1KGZ1bmMsIGEsIGIsIGMsIGQsIGUpOwoJfSk7Cn0pOwoKdmFyIF9WaXJ0dWFsRG9tX2xhenk2ID0gRjcoZnVuY3Rpb24oZnVuYywgYSwgYiwgYywgZCwgZSwgZikKewoJcmV0dXJuIF9WaXJ0dWFsRG9tX3RodW5rKFtmdW5jLCBhLCBiLCBjLCBkLCBlLCBmXSwgZnVuY3Rpb24oKSB7CgkJcmV0dXJuIEE2KGZ1bmMsIGEsIGIsIGMsIGQsIGUsIGYpOwoJfSk7Cn0pOwoKdmFyIF9WaXJ0dWFsRG9tX2xhenk3ID0gRjgoZnVuY3Rpb24oZnVuYywgYSwgYiwgYywgZCwgZSwgZiwgZykKewoJcmV0dXJuIF9WaXJ0dWFsRG9tX3RodW5rKFtmdW5jLCBhLCBiLCBjLCBkLCBlLCBmLCBnXSwgZnVuY3Rpb24oKSB7CgkJcmV0dXJuIEE3KGZ1bmMsIGEsIGIsIGMsIGQsIGUsIGYsIGcpOwoJfSk7Cn0pOwoKdmFyIF9WaXJ0dWFsRG9tX2xhenk4ID0gRjkoZnVuY3Rpb24oZnVuYywgYSwgYiwgYywgZCwgZSwgZiwgZywgaCkKewoJcmV0dXJuIF9WaXJ0dWFsRG9tX3RodW5rKFtmdW5jLCBhLCBiLCBjLCBkLCBlLCBmLCBnLCBoXSwgZnVuY3Rpb24oKSB7CgkJcmV0dXJuIEE4KGZ1bmMsIGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgpOwoJfSk7Cn0pOwoKCgovLyBGQUNUUwoKCnZhciBfVmlydHVhbERvbV9vbiA9IEYyKGZ1bmN0aW9uKGtleSwgaGFuZGxlcikKewoJcmV0dXJuIHsKCQkkOiAnYTAnLAoJCW46IGtleSwKCQlvOiBoYW5kbGVyCgl9Owp9KTsKdmFyIF9WaXJ0dWFsRG9tX3N0eWxlID0gRjIoZnVuY3Rpb24oa2V5LCB2YWx1ZSkKewoJcmV0dXJuIHsKCQkkOiAnYTEnLAoJCW46IGtleSwKCQlvOiB2YWx1ZQoJfTsKfSk7CnZhciBfVmlydHVhbERvbV9wcm9wZXJ0eSA9IEYyKGZ1bmN0aW9uKGtleSwgdmFsdWUpCnsKCXJldHVybiB7CgkJJDogJ2EyJywKCQluOiBrZXksCgkJbzogdmFsdWUKCX07Cn0pOwp2YXIgX1ZpcnR1YWxEb21fYXR0cmlidXRlID0gRjIoZnVuY3Rpb24oa2V5LCB2YWx1ZSkKewoJcmV0dXJuIHsKCQkkOiAnYTMnLAoJCW46IGtleSwKCQlvOiB2YWx1ZQoJfTsKfSk7CnZhciBfVmlydHVhbERvbV9hdHRyaWJ1dGVOUyA9IEYzKGZ1bmN0aW9uKG5hbWVzcGFjZSwga2V5LCB2YWx1ZSkKewoJcmV0dXJuIHsKCQkkOiAnYTQnLAoJCW46IGtleSwKCQlvOiB7IGY6IG5hbWVzcGFjZSwgbzogdmFsdWUgfQoJfTsKfSk7CgoKCi8vIFhTUyBBVFRBQ0sgVkVDVE9SIENIRUNLUwovLwovLyBGb3Igc29tZSByZWFzb24sIHRhYnMgY2FuIGFwcGVhciBpbiBocmVmIHByb3RvY29scyBhbmQgaXQgc3RpbGwgd29ya3MuCi8vIFNvICdcdGphdmFcdFNDUklQVDphbGVydCgiISEhIiknIGFuZCAnamF2YXNjcmlwdDphbGVydCgiISEhIiknIGFyZSB0aGUgc2FtZQovLyBpbiBwcmFjdGljZS4gVGhhdCBpcyB3aHkgX1ZpcnR1YWxEb21fUkVfanMgYW5kIF9WaXJ0dWFsRG9tX1JFX2pzX2h0bWwgbG9vawovLyBzbyBmcmVha3kuCi8vCi8vIFB1bGxpbmcgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgb3V0IHRvIHRoZSB0b3AgbGV2ZWwgZ2l2ZXMgYSBzbGlnaHQgc3BlZWQKLy8gYm9vc3QgaW4gc21hbGwgYmVuY2htYXJrcyAoNC0xMCUpIGJ1dCBob2lzdGluZyB2YWx1ZXMgdG8gcmVkdWNlIGFsbG9jYXRpb24KLy8gY2FuIGJlIHVucHJlZGljdGFibGUgaW4gbGFyZ2UgcHJvZ3JhbXMgd2hlcmUgSklUIG1heSBoYXZlIGEgaGFyZGVyIHRpbWUgd2l0aAovLyBmdW5jdGlvbnMgYXJlIG5vdCBmdWxseSBzZWxmLWNvbnRhaW5lZC4gVGhlIGJlbmVmaXQgaXMgbW9yZSB0aGF0IHRoZSBqcyBhbmQKLy8ganNfaHRtbCBvbmVzIGFyZSBzbyB3ZWlyZCB0aGF0IEkgcHJlZmVyIHRvIHNlZSB0aGVtIG5lYXIgZWFjaCBvdGhlci4KCgp2YXIgX1ZpcnR1YWxEb21fUkVfc2NyaXB0ID0gL15zY3JpcHQkL2k7CnZhciBfVmlydHVhbERvbV9SRV9vbl9mb3JtQWN0aW9uID0gL14ob258Zm9ybUFjdGlvbiQpL2k7CnZhciBfVmlydHVhbERvbV9SRV9qcyA9IC9eXHMqalxzKmFccyp2XHMqYVxzKnNccypjXHMqclxzKmlccypwXHMqdFxzKjovaTsKdmFyIF9WaXJ0dWFsRG9tX1JFX2pzX2h0bWwgPSAvXlxzKihqXHMqYVxzKnZccyphXHMqc1xzKmNccypyXHMqaVxzKnBccyp0XHMqOnxkXHMqYVxzKnRccyphXHMqOlxzKnRccyplXHMqeFxzKnRccypcL1xzKmhccyp0XHMqbVxzKmxccyooLHw7KSkvaTsKCgpmdW5jdGlvbiBfVmlydHVhbERvbV9ub1NjcmlwdCh0YWcpCnsKCXJldHVybiBfVmlydHVhbERvbV9SRV9zY3JpcHQudGVzdCh0YWcpID8gJ3AnIDogdGFnOwp9CgpmdW5jdGlvbiBfVmlydHVhbERvbV9ub09uT3JGb3JtQWN0aW9uKGtleSkKewoJcmV0dXJuIF9WaXJ0dWFsRG9tX1JFX29uX2Zvcm1BY3Rpb24udGVzdChrZXkpID8gJ2RhdGEtJyArIGtleSA6IGtleTsKfQoKZnVuY3Rpb24gX1ZpcnR1YWxEb21fbm9Jbm5lckh0bWxPckZvcm1BY3Rpb24oa2V5KQp7CglyZXR1cm4ga2V5ID09ICdpbm5lckhUTUwnIHx8IGtleSA9PSAnZm9ybUFjdGlvbicgPyAnZGF0YS0nICsga2V5IDoga2V5Owp9CgpmdW5jdGlvbiBfVmlydHVhbERvbV9ub0phdmFTY3JpcHRVcmkodmFsdWUpCnsKCXJldHVybiBfVmlydHVhbERvbV9SRV9qcy50ZXN0KHZhbHVlKQoJCT8gLyoqX1VOVVNFRC8nJy8vKi8vKiovJ2phdmFzY3JpcHQ6YWxlcnQoIlRoaXMgaXMgYW4gWFNTIHZlY3Rvci4gUGxlYXNlIHVzZSBwb3J0cyBvciB3ZWIgY29tcG9uZW50cyBpbnN0ZWFkLiIpJy8vKi8KCQk6IHZhbHVlOwp9CgpmdW5jdGlvbiBfVmlydHVhbERvbV9ub0phdmFTY3JpcHRPckh0bWxVcmkodmFsdWUpCnsKCXJldHVybiBfVmlydHVhbERvbV9SRV9qc19odG1sLnRlc3QodmFsdWUpCgkJPyAvKipfVU5VU0VELycnLy8qLy8qKi8namF2YXNjcmlwdDphbGVydCgiVGhpcyBpcyBhbiBYU1MgdmVjdG9yLiBQbGVhc2UgdXNlIHBvcnRzIG9yIHdlYiBjb21wb25lbnRzIGluc3RlYWQuIiknLy8qLwoJCTogdmFsdWU7Cn0KCmZ1bmN0aW9uIF9WaXJ0dWFsRG9tX25vSmF2YVNjcmlwdE9ySHRtbEpzb24odmFsdWUpCnsKCXJldHVybiAodHlwZW9mIF9Kc29uX3Vud3JhcCh2YWx1ZSkgPT09ICdzdHJpbmcnICYmIF9WaXJ0dWFsRG9tX1JFX2pzX2h0bWwudGVzdChfSnNvbl91bndyYXAodmFsdWUpKSkKCQk/IF9Kc29uX3dyYXAoCgkJCS8qKl9VTlVTRUQvJycvLyovLyoqLydqYXZhc2NyaXB0OmFsZXJ0KCJUaGlzIGlzIGFuIFhTUyB2ZWN0b3IuIFBsZWFzZSB1c2UgcG9ydHMgb3Igd2ViIGNvbXBvbmVudHMgaW5zdGVhZC4iKScvLyovCgkJKSA6IHZhbHVlOwp9CgoKCi8vIE1BUCBGQUNUUwoKCnZhciBfVmlydHVhbERvbV9tYXBBdHRyaWJ1dGUgPSBGMihmdW5jdGlvbihmdW5jLCBhdHRyKQp7CglyZXR1cm4gKGF0dHIuJCA9PT0gJ2EwJykKCQk/IEEyKF9WaXJ0dWFsRG9tX29uLCBhdHRyLm4sIF9WaXJ0dWFsRG9tX21hcEhhbmRsZXIoZnVuYywgYXR0ci5vKSkKCQk6IGF0dHI7Cn0pOwoKZnVuY3Rpb24gX1ZpcnR1YWxEb21fbWFwSGFuZGxlcihmdW5jLCBoYW5kbGVyKQp7Cgl2YXIgdGFnID0gJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJHRvSGFuZGxlckludChoYW5kbGVyKTsKCgkvLyAwID0gTm9ybWFsCgkvLyAxID0gTWF5U3RvcFByb3BhZ2F0aW9uCgkvLyAyID0gTWF5UHJldmVudERlZmF1bHQKCS8vIDMgPSBDdXN0b20KCglyZXR1cm4gewoJCSQ6IGhhbmRsZXIuJCwKCQlhOgoJCQkhdGFnCgkJCQk/IEEyKCRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsIGZ1bmMsIGhhbmRsZXIuYSkKCQkJCToKCQkJQTMoJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcDIsCgkJCQl0YWcgPCAzCgkJCQkJPyBfVmlydHVhbERvbV9tYXBFdmVudFR1cGxlCgkJCQkJOiBfVmlydHVhbERvbV9tYXBFdmVudFJlY29yZCwKCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKGZ1bmMpLAoJCQkJaGFuZGxlci5hCgkJCSkKCX07Cn0KCnZhciBfVmlydHVhbERvbV9tYXBFdmVudFR1cGxlID0gRjIoZnVuY3Rpb24oZnVuYywgdHVwbGUpCnsKCXJldHVybiBfVXRpbHNfVHVwbGUyKGZ1bmModHVwbGUuYSksIHR1cGxlLmIpOwp9KTsKCnZhciBfVmlydHVhbERvbV9tYXBFdmVudFJlY29yZCA9IEYyKGZ1bmN0aW9uKGZ1bmMsIHJlY29yZCkKewoJcmV0dXJuIHsKCQltZXNzYWdlOiBmdW5jKHJlY29yZC5tZXNzYWdlKSwKCQlzdG9wUHJvcGFnYXRpb246IHJlY29yZC5zdG9wUHJvcGFnYXRpb24sCgkJcHJldmVudERlZmF1bHQ6IHJlY29yZC5wcmV2ZW50RGVmYXVsdAoJfQp9KTsKCgoKLy8gT1JHQU5JWkUgRkFDVFMKCgpmdW5jdGlvbiBfVmlydHVhbERvbV9vcmdhbml6ZUZhY3RzKGZhY3RMaXN0KQp7Cglmb3IgKHZhciBmYWN0cyA9IHt9OyBmYWN0TGlzdC5iOyBmYWN0TGlzdCA9IGZhY3RMaXN0LmIpIC8vIFdISUxFX0NPTlMKCXsKCQl2YXIgZW50cnkgPSBmYWN0TGlzdC5hOwoKCQl2YXIgdGFnID0gZW50cnkuJDsKCQl2YXIga2V5ID0gZW50cnkubjsKCQl2YXIgdmFsdWUgPSBlbnRyeS5vOwoKCQlpZiAodGFnID09PSAnYTInKQoJCXsKCQkJKGtleSA9PT0gJ2NsYXNzTmFtZScpCgkJCQk/IF9WaXJ0dWFsRG9tX2FkZENsYXNzKGZhY3RzLCBrZXksIF9Kc29uX3Vud3JhcCh2YWx1ZSkpCgkJCQk6IGZhY3RzW2tleV0gPSBfSnNvbl91bndyYXAodmFsdWUpOwoKCQkJY29udGludWU7CgkJfQoKCQl2YXIgc3ViRmFjdHMgPSBmYWN0c1t0YWddIHx8IChmYWN0c1t0YWddID0ge30pOwoJCSh0YWcgPT09ICdhMycgJiYga2V5ID09PSAnY2xhc3MnKQoJCQk/IF9WaXJ0dWFsRG9tX2FkZENsYXNzKHN1YkZhY3RzLCBrZXksIHZhbHVlKQoJCQk6IHN1YkZhY3RzW2tleV0gPSB2YWx1ZTsKCX0KCglyZXR1cm4gZmFjdHM7Cn0KCmZ1bmN0aW9uIF9WaXJ0dWFsRG9tX2FkZENsYXNzKG9iamVjdCwga2V5LCBuZXdDbGFzcykKewoJdmFyIGNsYXNzZXMgPSBvYmplY3Rba2V5XTsKCW9iamVjdFtrZXldID0gY2xhc3NlcyA/IGNsYXNzZXMgKyAnICcgKyBuZXdDbGFzcyA6IG5ld0NsYXNzOwp9CgoKCi8vIFJFTkRFUgoKCmZ1bmN0aW9uIF9WaXJ0dWFsRG9tX3JlbmRlcih2Tm9kZSwgZXZlbnROb2RlKQp7Cgl2YXIgdGFnID0gdk5vZGUuJDsKCglpZiAodGFnID09PSA1KQoJewoJCXJldHVybiBfVmlydHVhbERvbV9yZW5kZXIodk5vZGUuayB8fCAodk5vZGUuayA9IHZOb2RlLm0oKSksIGV2ZW50Tm9kZSk7Cgl9CgoJaWYgKHRhZyA9PT0gMCkKCXsKCQlyZXR1cm4gX1ZpcnR1YWxEb21fZG9jLmNyZWF0ZVRleHROb2RlKHZOb2RlLmEpOwoJfQoKCWlmICh0YWcgPT09IDQpCgl7CgkJdmFyIHN1Yk5vZGUgPSB2Tm9kZS5rOwoJCXZhciB0YWdnZXIgPSB2Tm9kZS5qOwoKCQl3aGlsZSAoc3ViTm9kZS4kID09PSA0KQoJCXsKCQkJdHlwZW9mIHRhZ2dlciAhPT0gJ29iamVjdCcKCQkJCT8gdGFnZ2VyID0gW3RhZ2dlciwgc3ViTm9kZS5qXQoJCQkJOiB0YWdnZXIucHVzaChzdWJOb2RlLmopOwoKCQkJc3ViTm9kZSA9IHN1Yk5vZGUuazsKCQl9CgoJCXZhciBzdWJFdmVudFJvb3QgPSB7IGo6IHRhZ2dlciwgcDogZXZlbnROb2RlIH07CgkJdmFyIGRvbU5vZGUgPSBfVmlydHVhbERvbV9yZW5kZXIoc3ViTm9kZSwgc3ViRXZlbnRSb290KTsKCQlkb21Ob2RlLmVsbV9ldmVudF9ub2RlX3JlZiA9IHN1YkV2ZW50Um9vdDsKCQlyZXR1cm4gZG9tTm9kZTsKCX0KCglpZiAodGFnID09PSAzKQoJewoJCXZhciBkb21Ob2RlID0gdk5vZGUuaCh2Tm9kZS5nKTsKCQlfVmlydHVhbERvbV9hcHBseUZhY3RzKGRvbU5vZGUsIGV2ZW50Tm9kZSwgdk5vZGUuZCk7CgkJcmV0dXJuIGRvbU5vZGU7Cgl9CgoJLy8gYXQgdGhpcyBwb2ludCBgdGFnYCBtdXN0IGJlIDEgb3IgMgoKCXZhciBkb21Ob2RlID0gdk5vZGUuZgoJCT8gX1ZpcnR1YWxEb21fZG9jLmNyZWF0ZUVsZW1lbnROUyh2Tm9kZS5mLCB2Tm9kZS5jKQoJCTogX1ZpcnR1YWxEb21fZG9jLmNyZWF0ZUVsZW1lbnQodk5vZGUuYyk7CgoJaWYgKF9WaXJ0dWFsRG9tX2RpdmVydEhyZWZUb0FwcCAmJiB2Tm9kZS5jID09ICdhJykKCXsKCQlkb21Ob2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX1ZpcnR1YWxEb21fZGl2ZXJ0SHJlZlRvQXBwKGRvbU5vZGUpKTsKCX0KCglfVmlydHVhbERvbV9hcHBseUZhY3RzKGRvbU5vZGUsIGV2ZW50Tm9kZSwgdk5vZGUuZCk7CgoJZm9yICh2YXIga2lkcyA9IHZOb2RlLmUsIGkgPSAwOyBpIDwga2lkcy5sZW5ndGg7IGkrKykKCXsKCQlfVmlydHVhbERvbV9hcHBlbmRDaGlsZChkb21Ob2RlLCBfVmlydHVhbERvbV9yZW5kZXIodGFnID09PSAxID8ga2lkc1tpXSA6IGtpZHNbaV0uYiwgZXZlbnROb2RlKSk7Cgl9CgoJcmV0dXJuIGRvbU5vZGU7Cn0KCgoKLy8gQVBQTFkgRkFDVFMKCgpmdW5jdGlvbiBfVmlydHVhbERvbV9hcHBseUZhY3RzKGRvbU5vZGUsIGV2ZW50Tm9kZSwgZmFjdHMpCnsKCWZvciAodmFyIGtleSBpbiBmYWN0cykKCXsKCQl2YXIgdmFsdWUgPSBmYWN0c1trZXldOwoKCQlrZXkgPT09ICdhMScKCQkJPyBfVmlydHVhbERvbV9hcHBseVN0eWxlcyhkb21Ob2RlLCB2YWx1ZSkKCQkJOgoJCWtleSA9PT0gJ2EwJwoJCQk/IF9WaXJ0dWFsRG9tX2FwcGx5RXZlbnRzKGRvbU5vZGUsIGV2ZW50Tm9kZSwgdmFsdWUpCgkJCToKCQlrZXkgPT09ICdhMycKCQkJPyBfVmlydHVhbERvbV9hcHBseUF0dHJzKGRvbU5vZGUsIHZhbHVlKQoJCQk6CgkJa2V5ID09PSAnYTQnCgkJCT8gX1ZpcnR1YWxEb21fYXBwbHlBdHRyc05TKGRvbU5vZGUsIHZhbHVlKQoJCQk6CgkJKChrZXkgIT09ICd2YWx1ZScgJiYga2V5ICE9PSAnY2hlY2tlZCcpIHx8IGRvbU5vZGVba2V5XSAhPT0gdmFsdWUpICYmIChkb21Ob2RlW2tleV0gPSB2YWx1ZSk7Cgl9Cn0KCgoKLy8gQVBQTFkgU1RZTEVTCgoKZnVuY3Rpb24gX1ZpcnR1YWxEb21fYXBwbHlTdHlsZXMoZG9tTm9kZSwgc3R5bGVzKQp7Cgl2YXIgZG9tTm9kZVN0eWxlID0gZG9tTm9kZS5zdHlsZTsKCglmb3IgKHZhciBrZXkgaW4gc3R5bGVzKQoJewoJCWRvbU5vZGVTdHlsZVtrZXldID0gc3R5bGVzW2tleV07Cgl9Cn0KCgoKLy8gQVBQTFkgQVRUUlMKCgpmdW5jdGlvbiBfVmlydHVhbERvbV9hcHBseUF0dHJzKGRvbU5vZGUsIGF0dHJzKQp7Cglmb3IgKHZhciBrZXkgaW4gYXR0cnMpCgl7CgkJdmFyIHZhbHVlID0gYXR0cnNba2V5XTsKCQl0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnCgkJCT8gZG9tTm9kZS5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSkKCQkJOiBkb21Ob2RlLnJlbW92ZUF0dHJpYnV0ZShrZXkpOwoJfQp9CgoKCi8vIEFQUExZIE5BTUVTUEFDRUQgQVRUUlMKCgpmdW5jdGlvbiBfVmlydHVhbERvbV9hcHBseUF0dHJzTlMoZG9tTm9kZSwgbnNBdHRycykKewoJZm9yICh2YXIga2V5IGluIG5zQXR0cnMpCgl7CgkJdmFyIHBhaXIgPSBuc0F0dHJzW2tleV07CgkJdmFyIG5hbWVzcGFjZSA9IHBhaXIuZjsKCQl2YXIgdmFsdWUgPSBwYWlyLm87CgoJCXR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcKCQkJPyBkb21Ob2RlLnNldEF0dHJpYnV0ZU5TKG5hbWVzcGFjZSwga2V5LCB2YWx1ZSkKCQkJOiBkb21Ob2RlLnJlbW92ZUF0dHJpYnV0ZU5TKG5hbWVzcGFjZSwga2V5KTsKCX0KfQoKCgovLyBBUFBMWSBFVkVOVFMKCgpmdW5jdGlvbiBfVmlydHVhbERvbV9hcHBseUV2ZW50cyhkb21Ob2RlLCBldmVudE5vZGUsIGV2ZW50cykKewoJdmFyIGFsbENhbGxiYWNrcyA9IGRvbU5vZGUuZWxtRnMgfHwgKGRvbU5vZGUuZWxtRnMgPSB7fSk7CgoJZm9yICh2YXIga2V5IGluIGV2ZW50cykKCXsKCQl2YXIgbmV3SGFuZGxlciA9IGV2ZW50c1trZXldOwoJCXZhciBvbGRDYWxsYmFjayA9IGFsbENhbGxiYWNrc1trZXldOwoKCQlpZiAoIW5ld0hhbmRsZXIpCgkJewoJCQlkb21Ob2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoa2V5LCBvbGRDYWxsYmFjayk7CgkJCWFsbENhbGxiYWNrc1trZXldID0gdW5kZWZpbmVkOwoJCQljb250aW51ZTsKCQl9CgoJCWlmIChvbGRDYWxsYmFjaykKCQl7CgkJCXZhciBvbGRIYW5kbGVyID0gb2xkQ2FsbGJhY2sucTsKCQkJaWYgKG9sZEhhbmRsZXIuJCA9PT0gbmV3SGFuZGxlci4kKQoJCQl7CgkJCQlvbGRDYWxsYmFjay5xID0gbmV3SGFuZGxlcjsKCQkJCWNvbnRpbnVlOwoJCQl9CgkJCWRvbU5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihrZXksIG9sZENhbGxiYWNrKTsKCQl9CgoJCW9sZENhbGxiYWNrID0gX1ZpcnR1YWxEb21fbWFrZUNhbGxiYWNrKGV2ZW50Tm9kZSwgbmV3SGFuZGxlcik7CgkJZG9tTm9kZS5hZGRFdmVudExpc3RlbmVyKGtleSwgb2xkQ2FsbGJhY2ssCgkJCV9WaXJ0dWFsRG9tX3Bhc3NpdmVTdXBwb3J0ZWQKCQkJJiYgeyBwYXNzaXZlOiAkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kdG9IYW5kbGVySW50KG5ld0hhbmRsZXIpIDwgMiB9CgkJKTsKCQlhbGxDYWxsYmFja3Nba2V5XSA9IG9sZENhbGxiYWNrOwoJfQp9CgoKCi8vIFBBU1NJVkUgRVZFTlRTCgoKdmFyIF9WaXJ0dWFsRG9tX3Bhc3NpdmVTdXBwb3J0ZWQ7Cgp0cnkKewoJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3QnLCBudWxsLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywgewoJCWdldDogZnVuY3Rpb24oKSB7IF9WaXJ0dWFsRG9tX3Bhc3NpdmVTdXBwb3J0ZWQgPSB0cnVlOyB9Cgl9KSk7Cn0KY2F0Y2goZSkge30KCgoKLy8gRVZFTlQgSEFORExFUlMKCgpmdW5jdGlvbiBfVmlydHVhbERvbV9tYWtlQ2FsbGJhY2soZXZlbnROb2RlLCBpbml0aWFsSGFuZGxlcikKewoJZnVuY3Rpb24gY2FsbGJhY2soZXZlbnQpCgl7CgkJdmFyIGhhbmRsZXIgPSBjYWxsYmFjay5xOwoJCXZhciByZXN1bHQgPSBfSnNvbl9ydW5IZWxwKGhhbmRsZXIuYSwgZXZlbnQpOwoKCQlpZiAoISRlbG0kY29yZSRSZXN1bHQkaXNPayhyZXN1bHQpKQoJCXsKCQkJcmV0dXJuOwoJCX0KCgkJdmFyIHRhZyA9ICRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSR0b0hhbmRsZXJJbnQoaGFuZGxlcik7CgoJCS8vIDAgPSBOb3JtYWwKCQkvLyAxID0gTWF5U3RvcFByb3BhZ2F0aW9uCgkJLy8gMiA9IE1heVByZXZlbnREZWZhdWx0CgkJLy8gMyA9IEN1c3RvbQoKCQl2YXIgdmFsdWUgPSByZXN1bHQuYTsKCQl2YXIgbWVzc2FnZSA9ICF0YWcgPyB2YWx1ZSA6IHRhZyA8IDMgPyB2YWx1ZS5hIDogdmFsdWUubWVzc2FnZTsKCQl2YXIgc3RvcFByb3BhZ2F0aW9uID0gdGFnID09IDEgPyB2YWx1ZS5iIDogdGFnID09IDMgJiYgdmFsdWUuc3RvcFByb3BhZ2F0aW9uOwoJCXZhciBjdXJyZW50RXZlbnROb2RlID0gKAoJCQlzdG9wUHJvcGFnYXRpb24gJiYgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCksCgkJCSh0YWcgPT0gMiA/IHZhbHVlLmIgOiB0YWcgPT0gMyAmJiB2YWx1ZS5wcmV2ZW50RGVmYXVsdCkgJiYgZXZlbnQucHJldmVudERlZmF1bHQoKSwKCQkJZXZlbnROb2RlCgkJKTsKCQl2YXIgdGFnZ2VyOwoJCXZhciBpOwoJCXdoaWxlICh0YWdnZXIgPSBjdXJyZW50RXZlbnROb2RlLmopCgkJewoJCQlpZiAodHlwZW9mIHRhZ2dlciA9PSAnZnVuY3Rpb24nKQoJCQl7CgkJCQltZXNzYWdlID0gdGFnZ2VyKG1lc3NhZ2UpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJZm9yICh2YXIgaSA9IHRhZ2dlci5sZW5ndGg7IGktLTsgKQoJCQkJewoJCQkJCW1lc3NhZ2UgPSB0YWdnZXJbaV0obWVzc2FnZSk7CgkJCQl9CgkJCX0KCQkJY3VycmVudEV2ZW50Tm9kZSA9IGN1cnJlbnRFdmVudE5vZGUucDsKCQl9CgkJY3VycmVudEV2ZW50Tm9kZShtZXNzYWdlLCBzdG9wUHJvcGFnYXRpb24pOyAvLyBzdG9wUHJvcGFnYXRpb24gaW1wbGllcyBpc1N5bmMKCX0KCgljYWxsYmFjay5xID0gaW5pdGlhbEhhbmRsZXI7CgoJcmV0dXJuIGNhbGxiYWNrOwp9CgpmdW5jdGlvbiBfVmlydHVhbERvbV9lcXVhbEV2ZW50cyh4LCB5KQp7CglyZXR1cm4geC4kID09IHkuJCAmJiBfSnNvbl9lcXVhbGl0eSh4LmEsIHkuYSk7Cn0KCgoKLy8gRElGRgoKCi8vIFRPRE86IFNob3VsZCB3ZSBkbyBwYXRjaGVzIGxpa2UgaW4gaU9TPwovLwovLyB0eXBlIFBhdGNoCi8vICAgPSBBdCBJbnQgUGF0Y2gKLy8gICB8IEJhdGNoIChMaXN0IFBhdGNoKQovLyAgIHwgQ2hhbmdlIC4uLgovLwovLyBIb3cgY291bGQgaXQgbm90IGJlIGJldHRlcj8KLy8KZnVuY3Rpb24gX1ZpcnR1YWxEb21fZGlmZih4LCB5KQp7Cgl2YXIgcGF0Y2hlcyA9IFtdOwoJX1ZpcnR1YWxEb21fZGlmZkhlbHAoeCwgeSwgcGF0Y2hlcywgMCk7CglyZXR1cm4gcGF0Y2hlczsKfQoKCmZ1bmN0aW9uIF9WaXJ0dWFsRG9tX3B1c2hQYXRjaChwYXRjaGVzLCB0eXBlLCBpbmRleCwgZGF0YSkKewoJdmFyIHBhdGNoID0gewoJCSQ6IHR5cGUsCgkJcjogaW5kZXgsCgkJczogZGF0YSwKCQl0OiB1bmRlZmluZWQsCgkJdTogdW5kZWZpbmVkCgl9OwoJcGF0Y2hlcy5wdXNoKHBhdGNoKTsKCXJldHVybiBwYXRjaDsKfQoKCmZ1bmN0aW9uIF9WaXJ0dWFsRG9tX2RpZmZIZWxwKHgsIHksIHBhdGNoZXMsIGluZGV4KQp7CglpZiAoeCA9PT0geSkKCXsKCQlyZXR1cm47Cgl9CgoJdmFyIHhUeXBlID0geC4kOwoJdmFyIHlUeXBlID0geS4kOwoKCS8vIEJhaWwgaWYgeW91IHJ1biBpbnRvIGRpZmZlcmVudCB0eXBlcyBvZiBub2Rlcy4gSW1wbGllcyB0aGF0IHRoZQoJLy8gc3RydWN0dXJlIGhhcyBjaGFuZ2VkIHNpZ25pZmljYW50bHkgYW5kIGl0J3Mgbm90IHdvcnRoIGEgZGlmZi4KCWlmICh4VHlwZSAhPT0geVR5cGUpCgl7CgkJaWYgKHhUeXBlID09PSAxICYmIHlUeXBlID09PSAyKQoJCXsKCQkJeSA9IF9WaXJ0dWFsRG9tX2Rla2V5KHkpOwoJCQl5VHlwZSA9IDE7CgkJfQoJCWVsc2UKCQl7CgkJCV9WaXJ0dWFsRG9tX3B1c2hQYXRjaChwYXRjaGVzLCAwLCBpbmRleCwgeSk7CgkJCXJldHVybjsKCQl9Cgl9CgoJLy8gTm93IHdlIGtub3cgdGhhdCBib3RoIG5vZGVzIGFyZSB0aGUgc2FtZSAkLgoJc3dpdGNoICh5VHlwZSkKCXsKCQljYXNlIDU6CgkJCXZhciB4UmVmcyA9IHgubDsKCQkJdmFyIHlSZWZzID0geS5sOwoJCQl2YXIgaSA9IHhSZWZzLmxlbmd0aDsKCQkJdmFyIHNhbWUgPSBpID09PSB5UmVmcy5sZW5ndGg7CgkJCXdoaWxlIChzYW1lICYmIGktLSkKCQkJewoJCQkJc2FtZSA9IHhSZWZzW2ldID09PSB5UmVmc1tpXTsKCQkJfQoJCQlpZiAoc2FtZSkKCQkJewoJCQkJeS5rID0geC5rOwoJCQkJcmV0dXJuOwoJCQl9CgkJCXkuayA9IHkubSgpOwoJCQl2YXIgc3ViUGF0Y2hlcyA9IFtdOwoJCQlfVmlydHVhbERvbV9kaWZmSGVscCh4LmssIHkuaywgc3ViUGF0Y2hlcywgMCk7CgkJCXN1YlBhdGNoZXMubGVuZ3RoID4gMCAmJiBfVmlydHVhbERvbV9wdXNoUGF0Y2gocGF0Y2hlcywgMSwgaW5kZXgsIHN1YlBhdGNoZXMpOwoJCQlyZXR1cm47CgoJCWNhc2UgNDoKCQkJLy8gZ2F0aGVyIG5lc3RlZCB0YWdnZXJzCgkJCXZhciB4VGFnZ2VycyA9IHguajsKCQkJdmFyIHlUYWdnZXJzID0geS5qOwoJCQl2YXIgbmVzdGluZyA9IGZhbHNlOwoKCQkJdmFyIHhTdWJOb2RlID0geC5rOwoJCQl3aGlsZSAoeFN1Yk5vZGUuJCA9PT0gNCkKCQkJewoJCQkJbmVzdGluZyA9IHRydWU7CgoJCQkJdHlwZW9mIHhUYWdnZXJzICE9PSAnb2JqZWN0JwoJCQkJCT8geFRhZ2dlcnMgPSBbeFRhZ2dlcnMsIHhTdWJOb2RlLmpdCgkJCQkJOiB4VGFnZ2Vycy5wdXNoKHhTdWJOb2RlLmopOwoKCQkJCXhTdWJOb2RlID0geFN1Yk5vZGUuazsKCQkJfQoKCQkJdmFyIHlTdWJOb2RlID0geS5rOwoJCQl3aGlsZSAoeVN1Yk5vZGUuJCA9PT0gNCkKCQkJewoJCQkJbmVzdGluZyA9IHRydWU7CgoJCQkJdHlwZW9mIHlUYWdnZXJzICE9PSAnb2JqZWN0JwoJCQkJCT8geVRhZ2dlcnMgPSBbeVRhZ2dlcnMsIHlTdWJOb2RlLmpdCgkJCQkJOiB5VGFnZ2Vycy5wdXNoKHlTdWJOb2RlLmopOwoKCQkJCXlTdWJOb2RlID0geVN1Yk5vZGUuazsKCQkJfQoKCQkJLy8gSnVzdCBiYWlsIGlmIGRpZmZlcmVudCBudW1iZXJzIG9mIHRhZ2dlcnMuIFRoaXMgaW1wbGllcyB0aGUKCQkJLy8gc3RydWN0dXJlIG9mIHRoZSB2aXJ0dWFsIERPTSBoYXMgY2hhbmdlZC4KCQkJaWYgKG5lc3RpbmcgJiYgeFRhZ2dlcnMubGVuZ3RoICE9PSB5VGFnZ2Vycy5sZW5ndGgpCgkJCXsKCQkJCV9WaXJ0dWFsRG9tX3B1c2hQYXRjaChwYXRjaGVzLCAwLCBpbmRleCwgeSk7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIGNoZWNrIGlmIHRhZ2dlcnMgYXJlICJ0aGUgc2FtZSIKCQkJaWYgKG5lc3RpbmcgPyAhX1ZpcnR1YWxEb21fcGFpcndpc2VSZWZFcXVhbCh4VGFnZ2VycywgeVRhZ2dlcnMpIDogeFRhZ2dlcnMgIT09IHlUYWdnZXJzKQoJCQl7CgkJCQlfVmlydHVhbERvbV9wdXNoUGF0Y2gocGF0Y2hlcywgMiwgaW5kZXgsIHlUYWdnZXJzKTsKCQkJfQoKCQkJLy8gZGlmZiBldmVyeXRoaW5nIGJlbG93IHRoZSB0YWdnZXJzCgkJCV9WaXJ0dWFsRG9tX2RpZmZIZWxwKHhTdWJOb2RlLCB5U3ViTm9kZSwgcGF0Y2hlcywgaW5kZXggKyAxKTsKCQkJcmV0dXJuOwoKCQljYXNlIDA6CgkJCWlmICh4LmEgIT09IHkuYSkKCQkJewoJCQkJX1ZpcnR1YWxEb21fcHVzaFBhdGNoKHBhdGNoZXMsIDMsIGluZGV4LCB5LmEpOwoJCQl9CgkJCXJldHVybjsKCgkJY2FzZSAxOgoJCQlfVmlydHVhbERvbV9kaWZmTm9kZXMoeCwgeSwgcGF0Y2hlcywgaW5kZXgsIF9WaXJ0dWFsRG9tX2RpZmZLaWRzKTsKCQkJcmV0dXJuOwoKCQljYXNlIDI6CgkJCV9WaXJ0dWFsRG9tX2RpZmZOb2Rlcyh4LCB5LCBwYXRjaGVzLCBpbmRleCwgX1ZpcnR1YWxEb21fZGlmZktleWVkS2lkcyk7CgkJCXJldHVybjsKCgkJY2FzZSAzOgoJCQlpZiAoeC5oICE9PSB5LmgpCgkJCXsKCQkJCV9WaXJ0dWFsRG9tX3B1c2hQYXRjaChwYXRjaGVzLCAwLCBpbmRleCwgeSk7CgkJCQlyZXR1cm47CgkJCX0KCgkJCXZhciBmYWN0c0RpZmYgPSBfVmlydHVhbERvbV9kaWZmRmFjdHMoeC5kLCB5LmQpOwoJCQlmYWN0c0RpZmYgJiYgX1ZpcnR1YWxEb21fcHVzaFBhdGNoKHBhdGNoZXMsIDQsIGluZGV4LCBmYWN0c0RpZmYpOwoKCQkJdmFyIHBhdGNoID0geS5pKHguZywgeS5nKTsKCQkJcGF0Y2ggJiYgX1ZpcnR1YWxEb21fcHVzaFBhdGNoKHBhdGNoZXMsIDUsIGluZGV4LCBwYXRjaCk7CgoJCQlyZXR1cm47Cgl9Cn0KCi8vIGFzc3VtZXMgdGhlIGluY29taW5nIGFycmF5cyBhcmUgdGhlIHNhbWUgbGVuZ3RoCmZ1bmN0aW9uIF9WaXJ0dWFsRG9tX3BhaXJ3aXNlUmVmRXF1YWwoYXMsIGJzKQp7Cglmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKQoJewoJCWlmIChhc1tpXSAhPT0gYnNbaV0pCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoKCXJldHVybiB0cnVlOwp9CgpmdW5jdGlvbiBfVmlydHVhbERvbV9kaWZmTm9kZXMoeCwgeSwgcGF0Y2hlcywgaW5kZXgsIGRpZmZLaWRzKQp7CgkvLyBCYWlsIGlmIG9idmlvdXMgaW5kaWNhdG9ycyBoYXZlIGNoYW5nZWQuIEltcGxpZXMgbW9yZSBzZXJpb3VzCgkvLyBzdHJ1Y3R1cmFsIGNoYW5nZXMgc3VjaCB0aGF0IGl0J3Mgbm90IHdvcnRoIGl0IHRvIGRpZmYuCglpZiAoeC5jICE9PSB5LmMgfHwgeC5mICE9PSB5LmYpCgl7CgkJX1ZpcnR1YWxEb21fcHVzaFBhdGNoKHBhdGNoZXMsIDAsIGluZGV4LCB5KTsKCQlyZXR1cm47Cgl9CgoJdmFyIGZhY3RzRGlmZiA9IF9WaXJ0dWFsRG9tX2RpZmZGYWN0cyh4LmQsIHkuZCk7CglmYWN0c0RpZmYgJiYgX1ZpcnR1YWxEb21fcHVzaFBhdGNoKHBhdGNoZXMsIDQsIGluZGV4LCBmYWN0c0RpZmYpOwoKCWRpZmZLaWRzKHgsIHksIHBhdGNoZXMsIGluZGV4KTsKfQoKCgovLyBESUZGIEZBQ1RTCgoKLy8gVE9ETyBJbnN0ZWFkIG9mIGNyZWF0aW5nIGEgbmV3IGRpZmYgb2JqZWN0LCBpdCdzIHBvc3NpYmxlIHRvIGp1c3QgdGVzdCBpZgovLyB0aGVyZSAqaXMqIGEgZGlmZi4gRHVyaW5nIHRoZSBhY3R1YWwgcGF0Y2gsIGRvIHRoZSBkaWZmIGFnYWluIGFuZCBtYWtlIHRoZQovLyBtb2RpZmljYXRpb25zIGRpcmVjdGx5LiBUaGlzIHdheSwgdGhlcmUncyBubyBuZXcgYWxsb2NhdGlvbnMuIFdvcnRoIGl0PwpmdW5jdGlvbiBfVmlydHVhbERvbV9kaWZmRmFjdHMoeCwgeSwgY2F0ZWdvcnkpCnsKCXZhciBkaWZmOwoKCS8vIGxvb2sgZm9yIGNoYW5nZXMgYW5kIHJlbW92YWxzCglmb3IgKHZhciB4S2V5IGluIHgpCgl7CgkJaWYgKHhLZXkgPT09ICdhMScgfHwgeEtleSA9PT0gJ2EwJyB8fCB4S2V5ID09PSAnYTMnIHx8IHhLZXkgPT09ICdhNCcpCgkJewoJCQl2YXIgc3ViRGlmZiA9IF9WaXJ0dWFsRG9tX2RpZmZGYWN0cyh4W3hLZXldLCB5W3hLZXldIHx8IHt9LCB4S2V5KTsKCQkJaWYgKHN1YkRpZmYpCgkJCXsKCQkJCWRpZmYgPSBkaWZmIHx8IHt9OwoJCQkJZGlmZlt4S2V5XSA9IHN1YkRpZmY7CgkJCX0KCQkJY29udGludWU7CgkJfQoKCQkvLyByZW1vdmUgaWYgbm90IGluIHRoZSBuZXcgZmFjdHMKCQlpZiAoISh4S2V5IGluIHkpKQoJCXsKCQkJZGlmZiA9IGRpZmYgfHwge307CgkJCWRpZmZbeEtleV0gPQoJCQkJIWNhdGVnb3J5CgkJCQkJPyAodHlwZW9mIHhbeEtleV0gPT09ICdzdHJpbmcnID8gJycgOiBudWxsKQoJCQkJCToKCQkJCShjYXRlZ29yeSA9PT0gJ2ExJykKCQkJCQk/ICcnCgkJCQkJOgoJCQkJKGNhdGVnb3J5ID09PSAnYTAnIHx8IGNhdGVnb3J5ID09PSAnYTMnKQoJCQkJCT8gdW5kZWZpbmVkCgkJCQkJOgoJCQkJeyBmOiB4W3hLZXldLmYsIG86IHVuZGVmaW5lZCB9OwoKCQkJY29udGludWU7CgkJfQoKCQl2YXIgeFZhbHVlID0geFt4S2V5XTsKCQl2YXIgeVZhbHVlID0geVt4S2V5XTsKCgkJLy8gcmVmZXJlbmNlIGVxdWFsLCBzbyBkb24ndCB3b3JyeSBhYm91dCBpdAoJCWlmICh4VmFsdWUgPT09IHlWYWx1ZSAmJiB4S2V5ICE9PSAndmFsdWUnICYmIHhLZXkgIT09ICdjaGVja2VkJwoJCQl8fCBjYXRlZ29yeSA9PT0gJ2EwJyAmJiBfVmlydHVhbERvbV9lcXVhbEV2ZW50cyh4VmFsdWUsIHlWYWx1ZSkpCgkJewoJCQljb250aW51ZTsKCQl9CgoJCWRpZmYgPSBkaWZmIHx8IHt9OwoJCWRpZmZbeEtleV0gPSB5VmFsdWU7Cgl9CgoJLy8gYWRkIG5ldyBzdHVmZgoJZm9yICh2YXIgeUtleSBpbiB5KQoJewoJCWlmICghKHlLZXkgaW4geCkpCgkJewoJCQlkaWZmID0gZGlmZiB8fCB7fTsKCQkJZGlmZlt5S2V5XSA9IHlbeUtleV07CgkJfQoJfQoKCXJldHVybiBkaWZmOwp9CgoKCi8vIERJRkYgS0lEUwoKCmZ1bmN0aW9uIF9WaXJ0dWFsRG9tX2RpZmZLaWRzKHhQYXJlbnQsIHlQYXJlbnQsIHBhdGNoZXMsIGluZGV4KQp7Cgl2YXIgeEtpZHMgPSB4UGFyZW50LmU7Cgl2YXIgeUtpZHMgPSB5UGFyZW50LmU7CgoJdmFyIHhMZW4gPSB4S2lkcy5sZW5ndGg7Cgl2YXIgeUxlbiA9IHlLaWRzLmxlbmd0aDsKCgkvLyBGSUdVUkUgT1VUIElGIFRIRVJFIEFSRSBJTlNFUlRTIE9SIFJFTU9WQUxTCgoJaWYgKHhMZW4gPiB5TGVuKQoJewoJCV9WaXJ0dWFsRG9tX3B1c2hQYXRjaChwYXRjaGVzLCA2LCBpbmRleCwgewoJCQl2OiB5TGVuLAoJCQlpOiB4TGVuIC0geUxlbgoJCX0pOwoJfQoJZWxzZSBpZiAoeExlbiA8IHlMZW4pCgl7CgkJX1ZpcnR1YWxEb21fcHVzaFBhdGNoKHBhdGNoZXMsIDcsIGluZGV4LCB7CgkJCXY6IHhMZW4sCgkJCWU6IHlLaWRzCgkJfSk7Cgl9CgoJLy8gUEFJUldJU0UgRElGRiBFVkVSWVRISU5HIEVMU0UKCglmb3IgKHZhciBtaW5MZW4gPSB4TGVuIDwgeUxlbiA/IHhMZW4gOiB5TGVuLCBpID0gMDsgaSA8IG1pbkxlbjsgaSsrKQoJewoJCXZhciB4S2lkID0geEtpZHNbaV07CgkJX1ZpcnR1YWxEb21fZGlmZkhlbHAoeEtpZCwgeUtpZHNbaV0sIHBhdGNoZXMsICsraW5kZXgpOwoJCWluZGV4ICs9IHhLaWQuYiB8fCAwOwoJfQp9CgoKCi8vIEtFWUVEIERJRkYKCgpmdW5jdGlvbiBfVmlydHVhbERvbV9kaWZmS2V5ZWRLaWRzKHhQYXJlbnQsIHlQYXJlbnQsIHBhdGNoZXMsIHJvb3RJbmRleCkKewoJdmFyIGxvY2FsUGF0Y2hlcyA9IFtdOwoKCXZhciBjaGFuZ2VzID0ge307IC8vIERpY3QgU3RyaW5nIEVudHJ5Cgl2YXIgaW5zZXJ0cyA9IFtdOyAvLyBBcnJheSB7IGluZGV4IDogSW50LCBlbnRyeSA6IEVudHJ5IH0KCS8vIHR5cGUgRW50cnkgPSB7IHRhZyA6IFN0cmluZywgdm5vZGUgOiBWTm9kZSwgaW5kZXggOiBJbnQsIGRhdGEgOiBfIH0KCgl2YXIgeEtpZHMgPSB4UGFyZW50LmU7Cgl2YXIgeUtpZHMgPSB5UGFyZW50LmU7Cgl2YXIgeExlbiA9IHhLaWRzLmxlbmd0aDsKCXZhciB5TGVuID0geUtpZHMubGVuZ3RoOwoJdmFyIHhJbmRleCA9IDA7Cgl2YXIgeUluZGV4ID0gMDsKCgl2YXIgaW5kZXggPSByb290SW5kZXg7CgoJd2hpbGUgKHhJbmRleCA8IHhMZW4gJiYgeUluZGV4IDwgeUxlbikKCXsKCQl2YXIgeCA9IHhLaWRzW3hJbmRleF07CgkJdmFyIHkgPSB5S2lkc1t5SW5kZXhdOwoKCQl2YXIgeEtleSA9IHguYTsKCQl2YXIgeUtleSA9IHkuYTsKCQl2YXIgeE5vZGUgPSB4LmI7CgkJdmFyIHlOb2RlID0geS5iOwoKCQl2YXIgbmV3TWF0Y2ggPSB1bmRlZmluZWQ7CgkJdmFyIG9sZE1hdGNoID0gdW5kZWZpbmVkOwoKCQkvLyBjaGVjayBpZiBrZXlzIG1hdGNoCgoJCWlmICh4S2V5ID09PSB5S2V5KQoJCXsKCQkJaW5kZXgrKzsKCQkJX1ZpcnR1YWxEb21fZGlmZkhlbHAoeE5vZGUsIHlOb2RlLCBsb2NhbFBhdGNoZXMsIGluZGV4KTsKCQkJaW5kZXggKz0geE5vZGUuYiB8fCAwOwoKCQkJeEluZGV4Kys7CgkJCXlJbmRleCsrOwoJCQljb250aW51ZTsKCQl9CgoJCS8vIGxvb2sgYWhlYWQgMSB0byBkZXRlY3QgaW5zZXJ0aW9ucyBhbmQgcmVtb3ZhbHMuCgoJCXZhciB4TmV4dCA9IHhLaWRzW3hJbmRleCArIDFdOwoJCXZhciB5TmV4dCA9IHlLaWRzW3lJbmRleCArIDFdOwoKCQlpZiAoeE5leHQpCgkJewoJCQl2YXIgeE5leHRLZXkgPSB4TmV4dC5hOwoJCQl2YXIgeE5leHROb2RlID0geE5leHQuYjsKCQkJb2xkTWF0Y2ggPSB5S2V5ID09PSB4TmV4dEtleTsKCQl9CgoJCWlmICh5TmV4dCkKCQl7CgkJCXZhciB5TmV4dEtleSA9IHlOZXh0LmE7CgkJCXZhciB5TmV4dE5vZGUgPSB5TmV4dC5iOwoJCQluZXdNYXRjaCA9IHhLZXkgPT09IHlOZXh0S2V5OwoJCX0KCgoJCS8vIHN3YXAgeCBhbmQgeQoJCWlmIChuZXdNYXRjaCAmJiBvbGRNYXRjaCkKCQl7CgkJCWluZGV4Kys7CgkJCV9WaXJ0dWFsRG9tX2RpZmZIZWxwKHhOb2RlLCB5TmV4dE5vZGUsIGxvY2FsUGF0Y2hlcywgaW5kZXgpOwoJCQlfVmlydHVhbERvbV9pbnNlcnROb2RlKGNoYW5nZXMsIGxvY2FsUGF0Y2hlcywgeEtleSwgeU5vZGUsIHlJbmRleCwgaW5zZXJ0cyk7CgkJCWluZGV4ICs9IHhOb2RlLmIgfHwgMDsKCgkJCWluZGV4Kys7CgkJCV9WaXJ0dWFsRG9tX3JlbW92ZU5vZGUoY2hhbmdlcywgbG9jYWxQYXRjaGVzLCB4S2V5LCB4TmV4dE5vZGUsIGluZGV4KTsKCQkJaW5kZXggKz0geE5leHROb2RlLmIgfHwgMDsKCgkJCXhJbmRleCArPSAyOwoJCQl5SW5kZXggKz0gMjsKCQkJY29udGludWU7CgkJfQoKCQkvLyBpbnNlcnQgeQoJCWlmIChuZXdNYXRjaCkKCQl7CgkJCWluZGV4Kys7CgkJCV9WaXJ0dWFsRG9tX2luc2VydE5vZGUoY2hhbmdlcywgbG9jYWxQYXRjaGVzLCB5S2V5LCB5Tm9kZSwgeUluZGV4LCBpbnNlcnRzKTsKCQkJX1ZpcnR1YWxEb21fZGlmZkhlbHAoeE5vZGUsIHlOZXh0Tm9kZSwgbG9jYWxQYXRjaGVzLCBpbmRleCk7CgkJCWluZGV4ICs9IHhOb2RlLmIgfHwgMDsKCgkJCXhJbmRleCArPSAxOwoJCQl5SW5kZXggKz0gMjsKCQkJY29udGludWU7CgkJfQoKCQkvLyByZW1vdmUgeAoJCWlmIChvbGRNYXRjaCkKCQl7CgkJCWluZGV4Kys7CgkJCV9WaXJ0dWFsRG9tX3JlbW92ZU5vZGUoY2hhbmdlcywgbG9jYWxQYXRjaGVzLCB4S2V5LCB4Tm9kZSwgaW5kZXgpOwoJCQlpbmRleCArPSB4Tm9kZS5iIHx8IDA7CgoJCQlpbmRleCsrOwoJCQlfVmlydHVhbERvbV9kaWZmSGVscCh4TmV4dE5vZGUsIHlOb2RlLCBsb2NhbFBhdGNoZXMsIGluZGV4KTsKCQkJaW5kZXggKz0geE5leHROb2RlLmIgfHwgMDsKCgkJCXhJbmRleCArPSAyOwoJCQl5SW5kZXggKz0gMTsKCQkJY29udGludWU7CgkJfQoKCQkvLyByZW1vdmUgeCwgaW5zZXJ0IHkKCQlpZiAoeE5leHQgJiYgeE5leHRLZXkgPT09IHlOZXh0S2V5KQoJCXsKCQkJaW5kZXgrKzsKCQkJX1ZpcnR1YWxEb21fcmVtb3ZlTm9kZShjaGFuZ2VzLCBsb2NhbFBhdGNoZXMsIHhLZXksIHhOb2RlLCBpbmRleCk7CgkJCV9WaXJ0dWFsRG9tX2luc2VydE5vZGUoY2hhbmdlcywgbG9jYWxQYXRjaGVzLCB5S2V5LCB5Tm9kZSwgeUluZGV4LCBpbnNlcnRzKTsKCQkJaW5kZXggKz0geE5vZGUuYiB8fCAwOwoKCQkJaW5kZXgrKzsKCQkJX1ZpcnR1YWxEb21fZGlmZkhlbHAoeE5leHROb2RlLCB5TmV4dE5vZGUsIGxvY2FsUGF0Y2hlcywgaW5kZXgpOwoJCQlpbmRleCArPSB4TmV4dE5vZGUuYiB8fCAwOwoKCQkJeEluZGV4ICs9IDI7CgkJCXlJbmRleCArPSAyOwoJCQljb250aW51ZTsKCQl9CgoJCWJyZWFrOwoJfQoKCS8vIGVhdCB1cCBhbnkgcmVtYWluaW5nIG5vZGVzIHdpdGggcmVtb3ZlTm9kZSBhbmQgaW5zZXJ0Tm9kZQoKCXdoaWxlICh4SW5kZXggPCB4TGVuKQoJewoJCWluZGV4Kys7CgkJdmFyIHggPSB4S2lkc1t4SW5kZXhdOwoJCXZhciB4Tm9kZSA9IHguYjsKCQlfVmlydHVhbERvbV9yZW1vdmVOb2RlKGNoYW5nZXMsIGxvY2FsUGF0Y2hlcywgeC5hLCB4Tm9kZSwgaW5kZXgpOwoJCWluZGV4ICs9IHhOb2RlLmIgfHwgMDsKCQl4SW5kZXgrKzsKCX0KCgl3aGlsZSAoeUluZGV4IDwgeUxlbikKCXsKCQl2YXIgZW5kSW5zZXJ0cyA9IGVuZEluc2VydHMgfHwgW107CgkJdmFyIHkgPSB5S2lkc1t5SW5kZXhdOwoJCV9WaXJ0dWFsRG9tX2luc2VydE5vZGUoY2hhbmdlcywgbG9jYWxQYXRjaGVzLCB5LmEsIHkuYiwgdW5kZWZpbmVkLCBlbmRJbnNlcnRzKTsKCQl5SW5kZXgrKzsKCX0KCglpZiAobG9jYWxQYXRjaGVzLmxlbmd0aCA+IDAgfHwgaW5zZXJ0cy5sZW5ndGggPiAwIHx8IGVuZEluc2VydHMpCgl7CgkJX1ZpcnR1YWxEb21fcHVzaFBhdGNoKHBhdGNoZXMsIDgsIHJvb3RJbmRleCwgewoJCQl3OiBsb2NhbFBhdGNoZXMsCgkJCXg6IGluc2VydHMsCgkJCXk6IGVuZEluc2VydHMKCQl9KTsKCX0KfQoKCgovLyBDSEFOR0VTIEZST00gS0VZRUQgRElGRgoKCnZhciBfVmlydHVhbERvbV9QT1NURklYID0gJ19lbG1XNkJMJzsKCgpmdW5jdGlvbiBfVmlydHVhbERvbV9pbnNlcnROb2RlKGNoYW5nZXMsIGxvY2FsUGF0Y2hlcywga2V5LCB2bm9kZSwgeUluZGV4LCBpbnNlcnRzKQp7Cgl2YXIgZW50cnkgPSBjaGFuZ2VzW2tleV07CgoJLy8gbmV2ZXIgc2VlbiB0aGlzIGtleSBiZWZvcmUKCWlmICghZW50cnkpCgl7CgkJZW50cnkgPSB7CgkJCWM6IDAsCgkJCXo6IHZub2RlLAoJCQlyOiB5SW5kZXgsCgkJCXM6IHVuZGVmaW5lZAoJCX07CgoJCWluc2VydHMucHVzaCh7IHI6IHlJbmRleCwgQTogZW50cnkgfSk7CgkJY2hhbmdlc1trZXldID0gZW50cnk7CgoJCXJldHVybjsKCX0KCgkvLyB0aGlzIGtleSB3YXMgcmVtb3ZlZCBlYXJsaWVyLCBhIG1hdGNoIQoJaWYgKGVudHJ5LmMgPT09IDEpCgl7CgkJaW5zZXJ0cy5wdXNoKHsgcjogeUluZGV4LCBBOiBlbnRyeSB9KTsKCgkJZW50cnkuYyA9IDI7CgkJdmFyIHN1YlBhdGNoZXMgPSBbXTsKCQlfVmlydHVhbERvbV9kaWZmSGVscChlbnRyeS56LCB2bm9kZSwgc3ViUGF0Y2hlcywgZW50cnkucik7CgkJZW50cnkuciA9IHlJbmRleDsKCQllbnRyeS5zLnMgPSB7CgkJCXc6IHN1YlBhdGNoZXMsCgkJCUE6IGVudHJ5CgkJfTsKCgkJcmV0dXJuOwoJfQoKCS8vIHRoaXMga2V5IGhhcyBhbHJlYWR5IGJlZW4gaW5zZXJ0ZWQgb3IgbW92ZWQsIGEgZHVwbGljYXRlIQoJX1ZpcnR1YWxEb21faW5zZXJ0Tm9kZShjaGFuZ2VzLCBsb2NhbFBhdGNoZXMsIGtleSArIF9WaXJ0dWFsRG9tX1BPU1RGSVgsIHZub2RlLCB5SW5kZXgsIGluc2VydHMpOwp9CgoKZnVuY3Rpb24gX1ZpcnR1YWxEb21fcmVtb3ZlTm9kZShjaGFuZ2VzLCBsb2NhbFBhdGNoZXMsIGtleSwgdm5vZGUsIGluZGV4KQp7Cgl2YXIgZW50cnkgPSBjaGFuZ2VzW2tleV07CgoJLy8gbmV2ZXIgc2VlbiB0aGlzIGtleSBiZWZvcmUKCWlmICghZW50cnkpCgl7CgkJdmFyIHBhdGNoID0gX1ZpcnR1YWxEb21fcHVzaFBhdGNoKGxvY2FsUGF0Y2hlcywgOSwgaW5kZXgsIHVuZGVmaW5lZCk7CgoJCWNoYW5nZXNba2V5XSA9IHsKCQkJYzogMSwKCQkJejogdm5vZGUsCgkJCXI6IGluZGV4LAoJCQlzOiBwYXRjaAoJCX07CgoJCXJldHVybjsKCX0KCgkvLyB0aGlzIGtleSB3YXMgaW5zZXJ0ZWQgZWFybGllciwgYSBtYXRjaCEKCWlmIChlbnRyeS5jID09PSAwKQoJewoJCWVudHJ5LmMgPSAyOwoJCXZhciBzdWJQYXRjaGVzID0gW107CgkJX1ZpcnR1YWxEb21fZGlmZkhlbHAodm5vZGUsIGVudHJ5LnosIHN1YlBhdGNoZXMsIGluZGV4KTsKCgkJX1ZpcnR1YWxEb21fcHVzaFBhdGNoKGxvY2FsUGF0Y2hlcywgOSwgaW5kZXgsIHsKCQkJdzogc3ViUGF0Y2hlcywKCQkJQTogZW50cnkKCQl9KTsKCgkJcmV0dXJuOwoJfQoKCS8vIHRoaXMga2V5IGhhcyBhbHJlYWR5IGJlZW4gcmVtb3ZlZCBvciBtb3ZlZCwgYSBkdXBsaWNhdGUhCglfVmlydHVhbERvbV9yZW1vdmVOb2RlKGNoYW5nZXMsIGxvY2FsUGF0Y2hlcywga2V5ICsgX1ZpcnR1YWxEb21fUE9TVEZJWCwgdm5vZGUsIGluZGV4KTsKfQoKCgovLyBBREQgRE9NIE5PREVTCi8vCi8vIEVhY2ggRE9NIG5vZGUgaGFzIGFuICJpbmRleCIgYXNzaWduZWQgaW4gb3JkZXIgb2YgdHJhdmVyc2FsLiBJdCBpcyBpbXBvcnRhbnQKLy8gdG8gbWluaW1pemUgb3VyIGNyYXdsIG92ZXIgdGhlIGFjdHVhbCBET00sIHNvIHRoZXNlIGluZGV4ZXMgKGFsb25nIHdpdGggdGhlCi8vIGRlc2NlbmRhbnRzQ291bnQgb2YgdmlydHVhbCBub2RlcykgbGV0IHVzIHNraXAgdG91Y2hpbmcgZW50aXJlIHN1YnRyZWVzIG9mCi8vIHRoZSBET00gaWYgd2Uga25vdyB0aGVyZSBhcmUgbm8gcGF0Y2hlcyB0aGVyZS4KCgpmdW5jdGlvbiBfVmlydHVhbERvbV9hZGREb21Ob2Rlcyhkb21Ob2RlLCB2Tm9kZSwgcGF0Y2hlcywgZXZlbnROb2RlKQp7CglfVmlydHVhbERvbV9hZGREb21Ob2Rlc0hlbHAoZG9tTm9kZSwgdk5vZGUsIHBhdGNoZXMsIDAsIDAsIHZOb2RlLmIsIGV2ZW50Tm9kZSk7Cn0KCgovLyBhc3N1bWVzIGBwYXRjaGVzYCBpcyBub24tZW1wdHkgYW5kIGluZGV4ZXMgaW5jcmVhc2UgbW9ub3RvbmljYWxseS4KZnVuY3Rpb24gX1ZpcnR1YWxEb21fYWRkRG9tTm9kZXNIZWxwKGRvbU5vZGUsIHZOb2RlLCBwYXRjaGVzLCBpLCBsb3csIGhpZ2gsIGV2ZW50Tm9kZSkKewoJdmFyIHBhdGNoID0gcGF0Y2hlc1tpXTsKCXZhciBpbmRleCA9IHBhdGNoLnI7CgoJd2hpbGUgKGluZGV4ID09PSBsb3cpCgl7CgkJdmFyIHBhdGNoVHlwZSA9IHBhdGNoLiQ7CgoJCWlmIChwYXRjaFR5cGUgPT09IDEpCgkJewoJCQlfVmlydHVhbERvbV9hZGREb21Ob2Rlcyhkb21Ob2RlLCB2Tm9kZS5rLCBwYXRjaC5zLCBldmVudE5vZGUpOwoJCX0KCQllbHNlIGlmIChwYXRjaFR5cGUgPT09IDgpCgkJewoJCQlwYXRjaC50ID0gZG9tTm9kZTsKCQkJcGF0Y2gudSA9IGV2ZW50Tm9kZTsKCgkJCXZhciBzdWJQYXRjaGVzID0gcGF0Y2gucy53OwoJCQlpZiAoc3ViUGF0Y2hlcy5sZW5ndGggPiAwKQoJCQl7CgkJCQlfVmlydHVhbERvbV9hZGREb21Ob2Rlc0hlbHAoZG9tTm9kZSwgdk5vZGUsIHN1YlBhdGNoZXMsIDAsIGxvdywgaGlnaCwgZXZlbnROb2RlKTsKCQkJfQoJCX0KCQllbHNlIGlmIChwYXRjaFR5cGUgPT09IDkpCgkJewoJCQlwYXRjaC50ID0gZG9tTm9kZTsKCQkJcGF0Y2gudSA9IGV2ZW50Tm9kZTsKCgkJCXZhciBkYXRhID0gcGF0Y2guczsKCQkJaWYgKGRhdGEpCgkJCXsKCQkJCWRhdGEuQS5zID0gZG9tTm9kZTsKCQkJCXZhciBzdWJQYXRjaGVzID0gZGF0YS53OwoJCQkJaWYgKHN1YlBhdGNoZXMubGVuZ3RoID4gMCkKCQkJCXsKCQkJCQlfVmlydHVhbERvbV9hZGREb21Ob2Rlc0hlbHAoZG9tTm9kZSwgdk5vZGUsIHN1YlBhdGNoZXMsIDAsIGxvdywgaGlnaCwgZXZlbnROb2RlKTsKCQkJCX0KCQkJfQoJCX0KCQllbHNlCgkJewoJCQlwYXRjaC50ID0gZG9tTm9kZTsKCQkJcGF0Y2gudSA9IGV2ZW50Tm9kZTsKCQl9CgoJCWkrKzsKCgkJaWYgKCEocGF0Y2ggPSBwYXRjaGVzW2ldKSB8fCAoaW5kZXggPSBwYXRjaC5yKSA+IGhpZ2gpCgkJewoJCQlyZXR1cm4gaTsKCQl9Cgl9CgoJdmFyIHRhZyA9IHZOb2RlLiQ7CgoJaWYgKHRhZyA9PT0gNCkKCXsKCQl2YXIgc3ViTm9kZSA9IHZOb2RlLms7CgoJCXdoaWxlIChzdWJOb2RlLiQgPT09IDQpCgkJewoJCQlzdWJOb2RlID0gc3ViTm9kZS5rOwoJCX0KCgkJcmV0dXJuIF9WaXJ0dWFsRG9tX2FkZERvbU5vZGVzSGVscChkb21Ob2RlLCBzdWJOb2RlLCBwYXRjaGVzLCBpLCBsb3cgKyAxLCBoaWdoLCBkb21Ob2RlLmVsbV9ldmVudF9ub2RlX3JlZik7Cgl9CgoJLy8gdGFnIG11c3QgYmUgMSBvciAyIGF0IHRoaXMgcG9pbnQKCgl2YXIgdktpZHMgPSB2Tm9kZS5lOwoJdmFyIGNoaWxkTm9kZXMgPSBkb21Ob2RlLmNoaWxkTm9kZXM7Cglmb3IgKHZhciBqID0gMDsgaiA8IHZLaWRzLmxlbmd0aDsgaisrKQoJewoJCWxvdysrOwoJCXZhciB2S2lkID0gdGFnID09PSAxID8gdktpZHNbal0gOiB2S2lkc1tqXS5iOwoJCXZhciBuZXh0TG93ID0gbG93ICsgKHZLaWQuYiB8fCAwKTsKCQlpZiAobG93IDw9IGluZGV4ICYmIGluZGV4IDw9IG5leHRMb3cpCgkJewoJCQlpID0gX1ZpcnR1YWxEb21fYWRkRG9tTm9kZXNIZWxwKGNoaWxkTm9kZXNbal0sIHZLaWQsIHBhdGNoZXMsIGksIGxvdywgbmV4dExvdywgZXZlbnROb2RlKTsKCQkJaWYgKCEocGF0Y2ggPSBwYXRjaGVzW2ldKSB8fCAoaW5kZXggPSBwYXRjaC5yKSA+IGhpZ2gpCgkJCXsKCQkJCXJldHVybiBpOwoJCQl9CgkJfQoJCWxvdyA9IG5leHRMb3c7Cgl9CglyZXR1cm4gaTsKfQoKCgovLyBBUFBMWSBQQVRDSEVTCgoKZnVuY3Rpb24gX1ZpcnR1YWxEb21fYXBwbHlQYXRjaGVzKHJvb3REb21Ob2RlLCBvbGRWaXJ0dWFsTm9kZSwgcGF0Y2hlcywgZXZlbnROb2RlKQp7CglpZiAocGF0Y2hlcy5sZW5ndGggPT09IDApCgl7CgkJcmV0dXJuIHJvb3REb21Ob2RlOwoJfQoKCV9WaXJ0dWFsRG9tX2FkZERvbU5vZGVzKHJvb3REb21Ob2RlLCBvbGRWaXJ0dWFsTm9kZSwgcGF0Y2hlcywgZXZlbnROb2RlKTsKCXJldHVybiBfVmlydHVhbERvbV9hcHBseVBhdGNoZXNIZWxwKHJvb3REb21Ob2RlLCBwYXRjaGVzKTsKfQoKZnVuY3Rpb24gX1ZpcnR1YWxEb21fYXBwbHlQYXRjaGVzSGVscChyb290RG9tTm9kZSwgcGF0Y2hlcykKewoJZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRjaGVzLmxlbmd0aDsgaSsrKQoJewoJCXZhciBwYXRjaCA9IHBhdGNoZXNbaV07CgkJdmFyIGxvY2FsRG9tTm9kZSA9IHBhdGNoLnQKCQl2YXIgbmV3Tm9kZSA9IF9WaXJ0dWFsRG9tX2FwcGx5UGF0Y2gobG9jYWxEb21Ob2RlLCBwYXRjaCk7CgkJaWYgKGxvY2FsRG9tTm9kZSA9PT0gcm9vdERvbU5vZGUpCgkJewoJCQlyb290RG9tTm9kZSA9IG5ld05vZGU7CgkJfQoJfQoJcmV0dXJuIHJvb3REb21Ob2RlOwp9CgpmdW5jdGlvbiBfVmlydHVhbERvbV9hcHBseVBhdGNoKGRvbU5vZGUsIHBhdGNoKQp7Cglzd2l0Y2ggKHBhdGNoLiQpCgl7CgkJY2FzZSAwOgoJCQlyZXR1cm4gX1ZpcnR1YWxEb21fYXBwbHlQYXRjaFJlZHJhdyhkb21Ob2RlLCBwYXRjaC5zLCBwYXRjaC51KTsKCgkJY2FzZSA0OgoJCQlfVmlydHVhbERvbV9hcHBseUZhY3RzKGRvbU5vZGUsIHBhdGNoLnUsIHBhdGNoLnMpOwoJCQlyZXR1cm4gZG9tTm9kZTsKCgkJY2FzZSAzOgoJCQlkb21Ob2RlLnJlcGxhY2VEYXRhKDAsIGRvbU5vZGUubGVuZ3RoLCBwYXRjaC5zKTsKCQkJcmV0dXJuIGRvbU5vZGU7CgoJCWNhc2UgMToKCQkJcmV0dXJuIF9WaXJ0dWFsRG9tX2FwcGx5UGF0Y2hlc0hlbHAoZG9tTm9kZSwgcGF0Y2gucyk7CgoJCWNhc2UgMjoKCQkJaWYgKGRvbU5vZGUuZWxtX2V2ZW50X25vZGVfcmVmKQoJCQl7CgkJCQlkb21Ob2RlLmVsbV9ldmVudF9ub2RlX3JlZi5qID0gcGF0Y2guczsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCWRvbU5vZGUuZWxtX2V2ZW50X25vZGVfcmVmID0geyBqOiBwYXRjaC5zLCBwOiBwYXRjaC51IH07CgkJCX0KCQkJcmV0dXJuIGRvbU5vZGU7CgoJCWNhc2UgNjoKCQkJdmFyIGRhdGEgPSBwYXRjaC5zOwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuaTsgaSsrKQoJCQl7CgkJCQlkb21Ob2RlLnJlbW92ZUNoaWxkKGRvbU5vZGUuY2hpbGROb2Rlc1tkYXRhLnZdKTsKCQkJfQoJCQlyZXR1cm4gZG9tTm9kZTsKCgkJY2FzZSA3OgoJCQl2YXIgZGF0YSA9IHBhdGNoLnM7CgkJCXZhciBraWRzID0gZGF0YS5lOwoJCQl2YXIgaSA9IGRhdGEudjsKCQkJdmFyIHRoZUVuZCA9IGRvbU5vZGUuY2hpbGROb2Rlc1tpXTsKCQkJZm9yICg7IGkgPCBraWRzLmxlbmd0aDsgaSsrKQoJCQl7CgkJCQlkb21Ob2RlLmluc2VydEJlZm9yZShfVmlydHVhbERvbV9yZW5kZXIoa2lkc1tpXSwgcGF0Y2gudSksIHRoZUVuZCk7CgkJCX0KCQkJcmV0dXJuIGRvbU5vZGU7CgoJCWNhc2UgOToKCQkJdmFyIGRhdGEgPSBwYXRjaC5zOwoJCQlpZiAoIWRhdGEpCgkJCXsKCQkJCWRvbU5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkb21Ob2RlKTsKCQkJCXJldHVybiBkb21Ob2RlOwoJCQl9CgkJCXZhciBlbnRyeSA9IGRhdGEuQTsKCQkJaWYgKHR5cGVvZiBlbnRyeS5yICE9PSAndW5kZWZpbmVkJykKCQkJewoJCQkJZG9tTm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRvbU5vZGUpOwoJCQl9CgkJCWVudHJ5LnMgPSBfVmlydHVhbERvbV9hcHBseVBhdGNoZXNIZWxwKGRvbU5vZGUsIGRhdGEudyk7CgkJCXJldHVybiBkb21Ob2RlOwoKCQljYXNlIDg6CgkJCXJldHVybiBfVmlydHVhbERvbV9hcHBseVBhdGNoUmVvcmRlcihkb21Ob2RlLCBwYXRjaCk7CgoJCWNhc2UgNToKCQkJcmV0dXJuIHBhdGNoLnMoZG9tTm9kZSk7CgoJCWRlZmF1bHQ6CgkJCV9EZWJ1Z19jcmFzaCgxMCk7IC8vICdSYW4gaW50byBhbiB1bmtub3duIHBhdGNoIScKCX0KfQoKCmZ1bmN0aW9uIF9WaXJ0dWFsRG9tX2FwcGx5UGF0Y2hSZWRyYXcoZG9tTm9kZSwgdk5vZGUsIGV2ZW50Tm9kZSkKewoJdmFyIHBhcmVudE5vZGUgPSBkb21Ob2RlLnBhcmVudE5vZGU7Cgl2YXIgbmV3Tm9kZSA9IF9WaXJ0dWFsRG9tX3JlbmRlcih2Tm9kZSwgZXZlbnROb2RlKTsKCglpZiAoIW5ld05vZGUuZWxtX2V2ZW50X25vZGVfcmVmKQoJewoJCW5ld05vZGUuZWxtX2V2ZW50X25vZGVfcmVmID0gZG9tTm9kZS5lbG1fZXZlbnRfbm9kZV9yZWY7Cgl9CgoJaWYgKHBhcmVudE5vZGUgJiYgbmV3Tm9kZSAhPT0gZG9tTm9kZSkKCXsKCQlwYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdOb2RlLCBkb21Ob2RlKTsKCX0KCXJldHVybiBuZXdOb2RlOwp9CgoKZnVuY3Rpb24gX1ZpcnR1YWxEb21fYXBwbHlQYXRjaFJlb3JkZXIoZG9tTm9kZSwgcGF0Y2gpCnsKCXZhciBkYXRhID0gcGF0Y2guczsKCgkvLyByZW1vdmUgZW5kIGluc2VydHMKCXZhciBmcmFnID0gX1ZpcnR1YWxEb21fYXBwbHlQYXRjaFJlb3JkZXJFbmRJbnNlcnRzSGVscChkYXRhLnksIHBhdGNoKTsKCgkvLyByZW1vdmFscwoJZG9tTm9kZSA9IF9WaXJ0dWFsRG9tX2FwcGx5UGF0Y2hlc0hlbHAoZG9tTm9kZSwgZGF0YS53KTsKCgkvLyBpbnNlcnRzCgl2YXIgaW5zZXJ0cyA9IGRhdGEueDsKCWZvciAodmFyIGkgPSAwOyBpIDwgaW5zZXJ0cy5sZW5ndGg7IGkrKykKCXsKCQl2YXIgaW5zZXJ0ID0gaW5zZXJ0c1tpXTsKCQl2YXIgZW50cnkgPSBpbnNlcnQuQTsKCQl2YXIgbm9kZSA9IGVudHJ5LmMgPT09IDIKCQkJPyBlbnRyeS5zCgkJCTogX1ZpcnR1YWxEb21fcmVuZGVyKGVudHJ5LnosIHBhdGNoLnUpOwoJCWRvbU5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIGRvbU5vZGUuY2hpbGROb2Rlc1tpbnNlcnQucl0pOwoJfQoKCS8vIGFkZCBlbmQgaW5zZXJ0cwoJaWYgKGZyYWcpCgl7CgkJX1ZpcnR1YWxEb21fYXBwZW5kQ2hpbGQoZG9tTm9kZSwgZnJhZyk7Cgl9CgoJcmV0dXJuIGRvbU5vZGU7Cn0KCgpmdW5jdGlvbiBfVmlydHVhbERvbV9hcHBseVBhdGNoUmVvcmRlckVuZEluc2VydHNIZWxwKGVuZEluc2VydHMsIHBhdGNoKQp7CglpZiAoIWVuZEluc2VydHMpCgl7CgkJcmV0dXJuOwoJfQoKCXZhciBmcmFnID0gX1ZpcnR1YWxEb21fZG9jLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKCWZvciAodmFyIGkgPSAwOyBpIDwgZW5kSW5zZXJ0cy5sZW5ndGg7IGkrKykKCXsKCQl2YXIgaW5zZXJ0ID0gZW5kSW5zZXJ0c1tpXTsKCQl2YXIgZW50cnkgPSBpbnNlcnQuQTsKCQlfVmlydHVhbERvbV9hcHBlbmRDaGlsZChmcmFnLCBlbnRyeS5jID09PSAyCgkJCT8gZW50cnkucwoJCQk6IF9WaXJ0dWFsRG9tX3JlbmRlcihlbnRyeS56LCBwYXRjaC51KQoJCSk7Cgl9CglyZXR1cm4gZnJhZzsKfQoKCmZ1bmN0aW9uIF9WaXJ0dWFsRG9tX3ZpcnR1YWxpemUobm9kZSkKewoJLy8gVEVYVCBOT0RFUwoKCWlmIChub2RlLm5vZGVUeXBlID09PSAzKQoJewoJCXJldHVybiBfVmlydHVhbERvbV90ZXh0KG5vZGUudGV4dENvbnRlbnQpOwoJfQoKCgkvLyBXRUlSRCBOT0RFUwoKCWlmIChub2RlLm5vZGVUeXBlICE9PSAxKQoJewoJCXJldHVybiBfVmlydHVhbERvbV90ZXh0KCcnKTsKCX0KCgoJLy8gRUxFTUVOVCBOT0RFUwoKCXZhciBhdHRyTGlzdCA9IF9MaXN0X05pbDsKCXZhciBhdHRycyA9IG5vZGUuYXR0cmlidXRlczsKCWZvciAodmFyIGkgPSBhdHRycy5sZW5ndGg7IGktLTsgKQoJewoJCXZhciBhdHRyID0gYXR0cnNbaV07CgkJdmFyIG5hbWUgPSBhdHRyLm5hbWU7CgkJdmFyIHZhbHVlID0gYXR0ci52YWx1ZTsKCQlhdHRyTGlzdCA9IF9MaXN0X0NvbnMoIEEyKF9WaXJ0dWFsRG9tX2F0dHJpYnV0ZSwgbmFtZSwgdmFsdWUpLCBhdHRyTGlzdCApOwoJfQoKCXZhciB0YWcgPSBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKCXZhciBraWRMaXN0ID0gX0xpc3RfTmlsOwoJdmFyIGtpZHMgPSBub2RlLmNoaWxkTm9kZXM7CgoJZm9yICh2YXIgaSA9IGtpZHMubGVuZ3RoOyBpLS07ICkKCXsKCQlraWRMaXN0ID0gX0xpc3RfQ29ucyhfVmlydHVhbERvbV92aXJ0dWFsaXplKGtpZHNbaV0pLCBraWRMaXN0KTsKCX0KCXJldHVybiBBMyhfVmlydHVhbERvbV9ub2RlLCB0YWcsIGF0dHJMaXN0LCBraWRMaXN0KTsKfQoKZnVuY3Rpb24gX1ZpcnR1YWxEb21fZGVrZXkoa2V5ZWROb2RlKQp7Cgl2YXIga2V5ZWRLaWRzID0ga2V5ZWROb2RlLmU7Cgl2YXIgbGVuID0ga2V5ZWRLaWRzLmxlbmd0aDsKCXZhciBraWRzID0gbmV3IEFycmF5KGxlbik7Cglmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKQoJewoJCWtpZHNbaV0gPSBrZXllZEtpZHNbaV0uYjsKCX0KCglyZXR1cm4gewoJCSQ6IDEsCgkJYzoga2V5ZWROb2RlLmMsCgkJZDoga2V5ZWROb2RlLmQsCgkJZToga2lkcywKCQlmOiBrZXllZE5vZGUuZiwKCQliOiBrZXllZE5vZGUuYgoJfTsKfQoKCgoKLy8gRUxFTUVOVAoKCnZhciBfRGVidWdnZXJfZWxlbWVudDsKCnZhciBfQnJvd3Nlcl9lbGVtZW50ID0gX0RlYnVnZ2VyX2VsZW1lbnQgfHwgRjQoZnVuY3Rpb24oaW1wbCwgZmxhZ0RlY29kZXIsIGRlYnVnTWV0YWRhdGEsIGFyZ3MpCnsKCXJldHVybiBfUGxhdGZvcm1faW5pdGlhbGl6ZSgKCQlmbGFnRGVjb2RlciwKCQlhcmdzLAoJCWltcGwuaW5pdCwKCQlpbXBsLnVwZGF0ZSwKCQlpbXBsLnN1YnNjcmlwdGlvbnMsCgkJZnVuY3Rpb24oc2VuZFRvQXBwLCBpbml0aWFsTW9kZWwpIHsKCQkJdmFyIHZpZXcgPSBpbXBsLnZpZXc7CgkJCS8qKl9VTlVTRUQvCgkJCXZhciBkb21Ob2RlID0gYXJnc1snbm9kZSddOwoJCQkvLyovCgkJCS8qKi8KCQkJdmFyIGRvbU5vZGUgPSBhcmdzICYmIGFyZ3NbJ25vZGUnXSA/IGFyZ3NbJ25vZGUnXSA6IF9EZWJ1Z19jcmFzaCgwKTsKCQkJLy8qLwoJCQl2YXIgY3Vyck5vZGUgPSBfVmlydHVhbERvbV92aXJ0dWFsaXplKGRvbU5vZGUpOwoKCQkJcmV0dXJuIF9Ccm93c2VyX21ha2VBbmltYXRvcihpbml0aWFsTW9kZWwsIGZ1bmN0aW9uKG1vZGVsKQoJCQl7CgkJCQl2YXIgbmV4dE5vZGUgPSB2aWV3KG1vZGVsKTsKCQkJCXZhciBwYXRjaGVzID0gX1ZpcnR1YWxEb21fZGlmZihjdXJyTm9kZSwgbmV4dE5vZGUpOwoJCQkJZG9tTm9kZSA9IF9WaXJ0dWFsRG9tX2FwcGx5UGF0Y2hlcyhkb21Ob2RlLCBjdXJyTm9kZSwgcGF0Y2hlcywgc2VuZFRvQXBwKTsKCQkJCWN1cnJOb2RlID0gbmV4dE5vZGU7CgkJCX0pOwoJCX0KCSk7Cn0pOwoKCgovLyBET0NVTUVOVAoKCnZhciBfRGVidWdnZXJfZG9jdW1lbnQ7Cgp2YXIgX0Jyb3dzZXJfZG9jdW1lbnQgPSBfRGVidWdnZXJfZG9jdW1lbnQgfHwgRjQoZnVuY3Rpb24oaW1wbCwgZmxhZ0RlY29kZXIsIGRlYnVnTWV0YWRhdGEsIGFyZ3MpCnsKCXJldHVybiBfUGxhdGZvcm1faW5pdGlhbGl6ZSgKCQlmbGFnRGVjb2RlciwKCQlhcmdzLAoJCWltcGwuaW5pdCwKCQlpbXBsLnVwZGF0ZSwKCQlpbXBsLnN1YnNjcmlwdGlvbnMsCgkJZnVuY3Rpb24oc2VuZFRvQXBwLCBpbml0aWFsTW9kZWwpIHsKCQkJdmFyIGRpdmVydEhyZWZUb0FwcCA9IGltcGwuc2V0dXAgJiYgaW1wbC5zZXR1cChzZW5kVG9BcHApCgkJCXZhciB2aWV3ID0gaW1wbC52aWV3OwoJCQl2YXIgdGl0bGUgPSBfVmlydHVhbERvbV9kb2MudGl0bGU7CgkJCXZhciBib2R5Tm9kZSA9IF9WaXJ0dWFsRG9tX2RvYy5ib2R5OwoJCQl2YXIgY3Vyck5vZGUgPSBfVmlydHVhbERvbV92aXJ0dWFsaXplKGJvZHlOb2RlKTsKCQkJcmV0dXJuIF9Ccm93c2VyX21ha2VBbmltYXRvcihpbml0aWFsTW9kZWwsIGZ1bmN0aW9uKG1vZGVsKQoJCQl7CgkJCQlfVmlydHVhbERvbV9kaXZlcnRIcmVmVG9BcHAgPSBkaXZlcnRIcmVmVG9BcHA7CgkJCQl2YXIgZG9jID0gdmlldyhtb2RlbCk7CgkJCQl2YXIgbmV4dE5vZGUgPSBfVmlydHVhbERvbV9ub2RlKCdib2R5JykoX0xpc3RfTmlsKShkb2MuYm9keSk7CgkJCQl2YXIgcGF0Y2hlcyA9IF9WaXJ0dWFsRG9tX2RpZmYoY3Vyck5vZGUsIG5leHROb2RlKTsKCQkJCWJvZHlOb2RlID0gX1ZpcnR1YWxEb21fYXBwbHlQYXRjaGVzKGJvZHlOb2RlLCBjdXJyTm9kZSwgcGF0Y2hlcywgc2VuZFRvQXBwKTsKCQkJCWN1cnJOb2RlID0gbmV4dE5vZGU7CgkJCQlfVmlydHVhbERvbV9kaXZlcnRIcmVmVG9BcHAgPSAwOwoJCQkJKHRpdGxlICE9PSBkb2MudGl0bGUpICYmIChfVmlydHVhbERvbV9kb2MudGl0bGUgPSB0aXRsZSA9IGRvYy50aXRsZSk7CgkJCX0pOwoJCX0KCSk7Cn0pOwoKCgovLyBBTklNQVRJT04KCgp2YXIgX0Jyb3dzZXJfY2FuY2VsQW5pbWF0aW9uRnJhbWUgPQoJdHlwZW9mIGNhbmNlbEFuaW1hdGlvbkZyYW1lICE9PSAndW5kZWZpbmVkJwoJCT8gY2FuY2VsQW5pbWF0aW9uRnJhbWUKCQk6IGZ1bmN0aW9uKGlkKSB7IGNsZWFyVGltZW91dChpZCk7IH07Cgp2YXIgX0Jyb3dzZXJfcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0KCXR5cGVvZiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgIT09ICd1bmRlZmluZWQnCgkJPyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUKCQk6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7IHJldHVybiBzZXRUaW1lb3V0KGNhbGxiYWNrLCAxMDAwIC8gNjApOyB9OwoKCmZ1bmN0aW9uIF9Ccm93c2VyX21ha2VBbmltYXRvcihtb2RlbCwgZHJhdykKewoJZHJhdyhtb2RlbCk7CgoJdmFyIHN0YXRlID0gMDsKCglmdW5jdGlvbiB1cGRhdGVJZk5lZWRlZCgpCgl7CgkJc3RhdGUgPSBzdGF0ZSA9PT0gMQoJCQk/IDAKCQkJOiAoIF9Ccm93c2VyX3JlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGVJZk5lZWRlZCksIGRyYXcobW9kZWwpLCAxICk7Cgl9CgoJcmV0dXJuIGZ1bmN0aW9uKG5leHRNb2RlbCwgaXNTeW5jKQoJewoJCW1vZGVsID0gbmV4dE1vZGVsOwoKCQlpc1N5bmMKCQkJPyAoIGRyYXcobW9kZWwpLAoJCQkJc3RhdGUgPT09IDIgJiYgKHN0YXRlID0gMSkKCQkJCSkKCQkJOiAoIHN0YXRlID09PSAwICYmIF9Ccm93c2VyX3JlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGVJZk5lZWRlZCksCgkJCQlzdGF0ZSA9IDIKCQkJCSk7Cgl9Owp9CgoKCi8vIEFQUExJQ0FUSU9OCgoKZnVuY3Rpb24gX0Jyb3dzZXJfYXBwbGljYXRpb24oaW1wbCkKewoJdmFyIG9uVXJsQ2hhbmdlID0gaW1wbC5vblVybENoYW5nZTsKCXZhciBvblVybFJlcXVlc3QgPSBpbXBsLm9uVXJsUmVxdWVzdDsKCXZhciBrZXkgPSBmdW5jdGlvbigpIHsga2V5LmEob25VcmxDaGFuZ2UoX0Jyb3dzZXJfZ2V0VXJsKCkpKTsgfTsKCglyZXR1cm4gX0Jyb3dzZXJfZG9jdW1lbnQoewoJCXNldHVwOiBmdW5jdGlvbihzZW5kVG9BcHApCgkJewoJCQlrZXkuYSA9IHNlbmRUb0FwcDsKCQkJX0Jyb3dzZXJfd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywga2V5KTsKCQkJX0Jyb3dzZXJfd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignVHJpZGVudCcpIDwgMCB8fCBfQnJvd3Nlcl93aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIGtleSk7CgoJCQlyZXR1cm4gRjIoZnVuY3Rpb24oZG9tTm9kZSwgZXZlbnQpCgkJCXsKCQkJCWlmICghZXZlbnQuY3RybEtleSAmJiAhZXZlbnQubWV0YUtleSAmJiAhZXZlbnQuc2hpZnRLZXkgJiYgZXZlbnQuYnV0dG9uIDwgMSAmJiAhZG9tTm9kZS50YXJnZXQgJiYgIWRvbU5vZGUuaGFzQXR0cmlidXRlKCdkb3dubG9hZCcpKQoJCQkJewoJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQkJdmFyIGhyZWYgPSBkb21Ob2RlLmhyZWY7CgkJCQkJdmFyIGN1cnIgPSBfQnJvd3Nlcl9nZXRVcmwoKTsKCQkJCQl2YXIgbmV4dCA9ICRlbG0kdXJsJFVybCRmcm9tU3RyaW5nKGhyZWYpLmE7CgkJCQkJc2VuZFRvQXBwKG9uVXJsUmVxdWVzdCgKCQkJCQkJKG5leHQKCQkJCQkJCSYmIGN1cnIucHJvdG9jb2wgPT09IG5leHQucHJvdG9jb2wKCQkJCQkJCSYmIGN1cnIuaG9zdCA9PT0gbmV4dC5ob3N0CgkJCQkJCQkmJiBjdXJyLnBvcnRfLmEgPT09IG5leHQucG9ydF8uYQoJCQkJCQkpCgkJCQkJCQk/ICRlbG0kYnJvd3NlciRCcm93c2VyJEludGVybmFsKG5leHQpCgkJCQkJCQk6ICRlbG0kYnJvd3NlciRCcm93c2VyJEV4dGVybmFsKGhyZWYpCgkJCQkJKSk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJaW5pdDogZnVuY3Rpb24oZmxhZ3MpCgkJewoJCQlyZXR1cm4gQTMoaW1wbC5pbml0LCBmbGFncywgX0Jyb3dzZXJfZ2V0VXJsKCksIGtleSk7CgkJfSwKCQl2aWV3OiBpbXBsLnZpZXcsCgkJdXBkYXRlOiBpbXBsLnVwZGF0ZSwKCQlzdWJzY3JpcHRpb25zOiBpbXBsLnN1YnNjcmlwdGlvbnMKCX0pOwp9CgpmdW5jdGlvbiBfQnJvd3Nlcl9nZXRVcmwoKQp7CglyZXR1cm4gJGVsbSR1cmwkVXJsJGZyb21TdHJpbmcoX1ZpcnR1YWxEb21fZG9jLmxvY2F0aW9uLmhyZWYpLmEgfHwgX0RlYnVnX2NyYXNoKDEpOwp9Cgp2YXIgX0Jyb3dzZXJfZ28gPSBGMihmdW5jdGlvbihrZXksIG4pCnsKCXJldHVybiBBMigkZWxtJGNvcmUkVGFzayRwZXJmb3JtLCAkZWxtJGNvcmUkQmFzaWNzJG5ldmVyLCBfU2NoZWR1bGVyX2JpbmRpbmcoZnVuY3Rpb24oKSB7CgkJbiAmJiBoaXN0b3J5LmdvKG4pOwoJCWtleSgpOwoJfSkpOwp9KTsKCnZhciBfQnJvd3Nlcl9wdXNoVXJsID0gRjIoZnVuY3Rpb24oa2V5LCB1cmwpCnsKCXJldHVybiBBMigkZWxtJGNvcmUkVGFzayRwZXJmb3JtLCAkZWxtJGNvcmUkQmFzaWNzJG5ldmVyLCBfU2NoZWR1bGVyX2JpbmRpbmcoZnVuY3Rpb24oKSB7CgkJaGlzdG9yeS5wdXNoU3RhdGUoe30sICcnLCB1cmwpOwoJCWtleSgpOwoJfSkpOwp9KTsKCnZhciBfQnJvd3Nlcl9yZXBsYWNlVXJsID0gRjIoZnVuY3Rpb24oa2V5LCB1cmwpCnsKCXJldHVybiBBMigkZWxtJGNvcmUkVGFzayRwZXJmb3JtLCAkZWxtJGNvcmUkQmFzaWNzJG5ldmVyLCBfU2NoZWR1bGVyX2JpbmRpbmcoZnVuY3Rpb24oKSB7CgkJaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sICcnLCB1cmwpOwoJCWtleSgpOwoJfSkpOwp9KTsKCgoKLy8gR0xPQkFMIEVWRU5UUwoKCnZhciBfQnJvd3Nlcl9mYWtlTm9kZSA9IHsgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7fSwgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7fSB9Owp2YXIgX0Jyb3dzZXJfZG9jID0gdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50IDogX0Jyb3dzZXJfZmFrZU5vZGU7CnZhciBfQnJvd3Nlcl93aW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IF9Ccm93c2VyX2Zha2VOb2RlOwoKdmFyIF9Ccm93c2VyX29uID0gRjMoZnVuY3Rpb24obm9kZSwgZXZlbnROYW1lLCBzZW5kVG9TZWxmKQp7CglyZXR1cm4gX1NjaGVkdWxlcl9zcGF3bihfU2NoZWR1bGVyX2JpbmRpbmcoZnVuY3Rpb24oY2FsbGJhY2spCgl7CgkJZnVuY3Rpb24gaGFuZGxlcihldmVudCkJeyBfU2NoZWR1bGVyX3Jhd1NwYXduKHNlbmRUb1NlbGYoZXZlbnQpKTsgfQoJCW5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIF9WaXJ0dWFsRG9tX3Bhc3NpdmVTdXBwb3J0ZWQgJiYgeyBwYXNzaXZlOiB0cnVlIH0pOwoJCXJldHVybiBmdW5jdGlvbigpIHsgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7IH07Cgl9KSk7Cn0pOwoKdmFyIF9Ccm93c2VyX2RlY29kZUV2ZW50ID0gRjIoZnVuY3Rpb24oZGVjb2RlciwgZXZlbnQpCnsKCXZhciByZXN1bHQgPSBfSnNvbl9ydW5IZWxwKGRlY29kZXIsIGV2ZW50KTsKCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JGlzT2socmVzdWx0KSA/ICRlbG0kY29yZSRNYXliZSRKdXN0KHJlc3VsdC5hKSA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwp9KTsKCgoKLy8gUEFHRSBWSVNJQklMSVRZCgoKZnVuY3Rpb24gX0Jyb3dzZXJfdmlzaWJpbGl0eUluZm8oKQp7CglyZXR1cm4gKHR5cGVvZiBfVmlydHVhbERvbV9kb2MuaGlkZGVuICE9PSAndW5kZWZpbmVkJykKCQk/IHsgaGlkZGVuOiAnaGlkZGVuJywgY2hhbmdlOiAndmlzaWJpbGl0eWNoYW5nZScgfQoJCToKCSh0eXBlb2YgX1ZpcnR1YWxEb21fZG9jLm1vekhpZGRlbiAhPT0gJ3VuZGVmaW5lZCcpCgkJPyB7IGhpZGRlbjogJ21vekhpZGRlbicsIGNoYW5nZTogJ21venZpc2liaWxpdHljaGFuZ2UnIH0KCQk6CgkodHlwZW9mIF9WaXJ0dWFsRG9tX2RvYy5tc0hpZGRlbiAhPT0gJ3VuZGVmaW5lZCcpCgkJPyB7IGhpZGRlbjogJ21zSGlkZGVuJywgY2hhbmdlOiAnbXN2aXNpYmlsaXR5Y2hhbmdlJyB9CgkJOgoJKHR5cGVvZiBfVmlydHVhbERvbV9kb2Mud2Via2l0SGlkZGVuICE9PSAndW5kZWZpbmVkJykKCQk/IHsgaGlkZGVuOiAnd2Via2l0SGlkZGVuJywgY2hhbmdlOiAnd2Via2l0dmlzaWJpbGl0eWNoYW5nZScgfQoJCTogeyBoaWRkZW46ICdoaWRkZW4nLCBjaGFuZ2U6ICd2aXNpYmlsaXR5Y2hhbmdlJyB9Owp9CgoKCi8vIEFOSU1BVElPTiBGUkFNRVMKCgpmdW5jdGlvbiBfQnJvd3Nlcl9yQUYoKQp7CglyZXR1cm4gX1NjaGVkdWxlcl9iaW5kaW5nKGZ1bmN0aW9uKGNhbGxiYWNrKQoJewoJCXZhciBpZCA9IF9Ccm93c2VyX3JlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHsKCQkJY2FsbGJhY2soX1NjaGVkdWxlcl9zdWNjZWVkKERhdGUubm93KCkpKTsKCQl9KTsKCgkJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCQlfQnJvd3Nlcl9jYW5jZWxBbmltYXRpb25GcmFtZShpZCk7CgkJfTsKCX0pOwp9CgoKZnVuY3Rpb24gX0Jyb3dzZXJfbm93KCkKewoJcmV0dXJuIF9TY2hlZHVsZXJfYmluZGluZyhmdW5jdGlvbihjYWxsYmFjaykKCXsKCQljYWxsYmFjayhfU2NoZWR1bGVyX3N1Y2NlZWQoRGF0ZS5ub3coKSkpOwoJfSk7Cn0KCgoKLy8gRE9NIFNUVUZGCgoKZnVuY3Rpb24gX0Jyb3dzZXJfd2l0aE5vZGUoaWQsIGRvU3R1ZmYpCnsKCXJldHVybiBfU2NoZWR1bGVyX2JpbmRpbmcoZnVuY3Rpb24oY2FsbGJhY2spCgl7CgkJX0Jyb3dzZXJfcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkgewoJCQl2YXIgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKCQkJY2FsbGJhY2sobm9kZQoJCQkJPyBfU2NoZWR1bGVyX3N1Y2NlZWQoZG9TdHVmZihub2RlKSkKCQkJCTogX1NjaGVkdWxlcl9mYWlsKCRlbG0kYnJvd3NlciRCcm93c2VyJERvbSROb3RGb3VuZChpZCkpCgkJCSk7CgkJfSk7Cgl9KTsKfQoKCmZ1bmN0aW9uIF9Ccm93c2VyX3dpdGhXaW5kb3coZG9TdHVmZikKewoJcmV0dXJuIF9TY2hlZHVsZXJfYmluZGluZyhmdW5jdGlvbihjYWxsYmFjaykKCXsKCQlfQnJvd3Nlcl9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7CgkJCWNhbGxiYWNrKF9TY2hlZHVsZXJfc3VjY2VlZChkb1N0dWZmKCkpKTsKCQl9KTsKCX0pOwp9CgoKLy8gRk9DVVMgYW5kIEJMVVIKCgp2YXIgX0Jyb3dzZXJfY2FsbCA9IEYyKGZ1bmN0aW9uKGZ1bmN0aW9uTmFtZSwgaWQpCnsKCXJldHVybiBfQnJvd3Nlcl93aXRoTm9kZShpZCwgZnVuY3Rpb24obm9kZSkgewoJCW5vZGVbZnVuY3Rpb25OYW1lXSgpOwoJCXJldHVybiBfVXRpbHNfVHVwbGUwOwoJfSk7Cn0pOwoKCgovLyBXSU5ET1cgVklFV1BPUlQKCgpmdW5jdGlvbiBfQnJvd3Nlcl9nZXRWaWV3cG9ydCgpCnsKCXJldHVybiB7CgkJc2NlbmU6IF9Ccm93c2VyX2dldFNjZW5lKCksCgkJdmlld3BvcnQ6IHsKCQkJeDogX0Jyb3dzZXJfd2luZG93LnBhZ2VYT2Zmc2V0LAoJCQl5OiBfQnJvd3Nlcl93aW5kb3cucGFnZVlPZmZzZXQsCgkJCXdpZHRoOiBfQnJvd3Nlcl9kb2MuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLAoJCQloZWlnaHQ6IF9Ccm93c2VyX2RvYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0CgkJfQoJfTsKfQoKZnVuY3Rpb24gX0Jyb3dzZXJfZ2V0U2NlbmUoKQp7Cgl2YXIgYm9keSA9IF9Ccm93c2VyX2RvYy5ib2R5OwoJdmFyIGVsZW0gPSBfQnJvd3Nlcl9kb2MuZG9jdW1lbnRFbGVtZW50OwoJcmV0dXJuIHsKCQl3aWR0aDogTWF0aC5tYXgoYm9keS5zY3JvbGxXaWR0aCwgYm9keS5vZmZzZXRXaWR0aCwgZWxlbS5zY3JvbGxXaWR0aCwgZWxlbS5vZmZzZXRXaWR0aCwgZWxlbS5jbGllbnRXaWR0aCksCgkJaGVpZ2h0OiBNYXRoLm1heChib2R5LnNjcm9sbEhlaWdodCwgYm9keS5vZmZzZXRIZWlnaHQsIGVsZW0uc2Nyb2xsSGVpZ2h0LCBlbGVtLm9mZnNldEhlaWdodCwgZWxlbS5jbGllbnRIZWlnaHQpCgl9Owp9Cgp2YXIgX0Jyb3dzZXJfc2V0Vmlld3BvcnQgPSBGMihmdW5jdGlvbih4LCB5KQp7CglyZXR1cm4gX0Jyb3dzZXJfd2l0aFdpbmRvdyhmdW5jdGlvbigpCgl7CgkJX0Jyb3dzZXJfd2luZG93LnNjcm9sbCh4LCB5KTsKCQlyZXR1cm4gX1V0aWxzX1R1cGxlMDsKCX0pOwp9KTsKCgoKLy8gRUxFTUVOVCBWSUVXUE9SVAoKCmZ1bmN0aW9uIF9Ccm93c2VyX2dldFZpZXdwb3J0T2YoaWQpCnsKCXJldHVybiBfQnJvd3Nlcl93aXRoTm9kZShpZCwgZnVuY3Rpb24obm9kZSkKCXsKCQlyZXR1cm4gewoJCQlzY2VuZTogewoJCQkJd2lkdGg6IG5vZGUuc2Nyb2xsV2lkdGgsCgkJCQloZWlnaHQ6IG5vZGUuc2Nyb2xsSGVpZ2h0CgkJCX0sCgkJCXZpZXdwb3J0OiB7CgkJCQl4OiBub2RlLnNjcm9sbExlZnQsCgkJCQl5OiBub2RlLnNjcm9sbFRvcCwKCQkJCXdpZHRoOiBub2RlLmNsaWVudFdpZHRoLAoJCQkJaGVpZ2h0OiBub2RlLmNsaWVudEhlaWdodAoJCQl9CgkJfTsKCX0pOwp9CgoKdmFyIF9Ccm93c2VyX3NldFZpZXdwb3J0T2YgPSBGMyhmdW5jdGlvbihpZCwgeCwgeSkKewoJcmV0dXJuIF9Ccm93c2VyX3dpdGhOb2RlKGlkLCBmdW5jdGlvbihub2RlKQoJewoJCW5vZGUuc2Nyb2xsTGVmdCA9IHg7CgkJbm9kZS5zY3JvbGxUb3AgPSB5OwoJCXJldHVybiBfVXRpbHNfVHVwbGUwOwoJfSk7Cn0pOwoKCgovLyBFTEVNRU5UCgoKZnVuY3Rpb24gX0Jyb3dzZXJfZ2V0RWxlbWVudChpZCkKewoJcmV0dXJuIF9Ccm93c2VyX3dpdGhOb2RlKGlkLCBmdW5jdGlvbihub2RlKQoJewoJCXZhciByZWN0ID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCQl2YXIgeCA9IF9Ccm93c2VyX3dpbmRvdy5wYWdlWE9mZnNldDsKCQl2YXIgeSA9IF9Ccm93c2VyX3dpbmRvdy5wYWdlWU9mZnNldDsKCQlyZXR1cm4gewoJCQlzY2VuZTogX0Jyb3dzZXJfZ2V0U2NlbmUoKSwKCQkJdmlld3BvcnQ6IHsKCQkJCXg6IHgsCgkJCQl5OiB5LAoJCQkJd2lkdGg6IF9Ccm93c2VyX2RvYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsCgkJCQloZWlnaHQ6IF9Ccm93c2VyX2RvYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0CgkJCX0sCgkJCWVsZW1lbnQ6IHsKCQkJCXg6IHggKyByZWN0LmxlZnQsCgkJCQl5OiB5ICsgcmVjdC50b3AsCgkJCQl3aWR0aDogcmVjdC53aWR0aCwKCQkJCWhlaWdodDogcmVjdC5oZWlnaHQKCQkJfQoJCX07Cgl9KTsKfQoKCgovLyBMT0FEIGFuZCBSRUxPQUQKCgpmdW5jdGlvbiBfQnJvd3Nlcl9yZWxvYWQoc2tpcENhY2hlKQp7CglyZXR1cm4gQTIoJGVsbSRjb3JlJFRhc2skcGVyZm9ybSwgJGVsbSRjb3JlJEJhc2ljcyRuZXZlciwgX1NjaGVkdWxlcl9iaW5kaW5nKGZ1bmN0aW9uKGNhbGxiYWNrKQoJewoJCV9WaXJ0dWFsRG9tX2RvYy5sb2NhdGlvbi5yZWxvYWQoc2tpcENhY2hlKTsKCX0pKTsKfQoKZnVuY3Rpb24gX0Jyb3dzZXJfbG9hZCh1cmwpCnsKCXJldHVybiBBMigkZWxtJGNvcmUkVGFzayRwZXJmb3JtLCAkZWxtJGNvcmUkQmFzaWNzJG5ldmVyLCBfU2NoZWR1bGVyX2JpbmRpbmcoZnVuY3Rpb24oY2FsbGJhY2spCgl7CgkJdHJ5CgkJewoJCQlfQnJvd3Nlcl93aW5kb3cubG9jYXRpb24gPSB1cmw7CgkJfQoJCWNhdGNoKGVycikKCQl7CgkJCS8vIE9ubHkgRmlyZWZveCBjYW4gdGhyb3cgYSBOU19FUlJPUl9NQUxGT1JNRURfVVJJIGV4Y2VwdGlvbiBoZXJlLgoJCQkvLyBPdGhlciBicm93c2VycyByZWxvYWQgdGhlIHBhZ2UsIHNvIGxldCdzIGJlIGNvbnNpc3RlbnQgYWJvdXQgdGhhdC4KCQkJX1ZpcnR1YWxEb21fZG9jLmxvY2F0aW9uLnJlbG9hZChmYWxzZSk7CgkJfQoJfSkpOwp9CgoKCmZ1bmN0aW9uIF9UaW1lX25vdyhtaWxsaXNUb1Bvc2l4KQp7CglyZXR1cm4gX1NjaGVkdWxlcl9iaW5kaW5nKGZ1bmN0aW9uKGNhbGxiYWNrKQoJewoJCWNhbGxiYWNrKF9TY2hlZHVsZXJfc3VjY2VlZChtaWxsaXNUb1Bvc2l4KERhdGUubm93KCkpKSk7Cgl9KTsKfQoKdmFyIF9UaW1lX3NldEludGVydmFsID0gRjIoZnVuY3Rpb24oaW50ZXJ2YWwsIHRhc2spCnsKCXJldHVybiBfU2NoZWR1bGVyX2JpbmRpbmcoZnVuY3Rpb24oY2FsbGJhY2spCgl7CgkJdmFyIGlkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7IF9TY2hlZHVsZXJfcmF3U3Bhd24odGFzayk7IH0sIGludGVydmFsKTsKCQlyZXR1cm4gZnVuY3Rpb24oKSB7IGNsZWFySW50ZXJ2YWwoaWQpOyB9OwoJfSk7Cn0pOwoKZnVuY3Rpb24gX1RpbWVfaGVyZSgpCnsKCXJldHVybiBfU2NoZWR1bGVyX2JpbmRpbmcoZnVuY3Rpb24oY2FsbGJhY2spCgl7CgkJY2FsbGJhY2soX1NjaGVkdWxlcl9zdWNjZWVkKAoJCQlBMigkZWxtJHRpbWUkVGltZSRjdXN0b21ab25lLCAtKG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKSksIF9MaXN0X05pbCkKCQkpKTsKCX0pOwp9CgoKZnVuY3Rpb24gX1RpbWVfZ2V0Wm9uZU5hbWUoKQp7CglyZXR1cm4gX1NjaGVkdWxlcl9iaW5kaW5nKGZ1bmN0aW9uKGNhbGxiYWNrKQoJewoJCXRyeQoJCXsKCQkJdmFyIG5hbWUgPSAkZWxtJHRpbWUkVGltZSROYW1lKEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZSk7CgkJfQoJCWNhdGNoIChlKQoJCXsKCQkJdmFyIG5hbWUgPSAkZWxtJHRpbWUkVGltZSRPZmZzZXQobmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpKTsKCQl9CgkJY2FsbGJhY2soX1NjaGVkdWxlcl9zdWNjZWVkKG5hbWUpKTsKCX0pOwp9CgoKCnZhciBfQml0d2lzZV9hbmQgPSBGMihmdW5jdGlvbihhLCBiKQp7CglyZXR1cm4gYSAmIGI7Cn0pOwoKdmFyIF9CaXR3aXNlX29yID0gRjIoZnVuY3Rpb24oYSwgYikKewoJcmV0dXJuIGEgfCBiOwp9KTsKCnZhciBfQml0d2lzZV94b3IgPSBGMihmdW5jdGlvbihhLCBiKQp7CglyZXR1cm4gYSBeIGI7Cn0pOwoKZnVuY3Rpb24gX0JpdHdpc2VfY29tcGxlbWVudChhKQp7CglyZXR1cm4gfmE7Cn07Cgp2YXIgX0JpdHdpc2Vfc2hpZnRMZWZ0QnkgPSBGMihmdW5jdGlvbihvZmZzZXQsIGEpCnsKCXJldHVybiBhIDw8IG9mZnNldDsKfSk7Cgp2YXIgX0JpdHdpc2Vfc2hpZnRSaWdodEJ5ID0gRjIoZnVuY3Rpb24ob2Zmc2V0LCBhKQp7CglyZXR1cm4gYSA+PiBvZmZzZXQ7Cn0pOwoKdmFyIF9CaXR3aXNlX3NoaWZ0UmlnaHRaZkJ5ID0gRjIoZnVuY3Rpb24ob2Zmc2V0LCBhKQp7CglyZXR1cm4gYSA+Pj4gb2Zmc2V0Owp9KTsKCgovLyBCWVRFUwoKZnVuY3Rpb24gX0J5dGVzX3dpZHRoKGJ5dGVzKQp7CglyZXR1cm4gYnl0ZXMuYnl0ZUxlbmd0aDsKfQoKdmFyIF9CeXRlc19nZXRIb3N0RW5kaWFubmVzcyA9IEYyKGZ1bmN0aW9uKGxlLCBiZSkKewoJcmV0dXJuIF9TY2hlZHVsZXJfYmluZGluZyhmdW5jdGlvbihjYWxsYmFjaykKCXsKCQljYWxsYmFjayhfU2NoZWR1bGVyX3N1Y2NlZWQobmV3IFVpbnQ4QXJyYXkobmV3IFVpbnQzMkFycmF5KFsxXSkpWzBdID09PSAxID8gbGUgOiBiZSkpOwoJfSk7Cn0pOwoKCi8vIEVOQ09ERVJTCgpmdW5jdGlvbiBfQnl0ZXNfZW5jb2RlKGVuY29kZXIpCnsKCXZhciBtdXRhYmxlQnl0ZXMgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKCRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJGdldFdpZHRoKGVuY29kZXIpKSk7CgkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSR3cml0ZShlbmNvZGVyKShtdXRhYmxlQnl0ZXMpKDApOwoJcmV0dXJuIG11dGFibGVCeXRlczsKfQoKCi8vIFNJR05FRCBJTlRFR0VSUwoKdmFyIF9CeXRlc193cml0ZV9pOCAgPSBGMyhmdW5jdGlvbihtYiwgaSwgbikgeyBtYi5zZXRJbnQ4KGksIG4pOyByZXR1cm4gaSArIDE7IH0pOwp2YXIgX0J5dGVzX3dyaXRlX2kxNiA9IEY0KGZ1bmN0aW9uKG1iLCBpLCBuLCBpc0xFKSB7IG1iLnNldEludDE2KGksIG4sIGlzTEUpOyByZXR1cm4gaSArIDI7IH0pOwp2YXIgX0J5dGVzX3dyaXRlX2kzMiA9IEY0KGZ1bmN0aW9uKG1iLCBpLCBuLCBpc0xFKSB7IG1iLnNldEludDMyKGksIG4sIGlzTEUpOyByZXR1cm4gaSArIDQ7IH0pOwoKCi8vIFVOU0lHTkVEIElOVEVHRVJTCgp2YXIgX0J5dGVzX3dyaXRlX3U4ICA9IEYzKGZ1bmN0aW9uKG1iLCBpLCBuKSB7IG1iLnNldFVpbnQ4KGksIG4pOyByZXR1cm4gaSArIDEgO30pOwp2YXIgX0J5dGVzX3dyaXRlX3UxNiA9IEY0KGZ1bmN0aW9uKG1iLCBpLCBuLCBpc0xFKSB7IG1iLnNldFVpbnQxNihpLCBuLCBpc0xFKTsgcmV0dXJuIGkgKyAyOyB9KTsKdmFyIF9CeXRlc193cml0ZV91MzIgPSBGNChmdW5jdGlvbihtYiwgaSwgbiwgaXNMRSkgeyBtYi5zZXRVaW50MzIoaSwgbiwgaXNMRSk7IHJldHVybiBpICsgNDsgfSk7CgoKLy8gRkxPQVRTCgp2YXIgX0J5dGVzX3dyaXRlX2YzMiA9IEY0KGZ1bmN0aW9uKG1iLCBpLCBuLCBpc0xFKSB7IG1iLnNldEZsb2F0MzIoaSwgbiwgaXNMRSk7IHJldHVybiBpICsgNDsgfSk7CnZhciBfQnl0ZXNfd3JpdGVfZjY0ID0gRjQoZnVuY3Rpb24obWIsIGksIG4sIGlzTEUpIHsgbWIuc2V0RmxvYXQ2NChpLCBuLCBpc0xFKTsgcmV0dXJuIGkgKyA4OyB9KTsKCgovLyBCWVRFUwoKdmFyIF9CeXRlc193cml0ZV9ieXRlcyA9IEYzKGZ1bmN0aW9uKG1iLCBvZmZzZXQsIGJ5dGVzKQp7Cglmb3IgKHZhciBpID0gMCwgbGVuID0gYnl0ZXMuYnl0ZUxlbmd0aCwgbGltaXQgPSBsZW4gLSA0OyBpIDw9IGxpbWl0OyBpICs9IDQpCgl7CgkJbWIuc2V0VWludDMyKG9mZnNldCArIGksIGJ5dGVzLmdldFVpbnQzMihpKSk7Cgl9Cglmb3IgKDsgaSA8IGxlbjsgaSsrKQoJewoJCW1iLnNldFVpbnQ4KG9mZnNldCArIGksIGJ5dGVzLmdldFVpbnQ4KGkpKTsKCX0KCXJldHVybiBvZmZzZXQgKyBsZW47Cn0pOwoKCi8vIFNUUklOR1MKCmZ1bmN0aW9uIF9CeXRlc19nZXRTdHJpbmdXaWR0aChzdHJpbmcpCnsKCWZvciAodmFyIHdpZHRoID0gMCwgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspCgl7CgkJdmFyIGNvZGUgPSBzdHJpbmcuY2hhckNvZGVBdChpKTsKCQl3aWR0aCArPQoJCQkoY29kZSA8IDB4ODApID8gMSA6CgkJCShjb2RlIDwgMHg4MDApID8gMiA6CgkJCShjb2RlIDwgMHhEODAwIHx8IDB4REJGRiA8IGNvZGUpID8gMyA6IChpKyssIDQpOwoJfQoJcmV0dXJuIHdpZHRoOwp9Cgp2YXIgX0J5dGVzX3dyaXRlX3N0cmluZyA9IEYzKGZ1bmN0aW9uKG1iLCBvZmZzZXQsIHN0cmluZykKewoJZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspCgl7CgkJdmFyIGNvZGUgPSBzdHJpbmcuY2hhckNvZGVBdChpKTsKCQlvZmZzZXQgKz0KCQkJKGNvZGUgPCAweDgwKQoJCQkJPyAobWIuc2V0VWludDgob2Zmc2V0LCBjb2RlKQoJCQkJLCAxCgkJCQkpCgkJCQk6CgkJCShjb2RlIDwgMHg4MDApCgkJCQk/IChtYi5zZXRVaW50MTYob2Zmc2V0LCAweEMwODAgLyogMGIxMTAwMDAwMDEwMDAwMDAwICovCgkJCQkJfCAoY29kZSA+Pj4gNiAmIDB4MUYgLyogMGIwMDAxMTExMSAqLykgPDwgOAoJCQkJCXwgY29kZSAmIDB4M0YgLyogMGIwMDExMTExMSAqLykKCQkJCSwgMgoJCQkJKQoJCQkJOgoJCQkoY29kZSA8IDB4RDgwMCB8fCAweERCRkYgPCBjb2RlKQoJCQkJPyAobWIuc2V0VWludDE2KG9mZnNldCwgMHhFMDgwIC8qIDBiMTExMDAwMDAxMDAwMDAwMCAqLwoJCQkJCXwgKGNvZGUgPj4+IDEyICYgMHhGIC8qIDBiMDAwMDExMTEgKi8pIDw8IDgKCQkJCQl8IGNvZGUgPj4+IDYgJiAweDNGIC8qIDBiMDAxMTExMTEgKi8pCgkJCQksIG1iLnNldFVpbnQ4KG9mZnNldCArIDIsIDB4ODAgLyogMGIxMDAwMDAwMCAqLwoJCQkJCXwgY29kZSAmIDB4M0YgLyogMGIwMDExMTExMSAqLykKCQkJCSwgMwoJCQkJKQoJCQkJOgoJCQkoY29kZSA9IChjb2RlIC0gMHhEODAwKSAqIDB4NDAwICsgc3RyaW5nLmNoYXJDb2RlQXQoKytpKSAtIDB4REMwMCArIDB4MTAwMDAKCQkJLCBtYi5zZXRVaW50MzIob2Zmc2V0LCAweEYwODA4MDgwIC8qIDBiMTExMTAwMDAxMDAwMDAwMDEwMDAwMDAwMTAwMDAwMDAgKi8KCQkJCXwgKGNvZGUgPj4+IDE4ICYgMHg3IC8qIDBiMDAwMDAxMTEgKi8pIDw8IDI0CgkJCQl8IChjb2RlID4+PiAxMiAmIDB4M0YgLyogMGIwMDExMTExMSAqLykgPDwgMTYKCQkJCXwgKGNvZGUgPj4+IDYgJiAweDNGIC8qIDBiMDAxMTExMTEgKi8pIDw8IDgKCQkJCXwgY29kZSAmIDB4M0YgLyogMGIwMDExMTExMSAqLykKCQkJLCA0CgkJCSk7Cgl9CglyZXR1cm4gb2Zmc2V0Owp9KTsKCgovLyBERUNPREVSCgp2YXIgX0J5dGVzX2RlY29kZSA9IEYyKGZ1bmN0aW9uKGRlY29kZXIsIGJ5dGVzKQp7Cgl0cnkgewoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChBMihkZWNvZGVyLCBieXRlcywgMCkuYik7Cgl9IGNhdGNoKGUpIHsKCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7Cgl9Cn0pOwoKdmFyIF9CeXRlc19yZWFkX2k4ICA9IEYyKGZ1bmN0aW9uKCAgICAgIGJ5dGVzLCBvZmZzZXQpIHsgcmV0dXJuIF9VdGlsc19UdXBsZTIob2Zmc2V0ICsgMSwgYnl0ZXMuZ2V0SW50OChvZmZzZXQpKTsgfSk7CnZhciBfQnl0ZXNfcmVhZF9pMTYgPSBGMyhmdW5jdGlvbihpc0xFLCBieXRlcywgb2Zmc2V0KSB7IHJldHVybiBfVXRpbHNfVHVwbGUyKG9mZnNldCArIDIsIGJ5dGVzLmdldEludDE2KG9mZnNldCwgaXNMRSkpOyB9KTsKdmFyIF9CeXRlc19yZWFkX2kzMiA9IEYzKGZ1bmN0aW9uKGlzTEUsIGJ5dGVzLCBvZmZzZXQpIHsgcmV0dXJuIF9VdGlsc19UdXBsZTIob2Zmc2V0ICsgNCwgYnl0ZXMuZ2V0SW50MzIob2Zmc2V0LCBpc0xFKSk7IH0pOwp2YXIgX0J5dGVzX3JlYWRfdTggID0gRjIoZnVuY3Rpb24oICAgICAgYnl0ZXMsIG9mZnNldCkgeyByZXR1cm4gX1V0aWxzX1R1cGxlMihvZmZzZXQgKyAxLCBieXRlcy5nZXRVaW50OChvZmZzZXQpKTsgfSk7CnZhciBfQnl0ZXNfcmVhZF91MTYgPSBGMyhmdW5jdGlvbihpc0xFLCBieXRlcywgb2Zmc2V0KSB7IHJldHVybiBfVXRpbHNfVHVwbGUyKG9mZnNldCArIDIsIGJ5dGVzLmdldFVpbnQxNihvZmZzZXQsIGlzTEUpKTsgfSk7CnZhciBfQnl0ZXNfcmVhZF91MzIgPSBGMyhmdW5jdGlvbihpc0xFLCBieXRlcywgb2Zmc2V0KSB7IHJldHVybiBfVXRpbHNfVHVwbGUyKG9mZnNldCArIDQsIGJ5dGVzLmdldFVpbnQzMihvZmZzZXQsIGlzTEUpKTsgfSk7CnZhciBfQnl0ZXNfcmVhZF9mMzIgPSBGMyhmdW5jdGlvbihpc0xFLCBieXRlcywgb2Zmc2V0KSB7IHJldHVybiBfVXRpbHNfVHVwbGUyKG9mZnNldCArIDQsIGJ5dGVzLmdldEZsb2F0MzIob2Zmc2V0LCBpc0xFKSk7IH0pOwp2YXIgX0J5dGVzX3JlYWRfZjY0ID0gRjMoZnVuY3Rpb24oaXNMRSwgYnl0ZXMsIG9mZnNldCkgeyByZXR1cm4gX1V0aWxzX1R1cGxlMihvZmZzZXQgKyA4LCBieXRlcy5nZXRGbG9hdDY0KG9mZnNldCwgaXNMRSkpOyB9KTsKCnZhciBfQnl0ZXNfcmVhZF9ieXRlcyA9IEYzKGZ1bmN0aW9uKGxlbiwgYnl0ZXMsIG9mZnNldCkKewoJcmV0dXJuIF9VdGlsc19UdXBsZTIob2Zmc2V0ICsgbGVuLCBuZXcgRGF0YVZpZXcoYnl0ZXMuYnVmZmVyLCBieXRlcy5ieXRlT2Zmc2V0ICsgb2Zmc2V0LCBsZW4pKTsKfSk7Cgp2YXIgX0J5dGVzX3JlYWRfc3RyaW5nID0gRjMoZnVuY3Rpb24obGVuLCBieXRlcywgb2Zmc2V0KQp7Cgl2YXIgc3RyaW5nID0gJyc7Cgl2YXIgZW5kID0gb2Zmc2V0ICsgbGVuOwoJZm9yICg7IG9mZnNldCA8IGVuZDspCgl7CgkJdmFyIGJ5dGUgPSBieXRlcy5nZXRVaW50OChvZmZzZXQrKyk7CgkJc3RyaW5nICs9CgkJCShieXRlIDwgMTI4KQoJCQkJPyBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGUpCgkJCQk6CgkJCSgoYnl0ZSAmIDB4RTAgLyogMGIxMTEwMDAwMCAqLykgPT09IDB4QzAgLyogMGIxMTAwMDAwMCAqLykKCQkJCT8gU3RyaW5nLmZyb21DaGFyQ29kZSgoYnl0ZSAmIDB4MUYgLyogMGIwMDAxMTExMSAqLykgPDwgNiB8IGJ5dGVzLmdldFVpbnQ4KG9mZnNldCsrKSAmIDB4M0YgLyogMGIwMDExMTExMSAqLykKCQkJCToKCQkJKChieXRlICYgMHhGMCAvKiAwYjExMTEwMDAwICovKSA9PT0gMHhFMCAvKiAwYjExMTAwMDAwICovKQoJCQkJPyBTdHJpbmcuZnJvbUNoYXJDb2RlKAoJCQkJCShieXRlICYgMHhGIC8qIDBiMDAwMDExMTEgKi8pIDw8IDEyCgkJCQkJfCAoYnl0ZXMuZ2V0VWludDgob2Zmc2V0KyspICYgMHgzRiAvKiAwYjAwMTExMTExICovKSA8PCA2CgkJCQkJfCBieXRlcy5nZXRVaW50OChvZmZzZXQrKykgJiAweDNGIC8qIDBiMDAxMTExMTEgKi8KCQkJCSkKCQkJCToKCQkJCShieXRlID0KCQkJCQkoKGJ5dGUgJiAweDcgLyogMGIwMDAwMDExMSAqLykgPDwgMTgKCQkJCQkJfCAoYnl0ZXMuZ2V0VWludDgob2Zmc2V0KyspICYgMHgzRiAvKiAwYjAwMTExMTExICovKSA8PCAxMgoJCQkJCQl8IChieXRlcy5nZXRVaW50OChvZmZzZXQrKykgJiAweDNGIC8qIDBiMDAxMTExMTEgKi8pIDw8IDYKCQkJCQkJfCBieXRlcy5nZXRVaW50OChvZmZzZXQrKykgJiAweDNGIC8qIDBiMDAxMTExMTEgKi8KCQkJCQkpIC0gMHgxMDAwMAoJCQkJLCBTdHJpbmcuZnJvbUNoYXJDb2RlKE1hdGguZmxvb3IoYnl0ZSAvIDB4NDAwKSArIDB4RDgwMCwgYnl0ZSAlIDB4NDAwICsgMHhEQzAwKQoJCQkJKTsKCX0KCXJldHVybiBfVXRpbHNfVHVwbGUyKG9mZnNldCwgc3RyaW5nKTsKfSk7Cgp2YXIgX0J5dGVzX2RlY29kZUZhaWx1cmUgPSBGMihmdW5jdGlvbigpIHsgdGhyb3cgMDsgfSk7CgoKCi8vIERFQ09ERVIKCnZhciBfRmlsZV9kZWNvZGVyID0gX0pzb25fZGVjb2RlUHJpbShmdW5jdGlvbih2YWx1ZSkgewoJLy8gTk9URTogY2hlY2tzIGlmIGBGaWxlYCBleGlzdHMgaW4gY2FzZSB0aGlzIGlzIHJ1biBvbiBub2RlCglyZXR1cm4gKHR5cGVvZiBGaWxlICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSBpbnN0YW5jZW9mIEZpbGUpCgkJPyAkZWxtJGNvcmUkUmVzdWx0JE9rKHZhbHVlKQoJCTogX0pzb25fZXhwZWN0aW5nKCdhIEZJTEUnLCB2YWx1ZSk7Cn0pOwoKCi8vIE1FVEFEQVRBCgpmdW5jdGlvbiBfRmlsZV9uYW1lKGZpbGUpIHsgcmV0dXJuIGZpbGUubmFtZTsgfQpmdW5jdGlvbiBfRmlsZV9taW1lKGZpbGUpIHsgcmV0dXJuIGZpbGUudHlwZTsgfQpmdW5jdGlvbiBfRmlsZV9zaXplKGZpbGUpIHsgcmV0dXJuIGZpbGUuc2l6ZTsgfQoKZnVuY3Rpb24gX0ZpbGVfbGFzdE1vZGlmaWVkKGZpbGUpCnsKCXJldHVybiAkZWxtJHRpbWUkVGltZSRtaWxsaXNUb1Bvc2l4KGZpbGUubGFzdE1vZGlmaWVkKTsKfQoKCi8vIERPV05MT0FECgp2YXIgX0ZpbGVfZG93bmxvYWROb2RlOwoKZnVuY3Rpb24gX0ZpbGVfZ2V0RG93bmxvYWROb2RlKCkKewoJcmV0dXJuIF9GaWxlX2Rvd25sb2FkTm9kZSB8fCAoX0ZpbGVfZG93bmxvYWROb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTsKfQoKdmFyIF9GaWxlX2Rvd25sb2FkID0gRjMoZnVuY3Rpb24obmFtZSwgbWltZSwgY29udGVudCkKewoJcmV0dXJuIF9TY2hlZHVsZXJfYmluZGluZyhmdW5jdGlvbihjYWxsYmFjaykKCXsKCQl2YXIgYmxvYiA9IG5ldyBCbG9iKFtjb250ZW50XSwge3R5cGU6IG1pbWV9KTsKCgkJLy8gZm9yIElFMTArCgkJaWYgKG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKQoJCXsKCQkJbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IoYmxvYiwgbmFtZSk7CgkJCXJldHVybjsKCQl9CgoJCS8vIGZvciBIVE1MNQoJCXZhciBub2RlID0gX0ZpbGVfZ2V0RG93bmxvYWROb2RlKCk7CgkJdmFyIG9iamVjdFVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CgkJbm9kZS5ocmVmID0gb2JqZWN0VXJsOwoJCW5vZGUuZG93bmxvYWQgPSBuYW1lOwoJCV9GaWxlX2NsaWNrKG5vZGUpOwoJCVVSTC5yZXZva2VPYmplY3RVUkwob2JqZWN0VXJsKTsKCX0pOwp9KTsKCmZ1bmN0aW9uIF9GaWxlX2Rvd25sb2FkVXJsKGhyZWYpCnsKCXJldHVybiBfU2NoZWR1bGVyX2JpbmRpbmcoZnVuY3Rpb24oY2FsbGJhY2spCgl7CgkJdmFyIG5vZGUgPSBfRmlsZV9nZXREb3dubG9hZE5vZGUoKTsKCQlub2RlLmhyZWYgPSBocmVmOwoJCW5vZGUuZG93bmxvYWQgPSAnJzsKCQlub2RlLm9yaWdpbiA9PT0gbG9jYXRpb24ub3JpZ2luIHx8IChub2RlLnRhcmdldCA9ICdfYmxhbmsnKTsKCQlfRmlsZV9jbGljayhub2RlKTsKCX0pOwp9CgoKLy8gSUUgQ09NUEFUSUJJTElUWQoKZnVuY3Rpb24gX0ZpbGVfbWFrZUJ5dGVzU2FmZUZvckludGVybmV0RXhwbG9yZXIoYnl0ZXMpCnsKCS8vIG9ubHkgbmVlZGVkIGJ5IElFMTAgYW5kIElFMTEgdG8gZml4IGh0dHBzOi8vZ2l0aHViLmNvbS9lbG0vZmlsZS9pc3N1ZXMvMTAKCS8vIGFsbCBvdGhlciBicm93c2VycyBjYW4ganVzdCBydW4gYG5ldyBCbG9iKFtieXRlc10pYCBkaXJlY3RseSB3aXRoIG5vIHByb2JsZW0KCS8vCglyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYnl0ZXMuYnVmZmVyLCBieXRlcy5ieXRlT2Zmc2V0LCBieXRlcy5ieXRlTGVuZ3RoKTsKfQoKZnVuY3Rpb24gX0ZpbGVfY2xpY2sobm9kZSkKewoJLy8gb25seSBuZWVkZWQgYnkgSUUxMCBhbmQgSUUxMSB0byBmaXggaHR0cHM6Ly9naXRodWIuY29tL2VsbS9maWxlL2lzc3Vlcy8xMQoJLy8gYWxsIG90aGVyIGJyb3dzZXJzIGhhdmUgTW91c2VFdmVudCBhbmQgZG8gbm90IG5lZWQgdGhpcyBjb25kaXRpb25hbCBzdHVmZgoJLy8KCWlmICh0eXBlb2YgTW91c2VFdmVudCA9PT0gJ2Z1bmN0aW9uJykKCXsKCQlub2RlLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykpOwoJfQoJZWxzZQoJewoJCXZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpOwoJCWV2ZW50LmluaXRNb3VzZUV2ZW50KCdjbGljaycsIHRydWUsIHRydWUsIHdpbmRvdywgMCwgMCwgMCwgMCwgMCwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDAsIG51bGwpOwoJCWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm9kZSk7CgkJbm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKCQlkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG5vZGUpOwoJfQp9CgoKLy8gVVBMT0FECgp2YXIgX0ZpbGVfbm9kZTsKCmZ1bmN0aW9uIF9GaWxlX3VwbG9hZE9uZShtaW1lcykKewoJcmV0dXJuIF9TY2hlZHVsZXJfYmluZGluZyhmdW5jdGlvbihjYWxsYmFjaykKCXsKCQlfRmlsZV9ub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKCQlfRmlsZV9ub2RlLnR5cGUgPSAnZmlsZSc7CgkJX0ZpbGVfbm9kZS5hY2NlcHQgPSBBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcsJywgbWltZXMpOwoJCV9GaWxlX25vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXZlbnQpCgkJewoJCQljYWxsYmFjayhfU2NoZWR1bGVyX3N1Y2NlZWQoZXZlbnQudGFyZ2V0LmZpbGVzWzBdKSk7CgkJfSk7CgkJX0ZpbGVfY2xpY2soX0ZpbGVfbm9kZSk7Cgl9KTsKfQoKZnVuY3Rpb24gX0ZpbGVfdXBsb2FkT25lT3JNb3JlKG1pbWVzKQp7CglyZXR1cm4gX1NjaGVkdWxlcl9iaW5kaW5nKGZ1bmN0aW9uKGNhbGxiYWNrKQoJewoJCV9GaWxlX25vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwoJCV9GaWxlX25vZGUudHlwZSA9ICdmaWxlJzsKCQlfRmlsZV9ub2RlLm11bHRpcGxlID0gdHJ1ZTsKCQlfRmlsZV9ub2RlLmFjY2VwdCA9IEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJywnLCBtaW1lcyk7CgkJX0ZpbGVfbm9kZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldmVudCkKCQl7CgkJCXZhciBlbG1GaWxlcyA9IF9MaXN0X2Zyb21BcnJheShldmVudC50YXJnZXQuZmlsZXMpOwoJCQljYWxsYmFjayhfU2NoZWR1bGVyX3N1Y2NlZWQoX1V0aWxzX1R1cGxlMihlbG1GaWxlcy5hLCBlbG1GaWxlcy5iKSkpOwoJCX0pOwoJCV9GaWxlX2NsaWNrKF9GaWxlX25vZGUpOwoJfSk7Cn0KCgovLyBDT05URU5UCgpmdW5jdGlvbiBfRmlsZV90b1N0cmluZyhibG9iKQp7CglyZXR1cm4gX1NjaGVkdWxlcl9iaW5kaW5nKGZ1bmN0aW9uKGNhbGxiYWNrKQoJewoJCXZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoJCXJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkZW5kJywgZnVuY3Rpb24oKSB7CgkJCWNhbGxiYWNrKF9TY2hlZHVsZXJfc3VjY2VlZChyZWFkZXIucmVzdWx0KSk7CgkJfSk7CgkJcmVhZGVyLnJlYWRBc1RleHQoYmxvYik7CgkJcmV0dXJuIGZ1bmN0aW9uKCkgeyByZWFkZXIuYWJvcnQoKTsgfTsKCX0pOwp9CgpmdW5jdGlvbiBfRmlsZV90b0J5dGVzKGJsb2IpCnsKCXJldHVybiBfU2NoZWR1bGVyX2JpbmRpbmcoZnVuY3Rpb24oY2FsbGJhY2spCgl7CgkJdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CgkJcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlbmQnLCBmdW5jdGlvbigpIHsKCQkJY2FsbGJhY2soX1NjaGVkdWxlcl9zdWNjZWVkKG5ldyBEYXRhVmlldyhyZWFkZXIucmVzdWx0KSkpOwoJCX0pOwoJCXJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKTsKCQlyZXR1cm4gZnVuY3Rpb24oKSB7IHJlYWRlci5hYm9ydCgpOyB9OwoJfSk7Cn0KCmZ1bmN0aW9uIF9GaWxlX3RvVXJsKGJsb2IpCnsKCXJldHVybiBfU2NoZWR1bGVyX2JpbmRpbmcoZnVuY3Rpb24oY2FsbGJhY2spCgl7CgkJdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CgkJcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlbmQnLCBmdW5jdGlvbigpIHsKCQkJY2FsbGJhY2soX1NjaGVkdWxlcl9zdWNjZWVkKHJlYWRlci5yZXN1bHQpKTsKCQl9KTsKCQlyZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTsKCQlyZXR1cm4gZnVuY3Rpb24oKSB7IHJlYWRlci5hYm9ydCgpOyB9OwoJfSk7Cn0KCgoKZnVuY3Rpb24gX1VybF9wZXJjZW50RW5jb2RlKHN0cmluZykKewoJcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmcpOwp9CgpmdW5jdGlvbiBfVXJsX3BlcmNlbnREZWNvZGUoc3RyaW5nKQp7Cgl0cnkKCXsKCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoZGVjb2RlVVJJQ29tcG9uZW50KHN0cmluZykpOwoJfQoJY2F0Y2ggKGUpCgl7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfQp9CgoKLy8gU0VORCBSRVFVRVNUCgp2YXIgX0h0dHBfdG9UYXNrID0gRjMoZnVuY3Rpb24ocm91dGVyLCB0b1Rhc2ssIHJlcXVlc3QpCnsKCXJldHVybiBfU2NoZWR1bGVyX2JpbmRpbmcoZnVuY3Rpb24oY2FsbGJhY2spCgl7CgkJZnVuY3Rpb24gZG9uZShyZXNwb25zZSkgewoJCQljYWxsYmFjayh0b1Rhc2socmVxdWVzdC5leHBlY3QuYShyZXNwb25zZSkpKTsKCQl9CgoJCXZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCQl4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbigpIHsgZG9uZSgkZWxtJGh0dHAkSHR0cCROZXR3b3JrRXJyb3JfKTsgfSk7CgkJeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ3RpbWVvdXQnLCBmdW5jdGlvbigpIHsgZG9uZSgkZWxtJGh0dHAkSHR0cCRUaW1lb3V0Xyk7IH0pOwoJCXhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7IGRvbmUoX0h0dHBfdG9SZXNwb25zZShyZXF1ZXN0LmV4cGVjdC5iLCB4aHIpKTsgfSk7CgkJJGVsbSRjb3JlJE1heWJlJGlzSnVzdChyZXF1ZXN0LnRyYWNrZXIpICYmIF9IdHRwX3RyYWNrKHJvdXRlciwgeGhyLCByZXF1ZXN0LnRyYWNrZXIuYSk7CgoJCXRyeSB7CgkJCXhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSk7CgkJfSBjYXRjaCAoZSkgewoJCQlyZXR1cm4gZG9uZSgkZWxtJGh0dHAkSHR0cCRCYWRVcmxfKHJlcXVlc3QudXJsKSk7CgkJfQoKCQlfSHR0cF9jb25maWd1cmVSZXF1ZXN0KHhociwgcmVxdWVzdCk7CgoJCXJlcXVlc3QuYm9keS5hICYmIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCByZXF1ZXN0LmJvZHkuYSk7CgkJeGhyLnNlbmQocmVxdWVzdC5ib2R5LmIpOwoKCQlyZXR1cm4gZnVuY3Rpb24oKSB7IHhoci5jID0gdHJ1ZTsgeGhyLmFib3J0KCk7IH07Cgl9KTsKfSk7CgoKLy8gQ09ORklHVVJFCgpmdW5jdGlvbiBfSHR0cF9jb25maWd1cmVSZXF1ZXN0KHhociwgcmVxdWVzdCkKewoJZm9yICh2YXIgaGVhZGVycyA9IHJlcXVlc3QuaGVhZGVyczsgaGVhZGVycy5iOyBoZWFkZXJzID0gaGVhZGVycy5iKSAvLyBXSElMRV9DT05TCgl7CgkJeGhyLnNldFJlcXVlc3RIZWFkZXIoaGVhZGVycy5hLmEsIGhlYWRlcnMuYS5iKTsKCX0KCXhoci50aW1lb3V0ID0gcmVxdWVzdC50aW1lb3V0LmEgfHwgMDsKCXhoci5yZXNwb25zZVR5cGUgPSByZXF1ZXN0LmV4cGVjdC5kOwoJeGhyLndpdGhDcmVkZW50aWFscyA9IHJlcXVlc3QuYWxsb3dDb29raWVzRnJvbU90aGVyRG9tYWluczsKfQoKCi8vIFJFU1BPTlNFUwoKZnVuY3Rpb24gX0h0dHBfdG9SZXNwb25zZSh0b0JvZHksIHhocikKewoJcmV0dXJuIEEyKAoJCTIwMCA8PSB4aHIuc3RhdHVzICYmIHhoci5zdGF0dXMgPCAzMDAgPyAkZWxtJGh0dHAkSHR0cCRHb29kU3RhdHVzXyA6ICRlbG0kaHR0cCRIdHRwJEJhZFN0YXR1c18sCgkJX0h0dHBfdG9NZXRhZGF0YSh4aHIpLAoJCXRvQm9keSh4aHIucmVzcG9uc2UpCgkpOwp9CgoKLy8gTUVUQURBVEEKCmZ1bmN0aW9uIF9IdHRwX3RvTWV0YWRhdGEoeGhyKQp7CglyZXR1cm4gewoJCXVybDogeGhyLnJlc3BvbnNlVVJMLAoJCXN0YXR1c0NvZGU6IHhoci5zdGF0dXMsCgkJc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsCgkJaGVhZGVyczogX0h0dHBfcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkKCX07Cn0KCgovLyBIRUFERVJTCgpmdW5jdGlvbiBfSHR0cF9wYXJzZUhlYWRlcnMocmF3SGVhZGVycykKewoJaWYgKCFyYXdIZWFkZXJzKQoJewoJCXJldHVybiAkZWxtJGNvcmUkRGljdCRlbXB0eTsKCX0KCgl2YXIgaGVhZGVycyA9ICRlbG0kY29yZSREaWN0JGVtcHR5OwoJdmFyIGhlYWRlclBhaXJzID0gcmF3SGVhZGVycy5zcGxpdCgnXHJcbicpOwoJZm9yICh2YXIgaSA9IGhlYWRlclBhaXJzLmxlbmd0aDsgaS0tOyApCgl7CgkJdmFyIGhlYWRlclBhaXIgPSBoZWFkZXJQYWlyc1tpXTsKCQl2YXIgaW5kZXggPSBoZWFkZXJQYWlyLmluZGV4T2YoJzogJyk7CgkJaWYgKGluZGV4ID4gMCkKCQl7CgkJCXZhciBrZXkgPSBoZWFkZXJQYWlyLnN1YnN0cmluZygwLCBpbmRleCk7CgkJCXZhciB2YWx1ZSA9IGhlYWRlclBhaXIuc3Vic3RyaW5nKGluZGV4ICsgMik7CgoJCQloZWFkZXJzID0gQTMoJGVsbSRjb3JlJERpY3QkdXBkYXRlLCBrZXksIGZ1bmN0aW9uKG9sZFZhbHVlKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoJGVsbSRjb3JlJE1heWJlJGlzSnVzdChvbGRWYWx1ZSkKCQkJCQk/IHZhbHVlICsgJywgJyArIG9sZFZhbHVlLmEKCQkJCQk6IHZhbHVlCgkJCQkpOwoJCQl9LCBoZWFkZXJzKTsKCQl9Cgl9CglyZXR1cm4gaGVhZGVyczsKfQoKCi8vIEVYUEVDVAoKdmFyIF9IdHRwX2V4cGVjdCA9IEYzKGZ1bmN0aW9uKHR5cGUsIHRvQm9keSwgdG9WYWx1ZSkKewoJcmV0dXJuIHsKCQkkOiAwLAoJCWQ6IHR5cGUsCgkJYjogdG9Cb2R5LAoJCWE6IHRvVmFsdWUKCX07Cn0pOwoKdmFyIF9IdHRwX21hcEV4cGVjdCA9IEYyKGZ1bmN0aW9uKGZ1bmMsIGV4cGVjdCkKewoJcmV0dXJuIHsKCQkkOiAwLAoJCWQ6IGV4cGVjdC5kLAoJCWI6IGV4cGVjdC5iLAoJCWE6IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIGZ1bmMoZXhwZWN0LmEoeCkpOyB9Cgl9Owp9KTsKCmZ1bmN0aW9uIF9IdHRwX3RvRGF0YVZpZXcoYXJyYXlCdWZmZXIpCnsKCXJldHVybiBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIpOwp9CgoKLy8gQk9EWSBhbmQgUEFSVFMKCnZhciBfSHR0cF9lbXB0eUJvZHkgPSB7ICQ6IDAgfTsKdmFyIF9IdHRwX3BhaXIgPSBGMihmdW5jdGlvbihhLCBiKSB7IHJldHVybiB7ICQ6IDAsIGE6IGEsIGI6IGIgfTsgfSk7CgpmdW5jdGlvbiBfSHR0cF90b0Zvcm1EYXRhKHBhcnRzKQp7Cglmb3IgKHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOyBwYXJ0cy5iOyBwYXJ0cyA9IHBhcnRzLmIpIC8vIFdISUxFX0NPTlMKCXsKCQl2YXIgcGFydCA9IHBhcnRzLmE7CgkJZm9ybURhdGEuYXBwZW5kKHBhcnQuYSwgcGFydC5iKTsKCX0KCXJldHVybiBmb3JtRGF0YTsKfQoKdmFyIF9IdHRwX2J5dGVzVG9CbG9iID0gRjIoZnVuY3Rpb24obWltZSwgYnl0ZXMpCnsKCXJldHVybiBuZXcgQmxvYihbYnl0ZXNdLCB7IHR5cGU6IG1pbWUgfSk7Cn0pOwoKCi8vIFBST0dSRVNTCgpmdW5jdGlvbiBfSHR0cF90cmFjayhyb3V0ZXIsIHhociwgdHJhY2tlcikKewoJLy8gVE9ETyBjaGVjayBvdXQgbGVuZ3RoQ29tcHV0YWJsZSBvbiBsb2Fkc3RhcnQgZXZlbnQKCgl4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgZnVuY3Rpb24oZXZlbnQpIHsKCQlpZiAoeGhyLmMpIHsgcmV0dXJuOyB9CgkJX1NjaGVkdWxlcl9yYXdTcGF3bihBMigkZWxtJGNvcmUkUGxhdGZvcm0kc2VuZFRvU2VsZiwgcm91dGVyLCBfVXRpbHNfVHVwbGUyKHRyYWNrZXIsICRlbG0kaHR0cCRIdHRwJFNlbmRpbmcoewoJCQlzZW50OiBldmVudC5sb2FkZWQsCgkJCXNpemU6IGV2ZW50LnRvdGFsCgkJfSkpKSk7Cgl9KTsKCXhoci5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJaWYgKHhoci5jKSB7IHJldHVybjsgfQoJCV9TY2hlZHVsZXJfcmF3U3Bhd24oQTIoJGVsbSRjb3JlJFBsYXRmb3JtJHNlbmRUb1NlbGYsIHJvdXRlciwgX1V0aWxzX1R1cGxlMih0cmFja2VyLCAkZWxtJGh0dHAkSHR0cCRSZWNlaXZpbmcoewoJCQlyZWNlaXZlZDogZXZlbnQubG9hZGVkLAoJCQlzaXplOiBldmVudC5sZW5ndGhDb21wdXRhYmxlID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoZXZlbnQudG90YWwpIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcKCQl9KSkpKTsKCX0pOwp9CgovLyBDUkVBVEUKCnZhciBfUmVnZXhfbmV2ZXIgPSAvLl4vOwoKdmFyIF9SZWdleF9mcm9tU3RyaW5nV2l0aCA9IEYyKGZ1bmN0aW9uKG9wdGlvbnMsIHN0cmluZykKewoJdmFyIGZsYWdzID0gJ2cnOwoJaWYgKG9wdGlvbnMubXVsdGlsaW5lKSB7IGZsYWdzICs9ICdtJzsgfQoJaWYgKG9wdGlvbnMuY2FzZUluc2Vuc2l0aXZlKSB7IGZsYWdzICs9ICdpJzsgfQoKCXRyeQoJewoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChuZXcgUmVnRXhwKHN0cmluZywgZmxhZ3MpKTsKCX0KCWNhdGNoKGVycm9yKQoJewoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCX0KfSk7CgoKLy8gVVNFCgp2YXIgX1JlZ2V4X2NvbnRhaW5zID0gRjIoZnVuY3Rpb24ocmUsIHN0cmluZykKewoJcmV0dXJuIHN0cmluZy5tYXRjaChyZSkgIT09IG51bGw7Cn0pOwoKCnZhciBfUmVnZXhfZmluZEF0TW9zdCA9IEYzKGZ1bmN0aW9uKG4sIHJlLCBzdHIpCnsKCXZhciBvdXQgPSBbXTsKCXZhciBudW1iZXIgPSAwOwoJdmFyIHN0cmluZyA9IHN0cjsKCXZhciBsYXN0SW5kZXggPSByZS5sYXN0SW5kZXg7Cgl2YXIgcHJldkxhc3RJbmRleCA9IC0xOwoJdmFyIHJlc3VsdDsKCXdoaWxlIChudW1iZXIrKyA8IG4gJiYgKHJlc3VsdCA9IHJlLmV4ZWMoc3RyaW5nKSkpCgl7CgkJaWYgKHByZXZMYXN0SW5kZXggPT0gcmUubGFzdEluZGV4KSBicmVhazsKCQl2YXIgaSA9IHJlc3VsdC5sZW5ndGggLSAxOwoJCXZhciBzdWJzID0gbmV3IEFycmF5KGkpOwoJCXdoaWxlIChpID4gMCkKCQl7CgkJCXZhciBzdWJtYXRjaCA9IHJlc3VsdFtpXTsKCQkJc3Vic1stLWldID0gc3VibWF0Y2gKCQkJCT8gJGVsbSRjb3JlJE1heWJlJEp1c3Qoc3VibWF0Y2gpCgkJCQk6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCX0KCQlvdXQucHVzaChBNCgkZWxtJHJlZ2V4JFJlZ2V4JE1hdGNoLCByZXN1bHRbMF0sIHJlc3VsdC5pbmRleCwgbnVtYmVyLCBfTGlzdF9mcm9tQXJyYXkoc3VicykpKTsKCQlwcmV2TGFzdEluZGV4ID0gcmUubGFzdEluZGV4OwoJfQoJcmUubGFzdEluZGV4ID0gbGFzdEluZGV4OwoJcmV0dXJuIF9MaXN0X2Zyb21BcnJheShvdXQpOwp9KTsKCgp2YXIgX1JlZ2V4X3JlcGxhY2VBdE1vc3QgPSBGNChmdW5jdGlvbihuLCByZSwgcmVwbGFjZXIsIHN0cmluZykKewoJdmFyIGNvdW50ID0gMDsKCWZ1bmN0aW9uIGpzUmVwbGFjZXIobWF0Y2gpCgl7CgkJaWYgKGNvdW50KysgPj0gbikKCQl7CgkJCXJldHVybiBtYXRjaDsKCQl9CgkJdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoIC0gMzsKCQl2YXIgc3VibWF0Y2hlcyA9IG5ldyBBcnJheShpKTsKCQl3aGlsZSAoaSA+IDApCgkJewoJCQl2YXIgc3VibWF0Y2ggPSBhcmd1bWVudHNbaV07CgkJCXN1Ym1hdGNoZXNbLS1pXSA9IHN1Ym1hdGNoCgkJCQk/ICRlbG0kY29yZSRNYXliZSRKdXN0KHN1Ym1hdGNoKQoJCQkJOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQl9CgkJcmV0dXJuIHJlcGxhY2VyKEE0KCRlbG0kcmVnZXgkUmVnZXgkTWF0Y2gsIG1hdGNoLCBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDJdLCBjb3VudCwgX0xpc3RfZnJvbUFycmF5KHN1Ym1hdGNoZXMpKSk7Cgl9CglyZXR1cm4gc3RyaW5nLnJlcGxhY2UocmUsIGpzUmVwbGFjZXIpOwp9KTsKCnZhciBfUmVnZXhfc3BsaXRBdE1vc3QgPSBGMyhmdW5jdGlvbihuLCByZSwgc3RyKQp7Cgl2YXIgc3RyaW5nID0gc3RyOwoJdmFyIG91dCA9IFtdOwoJdmFyIHN0YXJ0ID0gcmUubGFzdEluZGV4OwoJdmFyIHJlc3RvcmVMYXN0SW5kZXggPSByZS5sYXN0SW5kZXg7Cgl3aGlsZSAobi0tKQoJewoJCXZhciByZXN1bHQgPSByZS5leGVjKHN0cmluZyk7CgkJaWYgKCFyZXN1bHQpIGJyZWFrOwoJCW91dC5wdXNoKHN0cmluZy5zbGljZShzdGFydCwgcmVzdWx0LmluZGV4KSk7CgkJc3RhcnQgPSByZS5sYXN0SW5kZXg7Cgl9CglvdXQucHVzaChzdHJpbmcuc2xpY2Uoc3RhcnQpKTsKCXJlLmxhc3RJbmRleCA9IHJlc3RvcmVMYXN0SW5kZXg7CglyZXR1cm4gX0xpc3RfZnJvbUFycmF5KG91dCk7Cn0pOwoKdmFyIF9SZWdleF9pbmZpbml0eSA9IEluZmluaXR5Owp2YXIgJGVsbSRjb3JlJExpc3QkY29ucyA9IF9MaXN0X2NvbnM7CnZhciAkZWxtJGNvcmUkRWxtJEpzQXJyYXkkZm9sZHIgPSBfSnNBcnJheV9mb2xkcjsKdmFyICRlbG0kY29yZSRBcnJheSRmb2xkciA9IEYzKAoJZnVuY3Rpb24gKGZ1bmMsIGJhc2VDYXNlLCBfdjApIHsKCQl2YXIgdHJlZSA9IF92MC5jOwoJCXZhciB0YWlsID0gX3YwLmQ7CgkJdmFyIGhlbHBlciA9IEYyKAoJCQlmdW5jdGlvbiAobm9kZSwgYWNjKSB7CgkJCQlpZiAobm9kZS4kID09PSAnU3ViVHJlZScpIHsKCQkJCQl2YXIgc3ViVHJlZSA9IG5vZGUuYTsKCQkJCQlyZXR1cm4gQTMoJGVsbSRjb3JlJEVsbSRKc0FycmF5JGZvbGRyLCBoZWxwZXIsIGFjYywgc3ViVHJlZSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciB2YWx1ZXMgPSBub2RlLmE7CgkJCQkJcmV0dXJuIEEzKCRlbG0kY29yZSRFbG0kSnNBcnJheSRmb2xkciwgZnVuYywgYWNjLCB2YWx1ZXMpOwoJCQkJfQoJCQl9KTsKCQlyZXR1cm4gQTMoCgkJCSRlbG0kY29yZSRFbG0kSnNBcnJheSRmb2xkciwKCQkJaGVscGVyLAoJCQlBMygkZWxtJGNvcmUkRWxtJEpzQXJyYXkkZm9sZHIsIGZ1bmMsIGJhc2VDYXNlLCB0YWlsKSwKCQkJdHJlZSk7Cgl9KTsKdmFyICRlbG0kY29yZSRBcnJheSR0b0xpc3QgPSBmdW5jdGlvbiAoYXJyYXkpIHsKCXJldHVybiBBMygkZWxtJGNvcmUkQXJyYXkkZm9sZHIsICRlbG0kY29yZSRMaXN0JGNvbnMsIF9MaXN0X05pbCwgYXJyYXkpOwp9Owp2YXIgJGVsbSRjb3JlJERpY3QkZm9sZHIgPSBGMygKCWZ1bmN0aW9uIChmdW5jLCBhY2MsIHQpIHsKCQlmb2xkcjoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAodC4kID09PSAnUkJFbXB0eV9lbG1fYnVpbHRpbicpIHsKCQkJCXJldHVybiBhY2M7CgkJCX0gZWxzZSB7CgkJCQl2YXIga2V5ID0gdC5iOwoJCQkJdmFyIHZhbHVlID0gdC5jOwoJCQkJdmFyIGxlZnQgPSB0LmQ7CgkJCQl2YXIgcmlnaHQgPSB0LmU7CgkJCQl2YXIgJHRlbXAkZnVuYyA9IGZ1bmMsCgkJCQkJJHRlbXAkYWNjID0gQTMoCgkJCQkJZnVuYywKCQkJCQlrZXksCgkJCQkJdmFsdWUsCgkJCQkJQTMoJGVsbSRjb3JlJERpY3QkZm9sZHIsIGZ1bmMsIGFjYywgcmlnaHQpKSwKCQkJCQkkdGVtcCR0ID0gbGVmdDsKCQkJCWZ1bmMgPSAkdGVtcCRmdW5jOwoJCQkJYWNjID0gJHRlbXAkYWNjOwoJCQkJdCA9ICR0ZW1wJHQ7CgkJCQljb250aW51ZSBmb2xkcjsKCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJERpY3QkdG9MaXN0ID0gZnVuY3Rpb24gKGRpY3QpIHsKCXJldHVybiBBMygKCQkkZWxtJGNvcmUkRGljdCRmb2xkciwKCQlGMygKCQkJZnVuY3Rpb24gKGtleSwgdmFsdWUsIGxpc3QpIHsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCV9VdGlsc19UdXBsZTIoa2V5LCB2YWx1ZSksCgkJCQkJbGlzdCk7CgkJCX0pLAoJCV9MaXN0X05pbCwKCQlkaWN0KTsKfTsKdmFyICRlbG0kY29yZSREaWN0JGtleXMgPSBmdW5jdGlvbiAoZGljdCkgewoJcmV0dXJuIEEzKAoJCSRlbG0kY29yZSREaWN0JGZvbGRyLAoJCUYzKAoJCQlmdW5jdGlvbiAoa2V5LCB2YWx1ZSwga2V5TGlzdCkgewoJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGtleSwga2V5TGlzdCk7CgkJCX0pLAoJCV9MaXN0X05pbCwKCQlkaWN0KTsKfTsKdmFyICRlbG0kY29yZSRTZXQkdG9MaXN0ID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIGRpY3QgPSBfdjAuYTsKCXJldHVybiAkZWxtJGNvcmUkRGljdCRrZXlzKGRpY3QpOwp9Owp2YXIgJGVsbSRjb3JlJEJhc2ljcyRFUSA9IHskOiAnRVEnfTsKdmFyICRlbG0kY29yZSRCYXNpY3MkR1QgPSB7JDogJ0dUJ307CnZhciAkZWxtJGNvcmUkQmFzaWNzJExUID0geyQ6ICdMVCd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXJsQ2hhbmdlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1VybENoYW5nZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXJsUmVxdWVzdCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdVcmxSZXF1ZXN0JywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkQnJvd3NlckFwcGxpY2F0aW9uSW5pdFdpdGhUaW1lJEluaXRpYWxpemVkRXZlbnQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnSW5pdGlhbGl6ZWRFdmVudCcsIGE6IGF9Owp9Owp2YXIgJGVsbSRjb3JlJFJlc3VsdCRFcnIgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRXJyJywgYTogYX07Cn07CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkRmFpbHVyZSA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdGYWlsdXJlJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRGaWVsZCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdGaWVsZCcsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkSW5kZXggPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnSW5kZXgnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGVsbSRjb3JlJFJlc3VsdCRPayA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdPaycsIGE6IGF9Owp9Owp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJE9uZU9mID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ09uZU9mJywgYTogYX07Cn07CnZhciAkZWxtJGNvcmUkQmFzaWNzJEZhbHNlID0geyQ6ICdGYWxzZSd9Owp2YXIgJGVsbSRjb3JlJEJhc2ljcyRhZGQgPSBfQmFzaWNzX2FkZDsKdmFyICRlbG0kY29yZSRNYXliZSRKdXN0ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0p1c3QnLCBhOiBhfTsKfTsKdmFyICRlbG0kY29yZSRNYXliZSROb3RoaW5nID0geyQ6ICdOb3RoaW5nJ307CnZhciAkZWxtJGNvcmUkU3RyaW5nJGFsbCA9IF9TdHJpbmdfYWxsOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRhbmQgPSBfQmFzaWNzX2FuZDsKdmFyICRlbG0kY29yZSRCYXNpY3MkYXBwZW5kID0gX1V0aWxzX2FwcGVuZDsKdmFyICRlbG0kanNvbiRKc29uJEVuY29kZSRlbmNvZGUgPSBfSnNvbl9lbmNvZGU7CnZhciAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQgPSBfU3RyaW5nX2Zyb21OdW1iZXI7CnZhciAkZWxtJGNvcmUkU3RyaW5nJGpvaW4gPSBGMigKCWZ1bmN0aW9uIChzZXAsIGNodW5rcykgewoJCXJldHVybiBBMigKCQkJX1N0cmluZ19qb2luLAoJCQlzZXAsCgkJCV9MaXN0X3RvQXJyYXkoY2h1bmtzKSk7Cgl9KTsKdmFyICRlbG0kY29yZSRTdHJpbmckc3BsaXQgPSBGMigKCWZ1bmN0aW9uIChzZXAsIHN0cmluZykgewoJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCUEyKF9TdHJpbmdfc3BsaXQsIHNlcCwgc3RyaW5nKSk7Cgl9KTsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRpbmRlbnQgPSBmdW5jdGlvbiAoc3RyKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCSdcbiAgICAnLAoJCUEyKCRlbG0kY29yZSRTdHJpbmckc3BsaXQsICdcbicsIHN0cikpOwp9Owp2YXIgJGVsbSRjb3JlJExpc3QkZm9sZGwgPSBGMygKCWZ1bmN0aW9uIChmdW5jLCBhY2MsIGxpc3QpIHsKCQlmb2xkbDoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIWxpc3QuYikgewoJCQkJcmV0dXJuIGFjYzsKCQkJfSBlbHNlIHsKCQkJCXZhciB4ID0gbGlzdC5hOwoJCQkJdmFyIHhzID0gbGlzdC5iOwoJCQkJdmFyICR0ZW1wJGZ1bmMgPSBmdW5jLAoJCQkJCSR0ZW1wJGFjYyA9IEEyKGZ1bmMsIHgsIGFjYyksCgkJCQkJJHRlbXAkbGlzdCA9IHhzOwoJCQkJZnVuYyA9ICR0ZW1wJGZ1bmM7CgkJCQlhY2MgPSAkdGVtcCRhY2M7CgkJCQlsaXN0ID0gJHRlbXAkbGlzdDsKCQkJCWNvbnRpbnVlIGZvbGRsOwoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCRsZW5ndGggPSBmdW5jdGlvbiAoeHMpIHsKCXJldHVybiBBMygKCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQlGMigKCQkJZnVuY3Rpb24gKF92MCwgaSkgewoJCQkJcmV0dXJuIGkgKyAxOwoJCQl9KSwKCQkwLAoJCXhzKTsKfTsKdmFyICRlbG0kY29yZSRMaXN0JG1hcDIgPSBfTGlzdF9tYXAyOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRsZSA9IF9VdGlsc19sZTsKdmFyICRlbG0kY29yZSRCYXNpY3Mkc3ViID0gX0Jhc2ljc19zdWI7CnZhciAkZWxtJGNvcmUkTGlzdCRyYW5nZUhlbHAgPSBGMygKCWZ1bmN0aW9uIChsbywgaGksIGxpc3QpIHsKCQlyYW5nZUhlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKF9VdGlsc19jbXAobG8sIGhpKSA8IDEpIHsKCQkJCXZhciAkdGVtcCRsbyA9IGxvLAoJCQkJCSR0ZW1wJGhpID0gaGkgLSAxLAoJCQkJCSR0ZW1wJGxpc3QgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBoaSwgbGlzdCk7CgkJCQlsbyA9ICR0ZW1wJGxvOwoJCQkJaGkgPSAkdGVtcCRoaTsKCQkJCWxpc3QgPSAkdGVtcCRsaXN0OwoJCQkJY29udGludWUgcmFuZ2VIZWxwOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIGxpc3Q7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JHJhbmdlID0gRjIoCglmdW5jdGlvbiAobG8sIGhpKSB7CgkJcmV0dXJuIEEzKCRlbG0kY29yZSRMaXN0JHJhbmdlSGVscCwgbG8sIGhpLCBfTGlzdF9OaWwpOwoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCRpbmRleGVkTWFwID0gRjIoCglmdW5jdGlvbiAoZiwgeHMpIHsKCQlyZXR1cm4gQTMoCgkJCSRlbG0kY29yZSRMaXN0JG1hcDIsCgkJCWYsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkcmFuZ2UsCgkJCQkwLAoJCQkJJGVsbSRjb3JlJExpc3QkbGVuZ3RoKHhzKSAtIDEpLAoJCQl4cyk7Cgl9KTsKdmFyICRlbG0kY29yZSRDaGFyJHRvQ29kZSA9IF9DaGFyX3RvQ29kZTsKdmFyICRlbG0kY29yZSRDaGFyJGlzTG93ZXIgPSBmdW5jdGlvbiAoX2NoYXIpIHsKCXZhciBjb2RlID0gJGVsbSRjb3JlJENoYXIkdG9Db2RlKF9jaGFyKTsKCXJldHVybiAoOTcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIyKTsKfTsKdmFyICRlbG0kY29yZSRDaGFyJGlzVXBwZXIgPSBmdW5jdGlvbiAoX2NoYXIpIHsKCXZhciBjb2RlID0gJGVsbSRjb3JlJENoYXIkdG9Db2RlKF9jaGFyKTsKCXJldHVybiAoY29kZSA8PSA5MCkgJiYgKDY1IDw9IGNvZGUpOwp9Owp2YXIgJGVsbSRjb3JlJEJhc2ljcyRvciA9IF9CYXNpY3Nfb3I7CnZhciAkZWxtJGNvcmUkQ2hhciRpc0FscGhhID0gZnVuY3Rpb24gKF9jaGFyKSB7CglyZXR1cm4gJGVsbSRjb3JlJENoYXIkaXNMb3dlcihfY2hhcikgfHwgJGVsbSRjb3JlJENoYXIkaXNVcHBlcihfY2hhcik7Cn07CnZhciAkZWxtJGNvcmUkQ2hhciRpc0RpZ2l0ID0gZnVuY3Rpb24gKF9jaGFyKSB7Cgl2YXIgY29kZSA9ICRlbG0kY29yZSRDaGFyJHRvQ29kZShfY2hhcik7CglyZXR1cm4gKGNvZGUgPD0gNTcpICYmICg0OCA8PSBjb2RlKTsKfTsKdmFyICRlbG0kY29yZSRDaGFyJGlzQWxwaGFOdW0gPSBmdW5jdGlvbiAoX2NoYXIpIHsKCXJldHVybiAkZWxtJGNvcmUkQ2hhciRpc0xvd2VyKF9jaGFyKSB8fCAoJGVsbSRjb3JlJENoYXIkaXNVcHBlcihfY2hhcikgfHwgJGVsbSRjb3JlJENoYXIkaXNEaWdpdChfY2hhcikpOwp9Owp2YXIgJGVsbSRjb3JlJExpc3QkcmV2ZXJzZSA9IGZ1bmN0aW9uIChsaXN0KSB7CglyZXR1cm4gQTMoJGVsbSRjb3JlJExpc3QkZm9sZGwsICRlbG0kY29yZSRMaXN0JGNvbnMsIF9MaXN0X05pbCwgbGlzdCk7Cn07CnZhciAkZWxtJGNvcmUkU3RyaW5nJHVuY29ucyA9IF9TdHJpbmdfdW5jb25zOwp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJGVycm9yT25lT2YgPSBGMigKCWZ1bmN0aW9uIChpLCBlcnJvcikgewoJCXJldHVybiAnXG5cbignICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChpICsgMSkgKyAoJykgJyArICRlbG0kanNvbiRKc29uJERlY29kZSRpbmRlbnQoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRlcnJvclRvU3RyaW5nKGVycm9yKSkpKTsKCX0pOwp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJGVycm9yVG9TdHJpbmcgPSBmdW5jdGlvbiAoZXJyb3IpIHsKCXJldHVybiBBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkZXJyb3JUb1N0cmluZ0hlbHAsIGVycm9yLCBfTGlzdF9OaWwpOwp9Owp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJGVycm9yVG9TdHJpbmdIZWxwID0gRjIoCglmdW5jdGlvbiAoZXJyb3IsIGNvbnRleHQpIHsKCQllcnJvclRvU3RyaW5nSGVscDoKCQl3aGlsZSAodHJ1ZSkgewoJCQlzd2l0Y2ggKGVycm9yLiQpIHsKCQkJCWNhc2UgJ0ZpZWxkJzoKCQkJCQl2YXIgZiA9IGVycm9yLmE7CgkJCQkJdmFyIGVyciA9IGVycm9yLmI7CgkJCQkJdmFyIGlzU2ltcGxlID0gZnVuY3Rpb24gKCkgewoJCQkJCQl2YXIgX3YxID0gJGVsbSRjb3JlJFN0cmluZyR1bmNvbnMoZik7CgkJCQkJCWlmIChfdjEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgX3YyID0gX3YxLmE7CgkJCQkJCQl2YXIgX2NoYXIgPSBfdjIuYTsKCQkJCQkJCXZhciByZXN0ID0gX3YyLmI7CgkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJENoYXIkaXNBbHBoYShfY2hhcikgJiYgQTIoJGVsbSRjb3JlJFN0cmluZyRhbGwsICRlbG0kY29yZSRDaGFyJGlzQWxwaGFOdW0sIHJlc3QpOwoJCQkJCQl9CgkJCQkJfSgpOwoJCQkJCXZhciBmaWVsZE5hbWUgPSBpc1NpbXBsZSA/ICgnLicgKyBmKSA6ICgnW1wnJyArIChmICsgJ1wnXScpKTsKCQkJCQl2YXIgJHRlbXAkZXJyb3IgPSBlcnIsCgkJCQkJCSR0ZW1wJGNvbnRleHQgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBmaWVsZE5hbWUsIGNvbnRleHQpOwoJCQkJCWVycm9yID0gJHRlbXAkZXJyb3I7CgkJCQkJY29udGV4dCA9ICR0ZW1wJGNvbnRleHQ7CgkJCQkJY29udGludWUgZXJyb3JUb1N0cmluZ0hlbHA7CgkJCQljYXNlICdJbmRleCc6CgkJCQkJdmFyIGkgPSBlcnJvci5hOwoJCQkJCXZhciBlcnIgPSBlcnJvci5iOwoJCQkJCXZhciBpbmRleE5hbWUgPSAnWycgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KGkpICsgJ10nKTsKCQkJCQl2YXIgJHRlbXAkZXJyb3IgPSBlcnIsCgkJCQkJCSR0ZW1wJGNvbnRleHQgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBpbmRleE5hbWUsIGNvbnRleHQpOwoJCQkJCWVycm9yID0gJHRlbXAkZXJyb3I7CgkJCQkJY29udGV4dCA9ICR0ZW1wJGNvbnRleHQ7CgkJCQkJY29udGludWUgZXJyb3JUb1N0cmluZ0hlbHA7CgkJCQljYXNlICdPbmVPZic6CgkJCQkJdmFyIGVycm9ycyA9IGVycm9yLmE7CgkJCQkJaWYgKCFlcnJvcnMuYikgewoJCQkJCQlyZXR1cm4gJ1JhbiBpbnRvIGEgSnNvbi5EZWNvZGUub25lT2Ygd2l0aCBubyBwb3NzaWJpbGl0aWVzJyArIGZ1bmN0aW9uICgpIHsKCQkJCQkJCWlmICghY29udGV4dC5iKSB7CgkJCQkJCQkJcmV0dXJuICchJzsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmV0dXJuICcgYXQganNvbicgKyBBMigKCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCQknJywKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShjb250ZXh0KSk7CgkJCQkJCQl9CgkJCQkJCX0oKTsKCQkJCQl9IGVsc2UgewoJCQkJCQlpZiAoIWVycm9ycy5iLmIpIHsKCQkJCQkJCXZhciBlcnIgPSBlcnJvcnMuYTsKCQkJCQkJCXZhciAkdGVtcCRlcnJvciA9IGVyciwKCQkJCQkJCQkkdGVtcCRjb250ZXh0ID0gY29udGV4dDsKCQkJCQkJCWVycm9yID0gJHRlbXAkZXJyb3I7CgkJCQkJCQljb250ZXh0ID0gJHRlbXAkY29udGV4dDsKCQkJCQkJCWNvbnRpbnVlIGVycm9yVG9TdHJpbmdIZWxwOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIHN0YXJ0ZXIgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJaWYgKCFjb250ZXh0LmIpIHsKCQkJCQkJCQkJcmV0dXJuICdKc29uLkRlY29kZS5vbmVPZic7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJcmV0dXJuICdUaGUgSnNvbi5EZWNvZGUub25lT2YgYXQganNvbicgKyBBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQkJCScnLAoJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShjb250ZXh0KSk7CgkJCQkJCQkJfQoJCQkJCQkJfSgpOwoJCQkJCQkJdmFyIGludHJvZHVjdGlvbiA9IHN0YXJ0ZXIgKyAoJyBmYWlsZWQgaW4gdGhlIGZvbGxvd2luZyAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludCgKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRsZW5ndGgoZXJyb3JzKSkgKyAnIHdheXM6JykpOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQknXG5cbicsCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCWludHJvZHVjdGlvbiwKCQkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkaW5kZXhlZE1hcCwgJGVsbSRqc29uJEpzb24kRGVjb2RlJGVycm9yT25lT2YsIGVycm9ycykpKTsKCQkJCQkJfQoJCQkJCX0KCQkJCWRlZmF1bHQ6CgkJCQkJdmFyIG1zZyA9IGVycm9yLmE7CgkJCQkJdmFyIGpzb24gPSBlcnJvci5iOwoJCQkJCXZhciBpbnRyb2R1Y3Rpb24gPSBmdW5jdGlvbiAoKSB7CgkJCQkJCWlmICghY29udGV4dC5iKSB7CgkJCQkJCQlyZXR1cm4gJ1Byb2JsZW0gd2l0aCB0aGUgZ2l2ZW4gdmFsdWU6XG5cbic7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlyZXR1cm4gJ1Byb2JsZW0gd2l0aCB0aGUgdmFsdWUgYXQganNvbicgKyAoQTIoCgkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCScnLAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoY29udGV4dCkpICsgJzpcblxuICAgICcpOwoJCQkJCQl9CgkJCQkJfSgpOwoJCQkJCXJldHVybiBpbnRyb2R1Y3Rpb24gKyAoJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGVudCgKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGVuY29kZSwgNCwganNvbikpICsgKCdcblxuJyArIG1zZykpOwoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkQXJyYXkkYnJhbmNoRmFjdG9yID0gMzI7CnZhciAkZWxtJGNvcmUkQXJyYXkkQXJyYXlfZWxtX2J1aWx0aW4gPSBGNCgKCWZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7CgkJcmV0dXJuIHskOiAnQXJyYXlfZWxtX2J1aWx0aW4nLCBhOiBhLCBiOiBiLCBjOiBjLCBkOiBkfTsKCX0pOwp2YXIgJGVsbSRjb3JlJEVsbSRKc0FycmF5JGVtcHR5ID0gX0pzQXJyYXlfZW1wdHk7CnZhciAkZWxtJGNvcmUkQmFzaWNzJGNlaWxpbmcgPSBfQmFzaWNzX2NlaWxpbmc7CnZhciAkZWxtJGNvcmUkQmFzaWNzJGZkaXYgPSBfQmFzaWNzX2ZkaXY7CnZhciAkZWxtJGNvcmUkQmFzaWNzJGxvZ0Jhc2UgPSBGMigKCWZ1bmN0aW9uIChiYXNlLCBudW1iZXIpIHsKCQlyZXR1cm4gX0Jhc2ljc19sb2cobnVtYmVyKSAvIF9CYXNpY3NfbG9nKGJhc2UpOwoJfSk7CnZhciAkZWxtJGNvcmUkQmFzaWNzJHRvRmxvYXQgPSBfQmFzaWNzX3RvRmxvYXQ7CnZhciAkZWxtJGNvcmUkQXJyYXkkc2hpZnRTdGVwID0gJGVsbSRjb3JlJEJhc2ljcyRjZWlsaW5nKAoJQTIoJGVsbSRjb3JlJEJhc2ljcyRsb2dCYXNlLCAyLCAkZWxtJGNvcmUkQXJyYXkkYnJhbmNoRmFjdG9yKSk7CnZhciAkZWxtJGNvcmUkQXJyYXkkZW1wdHkgPSBBNCgkZWxtJGNvcmUkQXJyYXkkQXJyYXlfZWxtX2J1aWx0aW4sIDAsICRlbG0kY29yZSRBcnJheSRzaGlmdFN0ZXAsICRlbG0kY29yZSRFbG0kSnNBcnJheSRlbXB0eSwgJGVsbSRjb3JlJEVsbSRKc0FycmF5JGVtcHR5KTsKdmFyICRlbG0kY29yZSRFbG0kSnNBcnJheSRpbml0aWFsaXplID0gX0pzQXJyYXlfaW5pdGlhbGl6ZTsKdmFyICRlbG0kY29yZSRBcnJheSRMZWFmID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xlYWYnLCBhOiBhfTsKfTsKdmFyICRlbG0kY29yZSRCYXNpY3MkYXBMID0gRjIoCglmdW5jdGlvbiAoZiwgeCkgewoJCXJldHVybiBmKHgpOwoJfSk7CnZhciAkZWxtJGNvcmUkQmFzaWNzJGFwUiA9IEYyKAoJZnVuY3Rpb24gKHgsIGYpIHsKCQlyZXR1cm4gZih4KTsKCX0pOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRlcSA9IF9VdGlsc19lcXVhbDsKdmFyICRlbG0kY29yZSRCYXNpY3MkZmxvb3IgPSBfQmFzaWNzX2Zsb29yOwp2YXIgJGVsbSRjb3JlJEVsbSRKc0FycmF5JGxlbmd0aCA9IF9Kc0FycmF5X2xlbmd0aDsKdmFyICRlbG0kY29yZSRCYXNpY3MkZ3QgPSBfVXRpbHNfZ3Q7CnZhciAkZWxtJGNvcmUkQmFzaWNzJG1heCA9IEYyKAoJZnVuY3Rpb24gKHgsIHkpIHsKCQlyZXR1cm4gKF9VdGlsc19jbXAoeCwgeSkgPiAwKSA/IHggOiB5OwoJfSk7CnZhciAkZWxtJGNvcmUkQmFzaWNzJG11bCA9IF9CYXNpY3NfbXVsOwp2YXIgJGVsbSRjb3JlJEFycmF5JFN1YlRyZWUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnU3ViVHJlZScsIGE6IGF9Owp9Owp2YXIgJGVsbSRjb3JlJEVsbSRKc0FycmF5JGluaXRpYWxpemVGcm9tTGlzdCA9IF9Kc0FycmF5X2luaXRpYWxpemVGcm9tTGlzdDsKdmFyICRlbG0kY29yZSRBcnJheSRjb21wcmVzc05vZGVzID0gRjIoCglmdW5jdGlvbiAobm9kZXMsIGFjYykgewoJCWNvbXByZXNzTm9kZXM6CgkJd2hpbGUgKHRydWUpIHsKCQkJdmFyIF92MCA9IEEyKCRlbG0kY29yZSRFbG0kSnNBcnJheSRpbml0aWFsaXplRnJvbUxpc3QsICRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3IsIG5vZGVzKTsKCQkJdmFyIG5vZGUgPSBfdjAuYTsKCQkJdmFyIHJlbWFpbmluZ05vZGVzID0gX3YwLmI7CgkJCXZhciBuZXdBY2MgPSBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkkZWxtJGNvcmUkQXJyYXkkU3ViVHJlZShub2RlKSwKCQkJCWFjYyk7CgkJCWlmICghcmVtYWluaW5nTm9kZXMuYikgewoJCQkJcmV0dXJuICRlbG0kY29yZSRMaXN0JHJldmVyc2UobmV3QWNjKTsKCQkJfSBlbHNlIHsKCQkJCXZhciAkdGVtcCRub2RlcyA9IHJlbWFpbmluZ05vZGVzLAoJCQkJCSR0ZW1wJGFjYyA9IG5ld0FjYzsKCQkJCW5vZGVzID0gJHRlbXAkbm9kZXM7CgkJCQlhY2MgPSAkdGVtcCRhY2M7CgkJCQljb250aW51ZSBjb21wcmVzc05vZGVzOwoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkVHVwbGUkZmlyc3QgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgeCA9IF92MC5hOwoJcmV0dXJuIHg7Cn07CnZhciAkZWxtJGNvcmUkQXJyYXkkdHJlZUZyb21CdWlsZGVyID0gRjIoCglmdW5jdGlvbiAobm9kZUxpc3QsIG5vZGVMaXN0U2l6ZSkgewoJCXRyZWVGcm9tQnVpbGRlcjoKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgbmV3Tm9kZVNpemUgPSAkZWxtJGNvcmUkQmFzaWNzJGNlaWxpbmcobm9kZUxpc3RTaXplIC8gJGVsbSRjb3JlJEFycmF5JGJyYW5jaEZhY3Rvcik7CgkJCWlmIChuZXdOb2RlU2l6ZSA9PT0gMSkgewoJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRFbG0kSnNBcnJheSRpbml0aWFsaXplRnJvbUxpc3QsICRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3IsIG5vZGVMaXN0KS5hOwoJCQl9IGVsc2UgewoJCQkJdmFyICR0ZW1wJG5vZGVMaXN0ID0gQTIoJGVsbSRjb3JlJEFycmF5JGNvbXByZXNzTm9kZXMsIG5vZGVMaXN0LCBfTGlzdF9OaWwpLAoJCQkJCSR0ZW1wJG5vZGVMaXN0U2l6ZSA9IG5ld05vZGVTaXplOwoJCQkJbm9kZUxpc3QgPSAkdGVtcCRub2RlTGlzdDsKCQkJCW5vZGVMaXN0U2l6ZSA9ICR0ZW1wJG5vZGVMaXN0U2l6ZTsKCQkJCWNvbnRpbnVlIHRyZWVGcm9tQnVpbGRlcjsKCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJEFycmF5JGJ1aWxkZXJUb0FycmF5ID0gRjIoCglmdW5jdGlvbiAocmV2ZXJzZU5vZGVMaXN0LCBidWlsZGVyKSB7CgkJaWYgKCFidWlsZGVyLm5vZGVMaXN0U2l6ZSkgewoJCQlyZXR1cm4gQTQoCgkJCQkkZWxtJGNvcmUkQXJyYXkkQXJyYXlfZWxtX2J1aWx0aW4sCgkJCQkkZWxtJGNvcmUkRWxtJEpzQXJyYXkkbGVuZ3RoKGJ1aWxkZXIudGFpbCksCgkJCQkkZWxtJGNvcmUkQXJyYXkkc2hpZnRTdGVwLAoJCQkJJGVsbSRjb3JlJEVsbSRKc0FycmF5JGVtcHR5LAoJCQkJYnVpbGRlci50YWlsKTsKCQl9IGVsc2UgewoJCQl2YXIgdHJlZUxlbiA9IGJ1aWxkZXIubm9kZUxpc3RTaXplICogJGVsbSRjb3JlJEFycmF5JGJyYW5jaEZhY3RvcjsKCQkJdmFyIGRlcHRoID0gJGVsbSRjb3JlJEJhc2ljcyRmbG9vcigKCQkJCUEyKCRlbG0kY29yZSRCYXNpY3MkbG9nQmFzZSwgJGVsbSRjb3JlJEFycmF5JGJyYW5jaEZhY3RvciwgdHJlZUxlbiAtIDEpKTsKCQkJdmFyIGNvcnJlY3ROb2RlTGlzdCA9IHJldmVyc2VOb2RlTGlzdCA/ICRlbG0kY29yZSRMaXN0JHJldmVyc2UoYnVpbGRlci5ub2RlTGlzdCkgOiBidWlsZGVyLm5vZGVMaXN0OwoJCQl2YXIgdHJlZSA9IEEyKCRlbG0kY29yZSRBcnJheSR0cmVlRnJvbUJ1aWxkZXIsIGNvcnJlY3ROb2RlTGlzdCwgYnVpbGRlci5ub2RlTGlzdFNpemUpOwoJCQlyZXR1cm4gQTQoCgkJCQkkZWxtJGNvcmUkQXJyYXkkQXJyYXlfZWxtX2J1aWx0aW4sCgkJCQkkZWxtJGNvcmUkRWxtJEpzQXJyYXkkbGVuZ3RoKGJ1aWxkZXIudGFpbCkgKyB0cmVlTGVuLAoJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRtYXgsIDUsIGRlcHRoICogJGVsbSRjb3JlJEFycmF5JHNoaWZ0U3RlcCksCgkJCQl0cmVlLAoJCQkJYnVpbGRlci50YWlsKTsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRCYXNpY3MkaWRpdiA9IF9CYXNpY3NfaWRpdjsKdmFyICRlbG0kY29yZSRCYXNpY3MkbHQgPSBfVXRpbHNfbHQ7CnZhciAkZWxtJGNvcmUkQXJyYXkkaW5pdGlhbGl6ZUhlbHAgPSBGNSgKCWZ1bmN0aW9uIChmbiwgZnJvbUluZGV4LCBsZW4sIG5vZGVMaXN0LCB0YWlsKSB7CgkJaW5pdGlhbGl6ZUhlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKGZyb21JbmRleCA8IDApIHsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkQXJyYXkkYnVpbGRlclRvQXJyYXksCgkJCQkJZmFsc2UsCgkJCQkJe25vZGVMaXN0OiBub2RlTGlzdCwgbm9kZUxpc3RTaXplOiAobGVuIC8gJGVsbSRjb3JlJEFycmF5JGJyYW5jaEZhY3RvcikgfCAwLCB0YWlsOiB0YWlsfSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgbGVhZiA9ICRlbG0kY29yZSRBcnJheSRMZWFmKAoJCQkJCUEzKCRlbG0kY29yZSRFbG0kSnNBcnJheSRpbml0aWFsaXplLCAkZWxtJGNvcmUkQXJyYXkkYnJhbmNoRmFjdG9yLCBmcm9tSW5kZXgsIGZuKSk7CgkJCQl2YXIgJHRlbXAkZm4gPSBmbiwKCQkJCQkkdGVtcCRmcm9tSW5kZXggPSBmcm9tSW5kZXggLSAkZWxtJGNvcmUkQXJyYXkkYnJhbmNoRmFjdG9yLAoJCQkJCSR0ZW1wJGxlbiA9IGxlbiwKCQkJCQkkdGVtcCRub2RlTGlzdCA9IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGxlYWYsIG5vZGVMaXN0KSwKCQkJCQkkdGVtcCR0YWlsID0gdGFpbDsKCQkJCWZuID0gJHRlbXAkZm47CgkJCQlmcm9tSW5kZXggPSAkdGVtcCRmcm9tSW5kZXg7CgkJCQlsZW4gPSAkdGVtcCRsZW47CgkJCQlub2RlTGlzdCA9ICR0ZW1wJG5vZGVMaXN0OwoJCQkJdGFpbCA9ICR0ZW1wJHRhaWw7CgkJCQljb250aW51ZSBpbml0aWFsaXplSGVscDsKCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRyZW1haW5kZXJCeSA9IF9CYXNpY3NfcmVtYWluZGVyQnk7CnZhciAkZWxtJGNvcmUkQXJyYXkkaW5pdGlhbGl6ZSA9IEYyKAoJZnVuY3Rpb24gKGxlbiwgZm4pIHsKCQlpZiAobGVuIDw9IDApIHsKCQkJcmV0dXJuICRlbG0kY29yZSRBcnJheSRlbXB0eTsKCQl9IGVsc2UgewoJCQl2YXIgdGFpbExlbiA9IGxlbiAlICRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3I7CgkJCXZhciB0YWlsID0gQTMoJGVsbSRjb3JlJEVsbSRKc0FycmF5JGluaXRpYWxpemUsIHRhaWxMZW4sIGxlbiAtIHRhaWxMZW4sIGZuKTsKCQkJdmFyIGluaXRpYWxGcm9tSW5kZXggPSAobGVuIC0gdGFpbExlbikgLSAkZWxtJGNvcmUkQXJyYXkkYnJhbmNoRmFjdG9yOwoJCQlyZXR1cm4gQTUoJGVsbSRjb3JlJEFycmF5JGluaXRpYWxpemVIZWxwLCBmbiwgaW5pdGlhbEZyb21JbmRleCwgbGVuLCBfTGlzdF9OaWwsIHRhaWwpOwoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRUcnVlID0geyQ6ICdUcnVlJ307CnZhciAkZWxtJGNvcmUkUmVzdWx0JGlzT2sgPSBmdW5jdGlvbiAocmVzdWx0KSB7CglpZiAocmVzdWx0LiQgPT09ICdPaycpIHsKCQlyZXR1cm4gdHJ1ZTsKCX0gZWxzZSB7CgkJcmV0dXJuIGZhbHNlOwoJfQp9Owp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCA9IF9Kc29uX21hcDE7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwMiA9IF9Kc29uX21hcDI7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCA9IF9Kc29uX3N1Y2NlZWQ7CnZhciAkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kdG9IYW5kbGVySW50ID0gZnVuY3Rpb24gKGhhbmRsZXIpIHsKCXN3aXRjaCAoaGFuZGxlci4kKSB7CgkJY2FzZSAnTm9ybWFsJzoKCQkJcmV0dXJuIDA7CgkJY2FzZSAnTWF5U3RvcFByb3BhZ2F0aW9uJzoKCQkJcmV0dXJuIDE7CgkJY2FzZSAnTWF5UHJldmVudERlZmF1bHQnOgoJCQlyZXR1cm4gMjsKCQlkZWZhdWx0OgoJCQlyZXR1cm4gMzsKCX0KfTsKdmFyICRlbG0kYnJvd3NlciRCcm93c2VyJEV4dGVybmFsID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0V4dGVybmFsJywgYTogYX07Cn07CnZhciAkZWxtJGJyb3dzZXIkQnJvd3NlciRJbnRlcm5hbCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdJbnRlcm5hbCcsIGE6IGF9Owp9Owp2YXIgJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSA9IGZ1bmN0aW9uICh4KSB7CglyZXR1cm4geDsKfTsKdmFyICRlbG0kYnJvd3NlciRCcm93c2VyJERvbSROb3RGb3VuZCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdOb3RGb3VuZCcsIGE6IGF9Owp9Owp2YXIgJGVsbSR1cmwkVXJsJEh0dHAgPSB7JDogJ0h0dHAnfTsKdmFyICRlbG0kdXJsJFVybCRIdHRwcyA9IHskOiAnSHR0cHMnfTsKdmFyICRlbG0kdXJsJFVybCRVcmwgPSBGNigKCWZ1bmN0aW9uIChwcm90b2NvbCwgaG9zdCwgcG9ydF8sIHBhdGgsIHF1ZXJ5LCBmcmFnbWVudCkgewoJCXJldHVybiB7ZnJhZ21lbnQ6IGZyYWdtZW50LCBob3N0OiBob3N0LCBwYXRoOiBwYXRoLCBwb3J0XzogcG9ydF8sIHByb3RvY29sOiBwcm90b2NvbCwgcXVlcnk6IHF1ZXJ5fTsKCX0pOwp2YXIgJGVsbSRjb3JlJFN0cmluZyRjb250YWlucyA9IF9TdHJpbmdfY29udGFpbnM7CnZhciAkZWxtJGNvcmUkU3RyaW5nJGxlbmd0aCA9IF9TdHJpbmdfbGVuZ3RoOwp2YXIgJGVsbSRjb3JlJFN0cmluZyRzbGljZSA9IF9TdHJpbmdfc2xpY2U7CnZhciAkZWxtJGNvcmUkU3RyaW5nJGRyb3BMZWZ0ID0gRjIoCglmdW5jdGlvbiAobiwgc3RyaW5nKSB7CgkJcmV0dXJuIChuIDwgMSkgPyBzdHJpbmcgOiBBMygKCQkJJGVsbSRjb3JlJFN0cmluZyRzbGljZSwKCQkJbiwKCQkJJGVsbSRjb3JlJFN0cmluZyRsZW5ndGgoc3RyaW5nKSwKCQkJc3RyaW5nKTsKCX0pOwp2YXIgJGVsbSRjb3JlJFN0cmluZyRpbmRleGVzID0gX1N0cmluZ19pbmRleGVzOwp2YXIgJGVsbSRjb3JlJFN0cmluZyRpc0VtcHR5ID0gZnVuY3Rpb24gKHN0cmluZykgewoJcmV0dXJuIHN0cmluZyA9PT0gJyc7Cn07CnZhciAkZWxtJGNvcmUkU3RyaW5nJGxlZnQgPSBGMigKCWZ1bmN0aW9uIChuLCBzdHJpbmcpIHsKCQlyZXR1cm4gKG4gPCAxKSA/ICcnIDogQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgMCwgbiwgc3RyaW5nKTsKCX0pOwp2YXIgJGVsbSRjb3JlJFN0cmluZyR0b0ludCA9IF9TdHJpbmdfdG9JbnQ7CnZhciAkZWxtJHVybCRVcmwkY2hvbXBCZWZvcmVQYXRoID0gRjUoCglmdW5jdGlvbiAocHJvdG9jb2wsIHBhdGgsIHBhcmFtcywgZnJhZywgc3RyKSB7CgkJaWYgKCRlbG0kY29yZSRTdHJpbmckaXNFbXB0eShzdHIpIHx8IEEyKCRlbG0kY29yZSRTdHJpbmckY29udGFpbnMsICdAJywgc3RyKSkgewoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJfSBlbHNlIHsKCQkJdmFyIF92MCA9IEEyKCRlbG0kY29yZSRTdHJpbmckaW5kZXhlcywgJzonLCBzdHIpOwoJCQlpZiAoIV92MC5iKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJQTYoJGVsbSR1cmwkVXJsJFVybCwgcHJvdG9jb2wsIHN0ciwgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsIHBhdGgsIHBhcmFtcywgZnJhZykpOwoJCQl9IGVsc2UgewoJCQkJaWYgKCFfdjAuYi5iKSB7CgkJCQkJdmFyIGkgPSBfdjAuYTsKCQkJCQl2YXIgX3YxID0gJGVsbSRjb3JlJFN0cmluZyR0b0ludCgKCQkJCQkJQTIoJGVsbSRjb3JlJFN0cmluZyRkcm9wTGVmdCwgaSArIDEsIHN0cikpOwoJCQkJCWlmIChfdjEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgcG9ydF8gPSBfdjE7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCUE2KAoJCQkJCQkJCSRlbG0kdXJsJFVybCRVcmwsCgkJCQkJCQkJcHJvdG9jb2wsCgkJCQkJCQkJQTIoJGVsbSRjb3JlJFN0cmluZyRsZWZ0LCBpLCBzdHIpLAoJCQkJCQkJCXBvcnRfLAoJCQkJCQkJCXBhdGgsCgkJCQkJCQkJcGFyYW1zLAoJCQkJCQkJCWZyYWcpKTsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSR1cmwkVXJsJGNob21wQmVmb3JlUXVlcnkgPSBGNCgKCWZ1bmN0aW9uIChwcm90b2NvbCwgcGFyYW1zLCBmcmFnLCBzdHIpIHsKCQlpZiAoJGVsbSRjb3JlJFN0cmluZyRpc0VtcHR5KHN0cikpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCX0gZWxzZSB7CgkJCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkU3RyaW5nJGluZGV4ZXMsICcvJywgc3RyKTsKCQkJaWYgKCFfdjAuYikgewoJCQkJcmV0dXJuIEE1KCRlbG0kdXJsJFVybCRjaG9tcEJlZm9yZVBhdGgsIHByb3RvY29sLCAnLycsIHBhcmFtcywgZnJhZywgc3RyKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBpID0gX3YwLmE7CgkJCQlyZXR1cm4gQTUoCgkJCQkJJGVsbSR1cmwkVXJsJGNob21wQmVmb3JlUGF0aCwKCQkJCQlwcm90b2NvbCwKCQkJCQlBMigkZWxtJGNvcmUkU3RyaW5nJGRyb3BMZWZ0LCBpLCBzdHIpLAoJCQkJCXBhcmFtcywKCQkJCQlmcmFnLAoJCQkJCUEyKCRlbG0kY29yZSRTdHJpbmckbGVmdCwgaSwgc3RyKSk7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kdXJsJFVybCRjaG9tcEJlZm9yZUZyYWdtZW50ID0gRjMoCglmdW5jdGlvbiAocHJvdG9jb2wsIGZyYWcsIHN0cikgewoJCWlmICgkZWxtJGNvcmUkU3RyaW5nJGlzRW1wdHkoc3RyKSkgewoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJfSBlbHNlIHsKCQkJdmFyIF92MCA9IEEyKCRlbG0kY29yZSRTdHJpbmckaW5kZXhlcywgJz8nLCBzdHIpOwoJCQlpZiAoIV92MC5iKSB7CgkJCQlyZXR1cm4gQTQoJGVsbSR1cmwkVXJsJGNob21wQmVmb3JlUXVlcnksIHByb3RvY29sLCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywgZnJhZywgc3RyKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBpID0gX3YwLmE7CgkJCQlyZXR1cm4gQTQoCgkJCQkJJGVsbSR1cmwkVXJsJGNob21wQmVmb3JlUXVlcnksCgkJCQkJcHJvdG9jb2wsCgkJCQkJJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCUEyKCRlbG0kY29yZSRTdHJpbmckZHJvcExlZnQsIGkgKyAxLCBzdHIpKSwKCQkJCQlmcmFnLAoJCQkJCUEyKCRlbG0kY29yZSRTdHJpbmckbGVmdCwgaSwgc3RyKSk7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kdXJsJFVybCRjaG9tcEFmdGVyUHJvdG9jb2wgPSBGMigKCWZ1bmN0aW9uIChwcm90b2NvbCwgc3RyKSB7CgkJaWYgKCRlbG0kY29yZSRTdHJpbmckaXNFbXB0eShzdHIpKSB7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQl9IGVsc2UgewoJCQl2YXIgX3YwID0gQTIoJGVsbSRjb3JlJFN0cmluZyRpbmRleGVzLCAnIycsIHN0cik7CgkJCWlmICghX3YwLmIpIHsKCQkJCXJldHVybiBBMygkZWxtJHVybCRVcmwkY2hvbXBCZWZvcmVGcmFnbWVudCwgcHJvdG9jb2wsICRlbG0kY29yZSRNYXliZSROb3RoaW5nLCBzdHIpOwoJCQl9IGVsc2UgewoJCQkJdmFyIGkgPSBfdjAuYTsKCQkJCXJldHVybiBBMygKCQkJCQkkZWxtJHVybCRVcmwkY2hvbXBCZWZvcmVGcmFnbWVudCwKCQkJCQlwcm90b2NvbCwKCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJQTIoJGVsbSRjb3JlJFN0cmluZyRkcm9wTGVmdCwgaSArIDEsIHN0cikpLAoJCQkJCUEyKCRlbG0kY29yZSRTdHJpbmckbGVmdCwgaSwgc3RyKSk7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRTdHJpbmckc3RhcnRzV2l0aCA9IF9TdHJpbmdfc3RhcnRzV2l0aDsKdmFyICRlbG0kdXJsJFVybCRmcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cikgewoJcmV0dXJuIEEyKCRlbG0kY29yZSRTdHJpbmckc3RhcnRzV2l0aCwgJ2h0dHA6Ly8nLCBzdHIpID8gQTIoCgkJJGVsbSR1cmwkVXJsJGNob21wQWZ0ZXJQcm90b2NvbCwKCQkkZWxtJHVybCRVcmwkSHR0cCwKCQlBMigkZWxtJGNvcmUkU3RyaW5nJGRyb3BMZWZ0LCA3LCBzdHIpKSA6IChBMigkZWxtJGNvcmUkU3RyaW5nJHN0YXJ0c1dpdGgsICdodHRwczovLycsIHN0cikgPyBBMigKCQkkZWxtJHVybCRVcmwkY2hvbXBBZnRlclByb3RvY29sLAoJCSRlbG0kdXJsJFVybCRIdHRwcywKCQlBMigkZWxtJGNvcmUkU3RyaW5nJGRyb3BMZWZ0LCA4LCBzdHIpKSA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nKTsKfTsKdmFyICRlbG0kY29yZSRCYXNpY3MkbmV2ZXIgPSBmdW5jdGlvbiAoX3YwKSB7CgluZXZlcjoKCXdoaWxlICh0cnVlKSB7CgkJdmFyIG52ciA9IF92MC5hOwoJCXZhciAkdGVtcCRfdjAgPSBudnI7CgkJX3YwID0gJHRlbXAkX3YwOwoJCWNvbnRpbnVlIG5ldmVyOwoJfQp9Owp2YXIgJGVsbSRjb3JlJFRhc2skUGVyZm9ybSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQZXJmb3JtJywgYTogYX07Cn07CnZhciAkZWxtJGNvcmUkVGFzayRzdWNjZWVkID0gX1NjaGVkdWxlcl9zdWNjZWVkOwp2YXIgJGVsbSRjb3JlJFRhc2skaW5pdCA9ICRlbG0kY29yZSRUYXNrJHN1Y2NlZWQoX1V0aWxzX1R1cGxlMCk7CnZhciAkZWxtJGNvcmUkTGlzdCRmb2xkckhlbHBlciA9IEY0KAoJZnVuY3Rpb24gKGZuLCBhY2MsIGN0ciwgbHMpIHsKCQlpZiAoIWxzLmIpIHsKCQkJcmV0dXJuIGFjYzsKCQl9IGVsc2UgewoJCQl2YXIgYSA9IGxzLmE7CgkJCXZhciByMSA9IGxzLmI7CgkJCWlmICghcjEuYikgewoJCQkJcmV0dXJuIEEyKGZuLCBhLCBhY2MpOwoJCQl9IGVsc2UgewoJCQkJdmFyIGIgPSByMS5hOwoJCQkJdmFyIHIyID0gcjEuYjsKCQkJCWlmICghcjIuYikgewoJCQkJCXJldHVybiBBMigKCQkJCQkJZm4sCgkJCQkJCWEsCgkJCQkJCUEyKGZuLCBiLCBhY2MpKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGMgPSByMi5hOwoJCQkJCXZhciByMyA9IHIyLmI7CgkJCQkJaWYgKCFyMy5iKSB7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCWZuLAoJCQkJCQkJYSwKCQkJCQkJCUEyKAoJCQkJCQkJCWZuLAoJCQkJCQkJCWIsCgkJCQkJCQkJQTIoZm4sIGMsIGFjYykpKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgZCA9IHIzLmE7CgkJCQkJCXZhciByNCA9IHIzLmI7CgkJCQkJCXZhciByZXMgPSAoY3RyID4gNTAwKSA/IEEzKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCQkJCQlmbiwKCQkJCQkJCWFjYywKCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UocjQpKSA6IEE0KCRlbG0kY29yZSRMaXN0JGZvbGRySGVscGVyLCBmbiwgYWNjLCBjdHIgKyAxLCByNCk7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCWZuLAoJCQkJCQkJYSwKCQkJCQkJCUEyKAoJCQkJCQkJCWZuLAoJCQkJCQkJCWIsCgkJCQkJCQkJQTIoCgkJCQkJCQkJCWZuLAoJCQkJCQkJCQljLAoJCQkJCQkJCQlBMihmbiwgZCwgcmVzKSkpKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JGZvbGRyID0gRjMoCglmdW5jdGlvbiAoZm4sIGFjYywgbHMpIHsKCQlyZXR1cm4gQTQoJGVsbSRjb3JlJExpc3QkZm9sZHJIZWxwZXIsIGZuLCBhY2MsIDAsIGxzKTsKCX0pOwp2YXIgJGVsbSRjb3JlJExpc3QkbWFwID0gRjIoCglmdW5jdGlvbiAoZiwgeHMpIHsKCQlyZXR1cm4gQTMoCgkJCSRlbG0kY29yZSRMaXN0JGZvbGRyLAoJCQlGMigKCQkJCWZ1bmN0aW9uICh4LCBhY2MpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCWYoeCksCgkJCQkJCWFjYyk7CgkJCQl9KSwKCQkJX0xpc3RfTmlsLAoJCQl4cyk7Cgl9KTsKdmFyICRlbG0kY29yZSRUYXNrJGFuZFRoZW4gPSBfU2NoZWR1bGVyX2FuZFRoZW47CnZhciAkZWxtJGNvcmUkVGFzayRtYXAgPSBGMigKCWZ1bmN0aW9uIChmdW5jLCB0YXNrQSkgewoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJFRhc2skYW5kVGhlbiwKCQkJZnVuY3Rpb24gKGEpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkVGFzayRzdWNjZWVkKAoJCQkJCWZ1bmMoYSkpOwoJCQl9LAoJCQl0YXNrQSk7Cgl9KTsKdmFyICRlbG0kY29yZSRUYXNrJG1hcDIgPSBGMygKCWZ1bmN0aW9uIChmdW5jLCB0YXNrQSwgdGFza0IpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRUYXNrJGFuZFRoZW4sCgkJCWZ1bmN0aW9uIChhKSB7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJFRhc2skYW5kVGhlbiwKCQkJCQlmdW5jdGlvbiAoYikgewoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFRhc2skc3VjY2VlZCgKCQkJCQkJCUEyKGZ1bmMsIGEsIGIpKTsKCQkJCQl9LAoJCQkJCXRhc2tCKTsKCQkJfSwKCQkJdGFza0EpOwoJfSk7CnZhciAkZWxtJGNvcmUkVGFzayRzZXF1ZW5jZSA9IGZ1bmN0aW9uICh0YXNrcykgewoJcmV0dXJuIEEzKAoJCSRlbG0kY29yZSRMaXN0JGZvbGRyLAoJCSRlbG0kY29yZSRUYXNrJG1hcDIoJGVsbSRjb3JlJExpc3QkY29ucyksCgkJJGVsbSRjb3JlJFRhc2skc3VjY2VlZChfTGlzdF9OaWwpLAoJCXRhc2tzKTsKfTsKdmFyICRlbG0kY29yZSRQbGF0Zm9ybSRzZW5kVG9BcHAgPSBfUGxhdGZvcm1fc2VuZFRvQXBwOwp2YXIgJGVsbSRjb3JlJFRhc2skc3Bhd25DbWQgPSBGMigKCWZ1bmN0aW9uIChyb3V0ZXIsIF92MCkgewoJCXZhciB0YXNrID0gX3YwLmE7CgkJcmV0dXJuIF9TY2hlZHVsZXJfc3Bhd24oCgkJCUEyKAoJCQkJJGVsbSRjb3JlJFRhc2skYW5kVGhlbiwKCQkJCSRlbG0kY29yZSRQbGF0Zm9ybSRzZW5kVG9BcHAocm91dGVyKSwKCQkJCXRhc2spKTsKCX0pOwp2YXIgJGVsbSRjb3JlJFRhc2skb25FZmZlY3RzID0gRjMoCglmdW5jdGlvbiAocm91dGVyLCBjb21tYW5kcywgc3RhdGUpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRUYXNrJG1hcCwKCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTA7CgkJCX0sCgkJCSRlbG0kY29yZSRUYXNrJHNlcXVlbmNlKAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCSRlbG0kY29yZSRUYXNrJHNwYXduQ21kKHJvdXRlciksCgkJCQkJY29tbWFuZHMpKSk7Cgl9KTsKdmFyICRlbG0kY29yZSRUYXNrJG9uU2VsZk1zZyA9IEYzKAoJZnVuY3Rpb24gKF92MCwgX3YxLCBfdjIpIHsKCQlyZXR1cm4gJGVsbSRjb3JlJFRhc2skc3VjY2VlZChfVXRpbHNfVHVwbGUwKTsKCX0pOwp2YXIgJGVsbSRjb3JlJFRhc2skY21kTWFwID0gRjIoCglmdW5jdGlvbiAodGFnZ2VyLCBfdjApIHsKCQl2YXIgdGFzayA9IF92MC5hOwoJCXJldHVybiAkZWxtJGNvcmUkVGFzayRQZXJmb3JtKAoJCQlBMigkZWxtJGNvcmUkVGFzayRtYXAsIHRhZ2dlciwgdGFzaykpOwoJfSk7Cl9QbGF0Zm9ybV9lZmZlY3RNYW5hZ2Vyc1snVGFzayddID0gX1BsYXRmb3JtX2NyZWF0ZU1hbmFnZXIoJGVsbSRjb3JlJFRhc2skaW5pdCwgJGVsbSRjb3JlJFRhc2skb25FZmZlY3RzLCAkZWxtJGNvcmUkVGFzayRvblNlbGZNc2csICRlbG0kY29yZSRUYXNrJGNtZE1hcCk7CnZhciAkZWxtJGNvcmUkVGFzayRjb21tYW5kID0gX1BsYXRmb3JtX2xlYWYoJ1Rhc2snKTsKdmFyICRlbG0kY29yZSRUYXNrJHBlcmZvcm0gPSBGMigKCWZ1bmN0aW9uICh0b01lc3NhZ2UsIHRhc2spIHsKCQlyZXR1cm4gJGVsbSRjb3JlJFRhc2skY29tbWFuZCgKCQkJJGVsbSRjb3JlJFRhc2skUGVyZm9ybSgKCQkJCUEyKCRlbG0kY29yZSRUYXNrJG1hcCwgdG9NZXNzYWdlLCB0YXNrKSkpOwoJfSk7CnZhciAkZWxtJGJyb3dzZXIkQnJvd3NlciRhcHBsaWNhdGlvbiA9IF9Ccm93c2VyX2FwcGxpY2F0aW9uOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiA9IEYzKAoJZnVuY3Rpb24gKGYsIGcsIHgpIHsKCQlyZXR1cm4gZygKCQkJZih4KSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRCcm93c2VyQXBwbGljYXRpb25Jbml0V2l0aFRpbWUkVGltZUhhc0Fycml2ZWRFdmVudCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUaW1lSGFzQXJyaXZlZEV2ZW50JywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkQnJvd3NlckFwcGxpY2F0aW9uSW5pdFdpdGhUaW1lJFdhaXRpbmdGb3JUaW1lU3RhdGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnV2FpdGluZ0ZvclRpbWVTdGF0ZScsIGE6IGF9Owp9Owp2YXIgJGVsbSR0aW1lJFRpbWUkTmFtZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdOYW1lJywgYTogYX07Cn07CnZhciAkZWxtJHRpbWUkVGltZSRPZmZzZXQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnT2Zmc2V0JywgYTogYX07Cn07CnZhciAkZWxtJHRpbWUkVGltZSRab25lID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ1pvbmUnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGVsbSR0aW1lJFRpbWUkY3VzdG9tWm9uZSA9ICRlbG0kdGltZSRUaW1lJFpvbmU7CnZhciAkZWxtJHRpbWUkVGltZSRQb3NpeCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQb3NpeCcsIGE6IGF9Owp9Owp2YXIgJGVsbSR0aW1lJFRpbWUkbWlsbGlzVG9Qb3NpeCA9ICRlbG0kdGltZSRUaW1lJFBvc2l4Owp2YXIgJGVsbSR0aW1lJFRpbWUkbm93ID0gX1RpbWVfbm93KCRlbG0kdGltZSRUaW1lJG1pbGxpc1RvUG9zaXgpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEJyb3dzZXJBcHBsaWNhdGlvbkluaXRXaXRoVGltZSRpbml0ID0gRjMoCglmdW5jdGlvbiAoZmxhZ3MsIHVybCwgbmF2aWdhdGlvbktleSkgewoJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkQnJvd3NlckFwcGxpY2F0aW9uSW5pdFdpdGhUaW1lJFdhaXRpbmdGb3JUaW1lU3RhdGUoCgkJCQl7ZmxhZ3M6IGZsYWdzLCBuYXZpZ2F0aW9uS2V5OiBuYXZpZ2F0aW9uS2V5LCBxdWV1ZWRFdmVudHM6IF9MaXN0X05pbCwgdXJsOiB1cmx9KSwKCQkJQTIoJGVsbSRjb3JlJFRhc2skcGVyZm9ybSwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEJyb3dzZXJBcHBsaWNhdGlvbkluaXRXaXRoVGltZSRUaW1lSGFzQXJyaXZlZEV2ZW50LCAkZWxtJHRpbWUkVGltZSRub3cpKTsKCX0pOwp2YXIgJGVsbSR0aW1lJFRpbWUkRXZlcnkgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnRXZlcnknLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGVsbSR0aW1lJFRpbWUkU3RhdGUgPSBGMigKCWZ1bmN0aW9uICh0YWdnZXJzLCBwcm9jZXNzZXMpIHsKCQlyZXR1cm4ge3Byb2Nlc3NlczogcHJvY2Vzc2VzLCB0YWdnZXJzOiB0YWdnZXJzfTsKCX0pOwp2YXIgJGVsbSRjb3JlJERpY3QkUkJFbXB0eV9lbG1fYnVpbHRpbiA9IHskOiAnUkJFbXB0eV9lbG1fYnVpbHRpbid9Owp2YXIgJGVsbSRjb3JlJERpY3QkZW1wdHkgPSAkZWxtJGNvcmUkRGljdCRSQkVtcHR5X2VsbV9idWlsdGluOwp2YXIgJGVsbSR0aW1lJFRpbWUkaW5pdCA9ICRlbG0kY29yZSRUYXNrJHN1Y2NlZWQoCglBMigkZWxtJHRpbWUkVGltZSRTdGF0ZSwgJGVsbSRjb3JlJERpY3QkZW1wdHksICRlbG0kY29yZSREaWN0JGVtcHR5KSk7CnZhciAkZWxtJGNvcmUkQmFzaWNzJGNvbXBhcmUgPSBfVXRpbHNfY29tcGFyZTsKdmFyICRlbG0kY29yZSREaWN0JGdldCA9IEYyKAoJZnVuY3Rpb24gKHRhcmdldEtleSwgZGljdCkgewoJCWdldDoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoZGljdC4kID09PSAnUkJFbXB0eV9lbG1fYnVpbHRpbicpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJfSBlbHNlIHsKCQkJCXZhciBrZXkgPSBkaWN0LmI7CgkJCQl2YXIgdmFsdWUgPSBkaWN0LmM7CgkJCQl2YXIgbGVmdCA9IGRpY3QuZDsKCQkJCXZhciByaWdodCA9IGRpY3QuZTsKCQkJCXZhciBfdjEgPSBBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBhcmUsIHRhcmdldEtleSwga2V5KTsKCQkJCXN3aXRjaCAoX3YxLiQpIHsKCQkJCQljYXNlICdMVCc6CgkJCQkJCXZhciAkdGVtcCR0YXJnZXRLZXkgPSB0YXJnZXRLZXksCgkJCQkJCQkkdGVtcCRkaWN0ID0gbGVmdDsKCQkJCQkJdGFyZ2V0S2V5ID0gJHRlbXAkdGFyZ2V0S2V5OwoJCQkJCQlkaWN0ID0gJHRlbXAkZGljdDsKCQkJCQkJY29udGludWUgZ2V0OwoJCQkJCWNhc2UgJ0VRJzoKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KHZhbHVlKTsKCQkJCQlkZWZhdWx0OgoJCQkJCQl2YXIgJHRlbXAkdGFyZ2V0S2V5ID0gdGFyZ2V0S2V5LAoJCQkJCQkJJHRlbXAkZGljdCA9IHJpZ2h0OwoJCQkJCQl0YXJnZXRLZXkgPSAkdGVtcCR0YXJnZXRLZXk7CgkJCQkJCWRpY3QgPSAkdGVtcCRkaWN0OwoJCQkJCQljb250aW51ZSBnZXQ7CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSREaWN0JEJsYWNrID0geyQ6ICdCbGFjayd9Owp2YXIgJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluID0gRjUoCglmdW5jdGlvbiAoYSwgYiwgYywgZCwgZSkgewoJCXJldHVybiB7JDogJ1JCTm9kZV9lbG1fYnVpbHRpbicsIGE6IGEsIGI6IGIsIGM6IGMsIGQ6IGQsIGU6IGV9OwoJfSk7CnZhciAkZWxtJGNvcmUkRGljdCRSZWQgPSB7JDogJ1JlZCd9Owp2YXIgJGVsbSRjb3JlJERpY3QkYmFsYW5jZSA9IEY1KAoJZnVuY3Rpb24gKGNvbG9yLCBrZXksIHZhbHVlLCBsZWZ0LCByaWdodCkgewoJCWlmICgocmlnaHQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChyaWdodC5hLiQgPT09ICdSZWQnKSkgewoJCQl2YXIgX3YxID0gcmlnaHQuYTsKCQkJdmFyIHJLID0gcmlnaHQuYjsKCQkJdmFyIHJWID0gcmlnaHQuYzsKCQkJdmFyIHJMZWZ0ID0gcmlnaHQuZDsKCQkJdmFyIHJSaWdodCA9IHJpZ2h0LmU7CgkJCWlmICgobGVmdC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgJiYgKGxlZnQuYS4kID09PSAnUmVkJykpIHsKCQkJCXZhciBfdjMgPSBsZWZ0LmE7CgkJCQl2YXIgbEsgPSBsZWZ0LmI7CgkJCQl2YXIgbFYgPSBsZWZ0LmM7CgkJCQl2YXIgbExlZnQgPSBsZWZ0LmQ7CgkJCQl2YXIgbFJpZ2h0ID0gbGVmdC5lOwoJCQkJcmV0dXJuIEE1KAoJCQkJCSRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwKCQkJCQkkZWxtJGNvcmUkRGljdCRSZWQsCgkJCQkJa2V5LAoJCQkJCXZhbHVlLAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkQmxhY2ssIGxLLCBsViwgbExlZnQsIGxSaWdodCksCgkJCQkJQTUoJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLCAkZWxtJGNvcmUkRGljdCRCbGFjaywgckssIHJWLCByTGVmdCwgclJpZ2h0KSk7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gQTUoCgkJCQkJJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLAoJCQkJCWNvbG9yLAoJCQkJCXJLLAoJCQkJCXJWLAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkUmVkLCBrZXksIHZhbHVlLCBsZWZ0LCByTGVmdCksCgkJCQkJclJpZ2h0KTsKCQkJfQoJCX0gZWxzZSB7CgkJCWlmICgoKChsZWZ0LiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSAmJiAobGVmdC5hLiQgPT09ICdSZWQnKSkgJiYgKGxlZnQuZC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykpICYmIChsZWZ0LmQuYS4kID09PSAnUmVkJykpIHsKCQkJCXZhciBfdjUgPSBsZWZ0LmE7CgkJCQl2YXIgbEsgPSBsZWZ0LmI7CgkJCQl2YXIgbFYgPSBsZWZ0LmM7CgkJCQl2YXIgX3Y2ID0gbGVmdC5kOwoJCQkJdmFyIF92NyA9IF92Ni5hOwoJCQkJdmFyIGxsSyA9IF92Ni5iOwoJCQkJdmFyIGxsViA9IF92Ni5jOwoJCQkJdmFyIGxsTGVmdCA9IF92Ni5kOwoJCQkJdmFyIGxsUmlnaHQgPSBfdjYuZTsKCQkJCXZhciBsUmlnaHQgPSBsZWZ0LmU7CgkJCQlyZXR1cm4gQTUoCgkJCQkJJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLAoJCQkJCSRlbG0kY29yZSREaWN0JFJlZCwKCQkJCQlsSywKCQkJCQlsViwKCQkJCQlBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JEJsYWNrLCBsbEssIGxsViwgbGxMZWZ0LCBsbFJpZ2h0KSwKCQkJCQlBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JEJsYWNrLCBrZXksIHZhbHVlLCBsUmlnaHQsIHJpZ2h0KSk7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gQTUoJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLCBjb2xvciwga2V5LCB2YWx1ZSwgbGVmdCwgcmlnaHQpOwoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkRGljdCRpbnNlcnRIZWxwID0gRjMoCglmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgZGljdCkgewoJCWlmIChkaWN0LiQgPT09ICdSQkVtcHR5X2VsbV9idWlsdGluJykgewoJCQlyZXR1cm4gQTUoJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLCAkZWxtJGNvcmUkRGljdCRSZWQsIGtleSwgdmFsdWUsICRlbG0kY29yZSREaWN0JFJCRW1wdHlfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JFJCRW1wdHlfZWxtX2J1aWx0aW4pOwoJCX0gZWxzZSB7CgkJCXZhciBuQ29sb3IgPSBkaWN0LmE7CgkJCXZhciBuS2V5ID0gZGljdC5iOwoJCQl2YXIgblZhbHVlID0gZGljdC5jOwoJCQl2YXIgbkxlZnQgPSBkaWN0LmQ7CgkJCXZhciBuUmlnaHQgPSBkaWN0LmU7CgkJCXZhciBfdjEgPSBBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBhcmUsIGtleSwgbktleSk7CgkJCXN3aXRjaCAoX3YxLiQpIHsKCQkJCWNhc2UgJ0xUJzoKCQkJCQlyZXR1cm4gQTUoCgkJCQkJCSRlbG0kY29yZSREaWN0JGJhbGFuY2UsCgkJCQkJCW5Db2xvciwKCQkJCQkJbktleSwKCQkJCQkJblZhbHVlLAoJCQkJCQlBMygkZWxtJGNvcmUkRGljdCRpbnNlcnRIZWxwLCBrZXksIHZhbHVlLCBuTGVmdCksCgkJCQkJCW5SaWdodCk7CgkJCQljYXNlICdFUSc6CgkJCQkJcmV0dXJuIEE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgbkNvbG9yLCBuS2V5LCB2YWx1ZSwgbkxlZnQsIG5SaWdodCk7CgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBBNSgKCQkJCQkJJGVsbSRjb3JlJERpY3QkYmFsYW5jZSwKCQkJCQkJbkNvbG9yLAoJCQkJCQluS2V5LAoJCQkJCQluVmFsdWUsCgkJCQkJCW5MZWZ0LAoJCQkJCQlBMygkZWxtJGNvcmUkRGljdCRpbnNlcnRIZWxwLCBrZXksIHZhbHVlLCBuUmlnaHQpKTsKCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJERpY3QkaW5zZXJ0ID0gRjMoCglmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgZGljdCkgewoJCXZhciBfdjAgPSBBMygkZWxtJGNvcmUkRGljdCRpbnNlcnRIZWxwLCBrZXksIHZhbHVlLCBkaWN0KTsKCQlpZiAoKF92MC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgJiYgKF92MC5hLiQgPT09ICdSZWQnKSkgewoJCQl2YXIgX3YxID0gX3YwLmE7CgkJCXZhciBrID0gX3YwLmI7CgkJCXZhciB2ID0gX3YwLmM7CgkJCXZhciBsID0gX3YwLmQ7CgkJCXZhciByID0gX3YwLmU7CgkJCXJldHVybiBBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JEJsYWNrLCBrLCB2LCBsLCByKTsKCQl9IGVsc2UgewoJCQl2YXIgeCA9IF92MDsKCQkJcmV0dXJuIHg7CgkJfQoJfSk7CnZhciAkZWxtJHRpbWUkVGltZSRhZGRNeVN1YiA9IEYyKAoJZnVuY3Rpb24gKF92MCwgc3RhdGUpIHsKCQl2YXIgaW50ZXJ2YWwgPSBfdjAuYTsKCQl2YXIgdGFnZ2VyID0gX3YwLmI7CgkJdmFyIF92MSA9IEEyKCRlbG0kY29yZSREaWN0JGdldCwgaW50ZXJ2YWwsIHN0YXRlKTsKCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gQTMoCgkJCQkkZWxtJGNvcmUkRGljdCRpbnNlcnQsCgkJCQlpbnRlcnZhbCwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbdGFnZ2VyXSksCgkJCQlzdGF0ZSk7CgkJfSBlbHNlIHsKCQkJdmFyIHRhZ2dlcnMgPSBfdjEuYTsKCQkJcmV0dXJuIEEzKAoJCQkJJGVsbSRjb3JlJERpY3QkaW5zZXJ0LAoJCQkJaW50ZXJ2YWwsCgkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCB0YWdnZXIsIHRhZ2dlcnMpLAoJCQkJc3RhdGUpOwoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJFByb2Nlc3Mka2lsbCA9IF9TY2hlZHVsZXJfa2lsbDsKdmFyICRlbG0kY29yZSREaWN0JGZvbGRsID0gRjMoCglmdW5jdGlvbiAoZnVuYywgYWNjLCBkaWN0KSB7CgkJZm9sZGw6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKGRpY3QuJCA9PT0gJ1JCRW1wdHlfZWxtX2J1aWx0aW4nKSB7CgkJCQlyZXR1cm4gYWNjOwoJCQl9IGVsc2UgewoJCQkJdmFyIGtleSA9IGRpY3QuYjsKCQkJCXZhciB2YWx1ZSA9IGRpY3QuYzsKCQkJCXZhciBsZWZ0ID0gZGljdC5kOwoJCQkJdmFyIHJpZ2h0ID0gZGljdC5lOwoJCQkJdmFyICR0ZW1wJGZ1bmMgPSBmdW5jLAoJCQkJCSR0ZW1wJGFjYyA9IEEzKAoJCQkJCWZ1bmMsCgkJCQkJa2V5LAoJCQkJCXZhbHVlLAoJCQkJCUEzKCRlbG0kY29yZSREaWN0JGZvbGRsLCBmdW5jLCBhY2MsIGxlZnQpKSwKCQkJCQkkdGVtcCRkaWN0ID0gcmlnaHQ7CgkJCQlmdW5jID0gJHRlbXAkZnVuYzsKCQkJCWFjYyA9ICR0ZW1wJGFjYzsKCQkJCWRpY3QgPSAkdGVtcCRkaWN0OwoJCQkJY29udGludWUgZm9sZGw7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSREaWN0JG1lcmdlID0gRjYoCglmdW5jdGlvbiAobGVmdFN0ZXAsIGJvdGhTdGVwLCByaWdodFN0ZXAsIGxlZnREaWN0LCByaWdodERpY3QsIGluaXRpYWxSZXN1bHQpIHsKCQl2YXIgc3RlcFN0YXRlID0gRjMoCgkJCWZ1bmN0aW9uIChyS2V5LCByVmFsdWUsIF92MCkgewoJCQkJc3RlcFN0YXRlOgoJCQkJd2hpbGUgKHRydWUpIHsKCQkJCQl2YXIgbGlzdCA9IF92MC5hOwoJCQkJCXZhciByZXN1bHQgPSBfdjAuYjsKCQkJCQlpZiAoIWxpc3QuYikgewoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJCWxpc3QsCgkJCQkJCQlBMyhyaWdodFN0ZXAsIHJLZXksIHJWYWx1ZSwgcmVzdWx0KSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIF92MiA9IGxpc3QuYTsKCQkJCQkJdmFyIGxLZXkgPSBfdjIuYTsKCQkJCQkJdmFyIGxWYWx1ZSA9IF92Mi5iOwoJCQkJCQl2YXIgcmVzdCA9IGxpc3QuYjsKCQkJCQkJaWYgKF9VdGlsc19jbXAobEtleSwgcktleSkgPCAwKSB7CgkJCQkJCQl2YXIgJHRlbXAkcktleSA9IHJLZXksCgkJCQkJCQkJJHRlbXAkclZhbHVlID0gclZhbHVlLAoJCQkJCQkJCSR0ZW1wJF92MCA9IF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJcmVzdCwKCQkJCQkJCQlBMyhsZWZ0U3RlcCwgbEtleSwgbFZhbHVlLCByZXN1bHQpKTsKCQkJCQkJCXJLZXkgPSAkdGVtcCRyS2V5OwoJCQkJCQkJclZhbHVlID0gJHRlbXAkclZhbHVlOwoJCQkJCQkJX3YwID0gJHRlbXAkX3YwOwoJCQkJCQkJY29udGludWUgc3RlcFN0YXRlOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJaWYgKF9VdGlsc19jbXAobEtleSwgcktleSkgPiAwKSB7CgkJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCWxpc3QsCgkJCQkJCQkJCUEzKHJpZ2h0U3RlcCwgcktleSwgclZhbHVlLCByZXN1bHQpKTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCXJlc3QsCgkJCQkJCQkJCUE0KGJvdGhTdGVwLCBsS2V5LCBsVmFsdWUsIHJWYWx1ZSwgcmVzdWx0KSk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJCXZhciBfdjMgPSBBMygKCQkJJGVsbSRjb3JlJERpY3QkZm9sZGwsCgkJCXN0ZXBTdGF0ZSwKCQkJX1V0aWxzX1R1cGxlMigKCQkJCSRlbG0kY29yZSREaWN0JHRvTGlzdChsZWZ0RGljdCksCgkJCQlpbml0aWFsUmVzdWx0KSwKCQkJcmlnaHREaWN0KTsKCQl2YXIgbGVmdG92ZXJzID0gX3YzLmE7CgkJdmFyIGludGVybWVkaWF0ZVJlc3VsdCA9IF92My5iOwoJCXJldHVybiBBMygKCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCUYyKAoJCQkJZnVuY3Rpb24gKF92NCwgcmVzdWx0KSB7CgkJCQkJdmFyIGsgPSBfdjQuYTsKCQkJCQl2YXIgdiA9IF92NC5iOwoJCQkJCXJldHVybiBBMyhsZWZ0U3RlcCwgaywgdiwgcmVzdWx0KTsKCQkJCX0pLAoJCQlpbnRlcm1lZGlhdGVSZXN1bHQsCgkJCWxlZnRvdmVycyk7Cgl9KTsKdmFyICRlbG0kY29yZSRQbGF0Zm9ybSRzZW5kVG9TZWxmID0gX1BsYXRmb3JtX3NlbmRUb1NlbGY7CnZhciAkZWxtJHRpbWUkVGltZSRzZXRJbnRlcnZhbCA9IF9UaW1lX3NldEludGVydmFsOwp2YXIgJGVsbSRjb3JlJFByb2Nlc3Mkc3Bhd24gPSBfU2NoZWR1bGVyX3NwYXduOwp2YXIgJGVsbSR0aW1lJFRpbWUkc3Bhd25IZWxwID0gRjMoCglmdW5jdGlvbiAocm91dGVyLCBpbnRlcnZhbHMsIHByb2Nlc3NlcykgewoJCWlmICghaW50ZXJ2YWxzLmIpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRUYXNrJHN1Y2NlZWQocHJvY2Vzc2VzKTsKCQl9IGVsc2UgewoJCQl2YXIgaW50ZXJ2YWwgPSBpbnRlcnZhbHMuYTsKCQkJdmFyIHJlc3QgPSBpbnRlcnZhbHMuYjsKCQkJdmFyIHNwYXduVGltZXIgPSAkZWxtJGNvcmUkUHJvY2VzcyRzcGF3bigKCQkJCUEyKAoJCQkJCSRlbG0kdGltZSRUaW1lJHNldEludGVydmFsLAoJCQkJCWludGVydmFsLAoJCQkJCUEyKCRlbG0kY29yZSRQbGF0Zm9ybSRzZW5kVG9TZWxmLCByb3V0ZXIsIGludGVydmFsKSkpOwoJCQl2YXIgc3Bhd25SZXN0ID0gZnVuY3Rpb24gKGlkKSB7CgkJCQlyZXR1cm4gQTMoCgkJCQkJJGVsbSR0aW1lJFRpbWUkc3Bhd25IZWxwLAoJCQkJCXJvdXRlciwKCQkJCQlyZXN0LAoJCQkJCUEzKCRlbG0kY29yZSREaWN0JGluc2VydCwgaW50ZXJ2YWwsIGlkLCBwcm9jZXNzZXMpKTsKCQkJfTsKCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRUYXNrJGFuZFRoZW4sIHNwYXduUmVzdCwgc3Bhd25UaW1lcik7CgkJfQoJfSk7CnZhciAkZWxtJHRpbWUkVGltZSRvbkVmZmVjdHMgPSBGMygKCWZ1bmN0aW9uIChyb3V0ZXIsIHN1YnMsIF92MCkgewoJCXZhciBwcm9jZXNzZXMgPSBfdjAucHJvY2Vzc2VzOwoJCXZhciByaWdodFN0ZXAgPSBGMygKCQkJZnVuY3Rpb24gKF92NiwgaWQsIF92NykgewoJCQkJdmFyIHNwYXducyA9IF92Ny5hOwoJCQkJdmFyIGV4aXN0aW5nID0gX3Y3LmI7CgkJCQl2YXIga2lsbHMgPSBfdjcuYzsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUzKAoJCQkJCXNwYXducywKCQkJCQlleGlzdGluZywKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJFRhc2skYW5kVGhlbiwKCQkJCQkJZnVuY3Rpb24gKF92NSkgewoJCQkJCQkJcmV0dXJuIGtpbGxzOwoJCQkJCQl9LAoJCQkJCQkkZWxtJGNvcmUkUHJvY2VzcyRraWxsKGlkKSkpOwoJCQl9KTsKCQl2YXIgbmV3VGFnZ2VycyA9IEEzKCRlbG0kY29yZSRMaXN0JGZvbGRsLCAkZWxtJHRpbWUkVGltZSRhZGRNeVN1YiwgJGVsbSRjb3JlJERpY3QkZW1wdHksIHN1YnMpOwoJCXZhciBsZWZ0U3RlcCA9IEYzKAoJCQlmdW5jdGlvbiAoaW50ZXJ2YWwsIHRhZ2dlcnMsIF92NCkgewoJCQkJdmFyIHNwYXducyA9IF92NC5hOwoJCQkJdmFyIGV4aXN0aW5nID0gX3Y0LmI7CgkJCQl2YXIga2lsbHMgPSBfdjQuYzsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUzKAoJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGludGVydmFsLCBzcGF3bnMpLAoJCQkJCWV4aXN0aW5nLAoJCQkJCWtpbGxzKTsKCQkJfSk7CgkJdmFyIGJvdGhTdGVwID0gRjQoCgkJCWZ1bmN0aW9uIChpbnRlcnZhbCwgdGFnZ2VycywgaWQsIF92MykgewoJCQkJdmFyIHNwYXducyA9IF92My5hOwoJCQkJdmFyIGV4aXN0aW5nID0gX3YzLmI7CgkJCQl2YXIga2lsbHMgPSBfdjMuYzsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUzKAoJCQkJCXNwYXducywKCQkJCQlBMygkZWxtJGNvcmUkRGljdCRpbnNlcnQsIGludGVydmFsLCBpZCwgZXhpc3RpbmcpLAoJCQkJCWtpbGxzKTsKCQkJfSk7CgkJdmFyIF92MSA9IEE2KAoJCQkkZWxtJGNvcmUkRGljdCRtZXJnZSwKCQkJbGVmdFN0ZXAsCgkJCWJvdGhTdGVwLAoJCQlyaWdodFN0ZXAsCgkJCW5ld1RhZ2dlcnMsCgkJCXByb2Nlc3NlcywKCQkJX1V0aWxzX1R1cGxlMygKCQkJCV9MaXN0X05pbCwKCQkJCSRlbG0kY29yZSREaWN0JGVtcHR5LAoJCQkJJGVsbSRjb3JlJFRhc2skc3VjY2VlZChfVXRpbHNfVHVwbGUwKSkpOwoJCXZhciBzcGF3bkxpc3QgPSBfdjEuYTsKCQl2YXIgZXhpc3RpbmdEaWN0ID0gX3YxLmI7CgkJdmFyIGtpbGxUYXNrID0gX3YxLmM7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkVGFzayRhbmRUaGVuLAoJCQlmdW5jdGlvbiAobmV3UHJvY2Vzc2VzKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFRhc2skc3VjY2VlZCgKCQkJCQlBMigkZWxtJHRpbWUkVGltZSRTdGF0ZSwgbmV3VGFnZ2VycywgbmV3UHJvY2Vzc2VzKSk7CgkJCX0sCgkJCUEyKAoJCQkJJGVsbSRjb3JlJFRhc2skYW5kVGhlbiwKCQkJCWZ1bmN0aW9uIChfdjIpIHsKCQkJCQlyZXR1cm4gQTMoJGVsbSR0aW1lJFRpbWUkc3Bhd25IZWxwLCByb3V0ZXIsIHNwYXduTGlzdCwgZXhpc3RpbmdEaWN0KTsKCQkJCX0sCgkJCQlraWxsVGFzaykpOwoJfSk7CnZhciAkZWxtJHRpbWUkVGltZSRvblNlbGZNc2cgPSBGMygKCWZ1bmN0aW9uIChyb3V0ZXIsIGludGVydmFsLCBzdGF0ZSkgewoJCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkRGljdCRnZXQsIGludGVydmFsLCBzdGF0ZS50YWdnZXJzKTsKCQlpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gJGVsbSRjb3JlJFRhc2skc3VjY2VlZChzdGF0ZSk7CgkJfSBlbHNlIHsKCQkJdmFyIHRhZ2dlcnMgPSBfdjAuYTsKCQkJdmFyIHRlbGxUYWdnZXJzID0gZnVuY3Rpb24gKHRpbWUpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkVGFzayRzZXF1ZW5jZSgKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQlmdW5jdGlvbiAodGFnZ2VyKSB7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJFBsYXRmb3JtJHNlbmRUb0FwcCwKCQkJCQkJCQlyb3V0ZXIsCgkJCQkJCQkJdGFnZ2VyKHRpbWUpKTsKCQkJCQkJfSwKCQkJCQkJdGFnZ2VycykpOwoJCQl9OwoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGNvcmUkVGFzayRhbmRUaGVuLAoJCQkJZnVuY3Rpb24gKF92MSkgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkVGFzayRzdWNjZWVkKHN0YXRlKTsKCQkJCX0sCgkJCQlBMigkZWxtJGNvcmUkVGFzayRhbmRUaGVuLCB0ZWxsVGFnZ2VycywgJGVsbSR0aW1lJFRpbWUkbm93KSk7CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VMID0gRjMoCglmdW5jdGlvbiAoZywgZiwgeCkgewoJCXJldHVybiBnKAoJCQlmKHgpKTsKCX0pOwp2YXIgJGVsbSR0aW1lJFRpbWUkc3ViTWFwID0gRjIoCglmdW5jdGlvbiAoZiwgX3YwKSB7CgkJdmFyIGludGVydmFsID0gX3YwLmE7CgkJdmFyIHRhZ2dlciA9IF92MC5iOwoJCXJldHVybiBBMigKCQkJJGVsbSR0aW1lJFRpbWUkRXZlcnksCgkJCWludGVydmFsLAoJCQlBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VMLCBmLCB0YWdnZXIpKTsKCX0pOwpfUGxhdGZvcm1fZWZmZWN0TWFuYWdlcnNbJ1RpbWUnXSA9IF9QbGF0Zm9ybV9jcmVhdGVNYW5hZ2VyKCRlbG0kdGltZSRUaW1lJGluaXQsICRlbG0kdGltZSRUaW1lJG9uRWZmZWN0cywgJGVsbSR0aW1lJFRpbWUkb25TZWxmTXNnLCAwLCAkZWxtJHRpbWUkVGltZSRzdWJNYXApOwp2YXIgJGVsbSR0aW1lJFRpbWUkc3Vic2NyaXB0aW9uID0gX1BsYXRmb3JtX2xlYWYoJ1RpbWUnKTsKdmFyICRlbG0kdGltZSRUaW1lJGV2ZXJ5ID0gRjIoCglmdW5jdGlvbiAoaW50ZXJ2YWwsIHRhZ2dlcikgewoJCXJldHVybiAkZWxtJHRpbWUkVGltZSRzdWJzY3JpcHRpb24oCgkJCUEyKCRlbG0kdGltZSRUaW1lJEV2ZXJ5LCBpbnRlcnZhbCwgdGFnZ2VyKSk7Cgl9KTsKdmFyICRlbG0kY29yZSRQbGF0Zm9ybSRTdWIkbWFwID0gX1BsYXRmb3JtX21hcDsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRCcm93c2VyQXBwbGljYXRpb25Jbml0V2l0aFRpbWUkc3Vic2NyaXB0aW9ucyA9IEYyKAoJZnVuY3Rpb24gKGNvbmZpZ3VyYXRpb24sIHN0YXRlKSB7CgkJaWYgKHN0YXRlLiQgPT09ICdXYWl0aW5nRm9yVGltZVN0YXRlJykgewoJCQlyZXR1cm4gQTIoJGVsbSR0aW1lJFRpbWUkZXZlcnksIDUwMCwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEJyb3dzZXJBcHBsaWNhdGlvbkluaXRXaXRoVGltZSRUaW1lSGFzQXJyaXZlZEV2ZW50KTsKCQl9IGVsc2UgewoJCQl2YXIgaW5pdGlhbGl6ZWRTdGF0ZSA9IHN0YXRlLmE7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRQbGF0Zm9ybSRTdWIkbWFwLAoJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEJyb3dzZXJBcHBsaWNhdGlvbkluaXRXaXRoVGltZSRJbml0aWFsaXplZEV2ZW50LAoJCQkJY29uZmlndXJhdGlvbi5zdWJzY3JpcHRpb25zKGluaXRpYWxpemVkU3RhdGUpKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRCcm93c2VyQXBwbGljYXRpb25Jbml0V2l0aFRpbWUkSW5pdGlhbGl6ZWRTdGF0ZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdJbml0aWFsaXplZFN0YXRlJywgYTogYX07Cn07CnZhciAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJGJhdGNoID0gX1BsYXRmb3JtX2JhdGNoOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEJyb3dzZXJBcHBsaWNhdGlvbkluaXRXaXRoVGltZSRjb21wbGV0ZUluaXQgPSBGMygKCWZ1bmN0aW9uIChjb25maWd1cmF0aW9uLCB0aW1lLCBzdGF0ZUJlZm9yZSkgewoJCXJldHVybiBBMygKCQkJJGVsbSRjb3JlJExpc3QkZm9sZHIsCgkJCUYyKAoJCQkJZnVuY3Rpb24gKGV2ZW50LCBfdjApIHsKCQkJCQl2YXIgc3RhdGUgPSBfdjAuYTsKCQkJCQl2YXIgY21kQmVmb3JlID0gX3YwLmI7CgkJCQkJdmFyIF92MSA9IEEyKGNvbmZpZ3VyYXRpb24udXBkYXRlLCBldmVudCwgc3RhdGUpOwoJCQkJCXZhciBuZXh0U3RhdGUgPSBfdjEuYTsKCQkJCQl2YXIgbmV4dENtZCA9IF92MS5iOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQluZXh0U3RhdGUsCgkJCQkJCSRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkYmF0Y2goCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJW2NtZEJlZm9yZSwgbmV4dENtZF0pKSk7CgkJCQl9KSwKCQkJQTQoY29uZmlndXJhdGlvbi5pbml0LCBzdGF0ZUJlZm9yZS5mbGFncywgc3RhdGVCZWZvcmUudXJsLCBzdGF0ZUJlZm9yZS5uYXZpZ2F0aW9uS2V5LCB0aW1lKSwKCQkJc3RhdGVCZWZvcmUucXVldWVkRXZlbnRzKTsKCX0pOwp2YXIgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRtYXAgPSBfUGxhdGZvcm1fbWFwOwp2YXIgJGVsbSRjb3JlJFR1cGxlJG1hcEZpcnN0ID0gRjIoCglmdW5jdGlvbiAoZnVuYywgX3YwKSB7CgkJdmFyIHggPSBfdjAuYTsKCQl2YXIgeSA9IF92MC5iOwoJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQlmdW5jKHgpLAoJCQl5KTsKCX0pOwp2YXIgJGVsbSRjb3JlJFR1cGxlJG1hcFNlY29uZCA9IEYyKAoJZnVuY3Rpb24gKGZ1bmMsIF92MCkgewoJCXZhciB4ID0gX3YwLmE7CgkJdmFyIHkgPSBfdjAuYjsKCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJeCwKCQkJZnVuYyh5KSk7Cgl9KTsKdmFyICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSA9ICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkYmF0Y2goX0xpc3RfTmlsKTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRCcm93c2VyQXBwbGljYXRpb25Jbml0V2l0aFRpbWUkdXBkYXRlID0gRjMoCglmdW5jdGlvbiAoY29uZmlndXJhdGlvbiwgZXZlbnQsIHN0YXRlKSB7CgkJaWYgKHN0YXRlLiQgPT09ICdXYWl0aW5nRm9yVGltZVN0YXRlJykgewoJCQl2YXIgaW5pdFN0YXRlID0gc3RhdGUuYTsKCQkJaWYgKGV2ZW50LiQgPT09ICdUaW1lSGFzQXJyaXZlZEV2ZW50JykgewoJCQkJdmFyIHRpbWUgPSBldmVudC5hOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRUdXBsZSRtYXBTZWNvbmQsCgkJCQkJJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRtYXAoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEJyb3dzZXJBcHBsaWNhdGlvbkluaXRXaXRoVGltZSRJbml0aWFsaXplZEV2ZW50KSwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJFR1cGxlJG1hcEZpcnN0LAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkQnJvd3NlckFwcGxpY2F0aW9uSW5pdFdpdGhUaW1lJEluaXRpYWxpemVkU3RhdGUsCgkJCQkJCUEzKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRCcm93c2VyQXBwbGljYXRpb25Jbml0V2l0aFRpbWUkY29tcGxldGVJbml0LCBjb25maWd1cmF0aW9uLCB0aW1lLCBpbml0U3RhdGUpKSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgaW5pdGlhbGl6ZWRFdmVudCA9IGV2ZW50LmE7CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkQnJvd3NlckFwcGxpY2F0aW9uSW5pdFdpdGhUaW1lJFdhaXRpbmdGb3JUaW1lU3RhdGUoCgkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQlpbml0U3RhdGUsCgkJCQkJCQl7CgkJCQkJCQkJcXVldWVkRXZlbnRzOiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBpbml0aWFsaXplZEV2ZW50LCBpbml0U3RhdGUucXVldWVkRXZlbnRzKQoJCQkJCQkJfSkpLAoJCQkJCSRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCX0KCQl9IGVsc2UgewoJCQl2YXIgaW5pdGlhbGl6ZWQgPSBzdGF0ZS5hOwoJCQlpZiAoZXZlbnQuJCA9PT0gJ0luaXRpYWxpemVkRXZlbnQnKSB7CgkJCQl2YXIgaW5pdGlhbGl6ZWRFdmVudCA9IGV2ZW50LmE7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJFR1cGxlJG1hcFNlY29uZCwKCQkJCQkkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG1hcCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkQnJvd3NlckFwcGxpY2F0aW9uSW5pdFdpdGhUaW1lJEluaXRpYWxpemVkRXZlbnQpLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkVHVwbGUkbWFwRmlyc3QsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRCcm93c2VyQXBwbGljYXRpb25Jbml0V2l0aFRpbWUkSW5pdGlhbGl6ZWRTdGF0ZSwKCQkJCQkJQTIoY29uZmlndXJhdGlvbi51cGRhdGUsIGluaXRpYWxpemVkRXZlbnQsIGluaXRpYWxpemVkKSkpOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoc3RhdGUsICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRtYXAgPSBfVmlydHVhbERvbV9tYXA7CnZhciAkZWxtJGh0bWwkSHRtbCRtYXAgPSAkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kbWFwOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEJyb3dzZXJBcHBsaWNhdGlvbkluaXRXaXRoVGltZSR2aWV3ID0gRjIoCglmdW5jdGlvbiAoY29uZmlndXJhdGlvbiwgc3RhdGUpIHsKCQlpZiAoc3RhdGUuJCA9PT0gJ1dhaXRpbmdGb3JUaW1lU3RhdGUnKSB7CgkJCXJldHVybiB7CgkJCQlib2R5OiBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJJGVsbSRodG1sJEh0bWwkbWFwKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRCcm93c2VyQXBwbGljYXRpb25Jbml0V2l0aFRpbWUkSW5pdGlhbGl6ZWRFdmVudCksCgkJCQkJY29uZmlndXJhdGlvbi52aWV3V2hpbGVXYWl0aW5nRm9yVGltZS5ib2R5KSwKCQkJCXRpdGxlOiBjb25maWd1cmF0aW9uLnZpZXdXaGlsZVdhaXRpbmdGb3JUaW1lLnRpdGxlCgkJCX07CgkJfSBlbHNlIHsKCQkJdmFyIGluaXRpYWxpemVkU3RhdGUgPSBzdGF0ZS5hOwoJCQl2YXIgX3YxID0gY29uZmlndXJhdGlvbi52aWV3KGluaXRpYWxpemVkU3RhdGUpOwoJCQl2YXIgdGl0bGUgPSBfdjEudGl0bGU7CgkJCXZhciBib2R5ID0gX3YxLmJvZHk7CgkJCXJldHVybiB7CgkJCQlib2R5OiBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJJGVsbSRodG1sJEh0bWwkbWFwKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRCcm93c2VyQXBwbGljYXRpb25Jbml0V2l0aFRpbWUkSW5pdGlhbGl6ZWRFdmVudCksCgkJCQkJYm9keSksCgkJCQl0aXRsZTogdGl0bGUKCQkJfTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRCcm93c2VyQXBwbGljYXRpb25Jbml0V2l0aFRpbWUkYXBwbGljYXRpb24gPSBmdW5jdGlvbiAoY29uZmlndXJhdGlvbikgewoJcmV0dXJuICRlbG0kYnJvd3NlciRCcm93c2VyJGFwcGxpY2F0aW9uKAoJCXsKCQkJaW5pdDogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEJyb3dzZXJBcHBsaWNhdGlvbkluaXRXaXRoVGltZSRpbml0LAoJCQlvblVybENoYW5nZTogQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgY29uZmlndXJhdGlvbi5vblVybENoYW5nZSwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEJyb3dzZXJBcHBsaWNhdGlvbkluaXRXaXRoVGltZSRJbml0aWFsaXplZEV2ZW50KSwKCQkJb25VcmxSZXF1ZXN0OiBBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLCBjb25maWd1cmF0aW9uLm9uVXJsUmVxdWVzdCwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEJyb3dzZXJBcHBsaWNhdGlvbkluaXRXaXRoVGltZSRJbml0aWFsaXplZEV2ZW50KSwKCQkJc3Vic2NyaXB0aW9uczogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEJyb3dzZXJBcHBsaWNhdGlvbkluaXRXaXRoVGltZSRzdWJzY3JpcHRpb25zKGNvbmZpZ3VyYXRpb24pLAoJCQl1cGRhdGU6ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRCcm93c2VyQXBwbGljYXRpb25Jbml0V2l0aFRpbWUkdXBkYXRlKGNvbmZpZ3VyYXRpb24pLAoJCQl2aWV3OiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkQnJvd3NlckFwcGxpY2F0aW9uSW5pdFdpdGhUaW1lJHZpZXcoY29uZmlndXJhdGlvbikKCQl9KTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFdvcmtzcGFjZUVyciA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdXb3Jrc3BhY2VFcnInLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGZvbGRVcGRhdGVzID0gRjIoCglmdW5jdGlvbiAoZXZlbnRzLCBzdGF0ZUJlZm9yZSkgewoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJFR1cGxlJG1hcFNlY29uZCwKCQkJJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRiYXRjaCwKCQkJQTMoCgkJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJCUYyKAoJCQkJCWZ1bmN0aW9uIChldmVudCwgX3YwKSB7CgkJCQkJCXZhciBzdGF0ZSA9IF92MC5hOwoJCQkJCQl2YXIgY21kcyA9IF92MC5iOwoJCQkJCQl2YXIgX3YxID0gZXZlbnQoc3RhdGUpOwoJCQkJCQl2YXIgbmV4dFN0YXRlID0gX3YxLmE7CgkJCQkJCXZhciBuZXh0Q21kID0gX3YxLmI7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJbmV4dFN0YXRlLAoJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgbmV4dENtZCwgY21kcykpOwoJCQkJCX0pLAoJCQkJX1V0aWxzX1R1cGxlMihzdGF0ZUJlZm9yZSwgX0xpc3RfTmlsKSwKCQkJCWV2ZW50cykpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJERpZEZvY3VzRWRpdG9yV2lkZ2V0RXZlbnQgPSB7JDogJ0RpZEZvY3VzRWRpdG9yV2lkZ2V0RXZlbnQnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEVzY2FwZSA9IHskOiAnRXNjYXBlJ307CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRFeHBvcnRUb1ppcEFyY2hpdmVEaWFsb2cgPSB7JDogJ0V4cG9ydFRvWmlwQXJjaGl2ZURpYWxvZyd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kR2V0TGlua1RvV29ya3NwYWNlRGlhbG9nID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0dldExpbmtUb1dvcmtzcGFjZURpYWxvZycsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kSW1wb3J0RnJvbVppcEFyY2hpdmVEaWFsb2cgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnSW1wb3J0RnJvbVppcEFyY2hpdmVEaWFsb2cnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJExvYWRGcm9tR2l0RGlhbG9nID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xvYWRGcm9tR2l0RGlhbG9nJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRNb2RhbERpYWxvZyA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdNb2RhbERpYWxvZycsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVGl0bGViYXJNZW51ID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ1RpdGxlYmFyTWVudScsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRDbG9zZVBvcHVwID0geyQ6ICdVc2VySW5wdXRDbG9zZVBvcHVwJ307CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRMb2FkZWRaaXBBcmNoaXZlQnl0ZXMgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVXNlcklucHV0TG9hZGVkWmlwQXJjaGl2ZUJ5dGVzJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRMb2FkZWRaaXBBcmNoaXZlRmlsZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdVc2VySW5wdXRMb2FkZWRaaXBBcmNoaXZlRmlsZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kV29ya3NwYWNlQWN0aXZlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1dvcmtzcGFjZUFjdGl2ZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kV29ya3NwYWNlRXZlbnQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnV29ya3NwYWNlRXZlbnQnLCBhOiBhfTsKfTsKdmFyICRlbG0kdXJsJFVybCRCdWlsZGVyJHRvUXVlcnlQYWlyID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIGtleSA9IF92MC5hOwoJdmFyIHZhbHVlID0gX3YwLmI7CglyZXR1cm4ga2V5ICsgKCc9JyArIHZhbHVlKTsKfTsKdmFyICRlbG0kdXJsJFVybCRCdWlsZGVyJHRvUXVlcnkgPSBmdW5jdGlvbiAocGFyYW1ldGVycykgewoJaWYgKCFwYXJhbWV0ZXJzLmIpIHsKCQlyZXR1cm4gJyc7Cgl9IGVsc2UgewoJCXJldHVybiAnPycgKyBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknJicsCgkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJGVsbSR1cmwkVXJsJEJ1aWxkZXIkdG9RdWVyeVBhaXIsIHBhcmFtZXRlcnMpKTsKCX0KfTsKdmFyICRlbG0kdXJsJFVybCRCdWlsZGVyJGFic29sdXRlID0gRjIoCglmdW5jdGlvbiAocGF0aFNlZ21lbnRzLCBwYXJhbWV0ZXJzKSB7CgkJcmV0dXJuICcvJyArIChBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcvJywgcGF0aFNlZ21lbnRzKSArICRlbG0kdXJsJFVybCRCdWlsZGVyJHRvUXVlcnkocGFyYW1ldGVycykpOwoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCRhcHBlbmQgPSBGMigKCWZ1bmN0aW9uICh4cywgeXMpIHsKCQlpZiAoIXlzLmIpIHsKCQkJcmV0dXJuIHhzOwoJCX0gZWxzZSB7CgkJCXJldHVybiBBMygkZWxtJGNvcmUkTGlzdCRmb2xkciwgJGVsbSRjb3JlJExpc3QkY29ucywgeXMsIHhzKTsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JGNvbmNhdCA9IGZ1bmN0aW9uIChsaXN0cykgewoJcmV0dXJuIEEzKCRlbG0kY29yZSRMaXN0JGZvbGRyLCAkZWxtJGNvcmUkTGlzdCRhcHBlbmQsIF9MaXN0X05pbCwgbGlzdHMpOwp9Owp2YXIgJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwID0gRjIoCglmdW5jdGlvbiAoZiwgbGlzdCkgewoJCXJldHVybiAkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgZiwgbGlzdCkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkZmxhdExpc3RPZkJsb2JzRnJvbUZpbGVUcmVlTm9kZSA9IGZ1bmN0aW9uICh0cmVlTm9kZSkgewoJaWYgKHRyZWVOb2RlLiQgPT09ICdCbG9iTm9kZScpIHsKCQl2YXIgYmxvYiA9IHRyZWVOb2RlLmE7CgkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIGJsb2IpCgkJCV0pOwoJfSBlbHNlIHsKCQl2YXIgdHJlZUVudHJpZXMgPSB0cmVlTm9kZS5hOwoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQl2YXIgY2hpbGROYW1lID0gX3YxLmE7CgkJCQl2YXIgY2hpbGRDb250ZW50ID0gX3YxLmI7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCSRlbG0kY29yZSRUdXBsZSRtYXBGaXJzdCgKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucyhjaGlsZE5hbWUpKSwKCQkJCQkkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkZmxhdExpc3RPZkJsb2JzRnJvbUZpbGVUcmVlTm9kZShjaGlsZENvbnRlbnQpKTsKCQkJfSwKCQkJdHJlZUVudHJpZXMpOwoJfQp9Owp2YXIgJGFndV96JGVsbV96aXAkWmlwJFppcCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdaaXAnLCBhOiBhfTsKfTsKdmFyICRhZ3VfeiRlbG1femlwJFppcCRmcm9tRW50cmllcyA9ICRhZ3VfeiRlbG1femlwJFppcCRaaXA7CnZhciAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRGb3JtYXQkRW50cnkgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnRW50cnknLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRm9ybWF0JEV4YWN0bHkgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRXhhY3RseScsIGE6IGF9Owp9Owp2YXIgJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRm9ybWF0JFN0b3JlZCA9IHskOiAnU3RvcmVkJ307CnZhciAkZWxtJGJ5dGVzJEJ5dGVzJEJFID0geyQ6ICdCRSd9Owp2YXIgJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRG9uZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdEb25lJywgYTogYX07Cn07CnZhciAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRMb29wID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xvb3AnLCBhOiBhfTsKfTsKdmFyICRlbG0kY29yZSRCaXR3aXNlJGFuZCA9IF9CaXR3aXNlX2FuZDsKdmFyICRlbG0kY29yZSRCYXNpY3MkZ2UgPSBfVXRpbHNfZ2U7CnZhciAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSREZWNvZGVyID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0RlY29kZXInLCBhOiBhfTsKfTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcCA9IEYyKAoJZnVuY3Rpb24gKGZ1bmMsIF92MCkgewoJCXZhciBkZWNvZGVBID0gX3YwLmE7CgkJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJERlY29kZXIoCgkJCUYyKAoJCQkJZnVuY3Rpb24gKGJpdGVzLCBvZmZzZXQpIHsKCQkJCQl2YXIgX3YxID0gQTIoZGVjb2RlQSwgYml0ZXMsIG9mZnNldCk7CgkJCQkJdmFyIGFPZmZzZXQgPSBfdjEuYTsKCQkJCQl2YXIgYSA9IF92MS5iOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlhT2Zmc2V0LAoJCQkJCQlmdW5jKGEpKTsKCQkJCX0pKTsKCX0pOwp2YXIgJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwMiA9IEYzKAoJZnVuY3Rpb24gKGZ1bmMsIF92MCwgX3YxKSB7CgkJdmFyIGRlY29kZUEgPSBfdjAuYTsKCQl2YXIgZGVjb2RlQiA9IF92MS5hOwoJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSREZWNvZGVyKAoJCQlGMigKCQkJCWZ1bmN0aW9uIChiaXRlcywgb2Zmc2V0KSB7CgkJCQkJdmFyIF92MiA9IEEyKGRlY29kZUEsIGJpdGVzLCBvZmZzZXQpOwoJCQkJCXZhciBhT2Zmc2V0ID0gX3YyLmE7CgkJCQkJdmFyIGEgPSBfdjIuYjsKCQkJCQl2YXIgX3YzID0gQTIoZGVjb2RlQiwgYml0ZXMsIGFPZmZzZXQpOwoJCQkJCXZhciBiT2Zmc2V0ID0gX3YzLmE7CgkJCQkJdmFyIGIgPSBfdjMuYjsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJYk9mZnNldCwKCQkJCQkJQTIoZnVuYywgYSwgYikpOwoJCQkJfSkpOwoJfSk7CnZhciAkZWxtJGNvcmUkQml0d2lzZSRzaGlmdFJpZ2h0WmZCeSA9IF9CaXR3aXNlX3NoaWZ0UmlnaHRaZkJ5Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJENoZWNrc3VtJENyYzMyJHRpbmZfY3JjMzJjYXNlID0gZnVuY3Rpb24gKGkpIHsKCXN3aXRjaCAoaSkgewoJCWNhc2UgMDoKCQkJcmV0dXJuIDA7CgkJY2FzZSAxOgoJCQlyZXR1cm4gNDk4NTM2NTQ4OwoJCWNhc2UgMjoKCQkJcmV0dXJuIDk5NzA3MzA5NjsKCQljYXNlIDM6CgkJCXJldHVybiA2NTE3Njc5ODA7CgkJY2FzZSA0OgoJCQlyZXR1cm4gMTk5NDE0NjE5MjsKCQljYXNlIDU6CgkJCXJldHVybiAxODAyMTk1NDQ0OwoJCWNhc2UgNjoKCQkJcmV0dXJuIDEzMDM1MzU5NjA7CgkJY2FzZSA3OgoJCQlyZXR1cm4gMTM0MjUzMzk0ODsKCQljYXNlIDg6CgkJCXJldHVybiAzOTg4MjkyMzg0OwoJCWNhc2UgOToKCQkJcmV0dXJuIDQwMjc1NTI1ODA7CgkJY2FzZSAxMDoKCQkJcmV0dXJuIDM2MDQzOTA4ODg7CgkJY2FzZSAxMToKCQkJcmV0dXJuIDM0MTIxNzc4MDQ7CgkJY2FzZSAxMjoKCQkJcmV0dXJuIDI2MDcwNzE5MjA7CgkJY2FzZSAxMzoKCQkJcmV0dXJuIDIyNjIwMjkwMTI7CgkJY2FzZSAxNDoKCQkJcmV0dXJuIDI2ODUwNjc4OTY7CgkJZGVmYXVsdDoKCQkJcmV0dXJuIDMxODMzNDIxMDg7Cgl9Cn07CnZhciAkZWxtJGNvcmUkQml0d2lzZSR4b3IgPSBfQml0d2lzZV94b3I7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkQ2hlY2tzdW0kQ3JjMzIkc3RlcCA9IEYyKAoJZnVuY3Rpb24gKF9ieXRlLCBjcmMpIHsKCQl2YXIgYSA9IChjcmMgXiBfYnl0ZSkgPj4+IDA7CgkJdmFyIGIgPSAoKGEgPj4+IDQpIF4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJENoZWNrc3VtJENyYzMyJHRpbmZfY3JjMzJjYXNlKGEgJiAxNSkpID4+PiAwOwoJCXZhciBjID0gKGIgPj4+IDQpIF4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJENoZWNrc3VtJENyYzMyJHRpbmZfY3JjMzJjYXNlKGIgJiAxNSk7CgkJcmV0dXJuIGM7Cgl9KTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHN1Y2NlZWQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJERlY29kZXIoCgkJRjIoCgkJCWZ1bmN0aW9uIChfdjAsIG9mZnNldCkgewoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIob2Zmc2V0LCBhKTsKCQkJfSkpOwp9Owp2YXIgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkZ2V0V2lkdGggPSBmdW5jdGlvbiAoYnVpbGRlcikgewoJc3dpdGNoIChidWlsZGVyLiQpIHsKCQljYXNlICdJOCc6CgkJCXJldHVybiAxOwoJCWNhc2UgJ0kxNic6CgkJCXJldHVybiAyOwoJCWNhc2UgJ0kzMic6CgkJCXJldHVybiA0OwoJCWNhc2UgJ1U4JzoKCQkJcmV0dXJuIDE7CgkJY2FzZSAnVTE2JzoKCQkJcmV0dXJuIDI7CgkJY2FzZSAnVTMyJzoKCQkJcmV0dXJuIDQ7CgkJY2FzZSAnRjMyJzoKCQkJcmV0dXJuIDQ7CgkJY2FzZSAnRjY0JzoKCQkJcmV0dXJuIDg7CgkJY2FzZSAnU2VxJzoKCQkJdmFyIHcgPSBidWlsZGVyLmE7CgkJCXJldHVybiB3OwoJCWNhc2UgJ1V0ZjgnOgoJCQl2YXIgdyA9IGJ1aWxkZXIuYTsKCQkJcmV0dXJuIHc7CgkJZGVmYXVsdDoKCQkJdmFyIGJzID0gYnVpbGRlci5hOwoJCQlyZXR1cm4gX0J5dGVzX3dpZHRoKGJzKTsKCX0KfTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkTEUgPSB7JDogJ0xFJ307CnZhciAkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSR3cml0ZSA9IEYzKAoJZnVuY3Rpb24gKGJ1aWxkZXIsIG1iLCBvZmZzZXQpIHsKCQlzd2l0Y2ggKGJ1aWxkZXIuJCkgewoJCQljYXNlICdJOCc6CgkJCQl2YXIgbiA9IGJ1aWxkZXIuYTsKCQkJCXJldHVybiBBMyhfQnl0ZXNfd3JpdGVfaTgsIG1iLCBvZmZzZXQsIG4pOwoJCQljYXNlICdJMTYnOgoJCQkJdmFyIGUgPSBidWlsZGVyLmE7CgkJCQl2YXIgbiA9IGJ1aWxkZXIuYjsKCQkJCXJldHVybiBBNCgKCQkJCQlfQnl0ZXNfd3JpdGVfaTE2LAoJCQkJCW1iLAoJCQkJCW9mZnNldCwKCQkJCQluLAoJCQkJCV9VdGlsc19lcShlLCAkZWxtJGJ5dGVzJEJ5dGVzJExFKSk7CgkJCWNhc2UgJ0kzMic6CgkJCQl2YXIgZSA9IGJ1aWxkZXIuYTsKCQkJCXZhciBuID0gYnVpbGRlci5iOwoJCQkJcmV0dXJuIEE0KAoJCQkJCV9CeXRlc193cml0ZV9pMzIsCgkJCQkJbWIsCgkJCQkJb2Zmc2V0LAoJCQkJCW4sCgkJCQkJX1V0aWxzX2VxKGUsICRlbG0kYnl0ZXMkQnl0ZXMkTEUpKTsKCQkJY2FzZSAnVTgnOgoJCQkJdmFyIG4gPSBidWlsZGVyLmE7CgkJCQlyZXR1cm4gQTMoX0J5dGVzX3dyaXRlX3U4LCBtYiwgb2Zmc2V0LCBuKTsKCQkJY2FzZSAnVTE2JzoKCQkJCXZhciBlID0gYnVpbGRlci5hOwoJCQkJdmFyIG4gPSBidWlsZGVyLmI7CgkJCQlyZXR1cm4gQTQoCgkJCQkJX0J5dGVzX3dyaXRlX3UxNiwKCQkJCQltYiwKCQkJCQlvZmZzZXQsCgkJCQkJbiwKCQkJCQlfVXRpbHNfZXEoZSwgJGVsbSRieXRlcyRCeXRlcyRMRSkpOwoJCQljYXNlICdVMzInOgoJCQkJdmFyIGUgPSBidWlsZGVyLmE7CgkJCQl2YXIgbiA9IGJ1aWxkZXIuYjsKCQkJCXJldHVybiBBNCgKCQkJCQlfQnl0ZXNfd3JpdGVfdTMyLAoJCQkJCW1iLAoJCQkJCW9mZnNldCwKCQkJCQluLAoJCQkJCV9VdGlsc19lcShlLCAkZWxtJGJ5dGVzJEJ5dGVzJExFKSk7CgkJCWNhc2UgJ0YzMic6CgkJCQl2YXIgZSA9IGJ1aWxkZXIuYTsKCQkJCXZhciBuID0gYnVpbGRlci5iOwoJCQkJcmV0dXJuIEE0KAoJCQkJCV9CeXRlc193cml0ZV9mMzIsCgkJCQkJbWIsCgkJCQkJb2Zmc2V0LAoJCQkJCW4sCgkJCQkJX1V0aWxzX2VxKGUsICRlbG0kYnl0ZXMkQnl0ZXMkTEUpKTsKCQkJY2FzZSAnRjY0JzoKCQkJCXZhciBlID0gYnVpbGRlci5hOwoJCQkJdmFyIG4gPSBidWlsZGVyLmI7CgkJCQlyZXR1cm4gQTQoCgkJCQkJX0J5dGVzX3dyaXRlX2Y2NCwKCQkJCQltYiwKCQkJCQlvZmZzZXQsCgkJCQkJbiwKCQkJCQlfVXRpbHNfZXEoZSwgJGVsbSRieXRlcyRCeXRlcyRMRSkpOwoJCQljYXNlICdTZXEnOgoJCQkJdmFyIGJzID0gYnVpbGRlci5iOwoJCQkJcmV0dXJuIEEzKCRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHdyaXRlU2VxdWVuY2UsIGJzLCBtYiwgb2Zmc2V0KTsKCQkJY2FzZSAnVXRmOCc6CgkJCQl2YXIgcyA9IGJ1aWxkZXIuYjsKCQkJCXJldHVybiBBMyhfQnl0ZXNfd3JpdGVfc3RyaW5nLCBtYiwgb2Zmc2V0LCBzKTsKCQkJZGVmYXVsdDoKCQkJCXZhciBicyA9IGJ1aWxkZXIuYTsKCQkJCXJldHVybiBBMyhfQnl0ZXNfd3JpdGVfYnl0ZXMsIG1iLCBvZmZzZXQsIGJzKTsKCQl9Cgl9KTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHdyaXRlU2VxdWVuY2UgPSBGMygKCWZ1bmN0aW9uIChidWlsZGVycywgbWIsIG9mZnNldCkgewoJCXdyaXRlU2VxdWVuY2U6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFidWlsZGVycy5iKSB7CgkJCQlyZXR1cm4gb2Zmc2V0OwoJCQl9IGVsc2UgewoJCQkJdmFyIGIgPSBidWlsZGVycy5hOwoJCQkJdmFyIGJzID0gYnVpbGRlcnMuYjsKCQkJCXZhciAkdGVtcCRidWlsZGVycyA9IGJzLAoJCQkJCSR0ZW1wJG1iID0gbWIsCgkJCQkJJHRlbXAkb2Zmc2V0ID0gQTMoJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkd3JpdGUsIGIsIG1iLCBvZmZzZXQpOwoJCQkJYnVpbGRlcnMgPSAkdGVtcCRidWlsZGVyczsKCQkJCW1iID0gJHRlbXAkbWI7CgkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQljb250aW51ZSB3cml0ZVNlcXVlbmNlOwoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDMyID0gZnVuY3Rpb24gKGVuZGlhbm5lc3MpIHsKCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSREZWNvZGVyKAoJCV9CeXRlc19yZWFkX3UzMigKCQkJX1V0aWxzX2VxKGVuZGlhbm5lc3MsICRlbG0kYnl0ZXMkQnl0ZXMkTEUpKSk7Cn07CnZhciAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDggPSAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSREZWNvZGVyKF9CeXRlc19yZWFkX3U4KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRDaGVja3N1bSRDcmMzMiRjcmMzMkhlbHAgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgcmVtYWluaW5nID0gX3YwLnJlbWFpbmluZzsKCXZhciBjcmMgPSBfdjAuY3JjOwoJcmV0dXJuIChyZW1haW5pbmcgPj0gOCkgPyBBMygKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAyLAoJCUYyKAoJCQlmdW5jdGlvbiAod29yZDEsIHdvcmQyKSB7CgkJCQl2YXIgYnl0ZTggPSAyNTUgJiB3b3JkMjsKCQkJCXZhciBieXRlNyA9IDI1NSAmICh3b3JkMiA+Pj4gOCk7CgkJCQl2YXIgYnl0ZTYgPSAyNTUgJiAod29yZDIgPj4+IDE2KTsKCQkJCXZhciBieXRlNSA9IDI1NSAmICh3b3JkMiA+Pj4gMjQpOwoJCQkJdmFyIGJ5dGU0ID0gMjU1ICYgd29yZDE7CgkJCQl2YXIgYnl0ZTMgPSAyNTUgJiAod29yZDEgPj4+IDgpOwoJCQkJdmFyIGJ5dGUyID0gMjU1ICYgKHdvcmQxID4+PiAxNik7CgkJCQl2YXIgYnl0ZTEgPSAyNTUgJiAod29yZDEgPj4+IDI0KTsKCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRMb29wKAoJCQkJCXsKCQkJCQkJY3JjOiBBMigKCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRDaGVja3N1bSRDcmMzMiRzdGVwLAoJCQkJCQkJYnl0ZTgsCgkJCQkJCQlBMigKCQkJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkQ2hlY2tzdW0kQ3JjMzIkc3RlcCwKCQkJCQkJCQlieXRlNywKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJENoZWNrc3VtJENyYzMyJHN0ZXAsCgkJCQkJCQkJCWJ5dGU2LAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRDaGVja3N1bSRDcmMzMiRzdGVwLAoJCQkJCQkJCQkJYnl0ZTUsCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkQ2hlY2tzdW0kQ3JjMzIkc3RlcCwKCQkJCQkJCQkJCQlieXRlNCwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJENoZWNrc3VtJENyYzMyJHN0ZXAsCgkJCQkJCQkJCQkJCWJ5dGUzLAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRDaGVja3N1bSRDcmMzMiRzdGVwLAoJCQkJCQkJCQkJCQkJYnl0ZTIsCgkJCQkJCQkJCQkJCQlBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkQ2hlY2tzdW0kQ3JjMzIkc3RlcCwgYnl0ZTEsIGNyYykpKSkpKSkpLAoJCQkJCQlyZW1haW5pbmc6IHJlbWFpbmluZyAtIDgKCQkJCQl9KTsKCQkJfSksCgkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQzMigkZWxtJGJ5dGVzJEJ5dGVzJEJFKSwKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDMyKCRlbG0kYnl0ZXMkQnl0ZXMkQkUpKSA6ICgocmVtYWluaW5nID4gMCkgPyBBMigKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAsCgkJZnVuY3Rpb24gKF9ieXRlKSB7CgkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRMb29wKAoJCQkJewoJCQkJCWNyYzogQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJENoZWNrc3VtJENyYzMyJHN0ZXAsIF9ieXRlLCBjcmMpLAoJCQkJCXJlbWFpbmluZzogcmVtYWluaW5nIC0gMQoJCQkJfSk7CgkJfSwKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDgpIDogJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkc3VjY2VlZCgKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSREb25lKChjcmMgXiA0Mjk0OTY3Mjk1KSA+Pj4gMCkpKTsKfTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGRlY29kZSA9IEYyKAoJZnVuY3Rpb24gKF92MCwgYnMpIHsKCQl2YXIgZGVjb2RlciA9IF92MC5hOwoJCXJldHVybiBBMihfQnl0ZXNfZGVjb2RlLCBkZWNvZGVyLCBicyk7Cgl9KTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGxvb3BIZWxwID0gRjQoCglmdW5jdGlvbiAoc3RhdGUsIGNhbGxiYWNrLCBiaXRlcywgb2Zmc2V0KSB7CgkJbG9vcEhlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJdmFyIF92MCA9IGNhbGxiYWNrKHN0YXRlKTsKCQkJdmFyIGRlY29kZXIgPSBfdjAuYTsKCQkJdmFyIF92MSA9IEEyKGRlY29kZXIsIGJpdGVzLCBvZmZzZXQpOwoJCQl2YXIgbmV3T2Zmc2V0ID0gX3YxLmE7CgkJCXZhciBzdGVwID0gX3YxLmI7CgkJCWlmIChzdGVwLiQgPT09ICdMb29wJykgewoJCQkJdmFyIG5ld1N0YXRlID0gc3RlcC5hOwoJCQkJdmFyICR0ZW1wJHN0YXRlID0gbmV3U3RhdGUsCgkJCQkJJHRlbXAkY2FsbGJhY2sgPSBjYWxsYmFjaywKCQkJCQkkdGVtcCRiaXRlcyA9IGJpdGVzLAoJCQkJCSR0ZW1wJG9mZnNldCA9IG5ld09mZnNldDsKCQkJCXN0YXRlID0gJHRlbXAkc3RhdGU7CgkJCQljYWxsYmFjayA9ICR0ZW1wJGNhbGxiYWNrOwoJCQkJYml0ZXMgPSAkdGVtcCRiaXRlczsKCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCWNvbnRpbnVlIGxvb3BIZWxwOwoJCQl9IGVsc2UgewoJCQkJdmFyIHJlc3VsdCA9IHN0ZXAuYTsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKG5ld09mZnNldCwgcmVzdWx0KTsKCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbG9vcCA9IEYyKAoJZnVuY3Rpb24gKHN0YXRlLCBjYWxsYmFjaykgewoJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSREZWNvZGVyKAoJCQlBMigkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRsb29wSGVscCwgc3RhdGUsIGNhbGxiYWNrKSk7Cgl9KTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkd2lkdGggPSBfQnl0ZXNfd2lkdGg7CnZhciAkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQgPSBGMigKCWZ1bmN0aW9uIChfZGVmYXVsdCwgbWF5YmUpIHsKCQlpZiAobWF5YmUuJCA9PT0gJ0p1c3QnKSB7CgkJCXZhciB2YWx1ZSA9IG1heWJlLmE7CgkJCXJldHVybiB2YWx1ZTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gX2RlZmF1bHQ7CgkJfQoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkQ2hlY2tzdW0kQ3JjMzIkdGluZl9jcmMzMiA9IGZ1bmN0aW9uIChidWZmZXIpIHsKCXZhciBsZW5ndGggPSAkZWxtJGJ5dGVzJEJ5dGVzJHdpZHRoKGJ1ZmZlcik7Cgl2YXIgaW5pdGlhbENyYyA9IDQyOTQ5NjcyOTU7CglyZXR1cm4gKCFsZW5ndGgpID8gMCA6IEEyKAoJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkwLAoJCUEyKAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRkZWNvZGUsCgkJCUEyKAoJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbG9vcCwKCQkJCXtjcmM6IGluaXRpYWxDcmMsIHJlbWFpbmluZzogbGVuZ3RofSwKCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRDaGVja3N1bSRDcmMzMiRjcmMzMkhlbHApLAoJCQlidWZmZXIpKTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRDaGVja3N1bSRDcmMzMiRjcmMzMiA9ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRDaGVja3N1bSRDcmMzMiR0aW5mX2NyYzMyOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEZsYXRlJGNyYzMyID0gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJENoZWNrc3VtJENyYzMyJGNyYzMyOwp2YXIgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkZW5jb2RlID0gX0J5dGVzX2VuY29kZTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJFNlcSA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdTZXEnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkZ2V0V2lkdGhzID0gRjIoCglmdW5jdGlvbiAod2lkdGgsIGJ1aWxkZXJzKSB7CgkJZ2V0V2lkdGhzOgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmICghYnVpbGRlcnMuYikgewoJCQkJcmV0dXJuIHdpZHRoOwoJCQl9IGVsc2UgewoJCQkJdmFyIGIgPSBidWlsZGVycy5hOwoJCQkJdmFyIGJzID0gYnVpbGRlcnMuYjsKCQkJCXZhciAkdGVtcCR3aWR0aCA9IHdpZHRoICsgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkZ2V0V2lkdGgoYiksCgkJCQkJJHRlbXAkYnVpbGRlcnMgPSBiczsKCQkJCXdpZHRoID0gJHRlbXAkd2lkdGg7CgkJCQlidWlsZGVycyA9ICR0ZW1wJGJ1aWxkZXJzOwoJCQkJY29udGludWUgZ2V0V2lkdGhzOwoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRzZXF1ZW5jZSA9IGZ1bmN0aW9uIChidWlsZGVycykgewoJcmV0dXJuIEEyKAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJFNlcSwKCQlBMigkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRnZXRXaWR0aHMsIDAsIGJ1aWxkZXJzKSwKCQlidWlsZGVycyk7Cn07CnZhciAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkbm9CeXRlcyA9ICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJGVuY29kZSgKCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHNlcXVlbmNlKF9MaXN0X05pbCkpOwp2YXIgJGFndV96JGVsbV96aXAkWmlwJEVudHJ5JG1vbnRoVG9OdW1iZXIgPSBmdW5jdGlvbiAobW9udGgpIHsKCXN3aXRjaCAobW9udGguJCkgewoJCWNhc2UgJ0phbic6CgkJCXJldHVybiAxOwoJCWNhc2UgJ0ZlYic6CgkJCXJldHVybiAyOwoJCWNhc2UgJ01hcic6CgkJCXJldHVybiAzOwoJCWNhc2UgJ0Fwcic6CgkJCXJldHVybiA0OwoJCWNhc2UgJ01heSc6CgkJCXJldHVybiA1OwoJCWNhc2UgJ0p1bic6CgkJCXJldHVybiA2OwoJCWNhc2UgJ0p1bCc6CgkJCXJldHVybiA3OwoJCWNhc2UgJ0F1Zyc6CgkJCXJldHVybiA4OwoJCWNhc2UgJ1NlcCc6CgkJCXJldHVybiA5OwoJCWNhc2UgJ09jdCc6CgkJCXJldHVybiAxMDsKCQljYXNlICdOb3YnOgoJCQlyZXR1cm4gMTE7CgkJZGVmYXVsdDoKCQkJcmV0dXJuIDEyOwoJfQp9Owp2YXIgJGVsbSRjb3JlJEJpdHdpc2Ukb3IgPSBfQml0d2lzZV9vcjsKdmFyICRlbG0kY29yZSRCaXR3aXNlJHNoaWZ0TGVmdEJ5ID0gX0JpdHdpc2Vfc2hpZnRMZWZ0Qnk7CnZhciAkZWxtJHRpbWUkVGltZSRmbG9vcmVkRGl2ID0gRjIoCglmdW5jdGlvbiAobnVtZXJhdG9yLCBkZW5vbWluYXRvcikgewoJCXJldHVybiAkZWxtJGNvcmUkQmFzaWNzJGZsb29yKG51bWVyYXRvciAvIGRlbm9taW5hdG9yKTsKCX0pOwp2YXIgJGVsbSR0aW1lJFRpbWUkcG9zaXhUb01pbGxpcyA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBtaWxsaXMgPSBfdjAuYTsKCXJldHVybiBtaWxsaXM7Cn07CnZhciAkZWxtJHRpbWUkVGltZSR0b0FkanVzdGVkTWludXRlc0hlbHAgPSBGMygKCWZ1bmN0aW9uIChkZWZhdWx0T2Zmc2V0LCBwb3NpeE1pbnV0ZXMsIGVyYXMpIHsKCQl0b0FkanVzdGVkTWludXRlc0hlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFlcmFzLmIpIHsKCQkJCXJldHVybiBwb3NpeE1pbnV0ZXMgKyBkZWZhdWx0T2Zmc2V0OwoJCQl9IGVsc2UgewoJCQkJdmFyIGVyYSA9IGVyYXMuYTsKCQkJCXZhciBvbGRlckVyYXMgPSBlcmFzLmI7CgkJCQlpZiAoX1V0aWxzX2NtcChlcmEuc3RhcnQsIHBvc2l4TWludXRlcykgPCAwKSB7CgkJCQkJcmV0dXJuIHBvc2l4TWludXRlcyArIGVyYS5vZmZzZXQ7CgkJCQl9IGVsc2UgewoJCQkJCXZhciAkdGVtcCRkZWZhdWx0T2Zmc2V0ID0gZGVmYXVsdE9mZnNldCwKCQkJCQkJJHRlbXAkcG9zaXhNaW51dGVzID0gcG9zaXhNaW51dGVzLAoJCQkJCQkkdGVtcCRlcmFzID0gb2xkZXJFcmFzOwoJCQkJCWRlZmF1bHRPZmZzZXQgPSAkdGVtcCRkZWZhdWx0T2Zmc2V0OwoJCQkJCXBvc2l4TWludXRlcyA9ICR0ZW1wJHBvc2l4TWludXRlczsKCQkJCQllcmFzID0gJHRlbXAkZXJhczsKCQkJCQljb250aW51ZSB0b0FkanVzdGVkTWludXRlc0hlbHA7CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kdGltZSRUaW1lJHRvQWRqdXN0ZWRNaW51dGVzID0gRjIoCglmdW5jdGlvbiAoX3YwLCB0aW1lKSB7CgkJdmFyIGRlZmF1bHRPZmZzZXQgPSBfdjAuYTsKCQl2YXIgZXJhcyA9IF92MC5iOwoJCXJldHVybiBBMygKCQkJJGVsbSR0aW1lJFRpbWUkdG9BZGp1c3RlZE1pbnV0ZXNIZWxwLAoJCQlkZWZhdWx0T2Zmc2V0LAoJCQlBMigKCQkJCSRlbG0kdGltZSRUaW1lJGZsb29yZWREaXYsCgkJCQkkZWxtJHRpbWUkVGltZSRwb3NpeFRvTWlsbGlzKHRpbWUpLAoJCQkJNjAwMDApLAoJCQllcmFzKTsKCX0pOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRuZWdhdGUgPSBmdW5jdGlvbiAobikgewoJcmV0dXJuIC1uOwp9Owp2YXIgJGVsbSR0aW1lJFRpbWUkdG9DaXZpbCA9IGZ1bmN0aW9uIChtaW51dGVzKSB7Cgl2YXIgcmF3RGF5ID0gQTIoJGVsbSR0aW1lJFRpbWUkZmxvb3JlZERpdiwgbWludXRlcywgNjAgKiAyNCkgKyA3MTk0Njg7Cgl2YXIgZXJhID0gKCgocmF3RGF5ID49IDApID8gcmF3RGF5IDogKHJhd0RheSAtIDE0NjA5NikpIC8gMTQ2MDk3KSB8IDA7Cgl2YXIgZGF5T2ZFcmEgPSByYXdEYXkgLSAoZXJhICogMTQ2MDk3KTsKCXZhciB5ZWFyT2ZFcmEgPSAoKCgoZGF5T2ZFcmEgLSAoKGRheU9mRXJhIC8gMTQ2MCkgfCAwKSkgKyAoKGRheU9mRXJhIC8gMzY1MjQpIHwgMCkpIC0gKChkYXlPZkVyYSAvIDE0NjA5NikgfCAwKSkgLyAzNjUpIHwgMDsKCXZhciBkYXlPZlllYXIgPSBkYXlPZkVyYSAtICgoKDM2NSAqIHllYXJPZkVyYSkgKyAoKHllYXJPZkVyYSAvIDQpIHwgMCkpIC0gKCh5ZWFyT2ZFcmEgLyAxMDApIHwgMCkpOwoJdmFyIG1wID0gKCgoNSAqIGRheU9mWWVhcikgKyAyKSAvIDE1MykgfCAwOwoJdmFyIG1vbnRoID0gbXAgKyAoKG1wIDwgMTApID8gMyA6ICgtOSkpOwoJdmFyIHllYXIgPSB5ZWFyT2ZFcmEgKyAoZXJhICogNDAwKTsKCXJldHVybiB7CgkJZGF5OiAoZGF5T2ZZZWFyIC0gKCgoKDE1MyAqIG1wKSArIDIpIC8gNSkgfCAwKSkgKyAxLAoJCW1vbnRoOiBtb250aCwKCQl5ZWFyOiB5ZWFyICsgKChtb250aCA8PSAyKSA/IDEgOiAwKQoJfTsKfTsKdmFyICRlbG0kdGltZSRUaW1lJHRvRGF5ID0gRjIoCglmdW5jdGlvbiAoem9uZSwgdGltZSkgewoJCXJldHVybiAkZWxtJHRpbWUkVGltZSR0b0NpdmlsKAoJCQlBMigkZWxtJHRpbWUkVGltZSR0b0FkanVzdGVkTWludXRlcywgem9uZSwgdGltZSkpLmRheTsKCX0pOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRtb2RCeSA9IF9CYXNpY3NfbW9kQnk7CnZhciAkZWxtJHRpbWUkVGltZSR0b0hvdXIgPSBGMigKCWZ1bmN0aW9uICh6b25lLCB0aW1lKSB7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkQmFzaWNzJG1vZEJ5LAoJCQkyNCwKCQkJQTIoCgkJCQkkZWxtJHRpbWUkVGltZSRmbG9vcmVkRGl2LAoJCQkJQTIoJGVsbSR0aW1lJFRpbWUkdG9BZGp1c3RlZE1pbnV0ZXMsIHpvbmUsIHRpbWUpLAoJCQkJNjApKTsKCX0pOwp2YXIgJGVsbSR0aW1lJFRpbWUkdG9NaW51dGUgPSBGMigKCWZ1bmN0aW9uICh6b25lLCB0aW1lKSB7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkQmFzaWNzJG1vZEJ5LAoJCQk2MCwKCQkJQTIoJGVsbSR0aW1lJFRpbWUkdG9BZGp1c3RlZE1pbnV0ZXMsIHpvbmUsIHRpbWUpKTsKCX0pOwp2YXIgJGVsbSR0aW1lJFRpbWUkQXByID0geyQ6ICdBcHInfTsKdmFyICRlbG0kdGltZSRUaW1lJEF1ZyA9IHskOiAnQXVnJ307CnZhciAkZWxtJHRpbWUkVGltZSREZWMgPSB7JDogJ0RlYyd9Owp2YXIgJGVsbSR0aW1lJFRpbWUkRmViID0geyQ6ICdGZWInfTsKdmFyICRlbG0kdGltZSRUaW1lJEphbiA9IHskOiAnSmFuJ307CnZhciAkZWxtJHRpbWUkVGltZSRKdWwgPSB7JDogJ0p1bCd9Owp2YXIgJGVsbSR0aW1lJFRpbWUkSnVuID0geyQ6ICdKdW4nfTsKdmFyICRlbG0kdGltZSRUaW1lJE1hciA9IHskOiAnTWFyJ307CnZhciAkZWxtJHRpbWUkVGltZSRNYXkgPSB7JDogJ01heSd9Owp2YXIgJGVsbSR0aW1lJFRpbWUkTm92ID0geyQ6ICdOb3YnfTsKdmFyICRlbG0kdGltZSRUaW1lJE9jdCA9IHskOiAnT2N0J307CnZhciAkZWxtJHRpbWUkVGltZSRTZXAgPSB7JDogJ1NlcCd9Owp2YXIgJGVsbSR0aW1lJFRpbWUkdG9Nb250aCA9IEYyKAoJZnVuY3Rpb24gKHpvbmUsIHRpbWUpIHsKCQl2YXIgX3YwID0gJGVsbSR0aW1lJFRpbWUkdG9DaXZpbCgKCQkJQTIoJGVsbSR0aW1lJFRpbWUkdG9BZGp1c3RlZE1pbnV0ZXMsIHpvbmUsIHRpbWUpKS5tb250aDsKCQlzd2l0Y2ggKF92MCkgewoJCQljYXNlIDE6CgkJCQlyZXR1cm4gJGVsbSR0aW1lJFRpbWUkSmFuOwoJCQljYXNlIDI6CgkJCQlyZXR1cm4gJGVsbSR0aW1lJFRpbWUkRmViOwoJCQljYXNlIDM6CgkJCQlyZXR1cm4gJGVsbSR0aW1lJFRpbWUkTWFyOwoJCQljYXNlIDQ6CgkJCQlyZXR1cm4gJGVsbSR0aW1lJFRpbWUkQXByOwoJCQljYXNlIDU6CgkJCQlyZXR1cm4gJGVsbSR0aW1lJFRpbWUkTWF5OwoJCQljYXNlIDY6CgkJCQlyZXR1cm4gJGVsbSR0aW1lJFRpbWUkSnVuOwoJCQljYXNlIDc6CgkJCQlyZXR1cm4gJGVsbSR0aW1lJFRpbWUkSnVsOwoJCQljYXNlIDg6CgkJCQlyZXR1cm4gJGVsbSR0aW1lJFRpbWUkQXVnOwoJCQljYXNlIDk6CgkJCQlyZXR1cm4gJGVsbSR0aW1lJFRpbWUkU2VwOwoJCQljYXNlIDEwOgoJCQkJcmV0dXJuICRlbG0kdGltZSRUaW1lJE9jdDsKCQkJY2FzZSAxMToKCQkJCXJldHVybiAkZWxtJHRpbWUkVGltZSROb3Y7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gJGVsbSR0aW1lJFRpbWUkRGVjOwoJCX0KCX0pOwp2YXIgJGVsbSR0aW1lJFRpbWUkdG9TZWNvbmQgPSBGMigKCWZ1bmN0aW9uIChfdjAsIHRpbWUpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRCYXNpY3MkbW9kQnksCgkJCTYwLAoJCQlBMigKCQkJCSRlbG0kdGltZSRUaW1lJGZsb29yZWREaXYsCgkJCQkkZWxtJHRpbWUkVGltZSRwb3NpeFRvTWlsbGlzKHRpbWUpLAoJCQkJMTAwMCkpOwoJfSk7CnZhciAkZWxtJHRpbWUkVGltZSR0b1llYXIgPSBGMigKCWZ1bmN0aW9uICh6b25lLCB0aW1lKSB7CgkJcmV0dXJuICRlbG0kdGltZSRUaW1lJHRvQ2l2aWwoCgkJCUEyKCRlbG0kdGltZSRUaW1lJHRvQWRqdXN0ZWRNaW51dGVzLCB6b25lLCB0aW1lKSkueWVhcjsKCX0pOwp2YXIgJGFndV96JGVsbV96aXAkWmlwJEVudHJ5JHBvc2l4VG9Eb3MgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgem9uZSA9IF92MC5hOwoJdmFyIHRpbWUgPSBfdjAuYjsKCXZhciB5ZWFyID0gKEEyKCRlbG0kdGltZSRUaW1lJHRvWWVhciwgem9uZSwgdGltZSkgLSAxOTgwKSA8PCAyNTsKCXZhciBzZWNvbmQgPSAoQTIoJGVsbSR0aW1lJFRpbWUkdG9TZWNvbmQsIHpvbmUsIHRpbWUpIC8gMikgfCAwOwoJdmFyIG1vbnRoID0gJGFndV96JGVsbV96aXAkWmlwJEVudHJ5JG1vbnRoVG9OdW1iZXIoCgkJQTIoJGVsbSR0aW1lJFRpbWUkdG9Nb250aCwgem9uZSwgdGltZSkpIDw8IDIxOwoJdmFyIG1pbnV0ZSA9IEEyKCRlbG0kdGltZSRUaW1lJHRvTWludXRlLCB6b25lLCB0aW1lKSA8PCA1OwoJdmFyIGhvdXIgPSBBMigkZWxtJHRpbWUkVGltZSR0b0hvdXIsIHpvbmUsIHRpbWUpIDw8IDExOwoJdmFyIGRheSA9IEEyKCRlbG0kdGltZSRUaW1lJHRvRGF5LCB6b25lLCB0aW1lKSA8PCAxNjsKCXJldHVybiBzZWNvbmQgfCAobWludXRlIHwgKGhvdXIgfCAoZGF5IHwgKG1vbnRoIHwgeWVhcikpKSk7Cn07CnZhciAkYWd1X3okZWxtX3ppcCRaaXAkRW50cnkkZW50cnlNZXRhID0gZnVuY3Rpb24gKG1ldGEpIHsKCXJldHVybiB7CgkJY29tbWVudDogQTIoJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LCAnJywgbWV0YS5jb21tZW50KSwKCQljb21wcmVzc2VkU2l6ZTogMCwKCQljb21wcmVzc2lvbk1ldGhvZDogJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRm9ybWF0JFN0b3JlZCwKCQljcmMzMjogMCwKCQlleHRlcm5hbEF0dHJpYnV0ZXM6IDAsCgkJZXh0cmFGaWVsZDogJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRW5jb2RlJG5vQnl0ZXMsCgkJZXh0cmFjdE1pblZlcnNpb246IDIwLAoJCWZpbGVOYW1lOiBtZXRhLnBhdGgsCgkJZmxhZzogMCwKCQlpbnRlcm5hbEF0dHJpYnV0ZXM6IDAsCgkJbGFzdE1vZGlmaWVkOiAkYWd1X3okZWxtX3ppcCRaaXAkRW50cnkkcG9zaXhUb0RvcyhtZXRhLmxhc3RNb2RpZmllZCksCgkJbWFkZUJ5OiA3OTgsCgkJdW5jb21wcmVzc2VkU2l6ZTogMAoJfTsKfTsKdmFyICRhZ3VfeiRlbG1femlwJFppcCRFbnRyeSR1bml4TW9kZSA9ICRlbG0kY29yZSRCaXR3aXNlJHNoaWZ0TGVmdEJ5KDE2KTsKdmFyICRhZ3VfeiRlbG1femlwJFppcCRFbnRyeSRmaWxlTW9kZSA9ICRhZ3VfeiRlbG1femlwJFppcCRFbnRyeSR1bml4TW9kZSgzMzIwNCk7CnZhciAkYWd1X3okZWxtX3ppcCRaaXAkRW50cnkkc3RvcmUgPSBGMigKCWZ1bmN0aW9uIChtZXRhLCBkYXRhKSB7CgkJdmFyIGJhc2UgPSAkYWd1X3okZWxtX3ppcCRaaXAkRW50cnkkZW50cnlNZXRhKG1ldGEpOwoJCXJldHVybiBBMigKCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRm9ybWF0JEVudHJ5LAoJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRGb3JtYXQkRXhhY3RseShkYXRhKSwKCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCWJhc2UsCgkJCQl7CgkJCQkJY29tcHJlc3NlZFNpemU6ICRlbG0kYnl0ZXMkQnl0ZXMkd2lkdGgoZGF0YSksCgkJCQkJY29tcHJlc3Npb25NZXRob2Q6ICRhZ3VfeiRlbG1femlwJEludGVybmFsJEZvcm1hdCRTdG9yZWQsCgkJCQkJY3JjMzI6ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRGbGF0ZSRjcmMzMihkYXRhKSwKCQkJCQlleHRlcm5hbEF0dHJpYnV0ZXM6ICRhZ3VfeiRlbG1femlwJFppcCRFbnRyeSRmaWxlTW9kZSwKCQkJCQlsYXN0TW9kaWZpZWQ6ICRhZ3VfeiRlbG1femlwJFppcCRFbnRyeSRwb3NpeFRvRG9zKG1ldGEubGFzdE1vZGlmaWVkKSwKCQkJCQl1bmNvbXByZXNzZWRTaXplOiAkZWxtJGJ5dGVzJEJ5dGVzJHdpZHRoKGRhdGEpCgkJCQl9KSk7Cgl9KTsKdmFyICRlbG0kdGltZSRUaW1lJHV0YyA9IEEyKCRlbG0kdGltZSRUaW1lJFpvbmUsIDAsIF9MaXN0X05pbCk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRidWlsZFppcEFyY2hpdmVGcm9tRmlsZVRyZWUgPSBBMigKCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkZmxhdExpc3RPZkJsb2JzRnJvbUZpbGVUcmVlTm9kZSwKCUEyKAoJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJJGVsbSRjb3JlJExpc3QkbWFwKAoJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQl2YXIgcGF0aCA9IF92MC5hOwoJCQkJdmFyIGJsb2JDb250ZW50ID0gX3YwLmI7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGFndV96JGVsbV96aXAkWmlwJEVudHJ5JHN0b3JlLAoJCQkJCXsKCQkJCQkJY29tbWVudDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsCgkJCQkJCWxhc3RNb2RpZmllZDogX1V0aWxzX1R1cGxlMigKCQkJCQkJCSRlbG0kdGltZSRUaW1lJHV0YywKCQkJCQkJCSRlbG0kdGltZSRUaW1lJG1pbGxpc1RvUG9zaXgoMCkpLAoJCQkJCQlwYXRoOiBBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcvJywgcGF0aCkKCQkJCQl9LAoJCQkJCWJsb2JDb250ZW50LmFzQnl0ZXMpOwoJCQl9KSwKCQkkYWd1X3okZWxtX3ppcCRaaXAkZnJvbUVudHJpZXMpKTsKdmFyICRlbG0kZmlsZSRGaWxlJERvd25sb2FkJGJ5dGVzID0gRjMoCglmdW5jdGlvbiAobmFtZSwgbWltZSwgY29udGVudCkgewoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJFRhc2skcGVyZm9ybSwKCQkJJGVsbSRjb3JlJEJhc2ljcyRuZXZlciwKCQkJQTMoCgkJCQlfRmlsZV9kb3dubG9hZCwKCQkJCW5hbWUsCgkJCQltaW1lLAoJCQkJX0ZpbGVfbWFrZUJ5dGVzU2FmZUZvckludGVybmV0RXhwbG9yZXIoY29udGVudCkpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JFBpbmUkQmxvYlZhbHVlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0Jsb2JWYWx1ZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JFBpbmUkTGlzdFZhbHVlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xpc3RWYWx1ZScsIGE6IGF9Owp9Owp2YXIgJFRTRm9zdGVyJGVsbV9ieXRlc19leHRyYSRCeXRlcyREZWNvZGUkRXh0cmEkbGlzdFN0ZXAgPSBGMigKCWZ1bmN0aW9uIChlbGVtZW50RGVjb2RlciwgX3YwKSB7CgkJdmFyIG4gPSBfdjAuYTsKCQl2YXIgZWxlbWVudHMgPSBfdjAuYjsKCQlyZXR1cm4gKG4gPD0gMCkgPyAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRzdWNjZWVkKAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSREb25lKAoJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShlbGVtZW50cykpKSA6IEEyKAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAsCgkJCWZ1bmN0aW9uIChlbGVtZW50KSB7CgkJCQlyZXR1cm4gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkTG9vcCgKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQluIC0gMSwKCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZWxlbWVudCwgZWxlbWVudHMpKSk7CgkJCX0sCgkJCWVsZW1lbnREZWNvZGVyKTsKCX0pOwp2YXIgJFRTRm9zdGVyJGVsbV9ieXRlc19leHRyYSRCeXRlcyREZWNvZGUkRXh0cmEkbGlzdCA9IEYyKAoJZnVuY3Rpb24gKGxlbmd0aCwgYURlY29kZXIpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGxvb3AsCgkJCV9VdGlsc19UdXBsZTIobGVuZ3RoLCBfTGlzdF9OaWwpLAoJCQkkVFNGb3N0ZXIkZWxtX2J5dGVzX2V4dHJhJEJ5dGVzJERlY29kZSRFeHRyYSRsaXN0U3RlcChhRGVjb2RlcikpOwoJfSk7CnZhciAkVFNGb3N0ZXIkZWxtX2J5dGVzX2V4dHJhJEJ5dGVzJERlY29kZSRFeHRyYSRieXRlVmFsdWVzID0gZnVuY3Rpb24gKGxlbmd0aCkgewoJcmV0dXJuIEEyKCRUU0Zvc3RlciRlbG1fYnl0ZXNfZXh0cmEkQnl0ZXMkRGVjb2RlJEV4dHJhJGxpc3QsIGxlbmd0aCwgJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQ4KTsKfTsKdmFyICRUU0Zvc3RlciRlbG1fYnl0ZXNfZXh0cmEkQnl0ZXMkRXh0cmEkdG9CeXRlVmFsdWVzID0gZnVuY3Rpb24gKGJ5dGVzKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCV9MaXN0X05pbCwKCQlBMigKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkZGVjb2RlLAoJCQkkVFNGb3N0ZXIkZWxtX2J5dGVzX2V4dHJhJEJ5dGVzJERlY29kZSRFeHRyYSRieXRlVmFsdWVzKAoJCQkJJGVsbSRieXRlcyRCeXRlcyR3aWR0aChieXRlcykpLAoJCQlieXRlcykpOwp9Owp2YXIgJGVsbSRjb3JlJFN0cmluZyRmb2xkciA9IF9TdHJpbmdfZm9sZHI7CnZhciAkZWxtJGNvcmUkU3RyaW5nJHRvTGlzdCA9IGZ1bmN0aW9uIChzdHJpbmcpIHsKCXJldHVybiBBMygkZWxtJGNvcmUkU3RyaW5nJGZvbGRyLCAkZWxtJGNvcmUkTGlzdCRjb25zLCBfTGlzdF9OaWwsIHN0cmluZyk7Cn07CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRCaWdJbnROb3ROb3JtYWxpc2VkID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0JpZ0ludE5vdE5vcm1hbGlzZWQnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkTWFnbml0dWRlTm90Tm9ybWFsaXNlZCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdNYWduaXR1ZGVOb3ROb3JtYWxpc2VkJywgYTogYX07Cn07CnZhciAkZWxtJGNvcmUkQmFzaWNzJGFicyA9IGZ1bmN0aW9uIChuKSB7CglyZXR1cm4gKG4gPCAwKSA/ICgtbikgOiBuOwp9Owp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkTWFnbml0dWRlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ01hZ25pdHVkZScsIGE6IGF9Owp9Owp2YXIgJGVsbV9jb21tdW5pdHkkbGlzdF9leHRyYSRMaXN0JEV4dHJhJGxhc3QgPSBmdW5jdGlvbiAoaXRlbXMpIHsKCWxhc3Q6Cgl3aGlsZSAodHJ1ZSkgewoJCWlmICghaXRlbXMuYikgewoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJfSBlbHNlIHsKCQkJaWYgKCFpdGVtcy5iLmIpIHsKCQkJCXZhciB4ID0gaXRlbXMuYTsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCh4KTsKCQkJfSBlbHNlIHsKCQkJCXZhciByZXN0ID0gaXRlbXMuYjsKCQkJCXZhciAkdGVtcCRpdGVtcyA9IHJlc3Q7CgkJCQlpdGVtcyA9ICR0ZW1wJGl0ZW1zOwoJCQkJY29udGludWUgbGFzdDsKCQkJfQoJCX0KCX0KfTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGlzTmVnYXRpdmVNYWduaXR1ZGUgPSBmdW5jdGlvbiAoZGlnaXRzKSB7Cgl2YXIgX3YwID0gJGVsbV9jb21tdW5pdHkkbGlzdF9leHRyYSRMaXN0JEV4dHJhJGxhc3QoZGlnaXRzKTsKCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJcmV0dXJuIGZhbHNlOwoJfSBlbHNlIHsKCQl2YXIgeCA9IF92MC5hOwoJCXJldHVybiB4IDwgMDsKCX0KfTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JE5lZyA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdOZWcnLCBhOiBhfTsKfTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JFBvcyA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQb3MnLCBhOiBhfTsKfTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JFplciA9IHskOiAnWmVyJ307CnZhciAkZWxtJGNvcmUkTGlzdCRpc0VtcHR5ID0gZnVuY3Rpb24gKHhzKSB7CglpZiAoIXhzLmIpIHsKCQlyZXR1cm4gdHJ1ZTsKCX0gZWxzZSB7CgkJcmV0dXJuIGZhbHNlOwoJfQp9Owp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbWtCaWdJbnQgPSBGMigKCWZ1bmN0aW9uIChzLCBtYWcpIHsKCQl2YXIgZGlnaXRzID0gbWFnLmE7CgkJaWYgKCRlbG0kY29yZSRMaXN0JGlzRW1wdHkoZGlnaXRzKSkgewoJCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkWmVyOwoJCX0gZWxzZSB7CgkJCXN3aXRjaCAocy4kKSB7CgkJCQljYXNlICdaZXJvJzoKCQkJCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkWmVyOwoJCQkJY2FzZSAnUG9zaXRpdmUnOgoJCQkJCXJldHVybiAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRQb3MobWFnKTsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JE5lZyhtYWcpOwoJCQl9CgkJfQoJfSk7CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRta0JpZ0ludE5vdE5vcm1hbGlzZWQgPSBGMigKCWZ1bmN0aW9uIChzLCBkaWdpdHMpIHsKCQlyZXR1cm4gQTIoCgkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JEJpZ0ludE5vdE5vcm1hbGlzZWQsCgkJCXMsCgkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JE1hZ25pdHVkZU5vdE5vcm1hbGlzZWQoZGlnaXRzKSk7Cgl9KTsKdmFyICRlbG1fY29tbXVuaXR5JGxpc3RfZXh0cmEkTGlzdCRFeHRyYSRkcm9wV2hpbGVSaWdodCA9IGZ1bmN0aW9uIChwKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJExpc3QkZm9sZHIsCgkJRjIoCgkJCWZ1bmN0aW9uICh4LCB4cykgewoJCQkJcmV0dXJuIChwKHgpICYmICRlbG0kY29yZSRMaXN0JGlzRW1wdHkoeHMpKSA/IF9MaXN0X05pbCA6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHgsIHhzKTsKCQkJfSksCgkJX0xpc3RfTmlsKTsKfTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGRyb3BaZXJvZXMgPSAkZWxtX2NvbW11bml0eSRsaXN0X2V4dHJhJExpc3QkRXh0cmEkZHJvcFdoaWxlUmlnaHQoCgkkZWxtJGNvcmUkQmFzaWNzJGVxKDApKTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQ29uc3RhbnRzJG1heERpZ2l0TWFnbml0dWRlID0gNzsKdmFyICRlbG0kY29yZSRCYXNpY3MkcG93ID0gX0Jhc2ljc19wb3c7CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JENvbnN0YW50cyRtYXhEaWdpdFZhbHVlID0gKC0xKSArIEEyKCRlbG0kY29yZSRCYXNpY3MkcG93LCAxMCwgJGNtZGl0Y2gkZWxtX2JpZ2ludCRDb25zdGFudHMkbWF4RGlnaXRNYWduaXR1ZGUpOwp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkYmFzZURpZ2l0ID0gJGNtZGl0Y2gkZWxtX2JpZ2ludCRDb25zdGFudHMkbWF4RGlnaXRWYWx1ZSArIDE7CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRub3JtYWxpc2VEaWdpdCA9IGZ1bmN0aW9uICh4KSB7CglyZXR1cm4gKHggPCAwKSA/IEEyKAoJCSRlbG0kY29yZSRUdXBsZSRtYXBGaXJzdCwKCQkkZWxtJGNvcmUkQmFzaWNzJGFkZCgtMSksCgkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbm9ybWFsaXNlRGlnaXQoeCArICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGJhc2VEaWdpdCkpIDogX1V0aWxzX1R1cGxlMigoeCAvICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGJhc2VEaWdpdCkgfCAwLCB4ICUgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkYmFzZURpZ2l0KTsKfTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG5vcm1hbGlzZURpZ2l0TGlzdCA9IEYyKAoJZnVuY3Rpb24gKGNhcnJ5LCB4cykgewoJCW5vcm1hbGlzZURpZ2l0TGlzdDoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIXhzLmIpIHsKCQkJCWlmIChfVXRpbHNfY21wKGNhcnJ5LCAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRiYXNlRGlnaXQpID4gMCkgewoJCQkJCXZhciAkdGVtcCRjYXJyeSA9IDAsCgkJCQkJCSR0ZW1wJHhzID0gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbY2FycnldKTsKCQkJCQljYXJyeSA9ICR0ZW1wJGNhcnJ5OwoJCQkJCXhzID0gJHRlbXAkeHM7CgkJCQkJY29udGludWUgbm9ybWFsaXNlRGlnaXRMaXN0OwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbY2FycnldKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXZhciB4ID0geHMuYTsKCQkJCXZhciB4c18gPSB4cy5iOwoJCQkJdmFyIF92MSA9ICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG5vcm1hbGlzZURpZ2l0KHggKyBjYXJyeSk7CgkJCQl2YXIgbmV3Q2FycnkgPSBfdjEuYTsKCQkJCXZhciB4XyA9IF92MS5iOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJeF8sCgkJCQkJQTIoJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbm9ybWFsaXNlRGlnaXRMaXN0LCBuZXdDYXJyeSwgeHNfKSk7CgkJCX0KCQl9Cgl9KTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG5vcm1hbGlzZU1hZ25pdHVkZSA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciB4cyA9IF92MC5hOwoJcmV0dXJuICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JE1hZ25pdHVkZSgKCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRkcm9wWmVyb2VzKAoJCQlBMigkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRub3JtYWxpc2VEaWdpdExpc3QsIDAsIHhzKSkpOwp9Owp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkcmV2ZXJzZU1hZ25pdHVkZSA9ICRlbG0kY29yZSRMaXN0JG1hcCgkZWxtJGNvcmUkQmFzaWNzJG5lZ2F0ZSk7CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCROZWdhdGl2ZSA9IHskOiAnTmVnYXRpdmUnfTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JFBvc2l0aXZlID0geyQ6ICdQb3NpdGl2ZSd9Owp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkWmVybyA9IHskOiAnWmVybyd9Owp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkc2lnbk5lZ2F0ZSA9IGZ1bmN0aW9uIChzaWduXykgewoJc3dpdGNoIChzaWduXy4kKSB7CgkJY2FzZSAnUG9zaXRpdmUnOgoJCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkTmVnYXRpdmU7CgkJY2FzZSAnTmVnYXRpdmUnOgoJCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkUG9zaXRpdmU7CgkJZGVmYXVsdDoKCQkJcmV0dXJuICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JFplcm87Cgl9Cn07CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRub3JtYWxpc2UgPSBmdW5jdGlvbiAoX3YwKSB7Cglub3JtYWxpc2U6Cgl3aGlsZSAodHJ1ZSkgewoJCXZhciBzID0gX3YwLmE7CgkJdmFyIGRpZ2l0cyA9IF92MC5iOwoJCXZhciBfdjEgPSAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRub3JtYWxpc2VNYWduaXR1ZGUoZGlnaXRzKTsKCQl2YXIgbm9ybWFsaXNlZE1hZyA9IF92MS5hOwoJCWlmICgkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRpc05lZ2F0aXZlTWFnbml0dWRlKG5vcm1hbGlzZWRNYWcpKSB7CgkJCXZhciAkdGVtcCRfdjAgPSBBMigKCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG1rQmlnSW50Tm90Tm9ybWFsaXNlZCwKCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JHNpZ25OZWdhdGUocyksCgkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRyZXZlcnNlTWFnbml0dWRlKG5vcm1hbGlzZWRNYWcpKTsKCQkJX3YwID0gJHRlbXAkX3YwOwoJCQljb250aW51ZSBub3JtYWxpc2U7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIEEyKAoJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbWtCaWdJbnQsCgkJCQlzLAoJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkTWFnbml0dWRlKG5vcm1hbGlzZWRNYWcpKTsKCQl9Cgl9Cn07CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRzaWduRnJvbUludCA9IGZ1bmN0aW9uICh4KSB7Cgl2YXIgX3YwID0gQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wYXJlLCB4LCAwKTsKCXN3aXRjaCAoX3YwLiQpIHsKCQljYXNlICdMVCc6CgkJCXJldHVybiAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCROZWdhdGl2ZTsKCQljYXNlICdHVCc6CgkJCXJldHVybiAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRQb3NpdGl2ZTsKCQlkZWZhdWx0OgoJCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkWmVybzsKCX0KfTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGZyb21JbnQgPSBmdW5jdGlvbiAoeCkgewoJcmV0dXJuICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG5vcm1hbGlzZSgKCQlBMigKCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkQmlnSW50Tm90Tm9ybWFsaXNlZCwKCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkc2lnbkZyb21JbnQoeCksCgkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JE1hZ25pdHVkZU5vdE5vcm1hbGlzZWQoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGFicyh4KQoJCQkJCV0pKSkpOwp9Owp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkYWJzID0gZnVuY3Rpb24gKGJpZ0ludCkgewoJc3dpdGNoIChiaWdJbnQuJCkgewoJCWNhc2UgJ1plcic6CgkJCXJldHVybiAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRaZXI7CgkJY2FzZSAnTmVnJzoKCQkJdmFyIG1hZyA9IGJpZ0ludC5hOwoJCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkUG9zKG1hZyk7CgkJZGVmYXVsdDoKCQkJdmFyIGkgPSBiaWdJbnQ7CgkJCXJldHVybiBpOwoJfQp9Owp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkTWFnbml0dWRlUGFpciA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdNYWduaXR1ZGVQYWlyJywgYTogYX07Cn07CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRzYW1lU2l6ZVJhdyA9IEYyKAoJZnVuY3Rpb24gKHhzLCB5cykgewoJCXZhciBfdjAgPSBfVXRpbHNfVHVwbGUyKHhzLCB5cyk7CgkJaWYgKCFfdjAuYS5iKSB7CgkJCWlmICghX3YwLmIuYikgewoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJfSBlbHNlIHsKCQkJCXZhciBfdjIgPSBfdjAuYjsKCQkJCXZhciB5ID0gX3YyLmE7CgkJCQl2YXIgeXNfID0gX3YyLmI7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQlfVXRpbHNfVHVwbGUyKDAsIHkpLAoJCQkJCUEyKCRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JHNhbWVTaXplUmF3LCBfTGlzdF9OaWwsIHlzXykpOwoJCQl9CgkJfSBlbHNlIHsKCQkJaWYgKCFfdjAuYi5iKSB7CgkJCQl2YXIgX3YxID0gX3YwLmE7CgkJCQl2YXIgeCA9IF92MS5hOwoJCQkJdmFyIHhzXyA9IF92MS5iOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJX1V0aWxzX1R1cGxlMih4LCAwKSwKCQkJCQlBMigkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRzYW1lU2l6ZVJhdywgeHNfLCBfTGlzdF9OaWwpKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBfdjMgPSBfdjAuYTsKCQkJCXZhciB4ID0gX3YzLmE7CgkJCQl2YXIgeHNfID0gX3YzLmI7CgkJCQl2YXIgX3Y0ID0gX3YwLmI7CgkJCQl2YXIgeSA9IF92NC5hOwoJCQkJdmFyIHlzXyA9IF92NC5iOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJX1V0aWxzX1R1cGxlMih4LCB5KSwKCQkJCQlBMigkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRzYW1lU2l6ZVJhdywgeHNfLCB5c18pKTsKCQkJfQoJCX0KCX0pOwp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkc2FtZVNpemVOb3ROb3JtYWxpemVkID0gRjIoCglmdW5jdGlvbiAoX3YwLCBfdjEpIHsKCQl2YXIgeHMgPSBfdjAuYTsKCQl2YXIgeXMgPSBfdjEuYTsKCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkTWFnbml0dWRlUGFpcigKCQkJQTIoJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkc2FtZVNpemVSYXcsIHhzLCB5cykpOwoJfSk7CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCR0b1Bvc2l0aXZlU2lnbiA9IGZ1bmN0aW9uIChiaWdJbnQpIHsKCXN3aXRjaCAoYmlnSW50LiQpIHsKCQljYXNlICdaZXInOgoJCQlyZXR1cm4gQTIoJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbWtCaWdJbnROb3ROb3JtYWxpc2VkLCAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRaZXJvLCBfTGlzdF9OaWwpOwoJCWNhc2UgJ05lZyc6CgkJCXZhciBkaWdpdHMgPSBiaWdJbnQuYS5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRta0JpZ0ludE5vdE5vcm1hbGlzZWQsCgkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRQb3NpdGl2ZSwKCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JHJldmVyc2VNYWduaXR1ZGUoZGlnaXRzKSk7CgkJZGVmYXVsdDoKCQkJdmFyIGRpZ2l0cyA9IGJpZ0ludC5hLmE7CgkJCXJldHVybiBBMigkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRta0JpZ0ludE5vdE5vcm1hbGlzZWQsICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JFBvc2l0aXZlLCBkaWdpdHMpOwoJfQp9Owp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkYWRkID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXZhciBfdjAgPSAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCR0b1Bvc2l0aXZlU2lnbihiKTsKCQl2YXIgbWIgPSBfdjAuYjsKCQl2YXIgX3YxID0gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkdG9Qb3NpdGl2ZVNpZ24oYSk7CgkJdmFyIG1hID0gX3YxLmI7CgkJdmFyIF92MiA9IEEyKCRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JHNhbWVTaXplTm90Tm9ybWFsaXplZCwgbWEsIG1iKTsKCQl2YXIgcGFpcnMgPSBfdjIuYTsKCQl2YXIgYWRkZWQgPSBBMigKCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQlmdW5jdGlvbiAoX3YzKSB7CgkJCQl2YXIgYV8gPSBfdjMuYTsKCQkJCXZhciBiXyA9IF92My5iOwoJCQkJcmV0dXJuIGFfICsgYl87CgkJCX0sCgkJCXBhaXJzKTsKCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbm9ybWFsaXNlKAoJCQlBMigKCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JEJpZ0ludE5vdE5vcm1hbGlzZWQsCgkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRQb3NpdGl2ZSwKCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JE1hZ25pdHVkZU5vdE5vcm1hbGlzZWQoYWRkZWQpKSk7Cgl9KTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGNvbXBhcmVNYWduaXR1ZGUgPSBGNCgKCWZ1bmN0aW9uICh4LCB5LCB4cywgeXMpIHsKCQljb21wYXJlTWFnbml0dWRlOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBfdjAgPSBfVXRpbHNfVHVwbGUyKHhzLCB5cyk7CgkJCWlmICghX3YwLmEuYikgewoJCQkJaWYgKCFfdjAuYi5iKSB7CgkJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRCYXNpY3MkY29tcGFyZSwgeCwgeSk7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkQmFzaWNzJExUOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJaWYgKCFfdjAuYi5iKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRCYXNpY3MkR1Q7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfdjEgPSBfdjAuYTsKCQkJCQl2YXIgeF8gPSBfdjEuYTsKCQkJCQl2YXIgeHNzID0gX3YxLmI7CgkJCQkJdmFyIF92MiA9IF92MC5iOwoJCQkJCXZhciB5XyA9IF92Mi5hOwoJCQkJCXZhciB5c3MgPSBfdjIuYjsKCQkJCQlpZiAoX1V0aWxzX2VxKHhfLCB5XykpIHsKCQkJCQkJdmFyICR0ZW1wJHggPSB4LAoJCQkJCQkJJHRlbXAkeSA9IHksCgkJCQkJCQkkdGVtcCR4cyA9IHhzcywKCQkJCQkJCSR0ZW1wJHlzID0geXNzOwoJCQkJCQl4ID0gJHRlbXAkeDsKCQkJCQkJeSA9ICR0ZW1wJHk7CgkJCQkJCXhzID0gJHRlbXAkeHM7CgkJCQkJCXlzID0gJHRlbXAkeXM7CgkJCQkJCWNvbnRpbnVlIGNvbXBhcmVNYWduaXR1ZGU7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyICR0ZW1wJHggPSB4XywKCQkJCQkJCSR0ZW1wJHkgPSB5XywKCQkJCQkJCSR0ZW1wJHhzID0geHNzLAoJCQkJCQkJJHRlbXAkeXMgPSB5c3M7CgkJCQkJCXggPSAkdGVtcCR4OwoJCQkJCQl5ID0gJHRlbXAkeTsKCQkJCQkJeHMgPSAkdGVtcCR4czsKCQkJCQkJeXMgPSAkdGVtcCR5czsKCQkJCQkJY29udGludWUgY29tcGFyZU1hZ25pdHVkZTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG9yZGVyTmVnYXRlID0gZnVuY3Rpb24gKHgpIHsKCXN3aXRjaCAoeC4kKSB7CgkJY2FzZSAnTFQnOgoJCQlyZXR1cm4gJGVsbSRjb3JlJEJhc2ljcyRHVDsKCQljYXNlICdFUSc6CgkJCXJldHVybiAkZWxtJGNvcmUkQmFzaWNzJEVROwoJCWRlZmF1bHQ6CgkJCXJldHVybiAkZWxtJGNvcmUkQmFzaWNzJExUOwoJfQp9Owp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkY29tcGFyZSA9IEYyKAoJZnVuY3Rpb24gKGludDEsIGludDIpIHsKCQl2YXIgX3YwID0gX1V0aWxzX1R1cGxlMihpbnQxLCBpbnQyKTsKCQlzd2l0Y2ggKF92MC5hLiQpIHsKCQkJY2FzZSAnUG9zJzoKCQkJCWlmIChfdjAuYi4kID09PSAnUG9zJykgewoJCQkJCXZhciBtYWcxID0gX3YwLmEuYS5hOwoJCQkJCXZhciBtYWcyID0gX3YwLmIuYS5hOwoJCQkJCXJldHVybiBBNCgkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRjb21wYXJlTWFnbml0dWRlLCAwLCAwLCBtYWcxLCBtYWcyKTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRCYXNpY3MkR1Q7CgkJCQl9CgkJCWNhc2UgJ05lZyc6CgkJCQlpZiAoX3YwLmIuJCA9PT0gJ05lZycpIHsKCQkJCQl2YXIgbWFnMSA9IF92MC5hLmEuYTsKCQkJCQl2YXIgbWFnMiA9IF92MC5iLmEuYTsKCQkJCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkb3JkZXJOZWdhdGUoCgkJCQkJCUE0KCRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGNvbXBhcmVNYWduaXR1ZGUsIDAsIDAsIG1hZzEsIG1hZzIpKTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRCYXNpY3MkTFQ7CgkJCQl9CgkJCWRlZmF1bHQ6CgkJCQlzd2l0Y2ggKF92MC5iLiQpIHsKCQkJCQljYXNlICdQb3MnOgoJCQkJCQl2YXIgX3YxID0gX3YwLmE7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkQmFzaWNzJExUOwoJCQkJCWNhc2UgJ1plcic6CgkJCQkJCXZhciBfdjIgPSBfdjAuYTsKCQkJCQkJdmFyIF92MyA9IF92MC5iOwoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJEJhc2ljcyRFUTsKCQkJCQlkZWZhdWx0OgoJCQkJCQl2YXIgX3Y0ID0gX3YwLmE7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkQmFzaWNzJEdUOwoJCQkJfQoJCX0KCX0pOwp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkZ3QgPSBGMigKCWZ1bmN0aW9uICh4LCB5KSB7CgkJcmV0dXJuIF9VdGlsc19lcSgKCQkJQTIoJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkY29tcGFyZSwgeCwgeSksCgkJCSRlbG0kY29yZSRCYXNpY3MkR1QpOwoJfSk7CnZhciAkZWxtJGNvcmUkQmFzaWNzJG5vdCA9IF9CYXNpY3Nfbm90Owp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbHRlID0gRjIoCglmdW5jdGlvbiAoeCwgeSkgewoJCXJldHVybiAhQTIoJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkZ3QsIHgsIHkpOwoJfSk7CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRtYWduaXR1ZGUgPSBmdW5jdGlvbiAoYmlnSW50KSB7Cglzd2l0Y2ggKGJpZ0ludC4kKSB7CgkJY2FzZSAnWmVyJzoKCQkJcmV0dXJuICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JE1hZ25pdHVkZShfTGlzdF9OaWwpOwoJCWNhc2UgJ1Bvcyc6CgkJCXZhciBtYWcgPSBiaWdJbnQuYTsKCQkJcmV0dXJuIG1hZzsKCQlkZWZhdWx0OgoJCQl2YXIgbWFnID0gYmlnSW50LmE7CgkJCXJldHVybiBtYWc7Cgl9Cn07CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRtdWxTaW5nbGVEaWdpdCA9IEYyKAoJZnVuY3Rpb24gKF92MCwgZCkgewoJCXZhciB4cyA9IF92MC5hOwoJCXJldHVybiAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRub3JtYWxpc2VNYWduaXR1ZGUoCgkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JE1hZ25pdHVkZU5vdE5vcm1hbGlzZWQoCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRtdWwoZCksCgkJCQkJeHMpKSk7Cgl9KTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG11bE1hZ25pdHVkZXMgPSBGMigKCWZ1bmN0aW9uIChfdjAsIF92MSkgewoJCXZhciBtYWcxID0gX3YwLmE7CgkJdmFyIG1hZzIgPSBfdjEuYTsKCQlpZiAoIW1hZzEuYikgewoJCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkTWFnbml0dWRlKF9MaXN0X05pbCk7CgkJfSBlbHNlIHsKCQkJaWYgKCFtYWcxLmIuYikgewoJCQkJdmFyIG0gPSBtYWcxLmE7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbXVsU2luZ2xlRGlnaXQsCgkJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkTWFnbml0dWRlKG1hZzIpLAoJCQkJCW0pOwoJCQl9IGVsc2UgewoJCQkJdmFyIG0gPSBtYWcxLmE7CgkJCQl2YXIgbXggPSBtYWcxLmI7CgkJCQl2YXIgYWNjdW0gPSBBMigKCQkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRtdWxTaW5nbGVEaWdpdCwKCQkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRNYWduaXR1ZGUobWFnMiksCgkJCQkJbSk7CgkJCQl2YXIgX3YzID0gQTIoCgkJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbXVsTWFnbml0dWRlcywKCQkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRNYWduaXR1ZGUobXgpLAoJCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JE1hZ25pdHVkZShtYWcyKSk7CgkJCQl2YXIgcmVzdCA9IF92My5hOwoJCQkJdmFyIGJpZ0ludCA9IEEyKAoJCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGFkZCwKCQkJCQlBMigkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRta0JpZ0ludCwgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkUG9zaXRpdmUsIGFjY3VtKSwKCQkJCQlBMigKCQkJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbWtCaWdJbnQsCgkJCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JFBvc2l0aXZlLAoJCQkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRNYWduaXR1ZGUoCgkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCAwLCByZXN0KSkpKTsKCQkJCXJldHVybiAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRtYWduaXR1ZGUoYmlnSW50KTsKCQkJfQoJCX0KCX0pOwp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkc2lnbiA9IGZ1bmN0aW9uIChiaWdJbnQpIHsKCXN3aXRjaCAoYmlnSW50LiQpIHsKCQljYXNlICdaZXInOgoJCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkWmVybzsKCQljYXNlICdQb3MnOgoJCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkUG9zaXRpdmU7CgkJZGVmYXVsdDoKCQkJcmV0dXJuICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JE5lZ2F0aXZlOwoJfQp9Owp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkc2lnblByb2R1Y3QgPSBGMigKCWZ1bmN0aW9uICh4LCB5KSB7CgkJcmV0dXJuIChfVXRpbHNfZXEoeCwgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkWmVybykgfHwgX1V0aWxzX2VxKHksICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JFplcm8pKSA/ICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JFplcm8gOiAoX1V0aWxzX2VxKHgsIHkpID8gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkUG9zaXRpdmUgOiAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCROZWdhdGl2ZSk7Cgl9KTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG11bCA9IEYyKAoJZnVuY3Rpb24gKGludDEsIGludDIpIHsKCQlyZXR1cm4gQTIoCgkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG1rQmlnSW50LAoJCQlBMigKCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JHNpZ25Qcm9kdWN0LAoJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkc2lnbihpbnQxKSwKCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JHNpZ24oaW50MikpLAoJCQlBMigKCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG11bE1hZ25pdHVkZXMsCgkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRtYWduaXR1ZGUoaW50MSksCgkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRtYWduaXR1ZGUoaW50MikpKTsKCX0pOwp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbmVnYXRlID0gZnVuY3Rpb24gKGJpZ0ludCkgewoJc3dpdGNoIChiaWdJbnQuJCkgewoJCWNhc2UgJ1plcic6CgkJCXJldHVybiAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRaZXI7CgkJY2FzZSAnUG9zJzoKCQkJdmFyIG1hZyA9IGJpZ0ludC5hOwoJCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkTmVnKG1hZyk7CgkJZGVmYXVsdDoKCQkJdmFyIG1hZyA9IGJpZ0ludC5hOwoJCQlyZXR1cm4gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkUG9zKG1hZyk7Cgl9Cn07CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRzdWIgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIEEyKAoJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRhZGQsCgkJCWEsCgkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG5lZ2F0ZShiKSk7Cgl9KTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JHplcm8gPSAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRmcm9tSW50KDApOwp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkZGl2bW9kRGlnaXRfID0gRjQoCglmdW5jdGlvbiAodG9fdGVzdCwgcGFkZGluZywgbnVtLCBkZW4pIHsKCQlpZiAoIXRvX3Rlc3QpIHsKCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkemVybywgbnVtKTsKCQl9IGVsc2UgewoJCQl2YXIgeCA9ICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGZyb21JbnQodG9fdGVzdCk7CgkJCXZhciBjYW5kaWRhdGUgPSBBMigKCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG11bCwKCQkJCUEyKCRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG11bCwgeCwgZGVuKSwKCQkJCXBhZGRpbmcpOwoJCQl2YXIgX3YwID0gQTIoJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbHRlLCBjYW5kaWRhdGUsIG51bSkgPyBfVXRpbHNfVHVwbGUyKAoJCQkJQTIoJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbXVsLCB4LCBwYWRkaW5nKSwKCQkJCUEyKCRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JHN1YiwgbnVtLCBjYW5kaWRhdGUpKSA6IF9VdGlsc19UdXBsZTIoJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkemVybywgbnVtKTsKCQkJdmFyIG5ld2RpdiA9IF92MC5hOwoJCQl2YXIgbmV3bW9kID0gX3YwLmI7CgkJCXZhciBfdjEgPSBBNCgkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRkaXZtb2REaWdpdF8sICh0b190ZXN0IC8gMikgfCAwLCBwYWRkaW5nLCBuZXdtb2QsIGRlbik7CgkJCXZhciByZXN0ZGl2ID0gX3YxLmE7CgkJCXZhciByZXN0bW9kID0gX3YxLmI7CgkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJQTIoJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkYWRkLCBuZXdkaXYsIHJlc3RkaXYpLAoJCQkJcmVzdG1vZCk7CgkJfQoJfSk7CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRtYXhEaWdpdEJpdHMgPSAkZWxtJGNvcmUkQmFzaWNzJGNlaWxpbmcoCglBMigkZWxtJGNvcmUkQmFzaWNzJGxvZ0Jhc2UsIDIsICRjbWRpdGNoJGVsbV9iaWdpbnQkQ29uc3RhbnRzJG1heERpZ2l0VmFsdWUpKTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGRpdm1vZERpZ2l0ID0gRjMoCglmdW5jdGlvbiAocGFkZGluZywgeCwgeSkgewoJCXJldHVybiBBNCgKCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkZGl2bW9kRGlnaXRfLAoJCQlBMigkZWxtJGNvcmUkQmFzaWNzJHBvdywgMiwgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbWF4RGlnaXRCaXRzKSwKCQkJcGFkZGluZywKCQkJeCwKCQkJeSk7Cgl9KTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG9uZSA9ICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGZyb21JbnQoMSk7CnZhciAkZWxtJGNvcmUkQmFzaWNzJGFsd2F5cyA9IEYyKAoJZnVuY3Rpb24gKGEsIF92MCkgewoJCXJldHVybiBhOwoJfSk7CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRyZXBlYXRlZGx5ID0gRjMoCglmdW5jdGlvbiAoZiwgeCwgbikgewoJCXJldHVybiBBMygKCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCSRlbG0kY29yZSRCYXNpY3MkYWx3YXlzKGYpLAoJCQl4LAoJCQlBMigkZWxtJGNvcmUkTGlzdCRyYW5nZSwgMSwgbikpOwoJfSk7CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRwYWREaWdpdHMgPSBmdW5jdGlvbiAobikgewoJcmV0dXJuIEEzKAoJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JHJlcGVhdGVkbHksCgkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbXVsKAoJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRmcm9tSW50KCRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGJhc2VEaWdpdCkpLAoJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JG9uZSwKCQluKTsKfTsKdmFyICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGRpdk1vZF8gPSBGMygKCWZ1bmN0aW9uIChuLCBudW0sIGRlbikgewoJCWlmICghbikgewoJCQlyZXR1cm4gQTMoCgkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRkaXZtb2REaWdpdCwKCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JHBhZERpZ2l0cyhuKSwKCQkJCW51bSwKCQkJCWRlbik7CgkJfSBlbHNlIHsKCQkJdmFyIF92MCA9IEEzKAoJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkZGl2bW9kRGlnaXQsCgkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRwYWREaWdpdHMobiksCgkJCQludW0sCgkJCQlkZW4pOwoJCQl2YXIgY2RpdiA9IF92MC5hOwoJCQl2YXIgY21vZCA9IF92MC5iOwoJCQl2YXIgX3YxID0gQTMoJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkZGl2TW9kXywgbiAtIDEsIGNtb2QsIGRlbik7CgkJCXZhciByZGl2ID0gX3YxLmE7CgkJCXZhciBybW9kID0gX3YxLmI7CgkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJQTIoJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkYWRkLCBjZGl2LCByZGl2KSwKCQkJCXJtb2QpOwoJCX0KCX0pOwp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkdG9EaWdpdHMgPSBmdW5jdGlvbiAoYmlnSW50KSB7Cglzd2l0Y2ggKGJpZ0ludC4kKSB7CgkJY2FzZSAnWmVyJzoKCQkJcmV0dXJuIF9MaXN0X05pbDsKCQljYXNlICdQb3MnOgoJCQl2YXIgZHMgPSBiaWdJbnQuYS5hOwoJCQlyZXR1cm4gZHM7CgkJZGVmYXVsdDoKCQkJdmFyIGRzID0gYmlnSW50LmEuYTsKCQkJcmV0dXJuIGRzOwoJfQp9Owp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkZGl2bW9kID0gRjIoCglmdW5jdGlvbiAobnVtLCBkZW4pIHsKCQlpZiAoX1V0aWxzX2VxKGRlbiwgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkemVybykpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCX0gZWxzZSB7CgkJCXZhciBjYW5kX2wgPSAoJGVsbSRjb3JlJExpc3QkbGVuZ3RoKAoJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkdG9EaWdpdHMobnVtKSkgLSAkZWxtJGNvcmUkTGlzdCRsZW5ndGgoCgkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCR0b0RpZ2l0cyhkZW4pKSkgKyAxOwoJCQl2YXIgX3YwID0gQTMoCgkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRkaXZNb2RfLAoJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRtYXgsIDAsIGNhbmRfbCksCgkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRhYnMobnVtKSwKCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGFicyhkZW4pKTsKCQkJdmFyIGQgPSBfdjAuYTsKCQkJdmFyIG0gPSBfdjAuYjsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQlBMigKCQkJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbWtCaWdJbnQsCgkJCQkJCUEyKAoJCQkJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkc2lnblByb2R1Y3QsCgkJCQkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRzaWduKG51bSksCgkJCQkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRzaWduKGRlbikpLAoJCQkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRtYWduaXR1ZGUoZCkpLAoJCQkJCUEyKAoJCQkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRta0JpZ0ludCwKCQkJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkc2lnbihudW0pLAoJCQkJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRtYWduaXR1ZGUobSkpKSk7CgkJfQoJfSk7CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRsdCA9IEYyKAoJZnVuY3Rpb24gKHgsIHkpIHsKCQlyZXR1cm4gX1V0aWxzX2VxKAoJCQlBMigkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRjb21wYXJlLCB4LCB5KSwKCQkJJGVsbSRjb3JlJEJhc2ljcyRMVCk7Cgl9KTsKdmFyICRlbG0kY29yZSRNYXliZSRtYXAgPSBGMigKCWZ1bmN0aW9uIChmLCBtYXliZSkgewoJCWlmIChtYXliZS4kID09PSAnSnVzdCcpIHsKCQkJdmFyIHZhbHVlID0gbWF5YmUuYTsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJZih2YWx1ZSkpOwoJCX0gZWxzZSB7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JHNpbmdsZXRvbiA9IGZ1bmN0aW9uICh2YWx1ZSkgewoJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQlbdmFsdWVdKTsKfTsKdmFyICRlbG0kY29yZSRTdHJpbmckY29uY2F0ID0gZnVuY3Rpb24gKHN0cmluZ3MpIHsKCXJldHVybiBBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcnLCBzdHJpbmdzKTsKfTsKdmFyICRlbG0kY29yZSRTdHJpbmckY29ucyA9IF9TdHJpbmdfY29uczsKdmFyICRlbG0kY29yZSRTdHJpbmckZnJvbUNoYXIgPSBmdW5jdGlvbiAoX2NoYXIpIHsKCXJldHVybiBBMigkZWxtJGNvcmUkU3RyaW5nJGNvbnMsIF9jaGFyLCAnJyk7Cn07CnZhciAkZWxtJGNvcmUkQml0d2lzZSRzaGlmdFJpZ2h0QnkgPSBfQml0d2lzZV9zaGlmdFJpZ2h0Qnk7CnZhciAkZWxtJGNvcmUkU3RyaW5nJHJlcGVhdEhlbHAgPSBGMygKCWZ1bmN0aW9uIChuLCBjaHVuaywgcmVzdWx0KSB7CgkJcmV0dXJuIChuIDw9IDApID8gcmVzdWx0IDogQTMoCgkJCSRlbG0kY29yZSRTdHJpbmckcmVwZWF0SGVscCwKCQkJbiA+PiAxLAoJCQlfVXRpbHNfYXAoY2h1bmssIGNodW5rKSwKCQkJKCEobiAmIDEpKSA/IHJlc3VsdCA6IF9VdGlsc19hcChyZXN1bHQsIGNodW5rKSk7Cgl9KTsKdmFyICRlbG0kY29yZSRTdHJpbmckcmVwZWF0ID0gRjIoCglmdW5jdGlvbiAobiwgY2h1bmspIHsKCQlyZXR1cm4gQTMoJGVsbSRjb3JlJFN0cmluZyRyZXBlYXRIZWxwLCBuLCBjaHVuaywgJycpOwoJfSk7CnZhciAkZWxtJGNvcmUkU3RyaW5nJHBhZExlZnQgPSBGMygKCWZ1bmN0aW9uIChuLCBfY2hhciwgc3RyaW5nKSB7CgkJcmV0dXJuIF9VdGlsc19hcCgKCQkJQTIoCgkJCQkkZWxtJGNvcmUkU3RyaW5nJHJlcGVhdCwKCQkJCW4gLSAkZWxtJGNvcmUkU3RyaW5nJGxlbmd0aChzdHJpbmcpLAoJCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tQ2hhcihfY2hhcikpLAoJCQlzdHJpbmcpOwoJfSk7CnZhciAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRmaWxsWmVyb2VzID0gQTIoCgkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VMLAoJQTIoCgkJJGVsbSRjb3JlJFN0cmluZyRwYWRMZWZ0LAoJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQ29uc3RhbnRzJG1heERpZ2l0TWFnbml0dWRlLAoJCV9VdGlsc19jaHIoJzAnKSksCgkkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQpOwp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkcmV2TWFnbml0dWRlVG9TdHJpbmcgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgZGlnaXRzID0gX3YwLmE7Cgl2YXIgX3YxID0gJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShkaWdpdHMpOwoJaWYgKCFfdjEuYikgewoJCXJldHVybiAnMCc7Cgl9IGVsc2UgewoJCXZhciB4ID0gX3YxLmE7CgkJdmFyIHhzID0gX3YxLmI7CgkJcmV0dXJuICRlbG0kY29yZSRTdHJpbmckY29uY2F0KAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoeCksCgkJCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGZpbGxaZXJvZXMsIHhzKSkpOwoJfQp9Owp2YXIgJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkdG9TdHJpbmcgPSBmdW5jdGlvbiAoYmlnSW50KSB7Cglzd2l0Y2ggKGJpZ0ludC4kKSB7CgkJY2FzZSAnWmVyJzoKCQkJcmV0dXJuICcwJzsKCQljYXNlICdQb3MnOgoJCQl2YXIgbWFnID0gYmlnSW50LmE7CgkJCXJldHVybiAkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRyZXZNYWduaXR1ZGVUb1N0cmluZyhtYWcpOwoJCWRlZmF1bHQ6CgkJCXZhciBtYWcgPSBiaWdJbnQuYTsKCQkJcmV0dXJuICctJyArICRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JHJldk1hZ25pdHVkZVRvU3RyaW5nKG1hZyk7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkUGluZSRibG9iVmFsdWVGcm9tQmlnSW50ID0gZnVuY3Rpb24gKGJpZ2ludCkgewoJdmFyIHZhbHVlID0gJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkYWJzKGJpZ2ludCk7Cgl2YXIgdW5zaWduZWRCeXRlc0Zyb21JbnRWYWx1ZSA9IGZ1bmN0aW9uIChpbnRWYWx1ZSkgewoJCWlmIChBMigKCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkbHQsCgkJCWludFZhbHVlLAoJCQkkY21kaXRjaCRlbG1fYmlnaW50JEJpZ0ludCRmcm9tSW50KDI1NikpKSB7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkkZWxtJGNvcmUkTGlzdCRzaW5nbGV0b24sCgkJCQkkZWxtJGNvcmUkU3RyaW5nJHRvSW50KAoJCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JHRvU3RyaW5nKGludFZhbHVlKSkpOwoJCX0gZWxzZSB7CgkJCXZhciBfdjAgPSBBMigKCQkJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGRpdm1vZCwKCQkJCWludFZhbHVlLAoJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkZnJvbUludCgyNTYpKTsKCQkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJfSBlbHNlIHsKCQkJCXZhciBfdjEgPSBfdjAuYTsKCQkJCXZhciB1cHBlciA9IF92MS5hOwoJCQkJdmFyIGxvd2VyID0gX3YxLmI7CgkJCQl2YXIgX3YyID0gdW5zaWduZWRCeXRlc0Zyb21JbnRWYWx1ZSh1cHBlcik7CgkJCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHVwcGVyQnl0ZXMgPSBfdjIuYTsKCQkJCQl2YXIgX3YzID0gJGVsbSRjb3JlJFN0cmluZyR0b0ludCgKCQkJCQkJJGNtZGl0Y2gkZWxtX2JpZ2ludCRCaWdJbnQkdG9TdHJpbmcobG93ZXIpKTsKCQkJCQlpZiAoX3YzLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGxvd2VyQnl0ZSA9IF92My5hOwoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQlfVXRpbHNfYXAoCgkJCQkJCQkJdXBwZXJCeXRlcywKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVtsb3dlckJ5dGVdKSkpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX07Cgl2YXIgc2lnbkJ5dGUgPSBfVXRpbHNfZXEodmFsdWUsIGJpZ2ludCkgPyAwIDogMTI4OwoJcmV0dXJuIEEyKAoJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJc2lnbkJ5dGUsCgkJQTIoCgkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJX0xpc3RfTmlsLAoJCQl1bnNpZ25lZEJ5dGVzRnJvbUludFZhbHVlKHZhbHVlKSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JFBpbmUkdW5zaWduZWRCbG9iVmFsdWVGcm9tQmlnSW50ID0gZnVuY3Rpb24gKGJpZ2ludCkgewoJdmFyIF92MCA9ICRhdXRob3IkcHJvamVjdCRQaW5lJGJsb2JWYWx1ZUZyb21CaWdJbnQoYmlnaW50KTsKCWlmICghX3YwLmIpIHsKCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7Cgl9IGVsc2UgewoJCXZhciBzaWduQnl0ZSA9IF92MC5hOwoJCXZhciB1bnNpZ25lZEJ5dGVzID0gX3YwLmI7CgkJcmV0dXJuICghc2lnbkJ5dGUpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QodW5zaWduZWRCeXRlcykgOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRQaW5lJHZhbHVlRnJvbUNoYXIgPSBBMigKCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkkZWxtJGNvcmUkQ2hhciR0b0NvZGUsCglBMigKCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCSRjbWRpdGNoJGVsbV9iaWdpbnQkQmlnSW50JGZyb21JbnQsCgkJQTIoCgkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCSRhdXRob3IkcHJvamVjdCRQaW5lJHVuc2lnbmVkQmxvYlZhbHVlRnJvbUJpZ0ludCwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0KF9MaXN0X05pbCksCgkJCQkkYXV0aG9yJHByb2plY3QkUGluZSRCbG9iVmFsdWUpKSkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JFBpbmUkdmFsdWVGcm9tU3RyaW5nID0gQTIoCgkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJJGVsbSRjb3JlJFN0cmluZyR0b0xpc3QsCglBMigKCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCSRlbG0kY29yZSRMaXN0JG1hcCgkYXV0aG9yJHByb2plY3QkUGluZSR2YWx1ZUZyb21DaGFyKSwKCQkkYXV0aG9yJHByb2plY3QkUGluZSRMaXN0VmFsdWUpKTsKdmFyICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJGNvbXBvc2l0aW9uUGluZVZhbHVlRnJvbUZpbGVUcmVlTm9kZSA9IGZ1bmN0aW9uICh0cmVlTm9kZSkgewoJaWYgKHRyZWVOb2RlLiQgPT09ICdCbG9iTm9kZScpIHsKCQl2YXIgYXNCeXRlcyA9IHRyZWVOb2RlLmE7CgkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRQaW5lJEJsb2JWYWx1ZSgKCQkJJFRTRm9zdGVyJGVsbV9ieXRlc19leHRyYSRCeXRlcyRFeHRyYSR0b0J5dGVWYWx1ZXMoYXNCeXRlcykpOwoJfSBlbHNlIHsKCQl2YXIgZW50cmllcyA9IHRyZWVOb2RlLmE7CgkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRQaW5lJExpc3RWYWx1ZSgKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJdmFyIGVudHJ5TmFtZSA9IF92MS5hOwoJCQkJCXZhciBlbnRyeVZhbHVlID0gX3YxLmI7CgkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRQaW5lJExpc3RWYWx1ZSgKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRQaW5lJHZhbHVlRnJvbVN0cmluZyhlbnRyeU5hbWUpLAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJGNvbXBvc2l0aW9uUGluZVZhbHVlRnJvbUZpbGVUcmVlTm9kZShlbnRyeVZhbHVlKQoJCQkJCQkJXSkpOwoJCQkJfSwKCQkJCWVudHJpZXMpKTsKCX0KfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiREaWdlc3QgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRGlnZXN0JywgYTogYX07Cn07CnZhciAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkVHVwbGU4ID0gRjgoCglmdW5jdGlvbiAoYSwgYiwgYywgZCwgZSwgZiwgZywgaCkgewoJCXJldHVybiB7JDogJ1R1cGxlOCcsIGE6IGEsIGI6IGIsIGM6IGMsIGQ6IGQsIGU6IGUsIGY6IGYsIGc6IGcsIGg6IGh9OwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkbG9vcEhlbHAgPSBGMigKCWZ1bmN0aW9uIChzdGVwLCBfdjApIHsKCQl2YXIgbiA9IF92MC5hOwoJCXZhciBzdGF0ZSA9IF92MC5iOwoJCXJldHVybiAobiA+IDApID8gQTIoCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcCwKCQkJZnVuY3Rpb24gKF9uZXcpIHsKCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRMb29wKAoJCQkJCV9VdGlsc19UdXBsZTIobiAtIDEsIF9uZXcpKTsKCQkJfSwKCQkJc3RlcChzdGF0ZSkpIDogJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkc3VjY2VlZCgKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRG9uZShzdGF0ZSkpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkaXRlcmF0ZSA9IEYzKAoJZnVuY3Rpb24gKG4sIHN0ZXAsIGluaXRpYWwpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGxvb3AsCgkJCV9VdGlsc19UdXBsZTIobiwgaW5pdGlhbCksCgkJCSRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRsb29wSGVscChzdGVwKSk7Cgl9KTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcDUgPSBGNigKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSwgX3YyLCBfdjMsIF92NCkgewoJCXZhciBkZWNvZGVBID0gX3YwLmE7CgkJdmFyIGRlY29kZUIgPSBfdjEuYTsKCQl2YXIgZGVjb2RlQyA9IF92Mi5hOwoJCXZhciBkZWNvZGVEID0gX3YzLmE7CgkJdmFyIGRlY29kZUUgPSBfdjQuYTsKCQlyZXR1cm4gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRGVjb2RlcigKCQkJRjIoCgkJCQlmdW5jdGlvbiAoYml0ZXMsIG9mZnNldCkgewoJCQkJCXZhciBfdjUgPSBBMihkZWNvZGVBLCBiaXRlcywgb2Zmc2V0KTsKCQkJCQl2YXIgYU9mZnNldCA9IF92NS5hOwoJCQkJCXZhciBhID0gX3Y1LmI7CgkJCQkJdmFyIF92NiA9IEEyKGRlY29kZUIsIGJpdGVzLCBhT2Zmc2V0KTsKCQkJCQl2YXIgYk9mZnNldCA9IF92Ni5hOwoJCQkJCXZhciBiID0gX3Y2LmI7CgkJCQkJdmFyIF92NyA9IEEyKGRlY29kZUMsIGJpdGVzLCBiT2Zmc2V0KTsKCQkJCQl2YXIgY09mZnNldCA9IF92Ny5hOwoJCQkJCXZhciBjID0gX3Y3LmI7CgkJCQkJdmFyIF92OCA9IEEyKGRlY29kZUQsIGJpdGVzLCBjT2Zmc2V0KTsKCQkJCQl2YXIgZE9mZnNldCA9IF92OC5hOwoJCQkJCXZhciBkID0gX3Y4LmI7CgkJCQkJdmFyIF92OSA9IEEyKGRlY29kZUUsIGJpdGVzLCBkT2Zmc2V0KTsKCQkJCQl2YXIgZU9mZnNldCA9IF92OS5hOwoJCQkJCXZhciBlID0gX3Y5LmI7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCWVPZmZzZXQsCgkJCQkJCUE1KGZ1bmMsIGEsIGIsIGMsIGQsIGUpKTsKCQkJCX0pKTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JG1hcDE2ID0gZnVuY3Rpb24gKGYpIHsKCXJldHVybiBmdW5jdGlvbiAoYjEpIHsKCQlyZXR1cm4gZnVuY3Rpb24gKGIyKSB7CgkJCXJldHVybiBmdW5jdGlvbiAoYjMpIHsKCQkJCXJldHVybiBmdW5jdGlvbiAoYjQpIHsKCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGI1KSB7CgkJCQkJCXJldHVybiBmdW5jdGlvbiAoYjYpIHsKCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoYjcpIHsKCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGI4KSB7CgkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoYjkpIHsKCQkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoYjEwKSB7CgkJCQkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChiMTEpIHsKCQkJCQkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChiMTIpIHsKCQkJCQkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoYjEzKSB7CgkJCQkJCQkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChiMTQpIHsKCQkJCQkJCQkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChiMTUpIHsKCQkJCQkJCQkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoYjE2KSB7CgkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIEE2KAoJCQkJCQkJCQkJCQkJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXA1LAoJCQkJCQkJCQkJCQkJCQkJCQlGNSgKCQkJCQkJCQkJCQkJCQkJCQkJCWZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlKSB7CgkJCQkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIEE0KGUsIGQsIGMsIGIsIGEpOwoJCQkJCQkJCQkJCQkJCQkJCQkJfSksCgkJCQkJCQkJCQkJCQkJCQkJCWIxNiwKCQkJCQkJCQkJCQkJCQkJCQkJYjE1LAoJCQkJCQkJCQkJCQkJCQkJCQliMTQsCgkJCQkJCQkJCQkJCQkJCQkJCWIxMywKCQkJCQkJCQkJCQkJCQkJCQkJQTYoCgkJCQkJCQkJCQkJCQkJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXA1LAoJCQkJCQkJCQkJCQkJCQkJCQkJRjUoCgkJCQkJCQkJCQkJCQkJCQkJCQkJZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGUpIHsKCQkJCQkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIEE0KGUsIGQsIGMsIGIsIGEpOwoJCQkJCQkJCQkJCQkJCQkJCQkJCX0pLAoJCQkJCQkJCQkJCQkJCQkJCQkJYjEyLAoJCQkJCQkJCQkJCQkJCQkJCQkJYjExLAoJCQkJCQkJCQkJCQkJCQkJCQkJYjEwLAoJCQkJCQkJCQkJCQkJCQkJCQkJYjksCgkJCQkJCQkJCQkJCQkJCQkJCQlBNigKCQkJCQkJCQkJCQkJCQkJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXA1LAoJCQkJCQkJCQkJCQkJCQkJCQkJCUY1KAoJCQkJCQkJCQkJCQkJCQkJCQkJCQlmdW5jdGlvbiAoYSwgYiwgYywgZCwgZSkgewoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIEE0KGUsIGQsIGMsIGIsIGEpOwoJCQkJCQkJCQkJCQkJCQkJCQkJCQl9KSwKCQkJCQkJCQkJCQkJCQkJCQkJCQliOCwKCQkJCQkJCQkJCQkJCQkJCQkJCQliNywKCQkJCQkJCQkJCQkJCQkJCQkJCQliNiwKCQkJCQkJCQkJCQkJCQkJCQkJCQliNSwKCQkJCQkJCQkJCQkJCQkJCQkJCQlBNigKCQkJCQkJCQkJCQkJCQkJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwNSwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJRjUoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQlmdW5jdGlvbiAoYSwgYiwgYywgZCwgZSkgewoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCXJldHVybiBBNChlLCBkLCBjLCBiLCBhKTsKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCX0pLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQliNCwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJYjMsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCWIyLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQliMSwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkc3VjY2VlZChmKSkpKSk7CgkJCQkJCQkJCQkJCQkJCQl9OwoJCQkJCQkJCQkJCQkJCQl9OwoJCQkJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQkJCQl9OwoJCQkJCQkJCQkJCQl9OwoJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQl9OwoJCQkJCQkJCQl9OwoJCQkJCQkJCX07CgkJCQkJCQl9OwoJCQkJCQl9OwoJCQkJCX07CgkJCQl9OwoJCQl9OwoJCX07Cgl9Owp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JERlbHRhU3RhdGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRGVsdGFTdGF0ZScsIGE6IGF9Owp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JFN0YXRlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1N0YXRlJywgYTogYX07Cn07CnZhciAkZWxtJGNvcmUkQml0d2lzZSRjb21wbGVtZW50ID0gX0JpdHdpc2VfY29tcGxlbWVudDsKdmFyICRlbG0kY29yZSRBcnJheSRiaXRNYXNrID0gNDI5NDk2NzI5NSA+Pj4gKDMyIC0gJGVsbSRjb3JlJEFycmF5JHNoaWZ0U3RlcCk7CnZhciAkZWxtJGNvcmUkRWxtJEpzQXJyYXkkdW5zYWZlR2V0ID0gX0pzQXJyYXlfdW5zYWZlR2V0Owp2YXIgJGVsbSRjb3JlJEFycmF5JGdldEhlbHAgPSBGMygKCWZ1bmN0aW9uIChzaGlmdCwgaW5kZXgsIHRyZWUpIHsKCQlnZXRIZWxwOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBwb3MgPSAkZWxtJGNvcmUkQXJyYXkkYml0TWFzayAmIChpbmRleCA+Pj4gc2hpZnQpOwoJCQl2YXIgX3YwID0gQTIoJGVsbSRjb3JlJEVsbSRKc0FycmF5JHVuc2FmZUdldCwgcG9zLCB0cmVlKTsKCQkJaWYgKF92MC4kID09PSAnU3ViVHJlZScpIHsKCQkJCXZhciBzdWJUcmVlID0gX3YwLmE7CgkJCQl2YXIgJHRlbXAkc2hpZnQgPSBzaGlmdCAtICRlbG0kY29yZSRBcnJheSRzaGlmdFN0ZXAsCgkJCQkJJHRlbXAkaW5kZXggPSBpbmRleCwKCQkJCQkkdGVtcCR0cmVlID0gc3ViVHJlZTsKCQkJCXNoaWZ0ID0gJHRlbXAkc2hpZnQ7CgkJCQlpbmRleCA9ICR0ZW1wJGluZGV4OwoJCQkJdHJlZSA9ICR0ZW1wJHRyZWU7CgkJCQljb250aW51ZSBnZXRIZWxwOwoJCQl9IGVsc2UgewoJCQkJdmFyIHZhbHVlcyA9IF92MC5hOwoJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRFbG0kSnNBcnJheSR1bnNhZmVHZXQsICRlbG0kY29yZSRBcnJheSRiaXRNYXNrICYgaW5kZXgsIHZhbHVlcyk7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRBcnJheSR0YWlsSW5kZXggPSBmdW5jdGlvbiAobGVuKSB7CglyZXR1cm4gKGxlbiA+Pj4gNSkgPDwgNTsKfTsKdmFyICRlbG0kY29yZSRBcnJheSRnZXQgPSBGMigKCWZ1bmN0aW9uIChpbmRleCwgX3YwKSB7CgkJdmFyIGxlbiA9IF92MC5hOwoJCXZhciBzdGFydFNoaWZ0ID0gX3YwLmI7CgkJdmFyIHRyZWUgPSBfdjAuYzsKCQl2YXIgdGFpbCA9IF92MC5kOwoJCXJldHVybiAoKGluZGV4IDwgMCkgfHwgKF9VdGlsc19jbXAoaW5kZXgsIGxlbikgPiAtMSkpID8gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcgOiAoKF9VdGlsc19jbXAoCgkJCWluZGV4LAoJCQkkZWxtJGNvcmUkQXJyYXkkdGFpbEluZGV4KGxlbikpID4gLTEpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCUEyKCRlbG0kY29yZSRFbG0kSnNBcnJheSR1bnNhZmVHZXQsICRlbG0kY29yZSRBcnJheSRiaXRNYXNrICYgaW5kZXgsIHRhaWwpKSA6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQlBMygkZWxtJGNvcmUkQXJyYXkkZ2V0SGVscCwgc3RhcnRTaGlmdCwgaW5kZXgsIHRyZWUpKSk7Cgl9KTsKdmFyICRlbG0kY29yZSRBcnJheSRmcm9tTGlzdEhlbHAgPSBGMygKCWZ1bmN0aW9uIChsaXN0LCBub2RlTGlzdCwgbm9kZUxpc3RTaXplKSB7CgkJZnJvbUxpc3RIZWxwOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkRWxtJEpzQXJyYXkkaW5pdGlhbGl6ZUZyb21MaXN0LCAkZWxtJGNvcmUkQXJyYXkkYnJhbmNoRmFjdG9yLCBsaXN0KTsKCQkJdmFyIGpzQXJyYXkgPSBfdjAuYTsKCQkJdmFyIHJlbWFpbmluZ0l0ZW1zID0gX3YwLmI7CgkJCWlmIChfVXRpbHNfY21wKAoJCQkJJGVsbSRjb3JlJEVsbSRKc0FycmF5JGxlbmd0aChqc0FycmF5KSwKCQkJCSRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3IpIDwgMCkgewoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRBcnJheSRidWlsZGVyVG9BcnJheSwKCQkJCQl0cnVlLAoJCQkJCXtub2RlTGlzdDogbm9kZUxpc3QsIG5vZGVMaXN0U2l6ZTogbm9kZUxpc3RTaXplLCB0YWlsOiBqc0FycmF5fSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgJHRlbXAkbGlzdCA9IHJlbWFpbmluZ0l0ZW1zLAoJCQkJCSR0ZW1wJG5vZGVMaXN0ID0gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkkZWxtJGNvcmUkQXJyYXkkTGVhZihqc0FycmF5KSwKCQkJCQlub2RlTGlzdCksCgkJCQkJJHRlbXAkbm9kZUxpc3RTaXplID0gbm9kZUxpc3RTaXplICsgMTsKCQkJCWxpc3QgPSAkdGVtcCRsaXN0OwoJCQkJbm9kZUxpc3QgPSAkdGVtcCRub2RlTGlzdDsKCQkJCW5vZGVMaXN0U2l6ZSA9ICR0ZW1wJG5vZGVMaXN0U2l6ZTsKCQkJCWNvbnRpbnVlIGZyb21MaXN0SGVscDsKCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJEFycmF5JGZyb21MaXN0ID0gZnVuY3Rpb24gKGxpc3QpIHsKCWlmICghbGlzdC5iKSB7CgkJcmV0dXJuICRlbG0kY29yZSRBcnJheSRlbXB0eTsKCX0gZWxzZSB7CgkJcmV0dXJuIEEzKCRlbG0kY29yZSRBcnJheSRmcm9tTGlzdEhlbHAsIGxpc3QsIF9MaXN0X05pbCwgMCk7Cgl9Cn07CnZhciAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYka3MgPSAkZWxtJGNvcmUkQXJyYXkkZnJvbUxpc3QoCglfTGlzdF9mcm9tQXJyYXkoCgkJWzExMTYzNTI0MDgsIDE4OTk0NDc0NDEsIDMwNDkzMjM0NzEsIDM5MjEwMDk1NzMsIDk2MTk4NzE2MywgMTUwODk3MDk5MywgMjQ1MzYzNTc0OCwgMjg3MDc2MzIyMSwgMzYyNDM4MTA4MCwgMzEwNTk4NDAxLCA2MDcyMjUyNzgsIDE0MjY4ODE5ODcsIDE5MjUwNzgzODgsIDIxNjIwNzgyMDYsIDI2MTQ4ODgxMDMsIDMyNDgyMjI1ODAsIDM4MzUzOTA0MDEsIDQwMjIyMjQ3NzQsIDI2NDM0NzA3OCwgNjA0ODA3NjI4LCA3NzAyNTU5ODMsIDEyNDkxNTAxMjIsIDE1NTUwODE2OTIsIDE5OTYwNjQ5ODYsIDI1NTQyMjA4ODIsIDI4MjE4MzQzNDksIDI5NTI5OTY4MDgsIDMyMTAzMTM2NzEsIDMzMzY1NzE4OTEsIDM1ODQ1Mjg3MTEsIDExMzkyNjk5MywgMzM4MjQxODk1LCA2NjYzMDcyMDUsIDc3MzUyOTkxMiwgMTI5NDc1NzM3MiwgMTM5NjE4MjI5MSwgMTY5NTE4MzcwMCwgMTk4NjY2MTA1MSwgMjE3NzAyNjM1MCwgMjQ1Njk1NjAzNywgMjczMDQ4NTkyMSwgMjgyMDMwMjQxMSwgMzI1OTczMDgwMCwgMzM0NTc2NDc3MSwgMzUxNjA2NTgxNywgMzYwMDM1MjgwNCwgNDA5NDU3MTkwOSwgMjc1NDIzMzQ0LCA0MzAyMjc3MzQsIDUwNjk0ODYxNiwgNjU5MDYwNTU2LCA4ODM5OTc4NzcsIDk1ODEzOTU3MSwgMTMyMjgyMjIxOCwgMTUzNzAwMjA2MywgMTc0Nzg3Mzc3OSwgMTk1NTU2MjIyMiwgMjAyNDEwNDgxNSwgMjIyNzczMDQ1MiwgMjM2MTg1MjQyNCwgMjQyODQzNjQ3NCwgMjc1NjczNDE4NywgMzIwNDAzMTQ3OSwgMzMyOTMyNTI5OF0pKTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRjYWxjdWxhdGVEaWdlc3REZWx0YXMgPSBGMygKCWZ1bmN0aW9uIChpbmRleCwgdywgX3YwKSB7CgkJdmFyIF92MSA9IF92MC5hOwoJCXZhciBhID0gX3YxLmE7CgkJdmFyIGIgPSBfdjEuYjsKCQl2YXIgYyA9IF92MS5jOwoJCXZhciBkID0gX3YxLmQ7CgkJdmFyIGUgPSBfdjEuZTsKCQl2YXIgZiA9IF92MS5mOwoJCXZhciBnID0gX3YxLmc7CgkJdmFyIGggPSBfdjEuaDsKCQl2YXIgbWFqID0gKGIgJiBjKSBeIChhICYgKGIgXiBjKSk7CgkJdmFyIGsgPSBmdW5jdGlvbiAoKSB7CgkJCXZhciBfdjIgPSBBMigkZWxtJGNvcmUkQXJyYXkkZ2V0LCBpbmRleCwgJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JGtzKTsKCQkJaWYgKF92Mi4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiAwOwoJCQl9IGVsc2UgewoJCQkJdmFyIHYgPSBfdjIuYTsKCQkJCXJldHVybiB2OwoJCQl9CgkJfSgpOwoJCXZhciBjaCA9ICgoKH5lKSAmIGcpIF4gKGUgJiBmKSkgPj4+IDA7CgkJdmFyIGJpZ1NpZ21hMSA9ICgoZSA8PCAoMzIgLSAyNSkpIHwgKGUgPj4+IDI1KSkgXiAoKChlIDw8ICgzMiAtIDExKSkgfCAoZSA+Pj4gMTEpKSBeICgoZSA8PCAoMzIgLSA2KSkgfCAoZSA+Pj4gNikpKTsKCQl2YXIgdDEgPSAoKChoICsgYmlnU2lnbWExKSArIGNoKSArIGspICsgdzsKCQl2YXIgbmV3RSA9IChkICsgdDEpID4+PiAwOwoJCXZhciBiaWdTaWdtYTAgPSAoKGEgPDwgKDMyIC0gMjIpKSB8IChhID4+PiAyMikpIF4gKCgoYSA8PCAoMzIgLSAxMykpIHwgKGEgPj4+IDEzKSkgXiAoKGEgPDwgKDMyIC0gMikpIHwgKGEgPj4+IDIpKSk7CgkJdmFyIHQyID0gYmlnU2lnbWEwICsgbWFqOwoJCXZhciBuZXdBID0gKHQxICsgdDIpID4+PiAwOwoJCXZhciByZXN1bHQgPSBBOCgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkVHVwbGU4LCBuZXdBLCBhLCBiLCBjLCBuZXdFLCBlLCBmLCBnKTsKCQl2YXIgYWx0ID0gKGUgPj4+IDI1KSBeICgoZSA8PCAoMzIgLSAyNSkpIF4gKChlID4+PiAxMSkgXiAoKGUgPDwgKDMyIC0gMTEpKSBeICgoZSA+Pj4gNikgXiAoZSA8PCAoMzIgLSA2KSkpKSkpOwoJCXJldHVybiAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkRGVsdGFTdGF0ZShyZXN1bHQpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkbnVtYmVyT2ZXb3JkcyA9IDE2Owp2YXIgJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JHJlZHVjZVdvcmRzSGVscCA9IGZ1bmN0aW9uIChpKSB7CglyZXR1cm4gZnVuY3Rpb24gKGRlbHRhU3RhdGUpIHsKCQlyZXR1cm4gZnVuY3Rpb24gKGIxNikgewoJCQlyZXR1cm4gZnVuY3Rpb24gKGIxNSkgewoJCQkJcmV0dXJuIGZ1bmN0aW9uIChiMTQpIHsKCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGIxMykgewoJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGIxMikgewoJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChiMTEpIHsKCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGIxMCkgewoJCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGI5KSB7CgkJCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGI4KSB7CgkJCQkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChiNykgewoJCQkJCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGI2KSB7CgkJCQkJCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGI1KSB7CgkJCQkJCQkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChiNCkgewoJCQkJCQkJCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGIzKSB7CgkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGIyKSB7CgkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChiMSkgewoJCQkJCQkJCQkJCQkJCQkJCQlyZWR1Y2VXb3Jkc0hlbHA6CgkJCQkJCQkJCQkJCQkJCQkJCXdoaWxlICh0cnVlKSB7CgkJCQkJCQkJCQkJCQkJCQkJCQlpZiAoaSA8IDQ4KSB7CgkJCQkJCQkJCQkJCQkJCQkJCQkJdmFyIHNtYWxsU2lnbWExID0gKGIyID4+PiAxMCkgXiAoKChiMiA8PCAoMzIgLSAxOSkpIHwgKGIyID4+PiAxOSkpIF4gKChiMiA8PCAoMzIgLSAxNykpIHwgKGIyID4+PiAxNykpKTsKCQkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgc21hbGxTaWdtYTAgPSAoYjE1ID4+PiAzKSBeICgoKGIxNSA8PCAoMzIgLSAxOCkpIHwgKGIxNSA+Pj4gMTgpKSBeICgoYjE1IDw8ICgzMiAtIDcpKSB8IChiMTUgPj4+IDcpKSk7CgkJCQkJCQkJCQkJCQkJCQkJCQkJdmFyIHcgPSAoKChzbWFsbFNpZ21hMSArIGI3KSArIHNtYWxsU2lnbWEwKSArIGIxNikgPj4+IDA7CgkJCQkJCQkJCQkJCQkJCQkJCQkJdmFyICR0ZW1wJGkgPSBpICsgMSwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJJHRlbXAkZGVsdGFTdGF0ZSA9IEEzKCRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRjYWxjdWxhdGVEaWdlc3REZWx0YXMsIGkgKyAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkbnVtYmVyT2ZXb3JkcywgdywgZGVsdGFTdGF0ZSksCgkJCQkJCQkJCQkJCQkJCQkJCQkJCSR0ZW1wJGIxNiA9IGIxNSwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJJHRlbXAkYjE1ID0gYjE0LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkkdGVtcCRiMTQgPSBiMTMsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCSR0ZW1wJGIxMyA9IGIxMiwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJJHRlbXAkYjEyID0gYjExLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkkdGVtcCRiMTEgPSBiMTAsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCSR0ZW1wJGIxMCA9IGI5LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkkdGVtcCRiOSA9IGI4LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkkdGVtcCRiOCA9IGI3LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkkdGVtcCRiNyA9IGI2LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkkdGVtcCRiNiA9IGI1LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkkdGVtcCRiNSA9IGI0LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkkdGVtcCRiNCA9IGIzLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkkdGVtcCRiMyA9IGIyLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkkdGVtcCRiMiA9IGIxLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkkdGVtcCRiMSA9IHc7CgkJCQkJCQkJCQkJCQkJCQkJCQkJaSA9ICR0ZW1wJGk7CgkJCQkJCQkJCQkJCQkJCQkJCQkJZGVsdGFTdGF0ZSA9ICR0ZW1wJGRlbHRhU3RhdGU7CgkJCQkJCQkJCQkJCQkJCQkJCQkJYjE2ID0gJHRlbXAkYjE2OwoJCQkJCQkJCQkJCQkJCQkJCQkJCWIxNSA9ICR0ZW1wJGIxNTsKCQkJCQkJCQkJCQkJCQkJCQkJCQliMTQgPSAkdGVtcCRiMTQ7CgkJCQkJCQkJCQkJCQkJCQkJCQkJYjEzID0gJHRlbXAkYjEzOwoJCQkJCQkJCQkJCQkJCQkJCQkJCWIxMiA9ICR0ZW1wJGIxMjsKCQkJCQkJCQkJCQkJCQkJCQkJCQliMTEgPSAkdGVtcCRiMTE7CgkJCQkJCQkJCQkJCQkJCQkJCQkJYjEwID0gJHRlbXAkYjEwOwoJCQkJCQkJCQkJCQkJCQkJCQkJCWI5ID0gJHRlbXAkYjk7CgkJCQkJCQkJCQkJCQkJCQkJCQkJYjggPSAkdGVtcCRiODsKCQkJCQkJCQkJCQkJCQkJCQkJCQliNyA9ICR0ZW1wJGI3OwoJCQkJCQkJCQkJCQkJCQkJCQkJCWI2ID0gJHRlbXAkYjY7CgkJCQkJCQkJCQkJCQkJCQkJCQkJYjUgPSAkdGVtcCRiNTsKCQkJCQkJCQkJCQkJCQkJCQkJCQliNCA9ICR0ZW1wJGI0OwoJCQkJCQkJCQkJCQkJCQkJCQkJCWIzID0gJHRlbXAkYjM7CgkJCQkJCQkJCQkJCQkJCQkJCQkJYjIgPSAkdGVtcCRiMjsKCQkJCQkJCQkJCQkJCQkJCQkJCQliMSA9ICR0ZW1wJGIxOwoJCQkJCQkJCQkJCQkJCQkJCQkJCWNvbnRpbnVlIHJlZHVjZVdvcmRzSGVscDsKCQkJCQkJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIGRlbHRhU3RhdGU7CgkJCQkJCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQkJCQl9OwoJCQkJCQkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCQkJCQl9OwoJCQkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCQl9OwoJCQkJCQkJCQkJfTsKCQkJCQkJCQkJfTsKCQkJCQkJCQl9OwoJCQkJCQkJfTsKCQkJCQkJfTsKCQkJCQl9OwoJCQkJfTsKCQkJfTsKCQl9OwoJfTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRyZWR1Y2VNZXNzYWdlID0gZnVuY3Rpb24gKF92MCkgewoJcmV0dXJuIGZ1bmN0aW9uIChiMTYpIHsKCQlyZXR1cm4gZnVuY3Rpb24gKGIxNSkgewoJCQlyZXR1cm4gZnVuY3Rpb24gKGIxNCkgewoJCQkJcmV0dXJuIGZ1bmN0aW9uIChiMTMpIHsKCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGIxMikgewoJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGIxMSkgewoJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChiMTApIHsKCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGI5KSB7CgkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoYjgpIHsKCQkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoYjcpIHsKCQkJCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGI2KSB7CgkJCQkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoYjUpIHsKCQkJCQkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoYjQpIHsKCQkJCQkJCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGIzKSB7CgkJCQkJCQkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoYjIpIHsKCQkJCQkJCQkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoYjEpIHsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgaW5pdGlhbCA9IF92MC5hOwoJCQkJCQkJCQkJCQkJCQkJCXZhciBoMCA9IGluaXRpYWwuYTsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgaDEgPSBpbml0aWFsLmI7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIGgyID0gaW5pdGlhbC5jOwoJCQkJCQkJCQkJCQkJCQkJCXZhciBoMyA9IGluaXRpYWwuZDsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgaDQgPSBpbml0aWFsLmU7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIGg1ID0gaW5pdGlhbC5mOwoJCQkJCQkJCQkJCQkJCQkJCXZhciBoNiA9IGluaXRpYWwuZzsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgaDcgPSBpbml0aWFsLmg7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIGluaXRpYWxEZWx0YVN0YXRlID0gQTMoCgkJCQkJCQkJCQkJCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRjYWxjdWxhdGVEaWdlc3REZWx0YXMsCgkJCQkJCQkJCQkJCQkJCQkJCTE1LAoJCQkJCQkJCQkJCQkJCQkJCQliMTYsCgkJCQkJCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JGNhbGN1bGF0ZURpZ2VzdERlbHRhcywKCQkJCQkJCQkJCQkJCQkJCQkJCTE0LAoJCQkJCQkJCQkJCQkJCQkJCQkJYjE1LAoJCQkJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JGNhbGN1bGF0ZURpZ2VzdERlbHRhcywKCQkJCQkJCQkJCQkJCQkJCQkJCQkxMywKCQkJCQkJCQkJCQkJCQkJCQkJCQliMTQsCgkJCQkJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRjYWxjdWxhdGVEaWdlc3REZWx0YXMsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCTEyLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQliMTMsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JGNhbGN1bGF0ZURpZ2VzdERlbHRhcywKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCTExLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJYjEyLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JGNhbGN1bGF0ZURpZ2VzdERlbHRhcywKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkxMCwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQliMTEsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRjYWxjdWxhdGVEaWdlc3REZWx0YXMsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCTksCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCWIxMCwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkY2FsY3VsYXRlRGlnZXN0RGVsdGFzLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJOCwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCWI5LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JGNhbGN1bGF0ZURpZ2VzdERlbHRhcywKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQk3LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCWI4LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkY2FsY3VsYXRlRGlnZXN0RGVsdGFzLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQk2LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQliNywKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkY2FsY3VsYXRlRGlnZXN0RGVsdGFzLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJNSwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCWI2LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JGNhbGN1bGF0ZURpZ2VzdERlbHRhcywKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQk0LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCWI1LAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkY2FsY3VsYXRlRGlnZXN0RGVsdGFzLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkzLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQliNCwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkY2FsY3VsYXRlRGlnZXN0RGVsdGFzLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJMiwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCWIzLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JGNhbGN1bGF0ZURpZ2VzdERlbHRhcywKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkxLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCWIyLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkY2FsY3VsYXRlRGlnZXN0RGVsdGFzLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkwLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQliMSwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JERlbHRhU3RhdGUoaW5pdGlhbCkpKSkpKSkpKSkpKSkpKSkpOwoJCQkJCQkJCQkJCQkJCQkJCXZhciBfdjEgPSAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkcmVkdWNlV29yZHNIZWxwKDApKGluaXRpYWxEZWx0YVN0YXRlKShiMSkoYjIpKGIzKShiNCkoYjUpKGI2KShiNykoYjgpKGI5KShiMTApKGIxMSkoYjEyKShiMTMpKGIxNCkoYjE1KShiMTYpOwoJCQkJCQkJCQkJCQkJCQkJCXZhciBfdjIgPSBfdjEuYTsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgYSA9IF92Mi5hOwoJCQkJCQkJCQkJCQkJCQkJCXZhciBiID0gX3YyLmI7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIGMgPSBfdjIuYzsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgZCA9IF92Mi5kOwoJCQkJCQkJCQkJCQkJCQkJCXZhciBlID0gX3YyLmU7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIGYgPSBfdjIuZjsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgZyA9IF92Mi5nOwoJCQkJCQkJCQkJCQkJCQkJCXZhciBoID0gX3YyLmg7CgkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRTdGF0ZSgKCQkJCQkJCQkJCQkJCQkJCQkJQTgoJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JFR1cGxlOCwgaDAgKyBhLCBoMSArIGIsIGgyICsgYywgaDMgKyBkLCBoNCArIGUsIGg1ICsgZiwgaDYgKyBnLCBoNyArIGgpKTsKCQkJCQkJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCX07CgkJCQkJCQkJCX07CgkJCQkJCQkJfTsKCQkJCQkJCX07CgkJCQkJCX07CgkJCQkJfTsKCQkJCX07CgkJCX07CgkJfTsKCX07Cn07CnZhciAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyID0gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQzMigkZWxtJGJ5dGVzJEJ5dGVzJEJFKTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRyZWR1Y2VCeXRlc01lc3NhZ2UgPSBmdW5jdGlvbiAoc3RhdGUpIHsKCXJldHVybiAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkbWFwMTYoCgkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JHJlZHVjZU1lc3NhZ2Uoc3RhdGUpKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKSgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkdTMyKTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRoYXNoQ2h1bmtzID0gRjIoCglmdW5jdGlvbiAobWVzc2FnZSwgc3RhdGUpIHsKCQl2YXIgbnVtYmVyT2ZDaHVua3MgPSAoJGVsbSRieXRlcyRCeXRlcyR3aWR0aChtZXNzYWdlKSAvIDY0KSB8IDA7CgkJdmFyIGhhc2hTdGF0ZSA9IEEzKCRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRpdGVyYXRlLCBudW1iZXJPZkNodW5rcywgJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JHJlZHVjZUJ5dGVzTWVzc2FnZSwgc3RhdGUpOwoJCXZhciBfdjAgPSBBMigkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRkZWNvZGUsIGhhc2hTdGF0ZSwgbWVzc2FnZSk7CgkJaWYgKF92MC4kID09PSAnSnVzdCcpIHsKCQkJdmFyIG5ld1N0YXRlID0gX3YwLmE7CgkJCXJldHVybiBuZXdTdGF0ZTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gc3RhdGU7CgkJfQoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkbWF4U2l6ZSA9IDIwNDggKiA2NDsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJEJ5dGVzID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0J5dGVzJywgYTogYX07Cn07CnZhciAkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRieXRlcyA9ICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJEJ5dGVzOwp2YXIgJGVsbSRjb3JlJExpc3QkcmVwZWF0SGVscCA9IEYzKAoJZnVuY3Rpb24gKHJlc3VsdCwgbiwgdmFsdWUpIHsKCQlyZXBlYXRIZWxwOgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmIChuIDw9IDApIHsKCQkJCXJldHVybiByZXN1bHQ7CgkJCX0gZWxzZSB7CgkJCQl2YXIgJHRlbXAkcmVzdWx0ID0gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgdmFsdWUsIHJlc3VsdCksCgkJCQkJJHRlbXAkbiA9IG4gLSAxLAoJCQkJCSR0ZW1wJHZhbHVlID0gdmFsdWU7CgkJCQlyZXN1bHQgPSAkdGVtcCRyZXN1bHQ7CgkJCQluID0gJHRlbXAkbjsKCQkJCXZhbHVlID0gJHRlbXAkdmFsdWU7CgkJCQljb250aW51ZSByZXBlYXRIZWxwOwoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCRyZXBlYXQgPSBGMigKCWZ1bmN0aW9uIChuLCB2YWx1ZSkgewoJCXJldHVybiBBMygkZWxtJGNvcmUkTGlzdCRyZXBlYXRIZWxwLCBfTGlzdF9OaWwsIG4sIHZhbHVlKTsKCX0pOwp2YXIgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkVTMyID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ1UzMicsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSR1bnNpZ25lZEludDMyID0gJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkVTMyOwp2YXIgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkVTggPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVTgnLCBhOiBhfTsKfTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50OCA9ICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJFU4Owp2YXIgJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JHBhZEJ1ZmZlciA9IEYyKAoJZnVuY3Rpb24gKGJ5dGVDb3VudCwgYnl0ZXMpIHsKCQl2YXIgZmluYWxCbG9ja1NpemUgPSBieXRlQ291bnQgJiA2MzsKCQl2YXIgcGFkZGluZ1NpemUgPSAoZmluYWxCbG9ja1NpemUgPCA1NikgPyAoKDU1IC0gZmluYWxCbG9ja1NpemUpICsgNCkgOiAoKDExOSAtIGZpbmFsQmxvY2tTaXplKSArIDQpOwoJCXZhciBtZXNzYWdlID0gJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkZW5jb2RlKAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRzZXF1ZW5jZSgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJGJ5dGVzKGJ5dGVzKSwKCQkJCQkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkdW5zaWduZWRJbnQ4KDEyOCksCgkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHNlcXVlbmNlKAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJlcGVhdCwKCQkJCQkJCXBhZGRpbmdTaXplLAoJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkdW5zaWduZWRJbnQ4KDApKSksCgkJCQkJCUEyKCRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50MzIsICRlbG0kYnl0ZXMkQnl0ZXMkQkUsIGJ5dGVDb3VudCA8PCAzKQoJCQkJCV0pKSk7CgkJcmV0dXJuIG1lc3NhZ2U7Cgl9KTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGJ5dGVzID0gZnVuY3Rpb24gKG4pIHsKCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSREZWNvZGVyKAoJCV9CeXRlc19yZWFkX2J5dGVzKG4pKTsKfTsKdmFyICRlbG0kY29yZSRUdXBsZSRwYWlyID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiBfVXRpbHNfVHVwbGUyKGEsIGIpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkc3BsaXRCeXRlcyA9IEYyKAoJZnVuY3Rpb24gKG4sIGJ1ZmZlcikgewoJCXZhciBkZWNvZGVyID0gQTMoCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcDIsCgkJCSRlbG0kY29yZSRUdXBsZSRwYWlyLAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRieXRlcyhuKSwKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkYnl0ZXMoCgkJCQkkZWxtJGJ5dGVzJEJ5dGVzJHdpZHRoKGJ1ZmZlcikgLSBuKSk7CgkJdmFyIF92MCA9IEEyKCRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGRlY29kZSwgZGVjb2RlciwgYnVmZmVyKTsKCQlpZiAoX3YwLiQgPT09ICdKdXN0JykgewoJCQl2YXIgdiA9IF92MC5hOwoJCQlyZXR1cm4gdjsKCQl9IGVsc2UgewoJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCWJ1ZmZlciwKCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJGVuY29kZSgKCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRzZXF1ZW5jZShfTGlzdF9OaWwpKSk7CgkJfQoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkaGFzaEJ5dGVzSGVscCA9IEY0KAoJZnVuY3Rpb24gKGZ1bGxTaXplLCBpc0xhc3QsIGJ5dGVzLCBzdGF0ZSkgewoJCWhhc2hCeXRlc0hlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKF9VdGlsc19jbXAoCgkJCQkkZWxtJGJ5dGVzJEJ5dGVzJHdpZHRoKGJ5dGVzKSwKCQkJCSRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRtYXhTaXplKSA+IDApIHsKCQkJCXZhciBfdjAgPSBBMigkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkc3BsaXRCeXRlcywgJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JG1heFNpemUsIGJ5dGVzKTsKCQkJCXZhciBmaXJzdCA9IF92MC5hOwoJCQkJdmFyIHJlc3QgPSBfdjAuYjsKCQkJCXZhciAkdGVtcCRmdWxsU2l6ZSA9IGZ1bGxTaXplLAoJCQkJCSR0ZW1wJGlzTGFzdCA9IHRydWUsCgkJCQkJJHRlbXAkYnl0ZXMgPSByZXN0LAoJCQkJCSR0ZW1wJHN0YXRlID0gQTQoJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JGhhc2hCeXRlc0hlbHAsIGZ1bGxTaXplLCBmYWxzZSwgZmlyc3QsIHN0YXRlKTsKCQkJCWZ1bGxTaXplID0gJHRlbXAkZnVsbFNpemU7CgkJCQlpc0xhc3QgPSAkdGVtcCRpc0xhc3Q7CgkJCQlieXRlcyA9ICR0ZW1wJGJ5dGVzOwoJCQkJc3RhdGUgPSAkdGVtcCRzdGF0ZTsKCQkJCWNvbnRpbnVlIGhhc2hCeXRlc0hlbHA7CgkJCX0gZWxzZSB7CgkJCQlpZiAoaXNMYXN0KSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkaGFzaENodW5rcywKCQkJCQkJQTIoJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JHBhZEJ1ZmZlciwgZnVsbFNpemUsIGJ5dGVzKSwKCQkJCQkJc3RhdGUpOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gQTIoJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JGhhc2hDaHVua3MsIGJ5dGVzLCBzdGF0ZSk7CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRoYXNoQnl0ZXMgPSBGMigKCWZ1bmN0aW9uIChzdGF0ZSwgYnl0ZXMpIHsKCQl2YXIgX3YwID0gQTQoCgkJCSRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRoYXNoQnl0ZXNIZWxwLAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJHdpZHRoKGJ5dGVzKSwKCQkJdHJ1ZSwKCQkJYnl0ZXMsCgkJCXN0YXRlKTsKCQl2YXIgX3YxID0gX3YwLmE7CgkJdmFyIGEgPSBfdjEuYTsKCQl2YXIgYiA9IF92MS5iOwoJCXZhciBjID0gX3YxLmM7CgkJdmFyIGQgPSBfdjEuZDsKCQl2YXIgZSA9IF92MS5lOwoJCXZhciBmID0gX3YxLmY7CgkJdmFyIGcgPSBfdjEuZzsKCQl2YXIgaCA9IF92MS5oOwoJCXJldHVybiAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkRGlnZXN0KAoJCQlBOCgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkVHVwbGU4LCBhID4+PiAwLCBiID4+PiAwLCBjID4+PiAwLCBkID4+PiAwLCBlID4+PiAwLCBmID4+PiAwLCBnID4+PiAwLCBoID4+PiAwKSk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRmcm9tQnl0ZVZhbHVlcyA9IEYyKAoJZnVuY3Rpb24gKHN0YXRlLCBpbnB1dCkgewoJCXJldHVybiBBMigKCQkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkSW50ZXJuYWwkU0hBMjU2JGhhc2hCeXRlcywKCQkJc3RhdGUsCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJGVuY29kZSgKCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHNlcXVlbmNlKAoJCQkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkdW5zaWduZWRJbnQ4LCBpbnB1dCkpKSk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJFNIQTI1NiRpbml0aWFsU3RhdGUgPSAkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkU3RhdGUoCglBOCgkZm9sa2VydGRldiRlbG1fc2hhMiRJbnRlcm5hbCRTSEEyNTYkVHVwbGU4LCAxNzc5MDMzNzAzLCAzMTQ0MTM0Mjc3LCAxMDEzOTA0MjQyLCAyNzczNDgwNzYyLCAxMzU5ODkzMTE5LCAyNjAwODIyOTI0LCA1Mjg3MzQ2MzUsIDE1NDE0NTkyMjUpKTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJFNIQTI1NiRmcm9tQnl0ZVZhbHVlcyA9ICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJEludGVybmFsJFNIQTI1NiRmcm9tQnl0ZVZhbHVlcygkZm9sa2VydGRldiRlbG1fc2hhMiRTSEEyNTYkaW5pdGlhbFN0YXRlKTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJFNIQTI1NiR3b3JkVG9CeXRlcyA9IGZ1bmN0aW9uIChfaW50KSB7CglyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCVsyNTUgJiAoX2ludCA+Pj4gMjQpLCAyNTUgJiAoX2ludCA+Pj4gMTYpLCAyNTUgJiAoX2ludCA+Pj4gOCksIDI1NSAmIF9pbnRdKTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJFNIQTI1NiR0b0J5dGVWYWx1ZXMgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgX3YxID0gX3YwLmE7Cgl2YXIgYSA9IF92MS5hOwoJdmFyIGIgPSBfdjEuYjsKCXZhciBjID0gX3YxLmM7Cgl2YXIgZCA9IF92MS5kOwoJdmFyIGUgPSBfdjEuZTsKCXZhciBmID0gX3YxLmY7Cgl2YXIgZyA9IF92MS5nOwoJdmFyIGggPSBfdjEuaDsKCXJldHVybiBBMigKCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsCgkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkU0hBMjU2JHdvcmRUb0J5dGVzLAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJW2EsIGIsIGMsIGQsIGUsIGYsIGcsIGhdKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkUGluZSRoYXNoRGlnZXN0RnJvbVZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7CglpZiAodmFsdWUuJCA9PT0gJ0Jsb2JWYWx1ZScpIHsKCQl2YXIgYnl0ZXMgPSB2YWx1ZS5hOwoJCXZhciBwcmVmaXggPSAnYmxvYiAnICsgJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KAoJCQkkZWxtJGNvcmUkTGlzdCRsZW5ndGgoYnl0ZXMpKTsKCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX3NoYTIkU0hBMjU2JGZyb21CeXRlVmFsdWVzKAoJCQlfVXRpbHNfYXAoCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJJGVsbSRjb3JlJENoYXIkdG9Db2RlLAoJCQkJCSRlbG0kY29yZSRTdHJpbmckdG9MaXN0KHByZWZpeCkpLAoJCQkJX1V0aWxzX2FwKAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWzBdKSwKCQkJCQlieXRlcykpKTsKCX0gZWxzZSB7CgkJdmFyIGVsZW1lbnRzID0gdmFsdWUuYTsKCQl2YXIgcHJlZml4ID0gJ2xpc3QgJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludCgKCQkJJGVsbSRjb3JlJExpc3QkbGVuZ3RoKGVsZW1lbnRzKSk7CgkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJFNIQTI1NiRmcm9tQnl0ZVZhbHVlcygKCQkJX1V0aWxzX2FwKAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCSRlbG0kY29yZSRDaGFyJHRvQ29kZSwKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJHRvTGlzdChwcmVmaXgpKSwKCQkJCV9VdGlsc19hcCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVswXSksCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJGF1dGhvciRwcm9qZWN0JFBpbmUkaGFzaERpZ2VzdEZyb21WYWx1ZSwgJGZvbGtlcnRkZXYkZWxtX3NoYTIkU0hBMjU2JHRvQnl0ZVZhbHVlcyksCgkJCQkJCWVsZW1lbnRzKSkpKTsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJGNvbXBvc2l0aW9uSGFzaEZyb21GaWxlVHJlZU5vZGVCeXRlcyA9IEEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJGNvbXBvc2l0aW9uUGluZVZhbHVlRnJvbUZpbGVUcmVlTm9kZSwgJGF1dGhvciRwcm9qZWN0JFBpbmUkaGFzaERpZ2VzdEZyb21WYWx1ZSk7CnZhciAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkQmxvYk5vZGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnQmxvYk5vZGUnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRUcmVlTm9kZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUcmVlTm9kZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJG1hcEJsb2JzID0gRjIoCglmdW5jdGlvbiAobWFwQmxvYiwgbm9kZSkgewoJCWlmIChub2RlLiQgPT09ICdUcmVlTm9kZScpIHsKCQkJdmFyIHRyZWUgPSBub2RlLmE7CgkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkVHJlZU5vZGUoCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJJGVsbSRjb3JlJFR1cGxlJG1hcFNlY29uZCgKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJG1hcEJsb2JzKG1hcEJsb2IpKSwKCQkJCQl0cmVlKSk7CgkJfSBlbHNlIHsKCQkJdmFyIGJsb2IgPSBub2RlLmE7CgkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkQmxvYk5vZGUoCgkJCQltYXBCbG9iKGJsb2IpKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJG1hcEJsb2JzVG9CeXRlcyA9ICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRtYXBCbG9icygKCWZ1bmN0aW9uICgkKSB7CgkJcmV0dXJuICQuYXNCeXRlczsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlSW5Xb3Jrc3BhY2UkY29tcG9zaXRpb25IYXNoRnJvbUZpbGVUcmVlTm9kZSA9IEEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJG1hcEJsb2JzVG9CeXRlcywgJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlSW5Xb3Jrc3BhY2UkY29tcG9zaXRpb25IYXNoRnJvbUZpbGVUcmVlTm9kZUJ5dGVzKTsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRkZWNvZGVWYWx1ZSA9IF9Kc29uX3J1bjsKdmFyICRlbG0kY29yZSRSZXN1bHQkbWFwMiA9IEYzKAoJZnVuY3Rpb24gKGZ1bmMsIHJhLCByYikgewoJCWlmIChyYS4kID09PSAnRXJyJykgewoJCQl2YXIgeCA9IHJhLmE7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycih4KTsKCQl9IGVsc2UgewoJCQl2YXIgYSA9IHJhLmE7CgkJCWlmIChyYi4kID09PSAnRXJyJykgewoJCQkJdmFyIHggPSByYi5hOwoJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKHgpOwoJCQl9IGVsc2UgewoJCQkJdmFyIGIgPSByYi5hOwoJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkJQTIoZnVuYywgYSwgYikpOwoJCQl9CgkJfQoJfSk7CnZhciAkZWxtX2NvbW11bml0eSRyZXN1bHRfZXh0cmEkUmVzdWx0JEV4dHJhJGNvbWJpbmUgPSBBMigKCSRlbG0kY29yZSRMaXN0JGZvbGRyLAoJJGVsbSRjb3JlJFJlc3VsdCRtYXAyKCRlbG0kY29yZSRMaXN0JGNvbnMpLAoJJGVsbSRjb3JlJFJlc3VsdCRPayhfTGlzdF9OaWwpKTsKdmFyICRhZ3VfeiRlbG1femlwJFppcCRlbnRyaWVzID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIGFsbEVudHJpZXMgPSBfdjAuYTsKCXJldHVybiBhbGxFbnRyaWVzOwp9Owp2YXIgJGVsbSRjb3JlJExpc3QkZmlsdGVyID0gRjIoCglmdW5jdGlvbiAoaXNHb29kLCBsaXN0KSB7CgkJcmV0dXJuIEEzKAoJCQkkZWxtJGNvcmUkTGlzdCRmb2xkciwKCQkJRjIoCgkJCQlmdW5jdGlvbiAoeCwgeHMpIHsKCQkJCQlyZXR1cm4gaXNHb29kKHgpID8gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgeCwgeHMpIDogeHM7CgkJCQl9KSwKCQkJX0xpc3RfTmlsLAoJCQlsaXN0KTsKCX0pOwp2YXIgJGVsbSRjb3JlJFN0cmluZyRlbmRzV2l0aCA9IF9TdHJpbmdfZW5kc1dpdGg7CnZhciAkZWxtJGNvcmUkQmFzaWNzJG5lcSA9IF9VdGlsc19ub3RFcXVhbDsKdmFyICRhZ3VfeiRlbG1femlwJFppcCRFbnRyeSRpc0RpcmVjdG9yeSA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciByZWNvcmQgPSBfdjAuYjsKCXJldHVybiAoISghKHJlY29yZC5leHRlcm5hbEF0dHJpYnV0ZXMgJiAxNikpKSB8fCBBMigkZWxtJGNvcmUkU3RyaW5nJGVuZHNXaXRoLCAnLycsIHJlY29yZC5maWxlTmFtZSk7Cn07CnZhciAkZWxtJGNvcmUkUmVzdWx0JG1hcCA9IEYyKAoJZnVuY3Rpb24gKGZ1bmMsIHJhKSB7CgkJaWYgKHJhLiQgPT09ICdPaycpIHsKCQkJdmFyIGEgPSByYS5hOwoJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCWZ1bmMoYSkpOwoJCX0gZWxzZSB7CgkJCXZhciBlID0gcmEuYTsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKGUpOwoJCX0KCX0pOwp2YXIgJGFndV96JGVsbV96aXAkWmlwJEVudHJ5JHBhdGggPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgcmVjb3JkID0gX3YwLmI7CglyZXR1cm4gcmVjb3JkLmZpbGVOYW1lOwp9Owp2YXIgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkbG93ZXN0NkJpdHNNYXNrID0gNjM7CnZhciAkZWxtJGNvcmUkQ2hhciRmcm9tQ29kZSA9IF9DaGFyX2Zyb21Db2RlOwp2YXIgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkdW5zYWZlVG9DaGFyID0gZnVuY3Rpb24gKG4pIHsKCWlmIChuIDw9IDI1KSB7CgkJcmV0dXJuICRlbG0kY29yZSRDaGFyJGZyb21Db2RlKDY1ICsgbik7Cgl9IGVsc2UgewoJCWlmIChuIDw9IDUxKSB7CgkJCXJldHVybiAkZWxtJGNvcmUkQ2hhciRmcm9tQ29kZSg5NyArIChuIC0gMjYpKTsKCQl9IGVsc2UgewoJCQlpZiAobiA8PSA2MSkgewoJCQkJcmV0dXJuICRlbG0kY29yZSRDaGFyJGZyb21Db2RlKDQ4ICsgKG4gLSA1MikpOwoJCQl9IGVsc2UgewoJCQkJc3dpdGNoIChuKSB7CgkJCQkJY2FzZSA2MjoKCQkJCQkJcmV0dXJuIF9VdGlsc19jaHIoJysnKTsKCQkJCQljYXNlIDYzOgoJCQkJCQlyZXR1cm4gX1V0aWxzX2NocignLycpOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXJldHVybiBfVXRpbHNfY2hyKCdcdTAwMDAnKTsKCQkJCX0KCQkJfQoJCX0KCX0KfTsKdmFyICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJGJpdHNUb0NoYXJzID0gRjIoCglmdW5jdGlvbiAoYml0cywgbWlzc2luZykgewoJCXZhciBzID0gJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkdW5zYWZlVG9DaGFyKGJpdHMgJiAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSRsb3dlc3Q2Qml0c01hc2spOwoJCXZhciByID0gJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkdW5zYWZlVG9DaGFyKChiaXRzID4+PiA2KSAmICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJGxvd2VzdDZCaXRzTWFzayk7CgkJdmFyIHEgPSAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSR1bnNhZmVUb0NoYXIoKGJpdHMgPj4+IDEyKSAmICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJGxvd2VzdDZCaXRzTWFzayk7CgkJdmFyIHAgPSAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSR1bnNhZmVUb0NoYXIoYml0cyA+Pj4gMTgpOwoJCXN3aXRjaCAobWlzc2luZykgewoJCQljYXNlIDA6CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJFN0cmluZyRjb25zLAoJCQkJCXAsCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRTdHJpbmckY29ucywKCQkJCQkJcSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGNvbnMsCgkJCQkJCQlyLAoJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tQ2hhcihzKSkpKTsKCQkJY2FzZSAxOgoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRTdHJpbmckY29ucywKCQkJCQlwLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGNvbnMsCgkJCQkJCXEsCgkJCQkJCUEyKCRlbG0kY29yZSRTdHJpbmckY29ucywgciwgJz0nKSkpOwoJCQljYXNlIDI6CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJFN0cmluZyRjb25zLAoJCQkJCXAsCgkJCQkJQTIoJGVsbSRjb3JlJFN0cmluZyRjb25zLCBxLCAnPT0nKSk7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gJyc7CgkJfQoJfSk7CnZhciAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSRiaXRzVG9DaGFyU3BlY2lhbGl6ZWQgPSBGNCgKCWZ1bmN0aW9uIChiaXRzMSwgYml0czIsIGJpdHMzLCBhY2N1bSkgewoJCXZhciB6ID0gJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkdW5zYWZlVG9DaGFyKChiaXRzMyA+Pj4gNikgJiAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSRsb3dlc3Q2Qml0c01hc2spOwoJCXZhciB5ID0gJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkdW5zYWZlVG9DaGFyKChiaXRzMyA+Pj4gMTIpICYgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkbG93ZXN0NkJpdHNNYXNrKTsKCQl2YXIgeCA9ICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJHVuc2FmZVRvQ2hhcihiaXRzMyA+Pj4gMTgpOwoJCXZhciB3ID0gJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkdW5zYWZlVG9DaGFyKGJpdHMzICYgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkbG93ZXN0NkJpdHNNYXNrKTsKCQl2YXIgcyA9ICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJHVuc2FmZVRvQ2hhcihiaXRzMSAmICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJGxvd2VzdDZCaXRzTWFzayk7CgkJdmFyIHIgPSAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSR1bnNhZmVUb0NoYXIoKGJpdHMxID4+PiA2KSAmICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJGxvd2VzdDZCaXRzTWFzayk7CgkJdmFyIHEgPSAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSR1bnNhZmVUb0NoYXIoKGJpdHMxID4+PiAxMikgJiAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSRsb3dlc3Q2Qml0c01hc2spOwoJCXZhciBwID0gJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkdW5zYWZlVG9DaGFyKGJpdHMxID4+PiAxOCk7CgkJdmFyIGQgPSAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSR1bnNhZmVUb0NoYXIoYml0czIgJiAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSRsb3dlc3Q2Qml0c01hc2spOwoJCXZhciBjID0gJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkdW5zYWZlVG9DaGFyKChiaXRzMiA+Pj4gNikgJiAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSRsb3dlc3Q2Qml0c01hc2spOwoJCXZhciBiID0gJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkdW5zYWZlVG9DaGFyKChiaXRzMiA+Pj4gMTIpICYgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkbG93ZXN0NkJpdHNNYXNrKTsKCQl2YXIgYSA9ICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJHVuc2FmZVRvQ2hhcihiaXRzMiA+Pj4gMTgpOwoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRjb25zLAoJCQl4LAoJCQlBMigKCQkJCSRlbG0kY29yZSRTdHJpbmckY29ucywKCQkJCXksCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGNvbnMsCgkJCQkJeiwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRjb25zLAoJCQkJCQl3LAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckY29ucywKCQkJCQkJCWEsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGNvbnMsCgkJCQkJCQkJYiwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRjb25zLAoJCQkJCQkJCQljLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckY29ucywKCQkJCQkJCQkJCWQsCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGNvbnMsCgkJCQkJCQkJCQkJcCwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRjb25zLAoJCQkJCQkJCQkJCQlxLAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckY29ucywKCQkJCQkJCQkJCQkJCXIsCgkJCQkJCQkJCQkJCQlBMigkZWxtJGNvcmUkU3RyaW5nJGNvbnMsIHMsIGFjY3VtKSkpKSkpKSkpKSkpOwoJfSk7CnZhciAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSRkZWNvZGUxOEhlbHAgPSBGNSgKCWZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlKSB7CgkJdmFyIGNvbWJpbmVkNiA9ICgoMjU1ICYgZCkgPDwgMTYpIHwgZTsKCQl2YXIgY29tYmluZWQ1ID0gZCA+Pj4gODsKCQl2YXIgY29tYmluZWQ0ID0gMTY3NzcyMTUgJiBjOwoJCXZhciBjb21iaW5lZDMgPSAoKDY1NTM1ICYgYikgPDwgOCkgfCAoYyA+Pj4gMjQpOwoJCXZhciBjb21iaW5lZDIgPSAoKDI1NSAmIGEpIDw8IDE2KSB8IChiID4+PiAxNik7CgkJdmFyIGNvbWJpbmVkMSA9IGEgPj4+IDg7CgkJcmV0dXJuIEE0KAoJCQkkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSRiaXRzVG9DaGFyU3BlY2lhbGl6ZWQsCgkJCWNvbWJpbmVkMywKCQkJY29tYmluZWQyLAoJCQljb21iaW5lZDEsCgkJCUE0KCRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJGJpdHNUb0NoYXJTcGVjaWFsaXplZCwgY29tYmluZWQ2LCBjb21iaW5lZDUsIGNvbWJpbmVkNCwgJycpKTsKCX0pOwp2YXIgJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQxNiA9IGZ1bmN0aW9uIChlbmRpYW5uZXNzKSB7CglyZXR1cm4gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRGVjb2RlcigKCQlfQnl0ZXNfcmVhZF91MTYoCgkJCV9VdGlsc19lcShlbmRpYW5uZXNzLCAkZWxtJGJ5dGVzJEJ5dGVzJExFKSkpOwp9Owp2YXIgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkdTE2QkUgPSAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDE2KCRlbG0kYnl0ZXMkQnl0ZXMkQkUpOwp2YXIgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkdTMyQkUgPSAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDMyKCRlbG0kYnl0ZXMkQnl0ZXMkQkUpOwp2YXIgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkZGVjb2RlMThCeXRlcyA9IEE2KCRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcDUsICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJGRlY29kZTE4SGVscCwgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkdTMyQkUsICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJHUzMkJFLCAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSR1MzJCRSwgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkdTMyQkUsICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJHUxNkJFKTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcDMgPSBGNCgKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSwgX3YyKSB7CgkJdmFyIGRlY29kZUEgPSBfdjAuYTsKCQl2YXIgZGVjb2RlQiA9IF92MS5hOwoJCXZhciBkZWNvZGVDID0gX3YyLmE7CgkJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJERlY29kZXIoCgkJCUYyKAoJCQkJZnVuY3Rpb24gKGJpdGVzLCBvZmZzZXQpIHsKCQkJCQl2YXIgX3YzID0gQTIoZGVjb2RlQSwgYml0ZXMsIG9mZnNldCk7CgkJCQkJdmFyIGFPZmZzZXQgPSBfdjMuYTsKCQkJCQl2YXIgYSA9IF92My5iOwoJCQkJCXZhciBfdjQgPSBBMihkZWNvZGVCLCBiaXRlcywgYU9mZnNldCk7CgkJCQkJdmFyIGJPZmZzZXQgPSBfdjQuYTsKCQkJCQl2YXIgYiA9IF92NC5iOwoJCQkJCXZhciBfdjUgPSBBMihkZWNvZGVDLCBiaXRlcywgYk9mZnNldCk7CgkJCQkJdmFyIGNPZmZzZXQgPSBfdjUuYTsKCQkJCQl2YXIgYyA9IF92NS5iOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQljT2Zmc2V0LAoJCQkJCQlBMyhmdW5jLCBhLCBiLCBjKSk7CgkJCQl9KSk7Cgl9KTsKdmFyICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJGxvb3BIZWxwID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIHJlbWFpbmluZyA9IF92MC5yZW1haW5pbmc7Cgl2YXIgc3RyaW5nID0gX3YwLnN0cmluZzsKCWlmIChyZW1haW5pbmcgPj0gMTgpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcCwKCQkJZnVuY3Rpb24gKHJlc3VsdCkgewoJCQkJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJExvb3AoCgkJCQkJewoJCQkJCQlyZW1haW5pbmc6IHJlbWFpbmluZyAtIDE4LAoJCQkJCQlzdHJpbmc6IF9VdGlsc19hcChzdHJpbmcsIHJlc3VsdCkKCQkJCQl9KTsKCQkJfSwKCQkJJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkZGVjb2RlMThCeXRlcyk7Cgl9IGVsc2UgewoJCWlmIChyZW1haW5pbmcgPj0gMykgewoJCQl2YXIgaGVscGVyID0gRjMoCgkJCQlmdW5jdGlvbiAoYSwgYiwgYykgewoJCQkJCXZhciBjb21iaW5lZCA9ICgoYSA8PCAxNikgfCAoYiA8PCA4KSkgfCBjOwoJCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRMb29wKAoJCQkJCQl7CgkJCQkJCQlyZW1haW5pbmc6IHJlbWFpbmluZyAtIDMsCgkJCQkJCQlzdHJpbmc6IF9VdGlsc19hcCgKCQkJCQkJCQlzdHJpbmcsCgkJCQkJCQkJQTIoJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkYml0c1RvQ2hhcnMsIGNvbWJpbmVkLCAwKSkKCQkJCQkJfSk7CgkJCQl9KTsKCQkJcmV0dXJuIEE0KCRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcDMsIGhlbHBlciwgJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQ4LCAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDgsICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50OCk7CgkJfSBlbHNlIHsKCQkJaWYgKCFyZW1haW5pbmcpIHsKCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRzdWNjZWVkKAoJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJERvbmUoc3RyaW5nKSk7CgkJCX0gZWxzZSB7CgkJCQlpZiAocmVtYWluaW5nID09PSAyKSB7CgkJCQkJdmFyIGhlbHBlciA9IEYyKAoJCQkJCQlmdW5jdGlvbiAoYSwgYikgewoJCQkJCQkJdmFyIGNvbWJpbmVkID0gKGEgPDwgMTYpIHwgKGIgPDwgOCk7CgkJCQkJCQlyZXR1cm4gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRG9uZSgKCQkJCQkJCQlfVXRpbHNfYXAoCgkJCQkJCQkJCXN0cmluZywKCQkJCQkJCQkJQTIoJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkYml0c1RvQ2hhcnMsIGNvbWJpbmVkLCAxKSkpOwoJCQkJCQl9KTsKCQkJCQlyZXR1cm4gQTMoJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwMiwgaGVscGVyLCAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDgsICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50OCk7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwLAoJCQkJCQlmdW5jdGlvbiAoYSkgewoJCQkJCQkJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJERvbmUoCgkJCQkJCQkJX1V0aWxzX2FwKAoJCQkJCQkJCQlzdHJpbmcsCgkJCQkJCQkJCUEyKCRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJGJpdHNUb0NoYXJzLCBhIDw8IDE2LCAyKSkpOwoJCQkJCQl9LAoJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDgpOwoJCQkJfQoJCQl9CgkJfQoJfQp9Owp2YXIgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkZGVjb2RlciA9IGZ1bmN0aW9uICh3aWR0aCkgewoJcmV0dXJuIEEyKAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGxvb3AsCgkJe3JlbWFpbmluZzogd2lkdGgsIHN0cmluZzogJyd9LAoJCSRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJGxvb3BIZWxwKTsKfTsKdmFyICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRGVjb2RlJGZyb21CeXRlcyA9IGZ1bmN0aW9uIChieXRlcykgewoJcmV0dXJuIEEyKAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGRlY29kZSwKCQkkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJERlY29kZSRkZWNvZGVyKAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJHdpZHRoKGJ5dGVzKSksCgkJYnl0ZXMpOwp9Owp2YXIgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyRCYXNlNjQkZnJvbUJ5dGVzID0gJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyREZWNvZGUkZnJvbUJ5dGVzOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlSW5Xb3Jrc3BhY2UkYmxvYlZhbHVlRnJvbUJ5dGVzID0gZnVuY3Rpb24gKGFzQnl0ZXMpIHsKCXJldHVybiB7CgkJYXNCYXNlNjQ6IEEyKAoJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCSdFcnJvciBlbmNvZGluZyBpbiBiYXNlNjQnLAoJCQkkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEJhc2U2NCRmcm9tQnl0ZXMoYXNCeXRlcykpLAoJCWFzQnl0ZXM6IGFzQnl0ZXMKCX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWVJbldvcmtzcGFjZSRibG9iTm9kZUZyb21CeXRlcyA9IGZ1bmN0aW9uIChhc0J5dGVzKSB7CglyZXR1cm4gJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJEJsb2JOb2RlKAoJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJGJsb2JWYWx1ZUZyb21CeXRlcyhhc0J5dGVzKSk7Cn07CnZhciAkZWxtJGNvcmUkRGljdCRmcm9tTGlzdCA9IGZ1bmN0aW9uIChhc3NvY3MpIHsKCXJldHVybiBBMygKCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQlGMigKCQkJZnVuY3Rpb24gKF92MCwgZGljdCkgewoJCQkJdmFyIGtleSA9IF92MC5hOwoJCQkJdmFyIHZhbHVlID0gX3YwLmI7CgkJCQlyZXR1cm4gQTMoJGVsbSRjb3JlJERpY3QkaW5zZXJ0LCBrZXksIHZhbHVlLCBkaWN0KTsKCQkJfSksCgkJJGVsbSRjb3JlJERpY3QkZW1wdHksCgkJYXNzb2NzKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21tb24kbGlzdEZpbmQgPSBGMigKCWZ1bmN0aW9uIChwcmVkaWNhdGUsIGxpc3QpIHsKCQlsaXN0RmluZDoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIWxpc3QuYikgewoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQl9IGVsc2UgewoJCQkJaWYgKGxpc3QuYi5iKSB7CgkJCQkJdmFyIGZpcnN0ID0gbGlzdC5hOwoJCQkJCXZhciBfdjEgPSBsaXN0LmI7CgkJCQkJdmFyIHNlY29uZCA9IF92MS5hOwoJCQkJCXZhciByZXN0ID0gX3YxLmI7CgkJCQkJaWYgKHByZWRpY2F0ZShmaXJzdCkpIHsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KGZpcnN0KTsKCQkJCQl9IGVsc2UgewoJCQkJCQlpZiAocHJlZGljYXRlKHNlY29uZCkpIHsKCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChzZWNvbmQpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyICR0ZW1wJHByZWRpY2F0ZSA9IHByZWRpY2F0ZSwKCQkJCQkJCQkkdGVtcCRsaXN0ID0gcmVzdDsKCQkJCQkJCXByZWRpY2F0ZSA9ICR0ZW1wJHByZWRpY2F0ZTsKCQkJCQkJCWxpc3QgPSAkdGVtcCRsaXN0OwoJCQkJCQkJY29udGludWUgbGlzdEZpbmQ7CgkJCQkJCX0KCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCXZhciBmaXJzdCA9IGxpc3QuYTsKCQkJCQl2YXIgcmVzdCA9IGxpc3QuYjsKCQkJCQlpZiAocHJlZGljYXRlKGZpcnN0KSkgewoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoZmlyc3QpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciAkdGVtcCRwcmVkaWNhdGUgPSBwcmVkaWNhdGUsCgkJCQkJCQkkdGVtcCRsaXN0ID0gcmVzdDsKCQkJCQkJcHJlZGljYXRlID0gJHRlbXAkcHJlZGljYXRlOwoJCQkJCQlsaXN0ID0gJHRlbXAkbGlzdDsKCQkJCQkJY29udGludWUgbGlzdEZpbmQ7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkZ2V0Tm9kZUF0UGF0aEZyb21GaWxlVHJlZSA9IEYyKAoJZnVuY3Rpb24gKHBhdGgsIHRyZWVOb2RlKSB7CgkJZ2V0Tm9kZUF0UGF0aEZyb21GaWxlVHJlZToKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIXBhdGguYikgewoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KHRyZWVOb2RlKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBwYXRoRmlyc3RFbGVtZW50ID0gcGF0aC5hOwoJCQkJdmFyIHBhdGhSZXN0ID0gcGF0aC5iOwoJCQkJaWYgKHRyZWVOb2RlLiQgPT09ICdCbG9iTm9kZScpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9IGVsc2UgewoJCQkJCXZhciB0cmVlRWxlbWVudHMgPSB0cmVlTm9kZS5hOwoJCQkJCXZhciBfdjIgPSBBMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbW1vbiRsaXN0RmluZCwKCQkJCQkJZnVuY3Rpb24gKF92MykgewoJCQkJCQkJdmFyIGVudHJ5TmFtZSA9IF92My5hOwoJCQkJCQkJcmV0dXJuIF9VdGlsc19lcShlbnRyeU5hbWUsIHBhdGhGaXJzdEVsZW1lbnQpOwoJCQkJCQl9LAoJCQkJCQl0cmVlRWxlbWVudHMpOwoJCQkJCWlmIChfdjIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgX3Y0ID0gX3YyLmE7CgkJCQkJCXZhciBzdWJOb2RlID0gX3Y0LmI7CgkJCQkJCXZhciAkdGVtcCRwYXRoID0gcGF0aFJlc3QsCgkJCQkJCQkkdGVtcCR0cmVlTm9kZSA9IHN1Yk5vZGU7CgkJCQkJCXBhdGggPSAkdGVtcCRwYXRoOwoJCQkJCQl0cmVlTm9kZSA9ICR0ZW1wJHRyZWVOb2RlOwoJCQkJCQljb250aW51ZSBnZXROb2RlQXRQYXRoRnJvbUZpbGVUcmVlOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJHNldE5vZGVBdFBhdGhJblNvcnRlZEZpbGVUcmVlID0gRjIoCglmdW5jdGlvbiAoX3YwLCBub2RlQmVmb3JlKSB7CgkJdmFyIHBhdGggPSBfdjAuYTsKCQl2YXIgbm9kZUF0UGF0aCA9IF92MC5iOwoJCWlmICghcGF0aC5iKSB7CgkJCXJldHVybiBub2RlQXRQYXRoOwoJCX0gZWxzZSB7CgkJCXZhciBwYXRoRmlyc3RFbGVtZW50ID0gcGF0aC5hOwoJCQl2YXIgcGF0aFJlc3QgPSBwYXRoLmI7CgkJCXZhciBub2RlQmVmb3JlVHJlZUVudHJpZXMgPSBmdW5jdGlvbiAoKSB7CgkJCQlpZiAobm9kZUJlZm9yZS4kID09PSAnQmxvYk5vZGUnKSB7CgkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHRyZWVCZWZvcmVFbnRyaWVzID0gbm9kZUJlZm9yZS5hOwoJCQkJCXJldHVybiB0cmVlQmVmb3JlRW50cmllczsKCQkJCX0KCQkJfSgpOwoJCQl2YXIgY2hpbGROb2RlQmVmb3JlID0gQTIoCgkJCQkkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkZ2V0Tm9kZUF0UGF0aEZyb21GaWxlVHJlZSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbcGF0aEZpcnN0RWxlbWVudF0pLAoJCQkJbm9kZUJlZm9yZSk7CgkJCXZhciBjaGlsZE5vZGUgPSBBMigKCQkJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRzZXROb2RlQXRQYXRoSW5Tb3J0ZWRGaWxlVHJlZSwKCQkJCV9VdGlsc19UdXBsZTIocGF0aFJlc3QsIG5vZGVBdFBhdGgpLAoJCQkJQTIoJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LCBub2RlQXRQYXRoLCBjaGlsZE5vZGVCZWZvcmUpKTsKCQkJdmFyIHRyZWVFbnRyaWVzID0gJGVsbSRjb3JlJERpY3QkdG9MaXN0KAoJCQkJQTMoCgkJCQkJJGVsbSRjb3JlJERpY3QkaW5zZXJ0LAoJCQkJCXBhdGhGaXJzdEVsZW1lbnQsCgkJCQkJY2hpbGROb2RlLAoJCQkJCSRlbG0kY29yZSREaWN0JGZyb21MaXN0KG5vZGVCZWZvcmVUcmVlRW50cmllcykpKTsKCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRUcmVlTm9kZSh0cmVlRW50cmllcyk7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWVJbldvcmtzcGFjZSRzZXRCbG9iQXRQYXRoSW5Tb3J0ZWRGaWxlVHJlZUZyb21CeXRlcyA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBwYXRoID0gX3YwLmE7Cgl2YXIgYmxvYkNvbnRlbnQgPSBfdjAuYjsKCXJldHVybiAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkc2V0Tm9kZUF0UGF0aEluU29ydGVkRmlsZVRyZWUoCgkJX1V0aWxzX1R1cGxlMigKCQkJcGF0aCwKCQkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlSW5Xb3Jrc3BhY2UkYmxvYk5vZGVGcm9tQnl0ZXMoYmxvYkNvbnRlbnQpKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWVJbldvcmtzcGFjZSRzb3J0ZWRGaWxlVHJlZUZyb21MaXN0T2ZCbG9ic0FzQnl0ZXMgPSBBMigKCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlSW5Xb3Jrc3BhY2Ukc2V0QmxvYkF0UGF0aEluU29ydGVkRmlsZVRyZWVGcm9tQnl0ZXMsCgkkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkVHJlZU5vZGUoX0xpc3RfTmlsKSk7CnZhciAkYWd1X3okZWxtX3ppcCRaaXAkRW50cnkkRGVjb2RlRXJyb3IgPSB7JDogJ0RlY29kZUVycm9yJ307CnZhciAkYWd1X3okZWxtX3ppcCRaaXAkRW50cnkkSW5mbGF0ZUVycm9yID0geyQ6ICdJbmZsYXRlRXJyb3InfTsKdmFyICRhZ3VfeiRlbG1femlwJFppcCRFbnRyeSRVbnN1cHBvcnRlZENvbXByZXNzaW9uID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ1Vuc3VwcG9ydGVkQ29tcHJlc3Npb24nLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGVsbSRjb3JlJFJlc3VsdCRhbmRUaGVuID0gRjIoCglmdW5jdGlvbiAoY2FsbGJhY2ssIHJlc3VsdCkgewoJCWlmIChyZXN1bHQuJCA9PT0gJ09rJykgewoJCQl2YXIgdmFsdWUgPSByZXN1bHQuYTsKCQkJcmV0dXJuIGNhbGxiYWNrKHZhbHVlKTsKCQl9IGVsc2UgewoJCQl2YXIgbXNnID0gcmVzdWx0LmE7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihtc2cpOwoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJFJlc3VsdCRmcm9tTWF5YmUgPSBGMigKCWZ1bmN0aW9uIChlcnIsIG1heWJlKSB7CgkJaWYgKG1heWJlLiQgPT09ICdKdXN0JykgewoJCQl2YXIgdiA9IG1heWJlLmE7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKHYpOwoJCX0gZWxzZSB7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihlcnIpOwoJCX0KCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJGRlY29kZSA9IEYyKAoJZnVuY3Rpb24gKGJ5dGVzLCBfdjApIHsKCQl2YXIgcmVhZGVyID0gX3YwLmE7CgkJdmFyIGluaXRpYWxTdGF0ZSA9IHtiaXRzQXZhaWxhYmxlOiAwLCBidWZmZXI6IGJ5dGVzLCByZXNlcnZlOiAwLCByZXNlcnZlQXZhaWxhYmxlOiAwLCB0YWc6IDB9OwoJCXZhciBfdjEgPSByZWFkZXIoaW5pdGlhbFN0YXRlKTsKCQlpZiAoX3YxLiQgPT09ICdPaycpIHsKCQkJdmFyIF92MiA9IF92MS5hOwoJCQl2YXIgdmFsdWUgPSBfdjIuYTsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2sodmFsdWUpOwoJCX0gZWxzZSB7CgkJCXZhciBlID0gX3YxLmE7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihlKTsKCQl9Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JEJ5dGVBcnJheSA9IEYzKAoJZnVuY3Rpb24gKGEsIGIsIGMpIHsKCQlyZXR1cm4geyQ6ICdCeXRlQXJyYXknLCBhOiBhLCBiOiBiLCBjOiBjfTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkZW1wdHkgPSBBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRCeXRlQXJyYXksICRlbG0kY29yZSRBcnJheSRlbXB0eSwgMCwgMCk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkQml0UmVhZGVyID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0JpdFJlYWRlcicsIGE6IGF9Owp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJGxvb3BIZWxwID0gRjMoCglmdW5jdGlvbiAoYWNjdW0sIGNhbGxiYWNrLCBzdGF0ZSkgewoJCWxvb3BIZWxwOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBfdjAgPSBjYWxsYmFjayhhY2N1bSk7CgkJCXZhciBkZWNvZGVyID0gX3YwLmE7CgkJCXZhciBfdjEgPSBkZWNvZGVyKHN0YXRlKTsKCQkJaWYgKF92MS4kID09PSAnRXJyJykgewoJCQkJdmFyIGUgPSBfdjEuYTsKCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihlKTsKCQkJfSBlbHNlIHsKCQkJCWlmIChfdjEuYS5hLiQgPT09ICdMb29wJykgewoJCQkJCXZhciBfdjIgPSBfdjEuYTsKCQkJCQl2YXIgbmV3QWNjdW0gPSBfdjIuYS5hOwoJCQkJCXZhciBuZXdTdGF0ZSA9IF92Mi5iOwoJCQkJCXZhciAkdGVtcCRhY2N1bSA9IG5ld0FjY3VtLAoJCQkJCQkkdGVtcCRjYWxsYmFjayA9IGNhbGxiYWNrLAoJCQkJCQkkdGVtcCRzdGF0ZSA9IG5ld1N0YXRlOwoJCQkJCWFjY3VtID0gJHRlbXAkYWNjdW07CgkJCQkJY2FsbGJhY2sgPSAkdGVtcCRjYWxsYmFjazsKCQkJCQlzdGF0ZSA9ICR0ZW1wJHN0YXRlOwoJCQkJCWNvbnRpbnVlIGxvb3BIZWxwOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YzID0gX3YxLmE7CgkJCQkJdmFyIHJlc3VsdCA9IF92My5hLmE7CgkJCQkJdmFyIG5ld1N0YXRlID0gX3YzLmI7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkJCV9VdGlsc19UdXBsZTIocmVzdWx0LCBuZXdTdGF0ZSkpOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbG9vcCA9IEYyKAoJZnVuY3Rpb24gKHN0YXRlLCBjYWxsYmFjaykgewoJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkQml0UmVhZGVyKAoJCQlBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbG9vcEhlbHAsIHN0YXRlLCBjYWxsYmFjaykpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbWFwID0gRjIoCglmdW5jdGlvbiAoZiwgX3YwKSB7CgkJdmFyIGcgPSBfdjAuYTsKCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJEJpdFJlYWRlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBfdjEgPSBnKHMpOwoJCQkJaWYgKF92MS4kID09PSAnT2snKSB7CgkJCQkJdmFyIF92MiA9IF92MS5hOwoJCQkJCXZhciB2YWx1ZSA9IF92Mi5hOwoJCQkJCXZhciBuZXdTdGF0ZSA9IF92Mi5iOwoJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJZih2YWx1ZSksCgkJCQkJCQluZXdTdGF0ZSkpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgZSA9IF92MS5hOwoJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihlKTsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJFUxNiA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdVMTYnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkdW5zaWduZWRJbnQxNiA9ICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJFUxNjsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JHRvQnl0ZXMgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgYXJyYXkgPSBfdjAuYTsKCXZhciBmaW5hbFNpemUgPSBfdjAuYjsKCXZhciBmaW5hbEJ5dGVzID0gX3YwLmM7Cgl2YXIgaW5pdGlhbCA9IGZ1bmN0aW9uICgpIHsKCQl2YXIgZmluYWxJbnQzMiA9IGZpbmFsQnl0ZXMgPj4+ICgoNCAtIGZpbmFsU2l6ZSkgKiA4KTsKCQlzd2l0Y2ggKGZpbmFsU2l6ZSkgewoJCQljYXNlIDQ6CgkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkdW5zaWduZWRJbnQzMiwgJGVsbSRieXRlcyRCeXRlcyRCRSwgZmluYWxCeXRlcykKCQkJCQldKTsKCQkJY2FzZSAxOgoJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50OChmaW5hbEludDMyKQoJCQkJCV0pOwoJCQljYXNlIDI6CgkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkdW5zaWduZWRJbnQxNiwgJGVsbSRieXRlcyRCeXRlcyRCRSwgZmluYWxJbnQzMikKCQkJCQldKTsKCQkJY2FzZSAzOgoJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50MTYsICRlbG0kYnl0ZXMkQnl0ZXMkQkUsIGZpbmFsSW50MzIgPj4gOCksCgkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50OCgyNTUgJiBmaW5hbEludDMyKQoJCQkJCV0pOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQl9Cgl9KCk7Cgl2YXIgZm9sZGVyID0gRjIoCgkJZnVuY3Rpb24gKGVsZW1lbnQsIGFjY3VtKSB7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQlBMigkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSR1bnNpZ25lZEludDMyLCAkZWxtJGJ5dGVzJEJ5dGVzJEJFLCBlbGVtZW50KSwKCQkJCWFjY3VtKTsKCQl9KTsKCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRlbmNvZGUoCgkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkc2VxdWVuY2UoCgkJCUEzKCRlbG0kY29yZSRBcnJheSRmb2xkciwgZm9sZGVyLCBpbml0aWFsLCBhcnJheSkpKTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRhbmRUaGVuID0gRjIoCglmdW5jdGlvbiAoZiwgX3YwKSB7CgkJdmFyIGcgPSBfdjAuYTsKCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJEJpdFJlYWRlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBfdjEgPSBnKHMpOwoJCQkJaWYgKF92MS4kID09PSAnT2snKSB7CgkJCQkJdmFyIF92MiA9IF92MS5hOwoJCQkJCXZhciB2YWx1ZSA9IF92Mi5hOwoJCQkJCXZhciBuZXdTdGF0ZSA9IF92Mi5iOwoJCQkJCXZhciBfdjMgPSBmKHZhbHVlKTsKCQkJCQl2YXIgaCA9IF92My5hOwoJCQkJCXJldHVybiBoKG5ld1N0YXRlKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGUgPSBfdjEuYTsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoZSk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkZWxtJGNvcmUkQXJyYXkkbGVuZ3RoID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIGxlbiA9IF92MC5hOwoJcmV0dXJuIGxlbjsKfTsKdmFyICRlbG0kY29yZSRFbG0kSnNBcnJheSRwdXNoID0gX0pzQXJyYXlfcHVzaDsKdmFyICRlbG0kY29yZSRFbG0kSnNBcnJheSRzaW5nbGV0b24gPSBfSnNBcnJheV9zaW5nbGV0b247CnZhciAkZWxtJGNvcmUkRWxtJEpzQXJyYXkkdW5zYWZlU2V0ID0gX0pzQXJyYXlfdW5zYWZlU2V0Owp2YXIgJGVsbSRjb3JlJEFycmF5JGluc2VydFRhaWxJblRyZWUgPSBGNCgKCWZ1bmN0aW9uIChzaGlmdCwgaW5kZXgsIHRhaWwsIHRyZWUpIHsKCQl2YXIgcG9zID0gJGVsbSRjb3JlJEFycmF5JGJpdE1hc2sgJiAoaW5kZXggPj4+IHNoaWZ0KTsKCQlpZiAoX1V0aWxzX2NtcCgKCQkJcG9zLAoJCQkkZWxtJGNvcmUkRWxtJEpzQXJyYXkkbGVuZ3RoKHRyZWUpKSA+IC0xKSB7CgkJCWlmIChzaGlmdCA9PT0gNSkgewoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRFbG0kSnNBcnJheSRwdXNoLAoJCQkJCSRlbG0kY29yZSRBcnJheSRMZWFmKHRhaWwpLAoJCQkJCXRyZWUpOwoJCQl9IGVsc2UgewoJCQkJdmFyIG5ld1N1YiA9ICRlbG0kY29yZSRBcnJheSRTdWJUcmVlKAoJCQkJCUE0KCRlbG0kY29yZSRBcnJheSRpbnNlcnRUYWlsSW5UcmVlLCBzaGlmdCAtICRlbG0kY29yZSRBcnJheSRzaGlmdFN0ZXAsIGluZGV4LCB0YWlsLCAkZWxtJGNvcmUkRWxtJEpzQXJyYXkkZW1wdHkpKTsKCQkJCXJldHVybiBBMigkZWxtJGNvcmUkRWxtJEpzQXJyYXkkcHVzaCwgbmV3U3ViLCB0cmVlKTsKCQkJfQoJCX0gZWxzZSB7CgkJCXZhciB2YWx1ZSA9IEEyKCRlbG0kY29yZSRFbG0kSnNBcnJheSR1bnNhZmVHZXQsIHBvcywgdHJlZSk7CgkJCWlmICh2YWx1ZS4kID09PSAnU3ViVHJlZScpIHsKCQkJCXZhciBzdWJUcmVlID0gdmFsdWUuYTsKCQkJCXZhciBuZXdTdWIgPSAkZWxtJGNvcmUkQXJyYXkkU3ViVHJlZSgKCQkJCQlBNCgkZWxtJGNvcmUkQXJyYXkkaW5zZXJ0VGFpbEluVHJlZSwgc2hpZnQgLSAkZWxtJGNvcmUkQXJyYXkkc2hpZnRTdGVwLCBpbmRleCwgdGFpbCwgc3ViVHJlZSkpOwoJCQkJcmV0dXJuIEEzKCRlbG0kY29yZSRFbG0kSnNBcnJheSR1bnNhZmVTZXQsIHBvcywgbmV3U3ViLCB0cmVlKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBuZXdTdWIgPSAkZWxtJGNvcmUkQXJyYXkkU3ViVHJlZSgKCQkJCQlBNCgKCQkJCQkJJGVsbSRjb3JlJEFycmF5JGluc2VydFRhaWxJblRyZWUsCgkJCQkJCXNoaWZ0IC0gJGVsbSRjb3JlJEFycmF5JHNoaWZ0U3RlcCwKCQkJCQkJaW5kZXgsCgkJCQkJCXRhaWwsCgkJCQkJCSRlbG0kY29yZSRFbG0kSnNBcnJheSRzaW5nbGV0b24odmFsdWUpKSk7CgkJCQlyZXR1cm4gQTMoJGVsbSRjb3JlJEVsbSRKc0FycmF5JHVuc2FmZVNldCwgcG9zLCBuZXdTdWIsIHRyZWUpOwoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkQXJyYXkkdW5zYWZlUmVwbGFjZVRhaWwgPSBGMigKCWZ1bmN0aW9uIChuZXdUYWlsLCBfdjApIHsKCQl2YXIgbGVuID0gX3YwLmE7CgkJdmFyIHN0YXJ0U2hpZnQgPSBfdjAuYjsKCQl2YXIgdHJlZSA9IF92MC5jOwoJCXZhciB0YWlsID0gX3YwLmQ7CgkJdmFyIG9yaWdpbmFsVGFpbExlbiA9ICRlbG0kY29yZSRFbG0kSnNBcnJheSRsZW5ndGgodGFpbCk7CgkJdmFyIG5ld1RhaWxMZW4gPSAkZWxtJGNvcmUkRWxtJEpzQXJyYXkkbGVuZ3RoKG5ld1RhaWwpOwoJCXZhciBuZXdBcnJheUxlbiA9IGxlbiArIChuZXdUYWlsTGVuIC0gb3JpZ2luYWxUYWlsTGVuKTsKCQlpZiAoX1V0aWxzX2VxKG5ld1RhaWxMZW4sICRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3IpKSB7CgkJCXZhciBvdmVyZmxvdyA9IF9VdGlsc19jbXAobmV3QXJyYXlMZW4gPj4+ICRlbG0kY29yZSRBcnJheSRzaGlmdFN0ZXAsIDEgPDwgc3RhcnRTaGlmdCkgPiAwOwoJCQlpZiAob3ZlcmZsb3cpIHsKCQkJCXZhciBuZXdTaGlmdCA9IHN0YXJ0U2hpZnQgKyAkZWxtJGNvcmUkQXJyYXkkc2hpZnRTdGVwOwoJCQkJdmFyIG5ld1RyZWUgPSBBNCgKCQkJCQkkZWxtJGNvcmUkQXJyYXkkaW5zZXJ0VGFpbEluVHJlZSwKCQkJCQluZXdTaGlmdCwKCQkJCQlsZW4sCgkJCQkJbmV3VGFpbCwKCQkJCQkkZWxtJGNvcmUkRWxtJEpzQXJyYXkkc2luZ2xldG9uKAoJCQkJCQkkZWxtJGNvcmUkQXJyYXkkU3ViVHJlZSh0cmVlKSkpOwoJCQkJcmV0dXJuIEE0KCRlbG0kY29yZSRBcnJheSRBcnJheV9lbG1fYnVpbHRpbiwgbmV3QXJyYXlMZW4sIG5ld1NoaWZ0LCBuZXdUcmVlLCAkZWxtJGNvcmUkRWxtJEpzQXJyYXkkZW1wdHkpOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIEE0KAoJCQkJCSRlbG0kY29yZSRBcnJheSRBcnJheV9lbG1fYnVpbHRpbiwKCQkJCQluZXdBcnJheUxlbiwKCQkJCQlzdGFydFNoaWZ0LAoJCQkJCUE0KCRlbG0kY29yZSRBcnJheSRpbnNlcnRUYWlsSW5UcmVlLCBzdGFydFNoaWZ0LCBsZW4sIG5ld1RhaWwsIHRyZWUpLAoJCQkJCSRlbG0kY29yZSRFbG0kSnNBcnJheSRlbXB0eSk7CgkJCX0KCQl9IGVsc2UgewoJCQlyZXR1cm4gQTQoJGVsbSRjb3JlJEFycmF5JEFycmF5X2VsbV9idWlsdGluLCBuZXdBcnJheUxlbiwgc3RhcnRTaGlmdCwgdHJlZSwgbmV3VGFpbCk7CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkQXJyYXkkcHVzaCA9IEYyKAoJZnVuY3Rpb24gKGEsIGFycmF5KSB7CgkJdmFyIHRhaWwgPSBhcnJheS5kOwoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJEFycmF5JHVuc2FmZVJlcGxhY2VUYWlsLAoJCQlBMigkZWxtJGNvcmUkRWxtJEpzQXJyYXkkcHVzaCwgYSwgdGFpbCksCgkJCWFycmF5KTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkcHVzaCA9IEYyKAoJZnVuY3Rpb24gKHZhbHVlLCBpbnB1dCkgewoJCXZhciBhcnJheSA9IGlucHV0LmE7CgkJdmFyIGZpbmFsU2l6ZSA9IGlucHV0LmI7CgkJdmFyIGZpbmFsQnl0ZXMgPSBpbnB1dC5jOwoJCWlmIChmaW5hbFNpemUgPT09IDQpIHsKCQkJcmV0dXJuIEEzKAoJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkQnl0ZUFycmF5LAoJCQkJQTIoJGVsbSRjb3JlJEFycmF5JHB1c2gsIGZpbmFsQnl0ZXMsIGFycmF5KSwKCQkJCTEsCgkJCQl2YWx1ZSA8PCAyNCk7CgkJfSBlbHNlIHsKCQkJaWYgKCFmaW5hbFNpemUpIHsKCQkJCXJldHVybiBBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRCeXRlQXJyYXksIGFycmF5LCAxLCB2YWx1ZSA8PCAyNCk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgb2Zmc2V0ID0gZmluYWxTaXplOwoJCQkJdmFyIGludGVybmFsSW5kZXggPSAkZWxtJGNvcmUkQXJyYXkkbGVuZ3RoKGFycmF5KSAtIDE7CgkJCQl2YXIgX25ldyA9ICgoMjU1ICYgdmFsdWUpIDw8ICgoMyAtIG9mZnNldCkgKiA4KSkgfCBmaW5hbEJ5dGVzOwoJCQkJdmFyIG1hc2sgPSA0Mjc4MTkwMDgwID4+PiAob2Zmc2V0ICogOCk7CgkJCQlyZXR1cm4gQTMoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkQnl0ZUFycmF5LCBhcnJheSwgZmluYWxTaXplICsgMSwgX25ldyk7CgkJCX0KCQl9Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JHB1c2hNYW55ID0gRjMoCglmdW5jdGlvbiAobmJ5dGVzLCB2YWx1ZV8sIGlucHV0KSB7CgkJdmFyIGFycmF5ID0gaW5wdXQuYTsKCQl2YXIgZmluYWxTaXplID0gaW5wdXQuYjsKCQl2YXIgZmluYWxCeXRlcyA9IGlucHV0LmM7CgkJdmFyIHZhbHVlID0gKG5ieXRlcyA9PT0gNCkgPyB2YWx1ZV8gOiAoKCgxIDw8IChuYnl0ZXMgKiA4KSkgLSAxKSAmIHZhbHVlXyk7CgkJaWYgKCFuYnl0ZXMpIHsKCQkJcmV0dXJuIGlucHV0OwoJCX0gZWxzZSB7CgkJCWlmIChmaW5hbFNpemUgPT09IDQpIHsKCQkJCXJldHVybiBBMygKCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRCeXRlQXJyYXksCgkJCQkJQTIoJGVsbSRjb3JlJEFycmF5JHB1c2gsIGZpbmFsQnl0ZXMsIGFycmF5KSwKCQkJCQluYnl0ZXMsCgkJCQkJdmFsdWUgPDwgKCg0IC0gbmJ5dGVzKSAqIDgpKTsKCQkJfSBlbHNlIHsKCQkJCWlmICghZmluYWxTaXplKSB7CgkJCQkJcmV0dXJuIEEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JEJ5dGVBcnJheSwgYXJyYXksIG5ieXRlcywgdmFsdWUgPDwgKCg0IC0gbmJ5dGVzKSAqIDgpKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGZyZWVTcGFjZSA9IDQgLSBmaW5hbFNpemU7CgkJCQkJaWYgKF9VdGlsc19jbXAobmJ5dGVzLCBmcmVlU3BhY2UpID4gMCkgewoJCQkJCQl2YXIgYnl0ZXNMZWZ0T3ZlciA9IChmaW5hbFNpemUgKyBuYnl0ZXMpIC0gNDsKCQkJCQkJdmFyIGZvckZpbmFsID0gdmFsdWUgPj4+IChieXRlc0xlZnRPdmVyICogOCk7CgkJCQkJCXZhciBuZXdGaW5hbCA9IGZpbmFsQnl0ZXMgfCBmb3JGaW5hbDsKCQkJCQkJdmFyIGFtb3VudCA9ICgoOCAtIGZpbmFsU2l6ZSkgLSBuYnl0ZXMpICogODsKCQkJCQkJdmFyIGZvck5leHRGaW5hbCA9ICgoKDEgPDwgKGJ5dGVzTGVmdE92ZXIgKiA4KSkgLSAxKSAmIHZhbHVlKSA8PCBhbW91bnQ7CgkJCQkJCXJldHVybiBBMygKCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JEJ5dGVBcnJheSwKCQkJCQkJCUEyKCRlbG0kY29yZSRBcnJheSRwdXNoLCBuZXdGaW5hbCwgYXJyYXkpLAoJCQkJCQkJbmJ5dGVzIC0gZnJlZVNwYWNlLAoJCQkJCQkJZm9yTmV4dEZpbmFsKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYW1vdW50ID0gKDQgLSAoZmluYWxTaXplICsgbmJ5dGVzKSkgKiA4OwoJCQkJCQl2YXIgZm9yRmluYWwgPSB2YWx1ZSA8PCBhbW91bnQ7CgkJCQkJCXZhciBuZXdGaW5hbCA9IGZpbmFsQnl0ZXMgfCBmb3JGaW5hbDsKCQkJCQkJcmV0dXJuIEEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JEJ5dGVBcnJheSwgYXJyYXksIGZpbmFsU2l6ZSArIG5ieXRlcywgbmV3RmluYWwpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkYXBwZW5kQnl0ZXNIZWxwID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIHJlbWFpbmluZyA9IF92MC5hOwoJdmFyIGJ5dGVhcnJheSA9IF92MC5iOwoJdmFyIGFycmF5ID0gYnl0ZWFycmF5LmE7Cgl2YXIgZmluYWxTaXplID0gYnl0ZWFycmF5LmI7Cgl2YXIgZmluYWxCeXRlcyA9IGJ5dGVhcnJheS5jOwoJcmV0dXJuIChyZW1haW5pbmcgPj0gNCkgPyBBMigKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAsCgkJZnVuY3Rpb24gKF9uZXcpIHsKCQkJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJExvb3AoCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCXJlbWFpbmluZyAtIDQsCgkJCQkJQTMoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkcHVzaE1hbnksIDQsIF9uZXcsIGJ5dGVhcnJheSkpKTsKCQl9LAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MzIoJGVsbSRieXRlcyRCeXRlcyRCRSkpIDogKChyZW1haW5pbmcgPj0gMSkgPyBBMigKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAsCgkJZnVuY3Rpb24gKF9uZXcpIHsKCQkJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJExvb3AoCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCXJlbWFpbmluZyAtIDEsCgkJCQkJQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkcHVzaCwgX25ldywgYnl0ZWFycmF5KSkpOwoJCX0sCgkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQ4KSA6ICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHN1Y2NlZWQoCgkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRG9uZShieXRlYXJyYXkpKSk7Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRhcHBlbmRCeXRlcyA9IEYyKAoJZnVuY3Rpb24gKGJ5dGVzLCBiYXJyYXkpIHsKCQl2YXIgYXJyYXkgPSBiYXJyYXkuYTsKCQl2YXIgZmluYWxTaXplID0gYmFycmF5LmI7CgkJdmFyIGZpbmFsQnl0ZXMgPSBiYXJyYXkuYzsKCQl2YXIgZGVjb2RlciA9IEEyKAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRsb29wLAoJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJGVsbSRieXRlcyRCeXRlcyR3aWR0aChieXRlcyksCgkJCQliYXJyYXkpLAoJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRhcHBlbmRCeXRlc0hlbHApOwoJCXZhciBfdjAgPSBBMigkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRkZWNvZGUsIGRlY29kZXIsIGJ5dGVzKTsKCQlpZiAoX3YwLiQgPT09ICdKdXN0JykgewoJCQl2YXIgdiA9IF92MC5hOwoJCQlyZXR1cm4gdjsKCQl9IGVsc2UgewoJCQlyZXR1cm4gYmFycmF5OwoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJEFycmF5JHJlcGVhdCA9IEYyKAoJZnVuY3Rpb24gKG4sIGUpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRBcnJheSRpbml0aWFsaXplLAoJCQluLAoJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQlyZXR1cm4gZTsKCQkJfSk7Cgl9KTsKdmFyICRlbG0kY29yZSRUdXBsZSRzZWNvbmQgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgeSA9IF92MC5iOwoJcmV0dXJuIHk7Cn07CnZhciAkZWxtJGNvcmUkQXJyYXkkc2V0SGVscCA9IEY0KAoJZnVuY3Rpb24gKHNoaWZ0LCBpbmRleCwgdmFsdWUsIHRyZWUpIHsKCQl2YXIgcG9zID0gJGVsbSRjb3JlJEFycmF5JGJpdE1hc2sgJiAoaW5kZXggPj4+IHNoaWZ0KTsKCQl2YXIgX3YwID0gQTIoJGVsbSRjb3JlJEVsbSRKc0FycmF5JHVuc2FmZUdldCwgcG9zLCB0cmVlKTsKCQlpZiAoX3YwLiQgPT09ICdTdWJUcmVlJykgewoJCQl2YXIgc3ViVHJlZSA9IF92MC5hOwoJCQl2YXIgbmV3U3ViID0gQTQoJGVsbSRjb3JlJEFycmF5JHNldEhlbHAsIHNoaWZ0IC0gJGVsbSRjb3JlJEFycmF5JHNoaWZ0U3RlcCwgaW5kZXgsIHZhbHVlLCBzdWJUcmVlKTsKCQkJcmV0dXJuIEEzKAoJCQkJJGVsbSRjb3JlJEVsbSRKc0FycmF5JHVuc2FmZVNldCwKCQkJCXBvcywKCQkJCSRlbG0kY29yZSRBcnJheSRTdWJUcmVlKG5ld1N1YiksCgkJCQl0cmVlKTsKCQl9IGVsc2UgewoJCQl2YXIgdmFsdWVzID0gX3YwLmE7CgkJCXZhciBuZXdMZWFmID0gQTMoJGVsbSRjb3JlJEVsbSRKc0FycmF5JHVuc2FmZVNldCwgJGVsbSRjb3JlJEFycmF5JGJpdE1hc2sgJiBpbmRleCwgdmFsdWUsIHZhbHVlcyk7CgkJCXJldHVybiBBMygKCQkJCSRlbG0kY29yZSRFbG0kSnNBcnJheSR1bnNhZmVTZXQsCgkJCQlwb3MsCgkJCQkkZWxtJGNvcmUkQXJyYXkkTGVhZihuZXdMZWFmKSwKCQkJCXRyZWUpOwoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJEFycmF5JHNldCA9IEYzKAoJZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSwgYXJyYXkpIHsKCQl2YXIgbGVuID0gYXJyYXkuYTsKCQl2YXIgc3RhcnRTaGlmdCA9IGFycmF5LmI7CgkJdmFyIHRyZWUgPSBhcnJheS5jOwoJCXZhciB0YWlsID0gYXJyYXkuZDsKCQlyZXR1cm4gKChpbmRleCA8IDApIHx8IChfVXRpbHNfY21wKGluZGV4LCBsZW4pID4gLTEpKSA/IGFycmF5IDogKChfVXRpbHNfY21wKAoJCQlpbmRleCwKCQkJJGVsbSRjb3JlJEFycmF5JHRhaWxJbmRleChsZW4pKSA+IC0xKSA/IEE0KAoJCQkkZWxtJGNvcmUkQXJyYXkkQXJyYXlfZWxtX2J1aWx0aW4sCgkJCWxlbiwKCQkJc3RhcnRTaGlmdCwKCQkJdHJlZSwKCQkJQTMoJGVsbSRjb3JlJEVsbSRKc0FycmF5JHVuc2FmZVNldCwgJGVsbSRjb3JlJEFycmF5JGJpdE1hc2sgJiBpbmRleCwgdmFsdWUsIHRhaWwpKSA6IEE0KAoJCQkkZWxtJGNvcmUkQXJyYXkkQXJyYXlfZWxtX2J1aWx0aW4sCgkJCWxlbiwKCQkJc3RhcnRTaGlmdCwKCQkJQTQoJGVsbSRjb3JlJEFycmF5JHNldEhlbHAsIHN0YXJ0U2hpZnQsIGluZGV4LCB2YWx1ZSwgdHJlZSksCgkJCXRhaWwpKTsKCX0pOwp2YXIgJGVsbSRjb3JlJERpY3QkZ2V0TWluID0gZnVuY3Rpb24gKGRpY3QpIHsKCWdldE1pbjoKCXdoaWxlICh0cnVlKSB7CgkJaWYgKChkaWN0LiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSAmJiAoZGljdC5kLiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSkgewoJCQl2YXIgbGVmdCA9IGRpY3QuZDsKCQkJdmFyICR0ZW1wJGRpY3QgPSBsZWZ0OwoJCQlkaWN0ID0gJHRlbXAkZGljdDsKCQkJY29udGludWUgZ2V0TWluOwoJCX0gZWxzZSB7CgkJCXJldHVybiBkaWN0OwoJCX0KCX0KfTsKdmFyICRlbG0kY29yZSREaWN0JG1vdmVSZWRMZWZ0ID0gZnVuY3Rpb24gKGRpY3QpIHsKCWlmICgoKGRpY3QuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChkaWN0LmQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpKSAmJiAoZGljdC5lLiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSkgewoJCWlmICgoZGljdC5lLmQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChkaWN0LmUuZC5hLiQgPT09ICdSZWQnKSkgewoJCQl2YXIgY2xyID0gZGljdC5hOwoJCQl2YXIgayA9IGRpY3QuYjsKCQkJdmFyIHYgPSBkaWN0LmM7CgkJCXZhciBfdjEgPSBkaWN0LmQ7CgkJCXZhciBsQ2xyID0gX3YxLmE7CgkJCXZhciBsSyA9IF92MS5iOwoJCQl2YXIgbFYgPSBfdjEuYzsKCQkJdmFyIGxMZWZ0ID0gX3YxLmQ7CgkJCXZhciBsUmlnaHQgPSBfdjEuZTsKCQkJdmFyIF92MiA9IGRpY3QuZTsKCQkJdmFyIHJDbHIgPSBfdjIuYTsKCQkJdmFyIHJLID0gX3YyLmI7CgkJCXZhciByViA9IF92Mi5jOwoJCQl2YXIgckxlZnQgPSBfdjIuZDsKCQkJdmFyIF92MyA9IHJMZWZ0LmE7CgkJCXZhciBybEsgPSByTGVmdC5iOwoJCQl2YXIgcmxWID0gckxlZnQuYzsKCQkJdmFyIHJsTCA9IHJMZWZ0LmQ7CgkJCXZhciBybFIgPSByTGVmdC5lOwoJCQl2YXIgclJpZ2h0ID0gX3YyLmU7CgkJCXJldHVybiBBNSgKCQkJCSRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwKCQkJCSRlbG0kY29yZSREaWN0JFJlZCwKCQkJCXJsSywKCQkJCXJsViwKCQkJCUE1KAoJCQkJCSRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwKCQkJCQkkZWxtJGNvcmUkRGljdCRCbGFjaywKCQkJCQlrLAoJCQkJCXYsCgkJCQkJQTUoJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLCAkZWxtJGNvcmUkRGljdCRSZWQsIGxLLCBsViwgbExlZnQsIGxSaWdodCksCgkJCQkJcmxMKSwKCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkQmxhY2ssIHJLLCByViwgcmxSLCByUmlnaHQpKTsKCQl9IGVsc2UgewoJCQl2YXIgY2xyID0gZGljdC5hOwoJCQl2YXIgayA9IGRpY3QuYjsKCQkJdmFyIHYgPSBkaWN0LmM7CgkJCXZhciBfdjQgPSBkaWN0LmQ7CgkJCXZhciBsQ2xyID0gX3Y0LmE7CgkJCXZhciBsSyA9IF92NC5iOwoJCQl2YXIgbFYgPSBfdjQuYzsKCQkJdmFyIGxMZWZ0ID0gX3Y0LmQ7CgkJCXZhciBsUmlnaHQgPSBfdjQuZTsKCQkJdmFyIF92NSA9IGRpY3QuZTsKCQkJdmFyIHJDbHIgPSBfdjUuYTsKCQkJdmFyIHJLID0gX3Y1LmI7CgkJCXZhciByViA9IF92NS5jOwoJCQl2YXIgckxlZnQgPSBfdjUuZDsKCQkJdmFyIHJSaWdodCA9IF92NS5lOwoJCQlpZiAoY2xyLiQgPT09ICdCbGFjaycpIHsKCQkJCXJldHVybiBBNSgKCQkJCQkkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sCgkJCQkJJGVsbSRjb3JlJERpY3QkQmxhY2ssCgkJCQkJaywKCQkJCQl2LAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkUmVkLCBsSywgbFYsIGxMZWZ0LCBsUmlnaHQpLAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkUmVkLCBySywgclYsIHJMZWZ0LCByUmlnaHQpKTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiBBNSgKCQkJCQkkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sCgkJCQkJJGVsbSRjb3JlJERpY3QkQmxhY2ssCgkJCQkJaywKCQkJCQl2LAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkUmVkLCBsSywgbFYsIGxMZWZ0LCBsUmlnaHQpLAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkUmVkLCBySywgclYsIHJMZWZ0LCByUmlnaHQpKTsKCQkJfQoJCX0KCX0gZWxzZSB7CgkJcmV0dXJuIGRpY3Q7Cgl9Cn07CnZhciAkZWxtJGNvcmUkRGljdCRtb3ZlUmVkUmlnaHQgPSBmdW5jdGlvbiAoZGljdCkgewoJaWYgKCgoZGljdC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgJiYgKGRpY3QuZC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykpICYmIChkaWN0LmUuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpKSB7CgkJaWYgKChkaWN0LmQuZC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgJiYgKGRpY3QuZC5kLmEuJCA9PT0gJ1JlZCcpKSB7CgkJCXZhciBjbHIgPSBkaWN0LmE7CgkJCXZhciBrID0gZGljdC5iOwoJCQl2YXIgdiA9IGRpY3QuYzsKCQkJdmFyIF92MSA9IGRpY3QuZDsKCQkJdmFyIGxDbHIgPSBfdjEuYTsKCQkJdmFyIGxLID0gX3YxLmI7CgkJCXZhciBsViA9IF92MS5jOwoJCQl2YXIgX3YyID0gX3YxLmQ7CgkJCXZhciBfdjMgPSBfdjIuYTsKCQkJdmFyIGxsSyA9IF92Mi5iOwoJCQl2YXIgbGxWID0gX3YyLmM7CgkJCXZhciBsbExlZnQgPSBfdjIuZDsKCQkJdmFyIGxsUmlnaHQgPSBfdjIuZTsKCQkJdmFyIGxSaWdodCA9IF92MS5lOwoJCQl2YXIgX3Y0ID0gZGljdC5lOwoJCQl2YXIgckNsciA9IF92NC5hOwoJCQl2YXIgcksgPSBfdjQuYjsKCQkJdmFyIHJWID0gX3Y0LmM7CgkJCXZhciByTGVmdCA9IF92NC5kOwoJCQl2YXIgclJpZ2h0ID0gX3Y0LmU7CgkJCXJldHVybiBBNSgKCQkJCSRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwKCQkJCSRlbG0kY29yZSREaWN0JFJlZCwKCQkJCWxLLAoJCQkJbFYsCgkJCQlBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JEJsYWNrLCBsbEssIGxsViwgbGxMZWZ0LCBsbFJpZ2h0KSwKCQkJCUE1KAoJCQkJCSRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwKCQkJCQkkZWxtJGNvcmUkRGljdCRCbGFjaywKCQkJCQlrLAoJCQkJCXYsCgkJCQkJbFJpZ2h0LAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkUmVkLCBySywgclYsIHJMZWZ0LCByUmlnaHQpKSk7CgkJfSBlbHNlIHsKCQkJdmFyIGNsciA9IGRpY3QuYTsKCQkJdmFyIGsgPSBkaWN0LmI7CgkJCXZhciB2ID0gZGljdC5jOwoJCQl2YXIgX3Y1ID0gZGljdC5kOwoJCQl2YXIgbENsciA9IF92NS5hOwoJCQl2YXIgbEsgPSBfdjUuYjsKCQkJdmFyIGxWID0gX3Y1LmM7CgkJCXZhciBsTGVmdCA9IF92NS5kOwoJCQl2YXIgbFJpZ2h0ID0gX3Y1LmU7CgkJCXZhciBfdjYgPSBkaWN0LmU7CgkJCXZhciByQ2xyID0gX3Y2LmE7CgkJCXZhciBySyA9IF92Ni5iOwoJCQl2YXIgclYgPSBfdjYuYzsKCQkJdmFyIHJMZWZ0ID0gX3Y2LmQ7CgkJCXZhciByUmlnaHQgPSBfdjYuZTsKCQkJaWYgKGNsci4kID09PSAnQmxhY2snKSB7CgkJCQlyZXR1cm4gQTUoCgkJCQkJJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLAoJCQkJCSRlbG0kY29yZSREaWN0JEJsYWNrLAoJCQkJCWssCgkJCQkJdiwKCQkJCQlBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JFJlZCwgbEssIGxWLCBsTGVmdCwgbFJpZ2h0KSwKCQkJCQlBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JFJlZCwgckssIHJWLCByTGVmdCwgclJpZ2h0KSk7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gQTUoCgkJCQkJJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLAoJCQkJCSRlbG0kY29yZSREaWN0JEJsYWNrLAoJCQkJCWssCgkJCQkJdiwKCQkJCQlBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JFJlZCwgbEssIGxWLCBsTGVmdCwgbFJpZ2h0KSwKCQkJCQlBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JFJlZCwgckssIHJWLCByTGVmdCwgclJpZ2h0KSk7CgkJCX0KCQl9Cgl9IGVsc2UgewoJCXJldHVybiBkaWN0OwoJfQp9Owp2YXIgJGVsbSRjb3JlJERpY3QkcmVtb3ZlSGVscFByZXBFUUdUID0gRjcoCglmdW5jdGlvbiAodGFyZ2V0S2V5LCBkaWN0LCBjb2xvciwga2V5LCB2YWx1ZSwgbGVmdCwgcmlnaHQpIHsKCQlpZiAoKGxlZnQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChsZWZ0LmEuJCA9PT0gJ1JlZCcpKSB7CgkJCXZhciBfdjEgPSBsZWZ0LmE7CgkJCXZhciBsSyA9IGxlZnQuYjsKCQkJdmFyIGxWID0gbGVmdC5jOwoJCQl2YXIgbExlZnQgPSBsZWZ0LmQ7CgkJCXZhciBsUmlnaHQgPSBsZWZ0LmU7CgkJCXJldHVybiBBNSgKCQkJCSRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwKCQkJCWNvbG9yLAoJCQkJbEssCgkJCQlsViwKCQkJCWxMZWZ0LAoJCQkJQTUoJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLCAkZWxtJGNvcmUkRGljdCRSZWQsIGtleSwgdmFsdWUsIGxSaWdodCwgcmlnaHQpKTsKCQl9IGVsc2UgewoJCQlfdjIkMjoKCQkJd2hpbGUgKHRydWUpIHsKCQkJCWlmICgocmlnaHQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChyaWdodC5hLiQgPT09ICdCbGFjaycpKSB7CgkJCQkJaWYgKHJpZ2h0LmQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpIHsKCQkJCQkJaWYgKHJpZ2h0LmQuYS4kID09PSAnQmxhY2snKSB7CgkJCQkJCQl2YXIgX3YzID0gcmlnaHQuYTsKCQkJCQkJCXZhciBfdjQgPSByaWdodC5kOwoJCQkJCQkJdmFyIF92NSA9IF92NC5hOwoJCQkJCQkJcmV0dXJuICRlbG0kY29yZSREaWN0JG1vdmVSZWRSaWdodChkaWN0KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWJyZWFrIF92MiQyOwoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIF92NiA9IHJpZ2h0LmE7CgkJCQkJCXZhciBfdjcgPSByaWdodC5kOwoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJERpY3QkbW92ZVJlZFJpZ2h0KGRpY3QpOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJYnJlYWsgX3YyJDI7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIGRpY3Q7CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkRGljdCRyZW1vdmVNaW4gPSBmdW5jdGlvbiAoZGljdCkgewoJaWYgKChkaWN0LiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSAmJiAoZGljdC5kLiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSkgewoJCXZhciBjb2xvciA9IGRpY3QuYTsKCQl2YXIga2V5ID0gZGljdC5iOwoJCXZhciB2YWx1ZSA9IGRpY3QuYzsKCQl2YXIgbGVmdCA9IGRpY3QuZDsKCQl2YXIgbENvbG9yID0gbGVmdC5hOwoJCXZhciBsTGVmdCA9IGxlZnQuZDsKCQl2YXIgcmlnaHQgPSBkaWN0LmU7CgkJaWYgKGxDb2xvci4kID09PSAnQmxhY2snKSB7CgkJCWlmICgobExlZnQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChsTGVmdC5hLiQgPT09ICdSZWQnKSkgewoJCQkJdmFyIF92MyA9IGxMZWZ0LmE7CgkJCQlyZXR1cm4gQTUoCgkJCQkJJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLAoJCQkJCWNvbG9yLAoJCQkJCWtleSwKCQkJCQl2YWx1ZSwKCQkJCQkkZWxtJGNvcmUkRGljdCRyZW1vdmVNaW4obGVmdCksCgkJCQkJcmlnaHQpOwoJCQl9IGVsc2UgewoJCQkJdmFyIF92NCA9ICRlbG0kY29yZSREaWN0JG1vdmVSZWRMZWZ0KGRpY3QpOwoJCQkJaWYgKF92NC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgewoJCQkJCXZhciBuQ29sb3IgPSBfdjQuYTsKCQkJCQl2YXIgbktleSA9IF92NC5iOwoJCQkJCXZhciBuVmFsdWUgPSBfdjQuYzsKCQkJCQl2YXIgbkxlZnQgPSBfdjQuZDsKCQkJCQl2YXIgblJpZ2h0ID0gX3Y0LmU7CgkJCQkJcmV0dXJuIEE1KAoJCQkJCQkkZWxtJGNvcmUkRGljdCRiYWxhbmNlLAoJCQkJCQluQ29sb3IsCgkJCQkJCW5LZXksCgkJCQkJCW5WYWx1ZSwKCQkJCQkJJGVsbSRjb3JlJERpY3QkcmVtb3ZlTWluKG5MZWZ0KSwKCQkJCQkJblJpZ2h0KTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSREaWN0JFJCRW1wdHlfZWxtX2J1aWx0aW47CgkJCQl9CgkJCX0KCQl9IGVsc2UgewoJCQlyZXR1cm4gQTUoCgkJCQkkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sCgkJCQljb2xvciwKCQkJCWtleSwKCQkJCXZhbHVlLAoJCQkJJGVsbSRjb3JlJERpY3QkcmVtb3ZlTWluKGxlZnQpLAoJCQkJcmlnaHQpOwoJCX0KCX0gZWxzZSB7CgkJcmV0dXJuICRlbG0kY29yZSREaWN0JFJCRW1wdHlfZWxtX2J1aWx0aW47Cgl9Cn07CnZhciAkZWxtJGNvcmUkRGljdCRyZW1vdmVIZWxwID0gRjIoCglmdW5jdGlvbiAodGFyZ2V0S2V5LCBkaWN0KSB7CgkJaWYgKGRpY3QuJCA9PT0gJ1JCRW1wdHlfZWxtX2J1aWx0aW4nKSB7CgkJCXJldHVybiAkZWxtJGNvcmUkRGljdCRSQkVtcHR5X2VsbV9idWlsdGluOwoJCX0gZWxzZSB7CgkJCXZhciBjb2xvciA9IGRpY3QuYTsKCQkJdmFyIGtleSA9IGRpY3QuYjsKCQkJdmFyIHZhbHVlID0gZGljdC5jOwoJCQl2YXIgbGVmdCA9IGRpY3QuZDsKCQkJdmFyIHJpZ2h0ID0gZGljdC5lOwoJCQlpZiAoX1V0aWxzX2NtcCh0YXJnZXRLZXksIGtleSkgPCAwKSB7CgkJCQlpZiAoKGxlZnQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChsZWZ0LmEuJCA9PT0gJ0JsYWNrJykpIHsKCQkJCQl2YXIgX3Y0ID0gbGVmdC5hOwoJCQkJCXZhciBsTGVmdCA9IGxlZnQuZDsKCQkJCQlpZiAoKGxMZWZ0LiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSAmJiAobExlZnQuYS4kID09PSAnUmVkJykpIHsKCQkJCQkJdmFyIF92NiA9IGxMZWZ0LmE7CgkJCQkJCXJldHVybiBBNSgKCQkJCQkJCSRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwKCQkJCQkJCWNvbG9yLAoJCQkJCQkJa2V5LAoJCQkJCQkJdmFsdWUsCgkJCQkJCQlBMigkZWxtJGNvcmUkRGljdCRyZW1vdmVIZWxwLCB0YXJnZXRLZXksIGxlZnQpLAoJCQkJCQkJcmlnaHQpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjcgPSAkZWxtJGNvcmUkRGljdCRtb3ZlUmVkTGVmdChkaWN0KTsKCQkJCQkJaWYgKF92Ny4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgewoJCQkJCQkJdmFyIG5Db2xvciA9IF92Ny5hOwoJCQkJCQkJdmFyIG5LZXkgPSBfdjcuYjsKCQkJCQkJCXZhciBuVmFsdWUgPSBfdjcuYzsKCQkJCQkJCXZhciBuTGVmdCA9IF92Ny5kOwoJCQkJCQkJdmFyIG5SaWdodCA9IF92Ny5lOwoJCQkJCQkJcmV0dXJuIEE1KAoJCQkJCQkJCSRlbG0kY29yZSREaWN0JGJhbGFuY2UsCgkJCQkJCQkJbkNvbG9yLAoJCQkJCQkJCW5LZXksCgkJCQkJCQkJblZhbHVlLAoJCQkJCQkJCUEyKCRlbG0kY29yZSREaWN0JHJlbW92ZUhlbHAsIHRhcmdldEtleSwgbkxlZnQpLAoJCQkJCQkJCW5SaWdodCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJERpY3QkUkJFbXB0eV9lbG1fYnVpbHRpbjsKCQkJCQkJfQoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIEE1KAoJCQkJCQkkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sCgkJCQkJCWNvbG9yLAoJCQkJCQlrZXksCgkJCQkJCXZhbHVlLAoJCQkJCQlBMigkZWxtJGNvcmUkRGljdCRyZW1vdmVIZWxwLCB0YXJnZXRLZXksIGxlZnQpLAoJCQkJCQlyaWdodCk7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJERpY3QkcmVtb3ZlSGVscEVRR1QsCgkJCQkJdGFyZ2V0S2V5LAoJCQkJCUE3KCRlbG0kY29yZSREaWN0JHJlbW92ZUhlbHBQcmVwRVFHVCwgdGFyZ2V0S2V5LCBkaWN0LCBjb2xvciwga2V5LCB2YWx1ZSwgbGVmdCwgcmlnaHQpKTsKCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJERpY3QkcmVtb3ZlSGVscEVRR1QgPSBGMigKCWZ1bmN0aW9uICh0YXJnZXRLZXksIGRpY3QpIHsKCQlpZiAoZGljdC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgewoJCQl2YXIgY29sb3IgPSBkaWN0LmE7CgkJCXZhciBrZXkgPSBkaWN0LmI7CgkJCXZhciB2YWx1ZSA9IGRpY3QuYzsKCQkJdmFyIGxlZnQgPSBkaWN0LmQ7CgkJCXZhciByaWdodCA9IGRpY3QuZTsKCQkJaWYgKF9VdGlsc19lcSh0YXJnZXRLZXksIGtleSkpIHsKCQkJCXZhciBfdjEgPSAkZWxtJGNvcmUkRGljdCRnZXRNaW4ocmlnaHQpOwoJCQkJaWYgKF92MS4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgewoJCQkJCXZhciBtaW5LZXkgPSBfdjEuYjsKCQkJCQl2YXIgbWluVmFsdWUgPSBfdjEuYzsKCQkJCQlyZXR1cm4gQTUoCgkJCQkJCSRlbG0kY29yZSREaWN0JGJhbGFuY2UsCgkJCQkJCWNvbG9yLAoJCQkJCQltaW5LZXksCgkJCQkJCW1pblZhbHVlLAoJCQkJCQlsZWZ0LAoJCQkJCQkkZWxtJGNvcmUkRGljdCRyZW1vdmVNaW4ocmlnaHQpKTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSREaWN0JFJCRW1wdHlfZWxtX2J1aWx0aW47CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gQTUoCgkJCQkJJGVsbSRjb3JlJERpY3QkYmFsYW5jZSwKCQkJCQljb2xvciwKCQkJCQlrZXksCgkJCQkJdmFsdWUsCgkJCQkJbGVmdCwKCQkJCQlBMigkZWxtJGNvcmUkRGljdCRyZW1vdmVIZWxwLCB0YXJnZXRLZXksIHJpZ2h0KSk7CgkJCX0KCQl9IGVsc2UgewoJCQlyZXR1cm4gJGVsbSRjb3JlJERpY3QkUkJFbXB0eV9lbG1fYnVpbHRpbjsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSREaWN0JHJlbW92ZSA9IEYyKAoJZnVuY3Rpb24gKGtleSwgZGljdCkgewoJCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkRGljdCRyZW1vdmVIZWxwLCBrZXksIGRpY3QpOwoJCWlmICgoX3YwLiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSAmJiAoX3YwLmEuJCA9PT0gJ1JlZCcpKSB7CgkJCXZhciBfdjEgPSBfdjAuYTsKCQkJdmFyIGsgPSBfdjAuYjsKCQkJdmFyIHYgPSBfdjAuYzsKCQkJdmFyIGwgPSBfdjAuZDsKCQkJdmFyIHIgPSBfdjAuZTsKCQkJcmV0dXJuIEE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkQmxhY2ssIGssIHYsIGwsIHIpOwoJCX0gZWxzZSB7CgkJCXZhciB4ID0gX3YwOwoJCQlyZXR1cm4geDsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSREaWN0JHVwZGF0ZSA9IEYzKAoJZnVuY3Rpb24gKHRhcmdldEtleSwgYWx0ZXIsIGRpY3Rpb25hcnkpIHsKCQl2YXIgX3YwID0gYWx0ZXIoCgkJCUEyKCRlbG0kY29yZSREaWN0JGdldCwgdGFyZ2V0S2V5LCBkaWN0aW9uYXJ5KSk7CgkJaWYgKF92MC4kID09PSAnSnVzdCcpIHsKCQkJdmFyIHZhbHVlID0gX3YwLmE7CgkJCXJldHVybiBBMygkZWxtJGNvcmUkRGljdCRpbnNlcnQsIHRhcmdldEtleSwgdmFsdWUsIGRpY3Rpb25hcnkpOwoJCX0gZWxzZSB7CgkJCXJldHVybiBBMigkZWxtJGNvcmUkRGljdCRyZW1vdmUsIHRhcmdldEtleSwgZGljdGlvbmFyeSk7CgkJfQoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRidWlsZFRyZWUgPSBGMygKCWZ1bmN0aW9uIChsZW5ndGhzLCBvZmZzZXQsIG51bSkgewoJCXZhciB0YWJsZURpY3QgPSBmdW5jdGlvbiAoKSB7CgkJCXZhciB1cGRhdGVyID0gZnVuY3Rpb24gKG1heWJlVmFsdWUpIHsKCQkJCWlmIChtYXliZVZhbHVlLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgxKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHYgPSBtYXliZVZhbHVlLmE7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KHYgKyAxKTsKCQkJCX0KCQkJfTsKCQkJdmFyIGZvbGRlciA9IEYzKAoJCQkJZnVuY3Rpb24gKGtleSwgdmFsdWUsIGFjY3VtKSB7CgkJCQkJcmV0dXJuICgoX1V0aWxzX2NtcChrZXksIG9mZnNldCkgPiAtMSkgJiYgKF9VdGlsc19jbXAoa2V5LCBudW0gKyBvZmZzZXQpIDwgMCkpID8gQTMoJGVsbSRjb3JlJERpY3QkdXBkYXRlLCB2YWx1ZSwgdXBkYXRlciwgYWNjdW0pIDogYWNjdW07CgkJCQl9KTsKCQkJcmV0dXJuIEEzKCRlbG0kY29yZSREaWN0JGZvbGRsLCBmb2xkZXIsICRlbG0kY29yZSREaWN0JGVtcHR5LCBsZW5ndGhzKTsKCQl9KCk7CgkJdmFyIG9mZnNldHNEaWN0ID0gQTMoCgkJCSRlbG0kY29yZSREaWN0JGZvbGRsLAoJCQlGMygKCQkJCWZ1bmN0aW9uIChrZXksIHZhbHVlLCBfdjQpIHsKCQkJCQl2YXIgc3VtID0gX3Y0LmE7CgkJCQkJdmFyIGRpY3QgPSBfdjQuYjsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJc3VtICsgdmFsdWUsCgkJCQkJCUEzKCRlbG0kY29yZSREaWN0JGluc2VydCwga2V5LCBzdW0sIGRpY3QpKTsKCQkJCX0pLAoJCQlfVXRpbHNfVHVwbGUyKDAsICRlbG0kY29yZSREaWN0JGVtcHR5KSwKCQkJdGFibGVEaWN0KTsKCQl2YXIgbmV3VGFibGUgPSBmdW5jdGlvbiAoKSB7CgkJCXZhciBoZWxwZXIgPSBGNCgKCQkJCWZ1bmN0aW9uIChrZXksIHZhbHVlLCBpLCBhcnJheSkgewoJCQkJCWhlbHBlcjoKCQkJCQl3aGlsZSAodHJ1ZSkgewoJCQkJCQlpZiAoX1V0aWxzX2NtcChpLCBrZXkpID4gMCkgewoJCQkJCQkJdmFyICR0ZW1wJGtleSA9IGtleSwKCQkJCQkJCQkkdGVtcCR2YWx1ZSA9IHZhbHVlLAoJCQkJCQkJCSR0ZW1wJGkgPSBpIC0gMSwKCQkJCQkJCQkkdGVtcCRhcnJheSA9IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIDAsIGFycmF5KTsKCQkJCQkJCWtleSA9ICR0ZW1wJGtleTsKCQkJCQkJCXZhbHVlID0gJHRlbXAkdmFsdWU7CgkJCQkJCQlpID0gJHRlbXAkaTsKCQkJCQkJCWFycmF5ID0gJHRlbXAkYXJyYXk7CgkJCQkJCQljb250aW51ZSBoZWxwZXI7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgdmFsdWUsIGFycmF5KTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0pOwoJCQl2YXIgZm9sZEhlbHAgPSBGMygKCQkJCWZ1bmN0aW9uIChrZXksIHZhbHVlLCBfdjMpIHsKCQkJCQl2YXIgaSA9IF92My5hOwoJCQkJCXZhciBhcnJheSA9IF92My5iOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlrZXkgLSAxLAoJCQkJCQlBNChoZWxwZXIsIGtleSwgdmFsdWUsIGksIGFycmF5KSk7CgkJCQl9KTsKCQkJdmFyIGFub3RoZXJHbyA9IEYyKAoJCQkJZnVuY3Rpb24gKGksIGFycmF5KSB7CgkJCQkJYW5vdGhlckdvOgoJCQkJCXdoaWxlICh0cnVlKSB7CgkJCQkJCWlmIChpID49IDApIHsKCQkJCQkJCXZhciAkdGVtcCRpID0gaSAtIDEsCgkJCQkJCQkJJHRlbXAkYXJyYXkgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCAwLCBhcnJheSk7CgkJCQkJCQlpID0gJHRlbXAkaTsKCQkJCQkJCWFycmF5ID0gJHRlbXAkYXJyYXk7CgkJCQkJCQljb250aW51ZSBhbm90aGVyR287CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlyZXR1cm4gYXJyYXk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9KTsKCQkJcmV0dXJuIGZ1bmN0aW9uIChfdjIpIHsKCQkJCXZhciBhID0gX3YyLmE7CgkJCQl2YXIgYiA9IF92Mi5iOwoJCQkJcmV0dXJuIEEyKGFub3RoZXJHbywgYSwgYik7CgkJCX0oCgkJCQlBMygKCQkJCQkkZWxtJGNvcmUkRGljdCRmb2xkciwKCQkJCQlmb2xkSGVscCwKCQkJCQlfVXRpbHNfVHVwbGUyKDE1LCBfTGlzdF9OaWwpLAoJCQkJCXRhYmxlRGljdCkpOwoJCX0oKTsKCQl2YXIgZ28yID0gRjMoCgkJCWZ1bmN0aW9uIChpLCBjdXJyZW50VHJhbnNsYXRpb24sIGN1cnJlbnRPZmZzZXRzKSB7CgkJCQlnbzI6CgkJCQl3aGlsZSAodHJ1ZSkgewoJCQkJCWlmICgoaSAtIG51bSkgPCAwKSB7CgkJCQkJCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkRGljdCRnZXQsIG9mZnNldCArIGksIGxlbmd0aHMpOwoJCQkJCQlpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJdmFyICR0ZW1wJGkgPSBpICsgMSwKCQkJCQkJCQkkdGVtcCRjdXJyZW50VHJhbnNsYXRpb24gPSBjdXJyZW50VHJhbnNsYXRpb24sCgkJCQkJCQkJJHRlbXAkY3VycmVudE9mZnNldHMgPSBjdXJyZW50T2Zmc2V0czsKCQkJCQkJCWkgPSAkdGVtcCRpOwoJCQkJCQkJY3VycmVudFRyYW5zbGF0aW9uID0gJHRlbXAkY3VycmVudFRyYW5zbGF0aW9uOwoJCQkJCQkJY3VycmVudE9mZnNldHMgPSAkdGVtcCRjdXJyZW50T2Zmc2V0czsKCQkJCQkJCWNvbnRpbnVlIGdvMjsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciB2ID0gX3YwLmE7CgkJCQkJCQlpZiAoISghdikpIHsKCQkJCQkJCQl2YXIgX3YxID0gQTIoJGVsbSRjb3JlJERpY3QkZ2V0LCB2LCBjdXJyZW50T2Zmc2V0cyk7CgkJCQkJCQkJaWYgKF92MS4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJcmV0dXJuIGN1cnJlbnRUcmFuc2xhdGlvbjsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgdyA9IF92MS5hOwoJCQkJCQkJCQl2YXIgJHRlbXAkaSA9IGkgKyAxLAoJCQkJCQkJCQkJJHRlbXAkY3VycmVudFRyYW5zbGF0aW9uID0gQTMoJGVsbSRjb3JlJEFycmF5JHNldCwgdywgaSwgY3VycmVudFRyYW5zbGF0aW9uKSwKCQkJCQkJCQkJCSR0ZW1wJGN1cnJlbnRPZmZzZXRzID0gQTMoJGVsbSRjb3JlJERpY3QkaW5zZXJ0LCB2LCB3ICsgMSwgY3VycmVudE9mZnNldHMpOwoJCQkJCQkJCQlpID0gJHRlbXAkaTsKCQkJCQkJCQkJY3VycmVudFRyYW5zbGF0aW9uID0gJHRlbXAkY3VycmVudFRyYW5zbGF0aW9uOwoJCQkJCQkJCQljdXJyZW50T2Zmc2V0cyA9ICR0ZW1wJGN1cnJlbnRPZmZzZXRzOwoJCQkJCQkJCQljb250aW51ZSBnbzI7CgkJCQkJCQkJfQoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgJHRlbXAkaSA9IGkgKyAxLAoJCQkJCQkJCQkkdGVtcCRjdXJyZW50VHJhbnNsYXRpb24gPSBjdXJyZW50VHJhbnNsYXRpb24sCgkJCQkJCQkJCSR0ZW1wJGN1cnJlbnRPZmZzZXRzID0gY3VycmVudE9mZnNldHM7CgkJCQkJCQkJaSA9ICR0ZW1wJGk7CgkJCQkJCQkJY3VycmVudFRyYW5zbGF0aW9uID0gJHRlbXAkY3VycmVudFRyYW5zbGF0aW9uOwoJCQkJCQkJCWN1cnJlbnRPZmZzZXRzID0gJHRlbXAkY3VycmVudE9mZnNldHM7CgkJCQkJCQkJY29udGludWUgZ28yOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJcmV0dXJuIGN1cnJlbnRUcmFuc2xhdGlvbjsKCQkJCQl9CgkJCQl9CgkJCX0pOwoJCXZhciB0cmFuc2xhdGlvbjIgPSBBMygKCQkJZ28yLAoJCQkwLAoJCQlBMigkZWxtJGNvcmUkQXJyYXkkcmVwZWF0LCBudW0sIDApLAoJCQlvZmZzZXRzRGljdC5iKTsKCQlyZXR1cm4ge3RhYmxlOiBuZXdUYWJsZSwgdHJhbnM6IHRyYW5zbGF0aW9uMn07Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGNsY0luZGljZXMgPSBfTGlzdF9mcm9tQXJyYXkoCglbMTYsIDE3LCAxOCwgMCwgOCwgNywgOSwgNiwgMTAsIDUsIDExLCA0LCAxMiwgMywgMTMsIDIsIDE0LCAxLCAxNV0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0U2V0JEJpdFNldDMyMCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4gZnVuY3Rpb24gKGIpIHsKCQlyZXR1cm4gZnVuY3Rpb24gKGMpIHsKCQkJcmV0dXJuIGZ1bmN0aW9uIChkKSB7CgkJCQlyZXR1cm4gZnVuY3Rpb24gKGUpIHsKCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGYpIHsKCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChnKSB7CgkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGgpIHsKCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGkpIHsKCQkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChqKSB7CgkJCQkJCQkJCQlyZXR1cm4geyQ6ICdCaXRTZXQzMjAnLCBhOiBhLCBiOiBiLCBjOiBjLCBkOiBkLCBlOiBlLCBmOiBmLCBnOiBnLCBoOiBoLCBpOiBpLCBqOiBqfTsKCQkJCQkJCQkJfTsKCQkJCQkJCQl9OwoJCQkJCQkJfTsKCQkJCQkJfTsKCQkJCQl9OwoJCQkJfTsKCQkJfTsKCQl9OwoJfTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFNldCRpbnNlcnQgPSBGMigKCWZ1bmN0aW9uIChuLCBpbnB1dCkgewoJCXZhciBiMSA9IGlucHV0LmE7CgkJdmFyIGIyID0gaW5wdXQuYjsKCQl2YXIgYjMgPSBpbnB1dC5jOwoJCXZhciBiNCA9IGlucHV0LmQ7CgkJdmFyIGI1ID0gaW5wdXQuZTsKCQl2YXIgYjYgPSBpbnB1dC5mOwoJCXZhciBiNyA9IGlucHV0Lmc7CgkJdmFyIGI4ID0gaW5wdXQuaDsKCQl2YXIgYjkgPSBpbnB1dC5pOwoJCXZhciBiMTAgPSBpbnB1dC5qOwoJCWlmIChuID49IDMyMCkgewoJCQlyZXR1cm4gaW5wdXQ7CgkJfSBlbHNlIHsKCQkJdmFyIGJpdCA9IDEgPDwgKG4gJSAzMik7CgkJCXZhciBfdjAgPSAobiAvIDMyKSB8IDA7CgkJCXN3aXRjaCAoX3YwKSB7CgkJCQljYXNlIDA6CgkJCQkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFNldCRCaXRTZXQzMjAoYml0IHwgYjEpKGIyKShiMykoYjQpKGI1KShiNikoYjcpKGI4KShiOSkoYjEwKTsKCQkJCWNhc2UgMToKCQkJCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0U2V0JEJpdFNldDMyMChiMSkoYml0IHwgYjIpKGIzKShiNCkoYjUpKGI2KShiNykoYjgpKGI5KShiMTApOwoJCQkJY2FzZSAyOgoJCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRTZXQkQml0U2V0MzIwKGIxKShiMikoYml0IHwgYjMpKGI0KShiNSkoYjYpKGI3KShiOCkoYjkpKGIxMCk7CgkJCQljYXNlIDM6CgkJCQkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFNldCRCaXRTZXQzMjAoYjEpKGIyKShiMykoYml0IHwgYjQpKGI1KShiNikoYjcpKGI4KShiOSkoYjEwKTsKCQkJCWNhc2UgNDoKCQkJCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0U2V0JEJpdFNldDMyMChiMSkoYjIpKGIzKShiNCkoYml0IHwgYjUpKGI2KShiNykoYjgpKGI5KShiMTApOwoJCQkJY2FzZSA1OgoJCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRTZXQkQml0U2V0MzIwKGIxKShiMikoYjMpKGI0KShiNSkoYml0IHwgYjYpKGI3KShiOCkoYjkpKGIxMCk7CgkJCQljYXNlIDY6CgkJCQkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFNldCRCaXRTZXQzMjAoYjEpKGIyKShiMykoYjQpKGI1KShiNikoYml0IHwgYjcpKGI4KShiOSkoYjEwKTsKCQkJCWNhc2UgNzoKCQkJCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0U2V0JEJpdFNldDMyMChiMSkoYjIpKGIzKShiNCkoYjUpKGI2KShiNykoYml0IHwgYjgpKGI5KShiMTApOwoJCQkJY2FzZSA4OgoJCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRTZXQkQml0U2V0MzIwKGIxKShiMikoYjMpKGI0KShiNSkoYjYpKGI3KShiOCkoYml0IHwgYjkpKGIxMCk7CgkJCQljYXNlIDk6CgkJCQkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFNldCRCaXRTZXQzMjAoYjEpKGIyKShiMykoYjQpKGI1KShiNikoYjcpKGI4KShiOSkoYml0IHwgYjEwKTsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIGlucHV0OwoJCQl9CgkJfQoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRTZXQkbWVtYmVyID0gRjIoCglmdW5jdGlvbiAobiwgaW5wdXQpIHsKCQl2YXIgYjEgPSBpbnB1dC5hOwoJCXZhciBiMiA9IGlucHV0LmI7CgkJdmFyIGIzID0gaW5wdXQuYzsKCQl2YXIgYjQgPSBpbnB1dC5kOwoJCXZhciBiNSA9IGlucHV0LmU7CgkJdmFyIGI2ID0gaW5wdXQuZjsKCQl2YXIgYjcgPSBpbnB1dC5nOwoJCXZhciBiOCA9IGlucHV0Lmg7CgkJdmFyIGI5ID0gaW5wdXQuaTsKCQl2YXIgYjEwID0gaW5wdXQuajsKCQlpZiAobiA+PSAzMjApIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0gZWxzZSB7CgkJCXZhciBiaXQgPSAxIDw8IChuICUgMzIpOwoJCQl2YXIgX3YwID0gKG4gLyAzMikgfCAwOwoJCQlzd2l0Y2ggKF92MCkgewoJCQkJY2FzZSAwOgoJCQkJCXJldHVybiAoYml0ICYgYjEpID4gMDsKCQkJCWNhc2UgMToKCQkJCQlyZXR1cm4gKGJpdCAmIGIyKSA+IDA7CgkJCQljYXNlIDI6CgkJCQkJcmV0dXJuIChiaXQgJiBiMykgPiAwOwoJCQkJY2FzZSAzOgoJCQkJCXJldHVybiAoYml0ICYgYjQpID4gMDsKCQkJCWNhc2UgNDoKCQkJCQlyZXR1cm4gKGJpdCAmIGI1KSA+IDA7CgkJCQljYXNlIDU6CgkJCQkJcmV0dXJuIChiaXQgJiBiNikgPiAwOwoJCQkJY2FzZSA2OgoJCQkJCXJldHVybiAoYml0ICYgYjcpID4gMDsKCQkJCWNhc2UgNzoKCQkJCQlyZXR1cm4gKGJpdCAmIGI4KSA+IDA7CgkJCQljYXNlIDg6CgkJCQkJcmV0dXJuIChiaXQgJiBiOSkgPiAwOwoJCQkJY2FzZSA5OgoJCQkJCXJldHVybiAoYml0ICYgYjEwKSA+IDA7CgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCX0KCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0U2V0JHJlbW92ZSA9IEYyKAoJZnVuY3Rpb24gKG4sIGlucHV0KSB7CgkJdmFyIGIxID0gaW5wdXQuYTsKCQl2YXIgYjIgPSBpbnB1dC5iOwoJCXZhciBiMyA9IGlucHV0LmM7CgkJdmFyIGI0ID0gaW5wdXQuZDsKCQl2YXIgYjUgPSBpbnB1dC5lOwoJCXZhciBiNiA9IGlucHV0LmY7CgkJdmFyIGI3ID0gaW5wdXQuZzsKCQl2YXIgYjggPSBpbnB1dC5oOwoJCXZhciBiOSA9IGlucHV0Lmk7CgkJdmFyIGIxMCA9IGlucHV0Lmo7CgkJaWYgKG4gPj0gMzIwKSB7CgkJCXJldHVybiBpbnB1dDsKCQl9IGVsc2UgewoJCQl2YXIgYml0ID0gfigxIDw8IChuICUgMzIpKTsKCQkJdmFyIF92MCA9IChuIC8gMzIpIHwgMDsKCQkJc3dpdGNoIChfdjApIHsKCQkJCWNhc2UgMDoKCQkJCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0U2V0JEJpdFNldDMyMChiaXQgJiBiMSkoYjIpKGIzKShiNCkoYjUpKGI2KShiNykoYjgpKGI5KShiMTApOwoJCQkJY2FzZSAxOgoJCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRTZXQkQml0U2V0MzIwKGIxKShiaXQgJiBiMikoYjMpKGI0KShiNSkoYjYpKGI3KShiOCkoYjkpKGIxMCk7CgkJCQljYXNlIDI6CgkJCQkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFNldCRCaXRTZXQzMjAoYjEpKGIyKShiaXQgJiBiMykoYjQpKGI1KShiNikoYjcpKGI4KShiOSkoYjEwKTsKCQkJCWNhc2UgMzoKCQkJCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0U2V0JEJpdFNldDMyMChiMSkoYjIpKGIzKShiaXQgJiBiNCkoYjUpKGI2KShiNykoYjgpKGI5KShiMTApOwoJCQkJY2FzZSA0OgoJCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRTZXQkQml0U2V0MzIwKGIxKShiMikoYjMpKGI0KShiaXQgJiBiNSkoYjYpKGI3KShiOCkoYjkpKGIxMCk7CgkJCQljYXNlIDU6CgkJCQkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFNldCRCaXRTZXQzMjAoYjEpKGIyKShiMykoYjQpKGI1KShiaXQgJiBiNikoYjcpKGI4KShiOSkoYjEwKTsKCQkJCWNhc2UgNjoKCQkJCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0U2V0JEJpdFNldDMyMChiMSkoYjIpKGIzKShiNCkoYjUpKGI2KShiaXQgJiBiNykoYjgpKGI5KShiMTApOwoJCQkJY2FzZSA3OgoJCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRTZXQkQml0U2V0MzIwKGIxKShiMikoYjMpKGI0KShiNSkoYjYpKGI3KShiaXQgJiBiOCkoYjkpKGIxMCk7CgkJCQljYXNlIDg6CgkJCQkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFNldCRCaXRTZXQzMjAoYjEpKGIyKShiMykoYjQpKGI1KShiNikoYjcpKGI4KShiaXQgJiBiOSkoYjEwKTsKCQkJCWNhc2UgOToKCQkJCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0U2V0JEJpdFNldDMyMChiMSkoYjIpKGIzKShiNCkoYjUpKGI2KShiNykoYjgpKGI5KShiaXQgJiBiMTApOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gaW5wdXQ7CgkJCX0KCQl9Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGNvcHlTZWdtZW50ID0gRjUoCglmdW5jdGlvbiAoaSwgdmFsdWUsIGJpdHNldCwgbGVuZ3RocywgbGVuZ3RoKSB7CgkJdmFyIGVuZCA9IGkgKyBsZW5ndGg7CgkJdmFyIGdvID0gRjMoCgkJCWZ1bmN0aW9uIChqLCBjdXJyZW50Qml0U2V0LCBhY2N1bSkgewoJCQkJZ286CgkJCQl3aGlsZSAodHJ1ZSkgewoJCQkJCWlmICgoaiAtIGVuZCkgPCAwKSB7CgkJCQkJCWlmICghKCF2YWx1ZSkpIHsKCQkJCQkJCXZhciAkdGVtcCRqID0gaiArIDEsCgkJCQkJCQkJJHRlbXAkY3VycmVudEJpdFNldCA9IEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFNldCRpbnNlcnQsIGosIGN1cnJlbnRCaXRTZXQpLAoJCQkJCQkJCSR0ZW1wJGFjY3VtID0gQTMoJGVsbSRjb3JlJERpY3QkaW5zZXJ0LCBqLCB2YWx1ZSwgYWNjdW0pOwoJCQkJCQkJaiA9ICR0ZW1wJGo7CgkJCQkJCQljdXJyZW50Qml0U2V0ID0gJHRlbXAkY3VycmVudEJpdFNldDsKCQkJCQkJCWFjY3VtID0gJHRlbXAkYWNjdW07CgkJCQkJCQljb250aW51ZSBnbzsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWlmIChBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRTZXQkbWVtYmVyLCBqLCBjdXJyZW50Qml0U2V0KSkgewoJCQkJCQkJCXZhciAkdGVtcCRqID0gaiArIDEsCgkJCQkJCQkJCSR0ZW1wJGN1cnJlbnRCaXRTZXQgPSBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRTZXQkcmVtb3ZlLCBqLCBjdXJyZW50Qml0U2V0KSwKCQkJCQkJCQkJJHRlbXAkYWNjdW0gPSBBMigkZWxtJGNvcmUkRGljdCRyZW1vdmUsIGosIGFjY3VtKTsKCQkJCQkJCQlqID0gJHRlbXAkajsKCQkJCQkJCQljdXJyZW50Qml0U2V0ID0gJHRlbXAkY3VycmVudEJpdFNldDsKCQkJCQkJCQlhY2N1bSA9ICR0ZW1wJGFjY3VtOwoJCQkJCQkJCWNvbnRpbnVlIGdvOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgJHRlbXAkaiA9IGogKyAxLAoJCQkJCQkJCQkkdGVtcCRjdXJyZW50Qml0U2V0ID0gY3VycmVudEJpdFNldCwKCQkJCQkJCQkJJHRlbXAkYWNjdW0gPSBhY2N1bTsKCQkJCQkJCQlqID0gJHRlbXAkajsKCQkJCQkJCQljdXJyZW50Qml0U2V0ID0gJHRlbXAkY3VycmVudEJpdFNldDsKCQkJCQkJCQlhY2N1bSA9ICR0ZW1wJGFjY3VtOwoJCQkJCQkJCWNvbnRpbnVlIGdvOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoY3VycmVudEJpdFNldCwgYWNjdW0pOwoJCQkJCX0KCQkJCX0KCQkJfSk7CgkJdmFyIF92MCA9IEEzKGdvLCBpLCBiaXRzZXQsIGxlbmd0aHMpOwoJCXZhciBuZXdCaXRTZXQgPSBfdjAuYTsKCQl2YXIgbmV3TGVuZ3RocyA9IF92MC5iOwoJCXJldHVybiBfVXRpbHNfVHVwbGUzKGkgKyBsZW5ndGgsIG5ld0JpdFNldCwgbmV3TGVuZ3Rocyk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGRlY29kZVN5bWJvbElubmVyTG9vcCA9IEY1KAoJZnVuY3Rpb24gKHRhYmxlLCBjdXIsIHRhZywgYml0c0F2YWlsYWJsZSwgc3VtKSB7CgkJZGVjb2RlU3ltYm9sSW5uZXJMb29wOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBuZXdUYWcgPSB0YWcgPj4+IDE7CgkJCWlmICghdGFibGUuYikgewoJCQkJcmV0dXJuIHtiaXRzQXZhaWxhYmxlOiBiaXRzQXZhaWxhYmxlLCBjdXI6IGN1ciwgc3VtOiBzdW0sIHRhZzogdGFnfTsKCQkJfSBlbHNlIHsKCQkJCXZhciB2YWx1ZSA9IHRhYmxlLmE7CgkJCQl2YXIgcmVzdCA9IHRhYmxlLmI7CgkJCQl2YXIgbmV3ZXJDdXIgPSAoKGN1ciA8PCAxKSArICh0YWcgJiAxKSkgLSB2YWx1ZTsKCQkJCXZhciBuZXdTdW0gPSBzdW0gKyB2YWx1ZTsKCQkJCWlmIChuZXdlckN1ciA+PSAwKSB7CgkJCQkJdmFyICR0ZW1wJHRhYmxlID0gcmVzdCwKCQkJCQkJJHRlbXAkY3VyID0gbmV3ZXJDdXIsCgkJCQkJCSR0ZW1wJHRhZyA9IG5ld1RhZywKCQkJCQkJJHRlbXAkYml0c0F2YWlsYWJsZSA9IGJpdHNBdmFpbGFibGUgLSAxLAoJCQkJCQkkdGVtcCRzdW0gPSBuZXdTdW07CgkJCQkJdGFibGUgPSAkdGVtcCR0YWJsZTsKCQkJCQljdXIgPSAkdGVtcCRjdXI7CgkJCQkJdGFnID0gJHRlbXAkdGFnOwoJCQkJCWJpdHNBdmFpbGFibGUgPSAkdGVtcCRiaXRzQXZhaWxhYmxlOwoJCQkJCXN1bSA9ICR0ZW1wJHN1bTsKCQkJCQljb250aW51ZSBkZWNvZGVTeW1ib2xJbm5lckxvb3A7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiB7Yml0c0F2YWlsYWJsZTogYml0c0F2YWlsYWJsZSAtIDEsIGN1cjogbmV3ZXJDdXIsIHN1bTogbmV3U3VtLCB0YWc6IG5ld1RhZ307CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRtb3ZlRnJvbVJlc2VydmUgPSBGMigKCWZ1bmN0aW9uIChuYml0cywgc3RhdGUpIHsKCQl2YXIgbWFza2VkID0gKG5iaXRzID09PSAzMikgPyAoc3RhdGUucmVzZXJ2ZSA8PCBzdGF0ZS5iaXRzQXZhaWxhYmxlKSA6ICgoKCgxIDw8IG5iaXRzKSAtIDEpICYgc3RhdGUucmVzZXJ2ZSkgPDwgc3RhdGUuYml0c0F2YWlsYWJsZSk7CgkJcmV0dXJuIHtiaXRzQXZhaWxhYmxlOiBzdGF0ZS5iaXRzQXZhaWxhYmxlICsgbmJpdHMsIGJ1ZmZlcjogc3RhdGUuYnVmZmVyLCByZXNlcnZlOiBzdGF0ZS5yZXNlcnZlID4+PiBuYml0cywgcmVzZXJ2ZUF2YWlsYWJsZTogc3RhdGUucmVzZXJ2ZUF2YWlsYWJsZSAtIG5iaXRzLCB0YWc6IG1hc2tlZCB8IHN0YXRlLnRhZ307Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRydW5EZWNvZGVyID0gRjMoCglmdW5jdGlvbiAod2lkdGgsIHZhbHVlRGVjb2Rlciwgc3RhdGUpIHsKCQl2YXIgZGVjb2RlciA9IEEzKAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAyLAoJCQkkZWxtJGNvcmUkVHVwbGUkcGFpciwKCQkJdmFsdWVEZWNvZGVyLAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRieXRlcygKCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkd2lkdGgoc3RhdGUuYnVmZmVyKSAtIHdpZHRoKSk7CgkJdmFyIF92MCA9IEEyKCRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGRlY29kZSwgZGVjb2Rlciwgc3RhdGUuYnVmZmVyKTsKCQlpZiAoX3YwLiQgPT09ICdKdXN0JykgewoJCQl2YXIgdmFsdWUgPSBfdjAuYTsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2sodmFsdWUpOwoJCX0gZWxzZSB7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycignQml0UmVhZGVyLnJ1bkRlY29kZXI6IFVuZXhwZWN0ZWQgZW5kIG9mIEJ5dGVzJyk7CgkJfQoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkdW5zaWduZWRJbnQyNCA9IGZ1bmN0aW9uIChlbmRpYW5uZXNzKSB7CglpZiAoZW5kaWFubmVzcy4kID09PSAnTEUnKSB7CgkJcmV0dXJuIEEzKAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAyLAoJCQlGMigKCQkJCWZ1bmN0aW9uIChiMiwgYjEpIHsKCQkJCQlyZXR1cm4gKGIxIDw8IDE2KSB8IGIyOwoJCQkJfSksCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MTYoZW5kaWFubmVzcyksCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50OCk7Cgl9IGVsc2UgewoJCXJldHVybiBBMygKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwMiwKCQkJRjIoCgkJCQlmdW5jdGlvbiAoYjEsIGIyKSB7CgkJCQkJcmV0dXJuIChiMSA8PCAxNikgfCBiMjsKCQkJCX0pLAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDE2KGVuZGlhbm5lc3MpLAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDgpOwoJfQp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJHJlYWRNb3JlQml0cyA9IGZ1bmN0aW9uIChzdGF0ZSkgewoJcmVhZE1vcmVCaXRzOgoJd2hpbGUgKHRydWUpIHsKCQl2YXIgZnJlZVNwYWNlT25UYWcgPSAzMiAtIHN0YXRlLmJpdHNBdmFpbGFibGU7CgkJaWYgKChfVXRpbHNfY21wKGZyZWVTcGFjZU9uVGFnLCBzdGF0ZS5yZXNlcnZlQXZhaWxhYmxlKSA8IDEpICYmIChzdGF0ZS5yZXNlcnZlQXZhaWxhYmxlID4gMCkpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQlBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbW92ZUZyb21SZXNlcnZlLCBmcmVlU3BhY2VPblRhZywgc3RhdGUpKTsKCQl9IGVsc2UgewoJCQlpZiAoISRlbG0kYnl0ZXMkQnl0ZXMkd2lkdGgoc3RhdGUuYnVmZmVyKSkgewoJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkJQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJG1vdmVGcm9tUmVzZXJ2ZSwgc3RhdGUucmVzZXJ2ZUF2YWlsYWJsZSwgc3RhdGUpKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBzdGF0ZTEgPSBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbW92ZUZyb21SZXNlcnZlLCBzdGF0ZS5yZXNlcnZlQXZhaWxhYmxlLCBzdGF0ZSk7CgkJCQl2YXIgX3YwID0gZnVuY3Rpb24gKCkgewoJCQkJCXZhciBfdjEgPSAkZWxtJGJ5dGVzJEJ5dGVzJHdpZHRoKHN0YXRlLmJ1ZmZlcik7CgkJCQkJc3dpdGNoIChfdjEpIHsKCQkJCQkJY2FzZSAwOgoJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTMoCgkJCQkJCQkJMCwKCQkJCQkJCQkwLAoJCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHN1Y2NlZWQoMCkpOwoJCQkJCQljYXNlIDE6CgkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMygxLCA4LCAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDgpOwoJCQkJCQljYXNlIDI6CgkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMygKCQkJCQkJCQkyLAoJCQkJCQkJCTE2LAoJCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MTYoJGVsbSRieXRlcyRCeXRlcyRMRSkpOwoJCQkJCQljYXNlIDM6CgkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMygKCQkJCQkJCQkzLAoJCQkJCQkJCTI0LAoJCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciR1bnNpZ25lZEludDI0KCRlbG0kYnl0ZXMkQnl0ZXMkTEUpKTsKCQkJCQkJZGVmYXVsdDoKCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUzKAoJCQkJCQkJCTQsCgkJCQkJCQkJMzIsCgkJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQzMigkZWxtJGJ5dGVzJEJ5dGVzJExFKSk7CgkJCQkJfQoJCQkJfSgpOwoJCQkJdmFyIHdpZHRoID0gX3YwLmE7CgkJCQl2YXIgYWRkaXRpb25hbGx5QXZhaWxhYmxlID0gX3YwLmI7CgkJCQl2YXIgZGVjb2RlciA9IF92MC5jOwoJCQkJdmFyIF92MiA9IEEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRydW5EZWNvZGVyLCB3aWR0aCwgZGVjb2Rlciwgc3RhdGUxKTsKCQkJCWlmIChfdjIuJCA9PT0gJ0VycicpIHsKCQkJCQl2YXIgZSA9IF92Mi5hOwoJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihlKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIF92MyA9IF92Mi5hOwoJCQkJCXZhciBuZXdSZXNlcnZlID0gX3YzLmE7CgkJCQkJdmFyIG5ld0J1ZmZlciA9IF92My5iOwoJCQkJCXZhciAkdGVtcCRzdGF0ZSA9IHtiaXRzQXZhaWxhYmxlOiBzdGF0ZTEuYml0c0F2YWlsYWJsZSwgYnVmZmVyOiBuZXdCdWZmZXIsIHJlc2VydmU6IG5ld1Jlc2VydmUsIHJlc2VydmVBdmFpbGFibGU6IGFkZGl0aW9uYWxseUF2YWlsYWJsZSwgdGFnOiBzdGF0ZTEudGFnfTsKCQkJCQlzdGF0ZSA9ICR0ZW1wJHN0YXRlOwoJCQkJCWNvbnRpbnVlIHJlYWRNb3JlQml0czsKCQkJCX0KCQkJfQoJCX0KCX0KfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGRlY29kZVN5bWJvbCA9IEYyKAoJZnVuY3Rpb24gKHRhYmxlLCB0cmVlKSB7CgkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRCaXRSZWFkZXIoCgkJCWZ1bmN0aW9uIChzdGF0ZSkgewoJCQkJdmFyIF92MCA9IChzdGF0ZS5iaXRzQXZhaWxhYmxlIDwgMTYpID8gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJHJlYWRNb3JlQml0cyhzdGF0ZSkgOiAkZWxtJGNvcmUkUmVzdWx0JE9rKHN0YXRlKTsKCQkJCWlmIChfdjAuJCA9PT0gJ0VycicpIHsKCQkJCQl2YXIgZSA9IF92MC5hOwoJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihlKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGQgPSBfdjAuYTsKCQkJCQl2YXIgX3YxID0gQTUoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkZGVjb2RlU3ltYm9sSW5uZXJMb29wLCB0YWJsZSwgMCwgZC50YWcsIGQuYml0c0F2YWlsYWJsZSwgMCk7CgkJCQkJdmFyIGN1ciA9IF92MS5jdXI7CgkJCQkJdmFyIHRhZyA9IF92MS50YWc7CgkJCQkJdmFyIGJpdHNBdmFpbGFibGUgPSBfdjEuYml0c0F2YWlsYWJsZTsKCQkJCQl2YXIgc3VtID0gX3YxLnN1bTsKCQkJCQl2YXIgX3YyID0gQTIoJGVsbSRjb3JlJEFycmF5JGdldCwgc3VtICsgY3VyLCB0cmVlLnRyYW5zKTsKCQkJCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ0luZGV4IGludG8gdHJhbnMgdHJlZSBvdXQgb2YgYm91bmRzJyk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIHJlc3VsdCA9IF92Mi5hOwoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJcmVzdWx0LAoJCQkJCQkJCXtiaXRzQXZhaWxhYmxlOiBiaXRzQXZhaWxhYmxlLCBidWZmZXI6IGQuYnVmZmVyLCByZXNlcnZlOiBkLnJlc2VydmUsIHJlc2VydmVBdmFpbGFibGU6IGQucmVzZXJ2ZUF2YWlsYWJsZSwgdGFnOiB0YWd9KSk7CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJHJlYWRCaXRzID0gRjIoCglmdW5jdGlvbiAobnVtYmVyT2ZCaXRzLCBiYXNlKSB7CgkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRCaXRSZWFkZXIoCgkJCWZ1bmN0aW9uIChzdGF0ZSkgewoJCQkJaWYgKCFudW1iZXJPZkJpdHMpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkJX1V0aWxzX1R1cGxlMihiYXNlLCBzdGF0ZSkpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YwID0gKF9VdGlsc19jbXAoc3RhdGUuYml0c0F2YWlsYWJsZSwgbnVtYmVyT2ZCaXRzKSA8IDApID8gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJHJlYWRNb3JlQml0cyhzdGF0ZSkgOiAkZWxtJGNvcmUkUmVzdWx0JE9rKHN0YXRlKTsKCQkJCQlpZiAoX3YwLiQgPT09ICdFcnInKSB7CgkJCQkJCXZhciBlID0gX3YwLmE7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihlKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgZCA9IF92MC5hOwoJCQkJCQl2YXIgdmFsID0gZC50YWcgJiAoNjU1MzUgPj4+ICgxNiAtIG51bWJlck9mQml0cykpOwoJCQkJCQl2YXIgbmV3VGFnID0gZC50YWcgPj4+IG51bWJlck9mQml0czsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCXZhbCArIGJhc2UsCgkJCQkJCQkJe2JpdHNBdmFpbGFibGU6IGQuYml0c0F2YWlsYWJsZSAtIG51bWJlck9mQml0cywgYnVmZmVyOiBkLmJ1ZmZlciwgcmVzZXJ2ZTogZC5yZXNlcnZlLCByZXNlcnZlQXZhaWxhYmxlOiBkLnJlc2VydmVBdmFpbGFibGUsIHRhZzogbmV3VGFnfSkpOwoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRzdWNjZWVkID0gZnVuY3Rpb24gKHgpIHsKCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkQml0UmVhZGVyKAoJCWZ1bmN0aW9uIChzKSB7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJX1V0aWxzX1R1cGxlMih4LCBzKSk7CgkJfSk7Cn07CnZhciAkZWxtJGNvcmUkTGlzdCR0YWlsID0gZnVuY3Rpb24gKGxpc3QpIHsKCWlmIChsaXN0LmIpIHsKCQl2YXIgeCA9IGxpc3QuYTsKCQl2YXIgeHMgPSBsaXN0LmI7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KHhzKTsKCX0gZWxzZSB7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfQp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkZGVjb2RlRHluYW1pY1RyZWVMZW5ndGggPSBGNCgKCWZ1bmN0aW9uIChjb2RlVHJlZSwgaGxpdCwgaGRpc3QsIF92MCkgewoJCXZhciBpID0gX3YwLmE7CgkJdmFyIGJpdHNldCA9IF92MC5iOwoJCXZhciBsZW5ndGhzID0gX3YwLmM7CgkJaWYgKF9VdGlsc19jbXAoaSwgaGxpdCArIGhkaXN0KSA8IDApIHsKCQkJdmFyIHRhYmxlID0gQTIoCgkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCQlfTGlzdF9OaWwsCgkJCQkkZWxtJGNvcmUkTGlzdCR0YWlsKGNvZGVUcmVlLnRhYmxlKSk7CgkJCXJldHVybiBBMigKCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRhbmRUaGVuLAoJCQkJZnVuY3Rpb24gKHN5bSkgewoJCQkJCXN3aXRjaCAoc3ltKSB7CgkJCQkJCWNhc2UgMTY6CgkJCQkJCQl2YXIgcHJldiA9IEEyKAoJCQkJCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCQkJCQkwLAoJCQkJCQkJCUEyKCRlbG0kY29yZSREaWN0JGdldCwgaSAtIDEsIGxlbmd0aHMpKTsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbWFwLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCQlBNCgkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRjb3B5U2VnbWVudCwgaSwgcHJldiwgYml0c2V0LCBsZW5ndGhzKSwKCQkJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkTG9vcCksCgkJCQkJCQkJQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJHJlYWRCaXRzLCAyLCAzKSk7CgkJCQkJCWNhc2UgMTc6CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJG1hcCwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkJQTQoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkY29weVNlZ21lbnQsIGksIDAsIGJpdHNldCwgbGVuZ3RocyksCgkJCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJExvb3ApLAoJCQkJCQkJCUEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRyZWFkQml0cywgMywgMykpOwoJCQkJCQljYXNlIDE4OgoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRtYXAsCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJCUE0KCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGNvcHlTZWdtZW50LCBpLCAwLCBiaXRzZXQsIGxlbmd0aHMpLAoJCQkJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRMb29wKSwKCQkJCQkJCQlBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkcmVhZEJpdHMsIDcsIDExKSk7CgkJCQkJCWNhc2UgMDoKCQkJCQkJCXJldHVybiBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRTZXQkbWVtYmVyLCBpLCBiaXRzZXQpID8gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJHN1Y2NlZWQoCgkJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkTG9vcCgKCQkJCQkJCQkJX1V0aWxzX1R1cGxlMygKCQkJCQkJCQkJCWkgKyAxLAoJCQkJCQkJCQkJYml0c2V0LAoJCQkJCQkJCQkJQTIoJGVsbSRjb3JlJERpY3QkcmVtb3ZlLCBpLCBsZW5ndGhzKSkpKSA6ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRzdWNjZWVkKAoJCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJExvb3AoCgkJCQkJCQkJCV9VdGlsc19UdXBsZTMoaSArIDEsIGJpdHNldCwgbGVuZ3RocykpKTsKCQkJCQkJZGVmYXVsdDoKCQkJCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkc3VjY2VlZCgKCQkJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRMb29wKAoJCQkJCQkJCQlfVXRpbHNfVHVwbGUzKAoJCQkJCQkJCQkJaSArIDEsCgkJCQkJCQkJCQlBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRTZXQkaW5zZXJ0LCBpLCBiaXRzZXQpLAoJCQkJCQkJCQkJQTMoJGVsbSRjb3JlJERpY3QkaW5zZXJ0LCBpLCBzeW0sIGxlbmd0aHMpKSkpOwoJCQkJCX0KCQkJCX0sCgkJCQlBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRkZWNvZGVTeW1ib2wsIHRhYmxlLCBjb2RlVHJlZSkpOwoJCX0gZWxzZSB7CgkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkc3VjY2VlZCgKCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJERvbmUobGVuZ3RocykpOwoJCX0KCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0U2V0JGVtcHR5ID0gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0U2V0JEJpdFNldDMyMCgwKSgwKSgwKSgwKSgwKSgwKSgwKSgwKSgwKSgwKTsKdmFyICRlbG0kY29yZSRMaXN0JHRha2VSZXZlcnNlID0gRjMoCglmdW5jdGlvbiAobiwgbGlzdCwga2VwdCkgewoJCXRha2VSZXZlcnNlOgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmIChuIDw9IDApIHsKCQkJCXJldHVybiBrZXB0OwoJCQl9IGVsc2UgewoJCQkJaWYgKCFsaXN0LmIpIHsKCQkJCQlyZXR1cm4ga2VwdDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHggPSBsaXN0LmE7CgkJCQkJdmFyIHhzID0gbGlzdC5iOwoJCQkJCXZhciAkdGVtcCRuID0gbiAtIDEsCgkJCQkJCSR0ZW1wJGxpc3QgPSB4cywKCQkJCQkJJHRlbXAka2VwdCA9IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHgsIGtlcHQpOwoJCQkJCW4gPSAkdGVtcCRuOwoJCQkJCWxpc3QgPSAkdGVtcCRsaXN0OwoJCQkJCWtlcHQgPSAkdGVtcCRrZXB0OwoJCQkJCWNvbnRpbnVlIHRha2VSZXZlcnNlOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCR0YWtlVGFpbFJlYyA9IEYyKAoJZnVuY3Rpb24gKG4sIGxpc3QpIHsKCQlyZXR1cm4gJGVsbSRjb3JlJExpc3QkcmV2ZXJzZSgKCQkJQTMoJGVsbSRjb3JlJExpc3QkdGFrZVJldmVyc2UsIG4sIGxpc3QsIF9MaXN0X05pbCkpOwoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCR0YWtlRmFzdCA9IEYzKAoJZnVuY3Rpb24gKGN0ciwgbiwgbGlzdCkgewoJCWlmIChuIDw9IDApIHsKCQkJcmV0dXJuIF9MaXN0X05pbDsKCQl9IGVsc2UgewoJCQl2YXIgX3YwID0gX1V0aWxzX1R1cGxlMihuLCBsaXN0KTsKCQkJX3YwJDE6CgkJCXdoaWxlICh0cnVlKSB7CgkJCQlfdjAkNToKCQkJCXdoaWxlICh0cnVlKSB7CgkJCQkJaWYgKCFfdjAuYi5iKSB7CgkJCQkJCXJldHVybiBsaXN0OwoJCQkJCX0gZWxzZSB7CgkJCQkJCWlmIChfdjAuYi5iLmIpIHsKCQkJCQkJCXN3aXRjaCAoX3YwLmEpIHsKCQkJCQkJCQljYXNlIDE6CgkJCQkJCQkJCWJyZWFrIF92MCQxOwoJCQkJCQkJCWNhc2UgMjoKCQkJCQkJCQkJdmFyIF92MiA9IF92MC5iOwoJCQkJCQkJCQl2YXIgeCA9IF92Mi5hOwoJCQkJCQkJCQl2YXIgX3YzID0gX3YyLmI7CgkJCQkJCQkJCXZhciB5ID0gX3YzLmE7CgkJCQkJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbeCwgeV0pOwoJCQkJCQkJCWNhc2UgMzoKCQkJCQkJCQkJaWYgKF92MC5iLmIuYi5iKSB7CgkJCQkJCQkJCQl2YXIgX3Y0ID0gX3YwLmI7CgkJCQkJCQkJCQl2YXIgeCA9IF92NC5hOwoJCQkJCQkJCQkJdmFyIF92NSA9IF92NC5iOwoJCQkJCQkJCQkJdmFyIHkgPSBfdjUuYTsKCQkJCQkJCQkJCXZhciBfdjYgPSBfdjUuYjsKCQkJCQkJCQkJCXZhciB6ID0gX3Y2LmE7CgkJCQkJCQkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVt4LCB5LCB6XSk7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQlicmVhayBfdjAkNTsKCQkJCQkJCQkJfQoJCQkJCQkJCWRlZmF1bHQ6CgkJCQkJCQkJCWlmIChfdjAuYi5iLmIuYiAmJiBfdjAuYi5iLmIuYi5iKSB7CgkJCQkJCQkJCQl2YXIgX3Y3ID0gX3YwLmI7CgkJCQkJCQkJCQl2YXIgeCA9IF92Ny5hOwoJCQkJCQkJCQkJdmFyIF92OCA9IF92Ny5iOwoJCQkJCQkJCQkJdmFyIHkgPSBfdjguYTsKCQkJCQkJCQkJCXZhciBfdjkgPSBfdjguYjsKCQkJCQkJCQkJCXZhciB6ID0gX3Y5LmE7CgkJCQkJCQkJCQl2YXIgX3YxMCA9IF92OS5iOwoJCQkJCQkJCQkJdmFyIHcgPSBfdjEwLmE7CgkJCQkJCQkJCQl2YXIgdGwgPSBfdjEwLmI7CgkJCQkJCQkJCQlyZXR1cm4gKGN0ciA+IDEwMDApID8gQTIoCgkJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCQl4LAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkJCQl5LAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkJCQl6LAoJCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCQkJCQl3LAoJCQkJCQkJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JHRha2VUYWlsUmVjLCBuIC0gNCwgdGwpKSkpKSA6IEEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkJeCwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCQkJeSwKCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkJCQkJeiwKCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkJCQkJdywKCQkJCQkJCQkJCQkJCQlBMygkZWxtJGNvcmUkTGlzdCR0YWtlRmFzdCwgY3RyICsgMSwgbiAtIDQsIHRsKSkpKSk7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQlicmVhayBfdjAkNTsKCQkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJaWYgKF92MC5hID09PSAxKSB7CgkJCQkJCQkJYnJlYWsgX3YwJDE7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWJyZWFrIF92MCQ1OwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJcmV0dXJuIGxpc3Q7CgkJCX0KCQkJdmFyIF92MSA9IF92MC5iOwoJCQl2YXIgeCA9IF92MS5hOwoJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJW3hdKTsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JHRha2UgPSBGMigKCWZ1bmN0aW9uIChuLCBsaXN0KSB7CgkJcmV0dXJuIEEzKCRlbG0kY29yZSRMaXN0JHRha2VGYXN0LCAwLCBuLCBsaXN0KTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkZGVjb2RlVHJlZUxlbmd0aHMgPSBGNCgKCWZ1bmN0aW9uIChobGl0LCBoZGlzdCwgaGNsZW4sIGNvZGVMZW5ndGhzKSB7CgkJdmFyIGNsY3MgPSBBMigkZWxtJGNvcmUkTGlzdCR0YWtlLCBoY2xlbiwgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkY2xjSW5kaWNlcyk7CgkJdmFyIGluaXRpYWxMZW5ndGhzID0gZnVuY3Rpb24gKCkgewoJCQl2YXIgZ28gPSBGMygKCQkJCWZ1bmN0aW9uICh4cywgeXMsIGFjY3VtKSB7CgkJCQkJZ286CgkJCQkJd2hpbGUgKHRydWUpIHsKCQkJCQkJaWYgKCF4cy5iKSB7CgkJCQkJCQlyZXR1cm4gYWNjdW07CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgaW5kZXggPSB4cy5hOwoJCQkJCQkJdmFyIHJlc3RJbmRleCA9IHhzLmI7CgkJCQkJCQlpZiAoIXlzLmIpIHsKCQkJCQkJCQlyZXR1cm4gYWNjdW07CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBjb2RlTGVuZ3RoID0geXMuYTsKCQkJCQkJCQl2YXIgcmVzdENvZGVMZW5ndGggPSB5cy5iOwoJCQkJCQkJCWlmICghKCFjb2RlTGVuZ3RoKSkgewoJCQkJCQkJCQl2YXIgJHRlbXAkeHMgPSByZXN0SW5kZXgsCgkJCQkJCQkJCQkkdGVtcCR5cyA9IHJlc3RDb2RlTGVuZ3RoLAoJCQkJCQkJCQkJJHRlbXAkYWNjdW0gPSBBMygkZWxtJGNvcmUkRGljdCRpbnNlcnQsIGluZGV4LCBjb2RlTGVuZ3RoLCBhY2N1bSk7CgkJCQkJCQkJCXhzID0gJHRlbXAkeHM7CgkJCQkJCQkJCXlzID0gJHRlbXAkeXM7CgkJCQkJCQkJCWFjY3VtID0gJHRlbXAkYWNjdW07CgkJCQkJCQkJCWNvbnRpbnVlIGdvOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciAkdGVtcCR4cyA9IHJlc3RJbmRleCwKCQkJCQkJCQkJCSR0ZW1wJHlzID0gcmVzdENvZGVMZW5ndGgsCgkJCQkJCQkJCQkkdGVtcCRhY2N1bSA9IGFjY3VtOwoJCQkJCQkJCQl4cyA9ICR0ZW1wJHhzOwoJCQkJCQkJCQl5cyA9ICR0ZW1wJHlzOwoJCQkJCQkJCQlhY2N1bSA9ICR0ZW1wJGFjY3VtOwoJCQkJCQkJCQljb250aW51ZSBnbzsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9KTsKCQkJcmV0dXJuIEEzKGdvLCBjbGNzLCBjb2RlTGVuZ3RocywgJGVsbSRjb3JlJERpY3QkZW1wdHkpOwoJCX0oKTsKCQl2YXIgY29kZVRyZWUgPSBBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRidWlsZFRyZWUsIGluaXRpYWxMZW5ndGhzLCAwLCAxOSk7CgkJdmFyIGluaXRpYWxCaXRTZXQgPSBBMygKCQkJJGVsbSRjb3JlJERpY3QkZm9sZGwsCgkJCUYyKAoJCQkJZnVuY3Rpb24gKGksIF92MCkgewoJCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRTZXQkaW5zZXJ0KGkpOwoJCQkJfSksCgkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFNldCRlbXB0eSwKCQkJaW5pdGlhbExlbmd0aHMpOwoJCXJldHVybiBBMigKCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJGxvb3AsCgkJCV9VdGlsc19UdXBsZTMoMCwgaW5pdGlhbEJpdFNldCwgaW5pdGlhbExlbmd0aHMpLAoJCQlBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRkZWNvZGVEeW5hbWljVHJlZUxlbmd0aCwgY29kZVRyZWUsIGhsaXQsIGhkaXN0KSk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRleGFjdGx5ID0gRjIoCglmdW5jdGlvbiAodGFibGVDb3VudCwgZGVjb2RlcikgewoJCXZhciBoZWxwZXIgPSBmdW5jdGlvbiAoX3YwKSB7CgkJCXZhciBuID0gX3YwLmE7CgkJCXZhciB4cyA9IF92MC5iOwoJCQlyZXR1cm4gKG4gPD0gMCkgPyAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkc3VjY2VlZCgKCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJERvbmUoCgkJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZSh4cykpKSA6IEEyKAoJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJG1hcCwKCQkJCWZ1bmN0aW9uICh4KSB7CgkJCQkJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJExvb3AoCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQluIC0gMSwKCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHgsIHhzKSkpOwoJCQkJfSwKCQkJCWRlY29kZXIpOwoJCX07CgkJcmV0dXJuIEEyKAoJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbG9vcCwKCQkJX1V0aWxzX1R1cGxlMih0YWJsZUNvdW50LCBfTGlzdF9OaWwpLAoJCQloZWxwZXIpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRjb250ID0gRjMoCglmdW5jdGlvbiAoaGxpdCwgaGRpc3QsIGhjbGVuKSB7CgkJdmFyIGJ1aWxkVHJlZXMgPSBmdW5jdGlvbiAobGVuZ3RocykgewoJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCUEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGJ1aWxkVHJlZSwgbGVuZ3RocywgMCwgaGxpdCksCgkJCQlBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRidWlsZFRyZWUsIGxlbmd0aHMsIGhsaXQsIGhkaXN0KSk7CgkJfTsKCQlyZXR1cm4gQTIoCgkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRtYXAsCgkJCWJ1aWxkVHJlZXMsCgkJCUEyKAoJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJGFuZFRoZW4sCgkJCQlBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRkZWNvZGVUcmVlTGVuZ3RocywgaGxpdCwgaGRpc3QsIGhjbGVuKSwKCQkJCUEyKAoJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRleGFjdGx5LAoJCQkJCWhjbGVuLAoJCQkJCUEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRyZWFkQml0cywgMywgMCkpKSk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRtYXAyID0gRjMoCglmdW5jdGlvbiAoZiwgX3YwLCBfdjEpIHsKCQl2YXIgZmEgPSBfdjAuYTsKCQl2YXIgZmIgPSBfdjEuYTsKCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJEJpdFJlYWRlcigKCQkJZnVuY3Rpb24gKHN0YXRlKSB7CgkJCQl2YXIgX3YyID0gZmEoc3RhdGUpOwoJCQkJaWYgKF92Mi4kID09PSAnRXJyJykgewoJCQkJCXZhciBlID0gX3YyLmE7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKGUpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YzID0gX3YyLmE7CgkJCQkJdmFyIGEgPSBfdjMuYTsKCQkJCQl2YXIgbmV3U3RhdGUgPSBfdjMuYjsKCQkJCQl2YXIgX3Y0ID0gZmIobmV3U3RhdGUpOwoJCQkJCWlmIChfdjQuJCA9PT0gJ0VycicpIHsKCQkJCQkJdmFyIGUgPSBfdjQuYTsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKGUpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjUgPSBfdjQuYTsKCQkJCQkJdmFyIGIgPSBfdjUuYTsKCQkJCQkJdmFyIG5ld2VyU3RhdGUgPSBfdjUuYjsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCUEyKGYsIGEsIGIpLAoJCQkJCQkJCW5ld2VyU3RhdGUpKTsKCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkYW5kTWFwID0gRjIoCglmdW5jdGlvbiAoYSwgZikgewoJCXJldHVybiBBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbWFwMiwgJGVsbSRjb3JlJEJhc2ljcyRhcEwsIGYsIGEpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbWFwMyA9IEY0KAoJZnVuY3Rpb24gKGYsIGEsIGIsIGMpIHsKCQlyZXR1cm4gQTIoCgkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRhbmRNYXAsCgkJCWMsCgkJCUEyKAoJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJGFuZE1hcCwKCQkJCWIsCgkJCQlBMigKCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkYW5kTWFwLAoJCQkJCWEsCgkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJHN1Y2NlZWQoZikpKSk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGRlY29kZVRyZWVzID0gQTIoCgkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkYW5kVGhlbiwKCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCglBNCgKCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbWFwMywKCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRjb250LAoJCUEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRyZWFkQml0cywgNSwgMjU3KSwKCQlBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkcmVhZEJpdHMsIDUsIDEpLAoJCUEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRyZWFkQml0cywgNCwgNCkpKTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRlcnJvciA9IGZ1bmN0aW9uIChlKSB7CglyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJEJpdFJlYWRlcigKCQlmdW5jdGlvbiAocykgewoJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoZSk7CgkJfSk7Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkZ2V0Qml0ID0gQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJHJlYWRCaXRzLCAxLCAwKTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JGdldCA9IEYyKAoJZnVuY3Rpb24gKGluZGV4LCBfdjApIHsKCQl2YXIgYXJyYXkgPSBfdjAuYTsKCQl2YXIgZmluYWxTaXplID0gX3YwLmI7CgkJdmFyIGZpbmFsQnl0ZXMgPSBfdjAuYzsKCQl2YXIgb2Zmc2V0ID0gaW5kZXggJSA0OwoJCWlmIChfVXRpbHNfY21wKAoJCQlpbmRleCwKCQkJKCRlbG0kY29yZSRBcnJheSRsZW5ndGgoYXJyYXkpICogNCkgKyBmaW5hbFNpemUpID4gLTEpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCX0gZWxzZSB7CgkJCWlmIChfVXRpbHNfY21wKAoJCQkJaW5kZXgsCgkJCQkkZWxtJGNvcmUkQXJyYXkkbGVuZ3RoKGFycmF5KSAqIDQpID4gLTEpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgyNTUgJiAoZmluYWxCeXRlcyA+Pj4gKDggKiAoMyAtIG9mZnNldCkpKSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgaW50ZXJuYWxJbmRleCA9IChpbmRleCAvIDQpIHwgMDsKCQkJCXZhciBfdjEgPSBBMigkZWxtJGNvcmUkQXJyYXkkZ2V0LCBpbnRlcm5hbEluZGV4LCBhcnJheSk7CgkJCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGludDMyID0gX3YxLmE7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KDI1NSAmIChpbnQzMiA+Pj4gKDggKiAoMyAtIG9mZnNldCkpKSk7CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRCYXNpY3MkbWluID0gRjIoCglmdW5jdGlvbiAoeCwgeSkgewoJCXJldHVybiAoX1V0aWxzX2NtcCh4LCB5KSA8IDApID8geCA6IHk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JGNvcHlUb0JhY2tJbnRlcm5hbCA9IEY1KAoJZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIHNpemUsIGFycmF5LCBmaW5hbFNpemUsIGZpbmFsQnl0ZXMpIHsKCQljb3B5VG9CYWNrSW50ZXJuYWw6CgkJd2hpbGUgKHRydWUpIHsKCQkJdmFyIG9mZnNldCA9IHN0YXJ0SW5kZXggJSA0OwoJCQl2YXIgaW50ZXJuYWxJbmRleCA9IChzdGFydEluZGV4IC8gNCkgfCAwOwoJCQlpZiAoc2l6ZSA8PSAwKSB7CgkJCQlyZXR1cm4gQTMoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkQnl0ZUFycmF5LCBhcnJheSwgZmluYWxTaXplLCBmaW5hbEJ5dGVzKTsKCQkJfSBlbHNlIHsKCQkJCWlmIChfVXRpbHNfY21wKAoJCQkJCXN0YXJ0SW5kZXggKyA0LAoJCQkJCSgoJGVsbSRjb3JlJEFycmF5JGxlbmd0aChhcnJheSkgLSAxKSAqIDQpICsgZmluYWxTaXplKSA+IC0xKSB7CgkJCQkJdmFyIF92MCA9IEEyKAoJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRnZXQsCgkJCQkJCXN0YXJ0SW5kZXgsCgkJCQkJCUEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JEJ5dGVBcnJheSwgYXJyYXksIGZpbmFsU2l6ZSwgZmluYWxCeXRlcykpOwoJCQkJCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiBBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRCeXRlQXJyYXksIGFycmF5LCBmaW5hbFNpemUsIGZpbmFsQnl0ZXMpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciB2YWx1ZSA9IF92MC5hOwoJCQkJCQl2YXIgX3YxID0gQTIoCgkJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRwdXNoLAoJCQkJCQkJdmFsdWUsCgkJCQkJCQlBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRCeXRlQXJyYXksIGFycmF5LCBmaW5hbFNpemUsIGZpbmFsQnl0ZXMpKTsKCQkJCQkJdmFyIG5ld0FycmF5ID0gX3YxLmE7CgkJCQkJCXZhciBuZXdGaW5hbFNpemUgPSBfdjEuYjsKCQkJCQkJdmFyIG5ld0ZpbmFsQnl0ZXMgPSBfdjEuYzsKCQkJCQkJdmFyICR0ZW1wJHN0YXJ0SW5kZXggPSBzdGFydEluZGV4ICsgMSwKCQkJCQkJCSR0ZW1wJHNpemUgPSBzaXplIC0gMSwKCQkJCQkJCSR0ZW1wJGFycmF5ID0gbmV3QXJyYXksCgkJCQkJCQkkdGVtcCRmaW5hbFNpemUgPSBuZXdGaW5hbFNpemUsCgkJCQkJCQkkdGVtcCRmaW5hbEJ5dGVzID0gbmV3RmluYWxCeXRlczsKCQkJCQkJc3RhcnRJbmRleCA9ICR0ZW1wJHN0YXJ0SW5kZXg7CgkJCQkJCXNpemUgPSAkdGVtcCRzaXplOwoJCQkJCQlhcnJheSA9ICR0ZW1wJGFycmF5OwoJCQkJCQlmaW5hbFNpemUgPSAkdGVtcCRmaW5hbFNpemU7CgkJCQkJCWZpbmFsQnl0ZXMgPSAkdGVtcCRmaW5hbEJ5dGVzOwoJCQkJCQljb250aW51ZSBjb3B5VG9CYWNrSW50ZXJuYWw7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YyID0gQTIoJGVsbSRjb3JlJEFycmF5JGdldCwgaW50ZXJuYWxJbmRleCwgYXJyYXkpOwoJCQkJCWlmIChfdjIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiBBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRCeXRlQXJyYXksIGFycmF5LCBmaW5hbFNpemUsIGZpbmFsQnl0ZXMpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciB2YWx1ZSA9IF92Mi5hOwoJCQkJCQl2YXIgd3JpdHRlbiA9IEEyKCRlbG0kY29yZSRCYXNpY3MkbWluLCA0IC0gb2Zmc2V0LCBzaXplKTsKCQkJCQkJdmFyIG1hc2tlZEZyb250ID0gdmFsdWUgPDwgKDggKiBvZmZzZXQpOwoJCQkJCQl2YXIgbWFza2VkQmFjayA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJCWlmIChfVXRpbHNfY21wKDQgLSBvZmZzZXQsIHNpemUpID4gMCkgewoJCQkJCQkJCXZhciBieXRlc1dlTmVlZFRvUmVtb3ZlID0gNCAtIHNpemU7CgkJCQkJCQkJdmFyIGJ5dGVzV2VIYXZlID0gKDMgLSBvZmZzZXQpICsgMTsKCQkJCQkJCQlyZXR1cm4gbWFza2VkRnJvbnQgPj4gKGJ5dGVzV2VOZWVkVG9SZW1vdmUgKiA4KTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmV0dXJuIG1hc2tlZEZyb250ID4+IChvZmZzZXQgKiA4KTsKCQkJCQkJCX0KCQkJCQkJfSgpOwoJCQkJCQl2YXIgX3YzID0gQTMoCgkJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRwdXNoTWFueSwKCQkJCQkJCXdyaXR0ZW4sCgkJCQkJCQltYXNrZWRCYWNrLAoJCQkJCQkJQTMoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkQnl0ZUFycmF5LCBhcnJheSwgZmluYWxTaXplLCBmaW5hbEJ5dGVzKSk7CgkJCQkJCXZhciB4ID0gX3YzLmE7CgkJCQkJCXZhciB5ID0gX3YzLmI7CgkJCQkJCXZhciB6ID0gX3YzLmM7CgkJCQkJCXZhciAkdGVtcCRzdGFydEluZGV4ID0gc3RhcnRJbmRleCArIHdyaXR0ZW4sCgkJCQkJCQkkdGVtcCRzaXplID0gc2l6ZSAtIHdyaXR0ZW4sCgkJCQkJCQkkdGVtcCRhcnJheSA9IHgsCgkJCQkJCQkkdGVtcCRmaW5hbFNpemUgPSB5LAoJCQkJCQkJJHRlbXAkZmluYWxCeXRlcyA9IHo7CgkJCQkJCXN0YXJ0SW5kZXggPSAkdGVtcCRzdGFydEluZGV4OwoJCQkJCQlzaXplID0gJHRlbXAkc2l6ZTsKCQkJCQkJYXJyYXkgPSAkdGVtcCRhcnJheTsKCQkJCQkJZmluYWxTaXplID0gJHRlbXAkZmluYWxTaXplOwoJCQkJCQlmaW5hbEJ5dGVzID0gJHRlbXAkZmluYWxCeXRlczsKCQkJCQkJY29udGludWUgY29weVRvQmFja0ludGVybmFsOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkY29weVRvQmFjayA9IEYzKAoJZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIHNpemUsIF92MCkgewoJCXZhciBhcnJheSA9IF92MC5hOwoJCXZhciBmaW5hbFNpemUgPSBfdjAuYjsKCQl2YXIgZmluYWxCeXRlcyA9IF92MC5jOwoJCXJldHVybiBBNSgkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRjb3B5VG9CYWNrSW50ZXJuYWwsIHN0YXJ0SW5kZXgsIHNpemUsIGFycmF5LCBmaW5hbFNpemUsIGZpbmFsQnl0ZXMpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRIdWZmbWFuVGFibGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnSHVmZm1hblRhYmxlJywgYTogYX07Cn07CnZhciAkZWxtJGNvcmUkRWxtJEpzQXJyYXkkZm9sZGwgPSBfSnNBcnJheV9mb2xkbDsKdmFyICRlbG0kY29yZSRBcnJheSRmb2xkbCA9IEYzKAoJZnVuY3Rpb24gKGZ1bmMsIGJhc2VDYXNlLCBfdjApIHsKCQl2YXIgdHJlZSA9IF92MC5jOwoJCXZhciB0YWlsID0gX3YwLmQ7CgkJdmFyIGhlbHBlciA9IEYyKAoJCQlmdW5jdGlvbiAobm9kZSwgYWNjKSB7CgkJCQlpZiAobm9kZS4kID09PSAnU3ViVHJlZScpIHsKCQkJCQl2YXIgc3ViVHJlZSA9IG5vZGUuYTsKCQkJCQlyZXR1cm4gQTMoJGVsbSRjb3JlJEVsbSRKc0FycmF5JGZvbGRsLCBoZWxwZXIsIGFjYywgc3ViVHJlZSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciB2YWx1ZXMgPSBub2RlLmE7CgkJCQkJcmV0dXJuIEEzKCRlbG0kY29yZSRFbG0kSnNBcnJheSRmb2xkbCwgZnVuYywgYWNjLCB2YWx1ZXMpOwoJCQkJfQoJCQl9KTsKCQlyZXR1cm4gQTMoCgkJCSRlbG0kY29yZSRFbG0kSnNBcnJheSRmb2xkbCwKCQkJZnVuYywKCQkJQTMoJGVsbSRjb3JlJEVsbSRKc0FycmF5JGZvbGRsLCBoZWxwZXIsIGJhc2VDYXNlLCB0cmVlKSwKCQkJdGFpbCk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGJ1aWxkQml0c0Jhc2UgPSBGMigKCWZ1bmN0aW9uIChkZWx0YSwgZmlyc3QpIHsKCQl2YXIgaW5pdGlhbGl6ZXIgPSBmdW5jdGlvbiAoaSkgewoJCQlyZXR1cm4gKF9VdGlsc19jbXAoaSwgZGVsdGEpIDwgMCkgPyAwIDogKCgoaSAtIGRlbHRhKSAvIGRlbHRhKSB8IDApOwoJCX07CgkJdmFyIGZvbGRlciA9IEYyKAoJCQlmdW5jdGlvbiAoYml0LCBfdjApIHsKCQkJCXZhciBzdW0gPSBfdjAuYTsKCQkJCXZhciBhY2N1bSA9IF92MC5iOwoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJc3VtICsgKDEgPDwgYml0KSwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJEFycmF5JHB1c2gsCgkJCQkJCXtiYXNlOiBzdW0sIGJpdHM6IGJpdH0sCgkJCQkJCWFjY3VtKSk7CgkJCX0pOwoJCXZhciBiaXRzID0gQTIoJGVsbSRjb3JlJEFycmF5JGluaXRpYWxpemUsIDMwLCBpbml0aWFsaXplcik7CgkJdmFyIGJhc2UgPSBBMygKCQkJJGVsbSRjb3JlJEFycmF5JGZvbGRsLAoJCQlmb2xkZXIsCgkJCV9VdGlsc19UdXBsZTIoZmlyc3QsICRlbG0kY29yZSRBcnJheSRlbXB0eSksCgkJCWJpdHMpLmI7CgkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJEh1ZmZtYW5UYWJsZShiYXNlKTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkaGFyZGNvZGVkRGlzdGFuY2VUYWJsZSA9IEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGJ1aWxkQml0c0Jhc2UsIDIsIDEpOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkaGFyZGNvZGVkTGVuZ3RoVGFibGUgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgYXJyYXkgPSBfdjAuYTsKCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRIdWZmbWFuVGFibGUoCgkJQTMoCgkJCSRlbG0kY29yZSRBcnJheSRzZXQsCgkJCTI4LAoJCQl7YmFzZTogMjU4LCBiaXRzOiAwfSwKCQkJYXJyYXkpKTsKfSgKCUEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGJ1aWxkQml0c0Jhc2UsIDQsIDMpKTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJHJlYWRIdWZmbWFuVGFibGUgPSBGMigKCWZ1bmN0aW9uIChpbmRleCwgX3YwKSB7CgkJdmFyIHRhYmxlID0gX3YwLmE7CgkJcmV0dXJuIEEyKCRlbG0kY29yZSRBcnJheSRnZXQsIGluZGV4LCB0YWJsZSk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGRlY29kZUxlbmd0aCA9IGZ1bmN0aW9uIChzeW1ib2wpIHsKCXZhciBfdjAgPSBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRyZWFkSHVmZm1hblRhYmxlLCBzeW1ib2wgLSAyNTcsICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGhhcmRjb2RlZExlbmd0aFRhYmxlKTsKCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRlcnJvcigKCQkJZnVuY3Rpb24gKCkgewoJCQkJdmFyIF92MSA9ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGhhcmRjb2RlZERpc3RhbmNlVGFibGU7CgkJCQl2YXIgaW50ZXJuYWwgPSBfdjEuYTsKCQkJCXJldHVybiAnaW5kZXggb3V0IG9mIGJvdW5kcyBpbiBoYXJkY29kZWRMZW5ndGhUYWJsZTogcmVxdWVzdGVkIGluZGV4ICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHN5bWJvbCAtIDI1NykgKyAoJ2J1dCBoYXJkY29kZWRMZW5ndGhUYWJsZSBoYXMgbGVuZ3RoICcgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoCgkJCQkJJGVsbSRjb3JlJEFycmF5JGxlbmd0aChpbnRlcm5hbCkpKSk7CgkJCX0oKSk7Cgl9IGVsc2UgewoJCXZhciBlbnRyeSA9IF92MC5hOwoJCXJldHVybiBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkcmVhZEJpdHMsIGVudHJ5LmJpdHMsIGVudHJ5LmJhc2UpOwoJfQp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkZGVjb2RlT2Zmc2V0ID0gRjIoCglmdW5jdGlvbiAob3V0cHV0TGVuZ3RoLCBkdCkgewoJCXZhciB0YWJsZV8gPSBBMigKCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQlfTGlzdF9OaWwsCgkJCSRlbG0kY29yZSRMaXN0JHRhaWwoZHQudGFibGUpKTsKCQlyZXR1cm4gQTIoCgkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRhbmRUaGVuLAoJCQlmdW5jdGlvbiAoZGlzdGFuY2UpIHsKCQkJCXZhciBfdjAgPSBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRyZWFkSHVmZm1hblRhYmxlLCBkaXN0YW5jZSwgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkaGFyZGNvZGVkRGlzdGFuY2VUYWJsZSk7CgkJCQlpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkZXJyb3IoCgkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCXZhciBfdjEgPSAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRoYXJkY29kZWREaXN0YW5jZVRhYmxlOwoJCQkJCQkJdmFyIGludGVybmFsID0gX3YxLmE7CgkJCQkJCQlyZXR1cm4gJ2luZGV4IG91dCBvZiBib3VuZHMgaW4gaGFyZGNvZGVkRGlzdGFuY2VUYWJsZTogcmVxdWVzdGVkIGluZGV4ICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KGRpc3RhbmNlKSArICgnYnV0IGhhcmRjb2RlZExlbmd0aFRhYmxlIGhhcyBsZW5ndGggJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludCgKCQkJCQkJCQkkZWxtJGNvcmUkQXJyYXkkbGVuZ3RoKGludGVybmFsKSkpKTsKCQkJCQkJfSgpKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGVudHJ5ID0gX3YwLmE7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbWFwLAoJCQkJCQlmdW5jdGlvbiAodikgewoJCQkJCQkJcmV0dXJuIG91dHB1dExlbmd0aCAtIHY7CgkJCQkJCX0sCgkJCQkJCUEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRyZWFkQml0cywgZW50cnkuYml0cywgZW50cnkuYmFzZSkpOwoJCQkJfQoJCQl9LAoJCQlBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRkZWNvZGVTeW1ib2wsIHRhYmxlXywgZHQpKTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkaW5mbGF0ZUJsb2NrRGF0YUhlbHAgPSBGMigKCWZ1bmN0aW9uICh0cmVlcywgX3YwKSB7CgkJdmFyIG91dHB1dExlbmd0aCA9IF92MC5hOwoJCXZhciBvdXRwdXQgPSBfdjAuYjsKCQl2YXIgdGFibGUgPSBBMigKCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQlfTGlzdF9OaWwsCgkJCSRlbG0kY29yZSRMaXN0JHRhaWwodHJlZXMubGl0ZXJhbC50YWJsZSkpOwoJCXJldHVybiBBMigKCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJGFuZFRoZW4sCgkJCWZ1bmN0aW9uIChzeW1ib2wpIHsKCQkJCXJldHVybiAoc3ltYm9sID09PSAyNTYpID8gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJHN1Y2NlZWQoCgkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRG9uZShvdXRwdXQpKSA6ICgoc3ltYm9sIDwgMjU2KSA/ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRzdWNjZWVkKAoJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJExvb3AoCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQlvdXRwdXRMZW5ndGggKyAxLAoJCQkJCQkJQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkcHVzaCwgc3ltYm9sLCBvdXRwdXQpKSkpIDogQTMoCgkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJG1hcDIsCgkJCQkJRjIoCgkJCQkJCWZ1bmN0aW9uIChsZW5ndGgsIG9mZnNldCkgewoJCQkJCQkJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJExvb3AoCgkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJb3V0cHV0TGVuZ3RoICsgbGVuZ3RoLAoJCQkJCQkJCQlBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRjb3B5VG9CYWNrLCBvZmZzZXQsIGxlbmd0aCwgb3V0cHV0KSkpOwoJCQkJCQl9KSwKCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRkZWNvZGVMZW5ndGgoc3ltYm9sKSwKCQkJCQlBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRkZWNvZGVPZmZzZXQsIG91dHB1dExlbmd0aCwgdHJlZXMuZGlzdGFuY2UpKSk7CgkJCX0sCgkJCUEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGRlY29kZVN5bWJvbCwgdGFibGUsIHRyZWVzLmxpdGVyYWwpKTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkaW5mbGF0ZUJsb2NrRGF0YSA9IEYzKAoJZnVuY3Rpb24gKHRyZWVzLCBvdXRwdXRMZW5ndGgsIG91dHB1dCkgewoJCXJldHVybiBBMigKCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJGxvb3AsCgkJCV9VdGlsc19UdXBsZTIob3V0cHV0TGVuZ3RoLCBvdXRwdXQpLAoJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRpbmZsYXRlQmxvY2tEYXRhSGVscCh0cmVlcykpOwoJfSk7CnZhciAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRhbmRUaGVuID0gRjIoCglmdW5jdGlvbiAoY2FsbGJhY2ssIF92MCkgewoJCXZhciBkZWNvZGVBID0gX3YwLmE7CgkJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJERlY29kZXIoCgkJCUYyKAoJCQkJZnVuY3Rpb24gKGJpdGVzLCBvZmZzZXQpIHsKCQkJCQl2YXIgX3YxID0gQTIoZGVjb2RlQSwgYml0ZXMsIG9mZnNldCk7CgkJCQkJdmFyIG5ld09mZnNldCA9IF92MS5hOwoJCQkJCXZhciBhID0gX3YxLmI7CgkJCQkJdmFyIF92MiA9IGNhbGxiYWNrKGEpOwoJCQkJCXZhciBkZWNvZGVCID0gX3YyLmE7CgkJCQkJcmV0dXJuIEEyKGRlY29kZUIsIGJpdGVzLCBuZXdPZmZzZXQpOwoJCQkJfSkpOwoJfSk7CnZhciAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRmYWlsID0gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRGVjb2RlcihfQnl0ZXNfZGVjb2RlRmFpbHVyZSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCR1bmNvbXByZXNzZWRCbG9ja0RlY29kZXIgPSBmdW5jdGlvbiAoYnVmZmVyV2lkdGgpIHsKCXZhciBkZWNvZGVMZW5ndGhzID0gQTMoCgkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwMiwKCQkkZWxtJGNvcmUkVHVwbGUkcGFpciwKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDE2KCRlbG0kYnl0ZXMkQnl0ZXMkTEUpLAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MTYoJGVsbSRieXRlcyRCeXRlcyRMRSkpOwoJcmV0dXJuIEEyKAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGFuZFRoZW4sCgkJZnVuY3Rpb24gKF92MCkgewoJCQl2YXIgbGVuZ3RoID0gX3YwLmE7CgkJCXZhciBpbnZsZW5ndGggPSBfdjAuYjsKCQkJaWYgKCFfVXRpbHNfZXEobGVuZ3RoLCAofmludmxlbmd0aCkgJiA2NTUzNSkpIHsKCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRmYWlsOwoJCQl9IGVsc2UgewoJCQkJdmFyIHJlbWFpbmluZ1NpemUgPSAoYnVmZmVyV2lkdGggLSA0KSAtIGxlbmd0aDsKCQkJCXJldHVybiBBMygKCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAyLAoJCQkJCSRlbG0kY29yZSRUdXBsZSRwYWlyLAoJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGJ5dGVzKGxlbmd0aCksCgkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkYnl0ZXMocmVtYWluaW5nU2l6ZSkpOwoJCQl9CgkJfSwKCQlkZWNvZGVMZW5ndGhzKTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGluZmxhdGVVbmNvbXByZXNzZWRCbG9jayA9ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRCaXRSZWFkZXIoCglmdW5jdGlvbiAoc3RhdGUpIHsKCQl2YXIgX3YwID0gQTIoCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGRlY29kZSwKCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkdW5jb21wcmVzc2VkQmxvY2tEZWNvZGVyKAoJCQkJJGVsbSRieXRlcyRCeXRlcyR3aWR0aChzdGF0ZS5idWZmZXIpKSwKCQkJc3RhdGUuYnVmZmVyKTsKCQlpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ2luZmxhdGVVbmNvbXByZXNzZWRCbG9jazogcmFuIG91dCBvZiBib3VuZHMnKTsKCQl9IGVsc2UgewoJCQl2YXIgX3YxID0gX3YwLmE7CgkJCXZhciBibG9jayA9IF92MS5hOwoJCQl2YXIgbmV3QnVmZmVyID0gX3YxLmI7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQlibG9jaywKCQkJCQlfVXRpbHNfdXBkYXRlKAoJCQkJCQlzdGF0ZSwKCQkJCQkJe2J1ZmZlcjogbmV3QnVmZmVyfSkpKTsKCQl9Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JGxlbmd0aCA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBhcnJheSA9IF92MC5hOwoJdmFyIGZpbmFsU2l6ZSA9IF92MC5iOwoJdmFyIGZpbmFsQnl0ZXMgPSBfdjAuYzsKCXZhciBfdjEgPSAkZWxtJGNvcmUkQXJyYXkkbGVuZ3RoKGFycmF5KSAqIDQ7CglpZiAoIV92MSkgewoJCXJldHVybiBmaW5hbFNpemU7Cgl9IGVsc2UgewoJCXZhciBsID0gX3YxOwoJCXJldHVybiBsICsgZmluYWxTaXplOwoJfQp9Owp2YXIgJGVsbSRjb3JlJEVsbSRKc0FycmF5JGFwcGVuZE4gPSBfSnNBcnJheV9hcHBlbmROOwp2YXIgJGVsbSRjb3JlJEVsbSRKc0FycmF5JHNsaWNlID0gX0pzQXJyYXlfc2xpY2U7CnZhciAkZWxtJGNvcmUkQXJyYXkkYXBwZW5kSGVscEJ1aWxkZXIgPSBGMigKCWZ1bmN0aW9uICh0YWlsLCBidWlsZGVyKSB7CgkJdmFyIHRhaWxMZW4gPSAkZWxtJGNvcmUkRWxtJEpzQXJyYXkkbGVuZ3RoKHRhaWwpOwoJCXZhciBub3RBcHBlbmRlZCA9ICgkZWxtJGNvcmUkQXJyYXkkYnJhbmNoRmFjdG9yIC0gJGVsbSRjb3JlJEVsbSRKc0FycmF5JGxlbmd0aChidWlsZGVyLnRhaWwpKSAtIHRhaWxMZW47CgkJdmFyIGFwcGVuZGVkID0gQTMoJGVsbSRjb3JlJEVsbSRKc0FycmF5JGFwcGVuZE4sICRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3IsIGJ1aWxkZXIudGFpbCwgdGFpbCk7CgkJcmV0dXJuIChub3RBcHBlbmRlZCA8IDApID8gewoJCQlub2RlTGlzdDogQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJJGVsbSRjb3JlJEFycmF5JExlYWYoYXBwZW5kZWQpLAoJCQkJYnVpbGRlci5ub2RlTGlzdCksCgkJCW5vZGVMaXN0U2l6ZTogYnVpbGRlci5ub2RlTGlzdFNpemUgKyAxLAoJCQl0YWlsOiBBMygkZWxtJGNvcmUkRWxtJEpzQXJyYXkkc2xpY2UsIG5vdEFwcGVuZGVkLCB0YWlsTGVuLCB0YWlsKQoJCX0gOiAoKCFub3RBcHBlbmRlZCkgPyB7CgkJCW5vZGVMaXN0OiBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkkZWxtJGNvcmUkQXJyYXkkTGVhZihhcHBlbmRlZCksCgkJCQlidWlsZGVyLm5vZGVMaXN0KSwKCQkJbm9kZUxpc3RTaXplOiBidWlsZGVyLm5vZGVMaXN0U2l6ZSArIDEsCgkJCXRhaWw6ICRlbG0kY29yZSRFbG0kSnNBcnJheSRlbXB0eQoJCX0gOiB7bm9kZUxpc3Q6IGJ1aWxkZXIubm9kZUxpc3QsIG5vZGVMaXN0U2l6ZTogYnVpbGRlci5ub2RlTGlzdFNpemUsIHRhaWw6IGFwcGVuZGVkfSk7Cgl9KTsKdmFyICRlbG0kY29yZSRBcnJheSRhcHBlbmRIZWxwVHJlZSA9IEYyKAoJZnVuY3Rpb24gKHRvQXBwZW5kLCBhcnJheSkgewoJCXZhciBsZW4gPSBhcnJheS5hOwoJCXZhciB0cmVlID0gYXJyYXkuYzsKCQl2YXIgdGFpbCA9IGFycmF5LmQ7CgkJdmFyIGl0ZW1zVG9BcHBlbmQgPSAkZWxtJGNvcmUkRWxtJEpzQXJyYXkkbGVuZ3RoKHRvQXBwZW5kKTsKCQl2YXIgbm90QXBwZW5kZWQgPSAoJGVsbSRjb3JlJEFycmF5JGJyYW5jaEZhY3RvciAtICRlbG0kY29yZSRFbG0kSnNBcnJheSRsZW5ndGgodGFpbCkpIC0gaXRlbXNUb0FwcGVuZDsKCQl2YXIgYXBwZW5kZWQgPSBBMygkZWxtJGNvcmUkRWxtJEpzQXJyYXkkYXBwZW5kTiwgJGVsbSRjb3JlJEFycmF5JGJyYW5jaEZhY3RvciwgdGFpbCwgdG9BcHBlbmQpOwoJCXZhciBuZXdBcnJheSA9IEEyKCRlbG0kY29yZSRBcnJheSR1bnNhZmVSZXBsYWNlVGFpbCwgYXBwZW5kZWQsIGFycmF5KTsKCQlpZiAobm90QXBwZW5kZWQgPCAwKSB7CgkJCXZhciBuZXh0VGFpbCA9IEEzKCRlbG0kY29yZSRFbG0kSnNBcnJheSRzbGljZSwgbm90QXBwZW5kZWQsIGl0ZW1zVG9BcHBlbmQsIHRvQXBwZW5kKTsKCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRBcnJheSR1bnNhZmVSZXBsYWNlVGFpbCwgbmV4dFRhaWwsIG5ld0FycmF5KTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gbmV3QXJyYXk7CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkQXJyYXkkYnVpbGRlckZyb21BcnJheSA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBsZW4gPSBfdjAuYTsKCXZhciB0cmVlID0gX3YwLmM7Cgl2YXIgdGFpbCA9IF92MC5kOwoJdmFyIGhlbHBlciA9IEYyKAoJCWZ1bmN0aW9uIChub2RlLCBhY2MpIHsKCQkJaWYgKG5vZGUuJCA9PT0gJ1N1YlRyZWUnKSB7CgkJCQl2YXIgc3ViVHJlZSA9IG5vZGUuYTsKCQkJCXJldHVybiBBMygkZWxtJGNvcmUkRWxtJEpzQXJyYXkkZm9sZGwsIGhlbHBlciwgYWNjLCBzdWJUcmVlKTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBub2RlLCBhY2MpOwoJCQl9CgkJfSk7CglyZXR1cm4gewoJCW5vZGVMaXN0OiBBMygkZWxtJGNvcmUkRWxtJEpzQXJyYXkkZm9sZGwsIGhlbHBlciwgX0xpc3RfTmlsLCB0cmVlKSwKCQlub2RlTGlzdFNpemU6IChsZW4gLyAkZWxtJGNvcmUkQXJyYXkkYnJhbmNoRmFjdG9yKSB8IDAsCgkJdGFpbDogdGFpbAoJfTsKfTsKdmFyICRlbG0kY29yZSRBcnJheSRhcHBlbmQgPSBGMigKCWZ1bmN0aW9uIChhLCBfdjApIHsKCQl2YXIgYVRhaWwgPSBhLmQ7CgkJdmFyIGJMZW4gPSBfdjAuYTsKCQl2YXIgYlRyZWUgPSBfdjAuYzsKCQl2YXIgYlRhaWwgPSBfdjAuZDsKCQlpZiAoX1V0aWxzX2NtcChiTGVuLCAkZWxtJGNvcmUkQXJyYXkkYnJhbmNoRmFjdG9yICogNCkgPCAxKSB7CgkJCXZhciBmb2xkSGVscGVyID0gRjIoCgkJCQlmdW5jdGlvbiAobm9kZSwgYXJyYXkpIHsKCQkJCQlpZiAobm9kZS4kID09PSAnU3ViVHJlZScpIHsKCQkJCQkJdmFyIHRyZWUgPSBub2RlLmE7CgkJCQkJCXJldHVybiBBMygkZWxtJGNvcmUkRWxtJEpzQXJyYXkkZm9sZGwsIGZvbGRIZWxwZXIsIGFycmF5LCB0cmVlKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgbGVhZiA9IG5vZGUuYTsKCQkJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRBcnJheSRhcHBlbmRIZWxwVHJlZSwgbGVhZiwgYXJyYXkpOwoJCQkJCX0KCQkJCX0pOwoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGNvcmUkQXJyYXkkYXBwZW5kSGVscFRyZWUsCgkJCQliVGFpbCwKCQkJCUEzKCRlbG0kY29yZSRFbG0kSnNBcnJheSRmb2xkbCwgZm9sZEhlbHBlciwgYSwgYlRyZWUpKTsKCQl9IGVsc2UgewoJCQl2YXIgZm9sZEhlbHBlciA9IEYyKAoJCQkJZnVuY3Rpb24gKG5vZGUsIGJ1aWxkZXIpIHsKCQkJCQlpZiAobm9kZS4kID09PSAnU3ViVHJlZScpIHsKCQkJCQkJdmFyIHRyZWUgPSBub2RlLmE7CgkJCQkJCXJldHVybiBBMygkZWxtJGNvcmUkRWxtJEpzQXJyYXkkZm9sZGwsIGZvbGRIZWxwZXIsIGJ1aWxkZXIsIHRyZWUpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBsZWFmID0gbm9kZS5hOwoJCQkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJEFycmF5JGFwcGVuZEhlbHBCdWlsZGVyLCBsZWFmLCBidWlsZGVyKTsKCQkJCQl9CgkJCQl9KTsKCQkJcmV0dXJuIEEyKAoJCQkJJGVsbSRjb3JlJEFycmF5JGJ1aWxkZXJUb0FycmF5LAoJCQkJdHJ1ZSwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRBcnJheSRhcHBlbmRIZWxwQnVpbGRlciwKCQkJCQliVGFpbCwKCQkJCQlBMygKCQkJCQkJJGVsbSRjb3JlJEVsbSRKc0FycmF5JGZvbGRsLAoJCQkJCQlmb2xkSGVscGVyLAoJCQkJCQkkZWxtJGNvcmUkQXJyYXkkYnVpbGRlckZyb21BcnJheShhKSwKCQkJCQkJYlRyZWUpKSk7CgkJfQoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRzZHRyZWUgPSB7Cgl0YWJsZTogX0xpc3RfZnJvbUFycmF5KAoJCVswLCAwLCAwLCAwLCAwLCAzMiwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0pLAoJdHJhbnM6IEEyKAoJCSRlbG0kY29yZSRBcnJheSRhcHBlbmQsCgkJJGVsbSRjb3JlJEFycmF5JGZyb21MaXN0KAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0LCAxNSwgMTYsIDE3LCAxOCwgMTksIDIwLCAyMSwgMjIsIDIzLCAyNCwgMjUsIDI2LCAyNywgMjgsIDI5LCAzMCwgMzFdKSksCgkJQTIoJGVsbSRjb3JlJEFycmF5JHJlcGVhdCwgMjg4IC0gMzIsIDApKQp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJGZsdXNoSGVscCA9IGZ1bmN0aW9uIChzdGF0ZTApIHsKCXZhciBhdmFpbGFibGVTcGFjZSA9IDMyIC0gc3RhdGUwLmJpdHNBdmFpbGFibGU7Cgl2YXIgc3RhdGUgPSBBMigKCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbW92ZUZyb21SZXNlcnZlLAoJCUEyKCRlbG0kY29yZSRCYXNpY3MkbWluLCBhdmFpbGFibGVTcGFjZSwgc3RhdGUwLnJlc2VydmVBdmFpbGFibGUpLAoJCXN0YXRlMCk7Cgl2YXIgcmVzZXJ2ZUVuY29kZXIgPSAoc3RhdGUucmVzZXJ2ZUF2YWlsYWJsZSA+IDI0KSA/IF9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCUEyKCRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50MzIsICRlbG0kYnl0ZXMkQnl0ZXMkTEUsIHN0YXRlLnJlc2VydmUpCgkJXSkgOiAoKHN0YXRlLnJlc2VydmVBdmFpbGFibGUgPiAxNikgPyBfTGlzdF9mcm9tQXJyYXkoCgkJWwoJCQlBMigkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSR1bnNpZ25lZEludDE2LCAkZWxtJGJ5dGVzJEJ5dGVzJExFLCBzdGF0ZS5yZXNlcnZlKSwKCQkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkdW5zaWduZWRJbnQ4KHN0YXRlLnJlc2VydmUgPj4gMTYpCgkJXSkgOiAoKHN0YXRlLnJlc2VydmVBdmFpbGFibGUgPiA4KSA/IF9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCUEyKCRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50MTYsICRlbG0kYnl0ZXMkQnl0ZXMkTEUsIHN0YXRlLnJlc2VydmUpCgkJXSkgOiAoKHN0YXRlLnJlc2VydmVBdmFpbGFibGUgPiAxKSA/IF9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50OChzdGF0ZS5yZXNlcnZlKQoJCV0pIDogX0xpc3RfTmlsKSkpOwoJdmFyIHRhZ0VuY29kZXIgPSAoc3RhdGUuYml0c0F2YWlsYWJsZSA+IDI0KSA/IF9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCUEyKCRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50MzIsICRlbG0kYnl0ZXMkQnl0ZXMkTEUsIHN0YXRlLnRhZykKCQldKSA6ICgoc3RhdGUuYml0c0F2YWlsYWJsZSA+IDE2KSA/IF9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCUEyKCRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50MTYsICRlbG0kYnl0ZXMkQnl0ZXMkTEUsIHN0YXRlLnRhZyksCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50OChzdGF0ZS50YWcgPj4gMTYpCgkJXSkgOiAoKHN0YXRlLmJpdHNBdmFpbGFibGUgPiA4KSA/IF9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCUEyKCRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50MTYsICRlbG0kYnl0ZXMkQnl0ZXMkTEUsIHN0YXRlLnRhZykKCQldKSA6ICgoc3RhdGUuYml0c0F2YWlsYWJsZSA+IDEpID8gX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkdW5zaWduZWRJbnQ4KHN0YXRlLnRhZykKCQldKSA6IF9MaXN0X05pbCkpKTsKCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRlbmNvZGUoCgkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkc2VxdWVuY2UoCgkJCV9VdGlsc19hcCgKCQkJCXRhZ0VuY29kZXIsCgkJCQlfVXRpbHNfYXAoCgkJCQkJcmVzZXJ2ZUVuY29kZXIsCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRieXRlcyhzdGF0ZS5idWZmZXIpCgkJCQkJCV0pKSkpKTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRmbHVzaCA9IGZ1bmN0aW9uIChzdGF0ZSkgewoJcmV0dXJuIHsKCQliaXRzQXZhaWxhYmxlOiAwLAoJCWJ1ZmZlcjogJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJGZsdXNoSGVscChzdGF0ZSksCgkJcmVzZXJ2ZTogMCwKCQlyZXNlcnZlQXZhaWxhYmxlOiAwLAoJCXRhZzogMAoJfTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRza2lwVG9CeXRlQm91bmRhcnkgPSAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkQml0UmVhZGVyKAoJZnVuY3Rpb24gKHMpIHsKCQl2YXIgYXZhaWxhYmxlID0gcy5iaXRzQXZhaWxhYmxlICsgcy5yZXNlcnZlQXZhaWxhYmxlOwoJCXZhciB1bnRpbEJvdW5kYXJ5ID0gQTIoJGVsbSRjb3JlJEJhc2ljcyRtb2RCeSwgOCwgYXZhaWxhYmxlKTsKCQl2YXIgX3YwID0gQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJHJlYWRCaXRzLCB1bnRpbEJvdW5kYXJ5LCAwKTsKCQl2YXIgc3RlcCA9IF92MC5hOwoJCXZhciBfdjEgPSBzdGVwKHMpOwoJCWlmIChfdjEuJCA9PT0gJ0VycicpIHsKCQkJdmFyIGUgPSBfdjEuYTsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKGUpOwoJCX0gZWxzZSB7CgkJCXZhciBfdjIgPSBfdjEuYTsKCQkJdmFyIG5ld1N0YXRlID0gX3YyLmI7CgkJCXZhciBfdjMgPSAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkcmVhZE1vcmVCaXRzKG5ld1N0YXRlKTsKCQkJaWYgKF92My4kID09PSAnRXJyJykgewoJCQkJdmFyIGUgPSBfdjMuYTsKCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihlKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBuZXdlclN0YXRlID0gX3YzLmE7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQlfVXRpbHNfVHVwbGUwLAoJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkZmx1c2gobmV3ZXJTdGF0ZSkpKTsKCQkJfQoJCX0KCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkc2x0cmVlID0gewoJdGFibGU6IF9MaXN0X2Zyb21BcnJheSgKCQlbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMjQsIDE1MiwgMTEyLCAwLCAwLCAwLCAwLCAwLCAwXSksCgl0cmFuczogJGVsbSRjb3JlJEFycmF5JGZyb21MaXN0KAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWzI1NiwgMjU3LCAyNTgsIDI1OSwgMjYwLCAyNjEsIDI2MiwgMjYzLCAyNjQsIDI2NSwgMjY2LCAyNjcsIDI2OCwgMjY5LCAyNzAsIDI3MSwgMjcyLCAyNzMsIDI3NCwgMjc1LCAyNzYsIDI3NywgMjc4LCAyNzksIDAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgMTUsIDE2LCAxNywgMTgsIDE5LCAyMCwgMjEsIDIyLCAyMywgMjQsIDI1LCAyNiwgMjcsIDI4LCAyOSwgMzAsIDMxLCAzMiwgMzMsIDM0LCAzNSwgMzYsIDM3LCAzOCwgMzksIDQwLCA0MSwgNDIsIDQzLCA0NCwgNDUsIDQ2LCA0NywgNDgsIDQ5LCA1MCwgNTEsIDUyLCA1MywgNTQsIDU1LCA1NiwgNTcsIDU4LCA1OSwgNjAsIDYxLCA2MiwgNjMsIDY0LCA2NSwgNjYsIDY3LCA2OCwgNjksIDcwLCA3MSwgNzIsIDczLCA3NCwgNzUsIDc2LCA3NywgNzgsIDc5LCA4MCwgODEsIDgyLCA4MywgODQsIDg1LCA4NiwgODcsIDg4LCA4OSwgOTAsIDkxLCA5MiwgOTMsIDk0LCA5NSwgOTYsIDk3LCA5OCwgOTksIDEwMCwgMTAxLCAxMDIsIDEwMywgMTA0LCAxMDUsIDEwNiwgMTA3LCAxMDgsIDEwOSwgMTEwLCAxMTEsIDExMiwgMTEzLCAxMTQsIDExNSwgMTE2LCAxMTcsIDExOCwgMTE5LCAxMjAsIDEyMSwgMTIyLCAxMjMsIDEyNCwgMTI1LCAxMjYsIDEyNywgMTI4LCAxMjksIDEzMCwgMTMxLCAxMzIsIDEzMywgMTM0LCAxMzUsIDEzNiwgMTM3LCAxMzgsIDEzOSwgMTQwLCAxNDEsIDE0MiwgMTQzLCAyODAsIDI4MSwgMjgyLCAyODMsIDI4NCwgMjg1LCAyODYsIDI4NywgMTQ0LCAxNDUsIDE0NiwgMTQ3LCAxNDgsIDE0OSwgMTUwLCAxNTEsIDE1MiwgMTUzLCAxNTQsIDE1NSwgMTU2LCAxNTcsIDE1OCwgMTU5LCAxNjAsIDE2MSwgMTYyLCAxNjMsIDE2NCwgMTY1LCAxNjYsIDE2NywgMTY4LCAxNjksIDE3MCwgMTcxLCAxNzIsIDE3MywgMTc0LCAxNzUsIDE3NiwgMTc3LCAxNzgsIDE3OSwgMTgwLCAxODEsIDE4MiwgMTgzLCAxODQsIDE4NSwgMTg2LCAxODcsIDE4OCwgMTg5LCAxOTAsIDE5MSwgMTkyLCAxOTMsIDE5NCwgMTk1LCAxOTYsIDE5NywgMTk4LCAxOTksIDIwMCwgMjAxLCAyMDIsIDIwMywgMjA0LCAyMDUsIDIwNiwgMjA3LCAyMDgsIDIwOSwgMjEwLCAyMTEsIDIxMiwgMjEzLCAyMTQsIDIxNSwgMjE2LCAyMTcsIDIxOCwgMjE5LCAyMjAsIDIyMSwgMjIyLCAyMjMsIDIyNCwgMjI1LCAyMjYsIDIyNywgMjI4LCAyMjksIDIzMCwgMjMxLCAyMzIsIDIzMywgMjM0LCAyMzUsIDIzNiwgMjM3LCAyMzgsIDIzOSwgMjQwLCAyNDEsIDI0MiwgMjQzLCAyNDQsIDI0NSwgMjQ2LCAyNDcsIDI0OCwgMjQ5LCAyNTAsIDI1MSwgMjUyLCAyNTMsIDI1NCwgMjU1XSkpCn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCR1bmNvbXByZXNzSGVscCA9IGZ1bmN0aW9uIChvdXRwdXQpIHsKCXZhciB1bmNvbXByZXNzQmxvY2sgPSBmdW5jdGlvbiAoYnR5cGUpIHsKCQlzd2l0Y2ggKGJ0eXBlKSB7CgkJCWNhc2UgMDoKCQkJCXJldHVybiBBMigKCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbWFwLAoJCQkJCWZ1bmN0aW9uIChieXRlcykgewoJCQkJCQlyZXR1cm4gQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkYXBwZW5kQnl0ZXMsIGJ5dGVzLCBvdXRwdXQpOwoJCQkJCX0sCgkJCQkJQTIoCgkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRhbmRUaGVuLAoJCQkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkaW5mbGF0ZVVuY29tcHJlc3NlZEJsb2NrOwoJCQkJCQl9LAoJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkc2tpcFRvQnl0ZUJvdW5kYXJ5KSk7CgkJCWNhc2UgMToKCQkJCXJldHVybiBBMygKCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRpbmZsYXRlQmxvY2tEYXRhLAoJCQkJCXtkaXN0YW5jZTogJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkc2R0cmVlLCBsaXRlcmFsOiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCRzbHRyZWV9LAoJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JGxlbmd0aChvdXRwdXQpLAoJCQkJCW91dHB1dCk7CgkJCWNhc2UgMjoKCQkJCXJldHVybiBBMigKCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkYW5kVGhlbiwKCQkJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQkJCXZhciBsdHJlZSA9IF92Mi5hOwoJCQkJCQl2YXIgZHRyZWUgPSBfdjIuYjsKCQkJCQkJcmV0dXJuIEEzKAoJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkaW5mbGF0ZUJsb2NrRGF0YSwKCQkJCQkJCXtkaXN0YW5jZTogZHRyZWUsIGxpdGVyYWw6IGx0cmVlfSwKCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JGxlbmd0aChvdXRwdXQpLAoJCQkJCQkJb3V0cHV0KTsKCQkJCQl9LAoJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJGRlY29kZVRyZWVzKTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkZXJyb3IoCgkJCQkJJ2ludmFsaWQgYmxvY2sgdHlwZTogJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoYnR5cGUpICsgJyAob25seSAwLCAxIGFuZCAyIGFyZSB2YWxpZCBibG9jayB0eXBlcyknKSk7CgkJfQoJfTsKCXZhciByZWFkVHdvQml0cyA9IEEzKAoJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRtYXAyLAoJCUYyKAoJCQlmdW5jdGlvbiAoYjEsIGIyKSB7CgkJCQlyZXR1cm4gYjEgKyAoMiAqIGIyKTsKCQkJfSksCgkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJGdldEJpdCwKCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkZ2V0Qml0KTsKCXZhciBnbyA9IEYyKAoJCWZ1bmN0aW9uIChpc0ZpbmFsLCBibG9ja1R5cGUpIHsKCQkJcmV0dXJuICghKCFpc0ZpbmFsKSkgPyBBMigKCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRtYXAsCgkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSREb25lLAoJCQkJdW5jb21wcmVzc0Jsb2NrKGJsb2NrVHlwZSkpIDogQTIoCgkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkbWFwLAoJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkTG9vcCwKCQkJCXVuY29tcHJlc3NCbG9jayhibG9ja1R5cGUpKTsKCQl9KTsKCXJldHVybiBBMigKCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkYW5kVGhlbiwKCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCUEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRtYXAyLCBnbywgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJGdldEJpdCwgcmVhZFR3b0JpdHMpKTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJHVuY29tcHJlc3MgPSBBMigKCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEJpdFJlYWRlciRtYXAsCglBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLCAkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSR0b0J5dGVzLCAkZWxtJGNvcmUkTGlzdCRzaW5nbGV0b24pLAoJQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkQml0UmVhZGVyJGxvb3AsICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JGVtcHR5LCAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbnRlcm5hbCR1bmNvbXByZXNzSGVscCkpOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkaW5mbGF0ZSA9IGZ1bmN0aW9uIChidWZmZXIpIHsKCXZhciBfdjAgPSBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRCaXRSZWFkZXIkZGVjb2RlLCBidWZmZXIsICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRJbmZsYXRlJEludGVybmFsJHVuY29tcHJlc3MpOwoJaWYgKF92MC4kID09PSAnRXJyJykgewoJCXZhciBlID0gX3YwLmE7CgkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKGUpOwoJfSBlbHNlIHsKCQl2YXIgdmFsdWVzID0gX3YwLmE7CgkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJGVuY29kZSgKCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHNlcXVlbmNlKAoJCQkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkYnl0ZXMsIHZhbHVlcykpKSk7Cgl9Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbmZsYXRlJGluZmxhdGUgPSBmdW5jdGlvbiAoYnVmZmVyKSB7Cgl2YXIgX3YwID0gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEluZmxhdGUkSW50ZXJuYWwkaW5mbGF0ZShidWZmZXIpOwoJaWYgKF92MC4kID09PSAnRXJyJykgewoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCX0gZWxzZSB7CgkJdmFyIG5ld0J1ZmZlciA9IF92MC5hOwoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChuZXdCdWZmZXIpOwoJfQp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEZsYXRlJGluZmxhdGUgPSAkZm9sa2VydGRldiRlbG1fZmxhdGUkSW5mbGF0ZSRJbmZsYXRlJGluZmxhdGU7CnZhciAkYWd1X3okZWxtX3ppcCRaaXAkRW50cnkkSW50ZWdyaXR5RXJyb3IgPSB7JDogJ0ludGVncml0eUVycm9yJ307CnZhciAkYWd1X3okZWxtX3ppcCRaaXAkRW50cnkkaW50ZWdyaXR5ID0gRjIoCglmdW5jdGlvbiAoc3VtLCBieXRlcykgewoJCXJldHVybiBfVXRpbHNfZXEoCgkJCXN1bSwKCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEZsYXRlJGNyYzMyKGJ5dGVzKSkgPyAkZWxtJGNvcmUkUmVzdWx0JE9rKGJ5dGVzKSA6ICRlbG0kY29yZSRSZXN1bHQkRXJyKCRhZ3VfeiRlbG1femlwJFppcCRFbnRyeSRJbnRlZ3JpdHlFcnJvcik7Cgl9KTsKdmFyICRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRhZnRlciA9IGZ1bmN0aW9uIChvZmZzZXQpIHsKCXJldHVybiBBMigKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAyLAoJCUYyKAoJCQlmdW5jdGlvbiAoX3YwLCBhKSB7CgkJCQlyZXR1cm4gYTsKCQkJfSksCgkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkYnl0ZXMob2Zmc2V0KSk7Cn07CnZhciAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkaTMyID0gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQzMigkZWxtJGJ5dGVzJEJ5dGVzJExFKTsKdmFyICRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRjaGVja1NpZ25hdHVyZSA9IGZ1bmN0aW9uIChleHBlY3RlZCkgewoJdmFyIGNoZWNrID0gZnVuY3Rpb24gKHZhbHVlKSB7CgkJcmV0dXJuIF9VdGlsc19lcSh2YWx1ZSwgZXhwZWN0ZWQpID8gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkc3VjY2VlZChfVXRpbHNfVHVwbGUwKSA6ICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGZhaWw7Cgl9OwoJcmV0dXJuIEEyKAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcDIsCgkJRjIoCgkJCWZ1bmN0aW9uIChfdjAsIGIpIHsKCQkJCXJldHVybiBiOwoJCQl9KSwKCQlBMigkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRhbmRUaGVuLCBjaGVjaywgJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGkzMikpOwp9Owp2YXIgJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGkxNiA9ICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MTYoJGVsbSRieXRlcyRCeXRlcyRMRSk7CnZhciAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkd2l0aCA9IEYyKAoJZnVuY3Rpb24gKGEsIGZuKSB7CgkJcmV0dXJuIEEzKCRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcDIsICRlbG0kY29yZSRCYXNpY3MkYXBMLCBmbiwgYSk7Cgl9KTsKdmFyICRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRyZWFkRmlsZSA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBieXRlcyA9IF92MC5hOwoJdmFyIG1ldGEgPSBfdjAuYjsKCWlmIChieXRlcy4kID09PSAnRXhhY3RseScpIHsKCQl2YXIgZW50cnlCeXRlcyA9IGJ5dGVzLmE7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KGVudHJ5Qnl0ZXMpOwoJfSBlbHNlIHsKCQl2YXIgYWxsQnl0ZXMgPSBieXRlcy5hOwoJCXZhciBzdGFydE9mZnNldCA9IGJ5dGVzLmI7CgkJdmFyIGVudHJ5RGF0YURlY29kZXIgPSBBMigKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkYW5kVGhlbiwKCQkJZnVuY3Rpb24gKG9mZnNldCkgewoJCQkJcmV0dXJuIEEyKAoJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRhZnRlciwKCQkJCQlvZmZzZXQsCgkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkYnl0ZXMobWV0YS5jb21wcmVzc2VkU2l6ZSkpOwoJCQl9LAoJCQlBMigKCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSR3aXRoLAoJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGkxNiwKCQkJCUEyKAoJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSR3aXRoLAoJCQkJCUEyKCRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRhZnRlciwgMjIsICRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRpMTYpLAoJCQkJCUEyKAoJCQkJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkY2hlY2tTaWduYXR1cmUsCgkJCQkJCTY3MzI0NzUyLAoJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRzdWNjZWVkKCRlbG0kY29yZSRCYXNpY3MkYWRkKSkpKSk7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRkZWNvZGUsCgkJCUEyKCRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRhZnRlciwgc3RhcnRPZmZzZXQsIGVudHJ5RGF0YURlY29kZXIpLAoJCQlhbGxCeXRlcyk7Cgl9Cn07CnZhciAkYWd1X3okZWxtX3ppcCRaaXAkRW50cnkkdG9CeXRlcyA9IGZ1bmN0aW9uIChlbnRyeSkgewoJdmFyIHJlY29yZCA9IGVudHJ5LmI7Cgl2YXIgX3YwID0gJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJHJlYWRGaWxlKGVudHJ5KTsKCWlmIChfdjAuJCA9PT0gJ0p1c3QnKSB7CgkJdmFyIHJhd0J5dGVzID0gX3YwLmE7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkUmVzdWx0JGFuZFRoZW4sCgkJCSRhZ3VfeiRlbG1femlwJFppcCRFbnRyeSRpbnRlZ3JpdHkocmVjb3JkLmNyYzMyKSwKCQkJZnVuY3Rpb24gKCkgewoJCQkJdmFyIF92MSA9IHJlY29yZC5jb21wcmVzc2lvbk1ldGhvZDsKCQkJCXN3aXRjaCAoX3YxLiQpIHsKCQkJCQljYXNlICdTdG9yZWQnOgoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPayhyYXdCeXRlcyk7CgkJCQkJY2FzZSAnRGVmbGF0ZWQnOgoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JGZyb21NYXliZSwKCQkJCQkJCSRhZ3VfeiRlbG1femlwJFppcCRFbnRyeSRJbmZsYXRlRXJyb3IsCgkJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRmxhdGUkaW5mbGF0ZShyYXdCeXRlcykpOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXZhciBtZXRob2QgPSBfdjEuYTsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKAoJCQkJCQkJQTIoJGFndV96JGVsbV96aXAkWmlwJEVudHJ5JFVuc3VwcG9ydGVkQ29tcHJlc3Npb24sIG1ldGhvZCwgcmF3Qnl0ZXMpKTsKCQkJCX0KCQkJfSgpKTsKCX0gZWxzZSB7CgkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKCRhZ3VfeiRlbG1femlwJFppcCRFbnRyeSREZWNvZGVFcnJvcik7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRleHRyYWN0RmlsZVRyZWVGcm9tWmlwQXJjaGl2ZSA9IEEyKAoJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCSRhZ3VfeiRlbG1femlwJFppcCRlbnRyaWVzLAoJQTIoCgkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXIoCgkJCUEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsICRhZ3VfeiRlbG1femlwJFppcCRFbnRyeSRpc0RpcmVjdG9yeSwgJGVsbSRjb3JlJEJhc2ljcyRub3QpKSwKCQlBMigKCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJJGVsbSRjb3JlJExpc3QkbWFwKAoJCQkJZnVuY3Rpb24gKGVudHJ5KSB7CgkJCQkJdmFyIF92MCA9ICRhZ3VfeiRlbG1femlwJFppcCRFbnRyeSR0b0J5dGVzKGVudHJ5KTsKCQkJCQlpZiAoX3YwLiQgPT09ICdFcnInKSB7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCQkJCSdGYWlsZWQgdG8gZXh0cmFjdCBlbnRyeSBcJycgKyAoJGFndV96JGVsbV96aXAkWmlwJEVudHJ5JHBhdGgoZW50cnkpICsgJ1wnJykpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBlbnRyeUJ5dGVzID0gX3YwLmE7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJHNwbGl0KCdcXCcpLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckc3BsaXQsCgkJCQkJCQkJCQknLycsCgkJCQkJCQkJCQkkYWd1X3okZWxtX3ppcCRaaXAkRW50cnkkcGF0aChlbnRyeSkpKSwKCQkJCQkJCQllbnRyeUJ5dGVzKSk7CgkJCQkJfQoJCQkJfSksCgkJCUEyKAoJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCSRlbG1fY29tbXVuaXR5JHJlc3VsdF9leHRyYSRSZXN1bHQkRXh0cmEkY29tYmluZSwKCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwKCRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJHNvcnRlZEZpbGVUcmVlRnJvbUxpc3RPZkJsb2JzQXNCeXRlcykpKSkpOwp2YXIgJGVsbSRmaWxlJEZpbGUkU2VsZWN0JGZpbGUgPSBGMigKCWZ1bmN0aW9uIChtaW1lcywgdG9Nc2cpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRUYXNrJHBlcmZvcm0sCgkJCXRvTXNnLAoJCQlfRmlsZV91cGxvYWRPbmUobWltZXMpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kRGlzY2FyZEV2ZW50ID0geyQ6ICdEaXNjYXJkRXZlbnQnfTsKdmFyICRlbG0kY29yZSRUYXNrJG9uRXJyb3IgPSBfU2NoZWR1bGVyX29uRXJyb3I7CnZhciAkZWxtJGNvcmUkVGFzayRhdHRlbXB0ID0gRjIoCglmdW5jdGlvbiAocmVzdWx0VG9NZXNzYWdlLCB0YXNrKSB7CgkJcmV0dXJuICRlbG0kY29yZSRUYXNrJGNvbW1hbmQoCgkJCSRlbG0kY29yZSRUYXNrJFBlcmZvcm0oCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkVGFzayRvbkVycm9yLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VMLAoJCQkJCQlBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VMLCAkZWxtJGNvcmUkVGFzayRzdWNjZWVkLCByZXN1bHRUb01lc3NhZ2UpLAoJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JEVyciksCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRUYXNrJGFuZFRoZW4sCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlTCwKCQkJCQkJCUEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZUwsICRlbG0kY29yZSRUYXNrJHN1Y2NlZWQsIHJlc3VsdFRvTWVzc2FnZSksCgkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JE9rKSwKCQkJCQkJdGFzaykpKSk7Cgl9KTsKdmFyICRlbG0kYnJvd3NlciRCcm93c2VyJERvbSRmb2N1cyA9IF9Ccm93c2VyX2NhbGwoJ2ZvY3VzJyk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRpbnB1dFVybEVsZW1lbnRJZCA9ICdpbnB1dC11cmwnOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZm9jdXNJbnB1dFVybEVsZW1lbnRDbWQgPSBBMigKCSRlbG0kY29yZSRUYXNrJGF0dGVtcHQsCglmdW5jdGlvbiAoX3YwKSB7CgkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJERpc2NhcmRFdmVudDsKCX0sCgkkZWxtJGJyb3dzZXIkQnJvd3NlciREb20kZm9jdXMoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kaW5wdXRVcmxFbGVtZW50SWQpKTsKdmFyICRlbG0kY29yZSRNYXliZSRhbmRUaGVuID0gRjIoCglmdW5jdGlvbiAoY2FsbGJhY2ssIG1heWJlVmFsdWUpIHsKCQlpZiAobWF5YmVWYWx1ZS4kID09PSAnSnVzdCcpIHsKCQkJdmFyIHZhbHVlID0gbWF5YmVWYWx1ZS5hOwoJCQlyZXR1cm4gY2FsbGJhY2sodmFsdWUpOwoJCX0gZWxzZSB7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQl9Cgl9KTsKdmFyICRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRDZFJlY29yZEJvdW5kcyA9IEY2KAoJZnVuY3Rpb24gKG5hbWVMZW5ndGgsIGV4dHJhRmllbGRMZW5ndGgsIGNvbW1lbnRMZW5ndGgsIGludGVybmFsQXR0cmlidXRlcywgZXh0ZXJuYWxBdHRyaWJ1dGVzLCBzdGFydE9mZnNldCkgewoJCXJldHVybiB7Y29tbWVudExlbmd0aDogY29tbWVudExlbmd0aCwgZXh0ZXJuYWxBdHRyaWJ1dGVzOiBleHRlcm5hbEF0dHJpYnV0ZXMsIGV4dHJhRmllbGRMZW5ndGg6IGV4dHJhRmllbGRMZW5ndGgsIGludGVybmFsQXR0cmlidXRlczogaW50ZXJuYWxBdHRyaWJ1dGVzLCBuYW1lTGVuZ3RoOiBuYW1lTGVuZ3RoLCBzdGFydE9mZnNldDogc3RhcnRPZmZzZXR9OwoJfSk7CnZhciAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRGb3JtYXQkRW50cnlNZXRhID0gZnVuY3Rpb24gKG1hZGVCeSkgewoJcmV0dXJuIGZ1bmN0aW9uIChleHRyYWN0TWluVmVyc2lvbikgewoJCXJldHVybiBmdW5jdGlvbiAoZmxhZykgewoJCQlyZXR1cm4gZnVuY3Rpb24gKGNvbXByZXNzaW9uTWV0aG9kKSB7CgkJCQlyZXR1cm4gZnVuY3Rpb24gKGxhc3RNb2RpZmllZCkgewoJCQkJCXJldHVybiBmdW5jdGlvbiAoY3JjMzIpIHsKCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChjb21wcmVzc2VkU2l6ZSkgewoJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uICh1bmNvbXByZXNzZWRTaXplKSB7CgkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChmaWxlTmFtZSkgewoJCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGV4dHJhRmllbGQpIHsKCQkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoY29tbWVudCkgewoJCQkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoaW50ZXJuYWxBdHRyaWJ1dGVzKSB7CgkJCQkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoZXh0ZXJuYWxBdHRyaWJ1dGVzKSB7CgkJCQkJCQkJCQkJCQlyZXR1cm4ge2NvbW1lbnQ6IGNvbW1lbnQsIGNvbXByZXNzZWRTaXplOiBjb21wcmVzc2VkU2l6ZSwgY29tcHJlc3Npb25NZXRob2Q6IGNvbXByZXNzaW9uTWV0aG9kLCBjcmMzMjogY3JjMzIsIGV4dGVybmFsQXR0cmlidXRlczogZXh0ZXJuYWxBdHRyaWJ1dGVzLCBleHRyYUZpZWxkOiBleHRyYUZpZWxkLCBleHRyYWN0TWluVmVyc2lvbjogZXh0cmFjdE1pblZlcnNpb24sIGZpbGVOYW1lOiBmaWxlTmFtZSwgZmxhZzogZmxhZywgaW50ZXJuYWxBdHRyaWJ1dGVzOiBpbnRlcm5hbEF0dHJpYnV0ZXMsIGxhc3RNb2RpZmllZDogbGFzdE1vZGlmaWVkLCBtYWRlQnk6IG1hZGVCeSwgdW5jb21wcmVzc2VkU2l6ZTogdW5jb21wcmVzc2VkU2l6ZX07CgkJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCX07CgkJCQkJCQkJCX07CgkJCQkJCQkJfTsKCQkJCQkJCX07CgkJCQkJCX07CgkJCQkJfTsKCQkJCX07CgkJCX07CgkJfTsKCX07Cn07CnZhciAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRGb3JtYXQkT2Zmc2V0ID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ09mZnNldCcsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRGb3JtYXQkRGVmbGF0ZWQgPSB7JDogJ0RlZmxhdGVkJ307CnZhciAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRGb3JtYXQkVW5zdXBwb3J0ZWQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVW5zdXBwb3J0ZWQnLCBhOiBhfTsKfTsKdmFyICRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRjb21wcmVzc2lvbk1ldGhvZCA9IGZ1bmN0aW9uICgpIHsKCXZhciBoZWxwID0gZnVuY3Rpb24gKG0pIHsKCQlzd2l0Y2ggKG0pIHsKCQkJY2FzZSAwOgoJCQkJcmV0dXJuICRhZ3VfeiRlbG1femlwJEludGVybmFsJEZvcm1hdCRTdG9yZWQ7CgkJCWNhc2UgODoKCQkJCXJldHVybiAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRGb3JtYXQkRGVmbGF0ZWQ7CgkJCWRlZmF1bHQ6CgkJCQl2YXIgbWV0aG9kID0gbTsKCQkJCXJldHVybiAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRGb3JtYXQkVW5zdXBwb3J0ZWQobWV0aG9kKTsKCQl9Cgl9OwoJcmV0dXJuIEEyKCRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcCwgaGVscCwgJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGkxNik7Cn0oKTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHN0cmluZyA9IGZ1bmN0aW9uIChuKSB7CglyZXR1cm4gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRGVjb2RlcigKCQlfQnl0ZXNfcmVhZF9zdHJpbmcobikpOwp9Owp2YXIgJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGVudHJ5SW4gPSBmdW5jdGlvbiAoYnl0ZXMpIHsKCXZhciBzdGFydCA9IEEyKAoJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSR3aXRoLAoJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRpMzIsCgkJQTIoCgkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSR3aXRoLAoJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkaTMyLAoJCQlBMigKCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSR3aXRoLAoJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGkzMiwKCQkJCUEyKAoJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSR3aXRoLAoJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRpMzIsCgkJCQkJQTIoCgkJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSR3aXRoLAoJCQkJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkY29tcHJlc3Npb25NZXRob2QsCgkJCQkJCUEyKAoJCQkJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJHdpdGgsCgkJCQkJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkaTE2LAoJCQkJCQkJQTIoCgkJCQkJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJHdpdGgsCgkJCQkJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGkxNiwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJHdpdGgsCgkJCQkJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRpMTYsCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGNoZWNrU2lnbmF0dXJlLAoJCQkJCQkJCQkJMzM2MzkyNDgsCgkJCQkJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRzdWNjZWVkKCRhZ3VfeiRlbG1femlwJEludGVybmFsJEZvcm1hdCRFbnRyeU1ldGEpKSkpKSkpKSkpOwoJdmFyIHJlY29yZEJvdW5kcyA9IEEyKAoJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSR3aXRoLAoJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRpMzIsCgkJQTIoCgkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSR3aXRoLAoJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkaTMyLAoJCQlBMigKCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSR3aXRoLAoJCQkJQTIoJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGFmdGVyLCAyLCAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkaTE2KSwKCQkJCUEyKAoJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSR3aXRoLAoJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRpMTYsCgkJCQkJQTIoCgkJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSR3aXRoLAoJCQkJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkaTE2LAoJCQkJCQlBMigKCQkJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSR3aXRoLAoJCQkJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGkxNiwKCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHN1Y2NlZWQoJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJENkUmVjb3JkQm91bmRzKSkpKSkpKTsKCXZhciBmaW5pc2ggPSBmdW5jdGlvbiAoX3YwKSB7CgkJdmFyIG1ha2VNZXRhID0gX3YwLmE7CgkJdmFyIGJvdW5kcyA9IF92MC5iOwoJCXJldHVybiBBMigKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwLAoJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRGb3JtYXQkRW50cnkoCgkJCQlBMigkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRGb3JtYXQkT2Zmc2V0LCBieXRlcywgYm91bmRzLnN0YXJ0T2Zmc2V0KSksCgkJCUE2KAoJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwNSwKCQkJCW1ha2VNZXRhLAoJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkc3RyaW5nKGJvdW5kcy5uYW1lTGVuZ3RoKSwKCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGJ5dGVzKGJvdW5kcy5leHRyYUZpZWxkTGVuZ3RoKSwKCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHN0cmluZyhib3VuZHMuY29tbWVudExlbmd0aCksCgkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRzdWNjZWVkKGJvdW5kcy5pbnRlcm5hbEF0dHJpYnV0ZXMpLAoJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkc3VjY2VlZChib3VuZHMuZXh0ZXJuYWxBdHRyaWJ1dGVzKSkpOwoJfTsKCXJldHVybiBBMigKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRhbmRUaGVuLAoJCWZpbmlzaCwKCQlBMygkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAyLCAkZWxtJGNvcmUkVHVwbGUkcGFpciwgc3RhcnQsIHJlY29yZEJvdW5kcykpOwp9Owp2YXIgJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJENkQm91bmRzID0gRjIoCglmdW5jdGlvbiAocmVjb3JkQ291bnQsIHN0YXJ0KSB7CgkJcmV0dXJuIHtyZWNvcmRDb3VudDogcmVjb3JkQ291bnQsIHN0YXJ0OiBzdGFydH07Cgl9KTsKdmFyICRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRmaW5kQ2RCb3VuZHMgPSBmdW5jdGlvbiAoYnl0ZXMpIHsKCXZhciBkZWNvZGVyID0gQTIoCgkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJHdpdGgsCgkJQTIoJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGFmdGVyLCA0LCAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkaTMyKSwKCQlBMigKCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJHdpdGgsCgkJCUEyKCRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRhZnRlciwgNiwgJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGkxNiksCgkJCUEyKAoJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGNoZWNrU2lnbmF0dXJlLAoJCQkJMTAxMDEwMjU2LAoJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkc3VjY2VlZCgkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkQ2RCb3VuZHMpKSkpOwoJdmFyIGF0dGVtcHQgPSBmdW5jdGlvbiAob2Zmc2V0KSB7CgkJYXR0ZW1wdDoKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgX3YwID0gQTIoCgkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRkZWNvZGUsCgkJCQlBMigkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkYWZ0ZXIsIG9mZnNldCwgZGVjb2RlciksCgkJCQlieXRlcyk7CgkJCWlmIChfdjAuJCA9PT0gJ0p1c3QnKSB7CgkJCQl2YXIgYm91bmRzID0gX3YwLmE7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoYm91bmRzKTsKCQkJfSBlbHNlIHsKCQkJCWlmIChvZmZzZXQgPCAwKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0IC0gMTsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJY29udGludWUgYXR0ZW1wdDsKCQkJCX0KCQkJfQoJCX0KCX07CglyZXR1cm4gYXR0ZW1wdCgKCQkkZWxtJGJ5dGVzJEJ5dGVzJHdpZHRoKGJ5dGVzKSAtIDIyKTsKfTsKdmFyICRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRsaXN0U3RlcCA9IEYyKAoJZnVuY3Rpb24gKGVsZW1lbnREZWNvZGVyLCBfdjApIHsKCQl2YXIgbiA9IF92MC5hOwoJCXZhciBlbGVtZW50cyA9IF92MC5iOwoJCXJldHVybiAobiA8PSAwKSA/ICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHN1Y2NlZWQoCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJERvbmUoCgkJCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKGVsZW1lbnRzKSkpIDogQTIoCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcCwKCQkJZnVuY3Rpb24gKGVsZW1lbnQpIHsKCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRMb29wKAoJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCW4gLSAxLAoJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBlbGVtZW50LCBlbGVtZW50cykpKTsKCQkJfSwKCQkJZWxlbWVudERlY29kZXIpOwoJfSk7CnZhciAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkbGlzdCA9IEYyKAoJZnVuY3Rpb24gKGxlbmd0aCwgYURlY29kZXIpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGxvb3AsCgkJCV9VdGlsc19UdXBsZTIobGVuZ3RoLCBfTGlzdF9OaWwpLAoJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkbGlzdFN0ZXAoYURlY29kZXIpKTsKCX0pOwp2YXIgJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJHJlYWREaXJlY3RvcnkgPSBmdW5jdGlvbiAoYnl0ZXMpIHsKCXZhciB0b3BEZWNvZGVyID0gZnVuY3Rpb24gKGJvdW5kcykgewoJCXJldHVybiBBMigKCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGFmdGVyLAoJCQlib3VuZHMuc3RhcnQsCgkJCUEyKAoJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJGxpc3QsCgkJCQlib3VuZHMucmVjb3JkQ291bnQsCgkJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkZW50cnlJbihieXRlcykpKTsKCX07CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJE1heWJlJGFuZFRoZW4sCgkJZnVuY3Rpb24gKGJvdW5kcykgewoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRkZWNvZGUsCgkJCQl0b3BEZWNvZGVyKGJvdW5kcyksCgkJCQlieXRlcyk7CgkJfSwKCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCREZWNvZGUkZmluZENkQm91bmRzKGJ5dGVzKSk7Cn07CnZhciAkYWd1X3okZWxtX3ppcCRaaXAkZnJvbUJ5dGVzID0gZnVuY3Rpb24gKGJ5dGVzKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkkYWd1X3okZWxtX3ppcCRaaXAkWmlwLAoJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJERlY29kZSRyZWFkRGlyZWN0b3J5KGJ5dGVzKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0RWRpdG9yT3BlblBvc2l0aW9uID0ge2NvbHVtbjogMSwgbGluZU51bWJlcjogMX07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRpbml0V29ya3NwYWNlRnJvbUZpbGVUcmVlQW5kRmlsZVNlbGVjdGlvbiA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBmaWxlVHJlZSA9IF92MC5maWxlVHJlZTsKCXZhciBmaWxlTG9jYXRpb25PcGVuSW5FZGl0b3IgPSBfdjAuZmlsZUxvY2F0aW9uT3BlbkluRWRpdG9yOwoJcmV0dXJuIHsKCQljb21waWxhdGlvbjogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsCgkJZGVjb2RlTWVzc2FnZUZyb21Nb25hY29FZGl0b3JFcnJvcjogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsCgkJZWRpdGluZzogZnVuY3Rpb24gKCkgewoJCQlpZiAoZmlsZUxvY2F0aW9uT3BlbkluRWRpdG9yLiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQl9IGVsc2UgewoJCQkJdmFyIGZpbGVMb2NhdGlvbiA9IGZpbGVMb2NhdGlvbk9wZW5JbkVkaXRvci5hOwoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCXtmaWxlTG9jYXRpb246IGZpbGVMb2NhdGlvbiwgb3BlblBvc2l0aW9uOiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0RWRpdG9yT3BlblBvc2l0aW9ufSk7CgkJCX0KCQl9KCksCgkJZWxtRm9ybWF0OiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywKCQllbmFibGVJbnNwZWN0aW9uT25Db21waWxlOiBmYWxzZSwKCQlmaWxlVHJlZTogZmlsZVRyZWUsCgkJbGFzdFRleHRSZWNlaXZlZEZyb21FZGl0b3I6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLAoJCXN5bnRheEluc3BlY3Rpb246ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLAoJCXZpZXdFbmxhcmdlZFBhbmU6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nCgl9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJENvbnRhaW5lckh0bWwkQ2xpY2tlZExpbmtJblByZXZpZXcgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnQ2xpY2tlZExpbmtJblByZXZpZXcnLCBhOiBhfTsKfTsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCA9IF9Kc29uX2RlY29kZUZpZWxkOwp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4ID0gX0pzb25fZGVjb2RlSW5kZXg7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAgPSAkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwMigkZWxtJGNvcmUkQmFzaWNzJGFwUik7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkb25lT2YgPSBfSnNvbl9vbmVPZjsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcyA9IEYzKAoJZnVuY3Rpb24gKGZpZWxkTmFtZSwgYWx0ZXJuYXRlTmFtZXMsIGRlY29kZXIpIHsKCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRGVjb2RlJG9uZU9mKAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCWZ1bmN0aW9uIChuYW1lKSB7CgkJCQkJcmV0dXJuIEEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgbmFtZSwgZGVjb2Rlcik7CgkJCQl9LAoJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZmllbGROYW1lLCBhbHRlcm5hdGVOYW1lcykpKTsKCX0pOwp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJGFuZFRoZW4gPSBfSnNvbl9hbmRUaGVuOwp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkgPSBmdW5jdGlvbiAodGh1bmspIHsKCXJldHVybiBBMigKCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkYW5kVGhlbiwKCQl0aHVuaywKCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZChfVXRpbHNfVHVwbGUwKSk7Cn07CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nID0gX0pzb25fZGVjb2RlU3RyaW5nOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfRnJvbnRlbmRfQ29udGFpbmVySHRtbF9NZXNzYWdlID0gJGVsbSRqc29uJEpzb24kRGVjb2RlJG9uZU9mKAoJX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ0NsaWNrZWRMaW5rSW5QcmV2aWV3JywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkQ29udGFpbmVySHRtbCRDbGlja2VkTGlua0luUHJldmlldywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkwLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCUEzKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCSdocmVmJywKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWydIcmVmJ10pLAoJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSwKCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJZnVuY3Rpb24gKGhyZWYpIHsKCQkJCQkJCQkJCXJldHVybiB7aHJlZjogaHJlZn07CgkJCQkJCQkJCX0pKSkpOwoJCQkJfSkpCgkJXSkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfMzYwMjQ4MTQ4ID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfRnJvbnRlbmRfQ29udGFpbmVySHRtbF9NZXNzYWdlOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZU1lc3NhZ2VGcm9tQ29udGFpbmVySHRtbCA9ICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlXzM2MDI0ODE0ODsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkQ29tcGxldGVkU2V0dXBFdmVudCA9IHskOiAnQ29tcGxldGVkU2V0dXBFdmVudCd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciREaWRDaGFuZ2VDb250ZW50RXZlbnQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRGlkQ2hhbmdlQ29udGVudEV2ZW50JywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJEVkaXRvckFjdGlvbkNsb3NlRWRpdG9yRXZlbnQgPSB7JDogJ0VkaXRvckFjdGlvbkNsb3NlRWRpdG9yRXZlbnQnfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkRWRpdG9yQWN0aW9uQ29tcGlsZUV2ZW50ID0geyQ6ICdFZGl0b3JBY3Rpb25Db21waWxlRXZlbnQnfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkRWRpdG9yQWN0aW9uRm9ybWF0RG9jdW1lbnRFdmVudCA9IHskOiAnRWRpdG9yQWN0aW9uRm9ybWF0RG9jdW1lbnRFdmVudCd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRFZGl0b3JBY3Rpb25JbnNwZWN0U3ludGF4RXZlbnQgPSB7JDogJ0VkaXRvckFjdGlvbkluc3BlY3RTeW50YXhFdmVudCd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRPcGVuQ29kZUVkaXRvckV2ZW50ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ09wZW5Db2RlRWRpdG9yRXZlbnQnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkUmVxdWVzdENvbXBsZXRpb25JdGVtc0V2ZW50ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1JlcXVlc3RDb21wbGV0aW9uSXRlbXNFdmVudCcsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRSZXF1ZXN0RGVmaW5pdGlvbkV2ZW50ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1JlcXVlc3REZWZpbml0aW9uRXZlbnQnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkUmVxdWVzdEhvdmVyRXZlbnQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUmVxdWVzdEhvdmVyRXZlbnQnLCBhOiBhfTsKfTsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRpbnQgPSBfSnNvbl9kZWNvZGVJbnQ7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkZmFpbCA9IF9Kc29uX2ZhaWw7CnZhciAkZWxtJGpzb24kSnNvbiRFbmNvZGUkbnVsbCA9IF9Kc29uX2VuY29kZU51bGw7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkdmFsdWUgPSBfSnNvbl9kZWNvZGVWYWx1ZTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlU3VjY2VlZFdoZW5Ob3ROdWxsID0gZnVuY3Rpb24gKHZhbHVlSWZOb3ROdWxsKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGFuZFRoZW4sCgkJZnVuY3Rpb24gKGFzVmFsdWUpIHsKCQkJcmV0dXJuIF9VdGlsc19lcShhc1ZhbHVlLCAkZWxtJGpzb24kSnNvbiRFbmNvZGUkbnVsbCkgPyAkZWxtJGpzb24kSnNvbiREZWNvZGUkZmFpbCgnSXMgbnVsbC4nKSA6ICRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKHZhbHVlSWZOb3ROdWxsKTsKCQl9LAoJCSRlbG0kanNvbiRKc29uJERlY29kZSR2YWx1ZSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9Gcm9udGVuZF9Nb25hY29FZGl0b3JfTWVzc2FnZUZyb21FZGl0b3IgPSAkZWxtJGpzb24kSnNvbiREZWNvZGUkb25lT2YoCglfTGlzdF9mcm9tQXJyYXkoCgkJWwoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknQ29tcGxldGVkU2V0dXBFdmVudCcsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlU3VjY2VlZFdoZW5Ob3ROdWxsKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkQ29tcGxldGVkU2V0dXBFdmVudCkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknRGlkQ2hhbmdlQ29udGVudEV2ZW50JywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJERpZENoYW5nZUNvbnRlbnRFdmVudCwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkwLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCUEzKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCSd1cmknLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbJ1VyaSddKSwKCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkndGV4dE1vZGVsVmFsdWUnLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsnVGV4dE1vZGVsVmFsdWUnXSksCgkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSwKCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoCgkJCQkJCQkJCQlGMigKCQkJCQkJCQkJCQlmdW5jdGlvbiAodGV4dE1vZGVsVmFsdWUsIHVyaSkgewoJCQkJCQkJCQkJCQlyZXR1cm4ge3RleHRNb2RlbFZhbHVlOiB0ZXh0TW9kZWxWYWx1ZSwgdXJpOiB1cml9OwoJCQkJCQkJCQkJCX0pKSkpKSk7CgkJCQl9KSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdEaWRGb2N1c0VkaXRvcldpZGdldEV2ZW50JywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciREaWRGb2N1c0VkaXRvcldpZGdldEV2ZW50KSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdFZGl0b3JBY3Rpb25DbG9zZUVkaXRvckV2ZW50JywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRFZGl0b3JBY3Rpb25DbG9zZUVkaXRvckV2ZW50KSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdFZGl0b3JBY3Rpb25Db21waWxlRXZlbnQnLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZVN1Y2NlZWRXaGVuTm90TnVsbCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJEVkaXRvckFjdGlvbkNvbXBpbGVFdmVudCkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknRWRpdG9yQWN0aW9uRm9ybWF0RG9jdW1lbnRFdmVudCcsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlU3VjY2VlZFdoZW5Ob3ROdWxsKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkRWRpdG9yQWN0aW9uRm9ybWF0RG9jdW1lbnRFdmVudCkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknRWRpdG9yQWN0aW9uSW5zcGVjdFN5bnRheEV2ZW50JywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRFZGl0b3JBY3Rpb25JbnNwZWN0U3ludGF4RXZlbnQpKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ09wZW5Db2RlRWRpdG9yRXZlbnQnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkT3BlbkNvZGVFZGl0b3JFdmVudCwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkwLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCUEzKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCSdwb3NpdGlvbicsCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsnUG9zaXRpb24nXSksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCSdjb2x1bW4nLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWydDb2x1bW4nXSksCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQkJJ2xpbmVOdW1iZXInLAoJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQlbJ0xpbmVOdW1iZXInXSksCgkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCQkJCQkJCQlGMigKCQkJCQkJCQkJCQkJCWZ1bmN0aW9uIChsaW5lTnVtYmVyLCBjb2x1bW4pIHsKCQkJCQkJCQkJCQkJCQlyZXR1cm4ge2NvbHVtbjogY29sdW1uLCBsaW5lTnVtYmVyOiBsaW5lTnVtYmVyfTsKCQkJCQkJCQkJCQkJCX0pKSkpKSwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQlBMygKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCSd1cmknLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsnVXJpJ10pLAoJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCQkJCQkJRjIoCgkJCQkJCQkJCQkJZnVuY3Rpb24gKHVyaSwgcG9zaXRpb24pIHsKCQkJCQkJCQkJCQkJcmV0dXJuIHtwb3NpdGlvbjogcG9zaXRpb24sIHVyaTogdXJpfTsKCQkJCQkJCQkJCQl9KSkpKSkpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknUmVxdWVzdENvbXBsZXRpb25JdGVtc0V2ZW50JywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJFJlcXVlc3RDb21wbGV0aW9uSXRlbXNFdmVudCwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkwLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCUEzKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCSdjdXJzb3JDb2x1bW4nLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbJ0N1cnNvckNvbHVtbiddKSwKCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQknY3Vyc29yTGluZU51bWJlcicsCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWydDdXJzb3JMaW5lTnVtYmVyJ10pLAoJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCSd1cmknLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWydVcmknXSksCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJCQlGMygKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKHVyaSwgY3Vyc29yTGluZU51bWJlciwgY3Vyc29yQ29sdW1uKSB7CgkJCQkJCQkJCQkJCQlyZXR1cm4ge2N1cnNvckNvbHVtbjogY3Vyc29yQ29sdW1uLCBjdXJzb3JMaW5lTnVtYmVyOiBjdXJzb3JMaW5lTnVtYmVyLCB1cmk6IHVyaX07CgkJCQkJCQkJCQkJCX0pKSkpKSkpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknUmVxdWVzdERlZmluaXRpb25FdmVudCcsCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRsYXp5KAoJCQkJZnVuY3Rpb24gKF92MykgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRSZXF1ZXN0RGVmaW5pdGlvbkV2ZW50LAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwKCQkJCQkJCTAsCgkJCQkJCQlBMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJQTMoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJJ3dvcmQnLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbJ1dvcmQnXSksCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJJ2xpbmVUZXh0JywKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbJ0xpbmVUZXh0J10pLAoJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCSdwb3NpdGlvbkNvbHVtbicsCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbJ1Bvc2l0aW9uQ29sdW1uJ10pLAoJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJCSdwb3NpdGlvbkxpbmVOdW1iZXInLAoJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQlbJ1Bvc2l0aW9uTGluZU51bWJlciddKSwKCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJCQkndXJpJywKCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQlbJ1VyaSddKSwKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJCQkJCUY1KAoJCQkJCQkJCQkJCQkJCWZ1bmN0aW9uICh1cmksIHBvc2l0aW9uTGluZU51bWJlciwgcG9zaXRpb25Db2x1bW4sIGxpbmVUZXh0LCB3b3JkKSB7CgkJCQkJCQkJCQkJCQkJCXJldHVybiB7bGluZVRleHQ6IGxpbmVUZXh0LCBwb3NpdGlvbkNvbHVtbjogcG9zaXRpb25Db2x1bW4sIHBvc2l0aW9uTGluZU51bWJlcjogcG9zaXRpb25MaW5lTnVtYmVyLCB1cmk6IHVyaSwgd29yZDogd29yZH07CgkJCQkJCQkJCQkJCQkJfSkpKSkpKSkpKTsKCQkJCX0pKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ1JlcXVlc3RIb3ZlckV2ZW50JywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3Y0KSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJFJlcXVlc3RIb3ZlckV2ZW50LAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwKCQkJCQkJCTAsCgkJCQkJCQlBMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJQTMoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJJ3dvcmQnLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbJ1dvcmQnXSksCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJJ2xpbmVUZXh0JywKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbJ0xpbmVUZXh0J10pLAoJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCSdwb3NpdGlvbkNvbHVtbicsCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbJ1Bvc2l0aW9uQ29sdW1uJ10pLAoJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJCSdwb3NpdGlvbkxpbmVOdW1iZXInLAoJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQlbJ1Bvc2l0aW9uTGluZU51bWJlciddKSwKCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJCQkndXJpJywKCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQlbJ1VyaSddKSwKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJCQkJCUY1KAoJCQkJCQkJCQkJCQkJCWZ1bmN0aW9uICh1cmksIHBvc2l0aW9uTGluZU51bWJlciwgcG9zaXRpb25Db2x1bW4sIGxpbmVUZXh0LCB3b3JkKSB7CgkJCQkJCQkJCQkJCQkJCXJldHVybiB7bGluZVRleHQ6IGxpbmVUZXh0LCBwb3NpdGlvbkNvbHVtbjogcG9zaXRpb25Db2x1bW4sIHBvc2l0aW9uTGluZU51bWJlcjogcG9zaXRpb25MaW5lTnVtYmVyLCB1cmk6IHVyaSwgd29yZDogd29yZH07CgkJCQkJCQkJCQkJCQkJfSkpKSkpKSkpKTsKCQkJCX0pKQoJCV0pKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlXzgzNDI5OTA2MyA9ICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX0Zyb250ZW5kX01vbmFjb0VkaXRvcl9NZXNzYWdlRnJvbUVkaXRvcjsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVNZXNzYWdlRnJvbU1vbmFjb0VkaXRvciA9ICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlXzgzNDI5OTA2MzsKdmFyICRlbG0kYnJvd3NlciRCcm93c2VyJE5hdmlnYXRpb24kbG9hZCA9IF9Ccm93c2VyX2xvYWQ7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZXNjcmliZUh0dHBFcnJvciA9IGZ1bmN0aW9uIChodHRwRXJyb3IpIHsKCXN3aXRjaCAoaHR0cEVycm9yLiQpIHsKCQljYXNlICdCYWRVcmwnOgoJCQl2YXIgZXJyb3JNZXNzYWdlID0gaHR0cEVycm9yLmE7CgkJCXJldHVybiAnQmFkIFVybDogJyArIGVycm9yTWVzc2FnZTsKCQljYXNlICdUaW1lb3V0JzoKCQkJcmV0dXJuICdUaW1lb3V0JzsKCQljYXNlICdOZXR3b3JrRXJyb3InOgoJCQlyZXR1cm4gJ05ldHdvcmsgRXJyb3InOwoJCWNhc2UgJ0JhZFN0YXR1cyc6CgkJCXZhciBtZXRhZGF0YSA9IGh0dHBFcnJvci5hOwoJCQl2YXIgYm9keSA9IGh0dHBFcnJvci5iOwoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQknXG4nLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJJ0JhZFN0YXR1czogJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludChtZXRhZGF0YS5zdGF0dXNDb2RlKSwKCQkJCQkJJ1Jlc3BvbnNlIGJvZHk6ICcgKyBib2R5CgkJCQkJXSkpOwoJCWRlZmF1bHQ6CgkJCXZhciBib2R5ID0gaHR0cEVycm9yLmI7CgkJCXZhciBlcnJvck1lc3NhZ2UgPSBodHRwRXJyb3IuYzsKCQkJcmV0dXJuIEEyKAoJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJJ1xuJywKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbJ0JhZFBheWxvYWQ6ICcgKyBlcnJvck1lc3NhZ2UsICdSZXNwb25zZSBib2R5OiAnICsgYm9keV0pKTsKCX0KfTsKdmFyICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJFV0ZjggPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnVXRmOCcsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRzdHJpbmcgPSBmdW5jdGlvbiAoc3RyKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkVXRmOCwKCQlfQnl0ZXNfZ2V0U3RyaW5nV2lkdGgoc3RyKSwKCQlzdHIpOwp9Owp2YXIgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyRFbmNvZGUkaXNWYWxpZENoYXIgPSBmdW5jdGlvbiAoYykgewoJaWYgKCRlbG0kY29yZSRDaGFyJGlzQWxwaGFOdW0oYykpIHsKCQlyZXR1cm4gdHJ1ZTsKCX0gZWxzZSB7CgkJc3dpdGNoIChjLnZhbHVlT2YoKSkgewoJCQljYXNlICcrJzoKCQkJCXJldHVybiB0cnVlOwoJCQljYXNlICcvJzoKCQkJCXJldHVybiB0cnVlOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KfTsKdmFyICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRW5jb2RlJHVuc2FmZUNvbnZlcnRDaGFyID0gZnVuY3Rpb24gKF9jaGFyKSB7Cgl2YXIga2V5ID0gJGVsbSRjb3JlJENoYXIkdG9Db2RlKF9jaGFyKTsKCWlmICgoa2V5ID49IDY1KSAmJiAoa2V5IDw9IDkwKSkgewoJCXJldHVybiBrZXkgLSA2NTsKCX0gZWxzZSB7CgkJaWYgKChrZXkgPj0gOTcpICYmIChrZXkgPD0gMTIyKSkgewoJCQlyZXR1cm4gKGtleSAtIDk3KSArIDI2OwoJCX0gZWxzZSB7CgkJCWlmICgoa2V5ID49IDQ4KSAmJiAoa2V5IDw9IDU3KSkgewoJCQkJcmV0dXJuICgoa2V5IC0gNDgpICsgMjYpICsgMjY7CgkJCX0gZWxzZSB7CgkJCQlzd2l0Y2ggKF9jaGFyLnZhbHVlT2YoKSkgewoJCQkJCWNhc2UgJysnOgoJCQkJCQlyZXR1cm4gNjI7CgkJCQkJY2FzZSAnLyc6CgkJCQkJCXJldHVybiA2MzsKCQkJCQlkZWZhdWx0OgoJCQkJCQlyZXR1cm4gLTE7CgkJCQl9CgkJCX0KCQl9Cgl9Cn07CnZhciAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEVuY29kZSRlbmNvZGVDaGFyYWN0ZXJzID0gRjQoCglmdW5jdGlvbiAoYSwgYiwgYywgZCkgewoJCWlmICgkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEVuY29kZSRpc1ZhbGlkQ2hhcihhKSAmJiAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEVuY29kZSRpc1ZhbGlkQ2hhcihiKSkgewoJCQl2YXIgbjIgPSAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEVuY29kZSR1bnNhZmVDb252ZXJ0Q2hhcihiKTsKCQkJdmFyIG4xID0gJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyRFbmNvZGUkdW5zYWZlQ29udmVydENoYXIoYSk7CgkJCWlmICgnPScgPT09IGQudmFsdWVPZigpKSB7CgkJCQlpZiAoJz0nID09PSBjLnZhbHVlT2YoKSkgewoJCQkJCXZhciBuID0gKG4xIDw8IDE4KSB8IChuMiA8PCAxMik7CgkJCQkJdmFyIGIxID0gbiA+PiAxNjsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50OChiMSkpOwoJCQkJfSBlbHNlIHsKCQkJCQlpZiAoJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyRFbmNvZGUkaXNWYWxpZENoYXIoYykpIHsKCQkJCQkJdmFyIG4zID0gJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyRFbmNvZGUkdW5zYWZlQ29udmVydENoYXIoYyk7CgkJCQkJCXZhciBuID0gKChuMSA8PCAxOCkgfCAobjIgPDwgMTIpKSB8IChuMyA8PCA2KTsKCQkJCQkJdmFyIGNvbWJpbmVkID0gbiA+PiA4OwoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQlBMigkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSR1bnNpZ25lZEludDE2LCAkZWxtJGJ5dGVzJEJ5dGVzJEJFLCBjb21iaW5lZCkpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQl9CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlpZiAoJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyRFbmNvZGUkaXNWYWxpZENoYXIoYykgJiYgJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyRFbmNvZGUkaXNWYWxpZENoYXIoZCkpIHsKCQkJCQl2YXIgbjQgPSAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEVuY29kZSR1bnNhZmVDb252ZXJ0Q2hhcihkKTsKCQkJCQl2YXIgbjMgPSAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEVuY29kZSR1bnNhZmVDb252ZXJ0Q2hhcihjKTsKCQkJCQl2YXIgbiA9ICgobjEgPDwgMTgpIHwgKG4yIDw8IDEyKSkgfCAoKG4zIDw8IDYpIHwgbjQpOwoJCQkJCXZhciBjb21iaW5lZCA9IG4gPj4gODsKCQkJCQl2YXIgYjMgPSBuOwoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkc2VxdWVuY2UoCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQlBMigkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSR1bnNpZ25lZEludDE2LCAkZWxtJGJ5dGVzJEJ5dGVzJEJFLCBjb21iaW5lZCksCgkJCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50OChiMykKCQkJCQkJCQldKSkpOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9CgkJCX0KCQl9IGVsc2UgewoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJfQoJfSk7CnZhciAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEVuY29kZSRlbmNvZGVDaHVua3MgPSBGMigKCWZ1bmN0aW9uIChpbnB1dCwgYWNjdW0pIHsKCQllbmNvZGVDaHVua3M6CgkJd2hpbGUgKHRydWUpIHsKCQkJdmFyIF92MCA9ICRlbG0kY29yZSRTdHJpbmckdG9MaXN0KAoJCQkJQTIoJGVsbSRjb3JlJFN0cmluZyRsZWZ0LCA0LCBpbnB1dCkpOwoJCQlfdjAkNDoKCQkJd2hpbGUgKHRydWUpIHsKCQkJCWlmICghX3YwLmIpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoYWNjdW0pOwoJCQkJfSBlbHNlIHsKCQkJCQlpZiAoX3YwLmIuYikgewoJCQkJCQlpZiAoX3YwLmIuYi5iKSB7CgkJCQkJCQlpZiAoX3YwLmIuYi5iLmIpIHsKCQkJCQkJCQlpZiAoIV92MC5iLmIuYi5iLmIpIHsKCQkJCQkJCQkJdmFyIGEgPSBfdjAuYTsKCQkJCQkJCQkJdmFyIF92MSA9IF92MC5iOwoJCQkJCQkJCQl2YXIgYiA9IF92MS5hOwoJCQkJCQkJCQl2YXIgX3YyID0gX3YxLmI7CgkJCQkJCQkJCXZhciBjID0gX3YyLmE7CgkJCQkJCQkJCXZhciBfdjMgPSBfdjIuYjsKCQkJCQkJCQkJdmFyIGQgPSBfdjMuYTsKCQkJCQkJCQkJdmFyIF92NCA9IEE0KCRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRW5jb2RlJGVuY29kZUNoYXJhY3RlcnMsIGEsIGIsIGMsIGQpOwoJCQkJCQkJCQlpZiAoX3Y0LiQgPT09ICdKdXN0JykgewoJCQkJCQkJCQkJdmFyIGVuYyA9IF92NC5hOwoJCQkJCQkJCQkJdmFyICR0ZW1wJGlucHV0ID0gQTIoJGVsbSRjb3JlJFN0cmluZyRkcm9wTGVmdCwgNCwgaW5wdXQpLAoJCQkJCQkJCQkJCSR0ZW1wJGFjY3VtID0gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZW5jLCBhY2N1bSk7CgkJCQkJCQkJCQlpbnB1dCA9ICR0ZW1wJGlucHV0OwoJCQkJCQkJCQkJYWNjdW0gPSAkdGVtcCRhY2N1bTsKCQkJCQkJCQkJCWNvbnRpbnVlIGVuY29kZUNodW5rczsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQkJCQkJfQoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCWJyZWFrIF92MCQ0OwoJCQkJCQkJCX0KCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIGEgPSBfdjAuYTsKCQkJCQkJCQl2YXIgX3Y1ID0gX3YwLmI7CgkJCQkJCQkJdmFyIGIgPSBfdjUuYTsKCQkJCQkJCQl2YXIgX3Y2ID0gX3Y1LmI7CgkJCQkJCQkJdmFyIGMgPSBfdjYuYTsKCQkJCQkJCQl2YXIgX3Y3ID0gQTQoCgkJCQkJCQkJCSRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRW5jb2RlJGVuY29kZUNoYXJhY3RlcnMsCgkJCQkJCQkJCWEsCgkJCQkJCQkJCWIsCgkJCQkJCQkJCWMsCgkJCQkJCQkJCV9VdGlsc19jaHIoJz0nKSk7CgkJCQkJCQkJaWYgKF92Ny4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBlbmMgPSBfdjcuYTsKCQkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZW5jLCBhY2N1bSkpOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBhID0gX3YwLmE7CgkJCQkJCQl2YXIgX3Y4ID0gX3YwLmI7CgkJCQkJCQl2YXIgYiA9IF92OC5hOwoJCQkJCQkJdmFyIF92OSA9IEE0KAoJCQkJCQkJCSRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRW5jb2RlJGVuY29kZUNoYXJhY3RlcnMsCgkJCQkJCQkJYSwKCQkJCQkJCQliLAoJCQkJCQkJCV9VdGlsc19jaHIoJz0nKSwKCQkJCQkJCQlfVXRpbHNfY2hyKCc9JykpOwoJCQkJCQkJaWYgKF92OS4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBlbmMgPSBfdjkuYTsKCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGVuYywgYWNjdW0pKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0gZWxzZSB7CgkJCQkJCWJyZWFrIF92MCQ0OwoJCQkJCX0KCQkJCX0KCQkJfQoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJfQoJfSk7CnZhciAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEVuY29kZSRlbmNvZGVyID0gZnVuY3Rpb24gKHN0cmluZykgewoJcmV0dXJuIEEyKAoJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJGVsbSRjb3JlJExpc3QkcmV2ZXJzZSwgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkc2VxdWVuY2UpLAoJCUEyKCRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRW5jb2RlJGVuY29kZUNodW5rcywgc3RyaW5nLCBfTGlzdF9OaWwpKTsKfTsKdmFyICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkRW5jb2RlJHRvQnl0ZXMgPSBmdW5jdGlvbiAoc3RyaW5nKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRlbmNvZGUsCgkJJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyRFbmNvZGUkZW5jb2RlcihzdHJpbmcpKTsKfTsKdmFyICRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkQmFzZTY0JHRvQnl0ZXMgPSAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEVuY29kZSR0b0J5dGVzOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZmlsZVRyZWVOb2RlRnJvbUxpc3RGaWxlV2l0aFBhdGggPSBBMigKCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkkZWxtJGNvcmUkTGlzdCRtYXAoCgkJZnVuY3Rpb24gKGZpbGUpIHsKCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQlmaWxlLnBhdGgsCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCQkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkZW5jb2RlKAoJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRzdHJpbmcoJ0ZhaWxlZCB0byBkZWNvZGUgZnJvbSBCYXNlNjQnKSksCgkJCQkJJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyRCYXNlNjQkdG9CeXRlcyhmaWxlLmNvbnRlbnRCYXNlNjQpKSk7CgkJfSksCgkkYXV0aG9yJHByb2plY3QkRmlsZVRyZWVJbldvcmtzcGFjZSRzb3J0ZWRGaWxlVHJlZUZyb21MaXN0T2ZCbG9ic0FzQnl0ZXMpOwp2YXIgJGVsbV9jb21tdW5pdHkkcmVzdWx0X2V4dHJhJFJlc3VsdCRFeHRyYSR1bnBhY2sgPSBGMygKCWZ1bmN0aW9uIChlcnJGdW5jLCBva0Z1bmMsIHJlc3VsdCkgewoJCWlmIChyZXN1bHQuJCA9PT0gJ09rJykgewoJCQl2YXIgb2sgPSByZXN1bHQuYTsKCQkJcmV0dXJuIG9rRnVuYyhvayk7CgkJfSBlbHNlIHsKCQkJdmFyIGVyciA9IHJlc3VsdC5hOwoJCQlyZXR1cm4gZXJyRnVuYyhlcnIpOwoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJExpc3QkZHJvcCA9IEYyKAoJZnVuY3Rpb24gKG4sIGxpc3QpIHsKCQlkcm9wOgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmIChuIDw9IDApIHsKCQkJCXJldHVybiBsaXN0OwoJCQl9IGVsc2UgewoJCQkJaWYgKCFsaXN0LmIpIHsKCQkJCQlyZXR1cm4gbGlzdDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHggPSBsaXN0LmE7CgkJCQkJdmFyIHhzID0gbGlzdC5iOwoJCQkJCXZhciAkdGVtcCRuID0gbiAtIDEsCgkJCQkJCSR0ZW1wJGxpc3QgPSB4czsKCQkJCQluID0gJHRlbXAkbjsKCQkJCQlsaXN0ID0gJHRlbXAkbGlzdDsKCQkJCQljb250aW51ZSBkcm9wOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkVFNGb3N0ZXIkZWxtX2J5dGVzX2V4dHJhJEJ5dGVzJEVuY29kZSRFeHRyYSRsaXN0ID0gZnVuY3Rpb24gKGVuY29kZSkgewoJcmV0dXJuIEEyKAoJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZUwsCgkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkc2VxdWVuY2UsCgkJJGVsbSRjb3JlJExpc3QkbWFwKGVuY29kZSkpOwp9Owp2YXIgJFRTRm9zdGVyJGVsbV9ieXRlc19leHRyYSRCeXRlcyRFbmNvZGUkRXh0cmEkYnl0ZVZhbHVlcyA9ICRUU0Zvc3RlciRlbG1fYnl0ZXNfZXh0cmEkQnl0ZXMkRW5jb2RlJEV4dHJhJGxpc3QoJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkdW5zaWduZWRJbnQ4KTsKdmFyICRUU0Zvc3RlciRlbG1fYnl0ZXNfZXh0cmEkQnl0ZXMkRXh0cmEkZnJvbUJ5dGVWYWx1ZXMgPSBBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VMLCAkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRlbmNvZGUsICRUU0Zvc3RlciRlbG1fYnl0ZXNfZXh0cmEkQnl0ZXMkRW5jb2RlJEV4dHJhJGJ5dGVWYWx1ZXMpOwp2YXIgJGF1dGhvciRwcm9qZWN0JFdvcmtzcGFjZVN0YXRlXzIwMjFfMDEkYXBwbHlCbG9iQ2hhbmdlcyA9IEYyKAoJZnVuY3Rpb24gKGNoYW5nZXMsIGJsb2JCZWZvcmUpIHsKCQlyZXR1cm4gJFRTRm9zdGVyJGVsbV9ieXRlc19leHRyYSRCeXRlcyRFeHRyYSRmcm9tQnl0ZVZhbHVlcygKCQkJQTMoCgkJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJCUYyKAoJCQkJCWZ1bmN0aW9uIChjaGFuZ2UsIHN0YXRlQmVmb3JlKSB7CgkJCQkJCXN3aXRjaCAoY2hhbmdlLiQpIHsKCQkJCQkJCWNhc2UgJ1JldXNlQnl0ZXMnOgoJCQkJCQkJCXZhciByZXVzZUJ5dGVzID0gY2hhbmdlLmE7CgkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJY2hhbmdlZEJsb2JCeXRlczogX1V0aWxzX2FwKAoJCQkJCQkJCQkJc3RhdGVCZWZvcmUuY2hhbmdlZEJsb2JCeXRlcywKCQkJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JHRha2UsIHJldXNlQnl0ZXMsIHN0YXRlQmVmb3JlLm9yaWdpbmFsQmxvYlJlbWFpbmluZ0J5dGVzKSksCgkJCQkJCQkJCW9yaWdpbmFsQmxvYlJlbWFpbmluZ0J5dGVzOiBBMigkZWxtJGNvcmUkTGlzdCRkcm9wLCByZXVzZUJ5dGVzLCBzdGF0ZUJlZm9yZS5vcmlnaW5hbEJsb2JSZW1haW5pbmdCeXRlcykKCQkJCQkJCQl9OwoJCQkJCQkJY2FzZSAnUmVtb3ZlQnl0ZXMnOgoJCQkJCQkJCXZhciByZW1vdmVCeXRlcyA9IGNoYW5nZS5hOwoJCQkJCQkJCXJldHVybiBfVXRpbHNfdXBkYXRlKAoJCQkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCQkJewoJCQkJCQkJCQkJb3JpZ2luYWxCbG9iUmVtYWluaW5nQnl0ZXM6IEEyKCRlbG0kY29yZSRMaXN0JGRyb3AsIHJlbW92ZUJ5dGVzLCBzdGF0ZUJlZm9yZS5vcmlnaW5hbEJsb2JSZW1haW5pbmdCeXRlcykKCQkJCQkJCQkJfSk7CgkJCQkJCQlkZWZhdWx0OgoJCQkJCQkJCXZhciBhZGRCeXRlcyA9IGNoYW5nZS5hOwoJCQkJCQkJCXJldHVybiBfVXRpbHNfdXBkYXRlKAoJCQkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCQkJewoJCQkJCQkJCQkJY2hhbmdlZEJsb2JCeXRlczogX1V0aWxzX2FwKAoJCQkJCQkJCQkJCXN0YXRlQmVmb3JlLmNoYW5nZWRCbG9iQnl0ZXMsCgkJCQkJCQkJCQkJJFRTRm9zdGVyJGVsbV9ieXRlc19leHRyYSRCeXRlcyRFeHRyYSR0b0J5dGVWYWx1ZXMoYWRkQnl0ZXMpKQoJCQkJCQkJCQl9KTsKCQkJCQkJfQoJCQkJCX0pLAoJCQkJewoJCQkJCWNoYW5nZWRCbG9iQnl0ZXM6IF9MaXN0X05pbCwKCQkJCQlvcmlnaW5hbEJsb2JSZW1haW5pbmdCeXRlczogJFRTRm9zdGVyJGVsbV9ieXRlc19leHRyYSRCeXRlcyRFeHRyYSR0b0J5dGVWYWx1ZXMoYmxvYkJlZm9yZSkKCQkJCX0sCgkJCQljaGFuZ2VzKS5jaGFuZ2VkQmxvYkJ5dGVzKTsKCX0pOwp2YXIgJFRTRm9zdGVyJGVsbV9ieXRlc19leHRyYSRCeXRlcyRFeHRyYSRlbXB0eSA9ICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJGVuY29kZSgKCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHNlcXVlbmNlKF9MaXN0X05pbCkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJGdldEJsb2JBdFBhdGhGcm9tRmlsZVRyZWUgPSBGMigKCWZ1bmN0aW9uIChwYXRoLCB0cmVlTm9kZSkgewoJCXZhciBfdjAgPSBBMigkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkZ2V0Tm9kZUF0UGF0aEZyb21GaWxlVHJlZSwgcGF0aCwgdHJlZU5vZGUpOwoJCWlmICgoX3YwLiQgPT09ICdKdXN0JykgJiYgKF92MC5hLiQgPT09ICdCbG9iTm9kZScpKSB7CgkJCXZhciBibG9iID0gX3YwLmEuYTsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KGJsb2IpOwoJCX0gZWxzZSB7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JG1heWJlQ29ucyA9IEYzKAoJZnVuY3Rpb24gKGYsIG14LCB4cykgewoJCXZhciBfdjAgPSBmKG14KTsKCQlpZiAoX3YwLiQgPT09ICdKdXN0JykgewoJCQl2YXIgeCA9IF92MC5hOwoJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgeCwgeHMpOwoJCX0gZWxzZSB7CgkJCXJldHVybiB4czsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JGZpbHRlck1hcCA9IEYyKAoJZnVuY3Rpb24gKGYsIHhzKSB7CgkJcmV0dXJuIEEzKAoJCQkkZWxtJGNvcmUkTGlzdCRmb2xkciwKCQkJJGVsbSRjb3JlJExpc3QkbWF5YmVDb25zKGYpLAoJCQlfTGlzdF9OaWwsCgkJCXhzKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJHJlbW92ZU5vZGVBdFBhdGggPSBGMigKCWZ1bmN0aW9uIChwYXRoLCBub2RlQmVmb3JlKSB7CgkJaWYgKCFwYXRoLmIpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCX0gZWxzZSB7CgkJCXZhciBuZXh0UGF0aEVsZW1lbnQgPSBwYXRoLmE7CgkJCXZhciByZW1haW5pbmdQYXRoRWxlbWVudHMgPSBwYXRoLmI7CgkJCWlmIChub2RlQmVmb3JlLiQgPT09ICdCbG9iTm9kZScpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChub2RlQmVmb3JlKTsKCQkJfSBlbHNlIHsKCQkJCXZhciB0cmVlQmVmb3JlID0gbm9kZUJlZm9yZS5hOwoJCQkJdmFyIF92MiA9IEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlck1hcCwKCQkJCQlmdW5jdGlvbiAoX3YzKSB7CgkJCQkJCXZhciBicmFuY2hOYW1lID0gX3YzLmE7CgkJCQkJCXZhciBicmFuY2hWYWx1ZSA9IF92My5iOwoJCQkJCQlyZXR1cm4gX1V0aWxzX2VxKGJyYW5jaE5hbWUsIG5leHRQYXRoRWxlbWVudCkgPyBBMigKCQkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCQkkZWxtJGNvcmUkVHVwbGUkcGFpcihicmFuY2hOYW1lKSwKCQkJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRyZW1vdmVOb2RlQXRQYXRoLCByZW1haW5pbmdQYXRoRWxlbWVudHMsIGJyYW5jaFZhbHVlKSkgOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCV9VdGlsc19UdXBsZTIoYnJhbmNoTmFtZSwgYnJhbmNoVmFsdWUpKTsKCQkJCQl9LAoJCQkJCXRyZWVCZWZvcmUpOwoJCQkJaWYgKCFfdjIuYikgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHJlbWFpbmluZ0JyYW5jaGVzID0gX3YyOwoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJFRyZWVOb2RlKHJlbWFpbmluZ0JyYW5jaGVzKSk7CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJGFwcGx5V29ya3NwYWNlU3RhdGVEaWZmZXJlbmNlXzIwMjFfMDEgPSBGMigKCWZ1bmN0aW9uIChkaWZmZXJlbmNlRnJvbUJhc2UsIGJhc2VDb21wb3NpdGlvbikgewoJCXZhciBjb21wb3NpdGlvbkFmdGVyUmVtb3ZhbHMgPSBBMygKCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCWZ1bmN0aW9uIChyZW1vdmVOb2RlKSB7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkcmVtb3ZlTm9kZUF0UGF0aChyZW1vdmVOb2RlKSwKCQkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRUcmVlTm9kZShfTGlzdF9OaWwpKSk7CgkJCX0sCgkJCWJhc2VDb21wb3NpdGlvbiwKCQkJZGlmZmVyZW5jZUZyb21CYXNlLnJlbW92ZU5vZGVzKTsKCQl2YXIgd29ya3NwYWNlU3RhdGVBZnRlckNoYW5nZUJsb2JzID0gQTMoCgkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQl2YXIgYmxvYlBhdGggPSBfdjAuYTsKCQkJCXZhciBjaGFuZ2VzRnJvbUJhc2VCbG9iID0gX3YwLmI7CgkJCQl2YXIgYmxvYlZhbHVlQmVmb3JlID0gQTIoCgkJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkJCSRUU0Zvc3RlciRlbG1fYnl0ZXNfZXh0cmEkQnl0ZXMkRXh0cmEkZW1wdHksCgkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJGdldEJsb2JBdFBhdGhGcm9tRmlsZVRyZWUsIGJsb2JQYXRoLCBjb21wb3NpdGlvbkFmdGVyUmVtb3ZhbHMpKTsKCQkJCXZhciBjaGFuZ2VkQmxvYlZhbHVlID0gQTIoJGF1dGhvciRwcm9qZWN0JFdvcmtzcGFjZVN0YXRlXzIwMjFfMDEkYXBwbHlCbG9iQ2hhbmdlcywgY2hhbmdlc0Zyb21CYXNlQmxvYiwgYmxvYlZhbHVlQmVmb3JlKTsKCQkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkc2V0Tm9kZUF0UGF0aEluU29ydGVkRmlsZVRyZWUoCgkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJYmxvYlBhdGgsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRCbG9iTm9kZShjaGFuZ2VkQmxvYlZhbHVlKSkpOwoJCQl9LAoJCQljb21wb3NpdGlvbkFmdGVyUmVtb3ZhbHMsCgkJCWRpZmZlcmVuY2VGcm9tQmFzZS5jaGFuZ2VCbG9icyk7CgkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2sod29ya3NwYWNlU3RhdGVBZnRlckNoYW5nZUJsb2JzKTsKCX0pOwp2YXIgJGVsbV9jb21tdW5pdHkkcmVzdWx0X2V4dHJhJFJlc3VsdCRFeHRyYSRleHRyYWN0ID0gRjIoCglmdW5jdGlvbiAoZiwgeCkgewoJCWlmICh4LiQgPT09ICdPaycpIHsKCQkJdmFyIGEgPSB4LmE7CgkJCXJldHVybiBhOwoJCX0gZWxzZSB7CgkJCXZhciBlID0geC5hOwoJCQlyZXR1cm4gZihlKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJG1hcEJsb2JzRnJvbUJ5dGVzID0gJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJG1hcEJsb2JzKCRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJGJsb2JWYWx1ZUZyb21CeXRlcyk7CnZhciAkZWxtJGNvcmUkU3RyaW5nJGZyb21MaXN0ID0gX1N0cmluZ19mcm9tTGlzdDsKdmFyICRydGZlbGRtYW4kZWxtX2hleCRIZXgkdW5zYWZlVG9EaWdpdCA9IGZ1bmN0aW9uIChudW0pIHsKCXVuc2FmZVRvRGlnaXQ6Cgl3aGlsZSAodHJ1ZSkgewoJCXN3aXRjaCAobnVtKSB7CgkJCWNhc2UgMDoKCQkJCXJldHVybiBfVXRpbHNfY2hyKCcwJyk7CgkJCWNhc2UgMToKCQkJCXJldHVybiBfVXRpbHNfY2hyKCcxJyk7CgkJCWNhc2UgMjoKCQkJCXJldHVybiBfVXRpbHNfY2hyKCcyJyk7CgkJCWNhc2UgMzoKCQkJCXJldHVybiBfVXRpbHNfY2hyKCczJyk7CgkJCWNhc2UgNDoKCQkJCXJldHVybiBfVXRpbHNfY2hyKCc0Jyk7CgkJCWNhc2UgNToKCQkJCXJldHVybiBfVXRpbHNfY2hyKCc1Jyk7CgkJCWNhc2UgNjoKCQkJCXJldHVybiBfVXRpbHNfY2hyKCc2Jyk7CgkJCWNhc2UgNzoKCQkJCXJldHVybiBfVXRpbHNfY2hyKCc3Jyk7CgkJCWNhc2UgODoKCQkJCXJldHVybiBfVXRpbHNfY2hyKCc4Jyk7CgkJCWNhc2UgOToKCQkJCXJldHVybiBfVXRpbHNfY2hyKCc5Jyk7CgkJCWNhc2UgMTA6CgkJCQlyZXR1cm4gX1V0aWxzX2NocignYScpOwoJCQljYXNlIDExOgoJCQkJcmV0dXJuIF9VdGlsc19jaHIoJ2InKTsKCQkJY2FzZSAxMjoKCQkJCXJldHVybiBfVXRpbHNfY2hyKCdjJyk7CgkJCWNhc2UgMTM6CgkJCQlyZXR1cm4gX1V0aWxzX2NocignZCcpOwoJCQljYXNlIDE0OgoJCQkJcmV0dXJuIF9VdGlsc19jaHIoJ2UnKTsKCQkJY2FzZSAxNToKCQkJCXJldHVybiBfVXRpbHNfY2hyKCdmJyk7CgkJCWRlZmF1bHQ6CgkJCQl2YXIgJHRlbXAkbnVtID0gbnVtOwoJCQkJbnVtID0gJHRlbXAkbnVtOwoJCQkJY29udGludWUgdW5zYWZlVG9EaWdpdDsKCQl9Cgl9Cn07CnZhciAkcnRmZWxkbWFuJGVsbV9oZXgkSGV4JHVuc2FmZVBvc2l0aXZlVG9EaWdpdHMgPSBGMigKCWZ1bmN0aW9uIChkaWdpdHMsIG51bSkgewoJCXVuc2FmZVBvc2l0aXZlVG9EaWdpdHM6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKG51bSA8IDE2KSB7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkkcnRmZWxkbWFuJGVsbV9oZXgkSGV4JHVuc2FmZVRvRGlnaXQobnVtKSwKCQkJCQlkaWdpdHMpOwoJCQl9IGVsc2UgewoJCQkJdmFyICR0ZW1wJGRpZ2l0cyA9IEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJJHJ0ZmVsZG1hbiRlbG1faGV4JEhleCR1bnNhZmVUb0RpZ2l0KAoJCQkJCQlBMigkZWxtJGNvcmUkQmFzaWNzJG1vZEJ5LCAxNiwgbnVtKSksCgkJCQkJZGlnaXRzKSwKCQkJCQkkdGVtcCRudW0gPSAobnVtIC8gMTYpIHwgMDsKCQkJCWRpZ2l0cyA9ICR0ZW1wJGRpZ2l0czsKCQkJCW51bSA9ICR0ZW1wJG51bTsKCQkJCWNvbnRpbnVlIHVuc2FmZVBvc2l0aXZlVG9EaWdpdHM7CgkJCX0KCQl9Cgl9KTsKdmFyICRydGZlbGRtYW4kZWxtX2hleCRIZXgkdG9TdHJpbmcgPSBmdW5jdGlvbiAobnVtKSB7CglyZXR1cm4gJGVsbSRjb3JlJFN0cmluZyRmcm9tTGlzdCgKCQkobnVtIDwgMCkgPyBBMigKCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJX1V0aWxzX2NocignLScpLAoJCQlBMigkcnRmZWxkbWFuJGVsbV9oZXgkSGV4JHVuc2FmZVBvc2l0aXZlVG9EaWdpdHMsIF9MaXN0X05pbCwgLW51bSkpIDogQTIoJHJ0ZmVsZG1hbiRlbG1faGV4JEhleCR1bnNhZmVQb3NpdGl2ZVRvRGlnaXRzLCBfTGlzdF9OaWwsIG51bSkpOwp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX3NoYTIkU0hBMjU2JHdvcmRUb0hleCA9IGZ1bmN0aW9uIChfYnl0ZSkgewoJcmV0dXJuIEEzKAoJCSRlbG0kY29yZSRTdHJpbmckcGFkTGVmdCwKCQk4LAoJCV9VdGlsc19jaHIoJzAnKSwKCQkkcnRmZWxkbWFuJGVsbV9oZXgkSGV4JHRvU3RyaW5nKF9ieXRlID4+PiAwKSk7Cn07CnZhciAkZm9sa2VydGRldiRlbG1fc2hhMiRTSEEyNTYkdG9IZXggPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgX3YxID0gX3YwLmE7Cgl2YXIgYSA9IF92MS5hOwoJdmFyIGIgPSBfdjEuYjsKCXZhciBjID0gX3YxLmM7Cgl2YXIgZCA9IF92MS5kOwoJdmFyIGUgPSBfdjEuZTsKCXZhciBmID0gX3YxLmY7Cgl2YXIgZyA9IF92MS5nOwoJdmFyIGggPSBfdjEuaDsKCXJldHVybiBfVXRpbHNfYXAoCgkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkU0hBMjU2JHdvcmRUb0hleChhKSwKCQlfVXRpbHNfYXAoCgkJCSRmb2xrZXJ0ZGV2JGVsbV9zaGEyJFNIQTI1NiR3b3JkVG9IZXgoYiksCgkJCV9VdGlsc19hcCgKCQkJCSRmb2xrZXJ0ZGV2JGVsbV9zaGEyJFNIQTI1NiR3b3JkVG9IZXgoYyksCgkJCQlfVXRpbHNfYXAoCgkJCQkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkU0hBMjU2JHdvcmRUb0hleChkKSwKCQkJCQlfVXRpbHNfYXAoCgkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9zaGEyJFNIQTI1NiR3b3JkVG9IZXgoZSksCgkJCQkJCV9VdGlsc19hcCgKCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9zaGEyJFNIQTI1NiR3b3JkVG9IZXgoZiksCgkJCQkJCQlfVXRpbHNfYXAoCgkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX3NoYTIkU0hBMjU2JHdvcmRUb0hleChnKSwKCQkJCQkJCQkkZm9sa2VydGRldiRlbG1fc2hhMiRTSEEyNTYkd29yZFRvSGV4KGgpKSkpKSkpKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJHdvcmtzcGFjZVN0YXRlQ29tcG9zaXRpb25IYXNoID0gQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlSW5Xb3Jrc3BhY2UkY29tcG9zaXRpb25IYXNoRnJvbUZpbGVUcmVlTm9kZUJ5dGVzLCAkZm9sa2VydGRldiRlbG1fc2hhMiRTSEEyNTYkdG9IZXgpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdXBkYXRlRm9yTG9hZGVkV29ya3NwYWNlU3RhdGUgPSBGNCgKCWZ1bmN0aW9uIChjb25maWcsIGxvYWRlZEJhc2VXb3Jrc3BhY2VTdGF0ZSwgd29ya3NwYWNlU3RhdGVEaWZmLCBzdGF0ZUJlZm9yZSkgewoJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQlBMigKCQkJCSRlbG1fY29tbXVuaXR5JHJlc3VsdF9leHRyYSRSZXN1bHQkRXh0cmEkZXh0cmFjdCwKCQkJCWZ1bmN0aW9uIChlcnJvcikgewoJCQkJCXJldHVybiBfVXRpbHNfdXBkYXRlKAoJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJewoJCQkJCQkJd29ya3NwYWNlOiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRXb3Jrc3BhY2VFcnIoZXJyb3IpCgkJCQkJCX0pOwoJCQkJfSwKCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQl2YXIgX3YwID0gQTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJGFwcGx5V29ya3NwYWNlU3RhdGVEaWZmZXJlbmNlXzIwMjFfMDEsCgkJCQkJCXdvcmtzcGFjZVN0YXRlRGlmZiwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlSW5Xb3Jrc3BhY2UkbWFwQmxvYnNUb0J5dGVzKGxvYWRlZEJhc2VXb3Jrc3BhY2VTdGF0ZSkpOwoJCQkJCWlmIChfdjAuJCA9PT0gJ0VycicpIHsKCQkJCQkJdmFyIGVycm9yID0gX3YwLmE7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycignRmFpbGVkIHRvIGFwcGx5IGRpZmZlcmVuY2UgbW9kZWwgdG8gY29tcHV0ZSB3b3Jrc3BhY2Ugc3RhdGU6ICcgKyBlcnJvcik7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGNvbXBvc2VkV29ya3NwYWNlU3RhdGUgPSBfdjAuYTsKCQkJCQkJdmFyIGZpbGVMb2NhdGlvbk9wZW5JbkVkaXRvciA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJCXZhciBfdjIgPSBjb25maWcuZmlsZVBhdGhUb09wZW47CgkJCQkJCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIGZpbGVQYXRoVG9PcGVuID0gX3YyLmE7CgkJCQkJCQkJdmFyIF92MyA9ICRlbG0kY29yZSRMaXN0JHJldmVyc2UoZmlsZVBhdGhUb09wZW4pOwoJCQkJCQkJCWlmICghX3YzLmIpIHsKCQkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBmaWxlTmFtZSA9IF92My5hOwoJCQkJCQkJCQl2YXIgZGlyZWN0b3J5UGF0aFJldmVyc2VkID0gX3YzLmI7CgkJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShkaXJlY3RvcnlQYXRoUmV2ZXJzZWQpLAoJCQkJCQkJCQkJCWZpbGVOYW1lKSk7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9KCk7CgkJCQkJCXZhciBjb250aW51ZUlmSGFzaE9rID0gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCQkJewoJCQkJCQkJCQl3b3Jrc3BhY2U6ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFdvcmtzcGFjZUFjdGl2ZSgKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGluaXRXb3Jrc3BhY2VGcm9tRmlsZVRyZWVBbmRGaWxlU2VsZWN0aW9uKAoJCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkJZmlsZUxvY2F0aW9uT3BlbkluRWRpdG9yOiBmaWxlTG9jYXRpb25PcGVuSW5FZGl0b3IsCgkJCQkJCQkJCQkJCWZpbGVUcmVlOiAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWVJbldvcmtzcGFjZSRtYXBCbG9ic0Zyb21CeXRlcyhjb21wb3NlZFdvcmtzcGFjZVN0YXRlKQoJCQkJCQkJCQkJCX0pKQoJCQkJCQkJCX0pKTsKCQkJCQkJdmFyIGNvbXBvc2VkV29ya3NwYWNlU3RhdGVIYXNoQmFzZTE2ID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5Vcmwkd29ya3NwYWNlU3RhdGVDb21wb3NpdGlvbkhhc2goY29tcG9zZWRXb3Jrc3BhY2VTdGF0ZSk7CgkJCQkJCXZhciBfdjEgPSBjb25maWcuZXhwZWN0ZWRDb21wb3NpdGlvbkhhc2g7CgkJCQkJCWlmIChfdjEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQlyZXR1cm4gY29udGludWVJZkhhc2hPazsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBleHBlY3RlZENvbXBvc2l0aW9uSGFzaCA9IF92MS5hOwoJCQkJCQkJcmV0dXJuIF9VdGlsc19lcShjb21wb3NlZFdvcmtzcGFjZVN0YXRlSGFzaEJhc2UxNiwgZXhwZWN0ZWRDb21wb3NpdGlvbkhhc2gpID8gY29udGludWVJZkhhc2hPayA6ICRlbG0kY29yZSRSZXN1bHQkRXJyKCdDb21wb3NlZCB3b3Jrc3BhY2Ugc3RhdGUgaGFzIGhhc2ggJyArIChjb21wb3NlZFdvcmtzcGFjZVN0YXRlSGFzaEJhc2UxNiArICgnIGluc3RlYWQgb2YgdGhlIGV4cGVjdGVkIGhhc2ggJyArIGV4cGVjdGVkQ29tcG9zaXRpb25IYXNoKSkpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSgpKSwKCQkJJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcHJvY2Vzc0V2ZW50QmFja2VuZExvYWRGcm9tR2l0UmVzdWx0ID0gRjMoCglmdW5jdGlvbiAodXJsSW50b0dpdFJlcG9zaXRvcnksIHJlc3VsdCwgc3RhdGVCZWZvcmVSZW1lbWJlcmluZ1Jlc3VsdCkgewoJCXZhciByZXN1bHRXaXRoRmlsZVRyZWVBbmRDYWNoZSA9IEEyKAoJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAoCgkJCQlmdW5jdGlvbiAobG9hZE9rKSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tcG9zaXRpb25JZENhY2hlOiBsb2FkT2suY29tcG9zaXRpb25JZCwKCQkJCQkJZmlsZVRyZWU6ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGZpbGVUcmVlTm9kZUZyb21MaXN0RmlsZVdpdGhQYXRoKGxvYWRPay5maWxlc0FzRmxhdExpc3QpLAoJCQkJCQl1cmxJbkNvbW1pdDogbG9hZE9rLnVybEluQ29tbWl0CgkJCQkJfTsKCQkJCX0pLAoJCQlyZXN1bHQpOwoJCXZhciBzdGF0ZUJlZm9yZSA9IF9VdGlsc191cGRhdGUoCgkJCXN0YXRlQmVmb3JlUmVtZW1iZXJpbmdSZXN1bHQsCgkJCXsKCQkJCWxhc3RCYWNrZW5kTG9hZEZyb21HaXRSZXN1bHQ6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCV9VdGlsc19UdXBsZTIodXJsSW50b0dpdFJlcG9zaXRvcnksIHJlc3VsdFdpdGhGaWxlVHJlZUFuZENhY2hlKSkKCQkJfSk7CgkJdmFyIF92MCA9IHN0YXRlQmVmb3JlLnBvcHVwOwoJCWlmICgoKF92MC4kID09PSAnSnVzdCcpICYmIChfdjAuYS4kID09PSAnTW9kYWxEaWFsb2cnKSkgJiYgKF92MC5hLmEuJCA9PT0gJ0xvYWRGcm9tR2l0RGlhbG9nJykpIHsKCQkJdmFyIGRpYWxvZ1N0YXRlQmVmb3JlID0gX3YwLmEuYS5hOwoJCQl2YXIgZGlhbG9nU3RhdGUgPSBfVXRpbHNfdXBkYXRlKAoJCQkJZGlhbG9nU3RhdGVCZWZvcmUsCgkJCQl7CgkJCQkJbG9hZENvbXBvc2l0aW9uUmVzdWx0OiAkZWxtJGNvcmUkTWF5YmUkSnVzdChyZXN1bHRXaXRoRmlsZVRyZWVBbmRDYWNoZSkKCQkJCX0pOwoJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJewoJCQkJCQlwb3B1cDogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRNb2RhbERpYWxvZygKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRMb2FkRnJvbUdpdERpYWxvZyhkaWFsb2dTdGF0ZSkpKQoJCQkJCX0pLAoJCQkJJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQl9IGVsc2UgewoJCQl2YXIgX3YxID0gc3RhdGVCZWZvcmUud29ya3NwYWNlOwoJCQlpZiAoX3YxLiQgPT09ICdXb3Jrc3BhY2VMb2FkaW5nRnJvbUxpbmsnKSB7CgkJCQl2YXIgd29ya3NwYWNlTG9hZGluZ0Zyb21MaW5rID0gX3YxLmE7CgkJCQlpZiAoX1V0aWxzX2VxKHVybEludG9HaXRSZXBvc2l0b3J5LCB3b3Jrc3BhY2VMb2FkaW5nRnJvbUxpbmsud29ya3NwYWNlU3RhdGVEZXNjcmlwdGlvbi5iYXNlKSkgewoJCQkJCXZhciBfdjIgPSBBMygKCQkJCQkJJGVsbV9jb21tdW5pdHkkcmVzdWx0X2V4dHJhJFJlc3VsdCRFeHRyYSR1bnBhY2ssCgkJCQkJCUEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlc2NyaWJlSHR0cEVycm9yLCAkZWxtJGNvcmUkUmVzdWx0JEVyciksCgkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCXJlc3VsdFdpdGhGaWxlVHJlZUFuZENhY2hlKTsKCQkJCQlpZiAoX3YyLiQgPT09ICdPaycpIHsKCQkJCQkJdmFyIGxvYWRPayA9IF92Mi5hOwoJCQkJCQlyZXR1cm4gQTQoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR1cGRhdGVGb3JMb2FkZWRXb3Jrc3BhY2VTdGF0ZSwKCQkJCQkJCXtleHBlY3RlZENvbXBvc2l0aW9uSGFzaDogd29ya3NwYWNlTG9hZGluZ0Zyb21MaW5rLmV4cGVjdGVkQ29tcG9zaXRpb25IYXNoLCBmaWxlUGF0aFRvT3Blbjogd29ya3NwYWNlTG9hZGluZ0Zyb21MaW5rLmZpbGVQYXRoVG9PcGVufSwKCQkJCQkJCWxvYWRPay5maWxlVHJlZSwKCQkJCQkJCXdvcmtzcGFjZUxvYWRpbmdGcm9tTGluay53b3Jrc3BhY2VTdGF0ZURlc2NyaXB0aW9uLmRpZmZlcmVuY2VGcm9tQmFzZSwKCQkJCQkJCXN0YXRlQmVmb3JlKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgbG9hZGluZ0Vycm9yID0gX3YyLmE7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCQl7CgkJCQkJCQkJCXdvcmtzcGFjZTogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kV29ya3NwYWNlRXJyKGxvYWRpbmdFcnJvcikKCQkJCQkJCQl9KSwKCQkJCQkJCSRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihzdGF0ZUJlZm9yZSwgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQl9CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCRmaWxlUGF0aFRvT3BlblF1ZXJ5UGFyYW1ldGVyTmFtZSA9ICdmaWxlLXBhdGgtdG8tb3Blbic7CnZhciAkZWxtX2NvbW11bml0eSRtYXliZV9leHRyYSRNYXliZSRFeHRyYSRqb2luID0gZnVuY3Rpb24gKG14KSB7CglpZiAobXguJCA9PT0gJ0p1c3QnKSB7CgkJdmFyIHggPSBteC5hOwoJCXJldHVybiB4OwoJfSBlbHNlIHsKCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7Cgl9Cn07CnZhciAkZWxtJHVybCRVcmwkUGFyc2VyJFN0YXRlID0gRjUoCglmdW5jdGlvbiAodmlzaXRlZCwgdW52aXNpdGVkLCBwYXJhbXMsIGZyYWcsIHZhbHVlKSB7CgkJcmV0dXJuIHtmcmFnOiBmcmFnLCBwYXJhbXM6IHBhcmFtcywgdW52aXNpdGVkOiB1bnZpc2l0ZWQsIHZhbHVlOiB2YWx1ZSwgdmlzaXRlZDogdmlzaXRlZH07Cgl9KTsKdmFyICRlbG0kdXJsJFVybCRQYXJzZXIkZ2V0Rmlyc3RNYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZXMpIHsKCWdldEZpcnN0TWF0Y2g6Cgl3aGlsZSAodHJ1ZSkgewoJCWlmICghc3RhdGVzLmIpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCX0gZWxzZSB7CgkJCXZhciBzdGF0ZSA9IHN0YXRlcy5hOwoJCQl2YXIgcmVzdCA9IHN0YXRlcy5iOwoJCQl2YXIgX3YxID0gc3RhdGUudW52aXNpdGVkOwoJCQlpZiAoIV92MS5iKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3Qoc3RhdGUudmFsdWUpOwoJCQl9IGVsc2UgewoJCQkJaWYgKChfdjEuYSA9PT0gJycpICYmICghX3YxLmIuYikpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3Qoc3RhdGUudmFsdWUpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgJHRlbXAkc3RhdGVzID0gcmVzdDsKCQkJCQlzdGF0ZXMgPSAkdGVtcCRzdGF0ZXM7CgkJCQkJY29udGludWUgZ2V0Rmlyc3RNYXRjaDsKCQkJCX0KCQkJfQoJCX0KCX0KfTsKdmFyICRlbG0kdXJsJFVybCRQYXJzZXIkcmVtb3ZlRmluYWxFbXB0eSA9IGZ1bmN0aW9uIChzZWdtZW50cykgewoJaWYgKCFzZWdtZW50cy5iKSB7CgkJcmV0dXJuIF9MaXN0X05pbDsKCX0gZWxzZSB7CgkJaWYgKChzZWdtZW50cy5hID09PSAnJykgJiYgKCFzZWdtZW50cy5iLmIpKSB7CgkJCXJldHVybiBfTGlzdF9OaWw7CgkJfSBlbHNlIHsKCQkJdmFyIHNlZ21lbnQgPSBzZWdtZW50cy5hOwoJCQl2YXIgcmVzdCA9IHNlZ21lbnRzLmI7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQlzZWdtZW50LAoJCQkJJGVsbSR1cmwkVXJsJFBhcnNlciRyZW1vdmVGaW5hbEVtcHR5KHJlc3QpKTsKCQl9Cgl9Cn07CnZhciAkZWxtJHVybCRVcmwkUGFyc2VyJHByZXBhcmVQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHsKCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkU3RyaW5nJHNwbGl0LCAnLycsIHBhdGgpOwoJaWYgKF92MC5iICYmIChfdjAuYSA9PT0gJycpKSB7CgkJdmFyIHNlZ21lbnRzID0gX3YwLmI7CgkJcmV0dXJuICRlbG0kdXJsJFVybCRQYXJzZXIkcmVtb3ZlRmluYWxFbXB0eShzZWdtZW50cyk7Cgl9IGVsc2UgewoJCXZhciBzZWdtZW50cyA9IF92MDsKCQlyZXR1cm4gJGVsbSR1cmwkVXJsJFBhcnNlciRyZW1vdmVGaW5hbEVtcHR5KHNlZ21lbnRzKTsKCX0KfTsKdmFyICRlbG0kdXJsJFVybCRQYXJzZXIkYWRkVG9QYXJhbWV0ZXJzSGVscCA9IEYyKAoJZnVuY3Rpb24gKHZhbHVlLCBtYXliZUxpc3QpIHsKCQlpZiAobWF5YmVMaXN0LiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJW3ZhbHVlXSkpOwoJCX0gZWxzZSB7CgkJCXZhciBsaXN0ID0gbWF5YmVMaXN0LmE7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHZhbHVlLCBsaXN0KSk7CgkJfQoJfSk7CnZhciAkZWxtJHVybCRVcmwkcGVyY2VudERlY29kZSA9IF9VcmxfcGVyY2VudERlY29kZTsKdmFyICRlbG0kdXJsJFVybCRQYXJzZXIkYWRkUGFyYW0gPSBGMigKCWZ1bmN0aW9uIChzZWdtZW50LCBkaWN0KSB7CgkJdmFyIF92MCA9IEEyKCRlbG0kY29yZSRTdHJpbmckc3BsaXQsICc9Jywgc2VnbWVudCk7CgkJaWYgKChfdjAuYiAmJiBfdjAuYi5iKSAmJiAoIV92MC5iLmIuYikpIHsKCQkJdmFyIHJhd0tleSA9IF92MC5hOwoJCQl2YXIgX3YxID0gX3YwLmI7CgkJCXZhciByYXdWYWx1ZSA9IF92MS5hOwoJCQl2YXIgX3YyID0gJGVsbSR1cmwkVXJsJHBlcmNlbnREZWNvZGUocmF3S2V5KTsKCQkJaWYgKF92Mi4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiBkaWN0OwoJCQl9IGVsc2UgewoJCQkJdmFyIGtleSA9IF92Mi5hOwoJCQkJdmFyIF92MyA9ICRlbG0kdXJsJFVybCRwZXJjZW50RGVjb2RlKHJhd1ZhbHVlKTsKCQkJCWlmIChfdjMuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuIGRpY3Q7CgkJCQl9IGVsc2UgewoJCQkJCXZhciB2YWx1ZSA9IF92My5hOwoJCQkJCXJldHVybiBBMygKCQkJCQkJJGVsbSRjb3JlJERpY3QkdXBkYXRlLAoJCQkJCQlrZXksCgkJCQkJCSRlbG0kdXJsJFVybCRQYXJzZXIkYWRkVG9QYXJhbWV0ZXJzSGVscCh2YWx1ZSksCgkJCQkJCWRpY3QpOwoJCQkJfQoJCQl9CgkJfSBlbHNlIHsKCQkJcmV0dXJuIGRpY3Q7CgkJfQoJfSk7CnZhciAkZWxtJHVybCRVcmwkUGFyc2VyJHByZXBhcmVRdWVyeSA9IGZ1bmN0aW9uIChtYXliZVF1ZXJ5KSB7CglpZiAobWF5YmVRdWVyeS4kID09PSAnTm90aGluZycpIHsKCQlyZXR1cm4gJGVsbSRjb3JlJERpY3QkZW1wdHk7Cgl9IGVsc2UgewoJCXZhciBxcnkgPSBtYXliZVF1ZXJ5LmE7CgkJcmV0dXJuIEEzKAoJCQkkZWxtJGNvcmUkTGlzdCRmb2xkciwKCQkJJGVsbSR1cmwkVXJsJFBhcnNlciRhZGRQYXJhbSwKCQkJJGVsbSRjb3JlJERpY3QkZW1wdHksCgkJCUEyKCRlbG0kY29yZSRTdHJpbmckc3BsaXQsICcmJywgcXJ5KSk7Cgl9Cn07CnZhciAkZWxtJHVybCRVcmwkUGFyc2VyJHBhcnNlID0gRjIoCglmdW5jdGlvbiAoX3YwLCB1cmwpIHsKCQl2YXIgcGFyc2VyID0gX3YwLmE7CgkJcmV0dXJuICRlbG0kdXJsJFVybCRQYXJzZXIkZ2V0Rmlyc3RNYXRjaCgKCQkJcGFyc2VyKAoJCQkJQTUoCgkJCQkJJGVsbSR1cmwkVXJsJFBhcnNlciRTdGF0ZSwKCQkJCQlfTGlzdF9OaWwsCgkJCQkJJGVsbSR1cmwkVXJsJFBhcnNlciRwcmVwYXJlUGF0aCh1cmwucGF0aCksCgkJCQkJJGVsbSR1cmwkVXJsJFBhcnNlciRwcmVwYXJlUXVlcnkodXJsLnF1ZXJ5KSwKCQkJCQl1cmwuZnJhZ21lbnQsCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSkpKTsKCX0pOwp2YXIgJGVsbSR1cmwkVXJsJFBhcnNlciRQYXJzZXIgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUGFyc2VyJywgYTogYX07Cn07CnZhciAkZWxtJHVybCRVcmwkUGFyc2VyJHF1ZXJ5ID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIHF1ZXJ5UGFyc2VyID0gX3YwLmE7CglyZXR1cm4gJGVsbSR1cmwkVXJsJFBhcnNlciRQYXJzZXIoCgkJZnVuY3Rpb24gKF92MSkgewoJCQl2YXIgdmlzaXRlZCA9IF92MS52aXNpdGVkOwoJCQl2YXIgdW52aXNpdGVkID0gX3YxLnVudmlzaXRlZDsKCQkJdmFyIHBhcmFtcyA9IF92MS5wYXJhbXM7CgkJCXZhciBmcmFnID0gX3YxLmZyYWc7CgkJCXZhciB2YWx1ZSA9IF92MS52YWx1ZTsKCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQlBNSgKCQkJCQkkZWxtJHVybCRVcmwkUGFyc2VyJFN0YXRlLAoJCQkJCXZpc2l0ZWQsCgkJCQkJdW52aXNpdGVkLAoJCQkJCXBhcmFtcywKCQkJCQlmcmFnLAoJCQkJCXZhbHVlKAoJCQkJCQlxdWVyeVBhcnNlcihwYXJhbXMpKSkKCQkJCV0pOwoJCX0pOwp9Owp2YXIgJGVsbSR1cmwkVXJsJFBhcnNlciRzbGFzaCA9IEYyKAoJZnVuY3Rpb24gKF92MCwgX3YxKSB7CgkJdmFyIHBhcnNlQmVmb3JlID0gX3YwLmE7CgkJdmFyIHBhcnNlQWZ0ZXIgPSBfdjEuYTsKCQlyZXR1cm4gJGVsbSR1cmwkVXJsJFBhcnNlciRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzdGF0ZSkgewoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJCQlwYXJzZUFmdGVyLAoJCQkJCXBhcnNlQmVmb3JlKHN0YXRlKSk7CgkJCX0pOwoJfSk7CnZhciAkZWxtJHVybCRVcmwkUGFyc2VyJHF1ZXN0aW9uTWFyayA9IEYyKAoJZnVuY3Rpb24gKHBhcnNlciwgcXVlcnlQYXJzZXIpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kdXJsJFVybCRQYXJzZXIkc2xhc2gsCgkJCXBhcnNlciwKCQkJJGVsbSR1cmwkVXJsJFBhcnNlciRxdWVyeShxdWVyeVBhcnNlcikpOwoJfSk7CnZhciAkZWxtJHVybCRVcmwkUGFyc2VyJEludGVybmFsJFBhcnNlciA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQYXJzZXInLCBhOiBhfTsKfTsKdmFyICRlbG0kdXJsJFVybCRQYXJzZXIkUXVlcnkkY3VzdG9tID0gRjIoCglmdW5jdGlvbiAoa2V5LCBmdW5jKSB7CgkJcmV0dXJuICRlbG0kdXJsJFVybCRQYXJzZXIkSW50ZXJuYWwkUGFyc2VyKAoJCQlmdW5jdGlvbiAoZGljdCkgewoJCQkJcmV0dXJuIGZ1bmMoCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCQkJX0xpc3RfTmlsLAoJCQkJCQlBMigkZWxtJGNvcmUkRGljdCRnZXQsIGtleSwgZGljdCkpKTsKCQkJfSk7Cgl9KTsKdmFyICRlbG0kdXJsJFVybCRQYXJzZXIkUXVlcnkkc3RyaW5nID0gZnVuY3Rpb24gKGtleSkgewoJcmV0dXJuIEEyKAoJCSRlbG0kdXJsJFVybCRQYXJzZXIkUXVlcnkkY3VzdG9tLAoJCWtleSwKCQlmdW5jdGlvbiAoc3RyaW5nTGlzdCkgewoJCQlpZiAoc3RyaW5nTGlzdC5iICYmICghc3RyaW5nTGlzdC5iLmIpKSB7CgkJCQl2YXIgc3RyID0gc3RyaW5nTGlzdC5hOwoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KHN0cik7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCX0KCQl9KTsKfTsKdmFyICRlbG0kdXJsJFVybCRQYXJzZXIkdG9wID0gJGVsbSR1cmwkVXJsJFBhcnNlciRQYXJzZXIoCglmdW5jdGlvbiAoc3RhdGUpIHsKCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQlbc3RhdGVdKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5VcmwkZmlsZVBhdGhUb09wZW5Gcm9tVXJsID0gZnVuY3Rpb24gKHVybCkgewoJcmV0dXJuICRlbG1fY29tbXVuaXR5JG1heWJlX2V4dHJhJE1heWJlJEV4dHJhJGpvaW4oCgkJQTIoCgkJCSRlbG0kdXJsJFVybCRQYXJzZXIkcGFyc2UsCgkJCUEyKAoJCQkJJGVsbSR1cmwkVXJsJFBhcnNlciRxdWVzdGlvbk1hcmssCgkJCQkkZWxtJHVybCRVcmwkUGFyc2VyJHRvcCwKCQkJCSRlbG0kdXJsJFVybCRQYXJzZXIkUXVlcnkkc3RyaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJGZpbGVQYXRoVG9PcGVuUXVlcnlQYXJhbWV0ZXJOYW1lKSksCgkJCV9VdGlsc191cGRhdGUoCgkJCQl1cmwsCgkJCQl7cGF0aDogJyd9KSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JFdvcmtzcGFjZVN0YXRlXzIwMjFfMDEkbm9EaWZmZXJlbmNlID0ge2NoYW5nZUJsb2JzOiBfTGlzdF9OaWwsIHJlbW92ZU5vZGVzOiBfTGlzdF9OaWx9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kV29ya3NwYWNlTG9hZGluZ0Zyb21MaW5rID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1dvcmtzcGFjZUxvYWRpbmdGcm9tTGluaycsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kQmFja2VuZExvYWRGcm9tR2l0UmVzdWx0RXZlbnQgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnQmFja2VuZExvYWRGcm9tR2l0UmVzdWx0RXZlbnQnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kQmFja2VuZEludGVyZmFjZSRMb2FkQ29tcG9zaXRpb25SZXF1ZXN0ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xvYWRDb21wb3NpdGlvblJlcXVlc3QnLCBhOiBhfTsKfTsKdmFyICRlbG0kaHR0cCRIdHRwJEJhZFN0YXR1c18gPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnQmFkU3RhdHVzXycsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkZWxtJGh0dHAkSHR0cCRCYWRVcmxfID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0JhZFVybF8nLCBhOiBhfTsKfTsKdmFyICRlbG0kaHR0cCRIdHRwJEdvb2RTdGF0dXNfID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0dvb2RTdGF0dXNfJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRlbG0kaHR0cCRIdHRwJE5ldHdvcmtFcnJvcl8gPSB7JDogJ05ldHdvcmtFcnJvcl8nfTsKdmFyICRlbG0kaHR0cCRIdHRwJFJlY2VpdmluZyA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdSZWNlaXZpbmcnLCBhOiBhfTsKfTsKdmFyICRlbG0kaHR0cCRIdHRwJFNlbmRpbmcgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnU2VuZGluZycsIGE6IGF9Owp9Owp2YXIgJGVsbSRodHRwJEh0dHAkVGltZW91dF8gPSB7JDogJ1RpbWVvdXRfJ307CnZhciAkZWxtJGNvcmUkTWF5YmUkaXNKdXN0ID0gZnVuY3Rpb24gKG1heWJlKSB7CglpZiAobWF5YmUuJCA9PT0gJ0p1c3QnKSB7CgkJcmV0dXJuIHRydWU7Cgl9IGVsc2UgewoJCXJldHVybiBmYWxzZTsKCX0KfTsKdmFyICRlbG0kaHR0cCRIdHRwJGV4cGVjdFN0cmluZ1Jlc3BvbnNlID0gRjIoCglmdW5jdGlvbiAodG9Nc2csIHRvUmVzdWx0KSB7CgkJcmV0dXJuIEEzKAoJCQlfSHR0cF9leHBlY3QsCgkJCScnLAoJCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCQlBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLCB0b1Jlc3VsdCwgdG9Nc2cpKTsKCX0pOwp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJGRlY29kZVN0cmluZyA9IF9Kc29uX3J1bk9uU3RyaW5nOwp2YXIgJGVsbSRjb3JlJFJlc3VsdCRtYXBFcnJvciA9IEYyKAoJZnVuY3Rpb24gKGYsIHJlc3VsdCkgewoJCWlmIChyZXN1bHQuJCA9PT0gJ09rJykgewoJCQl2YXIgdiA9IHJlc3VsdC5hOwoJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPayh2KTsKCQl9IGVsc2UgewoJCQl2YXIgZSA9IHJlc3VsdC5hOwoJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoCgkJCQlmKGUpKTsKCQl9Cgl9KTsKdmFyICRqenhodWFuZyRodHRwX2V4dHJhcyRIdHRwJERldGFpbGVkJEJhZEJvZHkgPSBGMygKCWZ1bmN0aW9uIChhLCBiLCBjKSB7CgkJcmV0dXJuIHskOiAnQmFkQm9keScsIGE6IGEsIGI6IGIsIGM6IGN9OwoJfSk7CnZhciAkanp4aHVhbmckaHR0cF9leHRyYXMkSHR0cCREZXRhaWxlZCRCYWRTdGF0dXMgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnQmFkU3RhdHVzJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRqenhodWFuZyRodHRwX2V4dHJhcyRIdHRwJERldGFpbGVkJEJhZFVybCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdCYWRVcmwnLCBhOiBhfTsKfTsKdmFyICRqenhodWFuZyRodHRwX2V4dHJhcyRIdHRwJERldGFpbGVkJE5ldHdvcmtFcnJvciA9IHskOiAnTmV0d29ya0Vycm9yJ307CnZhciAkanp4aHVhbmckaHR0cF9leHRyYXMkSHR0cCREZXRhaWxlZCRUaW1lb3V0ID0geyQ6ICdUaW1lb3V0J307CnZhciAkanp4aHVhbmckaHR0cF9leHRyYXMkSHR0cCREZXRhaWxlZCRyZXNvbHZlID0gRjIoCglmdW5jdGlvbiAodG9SZXN1bHQsIHJlc3BvbnNlKSB7CgkJc3dpdGNoIChyZXNwb25zZS4kKSB7CgkJCWNhc2UgJ0JhZFVybF8nOgoJCQkJdmFyIHVybCA9IHJlc3BvbnNlLmE7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoCgkJCQkJJGp6eGh1YW5nJGh0dHBfZXh0cmFzJEh0dHAkRGV0YWlsZWQkQmFkVXJsKHVybCkpOwoJCQljYXNlICdUaW1lb3V0Xyc6CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJGp6eGh1YW5nJGh0dHBfZXh0cmFzJEh0dHAkRGV0YWlsZWQkVGltZW91dCk7CgkJCWNhc2UgJ05ldHdvcmtFcnJvcl8nOgoJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKCRqenhodWFuZyRodHRwX2V4dHJhcyRIdHRwJERldGFpbGVkJE5ldHdvcmtFcnJvcik7CgkJCWNhc2UgJ0JhZFN0YXR1c18nOgoJCQkJdmFyIG1ldGFkYXRhID0gcmVzcG9uc2UuYTsKCQkJCXZhciBib2R5ID0gcmVzcG9uc2UuYjsKCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCQlBMigkanp4aHVhbmckaHR0cF9leHRyYXMkSHR0cCREZXRhaWxlZCRCYWRTdGF0dXMsIG1ldGFkYXRhLCBib2R5KSk7CgkJCWRlZmF1bHQ6CgkJCQl2YXIgbWV0YWRhdGEgPSByZXNwb25zZS5hOwoJCQkJdmFyIGJvZHkgPSByZXNwb25zZS5iOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJQTIoJGp6eGh1YW5nJGh0dHBfZXh0cmFzJEh0dHAkRGV0YWlsZWQkQmFkQm9keSwgbWV0YWRhdGEsIGJvZHkpLAoJCQkJCXRvUmVzdWx0KAoJCQkJCQlfVXRpbHNfVHVwbGUyKG1ldGFkYXRhLCBib2R5KSkpOwoJCX0KCX0pOwp2YXIgJGp6eGh1YW5nJGh0dHBfZXh0cmFzJEh0dHAkRGV0YWlsZWQkcmVzcG9uc2VUb0pzb24gPSBGMigKCWZ1bmN0aW9uIChkZWNvZGVyLCByZXNwb25zZVN0cmluZykgewoJCXJldHVybiBBMigKCQkJJGp6eGh1YW5nJGh0dHBfZXh0cmFzJEh0dHAkRGV0YWlsZWQkcmVzb2x2ZSwKCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJdmFyIG1ldGFkYXRhID0gX3YwLmE7CgkJCQl2YXIgYm9keSA9IF92MC5iOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGVycm9yVG9TdHJpbmcsCgkJCQkJQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRkZWNvZGVTdHJpbmcsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkJCWZ1bmN0aW9uIChyZXMpIHsKCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihtZXRhZGF0YSwgcmVzKTsKCQkJCQkJCX0sCgkJCQkJCQlkZWNvZGVyKSwKCQkJCQkJYm9keSkpOwoJCQl9LAoJCQlyZXNwb25zZVN0cmluZyk7Cgl9KTsKdmFyICRqenhodWFuZyRodHRwX2V4dHJhcyRIdHRwJERldGFpbGVkJGV4cGVjdEpzb24gPSBGMigKCWZ1bmN0aW9uICh0b01zZywgZGVjb2RlcikgewoJCXJldHVybiBBMigKCQkJJGVsbSRodHRwJEh0dHAkZXhwZWN0U3RyaW5nUmVzcG9uc2UsCgkJCXRvTXNnLAoJCQkkanp4aHVhbmckaHR0cF9leHRyYXMkSHR0cCREZXRhaWxlZCRyZXNwb25zZVRvSnNvbihkZWNvZGVyKSk7Cgl9KTsKdmFyICRlbG0kaHR0cCRIdHRwJGpzb25Cb2R5ID0gZnVuY3Rpb24gKHZhbHVlKSB7CglyZXR1cm4gQTIoCgkJX0h0dHBfcGFpciwKCQknYXBwbGljYXRpb24vanNvbicsCgkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGVuY29kZSwgMCwgdmFsdWUpKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZEJhY2tlbmRJbnRlcmZhY2UkRWxtTWFrZVJlc3BvbnNlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0VsbU1ha2VSZXNwb25zZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kQmFja2VuZEludGVyZmFjZSRFcnJvclJlc3BvbnNlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0Vycm9yUmVzcG9uc2UnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZEJhY2tlbmRJbnRlcmZhY2UkRm9ybWF0RWxtTW9kdWxlVGV4dFJlc3BvbnNlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0Zvcm1hdEVsbU1vZHVsZVRleHRSZXNwb25zZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kQmFja2VuZEludGVyZmFjZSRMb2FkQ29tcG9zaXRpb25SZXNwb25zZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdMb2FkQ29tcG9zaXRpb25SZXNwb25zZScsIGE6IGF9Owp9Owp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJGxpc3QgPSBfSnNvbl9kZWNvZGVMaXN0Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfX2dlbmVyaWNfTGlzdCA9ICRlbG0kanNvbiRKc29uJERlY29kZSRsaXN0Owp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJG51bGwgPSBfSnNvbl9kZWNvZGVOdWxsOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfX2dlbmVyaWNfTWF5YmUgPSBmdW5jdGlvbiAoZGVjb2RlcikgewoJcmV0dXJuICRlbG0kanNvbiRKc29uJERlY29kZSRvbmVPZigKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKAoJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQkJJ05vdGhpbmcnLAoJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpKSwKCQkJCUEyKAoJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQkJJ0p1c3QnLAoJCQkJQTIoCgkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdCwKCQkJCQlBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsIDAsIGRlY29kZXIpKSksCgkJCQlBMigKCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJCSdKdXN0JywKCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsICRlbG0kY29yZSRNYXliZSRKdXN0LCBkZWNvZGVyKSksCgkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbnVsbCgkZWxtJGNvcmUkTWF5YmUkTm90aGluZykKCQkJXSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfRnJvbnRlbmRCYWNrZW5kSW50ZXJmYWNlX1Jlc3BvbnNlU3RydWN0dXJlID0gJGVsbSRqc29uJEpzb24kRGVjb2RlJG9uZU9mKAoJX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ0VsbU1ha2VSZXNwb25zZScsCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRsYXp5KAoJCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kQmFja2VuZEludGVyZmFjZSRFbG1NYWtlUmVzcG9uc2UsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LAoJCQkJCQkJMCwKCQkJCQkJCUEyKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQlBMygKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkncmVwb3J0SnNvblByb2Nlc3NPdXRwdXQnLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbJ1JlcG9ydEpzb25Qcm9jZXNzT3V0cHV0J10pLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQknZXhpdENvZGUnLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWydFeGl0Q29kZSddKSwKCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW50KSwKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQknc3RhbmRhcmRPdXRwdXQnLAoJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQlbJ1N0YW5kYXJkT3V0cHV0J10pLAoJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQkJCSdzdGFuZGFyZEVycm9yJywKCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQlbJ1N0YW5kYXJkRXJyb3InXSksCgkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSwKCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoCgkJCQkJCQkJCQkJCQlGMygKCQkJCQkJCQkJCQkJCQlmdW5jdGlvbiAoc3RhbmRhcmRFcnJvciwgc3RhbmRhcmRPdXRwdXQsIGV4aXRDb2RlKSB7CgkJCQkJCQkJCQkJCQkJCXJldHVybiB7ZXhpdENvZGU6IGV4aXRDb2RlLCBzdGFuZGFyZEVycm9yOiBzdGFuZGFyZEVycm9yLCBzdGFuZGFyZE91dHB1dDogc3RhbmRhcmRPdXRwdXR9OwoJCQkJCQkJCQkJCQkJCX0pKSkpKSksCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQknb3V0cHV0RmlsZUNvbnRlbnRCYXNlNjQnLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsnT3V0cHV0RmlsZUNvbnRlbnRCYXNlNjQnXSksCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9fZ2VuZXJpY19NYXliZSgkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCSdwcm9jZXNzT3V0cHV0JywKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVsnUHJvY2Vzc091dHB1dCddKSwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQkJCSdleGl0Q29kZScsCgkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJWydFeGl0Q29kZSddKSwKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQkJCQknc3RhbmRhcmRPdXRwdXQnLAoJCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQkJWydTdGFuZGFyZE91dHB1dCddKSwKCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSwKCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJCQknc3RhbmRhcmRFcnJvcicsCgkJCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQkJCVsnU3RhbmRhcmRFcnJvciddKSwKCQkJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoCgkJCQkJCQkJCQkJCQkJCUYzKAoJCQkJCQkJCQkJCQkJCQkJZnVuY3Rpb24gKHN0YW5kYXJkRXJyb3IsIHN0YW5kYXJkT3V0cHV0LCBleGl0Q29kZSkgewoJCQkJCQkJCQkJCQkJCQkJCXJldHVybiB7ZXhpdENvZGU6IGV4aXRDb2RlLCBzdGFuZGFyZEVycm9yOiBzdGFuZGFyZEVycm9yLCBzdGFuZGFyZE91dHB1dDogc3RhbmRhcmRPdXRwdXR9OwoJCQkJCQkJCQkJCQkJCQkJfSkpKSkpKSwKCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCQkJCQkJCUYzKAoJCQkJCQkJCQkJCQlmdW5jdGlvbiAocHJvY2Vzc091dHB1dCwgb3V0cHV0RmlsZUNvbnRlbnRCYXNlNjQsIHJlcG9ydEpzb25Qcm9jZXNzT3V0cHV0KSB7CgkJCQkJCQkJCQkJCQlyZXR1cm4ge291dHB1dEZpbGVDb250ZW50QmFzZTY0OiBvdXRwdXRGaWxlQ29udGVudEJhc2U2NCwgcHJvY2Vzc091dHB1dDogcHJvY2Vzc091dHB1dCwgcmVwb3J0SnNvblByb2Nlc3NPdXRwdXQ6IHJlcG9ydEpzb25Qcm9jZXNzT3V0cHV0fTsKCQkJCQkJCQkJCQkJfSkpKSkpKSk7CgkJCQl9KSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdFcnJvclJlc3BvbnNlJywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmRCYWNrZW5kSW50ZXJmYWNlJEVycm9yUmVzcG9uc2UsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwgMCwgJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZykpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknRm9ybWF0RWxtTW9kdWxlVGV4dFJlc3BvbnNlJywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmRCYWNrZW5kSW50ZXJmYWNlJEZvcm1hdEVsbU1vZHVsZVRleHRSZXNwb25zZSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkwLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCUEzKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCSdmb3JtYXR0ZWRUZXh0JywKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWydGb3JtYXR0ZWRUZXh0J10pLAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9fZ2VuZXJpY19NYXliZSgkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSksCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkncHJvY2Vzc091dHB1dCcsCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWydQcm9jZXNzT3V0cHV0J10pLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJCSdleGl0Q29kZScsCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVsnRXhpdENvZGUnXSksCgkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJJ3N0YW5kYXJkT3V0cHV0JywKCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQlbJ1N0YW5kYXJkT3V0cHV0J10pLAoJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJCSdzdGFuZGFyZEVycm9yJywKCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCVsnU3RhbmRhcmRFcnJvciddKSwKCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSwKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCQkJCQkJCQkJCUYzKAoJCQkJCQkJCQkJCQkJCQlmdW5jdGlvbiAoc3RhbmRhcmRFcnJvciwgc3RhbmRhcmRPdXRwdXQsIGV4aXRDb2RlKSB7CgkJCQkJCQkJCQkJCQkJCQlyZXR1cm4ge2V4aXRDb2RlOiBleGl0Q29kZSwgc3RhbmRhcmRFcnJvcjogc3RhbmRhcmRFcnJvciwgc3RhbmRhcmRPdXRwdXQ6IHN0YW5kYXJkT3V0cHV0fTsKCQkJCQkJCQkJCQkJCQkJfSkpKSkpKSwKCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoCgkJCQkJCQkJCQlGMigKCQkJCQkJCQkJCQlmdW5jdGlvbiAocHJvY2Vzc091dHB1dCwgZm9ybWF0dGVkVGV4dCkgewoJCQkJCQkJCQkJCQlyZXR1cm4ge2Zvcm1hdHRlZFRleHQ6IGZvcm1hdHRlZFRleHQsIHByb2Nlc3NPdXRwdXQ6IHByb2Nlc3NPdXRwdXR9OwoJCQkJCQkJCQkJCX0pKSkpKSk7CgkJCQl9KSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdMb2FkQ29tcG9zaXRpb25SZXNwb25zZScsCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRsYXp5KAoJCQkJZnVuY3Rpb24gKF92MykgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kQmFja2VuZEludGVyZmFjZSRMb2FkQ29tcG9zaXRpb25SZXNwb25zZSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkwLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCUEzKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCSd1cmxJbkNvbW1pdCcsCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsnVXJsSW5Db21taXQnXSksCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJJ2ZpbGVzQXNGbGF0TGlzdCcsCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWydGaWxlc0FzRmxhdExpc3QnXSksCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9fZ2VuZXJpY19MaXN0KAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJJ2NvbnRlbnRCYXNlNjQnLAoJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCVsnQ29udGVudEJhc2U2NCddKSwKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQkJCQkncGF0aCcsCgkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQlbJ1BhdGgnXSksCgkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfX2dlbmVyaWNfTGlzdCgkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSksCgkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJCQkJCQlGMigKCQkJCQkJCQkJCQkJCQkJZnVuY3Rpb24gKHBhdGgsIGNvbnRlbnRCYXNlNjQpIHsKCQkJCQkJCQkJCQkJCQkJCXJldHVybiB7Y29udGVudEJhc2U2NDogY29udGVudEJhc2U2NCwgcGF0aDogcGF0aH07CgkJCQkJCQkJCQkJCQkJCX0pKSkpKSksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCSdjb21wb3NpdGlvbklkJywKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVsnQ29tcG9zaXRpb25JZCddKSwKCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSwKCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCQkJCQkJCUYzKAoJCQkJCQkJCQkJCQlmdW5jdGlvbiAoY29tcG9zaXRpb25JZCwgZmlsZXNBc0ZsYXRMaXN0LCB1cmxJbkNvbW1pdCkgewoJCQkJCQkJCQkJCQkJcmV0dXJuIHtjb21wb3NpdGlvbklkOiBjb21wb3NpdGlvbklkLCBmaWxlc0FzRmxhdExpc3Q6IGZpbGVzQXNGbGF0TGlzdCwgdXJsSW5Db21taXQ6IHVybEluQ29tbWl0fTsKCQkJCQkJCQkJCQkJfSkpKSkpKSk7CgkJCQl9KSkKCQldKSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV81MzYwNjg3MzIgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9Gcm9udGVuZEJhY2tlbmRJbnRlcmZhY2VfUmVzcG9uc2VTdHJ1Y3R1cmU7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRqc29uRGVjb2RlUmVzcG9uc2VTdHJ1Y3R1cmUgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV81MzYwNjg3MzI7CnZhciAkZWxtJGpzb24kSnNvbiRFbmNvZGUkYm9vbCA9IF9Kc29uX3dyYXA7CnZhciAkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCA9IEYyKAoJZnVuY3Rpb24gKGZ1bmMsIGVudHJpZXMpIHsKCQlyZXR1cm4gX0pzb25fd3JhcCgKCQkJQTMoCgkJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJCV9Kc29uX2FkZEVudHJ5KGZ1bmMpLAoJCQkJX0pzb25fZW1wdHlBcnJheShfVXRpbHNfVHVwbGUwKSwKCQkJCWVudHJpZXMpKTsKCX0pOwp2YXIgJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCA9IGZ1bmN0aW9uIChwYWlycykgewoJcmV0dXJuIF9Kc29uX3dyYXAoCgkJQTMoCgkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQlGMigKCQkJCWZ1bmN0aW9uIChfdjAsIG9iaikgewoJCQkJCXZhciBrID0gX3YwLmE7CgkJCQkJdmFyIHYgPSBfdjAuYjsKCQkJCQlyZXR1cm4gQTMoX0pzb25fYWRkRmllbGQsIGssIHYsIG9iaik7CgkJCQl9KSwKCQkJX0pzb25fZW1wdHlPYmplY3QoX1V0aWxzX1R1cGxlMCksCgkJCXBhaXJzKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9Gcm9udGVuZEJhY2tlbmRJbnRlcmZhY2VfRWxtTWFrZU91dHB1dFR5cGUgPSBmdW5jdGlvbiAodmFsdWVUb0VuY29kZSkgewoJaWYgKHZhbHVlVG9FbmNvZGUuJCA9PT0gJ0VsbU1ha2VPdXRwdXRUeXBlSHRtbCcpIHsKCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJJ0VsbU1ha2VPdXRwdXRUeXBlSHRtbCcsCgkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQldKSk7Cgl9IGVsc2UgewoJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQknRWxtTWFrZU91dHB1dFR5cGVKcycsCgkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQldKSk7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9fZ2VuZXJpY19MaXN0ID0gJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3Q7CnZhciAkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nID0gX0pzb25fd3JhcDsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0Zyb250ZW5kQmFja2VuZEludGVyZmFjZV9SZXF1ZXN0U3RydWN0dXJlID0gZnVuY3Rpb24gKHZhbHVlVG9FbmNvZGUpIHsKCXN3aXRjaCAodmFsdWVUb0VuY29kZS4kKSB7CgkJY2FzZSAnRWxtTWFrZVJlcXVlc3QnOgoJCQl2YXIgdGFnQXJndW1lbnQwID0gdmFsdWVUb0VuY29kZS5hOwoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdFbG1NYWtlUmVxdWVzdCcsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJJ2ZpbGVzJywKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfX2dlbmVyaWNfTGlzdCwKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCQkJCQkJCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkJCQkncGF0aCcsCgkJCQkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9fZ2VuZXJpY19MaXN0LAoJCQkJCQkJCQkJCQkJCQkJCWZ1bmN0aW9uICh0eXBlX2FyZ18pIHsKCQkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodHlwZV9hcmdfKTsKCQkJCQkJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCQkJCQkJCXR5cGVfYXJnLnBhdGgpKSwKCQkJCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkJCQknY29udGVudEJhc2U2NCcsCgkJCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHR5cGVfYXJnLmNvbnRlbnRCYXNlNjQpKQoJCQkJCQkJCQkJCQkJCQldKSk7CgkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCXRhZ0FyZ3VtZW50MC5maWxlcykpLAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJJ3dvcmtpbmdEaXJlY3RvcnlQYXRoJywKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfX2dlbmVyaWNfTGlzdCwKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCQkJCQkJCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0eXBlX2FyZyk7CgkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCXRhZ0FyZ3VtZW50MC53b3JraW5nRGlyZWN0b3J5UGF0aCkpLAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJJ2VudHJ5UG9pbnRGaWxlUGF0aEZyb21Xb3JraW5nRGlyZWN0b3J5JywKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfX2dlbmVyaWNfTGlzdCwKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCQkJCQkJCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0eXBlX2FyZyk7CgkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCXRhZ0FyZ3VtZW50MC5lbnRyeVBvaW50RmlsZVBhdGhGcm9tV29ya2luZ0RpcmVjdG9yeSkpLAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJJ21ha2VPcHRpb25EZWJ1ZycsCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGJvb2wodGFnQXJndW1lbnQwLm1ha2VPcHRpb25EZWJ1ZykpLAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJJ291dHB1dFR5cGUnLAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0Zyb250ZW5kQmFja2VuZEludGVyZmFjZV9FbG1NYWtlT3V0cHV0VHlwZSh0YWdBcmd1bWVudDAub3V0cHV0VHlwZSkpCgkJCQkJCQkJCQldKSkKCQkJCQkJCQldKSkpCgkJCQkJXSkpOwoJCWNhc2UgJ0Zvcm1hdEVsbU1vZHVsZVRleHRSZXF1ZXN0JzoKCQkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknRm9ybWF0RWxtTW9kdWxlVGV4dFJlcXVlc3QnLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodGFnQXJndW1lbnQwKQoJCQkJCQkJCV0pKSkKCQkJCQldKSk7CgkJZGVmYXVsdDoKCQkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknTG9hZENvbXBvc2l0aW9uUmVxdWVzdCcsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0YWdBcmd1bWVudDApCgkJCQkJCQkJXSkpKQoJCQkJCV0pKTsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlXzI1NDg2MDE1NDYgPSBmdW5jdGlvbiAodmFsdWVUb0VuY29kZSkgewoJcmV0dXJuICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0Zyb250ZW5kQmFja2VuZEludGVyZmFjZV9SZXF1ZXN0U3RydWN0dXJlKHZhbHVlVG9FbmNvZGUpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZVJlcXVlc3RTdHJ1Y3R1cmUgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV8yNTQ4NjAxNTQ2Owp2YXIgJGVsbSRodHRwJEh0dHAkUmVxdWVzdCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdSZXF1ZXN0JywgYTogYX07Cn07CnZhciAkZWxtJGh0dHAkSHR0cCRTdGF0ZSA9IEYyKAoJZnVuY3Rpb24gKHJlcXMsIHN1YnMpIHsKCQlyZXR1cm4ge3JlcXM6IHJlcXMsIHN1YnM6IHN1YnN9OwoJfSk7CnZhciAkZWxtJGh0dHAkSHR0cCRpbml0ID0gJGVsbSRjb3JlJFRhc2skc3VjY2VlZCgKCUEyKCRlbG0kaHR0cCRIdHRwJFN0YXRlLCAkZWxtJGNvcmUkRGljdCRlbXB0eSwgX0xpc3RfTmlsKSk7CnZhciAkZWxtJGh0dHAkSHR0cCR1cGRhdGVSZXFzID0gRjMoCglmdW5jdGlvbiAocm91dGVyLCBjbWRzLCByZXFzKSB7CgkJdXBkYXRlUmVxczoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIWNtZHMuYikgewoJCQkJcmV0dXJuICRlbG0kY29yZSRUYXNrJHN1Y2NlZWQocmVxcyk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgY21kID0gY21kcy5hOwoJCQkJdmFyIG90aGVyQ21kcyA9IGNtZHMuYjsKCQkJCWlmIChjbWQuJCA9PT0gJ0NhbmNlbCcpIHsKCQkJCQl2YXIgdHJhY2tlciA9IGNtZC5hOwoJCQkJCXZhciBfdjIgPSBBMigkZWxtJGNvcmUkRGljdCRnZXQsIHRyYWNrZXIsIHJlcXMpOwoJCQkJCWlmIChfdjIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXZhciAkdGVtcCRyb3V0ZXIgPSByb3V0ZXIsCgkJCQkJCQkkdGVtcCRjbWRzID0gb3RoZXJDbWRzLAoJCQkJCQkJJHRlbXAkcmVxcyA9IHJlcXM7CgkJCQkJCXJvdXRlciA9ICR0ZW1wJHJvdXRlcjsKCQkJCQkJY21kcyA9ICR0ZW1wJGNtZHM7CgkJCQkJCXJlcXMgPSAkdGVtcCRyZXFzOwoJCQkJCQljb250aW51ZSB1cGRhdGVSZXFzOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBwaWQgPSBfdjIuYTsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJGVsbSRjb3JlJFRhc2skYW5kVGhlbiwKCQkJCQkJCWZ1bmN0aW9uIChfdjMpIHsKCQkJCQkJCQlyZXR1cm4gQTMoCgkJCQkJCQkJCSRlbG0kaHR0cCRIdHRwJHVwZGF0ZVJlcXMsCgkJCQkJCQkJCXJvdXRlciwKCQkJCQkJCQkJb3RoZXJDbWRzLAoJCQkJCQkJCQlBMigkZWxtJGNvcmUkRGljdCRyZW1vdmUsIHRyYWNrZXIsIHJlcXMpKTsKCQkJCQkJCX0sCgkJCQkJCQkkZWxtJGNvcmUkUHJvY2VzcyRraWxsKHBpZCkpOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHJlcSA9IGNtZC5hOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJFRhc2skYW5kVGhlbiwKCQkJCQkJZnVuY3Rpb24gKHBpZCkgewoJCQkJCQkJdmFyIF92NCA9IHJlcS50cmFja2VyOwoJCQkJCQkJaWYgKF92NC4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQlyZXR1cm4gQTMoJGVsbSRodHRwJEh0dHAkdXBkYXRlUmVxcywgcm91dGVyLCBvdGhlckNtZHMsIHJlcXMpOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgdHJhY2tlciA9IF92NC5hOwoJCQkJCQkJCXJldHVybiBBMygKCQkJCQkJCQkJJGVsbSRodHRwJEh0dHAkdXBkYXRlUmVxcywKCQkJCQkJCQkJcm91dGVyLAoJCQkJCQkJCQlvdGhlckNtZHMsCgkJCQkJCQkJCUEzKCRlbG0kY29yZSREaWN0JGluc2VydCwgdHJhY2tlciwgcGlkLCByZXFzKSk7CgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJCSRlbG0kY29yZSRQcm9jZXNzJHNwYXduKAoJCQkJCQkJQTMoCgkJCQkJCQkJX0h0dHBfdG9UYXNrLAoJCQkJCQkJCXJvdXRlciwKCQkJCQkJCQkkZWxtJGNvcmUkUGxhdGZvcm0kc2VuZFRvQXBwKHJvdXRlciksCgkJCQkJCQkJcmVxKSkpOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGh0dHAkSHR0cCRvbkVmZmVjdHMgPSBGNCgKCWZ1bmN0aW9uIChyb3V0ZXIsIGNtZHMsIHN1YnMsIHN0YXRlKSB7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkVGFzayRhbmRUaGVuLAoJCQlmdW5jdGlvbiAocmVxcykgewoJCQkJcmV0dXJuICRlbG0kY29yZSRUYXNrJHN1Y2NlZWQoCgkJCQkJQTIoJGVsbSRodHRwJEh0dHAkU3RhdGUsIHJlcXMsIHN1YnMpKTsKCQkJfSwKCQkJQTMoJGVsbSRodHRwJEh0dHAkdXBkYXRlUmVxcywgcm91dGVyLCBjbWRzLCBzdGF0ZS5yZXFzKSk7Cgl9KTsKdmFyICRlbG0kaHR0cCRIdHRwJG1heWJlU2VuZCA9IEY0KAoJZnVuY3Rpb24gKHJvdXRlciwgZGVzaXJlZFRyYWNrZXIsIHByb2dyZXNzLCBfdjApIHsKCQl2YXIgYWN0dWFsVHJhY2tlciA9IF92MC5hOwoJCXZhciB0b01zZyA9IF92MC5iOwoJCXJldHVybiBfVXRpbHNfZXEoZGVzaXJlZFRyYWNrZXIsIGFjdHVhbFRyYWNrZXIpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCUEyKAoJCQkJJGVsbSRjb3JlJFBsYXRmb3JtJHNlbmRUb0FwcCwKCQkJCXJvdXRlciwKCQkJCXRvTXNnKHByb2dyZXNzKSkpIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7Cgl9KTsKdmFyICRlbG0kaHR0cCRIdHRwJG9uU2VsZk1zZyA9IEYzKAoJZnVuY3Rpb24gKHJvdXRlciwgX3YwLCBzdGF0ZSkgewoJCXZhciB0cmFja2VyID0gX3YwLmE7CgkJdmFyIHByb2dyZXNzID0gX3YwLmI7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkVGFzayRhbmRUaGVuLAoJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFRhc2skc3VjY2VlZChzdGF0ZSk7CgkJCX0sCgkJCSRlbG0kY29yZSRUYXNrJHNlcXVlbmNlKAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLAoJCQkJCUEzKCRlbG0kaHR0cCRIdHRwJG1heWJlU2VuZCwgcm91dGVyLCB0cmFja2VyLCBwcm9ncmVzcyksCgkJCQkJc3RhdGUuc3VicykpKTsKCX0pOwp2YXIgJGVsbSRodHRwJEh0dHAkQ2FuY2VsID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0NhbmNlbCcsIGE6IGF9Owp9Owp2YXIgJGVsbSRodHRwJEh0dHAkY21kTWFwID0gRjIoCglmdW5jdGlvbiAoZnVuYywgY21kKSB7CgkJaWYgKGNtZC4kID09PSAnQ2FuY2VsJykgewoJCQl2YXIgdHJhY2tlciA9IGNtZC5hOwoJCQlyZXR1cm4gJGVsbSRodHRwJEh0dHAkQ2FuY2VsKHRyYWNrZXIpOwoJCX0gZWxzZSB7CgkJCXZhciByID0gY21kLmE7CgkJCXJldHVybiAkZWxtJGh0dHAkSHR0cCRSZXF1ZXN0KAoJCQkJewoJCQkJCWFsbG93Q29va2llc0Zyb21PdGhlckRvbWFpbnM6IHIuYWxsb3dDb29raWVzRnJvbU90aGVyRG9tYWlucywKCQkJCQlib2R5OiByLmJvZHksCgkJCQkJZXhwZWN0OiBBMihfSHR0cF9tYXBFeHBlY3QsIGZ1bmMsIHIuZXhwZWN0KSwKCQkJCQloZWFkZXJzOiByLmhlYWRlcnMsCgkJCQkJbWV0aG9kOiByLm1ldGhvZCwKCQkJCQl0aW1lb3V0OiByLnRpbWVvdXQsCgkJCQkJdHJhY2tlcjogci50cmFja2VyLAoJCQkJCXVybDogci51cmwKCQkJCX0pOwoJCX0KCX0pOwp2YXIgJGVsbSRodHRwJEh0dHAkTXlTdWIgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnTXlTdWInLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGVsbSRodHRwJEh0dHAkc3ViTWFwID0gRjIoCglmdW5jdGlvbiAoZnVuYywgX3YwKSB7CgkJdmFyIHRyYWNrZXIgPSBfdjAuYTsKCQl2YXIgdG9Nc2cgPSBfdjAuYjsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kaHR0cCRIdHRwJE15U3ViLAoJCQl0cmFja2VyLAoJCQlBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLCB0b01zZywgZnVuYykpOwoJfSk7Cl9QbGF0Zm9ybV9lZmZlY3RNYW5hZ2Vyc1snSHR0cCddID0gX1BsYXRmb3JtX2NyZWF0ZU1hbmFnZXIoJGVsbSRodHRwJEh0dHAkaW5pdCwgJGVsbSRodHRwJEh0dHAkb25FZmZlY3RzLCAkZWxtJGh0dHAkSHR0cCRvblNlbGZNc2csICRlbG0kaHR0cCRIdHRwJGNtZE1hcCwgJGVsbSRodHRwJEh0dHAkc3ViTWFwKTsKdmFyICRlbG0kaHR0cCRIdHRwJGNvbW1hbmQgPSBfUGxhdGZvcm1fbGVhZignSHR0cCcpOwp2YXIgJGVsbSRodHRwJEh0dHAkc3Vic2NyaXB0aW9uID0gX1BsYXRmb3JtX2xlYWYoJ0h0dHAnKTsKdmFyICRlbG0kaHR0cCRIdHRwJHJlcXVlc3QgPSBmdW5jdGlvbiAocikgewoJcmV0dXJuICRlbG0kaHR0cCRIdHRwJGNvbW1hbmQoCgkJJGVsbSRodHRwJEh0dHAkUmVxdWVzdCgKCQkJe2FsbG93Q29va2llc0Zyb21PdGhlckRvbWFpbnM6IGZhbHNlLCBib2R5OiByLmJvZHksIGV4cGVjdDogci5leHBlY3QsIGhlYWRlcnM6IHIuaGVhZGVycywgbWV0aG9kOiByLm1ldGhvZCwgdGltZW91dDogci50aW1lb3V0LCB0cmFja2VyOiByLnRyYWNrZXIsIHVybDogci51cmx9KSk7Cn07CnZhciAkZWxtJGh0dHAkSHR0cCRwb3N0ID0gZnVuY3Rpb24gKHIpIHsKCXJldHVybiAkZWxtJGh0dHAkSHR0cCRyZXF1ZXN0KAoJCXtib2R5OiByLmJvZHksIGV4cGVjdDogci5leHBlY3QsIGhlYWRlcnM6IF9MaXN0X05pbCwgbWV0aG9kOiAnUE9TVCcsIHRpbWVvdXQ6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLCB0cmFja2VyOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywgdXJsOiByLnVybH0pOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcmVxdWVzdFRvQXBpQ21kID0gRjMoCglmdW5jdGlvbiAocmVxdWVzdCwganNvbkRlY29kZXJTcGVjaWFsaXphdGlvbiwgZXZlbnRDb25zdHJ1Y3RvcikgewoJCXZhciBqc29uRGVjb2RlciA9IEEyKCRlbG0kanNvbiRKc29uJERlY29kZSRhbmRUaGVuLCBqc29uRGVjb2RlclNwZWNpYWxpemF0aW9uLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRqc29uRGVjb2RlUmVzcG9uc2VTdHJ1Y3R1cmUpOwoJCXJldHVybiAkZWxtJGh0dHAkSHR0cCRwb3N0KAoJCQl7CgkJCQlib2R5OiAkZWxtJGh0dHAkSHR0cCRqc29uQm9keSgKCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRqc29uRW5jb2RlUmVxdWVzdFN0cnVjdHVyZShyZXF1ZXN0KSksCgkJCQlleHBlY3Q6IEEyKCRqenhodWFuZyRodHRwX2V4dHJhcyRIdHRwJERldGFpbGVkJGV4cGVjdEpzb24sIGV2ZW50Q29uc3RydWN0b3IsIGpzb25EZWNvZGVyKSwKCQkJCXVybDogQTIoCgkJCQkJJGVsbSR1cmwkVXJsJEJ1aWxkZXIkYWJzb2x1dGUsCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbJ2FwaSddKSwKCQkJCQlfTGlzdF9OaWwpCgkJCX0pOwoJfSk7CnZhciAkZWxtJGNvcmUkU3RyaW5nJHRyaW0gPSBfU3RyaW5nX3RyaW07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRsb2FkRnJvbUdpdENtZCA9IGZ1bmN0aW9uICh1cmxJbnRvR2l0UmVwb3NpdG9yeSkgewoJdmFyIGJhY2tlbmRSZXNwb25zZUpzb25EZWNvZGVyID0gZnVuY3Rpb24gKGJhY2tlbmRSZXNwb25zZSkgewoJCXN3aXRjaCAoYmFja2VuZFJlc3BvbnNlLiQpIHsKCQkJY2FzZSAnTG9hZENvbXBvc2l0aW9uUmVzcG9uc2UnOgoJCQkJdmFyIGxvYWRDb21wb3NpdGlvbiA9IGJhY2tlbmRSZXNwb25zZS5hOwoJCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCSRlbG0kY29yZSRSZXN1bHQkT2sobG9hZENvbXBvc2l0aW9uKSk7CgkJCWNhc2UgJ0Vycm9yUmVzcG9uc2UnOgoJCQkJdmFyIGVycm9yID0gYmFja2VuZFJlc3BvbnNlLmE7CgkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoCgkJCQkJJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ1RoZSBzZXJ2ZXIgcmVwb3J0ZWQgYW4gZXJyb3I6XG4nICsgZXJyb3IpKTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAkZWxtJGpzb24kSnNvbiREZWNvZGUkZmFpbCgnVW5leHBlY3RlZCByZXNwb25zZTogTm90IGEgTG9hZENvbXBvc2l0aW9uUmVzcG9uc2UnKTsKCQl9Cgl9OwoJcmV0dXJuIEEzKAoJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHJlcXVlc3RUb0FwaUNtZCwKCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmRCYWNrZW5kSW50ZXJmYWNlJExvYWRDb21wb3NpdGlvblJlcXVlc3QoCgkJCSRlbG0kY29yZSRTdHJpbmckdHJpbSh1cmxJbnRvR2l0UmVwb3NpdG9yeSkpLAoJCWJhY2tlbmRSZXNwb25zZUpzb25EZWNvZGVyLAoJCUEyKAoJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCgkZWxtJGNvcmUkVHVwbGUkc2Vjb25kKSwKCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kQmFja2VuZExvYWRGcm9tR2l0UmVzdWx0RXZlbnQodXJsSW50b0dpdFJlcG9zaXRvcnkpKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR1cGRhdGVUb0JlZ2luTG9hZFdvcmtzcGFjZVN0YXRlID0gRjMoCglmdW5jdGlvbiAoX3YwLCBzdGF0ZUJlZm9yZSwgd29ya3NwYWNlU3RhdGVEZXNjcmlwdGlvbikgewoJCXZhciB3b3Jrc3BhY2VTdGF0ZUV4cGVjdGVkQ29tcG9zaXRpb25IYXNoID0gX3YwLndvcmtzcGFjZVN0YXRlRXhwZWN0ZWRDb21wb3NpdGlvbkhhc2g7CgkJdmFyIGZpbGVQYXRoVG9PcGVuID0gX3YwLmZpbGVQYXRoVG9PcGVuOwoJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQlfVXRpbHNfdXBkYXRlKAoJCQkJc3RhdGVCZWZvcmUsCgkJCQl7CgkJCQkJd29ya3NwYWNlOiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRXb3Jrc3BhY2VMb2FkaW5nRnJvbUxpbmsoCgkJCQkJCXtleHBlY3RlZENvbXBvc2l0aW9uSGFzaDogd29ya3NwYWNlU3RhdGVFeHBlY3RlZENvbXBvc2l0aW9uSGFzaCwgZmlsZVBhdGhUb09wZW46IGZpbGVQYXRoVG9PcGVuLCB3b3Jrc3BhY2VTdGF0ZURlc2NyaXB0aW9uOiB3b3Jrc3BhY2VTdGF0ZURlc2NyaXB0aW9ufSkKCQkJCX0pLAoJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRsb2FkRnJvbUdpdENtZCh3b3Jrc3BhY2VTdGF0ZURlc2NyaXB0aW9uLmJhc2UpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5VcmwkTGlua1dvcmtzcGFjZVN0YXRlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xpbmtXb3Jrc3BhY2VTdGF0ZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbW1vbiRkZWNvZGVCeXRlc1RvU3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVzKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkZGVjb2RlLAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHN0cmluZygKCQkJJGVsbSRieXRlcyRCeXRlcyR3aWR0aChieXRlcykpLAoJCWJ5dGVzKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJERpZmZXb3Jrc3BhY2VTdGF0ZV9WZXJzaW9uXzIwMjFfMDEgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRGlmZldvcmtzcGFjZVN0YXRlX1ZlcnNpb25fMjAyMV8wMScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5VcmwkTGl0ZXJhbFdvcmtzcGFjZVN0YXRlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xpdGVyYWxXb3Jrc3BhY2VTdGF0ZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfRmlsZVRyZWVfRmlsZVRyZWVOb2RlID0gZnVuY3Rpb24gKGpzb25EZWNvZGVfdHlwZV9wYXJhbWV0ZXJfYmxvYlN0cnVjdHVyZSkgewoJcmV0dXJuICRlbG0kanNvbiRKc29uJERlY29kZSRvbmVPZigKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKAoJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQkJJ0Jsb2JOb2RlJywKCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRsYXp5KAoJCQkJCWZ1bmN0aW9uIChfdjApIHsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRCbG9iTm9kZSwKCQkJCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwgMCwganNvbkRlY29kZV90eXBlX3BhcmFtZXRlcl9ibG9iU3RydWN0dXJlKSk7CgkJCQkJfSkpLAoJCQkJQTIoCgkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCQknVHJlZU5vZGUnLAoJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQkJZnVuY3Rpb24gKF92MSkgewoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJFRyZWVOb2RlLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LAoJCQkJCQkJCTAsCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfX2dlbmVyaWNfTGlzdCgKCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwMiwKCQkJCQkJCQkJCUYyKAoJCQkJCQkJCQkJCWZ1bmN0aW9uIChpdGVtXzAsIGl0ZW1fMSkgewoJCQkJCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihpdGVtXzAsIGl0ZW1fMSk7CgkJCQkJCQkJCQkJfSksCgkJCQkJCQkJCQlBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsIDAsICRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LAoJCQkJCQkJCQkJCTEsCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfRmlsZVRyZWVfRmlsZVRyZWVOb2RlKGpzb25EZWNvZGVfdHlwZV9wYXJhbWV0ZXJfYmxvYlN0cnVjdHVyZSkpKSkpKTsKCQkJCQl9KSkKCQkJXSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJEVuY29kZSRpc1ZhbGlkQ2hhciA9IGZ1bmN0aW9uIChjKSB7CglpZiAoJGVsbSRjb3JlJENoYXIkaXNBbHBoYU51bShjKSkgewoJCXJldHVybiB0cnVlOwoJfSBlbHNlIHsKCQlzd2l0Y2ggKGMudmFsdWVPZigpKSB7CgkJCWNhc2UgJysnOgoJCQkJcmV0dXJuIHRydWU7CgkJCWNhc2UgJy8nOgoJCQkJcmV0dXJuIHRydWU7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJEVuY29kZSR1bnNhZmVDb252ZXJ0Q2hhciA9IGZ1bmN0aW9uIChfY2hhcikgewoJdmFyIGtleSA9ICRlbG0kY29yZSRDaGFyJHRvQ29kZShfY2hhcik7CglpZiAoKGtleSA+PSA2NSkgJiYgKGtleSA8PSA5MCkpIHsKCQlyZXR1cm4ga2V5IC0gNjU7Cgl9IGVsc2UgewoJCWlmICgoa2V5ID49IDk3KSAmJiAoa2V5IDw9IDEyMikpIHsKCQkJcmV0dXJuIChrZXkgLSA5NykgKyAyNjsKCQl9IGVsc2UgewoJCQlpZiAoKGtleSA+PSA0OCkgJiYgKGtleSA8PSA1NykpIHsKCQkJCXJldHVybiAoKGtleSAtIDQ4KSArIDI2KSArIDI2OwoJCQl9IGVsc2UgewoJCQkJc3dpdGNoIChfY2hhci52YWx1ZU9mKCkpIHsKCQkJCQljYXNlICcrJzoKCQkJCQkJcmV0dXJuIDYyOwoJCQkJCWNhc2UgJy8nOgoJCQkJCQlyZXR1cm4gNjM7CgkJCQkJZGVmYXVsdDoKCQkJCQkJcmV0dXJuIC0xOwoJCQkJfQoJCQl9CgkJfQoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJEVuY29kZSRlbmNvZGVDaGFyYWN0ZXJzID0gRjQoCglmdW5jdGlvbiAoYSwgYiwgYywgZCkgewoJCWlmICgkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRW5jb2RlJGlzVmFsaWRDaGFyKGEpICYmICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCRFbmNvZGUkaXNWYWxpZENoYXIoYikpIHsKCQkJdmFyIG4yID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJEVuY29kZSR1bnNhZmVDb252ZXJ0Q2hhcihiKTsKCQkJdmFyIG4xID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJEVuY29kZSR1bnNhZmVDb252ZXJ0Q2hhcihhKTsKCQkJaWYgKCc9JyA9PT0gZC52YWx1ZU9mKCkpIHsKCQkJCWlmICgnPScgPT09IGMudmFsdWVPZigpKSB7CgkJCQkJdmFyIG4gPSAobjEgPDwgMTgpIHwgKG4yIDw8IDEyKTsKCQkJCQl2YXIgYjEgPSBuID4+IDE2OwoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkdW5zaWduZWRJbnQ4KGIxKSk7CgkJCQl9IGVsc2UgewoJCQkJCWlmICgkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRW5jb2RlJGlzVmFsaWRDaGFyKGMpKSB7CgkJCQkJCXZhciBuMyA9ICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCRFbmNvZGUkdW5zYWZlQ29udmVydENoYXIoYyk7CgkJCQkJCXZhciBuID0gKChuMSA8PCAxOCkgfCAobjIgPDwgMTIpKSB8IChuMyA8PCA2KTsKCQkJCQkJdmFyIGNvbWJpbmVkID0gbiA+PiA4OwoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQlBMigkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSR1bnNpZ25lZEludDE2LCAkZWxtJGJ5dGVzJEJ5dGVzJEJFLCBjb21iaW5lZCkpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQl9CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlpZiAoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJEVuY29kZSRpc1ZhbGlkQ2hhcihjKSAmJiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRW5jb2RlJGlzVmFsaWRDaGFyKGQpKSB7CgkJCQkJdmFyIG40ID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJEVuY29kZSR1bnNhZmVDb252ZXJ0Q2hhcihkKTsKCQkJCQl2YXIgbjMgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRW5jb2RlJHVuc2FmZUNvbnZlcnRDaGFyKGMpOwoJCQkJCXZhciBuID0gKChuMSA8PCAxOCkgfCAobjIgPDwgMTIpKSB8ICgobjMgPDwgNikgfCBuNCk7CgkJCQkJdmFyIGNvbWJpbmVkID0gbiA+PiA4OwoJCQkJCXZhciBiMyA9IG47CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRzZXF1ZW5jZSgKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCUEyKCRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50MTYsICRlbG0kYnl0ZXMkQnl0ZXMkQkUsIGNvbWJpbmVkKSwKCQkJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkdW5zaWduZWRJbnQ4KGIzKQoJCQkJCQkJCV0pKSk7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCX0KCQkJfQoJCX0gZWxzZSB7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCRFbmNvZGUkZW5jb2RlQ2h1bmtzID0gRjIoCglmdW5jdGlvbiAoaW5wdXQsIGFjY3VtKSB7CgkJZW5jb2RlQ2h1bmtzOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBfdjAgPSAkZWxtJGNvcmUkU3RyaW5nJHRvTGlzdCgKCQkJCUEyKCRlbG0kY29yZSRTdHJpbmckbGVmdCwgNCwgaW5wdXQpKTsKCQkJX3YwJDQ6CgkJCXdoaWxlICh0cnVlKSB7CgkJCQlpZiAoIV92MC5iKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KGFjY3VtKTsKCQkJCX0gZWxzZSB7CgkJCQkJaWYgKF92MC5iLmIpIHsKCQkJCQkJaWYgKF92MC5iLmIuYikgewoJCQkJCQkJaWYgKF92MC5iLmIuYi5iKSB7CgkJCQkJCQkJaWYgKCFfdjAuYi5iLmIuYi5iKSB7CgkJCQkJCQkJCXZhciBhID0gX3YwLmE7CgkJCQkJCQkJCXZhciBfdjEgPSBfdjAuYjsKCQkJCQkJCQkJdmFyIGIgPSBfdjEuYTsKCQkJCQkJCQkJdmFyIF92MiA9IF92MS5iOwoJCQkJCQkJCQl2YXIgYyA9IF92Mi5hOwoJCQkJCQkJCQl2YXIgX3YzID0gX3YyLmI7CgkJCQkJCQkJCXZhciBkID0gX3YzLmE7CgkJCQkJCQkJCXZhciBfdjQgPSBBNCgkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRW5jb2RlJGVuY29kZUNoYXJhY3RlcnMsIGEsIGIsIGMsIGQpOwoJCQkJCQkJCQlpZiAoX3Y0LiQgPT09ICdKdXN0JykgewoJCQkJCQkJCQkJdmFyIGVuYyA9IF92NC5hOwoJCQkJCQkJCQkJdmFyICR0ZW1wJGlucHV0ID0gQTIoJGVsbSRjb3JlJFN0cmluZyRkcm9wTGVmdCwgNCwgaW5wdXQpLAoJCQkJCQkJCQkJCSR0ZW1wJGFjY3VtID0gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZW5jLCBhY2N1bSk7CgkJCQkJCQkJCQlpbnB1dCA9ICR0ZW1wJGlucHV0OwoJCQkJCQkJCQkJYWNjdW0gPSAkdGVtcCRhY2N1bTsKCQkJCQkJCQkJCWNvbnRpbnVlIGVuY29kZUNodW5rczsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQkJCQkJfQoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCWJyZWFrIF92MCQ0OwoJCQkJCQkJCX0KCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIGEgPSBfdjAuYTsKCQkJCQkJCQl2YXIgX3Y1ID0gX3YwLmI7CgkJCQkJCQkJdmFyIGIgPSBfdjUuYTsKCQkJCQkJCQl2YXIgX3Y2ID0gX3Y1LmI7CgkJCQkJCQkJdmFyIGMgPSBfdjYuYTsKCQkJCQkJCQl2YXIgX3Y3ID0gQTQoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCRFbmNvZGUkZW5jb2RlQ2hhcmFjdGVycywKCQkJCQkJCQkJYSwKCQkJCQkJCQkJYiwKCQkJCQkJCQkJYywKCQkJCQkJCQkJX1V0aWxzX2NocignPScpKTsKCQkJCQkJCQlpZiAoX3Y3LiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJdmFyIGVuYyA9IF92Ny5hOwoJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBlbmMsIGFjY3VtKSk7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIGEgPSBfdjAuYTsKCQkJCQkJCXZhciBfdjggPSBfdjAuYjsKCQkJCQkJCXZhciBiID0gX3Y4LmE7CgkJCQkJCQl2YXIgX3Y5ID0gQTQoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJEVuY29kZSRlbmNvZGVDaGFyYWN0ZXJzLAoJCQkJCQkJCWEsCgkJCQkJCQkJYiwKCQkJCQkJCQlfVXRpbHNfY2hyKCc9JyksCgkJCQkJCQkJX1V0aWxzX2NocignPScpKTsKCQkJCQkJCWlmIChfdjkuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgZW5jID0gX3Y5LmE7CgkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBlbmMsIGFjY3VtKSk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9IGVsc2UgewoJCQkJCQlicmVhayBfdjAkNDsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJEVuY29kZSRlbmNvZGVyID0gZnVuY3Rpb24gKHN0cmluZykgewoJcmV0dXJuIEEyKAoJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJGVsbSRjb3JlJExpc3QkcmV2ZXJzZSwgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkc2VxdWVuY2UpLAoJCUEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCRFbmNvZGUkZW5jb2RlQ2h1bmtzLCBzdHJpbmcsIF9MaXN0X05pbCkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJEVuY29kZSR0b0J5dGVzID0gZnVuY3Rpb24gKHN0cmluZykgewoJcmV0dXJuIEEyKAoJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkZW5jb2RlLAoJCSRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCRFbmNvZGUkZW5jb2RlcihzdHJpbmcpKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCRCYXNlNjQkdG9CeXRlcyA9ICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCRFbmNvZGUkdG9CeXRlczsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uX2RlY29kZV9CeXRlcyA9IEEyKAoJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJJ0FzQmFzZTY0JywKCUEyKAoJCSRlbG0kanNvbiRKc29uJERlY29kZSRhbmRUaGVuLAoJCUEyKAoJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkQmFzZTY0JHRvQnl0ZXMsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCSRlbG0kY29yZSRNYXliZSRtYXAoJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQpLAoJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0KAoJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmYWlsKCdGYWlsZWQgdG8gZGVjb2RlIGJhc2U2NC4nKSkpKSwKCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV8yMTQ2MDUxNDg0ID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfRmlsZVRyZWVfRmlsZVRyZWVOb2RlKCRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uX2RlY29kZV9CeXRlcyk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRqc29uRGVjb2RlRmlsZVRyZWVOb2RlID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfMjE0NjA1MTQ4NDsKdmFyICRhdXRob3IkcHJvamVjdCRXb3Jrc3BhY2VTdGF0ZV8yMDIxXzAxJEFkZEJ5dGVzID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0FkZEJ5dGVzJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkV29ya3NwYWNlU3RhdGVfMjAyMV8wMSRSZW1vdmVCeXRlcyA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdSZW1vdmVCeXRlcycsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JFdvcmtzcGFjZVN0YXRlXzIwMjFfMDEkUmV1c2VCeXRlcyA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdSZXVzZUJ5dGVzJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9Xb3Jrc3BhY2VTdGF0ZV8yMDIxXzAxX0Jsb2JDaGFuZ2VTZXF1ZW5jZUVsZW1lbnQgPSAkZWxtJGpzb24kSnNvbiREZWNvZGUkb25lT2YoCglfTGlzdF9mcm9tQXJyYXkoCgkJWwoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknQWRkQnl0ZXMnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjApIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRXb3Jrc3BhY2VTdGF0ZV8yMDIxXzAxJEFkZEJ5dGVzLAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsIDAsICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uX2RlY29kZV9CeXRlcykpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknUmVtb3ZlQnl0ZXMnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRXb3Jrc3BhY2VTdGF0ZV8yMDIxXzAxJFJlbW92ZUJ5dGVzLAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsIDAsICRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpKTsKCQkJCX0pKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ1JldXNlQnl0ZXMnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjIpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRXb3Jrc3BhY2VTdGF0ZV8yMDIxXzAxJFJldXNlQnl0ZXMsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwgMCwgJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCkpOwoJCQkJfSkpCgkJXSkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfMjEzMDgwNTI1MiA9IEEyKAoJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJQTMoCgkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCSdkaWZmZXJlbmNlRnJvbUJhc2UnLAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWydEaWZmZXJlbmNlRnJvbUJhc2UnXSksCgkJQTIoCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJQTMoCgkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQknY2hhbmdlQmxvYnMnLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsnQ2hhbmdlQmxvYnMnXSksCgkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9fZ2VuZXJpY19MaXN0KAoJCQkJCUEzKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwMiwKCQkJCQkJRjIoCgkJCQkJCQlmdW5jdGlvbiAoaXRlbV8wLCBpdGVtXzEpIHsKCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihpdGVtXzAsIGl0ZW1fMSk7CgkJCQkJCQl9KSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkwLAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfX2dlbmVyaWNfTGlzdCgkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSksCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LAoJCQkJCQkJMSwKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX19nZW5lcmljX0xpc3QoJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfV29ya3NwYWNlU3RhdGVfMjAyMV8wMV9CbG9iQ2hhbmdlU2VxdWVuY2VFbGVtZW50KSkpKSksCgkJCUEyKAoJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJQTMoCgkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCSdyZW1vdmVOb2RlcycsCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbJ1JlbW92ZU5vZGVzJ10pLAoJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX19nZW5lcmljX0xpc3QoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX19nZW5lcmljX0xpc3QoJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZykpKSwKCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCUYyKAoJCQkJCQlmdW5jdGlvbiAocmVtb3ZlTm9kZXMsIGNoYW5nZUJsb2JzKSB7CgkJCQkJCQlyZXR1cm4ge2NoYW5nZUJsb2JzOiBjaGFuZ2VCbG9icywgcmVtb3ZlTm9kZXM6IHJlbW92ZU5vZGVzfTsKCQkJCQkJfSkpKSkpLAoJQTIoCgkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCUEzKAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCSdiYXNlJywKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWydCYXNlJ10pLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSwKCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJRjIoCgkJCQlmdW5jdGlvbiAoYmFzZSwgZGlmZmVyZW5jZUZyb21CYXNlKSB7CgkJCQkJcmV0dXJuIHtiYXNlOiBiYXNlLCBkaWZmZXJlbmNlRnJvbUJhc2U6IGRpZmZlcmVuY2VGcm9tQmFzZX07CgkJCQl9KSkpKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVXb3Jrc3BhY2VTdGF0ZV8yMDIxXzAxID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfMjEzMDgwNTI1MjsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJGpzb25EZWNvZGVXb3Jrc3BhY2VTdGF0ZURlc2NyaXB0aW9uID0gJGVsbSRqc29uJEpzb24kRGVjb2RlJG9uZU9mKAoJX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJExpdGVyYWxXb3Jrc3BhY2VTdGF0ZSwKCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLCAndmVyc2lvbl8yMDIwXzEyJywgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZUZpbGVUcmVlTm9kZSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5VcmwkRGlmZldvcmtzcGFjZVN0YXRlX1ZlcnNpb25fMjAyMV8wMSwKCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLCAndmVyc2lvbl8yMDIxXzAxJywgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZVdvcmtzcGFjZVN0YXRlXzIwMjFfMDEpKQoJCV0pKTsKdmFyICRlbG1fY29tbXVuaXR5JG1heWJlX2V4dHJhJE1heWJlJEV4dHJhJG9yRWxzZSA9IEYyKAoJZnVuY3Rpb24gKG1hLCBtYikgewoJCWlmIChtYi4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIG1hOwoJCX0gZWxzZSB7CgkJCXJldHVybiBtYjsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJHdvcmtzcGFjZVN0YXRlRGVmbGF0ZUJhc2U2NFF1ZXJ5UGFyYW1ldGVyTmFtZSA9ICd3b3Jrc3BhY2Utc3RhdGUtZGVmbGF0ZS1iYXNlNjQnOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5Vcmwkd29ya3NwYWNlU3RhdGVEZWZsYXRlQmFzZTY0UXVlcnlQYXJhbWV0ZXJOYW1lX09sZCA9ICdwcm9qZWN0LXN0YXRlLWRlZmxhdGUtYmFzZTY0JzsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJHdvcmtzcGFjZVN0YXRlUXVlcnlQYXJhbWV0ZXJOYW1lID0gJ3dvcmtzcGFjZS1zdGF0ZSc7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCR3b3Jrc3BhY2VTdGF0ZVF1ZXJ5UGFyYW1ldGVyTmFtZV9PbGQgPSAncHJvamVjdC1zdGF0ZSc7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCR3b3Jrc3BhY2VTdGF0ZVN0cmluZ1F1YWxpZmllc0FzTGluayA9IGZ1bmN0aW9uICh3b3Jrc3BhY2VTdGF0ZVN0cmluZykgewoJcmV0dXJuIEEyKCRlbG0kY29yZSRTdHJpbmckc3RhcnRzV2l0aCwgJ2h0dHBzOi8vJywgd29ya3NwYWNlU3RhdGVTdHJpbmcpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5Vcmwkd29ya3NwYWNlU3RhdGVEZXNjcmlwdGlvbkZyb21VcmwgPSBmdW5jdGlvbiAodXJsKSB7Cgl2YXIgc3RyaW5nRnJvbVF1ZXJ5UGFyYW1ldGVyTmFtZSA9IGZ1bmN0aW9uIChwYXJhbU5hbWUpIHsKCQlyZXR1cm4gJGVsbV9jb21tdW5pdHkkbWF5YmVfZXh0cmEkTWF5YmUkRXh0cmEkam9pbigKCQkJQTIoCgkJCQkkZWxtJHVybCRVcmwkUGFyc2VyJHBhcnNlLAoJCQkJQTIoCgkJCQkJJGVsbSR1cmwkVXJsJFBhcnNlciRxdWVzdGlvbk1hcmssCgkJCQkJJGVsbSR1cmwkVXJsJFBhcnNlciR0b3AsCgkJCQkJJGVsbSR1cmwkVXJsJFBhcnNlciRRdWVyeSRzdHJpbmcocGFyYW1OYW1lKSksCgkJCQlfVXRpbHNfdXBkYXRlKAoJCQkJCXVybCwKCQkJCQl7cGF0aDogJyd9KSkpOwoJfTsKCXZhciBjb250aW51ZVdpdGhXb3Jrc3BhY2VTdGF0ZVN0cmluZyA9IGZ1bmN0aW9uICh3b3Jrc3BhY2VTdGF0ZVN0cmluZykgewoJCXJldHVybiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCR3b3Jrc3BhY2VTdGF0ZVN0cmluZ1F1YWxpZmllc0FzTGluayh3b3Jrc3BhY2VTdGF0ZVN0cmluZykgPyAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCRMaW5rV29ya3NwYWNlU3RhdGUod29ya3NwYWNlU3RhdGVTdHJpbmcpKSA6IEEyKAoJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZXJyb3JUb1N0cmluZywKCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGRlY29kZVN0cmluZywgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5VcmwkanNvbkRlY29kZVdvcmtzcGFjZVN0YXRlRGVzY3JpcHRpb24sIHdvcmtzcGFjZVN0YXRlU3RyaW5nKSk7Cgl9OwoJdmFyIF92MCA9IEEyKAoJCSRlbG1fY29tbXVuaXR5JG1heWJlX2V4dHJhJE1heWJlJEV4dHJhJG9yRWxzZSwKCQlzdHJpbmdGcm9tUXVlcnlQYXJhbWV0ZXJOYW1lKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJHdvcmtzcGFjZVN0YXRlUXVlcnlQYXJhbWV0ZXJOYW1lX09sZCksCgkJc3RyaW5nRnJvbVF1ZXJ5UGFyYW1ldGVyTmFtZSgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCR3b3Jrc3BhY2VTdGF0ZVF1ZXJ5UGFyYW1ldGVyTmFtZSkpOwoJaWYgKF92MC4kID09PSAnSnVzdCcpIHsKCQl2YXIgd29ya3NwYWNlU3RhdGVTdHJpbmcgPSBfdjAuYTsKCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5Vcmwkd29ya3NwYWNlU3RhdGVTdHJpbmdRdWFsaWZpZXNBc0xpbmsod29ya3NwYWNlU3RhdGVTdHJpbmcpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCSRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCRMaW5rV29ya3NwYWNlU3RhdGUod29ya3NwYWNlU3RhdGVTdHJpbmcpKSkgOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJY29udGludWVXaXRoV29ya3NwYWNlU3RhdGVTdHJpbmcod29ya3NwYWNlU3RhdGVTdHJpbmcpKTsKCX0gZWxzZSB7CgkJdmFyIF92MSA9IEEyKAoJCQkkZWxtX2NvbW11bml0eSRtYXliZV9leHRyYSRNYXliZSRFeHRyYSRvckVsc2UsCgkJCXN0cmluZ0Zyb21RdWVyeVBhcmFtZXRlck5hbWUoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5Vcmwkd29ya3NwYWNlU3RhdGVEZWZsYXRlQmFzZTY0UXVlcnlQYXJhbWV0ZXJOYW1lX09sZCksCgkJCXN0cmluZ0Zyb21RdWVyeVBhcmFtZXRlck5hbWUoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5Vcmwkd29ya3NwYWNlU3RhdGVEZWZsYXRlQmFzZTY0UXVlcnlQYXJhbWV0ZXJOYW1lKSk7CgkJaWYgKF92MS4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCX0gZWxzZSB7CgkJCXZhciB3b3Jrc3BhY2VTdGF0ZURlZmxhdGVCYXNlNjQgPSBfdjEuYTsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJFJlc3VsdCRhbmRUaGVuLAoJCQkJCWNvbnRpbnVlV2l0aFdvcmtzcGFjZVN0YXRlU3RyaW5nLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JGFuZFRoZW4sCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21tb24kZGVjb2RlQnl0ZXNUb1N0cmluZywKCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkZnJvbU1heWJlKCdGYWlsZWQgdG8gZGVjb2RlIGJ5dGVzIHRvIHN0cmluZycpKSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JGFuZFRoZW4sCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRGbGF0ZSRpbmZsYXRlLAoJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkZnJvbU1heWJlKCdGYWlsZWQgdG8gaW5mbGF0ZScpKSwKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkZnJvbU1heWJlLAoJCQkJCQkJCSdGYWlsZWQgdG8gZGVjb2RlIGZyb20gYmFzZTY0JywKCQkJCQkJCQkkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEJhc2U2NCR0b0J5dGVzKHdvcmtzcGFjZVN0YXRlRGVmbGF0ZUJhc2U2NCkpKSkpKTsKCQl9Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCR3b3Jrc3BhY2VTdGF0ZUhhc2hRdWVyeVBhcmFtZXRlck5hbWUgPSAnd29ya3NwYWNlLWhhc2gnOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5Vcmwkd29ya3NwYWNlU3RhdGVIYXNoRnJvbVVybCA9IGZ1bmN0aW9uICh1cmwpIHsKCXJldHVybiAkZWxtX2NvbW11bml0eSRtYXliZV9leHRyYSRNYXliZSRFeHRyYSRqb2luKAoJCUEyKAoJCQkkZWxtJHVybCRVcmwkUGFyc2VyJHBhcnNlLAoJCQlBMigKCQkJCSRlbG0kdXJsJFVybCRQYXJzZXIkcXVlc3Rpb25NYXJrLAoJCQkJJGVsbSR1cmwkVXJsJFBhcnNlciR0b3AsCgkJCQkkZWxtJHVybCRVcmwkUGFyc2VyJFF1ZXJ5JHN0cmluZygkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCR3b3Jrc3BhY2VTdGF0ZUhhc2hRdWVyeVBhcmFtZXRlck5hbWUpKSwKCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCXVybCwKCQkJCXtwYXRoOiAnJ30pKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRwcm9jZXNzRXZlbnRVcmxDaGFuZ2VkID0gRjIoCglmdW5jdGlvbiAodXJsLCBzdGF0ZUJlZm9yZSkgewoJCXZhciB3b3Jrc3BhY2VTdGF0ZUV4cGVjdGVkQ29tcG9zaXRpb25IYXNoID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5Vcmwkd29ya3NwYWNlU3RhdGVIYXNoRnJvbVVybCh1cmwpOwoJCXZhciB3b3Jrc3BhY2VXaXRoTWF0Y2hpbmdTdGF0ZUhhc2hBbHJlYWR5TG9hZGVkID0gZnVuY3Rpb24gKF92MykgewoJCQl2YXIgX3YyID0gc3RhdGVCZWZvcmUud29ya3NwYWNlOwoJCQlpZiAoX3YyLiQgPT09ICdXb3Jrc3BhY2VBY3RpdmUnKSB7CgkJCQl2YXIgd29ya3NwYWNlQWN0aXZlID0gX3YyLmE7CgkJCQlyZXR1cm4gX1V0aWxzX2VxKAoJCQkJCSRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCR3b3Jrc3BhY2VTdGF0ZUNvbXBvc2l0aW9uSGFzaCgKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJG1hcEJsb2JzVG9CeXRlcyh3b3Jrc3BhY2VBY3RpdmUuZmlsZVRyZWUpKSksCgkJCQkJd29ya3NwYWNlU3RhdGVFeHBlY3RlZENvbXBvc2l0aW9uSGFzaCk7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQl9OwoJCXZhciBmaWxlUGF0aFRvT3BlbiA9IEEyKAoJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQlBMigKCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkkZWxtJGNvcmUkU3RyaW5nJHNwbGl0KCcvJyksCgkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAoCgkJCQkJJGVsbSRjb3JlJFN0cmluZyRzcGxpdCgnXFwnKSkpLAoJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCRmaWxlUGF0aFRvT3BlbkZyb21VcmwodXJsKSk7CgkJdmFyIGNvbnRpbnVlV2l0aERpZmZXb3Jrc3BhY2VTdGF0ZSA9IEEyKAoJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR1cGRhdGVUb0JlZ2luTG9hZFdvcmtzcGFjZVN0YXRlLAoJCQl7ZmlsZVBhdGhUb09wZW46IGZpbGVQYXRoVG9PcGVuLCB3b3Jrc3BhY2VTdGF0ZUV4cGVjdGVkQ29tcG9zaXRpb25IYXNoOiB3b3Jrc3BhY2VTdGF0ZUV4cGVjdGVkQ29tcG9zaXRpb25IYXNofSwKCQkJc3RhdGVCZWZvcmUpOwoJCXZhciBfdjAgPSAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCR3b3Jrc3BhY2VTdGF0ZURlc2NyaXB0aW9uRnJvbVVybCh1cmwpOwoJCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCX0gZWxzZSB7CgkJCWlmIChfdjAuYS4kID09PSAnRXJyJykgewoJCQkJdmFyIGZyb21VcmxFcnJvciA9IF92MC5hLmE7CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQlfVXRpbHNfdXBkYXRlKAoJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJewoJCQkJCQkJd29ya3NwYWNlOiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRXb3Jrc3BhY2VFcnIoJ0ZhaWxlZCB0byBkZWNvZGUgd29ya3NwYWNlIHN0YXRlIGZyb20gVVJMOiAnICsgZnJvbVVybEVycm9yKQoJCQkJCQl9KSwKCQkJCQkkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQl9IGVsc2UgewoJCQkJdmFyIHdvcmtzcGFjZURlc2NyaXB0aW9uID0gX3YwLmEuYTsKCQkJCWlmICh3b3Jrc3BhY2VXaXRoTWF0Y2hpbmdTdGF0ZUhhc2hBbHJlYWR5TG9hZGVkKF9VdGlsc19UdXBsZTApKSB7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoc3RhdGVCZWZvcmUsICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQl9IGVsc2UgewoJCQkJCXN3aXRjaCAod29ya3NwYWNlRGVzY3JpcHRpb24uJCkgewoJCQkJCQljYXNlICdMaXRlcmFsV29ya3NwYWNlU3RhdGUnOgoJCQkJCQkJdmFyIGZpbGVUcmVlRnJvbVVybCA9IHdvcmtzcGFjZURlc2NyaXB0aW9uLmE7CgkJCQkJCQlyZXR1cm4gQTQoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdXBkYXRlRm9yTG9hZGVkV29ya3NwYWNlU3RhdGUsCgkJCQkJCQkJe2V4cGVjdGVkQ29tcG9zaXRpb25IYXNoOiB3b3Jrc3BhY2VTdGF0ZUV4cGVjdGVkQ29tcG9zaXRpb25IYXNoLCBmaWxlUGF0aFRvT3BlbjogZmlsZVBhdGhUb09wZW59LAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJG1hcEJsb2JzRnJvbUJ5dGVzKGZpbGVUcmVlRnJvbVVybCksCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JFdvcmtzcGFjZVN0YXRlXzIwMjFfMDEkbm9EaWZmZXJlbmNlLAoJCQkJCQkJCXN0YXRlQmVmb3JlKTsKCQkJCQkJY2FzZSAnTGlua1dvcmtzcGFjZVN0YXRlJzoKCQkJCQkJCXZhciBsaW5rVG9Xb3Jrc3BhY2VTdGF0ZSA9IHdvcmtzcGFjZURlc2NyaXB0aW9uLmE7CgkJCQkJCQlyZXR1cm4gY29udGludWVXaXRoRGlmZldvcmtzcGFjZVN0YXRlKAoJCQkJCQkJCXtiYXNlOiBsaW5rVG9Xb3Jrc3BhY2VTdGF0ZSwgZGlmZmVyZW5jZUZyb21CYXNlOiAkYXV0aG9yJHByb2plY3QkV29ya3NwYWNlU3RhdGVfMjAyMV8wMSRub0RpZmZlcmVuY2V9KTsKCQkJCQkJZGVmYXVsdDoKCQkJCQkJCXZhciBkaWZmV29ya3NwYWNlU3RhdGUgPSB3b3Jrc3BhY2VEZXNjcmlwdGlvbi5hOwoJCQkJCQkJcmV0dXJuIGNvbnRpbnVlV2l0aERpZmZXb3Jrc3BhY2VTdGF0ZShkaWZmV29ya3NwYWNlU3RhdGUpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRicm93c2VyJEJyb3dzZXIkTmF2aWdhdGlvbiRwdXNoVXJsID0gX0Jyb3dzZXJfcHVzaFVybDsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRGbGF0ZSREeW5hbWljID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0R5bmFtaWMnLCBhOiBhfTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRGbGF0ZSRTdGF0aWMgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnU3RhdGljJywgYTogYX07Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRmxhdGUkV2l0aFdpbmRvd1NpemUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnV2l0aFdpbmRvd1NpemUnLCBhOiBhfTsKfTsKdmFyICRlbG0kdXJsJFVybCRCdWlsZGVyJGNyb3NzT3JpZ2luID0gRjMoCglmdW5jdGlvbiAocHJlUGF0aCwgcGF0aFNlZ21lbnRzLCBwYXJhbWV0ZXJzKSB7CgkJcmV0dXJuIHByZVBhdGggKyAoJy8nICsgKEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy8nLCBwYXRoU2VnbWVudHMpICsgJGVsbSR1cmwkVXJsJEJ1aWxkZXIkdG9RdWVyeShwYXJhbWV0ZXJzKSkpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRjaHVua3NIZWxwID0gRjIoCglmdW5jdGlvbiAoY2h1bmtTaXplLCBfdjApIHsKCQl2YXIgc2l6ZVJlbWFpbmluZyA9IF92MC5hOwoJCXZhciBhY2N1bSA9IF92MC5iOwoJCXJldHVybiAoIXNpemVSZW1haW5pbmcpID8gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkc3VjY2VlZCgKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRG9uZShfTGlzdF9OaWwpKSA6ICgoX1V0aWxzX2NtcChjaHVua1NpemUsIHNpemVSZW1haW5pbmcpID4gLTEpID8gQTIoCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcCwKCQkJZnVuY3Rpb24gKF9uZXcpIHsKCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSREb25lKAoJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCV9VdGlsc19UdXBsZTIodHJ1ZSwgX25ldyksCgkJCQkJCQlhY2N1bSkpKTsKCQkJfSwKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkYnl0ZXMoc2l6ZVJlbWFpbmluZykpIDogQTIoCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcCwKCQkJZnVuY3Rpb24gKF9uZXcpIHsKCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRMb29wKAoJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCXNpemVSZW1haW5pbmcgLSBjaHVua1NpemUsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCV9VdGlsc19UdXBsZTIoZmFsc2UsIF9uZXcpLAoJCQkJCQkJYWNjdW0pKSk7CgkJCX0sCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGJ5dGVzKGNodW5rU2l6ZSkpKTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkSW50ZXJuYWwkY2h1bmtzID0gRjIoCglmdW5jdGlvbiAoY2h1bmtTaXplLCBidWZmZXIpIHsKCQl2YXIgX3YwID0gQTIoCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGRlY29kZSwKCQkJQTIoCgkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRsb29wLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJHdpZHRoKGJ1ZmZlciksCgkJCQkJX0xpc3RfTmlsKSwKCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEludGVybmFsJGNodW5rc0hlbHAoY2h1bmtTaXplKSksCgkJCWJ1ZmZlcik7CgkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCXRydWUsCgkJCQkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkZW5jb2RlKAoJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRzZXF1ZW5jZShfTGlzdF9OaWwpKSkKCQkJCV0pOwoJCX0gZWxzZSB7CgkJCWlmICghX3YwLmEuYikgewoJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCXRydWUsCgkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJGVuY29kZSgKCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHNlcXVlbmNlKF9MaXN0X05pbCkpKQoJCQkJCV0pOwoJCQl9IGVsc2UgewoJCQkJdmFyIHZhbHVlID0gX3YwLmE7CgkJCQlyZXR1cm4gdmFsdWU7CgkJCX0KCQl9Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEludGVybmFsJGRlZmF1bHRfYmxvY2tfc2l6ZSA9IDEwMjQgKiAxMDI0Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJGVtcHR5ID0ge2JpdHNXcml0dGVuOiAwLCBlbmNvZGVyczogX0xpc3RfTmlsLCB0YWc6IDB9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJGNvZGUgPSBmdW5jdGlvbiAoc3ltYm9sKSB7Cglzd2l0Y2ggKHN5bWJvbC4kKSB7CgkJY2FzZSAnTGl0ZXJhbCc6CgkJCXZhciBfYnl0ZSA9IHN5bWJvbC5hOwoJCQlyZXR1cm4gX2J5dGU7CgkJY2FzZSAnRW5kT2ZCbG9jayc6CgkJCXJldHVybiAyNTY7CgkJZGVmYXVsdDoKCQkJdmFyIGxlbmd0aCA9IHN5bWJvbC5hOwoJCQlyZXR1cm4gKChsZW5ndGggPj0gMykgJiYgKGxlbmd0aCA8PSAxMCkpID8gKCgyNTcgKyBsZW5ndGgpIC0gMykgOiAoKChsZW5ndGggPj0gMTEpICYmIChsZW5ndGggPD0gMTgpKSA/ICgyNjUgKyAoKChsZW5ndGggLSAxMSkgLyAyKSB8IDApKSA6ICgoKGxlbmd0aCA+PSAxOSkgJiYgKGxlbmd0aCA8PSAzNCkpID8gKDI2OSArICgoKGxlbmd0aCAtIDE5KSAvIDQpIHwgMCkpIDogKCgobGVuZ3RoID49IDM1KSAmJiAobGVuZ3RoIDw9IDY2KSkgPyAoMjczICsgKCgobGVuZ3RoIC0gMzUpIC8gOCkgfCAwKSkgOiAoKChsZW5ndGggPj0gNjcpICYmIChsZW5ndGggPD0gMTMwKSkgPyAoMjc3ICsgKCgobGVuZ3RoIC0gNjcpIC8gMTYpIHwgMCkpIDogKCgobGVuZ3RoID49IDEzMSkgJiYgKGxlbmd0aCA8PSAyNTcpKSA/ICgyODEgKyAoKChsZW5ndGggLSAxMzEpIC8gMzIpIHwgMCkpIDogKChsZW5ndGggPT09IDI1OCkgPyAyODUgOiAoLTEpKSkpKSkpOwoJfQp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJGRpc3RhbmNlID0gZnVuY3Rpb24gKHN5bWJvbCkgewoJaWYgKHN5bWJvbC4kID09PSAnU2hhcmUnKSB7CgkJdmFyIGRpc3RhbmNlXyA9IHN5bWJvbC5iOwoJCWlmIChkaXN0YW5jZV8gPD0gNCkgewoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQlfVXRpbHNfVHVwbGUzKGRpc3RhbmNlXyAtIDEsIDAsIDApKTsKCQl9IGVsc2UgewoJCQl2YXIgZ28gPSBGMygKCQkJCWZ1bmN0aW9uIChleHRyYUJpdHMsIGNvZGVfLCBiYXNlKSB7CgkJCQkJZ286CgkJCQkJd2hpbGUgKHRydWUpIHsKCQkJCQkJaWYgKF9VdGlsc19jbXAoYmFzZSAqIDIsIGRpc3RhbmNlXykgPCAwKSB7CgkJCQkJCQl2YXIgJHRlbXAkZXh0cmFCaXRzID0gZXh0cmFCaXRzICsgMSwKCQkJCQkJCQkkdGVtcCRjb2RlXyA9IGNvZGVfICsgMiwKCQkJCQkJCQkkdGVtcCRiYXNlID0gYmFzZSAqIDI7CgkJCQkJCQlleHRyYUJpdHMgPSAkdGVtcCRleHRyYUJpdHM7CgkJCQkJCQljb2RlXyA9ICR0ZW1wJGNvZGVfOwoJCQkJCQkJYmFzZSA9ICR0ZW1wJGJhc2U7CgkJCQkJCQljb250aW51ZSBnbzsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUzKGV4dHJhQml0cywgY29kZV8sIGJhc2UpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSk7CgkJCXZhciBfdjEgPSBBMyhnbywgMSwgNCwgNCk7CgkJCXZhciBleHRyYUJpdHMgPSBfdjEuYTsKCQkJdmFyIGNvZGVfID0gX3YxLmI7CgkJCXZhciBiYXNlID0gX3YxLmM7CgkJCXZhciBkZWx0YSA9IChkaXN0YW5jZV8gLSBiYXNlKSAtIDE7CgkJCXZhciBoYWxmID0gKGJhc2UgLyAyKSB8IDA7CgkJCXJldHVybiAoX1V0aWxzX2NtcChkaXN0YW5jZV8sIGJhc2UgKyBoYWxmKSA8IDEpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQlfVXRpbHNfVHVwbGUzKAoJCQkJCWNvZGVfLAoJCQkJCWV4dHJhQml0cywKCQkJCQlBMigkZWxtJGNvcmUkQmFzaWNzJG1vZEJ5LCBoYWxmLCBkZWx0YSkpKSA6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJX1V0aWxzX1R1cGxlMygKCQkJCQljb2RlXyArIDEsCgkJCQkJZXh0cmFCaXRzLAoJCQkJCUEyKCRlbG0kY29yZSRCYXNpY3MkbW9kQnksIGhhbGYsIGRlbHRhKSkpOwoJCX0KCX0gZWxzZSB7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfQp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJHVwZGF0ZSA9IEYzKAoJZnVuY3Rpb24gKGluZGV4LCB0YWdnZXIsIGFycmF5KSB7CgkJdmFyIF92MCA9IEEyKCRlbG0kY29yZSRBcnJheSRnZXQsIGluZGV4LCBhcnJheSk7CgkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIGFycmF5OwoJCX0gZWxzZSB7CgkJCXZhciB2YWx1ZSA9IF92MC5hOwoJCQlyZXR1cm4gQTMoCgkJCQkkZWxtJGNvcmUkQXJyYXkkc2V0LAoJCQkJaW5kZXgsCgkJCQl0YWdnZXIodmFsdWUpLAoJCQkJYXJyYXkpOwoJCX0KCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJGR5bmFtaWNGaW5kRnJlcXVlbmNpZXMgPSBGMigKCWZ1bmN0aW9uIChzeW1ib2wsIF92MCkgewoJCXZhciBsaXRlcmFsQ291bnRzID0gX3YwLmE7CgkJdmFyIGRpc3RhbmNlQ291bnRzID0gX3YwLmI7CgkJdmFyIGVtcHR5RGlzdGFuY2VDb3VudCA9IF92MC5jOwoJCXZhciBfdjEgPSAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkZGlzdGFuY2Uoc3ltYm9sKTsKCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMygKCQkJCUEzKAoJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJFN5bWJvbCR1cGRhdGUsCgkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJGNvZGUoc3ltYm9sKSwKCQkJCQlmdW5jdGlvbiAodikgewoJCQkJCQlyZXR1cm4gdiArIDE7CgkJCQkJfSwKCQkJCQlsaXRlcmFsQ291bnRzKSwKCQkJCWRpc3RhbmNlQ291bnRzLAoJCQkJZW1wdHlEaXN0YW5jZUNvdW50KTsKCQl9IGVsc2UgewoJCQl2YXIgX3YyID0gX3YxLmE7CgkJCXZhciBkID0gX3YyLmE7CgkJCXJldHVybiBfVXRpbHNfVHVwbGUzKAoJCQkJQTMoCgkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJHVwZGF0ZSwKCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkY29kZShzeW1ib2wpLAoJCQkJCWZ1bmN0aW9uICh2KSB7CgkJCQkJCXJldHVybiB2ICsgMTsKCQkJCQl9LAoJCQkJCWxpdGVyYWxDb3VudHMpLAoJCQkJQTMoCgkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJHVwZGF0ZSwKCQkJCQlkLAoJCQkJCWZ1bmN0aW9uICh2KSB7CgkJCQkJCXJldHVybiB2ICsgMTsKCQkJCQl9LAoJCQkJCWRpc3RhbmNlQ291bnRzKSwKCQkJCWZhbHNlKTsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JHNvcnRXaXRoID0gX0xpc3Rfc29ydFdpdGg7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSHVmZm1hbiRjYWxjT3B0aW1hbE1heEJpdFdpZHRoID0gZnVuY3Rpb24gKGZyZXF1ZW5jaWVzKSB7Cgl2YXIgaGVhcE1vZGlmaWNhdGlvbkxvb3AgPSBmdW5jdGlvbiAoaGVhcCkgewoJCWhlYXBNb2RpZmljYXRpb25Mb29wOgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmICghaGVhcC5iKSB7CgkJCQlyZXR1cm4gMDsKCQkJfSBlbHNlIHsKCQkJCWlmICghaGVhcC5iLmIpIHsKCQkJCQl2YXIgX3YxID0gaGVhcC5hOwoJCQkJCXZhciB2YWx1ZSA9IF92MS5iOwoJCQkJCXJldHVybiBBMigkZWxtJGNvcmUkQmFzaWNzJG1heCwgMSwgdmFsdWUpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YyID0gaGVhcC5hOwoJCQkJCXZhciB3ZWlnaHQxID0gX3YyLmE7CgkJCQkJdmFyIHdpZHRoMSA9IF92Mi5iOwoJCQkJCXZhciBfdjMgPSBoZWFwLmI7CgkJCQkJdmFyIF92NCA9IF92My5hOwoJCQkJCXZhciB3ZWlnaHQyID0gX3Y0LmE7CgkJCQkJdmFyIHdpZHRoMiA9IF92NC5iOwoJCQkJCXZhciByZXN0ID0gX3YzLmI7CgkJCQkJdmFyICR0ZW1wJGhlYXAgPSBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3Qkc29ydFdpdGgsCgkJCQkJCUYyKAoJCQkJCQkJZnVuY3Rpb24gKGEsIGIpIHsKCQkJCQkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wYXJlLCBiLCBhKTsKCQkJCQkJCX0pLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCXdlaWdodDEgKyB3ZWlnaHQyLAoJCQkJCQkJCTEgKyBBMigkZWxtJGNvcmUkQmFzaWNzJG1heCwgd2lkdGgxLCB3aWR0aDIpKSwKCQkJCQkJCXJlc3QpKTsKCQkJCQloZWFwID0gJHRlbXAkaGVhcDsKCQkJCQljb250aW51ZSBoZWFwTW9kaWZpY2F0aW9uTG9vcDsKCQkJCX0KCQkJfQoJCX0KCX07Cgl2YXIgY3JlYXRlSGVhcEZvbGRlciA9IEYyKAoJCWZ1bmN0aW9uIChmcmVxLCBoZWFwKSB7CgkJCXJldHVybiAoZnJlcSA+IDApID8gQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJX1V0aWxzX1R1cGxlMigtZnJlcSwgMCksCgkJCQloZWFwKSA6IGhlYXA7CgkJfSk7Cgl2YXIgY3JlYXRlSGVhcCA9IEEzKCRlbG0kY29yZSRBcnJheSRmb2xkbCwgY3JlYXRlSGVhcEZvbGRlciwgX0xpc3RfTmlsLCBmcmVxdWVuY2llcyk7CglyZXR1cm4gaGVhcE1vZGlmaWNhdGlvbkxvb3AoY3JlYXRlSGVhcCk7Cn07CnZhciAkZWxtJGNvcmUkQXJyYXkkZmlsdGVyID0gRjIoCglmdW5jdGlvbiAoaXNHb29kLCBhcnJheSkgewoJCXJldHVybiAkZWxtJGNvcmUkQXJyYXkkZnJvbUxpc3QoCgkJCUEzKAoJCQkJJGVsbSRjb3JlJEFycmF5JGZvbGRyLAoJCQkJRjIoCgkJCQkJZnVuY3Rpb24gKHgsIHhzKSB7CgkJCQkJCXJldHVybiBpc0dvb2QoeCkgPyBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCB4LCB4cykgOiB4czsKCQkJCQl9KSwKCQkJCV9MaXN0X05pbCwKCQkJCWFycmF5KSk7Cgl9KTsKdmFyICRlbG0kY29yZSRFbG0kSnNBcnJheSRpbmRleGVkTWFwID0gX0pzQXJyYXlfaW5kZXhlZE1hcDsKdmFyICRlbG0kY29yZSRBcnJheSRpbmRleGVkTWFwID0gRjIoCglmdW5jdGlvbiAoZnVuYywgX3YwKSB7CgkJdmFyIGxlbiA9IF92MC5hOwoJCXZhciB0cmVlID0gX3YwLmM7CgkJdmFyIHRhaWwgPSBfdjAuZDsKCQl2YXIgaW5pdGlhbEJ1aWxkZXIgPSB7CgkJCW5vZGVMaXN0OiBfTGlzdF9OaWwsCgkJCW5vZGVMaXN0U2l6ZTogMCwKCQkJdGFpbDogQTMoCgkJCQkkZWxtJGNvcmUkRWxtJEpzQXJyYXkkaW5kZXhlZE1hcCwKCQkJCWZ1bmMsCgkJCQkkZWxtJGNvcmUkQXJyYXkkdGFpbEluZGV4KGxlbiksCgkJCQl0YWlsKQoJCX07CgkJdmFyIGhlbHBlciA9IEYyKAoJCQlmdW5jdGlvbiAobm9kZSwgYnVpbGRlcikgewoJCQkJaWYgKG5vZGUuJCA9PT0gJ1N1YlRyZWUnKSB7CgkJCQkJdmFyIHN1YlRyZWUgPSBub2RlLmE7CgkJCQkJcmV0dXJuIEEzKCRlbG0kY29yZSRFbG0kSnNBcnJheSRmb2xkbCwgaGVscGVyLCBidWlsZGVyLCBzdWJUcmVlKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGxlYWYgPSBub2RlLmE7CgkJCQkJdmFyIG9mZnNldCA9IGJ1aWxkZXIubm9kZUxpc3RTaXplICogJGVsbSRjb3JlJEFycmF5JGJyYW5jaEZhY3RvcjsKCQkJCQl2YXIgbWFwcGVkTGVhZiA9ICRlbG0kY29yZSRBcnJheSRMZWFmKAoJCQkJCQlBMygkZWxtJGNvcmUkRWxtJEpzQXJyYXkkaW5kZXhlZE1hcCwgZnVuYywgb2Zmc2V0LCBsZWFmKSk7CgkJCQkJcmV0dXJuIHsKCQkJCQkJbm9kZUxpc3Q6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIG1hcHBlZExlYWYsIGJ1aWxkZXIubm9kZUxpc3QpLAoJCQkJCQlub2RlTGlzdFNpemU6IGJ1aWxkZXIubm9kZUxpc3RTaXplICsgMSwKCQkJCQkJdGFpbDogYnVpbGRlci50YWlsCgkJCQkJfTsKCQkJCX0KCQkJfSk7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkQXJyYXkkYnVpbGRlclRvQXJyYXksCgkJCXRydWUsCgkJCUEzKCRlbG0kY29yZSRFbG0kSnNBcnJheSRmb2xkbCwgaGVscGVyLCBpbml0aWFsQnVpbGRlciwgdHJlZSkpOwoJfSk7CnZhciAkZWxtJGNvcmUkRWxtJEpzQXJyYXkkbWFwID0gX0pzQXJyYXlfbWFwOwp2YXIgJGVsbSRjb3JlJEFycmF5JG1hcCA9IEYyKAoJZnVuY3Rpb24gKGZ1bmMsIF92MCkgewoJCXZhciBsZW4gPSBfdjAuYTsKCQl2YXIgc3RhcnRTaGlmdCA9IF92MC5iOwoJCXZhciB0cmVlID0gX3YwLmM7CgkJdmFyIHRhaWwgPSBfdjAuZDsKCQl2YXIgaGVscGVyID0gZnVuY3Rpb24gKG5vZGUpIHsKCQkJaWYgKG5vZGUuJCA9PT0gJ1N1YlRyZWUnKSB7CgkJCQl2YXIgc3ViVHJlZSA9IG5vZGUuYTsKCQkJCXJldHVybiAkZWxtJGNvcmUkQXJyYXkkU3ViVHJlZSgKCQkJCQlBMigkZWxtJGNvcmUkRWxtJEpzQXJyYXkkbWFwLCBoZWxwZXIsIHN1YlRyZWUpKTsKCQkJfSBlbHNlIHsKCQkJCXZhciB2YWx1ZXMgPSBub2RlLmE7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJEFycmF5JExlYWYoCgkJCQkJQTIoJGVsbSRjb3JlJEVsbSRKc0FycmF5JG1hcCwgZnVuYywgdmFsdWVzKSk7CgkJCX0KCQl9OwoJCXJldHVybiBBNCgKCQkJJGVsbSRjb3JlJEFycmF5JEFycmF5X2VsbV9idWlsdGluLAoJCQlsZW4sCgkJCXN0YXJ0U2hpZnQsCgkJCUEyKCRlbG0kY29yZSRFbG0kSnNBcnJheSRtYXAsIGhlbHBlciwgdHJlZSksCgkJCUEyKCRlbG0kY29yZSRFbG0kSnNBcnJheSRtYXAsIGZ1bmMsIHRhaWwpKTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJExlbmd0aExpbWl0ZWRIdWZmbWFuQ29kZXMkbWVyZ2VMb29wID0gRjMoCglmdW5jdGlvbiAoeGFyciwgeWFyciwgYWNjdW0pIHsKCQltZXJnZUxvb3A6CgkJd2hpbGUgKHRydWUpIHsKCQkJdmFyIF92MCA9IF9VdGlsc19UdXBsZTIoeGFyciwgeWFycik7CgkJCWlmICghX3YwLmEuYikgewoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRBcnJheSRhcHBlbmQsCgkJCQkJYWNjdW0sCgkJCQkJJGVsbSRjb3JlJEFycmF5JGZyb21MaXN0KHlhcnIpKTsKCQkJfSBlbHNlIHsKCQkJCWlmICghX3YwLmIuYikgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJEFycmF5JGFwcGVuZCwKCQkJCQkJYWNjdW0sCgkJCQkJCSRlbG0kY29yZSRBcnJheSRmcm9tTGlzdCh4YXJyKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfdjEgPSBfdjAuYTsKCQkJCQl2YXIgeCA9IF92MS5hOwoJCQkJCXZhciB4cmVzdCA9IF92MS5iOwoJCQkJCXZhciBfdjIgPSBfdjAuYjsKCQkJCQl2YXIgeSA9IF92Mi5hOwoJCQkJCXZhciB5cmVzdCA9IF92Mi5iOwoJCQkJCWlmIChfVXRpbHNfY21wKHgud2VpZ2h0LCB5LndlaWdodCkgPCAwKSB7CgkJCQkJCXZhciAkdGVtcCR4YXJyID0geHJlc3QsCgkJCQkJCQkkdGVtcCR5YXJyID0geWFyciwKCQkJCQkJCSR0ZW1wJGFjY3VtID0gQTIoJGVsbSRjb3JlJEFycmF5JHB1c2gsIHgsIGFjY3VtKTsKCQkJCQkJeGFyciA9ICR0ZW1wJHhhcnI7CgkJCQkJCXlhcnIgPSAkdGVtcCR5YXJyOwoJCQkJCQlhY2N1bSA9ICR0ZW1wJGFjY3VtOwoJCQkJCQljb250aW51ZSBtZXJnZUxvb3A7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyICR0ZW1wJHhhcnIgPSB4YXJyLAoJCQkJCQkJJHRlbXAkeWFyciA9IHlyZXN0LAoJCQkJCQkJJHRlbXAkYWNjdW0gPSBBMigkZWxtJGNvcmUkQXJyYXkkcHVzaCwgeSwgYWNjdW0pOwoJCQkJCQl4YXJyID0gJHRlbXAkeGFycjsKCQkJCQkJeWFyciA9ICR0ZW1wJHlhcnI7CgkJCQkJCWFjY3VtID0gJHRlbXAkYWNjdW07CgkJCQkJCWNvbnRpbnVlIG1lcmdlTG9vcDsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMZW5ndGhMaW1pdGVkSHVmZm1hbkNvZGVzJG1lcmdlID0gRjIoCglmdW5jdGlvbiAoeCwgeSkgewoJCXJldHVybiBBMygKCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJExlbmd0aExpbWl0ZWRIdWZmbWFuQ29kZXMkbWVyZ2VMb29wLAoJCQkkZWxtJGNvcmUkQXJyYXkkdG9MaXN0KHgpLAoJCQkkZWxtJGNvcmUkQXJyYXkkdG9MaXN0KHkpLAoJCQkkZWxtJGNvcmUkQXJyYXkkZW1wdHkpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkTGVuZ3RoTGltaXRlZEh1ZmZtYW5Db2RlcyRtZXJnZU5vZGVzID0gRjIoCglmdW5jdGlvbiAobm9kZTEsIG5vZGUyKSB7CgkJcmV0dXJuIHsKCQkJc3ltYm9sczogQTIoJGVsbSRjb3JlJEFycmF5JGFwcGVuZCwgbm9kZTEuc3ltYm9scywgbm9kZTIuc3ltYm9scyksCgkJCXdlaWdodDogbm9kZTEud2VpZ2h0ICsgbm9kZTIud2VpZ2h0CgkJfTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJExlbmd0aExpbWl0ZWRIdWZmbWFuQ29kZXMkcGFja2FnZSA9IGZ1bmN0aW9uIChub2RlcykgewoJaWYgKCRlbG0kY29yZSRBcnJheSRsZW5ndGgobm9kZXMpID49IDIpIHsKCQl2YXIgbmV3TGVuID0gKCRlbG0kY29yZSRBcnJheSRsZW5ndGgobm9kZXMpIC8gMikgfCAwOwoJCXZhciBsb29wID0gRjIoCgkJCWZ1bmN0aW9uIChjdXJyZW50Tm9kZXMsIGFjY3VtKSB7CgkJCQlsb29wOgoJCQkJd2hpbGUgKHRydWUpIHsKCQkJCQlpZiAoY3VycmVudE5vZGVzLmIgJiYgY3VycmVudE5vZGVzLmIuYikgewoJCQkJCQl2YXIgc2VsZiA9IGN1cnJlbnROb2Rlcy5hOwoJCQkJCQl2YXIgX3YxID0gY3VycmVudE5vZGVzLmI7CgkJCQkJCXZhciBvdGhlciA9IF92MS5hOwoJCQkJCQl2YXIgcmVzdCA9IF92MS5iOwoJCQkJCQl2YXIgJHRlbXAkY3VycmVudE5vZGVzID0gcmVzdCwKCQkJCQkJCSR0ZW1wJGFjY3VtID0gQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJExlbmd0aExpbWl0ZWRIdWZmbWFuQ29kZXMkbWVyZ2VOb2Rlcywgc2VsZiwgb3RoZXIpLAoJCQkJCQkJYWNjdW0pOwoJCQkJCQljdXJyZW50Tm9kZXMgPSAkdGVtcCRjdXJyZW50Tm9kZXM7CgkJCQkJCWFjY3VtID0gJHRlbXAkYWNjdW07CgkJCQkJCWNvbnRpbnVlIGxvb3A7CgkJCQkJfSBlbHNlIHsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRBcnJheSRmcm9tTGlzdCgKCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoYWNjdW0pKTsKCQkJCQl9CgkJCQl9CgkJCX0pOwoJCXJldHVybiBBMigKCQkJbG9vcCwKCQkJJGVsbSRjb3JlJEFycmF5JHRvTGlzdChub2RlcyksCgkJCV9MaXN0X05pbCk7Cgl9IGVsc2UgewoJCXJldHVybiBub2RlczsKCX0KfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMZW5ndGhMaW1pdGVkSHVmZm1hbkNvZGVzJHNpbmdsZXRvbk5vZGUgPSBGMigKCWZ1bmN0aW9uIChzeW1ib2wsIHdlaWdodCkgewoJCXJldHVybiB7CgkJCXN5bWJvbHM6IEEyKCRlbG0kY29yZSRBcnJheSRyZXBlYXQsIDEsIHN5bWJvbCksCgkJCXdlaWdodDogd2VpZ2h0CgkJfTsKCX0pOwp2YXIgJGVsbV9jb21tdW5pdHkkbGlzdF9leHRyYSRMaXN0JEV4dHJhJHN0YWJsZVNvcnRXaXRoID0gRjIoCglmdW5jdGlvbiAocHJlZCwgbGlzdCkgewoJCXZhciBwcmVkV2l0aEluZGV4ID0gRjIoCgkJCWZ1bmN0aW9uIChfdjEsIF92MikgewoJCQkJdmFyIGExID0gX3YxLmE7CgkJCQl2YXIgaTEgPSBfdjEuYjsKCQkJCXZhciBhMiA9IF92Mi5hOwoJCQkJdmFyIGkyID0gX3YyLmI7CgkJCQl2YXIgcmVzdWx0ID0gQTIocHJlZCwgYTEsIGEyKTsKCQkJCWlmIChyZXN1bHQuJCA9PT0gJ0VRJykgewoJCQkJCXJldHVybiBBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBhcmUsIGkxLCBpMik7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiByZXN1bHQ7CgkJCQl9CgkJCX0pOwoJCXZhciBsaXN0V2l0aEluZGV4ID0gQTIoCgkJCSRlbG0kY29yZSRMaXN0JGluZGV4ZWRNYXAsCgkJCUYyKAoJCQkJZnVuY3Rpb24gKGksIGEpIHsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihhLCBpKTsKCQkJCX0pLAoJCQlsaXN0KTsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJJGVsbSRjb3JlJFR1cGxlJGZpcnN0LAoJCQlBMigkZWxtJGNvcmUkTGlzdCRzb3J0V2l0aCwgcHJlZFdpdGhJbmRleCwgbGlzdFdpdGhJbmRleCkpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkTGVuZ3RoTGltaXRlZEh1ZmZtYW5Db2RlcyR1cGRhdGUgPSBGMygKCWZ1bmN0aW9uIChpbmRleCwgdGFnZ2VyLCBhcnJheSkgewoJCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkQXJyYXkkZ2V0LCBpbmRleCwgYXJyYXkpOwoJCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiBhcnJheTsKCQl9IGVsc2UgewoJCQl2YXIgdmFsdWUgPSBfdjAuYTsKCQkJcmV0dXJuIEEzKAoJCQkJJGVsbSRjb3JlJEFycmF5JHNldCwKCQkJCWluZGV4LAoJCQkJdGFnZ2VyKHZhbHVlKSwKCQkJCWFycmF5KTsKCQl9Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMZW5ndGhMaW1pdGVkSHVmZm1hbkNvZGVzJGNhbGN1bGF0ZSA9IEYyKAoJZnVuY3Rpb24gKG1heEJpdFdpZHRoLCBmcmVxdWVuY2llcykgewoJCXZhciBzb3VyY2UgPSAkZWxtJGNvcmUkQXJyYXkkZnJvbUxpc3QoCgkJCUEyKAoJCQkJJGVsbV9jb21tdW5pdHkkbGlzdF9leHRyYSRMaXN0JEV4dHJhJHN0YWJsZVNvcnRXaXRoLAoJCQkJRjIoCgkJCQkJZnVuY3Rpb24gKGEsIGIpIHsKCQkJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRCYXNpY3MkY29tcGFyZSwgYS53ZWlnaHQsIGIud2VpZ2h0KTsKCQkJCQl9KSwKCQkJCSRlbG0kY29yZSRBcnJheSR0b0xpc3QoCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRBcnJheSRtYXAsCgkJCQkJCWZ1bmN0aW9uIChfdjMpIHsKCQkJCQkJCXZhciBzeW1ib2wgPSBfdjMuYTsKCQkJCQkJCXZhciB3ZWlnaHQgPSBfdjMuYjsKCQkJCQkJCXJldHVybiBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkTGVuZ3RoTGltaXRlZEh1ZmZtYW5Db2RlcyRzaW5nbGV0b25Ob2RlLCBzeW1ib2wsIHdlaWdodCk7CgkJCQkJCX0sCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJEFycmF5JGZpbHRlciwKCQkJCQkJCWZ1bmN0aW9uIChfdjIpIHsKCQkJCQkJCQl2YXIgZiA9IF92Mi5iOwoJCQkJCQkJCXJldHVybiBmID4gMDsKCQkJCQkJCX0sCgkJCQkJCQlBMigkZWxtJGNvcmUkQXJyYXkkaW5kZXhlZE1hcCwgJGVsbSRjb3JlJFR1cGxlJHBhaXIsIGZyZXF1ZW5jaWVzKSkpKSkpOwoJCXZhciB3ZWlnaHRlZCA9IEEzKAoJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJRjIoCgkJCQlmdW5jdGlvbiAoX3YxLCB3KSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkTGVuZ3RoTGltaXRlZEh1ZmZtYW5Db2RlcyRtZXJnZSwKCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJExlbmd0aExpbWl0ZWRIdWZmbWFuQ29kZXMkcGFja2FnZSh3KSwKCQkJCQkJc291cmNlKTsKCQkJCX0pLAoJCQlzb3VyY2UsCgkJCUEyKCRlbG0kY29yZSRMaXN0JHJhbmdlLCAwLCBtYXhCaXRXaWR0aCAtIDIpKTsKCQl2YXIgbG9vcCA9IEYyKAoJCQlmdW5jdGlvbiAoc3ltYm9scywgYWNjdW0pIHsKCQkJCWxvb3A6CgkJCQl3aGlsZSAodHJ1ZSkgewoJCQkJCWlmICghc3ltYm9scy5iKSB7CgkJCQkJCXJldHVybiBhY2N1bTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgc3ltYm9sID0gc3ltYm9scy5hOwoJCQkJCQl2YXIgcmVzdCA9IHN5bWJvbHMuYjsKCQkJCQkJdmFyICR0ZW1wJHN5bWJvbHMgPSByZXN0LAoJCQkJCQkJJHRlbXAkYWNjdW0gPSBBMygKCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMZW5ndGhMaW1pdGVkSHVmZm1hbkNvZGVzJHVwZGF0ZSwKCQkJCQkJCXN5bWJvbCwKCQkJCQkJCWZ1bmN0aW9uICh2KSB7CgkJCQkJCQkJcmV0dXJuIHYgKyAxOwoJCQkJCQkJfSwKCQkJCQkJCWFjY3VtKTsKCQkJCQkJc3ltYm9scyA9ICR0ZW1wJHN5bWJvbHM7CgkJCQkJCWFjY3VtID0gJHRlbXAkYWNjdW07CgkJCQkJCWNvbnRpbnVlIGxvb3A7CgkJCQkJfQoJCQkJfQoJCQl9KTsKCQl2YXIgYWxsU3ltYm9scyA9IEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJcmV0dXJuICQuc3ltYm9sczsKCQkJCX0sCgkJCQkkZWxtJGNvcmUkQXJyYXkkdG9MaXN0KSwKCQkJJGVsbSRjb3JlJEFycmF5JHRvTGlzdCgKCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMZW5ndGhMaW1pdGVkSHVmZm1hbkNvZGVzJHBhY2thZ2Uod2VpZ2h0ZWQpKSk7CgkJcmV0dXJuIEEyKAoJCQlsb29wLAoJCQlhbGxTeW1ib2xzLAoJCQlBMigKCQkJCSRlbG0kY29yZSRBcnJheSRyZXBlYXQsCgkJCQkkZWxtJGNvcmUkQXJyYXkkbGVuZ3RoKGZyZXF1ZW5jaWVzKSwKCQkJCTApKTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kVHJlZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUcmVlJywgYTogYX07Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSHVmZm1hbiRDb2RlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0NvZGUnLCBhOiBhfTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJGNvZGVGcm9tUmVjb3JkID0gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kQ29kZTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJG5ldyA9IGZ1bmN0aW9uIChuKSB7CglyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kVHJlZSgKCQlBMigKCQkJJGVsbSRjb3JlJEFycmF5JHJlcGVhdCwKCQkJbiwKCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kY29kZUZyb21SZWNvcmQoCgkJCQl7Yml0czogMCwgd2lkdGg6IDB9KSkpOwp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kaW52ZXJzZUVuZGlhbkxvb3AgPSBGNCgKCWZ1bmN0aW9uIChpLCBsaW1pdCwgZiwgdCkgewoJCWludmVyc2VFbmRpYW5Mb29wOgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmIChfVXRpbHNfY21wKGksIGxpbWl0KSA8IDApIHsKCQkJCXZhciAkdGVtcCRpID0gaSArIDEsCgkJCQkJJHRlbXAkbGltaXQgPSBsaW1pdCwKCQkJCQkkdGVtcCRmID0gZiA+PiAxLAoJCQkJCSR0ZW1wJHQgPSAoZiAmIDEpIHwgKHQgPDwgMSk7CgkJCQlpID0gJHRlbXAkaTsKCQkJCWxpbWl0ID0gJHRlbXAkbGltaXQ7CgkJCQlmID0gJHRlbXAkZjsKCQkJCXQgPSAkdGVtcCR0OwoJCQkJY29udGludWUgaW52ZXJzZUVuZGlhbkxvb3A7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gdDsKCQkJfQoJCX0KCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kaW52ZXJzZUVuZGlhbiA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciB3aWR0aCA9IF92MC5hLndpZHRoOwoJdmFyIGJpdHMgPSBfdjAuYS5iaXRzOwoJdmFyIGludmVyc2VCaXRzID0gQTQoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kaW52ZXJzZUVuZGlhbkxvb3AsIDAsIHdpZHRoLCBiaXRzLCAwKTsKCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSHVmZm1hbiRDb2RlKAoJCXtiaXRzOiBpbnZlcnNlQml0cywgd2lkdGg6IHdpZHRofSk7Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSHVmZm1hbiRzZXRNYXBwaW5nID0gRjMoCglmdW5jdGlvbiAoc3ltYm9sLCBjb2RlLCBfdjApIHsKCQl2YXIgYXJyYXkgPSBfdjAuYTsKCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kVHJlZSgKCQkJQTMoCgkJCQkkZWxtJGNvcmUkQXJyYXkkc2V0LAoJCQkJc3ltYm9sLAoJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kaW52ZXJzZUVuZGlhbihjb2RlKSwKCQkJCWFycmF5KSk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJHJlc3RvcmVDYW5vbmljYWxIdWZmbWFuQ29kZXMgPSBGMigKCWZ1bmN0aW9uIChiaXRXaWR0aHMsIHRyZWUpIHsKCQl2YXIgc3ltYm9scyA9IEEyKAoJCQkkZWxtX2NvbW11bml0eSRsaXN0X2V4dHJhJExpc3QkRXh0cmEkc3RhYmxlU29ydFdpdGgsCgkJCUYyKAoJCQkJZnVuY3Rpb24gKF92NCwgX3Y1KSB7CgkJCQkJdmFyIGEgPSBfdjQuYjsKCQkJCQl2YXIgYiA9IF92NS5iOwoJCQkJCXJldHVybiBBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBhcmUsIGEsIGIpOwoJCQkJfSksCgkJCSRlbG0kY29yZSRBcnJheSR0b0xpc3QoCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkQXJyYXkkZmlsdGVyLAoJCQkJCWZ1bmN0aW9uIChfdjMpIHsKCQkJCQkJdmFyIGNvZGVCaXRXaWR0aCA9IF92My5iOwoJCQkJCQlyZXR1cm4gY29kZUJpdFdpZHRoID4gMDsKCQkJCQl9LAoJCQkJCUEyKCRlbG0kY29yZSRBcnJheSRpbmRleGVkTWFwLCAkZWxtJGNvcmUkVHVwbGUkcGFpciwgYml0V2lkdGhzKSkpKTsKCQl2YXIgbG9vcCA9IEYyKAoJCQlmdW5jdGlvbiAoX3YxLCBfdjIpIHsKCQkJCXZhciBzeW1ib2wgPSBfdjEuYTsKCQkJCXZhciBiaXRXaWR0aCA9IF92MS5iOwoJCQkJdmFyIGNvZGUgPSBfdjIuYTsKCQkJCXZhciBwcmV2V2lkdGggPSBfdjIuYjsKCQkJCXZhciBjdXJyZW50VHJlZSA9IF92Mi5jOwoJCQkJdmFyIG5ld0JpdHMgPSBjb2RlIDw8IChiaXRXaWR0aCAtIHByZXZXaWR0aCk7CgkJCQl2YXIgbmV4dENvZGUgPSAkZm9sa2VydGRldiRlbG1fZmxhdGUkSHVmZm1hbiRDb2RlKAoJCQkJCXtiaXRzOiBuZXdCaXRzLCB3aWR0aDogYml0V2lkdGh9KTsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUzKAoJCQkJCW5ld0JpdHMgKyAxLAoJCQkJCWJpdFdpZHRoLAoJCQkJCUEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJHNldE1hcHBpbmcsIHN5bWJvbCwgbmV4dENvZGUsIGN1cnJlbnRUcmVlKSk7CgkJCX0pOwoJCXJldHVybiBmdW5jdGlvbiAoX3YwKSB7CgkJCXZhciB4ID0gX3YwLmM7CgkJCXJldHVybiB4OwoJCX0oCgkJCUEzKAoJCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCQlsb29wLAoJCQkJX1V0aWxzX1R1cGxlMygwLCAwLCB0cmVlKSwKCQkJCXN5bWJvbHMpKTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kZnJvbUJpdFdpZHRocyA9IGZ1bmN0aW9uIChiaXRXaWR0aHMpIHsKCXZhciBzeW1ib2xDb3VudCA9IGZ1bmN0aW9uICh2KSB7CgkJcmV0dXJuIHYgKyAxOwoJfSgKCQlBMigKCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkwLAoJCQlBMigKCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkkZWxtJGNvcmUkVHVwbGUkZmlyc3QsCgkJCQlmdW5jdGlvbiAoYSkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJEFycmF5JGdldCwKCQkJCQkJJGVsbSRjb3JlJEFycmF5JGxlbmd0aChhKSAtIDEsCgkJCQkJCWEpOwoJCQkJfSgKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJEFycmF5JGZpbHRlciwKCQkJCQkJZnVuY3Rpb24gKGUpIHsKCQkJCQkJCXJldHVybiBlLmIgPiAwOwoJCQkJCQl9LAoJCQkJCQlBMigkZWxtJGNvcmUkQXJyYXkkaW5kZXhlZE1hcCwgJGVsbSRjb3JlJFR1cGxlJHBhaXIsIGJpdFdpZHRocykpKSkpKTsKCXJldHVybiBBMigKCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSHVmZm1hbiRyZXN0b3JlQ2Fub25pY2FsSHVmZm1hbkNvZGVzLAoJCWJpdFdpZHRocywKCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSHVmZm1hbiRuZXcoc3ltYm9sQ291bnQpKTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJGZyb21GcmVxdWVuY2llcyA9IEYyKAoJZnVuY3Rpb24gKHN5bWJvbEZyZXF1ZW5jaWVzLCBtYXhCaXRXaWR0aF8pIHsKCQl2YXIgbWF4Qml0V2lkdGggPSBBMigKCQkJJGVsbSRjb3JlJEJhc2ljcyRtaW4sCgkJCW1heEJpdFdpZHRoXywKCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kY2FsY09wdGltYWxNYXhCaXRXaWR0aChzeW1ib2xGcmVxdWVuY2llcykpOwoJCXZhciBjb2RlQml0V2lkaHRzID0gQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJExlbmd0aExpbWl0ZWRIdWZmbWFuQ29kZXMkY2FsY3VsYXRlLCBtYXhCaXRXaWR0aCwgc3ltYm9sRnJlcXVlbmNpZXMpOwoJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkSHVmZm1hbiRmcm9tQml0V2lkdGhzKGNvZGVCaXRXaWRodHMpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkYnVpbGREeW5hbWljSHVmZm1hbkNvZGVjID0gZnVuY3Rpb24gKHN5bWJvbHMpIHsKCXZhciBfdjAgPSBBMygKCQkkZWxtJGNvcmUkQXJyYXkkZm9sZGwsCgkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJGR5bmFtaWNGaW5kRnJlcXVlbmNpZXMsCgkJX1V0aWxzX1R1cGxlMygKCQkJQTIoJGVsbSRjb3JlJEFycmF5JHJlcGVhdCwgMjg2LCAwKSwKCQkJQTIoJGVsbSRjb3JlJEFycmF5JHJlcGVhdCwgMzAsIDApLAoJCQl0cnVlKSwKCQlzeW1ib2xzKTsKCXZhciBsaXRlcmFsQ291bnRzID0gX3YwLmE7Cgl2YXIgZGlzdGFuY2VDb3VudHMgPSBfdjAuYjsKCXZhciBlbXB0eURpc3RhbmNlQ291bnQgPSBfdjAuYzsKCXJldHVybiB7CgkJZGlzdGFuY2U6IGVtcHR5RGlzdGFuY2VDb3VudCA/IEEyKAoJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSHVmZm1hbiRmcm9tRnJlcXVlbmNpZXMsCgkJCUEzKCRlbG0kY29yZSRBcnJheSRzZXQsIDAsIDEsIGRpc3RhbmNlQ291bnRzKSwKCQkJMTUpIDogQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kZnJvbUZyZXF1ZW5jaWVzLCBkaXN0YW5jZUNvdW50cywgMTUpLAoJCWxpdGVyYWw6IEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJGZyb21GcmVxdWVuY2llcywgbGl0ZXJhbENvdW50cywgMTUpCgl9Owp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJEVuZE9mQmxvY2sgPSB7JDogJ0VuZE9mQmxvY2snfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJFN5bWJvbCRMaXRlcmFsID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xpdGVyYWwnLCBhOiBhfTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJFN5bWJvbCRTaGFyZSA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdTaGFyZScsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRjb2RlVG9TeW1ib2wgPSBmdW5jdGlvbiAoY29kZSkgewoJaWYgKGNvZGUuJCA9PT0gJ0xpdGVyYWwnKSB7CgkJdmFyIHYgPSBjb2RlLmE7CgkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJFN5bWJvbCRMaXRlcmFsKHYpOwoJfSBlbHNlIHsKCQl2YXIgbGVuZ3RoID0gY29kZS5hOwoJCXZhciBiYWNrd2FyZERpc3RhbmNlID0gY29kZS5iOwoJCXJldHVybiBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkU2hhcmUsIGxlbmd0aCwgYmFja3dhcmREaXN0YW5jZSk7Cgl9Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkTFo3NyRMaXRlcmFsID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xpdGVyYWwnLCBhOiBhfTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMWjc3JFBvaW50ZXIgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnUG9pbnRlcicsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkU21hbGwgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnU21hbGwnLCBhOiBhfTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRMYXJnZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdMYXJnZScsIGE6IGF9Owp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJExhcmdlUHJlZml4VGFibGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnTGFyZ2VQcmVmaXhUYWJsZScsIGE6IGF9Owp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJGluc2VydEluTGlzdCA9IEY2KAoJZnVuY3Rpb24gKGksIGFycmF5LCBwMiwgcG9zaXRpb24sIHJlbWFpbmluZywgYWNjdW0pIHsKCQlpbnNlcnRJbkxpc3Q6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFyZW1haW5pbmcuYikgewoJCQkJdmFyIG5ld1Bvc2l0aW9ucyA9IEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJX1V0aWxzX1R1cGxlMihwMiwgcG9zaXRpb24pLAoJCQkJCWFjY3VtKTsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRMYXJnZSgKCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJExhcmdlUHJlZml4VGFibGUoCgkJCQkJCQlBMygkZWxtJGNvcmUkQXJyYXkkc2V0LCBpLCBuZXdQb3NpdGlvbnMsIGFycmF5KSkpLAoJCQkJCSRlbG0kY29yZSRNYXliZSROb3RoaW5nKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBjdXJyZW50ID0gcmVtYWluaW5nLmE7CgkJCQl2YXIga2V5ID0gY3VycmVudC5hOwoJCQkJdmFyIG9sZFZhbHVlID0gY3VycmVudC5iOwoJCQkJdmFyIHJlc3QgPSByZW1haW5pbmcuYjsKCQkJCWlmICghKGtleSAtIHAyKSkgewoJCQkJCXZhciBuZXdQb3NpdGlvbnMgPSBfVXRpbHNfYXAoCgkJCQkJCWFjY3VtLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQlfVXRpbHNfVHVwbGUyKGtleSwgcG9zaXRpb24pLAoJCQkJCQkJcmVzdCkpOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkTGFyZ2UoCgkJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkTGFyZ2VQcmVmaXhUYWJsZSgKCQkJCQkJCQlBMygkZWxtJGNvcmUkQXJyYXkkc2V0LCBpLCBuZXdQb3NpdGlvbnMsIGFycmF5KSkpLAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdChvbGRWYWx1ZSkpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgJHRlbXAkaSA9IGksCgkJCQkJCSR0ZW1wJGFycmF5ID0gYXJyYXksCgkJCQkJCSR0ZW1wJHAyID0gcDIsCgkJCQkJCSR0ZW1wJHBvc2l0aW9uID0gcG9zaXRpb24sCgkJCQkJCSR0ZW1wJHJlbWFpbmluZyA9IHJlc3QsCgkJCQkJCSR0ZW1wJGFjY3VtID0gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgY3VycmVudCwgYWNjdW0pOwoJCQkJCWkgPSAkdGVtcCRpOwoJCQkJCWFycmF5ID0gJHRlbXAkYXJyYXk7CgkJCQkJcDIgPSAkdGVtcCRwMjsKCQkJCQlwb3NpdGlvbiA9ICR0ZW1wJHBvc2l0aW9uOwoJCQkJCXJlbWFpbmluZyA9ICR0ZW1wJHJlbWFpbmluZzsKCQkJCQlhY2N1bSA9ICR0ZW1wJGFjY3VtOwoJCQkJCWNvbnRpbnVlIGluc2VydEluTGlzdDsKCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJGluc2VydCA9IEYzKAoJZnVuY3Rpb24gKF92MCwgcG9zaXRpb24sIHB0YWJsZSkgewoJCXZhciBwcmVmaXhfID0gX3YwLmE7CgkJdmFyIHByZWZpeCA9IDE2Nzc3MjE1ICYgKHByZWZpeF8gPj4+IDApOwoJCWlmIChwdGFibGUuJCA9PT0gJ1NtYWxsJykgewoJCQl2YXIgZGljdCA9IHB0YWJsZS5hOwoJCQl2YXIgX3YyID0gQTIoJGVsbSRjb3JlJERpY3QkZ2V0LCBwcmVmaXgsIGRpY3QpOwoJCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJFNtYWxsKAoJCQkJCQlBMygkZWxtJGNvcmUkRGljdCRpbnNlcnQsIHByZWZpeCwgcG9zaXRpb24sIGRpY3QpKSwKCQkJCQkkZWxtJGNvcmUkTWF5YmUkTm90aGluZyk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgb2xkVmFsdWUgPSBfdjIuYTsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRTbWFsbCgKCQkJCQkJQTMoJGVsbSRjb3JlJERpY3QkaW5zZXJ0LCBwcmVmaXgsIHBvc2l0aW9uLCBkaWN0KSksCgkJCQkJJGVsbSRjb3JlJE1heWJlJEp1c3Qob2xkVmFsdWUpKTsKCQkJfQoJCX0gZWxzZSB7CgkJCXZhciBhcnJheSA9IHB0YWJsZS5hLmE7CgkJCXZhciBpbmRleCA9IHByZWZpeCA+PiA4OwoJCQl2YXIgX3YzID0gQTIoJGVsbSRjb3JlJEFycmF5JGdldCwgaW5kZXgsIGFycmF5KTsKCQkJaWYgKF92My4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHB0YWJsZSwgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpOwoJCQl9IGVsc2UgewoJCQkJdmFyIHBvc2l0aW9ucyA9IF92My5hOwoJCQkJcmV0dXJuIEE2KCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRpbnNlcnRJbkxpc3QsIGluZGV4LCBhcnJheSwgMjU1ICYgcHJlZml4LCBwb3NpdGlvbiwgcG9zaXRpb25zLCBfTGlzdF9OaWwpOwoJCQl9CgkJfQoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkTFo3NyRsb25nZXN0Q29tbW9uUHJlZml4TG9vcCA9IEY1KAoJZnVuY3Rpb24gKGksIGosIGxpbWl0LCBhY2N1bSwgYXJyYXkpIHsKCQlsb25nZXN0Q29tbW9uUHJlZml4TG9vcDoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoX1V0aWxzX2NtcChpLCBsaW1pdCkgPCAwKSB7CgkJCQl2YXIgX3YwID0gQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkZ2V0LCBpLCBhcnJheSk7CgkJCQlpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiBhY2N1bTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHZhbHVlMSA9IF92MC5hOwoJCQkJCXZhciBfdjEgPSBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRnZXQsIGosIGFycmF5KTsKCQkJCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQlyZXR1cm4gYWNjdW07CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIHZhbHVlMiA9IF92MS5hOwoJCQkJCQlpZiAoISh2YWx1ZTEgLSB2YWx1ZTIpKSB7CgkJCQkJCQl2YXIgJHRlbXAkaSA9IGkgKyAxLAoJCQkJCQkJCSR0ZW1wJGogPSBqICsgMSwKCQkJCQkJCQkkdGVtcCRsaW1pdCA9IGxpbWl0LAoJCQkJCQkJCSR0ZW1wJGFjY3VtID0gYWNjdW0gKyAxLAoJCQkJCQkJCSR0ZW1wJGFycmF5ID0gYXJyYXk7CgkJCQkJCQlpID0gJHRlbXAkaTsKCQkJCQkJCWogPSAkdGVtcCRqOwoJCQkJCQkJbGltaXQgPSAkdGVtcCRsaW1pdDsKCQkJCQkJCWFjY3VtID0gJHRlbXAkYWNjdW07CgkJCQkJCQlhcnJheSA9ICR0ZW1wJGFycmF5OwoJCQkJCQkJY29udGludWUgbG9uZ2VzdENvbW1vblByZWZpeExvb3A7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlyZXR1cm4gYWNjdW07CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gYWNjdW07CgkJCX0KCQl9Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMWjc3JG1heF9sZW5ndGggPSAyNTg7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkTFo3NyRsb25nZXN0Q29tbW9uUHJlZml4ID0gRjMoCglmdW5jdGlvbiAoaSwgaiwgYXJyYXkpIHsKCQl2YXIgcmVtYWluaW5nID0gQTIoCgkJCSRlbG0kY29yZSRCYXNpY3MkbWluLAoJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkTFo3NyRtYXhfbGVuZ3RoIC0gMywKCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkbGVuZ3RoKGFycmF5KSAtIGopOwoJCXJldHVybiBBNSgkZm9sa2VydGRldiRlbG1fZmxhdGUkTFo3NyRsb25nZXN0Q29tbW9uUHJlZml4TG9vcCwgaSwgaiwgaSArIHJlbWFpbmluZywgMCwgYXJyYXkpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkT3V0T2ZCb3VuZHMgPSB7JDogJ091dE9mQm91bmRzJ307CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkUHJlZml4ID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ1ByZWZpeCcsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkUHJlZml4Q29kZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQcmVmaXhDb2RlJywgYTogYX07Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkVHJhaWxpbmcxID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1RyYWlsaW5nMScsIGE6IGF9Owp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJFRyYWlsaW5nMiA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdUcmFpbGluZzInLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkZ2V0SW50MzIgPSBGMigKCWZ1bmN0aW9uIChpbmRleCwgX3YwKSB7CgkJdmFyIGFycmF5ID0gX3YwLmE7CgkJdmFyIGZpbmFsQnl0ZXMgPSBfdjAuYzsKCQl2YXIgc2l6ZSA9ICRlbG0kY29yZSRBcnJheSRsZW5ndGgoYXJyYXkpOwoJCXJldHVybiAoIShpbmRleCAtIHNpemUpKSA/ICRlbG0kY29yZSRNYXliZSRKdXN0KGZpbmFsQnl0ZXMpIDogQTIoJGVsbSRjb3JlJEFycmF5JGdldCwgaW5kZXgsIGFycmF5KTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJHByZWZpeEF0ID0gRjIoCglmdW5jdGlvbiAoaywgaW5wdXQpIHsKCQl2YXIgc2l6ZSA9ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JGxlbmd0aChpbnB1dCk7CgkJaWYgKF9VdGlsc19jbXAoayArIDIsIHNpemUpID4gLTEpIHsKCQkJaWYgKF9VdGlsc19jbXAoaywgc2l6ZSkgPiAtMSkgewoJCQkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRPdXRPZkJvdW5kczsKCQkJfSBlbHNlIHsKCQkJCWlmIChfVXRpbHNfY21wKGsgKyAxLCBzaXplKSA+IC0xKSB7CgkJCQkJdmFyIF92MCA9IEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JGdldCwgaywgaW5wdXQpOwoJCQkJCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkT3V0T2ZCb3VuZHM7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIHZhbHVlID0gX3YwLmE7CgkJCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkVHJhaWxpbmcxKHZhbHVlKTsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfdjEgPSBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRnZXQsIGssIGlucHV0KTsKCQkJCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJE91dE9mQm91bmRzOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciB2MSA9IF92MS5hOwoJCQkJCQl2YXIgX3YyID0gQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkZ2V0LCBrICsgMSwgaW5wdXQpOwoJCQkJCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRPdXRPZkJvdW5kczsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciB2MiA9IF92Mi5hOwoJCQkJCQkJcmV0dXJuIEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRUcmFpbGluZzIsIHYxLCB2Mik7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9IGVsc2UgewoJCQl2YXIgb2Zmc2V0ID0gayAlIDQ7CgkJCXZhciBpbnRlcm5hbEluZGV4ID0gKGsgLyA0KSB8IDA7CgkJCXN3aXRjaCAob2Zmc2V0KSB7CgkJCQljYXNlIDA6CgkJCQkJdmFyIF92NCA9IEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JGdldEludDMyLCBpbnRlcm5hbEluZGV4LCBpbnB1dCk7CgkJCQkJaWYgKF92NC4kID09PSAnTm90aGluZycpIHsKCQkJCQkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRPdXRPZkJvdW5kczsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgaW50MzIgPSBfdjQuYTsKCQkJCQkJdmFyIGZpcnN0ID0gMjU1ICYgKChpbnQzMiA+PiAyNCkgPj4+IDApOwoJCQkJCQl2YXIgY29kZSA9IGludDMyID4+IDg7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRQcmVmaXgsCgkJCQkJCQlmaXJzdCwKCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRQcmVmaXhDb2RlKGNvZGUpKTsKCQkJCQl9CgkJCQljYXNlIDE6CgkJCQkJdmFyIF92NSA9IEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JGdldEludDMyLCBpbnRlcm5hbEluZGV4LCBpbnB1dCk7CgkJCQkJaWYgKF92NS4kID09PSAnTm90aGluZycpIHsKCQkJCQkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRPdXRPZkJvdW5kczsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgaW50MzIgPSBfdjUuYTsKCQkJCQkJdmFyIGZpcnN0ID0gMjU1ICYgKCgyNTUgJiAoaW50MzIgPj4gMTYpKSA+Pj4gMCk7CgkJCQkJCXZhciBjb2RlID0gMTY3NzcyMTUgJiBpbnQzMjsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJFByZWZpeCwKCQkJCQkJCWZpcnN0LAoJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJFByZWZpeENvZGUoY29kZSkpOwoJCQkJCX0KCQkJCWNhc2UgMjoKCQkJCQl2YXIgX3Y2ID0gQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkZ2V0SW50MzIsIGludGVybmFsSW5kZXgsIGlucHV0KTsKCQkJCQlpZiAoX3Y2LiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJE91dE9mQm91bmRzOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBpbnQzMiA9IF92Ni5hOwoJCQkJCQl2YXIgX3Y3ID0gQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkZ2V0SW50MzIsIGludGVybmFsSW5kZXggKyAxLCBpbnB1dCk7CgkJCQkJCWlmIChfdjcuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJE91dE9mQm91bmRzOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIG5leHRJbnQzMiA9IF92Ny5hOwoJCQkJCQkJdmFyIGZpcnN0ID0gMjU1ICYgKCgyNTUgJiAoaW50MzIgPj4gOCkpID4+PiAwKTsKCQkJCQkJCXZhciBjb2RlID0gMTY3NzcyMTUgJiAoKCgyNTUgJiAobmV4dEludDMyID4+IDI0KSkgfCAoKDY1NTM1ICYgaW50MzIpIDw8IDgpKSA+Pj4gMCk7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJFByZWZpeCwKCQkJCQkJCQlmaXJzdCwKCQkJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkUHJlZml4Q29kZShjb2RlKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQlkZWZhdWx0OgoJCQkJCXZhciBfdjggPSBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRnZXRJbnQzMiwgaW50ZXJuYWxJbmRleCwgaW5wdXQpOwoJCQkJCWlmIChfdjguJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkT3V0T2ZCb3VuZHM7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGludDMyID0gX3Y4LmE7CgkJCQkJCXZhciBfdjkgPSBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRnZXRJbnQzMiwgaW50ZXJuYWxJbmRleCArIDEsIGlucHV0KTsKCQkJCQkJaWYgKF92OS4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkT3V0T2ZCb3VuZHM7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgbmV4dEludDMyID0gX3Y5LmE7CgkJCQkJCQl2YXIgZmlyc3QgPSAyNTUgJiAoKDI1NSAmIGludDMyKSA+Pj4gMCk7CgkJCQkJCQl2YXIgY29kZSA9ICg2NTUzNSAmIChuZXh0SW50MzIgPj4gMTYpKSB8ICgoMjU1ICYgaW50MzIpIDw8IDE2KTsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkUHJlZml4LAoJCQkJCQkJCWZpcnN0LAoJCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRQcmVmaXhDb2RlKGNvZGUpKTsKCQkJCQkJfQoJCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJExaNzckdXBkYXRlUHJlZml4VGFibGVMb29wID0gRjQoCglmdW5jdGlvbiAoaywgbGltaXQsIGJ1ZmZlciwgcHJlZml4VGFibGUpIHsKCQl1cGRhdGVQcmVmaXhUYWJsZUxvb3A6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKF9VdGlsc19jbXAoaywgbGltaXQpIDwgMCkgewoJCQkJdmFyIF92MCA9IEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRwcmVmaXhBdCwgaywgYnVmZmVyKTsKCQkJCWlmIChfdjAuJCA9PT0gJ1ByZWZpeCcpIHsKCQkJCQl2YXIgY29kZSA9IF92MC5iOwoJCQkJCXZhciBfdjEgPSBBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkaW5zZXJ0LCBjb2RlLCBrLCBwcmVmaXhUYWJsZSk7CgkJCQkJdmFyIG5ld1ByZWZpeFRhYmxlID0gX3YxLmE7CgkJCQkJdmFyICR0ZW1wJGsgPSBrICsgMSwKCQkJCQkJJHRlbXAkbGltaXQgPSBsaW1pdCwKCQkJCQkJJHRlbXAkYnVmZmVyID0gYnVmZmVyLAoJCQkJCQkkdGVtcCRwcmVmaXhUYWJsZSA9IG5ld1ByZWZpeFRhYmxlOwoJCQkJCWsgPSAkdGVtcCRrOwoJCQkJCWxpbWl0ID0gJHRlbXAkbGltaXQ7CgkJCQkJYnVmZmVyID0gJHRlbXAkYnVmZmVyOwoJCQkJCXByZWZpeFRhYmxlID0gJHRlbXAkcHJlZml4VGFibGU7CgkJCQkJY29udGludWUgdXBkYXRlUHJlZml4VGFibGVMb29wOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gcHJlZml4VGFibGU7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gcHJlZml4VGFibGU7CgkJCX0KCQl9Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMWjc3JGZsdXNoTG9vcCA9IEY1KAoJZnVuY3Rpb24gKGksIHdpbmRvd1NpemUsIGJ1ZmZlciwgcHJlZml4VGFibGUsIGVuY29kZXJzKSB7CgkJZmx1c2hMb29wOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBfdjAgPSBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkcHJlZml4QXQsIGksIGJ1ZmZlcik7CgkJCXN3aXRjaCAoX3YwLiQpIHsKCQkJCWNhc2UgJ091dE9mQm91bmRzJzoKCQkJCQlyZXR1cm4gZW5jb2RlcnM7CgkJCQljYXNlICdUcmFpbGluZzEnOgoJCQkJCXZhciBwMSA9IF92MC5hOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJEFycmF5JHB1c2gsCgkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMWjc3JExpdGVyYWwocDEpLAoJCQkJCQllbmNvZGVycyk7CgkJCQljYXNlICdUcmFpbGluZzInOgoJCQkJCXZhciBwMSA9IF92MC5hOwoJCQkJCXZhciBwMiA9IF92MC5iOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJEFycmF5JHB1c2gsCgkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMWjc3JExpdGVyYWwocDIpLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRBcnJheSRwdXNoLAoJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJExaNzckTGl0ZXJhbChwMSksCgkJCQkJCQllbmNvZGVycykpOwoJCQkJZGVmYXVsdDoKCQkJCQl2YXIgcDEgPSBfdjAuYTsKCQkJCQl2YXIga2V5ID0gX3YwLmI7CgkJCQkJdmFyIF92MSA9IEEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRpbnNlcnQsIGtleSwgaSwgcHJlZml4VGFibGUpOwoJCQkJCXZhciBuZXdQcmVmaXhUYWJsZSA9IF92MS5hOwoJCQkJCXZhciBtYXRjaGVkID0gX3YxLmI7CgkJCQkJaWYgKG1hdGNoZWQuJCA9PT0gJ0p1c3QnKSB7CgkJCQkJCXZhciBqID0gbWF0Y2hlZC5hOwoJCQkJCQl2YXIgZGlzdGFuY2UgPSBpIC0gajsKCQkJCQkJaWYgKChkaXN0YW5jZSAtIHdpbmRvd1NpemUpIDw9IDApIHsKCQkJCQkJCXZhciBsZW5ndGggPSAzICsgQTMoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJExaNzckbG9uZ2VzdENvbW1vblByZWZpeCwgaSArIDMsIGogKyAzLCBidWZmZXIpOwoJCQkJCQkJdmFyIG5ld0VuY29kZXJzID0gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJEFycmF5JHB1c2gsCgkJCQkJCQkJQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJExaNzckUG9pbnRlciwgbGVuZ3RoLCBkaXN0YW5jZSksCgkJCQkJCQkJZW5jb2RlcnMpOwoJCQkJCQkJdmFyIG5ld2VyUHJlZml4VGFibGUgPSBBNCgkZm9sa2VydGRldiRlbG1fZmxhdGUkTFo3NyR1cGRhdGVQcmVmaXhUYWJsZUxvb3AsIGkgKyAxLCBpICsgbGVuZ3RoLCBidWZmZXIsIG5ld1ByZWZpeFRhYmxlKTsKCQkJCQkJCXZhciAkdGVtcCRpID0gaSArIGxlbmd0aCwKCQkJCQkJCQkkdGVtcCR3aW5kb3dTaXplID0gd2luZG93U2l6ZSwKCQkJCQkJCQkkdGVtcCRidWZmZXIgPSBidWZmZXIsCgkJCQkJCQkJJHRlbXAkcHJlZml4VGFibGUgPSBuZXdlclByZWZpeFRhYmxlLAoJCQkJCQkJCSR0ZW1wJGVuY29kZXJzID0gbmV3RW5jb2RlcnM7CgkJCQkJCQlpID0gJHRlbXAkaTsKCQkJCQkJCXdpbmRvd1NpemUgPSAkdGVtcCR3aW5kb3dTaXplOwoJCQkJCQkJYnVmZmVyID0gJHRlbXAkYnVmZmVyOwoJCQkJCQkJcHJlZml4VGFibGUgPSAkdGVtcCRwcmVmaXhUYWJsZTsKCQkJCQkJCWVuY29kZXJzID0gJHRlbXAkZW5jb2RlcnM7CgkJCQkJCQljb250aW51ZSBmbHVzaExvb3A7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgJHRlbXAkaSA9IGkgKyAxLAoJCQkJCQkJCSR0ZW1wJHdpbmRvd1NpemUgPSB3aW5kb3dTaXplLAoJCQkJCQkJCSR0ZW1wJGJ1ZmZlciA9IGJ1ZmZlciwKCQkJCQkJCQkkdGVtcCRwcmVmaXhUYWJsZSA9IG5ld1ByZWZpeFRhYmxlLAoJCQkJCQkJCSR0ZW1wJGVuY29kZXJzID0gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJEFycmF5JHB1c2gsCgkJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJExaNzckTGl0ZXJhbChwMSksCgkJCQkJCQkJZW5jb2RlcnMpOwoJCQkJCQkJaSA9ICR0ZW1wJGk7CgkJCQkJCQl3aW5kb3dTaXplID0gJHRlbXAkd2luZG93U2l6ZTsKCQkJCQkJCWJ1ZmZlciA9ICR0ZW1wJGJ1ZmZlcjsKCQkJCQkJCXByZWZpeFRhYmxlID0gJHRlbXAkcHJlZml4VGFibGU7CgkJCQkJCQllbmNvZGVycyA9ICR0ZW1wJGVuY29kZXJzOwoJCQkJCQkJY29udGludWUgZmx1c2hMb29wOwoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyICR0ZW1wJGkgPSBpICsgMSwKCQkJCQkJCSR0ZW1wJHdpbmRvd1NpemUgPSB3aW5kb3dTaXplLAoJCQkJCQkJJHRlbXAkYnVmZmVyID0gYnVmZmVyLAoJCQkJCQkJJHRlbXAkcHJlZml4VGFibGUgPSBuZXdQcmVmaXhUYWJsZSwKCQkJCQkJCSR0ZW1wJGVuY29kZXJzID0gQTIoCgkJCQkJCQkkZWxtJGNvcmUkQXJyYXkkcHVzaCwKCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMWjc3JExpdGVyYWwocDEpLAoJCQkJCQkJZW5jb2RlcnMpOwoJCQkJCQlpID0gJHRlbXAkaTsKCQkJCQkJd2luZG93U2l6ZSA9ICR0ZW1wJHdpbmRvd1NpemU7CgkJCQkJCWJ1ZmZlciA9ICR0ZW1wJGJ1ZmZlcjsKCQkJCQkJcHJlZml4VGFibGUgPSAkdGVtcCRwcmVmaXhUYWJsZTsKCQkJCQkJZW5jb2RlcnMgPSAkdGVtcCRlbmNvZGVyczsKCQkJCQkJY29udGludWUgZmx1c2hMb29wOwoJCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJG1heF9kaXN0YW5jZSA9IDMyNzY4Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJG1heF93aW5kb3dfc2l6ZSA9ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRtYXhfZGlzdGFuY2U7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkbmV3TGFyZ2VQcmVmaXhUYWJsZSA9ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRMYXJnZVByZWZpeFRhYmxlKAoJQTIoJGVsbSRjb3JlJEFycmF5JHJlcGVhdCwgNjU1MzUsIF9MaXN0X05pbCkpOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJG5ldyA9IGZ1bmN0aW9uIChuYnl0ZXMpIHsKCXJldHVybiAoX1V0aWxzX2NtcChuYnl0ZXMsICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRtYXhfd2luZG93X3NpemUpIDwgMCkgPyAkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkU21hbGwoJGVsbSRjb3JlJERpY3QkZW1wdHkpIDogJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJFByZWZpeFRhYmxlJExhcmdlKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRQcmVmaXhUYWJsZSRuZXdMYXJnZVByZWZpeFRhYmxlKTsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMWjc3JGZsdXNoID0gRjIoCglmdW5jdGlvbiAod2luZG93U2l6ZSwgYnVmZmVyKSB7CgkJdmFyIGNvZGVzID0gQTUoCgkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMWjc3JGZsdXNoTG9vcCwKCQkJMCwKCQkJd2luZG93U2l6ZSwKCQkJYnVmZmVyLAoJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkUHJlZml4VGFibGUkbmV3KAoJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkbGVuZ3RoKGJ1ZmZlcikpLAoJCQkkZWxtJGNvcmUkQXJyYXkkZW1wdHkpOwoJCXJldHVybiBjb2RlczsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkZnJvbUJ5dGVzSGVscCA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciByZW1haW5pbmcgPSBfdjAuYTsKCXZhciBhcnJheSA9IF92MC5iOwoJaWYgKHJlbWFpbmluZyA+PSA0MCkgewoJCXJldHVybiBBMigKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkYW5kVGhlbiwKCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwKCQkJQTYoCgkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXA1LAoJCQkJRjUoCgkJCQkJZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGUpIHsKCQkJCQkJcmV0dXJuIEE2KAoJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwNSwKCQkJCQkJCUY1KAoJCQkJCQkJCWZ1bmN0aW9uIChmLCBnLCBoLCBpLCBqKSB7CgkJCQkJCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRMb29wKAoJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQlyZW1haW5pbmcgLSA0MCwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJEFycmF5JGFwcGVuZCwKCQkJCQkJCQkJCQkJYXJyYXksCgkJCQkJCQkJCQkJCSRlbG0kY29yZSRBcnJheSRmcm9tTGlzdCgKCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQlbYSwgYiwgYywgZCwgZSwgZiwgZywgaCwgaSwgal0pKSkpKTsKCQkJCQkJCQl9KSwKCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MzIoJGVsbSRieXRlcyRCeXRlcyRCRSksCgkJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDMyKCRlbG0kYnl0ZXMkQnl0ZXMkQkUpLAoJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQzMigkZWxtJGJ5dGVzJEJ5dGVzJEJFKSwKCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MzIoJGVsbSRieXRlcyRCeXRlcyRCRSksCgkJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDMyKCRlbG0kYnl0ZXMkQnl0ZXMkQkUpKTsKCQkJCQl9KSwKCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MzIoJGVsbSRieXRlcyRCeXRlcyRCRSksCgkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDMyKCRlbG0kYnl0ZXMkQnl0ZXMkQkUpLAoJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQzMigkZWxtJGJ5dGVzJEJ5dGVzJEJFKSwKCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MzIoJGVsbSRieXRlcyRCeXRlcyRCRSksCgkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDMyKCRlbG0kYnl0ZXMkQnl0ZXMkQkUpKSk7Cgl9IGVsc2UgewoJCWlmIChyZW1haW5pbmcgPj0gMjApIHsKCQkJcmV0dXJuIEE2KAoJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwNSwKCQkJCUY1KAoJCQkJCWZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlKSB7CgkJCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRMb29wKAoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQlyZW1haW5pbmcgLSAyMCwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJEFycmF5JHB1c2gsCgkJCQkJCQkJCWUsCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGVsbSRjb3JlJEFycmF5JHB1c2gsCgkJCQkJCQkJCQlkLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGVsbSRjb3JlJEFycmF5JHB1c2gsCgkJCQkJCQkJCQkJYywKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJEFycmF5JHB1c2gsCgkJCQkJCQkJCQkJCWIsCgkJCQkJCQkJCQkJCUEyKCRlbG0kY29yZSRBcnJheSRwdXNoLCBhLCBhcnJheSkpKSkpKSk7CgkJCQkJfSksCgkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDMyKCRlbG0kYnl0ZXMkQnl0ZXMkQkUpLAoJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQzMigkZWxtJGJ5dGVzJEJ5dGVzJEJFKSwKCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MzIoJGVsbSRieXRlcyRCeXRlcyRCRSksCgkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDMyKCRlbG0kYnl0ZXMkQnl0ZXMkQkUpLAoJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQzMigkZWxtJGJ5dGVzJEJ5dGVzJEJFKSk7CgkJfSBlbHNlIHsKCQkJaWYgKHJlbWFpbmluZyA+PSA0KSB7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwLAoJCQkJCWZ1bmN0aW9uIChhKSB7CgkJCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRMb29wKAoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQlyZW1haW5pbmcgLSA0LAoJCQkJCQkJCUEyKCRlbG0kY29yZSRBcnJheSRwdXNoLCBhLCBhcnJheSkpKTsKCQkJCQl9LAoJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MzIoJGVsbSRieXRlcyRCeXRlcyRCRSkpOwoJCQl9IGVsc2UgewoJCQkJc3dpdGNoIChyZW1haW5pbmcpIHsKCQkJCQljYXNlIDA6CgkJCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRzdWNjZWVkKAoJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRG9uZSgKCQkJCQkJCQlfVXRpbHNfVHVwbGUzKDAsIDAsIGFycmF5KSkpOwoJCQkJCWNhc2UgMToKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwLAoJCQkJCQkJZnVuY3Rpb24gKF9ieXRlKSB7CgkJCQkJCQkJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJERvbmUoCgkJCQkJCQkJCV9VdGlsc19UdXBsZTMoMSwgX2J5dGUgPDwgMjQsIGFycmF5KSk7CgkJCQkJCQl9LAoJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQ4KTsKCQkJCQljYXNlIDI6CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcCwKCQkJCQkJCWZ1bmN0aW9uIChfYnl0ZSkgewoJCQkJCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSREb25lKAoJCQkJCQkJCQlfVXRpbHNfVHVwbGUzKDIsIF9ieXRlIDw8IDE2LCBhcnJheSkpOwoJCQkJCQkJfSwKCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MTYoJGVsbSRieXRlcyRCeXRlcyRCRSkpOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXJldHVybiBBMygKCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcDIsCgkJCQkJCQlGMigKCQkJCQkJCQlmdW5jdGlvbiAoYnl0ZXMsIF9ieXRlKSB7CgkJCQkJCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSREb25lKAoJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMygzLCAoYnl0ZXMgPDwgMTYpIHwgKF9ieXRlIDw8IDgpLCBhcnJheSkpOwoJCQkJCQkJCX0pLAoJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQxNigkZWxtJGJ5dGVzJEJ5dGVzJEJFKSwKCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50OCk7CgkJCQl9CgkJCX0KCQl9Cgl9Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRmcm9tQnl0ZXMgPSBmdW5jdGlvbiAoYnVmZmVyKSB7Cgl2YXIgX3YwID0gQTIoCgkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkZGVjb2RlLAoJCUEyKAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRsb29wLAoJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJGVsbSRieXRlcyRCeXRlcyR3aWR0aChidWZmZXIpLAoJCQkJJGVsbSRjb3JlJEFycmF5JGVtcHR5KSwKCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEV4cGVyaW1lbnRhbCRCeXRlQXJyYXkkZnJvbUJ5dGVzSGVscCksCgkJYnVmZmVyKTsKCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJcmV0dXJuICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JGVtcHR5OwoJfSBlbHNlIHsKCQl2YXIgX3YxID0gX3YwLmE7CgkJdmFyIGZpbmFsU2l6ZSA9IF92MS5hOwoJCXZhciBmaW5hbEJ5dGVzID0gX3YxLmI7CgkJdmFyIGFycmF5ID0gX3YxLmM7CgkJcmV0dXJuIEEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRFeHBlcmltZW50YWwkQnl0ZUFycmF5JEJ5dGVBcnJheSwgYXJyYXksIGZpbmFsU2l6ZSwgZmluYWxCeXRlcyk7Cgl9Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkTFo3NyRlbmNvZGVXaXRoT3B0aW9ucyA9IEYyKAoJZnVuY3Rpb24gKF92MCwgYnVmZmVyKSB7CgkJdmFyIHdpbmRvd1NpemUgPSBfdjAud2luZG93U2l6ZTsKCQlyZXR1cm4gQTIoCgkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMWjc3JGZsdXNoLAoJCQl3aW5kb3dTaXplLAoJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRXhwZXJpbWVudGFsJEJ5dGVBcnJheSRmcm9tQnl0ZXMoYnVmZmVyKSk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRCeXRlQXJyYXkkZGVjb2RlQnl0ZUFycmF5SGVscCA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciByZW1haW5pbmcgPSBfdjAuYTsKCXZhciBhY2N1bSA9IF92MC5iOwoJcmV0dXJuIChyZW1haW5pbmcgPj0gNCkgPyBBMigKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAsCgkJZnVuY3Rpb24gKF9uZXcpIHsKCQkJdmFyIGJ5dGU0ID0gMjU1ICYgKF9uZXcgPj4+IDApOwoJCQl2YXIgYnl0ZTMgPSAyNTUgJiAoKF9uZXcgPj4gOCkgPj4+IDApOwoJCQl2YXIgYnl0ZTIgPSAyNTUgJiAoKF9uZXcgPj4gMTYpID4+PiAwKTsKCQkJdmFyIGJ5dGUxID0gMjU1ICYgKChfbmV3ID4+IDI0KSA+Pj4gMCk7CgkJCXZhciBuZXdBY2N1bSA9IEEyKAoJCQkJJGVsbSRjb3JlJEFycmF5JHB1c2gsCgkJCQlieXRlNCwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRBcnJheSRwdXNoLAoJCQkJCWJ5dGUzLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkQXJyYXkkcHVzaCwKCQkJCQkJYnl0ZTIsCgkJCQkJCUEyKCRlbG0kY29yZSRBcnJheSRwdXNoLCBieXRlMSwgYWNjdW0pKSkpOwoJCQlyZXR1cm4gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkTG9vcCgKCQkJCV9VdGlsc19UdXBsZTIocmVtYWluaW5nIC0gNCwgbmV3QWNjdW0pKTsKCQl9LAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MzIoJGVsbSRieXRlcyRCeXRlcyRCRSkpIDogKChyZW1haW5pbmcgPiAwKSA/IEEyKAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcCwKCQlmdW5jdGlvbiAoX25ldykgewoJCQlyZXR1cm4gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkTG9vcCgKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJcmVtYWluaW5nIC0gMSwKCQkJCQlBMigkZWxtJGNvcmUkQXJyYXkkcHVzaCwgX25ldywgYWNjdW0pKSk7CgkJfSwKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDgpIDogJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkc3VjY2VlZCgKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSREb25lKGFjY3VtKSkpOwp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEJ5dGVBcnJheSRkZWNvZGVyID0gZnVuY3Rpb24gKG4pIHsKCXJldHVybiBBMigKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRsb29wLAoJCV9VdGlsc19UdXBsZTIobiwgJGVsbSRjb3JlJEFycmF5JGVtcHR5KSwKCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkQnl0ZUFycmF5JGRlY29kZUJ5dGVBcnJheUhlbHApOwp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEJ5dGVBcnJheSRmcm9tQnl0ZXMgPSBmdW5jdGlvbiAoYnVmZmVyKSB7Cgl2YXIgX3YwID0gQTIoCgkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkZGVjb2RlLAoJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRCeXRlQXJyYXkkZGVjb2RlcigKCQkJJGVsbSRieXRlcyRCeXRlcyR3aWR0aChidWZmZXIpKSwKCQlidWZmZXIpOwoJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQlyZXR1cm4gJGVsbSRjb3JlJEFycmF5JGVtcHR5OwoJfSBlbHNlIHsKCQl2YXIgdmFsdWUgPSBfdjAuYTsKCQlyZXR1cm4gdmFsdWU7Cgl9Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRjb21wcmVzcyA9IEYyKAoJZnVuY3Rpb24gKG1heWJlV2luZG93U2l6ZSwgYnVmKSB7CgkJaWYgKG1heWJlV2luZG93U2l6ZS4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIEEyKAoJCQkJJGVsbSRjb3JlJEFycmF5JHB1c2gsCgkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkRW5kT2ZCbG9jaywKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRBcnJheSRtYXAsCgkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJExpdGVyYWwsCgkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEJ5dGVBcnJheSRmcm9tQnl0ZXMoYnVmKSkpOwoJCX0gZWxzZSB7CgkJCXZhciB3aW5kb3dTaXplID0gbWF5YmVXaW5kb3dTaXplLmE7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRBcnJheSRwdXNoLAoJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJEVuZE9mQmxvY2ssCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkQXJyYXkkbWFwLAoJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEludGVybmFsJGNvZGVUb1N5bWJvbCwKCQkJCQlBMigKCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJExaNzckZW5jb2RlV2l0aE9wdGlvbnMsCgkJCQkJCXt3aW5kb3dTaXplOiB3aW5kb3dTaXplfSwKCQkJCQkJYnVmKSkpOwoJCX0KCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJGZsdXNoSWZOZWVkZWQgPSBGMygKCWZ1bmN0aW9uICh0YWcsIGJpdHNXcml0dGVuLCBlbmNvZGVycykgewoJCXJldHVybiAoYml0c1dyaXR0ZW4gPj0gMTYpID8gewoJCQliaXRzV3JpdHRlbjogYml0c1dyaXR0ZW4gLSAxNiwKCQkJZW5jb2RlcnM6IEEyKAoJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCUEyKCRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50MTYsICRlbG0kYnl0ZXMkQnl0ZXMkTEUsIHRhZyksCgkJCQllbmNvZGVycyksCgkJCXRhZzogdGFnID4+IDE2CgkJfSA6IHtiaXRzV3JpdHRlbjogYml0c1dyaXR0ZW4sIGVuY29kZXJzOiBlbmNvZGVycywgdGFnOiB0YWd9OwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRCaXRXcml0ZXIkd3JpdGVCaXRzID0gRjMoCglmdW5jdGlvbiAoYml0d2lkdGgsIGJpdHMsIHN0YXRlKSB7CgkJcmV0dXJuIEEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEJpdFdyaXRlciRmbHVzaElmTmVlZGVkLCBzdGF0ZS50YWcgfCAoYml0cyA8PCBzdGF0ZS5iaXRzV3JpdHRlbiksIHN0YXRlLmJpdHNXcml0dGVuICsgYml0d2lkdGgsIHN0YXRlLmVuY29kZXJzKTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kZW5jb2RlID0gRjIoCglmdW5jdGlvbiAoc3ltYm9sLCBfdjApIHsKCQl2YXIgdGFibGUgPSBfdjAuYTsKCQl2YXIgX3YxID0gQTIoJGVsbSRjb3JlJEFycmF5JGdldCwgc3ltYm9sLCB0YWJsZSk7CgkJaWYgKF92MS4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEJpdFdyaXRlciR3cml0ZUJpdHMsIDAsIDApOwoJCX0gZWxzZSB7CgkJCXZhciB3aWR0aCA9IF92MS5hLmEud2lkdGg7CgkJCXZhciBiaXRzID0gX3YxLmEuYS5iaXRzOwoJCQlyZXR1cm4gQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJHdyaXRlQml0cywgd2lkdGgsIGJpdHMpOwoJCX0KCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJGV4dHJhTGVuZ3RoID0gZnVuY3Rpb24gKHN5bWJvbCkgewoJaWYgKHN5bWJvbC4kID09PSAnU2hhcmUnKSB7CgkJdmFyIGxlbmd0aCA9IHN5bWJvbC5hOwoJCXJldHVybiAoKChsZW5ndGggPj0gMykgJiYgKGxlbmd0aCA8PSAxMCkpIHx8IChsZW5ndGggPT09IDI1OCkpID8gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcgOiAoKChsZW5ndGggPj0gMTEpICYmIChsZW5ndGggPD0gMTgpKSA/ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQlfVXRpbHNfVHVwbGUyKAoJCQkJMSwKCQkJCUEyKCRlbG0kY29yZSRCYXNpY3MkbW9kQnksIDIsIGxlbmd0aCAtIDExKSkpIDogKCgobGVuZ3RoID49IDE5KSAmJiAobGVuZ3RoIDw9IDM0KSkgPyAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJX1V0aWxzX1R1cGxlMigKCQkJCTIsCgkJCQlBMigkZWxtJGNvcmUkQmFzaWNzJG1vZEJ5LCA0LCBsZW5ndGggLSAxOSkpKSA6ICgoKGxlbmd0aCA+PSAzNSkgJiYgKGxlbmd0aCA8PSA2NikpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCV9VdGlsc19UdXBsZTIoCgkJCQkzLAoJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRtb2RCeSwgOCwgbGVuZ3RoIC0gMzUpKSkgOiAoKChsZW5ndGggPj0gNjcpICYmIChsZW5ndGggPD0gMTMwKSkgPyAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJX1V0aWxzX1R1cGxlMigKCQkJCTQsCgkJCQlBMigkZWxtJGNvcmUkQmFzaWNzJG1vZEJ5LCAxNiwgbGVuZ3RoIC0gNjcpKSkgOiAoKChsZW5ndGggPj0gMTMxKSAmJiAobGVuZ3RoIDw9IDI1NykpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCV9VdGlsc19UdXBsZTIoCgkJCQk1LAoJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRtb2RCeSwgMzIsIGxlbmd0aCAtIDEzMSkpKSA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nKSkpKSk7Cgl9IGVsc2UgewoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCX0KfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJFN5bWJvbCRlbmNvZGUgPSBGMygKCWZ1bmN0aW9uIChzeW1ib2wsIGh0cmVlcywgYml0V3JpdGVyKSB7CgkJdmFyIG1heWJlRXh0cmEgPSBmdW5jdGlvbiAoKSB7CgkJCXZhciBfdjIgPSAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkZXh0cmFMZW5ndGgoc3ltYm9sKTsKCQkJaWYgKF92Mi4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5OwoJCQl9IGVsc2UgewoJCQkJdmFyIF92MyA9IF92Mi5hOwoJCQkJdmFyIGJpdHMgPSBfdjMuYTsKCQkJCXZhciBleHRyYSA9IF92My5iOwoJCQkJcmV0dXJuIEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEJpdFdyaXRlciR3cml0ZUJpdHMsIGJpdHMsIGV4dHJhKTsKCQkJfQoJCX0oKTsKCQl2YXIgbWF5YmVEaXN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCQkJdmFyIF92MCA9ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJFN5bWJvbCRkaXN0YW5jZShzeW1ib2wpOwoJCQlpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgX3YxID0gX3YwLmE7CgkJCQl2YXIgY29kZV8gPSBfdjEuYTsKCQkJCXZhciBiaXRzID0gX3YxLmI7CgkJCQl2YXIgZXh0cmEgPSBfdjEuYzsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCUEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJGVuY29kZSwgY29kZV8sIGh0cmVlcy5kaXN0YW5jZSksCgkJCQkJKGJpdHMgPiAwKSA/IEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEJpdFdyaXRlciR3cml0ZUJpdHMsIGJpdHMsIGV4dHJhKSA6ICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHkpOwoJCQl9CgkJfSgpOwoJCXJldHVybiBtYXliZURpc3RhbmNlKAoJCQltYXliZUV4dHJhKAoJCQkJQTMoCgkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kZW5jb2RlLAoJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJFN5bWJvbCRjb2RlKHN5bWJvbCksCgkJCQkJaHRyZWVzLmxpdGVyYWwsCgkJCQkJYml0V3JpdGVyKSkpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkYml0d2lkdGhfY29kZV9vcmRlciA9IF9MaXN0X2Zyb21BcnJheSgKCVsxNiwgMTcsIDE4LCAwLCA4LCA3LCA5LCA2LCAxMCwgNSwgMTEsIDQsIDEyLCAzLCAxMywgMiwgMTQsIDEsIDE1XSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkY2FsY3VsYXRlQ29kZXMgPSBmdW5jdGlvbiAocnVuTGVuZ3RocykgewoJdmFyIGxvb3AyID0gRjMoCgkJZnVuY3Rpb24gKHIsIGMsIGNvZGVzKSB7CgkJCWxvb3AyOgoJCQl3aGlsZSAodHJ1ZSkgewoJCQkJaWYgKGMgPj0gMykgewoJCQkJCXZhciBuID0gQTIoJGVsbSRjb3JlJEJhc2ljcyRtaW4sIDYsIGMpOwoJCQkJCXZhciAkdGVtcCRyID0gciwKCQkJCQkJJHRlbXAkYyA9IGMgLSBuLAoJCQkJCQkkdGVtcCRjb2RlcyA9IEEyKAoJCQkJCQkkZWxtJGNvcmUkQXJyYXkkcHVzaCwKCQkJCQkJX1V0aWxzX1R1cGxlMygxNiwgMiwgbiAtIDMpLAoJCQkJCQljb2Rlcyk7CgkJCQkJciA9ICR0ZW1wJHI7CgkJCQkJYyA9ICR0ZW1wJGM7CgkJCQkJY29kZXMgPSAkdGVtcCRjb2RlczsKCQkJCQljb250aW51ZSBsb29wMjsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGNvcmUkQXJyYXkkYXBwZW5kLAoJCQkJCQljb2RlcywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkQXJyYXkkcmVwZWF0LAoJCQkJCQkJYywKCQkJCQkJCV9VdGlsc19UdXBsZTMoci52YWx1ZSwgMCwgMCkpKTsKCQkJCX0KCQkJfQoJCX0pOwoJdmFyIGxvb3AxID0gRjIoCgkJZnVuY3Rpb24gKGMsIGNvZGVzKSB7CgkJCWxvb3AxOgoJCQl3aGlsZSAodHJ1ZSkgewoJCQkJaWYgKGMgPj0gMTEpIHsKCQkJCQl2YXIgbiA9IEEyKCRlbG0kY29yZSRCYXNpY3MkbWluLCAxMzgsIGMpOwoJCQkJCXZhciAkdGVtcCRjID0gYyAtIG4sCgkJCQkJCSR0ZW1wJGNvZGVzID0gQTIoCgkJCQkJCSRlbG0kY29yZSRBcnJheSRwdXNoLAoJCQkJCQlfVXRpbHNfVHVwbGUzKDE4LCA3LCBuIC0gMTEpLAoJCQkJCQljb2Rlcyk7CgkJCQkJYyA9ICR0ZW1wJGM7CgkJCQkJY29kZXMgPSAkdGVtcCRjb2RlczsKCQkJCQljb250aW51ZSBsb29wMTsKCQkJCX0gZWxzZSB7CgkJCQkJaWYgKGMgPj0gMykgewoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkZWxtJGNvcmUkQXJyYXkkcHVzaCwKCQkJCQkJCV9VdGlsc19UdXBsZTMoMTcsIDMsIGMgLSAzKSwKCQkJCQkJCWNvZGVzKTsKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkZWxtJGNvcmUkQXJyYXkkYXBwZW5kLAoJCQkJCQkJY29kZXMsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkQXJyYXkkcmVwZWF0LAoJCQkJCQkJCWMsCgkJCQkJCQkJX1V0aWxzX1R1cGxlMygwLCAwLCAwKSkpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0pOwoJdmFyIGZvbGRlciA9IEYyKAoJCWZ1bmN0aW9uIChyLCBjb2RlcykgewoJCQlyZXR1cm4gKCFyLnZhbHVlKSA/IEEyKGxvb3AxLCByLmNvdW50LCBjb2RlcykgOiBBMygKCQkJCWxvb3AyLAoJCQkJciwKCQkJCXIuY291bnQgLSAxLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJEFycmF5JHB1c2gsCgkJCQkJX1V0aWxzX1R1cGxlMyhyLnZhbHVlLCAwLCAwKSwKCQkJCQljb2RlcykpOwoJCX0pOwoJcmV0dXJuIEEzKCRlbG0kY29yZSRBcnJheSRmb2xkbCwgZm9sZGVyLCAkZWxtJGNvcmUkQXJyYXkkZW1wdHksIHJ1bkxlbmd0aHMpOwp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kZ2V0V2lkdGggPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgd2lkdGggPSBfdjAuYS53aWR0aDsKCXJldHVybiB3aWR0aDsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJGxvb2t1cCA9IEYyKAoJZnVuY3Rpb24gKHN5bWJvbCwgX3YwKSB7CgkJdmFyIGFycmF5ID0gX3YwLmE7CgkJcmV0dXJuIEEyKCRlbG0kY29yZSRBcnJheSRnZXQsIHN5bWJvbCwgYXJyYXkpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkY2FsY3VsYXRlUnVuTGVuZ3RocyA9IEYyKAoJZnVuY3Rpb24gKGxlbmd0aHMsIGFjY3VtKSB7CgkJY2FsY3VsYXRlUnVuTGVuZ3RoczoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIWxlbmd0aHMuYikgewoJCQkJcmV0dXJuIEEzKCRlbG0kY29yZSRMaXN0JGZvbGRyLCAkZWxtJGNvcmUkQXJyYXkkcHVzaCwgJGVsbSRjb3JlJEFycmF5JGVtcHR5LCBhY2N1bSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgX3YxID0gbGVuZ3Rocy5hOwoJCQkJdmFyIGUgPSBfdjEuYTsKCQkJCXZhciBzaXplID0gX3YxLmI7CgkJCQl2YXIgcmVzdCA9IGxlbmd0aHMuYjsKCQkJCXZhciBsaXN0ID0gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkaW5kZXhlZE1hcCwKCQkJCQkkZWxtJGNvcmUkVHVwbGUkcGFpciwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQlmdW5jdGlvbiAoeCkgewoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCQkJCQkwLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkSHVmZm1hbiRnZXRXaWR0aCwKCQkJCQkJCQkJQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kbG9va3VwLCB4LCBlKSkpOwoJCQkJCQl9LAoJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRyYW5nZSwgMCwgc2l6ZSAtIDEpKSk7CgkJCQl2YXIgZm9sZGVyID0gRjIoCgkJCQkJZnVuY3Rpb24gKF92MywgcnVuTGVuZ3RocykgewoJCQkJCQl2YXIgaSA9IF92My5hOwoJCQkJCQl2YXIgYyA9IF92My5iOwoJCQkJCQlpZiAoIXJ1bkxlbmd0aHMuYikgewoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJe2NvdW50OiAxLCB2YWx1ZTogY30sCgkJCQkJCQkJcnVuTGVuZ3Rocyk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgbGFzdCA9IHJ1bkxlbmd0aHMuYTsKCQkJCQkJCXZhciByZW1haW5pbmcgPSBydW5MZW5ndGhzLmI7CgkJCQkJCQlyZXR1cm4gX1V0aWxzX2VxKGxhc3QudmFsdWUsIGMpID8gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQl7Y291bnQ6IGxhc3QuY291bnQgKyAxLCB2YWx1ZTogbGFzdC52YWx1ZX0sCgkJCQkJCQkJcmVtYWluaW5nKSA6IEEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJe2NvdW50OiAxLCB2YWx1ZTogY30sCgkJCQkJCQkJcnVuTGVuZ3Rocyk7CgkJCQkJCX0KCQkJCQl9KTsKCQkJCXZhciAkdGVtcCRsZW5ndGhzID0gcmVzdCwKCQkJCQkkdGVtcCRhY2N1bSA9IEEzKCRlbG0kY29yZSRMaXN0JGZvbGRsLCBmb2xkZXIsIGFjY3VtLCBsaXN0KTsKCQkJCWxlbmd0aHMgPSAkdGVtcCRsZW5ndGhzOwoJCQkJYWNjdW0gPSAkdGVtcCRhY2N1bTsKCQkJCWNvbnRpbnVlIGNhbGN1bGF0ZVJ1bkxlbmd0aHM7CgkJCX0KCQl9Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJFN5bWJvbCRidWlsZEJpdFdpZHRoQ29kZXMgPSBGMygKCWZ1bmN0aW9uIChsaXRlcmFsQ29kZUNvdW50LCBkaXN0YW5jZUNvZGVDb3VudCwgdHJlZXMpIHsKCQl2YXIgcnVuTGVuZ3RocyA9IEEyKAoJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkY2FsY3VsYXRlUnVuTGVuZ3RocywKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCV9VdGlsc19UdXBsZTIodHJlZXMubGl0ZXJhbCwgbGl0ZXJhbENvZGVDb3VudCksCgkJCQkJX1V0aWxzX1R1cGxlMih0cmVlcy5kaXN0YW5jZSwgZGlzdGFuY2VDb2RlQ291bnQpCgkJCQldKSwKCQkJX0xpc3RfTmlsKTsKCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJGNhbGN1bGF0ZUNvZGVzKHJ1bkxlbmd0aHMpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkcG9zaXRpb25Mb29wID0gRjMoCglmdW5jdGlvbiAocHJlZGljYXRlLCBpLCBlbGVtZW50cykgewoJCXBvc2l0aW9uTG9vcDoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIWVsZW1lbnRzLmIpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJfSBlbHNlIHsKCQkJCXZhciB4ID0gZWxlbWVudHMuYTsKCQkJCXZhciB4cyA9IGVsZW1lbnRzLmI7CgkJCQlpZiAocHJlZGljYXRlKHgpKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KGkpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgJHRlbXAkcHJlZGljYXRlID0gcHJlZGljYXRlLAoJCQkJCQkkdGVtcCRpID0gaSArIDEsCgkJCQkJCSR0ZW1wJGVsZW1lbnRzID0geHM7CgkJCQkJcHJlZGljYXRlID0gJHRlbXAkcHJlZGljYXRlOwoJCQkJCWkgPSAkdGVtcCRpOwoJCQkJCWVsZW1lbnRzID0gJHRlbXAkZWxlbWVudHM7CgkJCQkJY29udGludWUgcG9zaXRpb25Mb29wOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkcG9zaXRpb24gPSBGMigKCWZ1bmN0aW9uIChwcmVkaWNhdGUsIGVsZW1lbnRzKSB7CgkJcmV0dXJuIEEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJFN5bWJvbCRwb3NpdGlvbkxvb3AsIHByZWRpY2F0ZSwgMCwgZWxlbWVudHMpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSHVmZm1hbiRwb3NpdGlvbkZyb21UaGVFbmQgPSBGMigKCWZ1bmN0aW9uIChwcmVkaWNhdGVkLCBhcnJheSkgewoJCXZhciBmb2xkZXIgPSBGMigKCQkJZnVuY3Rpb24gKGVsZW1lbnQsIF92MSkgewoJCQkJdmFyIGluZGV4ID0gX3YxLmE7CgkJCQl2YXIgYWNjdW0gPSBfdjEuYjsKCQkJCWlmIChhY2N1bS4kID09PSAnSnVzdCcpIHsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihpbmRleCwgYWNjdW0pOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gcHJlZGljYXRlZChlbGVtZW50KSA/IF9VdGlsc19UdXBsZTIoCgkJCQkJCWluZGV4LAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdChpbmRleCkpIDogX1V0aWxzX1R1cGxlMihpbmRleCAtIDEsICRlbG0kY29yZSRNYXliZSROb3RoaW5nKTsKCQkJCX0KCQkJfSk7CgkJdmFyIGZpbmFsSW5kZXggPSAkZWxtJGNvcmUkQXJyYXkkbGVuZ3RoKGFycmF5KSAtIDE7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQlmdW5jdGlvbiAodikgewoJCQkJcmV0dXJuIGZpbmFsSW5kZXggLSB2OwoJCQl9LAoJCQlBMygKCQkJCSRlbG0kY29yZSRBcnJheSRmb2xkciwKCQkJCWZvbGRlciwKCQkJCV9VdGlsc19UdXBsZTIoZmluYWxJbmRleCwgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpLAoJCQkJYXJyYXkpLmIpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSHVmZm1hbiR1c2VkTWF4U3ltYm9sID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIGFycmF5ID0gX3YwLmE7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQlmdW5jdGlvbiAodHJhaWxpbmdaZXJvcykgewoJCQlyZXR1cm4gKCRlbG0kY29yZSRBcnJheSRsZW5ndGgoYXJyYXkpIC0gMSkgLSB0cmFpbGluZ1plcm9zOwoJCX0sCgkJQTIoCgkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJHBvc2l0aW9uRnJvbVRoZUVuZCwKCQkJZnVuY3Rpb24gKF92MSkgewoJCQkJdmFyIHZhbHVlID0gX3YxLmE7CgkJCQlyZXR1cm4gdmFsdWUud2lkdGggPiAwOwoJCQl9LAoJCQlhcnJheSkpOwp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJHdyaXRlRHluYW1pY0h1ZmZtYW5Db2RlYyA9IEYyKAoJZnVuY3Rpb24gKHRyZWVzLCBiaXRXcml0ZXIpIHsKCQl2YXIgbGl0ZXJhbF9jb2RlX2NvdW50ID0gQTIoCgkJCSRlbG0kY29yZSRCYXNpY3MkbWF4LAoJCQkyNTcsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkJMCwKCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJHVzZWRNYXhTeW1ib2wodHJlZXMubGl0ZXJhbCkpICsgMSk7CgkJdmFyIGRpc3RhbmNlX2NvZGVfY291bnQgPSBBMigKCQkJJGVsbSRjb3JlJEJhc2ljcyRtYXgsCgkJCTEsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkJMCwKCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJHVzZWRNYXhTeW1ib2wodHJlZXMuZGlzdGFuY2UpKSArIDEpOwoJCXZhciBjb2RlcyA9IEEzKAoJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkYnVpbGRCaXRXaWR0aENvZGVzLAoJCQlsaXRlcmFsX2NvZGVfY291bnQsCgkJCWRpc3RhbmNlX2NvZGVfY291bnQsCgkJCXtkaXN0YW5jZTogdHJlZXMuZGlzdGFuY2UsIGxpdGVyYWw6IHRyZWVzLmxpdGVyYWx9KTsKCQl2YXIgY29kZUNvdW50cyA9IEEzKAoJCQkkZWxtJGNvcmUkQXJyYXkkZm9sZGwsCgkJCWZ1bmN0aW9uIChfdjIpIHsKCQkJCXZhciBpID0gX3YyLmE7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJHVwZGF0ZSwKCQkJCQlpLAoJCQkJCWZ1bmN0aW9uICh2KSB7CgkJCQkJCXJldHVybiB2ICsgMTsKCQkJCQl9KTsKCQkJfSwKCQkJQTIoJGVsbSRjb3JlJEFycmF5JHJlcGVhdCwgMTksIDApLAoJCQljb2Rlcyk7CgkJdmFyIGJpdFdpZHRoRW5jb2RlciA9IEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJGZyb21GcmVxdWVuY2llcywgY29kZUNvdW50cywgNyk7CgkJdmFyIGJpdHdpZHRoQ29kZUNvdW50ID0gQTIoCgkJCSRlbG0kY29yZSRCYXNpY3MkbWF4LAoJCQk0LAoJCQlBMigKCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCTAsCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCWZ1bmN0aW9uICh0cmFpbGluZ1plcm9zKSB7CgkJCQkJCXJldHVybiAxOSAtIHRyYWlsaW5nWmVyb3M7CgkJCQkJfSwKCQkJCQlBMigKCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkU3ltYm9sJHBvc2l0aW9uLAoJCQkJCQlmdW5jdGlvbiAoaSkgewoJCQkJCQkJdmFyIF92MSA9IEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJGxvb2t1cCwgaSwgYml0V2lkdGhFbmNvZGVyKTsKCQkJCQkJCWlmIChfdjEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgdmFsdWUgPSBfdjEuYTsKCQkJCQkJCQlyZXR1cm4gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kZ2V0V2lkdGgodmFsdWUpID4gMDsKCQkJCQkJCX0KCQkJCQkJfSwKCQkJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZSgkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkYml0d2lkdGhfY29kZV9vcmRlcikpKSkpOwoJCXZhciB2MSA9IGZ1bmN0aW9uICh3cml0ZXIpIHsKCQkJcmV0dXJuIEEzKAoJCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCQlGMigKCQkJCQlmdW5jdGlvbiAoaSwgY3VycmVudCkgewoJCQkJCQl2YXIgd2lkdGggPSBfVXRpbHNfZXEoCgkJCQkJCQlBMigkZWxtJGNvcmUkQXJyYXkkZ2V0LCBpLCBjb2RlQ291bnRzKSwKCQkJCQkJCSRlbG0kY29yZSRNYXliZSRKdXN0KDApKSA/IDAgOiBBMigKCQkJCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCQkJCTAsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJGdldFdpZHRoLAoJCQkJCQkJCUEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJGxvb2t1cCwgaSwgYml0V2lkdGhFbmNvZGVyKSkpOwoJCQkJCQlyZXR1cm4gQTMoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJHdyaXRlQml0cywgMywgd2lkdGgsIGN1cnJlbnQpOwoJCQkJCX0pLAoJCQkJd3JpdGVyLAoJCQkJQTIoJGVsbSRjb3JlJExpc3QkdGFrZSwgYml0d2lkdGhDb2RlQ291bnQsICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJFN5bWJvbCRiaXR3aWR0aF9jb2RlX29yZGVyKSk7CgkJfTsKCQl2YXIgdjIgPSBmdW5jdGlvbiAod3JpdGVyKSB7CgkJCXJldHVybiBBMygKCQkJCSRlbG0kY29yZSRBcnJheSRmb2xkbCwKCQkJCUYyKAoJCQkJCWZ1bmN0aW9uIChfdjAsIGN1cnJlbnQpIHsKCQkJCQkJdmFyIGNvZGVfID0gX3YwLmE7CgkJCQkJCXZhciBiaXRzID0gX3YwLmI7CgkJCQkJCXZhciBleHRyYSA9IF92MC5jOwoJCQkJCQlyZXR1cm4gKGJpdHMgPiAwKSA/IEEzKAoJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJHdyaXRlQml0cywKCQkJCQkJCWJpdHMsCgkJCQkJCQlleHRyYSwKCQkJCQkJCUEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJGVuY29kZSwgY29kZV8sIGJpdFdpZHRoRW5jb2RlciwgY3VycmVudCkpIDogQTMoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kZW5jb2RlLCBjb2RlXywgYml0V2lkdGhFbmNvZGVyLCBjdXJyZW50KTsKCQkJCQl9KSwKCQkJCXdyaXRlciwKCQkJCWNvZGVzKTsKCQl9OwoJCXJldHVybiB2MigKCQkJdjEoCgkJCQlBMygKCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRCaXRXcml0ZXIkd3JpdGVCaXRzLAoJCQkJCTQsCgkJCQkJYml0d2lkdGhDb2RlQ291bnQgLSA0LAoJCQkJCUEzKAoJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRCaXRXcml0ZXIkd3JpdGVCaXRzLAoJCQkJCQk1LAoJCQkJCQlkaXN0YW5jZV9jb2RlX2NvdW50IC0gMSwKCQkJCQkJQTMoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJHdyaXRlQml0cywgNSwgbGl0ZXJhbF9jb2RlX2NvdW50IC0gMjU3LCBiaXRXcml0ZXIpKSkpKTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkSW50ZXJuYWwkZW5jb2RlQ29tcHJlc3NEeW5hbWljID0gRjMoCglmdW5jdGlvbiAobWF5YmVXaW5kb3dTaXplLCBidWYsIGJpdFdyaXRlcikgewoJCXZhciBjb21wcmVzc2VkID0gQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkSW50ZXJuYWwkY29tcHJlc3MsIG1heWJlV2luZG93U2l6ZSwgYnVmKTsKCQl2YXIgaHVmZm1hblRyZWUgPSAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkYnVpbGREeW5hbWljSHVmZm1hbkNvZGVjKGNvbXByZXNzZWQpOwoJCXZhciBodWZmbWFuVHJlZVdyaXRlciA9IEEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJFN5bWJvbCR3cml0ZUR5bmFtaWNIdWZmbWFuQ29kZWMsIGh1ZmZtYW5UcmVlLCBiaXRXcml0ZXIpOwoJCXJldHVybiBBMygKCQkJJGVsbSRjb3JlJEFycmF5JGZvbGRsLAoJCQlGMigKCQkJCWZ1bmN0aW9uIChzeW1ib2wsIGZpcnN0KSB7CgkJCQkJcmV0dXJuIEEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJFN5bWJvbCRlbmNvZGUsIHN5bWJvbCwgaHVmZm1hblRyZWUsIGZpcnN0KTsKCQkJCX0pLAoJCQlodWZmbWFuVHJlZVdyaXRlciwKCQkJY29tcHJlc3NlZCk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEJpdFdyaXRlciR3cml0ZUJpdCA9IGZ1bmN0aW9uIChiKSB7CglpZiAoIWIpIHsKCQlyZXR1cm4gQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJHdyaXRlQml0cywgMSwgMCk7Cgl9IGVsc2UgewoJCXJldHVybiBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRCaXRXcml0ZXIkd3JpdGVCaXRzLCAxLCAxKTsKCX0KfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEludGVybmFsJGVuY29kZUR5bmFtaWNCbG9jayA9IEYzKAoJZnVuY3Rpb24gKHdpbmRvd1NpemUsIF92MCwgYml0V3JpdGVyKSB7CgkJdmFyIGlzTGFzdEJsb2NrID0gX3YwLmE7CgkJdmFyIGJ1ZmZlciA9IF92MC5iOwoJCXJldHVybiBBMygKCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkSW50ZXJuYWwkZW5jb2RlQ29tcHJlc3NEeW5hbWljLAoJCQl3aW5kb3dTaXplLAoJCQlidWZmZXIsCgkJCUEzKAoJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJHdyaXRlQml0cywKCQkJCTIsCgkJCQkyLAoJCQkJQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJHdyaXRlQml0LCBpc0xhc3RCbG9jaywgYml0V3JpdGVyKSkpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRCaXRXcml0ZXIkZmx1c2hMb29wID0gRjMoCglmdW5jdGlvbiAodGFnLCBiaXRzV3JpdHRlbiwgZW5jb2RlcnMpIHsKCQlmbHVzaExvb3A6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKGJpdHNXcml0dGVuID4gMCkgewoJCQkJdmFyICR0ZW1wJHRhZyA9IHRhZyA+PiA4LAoJCQkJCSR0ZW1wJGJpdHNXcml0dGVuID0gQTIoJGVsbSRjb3JlJEJhc2ljcyRtYXgsIDAsIGJpdHNXcml0dGVuIC0gOCksCgkJCQkJJHRlbXAkZW5jb2RlcnMgPSBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50OCh0YWcpLAoJCQkJCWVuY29kZXJzKTsKCQkJCXRhZyA9ICR0ZW1wJHRhZzsKCQkJCWJpdHNXcml0dGVuID0gJHRlbXAkYml0c1dyaXR0ZW47CgkJCQllbmNvZGVycyA9ICR0ZW1wJGVuY29kZXJzOwoJCQkJY29udGludWUgZmx1c2hMb29wOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIHtiaXRzV3JpdHRlbjogYml0c1dyaXR0ZW4sIGVuY29kZXJzOiBlbmNvZGVycywgdGFnOiB0YWd9OwoJCQl9CgkJfQoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRCaXRXcml0ZXIkZmx1c2ggPSBmdW5jdGlvbiAoc3RhdGUpIHsKCXJldHVybiBBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRCaXRXcml0ZXIkZmx1c2hMb29wLCBzdGF0ZS50YWcsIHN0YXRlLmJpdHNXcml0dGVuLCBzdGF0ZS5lbmNvZGVycyk7Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRCaXRXcml0ZXIkcnVuID0gZnVuY3Rpb24gKHN0YXRlKSB7CglyZXR1cm4gJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShzdGF0ZS5lbmNvZGVycyk7Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRlbmNvZGVEeW5hbWljID0gRjIoCglmdW5jdGlvbiAod2luZG93U2l6ZSwgYnVmZmVyKSB7CgkJdmFyIGVuY29kZWRDaHVua3MgPSBBMigKCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRlbmNvZGVEeW5hbWljQmxvY2sod2luZG93U2l6ZSksCgkJCUEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEludGVybmFsJGNodW5rcywgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkSW50ZXJuYWwkZGVmYXVsdF9ibG9ja19zaXplLCBidWZmZXIpKTsKCQlyZXR1cm4gJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkZW5jb2RlKAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRzZXF1ZW5jZSgKCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEJpdFdyaXRlciRydW4oCgkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJGZsdXNoKAoJCQkJCQlBMygKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkJCQkJRjIoCgkJCQkJCQkJZnVuY3Rpb24gKGNodW5rLCBmaXJzdCkgewoJCQkJCQkJCQlyZXR1cm4gY2h1bmsoZmlyc3QpOwoJCQkJCQkJCX0pLAoJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJGVtcHR5LAoJCQkJCQkJZW5jb2RlZENodW5rcykpKSkpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRtYXhfbm9uX2NvbXByZXNzZWRfYmxvY2tfc2l6ZSA9IDY1NTM1Owp2YXIgJGVsbSRjb3JlJEFycmF5JHNsaWNlTGVmdCA9IEYyKAoJZnVuY3Rpb24gKGZyb20sIGFycmF5KSB7CgkJdmFyIGxlbiA9IGFycmF5LmE7CgkJdmFyIHRyZWUgPSBhcnJheS5jOwoJCXZhciB0YWlsID0gYXJyYXkuZDsKCQlpZiAoIWZyb20pIHsKCQkJcmV0dXJuIGFycmF5OwoJCX0gZWxzZSB7CgkJCWlmIChfVXRpbHNfY21wKAoJCQkJZnJvbSwKCQkJCSRlbG0kY29yZSRBcnJheSR0YWlsSW5kZXgobGVuKSkgPiAtMSkgewoJCQkJcmV0dXJuIEE0KAoJCQkJCSRlbG0kY29yZSRBcnJheSRBcnJheV9lbG1fYnVpbHRpbiwKCQkJCQlsZW4gLSBmcm9tLAoJCQkJCSRlbG0kY29yZSRBcnJheSRzaGlmdFN0ZXAsCgkJCQkJJGVsbSRjb3JlJEVsbSRKc0FycmF5JGVtcHR5LAoJCQkJCUEzKAoJCQkJCQkkZWxtJGNvcmUkRWxtJEpzQXJyYXkkc2xpY2UsCgkJCQkJCWZyb20gLSAkZWxtJGNvcmUkQXJyYXkkdGFpbEluZGV4KGxlbiksCgkJCQkJCSRlbG0kY29yZSRFbG0kSnNBcnJheSRsZW5ndGgodGFpbCksCgkJCQkJCXRhaWwpKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBza2lwTm9kZXMgPSAoZnJvbSAvICRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3IpIHwgMDsKCQkJCXZhciBoZWxwZXIgPSBGMigKCQkJCQlmdW5jdGlvbiAobm9kZSwgYWNjKSB7CgkJCQkJCWlmIChub2RlLiQgPT09ICdTdWJUcmVlJykgewoJCQkJCQkJdmFyIHN1YlRyZWUgPSBub2RlLmE7CgkJCQkJCQlyZXR1cm4gQTMoJGVsbSRjb3JlJEVsbSRKc0FycmF5JGZvbGRyLCBoZWxwZXIsIGFjYywgc3ViVHJlZSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgbGVhZiA9IG5vZGUuYTsKCQkJCQkJCXJldHVybiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBsZWFmLCBhY2MpOwoJCQkJCQl9CgkJCQkJfSk7CgkJCQl2YXIgbGVhZk5vZGVzID0gQTMoCgkJCQkJJGVsbSRjb3JlJEVsbSRKc0FycmF5JGZvbGRyLAoJCQkJCWhlbHBlciwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVt0YWlsXSksCgkJCQkJdHJlZSk7CgkJCQl2YXIgbm9kZXNUb0luc2VydCA9IEEyKCRlbG0kY29yZSRMaXN0JGRyb3AsIHNraXBOb2RlcywgbGVhZk5vZGVzKTsKCQkJCWlmICghbm9kZXNUb0luc2VydC5iKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRBcnJheSRlbXB0eTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGhlYWQgPSBub2Rlc1RvSW5zZXJ0LmE7CgkJCQkJdmFyIHJlc3QgPSBub2Rlc1RvSW5zZXJ0LmI7CgkJCQkJdmFyIGZpcnN0U2xpY2UgPSBmcm9tIC0gKHNraXBOb2RlcyAqICRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3IpOwoJCQkJCXZhciBpbml0aWFsQnVpbGRlciA9IHsKCQkJCQkJbm9kZUxpc3Q6IF9MaXN0X05pbCwKCQkJCQkJbm9kZUxpc3RTaXplOiAwLAoJCQkJCQl0YWlsOiBBMygKCQkJCQkJCSRlbG0kY29yZSRFbG0kSnNBcnJheSRzbGljZSwKCQkJCQkJCWZpcnN0U2xpY2UsCgkJCQkJCQkkZWxtJGNvcmUkRWxtJEpzQXJyYXkkbGVuZ3RoKGhlYWQpLAoJCQkJCQkJaGVhZCkKCQkJCQl9OwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJEFycmF5JGJ1aWxkZXJUb0FycmF5LAoJCQkJCQl0cnVlLAoJCQkJCQlBMygkZWxtJGNvcmUkTGlzdCRmb2xkbCwgJGVsbSRjb3JlJEFycmF5JGFwcGVuZEhlbHBCdWlsZGVyLCBpbml0aWFsQnVpbGRlciwgcmVzdCkpOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkQXJyYXkkZmV0Y2hOZXdUYWlsID0gRjQoCglmdW5jdGlvbiAoc2hpZnQsIGVuZCwgdHJlZUVuZCwgdHJlZSkgewoJCWZldGNoTmV3VGFpbDoKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgcG9zID0gJGVsbSRjb3JlJEFycmF5JGJpdE1hc2sgJiAodHJlZUVuZCA+Pj4gc2hpZnQpOwoJCQl2YXIgX3YwID0gQTIoJGVsbSRjb3JlJEVsbSRKc0FycmF5JHVuc2FmZUdldCwgcG9zLCB0cmVlKTsKCQkJaWYgKF92MC4kID09PSAnU3ViVHJlZScpIHsKCQkJCXZhciBzdWIgPSBfdjAuYTsKCQkJCXZhciAkdGVtcCRzaGlmdCA9IHNoaWZ0IC0gJGVsbSRjb3JlJEFycmF5JHNoaWZ0U3RlcCwKCQkJCQkkdGVtcCRlbmQgPSBlbmQsCgkJCQkJJHRlbXAkdHJlZUVuZCA9IHRyZWVFbmQsCgkJCQkJJHRlbXAkdHJlZSA9IHN1YjsKCQkJCXNoaWZ0ID0gJHRlbXAkc2hpZnQ7CgkJCQllbmQgPSAkdGVtcCRlbmQ7CgkJCQl0cmVlRW5kID0gJHRlbXAkdHJlZUVuZDsKCQkJCXRyZWUgPSAkdGVtcCR0cmVlOwoJCQkJY29udGludWUgZmV0Y2hOZXdUYWlsOwoJCQl9IGVsc2UgewoJCQkJdmFyIHZhbHVlcyA9IF92MC5hOwoJCQkJcmV0dXJuIEEzKCRlbG0kY29yZSRFbG0kSnNBcnJheSRzbGljZSwgMCwgJGVsbSRjb3JlJEFycmF5JGJpdE1hc2sgJiBlbmQsIHZhbHVlcyk7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRBcnJheSRob2lzdFRyZWUgPSBGMygKCWZ1bmN0aW9uIChvbGRTaGlmdCwgbmV3U2hpZnQsIHRyZWUpIHsKCQlob2lzdFRyZWU6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKChfVXRpbHNfY21wKG9sZFNoaWZ0LCBuZXdTaGlmdCkgPCAxKSB8fCAoISRlbG0kY29yZSRFbG0kSnNBcnJheSRsZW5ndGgodHJlZSkpKSB7CgkJCQlyZXR1cm4gdHJlZTsKCQkJfSBlbHNlIHsKCQkJCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkRWxtJEpzQXJyYXkkdW5zYWZlR2V0LCAwLCB0cmVlKTsKCQkJCWlmIChfdjAuJCA9PT0gJ1N1YlRyZWUnKSB7CgkJCQkJdmFyIHN1YiA9IF92MC5hOwoJCQkJCXZhciAkdGVtcCRvbGRTaGlmdCA9IG9sZFNoaWZ0IC0gJGVsbSRjb3JlJEFycmF5JHNoaWZ0U3RlcCwKCQkJCQkJJHRlbXAkbmV3U2hpZnQgPSBuZXdTaGlmdCwKCQkJCQkJJHRlbXAkdHJlZSA9IHN1YjsKCQkJCQlvbGRTaGlmdCA9ICR0ZW1wJG9sZFNoaWZ0OwoJCQkJCW5ld1NoaWZ0ID0gJHRlbXAkbmV3U2hpZnQ7CgkJCQkJdHJlZSA9ICR0ZW1wJHRyZWU7CgkJCQkJY29udGludWUgaG9pc3RUcmVlOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gdHJlZTsKCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJEFycmF5JHNsaWNlVHJlZSA9IEYzKAoJZnVuY3Rpb24gKHNoaWZ0LCBlbmRJZHgsIHRyZWUpIHsKCQl2YXIgbGFzdFBvcyA9ICRlbG0kY29yZSRBcnJheSRiaXRNYXNrICYgKGVuZElkeCA+Pj4gc2hpZnQpOwoJCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkRWxtJEpzQXJyYXkkdW5zYWZlR2V0LCBsYXN0UG9zLCB0cmVlKTsKCQlpZiAoX3YwLiQgPT09ICdTdWJUcmVlJykgewoJCQl2YXIgc3ViID0gX3YwLmE7CgkJCXZhciBuZXdTdWIgPSBBMygkZWxtJGNvcmUkQXJyYXkkc2xpY2VUcmVlLCBzaGlmdCAtICRlbG0kY29yZSRBcnJheSRzaGlmdFN0ZXAsIGVuZElkeCwgc3ViKTsKCQkJcmV0dXJuICghJGVsbSRjb3JlJEVsbSRKc0FycmF5JGxlbmd0aChuZXdTdWIpKSA/IEEzKCRlbG0kY29yZSRFbG0kSnNBcnJheSRzbGljZSwgMCwgbGFzdFBvcywgdHJlZSkgOiBBMygKCQkJCSRlbG0kY29yZSRFbG0kSnNBcnJheSR1bnNhZmVTZXQsCgkJCQlsYXN0UG9zLAoJCQkJJGVsbSRjb3JlJEFycmF5JFN1YlRyZWUobmV3U3ViKSwKCQkJCUEzKCRlbG0kY29yZSRFbG0kSnNBcnJheSRzbGljZSwgMCwgbGFzdFBvcyArIDEsIHRyZWUpKTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gQTMoJGVsbSRjb3JlJEVsbSRKc0FycmF5JHNsaWNlLCAwLCBsYXN0UG9zLCB0cmVlKTsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRBcnJheSRzbGljZVJpZ2h0ID0gRjIoCglmdW5jdGlvbiAoZW5kLCBhcnJheSkgewoJCXZhciBsZW4gPSBhcnJheS5hOwoJCXZhciBzdGFydFNoaWZ0ID0gYXJyYXkuYjsKCQl2YXIgdHJlZSA9IGFycmF5LmM7CgkJdmFyIHRhaWwgPSBhcnJheS5kOwoJCWlmIChfVXRpbHNfZXEoZW5kLCBsZW4pKSB7CgkJCXJldHVybiBhcnJheTsKCQl9IGVsc2UgewoJCQlpZiAoX1V0aWxzX2NtcCgKCQkJCWVuZCwKCQkJCSRlbG0kY29yZSRBcnJheSR0YWlsSW5kZXgobGVuKSkgPiAtMSkgewoJCQkJcmV0dXJuIEE0KAoJCQkJCSRlbG0kY29yZSRBcnJheSRBcnJheV9lbG1fYnVpbHRpbiwKCQkJCQllbmQsCgkJCQkJc3RhcnRTaGlmdCwKCQkJCQl0cmVlLAoJCQkJCUEzKCRlbG0kY29yZSRFbG0kSnNBcnJheSRzbGljZSwgMCwgJGVsbSRjb3JlJEFycmF5JGJpdE1hc2sgJiBlbmQsIHRhaWwpKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBlbmRJZHggPSAkZWxtJGNvcmUkQXJyYXkkdGFpbEluZGV4KGVuZCk7CgkJCQl2YXIgZGVwdGggPSAkZWxtJGNvcmUkQmFzaWNzJGZsb29yKAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGxvZ0Jhc2UsCgkJCQkJCSRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3IsCgkJCQkJCUEyKCRlbG0kY29yZSRCYXNpY3MkbWF4LCAxLCBlbmRJZHggLSAxKSkpOwoJCQkJdmFyIG5ld1NoaWZ0ID0gQTIoJGVsbSRjb3JlJEJhc2ljcyRtYXgsIDUsIGRlcHRoICogJGVsbSRjb3JlJEFycmF5JHNoaWZ0U3RlcCk7CgkJCQlyZXR1cm4gQTQoCgkJCQkJJGVsbSRjb3JlJEFycmF5JEFycmF5X2VsbV9idWlsdGluLAoJCQkJCWVuZCwKCQkJCQluZXdTaGlmdCwKCQkJCQlBMygKCQkJCQkJJGVsbSRjb3JlJEFycmF5JGhvaXN0VHJlZSwKCQkJCQkJc3RhcnRTaGlmdCwKCQkJCQkJbmV3U2hpZnQsCgkJCQkJCUEzKCRlbG0kY29yZSRBcnJheSRzbGljZVRyZWUsIHN0YXJ0U2hpZnQsIGVuZElkeCwgdHJlZSkpLAoJCQkJCUE0KCRlbG0kY29yZSRBcnJheSRmZXRjaE5ld1RhaWwsIHN0YXJ0U2hpZnQsIGVuZCwgZW5kSWR4LCB0cmVlKSk7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRBcnJheSR0cmFuc2xhdGVJbmRleCA9IEYyKAoJZnVuY3Rpb24gKGluZGV4LCBfdjApIHsKCQl2YXIgbGVuID0gX3YwLmE7CgkJdmFyIHBvc0luZGV4ID0gKGluZGV4IDwgMCkgPyAobGVuICsgaW5kZXgpIDogaW5kZXg7CgkJcmV0dXJuIChwb3NJbmRleCA8IDApID8gMCA6ICgoX1V0aWxzX2NtcChwb3NJbmRleCwgbGVuKSA+IDApID8gbGVuIDogcG9zSW5kZXgpOwoJfSk7CnZhciAkZWxtJGNvcmUkQXJyYXkkc2xpY2UgPSBGMygKCWZ1bmN0aW9uIChmcm9tLCB0bywgYXJyYXkpIHsKCQl2YXIgY29ycmVjdFRvID0gQTIoJGVsbSRjb3JlJEFycmF5JHRyYW5zbGF0ZUluZGV4LCB0bywgYXJyYXkpOwoJCXZhciBjb3JyZWN0RnJvbSA9IEEyKCRlbG0kY29yZSRBcnJheSR0cmFuc2xhdGVJbmRleCwgZnJvbSwgYXJyYXkpOwoJCXJldHVybiAoX1V0aWxzX2NtcChjb3JyZWN0RnJvbSwgY29ycmVjdFRvKSA+IDApID8gJGVsbSRjb3JlJEFycmF5JGVtcHR5IDogQTIoCgkJCSRlbG0kY29yZSRBcnJheSRzbGljZUxlZnQsCgkJCWNvcnJlY3RGcm9tLAoJCQlBMigkZWxtJGNvcmUkQXJyYXkkc2xpY2VSaWdodCwgY29ycmVjdFRvLCBhcnJheSkpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkQnl0ZUFycmF5JGZhc3RlckVuY29kZUZvbGRlclIgPSBGMigKCWZ1bmN0aW9uIChfYnl0ZSwgX3YwKSB7CgkJdmFyIGJ5dGVzT25BY2N1bSA9IF92MC5hOwoJCXZhciBhY2N1bSA9IF92MC5iOwoJCXZhciBlbmNvZGVycyA9IF92MC5jOwoJCXN3aXRjaCAoYnl0ZXNPbkFjY3VtKSB7CgkJCWNhc2UgMDoKCQkJCXZhciB2YWx1ZSA9IDI1NSAmIF9ieXRlOwoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTMoMSwgdmFsdWUsIGVuY29kZXJzKTsKCQkJY2FzZSAxOgoJCQkJdmFyIHZhbHVlID0gYWNjdW0gfCAoKDI1NSAmIF9ieXRlKSA8PCA4KTsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUzKDIsIHZhbHVlLCBlbmNvZGVycyk7CgkJCWNhc2UgMjoKCQkJCXZhciB2YWx1ZSA9IGFjY3VtIHwgKCgyNTUgJiBfYnl0ZSkgPDwgMTYpOwoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTMoMywgdmFsdWUsIGVuY29kZXJzKTsKCQkJZGVmYXVsdDoKCQkJCXZhciB2YWx1ZSA9IGFjY3VtIHwgKCgyNTUgJiBfYnl0ZSkgPDwgMjQpOwoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTMoCgkJCQkJMCwKCQkJCQkwLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQlBMigkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSR1bnNpZ25lZEludDMyLCAkZWxtJGJ5dGVzJEJ5dGVzJEJFLCB2YWx1ZSksCgkJCQkJCWVuY29kZXJzKSk7CgkJfQoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkQnl0ZUFycmF5JGZhc3RlckVuY29kZVIgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgYnl0ZXNPbkFjY3VtID0gX3YwLmE7Cgl2YXIgYWNjdW0gPSBfdjAuYjsKCXZhciBvdGhlckVuY29kZXJzID0gX3YwLmM7Cgl2YXIgZW5jb2RlcnMgPSBmdW5jdGlvbiAoKSB7CgkJc3dpdGNoIChieXRlc09uQWNjdW0pIHsKCQkJY2FzZSAwOgoJCQkJcmV0dXJuIG90aGVyRW5jb2RlcnM7CgkJCWNhc2UgMToKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50OChhY2N1bSksCgkJCQkJb3RoZXJFbmNvZGVycyk7CgkJCWNhc2UgMjoKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCUEyKCRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50MTYsICRlbG0kYnl0ZXMkQnl0ZXMkQkUsIGFjY3VtKSwKCQkJCQlvdGhlckVuY29kZXJzKTsKCQkJZGVmYXVsdDoKCQkJCXZhciBvdGhlckJ5dGVzID0gYWNjdW0gPj4gODsKCQkJCXZhciBmaXJzdEJ5dGUgPSAyNTUgJiBhY2N1bTsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCUEyKCRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50MTYsICRlbG0kYnl0ZXMkQnl0ZXMkQkUsIG90aGVyQnl0ZXMpLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSR1bnNpZ25lZEludDgoZmlyc3RCeXRlKSwKCQkJCQkJb3RoZXJFbmNvZGVycykpOwoJCX0KCX0oKTsKCXJldHVybiBlbmNvZGVyczsKfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRCeXRlQXJyYXkkdG9CeXRlcyA9IGZ1bmN0aW9uIChhcnJheSkgewoJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJGVuY29kZSgKCQkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRzZXF1ZW5jZSgKCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEJ5dGVBcnJheSRmYXN0ZXJFbmNvZGVSKAoJCQkJQTMoCgkJCQkJJGVsbSRjb3JlJEFycmF5JGZvbGRyLAoJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRCeXRlQXJyYXkkZmFzdGVyRW5jb2RlRm9sZGVyUiwKCQkJCQlfVXRpbHNfVHVwbGUzKDAsIDAsIF9MaXN0X05pbCksCgkJCQkJYXJyYXkpKSkpOwp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJHdyaXRlRW5jb2RlciA9IEYyKAoJZnVuY3Rpb24gKGVuY29kZXIsIHN0YXRlKSB7CgkJcmV0dXJuIHsKCQkJYml0c1dyaXR0ZW46IHN0YXRlLmJpdHNXcml0dGVuLAoJCQllbmNvZGVyczogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZW5jb2Rlciwgc3RhdGUuZW5jb2RlcnMpLAoJCQl0YWc6IHN0YXRlLnRhZwoJCX07Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEludGVybmFsJGVuY29kZVJhd0Jsb2NrID0gRjIoCglmdW5jdGlvbiAoX3YwLCBiaXRXcml0ZXIpIHsKCQl2YXIgaXNMYXN0QmxvY2sgPSBfdjAuYTsKCQl2YXIgYnVmZmVyID0gX3YwLmI7CgkJdmFyIGJ5dGVBcnJheSA9ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRCeXRlQXJyYXkkZnJvbUJ5dGVzKGJ1ZmZlcik7CgkJdmFyIHNpemUgPSBBMigKCQkJJGVsbSRjb3JlJEJhc2ljcyRtaW4sCgkJCSRlbG0kY29yZSRBcnJheSRsZW5ndGgoYnl0ZUFycmF5KSwKCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkSW50ZXJuYWwkbWF4X25vbl9jb21wcmVzc2VkX2Jsb2NrX3NpemUpOwoJCXZhciBzbGljZWQgPSBBMygkZWxtJGNvcmUkQXJyYXkkc2xpY2UsIDAsIHNpemUsIGJ5dGVBcnJheSk7CgkJcmV0dXJuIEEyKAoJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRCaXRXcml0ZXIkd3JpdGVFbmNvZGVyLAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRieXRlcygKCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRCeXRlQXJyYXkkdG9CeXRlcyhzbGljZWQpKSwKCQkJQTIoCgkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRCaXRXcml0ZXIkd3JpdGVFbmNvZGVyLAoJCQkJQTIoJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkdW5zaWduZWRJbnQxNiwgJGVsbSRieXRlcyRCeXRlcyRMRSwgfnNpemUpLAoJCQkJQTIoCgkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJHdyaXRlRW5jb2RlciwKCQkJCQlBMigkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSR1bnNpZ25lZEludDE2LCAkZWxtJGJ5dGVzJEJ5dGVzJExFLCBzaXplKSwKCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRCaXRXcml0ZXIkZmx1c2goCgkJCQkJCUEzKAoJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJHdyaXRlQml0cywKCQkJCQkJCTIsCgkJCQkJCQkwLAoJCQkJCQkJQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJHdyaXRlQml0LCBpc0xhc3RCbG9jaywgYml0V3JpdGVyKSkpKSkpOwoJfSk7CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRlbmNvZGVSYXcgPSBmdW5jdGlvbiAoYnVmZmVyKSB7CglyZXR1cm4gJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkZW5jb2RlKAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHNlcXVlbmNlKAoJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRCaXRXcml0ZXIkcnVuKAoJCQkJQTMoCgkJCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCQkJRjIoCgkJCQkJCWZ1bmN0aW9uIChjaHVuaywgZmlyc3QpIHsKCQkJCQkJCXJldHVybiBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRlbmNvZGVSYXdCbG9jaywgY2h1bmssIGZpcnN0KTsKCQkJCQkJfSksCgkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJGVtcHR5LAoJCQkJCUEyKAoJCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRjaHVua3MsCgkJCQkJCUEyKCRlbG0kY29yZSRCYXNpY3MkbWluLCAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRtYXhfbm9uX2NvbXByZXNzZWRfYmxvY2tfc2l6ZSwgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkSW50ZXJuYWwkZGVmYXVsdF9ibG9ja19zaXplKSwKCQkJCQkJYnVmZmVyKSkpKSk7Cn07CnZhciAkZm9sa2VydGRldiRlbG1fZmxhdGUkSHVmZm1hbiRmcm9tTGlzdCA9IEEyKAoJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlTCwKCUEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZUwsICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJFRyZWUsICRlbG0kY29yZSRBcnJheSRmcm9tTGlzdCksCgkkZWxtJGNvcmUkTGlzdCRtYXAoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kY29kZUZyb21SZWNvcmQpKTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJGhhcmRjb2RlZFN0YXRpY0h1ZmZtYW5UcmVlID0gewoJZGlzdGFuY2U6ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJGZyb21MaXN0KAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJe2JpdHM6IDAsIHdpZHRoOiA1fSwKCQkJCXtiaXRzOiAxNiwgd2lkdGg6IDV9LAoJCQkJe2JpdHM6IDgsIHdpZHRoOiA1fSwKCQkJCXtiaXRzOiAyNCwgd2lkdGg6IDV9LAoJCQkJe2JpdHM6IDQsIHdpZHRoOiA1fSwKCQkJCXtiaXRzOiAyMCwgd2lkdGg6IDV9LAoJCQkJe2JpdHM6IDEyLCB3aWR0aDogNX0sCgkJCQl7Yml0czogMjgsIHdpZHRoOiA1fSwKCQkJCXtiaXRzOiAyLCB3aWR0aDogNX0sCgkJCQl7Yml0czogMTgsIHdpZHRoOiA1fSwKCQkJCXtiaXRzOiAxMCwgd2lkdGg6IDV9LAoJCQkJe2JpdHM6IDI2LCB3aWR0aDogNX0sCgkJCQl7Yml0czogNiwgd2lkdGg6IDV9LAoJCQkJe2JpdHM6IDIyLCB3aWR0aDogNX0sCgkJCQl7Yml0czogMTQsIHdpZHRoOiA1fSwKCQkJCXtiaXRzOiAzMCwgd2lkdGg6IDV9LAoJCQkJe2JpdHM6IDEsIHdpZHRoOiA1fSwKCQkJCXtiaXRzOiAxNywgd2lkdGg6IDV9LAoJCQkJe2JpdHM6IDksIHdpZHRoOiA1fSwKCQkJCXtiaXRzOiAyNSwgd2lkdGg6IDV9LAoJCQkJe2JpdHM6IDUsIHdpZHRoOiA1fSwKCQkJCXtiaXRzOiAyMSwgd2lkdGg6IDV9LAoJCQkJe2JpdHM6IDEzLCB3aWR0aDogNX0sCgkJCQl7Yml0czogMjksIHdpZHRoOiA1fSwKCQkJCXtiaXRzOiAzLCB3aWR0aDogNX0sCgkJCQl7Yml0czogMTksIHdpZHRoOiA1fSwKCQkJCXtiaXRzOiAxMSwgd2lkdGg6IDV9LAoJCQkJe2JpdHM6IDI3LCB3aWR0aDogNX0sCgkJCQl7Yml0czogNywgd2lkdGg6IDV9LAoJCQkJe2JpdHM6IDIzLCB3aWR0aDogNX0KCQkJXSkpLAoJbGl0ZXJhbDogJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEh1ZmZtYW4kZnJvbUxpc3QoCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQl7Yml0czogMTIsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxNDAsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA3Niwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDIwNCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDQ0LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTcyLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTA4LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjM2LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjgsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxNTYsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA5Miwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDIyMCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDYwLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTg4LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTI0LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjUyLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMiwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDEzMCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDY2LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTk0LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMzQsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxNjIsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA5OCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDIyNiwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDE4LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTQ2LCB3aWR0aDogOH0sCgkJCQl7Yml0czogODIsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAyMTAsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA1MCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDE3OCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDExNCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDI0Miwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDEwLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTM4LCB3aWR0aDogOH0sCgkJCQl7Yml0czogNzQsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAyMDIsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA0Miwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDE3MCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDEwNiwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDIzNCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDI2LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTU0LCB3aWR0aDogOH0sCgkJCQl7Yml0czogOTAsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAyMTgsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA1OCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDE4Niwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDEyMiwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDI1MCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDYsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxMzQsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA3MCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDE5OCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDM4LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTY2LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTAyLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjMwLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjIsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxNTAsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA4Niwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDIxNCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDU0LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTgyLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTE4LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjQ2LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTQsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxNDIsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA3OCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDIwNiwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDQ2LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTc0LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTEwLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjM4LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMzAsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxNTgsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA5NCwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDIyMiwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDYyLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTkwLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTI2LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjU0LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDEyOSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDY1LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTkzLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMzMsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxNjEsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA5Nywgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDIyNSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDE3LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTQ1LCB3aWR0aDogOH0sCgkJCQl7Yml0czogODEsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAyMDksIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA0OSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDE3Nywgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDExMywgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDI0MSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDksIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxMzcsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA3Mywgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDIwMSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDQxLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTY5LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTA1LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjMzLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjUsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxNTMsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA4OSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDIxNywgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDU3LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTg1LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTIxLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjQ5LCB3aWR0aDogOH0sCgkJCQl7Yml0czogNSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDEzMywgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDY5LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTk3LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMzcsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxNjUsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxMDEsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAyMjksIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAyMSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDE0OSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDg1LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjEzLCB3aWR0aDogOH0sCgkJCQl7Yml0czogNTMsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxODEsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxMTcsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAyNDUsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxMywgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDE0MSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDc3LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjA1LCB3aWR0aDogOH0sCgkJCQl7Yml0czogNDUsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxNzMsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxMDksIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAyMzcsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAyOSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDE1Nywgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDkzLCB3aWR0aDogOH0sCgkJCQl7Yml0czogMjIxLCB3aWR0aDogOH0sCgkJCQl7Yml0czogNjEsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxODksIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxMjUsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAyNTMsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxOSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDI3NSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDE0Nywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDQwMywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDgzLCB3aWR0aDogOX0sCgkJCQl7Yml0czogMzM5LCB3aWR0aDogOX0sCgkJCQl7Yml0czogMjExLCB3aWR0aDogOX0sCgkJCQl7Yml0czogNDY3LCB3aWR0aDogOX0sCgkJCQl7Yml0czogNTEsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAzMDcsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAxNzksIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA0MzUsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAxMTUsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAzNzEsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAyNDMsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA0OTksIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAxMSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDI2Nywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDEzOSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDM5NSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDc1LCB3aWR0aDogOX0sCgkJCQl7Yml0czogMzMxLCB3aWR0aDogOX0sCgkJCQl7Yml0czogMjAzLCB3aWR0aDogOX0sCgkJCQl7Yml0czogNDU5LCB3aWR0aDogOX0sCgkJCQl7Yml0czogNDMsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAyOTksIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAxNzEsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA0MjcsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAxMDcsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAzNjMsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAyMzUsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA0OTEsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAyNywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDI4Mywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDE1NSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDQxMSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDkxLCB3aWR0aDogOX0sCgkJCQl7Yml0czogMzQ3LCB3aWR0aDogOX0sCgkJCQl7Yml0czogMjE5LCB3aWR0aDogOX0sCgkJCQl7Yml0czogNDc1LCB3aWR0aDogOX0sCgkJCQl7Yml0czogNTksIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAzMTUsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAxODcsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA0NDMsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAxMjMsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAzNzksIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAyNTEsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA1MDcsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA3LCB3aWR0aDogOX0sCgkJCQl7Yml0czogMjYzLCB3aWR0aDogOX0sCgkJCQl7Yml0czogMTM1LCB3aWR0aDogOX0sCgkJCQl7Yml0czogMzkxLCB3aWR0aDogOX0sCgkJCQl7Yml0czogNzEsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAzMjcsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAxOTksIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA0NTUsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAzOSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDI5NSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDE2Nywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDQyMywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDEwMywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDM1OSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDIzMSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDQ4Nywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDIzLCB3aWR0aDogOX0sCgkJCQl7Yml0czogMjc5LCB3aWR0aDogOX0sCgkJCQl7Yml0czogMTUxLCB3aWR0aDogOX0sCgkJCQl7Yml0czogNDA3LCB3aWR0aDogOX0sCgkJCQl7Yml0czogODcsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAzNDMsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAyMTUsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA0NzEsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA1NSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDMxMSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDE4Mywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDQzOSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDExOSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDM3NSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDI0Nywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDUwMywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDE1LCB3aWR0aDogOX0sCgkJCQl7Yml0czogMjcxLCB3aWR0aDogOX0sCgkJCQl7Yml0czogMTQzLCB3aWR0aDogOX0sCgkJCQl7Yml0czogMzk5LCB3aWR0aDogOX0sCgkJCQl7Yml0czogNzksIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAzMzUsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAyMDcsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA0NjMsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA0Nywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDMwMywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDE3NSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDQzMSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDExMSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDM2Nywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDIzOSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDQ5NSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDMxLCB3aWR0aDogOX0sCgkJCQl7Yml0czogMjg3LCB3aWR0aDogOX0sCgkJCQl7Yml0czogMTU5LCB3aWR0aDogOX0sCgkJCQl7Yml0czogNDE1LCB3aWR0aDogOX0sCgkJCQl7Yml0czogOTUsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAzNTEsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiAyMjMsIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA0NzksIHdpZHRoOiA5fSwKCQkJCXtiaXRzOiA2Mywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDMxOSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDE5MSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDQ0Nywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDEyNywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDM4Mywgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDI1NSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDUxMSwgd2lkdGg6IDl9LAoJCQkJe2JpdHM6IDAsIHdpZHRoOiA3fSwKCQkJCXtiaXRzOiA2NCwgd2lkdGg6IDd9LAoJCQkJe2JpdHM6IDMyLCB3aWR0aDogN30sCgkJCQl7Yml0czogOTYsIHdpZHRoOiA3fSwKCQkJCXtiaXRzOiAxNiwgd2lkdGg6IDd9LAoJCQkJe2JpdHM6IDgwLCB3aWR0aDogN30sCgkJCQl7Yml0czogNDgsIHdpZHRoOiA3fSwKCQkJCXtiaXRzOiAxMTIsIHdpZHRoOiA3fSwKCQkJCXtiaXRzOiA4LCB3aWR0aDogN30sCgkJCQl7Yml0czogNzIsIHdpZHRoOiA3fSwKCQkJCXtiaXRzOiA0MCwgd2lkdGg6IDd9LAoJCQkJe2JpdHM6IDEwNCwgd2lkdGg6IDd9LAoJCQkJe2JpdHM6IDI0LCB3aWR0aDogN30sCgkJCQl7Yml0czogODgsIHdpZHRoOiA3fSwKCQkJCXtiaXRzOiA1Niwgd2lkdGg6IDd9LAoJCQkJe2JpdHM6IDEyMCwgd2lkdGg6IDd9LAoJCQkJe2JpdHM6IDQsIHdpZHRoOiA3fSwKCQkJCXtiaXRzOiA2OCwgd2lkdGg6IDd9LAoJCQkJe2JpdHM6IDM2LCB3aWR0aDogN30sCgkJCQl7Yml0czogMTAwLCB3aWR0aDogN30sCgkJCQl7Yml0czogMjAsIHdpZHRoOiA3fSwKCQkJCXtiaXRzOiA4NCwgd2lkdGg6IDd9LAoJCQkJe2JpdHM6IDUyLCB3aWR0aDogN30sCgkJCQl7Yml0czogMTE2LCB3aWR0aDogN30sCgkJCQl7Yml0czogMywgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDEzMSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDY3LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMTk1LCB3aWR0aDogOH0sCgkJCQl7Yml0czogMzUsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiAxNjMsIHdpZHRoOiA4fSwKCQkJCXtiaXRzOiA5OSwgd2lkdGg6IDh9LAoJCQkJe2JpdHM6IDIyNywgd2lkdGg6IDh9CgkJCV0pKQp9Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkSW50ZXJuYWwkZW5jb2RlQ29tcHJlc3NTdGF0aWMgPSBGMygKCWZ1bmN0aW9uIChtYXliZVdpbmRvd1NpemUsIGJ1ZiwgYml0V3JpdGVyKSB7CgkJdmFyIGh1ZmZtYW5UcmVlcyA9ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRIdWZmbWFuJGhhcmRjb2RlZFN0YXRpY0h1ZmZtYW5UcmVlOwoJCXZhciBjb21wcmVzc2VkID0gQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkSW50ZXJuYWwkY29tcHJlc3MsIG1heWJlV2luZG93U2l6ZSwgYnVmKTsKCQlyZXR1cm4gQTMoCgkJCSRlbG0kY29yZSRBcnJheSRmb2xkbCwKCQkJRjIoCgkJCQlmdW5jdGlvbiAoc3ltYm9sLCBmaXJzdCkgewoJCQkJCXJldHVybiBBMygkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRTeW1ib2wkZW5jb2RlLCBzeW1ib2wsIGh1ZmZtYW5UcmVlcywgZmlyc3QpOwoJCQkJfSksCgkJCWJpdFdyaXRlciwKCQkJY29tcHJlc3NlZCk7Cgl9KTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEludGVybmFsJGVuY29kZVN0YXRpY0Jsb2NrID0gRjMoCglmdW5jdGlvbiAod2luZG93U2l6ZSwgX3YwLCBiaXRXcml0ZXIpIHsKCQl2YXIgaXNMYXN0QmxvY2sgPSBfdjAuYTsKCQl2YXIgYnVmZmVyID0gX3YwLmI7CgkJcmV0dXJuIEEzKAoJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRlbmNvZGVDb21wcmVzc1N0YXRpYywKCQkJd2luZG93U2l6ZSwKCQkJYnVmZmVyLAoJCQlBMygKCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEJpdFdyaXRlciR3cml0ZUJpdHMsCgkJCQkyLAoJCQkJMSwKCQkJCUEyKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEJpdFdyaXRlciR3cml0ZUJpdCwgaXNMYXN0QmxvY2ssIGJpdFdyaXRlcikpKTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkSW50ZXJuYWwkZW5jb2RlU3RhdGljID0gRjIoCglmdW5jdGlvbiAod2luZG93U2l6ZSwgYnVmZmVyKSB7CgkJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJGVuY29kZSgKCQkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkc2VxdWVuY2UoCgkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRCaXRXcml0ZXIkcnVuKAoJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEJpdFdyaXRlciRmbHVzaCgKCQkJCQkJQTMoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJCQkJCUYyKAoJCQkJCQkJCWZ1bmN0aW9uIChjaHVuaywgZmlyc3QpIHsKCQkJCQkJCQkJcmV0dXJuIEEzKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEludGVybmFsJGVuY29kZVN0YXRpY0Jsb2NrLCB3aW5kb3dTaXplLCBjaHVuaywgZmlyc3QpOwoJCQkJCQkJCX0pLAoJCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkQml0V3JpdGVyJGVtcHR5LAoJCQkJCQkJQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkSW50ZXJuYWwkY2h1bmtzLCAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRkZWZhdWx0X2Jsb2NrX3NpemUsIGJ1ZmZlcikpKSkpKTsKCX0pOwp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEZsYXRlJGRlZmxhdGVXaXRoT3B0aW9ucyA9IEYyKAoJZnVuY3Rpb24gKGVuY29kaW5nLCBidWZmZXIpIHsKCQlzd2l0Y2ggKGVuY29kaW5nLiQpIHsKCQkJY2FzZSAnUmF3JzoKCQkJCXJldHVybiAkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRlbmNvZGVSYXcoYnVmZmVyKTsKCQkJY2FzZSAnU3RhdGljJzoKCQkJCWlmIChlbmNvZGluZy5hLiQgPT09ICdOb0NvbXByZXNzaW9uJykgewoJCQkJCXZhciBfdjEgPSBlbmNvZGluZy5hOwoJCQkJCXJldHVybiBBMigkZm9sa2VydGRldiRlbG1fZmxhdGUkRGVmbGF0ZSRJbnRlcm5hbCRlbmNvZGVTdGF0aWMsICRlbG0kY29yZSRNYXliZSROb3RoaW5nLCBidWZmZXIpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgdyA9IGVuY29kaW5nLmEuYTsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSREZWZsYXRlJEludGVybmFsJGVuY29kZVN0YXRpYywKCQkJCQkJJGVsbSRjb3JlJE1heWJlJEp1c3QodyksCgkJCQkJCWJ1ZmZlcik7CgkJCQl9CgkJCWRlZmF1bHQ6CgkJCQlpZiAoZW5jb2RpbmcuYS4kID09PSAnTm9Db21wcmVzc2lvbicpIHsKCQkJCQl2YXIgX3YyID0gZW5jb2RpbmcuYTsKCQkJCQlyZXR1cm4gQTIoJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkSW50ZXJuYWwkZW5jb2RlRHluYW1pYywgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsIGJ1ZmZlcik7CgkJCQl9IGVsc2UgewoJCQkJCXZhciB3ID0gZW5jb2RpbmcuYS5hOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJERlZmxhdGUkSW50ZXJuYWwkZW5jb2RlRHluYW1pYywKCQkJCQkJJGVsbSRjb3JlJE1heWJlJEp1c3QodyksCgkJCQkJCWJ1ZmZlcik7CgkJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCRoZWFkID0gZnVuY3Rpb24gKGxpc3QpIHsKCWlmIChsaXN0LmIpIHsKCQl2YXIgeCA9IGxpc3QuYTsKCQl2YXIgeHMgPSBsaXN0LmI7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KHgpOwoJfSBlbHNlIHsKCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9GaWxlVHJlZV9GaWxlVHJlZU5vZGUgPSBGMigKCWZ1bmN0aW9uIChqc29uRW5jb2RlX3R5cGVfcGFyYW1ldGVyX2Jsb2JTdHJ1Y3R1cmUsIHZhbHVlVG9FbmNvZGUpIHsKCQlpZiAodmFsdWVUb0VuY29kZS4kID09PSAnQmxvYk5vZGUnKSB7CgkJCXZhciB0YWdBcmd1bWVudDAgPSB2YWx1ZVRvRW5jb2RlLmE7CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ0Jsb2JOb2RlJywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQlqc29uRW5jb2RlX3R5cGVfcGFyYW1ldGVyX2Jsb2JTdHJ1Y3R1cmUodGFnQXJndW1lbnQwKQoJCQkJCQkJCV0pKSkKCQkJCQldKSk7CgkJfSBlbHNlIHsKCQkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknVHJlZU5vZGUnLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9fZ2VuZXJpY19MaXN0LAoJCQkJCQkJCQlmdW5jdGlvbiAodHlwZV9hcmcpIHsKCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZygKCQkJCQkJCQkJCQkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCQkJCQkJCQkJCQl2YXIgaXRlbV8wID0gX3YxLmE7CgkJCQkJCQkJCQkJCQkJdmFyIGl0ZW1fMSA9IF92MS5iOwoJCQkJCQkJCQkJCQkJCXJldHVybiBpdGVtXzA7CgkJCQkJCQkJCQkJCQl9KHR5cGVfYXJnKSksCgkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0ZpbGVUcmVlX0ZpbGVUcmVlTm9kZSwKCQkJCQkJCQkJCQkJCWZ1bmN0aW9uICh0eXBlX2FyZ18pIHsKCQkJCQkJCQkJCQkJCQlyZXR1cm4ganNvbkVuY29kZV90eXBlX3BhcmFtZXRlcl9ibG9iU3RydWN0dXJlKHR5cGVfYXJnXyk7CgkJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCQkJZnVuY3Rpb24gKF92MikgewoJCQkJCQkJCQkJCQkJCXZhciBpdGVtXzAgPSBfdjIuYTsKCQkJCQkJCQkJCQkJCQl2YXIgaXRlbV8xID0gX3YyLmI7CgkJCQkJCQkJCQkJCQkJcmV0dXJuIGl0ZW1fMTsKCQkJCQkJCQkJCQkJCX0odHlwZV9hcmcpKQoJCQkJCQkJCQkJCQldKSk7CgkJCQkJCQkJCX0sCgkJCQkJCQkJCXRhZ0FyZ3VtZW50MCkKCQkJCQkJCQldKSkpCgkJCQkJXSkpOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSRsb3dlc3Q2Qml0c01hc2sgPSA2MzsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkdW5zYWZlVG9DaGFyID0gZnVuY3Rpb24gKG4pIHsKCWlmIChuIDw9IDI1KSB7CgkJcmV0dXJuICRlbG0kY29yZSRDaGFyJGZyb21Db2RlKDY1ICsgbik7Cgl9IGVsc2UgewoJCWlmIChuIDw9IDUxKSB7CgkJCXJldHVybiAkZWxtJGNvcmUkQ2hhciRmcm9tQ29kZSg5NyArIChuIC0gMjYpKTsKCQl9IGVsc2UgewoJCQlpZiAobiA8PSA2MSkgewoJCQkJcmV0dXJuICRlbG0kY29yZSRDaGFyJGZyb21Db2RlKDQ4ICsgKG4gLSA1MikpOwoJCQl9IGVsc2UgewoJCQkJc3dpdGNoIChuKSB7CgkJCQkJY2FzZSA2MjoKCQkJCQkJcmV0dXJuIF9VdGlsc19jaHIoJysnKTsKCQkJCQljYXNlIDYzOgoJCQkJCQlyZXR1cm4gX1V0aWxzX2NocignLycpOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXJldHVybiBfVXRpbHNfY2hyKCdcdTAwMDAnKTsKCQkJCX0KCQkJfQoJCX0KCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkYml0c1RvQ2hhcnMgPSBGMigKCWZ1bmN0aW9uIChiaXRzLCBtaXNzaW5nKSB7CgkJdmFyIHMgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJHVuc2FmZVRvQ2hhcihiaXRzICYgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSRsb3dlc3Q2Qml0c01hc2spOwoJCXZhciByID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSR1bnNhZmVUb0NoYXIoKGJpdHMgPj4+IDYpICYgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSRsb3dlc3Q2Qml0c01hc2spOwoJCXZhciBxID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSR1bnNhZmVUb0NoYXIoKGJpdHMgPj4+IDEyKSAmICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkbG93ZXN0NkJpdHNNYXNrKTsKCQl2YXIgcCA9ICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkdW5zYWZlVG9DaGFyKGJpdHMgPj4+IDE4KTsKCQlzd2l0Y2ggKG1pc3NpbmcpIHsKCQkJY2FzZSAwOgoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRTdHJpbmckY29ucywKCQkJCQlwLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGNvbnMsCgkJCQkJCXEsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRjb25zLAoJCQkJCQkJciwKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckZnJvbUNoYXIocykpKSk7CgkJCWNhc2UgMToKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGNvbnMsCgkJCQkJcCwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRjb25zLAoJCQkJCQlxLAoJCQkJCQlBMigkZWxtJGNvcmUkU3RyaW5nJGNvbnMsIHIsICc9JykpKTsKCQkJY2FzZSAyOgoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRTdHJpbmckY29ucywKCQkJCQlwLAoJCQkJCUEyKCRlbG0kY29yZSRTdHJpbmckY29ucywgcSwgJz09JykpOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuICcnOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSRiaXRzVG9DaGFyU3BlY2lhbGl6ZWQgPSBGNCgKCWZ1bmN0aW9uIChiaXRzMSwgYml0czIsIGJpdHMzLCBhY2N1bSkgewoJCXZhciB6ID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSR1bnNhZmVUb0NoYXIoKGJpdHMzID4+PiA2KSAmICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkbG93ZXN0NkJpdHNNYXNrKTsKCQl2YXIgeSA9ICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkdW5zYWZlVG9DaGFyKChiaXRzMyA+Pj4gMTIpICYgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSRsb3dlc3Q2Qml0c01hc2spOwoJCXZhciB4ID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSR1bnNhZmVUb0NoYXIoYml0czMgPj4+IDE4KTsKCQl2YXIgdyA9ICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkdW5zYWZlVG9DaGFyKGJpdHMzICYgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSRsb3dlc3Q2Qml0c01hc2spOwoJCXZhciBzID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSR1bnNhZmVUb0NoYXIoYml0czEgJiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJGxvd2VzdDZCaXRzTWFzayk7CgkJdmFyIHIgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJHVuc2FmZVRvQ2hhcigoYml0czEgPj4+IDYpICYgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSRsb3dlc3Q2Qml0c01hc2spOwoJCXZhciBxID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSR1bnNhZmVUb0NoYXIoKGJpdHMxID4+PiAxMikgJiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJGxvd2VzdDZCaXRzTWFzayk7CgkJdmFyIHAgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJHVuc2FmZVRvQ2hhcihiaXRzMSA+Pj4gMTgpOwoJCXZhciBkID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSR1bnNhZmVUb0NoYXIoYml0czIgJiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJGxvd2VzdDZCaXRzTWFzayk7CgkJdmFyIGMgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJHVuc2FmZVRvQ2hhcigoYml0czIgPj4+IDYpICYgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSRsb3dlc3Q2Qml0c01hc2spOwoJCXZhciBiID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSR1bnNhZmVUb0NoYXIoKGJpdHMyID4+PiAxMikgJiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJGxvd2VzdDZCaXRzTWFzayk7CgkJdmFyIGEgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJHVuc2FmZVRvQ2hhcihiaXRzMiA+Pj4gMTgpOwoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRjb25zLAoJCQl4LAoJCQlBMigKCQkJCSRlbG0kY29yZSRTdHJpbmckY29ucywKCQkJCXksCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGNvbnMsCgkJCQkJeiwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRjb25zLAoJCQkJCQl3LAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckY29ucywKCQkJCQkJCWEsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGNvbnMsCgkJCQkJCQkJYiwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRjb25zLAoJCQkJCQkJCQljLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckY29ucywKCQkJCQkJCQkJCWQsCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGNvbnMsCgkJCQkJCQkJCQkJcCwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRjb25zLAoJCQkJCQkJCQkJCQlxLAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckY29ucywKCQkJCQkJCQkJCQkJCXIsCgkJCQkJCQkJCQkJCQlBMigkZWxtJGNvcmUkU3RyaW5nJGNvbnMsIHMsIGFjY3VtKSkpKSkpKSkpKSkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJGRlY29kZTE4SGVscCA9IEY1KAoJZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGUpIHsKCQl2YXIgY29tYmluZWQ2ID0gKCgyNTUgJiBkKSA8PCAxNikgfCBlOwoJCXZhciBjb21iaW5lZDUgPSBkID4+PiA4OwoJCXZhciBjb21iaW5lZDQgPSAxNjc3NzIxNSAmIGM7CgkJdmFyIGNvbWJpbmVkMyA9ICgoNjU1MzUgJiBiKSA8PCA4KSB8IChjID4+PiAyNCk7CgkJdmFyIGNvbWJpbmVkMiA9ICgoMjU1ICYgYSkgPDwgMTYpIHwgKGIgPj4+IDE2KTsKCQl2YXIgY29tYmluZWQxID0gYSA+Pj4gODsKCQlyZXR1cm4gQTQoCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkYml0c1RvQ2hhclNwZWNpYWxpemVkLAoJCQljb21iaW5lZDMsCgkJCWNvbWJpbmVkMiwKCQkJY29tYmluZWQxLAoJCQlBNCgkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJGJpdHNUb0NoYXJTcGVjaWFsaXplZCwgY29tYmluZWQ2LCBjb21iaW5lZDUsIGNvbWJpbmVkNCwgJycpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSR1MTZCRSA9ICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50MTYoJGVsbSRieXRlcyRCeXRlcyRCRSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJHUzMkJFID0gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQzMigkZWxtJGJ5dGVzJEJ5dGVzJEJFKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkZGVjb2RlMThCeXRlcyA9IEE2KCRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcDUsICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkZGVjb2RlMThIZWxwLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJHUzMkJFLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJHUzMkJFLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJHUzMkJFLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJHUzMkJFLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJHUxNkJFKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkbG9vcEhlbHAgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgcmVtYWluaW5nID0gX3YwLnJlbWFpbmluZzsKCXZhciBzdHJpbmcgPSBfdjAuc3RyaW5nOwoJaWYgKHJlbWFpbmluZyA+PSAxOCkgewoJCXJldHVybiBBMigKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwLAoJCQlmdW5jdGlvbiAocmVzdWx0KSB7CgkJCQlyZXR1cm4gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkTG9vcCgKCQkJCQl7CgkJCQkJCXJlbWFpbmluZzogcmVtYWluaW5nIC0gMTgsCgkJCQkJCXN0cmluZzogX1V0aWxzX2FwKHN0cmluZywgcmVzdWx0KQoJCQkJCX0pOwoJCQl9LAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJGRlY29kZTE4Qnl0ZXMpOwoJfSBlbHNlIHsKCQlpZiAocmVtYWluaW5nID49IDMpIHsKCQkJdmFyIGhlbHBlciA9IEYzKAoJCQkJZnVuY3Rpb24gKGEsIGIsIGMpIHsKCQkJCQl2YXIgY29tYmluZWQgPSAoKGEgPDwgMTYpIHwgKGIgPDwgOCkpIHwgYzsKCQkJCQlyZXR1cm4gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkTG9vcCgKCQkJCQkJewoJCQkJCQkJcmVtYWluaW5nOiByZW1haW5pbmcgLSAzLAoJCQkJCQkJc3RyaW5nOiBfVXRpbHNfYXAoCgkJCQkJCQkJc3RyaW5nLAoJCQkJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkYml0c1RvQ2hhcnMsIGNvbWJpbmVkLCAwKSkKCQkJCQkJfSk7CgkJCQl9KTsKCQkJcmV0dXJuIEE0KCRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJG1hcDMsIGhlbHBlciwgJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQ4LCAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDgsICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50OCk7CgkJfSBlbHNlIHsKCQkJaWYgKCFyZW1haW5pbmcpIHsKCQkJCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRzdWNjZWVkKAoJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJERvbmUoc3RyaW5nKSk7CgkJCX0gZWxzZSB7CgkJCQlpZiAocmVtYWluaW5nID09PSAyKSB7CgkJCQkJdmFyIGhlbHBlciA9IEYyKAoJCQkJCQlmdW5jdGlvbiAoYSwgYikgewoJCQkJCQkJdmFyIGNvbWJpbmVkID0gKGEgPDwgMTYpIHwgKGIgPDwgOCk7CgkJCQkJCQlyZXR1cm4gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRG9uZSgKCQkJCQkJCQlfVXRpbHNfYXAoCgkJCQkJCQkJCXN0cmluZywKCQkJCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSRiaXRzVG9DaGFycywgY29tYmluZWQsIDEpKSk7CgkJCQkJCX0pOwoJCQkJCXJldHVybiBBMygkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAyLCBoZWxwZXIsICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHVuc2lnbmVkSW50OCwgJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQ4KTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAsCgkJCQkJCWZ1bmN0aW9uIChhKSB7CgkJCQkJCQlyZXR1cm4gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRG9uZSgKCQkJCQkJCQlfVXRpbHNfYXAoCgkJCQkJCQkJCXN0cmluZywKCQkJCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSRiaXRzVG9DaGFycywgYSA8PCAxNiwgMikpKTsKCQkJCQkJfSwKCQkJCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQ4KTsKCQkJCX0KCQkJfQoJCX0KCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkZGVjb2RlciA9IGZ1bmN0aW9uICh3aWR0aCkgewoJcmV0dXJuIEEyKAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGxvb3AsCgkJe3JlbWFpbmluZzogd2lkdGgsIHN0cmluZzogJyd9LAoJCSRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCREZWNvZGUkbG9vcEhlbHApOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSRmcm9tQnl0ZXMgPSBmdW5jdGlvbiAoYnl0ZXMpIHsKCXJldHVybiBBMigKCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRkZWNvZGUsCgkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJERlY29kZSRkZWNvZGVyKAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJHdpZHRoKGJ5dGVzKSksCgkJYnl0ZXMpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVyR2VuZXJhdGVkJEJhc2U2NCRmcm9tQnl0ZXMgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsZXJHZW5lcmF0ZWQkRGVjb2RlJGZyb21CeXRlczsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uX2VuY29kZV9CeXRlcyA9IGZ1bmN0aW9uIChieXRlcykgewoJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ0FzQmFzZTY0JywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcoCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCQkJJ0Vycm9yIGVuY29kaW5nIHRvIGJhc2U2NCcsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlckdlbmVyYXRlZCRCYXNlNjQkZnJvbUJ5dGVzKGJ5dGVzKSkpKQoJCQldKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV8yMTQ2MDUxNDg0ID0gZnVuY3Rpb24gKHZhbHVlVG9FbmNvZGUpIHsKCXJldHVybiBBMigKCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9GaWxlVHJlZV9GaWxlVHJlZU5vZGUsCgkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbl9lbmNvZGVfQnl0ZXModHlwZV9hcmcpOwoJCX0sCgkJdmFsdWVUb0VuY29kZSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRqc29uRW5jb2RlRmlsZVRyZWVOb2RlID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfMjE0NjA1MTQ4NDsKdmFyICRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQgPSBfSnNvbl93cmFwOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfV29ya3NwYWNlU3RhdGVfMjAyMV8wMV9CbG9iQ2hhbmdlU2VxdWVuY2VFbGVtZW50ID0gZnVuY3Rpb24gKHZhbHVlVG9FbmNvZGUpIHsKCXN3aXRjaCAodmFsdWVUb0VuY29kZS4kKSB7CgkJY2FzZSAnQWRkQnl0ZXMnOgoJCQl2YXIgdGFnQXJndW1lbnQwID0gdmFsdWVUb0VuY29kZS5hOwoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdBZGRCeXRlcycsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25fZW5jb2RlX0J5dGVzKHRhZ0FyZ3VtZW50MCkKCQkJCQkJCQldKSkpCgkJCQkJXSkpOwoJCWNhc2UgJ1JlbW92ZUJ5dGVzJzoKCQkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknUmVtb3ZlQnl0ZXMnLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodGFnQXJndW1lbnQwKQoJCQkJCQkJCV0pKSkKCQkJCQldKSk7CgkJZGVmYXVsdDoKCQkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknUmV1c2VCeXRlcycsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludCh0YWdBcmd1bWVudDApCgkJCQkJCQkJXSkpKQoJCQkJCV0pKTsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlXzIxMzA4MDUyNTIgPSBmdW5jdGlvbiAodmFsdWVUb0VuY29kZSkgewoJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ2Jhc2UnLAoJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh2YWx1ZVRvRW5jb2RlLmJhc2UpKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknZGlmZmVyZW5jZUZyb21CYXNlJywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ3JlbW92ZU5vZGVzJywKCQkJCQkJCUEyKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX19nZW5lcmljX0xpc3QsCgkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX19nZW5lcmljX0xpc3QsCgkJCQkJCQkJCQlmdW5jdGlvbiAodHlwZV9hcmdfKSB7CgkJCQkJCQkJCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodHlwZV9hcmdfKTsKCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQl0eXBlX2FyZyk7CgkJCQkJCQkJfSwKCQkJCQkJCQl2YWx1ZVRvRW5jb2RlLmRpZmZlcmVuY2VGcm9tQmFzZS5yZW1vdmVOb2RlcykpLAoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCSdjaGFuZ2VCbG9icycsCgkJCQkJCQlBMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9fZ2VuZXJpY19MaXN0LAoJCQkJCQkJCWZ1bmN0aW9uICh0eXBlX2FyZykgewoJCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfX2dlbmVyaWNfTGlzdCwKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnXykgewoJCQkJCQkJCQkJCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodHlwZV9hcmdfKTsKCQkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJCQkJCQkJCQkJdmFyIGl0ZW1fMCA9IF92MC5hOwoJCQkJCQkJCQkJCQkJdmFyIGl0ZW1fMSA9IF92MC5iOwoJCQkJCQkJCQkJCQkJcmV0dXJuIGl0ZW1fMDsKCQkJCQkJCQkJCQkJfSh0eXBlX2FyZykpLAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfX2dlbmVyaWNfTGlzdCwKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnXykgewoJCQkJCQkJCQkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX1dvcmtzcGFjZVN0YXRlXzIwMjFfMDFfQmxvYkNoYW5nZVNlcXVlbmNlRWxlbWVudCh0eXBlX2FyZ18pOwoJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJCQkJCQkJCQl2YXIgaXRlbV8wID0gX3YxLmE7CgkJCQkJCQkJCQkJCQl2YXIgaXRlbV8xID0gX3YxLmI7CgkJCQkJCQkJCQkJCQlyZXR1cm4gaXRlbV8xOwoJCQkJCQkJCQkJCQl9KHR5cGVfYXJnKSkKCQkJCQkJCQkJCQldKSk7CgkJCQkJCQkJfSwKCQkJCQkJCQl2YWx1ZVRvRW5jb2RlLmRpZmZlcmVuY2VGcm9tQmFzZS5jaGFuZ2VCbG9icykpCgkJCQkJCV0pKSkKCQkJXSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZVdvcmtzcGFjZVN0YXRlXzIwMjFfMDEgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV8yMTMwODA1MjUyOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5VcmwkanNvbkVuY29kZVdvcmtzcGFjZVN0YXRlRGVzY3JpcHRpb24gPSBmdW5jdGlvbiAod29ya3NwYWNlU3RhdGVEZXNjcmlwdGlvbikgewoJc3dpdGNoICh3b3Jrc3BhY2VTdGF0ZURlc2NyaXB0aW9uLiQpIHsKCQljYXNlICdMaXRlcmFsV29ya3NwYWNlU3RhdGUnOgoJCQl2YXIgbGl0ZXJhbFdvcmtzcGFjZVN0YXRlID0gd29ya3NwYWNlU3RhdGVEZXNjcmlwdGlvbi5hOwoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSd2ZXJzaW9uXzIwMjBfMTInLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRqc29uRW5jb2RlRmlsZVRyZWVOb2RlKGxpdGVyYWxXb3Jrc3BhY2VTdGF0ZSkpCgkJCQkJXSkpOwoJCWNhc2UgJ0xpbmtXb3Jrc3BhY2VTdGF0ZSc6CgkJCXZhciBsaW5rID0gd29ya3NwYWNlU3RhdGVEZXNjcmlwdGlvbi5hOwoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyhsaW5rKTsKCQlkZWZhdWx0OgoJCQl2YXIgZGlmZldvcmtzcGFjZVN0YXRlID0gd29ya3NwYWNlU3RhdGVEZXNjcmlwdGlvbi5hOwoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSd2ZXJzaW9uXzIwMjFfMDEnLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRqc29uRW5jb2RlV29ya3NwYWNlU3RhdGVfMjAyMV8wMShkaWZmV29ya3NwYWNlU3RhdGUpKQoJCQkJCV0pKTsKCX0KfTsKdmFyICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMWjc3JG1heF9kaXN0YW5jZSA9IDMyNzY4Owp2YXIgJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJExaNzckbWF4V2luZG93U2l6ZSA9ICRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMWjc3JG1heF9kaXN0YW5jZTsKdmFyICRlbG0kY29yZSRTZXQkU2V0X2VsbV9idWlsdGluID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1NldF9lbG1fYnVpbHRpbicsIGE6IGF9Owp9Owp2YXIgJGVsbSRjb3JlJERpY3QkZGlmZiA9IEYyKAoJZnVuY3Rpb24gKHQxLCB0MikgewoJCXJldHVybiBBMygKCQkJJGVsbSRjb3JlJERpY3QkZm9sZGwsCgkJCUYzKAoJCQkJZnVuY3Rpb24gKGssIHYsIHQpIHsKCQkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJERpY3QkcmVtb3ZlLCBrLCB0KTsKCQkJCX0pLAoJCQl0MSwKCQkJdDIpOwoJfSk7CnZhciAkZWxtJGNvcmUkU2V0JGRpZmYgPSBGMigKCWZ1bmN0aW9uIChfdjAsIF92MSkgewoJCXZhciBkaWN0MSA9IF92MC5hOwoJCXZhciBkaWN0MiA9IF92MS5hOwoJCXJldHVybiAkZWxtJGNvcmUkU2V0JFNldF9lbG1fYnVpbHRpbigKCQkJQTIoJGVsbSRjb3JlJERpY3QkZGlmZiwgZGljdDEsIGRpY3QyKSk7Cgl9KTsKdmFyICRqaW5qb3IkZWxtX2RpZmYkRGlmZiRBZGRlZCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdBZGRlZCcsIGE6IGF9Owp9Owp2YXIgJGppbmpvciRlbG1fZGlmZiREaWZmJENhbm5vdEdldEEgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnQ2Fubm90R2V0QScsIGE6IGF9Owp9Owp2YXIgJGppbmpvciRlbG1fZGlmZiREaWZmJENhbm5vdEdldEIgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnQ2Fubm90R2V0QicsIGE6IGF9Owp9Owp2YXIgJGppbmpvciRlbG1fZGlmZiREaWZmJE5vQ2hhbmdlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ05vQ2hhbmdlJywgYTogYX07Cn07CnZhciAkamluam9yJGVsbV9kaWZmJERpZmYkUmVtb3ZlZCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdSZW1vdmVkJywgYTogYX07Cn07CnZhciAkamluam9yJGVsbV9kaWZmJERpZmYkVW5leHBlY3RlZFBhdGggPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnVW5leHBlY3RlZFBhdGgnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGppbmpvciRlbG1fZGlmZiREaWZmJG1ha2VDaGFuZ2VzSGVscCA9IEY1KAoJZnVuY3Rpb24gKGNoYW5nZXMsIGdldEEsIGdldEIsIF92MCwgcGF0aCkgewoJCW1ha2VDaGFuZ2VzSGVscDoKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgeCA9IF92MC5hOwoJCQl2YXIgeSA9IF92MC5iOwoJCQlpZiAoIXBhdGguYikgewoJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soY2hhbmdlcyk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgX3YyID0gcGF0aC5hOwoJCQkJdmFyIHByZXZYID0gX3YyLmE7CgkJCQl2YXIgcHJldlkgPSBfdjIuYjsKCQkJCXZhciB0YWlsID0gcGF0aC5iOwoJCQkJdmFyIGNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKCQkJCQlpZiAoX1V0aWxzX2VxKHggLSAxLCBwcmV2WCkgJiYgX1V0aWxzX2VxKHkgLSAxLCBwcmV2WSkpIHsKCQkJCQkJdmFyIF92NCA9IGdldEEoeCk7CgkJCQkJCWlmIChfdjQuJCA9PT0gJ0p1c3QnKSB7CgkJCQkJCQl2YXIgYSA9IF92NC5hOwoJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkJCQkJJGppbmpvciRlbG1fZGlmZiREaWZmJE5vQ2hhbmdlKGEpKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCQkJCQkkamluam9yJGVsbV9kaWZmJERpZmYkQ2Fubm90R2V0QSh4KSk7CgkJCQkJCX0KCQkJCQl9IGVsc2UgewoJCQkJCQlpZiAoX1V0aWxzX2VxKHgsIHByZXZYKSkgewoJCQkJCQkJdmFyIF92NSA9IGdldEIoeSk7CgkJCQkJCQlpZiAoX3Y1LiQgPT09ICdKdXN0JykgewoJCQkJCQkJCXZhciBiID0gX3Y1LmE7CgkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkJCQkJCSRqaW5qb3IkZWxtX2RpZmYkRGlmZiRBZGRlZChiKSk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCQkJCQkJJGppbmpvciRlbG1fZGlmZiREaWZmJENhbm5vdEdldEIoeSkpOwoJCQkJCQkJfQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJaWYgKF9VdGlsc19lcSh5LCBwcmV2WSkpIHsKCQkJCQkJCQl2YXIgX3Y2ID0gZ2V0QSh4KTsKCQkJCQkJCQlpZiAoX3Y2LiQgPT09ICdKdXN0JykgewoJCQkJCQkJCQl2YXIgYSA9IF92Ni5hOwoJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkJCQkJCSRqaW5qb3IkZWxtX2RpZmYkRGlmZiRSZW1vdmVkKGEpKTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoCgkJCQkJCQkJCQkkamluam9yJGVsbV9kaWZmJERpZmYkQ2Fubm90R2V0QSh4KSk7CgkJCQkJCQkJfQoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGppbmpvciRlbG1fZGlmZiREaWZmJFVuZXhwZWN0ZWRQYXRoLAoJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMih4LCB5KSwKCQkJCQkJCQkJCXBhdGgpKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0oKTsKCQkJCWlmIChjaGFuZ2UuJCA9PT0gJ09rJykgewoJCQkJCXZhciBjID0gY2hhbmdlLmE7CgkJCQkJdmFyICR0ZW1wJGNoYW5nZXMgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBjLCBjaGFuZ2VzKSwKCQkJCQkJJHRlbXAkZ2V0QSA9IGdldEEsCgkJCQkJCSR0ZW1wJGdldEIgPSBnZXRCLAoJCQkJCQkkdGVtcCRfdjAgPSBfVXRpbHNfVHVwbGUyKHByZXZYLCBwcmV2WSksCgkJCQkJCSR0ZW1wJHBhdGggPSB0YWlsOwoJCQkJCWNoYW5nZXMgPSAkdGVtcCRjaGFuZ2VzOwoJCQkJCWdldEEgPSAkdGVtcCRnZXRBOwoJCQkJCWdldEIgPSAkdGVtcCRnZXRCOwoJCQkJCV92MCA9ICR0ZW1wJF92MDsKCQkJCQlwYXRoID0gJHRlbXAkcGF0aDsKCQkJCQljb250aW51ZSBtYWtlQ2hhbmdlc0hlbHA7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBlID0gY2hhbmdlLmE7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKGUpOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkamluam9yJGVsbV9kaWZmJERpZmYkbWFrZUNoYW5nZXMgPSBGMygKCWZ1bmN0aW9uIChnZXRBLCBnZXRCLCBwYXRoKSB7CgkJaWYgKCFwYXRoLmIpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soX0xpc3RfTmlsKTsKCQl9IGVsc2UgewoJCQl2YXIgbGF0ZXN0ID0gcGF0aC5hOwoJCQl2YXIgdGFpbCA9IHBhdGguYjsKCQkJcmV0dXJuIEE1KCRqaW5qb3IkZWxtX2RpZmYkRGlmZiRtYWtlQ2hhbmdlc0hlbHAsIF9MaXN0X05pbCwgZ2V0QSwgZ2V0QiwgbGF0ZXN0LCB0YWlsKTsKCQl9Cgl9KTsKdmFyICRqaW5qb3IkZWxtX2RpZmYkRGlmZiRDb250aW51ZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdDb250aW51ZScsIGE6IGF9Owp9Owp2YXIgJGppbmpvciRlbG1fZGlmZiREaWZmJEZvdW5kID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0ZvdW5kJywgYTogYX07Cn07CnZhciAkamluam9yJGVsbV9kaWZmJERpZmYkc3RlcCA9IEY0KAoJZnVuY3Rpb24gKHNuYWtlXywgb2Zmc2V0LCBrLCB2KSB7CgkJdmFyIGZyb21Ub3AgPSBBMigKCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQlfTGlzdF9OaWwsCgkJCUEyKCRlbG0kY29yZSRBcnJheSRnZXQsIChrICsgMSkgKyBvZmZzZXQsIHYpKTsKCQl2YXIgZnJvbUxlZnQgPSBBMigKCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQlfTGlzdF9OaWwsCgkJCUEyKCRlbG0kY29yZSRBcnJheSRnZXQsIChrIC0gMSkgKyBvZmZzZXQsIHYpKTsKCQl2YXIgX3YwID0gZnVuY3Rpb24gKCkgewoJCQl2YXIgX3YyID0gX1V0aWxzX1R1cGxlMihmcm9tTGVmdCwgZnJvbVRvcCk7CgkJCWlmICghX3YyLmEuYikgewoJCQkJaWYgKCFfdjIuYi5iKSB7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCV9MaXN0X05pbCwKCQkJCQkJX1V0aWxzX1R1cGxlMigwLCAwKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfdjMgPSBfdjIuYjsKCQkJCQl2YXIgX3Y0ID0gX3YzLmE7CgkJCQkJdmFyIHRvcFggPSBfdjQuYTsKCQkJCQl2YXIgdG9wWSA9IF92NC5iOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlmcm9tVG9wLAoJCQkJCQlfVXRpbHNfVHVwbGUyKHRvcFggKyAxLCB0b3BZKSk7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlpZiAoIV92Mi5iLmIpIHsKCQkJCQl2YXIgX3Y1ID0gX3YyLmE7CgkJCQkJdmFyIF92NiA9IF92NS5hOwoJCQkJCXZhciBsZWZ0WCA9IF92Ni5hOwoJCQkJCXZhciBsZWZ0WSA9IF92Ni5iOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlmcm9tTGVmdCwKCQkJCQkJX1V0aWxzX1R1cGxlMihsZWZ0WCwgbGVmdFkgKyAxKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfdjcgPSBfdjIuYTsKCQkJCQl2YXIgX3Y4ID0gX3Y3LmE7CgkJCQkJdmFyIGxlZnRYID0gX3Y4LmE7CgkJCQkJdmFyIGxlZnRZID0gX3Y4LmI7CgkJCQkJdmFyIF92OSA9IF92Mi5iOwoJCQkJCXZhciBfdjEwID0gX3Y5LmE7CgkJCQkJdmFyIHRvcFggPSBfdjEwLmE7CgkJCQkJdmFyIHRvcFkgPSBfdjEwLmI7CgkJCQkJcmV0dXJuIChfVXRpbHNfY21wKGxlZnRZICsgMSwgdG9wWSkgPiAtMSkgPyBfVXRpbHNfVHVwbGUyKAoJCQkJCQlmcm9tTGVmdCwKCQkJCQkJX1V0aWxzX1R1cGxlMihsZWZ0WCwgbGVmdFkgKyAxKSkgOiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlmcm9tVG9wLAoJCQkJCQlfVXRpbHNfVHVwbGUyKHRvcFggKyAxLCB0b3BZKSk7CgkJCQl9CgkJCX0KCQl9KCk7CgkJdmFyIHBhdGggPSBfdjAuYTsKCQl2YXIgX3YxID0gX3YwLmI7CgkJdmFyIHggPSBfdjEuYTsKCQl2YXIgeSA9IF92MS5iOwoJCXZhciBfdjExID0gQTMoCgkJCXNuYWtlXywKCQkJeCArIDEsCgkJCXkgKyAxLAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQlfVXRpbHNfVHVwbGUyKHgsIHkpLAoJCQkJcGF0aCkpOwoJCXZhciBuZXdQYXRoID0gX3YxMS5hOwoJCXZhciBnb2FsID0gX3YxMS5iOwoJCXJldHVybiBnb2FsID8gJGppbmpvciRlbG1fZGlmZiREaWZmJEZvdW5kKG5ld1BhdGgpIDogJGppbmpvciRlbG1fZGlmZiREaWZmJENvbnRpbnVlKAoJCQlBMygkZWxtJGNvcmUkQXJyYXkkc2V0LCBrICsgb2Zmc2V0LCBuZXdQYXRoLCB2KSk7Cgl9KTsKdmFyICRqaW5qb3IkZWxtX2RpZmYkRGlmZiRvbnBMb29wSyA9IEY0KAoJZnVuY3Rpb24gKHNuYWtlXywgb2Zmc2V0LCBrcywgdikgewoJCW9ucExvb3BLOgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmICgha3MuYikgewoJCQkJcmV0dXJuICRqaW5qb3IkZWxtX2RpZmYkRGlmZiRDb250aW51ZSh2KTsKCQkJfSBlbHNlIHsKCQkJCXZhciBrID0ga3MuYTsKCQkJCXZhciBrc18gPSBrcy5iOwoJCQkJdmFyIF92MSA9IEE0KCRqaW5qb3IkZWxtX2RpZmYkRGlmZiRzdGVwLCBzbmFrZV8sIG9mZnNldCwgaywgdik7CgkJCQlpZiAoX3YxLiQgPT09ICdGb3VuZCcpIHsKCQkJCQl2YXIgcGF0aCA9IF92MS5hOwoJCQkJCXJldHVybiAkamluam9yJGVsbV9kaWZmJERpZmYkRm91bmQocGF0aCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciB2XyA9IF92MS5hOwoJCQkJCXZhciAkdGVtcCRzbmFrZV8gPSBzbmFrZV8sCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCwKCQkJCQkJJHRlbXAka3MgPSBrc18sCgkJCQkJCSR0ZW1wJHYgPSB2XzsKCQkJCQlzbmFrZV8gPSAkdGVtcCRzbmFrZV87CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCWtzID0gJHRlbXAka3M7CgkJCQkJdiA9ICR0ZW1wJHY7CgkJCQkJY29udGludWUgb25wTG9vcEs7CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRqaW5qb3IkZWxtX2RpZmYkRGlmZiRvbnBMb29wUCA9IEY1KAoJZnVuY3Rpb24gKHNuYWtlXywgZGVsdGEsIG9mZnNldCwgcCwgdikgewoJCW9ucExvb3BQOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBrcyA9IChkZWx0YSA+IDApID8gX1V0aWxzX2FwKAoJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZSgKCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRyYW5nZSwgZGVsdGEgKyAxLCBkZWx0YSArIHApKSwKCQkJCUEyKCRlbG0kY29yZSRMaXN0JHJhbmdlLCAtcCwgZGVsdGEpKSA6IF9VdGlsc19hcCgKCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoCgkJCQkJQTIoJGVsbSRjb3JlJExpc3QkcmFuZ2UsIGRlbHRhICsgMSwgcCkpLAoJCQkJQTIoJGVsbSRjb3JlJExpc3QkcmFuZ2UsICgtcCkgKyBkZWx0YSwgZGVsdGEpKTsKCQkJdmFyIF92MCA9IEE0KCRqaW5qb3IkZWxtX2RpZmYkRGlmZiRvbnBMb29wSywgc25ha2VfLCBvZmZzZXQsIGtzLCB2KTsKCQkJaWYgKF92MC4kID09PSAnRm91bmQnKSB7CgkJCQl2YXIgcGF0aCA9IF92MC5hOwoJCQkJcmV0dXJuIHBhdGg7CgkJCX0gZWxzZSB7CgkJCQl2YXIgdl8gPSBfdjAuYTsKCQkJCXZhciAkdGVtcCRzbmFrZV8gPSBzbmFrZV8sCgkJCQkJJHRlbXAkZGVsdGEgPSBkZWx0YSwKCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQsCgkJCQkJJHRlbXAkcCA9IHAgKyAxLAoJCQkJCSR0ZW1wJHYgPSB2XzsKCQkJCXNuYWtlXyA9ICR0ZW1wJHNuYWtlXzsKCQkJCWRlbHRhID0gJHRlbXAkZGVsdGE7CgkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQlwID0gJHRlbXAkcDsKCQkJCXYgPSAkdGVtcCR2OwoJCQkJY29udGludWUgb25wTG9vcFA7CgkJCX0KCQl9Cgl9KTsKdmFyICRqaW5qb3IkZWxtX2RpZmYkRGlmZiRzbmFrZSA9IEY1KAoJZnVuY3Rpb24gKGdldEEsIGdldEIsIG5leHRYLCBuZXh0WSwgcGF0aCkgewoJCXNuYWtlOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBfdjAgPSBfVXRpbHNfVHVwbGUyKAoJCQkJZ2V0QShuZXh0WCksCgkJCQlnZXRCKG5leHRZKSk7CgkJCV92MCQyOgoJCQl3aGlsZSAodHJ1ZSkgewoJCQkJaWYgKF92MC5hLiQgPT09ICdKdXN0JykgewoJCQkJCWlmIChfdjAuYi4kID09PSAnSnVzdCcpIHsKCQkJCQkJdmFyIGEgPSBfdjAuYS5hOwoJCQkJCQl2YXIgYiA9IF92MC5iLmE7CgkJCQkJCWlmIChfVXRpbHNfZXEoYSwgYikpIHsKCQkJCQkJCXZhciAkdGVtcCRnZXRBID0gZ2V0QSwKCQkJCQkJCQkkdGVtcCRnZXRCID0gZ2V0QiwKCQkJCQkJCQkkdGVtcCRuZXh0WCA9IG5leHRYICsgMSwKCQkJCQkJCQkkdGVtcCRuZXh0WSA9IG5leHRZICsgMSwKCQkJCQkJCQkkdGVtcCRwYXRoID0gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQlfVXRpbHNfVHVwbGUyKG5leHRYLCBuZXh0WSksCgkJCQkJCQkJcGF0aCk7CgkJCQkJCQlnZXRBID0gJHRlbXAkZ2V0QTsKCQkJCQkJCWdldEIgPSAkdGVtcCRnZXRCOwoJCQkJCQkJbmV4dFggPSAkdGVtcCRuZXh0WDsKCQkJCQkJCW5leHRZID0gJHRlbXAkbmV4dFk7CgkJCQkJCQlwYXRoID0gJHRlbXAkcGF0aDsKCQkJCQkJCWNvbnRpbnVlIHNuYWtlOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIocGF0aCwgZmFsc2UpOwoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJYnJlYWsgX3YwJDI7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQlpZiAoX3YwLmIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXZhciBfdjEgPSBfdjAuYTsKCQkJCQkJdmFyIF92MiA9IF92MC5iOwoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihwYXRoLCB0cnVlKTsKCQkJCQl9IGVsc2UgewoJCQkJCQlicmVhayBfdjAkMjsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIocGF0aCwgZmFsc2UpOwoJCX0KCX0pOwp2YXIgJGppbmpvciRlbG1fZGlmZiREaWZmJG9ucCA9IEY0KAoJZnVuY3Rpb24gKGdldEEsIGdldEIsIG0sIG4pIHsKCQl2YXIgdiA9IEEyKAoJCQkkZWxtJGNvcmUkQXJyYXkkaW5pdGlhbGl6ZSwKCQkJKG0gKyBuKSArIDEsCgkJCSRlbG0kY29yZSRCYXNpY3MkYWx3YXlzKF9MaXN0X05pbCkpOwoJCXZhciBkZWx0YSA9IG4gLSBtOwoJCXJldHVybiBBNSgKCQkJJGppbmpvciRlbG1fZGlmZiREaWZmJG9ucExvb3BQLAoJCQlBMigkamluam9yJGVsbV9kaWZmJERpZmYkc25ha2UsIGdldEEsIGdldEIpLAoJCQlkZWx0YSwKCQkJbSwKCQkJMCwKCQkJdik7Cgl9KTsKdmFyICRqaW5qb3IkZWxtX2RpZmYkRGlmZiR0ZXN0RGlmZiA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQl2YXIgYXJyQiA9ICRlbG0kY29yZSRBcnJheSRmcm9tTGlzdChiKTsKCQl2YXIgZ2V0QiA9IGZ1bmN0aW9uICh5KSB7CgkJCXJldHVybiBBMigkZWxtJGNvcmUkQXJyYXkkZ2V0LCB5IC0gMSwgYXJyQik7CgkJfTsKCQl2YXIgbiA9ICRlbG0kY29yZSRBcnJheSRsZW5ndGgoYXJyQik7CgkJdmFyIGFyckEgPSAkZWxtJGNvcmUkQXJyYXkkZnJvbUxpc3QoYSk7CgkJdmFyIGdldEEgPSBmdW5jdGlvbiAoeCkgewoJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJEFycmF5JGdldCwgeCAtIDEsIGFyckEpOwoJCX07CgkJdmFyIG0gPSAkZWxtJGNvcmUkQXJyYXkkbGVuZ3RoKGFyckEpOwoJCXZhciBwYXRoID0gQTQoJGppbmpvciRlbG1fZGlmZiREaWZmJG9ucCwgZ2V0QSwgZ2V0QiwgbSwgbik7CgkJcmV0dXJuIEEzKCRqaW5qb3IkZWxtX2RpZmYkRGlmZiRtYWtlQ2hhbmdlcywgZ2V0QSwgZ2V0QiwgcGF0aCk7Cgl9KTsKdmFyICRqaW5qb3IkZWxtX2RpZmYkRGlmZiRkaWZmID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXZhciBfdjAgPSBBMigkamluam9yJGVsbV9kaWZmJERpZmYkdGVzdERpZmYsIGEsIGIpOwoJCWlmIChfdjAuJCA9PT0gJ09rJykgewoJCQl2YXIgY2hhbmdlcyA9IF92MC5hOwoJCQlyZXR1cm4gY2hhbmdlczsKCQl9IGVsc2UgewoJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JFdvcmtzcGFjZVN0YXRlXzIwMjFfMDEkZGlmZkNoYW5nZXNBZ2dyZWdhdGVOb0NoYW5nZVNlcXVlbmNlcyA9IGZ1bmN0aW9uIChjaGFuZ2VzKSB7Cgl2YXIgYWdncmVnYXRlUmVjdXJzaXZlUmV2ZXJ0ZWQgPSBGMigKCQlmdW5jdGlvbiAoYWdncmVnYXRlLCByZW1haW5pbmcpIHsKCQkJYWdncmVnYXRlUmVjdXJzaXZlUmV2ZXJ0ZWQ6CgkJCXdoaWxlICh0cnVlKSB7CgkJCQlpZiAoIXJlbWFpbmluZy5iKSB7CgkJCQkJcmV0dXJuIGFnZ3JlZ2F0ZTsKCQkJCX0gZWxzZSB7CgkJCQkJaWYgKCgocmVtYWluaW5nLmEuJCA9PT0gJ05vQ2hhbmdlJykgJiYgcmVtYWluaW5nLmIuYikgJiYgKHJlbWFpbmluZy5iLmEuJCA9PT0gJ05vQ2hhbmdlJykpIHsKCQkJCQkJdmFyIGZpcnN0Tm9DaGFuZ2UgPSByZW1haW5pbmcuYS5hOwoJCQkJCQl2YXIgX3YxID0gcmVtYWluaW5nLmI7CgkJCQkJCXZhciBzZWNvbmROb0NoYW5nZSA9IF92MS5hLmE7CgkJCQkJCXZhciByZW1haW5pbmdUYWlsID0gX3YxLmI7CgkJCQkJCXZhciAkdGVtcCRhZ2dyZWdhdGUgPSBhZ2dyZWdhdGUsCgkJCQkJCQkkdGVtcCRyZW1haW5pbmcgPSBBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkkamluam9yJGVsbV9kaWZmJERpZmYkTm9DaGFuZ2UoCgkJCQkJCQkJX1V0aWxzX2FwKGZpcnN0Tm9DaGFuZ2UsIHNlY29uZE5vQ2hhbmdlKSksCgkJCQkJCQlyZW1haW5pbmdUYWlsKTsKCQkJCQkJYWdncmVnYXRlID0gJHRlbXAkYWdncmVnYXRlOwoJCQkJCQlyZW1haW5pbmcgPSAkdGVtcCRyZW1haW5pbmc7CgkJCQkJCWNvbnRpbnVlIGFnZ3JlZ2F0ZVJlY3Vyc2l2ZVJldmVydGVkOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBuZXh0UmVtYWluaW5nID0gcmVtYWluaW5nLmE7CgkJCQkJCXZhciByZW1haW5pbmdUYWlsID0gcmVtYWluaW5nLmI7CgkJCQkJCXZhciAkdGVtcCRhZ2dyZWdhdGUgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBuZXh0UmVtYWluaW5nLCBhZ2dyZWdhdGUpLAoJCQkJCQkJJHRlbXAkcmVtYWluaW5nID0gcmVtYWluaW5nVGFpbDsKCQkJCQkJYWdncmVnYXRlID0gJHRlbXAkYWdncmVnYXRlOwoJCQkJCQlyZW1haW5pbmcgPSAkdGVtcCRyZW1haW5pbmc7CgkJCQkJCWNvbnRpbnVlIGFnZ3JlZ2F0ZVJlY3Vyc2l2ZVJldmVydGVkOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0pOwoJcmV0dXJuICRlbG0kY29yZSRMaXN0JHJldmVyc2UoCgkJQTIoYWdncmVnYXRlUmVjdXJzaXZlUmV2ZXJ0ZWQsIF9MaXN0X05pbCwgY2hhbmdlcykpOwp9Owp2YXIgJGVsbV9jb21tdW5pdHkkbGlzdF9leHRyYSRMaXN0JEV4dHJhJGZpbmRJbmRleEhlbHAgPSBGMygKCWZ1bmN0aW9uIChpbmRleCwgcHJlZGljYXRlLCBsaXN0KSB7CgkJZmluZEluZGV4SGVscDoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIWxpc3QuYikgewoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQl9IGVsc2UgewoJCQkJdmFyIHggPSBsaXN0LmE7CgkJCQl2YXIgeHMgPSBsaXN0LmI7CgkJCQlpZiAocHJlZGljYXRlKHgpKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KGluZGV4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyICR0ZW1wJGluZGV4ID0gaW5kZXggKyAxLAoJCQkJCQkkdGVtcCRwcmVkaWNhdGUgPSBwcmVkaWNhdGUsCgkJCQkJCSR0ZW1wJGxpc3QgPSB4czsKCQkJCQlpbmRleCA9ICR0ZW1wJGluZGV4OwoJCQkJCXByZWRpY2F0ZSA9ICR0ZW1wJHByZWRpY2F0ZTsKCQkJCQlsaXN0ID0gJHRlbXAkbGlzdDsKCQkJCQljb250aW51ZSBmaW5kSW5kZXhIZWxwOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkZWxtX2NvbW11bml0eSRsaXN0X2V4dHJhJExpc3QkRXh0cmEkZmluZEluZGV4ID0gJGVsbV9jb21tdW5pdHkkbGlzdF9leHRyYSRMaXN0JEV4dHJhJGZpbmRJbmRleEhlbHAoMCk7CnZhciAkZWxtX2NvbW11bml0eSRsaXN0X2V4dHJhJExpc3QkRXh0cmEkc3BsaXRBdCA9IEYyKAoJZnVuY3Rpb24gKG4sIHhzKSB7CgkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCUEyKCRlbG0kY29yZSRMaXN0JHRha2UsIG4sIHhzKSwKCQkJQTIoJGVsbSRjb3JlJExpc3QkZHJvcCwgbiwgeHMpKTsKCX0pOwp2YXIgJGVsbV9jb21tdW5pdHkkbGlzdF9leHRyYSRMaXN0JEV4dHJhJHNwbGl0V2hlbiA9IEYyKAoJZnVuY3Rpb24gKHByZWRpY2F0ZSwgbGlzdCkgewoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJZnVuY3Rpb24gKGkpIHsKCQkJCXJldHVybiBBMigkZWxtX2NvbW11bml0eSRsaXN0X2V4dHJhJExpc3QkRXh0cmEkc3BsaXRBdCwgaSwgbGlzdCk7CgkJCX0sCgkJCUEyKCRlbG1fY29tbXVuaXR5JGxpc3RfZXh0cmEkTGlzdCRFeHRyYSRmaW5kSW5kZXgsIHByZWRpY2F0ZSwgbGlzdCkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkV29ya3NwYWNlU3RhdGVfMjAyMV8wMSRzcGxpdEJsb2JWYWx1ZUF0TGluZUJyZWFrcyA9IGZ1bmN0aW9uIChibG9iVmFsdWUpIHsKCXZhciBpc0xpbmVCcmVha0NoYXJhY3RlciA9IGZ1bmN0aW9uIChfY2hhcikgewoJCXJldHVybiAoX2NoYXIgPT09IDEwKSB8fCAoX2NoYXIgPT09IDEzKTsKCX07Cgl2YXIgYnJlYWtSZWN1cnNpdmVSZXZlcnRlZCA9IEYyKAoJCWZ1bmN0aW9uIChicm9rZW4sIHJlbWFpbmluZykgewoJCQlicmVha1JlY3Vyc2l2ZVJldmVydGVkOgoJCQl3aGlsZSAodHJ1ZSkgewoJCQkJdmFyIF92MCA9IEEyKCRlbG1fY29tbXVuaXR5JGxpc3RfZXh0cmEkTGlzdCRFeHRyYSRzcGxpdFdoZW4sIGlzTGluZUJyZWFrQ2hhcmFjdGVyLCByZW1haW5pbmcpOwoJCQkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgcmVtYWluaW5nLCBicm9rZW4pOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YxID0gX3YwLmE7CgkJCQkJdmFyIG5leHRFbGVtZW50ID0gX3YxLmE7CgkJCQkJdmFyIG5leHRSZW1haW5pbmdQbHVzSGVhZCA9IF92MS5iOwoJCQkJCWlmICghbmV4dFJlbWFpbmluZ1BsdXNIZWFkLmIpIHsKCQkJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHJlbWFpbmluZywgYnJva2VuKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgbmV4dEVsZW1lbnRUYWlsID0gbmV4dFJlbWFpbmluZ1BsdXNIZWFkLmE7CgkJCQkJCXZhciBuZXh0UmVtYWluaW5nID0gbmV4dFJlbWFpbmluZ1BsdXNIZWFkLmI7CgkJCQkJCXZhciAkdGVtcCRicm9rZW4gPSBBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQlfVXRpbHNfYXAoCgkJCQkJCQkJbmV4dEVsZW1lbnQsCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbbmV4dEVsZW1lbnRUYWlsXSkpLAoJCQkJCQkJYnJva2VuKSwKCQkJCQkJCSR0ZW1wJHJlbWFpbmluZyA9IG5leHRSZW1haW5pbmc7CgkJCQkJCWJyb2tlbiA9ICR0ZW1wJGJyb2tlbjsKCQkJCQkJcmVtYWluaW5nID0gJHRlbXAkcmVtYWluaW5nOwoJCQkJCQljb250aW51ZSBicmVha1JlY3Vyc2l2ZVJldmVydGVkOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0pOwoJcmV0dXJuICRlbG0kY29yZSRMaXN0JHJldmVyc2UoCgkJQTIoYnJlYWtSZWN1cnNpdmVSZXZlcnRlZCwgX0xpc3RfTmlsLCBibG9iVmFsdWUpKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRXb3Jrc3BhY2VTdGF0ZV8yMDIxXzAxJGZpbmRCbG9iQ2hhbmdlcyA9IEYyKAoJZnVuY3Rpb24gKGJhc2VCbG9iVmFsdWUsIGJsb2JWYWx1ZSkgewoJCXZhciBibG9iVmFsdWVCbG9ja3MgPSAkYXV0aG9yJHByb2plY3QkV29ya3NwYWNlU3RhdGVfMjAyMV8wMSRzcGxpdEJsb2JWYWx1ZUF0TGluZUJyZWFrcygKCQkJJFRTRm9zdGVyJGVsbV9ieXRlc19leHRyYSRCeXRlcyRFeHRyYSR0b0J5dGVWYWx1ZXMoYmxvYlZhbHVlKSk7CgkJdmFyIGJhc2VCbG9iVmFsdWVJbnRzID0gJFRTRm9zdGVyJGVsbV9ieXRlc19leHRyYSRCeXRlcyRFeHRyYSR0b0J5dGVWYWx1ZXMoYmFzZUJsb2JWYWx1ZSk7CgkJdmFyIGJhc2VCbG9iVmFsdWVCbG9ja3MgPSAkYXV0aG9yJHByb2plY3QkV29ya3NwYWNlU3RhdGVfMjAyMV8wMSRzcGxpdEJsb2JWYWx1ZUF0TGluZUJyZWFrcyhiYXNlQmxvYlZhbHVlSW50cyk7CgkJdmFyIGNoYW5nZXMgPSAkYXV0aG9yJHByb2plY3QkV29ya3NwYWNlU3RhdGVfMjAyMV8wMSRkaWZmQ2hhbmdlc0FnZ3JlZ2F0ZU5vQ2hhbmdlU2VxdWVuY2VzKAoJCQlBMigkamluam9yJGVsbV9kaWZmJERpZmYkZGlmZiwgYmFzZUJsb2JWYWx1ZUJsb2NrcywgYmxvYlZhbHVlQmxvY2tzKSk7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCWZ1bmN0aW9uIChjaGFuZ2UpIHsKCQkJCXN3aXRjaCAoY2hhbmdlLiQpIHsKCQkJCQljYXNlICdOb0NoYW5nZSc6CgkJCQkJCXZhciBub0NoYW5nZSA9IGNoYW5nZS5hOwoJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JFdvcmtzcGFjZVN0YXRlXzIwMjFfMDEkUmV1c2VCeXRlcygKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGxlbmd0aChub0NoYW5nZSkpOwoJCQkJCWNhc2UgJ1JlbW92ZWQnOgoJCQkJCQl2YXIgcmVtb3ZlZCA9IGNoYW5nZS5hOwoJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JFdvcmtzcGFjZVN0YXRlXzIwMjFfMDEkUmVtb3ZlQnl0ZXMoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRsZW5ndGgocmVtb3ZlZCkpOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXZhciBhZGRlZCA9IGNoYW5nZS5hOwoJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JFdvcmtzcGFjZVN0YXRlXzIwMjFfMDEkQWRkQnl0ZXMoCgkJCQkJCQkkVFNGb3N0ZXIkZWxtX2J5dGVzX2V4dHJhJEJ5dGVzJEV4dHJhJGZyb21CeXRlVmFsdWVzKGFkZGVkKSk7CgkJCQl9CgkJCX0sCgkJCWNoYW5nZXMpOwoJfSk7CnZhciAkZWxtJGNvcmUkU2V0JGVtcHR5ID0gJGVsbSRjb3JlJFNldCRTZXRfZWxtX2J1aWx0aW4oJGVsbSRjb3JlJERpY3QkZW1wdHkpOwp2YXIgJGVsbSRjb3JlJFNldCRpbnNlcnQgPSBGMigKCWZ1bmN0aW9uIChrZXksIF92MCkgewoJCXZhciBkaWN0ID0gX3YwLmE7CgkJcmV0dXJuICRlbG0kY29yZSRTZXQkU2V0X2VsbV9idWlsdGluKAoJCQlBMygkZWxtJGNvcmUkRGljdCRpbnNlcnQsIGtleSwgX1V0aWxzX1R1cGxlMCwgZGljdCkpOwoJfSk7CnZhciAkZWxtJGNvcmUkU2V0JGZyb21MaXN0ID0gZnVuY3Rpb24gKGxpc3QpIHsKCXJldHVybiBBMygkZWxtJGNvcmUkTGlzdCRmb2xkbCwgJGVsbSRjb3JlJFNldCRpbnNlcnQsICRlbG0kY29yZSRTZXQkZW1wdHksIGxpc3QpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlSW5Xb3Jrc3BhY2Ukc2VhcmNoV29ya3NwYWNlU3RhdGVEaWZmZXJlbmNlXzIwMjFfMDEgPSBGMigKCWZ1bmN0aW9uICh3b3Jrc3BhY2VTdGF0ZSwgX3YwKSB7CgkJdmFyIGJhc2VDb21wb3NpdGlvbiA9IF92MC5iYXNlQ29tcG9zaXRpb247CgkJdmFyIHdvcmtzcGFjZVN0YXRlQmxvYnMgPSAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkZmxhdExpc3RPZkJsb2JzRnJvbUZpbGVUcmVlTm9kZSh3b3Jrc3BhY2VTdGF0ZSk7CgkJdmFyIHdvcmtzcGFjZVN0YXRlQmxvYnNQYXRocyA9ICRlbG0kY29yZSRTZXQkZnJvbUxpc3QoCgkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJGVsbSRjb3JlJFR1cGxlJGZpcnN0LCB3b3Jrc3BhY2VTdGF0ZUJsb2JzKSk7CgkJdmFyIGJhc2VDb21wb3NpdGlvbkJsb2JzID0gJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJGZsYXRMaXN0T2ZCbG9ic0Zyb21GaWxlVHJlZU5vZGUoYmFzZUNvbXBvc2l0aW9uKTsKCQl2YXIgYmFzZUNvbXBvc2l0aW9uQmxvYnNEaWN0ID0gJGVsbSRjb3JlJERpY3QkZnJvbUxpc3QoYmFzZUNvbXBvc2l0aW9uQmxvYnMpOwoJCXZhciBiYXNlQ29tcG9zaXRpb25CbG9ic1BhdGhzID0gJGVsbSRjb3JlJFNldCRmcm9tTGlzdCgKCQkJQTIoJGVsbSRjb3JlJExpc3QkbWFwLCAkZWxtJGNvcmUkVHVwbGUkZmlyc3QsIGJhc2VDb21wb3NpdGlvbkJsb2JzKSk7CgkJdmFyIHJlbW92ZU5vZGVzID0gJGVsbSRjb3JlJFNldCR0b0xpc3QoCgkJCUEyKCRlbG0kY29yZSRTZXQkZGlmZiwgYmFzZUNvbXBvc2l0aW9uQmxvYnNQYXRocywgd29ya3NwYWNlU3RhdGVCbG9ic1BhdGhzKSk7CgkJdmFyIGFkZGVkT3JDaGFuZ2VkQmxvYnMgPSBBMigKCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyLAoJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQl2YXIgYmxvYlBhdGggPSBfdjIuYTsKCQkJCXZhciBuZXdCbG9iQ29udGVudCA9IF92Mi5iOwoJCQkJcmV0dXJuICFBMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCQkJZmFsc2UsCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCQkJcmV0dXJuICQuYXNCYXNlNjQ7CgkJCQkJCQl9LAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRlcShuZXdCbG9iQ29udGVudC5hc0Jhc2U2NCkpLAoJCQkJCQlBMigkZWxtJGNvcmUkRGljdCRnZXQsIGJsb2JQYXRoLCBiYXNlQ29tcG9zaXRpb25CbG9ic0RpY3QpKSk7CgkJCX0sCgkJCXdvcmtzcGFjZVN0YXRlQmxvYnMpOwoJCXZhciBhZGRlZE9yQ2hhbmdlZEJsb2JzV2l0aEhhc2ggPSBBMigKCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQl2YXIgYmxvYlBhdGggPSBfdjEuYTsKCQkJCXZhciBibG9iVmFsdWUgPSBfdjEuYjsKCQkJCXZhciBiYXNlQ29tcG9zaXRpb25CbG9iVmFsdWUgPSBBMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCQkJJFRTRm9zdGVyJGVsbV9ieXRlc19leHRyYSRCeXRlcyRFeHRyYSRlbXB0eSwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCXJldHVybiAkLmFzQnl0ZXM7CgkJCQkJCX0sCgkJCQkJCUEyKCRlbG0kY29yZSREaWN0JGdldCwgYmxvYlBhdGgsIGJhc2VDb21wb3NpdGlvbkJsb2JzRGljdCkpKTsKCQkJCXZhciBjaGFuZ2VzRnJvbUJhc2VCbG9iID0gQTIoJGF1dGhvciRwcm9qZWN0JFdvcmtzcGFjZVN0YXRlXzIwMjFfMDEkZmluZEJsb2JDaGFuZ2VzLCBiYXNlQ29tcG9zaXRpb25CbG9iVmFsdWUsIGJsb2JWYWx1ZS5hc0J5dGVzKTsKCQkJCXJldHVybiB7CgkJCQkJYmxvYkhhc2g6ICRmb2xrZXJ0ZGV2JGVsbV9zaGEyJFNIQTI1NiR0b0hleCgKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlSW5Xb3Jrc3BhY2UkY29tcG9zaXRpb25IYXNoRnJvbUZpbGVUcmVlTm9kZSgKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRCbG9iTm9kZShibG9iVmFsdWUpKSksCgkJCQkJYmxvYlBhdGg6IGJsb2JQYXRoLAoJCQkJCWJsb2JWYWx1ZTogYmxvYlZhbHVlLAoJCQkJCWNoYW5nZXNGcm9tQmFzZUJsb2I6IGNoYW5nZXNGcm9tQmFzZUJsb2IKCQkJCX07CgkJCX0sCgkJCWFkZGVkT3JDaGFuZ2VkQmxvYnMpOwoJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQl7CgkJCQljaGFuZ2VCbG9iczogQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCWZ1bmN0aW9uIChibG9iKSB7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKGJsb2IuYmxvYlBhdGgsIGJsb2IuY2hhbmdlc0Zyb21CYXNlQmxvYik7CgkJCQkJfSwKCQkJCQlhZGRlZE9yQ2hhbmdlZEJsb2JzV2l0aEhhc2gpLAoJCQkJcmVtb3ZlTm9kZXM6IHJlbW92ZU5vZGVzCgkJCX0pOwoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCRzb3J0QnkgPSBfTGlzdF9zb3J0Qnk7CnZhciAkZWxtJHVybCRVcmwkQnVpbGRlciRRdWVyeVBhcmFtZXRlciA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdRdWVyeVBhcmFtZXRlcicsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkZWxtJHVybCRVcmwkcGVyY2VudEVuY29kZSA9IF9VcmxfcGVyY2VudEVuY29kZTsKdmFyICRlbG0kdXJsJFVybCRCdWlsZGVyJHN0cmluZyA9IEYyKAoJZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kdXJsJFVybCRCdWlsZGVyJFF1ZXJ5UGFyYW1ldGVyLAoJCQkkZWxtJHVybCRVcmwkcGVyY2VudEVuY29kZShrZXkpLAoJCQkkZWxtJHVybCRVcmwkcGVyY2VudEVuY29kZSh2YWx1ZSkpOwoJfSk7CnZhciAkZWxtJHVybCRVcmwkYWRkUG9ydCA9IEYyKAoJZnVuY3Rpb24gKG1heWJlUG9ydCwgc3RhcnRlcikgewoJCWlmIChtYXliZVBvcnQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiBzdGFydGVyOwoJCX0gZWxzZSB7CgkJCXZhciBwb3J0XyA9IG1heWJlUG9ydC5hOwoJCQlyZXR1cm4gc3RhcnRlciArICgnOicgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9ydF8pKTsKCQl9Cgl9KTsKdmFyICRlbG0kdXJsJFVybCRhZGRQcmVmaXhlZCA9IEYzKAoJZnVuY3Rpb24gKHByZWZpeCwgbWF5YmVTZWdtZW50LCBzdGFydGVyKSB7CgkJaWYgKG1heWJlU2VnbWVudC4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIHN0YXJ0ZXI7CgkJfSBlbHNlIHsKCQkJdmFyIHNlZ21lbnQgPSBtYXliZVNlZ21lbnQuYTsKCQkJcmV0dXJuIF9VdGlsc19hcCgKCQkJCXN0YXJ0ZXIsCgkJCQlfVXRpbHNfYXAocHJlZml4LCBzZWdtZW50KSk7CgkJfQoJfSk7CnZhciAkZWxtJHVybCRVcmwkdG9TdHJpbmcgPSBmdW5jdGlvbiAodXJsKSB7Cgl2YXIgaHR0cCA9IGZ1bmN0aW9uICgpIHsKCQl2YXIgX3YwID0gdXJsLnByb3RvY29sOwoJCWlmIChfdjAuJCA9PT0gJ0h0dHAnKSB7CgkJCXJldHVybiAnaHR0cDovLyc7CgkJfSBlbHNlIHsKCQkJcmV0dXJuICdodHRwczovLyc7CgkJfQoJfSgpOwoJcmV0dXJuIEEzKAoJCSRlbG0kdXJsJFVybCRhZGRQcmVmaXhlZCwKCQknIycsCgkJdXJsLmZyYWdtZW50LAoJCUEzKAoJCQkkZWxtJHVybCRVcmwkYWRkUHJlZml4ZWQsCgkJCSc/JywKCQkJdXJsLnF1ZXJ5LAoJCQlfVXRpbHNfYXAoCgkJCQlBMigKCQkJCQkkZWxtJHVybCRVcmwkYWRkUG9ydCwKCQkJCQl1cmwucG9ydF8sCgkJCQkJX1V0aWxzX2FwKGh0dHAsIHVybC5ob3N0KSksCgkJCQl1cmwucGF0aCkpKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJHNldFdvcmtzcGFjZVN0YXRlSW5VcmwgPSBGNCgKCWZ1bmN0aW9uICh3b3Jrc3BhY2VTdGF0ZSwgbWF5YmVXb3Jrc3BhY2VTdGF0ZUJhc2UsIG9wdGlvbmFsUGFyYW1ldGVycywgdXJsKSB7CgkJdmFyIHdvcmtzcGFjZVN0YXRlSnVzdEJ5dGVzID0gJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlSW5Xb3Jrc3BhY2UkbWFwQmxvYnNUb0J5dGVzKHdvcmtzcGFjZVN0YXRlKTsKCQl2YXIgd29ya3NwYWNlU3RhdGVEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uICgpIHsKCQkJaWYgKG1heWJlV29ya3NwYWNlU3RhdGVCYXNlLiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJExpdGVyYWxXb3Jrc3BhY2VTdGF0ZSh3b3Jrc3BhY2VTdGF0ZUp1c3RCeXRlcyk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgd29ya3NwYWNlU3RhdGVCYXNlID0gbWF5YmVXb3Jrc3BhY2VTdGF0ZUJhc2UuYTsKCQkJCWlmIChfVXRpbHNfZXEoCgkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5Vcmwkd29ya3NwYWNlU3RhdGVDb21wb3NpdGlvbkhhc2god29ya3NwYWNlU3RhdGVKdXN0Qnl0ZXMpLAoJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJHdvcmtzcGFjZVN0YXRlQ29tcG9zaXRpb25IYXNoKAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRmlsZVRyZWVJbldvcmtzcGFjZSRtYXBCbG9ic1RvQnl0ZXMod29ya3NwYWNlU3RhdGVCYXNlLmZpbGVUcmVlKSkpKSB7CgkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJExpbmtXb3Jrc3BhY2VTdGF0ZSh3b3Jrc3BhY2VTdGF0ZUJhc2UudXJsSW5Db21taXQpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3Y0ID0gQTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJHNlYXJjaFdvcmtzcGFjZVN0YXRlRGlmZmVyZW5jZV8yMDIxXzAxLAoJCQkJCQl3b3Jrc3BhY2VTdGF0ZSwKCQkJCQkJe2Jhc2VDb21wb3NpdGlvbjogd29ya3NwYWNlU3RhdGVCYXNlLmZpbGVUcmVlfSk7CgkJCQkJaWYgKF92NC4kID09PSAnRXJyJykgewoJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5VcmwkTGl0ZXJhbFdvcmtzcGFjZVN0YXRlKHdvcmtzcGFjZVN0YXRlSnVzdEJ5dGVzKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgZGlmZk1vZGVsID0gX3Y0LmE7CgkJCQkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCREaWZmV29ya3NwYWNlU3RhdGVfVmVyc2lvbl8yMDIxXzAxKAoJCQkJCQkJe2Jhc2U6IHdvcmtzcGFjZVN0YXRlQmFzZS51cmxJbkNvbW1pdCwgZGlmZmVyZW5jZUZyb21CYXNlOiBkaWZmTW9kZWx9KTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9KCk7CgkJdmFyIG9wdGlvbmFsUXVlcnlQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgewoJCQl2YXIgX3YyID0gb3B0aW9uYWxQYXJhbWV0ZXJzLmZpbGVQYXRoVG9PcGVuOwoJCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJfSBlbHNlIHsKCQkJCXZhciBmaWxlUGF0aFRvT3BlbiA9IF92Mi5hOwoJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKAoJCQkJCQkkZWxtJHVybCRVcmwkQnVpbGRlciRzdHJpbmcsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJGZpbGVQYXRoVG9PcGVuUXVlcnlQYXJhbWV0ZXJOYW1lLAoJCQkJCQlBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcvJywgZmlsZVBhdGhUb09wZW4pKQoJCQkJCV0pOwoJCQl9CgkJfSgpOwoJCXZhciBfdjAgPSBmdW5jdGlvbiAoKSB7CgkJCWlmICh3b3Jrc3BhY2VTdGF0ZURlc2NyaXB0aW9uLiQgPT09ICdMaW5rV29ya3NwYWNlU3RhdGUnKSB7CgkJCQl2YXIgbGluayA9IHdvcmtzcGFjZVN0YXRlRGVzY3JpcHRpb24uYTsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKGxpbmssIGZhbHNlKTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCUEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkZW5jb2RlLAoJCQkJCQkwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCRqc29uRW5jb2RlV29ya3NwYWNlU3RhdGVEZXNjcmlwdGlvbih3b3Jrc3BhY2VTdGF0ZURlc2NyaXB0aW9uKSksCgkJCQkJdHJ1ZSk7CgkJCX0KCQl9KCk7CgkJdmFyIHdvcmtzcGFjZVN0YXRlU3RyaW5nID0gX3YwLmE7CgkJdmFyIGFwcGx5Q29tcHJlc3Npb24gPSBfdjAuYjsKCQl2YXIgd29ya3NwYWNlU3RhdGVRdWVyeVBhcmFtZXRlciA9IGZ1bmN0aW9uICgpIHsKCQkJaWYgKGFwcGx5Q29tcHJlc3Npb24pIHsKCQkJCXZhciB3b3Jrc3BhY2VTdGF0ZVN0cmluZ0J5dGVzID0gJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkZW5jb2RlKAoJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHN0cmluZyh3b3Jrc3BhY2VTdGF0ZVN0cmluZykpOwoJCQkJdmFyIGNvbXByZXNzaW9uID0gJGZvbGtlcnRkZXYkZWxtX2ZsYXRlJEZsYXRlJFdpdGhXaW5kb3dTaXplKCRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRMWjc3JG1heFdpbmRvd1NpemUpOwoJCQkJdmFyIGRlZmxhdGVkV2l0aER5bmFtaWMgPSBBMigKCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRmxhdGUkZGVmbGF0ZVdpdGhPcHRpb25zLAoJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRGbGF0ZSREeW5hbWljKGNvbXByZXNzaW9uKSwKCQkJCQl3b3Jrc3BhY2VTdGF0ZVN0cmluZ0J5dGVzKTsKCQkJCXZhciBkZWZsYXRlZFdpdGhTdGF0aWMgPSBBMigKCQkJCQkkZm9sa2VydGRldiRlbG1fZmxhdGUkRmxhdGUkZGVmbGF0ZVdpdGhPcHRpb25zLAoJCQkJCSRmb2xrZXJ0ZGV2JGVsbV9mbGF0ZSRGbGF0ZSRTdGF0aWMoY29tcHJlc3Npb24pLAoJCQkJCXdvcmtzcGFjZVN0YXRlU3RyaW5nQnl0ZXMpOwoJCQkJdmFyIGRlZmxhdGVkQnl0ZXMgPSBBMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCQkJZGVmbGF0ZWRXaXRoU3RhdGljLAoJCQkJCSRlbG0kY29yZSRMaXN0JGhlYWQoCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3Qkc29ydEJ5LAoJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyR3aWR0aCwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbZGVmbGF0ZWRXaXRoU3RhdGljLCBkZWZsYXRlZFdpdGhEeW5hbWljXSkpKSk7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSR1cmwkVXJsJEJ1aWxkZXIkc3RyaW5nLAoJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJHdvcmtzcGFjZVN0YXRlRGVmbGF0ZUJhc2U2NFF1ZXJ5UGFyYW1ldGVyTmFtZSwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkJCQknRmFpbGVkIHRvIGVuY29kZSBhcyBiYXNlNjQnLAoJCQkJCQkkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEJhc2U2NCRmcm9tQnl0ZXMoZGVmbGF0ZWRCeXRlcykpKTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiBBMigkZWxtJHVybCRVcmwkQnVpbGRlciRzdHJpbmcsICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJHdvcmtzcGFjZVN0YXRlUXVlcnlQYXJhbWV0ZXJOYW1lLCB3b3Jrc3BhY2VTdGF0ZVN0cmluZyk7CgkJCX0KCQl9KCk7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCV9VdGlsc191cGRhdGUoCgkJCQl1cmwsCgkJCQl7aG9zdDogJ0Vycm9yOiBGYWlsZWQgdG8gcGFyc2UgVVJMIGZyb20gU3RyaW5nJ30pLAoJCQkkZWxtJHVybCRVcmwkZnJvbVN0cmluZygKCQkJCUEzKAoJCQkJCSRlbG0kdXJsJFVybCRCdWlsZGVyJGNyb3NzT3JpZ2luLAoJCQkJCSRlbG0kdXJsJFVybCR0b1N0cmluZygKCQkJCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCXVybCwKCQkJCQkJCXtmcmFnbWVudDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsIHBhdGg6ICcnLCBxdWVyeTogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSksCgkJCQkJX0xpc3RfTmlsLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQl3b3Jrc3BhY2VTdGF0ZVF1ZXJ5UGFyYW1ldGVyLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJHVybCRVcmwkQnVpbGRlciRzdHJpbmcsCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5Vcmwkd29ya3NwYWNlU3RhdGVIYXNoUXVlcnlQYXJhbWV0ZXJOYW1lLAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJHdvcmtzcGFjZVN0YXRlQ29tcG9zaXRpb25IYXNoKHdvcmtzcGFjZVN0YXRlSnVzdEJ5dGVzKSksCgkJCQkJCQlvcHRpb25hbFF1ZXJ5UGFyYW1ldGVycykpKSkpOwoJfSk7CnZhciAkZWxtJGNvcmUkUmVzdWx0JHRvTWF5YmUgPSBmdW5jdGlvbiAocmVzdWx0KSB7CglpZiAocmVzdWx0LiQgPT09ICdPaycpIHsKCQl2YXIgdiA9IHJlc3VsdC5hOwoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCh2KTsKCX0gZWxzZSB7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kc2V0V29ya3NwYWNlU3RhdGVJblVybEZvckJvb2ttYXJrID0gRjMoCglmdW5jdGlvbiAoX3YwLCB3b3Jrc3BhY2VBY3RpdmUsIHN0YXRlKSB7CgkJdmFyIGNyZWF0ZURpZmZJZkJhc2VBdmFpbGFibGUgPSBfdjAuY3JlYXRlRGlmZklmQmFzZUF2YWlsYWJsZTsKCQl2YXIgZmlsZVBhdGhUb09wZW4gPSBmdW5jdGlvbiAoKSB7CgkJCXZhciBfdjEgPSB3b3Jrc3BhY2VBY3RpdmUuZWRpdGluZzsKCQkJaWYgKF92MS4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJfSBlbHNlIHsKCQkJCXZhciBlZGl0aW5nID0gX3YxLmE7CgkJCQl2YXIgX3YyID0gZWRpdGluZy5maWxlTG9jYXRpb247CgkJCQl2YXIgZGlyZWN0b3J5UGF0aCA9IF92Mi5hOwoJCQkJdmFyIGZpbGVOYW1lID0gX3YyLmI7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJX1V0aWxzX2FwKAoJCQkJCQlkaXJlY3RvcnlQYXRoLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbZmlsZU5hbWVdKSkpOwoJCQl9CgkJfSgpOwoJCXZhciBiYXNlVG9Vc2UgPSAoIWNyZWF0ZURpZmZJZkJhc2VBdmFpbGFibGUpID8gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcgOiBBMigKCQkJJGVsbSRjb3JlJE1heWJlJGFuZFRoZW4sCgkJCSRlbG0kY29yZSRSZXN1bHQkdG9NYXliZSwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTWF5YmUkYW5kVGhlbiwKCQkJCUEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsICRlbG0kY29yZSRUdXBsZSRzZWNvbmQsICRlbG0kY29yZSRSZXN1bHQkdG9NYXliZSksCgkJCQlzdGF0ZS5sYXN0QmFja2VuZExvYWRGcm9tR2l0UmVzdWx0KSk7CgkJcmV0dXJuIEE0KAoJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCRzZXRXb3Jrc3BhY2VTdGF0ZUluVXJsLAoJCQl3b3Jrc3BhY2VBY3RpdmUuZmlsZVRyZWUsCgkJCWJhc2VUb1VzZSwKCQkJe2ZpbGVQYXRoVG9PcGVuOiBmaWxlUGF0aFRvT3Blbn0sCgkJCXN0YXRlLnVybCk7Cgl9KTsKdmFyICRlbG0kZmlsZSRGaWxlJHRvQnl0ZXMgPSBfRmlsZV90b0J5dGVzOwp2YXIgJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRW5jb2RlJGkxNiA9ICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHVuc2lnbmVkSW50MTYoJGVsbSRieXRlcyRCeXRlcyRMRSk7CnZhciAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkY29tcHJlc3Npb25NZXRob2QgPSBmdW5jdGlvbiAobWV0aG9kKSB7CglyZXR1cm4gJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRW5jb2RlJGkxNigKCQlmdW5jdGlvbiAoKSB7CgkJCXN3aXRjaCAobWV0aG9kLiQpIHsKCQkJCWNhc2UgJ1N0b3JlZCc6CgkJCQkJcmV0dXJuIDA7CgkJCQljYXNlICdEZWZsYXRlZCc6CgkJCQkJcmV0dXJuIDg7CgkJCQlkZWZhdWx0OgoJCQkJCXZhciB4ID0gbWV0aG9kLmE7CgkJCQkJcmV0dXJuIHg7CgkJCX0KCQl9KCkpOwp9Owp2YXIgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkZ2V0U3RyaW5nV2lkdGggPSBfQnl0ZXNfZ2V0U3RyaW5nV2lkdGg7CnZhciAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkaTMyID0gJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkdW5zaWduZWRJbnQzMigkZWxtJGJ5dGVzJEJ5dGVzJExFKTsKdmFyICRhZ3VfeiRlbG1femlwJEludGVybmFsJEVuY29kZSRhZHZhbmNlID0gRjIoCglmdW5jdGlvbiAoZW50cnksIHN0ZXApIHsKCQl2YXIgbWV0YSA9IGVudHJ5LmI7CgkJdmFyIGZpbGVOYW1lV2lkdGggPSAkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRnZXRTdHJpbmdXaWR0aChtZXRhLmZpbGVOYW1lKTsKCQl2YXIgZXh0cmFGaWVsZFdpZHRoID0gJGVsbSRieXRlcyRCeXRlcyR3aWR0aChtZXRhLmV4dHJhRmllbGQpOwoJCXZhciBkYXRhID0gZnVuY3Rpb24gKCkgewoJCQl2YXIgX3YwID0gJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRGVjb2RlJHJlYWRGaWxlKGVudHJ5KTsKCQkJaWYgKF92MC4kID09PSAnSnVzdCcpIHsKCQkJCXZhciBieXRlcyA9IF92MC5hOwoJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJGJ5dGVzKGJ5dGVzKQoJCQkJCV0pOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJfQoJCX0oKTsKCQl2YXIgY29tbW9uV2lkdGggPSAoMjYgKyBmaWxlTmFtZVdpZHRoKSArIGV4dHJhRmllbGRXaWR0aDsKCQl2YXIgbG9jYWxGaWxlV2lkdGggPSAoNCArIGNvbW1vbldpZHRoKSArIG1ldGEuY29tcHJlc3NlZFNpemU7CgkJdmFyIGNvbW1vbkhlYWRlciA9ICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHNlcXVlbmNlKAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRW5jb2RlJGkxNihtZXRhLmV4dHJhY3RNaW5WZXJzaW9uKSwKCQkJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkaTE2KG1ldGEuZmxhZyksCgkJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRW5jb2RlJGNvbXByZXNzaW9uTWV0aG9kKG1ldGEuY29tcHJlc3Npb25NZXRob2QpLAoJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJEVuY29kZSRpMzIobWV0YS5sYXN0TW9kaWZpZWQpLAoJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJEVuY29kZSRpMzIobWV0YS5jcmMzMiksCgkJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRW5jb2RlJGkzMihtZXRhLmNvbXByZXNzZWRTaXplKSwKCQkJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkaTMyKG1ldGEudW5jb21wcmVzc2VkU2l6ZSksCgkJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRW5jb2RlJGkxNihmaWxlTmFtZVdpZHRoKSwKCQkJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkaTE2KGV4dHJhRmllbGRXaWR0aCkKCQkJCV0pKTsKCQl2YXIgbG9jYWxGaWxlID0gJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkc2VxdWVuY2UoCgkJCV9VdGlsc19hcCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJEVuY29kZSRpMzIoNjczMjQ3NTIpLAoJCQkJCQljb21tb25IZWFkZXIsCgkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHN0cmluZyhtZXRhLmZpbGVOYW1lKSwKCQkJCQkJJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkYnl0ZXMobWV0YS5leHRyYUZpZWxkKQoJCQkJCV0pLAoJCQkJZGF0YSkpOwoJCXZhciBjb21tZW50V2lkdGggPSAkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRnZXRTdHJpbmdXaWR0aChtZXRhLmNvbW1lbnQpOwoJCXZhciByZWNvcmQgPSAkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRzZXF1ZW5jZSgKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJEVuY29kZSRpMzIoMzM2MzkyNDgpLAoJCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJEVuY29kZSRpMTYobWV0YS5tYWRlQnkpLAoJCQkJCWNvbW1vbkhlYWRlciwKCQkJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkaTE2KGNvbW1lbnRXaWR0aCksCgkJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRW5jb2RlJGkxNigwKSwKCQkJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkaTE2KG1ldGEuaW50ZXJuYWxBdHRyaWJ1dGVzKSwKCQkJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkaTMyKG1ldGEuZXh0ZXJuYWxBdHRyaWJ1dGVzKSwKCQkJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkaTMyKHN0ZXAucG9zaXRpb24pLAoJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHN0cmluZyhtZXRhLmZpbGVOYW1lKSwKCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRieXRlcyhtZXRhLmV4dHJhRmllbGQpLAoJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHN0cmluZyhtZXRhLmNvbW1lbnQpCgkJCQldKSk7CgkJdmFyIHJlY29yZFdpZHRoID0gKDIwICsgY29tbW9uV2lkdGgpICsgY29tbWVudFdpZHRoOwoJCXJldHVybiB7CgkJCWRpcmVjdG9yeTogJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkc2VxdWVuY2UoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJW3N0ZXAuZGlyZWN0b3J5LCByZWNvcmRdKSksCgkJCWRpcmVjdG9yeVNpemU6IHN0ZXAuZGlyZWN0b3J5U2l6ZSArIHJlY29yZFdpZHRoLAoJCQlsb2NhbDogJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkc2VxdWVuY2UoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJW3N0ZXAubG9jYWwsIGxvY2FsRmlsZV0pKSwKCQkJcG9zaXRpb246IHN0ZXAucG9zaXRpb24gKyBsb2NhbEZpbGVXaWR0aAoJCX07Cgl9KTsKdmFyICRhZ3VfeiRlbG1femlwJEludGVybmFsJEVuY29kZSRlbmRPZkNlbnRyYWxEaXJlY3RvcnkgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgcmVjb3JkQ291bnQgPSBfdjAucmVjb3JkQ291bnQ7Cgl2YXIgc2l6ZSA9IF92MC5zaXplOwoJdmFyIHN0YXJ0T2Zmc2V0ID0gX3YwLnN0YXJ0T2Zmc2V0OwoJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHNlcXVlbmNlKAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRW5jb2RlJGkzMigxMDEwMTAyNTYpLAoJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRW5jb2RlJGkxNigwKSwKCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJEVuY29kZSRpMTYoMCksCgkJCQkkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkaTE2KHJlY29yZENvdW50KSwKCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJEVuY29kZSRpMTYocmVjb3JkQ291bnQpLAoJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRW5jb2RlJGkzMihzaXplKSwKCQkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJEVuY29kZSRpMzIoc3RhcnRPZmZzZXQpLAoJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRW5jb2RlJGkxNigwKQoJCQldKSk7Cn07CnZhciAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkZW5jb2RlRW50cmllcyA9IEYzKAoJZnVuY3Rpb24gKHJlY29yZENvdW50LCBlbnRyaWVzLCBzdGVwKSB7CgkJZW5jb2RlRW50cmllczoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIWVudHJpZXMuYikgewoJCQkJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHNlcXVlbmNlKAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJc3RlcC5sb2NhbCwKCQkJCQkJCXN0ZXAuZGlyZWN0b3J5LAoJCQkJCQkJJGFndV96JGVsbV96aXAkSW50ZXJuYWwkRW5jb2RlJGVuZE9mQ2VudHJhbERpcmVjdG9yeSgKCQkJCQkJCXtyZWNvcmRDb3VudDogcmVjb3JkQ291bnQsIHNpemU6IHN0ZXAuZGlyZWN0b3J5U2l6ZSwgc3RhcnRPZmZzZXQ6IHN0ZXAucG9zaXRpb259KQoJCQkJCQldKSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgZW50cnkgPSBlbnRyaWVzLmE7CgkJCQl2YXIgdGFpbCA9IGVudHJpZXMuYjsKCQkJCXZhciAkdGVtcCRyZWNvcmRDb3VudCA9IHJlY29yZENvdW50LAoJCQkJCSR0ZW1wJGVudHJpZXMgPSB0YWlsLAoJCQkJCSR0ZW1wJHN0ZXAgPSBBMigkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkYWR2YW5jZSwgZW50cnksIHN0ZXApOwoJCQkJcmVjb3JkQ291bnQgPSAkdGVtcCRyZWNvcmRDb3VudDsKCQkJCWVudHJpZXMgPSAkdGVtcCRlbnRyaWVzOwoJCQkJc3RlcCA9ICR0ZW1wJHN0ZXA7CgkJCQljb250aW51ZSBlbmNvZGVFbnRyaWVzOwoJCQl9CgkJfQoJfSk7CnZhciAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkd3JpdGVBcmNoaXZlID0gZnVuY3Rpb24gKGVudHJpZXMpIHsKCXJldHVybiAkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRlbmNvZGUoCgkJQTMoCgkJCSRhZ3VfeiRlbG1femlwJEludGVybmFsJEVuY29kZSRlbmNvZGVFbnRyaWVzLAoJCQkkZWxtJGNvcmUkTGlzdCRsZW5ndGgoZW50cmllcyksCgkJCWVudHJpZXMsCgkJCXsKCQkJCWRpcmVjdG9yeTogJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkc2VxdWVuY2UoX0xpc3RfTmlsKSwKCQkJCWRpcmVjdG9yeVNpemU6IDAsCgkJCQlsb2NhbDogJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkc2VxdWVuY2UoX0xpc3RfTmlsKSwKCQkJCXBvc2l0aW9uOiAwCgkJCX0pKTsKfTsKdmFyICRhZ3VfeiRlbG1femlwJFppcCR0b0J5dGVzID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIGFsbEVudHJpZXMgPSBfdjAuYTsKCXJldHVybiAkYWd1X3okZWxtX3ppcCRJbnRlcm5hbCRFbmNvZGUkd3JpdGVBcmNoaXZlKGFsbEVudHJpZXMpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdXBkYXRlRm9yVXNlcklucHV0TG9hZEZyb21HaXQgPSBGMygKCWZ1bmN0aW9uIChfdjAsIGV2ZW50LCBkaWFsb2dTdGF0ZUJlZm9yZSkgewoJCXZhciB0aW1lID0gX3YwLnRpbWU7CgkJaWYgKGV2ZW50LiQgPT09ICdMb2FkRnJvbUdpdEVudGVyVXJsRXZlbnQnKSB7CgkJCXZhciB1cmxJbnRvR2l0UmVwb3NpdG9yeSA9IGV2ZW50LmEudXJsSW50b0dpdFJlcG9zaXRvcnk7CgkJCWlmICgoIV9VdGlsc19lcShkaWFsb2dTdGF0ZUJlZm9yZS5yZXF1ZXN0LCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZykpIHx8ICghX1V0aWxzX2VxKGRpYWxvZ1N0YXRlQmVmb3JlLmxvYWRDb21wb3NpdGlvblJlc3VsdCwgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpKSkgewoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoZGlhbG9nU3RhdGVCZWZvcmUsICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgZGlhbG9nU3RhdGUgPSB7bG9hZENvbXBvc2l0aW9uUmVzdWx0OiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywgcmVxdWVzdDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsIHVybEludG9HaXRSZXBvc2l0b3J5OiB1cmxJbnRvR2l0UmVwb3NpdG9yeX07CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihkaWFsb2dTdGF0ZSwgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQkJfQoJCX0gZWxzZSB7CgkJCXZhciB1cmxJbnRvR2l0UmVwb3NpdG9yeSA9IGV2ZW50LmEudXJsSW50b0dpdFJlcG9zaXRvcnk7CgkJCXZhciB0cmltbWVkVXJsID0gJGVsbSRjb3JlJFN0cmluZyR0cmltKHVybEludG9HaXRSZXBvc2l0b3J5KTsKCQkJaWYgKHRyaW1tZWRVcmwgPT09ICcnKSB7CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihkaWFsb2dTdGF0ZUJlZm9yZSwgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBkaWFsb2dTdGF0ZSA9IHsKCQkJCQlsb2FkQ29tcG9zaXRpb25SZXN1bHQ6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLAoJCQkJCXJlcXVlc3Q6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQl7dGltZTogdGltZSwgdXJsOiB1cmxJbnRvR2l0UmVwb3NpdG9yeX0pLAoJCQkJCXVybEludG9HaXRSZXBvc2l0b3J5OiB1cmxJbnRvR2l0UmVwb3NpdG9yeQoJCQkJfTsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCWRpYWxvZ1N0YXRlLAoJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGxvYWRGcm9tR2l0Q21kKHVybEludG9HaXRSZXBvc2l0b3J5KSk7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRTdHJpbmckdG9Mb3dlciA9IF9TdHJpbmdfdG9Mb3dlcjsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZVVzZXJDbGlja2VkTGlua0luUHJldmlldyA9IEYyKAoJZnVuY3Rpb24gKF92MCwgc3RhdGVCZWZvcmUpIHsKCQl2YXIgaHJlZiA9IF92MC5ocmVmOwoJCXZhciBfdjEgPSAkZWxtJHVybCRVcmwkZnJvbVN0cmluZyhocmVmKTsKCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihzdGF0ZUJlZm9yZSwgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQl9IGVsc2UgewoJCQl2YXIgdXJsID0gX3YxLmE7CgkJCWlmICgoIV9VdGlsc19lcSh1cmwuaG9zdCwgc3RhdGVCZWZvcmUudXJsLmhvc3QpKSAmJiAoJGVsbSRjb3JlJFN0cmluZyR0b0xvd2VyKHVybC5ob3N0KSAhPT0gJ2VsbS1lZGl0b3IuY29tJykpIHsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQl9IGVsc2UgewoJCQkJdmFyIF92MiA9ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRXb3Jrc3BhY2VTdGF0ZUluVXJsJHdvcmtzcGFjZVN0YXRlRGVzY3JpcHRpb25Gcm9tVXJsKHVybCk7CgkJCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQkJfSBlbHNlIHsKCQkJCQlpZiAoX3YyLmEuJCA9PT0gJ0VycicpIHsKCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoc3RhdGVCZWZvcmUsICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJcmV0dXJuIEEyKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHByb2Nlc3NFdmVudFVybENoYW5nZWQsIHVybCwgc3RhdGVCZWZvcmUpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEZpbGVFZGl0b3IkRWxtQ29udGVudCA9IHskOiAnRWxtQ29udGVudCd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kQmFja2VuZEludGVyZmFjZSRFbG1NYWtlT3V0cHV0VHlwZUh0bWwgPSB7JDogJ0VsbU1ha2VPdXRwdXRUeXBlSHRtbCd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkTG9jYXRlZEluU291cmNlRmlsZXMgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnTG9jYXRlZEluU291cmNlRmlsZXMnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkT3RoZXJDb21waWxhdGlvbkVycm9yID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ090aGVyQ29tcGlsYXRpb25FcnJvcicsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZmlsZUNvbnRlbnRGcm9tU3RyaW5nID0gQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkc3RyaW5nLCAkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRlbmNvZGUpOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZmlsZVBhdGhGcm9tRWxtTW9kdWxlTmFtZSA9IEYyKAoJZnVuY3Rpb24gKHNvdXJjZURpcnMsIGVsbU1vZHVsZU5hbWUpIHsKCQl2YXIgX3YwID0gJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShlbG1Nb2R1bGVOYW1lKTsKCQlpZiAoIV92MC5iKSB7CgkJCXJldHVybiBfTGlzdF9OaWw7CgkJfSBlbHNlIHsKCQkJdmFyIG1vZHVsZUxhc3ROYW1lID0gX3YwLmE7CgkJCXZhciByZXZlcnNlZERpcmVjdG9yeU5hbWVzID0gX3YwLmI7CgkJCXJldHVybiBfVXRpbHNfYXAoCgkJCQlzb3VyY2VEaXJzLm1haW5Tb3VyY2VEaXJlY3RvcnlQYXRoLAoJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZSgKCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBtb2R1bGVMYXN0TmFtZSArICcuZWxtJywgcmV2ZXJzZWREaXJlY3RvcnlOYW1lcykpKTsKCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgdiA9IF92MC5iOwoJcmV0dXJuIHY7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGUkbW9kdWxlTmFtZSA9IGZ1bmN0aW9uIChtKSB7Cglzd2l0Y2ggKG0uJCkgewoJCWNhc2UgJ05vcm1hbE1vZHVsZSc6CgkJCXZhciB4ID0gbS5hOwoJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZSh4Lm1vZHVsZU5hbWUpOwoJCWNhc2UgJ1BvcnRNb2R1bGUnOgoJCQl2YXIgeCA9IG0uYTsKCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoeC5tb2R1bGVOYW1lKTsKCQlkZWZhdWx0OgoJCQl2YXIgeCA9IG0uYTsKCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoeC5tb2R1bGVOYW1lKTsKCX0KfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5ID0gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREZWNsYXJhdGlvbiRBbGlhc0RlY2xhcmF0aW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0FsaWFzRGVjbGFyYXRpb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJEN1c3RvbVR5cGVEZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdDdXN0b21UeXBlRGVjbGFyYXRpb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJEZ1bmN0aW9uRGVjbGFyYXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRnVuY3Rpb25EZWNsYXJhdGlvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ05vZGUnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRGVjbGFyYXRpb24kUG9ydERlY2xhcmF0aW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1BvcnREZWNsYXJhdGlvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkU2lnbmF0dXJlJFNpZ25hdHVyZSA9IEYyKAoJZnVuY3Rpb24gKG5hbWUsIHR5cGVBbm5vdGF0aW9uKSB7CgkJcmV0dXJuIHtuYW1lOiBuYW1lLCB0eXBlQW5ub3RhdGlvbjogdHlwZUFubm90YXRpb259OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGNvbWJpbmUgPSBGMygKCWZ1bmN0aW9uIChmLCBhLCBiKSB7CgkJdmFyIHN0YXJ0ID0gYS5hLnN0YXJ0OwoJCXZhciBlbmQgPSBiLmEuZW5kOwoJCXJldHVybiBBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQl7ZW5kOiBlbmQsIHN0YXJ0OiBzdGFydH0sCgkJCUEyKGYsIGEsIGIpKTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRG9uZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdEb25lJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRMb29wID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xvb3AnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdCYWQnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nQW55Q2hhciA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdFeHBlY3RpbmdBbnlDaGFyJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnR29vZCcsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUGFyc2VyJywgYTogYX07Cn07CnZhciAkZWxtJGNvcmUkU3RyaW5nJGFueSA9IF9TdHJpbmdfYW55Owp2YXIgJGVsbSRjb3JlJEJhc2ljcyRpc05hTiA9IF9CYXNpY3NfaXNOYU47CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRpc1V0ZjE2U3Vycm9nYXRlID0gZnVuY3Rpb24gKGMpIHsKCXJldHVybiAkZWxtJGNvcmUkQmFzaWNzJGlzTmFOKAoJCSRlbG0kY29yZSRDaGFyJHRvQ29kZShjKSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjaGFyU3RyaW5nSXNVdGYxNkhpZ2hTdXJyb2dhdGUgPSBmdW5jdGlvbiAoY2hhclN0cmluZykgewoJcmV0dXJuIEEyKCRlbG0kY29yZSRTdHJpbmckYW55LCAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRpc1V0ZjE2U3Vycm9nYXRlLCBjaGFyU3RyaW5nKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNoYXJPckVuZCA9IEYyKAoJZnVuY3Rpb24gKG9mZnNldCwgc3RyaW5nKSB7CgkJdmFyIGFjdHVhbENoYXIgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDEsIHN0cmluZyk7CgkJc3dpdGNoIChhY3R1YWxDaGFyKSB7CgkJCWNhc2UgJ1xuJzoKCQkJCXJldHVybiAtMjsKCQkJY2FzZSAnJzoKCQkJCXJldHVybiAtMTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjaGFyU3RyaW5nSXNVdGYxNkhpZ2hTdXJyb2dhdGUoYWN0dWFsQ2hhcikgPyAob2Zmc2V0ICsgMikgOiAob2Zmc2V0ICsgMSk7CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwV2hpbGVIZWxwID0gRjYoCglmdW5jdGlvbiAoaXNHb29kLCBvZmZzZXQsIHJvdywgY29sLCBzcmMsIGluZGVudCkgewoJCXNraXBXaGlsZUhlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJdmFyIGFjdHVhbENoYXIgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDEsIHNyYyk7CgkJCWlmIChBMigkZWxtJGNvcmUkU3RyaW5nJGFueSwgaXNHb29kLCBhY3R1YWxDaGFyKSkgewoJCQkJaWYgKGFjdHVhbENoYXIgPT09ICdcbicpIHsKCQkJCQl2YXIgJHRlbXAkaXNHb29kID0gaXNHb29kLAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRyb3cgPSByb3cgKyAxLAoJCQkJCQkkdGVtcCRjb2wgPSAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmMsCgkJCQkJCSR0ZW1wJGluZGVudCA9IGluZGVudDsKCQkJCQlpc0dvb2QgPSAkdGVtcCRpc0dvb2Q7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXJvdyA9ICR0ZW1wJHJvdzsKCQkJCQljb2wgPSAkdGVtcCRjb2w7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWluZGVudCA9ICR0ZW1wJGluZGVudDsKCQkJCQljb250aW51ZSBza2lwV2hpbGVIZWxwOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgJHRlbXAkaXNHb29kID0gaXNHb29kLAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRyb3cgPSByb3csCgkJCQkJCSR0ZW1wJGNvbCA9IGNvbCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYywKCQkJCQkJJHRlbXAkaW5kZW50ID0gaW5kZW50OwoJCQkJCWlzR29vZCA9ICR0ZW1wJGlzR29vZDsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJcm93ID0gJHRlbXAkcm93OwoJCQkJCWNvbCA9ICR0ZW1wJGNvbDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJaW5kZW50ID0gJHRlbXAkaW5kZW50OwoJCQkJCWNvbnRpbnVlIHNraXBXaGlsZUhlbHA7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlpZiAoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY2hhclN0cmluZ0lzVXRmMTZIaWdoU3Vycm9nYXRlKGFjdHVhbENoYXIpICYmIEEyKAoJCQkJCSRlbG0kY29yZSRTdHJpbmckYW55LAoJCQkJCWlzR29vZCwKCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDIsIHNyYykpKSB7CgkJCQkJdmFyICR0ZW1wJGlzR29vZCA9IGlzR29vZCwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMiwKCQkJCQkJJHRlbXAkcm93ID0gcm93LAoJCQkJCQkkdGVtcCRjb2wgPSBjb2wgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmMsCgkJCQkJCSR0ZW1wJGluZGVudCA9IGluZGVudDsKCQkJCQlpc0dvb2QgPSAkdGVtcCRpc0dvb2Q7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXJvdyA9ICR0ZW1wJHJvdzsKCQkJCQljb2wgPSAkdGVtcCRjb2w7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWluZGVudCA9ICR0ZW1wJGluZGVudDsKCQkJCQljb250aW51ZSBza2lwV2hpbGVIZWxwOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4ge2NvbDogY29sLCBpbmRlbnQ6IGluZGVudCwgb2Zmc2V0OiBvZmZzZXQsIHJvdzogcm93LCBzcmM6IHNyY307CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGFueUNoYXJGb2xsb3dlZEJ5V2hpbGVNYXAgPSBGMigKCWZ1bmN0aW9uIChjb25zdW1lZFN0cmluZ1RvUmVzLCBhZnRlckZpcnN0SXNPa2F5KSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBmaXJzdE9mZnNldCA9IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNoYXJPckVuZCwgcy5vZmZzZXQsIHMuc3JjKTsKCQkJCWlmIChfVXRpbHNfZXEoZmlyc3RPZmZzZXQsIC0xKSkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQlmYWxzZSwKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nQW55Q2hhciwgcy5yb3csIHMuY29sKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBzMSA9IF9VdGlsc19lcShmaXJzdE9mZnNldCwgLTIpID8gQTYoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcFdoaWxlSGVscCwgYWZ0ZXJGaXJzdElzT2theSwgcy5vZmZzZXQgKyAxLCBzLnJvdyArIDEsIDEsIHMuc3JjLCBzLmluZGVudCkgOiBBNigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwV2hpbGVIZWxwLCBhZnRlckZpcnN0SXNPa2F5LCBmaXJzdE9mZnNldCwgcy5yb3csIHMuY29sICsgMSwgcy5zcmMsIHMuaW5kZW50KTsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCWNvbnN1bWVkU3RyaW5nVG9SZXMoCgkJCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzLm9mZnNldCwgczEub2Zmc2V0LCBzLnNyYykpLAoJCQkJCQlzMSk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wSGVscCA9IEY1KAoJZnVuY3Rpb24gKGNvbW1pdHRlZFNvRmFyLCBzdGF0ZSwgZWxlbWVudCwgcmVkdWNlLCBzMCkgewoJCWxvb3BIZWxwOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBwYXJzZUVsZW1lbnQgPSBlbGVtZW50LmE7CgkJCXZhciBfdjAgPSBwYXJzZUVsZW1lbnQoczApOwoJCQlpZiAoX3YwLiQgPT09ICdHb29kJykgewoJCQkJdmFyIHN0ZXAgPSBfdjAuYTsKCQkJCXZhciBzMSA9IF92MC5iOwoJCQkJdmFyIF92MSA9IEEyKHJlZHVjZSwgc3RlcCwgc3RhdGUpOwoJCQkJaWYgKF92MS4kID09PSAnTG9vcCcpIHsKCQkJCQl2YXIgbmV3U3RhdGUgPSBfdjEuYTsKCQkJCQl2YXIgJHRlbXAkY29tbWl0dGVkU29GYXIgPSB0cnVlLAoJCQkJCQkkdGVtcCRzdGF0ZSA9IG5ld1N0YXRlLAoJCQkJCQkkdGVtcCRlbGVtZW50ID0gZWxlbWVudCwKCQkJCQkJJHRlbXAkcmVkdWNlID0gcmVkdWNlLAoJCQkJCQkkdGVtcCRzMCA9IHMxOwoJCQkJCWNvbW1pdHRlZFNvRmFyID0gJHRlbXAkY29tbWl0dGVkU29GYXI7CgkJCQkJc3RhdGUgPSAkdGVtcCRzdGF0ZTsKCQkJCQllbGVtZW50ID0gJHRlbXAkZWxlbWVudDsKCQkJCQlyZWR1Y2UgPSAkdGVtcCRyZWR1Y2U7CgkJCQkJczAgPSAkdGVtcCRzMDsKCQkJCQljb250aW51ZSBsb29wSGVscDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHJlc3VsdCA9IF92MS5hOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLCByZXN1bHQsIHMxKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXZhciBlbGVtZW50Q29tbWl0dGVkID0gX3YwLmE7CgkJCQl2YXIgeCA9IF92MC5iOwoJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkU29GYXIgfHwgZWxlbWVudENvbW1pdHRlZCwgeCk7CgkJCX0KCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxvb3AgPSBGMygKCWZ1bmN0aW9uIChzdGF0ZSwgZWxlbWVudCwgcmVkdWNlKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXJldHVybiBBNSgkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wSGVscCwgZmFsc2UsIHN0YXRlLCBlbGVtZW50LCByZWR1Y2UsIHMpOwoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhSYW5nZSA9IEYzKAoJZnVuY3Rpb24gKGZ1bmMsIF92MCwgX3YxKSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjIgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92Mi4kID09PSAnQmFkJykgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjIuYTsKCQkJCQl2YXIgeCA9IF92Mi5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3YyLmE7CgkJCQkJdmFyIHMxID0gX3YyLmI7CgkJCQkJdmFyIF92MyA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92My4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92My5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92My5hOwoJCQkJCQl2YXIgczIgPSBfdjMuYjsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCUEzKAoJCQkJCQkJCWZ1bmMsCgkJCQkJCQkJewoJCQkJCQkJCQllbmQ6IHtjb2x1bW46IHMyLmNvbCwgcm93OiBzMi5yb3d9LAoJCQkJCQkJCQlzdGFydDoge2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30KCQkJCQkJCQl9LAoJCQkJCQkJCWEsCgkJCQkJCQkJYiksCgkJCQkJCQlzMik7CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nT25lT2YgPSBGMygKCWZ1bmN0aW9uIChhLCBiLCBjKSB7CgkJcmV0dXJuIHskOiAnRXhwZWN0aW5nT25lT2YnLCBhOiBhLCBiOiBiLCBjOiBjfTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyID0gRjIoCglmdW5jdGlvbiAoX3YwLCBfdjEpIHsKCQl2YXIgYXR0ZW1wdEZpcnN0ID0gX3YwLmE7CgkJdmFyIGF0dGVtcHRTZWNvbmQgPSBfdjEuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIF92MiA9IGF0dGVtcHRGaXJzdChzKTsKCQkJCWlmIChfdjIuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJdmFyIGZpcnN0R29vZCA9IF92MjsKCQkJCQlyZXR1cm4gZmlyc3RHb29kOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgZmlyc3RCYWQgPSBfdjI7CgkJCQkJdmFyIGZpcnN0Q29tbWl0dGVkID0gZmlyc3RCYWQuYTsKCQkJCQl2YXIgZmlyc3RYID0gZmlyc3RCYWQuYjsKCQkJCQlpZiAoZmlyc3RDb21taXR0ZWQpIHsKCQkJCQkJcmV0dXJuIGZpcnN0QmFkOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjMgPSBhdHRlbXB0U2Vjb25kKHMpOwoJCQkJCQlpZiAoX3YzLiQgPT09ICdHb29kJykgewoJCQkJCQkJdmFyIHNlY29uZEdvb2QgPSBfdjM7CgkJCQkJCQlyZXR1cm4gc2Vjb25kR29vZDsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBzZWNvbmRCYWQgPSBfdjM7CgkJCQkJCQl2YXIgc2Vjb25kQ29tbWl0dGVkID0gc2Vjb25kQmFkLmE7CgkJCQkJCQl2YXIgc2Vjb25kWCA9IHNlY29uZEJhZC5iOwoJCQkJCQkJcmV0dXJuIHNlY29uZENvbW1pdHRlZCA/IHNlY29uZEJhZCA6IEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJCQlmYWxzZSwKCQkJCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdPbmVPZiwgZmlyc3RYLCBzZWNvbmRYLCBfTGlzdF9OaWwpKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMyA9IEYzKAoJZnVuY3Rpb24gKF92MCwgX3YxLCBfdjIpIHsKCQl2YXIgYXR0ZW1wdEZpcnN0ID0gX3YwLmE7CgkJdmFyIGF0dGVtcHRTZWNvbmQgPSBfdjEuYTsKCQl2YXIgYXR0ZW1wdFRoaXJkID0gX3YyLmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBfdjMgPSBhdHRlbXB0Rmlyc3Qocyk7CgkJCQlpZiAoX3YzLiQgPT09ICdHb29kJykgewoJCQkJCXZhciBmaXJzdEdvb2QgPSBfdjM7CgkJCQkJcmV0dXJuIGZpcnN0R29vZDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGZpcnN0QmFkID0gX3YzOwoJCQkJCXZhciBmaXJzdENvbW1pdHRlZCA9IGZpcnN0QmFkLmE7CgkJCQkJdmFyIGZpcnN0WCA9IGZpcnN0QmFkLmI7CgkJCQkJaWYgKGZpcnN0Q29tbWl0dGVkKSB7CgkJCQkJCXJldHVybiBmaXJzdEJhZDsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgX3Y0ID0gYXR0ZW1wdFNlY29uZChzKTsKCQkJCQkJaWYgKF92NC4kID09PSAnR29vZCcpIHsKCQkJCQkJCXZhciBzZWNvbmRHb29kID0gX3Y0OwoJCQkJCQkJcmV0dXJuIHNlY29uZEdvb2Q7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgc2Vjb25kQmFkID0gX3Y0OwoJCQkJCQkJdmFyIHNlY29uZENvbW1pdHRlZCA9IHNlY29uZEJhZC5hOwoJCQkJCQkJdmFyIHNlY29uZFggPSBzZWNvbmRCYWQuYjsKCQkJCQkJCWlmIChzZWNvbmRDb21taXR0ZWQpIHsKCQkJCQkJCQlyZXR1cm4gc2Vjb25kQmFkOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgX3Y1ID0gYXR0ZW1wdFRoaXJkKHMpOwoJCQkJCQkJCWlmIChfdjUuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQkJCXZhciB0aGlyZEdvb2QgPSBfdjU7CgkJCQkJCQkJCXJldHVybiB0aGlyZEdvb2Q7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJdmFyIHRoaXJkQmFkID0gX3Y1OwoJCQkJCQkJCQl2YXIgdGhpcmRDb21taXR0ZWQgPSB0aGlyZEJhZC5hOwoJCQkJCQkJCQl2YXIgdGhpcmRYID0gdGhpcmRCYWQuYjsKCQkJCQkJCQkJcmV0dXJuIHRoaXJkQ29tbWl0dGVkID8gdGhpcmRCYWQgOiBBMigKCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJCQkJCWZhbHNlLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nT25lT2YsCgkJCQkJCQkJCQkJZmlyc3RYLAoJCQkJCQkJCQkJCXNlY29uZFgsCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbdGhpcmRYXSkpKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdTeW1ib2wgPSBGMygKCWZ1bmN0aW9uIChhLCBiLCBjKSB7CgkJcmV0dXJuIHskOiAnRXhwZWN0aW5nU3ltYm9sJywgYTogYSwgYjogYiwgYzogY307Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCA9IEYyKAoJZnVuY3Rpb24gKHN0ciwgcmVzKSB7CgkJdmFyIHN0ckxlbmd0aCA9ICRlbG0kY29yZSRTdHJpbmckbGVuZ3RoKHN0cik7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBuZXdPZmZzZXQgPSBzLm9mZnNldCArIHN0ckxlbmd0aDsKCQkJCXJldHVybiBfVXRpbHNfZXEoCgkJCQkJQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgcy5vZmZzZXQsIG5ld09mZnNldCwgcy5zcmMpLAoJCQkJCXN0ciArICcnKSA/IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJcmVzLAoJCQkJCXtjb2w6IHMuY29sICsgc3RyTGVuZ3RoLCBpbmRlbnQ6IHMuaW5kZW50LCBvZmZzZXQ6IG5ld09mZnNldCwgcm93OiBzLnJvdywgc3JjOiBzLnNyY30pIDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCWZhbHNlLAoJCQkJCUEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ1N5bWJvbCwgcy5yb3csIHMuY29sLCBzdHIpKTsKCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHBTdGVwQ29tbWl0ID0gZnVuY3Rpb24gKHBTdGVwKSB7CglpZiAocFN0ZXAuJCA9PT0gJ0dvb2QnKSB7CgkJdmFyIGdvb2QgPSBwU3RlcDsKCQlyZXR1cm4gZ29vZDsKCX0gZWxzZSB7CgkJdmFyIHggPSBwU3RlcC5iOwoJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJfQp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSA9IEYyKAoJZnVuY3Rpb24gKHN0ciwgX3YwKSB7CgkJdmFyIHBhcnNlTmV4dCA9IF92MC5hOwoJCXZhciBzdHJMZW5ndGggPSAkZWxtJGNvcmUkU3RyaW5nJGxlbmd0aChzdHIpOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQl2YXIgbmV3T2Zmc2V0ID0gcy5vZmZzZXQgKyBzdHJMZW5ndGg7CgkJCQlyZXR1cm4gX1V0aWxzX2VxKAoJCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIHMub2Zmc2V0LCBuZXdPZmZzZXQsIHMuc3JjKSwKCQkJCQlzdHIgKyAnJykgPyAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRwU3RlcENvbW1pdCgKCQkJCQlwYXJzZU5leHQoCgkJCQkJCXtjb2w6IHMuY29sICsgc3RyTGVuZ3RoLCBpbmRlbnQ6IHMuaW5kZW50LCBvZmZzZXQ6IG5ld09mZnNldCwgcm93OiBzLnJvdywgc3JjOiBzLnNyY30pKSA6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQlmYWxzZSwKCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdTeW1ib2wsIHMucm93LCBzLmNvbCwgc3RyKSk7CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aGlsZSA9IGZ1bmN0aW9uIChpc0dvb2QpIHsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJZnVuY3Rpb24gKHMwKSB7CgkJCXZhciBzMSA9IEE2KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZUhlbHAsIGlzR29vZCwgczAub2Zmc2V0LCBzMC5yb3csIHMwLmNvbCwgczAuc3JjLCBzMC5pbmRlbnQpOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgczAub2Zmc2V0LCBzMS5vZmZzZXQsIHMwLnNyYyksCgkJCQlzMSk7CgkJfSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRuZXN0YWJsZU11bHRpQ29tbWVudE1hcFdpdGhSYW5nZSA9IEYzKAoJZnVuY3Rpb24gKHJhbmdlQ29udGVudFRvUmVzLCBfdjAsIF92MSkgewoJCXZhciBvcGVuQ2hhciA9IF92MC5hOwoJCXZhciBvcGVuVGFpbCA9IF92MC5iOwoJCXZhciBjbG9zZUNoYXIgPSBfdjEuYTsKCQl2YXIgY2xvc2VUYWlsID0gX3YxLmI7CgkJdmFyIG9wZW4gPSBBMigkZWxtJGNvcmUkU3RyaW5nJGNvbnMsIG9wZW5DaGFyLCBvcGVuVGFpbCk7CgkJdmFyIGlzTm90UmVsZXZhbnQgPSBmdW5jdGlvbiAoX2NoYXIpIHsKCQkJcmV0dXJuICghX1V0aWxzX2VxKF9jaGFyLCBvcGVuQ2hhcikpICYmICgoIV9VdGlsc19lcShfY2hhciwgY2xvc2VDaGFyKSkgJiYgKCEkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRpc1V0ZjE2U3Vycm9nYXRlKF9jaGFyKSkpOwoJCX07CgkJdmFyIGNsb3NlID0gQTIoJGVsbSRjb3JlJFN0cmluZyRjb25zLCBjbG9zZUNoYXIsIGNsb3NlVGFpbCk7CgkJcmV0dXJuIEEzKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyV2l0aFJhbmdlLAoJCQlGMygKCQkJCWZ1bmN0aW9uIChyYW5nZSwgYWZ0ZXJPcGVuLCBjb250ZW50QWZ0ZXJBZnRlck9wZW4pIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCXJhbmdlQ29udGVudFRvUmVzLAoJCQkJCQlyYW5nZSwKCQkJCQkJX1V0aWxzX2FwKAoJCQkJCQkJb3BlbiwKCQkJCQkJCV9VdGlsc19hcCgKCQkJCQkJCQlhZnRlck9wZW4sCgkJCQkJCQkJX1V0aWxzX2FwKGNvbnRlbnRBZnRlckFmdGVyT3BlbiwgY2xvc2UpKSkpOwoJCQkJfSksCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJCW9wZW4sCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aGlsZShpc05vdFJlbGV2YW50KSksCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLCBjbG9zZSwgJycpLAoJCQkJQTMoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcCwKCQkJCQlfVXRpbHNfVHVwbGUyKCcnLCAxKSwKCQkJCQlBMygKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YzLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwKCQkJCQkJCWNsb3NlLAoJCQkJCQkJX1V0aWxzX1R1cGxlMihjbG9zZSwgLTEpKSwKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wsCgkJCQkJCQlvcGVuLAoJCQkJCQkJX1V0aWxzX1R1cGxlMihvcGVuLCAxKSksCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkYW55Q2hhckZvbGxvd2VkQnlXaGlsZU1hcCwKCQkJCQkJCWZ1bmN0aW9uIChjb25zdW1lZCkgewoJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKGNvbnN1bWVkLCAwKTsKCQkJCQkJCX0sCgkJCQkJCQlpc05vdFJlbGV2YW50KSksCgkJCQkJRjIoCgkJCQkJCWZ1bmN0aW9uIChfdjIsIF92MykgewoJCQkJCQkJdmFyIHRvQXBwZW5kID0gX3YyLmE7CgkJCQkJCQl2YXIgbmVzdGluZ0NoYW5nZSA9IF92Mi5iOwoJCQkJCQkJdmFyIHNvRmFyQ29udGVudCA9IF92My5hOwoJCQkJCQkJdmFyIHNvRmFyTmVzdGluZyA9IF92My5iOwoJCQkJCQkJdmFyIG5ld05lc3RpbmcgPSBzb0Zhck5lc3RpbmcgKyBuZXN0aW5nQ2hhbmdlOwoJCQkJCQkJcmV0dXJuICghbmV3TmVzdGluZykgPyAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCREb25lKHNvRmFyQ29udGVudCkgOiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRMb29wKAoJCQkJCQkJCV9VdGlsc19UdXBsZTIoc29GYXJDb250ZW50ICsgKHRvQXBwZW5kICsgJycpLCBuZXdOZXN0aW5nKSk7CgkJCQkJCX0pKSkpOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRDb21tZW50cyRtdWx0aUxpbmVDb21tZW50Tm9DaGVjayA9IEEzKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbmVzdGFibGVNdWx0aUNvbW1lbnRNYXBXaXRoUmFuZ2UsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCglfVXRpbHNfVHVwbGUyKAoJCV9VdGlsc19jaHIoJ3snKSwKCQknLScpLAoJX1V0aWxzX1R1cGxlMigKCQlfVXRpbHNfY2hyKCctJyksCgkJJ30nKSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRDb21tZW50cyRkZWNsYXJhdGlvbkRvY3VtZW50YXRpb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRDb21tZW50cyRtdWx0aUxpbmVDb21tZW50Tm9DaGVjazsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJEJyYW5jaDIgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnQnJhbmNoMicsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRmaWxsZWRQcmVwZW5kVG8gPSBGMigKCWZ1bmN0aW9uIChyaWdodCwgbGVmdExpa2VseUZpbGxlZCkgewoJCWlmIChyaWdodC4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KGxlZnRMaWtlbHlGaWxsZWQpOwoJCX0gZWxzZSB7CgkJCXZhciByaWdodExpa2VseUZpbGxlZCA9IHJpZ2h0LmE7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJEJyYW5jaDIsIGxlZnRMaWtlbHlGaWxsZWQsIHJpZ2h0TGlrZWx5RmlsbGVkKSk7CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkRnVuY3Rpb25EZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdGdW5jdGlvbkRlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJEFwcGxpY2F0aW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0FwcGxpY2F0aW9uJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJENhc2VFeHByZXNzaW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0Nhc2VFeHByZXNzaW9uJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJEV4dGVuZFJpZ2h0QnlPcGVyYXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRXh0ZW5kUmlnaHRCeU9wZXJhdGlvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRGaWVsZHNGaXJzdFZhbHVlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0ZpZWxkc0ZpcnN0VmFsdWUnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kSWZCbG9jayA9IEYzKAoJZnVuY3Rpb24gKGEsIGIsIGMpIHsKCQlyZXR1cm4geyQ6ICdJZkJsb2NrJywgYTogYSwgYjogYiwgYzogY307Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kTGFtYmRhRXhwcmVzc2lvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdMYW1iZGFFeHByZXNzaW9uJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRJbmZpeCRMZWZ0ID0geyQ6ICdMZWZ0J307CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJExldERlc3RydWN0dXJpbmcgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnTGV0RGVzdHJ1Y3R1cmluZycsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJExldEV4cHJlc3Npb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnTGV0RXhwcmVzc2lvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRMZXRGdW5jdGlvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdMZXRGdW5jdGlvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRMaXN0RXhwciA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdMaXN0RXhwcicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiROZWdhdGlvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdOZWdhdGlvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkSW5maXgkTm9uID0geyQ6ICdOb24nfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kUGFyZW50aGVzaXplZEV4cHJlc3Npb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUGFyZW50aGVzaXplZEV4cHJlc3Npb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kUmVjb3JkQWNjZXNzID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ1JlY29yZEFjY2VzcycsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJFJlY29yZEV4cHIgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUmVjb3JkRXhwcicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRSZWNvcmRVcGRhdGVFeHByZXNzaW9uID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ1JlY29yZFVwZGF0ZUV4cHJlc3Npb24nLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRSZWNvcmRVcGRhdGVGaXJzdFNldHRlciA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdSZWNvcmRVcGRhdGVGaXJzdFNldHRlcicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkSW5maXgkUmlnaHQgPSB7JDogJ1JpZ2h0J307CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJFR1cGxlZEV4cHJlc3Npb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVHVwbGVkRXhwcmVzc2lvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRUdXBsZWRQYXJlbnRoZXNpemVkRm9sbG93ZWRCeVJlY29yZEFjY2Vzc2VzID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1R1cGxlZFBhcmVudGhlc2l6ZWRGb2xsb3dlZEJ5UmVjb3JkQWNjZXNzZXMnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kVHVwbGVkVHdvT3JUaHJlZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUdXBsZWRUd29PclRocmVlJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJFVuaXRFeHByID0geyQ6ICdVbml0RXhwcid9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRQcmVmaXhPcGVyYXRvciA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQcmVmaXhPcGVyYXRvcicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGlzQWxsb3dlZE9wZXJhdG9yVG9rZW4gPSBmdW5jdGlvbiAob3BlcmF0b3JDYW5kaWRhdGVUb1ZhbGlkYXRlKSB7Cglzd2l0Y2ggKG9wZXJhdG9yQ2FuZGlkYXRlVG9WYWxpZGF0ZSkgewoJCWNhc2UgJz09JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnLz0nOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICc6Oic6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJysrJzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnKyc6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJyonOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICc8fCc6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJ3w+JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnfHwnOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICc8PSc6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJz49JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnfD0nOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICd8Lic6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJy8vJzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnPC8+JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnPD8+JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnXic6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJzw8JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnPj4nOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICc8JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnPic6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJy8nOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICcmJic6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJy0nOgoJCQlyZXR1cm4gdHJ1ZTsKCQlkZWZhdWx0OgoJCQlyZXR1cm4gZmFsc2U7Cgl9Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkaXNPcGVyYXRvclN5bWJvbENoYXIgPSBmdW5jdGlvbiAoYykgewoJc3dpdGNoIChjLnZhbHVlT2YoKSkgewoJCWNhc2UgJysnOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICctJzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnLyc6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJyonOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICc9JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnLic6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJzwnOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICc+JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnOic6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJyYnOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICd8JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnXic6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJz8nOgoJCQlyZXR1cm4gdHJ1ZTsKCQlkZWZhdWx0OgoJCQlyZXR1cm4gZmFsc2U7Cgl9Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdTdHJpbmdTYXRpc2Z5aW5nUHJlZGljYXRlID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0V4cGVjdGluZ1N0cmluZ1NhdGlzZnlpbmdQcmVkaWNhdGUnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcFdoaWxlV2l0aG91dExpbmVicmVha0FuZDJQYXJ0VXRmMTZIZWxwID0gRjMoCglmdW5jdGlvbiAoaXNHb29kLCBvZmZzZXQsIHNyYykgewoJCXNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtBbmQyUGFydFV0ZjE2SGVscDoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoQTIoCgkJCQkkZWxtJGNvcmUkU3RyaW5nJGFueSwKCQkJCWlzR29vZCwKCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMSwgc3JjKSkpIHsKCQkJCXZhciAkdGVtcCRpc0dvb2QgPSBpc0dvb2QsCgkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQlpc0dvb2QgPSAkdGVtcCRpc0dvb2Q7CgkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQljb250aW51ZSBza2lwV2hpbGVXaXRob3V0TGluZWJyZWFrQW5kMlBhcnRVdGYxNkhlbHA7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gb2Zmc2V0OwoJCQl9CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aGlsZVdpdGhvdXRMaW5lYnJlYWtBbmQyUGFydFV0ZjE2VmFsaWRhdGVNYXBXaXRoUmFuZ2VCYWNrdHJhY2thYmxlRm9sbG93ZWRCeVN5bWJvbCA9IEY0KAoJZnVuY3Rpb24gKHdoaWxlUmFuZ2VBbmRDb250ZW50VG9SZXMsIHdoaWxlQ2hhcklzT2theSwgd2hpbGVSZXN1bHRJc09rYXksIG1hbmRhdG9yeUZpbmFsU3ltYm9sKSB7CgkJdmFyIG1hbmRhdG9yeUZpbmFsU3ltYm9sTGVuZ3RoID0gJGVsbSRjb3JlJFN0cmluZyRsZW5ndGgobWFuZGF0b3J5RmluYWxTeW1ib2wpOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIHMxT2Zmc2V0ID0gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcFdoaWxlV2l0aG91dExpbmVicmVha0FuZDJQYXJ0VXRmMTZIZWxwLCB3aGlsZUNoYXJJc09rYXksIHMwLm9mZnNldCwgczAuc3JjKTsKCQkJCXZhciB3aGlsZUNvbnRlbnQgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzMC5vZmZzZXQsIHMxT2Zmc2V0LCBzMC5zcmMpOwoJCQkJaWYgKF9VdGlsc19lcSgKCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzMU9mZnNldCwgczFPZmZzZXQgKyBtYW5kYXRvcnlGaW5hbFN5bWJvbExlbmd0aCwgczAuc3JjKSwKCQkJCQltYW5kYXRvcnlGaW5hbFN5bWJvbCArICcnKSAmJiB3aGlsZVJlc3VsdElzT2theSh3aGlsZUNvbnRlbnQpKSB7CgkJCQkJdmFyIHMxQ29sdW1uID0gczAuY29sICsgKHMxT2Zmc2V0IC0gczAub2Zmc2V0KTsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCUEyKAoJCQkJCQkJd2hpbGVSYW5nZUFuZENvbnRlbnRUb1JlcywKCQkJCQkJCXsKCQkJCQkJCQllbmQ6IHtjb2x1bW46IHMxQ29sdW1uLCByb3c6IHMwLnJvd30sCgkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJCQl9LAoJCQkJCQkJd2hpbGVDb250ZW50KSwKCQkJCQkJe2NvbDogczFDb2x1bW4gKyBtYW5kYXRvcnlGaW5hbFN5bWJvbExlbmd0aCwgaW5kZW50OiBzMC5pbmRlbnQsIG9mZnNldDogczFPZmZzZXQgKyBtYW5kYXRvcnlGaW5hbFN5bWJvbExlbmd0aCwgcm93OiBzMC5yb3csIHNyYzogczAuc3JjfSk7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQlmYWxzZSwKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nU3RyaW5nU2F0aXNmeWluZ1ByZWRpY2F0ZSwgczAucm93LCBzMC5jb2wgKyAxKSk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGFsbG93ZWRQcmVmaXhPcGVyYXRvckZvbGxvd2VkQnlDbG9zaW5nUGFyZW5zT25lT2YgPSBBNCgKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHdoaWxlV2l0aG91dExpbmVicmVha0FuZDJQYXJ0VXRmMTZWYWxpZGF0ZU1hcFdpdGhSYW5nZUJhY2t0cmFja2FibGVGb2xsb3dlZEJ5U3ltYm9sLAoJRjIoCgkJZnVuY3Rpb24gKG9wZXJhdG9yUmFuZ2UsIG9wZXJhdG9yKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQl7CgkJCQkJCWVuZDoge2NvbHVtbjogb3BlcmF0b3JSYW5nZS5lbmQuY29sdW1uICsgMSwgcm93OiBvcGVyYXRvclJhbmdlLmVuZC5yb3d9LAoJCQkJCQlzdGFydDoge2NvbHVtbjogb3BlcmF0b3JSYW5nZS5zdGFydC5jb2x1bW4gLSAxLCByb3c6IG9wZXJhdG9yUmFuZ2Uuc3RhcnQucm93fQoJCQkJCX0sCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRQcmVmaXhPcGVyYXRvcihvcGVyYXRvcikpCgkJCX07CgkJfSksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkaXNPcGVyYXRvclN5bWJvbENoYXIsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkaXNBbGxvd2VkT3BlcmF0b3JUb2tlbiwKCScpJyk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJE9wZXJhdG9yQXBwbGljYXRpb24gPSBGNCgKCWZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7CgkJcmV0dXJuIHskOiAnT3BlcmF0b3JBcHBsaWNhdGlvbicsIGE6IGEsIGI6IGIsIGM6IGMsIGQ6IGR9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGFwcGx5RXh0ZW5zaW9uUmlnaHQgPSBGMigKCWZ1bmN0aW9uIChfdjAsIGxlZnROb2RlKSB7CgkJdmFyIG9wZXJhdGlvbiA9IF92MC5hOwoJCXZhciBsZWZ0UmFuZ2UgPSBsZWZ0Tm9kZS5hOwoJCXZhciByaWdodEV4cHJlc3Npb25Ob2RlID0gb3BlcmF0aW9uLmV4cHJlc3Npb247CgkJdmFyIHJpZ2h0RXhwcmVzc2lvblJhbmdlID0gcmlnaHRFeHByZXNzaW9uTm9kZS5hOwoJCXJldHVybiBBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQl7ZW5kOiByaWdodEV4cHJlc3Npb25SYW5nZS5lbmQsIHN0YXJ0OiBsZWZ0UmFuZ2Uuc3RhcnR9LAoJCQlBNCgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJE9wZXJhdG9yQXBwbGljYXRpb24sIG9wZXJhdGlvbi5zeW1ib2wsIG9wZXJhdGlvbi5kaXJlY3Rpb24sIGxlZnROb2RlLCByaWdodEV4cHJlc3Npb25Ob2RlKSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kQ2hhckxpdGVyYWwgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnQ2hhckxpdGVyYWwnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGFueUNoYXIgPSAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCglmdW5jdGlvbiAocykgewoJCXZhciBuZXdPZmZzZXQgPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjaGFyT3JFbmQsIHMub2Zmc2V0LCBzLnNyYyk7CgkJaWYgKF9VdGlsc19lcShuZXdPZmZzZXQsIC0xKSkgewoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQlmYWxzZSwKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0FueUNoYXIsIHMucm93LCBzLmNvbCkpOwoJCX0gZWxzZSB7CgkJCWlmIChfVXRpbHNfZXEobmV3T2Zmc2V0LCAtMikpIHsKCQkJCXJldHVybiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCV9VdGlsc19jaHIoJ1xuJyksCgkJCQkJe2NvbDogMSwgaW5kZW50OiBzLmluZGVudCwgb2Zmc2V0OiBzLm9mZnNldCArIDEsIHJvdzogcy5yb3cgKyAxLCBzcmM6IHMuc3JjfSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgX3YwID0gJGVsbSRjb3JlJFN0cmluZyR0b0xpc3QoCgkJCQkJQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgcy5vZmZzZXQsIG5ld09mZnNldCwgcy5zcmMpKTsKCQkJCWlmICghX3YwLmIpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJZmFsc2UsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0FueUNoYXIsIHMucm93LCBzLmNvbCkpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYyA9IF92MC5hOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJYywKCQkJCQkJe2NvbDogcy5jb2wgKyAxLCBpbmRlbnQ6IHMuaW5kZW50LCBvZmZzZXQ6IG5ld09mZnNldCwgcm93OiBzLnJvdywgc3JjOiBzLnNyY30pOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U3ltYm9sID0gRjIoCglmdW5jdGlvbiAoc3RyLCBfdjApIHsKCQl2YXIgcGFyc2VQcmV2aW91cyA9IF92MC5hOwoJCXZhciBzdHJMZW5ndGggPSAkZWxtJGNvcmUkU3RyaW5nJGxlbmd0aChzdHIpOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92MSA9IHBhcnNlUHJldmlvdXMoczApOwoJCQkJaWYgKF92MS4kID09PSAnR29vZCcpIHsKCQkJCQl2YXIgcmVzID0gX3YxLmE7CgkJCQkJdmFyIHMxID0gX3YxLmI7CgkJCQkJdmFyIG5ld09mZnNldCA9IHMxLm9mZnNldCArIHN0ckxlbmd0aDsKCQkJCQlyZXR1cm4gX1V0aWxzX2VxKAoJCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzMS5vZmZzZXQsIG5ld09mZnNldCwgczEuc3JjKSwKCQkJCQkJc3RyICsgJycpID8gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCXJlcywKCQkJCQkJe2NvbDogczEuY29sICsgc3RyTGVuZ3RoLCBpbmRlbnQ6IHMxLmluZGVudCwgb2Zmc2V0OiBuZXdPZmZzZXQsIHJvdzogczEucm93LCBzcmM6IHMxLnNyY30pIDogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJdHJ1ZSwKCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nU3ltYm9sLCBzMS5yb3csIHMxLmNvbCwgc3RyKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBiYWQgPSBfdjE7CgkJCQkJcmV0dXJuIGJhZDsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRjaGFyVG9IZXggPSBmdW5jdGlvbiAoYykgewoJc3dpdGNoIChjLnZhbHVlT2YoKSkgewoJCWNhc2UgJzAnOgoJCQlyZXR1cm4gMDsKCQljYXNlICcxJzoKCQkJcmV0dXJuIDE7CgkJY2FzZSAnMic6CgkJCXJldHVybiAyOwoJCWNhc2UgJzMnOgoJCQlyZXR1cm4gMzsKCQljYXNlICc0JzoKCQkJcmV0dXJuIDQ7CgkJY2FzZSAnNSc6CgkJCXJldHVybiA1OwoJCWNhc2UgJzYnOgoJCQlyZXR1cm4gNjsKCQljYXNlICc3JzoKCQkJcmV0dXJuIDc7CgkJY2FzZSAnOCc6CgkJCXJldHVybiA4OwoJCWNhc2UgJzknOgoJCQlyZXR1cm4gOTsKCQljYXNlICdhJzoKCQkJcmV0dXJuIDEwOwoJCWNhc2UgJ2InOgoJCQlyZXR1cm4gMTE7CgkJY2FzZSAnYyc6CgkJCXJldHVybiAxMjsKCQljYXNlICdkJzoKCQkJcmV0dXJuIDEzOwoJCWNhc2UgJ2UnOgoJCQlyZXR1cm4gMTQ7CgkJY2FzZSAnZic6CgkJCXJldHVybiAxNTsKCQljYXNlICdBJzoKCQkJcmV0dXJuIDEwOwoJCWNhc2UgJ0InOgoJCQlyZXR1cm4gMTE7CgkJY2FzZSAnQyc6CgkJCXJldHVybiAxMjsKCQljYXNlICdEJzoKCQkJcmV0dXJuIDEzOwoJCWNhc2UgJ0UnOgoJCQlyZXR1cm4gMTQ7CgkJZGVmYXVsdDoKCQkJcmV0dXJuIDE1OwoJfQp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGhleFN0cmluZ1RvSW50ID0gZnVuY3Rpb24gKHN0cmluZykgewoJcmV0dXJuIEEzKAoJCSRlbG0kY29yZSRTdHJpbmckZm9sZHIsCgkJRjIoCgkJCWZ1bmN0aW9uIChjLCBzb0ZhcikgewoJCQkJcmV0dXJuIHsKCQkJCQlleHBvbmVudDogc29GYXIuZXhwb25lbnQgKyAxLAoJCQkJCXJlc3VsdDogc29GYXIucmVzdWx0ICsgKEEyKCRlbG0kY29yZSRCYXNpY3MkcG93LCAxNiwgc29GYXIuZXhwb25lbnQpICogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGNoYXJUb0hleChjKSkKCQkJCX07CgkJCX0pLAoJCXtleHBvbmVudDogMCwgcmVzdWx0OiAwfSwKCQlzdHJpbmcpLnJlc3VsdDsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0NoYXJTYXRpc2Z5aW5nUHJlZGljYXRlID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0V4cGVjdGluZ0NoYXJTYXRpc2Z5aW5nUHJlZGljYXRlJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGlzU3ViQ2hhcldpdGhvdXRMaW5lYnJlYWsgPSBGMygKCWZ1bmN0aW9uIChwcmVkaWNhdGUsIG9mZnNldCwgc3RyaW5nKSB7CgkJdmFyIGFjdHVhbENoYXIgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDEsIHN0cmluZyk7CgkJcmV0dXJuIEEyKCRlbG0kY29yZSRTdHJpbmckYW55LCBwcmVkaWNhdGUsIGFjdHVhbENoYXIpID8gKG9mZnNldCArIDEpIDogKCgkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjaGFyU3RyaW5nSXNVdGYxNkhpZ2hTdXJyb2dhdGUoYWN0dWFsQ2hhcikgJiYgQTIoCgkJCSRlbG0kY29yZSRTdHJpbmckYW55LAoJCQlwcmVkaWNhdGUsCgkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMiwgc3RyaW5nKSkpID8gKG9mZnNldCArIDIpIDogKC0xKSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtIZWxwID0gRjYoCglmdW5jdGlvbiAoaXNHb29kLCBvZmZzZXQsIHJvdywgY29sLCBzcmMsIGluZGVudCkgewoJCXNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtIZWxwOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBhY3R1YWxDaGFyID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQlpZiAoQTIoJGVsbSRjb3JlJFN0cmluZyRhbnksIGlzR29vZCwgYWN0dWFsQ2hhcikpIHsKCQkJCXZhciAkdGVtcCRpc0dvb2QgPSBpc0dvb2QsCgkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkkdGVtcCRyb3cgPSByb3csCgkJCQkJJHRlbXAkY29sID0gY29sICsgMSwKCQkJCQkkdGVtcCRzcmMgPSBzcmMsCgkJCQkJJHRlbXAkaW5kZW50ID0gaW5kZW50OwoJCQkJaXNHb29kID0gJHRlbXAkaXNHb29kOwoJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJcm93ID0gJHRlbXAkcm93OwoJCQkJY29sID0gJHRlbXAkY29sOwoJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJaW5kZW50ID0gJHRlbXAkaW5kZW50OwoJCQkJY29udGludWUgc2tpcFdoaWxlV2l0aG91dExpbmVicmVha0hlbHA7CgkJCX0gZWxzZSB7CgkJCQlpZiAoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY2hhclN0cmluZ0lzVXRmMTZIaWdoU3Vycm9nYXRlKGFjdHVhbENoYXIpICYmIEEyKAoJCQkJCSRlbG0kY29yZSRTdHJpbmckYW55LAoJCQkJCWlzR29vZCwKCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDIsIHNyYykpKSB7CgkJCQkJdmFyICR0ZW1wJGlzR29vZCA9IGlzR29vZCwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMiwKCQkJCQkJJHRlbXAkcm93ID0gcm93LAoJCQkJCQkkdGVtcCRjb2wgPSBjb2wgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmMsCgkJCQkJCSR0ZW1wJGluZGVudCA9IGluZGVudDsKCQkJCQlpc0dvb2QgPSAkdGVtcCRpc0dvb2Q7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXJvdyA9ICR0ZW1wJHJvdzsKCQkJCQljb2wgPSAkdGVtcCRjb2w7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWluZGVudCA9ICR0ZW1wJGluZGVudDsKCQkJCQljb250aW51ZSBza2lwV2hpbGVXaXRob3V0TGluZWJyZWFrSGVscDsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIHtjb2w6IGNvbCwgaW5kZW50OiBpbmRlbnQsIG9mZnNldDogb2Zmc2V0LCByb3c6IHJvdywgc3JjOiBzcmN9OwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZU1hcFdpdGhvdXRMaW5lYnJlYWsgPSBGMygKCWZ1bmN0aW9uIChjb25zdW1lZFN0cmluZ1RvUmVzLCBmaXJzdElzT2theSwgYWZ0ZXJGaXJzdElzT2theSkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIGZpcnN0T2Zmc2V0ID0gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaXNTdWJDaGFyV2l0aG91dExpbmVicmVhaywgZmlyc3RJc09rYXksIHMwLm9mZnNldCwgczAuc3JjKTsKCQkJCWlmIChfVXRpbHNfZXEoZmlyc3RPZmZzZXQsIC0xKSkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQlmYWxzZSwKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nQ2hhclNhdGlzZnlpbmdQcmVkaWNhdGUsIHMwLnJvdywgczAuY29sKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBzMSA9IEE2KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtIZWxwLCBhZnRlckZpcnN0SXNPa2F5LCBmaXJzdE9mZnNldCwgczAucm93LCBzMC5jb2wgKyAxLCBzMC5zcmMsIHMwLmluZGVudCk7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQljb25zdW1lZFN0cmluZ1RvUmVzKAoJCQkJCQkJQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgczAub2Zmc2V0LCBzMS5vZmZzZXQsIHMwLnNyYykpLAoJCQkJCQlzMSk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkZWxtJGNvcmUkQ2hhciRpc0hleERpZ2l0ID0gZnVuY3Rpb24gKF9jaGFyKSB7Cgl2YXIgY29kZSA9ICRlbG0kY29yZSRDaGFyJHRvQ29kZShfY2hhcik7CglyZXR1cm4gKCg0OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA1NykpIHx8ICgoKDY1IDw9IGNvZGUpICYmIChjb2RlIDw9IDcwKSkgfHwgKCg5NyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMDIpKSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjcgPSBGNygKCWZ1bmN0aW9uIChfdjAsIF92MSwgX3YyLCBfdjMsIF92NCwgX3Y1LCBfdjYpIHsKCQl2YXIgYXR0ZW1wdDAgPSBfdjAuYTsKCQl2YXIgYXR0ZW1wdDEgPSBfdjEuYTsKCQl2YXIgYXR0ZW1wdDIgPSBfdjIuYTsKCQl2YXIgYXR0ZW1wdDMgPSBfdjMuYTsKCQl2YXIgYXR0ZW1wdDQgPSBfdjQuYTsKCQl2YXIgYXR0ZW1wdDUgPSBfdjUuYTsKCQl2YXIgYXR0ZW1wdDYgPSBfdjYuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIF92NyA9IGF0dGVtcHQwKHMpOwoJCQkJaWYgKF92Ny4kID09PSAnR29vZCcpIHsKCQkJCQl2YXIgZ29vZCA9IF92NzsKCQkJCQlyZXR1cm4gZ29vZDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGJhZDAgPSBfdjc7CgkJCQkJdmFyIGNvbW1pdHRlZDAgPSBiYWQwLmE7CgkJCQkJdmFyIHgwID0gYmFkMC5iOwoJCQkJCWlmIChjb21taXR0ZWQwKSB7CgkJCQkJCXJldHVybiBiYWQwOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjggPSBhdHRlbXB0MShzKTsKCQkJCQkJaWYgKF92OC4kID09PSAnR29vZCcpIHsKCQkJCQkJCXZhciBnb29kID0gX3Y4OwoJCQkJCQkJcmV0dXJuIGdvb2Q7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYmFkMSA9IF92ODsKCQkJCQkJCXZhciBjb21taXR0ZWQxID0gYmFkMS5hOwoJCQkJCQkJdmFyIHgxID0gYmFkMS5iOwoJCQkJCQkJaWYgKGNvbW1pdHRlZDEpIHsKCQkJCQkJCQlyZXR1cm4gYmFkMTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIF92OSA9IGF0dGVtcHQyKHMpOwoJCQkJCQkJCWlmIChfdjkuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQkJCXZhciBnb29kID0gX3Y5OwoJCQkJCQkJCQlyZXR1cm4gZ29vZDsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgYmFkMiA9IF92OTsKCQkJCQkJCQkJdmFyIGNvbW1pdHRlZDIgPSBiYWQyLmE7CgkJCQkJCQkJCXZhciB4MiA9IGJhZDIuYjsKCQkJCQkJCQkJaWYgKGNvbW1pdHRlZDIpIHsKCQkJCQkJCQkJCXJldHVybiBiYWQyOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJdmFyIF92MTAgPSBhdHRlbXB0MyhzKTsKCQkJCQkJCQkJCWlmIChfdjEwLiQgPT09ICdHb29kJykgewoJCQkJCQkJCQkJCXZhciBnb29kID0gX3YxMDsKCQkJCQkJCQkJCQlyZXR1cm4gZ29vZDsKCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJdmFyIGJhZDMgPSBfdjEwOwoJCQkJCQkJCQkJCXZhciBjb21taXR0ZWQzID0gYmFkMy5hOwoJCQkJCQkJCQkJCXZhciB4MyA9IGJhZDMuYjsKCQkJCQkJCQkJCQlpZiAoY29tbWl0dGVkMykgewoJCQkJCQkJCQkJCQlyZXR1cm4gYmFkMzsKCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQl2YXIgX3YxMSA9IGF0dGVtcHQ0KHMpOwoJCQkJCQkJCQkJCQlpZiAoX3YxMS4kID09PSAnR29vZCcpIHsKCQkJCQkJCQkJCQkJCXZhciBnb29kID0gX3YxMTsKCQkJCQkJCQkJCQkJCXJldHVybiBnb29kOwoJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJdmFyIGJhZDQgPSBfdjExOwoJCQkJCQkJCQkJCQkJdmFyIGNvbW1pdHRlZDQgPSBiYWQ0LmE7CgkJCQkJCQkJCQkJCQl2YXIgeDQgPSBiYWQ0LmI7CgkJCQkJCQkJCQkJCQlpZiAoY29tbWl0dGVkNCkgewoJCQkJCQkJCQkJCQkJCXJldHVybiBiYWQ0OwoJCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCQl2YXIgX3YxMiA9IGF0dGVtcHQ1KHMpOwoJCQkJCQkJCQkJCQkJCWlmIChfdjEyLiQgPT09ICdHb29kJykgewoJCQkJCQkJCQkJCQkJCQl2YXIgZ29vZCA9IF92MTI7CgkJCQkJCQkJCQkJCQkJCXJldHVybiBnb29kOwoJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCXZhciBiYWQ1ID0gX3YxMjsKCQkJCQkJCQkJCQkJCQkJdmFyIGNvbW1pdHRlZDUgPSBiYWQ1LmE7CgkJCQkJCQkJCQkJCQkJCXZhciB4NSA9IGJhZDUuYjsKCQkJCQkJCQkJCQkJCQkJaWYgKGNvbW1pdHRlZDUpIHsKCQkJCQkJCQkJCQkJCQkJCXJldHVybiBiYWQ1OwoJCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQkJdmFyIF92MTMgPSBhdHRlbXB0NihzKTsKCQkJCQkJCQkJCQkJCQkJCWlmIChfdjEzLiQgPT09ICdHb29kJykgewoJCQkJCQkJCQkJCQkJCQkJCXZhciBnb29kID0gX3YxMzsKCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gZ29vZDsKCQkJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIGJhZDYgPSBfdjEzOwoJCQkJCQkJCQkJCQkJCQkJCXZhciBjb21taXR0ZWQ2ID0gYmFkNi5hOwoJCQkJCQkJCQkJCQkJCQkJCXZhciB4NiA9IGJhZDYuYjsKCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gY29tbWl0dGVkNiA/IGJhZDYgOiBBMigKCQkJCQkJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQkJCQkJCQkJCQkJCQlmYWxzZSwKCQkJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdPbmVPZiwKCQkJCQkJCQkJCQkJCQkJCQkJCXgwLAoJCQkJCQkJCQkJCQkJCQkJCQkJeDEsCgkJCQkJCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCQkJCQkJW3gyLCB4MywgeDQsIHg1LCB4Nl0pKSk7CgkJCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZXNjYXBlZENoYXJWYWx1ZU1hcCA9IGZ1bmN0aW9uIChjaGFyVG9SZXMpIHsKCXJldHVybiBBNygKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjcsCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwKCQkJJ1wnJywKCQkJY2hhclRvUmVzKAoJCQkJX1V0aWxzX2NocignXCcnKSkpLAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wsCgkJCSdcIicsCgkJCWNoYXJUb1JlcygKCQkJCV9VdGlsc19jaHIoJ1wiJykpKSwKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQknbicsCgkJCWNoYXJUb1JlcygKCQkJCV9VdGlsc19jaHIoJ1xuJykpKSwKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQkndCcsCgkJCWNoYXJUb1JlcygKCQkJCV9VdGlsc19jaHIoJ1x0JykpKSwKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQkncicsCgkJCWNoYXJUb1JlcygKCQkJCV9VdGlsc19jaHIoJ1x1MDAwRCcpKSksCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwKCQkJJ1xcJywKCQkJY2hhclRvUmVzKAoJCQkJX1V0aWxzX2NocignXFwnKSkpLAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkndXsnLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGZvbGxvd2VkQnlTeW1ib2wsCgkJCQknfScsCgkJCQlBMygKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZU1hcFdpdGhvdXRMaW5lYnJlYWssCgkJCQkJZnVuY3Rpb24gKGhleCkgewoJCQkJCQlyZXR1cm4gY2hhclRvUmVzKAoJCQkJCQkJJGVsbSRjb3JlJENoYXIkZnJvbUNvZGUoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGhleFN0cmluZ1RvSW50KGhleCkpKTsKCQkJCQl9LAoJCQkJCSRlbG0kY29yZSRDaGFyJGlzSGV4RGlnaXQsCgkJCQkJJGVsbSRjb3JlJENoYXIkaXNIZXhEaWdpdCkpKSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjJNYXBXaXRoU3RhcnRSb3dDb2x1bW5BbmRFbmRSb3dDb2x1bW4gPSBGNCgKCWZ1bmN0aW9uIChmaXJzdFRvQ2hvaWNlLCBfdjAsIHNlY29uZFRvQ2hvaWNlLCBfdjEpIHsKCQl2YXIgYXR0ZW1wdEZpcnN0ID0gX3YwLmE7CgkJdmFyIGF0dGVtcHRTZWNvbmQgPSBfdjEuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIF92MiA9IGF0dGVtcHRGaXJzdChzKTsKCQkJCWlmIChfdjIuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJdmFyIGZpcnN0ID0gX3YyLmE7CgkJCQkJdmFyIHMxID0gX3YyLmI7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQlBNShmaXJzdFRvQ2hvaWNlLCBzLnJvdywgcy5jb2wsIGZpcnN0LCBzMS5yb3csIHMxLmNvbCksCgkJCQkJCXMxKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGZpcnN0Q29tbWl0dGVkID0gX3YyLmE7CgkJCQkJdmFyIGZpcnN0WCA9IF92Mi5iOwoJCQkJCWlmIChmaXJzdENvbW1pdHRlZCkgewoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBmaXJzdENvbW1pdHRlZCwgZmlyc3RYKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgX3YzID0gYXR0ZW1wdFNlY29uZChzKTsKCQkJCQkJaWYgKF92My4kID09PSAnR29vZCcpIHsKCQkJCQkJCXZhciBzZWNvbmQgPSBfdjMuYTsKCQkJCQkJCXZhciBzMSA9IF92My5iOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJQTUoc2Vjb25kVG9DaG9pY2UsIHMucm93LCBzLmNvbCwgc2Vjb25kLCBzMS5yb3csIHMxLmNvbCksCgkJCQkJCQkJczEpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIHNlY29uZENvbW1pdHRlZCA9IF92My5hOwoJCQkJCQkJdmFyIHNlY29uZFggPSBfdjMuYjsKCQkJCQkJCXJldHVybiBzZWNvbmRDb21taXR0ZWQgPyBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHNlY29uZENvbW1pdHRlZCwgc2Vjb25kWCkgOiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCQkJZmFsc2UsCgkJCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nT25lT2YsIGZpcnN0WCwgc2Vjb25kWCwgX0xpc3RfTmlsKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkY2hhcmFjdGVyTGl0ZXJhbE1hcFdpdGhSYW5nZSA9IGZ1bmN0aW9uIChyYW5nZUFuZENoYXJUb1JlcykgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJJ1wnJywKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZm9sbG93ZWRCeVN5bWJvbCwKCQkJJ1wnJywKCQkJQTQoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjJNYXBXaXRoU3RhcnRSb3dDb2x1bW5BbmRFbmRSb3dDb2x1bW4sCgkJCQlGNSgKCQkJCQlmdW5jdGlvbiAoc3RhcnRSb3csIHN0YXJ0Q29sdW1uLCBfY2hhciwgZW5kUm93LCBlbmRDb2x1bW4pIHsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJcmFuZ2VBbmRDaGFyVG9SZXMsCgkJCQkJCQl7CgkJCQkJCQkJZW5kOiB7Y29sdW1uOiBlbmRDb2x1bW4gKyAxLCByb3c6IGVuZFJvd30sCgkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHN0YXJ0Q29sdW1uIC0gMSwgcm93OiBzdGFydFJvd30KCQkJCQkJCX0sCgkJCQkJCQlfY2hhcik7CgkJCQkJfSksCgkJCQlBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCSdcXCcsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGVzY2FwZWRDaGFyVmFsdWVNYXAoJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSkpLAoJCQkJRjUoCgkJCQkJZnVuY3Rpb24gKHN0YXJ0Um93LCBzdGFydENvbHVtbiwgX2NoYXIsIGVuZFJvdywgZW5kQ29sdW1uKSB7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCXJhbmdlQW5kQ2hhclRvUmVzLAoJCQkJCQkJewoJCQkJCQkJCWVuZDoge2NvbHVtbjogZW5kQ29sdW1uICsgMSwgcm93OiBlbmRSb3d9LAoJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzdGFydENvbHVtbiAtIDEsIHJvdzogc3RhcnRSb3d9CgkJCQkJCQl9LAoJCQkJCQkJX2NoYXIpOwoJCQkJCX0pLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkYW55Q2hhcikpKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY2hhckxpdGVyYWxFeHByZXNzaW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGNoYXJhY3RlckxpdGVyYWxNYXBXaXRoUmFuZ2UoCglGMigKCQlmdW5jdGlvbiAocmFuZ2UsIF9jaGFyKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJENoYXJMaXRlcmFsKF9jaGFyKSkKCQkJfTsKCQl9KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGVyclVua25vd25JbmZpeE9wZXJhdG9yID0gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ3Vua25vd24gaW5maXggb3BlcmF0b3InKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGlmRm9sbG93ZWRCeVdoaWxlVmFsaWRhdGVNYXBXaXRoUmFuZ2VXaXRob3V0TGluZWJyZWFrID0gRjQoCglmdW5jdGlvbiAodG9SZXN1bHQsIGZpcnN0SXNPa2F5LCBhZnRlckZpcnN0SXNPa2F5LCByZXN1bHRJc09rYXkpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBmaXJzdE9mZnNldCA9IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGlzU3ViQ2hhcldpdGhvdXRMaW5lYnJlYWssIGZpcnN0SXNPa2F5LCBzMC5vZmZzZXQsIHMwLnNyYyk7CgkJCQlpZiAoX1V0aWxzX2VxKGZpcnN0T2Zmc2V0LCAtMSkpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJZmFsc2UsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0NoYXJTYXRpc2Z5aW5nUHJlZGljYXRlLCBzMC5yb3csIHMwLmNvbCkpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgczEgPSBBNigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwV2hpbGVXaXRob3V0TGluZWJyZWFrSGVscCwgYWZ0ZXJGaXJzdElzT2theSwgZmlyc3RPZmZzZXQsIHMwLnJvdywgczAuY29sICsgMSwgczAuc3JjLCBzMC5pbmRlbnQpOwoJCQkJCXZhciBuYW1lID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgczAub2Zmc2V0LCBzMS5vZmZzZXQsIHMwLnNyYyk7CgkJCQkJcmV0dXJuIHJlc3VsdElzT2theShuYW1lKSA/IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQlBMigKCQkJCQkJCXRvUmVzdWx0LAoJCQkJCQkJewoJCQkJCQkJCWVuZDoge2NvbHVtbjogczEuY29sLCByb3c6IHMxLnJvd30sCgkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJCQl9LAoJCQkJCQkJbmFtZSksCgkJCQkJCXMxKSA6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCWZhbHNlLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdTdHJpbmdTYXRpc2Z5aW5nUHJlZGljYXRlLCBzMC5yb3csIHMwLmNvbCArIDEpKTsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRpc05vdFJlc2VydmVkID0gZnVuY3Rpb24gKG5hbWUpIHsKCXN3aXRjaCAobmFtZSkgewoJCWNhc2UgJ21vZHVsZSc6CgkJCXJldHVybiBmYWxzZTsKCQljYXNlICdleHBvc2luZyc6CgkJCXJldHVybiBmYWxzZTsKCQljYXNlICdpbXBvcnQnOgoJCQlyZXR1cm4gZmFsc2U7CgkJY2FzZSAnYXMnOgoJCQlyZXR1cm4gZmFsc2U7CgkJY2FzZSAnaWYnOgoJCQlyZXR1cm4gZmFsc2U7CgkJY2FzZSAndGhlbic6CgkJCXJldHVybiBmYWxzZTsKCQljYXNlICdlbHNlJzoKCQkJcmV0dXJuIGZhbHNlOwoJCWNhc2UgJ2xldCc6CgkJCXJldHVybiBmYWxzZTsKCQljYXNlICdpbic6CgkJCXJldHVybiBmYWxzZTsKCQljYXNlICdjYXNlJzoKCQkJcmV0dXJuIGZhbHNlOwoJCWNhc2UgJ29mJzoKCQkJcmV0dXJuIGZhbHNlOwoJCWNhc2UgJ3BvcnQnOgoJCQlyZXR1cm4gZmFsc2U7CgkJY2FzZSAndHlwZSc6CgkJCXJldHVybiBmYWxzZTsKCQljYXNlICd3aGVyZSc6CgkJCXJldHVybiBmYWxzZTsKCQlkZWZhdWx0OgoJCQlyZXR1cm4gdHJ1ZTsKCX0KfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGNoYXJDb2RlSXNEaWdpdCA9IGZ1bmN0aW9uIChjb2RlKSB7CglyZXR1cm4gKGNvZGUgPD0gNTcpICYmICg0OCA8PSBjb2RlKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGNoYXJDb2RlSXNMb3dlciA9IGZ1bmN0aW9uIChjb2RlKSB7CglyZXR1cm4gKDk3IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMik7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRjaGFyQ29kZUlzVXBwZXIgPSBmdW5jdGlvbiAoY29kZSkgewoJcmV0dXJuIChjb2RlIDw9IDkwKSAmJiAoNjUgPD0gY29kZSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSR1bmljb2RlSXNBbHBoYU51bU9yVW5kZXJzY29yZUZhc3QgPSBmdW5jdGlvbiAoYykgewoJdmFyIGNvZGUgPSAkZWxtJGNvcmUkQ2hhciR0b0NvZGUoYyk7CglyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkY2hhckNvZGVJc0xvd2VyKGNvZGUpIHx8ICgkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRjaGFyQ29kZUlzVXBwZXIoY29kZSkgfHwgKCRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGNoYXJDb2RlSXNEaWdpdChjb2RlKSB8fCAoKGNvZGUgPT09IDk1KSB8fCAoKChjb2RlICE9PSAzMikgJiYgKGNvZGUgIT09IDEwKSkgJiYgKChjb2RlIDwgMjU2KSA/ICgoKDQ4IDw9IGNvZGUpICYmIChjb2RlIDw9IDU3KSkgfHwgKCgoNjUgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTApKSB8fCAoKCg5NyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjIpKSB8fCAoKGNvZGUgPT09IDE3MCkgfHwgKCgoMTc4IDw9IGNvZGUpICYmIChjb2RlIDw9IDE3OSkpIHx8ICgoY29kZSA9PT0gMTgxKSB8fCAoKCgxODUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTg2KSkgfHwgKCgoMTg4IDw9IGNvZGUpICYmIChjb2RlIDw9IDE5MCkpIHx8ICgoKDE5MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAyMTQpKSB8fCAoKCgyMTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjQ2KSkgfHwgKCgyNDggPD0gY29kZSkgJiYgKGNvZGUgPD0gMjU1KSkpKSkpKSkpKSkpIDogKChjb2RlIDwgNDM3MDApID8gKChjb2RlIDwgNDM0NykgPyAoKGNvZGUgPCAyODY4KSA/ICgoY29kZSA8IDIzNjQpID8gKChjb2RlIDwgMTY0OCkgPyAoKGNvZGUgPCA5MzApID8gKCgoMjU2IDw9IGNvZGUpICYmIChjb2RlIDw9IDcwNSkpIHx8ICgoKDcxMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MjEpKSB8fCAoKCg3MzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzQwKSkgfHwgKCgoODgwIDw9IGNvZGUpICYmIChjb2RlIDw9IDg4NCkpIHx8ICgoKDg4NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA4ODcpKSB8fCAoKCg4OTAgPD0gY29kZSkgJiYgKGNvZGUgPD0gODkzKSkgfHwgKChjb2RlID09PSA4OTUpIHx8ICgoY29kZSA9PT0gOTAyKSB8fCAoKCg5MDQgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTA2KSkgfHwgKChjb2RlID09PSA5MDgpIHx8ICgoKDkxMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA5MjkpKSB8fCAoKCFBMigkZWxtJGNvcmUkQmFzaWNzJG1vZEJ5LCAyLCBjb2RlKSkgJiYgKCg3NDggPD0gY29kZSkgJiYgKGNvZGUgPD0gNzUwKSkpKSkpKSkpKSkpKSkgOiAoKCg5MzEgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTAxMykpIHx8ICgoKDEwMTUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE1MykpIHx8ICgoKDExNjIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTMyNykpIHx8ICgoKDEzMjkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTM2NikpIHx8ICgoY29kZSA9PT0gMTM2OSkgfHwgKCgoMTM3NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxNDE2KSkgfHwgKCgoMTQ4OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxNTE0KSkgfHwgKCgoMTUxOSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxNTIyKSkgfHwgKCgoMTU2OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxNjEwKSkgfHwgKCgoMTYzMiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxNjQxKSkgfHwgKCgxNjQ2IDw9IGNvZGUpICYmIChjb2RlIDw9IDE2NDcpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgMjA0MSkgPyAoKCgxNjQ5IDw9IGNvZGUpICYmIChjb2RlIDw9IDE3NDcpKSB8fCAoKGNvZGUgPT09IDE3NDkpIHx8ICgoKDE3NjUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTc2NikpIHx8ICgoKDE3NzQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTc4OCkpIHx8ICgoY29kZSA9PT0gMTc5MSkgfHwgKChjb2RlID09PSAxODA4KSB8fCAoKCgxODEwIDw9IGNvZGUpICYmIChjb2RlIDw9IDE4MzkpKSB8fCAoKCgxODY5IDw9IGNvZGUpICYmIChjb2RlIDw9IDE5NTcpKSB8fCAoKGNvZGUgPT09IDE5NjkpIHx8ICgoKDE5ODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjAyNikpIHx8ICgoMjAzNiA8PSBjb2RlKSAmJiAoY29kZSA8PSAyMDM3KSkpKSkpKSkpKSkpIDogKChjb2RlID09PSAyMDQyKSB8fCAoKCgyMDQ4IDw9IGNvZGUpICYmIChjb2RlIDw9IDIwNjkpKSB8fCAoKGNvZGUgPT09IDIwNzQpIHx8ICgoY29kZSA9PT0gMjA4NCkgfHwgKChjb2RlID09PSAyMDg4KSB8fCAoKCgyMTEyIDw9IGNvZGUpICYmIChjb2RlIDw9IDIxMzYpKSB8fCAoKCgyMTQ0IDw9IGNvZGUpICYmIChjb2RlIDw9IDIxNTQpKSB8fCAoKCgyMTYwIDw9IGNvZGUpICYmIChjb2RlIDw9IDIxODMpKSB8fCAoKCgyMTg1IDw9IGNvZGUpICYmIChjb2RlIDw9IDIxOTApKSB8fCAoKCgyMjA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDIyNDkpKSB8fCAoKDIzMDggPD0gY29kZSkgJiYgKGNvZGUgPD0gMjM2MSkpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgMjYwOSkgPyAoKGNvZGUgPCAyNDkyKSA/ICgoY29kZSA9PT0gMjM2NSkgfHwgKChjb2RlID09PSAyMzg0KSB8fCAoKCgyMzkyIDw9IGNvZGUpICYmIChjb2RlIDw9IDI0MDEpKSB8fCAoKCgyNDA2IDw9IGNvZGUpICYmIChjb2RlIDw9IDI0MTUpKSB8fCAoKCgyNDE3IDw9IGNvZGUpICYmIChjb2RlIDw9IDI0MzIpKSB8fCAoKCgyNDM3IDw9IGNvZGUpICYmIChjb2RlIDw9IDI0NDQpKSB8fCAoKCgyNDQ3IDw9IGNvZGUpICYmIChjb2RlIDw9IDI0NDgpKSB8fCAoKCgyNDUxIDw9IGNvZGUpICYmIChjb2RlIDw9IDI0NzIpKSB8fCAoKCgyNDc0IDw9IGNvZGUpICYmIChjb2RlIDw9IDI0ODApKSB8fCAoKGNvZGUgPT09IDI0ODIpIHx8ICgoMjQ4NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNDg5KSkpKSkpKSkpKSkpIDogKChjb2RlID09PSAyNDkzKSB8fCAoKGNvZGUgPT09IDI1MTApIHx8ICgoKDI1MjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjUyNSkpIHx8ICgoKDI1MjcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjUyOSkpIHx8ICgoKDI1MzQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjU0NSkpIHx8ICgoKDI1NDggPD0gY29kZSkgJiYgKGNvZGUgPD0gMjU1MykpIHx8ICgoY29kZSA9PT0gMjU1NikgfHwgKCgoMjU2NSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNTcwKSkgfHwgKCgoMjU3NSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNTc2KSkgfHwgKCgoMjU3OSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNjAwKSkgfHwgKCgyNjAyIDw9IGNvZGUpICYmIChjb2RlIDw9IDI2MDgpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgMjczNykgPyAoKCgyNjEwIDw9IGNvZGUpICYmIChjb2RlIDw9IDI2MTEpKSB8fCAoKCgyNjEzIDw9IGNvZGUpICYmIChjb2RlIDw9IDI2MTQpKSB8fCAoKCgyNjE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDI2MTcpKSB8fCAoKCgyNjQ5IDw9IGNvZGUpICYmIChjb2RlIDw9IDI2NTIpKSB8fCAoKGNvZGUgPT09IDI2NTQpIHx8ICgoKDI2NjIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjY3MSkpIHx8ICgoKDI2NzQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjY3NikpIHx8ICgoKDI2OTMgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjcwMSkpIHx8ICgoKDI3MDMgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjcwNSkpIHx8ICgoKDI3MDcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjcyOCkpIHx8ICgoMjczMCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNzM2KSkpKSkpKSkpKSkpIDogKCgoMjczOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNzM5KSkgfHwgKCgoMjc0MSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNzQ1KSkgfHwgKChjb2RlID09PSAyNzQ5KSB8fCAoKGNvZGUgPT09IDI3NjgpIHx8ICgoKDI3ODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjc4NSkpIHx8ICgoKDI3OTAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjc5OSkpIHx8ICgoY29kZSA9PT0gMjgwOSkgfHwgKCgoMjgyMSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyODI4KSkgfHwgKCgoMjgzMSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyODMyKSkgfHwgKCgoMjgzNSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyODU2KSkgfHwgKCgoMjg1OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyODY0KSkgfHwgKCgyODY2IDw9IGNvZGUpICYmIChjb2RlIDw9IDI4NjcpKSkpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgMzQxMSkgPyAoKGNvZGUgPCAzMTMyKSA/ICgoY29kZSA8IDI5NzEpID8gKCgoMjg2OSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyODczKSkgfHwgKChjb2RlID09PSAyODc3KSB8fCAoKCgyOTA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDI5MDkpKSB8fCAoKCgyOTExIDw9IGNvZGUpICYmIChjb2RlIDw9IDI5MTMpKSB8fCAoKCgyOTE4IDw9IGNvZGUpICYmIChjb2RlIDw9IDI5MjcpKSB8fCAoKCgyOTI5IDw9IGNvZGUpICYmIChjb2RlIDw9IDI5MzUpKSB8fCAoKGNvZGUgPT09IDI5NDcpIHx8ICgoKDI5NDkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjk1NCkpIHx8ICgoKDI5NTggPD0gY29kZSkgJiYgKGNvZGUgPD0gMjk2MCkpIHx8ICgoKDI5NjIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjk2NSkpIHx8ICgoMjk2OSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyOTcwKSkpKSkpKSkpKSkpIDogKChjb2RlID09PSAyOTcyKSB8fCAoKCgyOTc0IDw9IGNvZGUpICYmIChjb2RlIDw9IDI5NzUpKSB8fCAoKCgyOTc5IDw9IGNvZGUpICYmIChjb2RlIDw9IDI5ODApKSB8fCAoKCgyOTg0IDw9IGNvZGUpICYmIChjb2RlIDw9IDI5ODYpKSB8fCAoKCgyOTkwIDw9IGNvZGUpICYmIChjb2RlIDw9IDMwMDEpKSB8fCAoKGNvZGUgPT09IDMwMjQpIHx8ICgoKDMwNDYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzA1OCkpIHx8ICgoKDMwNzcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzA4NCkpIHx8ICgoKDMwODYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzA4OCkpIHx8ICgoKDMwOTAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzExMikpIHx8ICgoMzExNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAzMTI5KSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDMyNTIpID8gKChjb2RlID09PSAzMTMzKSB8fCAoKCgzMTYwIDw9IGNvZGUpICYmIChjb2RlIDw9IDMxNjIpKSB8fCAoKGNvZGUgPT09IDMxNjUpIHx8ICgoKDMxNjggPD0gY29kZSkgJiYgKGNvZGUgPD0gMzE2OSkpIHx8ICgoKDMxNzQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzE4MykpIHx8ICgoKDMxOTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzE5OCkpIHx8ICgoY29kZSA9PT0gMzIwMCkgfHwgKCgoMzIwNSA8PSBjb2RlKSAmJiAoY29kZSA8PSAzMjEyKSkgfHwgKCgoMzIxNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAzMjE2KSkgfHwgKCgoMzIxOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAzMjQwKSkgfHwgKCgzMjQyIDw9IGNvZGUpICYmIChjb2RlIDw9IDMyNTEpKSkpKSkpKSkpKSkgOiAoKCgzMjUzIDw9IGNvZGUpICYmIChjb2RlIDw9IDMyNTcpKSB8fCAoKGNvZGUgPT09IDMyNjEpIHx8ICgoKDMyOTMgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzI5NCkpIHx8ICgoKDMyOTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzI5NykpIHx8ICgoKDMzMDIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzMxMSkpIHx8ICgoKDMzMTMgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzMxNCkpIHx8ICgoKDMzMzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzM0MCkpIHx8ICgoKDMzNDIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzM0NCkpIHx8ICgoKDMzNDYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzM4NikpIHx8ICgoY29kZSA9PT0gMzM4OSkgfHwgKGNvZGUgPT09IDM0MDYpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgMzc3NSkgPyAoKGNvZGUgPCAzNjMzKSA/ICgoKDM0MTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzQxNCkpIHx8ICgoKDM0MTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzQyNSkpIHx8ICgoKDM0MzAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzQ0OCkpIHx8ICgoKDM0NTAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzQ1NSkpIHx8ICgoKDM0NjEgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzQ3OCkpIHx8ICgoKDM0ODIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzUwNSkpIHx8ICgoKDM1MDcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzUxNSkpIHx8ICgoY29kZSA9PT0gMzUxNykgfHwgKCgoMzUyMCA8PSBjb2RlKSAmJiAoY29kZSA8PSAzNTI2KSkgfHwgKCgoMzU1OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAzNTY3KSkgfHwgKCgzNTg1IDw9IGNvZGUpICYmIChjb2RlIDw9IDM2MzIpKSkpKSkpKSkpKSkgOiAoKCgzNjM0IDw9IGNvZGUpICYmIChjb2RlIDw9IDM2MzUpKSB8fCAoKCgzNjQ4IDw9IGNvZGUpICYmIChjb2RlIDw9IDM2NTQpKSB8fCAoKCgzNjY0IDw9IGNvZGUpICYmIChjb2RlIDw9IDM2NzMpKSB8fCAoKCgzNzEzIDw9IGNvZGUpICYmIChjb2RlIDw9IDM3MTQpKSB8fCAoKGNvZGUgPT09IDM3MTYpIHx8ICgoKDM3MTggPD0gY29kZSkgJiYgKGNvZGUgPD0gMzcyMikpIHx8ICgoKDM3MjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzc0NykpIHx8ICgoY29kZSA9PT0gMzc0OSkgfHwgKCgoMzc1MSA8PSBjb2RlKSAmJiAoY29kZSA8PSAzNzYwKSkgfHwgKCgoMzc2MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAzNzYzKSkgfHwgKGNvZGUgPT09IDM3NzMpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA0MTc1KSA/ICgoKDM3NzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzc4MCkpIHx8ICgoY29kZSA9PT0gMzc4MikgfHwgKCgoMzc5MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAzODAxKSkgfHwgKCgoMzgwNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAzODA3KSkgfHwgKChjb2RlID09PSAzODQwKSB8fCAoKCgzODcyIDw9IGNvZGUpICYmIChjb2RlIDw9IDM4OTEpKSB8fCAoKCgzOTA0IDw9IGNvZGUpICYmIChjb2RlIDw9IDM5MTEpKSB8fCAoKCgzOTEzIDw9IGNvZGUpICYmIChjb2RlIDw9IDM5NDgpKSB8fCAoKCgzOTc2IDw9IGNvZGUpICYmIChjb2RlIDw9IDM5ODApKSB8fCAoKCg0MDk2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQxMzgpKSB8fCAoKDQxNTkgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDE2OSkpKSkpKSkpKSkpKSA6ICgoKDQxNzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDE4MSkpIHx8ICgoKDQxODYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDE4OSkpIHx8ICgoY29kZSA9PT0gNDE5MykgfHwgKCgoNDE5NyA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MTk4KSkgfHwgKCgoNDIwNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MjA4KSkgfHwgKCgoNDIxMyA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MjI1KSkgfHwgKChjb2RlID09PSA0MjM4KSB8fCAoKCg0MjQwIDw9IGNvZGUpICYmIChjb2RlIDw9IDQyNDkpKSB8fCAoKCg0MjU2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQyOTMpKSB8fCAoKGNvZGUgPT09IDQyOTUpIHx8ICgoY29kZSA9PT0gNDMwMSkgfHwgKCg0MzA0IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzNDYpKSkpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDg0NTQpID8gKChjb2RlIDwgNjUyNykgPyAoKGNvZGUgPCA1NzYwKSA/ICgoY29kZSA8IDQ4MDEpID8gKCgoNDM0OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0NjgwKSkgfHwgKCgoNDY4MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Njg1KSkgfHwgKCgoNDY4OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Njk0KSkgfHwgKChjb2RlID09PSA0Njk2KSB8fCAoKCg0Njk4IDw9IGNvZGUpICYmIChjb2RlIDw9IDQ3MDEpKSB8fCAoKCg0NzA0IDw9IGNvZGUpICYmIChjb2RlIDw9IDQ3NDQpKSB8fCAoKCg0NzQ2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQ3NDkpKSB8fCAoKCg0NzUyIDw9IGNvZGUpICYmIChjb2RlIDw9IDQ3ODQpKSB8fCAoKCg0Nzg2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQ3ODkpKSB8fCAoKCg0NzkyIDw9IGNvZGUpICYmIChjb2RlIDw9IDQ3OTgpKSB8fCAoY29kZSA9PT0gNDgwMCkpKSkpKSkpKSkpIDogKCgoNDgwMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0ODA1KSkgfHwgKCgoNDgwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0ODIyKSkgfHwgKCgoNDgyNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0ODgwKSkgfHwgKCgoNDg4MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0ODg1KSkgfHwgKCgoNDg4OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0OTU0KSkgfHwgKCgoNDk2OSA8PSBjb2RlKSAmJiAoY29kZSA8PSA0OTg4KSkgfHwgKCgoNDk5MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA1MDA3KSkgfHwgKCgoNTAyNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA1MTA5KSkgfHwgKCgoNTExMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA1MTE3KSkgfHwgKCgoNTEyMSA8PSBjb2RlKSAmJiAoY29kZSA8PSA1NzQwKSkgfHwgKCg1NzQzIDw9IGNvZGUpICYmIChjb2RlIDw9IDU3NTkpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgNjExMSkgPyAoKCg1NzYxIDw9IGNvZGUpICYmIChjb2RlIDw9IDU3ODYpKSB8fCAoKCg1NzkyIDw9IGNvZGUpICYmIChjb2RlIDw9IDU4NjYpKSB8fCAoKCg1ODcwIDw9IGNvZGUpICYmIChjb2RlIDw9IDU4ODApKSB8fCAoKCg1ODg4IDw9IGNvZGUpICYmIChjb2RlIDw9IDU5MDUpKSB8fCAoKCg1OTE5IDw9IGNvZGUpICYmIChjb2RlIDw9IDU5MzcpKSB8fCAoKCg1OTUyIDw9IGNvZGUpICYmIChjb2RlIDw9IDU5NjkpKSB8fCAoKCg1OTg0IDw9IGNvZGUpICYmIChjb2RlIDw9IDU5OTYpKSB8fCAoKCg1OTk4IDw9IGNvZGUpICYmIChjb2RlIDw9IDYwMDApKSB8fCAoKCg2MDE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDYwNjcpKSB8fCAoKGNvZGUgPT09IDYxMDMpIHx8IChjb2RlID09PSA2MTA4KSkpKSkpKSkpKSkgOiAoKCg2MTEyIDw9IGNvZGUpICYmIChjb2RlIDw9IDYxMjEpKSB8fCAoKCg2MTI4IDw9IGNvZGUpICYmIChjb2RlIDw9IDYxMzcpKSB8fCAoKCg2MTYwIDw9IGNvZGUpICYmIChjb2RlIDw9IDYxNjkpKSB8fCAoKCg2MTc2IDw9IGNvZGUpICYmIChjb2RlIDw9IDYyNjQpKSB8fCAoKCg2MjcyIDw9IGNvZGUpICYmIChjb2RlIDw9IDYyNzYpKSB8fCAoKCg2Mjc5IDw9IGNvZGUpICYmIChjb2RlIDw9IDYzMTIpKSB8fCAoKGNvZGUgPT09IDYzMTQpIHx8ICgoKDYzMjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjM4OSkpIHx8ICgoKDY0MDAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjQzMCkpIHx8ICgoKDY0NzAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjUwOSkpIHx8ICgoNjUxMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTE2KSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA3NDE3KSA/ICgoY29kZSA8IDcwNDIpID8gKCgoNjUyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTcxKSkgfHwgKCgoNjU3NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NjAxKSkgfHwgKCgoNjYwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NjE4KSkgfHwgKCgoNjY1NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2Njc4KSkgfHwgKCgoNjY4OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NzQwKSkgfHwgKCgoNjc4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NzkzKSkgfHwgKCgoNjgwMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODA5KSkgfHwgKChjb2RlID09PSA2ODIzKSB8fCAoKCg2OTE3IDw9IGNvZGUpICYmIChjb2RlIDw9IDY5NjMpKSB8fCAoKCg2OTgxIDw9IGNvZGUpICYmIChjb2RlIDw9IDY5ODgpKSB8fCAoKDY5OTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzAwMSkpKSkpKSkpKSkpKSA6ICgoKDcwNDMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzA3MikpIHx8ICgoKDcwODYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzE0MSkpIHx8ICgoKDcxNjggPD0gY29kZSkgJiYgKGNvZGUgPD0gNzIwMykpIHx8ICgoKDcyMzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzI0MSkpIHx8ICgoKDcyNDUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzI5MykpIHx8ICgoKDcyOTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzMwNCkpIHx8ICgoKDczMTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzM1NCkpIHx8ICgoKDczNTcgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzM1OSkpIHx8ICgoKDc0MDEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzQwNCkpIHx8ICgoKDc0MDYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzQxMSkpIHx8ICgoNzQxMyA8PSBjb2RlKSAmJiAoY29kZSA8PSA3NDE0KSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDgxMjkpID8gKChjb2RlID09PSA3NDE4KSB8fCAoKCg3NDI0IDw9IGNvZGUpICYmIChjb2RlIDw9IDc2MTUpKSB8fCAoKCg3NjgwIDw9IGNvZGUpICYmIChjb2RlIDw9IDc5NTcpKSB8fCAoKCg3OTYwIDw9IGNvZGUpICYmIChjb2RlIDw9IDc5NjUpKSB8fCAoKCg3OTY4IDw9IGNvZGUpICYmIChjb2RlIDw9IDgwMDUpKSB8fCAoKCg4MDA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDgwMTMpKSB8fCAoKCg4MDE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDgwMjMpKSB8fCAoKCg4MDMyIDw9IGNvZGUpICYmIChjb2RlIDw9IDgwNjEpKSB8fCAoKCg4MDY0IDw9IGNvZGUpICYmIChjb2RlIDw9IDgxMTYpKSB8fCAoKCg4MTE4IDw9IGNvZGUpICYmIChjb2RlIDw9IDgxMjQpKSB8fCAoKGNvZGUgPT09IDgxMjYpIHx8ICgoQTIoJGVsbSRjb3JlJEJhc2ljcyRtb2RCeSwgMiwgY29kZSkgPT09IDEpICYmICgoODAyNSA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MDMxKSkpKSkpKSkpKSkpKSkgOiAoKCg4MTMwIDw9IGNvZGUpICYmIChjb2RlIDw9IDgxMzIpKSB8fCAoKCg4MTM0IDw9IGNvZGUpICYmIChjb2RlIDw9IDgxNDApKSB8fCAoKCg4MTQ0IDw9IGNvZGUpICYmIChjb2RlIDw9IDgxNDcpKSB8fCAoKCg4MTUwIDw9IGNvZGUpICYmIChjb2RlIDw9IDgxNTUpKSB8fCAoKCg4MTYwIDw9IGNvZGUpICYmIChjb2RlIDw9IDgxNzIpKSB8fCAoKCg4MTc4IDw9IGNvZGUpICYmIChjb2RlIDw9IDgxODApKSB8fCAoKCg4MTgyIDw9IGNvZGUpICYmIChjb2RlIDw9IDgxODgpKSB8fCAoKCg4MzA0IDw9IGNvZGUpICYmIChjb2RlIDw9IDgzMDUpKSB8fCAoKCg4MzA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDgzMTMpKSB8fCAoKCg4MzE5IDw9IGNvZGUpICYmIChjb2RlIDw9IDgzMjkpKSB8fCAoKCg4MzM2IDw9IGNvZGUpICYmIChjb2RlIDw9IDgzNDgpKSB8fCAoY29kZSA9PT0gODQ1MCkpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDEyNzgzKSA/ICgoY29kZSA8IDExNjQ3KSA/ICgoY29kZSA8IDk0NDkpID8gKChjb2RlID09PSA4NDU1KSB8fCAoKCg4NDU4IDw9IGNvZGUpICYmIChjb2RlIDw9IDg0NjcpKSB8fCAoKGNvZGUgPT09IDg0NjkpIHx8ICgoKDg0NzMgPD0gY29kZSkgJiYgKGNvZGUgPD0gODQ3NykpIHx8ICgoKDg0OTAgPD0gY29kZSkgJiYgKGNvZGUgPD0gODQ5MykpIHx8ICgoKDg0OTUgPD0gY29kZSkgJiYgKGNvZGUgPD0gODUwNSkpIHx8ICgoKDg1MDggPD0gY29kZSkgJiYgKGNvZGUgPD0gODUxMSkpIHx8ICgoKDg1MTcgPD0gY29kZSkgJiYgKGNvZGUgPD0gODUyMSkpIHx8ICgoY29kZSA9PT0gODUyNikgfHwgKCgoODUyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4NTg1KSkgfHwgKCgoOTMxMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA5MzcxKSkgfHwgKCghQTIoJGVsbSRjb3JlJEJhc2ljcyRtb2RCeSwgMiwgY29kZSkpICYmICgoODQ4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4NDg4KSkpKSkpKSkpKSkpKSkgOiAoKCg5NDUwIDw9IGNvZGUpICYmIChjb2RlIDw9IDk0NzEpKSB8fCAoKCgxMDEwMiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMDEzMSkpIHx8ICgoKDExMjY0IDw9IGNvZGUpICYmIChjb2RlIDw9IDExNDkyKSkgfHwgKCgoMTE0OTkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE1MDIpKSB8fCAoKCgxMTUwNiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTUwNykpIHx8ICgoY29kZSA9PT0gMTE1MTcpIHx8ICgoKDExNTIwIDw9IGNvZGUpICYmIChjb2RlIDw9IDExNTU3KSkgfHwgKChjb2RlID09PSAxMTU1OSkgfHwgKChjb2RlID09PSAxMTU2NSkgfHwgKCgoMTE1NjggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE2MjMpKSB8fCAoY29kZSA9PT0gMTE2MzEpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCAxMjMyMCkgPyAoKCgxMTY0OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTY3MCkpIHx8ICgoKDExNjgwIDw9IGNvZGUpICYmIChjb2RlIDw9IDExNjg2KSkgfHwgKCgoMTE2ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE2OTQpKSB8fCAoKCgxMTY5NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTcwMikpIHx8ICgoKDExNzA0IDw9IGNvZGUpICYmIChjb2RlIDw9IDExNzEwKSkgfHwgKCgoMTE3MTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE3MTgpKSB8fCAoKCgxMTcyMCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTcyNikpIHx8ICgoKDExNzI4IDw9IGNvZGUpICYmIChjb2RlIDw9IDExNzM0KSkgfHwgKCgoMTE3MzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE3NDIpKSB8fCAoKGNvZGUgPT09IDExODIzKSB8fCAoKDEyMjkzIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMjk1KSkpKSkpKSkpKSkpIDogKCgoMTIzMjEgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIzMjkpKSB8fCAoKCgxMjMzNyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjM0MSkpIHx8ICgoKDEyMzQ0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMzQ4KSkgfHwgKCgoMTIzNTMgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI0MzgpKSB8fCAoKCgxMjQ0NSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjQ0NykpIHx8ICgoKDEyNDQ5IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNTM4KSkgfHwgKCgoMTI1NDAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI1NDMpKSB8fCAoKCgxMjU0OSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjU5MSkpIHx8ICgoKDEyNTkzIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjg2KSkgfHwgKCgoMTI2OTAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2OTMpKSB8fCAoKDEyNzA0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNzM1KSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA0MzAxOSkgPyAoKGNvZGUgPCA0MjU1OSkgPyAoKCgxMjc4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjc5OSkpIHx8ICgoKDEyODMyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyODQxKSkgfHwgKCgoMTI4NzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI4NzkpKSB8fCAoKCgxMjg4MSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjg5NSkpIHx8ICgoKDEyOTI4IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyOTM3KSkgfHwgKCgoMTI5NzcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI5OTEpKSB8fCAoKCgxMzMxMiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxOTkwMykpIHx8ICgoKDE5OTY4IDw9IGNvZGUpICYmIChjb2RlIDw9IDQyMTI0KSkgfHwgKCgoNDIxOTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDIyMzcpKSB8fCAoKCg0MjI0MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MjUwOCkpIHx8ICgoNDI1MTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDI1MzkpKSkpKSkpKSkpKSkgOiAoKCg0MjU2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MjYwNikpIHx8ICgoKDQyNjIzIDw9IGNvZGUpICYmIChjb2RlIDw9IDQyNjUzKSkgfHwgKCgoNDI2NTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDI3MzUpKSB8fCAoKCg0Mjc3NSA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mjc4MykpIHx8ICgoKDQyNzg2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQyODg4KSkgfHwgKCgoNDI4OTEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDI5NTQpKSB8fCAoKCg0Mjk2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mjk2MSkpIHx8ICgoKDQyOTY2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQyOTY5KSkgfHwgKCgoNDI5OTQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDMwMDkpKSB8fCAoKCg0MzAxMSA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzAxMykpIHx8ICgoKDQzMDE1IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzMDE4KSkgfHwgKChBMigkZWxtJGNvcmUkQmFzaWNzJG1vZEJ5LCAyLCBjb2RlKSA9PT0gMSkgJiYgKCg0Mjk2MyA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mjk2NSkpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDQzMzk1KSA/ICgoKDQzMDIwIDw9IGNvZGUpICYmIChjb2RlIDw9IDQzMDQyKSkgfHwgKCgoNDMwNTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDMwNjEpKSB8fCAoKCg0MzA3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzEyMykpIHx8ICgoKDQzMTM4IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzMTg3KSkgfHwgKCgoNDMyMTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDMyMjUpKSB8fCAoKCg0MzI1MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzI1NSkpIHx8ICgoY29kZSA9PT0gNDMyNTkpIHx8ICgoKDQzMjYxIDw9IGNvZGUpICYmIChjb2RlIDw9IDQzMjYyKSkgfHwgKCgoNDMyNjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDMzMDEpKSB8fCAoKCg0MzMxMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzMzNCkpIHx8ICgoNDMzNjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDMzODgpKSkpKSkpKSkpKSkgOiAoKCg0MzM5NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzQ0MikpIHx8ICgoKDQzNDcxIDw9IGNvZGUpICYmIChjb2RlIDw9IDQzNDgxKSkgfHwgKCgoNDM0ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM0OTIpKSB8fCAoKCg0MzQ5NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzUxOCkpIHx8ICgoKDQzNTIwIDw9IGNvZGUpICYmIChjb2RlIDw9IDQzNTYwKSkgfHwgKCgoNDM1ODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM1ODYpKSB8fCAoKCg0MzU4OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzU5NSkpIHx8ICgoKDQzNjAwIDw9IGNvZGUpICYmIChjb2RlIDw9IDQzNjA5KSkgfHwgKCgoNDM2MTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM2MzgpKSB8fCAoKGNvZGUgPT09IDQzNjQyKSB8fCAoKCg0MzY0NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzY5NSkpIHx8IChjb2RlID09PSA0MzY5NykpKSkpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgNzEzNTEpID8gKChjb2RlIDwgNjc2NzEpID8gKChjb2RlIDwgNjU1NDgpID8gKChjb2RlIDwgNjQyODYpID8gKChjb2RlIDwgNDM4NjcpID8gKCgoNDM3MDEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM3MDIpKSB8fCAoKCg0MzcwNSA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzcwOSkpIHx8ICgoKDQzNzM5IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzNzQxKSkgfHwgKCgoNDM3NDQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM3NTQpKSB8fCAoKCg0Mzc2MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mzc2NCkpIHx8ICgoKDQzNzc3IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzNzgyKSkgfHwgKCgoNDM3ODUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM3OTApKSB8fCAoKCg0Mzc5MyA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mzc5OCkpIHx8ICgoKDQzODA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzODE0KSkgfHwgKCgoNDM4MTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM4MjIpKSB8fCAoKCg0MzgyNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mzg2NikpIHx8ICgoIUEyKCRlbG0kY29yZSRCYXNpY3MkbW9kQnksIDIsIGNvZGUpKSAmJiAoKDQzNzEyIDw9IGNvZGUpICYmIChjb2RlIDw9IDQzNzE0KSkpKSkpKSkpKSkpKSkgOiAoKCg0Mzg2OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mzg4MSkpIHx8ICgoKDQzODg4IDw9IGNvZGUpICYmIChjb2RlIDw9IDQ0MDAyKSkgfHwgKCgoNDQwMTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDQwMjUpKSB8fCAoKCg0NDAzMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA1NTIwMykpIHx8ICgoKDU1MjE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDU1MjM4KSkgfHwgKCgoNTUyNDMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNTUyOTEpKSB8fCAoKCg2Mzc0NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NDEwOSkpIHx8ICgoKDY0MTEyIDw9IGNvZGUpICYmIChjb2RlIDw9IDY0MjE3KSkgfHwgKCgoNjQyNTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjQyNjIpKSB8fCAoKCg2NDI3NSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NDI3OSkpIHx8IChjb2RlID09PSA2NDI4NSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDY1MTM1KSA/ICgoKDY0Mjg3IDw9IGNvZGUpICYmIChjb2RlIDw9IDY0Mjk2KSkgfHwgKCgoNjQyOTggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjQzMTApKSB8fCAoKCg2NDMxMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NDMxNikpIHx8ICgoY29kZSA9PT0gNjQzMTgpIHx8ICgoKDY0MzIwIDw9IGNvZGUpICYmIChjb2RlIDw9IDY0MzIxKSkgfHwgKCgoNjQzMjMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjQzMjQpKSB8fCAoKCg2NDMyNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NDQzMykpIHx8ICgoKDY0NDY3IDw9IGNvZGUpICYmIChjb2RlIDw9IDY0ODI5KSkgfHwgKCgoNjQ4NDggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjQ5MTEpKSB8fCAoKCg2NDkxNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NDk2NykpIHx8ICgoNjUwMDggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjUwMTkpKSkpKSkpKSkpKSkgOiAoKCg2NTEzNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTE0MCkpIHx8ICgoKDY1MTQyIDw9IGNvZGUpICYmIChjb2RlIDw9IDY1Mjc2KSkgfHwgKCgoNjUyOTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjUzMDUpKSB8fCAoKCg2NTMxMyA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTMzOCkpIHx8ICgoKDY1MzQ1IDw9IGNvZGUpICYmIChjb2RlIDw9IDY1MzcwKSkgfHwgKCgoNjUzODIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjU0NzApKSB8fCAoKCg2NTQ3NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTQ3OSkpIHx8ICgoKDY1NDgyIDw9IGNvZGUpICYmIChjb2RlIDw9IDY1NDg3KSkgfHwgKCgoNjU0OTAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjU0OTUpKSB8fCAoKCg2NTQ5OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTUwMCkpIHx8ICgoNjU1MzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjU1NDcpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDY2Nzc1KSA/ICgoY29kZSA8IDY2MjcyKSA/ICgoKDY1NTQ5IDw9IGNvZGUpICYmIChjb2RlIDw9IDY1NTc0KSkgfHwgKCgoNjU1NzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjU1OTQpKSB8fCAoKCg2NTU5NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTU5NykpIHx8ICgoKDY1NTk5IDw9IGNvZGUpICYmIChjb2RlIDw9IDY1NjEzKSkgfHwgKCgoNjU2MTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjU2MjkpKSB8fCAoKCg2NTY2NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTc4NikpIHx8ICgoKDY1Nzk5IDw9IGNvZGUpICYmIChjb2RlIDw9IDY1ODQzKSkgfHwgKCgoNjU4NTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjU5MTIpKSB8fCAoKCg2NTkzMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTkzMSkpIHx8ICgoKDY2MTc2IDw9IGNvZGUpICYmIChjb2RlIDw9IDY2MjA0KSkgfHwgKCg2NjIwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NjI1NikpKSkpKSkpKSkpKSA6ICgoKDY2MjczIDw9IGNvZGUpICYmIChjb2RlIDw9IDY2Mjk5KSkgfHwgKCgoNjYzMDQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjYzMzkpKSB8fCAoKCg2NjM0OSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NjM3OCkpIHx8ICgoKDY2Mzg0IDw9IGNvZGUpICYmIChjb2RlIDw9IDY2NDIxKSkgfHwgKCgoNjY0MzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjY0NjEpKSB8fCAoKCg2NjQ2NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NjQ5OSkpIHx8ICgoKDY2NTA0IDw9IGNvZGUpICYmIChjb2RlIDw9IDY2NTExKSkgfHwgKCgoNjY1MTMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjY1MTcpKSB8fCAoKCg2NjU2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NjcxNykpIHx8ICgoKDY2NzIwIDw9IGNvZGUpICYmIChjb2RlIDw9IDY2NzI5KSkgfHwgKCg2NjczNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2Njc3MSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA2NzA3MSkgPyAoKCg2Njc3NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NjgxMSkpIHx8ICgoKDY2ODE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDY2ODU1KSkgfHwgKCgoNjY4NjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjY5MTUpKSB8fCAoKCg2NjkyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NjkzOCkpIHx8ICgoKDY2OTQwIDw9IGNvZGUpICYmIChjb2RlIDw9IDY2OTU0KSkgfHwgKCgoNjY5NTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjY5NjIpKSB8fCAoKCg2Njk2NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2Njk2NSkpIHx8ICgoKDY2OTY3IDw9IGNvZGUpICYmIChjb2RlIDw9IDY2OTc3KSkgfHwgKCgoNjY5NzkgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjY5OTMpKSB8fCAoKCg2Njk5NSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NzAwMSkpIHx8ICgoNjcwMDMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjcwMDQpKSkpKSkpKSkpKSkgOiAoKCg2NzA3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NzM4MikpIHx8ICgoKDY3MzkyIDw9IGNvZGUpICYmIChjb2RlIDw9IDY3NDEzKSkgfHwgKCgoNjc0MjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjc0MzEpKSB8fCAoKCg2NzQ1NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NzQ2MSkpIHx8ICgoKDY3NDYzIDw9IGNvZGUpICYmIChjb2RlIDw9IDY3NTA0KSkgfHwgKCgoNjc1MDYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjc1MTQpKSB8fCAoKCg2NzU4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NzU4OSkpIHx8ICgoY29kZSA9PT0gNjc1OTIpIHx8ICgoKDY3NTk0IDw9IGNvZGUpICYmIChjb2RlIDw9IDY3NjM3KSkgfHwgKCgoNjc2MzkgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjc2NDApKSB8fCAoKGNvZGUgPT09IDY3NjQ0KSB8fCAoKDY3NjQ3IDw9IGNvZGUpICYmIChjb2RlIDw9IDY3NjY5KSkpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDY5ODcxKSA/ICgoY29kZSA8IDY4NDcxKSA/ICgoY29kZSA8IDY4MTE2KSA/ICgoKDY3NjcyIDw9IGNvZGUpICYmIChjb2RlIDw9IDY3NzAyKSkgfHwgKCgoNjc3MDUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjc3NDIpKSB8fCAoKCg2Nzc1MSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2Nzc1OSkpIHx8ICgoKDY3ODA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDY3ODI2KSkgfHwgKCgoNjc4MjggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjc4MjkpKSB8fCAoKCg2NzgzNSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2Nzg2NykpIHx8ICgoKDY3ODcyIDw9IGNvZGUpICYmIChjb2RlIDw9IDY3ODk3KSkgfHwgKCgoNjc5NjggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjgwMjMpKSB8fCAoKCg2ODAyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODA0NykpIHx8ICgoKDY4MDUwIDw9IGNvZGUpICYmIChjb2RlIDw9IDY4MDk2KSkgfHwgKCg2ODExMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODExNSkpKSkpKSkpKSkpKSA6ICgoKDY4MTE3IDw9IGNvZGUpICYmIChjb2RlIDw9IDY4MTE5KSkgfHwgKCgoNjgxMjEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjgxNDkpKSB8fCAoKCg2ODE2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODE2OCkpIHx8ICgoKDY4MTkyIDw9IGNvZGUpICYmIChjb2RlIDw9IDY4MjIyKSkgfHwgKCgoNjgyMjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjgyNTUpKSB8fCAoKCg2ODI4OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODI5NSkpIHx8ICgoKDY4Mjk3IDw9IGNvZGUpICYmIChjb2RlIDw9IDY4MzI0KSkgfHwgKCgoNjgzMzEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjgzMzUpKSB8fCAoKCg2ODM1MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODQwNSkpIHx8ICgoKDY4NDE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDY4NDM3KSkgfHwgKCg2ODQ0MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODQ2NikpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA2OTQyMykgPyAoKCg2ODQ3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODQ5NykpIHx8ICgoKDY4NTIxIDw9IGNvZGUpICYmIChjb2RlIDw9IDY4NTI3KSkgfHwgKCgoNjg2MDggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjg2ODApKSB8fCAoKCg2ODczNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODc4NikpIHx8ICgoKDY4ODAwIDw9IGNvZGUpICYmIChjb2RlIDw9IDY4ODUwKSkgfHwgKCgoNjg4NTggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjg4OTkpKSB8fCAoKCg2ODkxMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODkyMSkpIHx8ICgoKDY5MjE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDY5MjQ2KSkgfHwgKCgoNjkyNDggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjkyODkpKSB8fCAoKCg2OTI5NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2OTI5NykpIHx8ICgoNjkzNzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjk0MTUpKSkpKSkpKSkpKSkgOiAoKCg2OTQyNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2OTQ0NSkpIHx8ICgoKDY5NDU3IDw9IGNvZGUpICYmIChjb2RlIDw9IDY5NDYwKSkgfHwgKCgoNjk0ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjk1MDUpKSB8fCAoKCg2OTU1MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2OTU3OSkpIHx8ICgoKDY5NjAwIDw9IGNvZGUpICYmIChjb2RlIDw9IDY5NjIyKSkgfHwgKCgoNjk2MzUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjk2ODcpKSB8fCAoKCg2OTcxNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2OTc0MykpIHx8ICgoKDY5NzQ1IDw9IGNvZGUpICYmIChjb2RlIDw9IDY5NzQ2KSkgfHwgKChjb2RlID09PSA2OTc0OSkgfHwgKCgoNjk3NjMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjk4MDcpKSB8fCAoKDY5ODQwIDw9IGNvZGUpICYmIChjb2RlIDw9IDY5ODY0KSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA3MDQwNCkgPyAoKGNvZGUgPCA3MDExMikgPyAoKCg2OTg3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2OTg4MSkpIHx8ICgoKDY5ODkxIDw9IGNvZGUpICYmIChjb2RlIDw9IDY5OTI2KSkgfHwgKCgoNjk5NDIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjk5NTEpKSB8fCAoKGNvZGUgPT09IDY5OTU2KSB8fCAoKGNvZGUgPT09IDY5OTU5KSB8fCAoKCg2OTk2OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDAwMikpIHx8ICgoY29kZSA9PT0gNzAwMDYpIHx8ICgoKDcwMDE5IDw9IGNvZGUpICYmIChjb2RlIDw9IDcwMDY2KSkgfHwgKCgoNzAwODEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzAwODQpKSB8fCAoKCg3MDA5NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDEwNikpIHx8IChjb2RlID09PSA3MDEwOCkpKSkpKSkpKSkpIDogKCgoNzAxMTMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzAxMzIpKSB8fCAoKCg3MDE0NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDE2MSkpIHx8ICgoKDcwMTYzIDw9IGNvZGUpICYmIChjb2RlIDw9IDcwMTg3KSkgfHwgKCgoNzAyMDcgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzAyMDgpKSB8fCAoKCg3MDI3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDI3OCkpIHx8ICgoY29kZSA9PT0gNzAyODApIHx8ICgoKDcwMjgyIDw9IGNvZGUpICYmIChjb2RlIDw9IDcwMjg1KSkgfHwgKCgoNzAyODcgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzAzMDEpKSB8fCAoKCg3MDMwMyA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDMxMikpIHx8ICgoKDcwMzIwIDw9IGNvZGUpICYmIChjb2RlIDw9IDcwMzY2KSkgfHwgKCg3MDM4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDM5MykpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA3MDczNSkgPyAoKCg3MDQwNSA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDQxMikpIHx8ICgoKDcwNDE1IDw9IGNvZGUpICYmIChjb2RlIDw9IDcwNDE2KSkgfHwgKCgoNzA0MTkgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzA0NDApKSB8fCAoKCg3MDQ0MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDQ0OCkpIHx8ICgoKDcwNDUwIDw9IGNvZGUpICYmIChjb2RlIDw9IDcwNDUxKSkgfHwgKCgoNzA0NTMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzA0NTcpKSB8fCAoKGNvZGUgPT09IDcwNDYxKSB8fCAoKGNvZGUgPT09IDcwNDgwKSB8fCAoKCg3MDQ5MyA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDQ5NykpIHx8ICgoKDcwNjU2IDw9IGNvZGUpICYmIChjb2RlIDw9IDcwNzA4KSkgfHwgKCg3MDcyNyA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDczMCkpKSkpKSkpKSkpKSA6ICgoKDcwNzM2IDw9IGNvZGUpICYmIChjb2RlIDw9IDcwNzQ1KSkgfHwgKCgoNzA3NTEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzA3NTMpKSB8fCAoKCg3MDc4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDgzMSkpIHx8ICgoKDcwODUyIDw9IGNvZGUpICYmIChjb2RlIDw9IDcwODUzKSkgfHwgKChjb2RlID09PSA3MDg1NSkgfHwgKCgoNzA4NjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzA4NzMpKSB8fCAoKCg3MTA0MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MTA4NikpIHx8ICgoKDcxMTI4IDw9IGNvZGUpICYmIChjb2RlIDw9IDcxMTMxKSkgfHwgKCgoNzExNjggPD0gY29kZSkgJiYgKGNvZGUgPD0gNzEyMTUpKSB8fCAoKGNvZGUgPT09IDcxMjM2KSB8fCAoKCg3MTI0OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MTI1NykpIHx8ICgoNzEyOTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzEzMzgpKSkpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDExOTg5MykgPyAoKGNvZGUgPCA3MzcyNykgPyAoKGNvZGUgPCA3MjcwMykgPyAoKGNvZGUgPCA3MTk1OSkgPyAoKGNvZGUgPT09IDcxMzUyKSB8fCAoKCg3MTM2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MTM2OSkpIHx8ICgoKDcxNDI0IDw9IGNvZGUpICYmIChjb2RlIDw9IDcxNDUwKSkgfHwgKCgoNzE0NzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzE0ODMpKSB8fCAoKCg3MTQ4OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MTQ5NCkpIHx8ICgoKDcxNjgwIDw9IGNvZGUpICYmIChjb2RlIDw9IDcxNzIzKSkgfHwgKCgoNzE4NDAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzE5MjIpKSB8fCAoKCg3MTkzNSA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MTk0MikpIHx8ICgoY29kZSA9PT0gNzE5NDUpIHx8ICgoKDcxOTQ4IDw9IGNvZGUpICYmIChjb2RlIDw9IDcxOTU1KSkgfHwgKCg3MTk1NyA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MTk1OCkpKSkpKSkpKSkpKSA6ICgoKDcxOTYwIDw9IGNvZGUpICYmIChjb2RlIDw9IDcxOTgzKSkgfHwgKCgoNzIwMTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzIwMjUpKSB8fCAoKCg3MjA5NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MjEwMykpIHx8ICgoKDcyMTA2IDw9IGNvZGUpICYmIChjb2RlIDw9IDcyMTQ0KSkgfHwgKChjb2RlID09PSA3MjE5MikgfHwgKCgoNzIyMDMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzIyNDIpKSB8fCAoKGNvZGUgPT09IDcyMjUwKSB8fCAoKGNvZGUgPT09IDcyMjcyKSB8fCAoKCg3MjI4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MjMyOSkpIHx8ICgoY29kZSA9PT0gNzIzNDkpIHx8ICgoKDcyMzY4IDw9IGNvZGUpICYmIChjb2RlIDw9IDcyNDQwKSkgfHwgKChBMigkZWxtJGNvcmUkQmFzaWNzJG1vZEJ5LCAyLCBjb2RlKSA9PT0gMSkgJiYgKCgoNzE5OTkgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzIwMDEpKSB8fCAoKDcyMTYxIDw9IGNvZGUpICYmIChjb2RlIDw9IDcyMTYzKSkpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDczMDYyKSA/ICgoKDcyNzA0IDw9IGNvZGUpICYmIChjb2RlIDw9IDcyNzEyKSkgfHwgKCgoNzI3MTQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzI3NTApKSB8fCAoKGNvZGUgPT09IDcyNzY4KSB8fCAoKCg3Mjc4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MjgxMikpIHx8ICgoKDcyODE4IDw9IGNvZGUpICYmIChjb2RlIDw9IDcyODQ3KSkgfHwgKCgoNzI5NjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzI5NjYpKSB8fCAoKCg3Mjk2OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3Mjk2OSkpIHx8ICgoKDcyOTcxIDw9IGNvZGUpICYmIChjb2RlIDw9IDczMDA4KSkgfHwgKChjb2RlID09PSA3MzAzMCkgfHwgKCgoNzMwNDAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzMwNDkpKSB8fCAoKDczMDU2IDw9IGNvZGUpICYmIChjb2RlIDw9IDczMDYxKSkpKSkpKSkpKSkpIDogKCgoNzMwNjMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzMwNjQpKSB8fCAoKCg3MzA2NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MzA5NykpIHx8ICgoY29kZSA9PT0gNzMxMTIpIHx8ICgoKDczMTIwIDw9IGNvZGUpICYmIChjb2RlIDw9IDczMTI5KSkgfHwgKCgoNzM0NDAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzM0NTgpKSB8fCAoKGNvZGUgPT09IDczNDc0KSB8fCAoKCg3MzQ3NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MzQ4OCkpIHx8ICgoKDczNDkwIDw9IGNvZGUpICYmIChjb2RlIDw9IDczNTIzKSkgfHwgKCgoNzM1NTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzM1NjEpKSB8fCAoKGNvZGUgPT09IDczNjQ4KSB8fCAoKDczNjY0IDw9IGNvZGUpICYmIChjb2RlIDw9IDczNjg0KSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA5NDA5OCkgPyAoKGNvZGUgPCA5Mjg2MykgPyAoKCg3MzcyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3NDY0OSkpIHx8ICgoKDc0NzUyIDw9IGNvZGUpICYmIChjb2RlIDw9IDc0ODYyKSkgfHwgKCgoNzQ4ODAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzUwNzUpKSB8fCAoKCg3NzcxMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3NzgwOCkpIHx8ICgoKDc3ODI0IDw9IGNvZGUpICYmIChjb2RlIDw9IDc4ODk1KSkgfHwgKCgoNzg5MTMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzg5MTgpKSB8fCAoKCg4Mjk0NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MzUyNikpIHx8ICgoKDkyMTYwIDw9IGNvZGUpICYmIChjb2RlIDw9IDkyNzI4KSkgfHwgKCgoOTI3MzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTI3NjYpKSB8fCAoKCg5Mjc2OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA5Mjc3NykpIHx8ICgoOTI3ODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTI4NjIpKSkpKSkpKSkpKSkgOiAoKCg5Mjg2NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA5Mjg3MykpIHx8ICgoKDkyODgwIDw9IGNvZGUpICYmIChjb2RlIDw9IDkyOTA5KSkgfHwgKCgoOTI5MjggPD0gY29kZSkgJiYgKGNvZGUgPD0gOTI5NzUpKSB8fCAoKCg5Mjk5MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA5Mjk5NSkpIHx8ICgoKDkzMDA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDkzMDE3KSkgfHwgKCgoOTMwMTkgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTMwMjUpKSB8fCAoKCg5MzAyNyA8PSBjb2RlKSAmJiAoY29kZSA8PSA5MzA0NykpIHx8ICgoKDkzMDUzIDw9IGNvZGUpICYmIChjb2RlIDw9IDkzMDcxKSkgfHwgKCgoOTM3NjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTM4NDYpKSB8fCAoKCg5Mzk1MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA5NDAyNikpIHx8IChjb2RlID09PSA5NDAzMikpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDExMDkyNykgPyAoKCg5NDA5OSA8PSBjb2RlKSAmJiAoY29kZSA8PSA5NDExMSkpIHx8ICgoKDk0MTc2IDw9IGNvZGUpICYmIChjb2RlIDw9IDk0MTc3KSkgfHwgKChjb2RlID09PSA5NDE3OSkgfHwgKCgoOTQyMDggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTAwMzQzKSkgfHwgKCgoMTAwMzUyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEwMTU4OSkpIHx8ICgoKDEwMTYzMiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMDE2NDApKSB8fCAoKCgxMTA1NzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTEwNTc5KSkgfHwgKCgoMTEwNTgxIDw9IGNvZGUpICYmIChjb2RlIDw9IDExMDU4NykpIHx8ICgoKDExMDU4OSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTA1OTApKSB8fCAoKCgxMTA1OTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTEwODgyKSkgfHwgKGNvZGUgPT09IDExMDg5OCkpKSkpKSkpKSkpIDogKCgoMTEwOTI4IDw9IGNvZGUpICYmIChjb2RlIDw9IDExMDkzMCkpIHx8ICgoY29kZSA9PT0gMTEwOTMzKSB8fCAoKCgxMTA5NDggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTEwOTUxKSkgfHwgKCgoMTEwOTYwIDw9IGNvZGUpICYmIChjb2RlIDw9IDExMTM1NSkpIHx8ICgoKDExMzY2NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTM3NzApKSB8fCAoKCgxMTM3NzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTEzNzg4KSkgfHwgKCgoMTEzNzkyIDw9IGNvZGUpICYmIChjb2RlIDw9IDExMzgwMCkpIHx8ICgoKDExMzgwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTM4MTcpKSB8fCAoKCgxMTk0ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE5NTA3KSkgfHwgKCgoMTE5NTIwIDw9IGNvZGUpICYmIChjb2RlIDw9IDExOTUzOSkpIHx8ICgoKDExOTY0OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk2NzIpKSB8fCAoKDExOTgwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk4OTIpKSkpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgMTI0OTExKSA/ICgoY29kZSA8IDEyMDU5NykgPyAoKGNvZGUgPCAxMjAwODUpID8gKCgoMTE5ODk0IDw9IGNvZGUpICYmIChjb2RlIDw9IDExOTk2NCkpIHx8ICgoKDExOTk2NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk5NjcpKSB8fCAoKGNvZGUgPT09IDExOTk3MCkgfHwgKCgoMTE5OTczIDw9IGNvZGUpICYmIChjb2RlIDw9IDExOTk3NCkpIHx8ICgoKDExOTk3NyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk5ODApKSB8fCAoKCgxMTk5ODIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE5OTkzKSkgfHwgKChjb2RlID09PSAxMTk5OTUpIHx8ICgoKDExOTk5NyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAwMDMpKSB8fCAoKCgxMjAwMDUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMDY5KSkgfHwgKCgoMTIwMDcxIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDA3NCkpIHx8ICgoMTIwMDc3IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDA4NCkpKSkpKSkpKSkpKSA6ICgoKDEyMDA4NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAwOTIpKSB8fCAoKCgxMjAwOTQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMTIxKSkgfHwgKCgoMTIwMTIzIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDEyNikpIHx8ICgoKDEyMDEyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAxMzIpKSB8fCAoKGNvZGUgPT09IDEyMDEzNCkgfHwgKCgoMTIwMTM4IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDE0NCkpIHx8ICgoKDEyMDE0NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA0ODUpKSB8fCAoKCgxMjA0ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNTEyKSkgfHwgKCgoMTIwNTE0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDUzOCkpIHx8ICgoKDEyMDU0MCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA1NzApKSB8fCAoKDEyMDU3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA1OTYpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgMTIzMTM1KSA/ICgoKDEyMDU5OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA2MjgpKSB8fCAoKCgxMjA2MzAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNjU0KSkgfHwgKCgoMTIwNjU2IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDY4NikpIHx8ICgoKDEyMDY4OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA3MTIpKSB8fCAoKCgxMjA3MTQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNzQ0KSkgfHwgKCgoMTIwNzQ2IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDc3MCkpIHx8ICgoKDEyMDc3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA3NzkpKSB8fCAoKCgxMjA3ODIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwODMxKSkgfHwgKCgoMTIyNjI0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMjY1NCkpIHx8ICgoKDEyMjY2MSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjI2NjYpKSB8fCAoKDEyMjkyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjI5ODkpKSkpKSkpKSkpKSkgOiAoKCgxMjMxMzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIzMTgwKSkgfHwgKCgoMTIzMTkxIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMzE5NykpIHx8ICgoKDEyMzIwMCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjMyMDkpKSB8fCAoKGNvZGUgPT09IDEyMzIxNCkgfHwgKCgoMTIzNTM2IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMzU2NSkpIHx8ICgoKDEyMzU4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjM2MjcpKSB8fCAoKCgxMjM2MzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIzNjQxKSkgfHwgKCgoMTI0MTEyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNDEzOSkpIHx8ICgoKDEyNDE0NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjQxNTMpKSB8fCAoKCgxMjQ4OTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI0OTAyKSkgfHwgKCgoMTI0OTA0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNDkwNykpIHx8ICgoMTI0OTA5IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNDkxMCkpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDEyNjU2MCkgPyAoKGNvZGUgPCAxMjY0NjMpID8gKCgoMTI0OTEyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNDkyNikpIHx8ICgoKDEyNDkyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjUxMjQpKSB8fCAoKCgxMjUxMjcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI1MTM1KSkgfHwgKCgoMTI1MTg0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNTI1MSkpIHx8ICgoY29kZSA9PT0gMTI1MjU5KSB8fCAoKCgxMjUyNjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI1MjczKSkgfHwgKCgoMTI2MDY1IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjEyMykpIHx8ICgoKDEyNjEyNSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjYxMjcpKSB8fCAoKCgxMjYxMjkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2MTMyKSkgfHwgKCgoMTI2MjA5IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjI1MykpIHx8ICgoMTI2MjU1IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjI2OSkpKSkpKSkpKSkpKSA6ICgoKDEyNjQ2NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY0NjcpKSB8fCAoKCgxMjY0NjkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2NDk1KSkgfHwgKCgoMTI2NDk3IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjQ5OCkpIHx8ICgoY29kZSA9PT0gMTI2NTAwKSB8fCAoKGNvZGUgPT09IDEyNjUwMykgfHwgKCgoMTI2NTA1IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjUxNCkpIHx8ICgoKDEyNjUxNiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY1MTkpKSB8fCAoKGNvZGUgPT09IDEyNjUzMCkgfHwgKCgoMTI2NTQxIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjU0MykpIHx8ICgoKDEyNjU0NSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY1NDYpKSB8fCAoKGNvZGUgPT09IDEyNjU0OCkgfHwgKChBMigkZWxtJGNvcmUkQmFzaWNzJG1vZEJ5LCAyLCBjb2RlKSA9PT0gMSkgJiYgKCgoMTI2NTIxIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjUyMykpIHx8ICgoKDEyNjUzNSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY1MzkpKSB8fCAoKDEyNjU1MSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY1NTkpKSkpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDEyNjYzNCkgPyAoKCgxMjY1NjEgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2NTYyKSkgfHwgKChjb2RlID09PSAxMjY1NjQpIHx8ICgoKDEyNjU2NyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY1NzApKSB8fCAoKCgxMjY1NzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2NTc4KSkgfHwgKCgoMTI2NTgwIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjU4MykpIHx8ICgoKDEyNjU4NSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY1ODgpKSB8fCAoKGNvZGUgPT09IDEyNjU5MCkgfHwgKCgoMTI2NTkyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjYwMSkpIHx8ICgoKDEyNjYwMyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY2MTkpKSB8fCAoKCgxMjY2MjUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2NjI3KSkgfHwgKCgxMjY2MjkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2NjMzKSkpKSkpKSkpKSkpIDogKCgoMTI2NjM1IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjY1MSkpIHx8ICgoKDEyNzIzMiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjcyNDQpKSB8fCAoKCgxMzAwMzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTMwMDQxKSkgfHwgKCgoMTMxMDcyIDw9IGNvZGUpICYmIChjb2RlIDw9IDE3Mzc5MSkpIHx8ICgoKDE3MzgyNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxNzc5NzcpKSB8fCAoKCgxNzc5ODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTc4MjA1KSkgfHwgKCgoMTc4MjA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDE4Mzk2OSkpIHx8ICgoKDE4Mzk4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxOTE0NTYpKSB8fCAoKCgxOTE0NzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTkyMDkzKSkgfHwgKCgoMTk0NTYwIDw9IGNvZGUpICYmIChjb2RlIDw9IDE5NTEwMSkpIHx8ICgoKDE5NjYwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyMDE1NDYpKSB8fCAoKDIwMTU1MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAyMDU3NDMpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSk7Cn07CnZhciAkZWxtJGNvcmUkU3RyaW5nJHRvVXBwZXIgPSBfU3RyaW5nX3RvVXBwZXI7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSR1bmljb2RlSXNMb3dlckZhc3QgPSBmdW5jdGlvbiAoYykgewoJdmFyIGNvZGUgPSAkZWxtJGNvcmUkQ2hhciR0b0NvZGUoYyk7Cgl2YXIgY1N0cmluZyA9ICRlbG0kY29yZSRTdHJpbmckZnJvbUNoYXIoYyk7CglyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkY2hhckNvZGVJc0xvd2VyKGNvZGUpIHx8ICgoX1V0aWxzX2VxKAoJCSRlbG0kY29yZSRTdHJpbmckdG9Mb3dlcihjU3RyaW5nKSwKCQljU3RyaW5nICsgJycpICYmICghX1V0aWxzX2VxKAoJCSRlbG0kY29yZSRTdHJpbmckdG9VcHBlcihjU3RyaW5nKSwKCQljU3RyaW5nICsgJycpKSkgPyAoKGNvZGUgPD0gODM2KSB8fCAoKCg4MzggPD0gY29kZSkgJiYgKGNvZGUgPD0gODU1OSkpIHx8ICgoKDg1NzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTQyMykpIHx8ICgoOTQ1MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA5ODMwNDApKSkpKSA6ICgoY29kZSA8IDQzMDAxKSA/ICgoY29kZSA8IDg0NTcpID8gKChjb2RlIDwgNTkwKSA/ICgoKDMxMSA8PSBjb2RlKSAmJiAoY29kZSA8PSAzMTIpKSB8fCAoKCgzOTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzk3KSkgfHwgKCgoNDA5IDw9IGNvZGUpICYmIChjb2RlIDw9IDQxMSkpIHx8ICgoKDQyNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MjcpKSB8fCAoKCg0NDEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDQyKSkgfHwgKCgoNDQ1IDw9IGNvZGUpICYmIChjb2RlIDw9IDQ0NykpIHx8ICgoY29kZSA9PT0gNTQ1KSB8fCAoKDU2MyA8PSBjb2RlKSAmJiAoY29kZSA8PSA1NjkpKSkpKSkpKSkgOiAoKCg1OTEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjU5KSkgfHwgKCgoNjYxIDw9IGNvZGUpICYmIChjb2RlIDw9IDY4NykpIHx8ICgoKDEwMTkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTAyMCkpIHx8ICgoKDEzNzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTQxNikpIHx8ICgoKDc0MjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzQ2NykpIHx8ICgoKDc1MzEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzU0MykpIHx8ICgoKDc1NDUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzU3OCkpIHx8ICgoKDc4MjkgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzgzNykpIHx8IChjb2RlID09PSA3ODM5KSkpKSkpKSkpKSA6ICgoY29kZSA8IDExMzc2KSA/ICgoY29kZSA9PT0gODQ1OCkgfHwgKCgoODQ2MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA4NDYzKSkgfHwgKChjb2RlID09PSA4NDY3KSB8fCAoKGNvZGUgPT09IDg0OTUpIHx8ICgoY29kZSA9PT0gODUwMCkgfHwgKChjb2RlID09PSA4NTA1KSB8fCAoKCg4NTA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDg1MDkpKSB8fCAoKDg1MTggPD0gY29kZSkgJiYgKGNvZGUgPD0gODUyMSkpKSkpKSkpKSA6ICgoY29kZSA9PT0gMTEzNzcpIHx8ICgoKDExMzc5IDw9IGNvZGUpICYmIChjb2RlIDw9IDExMzgwKSkgfHwgKCgoMTEzODIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTEzODcpKSB8fCAoKCgxMTQ5MSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTQ5MikpIHx8ICgoKDQyNzk5IDw9IGNvZGUpICYmIChjb2RlIDw9IDQyODAxKSkgfHwgKCgoNDI4NjUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDI4NzIpKSB8fCAoKGNvZGUgPT09IDQyODk0KSB8fCAoKCg0Mjg5OSA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MjkwMSkpIHx8ICgoY29kZSA9PT0gNDI5MjcpIHx8ICgoQTIoJGVsbSRjb3JlJEJhc2ljcyRtb2RCeSwgMiwgY29kZSkgPT09IDEpICYmICgoNDI5NjMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDI5NjUpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDEyMDM1MykgPyAoKGNvZGUgPCAxMTk5OTQpID8gKChjb2RlID09PSA0MzAwMikgfHwgKCgoNDM4MjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM4NjYpKSB8fCAoKCg0Mzg3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mzg4MCkpIHx8ICgoKDExOTgzNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk4NTkpKSB8fCAoKCgxMTk4ODYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE5ODkyKSkgfHwgKCgoMTE5ODk0IDw9IGNvZGUpICYmIChjb2RlIDw9IDExOTkxMSkpIHx8ICgoKDExOTkzOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk5NjMpKSB8fCAoKDExOTk5MCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk5OTMpKSkpKSkpKSkgOiAoKGNvZGUgPT09IDExOTk5NSkgfHwgKCgoMTE5OTk3IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDAwMykpIHx8ICgoKDEyMDAwNSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAwMTUpKSB8fCAoKCgxMjAwNDIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMDY3KSkgfHwgKCgoMTIwMDk0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDExOSkpIHx8ICgoKDEyMDE0NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAxNzEpKSB8fCAoKCgxMjAxOTggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMjIzKSkgfHwgKCgoMTIwMjUwIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDI3NSkpIHx8ICgoMTIwMzAyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDMyNykpKSkpKSkpKSkpIDogKChjb2RlIDwgMTIwNjU1KSA/ICgoKDEyMDM1NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAzNzkpKSB8fCAoKCgxMjA0MDYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNDMxKSkgfHwgKCgoMTIwNDU4IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDQ4NSkpIHx8ICgoKDEyMDUxNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA1MzgpKSB8fCAoKCgxMjA1NDAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNTQ1KSkgfHwgKCgoMTIwNTcyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDU5NikpIHx8ICgoKDEyMDU5OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA2MDMpKSB8fCAoKDEyMDYzMCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA2NTQpKSkpKSkpKSkgOiAoKCgxMjA2NTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNjYxKSkgfHwgKCgoMTIwNjg4IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDcxMikpIHx8ICgoKDEyMDcxNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA3MTkpKSB8fCAoKCgxMjA3NDYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNzcwKSkgfHwgKCgoMTIwNzcyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDc3NykpIHx8ICgoY29kZSA9PT0gMTIwNzc5KSB8fCAoKCgxMjI2MjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIyNjMzKSkgfHwgKCgoMTIyNjM1IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMjY1NCkpIHx8ICgoMTIyNjYxIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMjY2NikpKSkpKSkpKSkpKSkpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUgPSBBNCgkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZVZhbGlkYXRlTWFwV2l0aFJhbmdlV2l0aG91dExpbmVicmVhaywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSR1bmljb2RlSXNMb3dlckZhc3QsICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJHVuaWNvZGVJc0FscGhhTnVtT3JVbmRlcnNjb3JlRmFzdCwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGlzTm90UmVzZXJ2ZWQpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRHTFNMRXhwcmVzc2lvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdHTFNMRXhwcmVzc2lvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFVudGlsSGVscCA9IEY3KAoJZnVuY3Rpb24gKGNvbW1pdHRlZFNvRmFyLCBlbmRQYXJzZXIsIGVsZW1lbnQsIHNvRmFyLCByZWR1Y2UsIGZvbGRlZFRvUmVzLCBzMCkgewoJCWxvb3BVbnRpbEhlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJdmFyIHBhcnNlRW5kID0gZW5kUGFyc2VyLmE7CgkJCXZhciBwYXJzZUVsZW1lbnQgPSBlbGVtZW50LmE7CgkJCXZhciBfdjAgPSBwYXJzZUVuZChzMCk7CgkJCWlmIChfdjAuJCA9PT0gJ0dvb2QnKSB7CgkJCQl2YXIgczEgPSBfdjAuYjsKCQkJCXJldHVybiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCWZvbGRlZFRvUmVzKHNvRmFyKSwKCQkJCQlzMSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgZW5kQ29tbWl0dGVkID0gX3YwLmE7CgkJCQl2YXIgZW5kWCA9IF92MC5iOwoJCQkJaWYgKGVuZENvbW1pdHRlZCkgewoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIGVuZFgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YxID0gcGFyc2VFbGVtZW50KHMwKTsKCQkJCQlpZiAoX3YxLiQgPT09ICdHb29kJykgewoJCQkJCQl2YXIgZWxlbWVudFJlc3VsdCA9IF92MS5hOwoJCQkJCQl2YXIgczEgPSBfdjEuYjsKCQkJCQkJdmFyICR0ZW1wJGNvbW1pdHRlZFNvRmFyID0gdHJ1ZSwKCQkJCQkJCSR0ZW1wJGVuZFBhcnNlciA9IGVuZFBhcnNlciwKCQkJCQkJCSR0ZW1wJGVsZW1lbnQgPSBlbGVtZW50LAoJCQkJCQkJJHRlbXAkc29GYXIgPSBBMihyZWR1Y2UsIGVsZW1lbnRSZXN1bHQsIHNvRmFyKSwKCQkJCQkJCSR0ZW1wJHJlZHVjZSA9IHJlZHVjZSwKCQkJCQkJCSR0ZW1wJGZvbGRlZFRvUmVzID0gZm9sZGVkVG9SZXMsCgkJCQkJCQkkdGVtcCRzMCA9IHMxOwoJCQkJCQljb21taXR0ZWRTb0ZhciA9ICR0ZW1wJGNvbW1pdHRlZFNvRmFyOwoJCQkJCQllbmRQYXJzZXIgPSAkdGVtcCRlbmRQYXJzZXI7CgkJCQkJCWVsZW1lbnQgPSAkdGVtcCRlbGVtZW50OwoJCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCQlyZWR1Y2UgPSAkdGVtcCRyZWR1Y2U7CgkJCQkJCWZvbGRlZFRvUmVzID0gJHRlbXAkZm9sZGVkVG9SZXM7CgkJCQkJCXMwID0gJHRlbXAkczA7CgkJCQkJCWNvbnRpbnVlIGxvb3BVbnRpbEhlbHA7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGVsZW1lbnRDb21taXR0ZWQgPSBfdjEuYTsKCQkJCQkJdmFyIHggPSBfdjEuYjsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkU29GYXIgfHwgZWxlbWVudENvbW1pdHRlZCwgeCk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wVW50aWwgPSBGNSgKCWZ1bmN0aW9uIChlbmRQYXJzZXIsIGVsZW1lbnQsIGluaXRpYWxGb2xkZWQsIHJlZHVjZSwgZm9sZGVkVG9SZXMpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJcmV0dXJuIEE3KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxvb3BVbnRpbEhlbHAsIGZhbHNlLCBlbmRQYXJzZXIsIGVsZW1lbnQsIGluaXRpYWxGb2xkZWQsIHJlZHVjZSwgZm9sZGVkVG9SZXMsIHMpOwoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwV2l0aFJhbmdlID0gRjIoCglmdW5jdGlvbiAoY29tYmluZVN0YXJ0QW5kUmVzdWx0LCBfdjApIHsKCQl2YXIgcGFyc2UgPSBfdjAuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjEgPSBwYXJzZShzMCk7CgkJCQlpZiAoX3YxLiQgPT09ICdHb29kJykgewoJCQkJCXZhciBhID0gX3YxLmE7CgkJCQkJdmFyIHMxID0gX3YxLmI7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQlBMigKCQkJCQkJCWNvbWJpbmVTdGFydEFuZFJlc3VsdCwKCQkJCQkJCXsKCQkJCQkJCQllbmQ6IHtjb2x1bW46IHMxLmNvbCwgcm93OiBzMS5yb3d9LAoJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzMC5jb2wsIHJvdzogczAucm93fQoJCQkJCQkJfSwKCQkJCQkJCWEpLAoJCQkJCQlzMSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjEuYTsKCQkJCQl2YXIgeCA9IF92MS5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGdsc2xFeHByZXNzaW9uQWZ0ZXJPcGVuaW5nU3F1YXJlQnJhY2tldCA9IEEyKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCSdnbHNsfCcsCglBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXBXaXRoUmFuZ2UsCgkJRjIoCgkJCWZ1bmN0aW9uIChyYW5nZSwgcykgewoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQkJc3ludGF4OiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQl7CgkJCQkJCQllbmQ6IHtjb2x1bW46IHJhbmdlLmVuZC5jb2x1bW4gKyAyLCByb3c6IHJhbmdlLmVuZC5yb3d9LAoJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHJhbmdlLnN0YXJ0LmNvbHVtbiAtIDYsIHJvdzogcmFuZ2Uuc3RhcnQucm93fQoJCQkJCQl9LAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJEdMU0xFeHByZXNzaW9uKHMpKQoJCQkJfTsKCQkJfSksCgkJQTUoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxvb3BVbnRpbCwKCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLCAnfF0nLCBfVXRpbHNfVHVwbGUwKSwKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wsICd8JywgJ3wnKSwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHdoaWxlKAoJCQkJCWZ1bmN0aW9uIChjKSB7CgkJCQkJCXJldHVybiAhX1V0aWxzX2VxKAoJCQkJCQkJYywKCQkJCQkJCV9VdGlsc19jaHIoJ3wnKSk7CgkJCQkJfSkpLAoJCQknJywKCQkJRjIoCgkJCQlmdW5jdGlvbiAoZXh0ZW5zaW9uLCBzb0ZhcikgewoJCQkJCXJldHVybiBzb0ZhciArIChleHRlbnNpb24gKyAnJyk7CgkJCQl9KSwKCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSkpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0tleXdvcmQgPSBGMygKCWZ1bmN0aW9uIChhLCBiLCBjKSB7CgkJcmV0dXJuIHskOiAnRXhwZWN0aW5nS2V5d29yZCcsIGE6IGEsIGI6IGIsIGM6IGN9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRpc0xhdGluQWxwaGFOdW1PclVuZGVyc2NvcmVGYXN0ID0gZnVuY3Rpb24gKGMpIHsKCXZhciBjb2RlID0gJGVsbSRjb3JlJENoYXIkdG9Db2RlKGMpOwoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGNoYXJDb2RlSXNMb3dlcihjb2RlKSB8fCAoJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkY2hhckNvZGVJc1VwcGVyKGNvZGUpIHx8ICgkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRjaGFyQ29kZUlzRGlnaXQoY29kZSkgfHwgKGNvZGUgPT09IDk1KSkpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaXNTdWJDaGFyQWxwaGFOdW1PclVuZGVyc2NvcmUgPSBGMigKCWZ1bmN0aW9uIChvZmZzZXQsIHN0cmluZykgewoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRhbnksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGlzTGF0aW5BbHBoYU51bU9yVW5kZXJzY29yZUZhc3QsCgkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMSwgc3RyaW5nKSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmQgPSBGMigKCWZ1bmN0aW9uIChrd2QsIHJlcykgewoJCXZhciBrd2RMZW5ndGggPSAkZWxtJGNvcmUkU3RyaW5nJGxlbmd0aChrd2QpOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQl2YXIgbmV3T2Zmc2V0ID0gcy5vZmZzZXQgKyBrd2RMZW5ndGg7CgkJCQlyZXR1cm4gKF9VdGlsc19lcSgKCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzLm9mZnNldCwgbmV3T2Zmc2V0LCBzLnNyYyksCgkJCQkJa3dkICsgJycpICYmICghQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaXNTdWJDaGFyQWxwaGFOdW1PclVuZGVyc2NvcmUsIG5ld09mZnNldCwgcy5zcmMpKSkgPyBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCXJlcywKCQkJCQl7Y29sOiBzLmNvbCArIGt3ZExlbmd0aCwgaW5kZW50OiBzLmluZGVudCwgb2Zmc2V0OiBuZXdPZmZzZXQsIHJvdzogcy5yb3csIHNyYzogcy5zcmN9KSA6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQlmYWxzZSwKCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdLZXl3b3JkLCBzLnJvdywgcy5jb2wsIGt3ZCkpOwoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGluVG9rZW4gPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkLCAnaW4nLCBfVXRpbHNfVHVwbGUwKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5ID0gRjIoCglmdW5jdGlvbiAoa3dkLCBfdjApIHsKCQl2YXIgcGFyc2VOZXh0ID0gX3YwLmE7CgkJdmFyIGt3ZExlbmd0aCA9ICRlbG0kY29yZSRTdHJpbmckbGVuZ3RoKGt3ZCk7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBuZXdPZmZzZXQgPSBzLm9mZnNldCArIGt3ZExlbmd0aDsKCQkJCXJldHVybiAoX1V0aWxzX2VxKAoJCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIHMub2Zmc2V0LCBuZXdPZmZzZXQsIHMuc3JjKSwKCQkJCQlrd2QgKyAnJykgJiYgKCFBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpc1N1YkNoYXJBbHBoYU51bU9yVW5kZXJzY29yZSwgbmV3T2Zmc2V0LCBzLnNyYykpKSA/ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHBTdGVwQ29tbWl0KAoJCQkJCXBhcnNlTmV4dCgKCQkJCQkJe2NvbDogcy5jb2wgKyBrd2RMZW5ndGgsIGluZGVudDogcy5pbmRlbnQsIG9mZnNldDogbmV3T2Zmc2V0LCByb3c6IHMucm93LCBzcmM6IHMuc3JjfSkpIDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCWZhbHNlLAoJCQkJCUEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0tleXdvcmQsIHMucm93LCBzLmNvbCwga3dkKSk7CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyID0gRjMoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEpIHsKCQl2YXIgcGFyc2VBID0gX3YwLmE7CgkJdmFyIHBhcnNlQiA9IF92MS5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92MiA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3YyLiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92Mi5hOwoJCQkJCXZhciB4ID0gX3YyLmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjIuYTsKCQkJCQl2YXIgczEgPSBfdjIuYjsKCQkJCQl2YXIgX3YzID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3YzLiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3YzLmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3YzLmE7CgkJCQkJCXZhciBzMiA9IF92My5iOwoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJQTIoZnVuYywgYSwgYiksCgkJCQkJCQlzMik7CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29sdW1uSW5kZW50QW5kVGhlbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQlmdW5jdGlvbiAocykgewoJCQl2YXIgX3YwID0gQTIoY2FsbGJhY2ssIHMuY29sLCBzLmluZGVudCk7CgkJCXZhciBwYXJzZSA9IF92MC5hOwoJCQlyZXR1cm4gcGFyc2Uocyk7CgkJfSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdDdXN0b20gPSBGMygKCWZ1bmN0aW9uIChhLCBiLCBjKSB7CgkJcmV0dXJuIHskOiAnRXhwZWN0aW5nQ3VzdG9tJywgYTogYSwgYjogYiwgYzogY307Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHByb2JsZW0gPSBmdW5jdGlvbiAobXNnKSB7CglyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCWZ1bmN0aW9uIChzKSB7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCWZhbHNlLAoJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nQ3VzdG9tLCBzLnJvdywgcy5jb2wsIG1zZykpOwoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHByb2JsZW1Ub3BJbmRlbnRhdGlvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHByb2JsZW0oJ211c3QgYmUgb24gdG9wIGluZGVudGF0aW9uJyk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb25Ub3BJbmRlbnRhdGlvbkZvbGxvd2VkQnkgPSBmdW5jdGlvbiAobmV4dFBhcnNlcikgewoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbHVtbkluZGVudEFuZFRoZW4oCgkJRjIoCgkJCWZ1bmN0aW9uIChjb2x1bW4sIGluZGVudCkgewoJCQkJcmV0dXJuICghKGNvbHVtbiAtIGluZGVudCkpID8gbmV4dFBhcnNlciA6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRwcm9ibGVtVG9wSW5kZW50YXRpb247CgkJCX0pKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdoaXRlc3BhY2VIZWxwID0gRjUoCglmdW5jdGlvbiAob2Zmc2V0LCByb3csIGNvbCwgc3JjLCBpbmRlbnQpIHsKCQlza2lwV2hpbGVXaGl0ZXNwYWNlSGVscDoKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgX3YwID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQlzd2l0Y2ggKF92MCkgewoJCQkJY2FzZSAnICc6CgkJCQkJdmFyICR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHJvdyA9IHJvdywKCQkJCQkJJHRlbXAkY29sID0gY29sICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjLAoJCQkJCQkkdGVtcCRpbmRlbnQgPSBpbmRlbnQ7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXJvdyA9ICR0ZW1wJHJvdzsKCQkJCQljb2wgPSAkdGVtcCRjb2w7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWluZGVudCA9ICR0ZW1wJGluZGVudDsKCQkJCQljb250aW51ZSBza2lwV2hpbGVXaGl0ZXNwYWNlSGVscDsKCQkJCWNhc2UgJ1xuJzoKCQkJCQl2YXIgJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkcm93ID0gcm93ICsgMSwKCQkJCQkJJHRlbXAkY29sID0gMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjLAoJCQkJCQkkdGVtcCRpbmRlbnQgPSBpbmRlbnQ7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXJvdyA9ICR0ZW1wJHJvdzsKCQkJCQljb2wgPSAkdGVtcCRjb2w7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWluZGVudCA9ICR0ZW1wJGluZGVudDsKCQkJCQljb250aW51ZSBza2lwV2hpbGVXaGl0ZXNwYWNlSGVscDsKCQkJCWNhc2UgJ1x1MDAwRCc6CgkJCQkJdmFyICR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHJvdyA9IHJvdywKCQkJCQkJJHRlbXAkY29sID0gY29sICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjLAoJCQkJCQkkdGVtcCRpbmRlbnQgPSBpbmRlbnQ7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXJvdyA9ICR0ZW1wJHJvdzsKCQkJCQljb2wgPSAkdGVtcCRjb2w7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWluZGVudCA9ICR0ZW1wJGluZGVudDsKCQkJCQljb250aW51ZSBza2lwV2hpbGVXaGl0ZXNwYWNlSGVscDsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIHtjb2w6IGNvbCwgaW5kZW50OiBpbmRlbnQsIG9mZnNldDogb2Zmc2V0LCByb3c6IHJvdywgc3JjOiBzcmN9OwoJCQl9CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U2tpcFdoaWxlV2hpdGVzcGFjZSA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBwYXJzZUJlZm9yZSA9IF92MC5hOwoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQlmdW5jdGlvbiAoczApIHsKCQkJdmFyIF92MSA9IHBhcnNlQmVmb3JlKHMwKTsKCQkJaWYgKF92MS4kID09PSAnR29vZCcpIHsKCQkJCXZhciByZXMgPSBfdjEuYTsKCQkJCXZhciBzMSA9IF92MS5iOwoJCQkJdmFyIHMyID0gQTUoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcFdoaWxlV2hpdGVzcGFjZUhlbHAsIHMxLm9mZnNldCwgczEucm93LCBzMS5jb2wsIHMxLnNyYywgczEuaW5kZW50KTsKCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLCByZXMsIHMyKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBiYWQgPSBfdjE7CgkJCQlyZXR1cm4gYmFkOwoJCQl9CgkJfSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyT3JTdWNjZWVkID0gRjQoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIGZhbGxiYWNrKSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjIgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92Mi4kID09PSAnQmFkJykgewoJCQkJCXZhciBjMSA9IF92Mi5hOwoJCQkJCXZhciB4ID0gX3YyLmI7CgkJCQkJcmV0dXJuIGMxID8gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KSA6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsIGZhbGxiYWNrLCBzMCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3YyLmE7CgkJCQkJdmFyIHMxID0gX3YyLmI7CgkJCQkJdmFyIF92MyA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92My4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92My5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92My5hOwoJCQkJCQl2YXIgczIgPSBfdjMuYjsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCUEyKGZ1bmMsIGEsIGIpLAoJCQkJCQkJczIpOwoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9mZnNldFNvdXJjZUFuZFRoZW4gPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJZnVuY3Rpb24gKHMpIHsKCQkJdmFyIF92MCA9IEEyKGNhbGxiYWNrLCBzLm9mZnNldCwgcy5zcmMpOwoJCQl2YXIgcGFyc2UgPSBfdjAuYTsKCQkJcmV0dXJuIHBhcnNlKHMpOwoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQ29tbWVudHMkcHJvYmxlbVVuZXhwZWN0ZWREb2N1bWVudGF0aW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkcHJvYmxlbSgndW5leHBlY3RlZCBkb2N1bWVudGF0aW9uIGNvbW1lbnQnKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJENvbW1lbnRzJG11bHRpbGluZUNvbW1lbnQgPSAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvZmZzZXRTb3VyY2VBbmRUaGVuKAoJRjIoCgkJZnVuY3Rpb24gKG9mZnNldCwgc291cmNlKSB7CgkJCXZhciBfdjAgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQgKyAyLCBvZmZzZXQgKyAzLCBzb3VyY2UpOwoJCQlpZiAoX3YwID09PSAnfCcpIHsKCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRDb21tZW50cyRwcm9ibGVtVW5leHBlY3RlZERvY3VtZW50YXRpb247CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQ29tbWVudHMkbXVsdGlMaW5lQ29tbWVudE5vQ2hlY2s7CgkJCX0KCQl9KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRMZWFmID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0xlYWYnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkb25lID0gZnVuY3Rpb24gKG9ubHlFbGVtZW50KSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkTGVhZiwgb25seUVsZW1lbnQsIF9VdGlsc19UdXBsZTApOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFdoaWxlU3VjY2VlZHNIZWxwID0gRjUoCglmdW5jdGlvbiAoZWxlbWVudCwgc29GYXIsIHJlZHVjZSwgZm9sZGVkVG9SZXMsIHMwKSB7CgkJbG9vcFdoaWxlU3VjY2VlZHNIZWxwOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBwYXJzZUVsZW1lbnQgPSBlbGVtZW50LmE7CgkJCXZhciBfdjAgPSBwYXJzZUVsZW1lbnQoczApOwoJCQlpZiAoX3YwLiQgPT09ICdHb29kJykgewoJCQkJdmFyIGVsZW1lbnRSZXN1bHQgPSBfdjAuYTsKCQkJCXZhciBzMSA9IF92MC5iOwoJCQkJdmFyICR0ZW1wJGVsZW1lbnQgPSBlbGVtZW50LAoJCQkJCSR0ZW1wJHNvRmFyID0gQTIocmVkdWNlLCBlbGVtZW50UmVzdWx0LCBzb0ZhciksCgkJCQkJJHRlbXAkcmVkdWNlID0gcmVkdWNlLAoJCQkJCSR0ZW1wJGZvbGRlZFRvUmVzID0gZm9sZGVkVG9SZXMsCgkJCQkJJHRlbXAkczAgPSBzMTsKCQkJCWVsZW1lbnQgPSAkdGVtcCRlbGVtZW50OwoJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCXJlZHVjZSA9ICR0ZW1wJHJlZHVjZTsKCQkJCWZvbGRlZFRvUmVzID0gJHRlbXAkZm9sZGVkVG9SZXM7CgkJCQlzMCA9ICR0ZW1wJHMwOwoJCQkJY29udGludWUgbG9vcFdoaWxlU3VjY2VlZHNIZWxwOwoJCQl9IGVsc2UgewoJCQkJdmFyIGVsZW1lbnRDb21taXR0ZWQgPSBfdjAuYTsKCQkJCXZhciB4ID0gX3YwLmI7CgkJCQlyZXR1cm4gZWxlbWVudENvbW1pdHRlZCA/IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCkgOiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCWZvbGRlZFRvUmVzKHNvRmFyKSwKCQkJCQlzMCk7CgkJCX0KCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxvb3BXaGlsZVN1Y2NlZWRzID0gRjQoCglmdW5jdGlvbiAoZWxlbWVudCwgaW5pdGlhbEZvbGRlZCwgcmVkdWNlLCBmb2xkZWRUb1JlcykgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQlyZXR1cm4gQTUoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFdoaWxlU3VjY2VlZHNIZWxwLCBlbGVtZW50LCBpbml0aWFsRm9sZGVkLCByZWR1Y2UsIGZvbGRlZFRvUmVzLCBzKTsKCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUb0ZpbGxlZCA9IEYyKAoJZnVuY3Rpb24gKHJpZ2h0TGlrZWx5RmlsbGVkLCBsZWZ0KSB7CgkJaWYgKGxlZnQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChyaWdodExpa2VseUZpbGxlZCk7CgkJfSBlbHNlIHsKCQkJdmFyIGxlZnRMaWtlbHlGaWxsZWQgPSBsZWZ0LmE7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJEJyYW5jaDIsIGxlZnRMaWtlbHlGaWxsZWQsIHJpZ2h0TGlrZWx5RmlsbGVkKSk7CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aGlsZU1hcFdpdGhSYW5nZSA9IEYyKAoJZnVuY3Rpb24gKGlzR29vZCwgcmFuZ2VBbmRDb25zdW1lZFN0cmluZ1RvUmVzKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgczEgPSBBNigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwV2hpbGVIZWxwLCBpc0dvb2QsIHMwLm9mZnNldCwgczAucm93LCBzMC5jb2wsIHMwLnNyYywgczAuaW5kZW50KTsKCQkJCXJldHVybiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCUEyKAoJCQkJCQlyYW5nZUFuZENvbnN1bWVkU3RyaW5nVG9SZXMsCgkJCQkJCXsKCQkJCQkJCWVuZDoge2NvbHVtbjogczEuY29sLCByb3c6IHMxLnJvd30sCgkJCQkJCQlzdGFydDoge2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30KCQkJCQkJfSwKCQkJCQkJQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgczAub2Zmc2V0LCBzMS5vZmZzZXQsIHMwLnNyYykpLAoJCQkJCXMxKTsKCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJENvbW1lbnRzJHNpbmdsZUxpbmVDb21tZW50ID0gQTIoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJJy0tJywKCUEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHdoaWxlTWFwV2l0aFJhbmdlLAoJCWZ1bmN0aW9uIChjKSB7CgkJCXN3aXRjaCAoYy52YWx1ZU9mKCkpIHsKCQkJCWNhc2UgJ1x1MDAwRCc6CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJY2FzZSAnXG4nOgoJCQkJCXJldHVybiBmYWxzZTsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICEkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRpc1V0ZjE2U3Vycm9nYXRlKGMpOwoJCQl9CgkJfSwKCQlGMigKCQkJZnVuY3Rpb24gKHJhbmdlLCBjb250ZW50KSB7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXsKCQkJCQkJZW5kOiB7Y29sdW1uOiByYW5nZS5lbmQuY29sdW1uLCByb3c6IHJhbmdlLnN0YXJ0LnJvd30sCgkJCQkJCXN0YXJ0OiB7Y29sdW1uOiByYW5nZS5zdGFydC5jb2x1bW4gLSAyLCByb3c6IHJhbmdlLnN0YXJ0LnJvd30KCQkJCQl9LAoJCQkJCSctLScgKyBjb250ZW50KTsKCQkJfSkpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCR3aGl0ZXNwYWNlQW5kQ29tbWVudHNPckVtcHR5TG9vcCA9IEE0KAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFdoaWxlU3VjY2VlZHMsCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U2tpcFdoaWxlV2hpdGVzcGFjZSgKCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJENvbW1lbnRzJHNpbmdsZUxpbmVDb21tZW50LCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRDb21tZW50cyRtdWx0aWxpbmVDb21tZW50KSksCgkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCUYyKAoJCWZ1bmN0aW9uIChyaWdodCwgc29GYXIpIHsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvRmlsbGVkLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkb25lKHJpZ2h0KSwKCQkJCXNvRmFyKTsKCQl9KSwKCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGZyb21NdWx0aWxpbmVDb21tZW50Tm9kZU9yRW1wdHlPblByb2JsZW0gPSBBNCgKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJPclN1Y2NlZWQsCglGMigKCQlmdW5jdGlvbiAoY29tbWVudCwgY29tbWVudHNBZnRlcikgewoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRmaWxsZWRQcmVwZW5kVG8sCgkJCQljb21tZW50c0FmdGVyLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkb25lKGNvbW1lbnQpKTsKCQl9KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGZvbGxvd2VkQnlTa2lwV2hpbGVXaGl0ZXNwYWNlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJENvbW1lbnRzJG11bHRpbGluZUNvbW1lbnQpLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHdoaXRlc3BhY2VBbmRDb21tZW50c09yRW1wdHlMb29wLAoJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGZyb21TaW5nbGVMaW5lQ29tbWVudE5vZGUgPSBBMygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCglGMigKCQlmdW5jdGlvbiAoY29udGVudCwgY29tbWVudHNBZnRlcikgewoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRmaWxsZWRQcmVwZW5kVG8sCgkJCQljb21tZW50c0FmdGVyLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkb25lKGNvbnRlbnQpKTsKCQl9KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGZvbGxvd2VkQnlTa2lwV2hpbGVXaGl0ZXNwYWNlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJENvbW1lbnRzJHNpbmdsZUxpbmVDb21tZW50KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCR3aGl0ZXNwYWNlQW5kQ29tbWVudHNPckVtcHR5TG9vcCk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvZmZzZXRTb3VyY2VBbmRUaGVuT3JTdWNjZWVkID0gRjIoCglmdW5jdGlvbiAoY2FsbGJhY2ssIGZhbGxiYWNrKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBfdjAgPSBBMihjYWxsYmFjaywgcy5vZmZzZXQsIHMuc3JjKTsKCQkJCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsIGZhbGxiYWNrLCBzKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHBhcnNlID0gX3YwLmEuYTsKCQkJCQlyZXR1cm4gcGFyc2Uocyk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwV2hpbGVXaGl0ZXNwYWNlRm9sbG93ZWRCeSA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBwYXJzZU5leHQgPSBfdjAuYTsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJZnVuY3Rpb24gKHMwKSB7CgkJCXZhciBzMSA9IEE1KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdoaXRlc3BhY2VIZWxwLCBzMC5vZmZzZXQsIHMwLnJvdywgczAuY29sLCBzMC5zcmMsIHMwLmluZGVudCk7CgkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRwU3RlcENvbW1pdCgKCQkJCXBhcnNlTmV4dChzMSkpOwoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHdoaXRlc3BhY2VBbmRDb21tZW50c09yRW1wdHkgPSAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwV2hpbGVXaGl0ZXNwYWNlRm9sbG93ZWRCeSgKCUEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9mZnNldFNvdXJjZUFuZFRoZW5PclN1Y2NlZWQsCgkJRjIoCgkJCWZ1bmN0aW9uIChvZmZzZXQsIHNvdXJjZSkgewoJCQkJdmFyIF92MCA9IEEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMiwgc291cmNlKTsKCQkJCXN3aXRjaCAoX3YwKSB7CgkJCQkJY2FzZSAnLS0nOgoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGZyb21TaW5nbGVMaW5lQ29tbWVudE5vZGUpOwoJCQkJCWNhc2UgJ3stJzoKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRmcm9tTXVsdGlsaW5lQ29tbWVudE5vZGVPckVtcHR5T25Qcm9ibGVtKTsKCQkJCQlkZWZhdWx0OgoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCR3aGl0ZXNwYWNlQW5kQ29tbWVudHNPckVtcHR5Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGxheW91dFN0cmljdEZvbGxvd2VkQnkgPSBmdW5jdGlvbiAobmV4dFBhcnNlcikgewoJcmV0dXJuIEEzKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJRjIoCgkJCWZ1bmN0aW9uIChjb21tZW50c0JlZm9yZSwgYWZ0ZXIpIHsKCQkJCXJldHVybiB7Y29tbWVudHM6IGNvbW1lbnRzQmVmb3JlLCBzeW50YXg6IGFmdGVyfTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9uVG9wSW5kZW50YXRpb25Gb2xsb3dlZEJ5KG5leHRQYXJzZXIpKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxhenkgPSBmdW5jdGlvbiAodGh1bmspIHsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJZnVuY3Rpb24gKHMpIHsKCQkJdmFyIF92MCA9IHRodW5rKF9VdGlsc19UdXBsZTApOwoJCQl2YXIgcGFyc2UgPSBfdjAuYTsKCQkJcmV0dXJuIHBhcnNlKHMpOwoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRMaXRlcmFsID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xpdGVyYWwnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHdoaWxlV2l0aG91dExpbmVicmVhayA9IGZ1bmN0aW9uIChpc0dvb2QpIHsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJZnVuY3Rpb24gKHMwKSB7CgkJCXZhciBzMSA9IEE2KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtIZWxwLCBpc0dvb2QsIHMwLm9mZnNldCwgczAucm93LCBzMC5jb2wsIHMwLnNyYywgczAuaW5kZW50KTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIHMwLm9mZnNldCwgczEub2Zmc2V0LCBzMC5zcmMpLAoJCQkJczEpOwoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHNpbmdsZVF1b3RlZFN0cmluZ0xpdGVyYWxBZnRlckRvdWJsZVF1b3RlID0gQTUoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wVW50aWwsCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wsICdcIicsIF9VdGlsc19UdXBsZTApLAoJQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQknXFwnLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZXNjYXBlZENoYXJWYWx1ZU1hcCgkZWxtJGNvcmUkU3RyaW5nJGZyb21DaGFyKSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkd2hpbGVXaXRob3V0TGluZWJyZWFrKAoJCQlmdW5jdGlvbiAoYykgewoJCQkJc3dpdGNoIChjLnZhbHVlT2YoKSkgewoJCQkJCWNhc2UgJ1wiJzoKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCWNhc2UgJ1xcJzoKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXJldHVybiAhJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkaXNVdGYxNlN1cnJvZ2F0ZShjKTsKCQkJCX0KCQkJfSkpLAoJJycsCglGMigKCQlmdW5jdGlvbiAoZXh0ZW5zaW9uLCBzb0ZhcikgewoJCQlyZXR1cm4gc29GYXIgKyAoZXh0ZW5zaW9uICsgJycpOwoJCX0pLAoJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHJpcGxlUXVvdGVkU3RyaW5nTGl0ZXJhbE9mdGVyVHJpcGxlRG91YmxlUXVvdGUgPSBBNSgKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxvb3BVbnRpbCwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwgJ1wiXCJcIicsIF9VdGlsc19UdXBsZTApLAoJQTMoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YzLAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwgJ1wiJywgJ1wiJyksCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCSdcXCcsCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRlc2NhcGVkQ2hhclZhbHVlTWFwKCRlbG0kY29yZSRTdHJpbmckZnJvbUNoYXIpKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aGlsZSgKCQkJZnVuY3Rpb24gKGMpIHsKCQkJCXN3aXRjaCAoYy52YWx1ZU9mKCkpIHsKCQkJCQljYXNlICdcIic6CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQljYXNlICdcXCc6CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQlkZWZhdWx0OgoJCQkJCQlyZXR1cm4gISRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGlzVXRmMTZTdXJyb2dhdGUoYyk7CgkJCQl9CgkJCX0pKSwKCScnLAoJRjIoCgkJZnVuY3Rpb24gKGV4dGVuc2lvbiwgc29GYXIpIHsKCQkJcmV0dXJuIHNvRmFyICsgKGV4dGVuc2lvbiArICcnKTsKCQl9KSwKCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHNpbmdsZU9yVHJpcGxlUXVvdGVkU3RyaW5nTGl0ZXJhbE1hcFdpdGhSYW5nZSA9IGZ1bmN0aW9uIChyYW5nZUFuZFN0cmluZ1RvUmVzKSB7CglyZXR1cm4gQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQknXCInLAoJCUE0KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjJNYXBXaXRoU3RhcnRSb3dDb2x1bW5BbmRFbmRSb3dDb2x1bW4sCgkJCUY1KAoJCQkJZnVuY3Rpb24gKHN0YXJ0Um93LCBzdGFydENvbHVtbiwgc3RyaW5nLCBlbmRSb3csIGVuZENvbHVtbikgewoJCQkJCXJldHVybiBBMigKCQkJCQkJcmFuZ2VBbmRTdHJpbmdUb1JlcywKCQkJCQkJewoJCQkJCQkJZW5kOiB7Y29sdW1uOiBlbmRDb2x1bW4sIHJvdzogZW5kUm93fSwKCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzdGFydENvbHVtbiAtIDEsIHJvdzogc3RhcnRSb3d9CgkJCQkJCX0sCgkJCQkJCXN0cmluZyk7CgkJCQl9KSwKCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJ1wiXCInLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHJpcGxlUXVvdGVkU3RyaW5nTGl0ZXJhbE9mdGVyVHJpcGxlRG91YmxlUXVvdGUpLAoJCQlGNSgKCQkJCWZ1bmN0aW9uIChzdGFydFJvdywgc3RhcnRDb2x1bW4sIHN0cmluZywgZW5kUm93LCBlbmRDb2x1bW4pIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCXJhbmdlQW5kU3RyaW5nVG9SZXMsCgkJCQkJCXsKCQkJCQkJCWVuZDoge2NvbHVtbjogZW5kQ29sdW1uLCByb3c6IGVuZFJvd30sCgkJCQkJCQlzdGFydDoge2NvbHVtbjogc3RhcnRDb2x1bW4gLSAxLCByb3c6IHN0YXJ0Um93fQoJCQkJCQl9LAoJCQkJCQlzdHJpbmcpOwoJCQkJfSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRzaW5nbGVRdW90ZWRTdHJpbmdMaXRlcmFsQWZ0ZXJEb3VibGVRdW90ZSkpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRsaXRlcmFsRXhwcmVzc2lvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRzaW5nbGVPclRyaXBsZVF1b3RlZFN0cmluZ0xpdGVyYWxNYXBXaXRoUmFuZ2UoCglGMigKCQlmdW5jdGlvbiAocmFuZ2UsIHN0cmluZykgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJcmFuZ2UsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRMaXRlcmFsKHN0cmluZykpCgkJCX07CgkJfSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFdoaWxlU3VjY2VlZHNPbnRvUmVzdWx0RnJvbVBhcnNlciA9IEY0KAoJZnVuY3Rpb24gKGVsZW1lbnQsIF92MCwgcmVkdWNlLCBmb2xkZWRUb1JlcykgewoJCXZhciBwYXJzZUluaXRpYWxGb2xkZWQgPSBfdjAuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjEgPSBwYXJzZUluaXRpYWxGb2xkZWQoczApOwoJCQkJaWYgKF92MS4kID09PSAnR29vZCcpIHsKCQkJCQl2YXIgaW5pdGlhbEZvbGRlZCA9IF92MS5hOwoJCQkJCXZhciBzMSA9IF92MS5iOwoJCQkJCXJldHVybiBBNSgkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wV2hpbGVTdWNjZWVkc0hlbHAsIGVsZW1lbnQsIGluaXRpYWxGb2xkZWQsIHJlZHVjZSwgZm9sZGVkVG9SZXMsIHMxKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92MS5hOwoJCQkJCXZhciB4ID0gX3YxLmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbyA9IEYyKAoJZnVuY3Rpb24gKHJpZ2h0LCBsZWZ0KSB7CgkJaWYgKGxlZnQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiByaWdodDsKCQl9IGVsc2UgewoJCQl2YXIgbGVmdExpa2VseUZpbGxlZCA9IGxlZnQuYTsKCQkJaWYgKHJpZ2h0LiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuIGxlZnQ7CgkJCX0gZWxzZSB7CgkJCQl2YXIgcmlnaHRMaWtlbHlGaWxsZWQgPSByaWdodC5hOwoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJEJyYW5jaDIsIGxlZnRMaWtlbHlGaWxsZWQsIHJpZ2h0TGlrZWx5RmlsbGVkKSk7CgkJCX0KCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkbWFueSA9IGZ1bmN0aW9uIChwKSB7CglyZXR1cm4gQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFdoaWxlU3VjY2VlZHMsCgkJcCwKCQlfVXRpbHNfVHVwbGUyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LCBfTGlzdF9OaWwpLAoJCUYyKAoJCQlmdW5jdGlvbiAocFJlc3VsdCwgX3YwKSB7CgkJCQl2YXIgY29tbWVudHNTb0ZhciA9IF92MC5hOwoJCQkJdmFyIGl0ZW1zU29GYXIgPSBfdjAuYjsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgcFJlc3VsdC5jb21tZW50cywgY29tbWVudHNTb0ZhciksCgkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgcFJlc3VsdC5zeW50YXgsIGl0ZW1zU29GYXIpKTsKCQkJfSksCgkJZnVuY3Rpb24gKF92MSkgewoJCQl2YXIgY29tbWVudHNTb0ZhciA9IF92MS5hOwoJCQl2YXIgaXRlbXNTb0ZhciA9IF92MS5iOwoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6IGNvbW1lbnRzU29GYXIsCgkJCQlzeW50YXg6ICRlbG0kY29yZSRMaXN0JHJldmVyc2UoaXRlbXNTb0ZhcikKCQkJfTsKCQl9KTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkbWFueVdpdGhvdXRSZXZlcnNlID0gZnVuY3Rpb24gKHApIHsKCXJldHVybiBBNCgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wV2hpbGVTdWNjZWVkcywKCQlwLAoJCV9VdGlsc19UdXBsZTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksIF9MaXN0X05pbCksCgkJRjIoCgkJCWZ1bmN0aW9uIChwUmVzdWx0LCBfdjApIHsKCQkJCXZhciBjb21tZW50c1NvRmFyID0gX3YwLmE7CgkJCQl2YXIgaXRlbXNTb0ZhciA9IF92MC5iOwoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBwUmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c1NvRmFyKSwKCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBwUmVzdWx0LnN5bnRheCwgaXRlbXNTb0ZhcikpOwoJCQl9KSwKCQlmdW5jdGlvbiAoX3YxKSB7CgkJCXZhciBjb21tZW50c1NvRmFyID0gX3YxLmE7CgkJCXZhciBpdGVtc1NvRmFyID0gX3YxLmI7CgkJCXJldHVybiB7Y29tbWVudHM6IGNvbW1lbnRzU29GYXIsIHN5bnRheDogaXRlbXNTb0Zhcn07CgkJfSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAgPSBGMigKCWZ1bmN0aW9uIChmdW5jLCBfdjApIHsKCQl2YXIgcGFyc2UgPSBfdjAuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjEgPSBwYXJzZShzMCk7CgkJCQlpZiAoX3YxLiQgPT09ICdHb29kJykgewoJCQkJCXZhciBhID0gX3YxLmE7CgkJCQkJdmFyIHMxID0gX3YxLmI7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQlmdW5jKGEpLAoJCQkJCQlzMSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjEuYTsKCQkJCQl2YXIgeCA9IF92MS5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzID0gRjQoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIF92MikgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92MyA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3YzLiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92My5hOwoJCQkJCXZhciB4ID0gX3YzLmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjMuYTsKCQkJCQl2YXIgczEgPSBfdjMuYjsKCQkJCQl2YXIgX3Y0ID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3Y0LiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3Y0LmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3Y0LmE7CgkJCQkJCXZhciBzMiA9IF92NC5iOwoJCQkJCQl2YXIgX3Y1ID0gcGFyc2VDKHMyKTsKCQkJCQkJaWYgKF92NS4kID09PSAnQmFkJykgewoJCQkJCQkJdmFyIHggPSBfdjUuYjsKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIGMgPSBfdjUuYTsKCQkJCQkJCXZhciBzMyA9IF92NS5iOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJQTMoZnVuYywgYSwgYiwgYyksCgkJCQkJCQkJczMpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwM1dpdGhTdGFydExvY2F0aW9uID0gRjQoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIF92MikgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92MyA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3YzLiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92My5hOwoJCQkJCXZhciB4ID0gX3YzLmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjMuYTsKCQkJCQl2YXIgczEgPSBfdjMuYjsKCQkJCQl2YXIgX3Y0ID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3Y0LiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3Y0LmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3Y0LmE7CgkJCQkJCXZhciBzMiA9IF92NC5iOwoJCQkJCQl2YXIgX3Y1ID0gcGFyc2VDKHMyKTsKCQkJCQkJaWYgKF92NS4kID09PSAnQmFkJykgewoJCQkJCQkJdmFyIHggPSBfdjUuYjsKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIGMgPSBfdjUuYTsKCQkJCQkJCXZhciBzMyA9IF92NS5iOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJQTQoCgkJCQkJCQkJCWZ1bmMsCgkJCQkJCQkJCXtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9LAoJCQkJCQkJCQlhLAoJCQkJCQkJCQliLAoJCQkJCQkJCQljKSwKCQkJCQkJCQlzMyk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0ID0gRjUoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIF92MiwgX3YzKSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQl2YXIgcGFyc2VDID0gX3YyLmE7CgkJdmFyIHBhcnNlRCA9IF92My5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92NCA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3Y0LiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92NC5hOwoJCQkJCXZhciB4ID0gX3Y0LmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjQuYTsKCQkJCQl2YXIgczEgPSBfdjQuYjsKCQkJCQl2YXIgX3Y1ID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3Y1LiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3Y1LmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3Y1LmE7CgkJCQkJCXZhciBzMiA9IF92NS5iOwoJCQkJCQl2YXIgX3Y2ID0gcGFyc2VDKHMyKTsKCQkJCQkJaWYgKF92Ni4kID09PSAnQmFkJykgewoJCQkJCQkJdmFyIHggPSBfdjYuYjsKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIGMgPSBfdjYuYTsKCQkJCQkJCXZhciBzMyA9IF92Ni5iOwoJCQkJCQkJdmFyIF92NyA9IHBhcnNlRChzMyk7CgkJCQkJCQlpZiAoX3Y3LiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJdmFyIHggPSBfdjcuYjsKCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIGQgPSBfdjcuYTsKCQkJCQkJCQl2YXIgczQgPSBfdjcuYjsKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJCUE0KGZ1bmMsIGEsIGIsIGMsIGQpLAoJCQkJCQkJCQlzNCk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0T3JTdWNjZWVkID0gRjYoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIF92MiwgX3YzLCBmYWxsYmFjaykgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXZhciBwYXJzZUQgPSBfdjMuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjQgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92NC4kID09PSAnQmFkJykgewoJCQkJCXZhciBjMSA9IF92NC5hOwoJCQkJCXZhciB4ID0gX3Y0LmI7CgkJCQkJcmV0dXJuIGMxID8gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KSA6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsIGZhbGxiYWNrLCBzMCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3Y0LmE7CgkJCQkJdmFyIHMxID0gX3Y0LmI7CgkJCQkJdmFyIF92NSA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92NS4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92NS5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92NS5hOwoJCQkJCQl2YXIgczIgPSBfdjUuYjsKCQkJCQkJdmFyIF92NiA9IHBhcnNlQyhzMik7CgkJCQkJCWlmIChfdjYuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCXZhciB4ID0gX3Y2LmI7CgkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBjID0gX3Y2LmE7CgkJCQkJCQl2YXIgczMgPSBfdjYuYjsKCQkJCQkJCXZhciBfdjcgPSBwYXJzZUQoczMpOwoJCQkJCQkJaWYgKF92Ny4kID09PSAnQmFkJykgewoJCQkJCQkJCXZhciB4ID0gX3Y3LmI7CgkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBkID0gX3Y3LmE7CgkJCQkJCQkJdmFyIHM0ID0gX3Y3LmI7CgkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJCQlBNChmdW5jLCBhLCBiLCBjLCBkKSwKCQkJCQkJCQkJczQpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNFdpdGhSYW5nZSA9IEY1KAoJZnVuY3Rpb24gKGZ1bmMsIF92MCwgX3YxLCBfdjIsIF92MykgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXZhciBwYXJzZUQgPSBfdjMuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjQgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92NC4kID09PSAnQmFkJykgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjQuYTsKCQkJCQl2YXIgeCA9IF92NC5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3Y0LmE7CgkJCQkJdmFyIHMxID0gX3Y0LmI7CgkJCQkJdmFyIF92NSA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92NS4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92NS5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92NS5hOwoJCQkJCQl2YXIgczIgPSBfdjUuYjsKCQkJCQkJdmFyIF92NiA9IHBhcnNlQyhzMik7CgkJCQkJCWlmIChfdjYuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCXZhciB4ID0gX3Y2LmI7CgkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBjID0gX3Y2LmE7CgkJCQkJCQl2YXIgczMgPSBfdjYuYjsKCQkJCQkJCXZhciBfdjcgPSBwYXJzZUQoczMpOwoJCQkJCQkJaWYgKF92Ny4kID09PSAnQmFkJykgewoJCQkJCQkJCXZhciB4ID0gX3Y3LmI7CgkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBkID0gX3Y3LmE7CgkJCQkJCQkJdmFyIHM0ID0gX3Y3LmI7CgkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJCQlBNSgKCQkJCQkJCQkJCWZ1bmMsCgkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJZW5kOiB7Y29sdW1uOiBzNC5jb2wsIHJvdzogczQucm93fSwKCQkJCQkJCQkJCQlzdGFydDoge2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30KCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQlhLAoJCQkJCQkJCQkJYiwKCQkJCQkJCQkJCWMsCgkJCQkJCQkJCQlkKSwKCQkJCQkJCQkJczQpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNSA9IEY2KAoJZnVuY3Rpb24gKGZ1bmMsIF92MCwgX3YxLCBfdjIsIF92MywgX3Y0KSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQl2YXIgcGFyc2VDID0gX3YyLmE7CgkJdmFyIHBhcnNlRCA9IF92My5hOwoJCXZhciBwYXJzZUUgPSBfdjQuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjUgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92NS4kID09PSAnQmFkJykgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjUuYTsKCQkJCQl2YXIgeCA9IF92NS5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3Y1LmE7CgkJCQkJdmFyIHMxID0gX3Y1LmI7CgkJCQkJdmFyIF92NiA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92Ni4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92Ni5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92Ni5hOwoJCQkJCQl2YXIgczIgPSBfdjYuYjsKCQkJCQkJdmFyIF92NyA9IHBhcnNlQyhzMik7CgkJCQkJCWlmIChfdjcuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCXZhciB4ID0gX3Y3LmI7CgkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBjID0gX3Y3LmE7CgkJCQkJCQl2YXIgczMgPSBfdjcuYjsKCQkJCQkJCXZhciBfdjggPSBwYXJzZUQoczMpOwoJCQkJCQkJaWYgKF92OC4kID09PSAnQmFkJykgewoJCQkJCQkJCXZhciB4ID0gX3Y4LmI7CgkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBkID0gX3Y4LmE7CgkJCQkJCQkJdmFyIHM0ID0gX3Y4LmI7CgkJCQkJCQkJdmFyIF92OSA9IHBhcnNlRShzNCk7CgkJCQkJCQkJaWYgKF92OS4kID09PSAnQmFkJykgewoJCQkJCQkJCQl2YXIgeCA9IF92OS5iOwoJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgZSA9IF92OS5hOwoJCQkJCQkJCQl2YXIgczUgPSBfdjkuYjsKCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCQkJCUE1KGZ1bmMsIGEsIGIsIGMsIGQsIGUpLAoJCQkJCQkJCQkJczUpOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDVXaXRoUmFuZ2UgPSBGNigKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSwgX3YyLCBfdjMsIF92NCkgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXZhciBwYXJzZUQgPSBfdjMuYTsKCQl2YXIgcGFyc2VFID0gX3Y0LmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgX3Y1ID0gcGFyc2VBKHMwKTsKCQkJCWlmIChfdjUuJCA9PT0gJ0JhZCcpIHsKCQkJCQl2YXIgY29tbWl0dGVkID0gX3Y1LmE7CgkJCQkJdmFyIHggPSBfdjUuYjsKCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBjb21taXR0ZWQsIHgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYSA9IF92NS5hOwoJCQkJCXZhciBzMSA9IF92NS5iOwoJCQkJCXZhciBfdjYgPSBwYXJzZUIoczEpOwoJCQkJCWlmIChfdjYuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJdmFyIHggPSBfdjYuYjsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGIgPSBfdjYuYTsKCQkJCQkJdmFyIHMyID0gX3Y2LmI7CgkJCQkJCXZhciBfdjcgPSBwYXJzZUMoczIpOwoJCQkJCQlpZiAoX3Y3LiQgPT09ICdCYWQnKSB7CgkJCQkJCQl2YXIgeCA9IF92Ny5iOwoJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYyA9IF92Ny5hOwoJCQkJCQkJdmFyIHMzID0gX3Y3LmI7CgkJCQkJCQl2YXIgX3Y4ID0gcGFyc2VEKHMzKTsKCQkJCQkJCWlmIChfdjguJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQl2YXIgeCA9IF92OC5iOwoJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgZCA9IF92OC5hOwoJCQkJCQkJCXZhciBzNCA9IF92OC5iOwoJCQkJCQkJCXZhciBfdjkgPSBwYXJzZUUoczQpOwoJCQkJCQkJCWlmIChfdjkuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJdmFyIHggPSBfdjkuYjsKCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJdmFyIGUgPSBfdjkuYTsKCQkJCQkJCQkJdmFyIHM1ID0gX3Y5LmI7CgkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJCQlBNigKCQkJCQkJCQkJCQlmdW5jLAoJCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkJZW5kOiB7Y29sdW1uOiBzNS5jb2wsIHJvdzogczUucm93fSwKCQkJCQkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQlhLAoJCQkJCQkJCQkJCWIsCgkJCQkJCQkJCQkJYywKCQkJCQkJCQkJCQlkLAoJCQkJCQkJCQkJCWUpLAoJCQkJCQkJCQkJczUpOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDVXaXRoU3RhcnRMb2NhdGlvbiA9IEY2KAoJZnVuY3Rpb24gKGZ1bmMsIF92MCwgX3YxLCBfdjIsIF92MywgX3Y0KSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQl2YXIgcGFyc2VDID0gX3YyLmE7CgkJdmFyIHBhcnNlRCA9IF92My5hOwoJCXZhciBwYXJzZUUgPSBfdjQuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjUgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92NS4kID09PSAnQmFkJykgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjUuYTsKCQkJCQl2YXIgeCA9IF92NS5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3Y1LmE7CgkJCQkJdmFyIHMxID0gX3Y1LmI7CgkJCQkJdmFyIF92NiA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92Ni4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92Ni5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92Ni5hOwoJCQkJCQl2YXIgczIgPSBfdjYuYjsKCQkJCQkJdmFyIF92NyA9IHBhcnNlQyhzMik7CgkJCQkJCWlmIChfdjcuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCXZhciB4ID0gX3Y3LmI7CgkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBjID0gX3Y3LmE7CgkJCQkJCQl2YXIgczMgPSBfdjcuYjsKCQkJCQkJCXZhciBfdjggPSBwYXJzZUQoczMpOwoJCQkJCQkJaWYgKF92OC4kID09PSAnQmFkJykgewoJCQkJCQkJCXZhciB4ID0gX3Y4LmI7CgkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBkID0gX3Y4LmE7CgkJCQkJCQkJdmFyIHM0ID0gX3Y4LmI7CgkJCQkJCQkJdmFyIF92OSA9IHBhcnNlRShzNCk7CgkJCQkJCQkJaWYgKF92OS4kID09PSAnQmFkJykgewoJCQkJCQkJCQl2YXIgeCA9IF92OS5iOwoJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgZSA9IF92OS5hOwoJCQkJCQkJCQl2YXIgczUgPSBfdjkuYjsKCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCQkJCUE2KAoJCQkJCQkJCQkJCWZ1bmMsCgkJCQkJCQkJCQkJe2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30sCgkJCQkJCQkJCQkJYSwKCQkJCQkJCQkJCQliLAoJCQkJCQkJCQkJCWMsCgkJCQkJCQkJCQkJZCwKCQkJCQkJCQkJCQllKSwKCQkJCQkJCQkJCXM1KTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA2V2l0aFN0YXJ0TG9jYXRpb24gPSBGNygKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSwgX3YyLCBfdjMsIF92NCwgX3Y1KSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQl2YXIgcGFyc2VDID0gX3YyLmE7CgkJdmFyIHBhcnNlRCA9IF92My5hOwoJCXZhciBwYXJzZUUgPSBfdjQuYTsKCQl2YXIgcGFyc2VGID0gX3Y1LmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgX3Y2ID0gcGFyc2VBKHMwKTsKCQkJCWlmIChfdjYuJCA9PT0gJ0JhZCcpIHsKCQkJCQl2YXIgY29tbWl0dGVkID0gX3Y2LmE7CgkJCQkJdmFyIHggPSBfdjYuYjsKCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBjb21taXR0ZWQsIHgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYSA9IF92Ni5hOwoJCQkJCXZhciBzMSA9IF92Ni5iOwoJCQkJCXZhciBfdjcgPSBwYXJzZUIoczEpOwoJCQkJCWlmIChfdjcuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJdmFyIHggPSBfdjcuYjsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGIgPSBfdjcuYTsKCQkJCQkJdmFyIHMyID0gX3Y3LmI7CgkJCQkJCXZhciBfdjggPSBwYXJzZUMoczIpOwoJCQkJCQlpZiAoX3Y4LiQgPT09ICdCYWQnKSB7CgkJCQkJCQl2YXIgeCA9IF92OC5iOwoJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYyA9IF92OC5hOwoJCQkJCQkJdmFyIHMzID0gX3Y4LmI7CgkJCQkJCQl2YXIgX3Y5ID0gcGFyc2VEKHMzKTsKCQkJCQkJCWlmIChfdjkuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQl2YXIgeCA9IF92OS5iOwoJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgZCA9IF92OS5hOwoJCQkJCQkJCXZhciBzNCA9IF92OS5iOwoJCQkJCQkJCXZhciBfdjEwID0gcGFyc2VFKHM0KTsKCQkJCQkJCQlpZiAoX3YxMC4kID09PSAnQmFkJykgewoJCQkJCQkJCQl2YXIgeCA9IF92MTAuYjsKCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJdmFyIGUgPSBfdjEwLmE7CgkJCQkJCQkJCXZhciBzNSA9IF92MTAuYjsKCQkJCQkJCQkJdmFyIF92MTEgPSBwYXJzZUYoczUpOwoJCQkJCQkJCQlpZiAoX3YxMS4kID09PSAnQmFkJykgewoJCQkJCQkJCQkJdmFyIHggPSBfdjExLmI7CgkJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXZhciBmID0gX3YxMS5hOwoJCQkJCQkJCQkJdmFyIHM2ID0gX3YxMS5iOwoJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJCQkJQTcoCgkJCQkJCQkJCQkJCWZ1bmMsCgkJCQkJCQkJCQkJCXtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9LAoJCQkJCQkJCQkJCQlhLAoJCQkJCQkJCQkJCQliLAoJCQkJCQkJCQkJCQljLAoJCQkJCQkJCQkJCQlkLAoJCQkJCQkJCQkJCQllLAoJCQkJCQkJCQkJCQlmKSwKCQkJCQkJCQkJCQlzNik7CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA4V2l0aFN0YXJ0TG9jYXRpb24gPSBGOSgKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSwgX3YyLCBfdjMsIF92NCwgX3Y1LCBfdjYsIF92NykgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXZhciBwYXJzZUQgPSBfdjMuYTsKCQl2YXIgcGFyc2VFID0gX3Y0LmE7CgkJdmFyIHBhcnNlRiA9IF92NS5hOwoJCXZhciBwYXJzZUcgPSBfdjYuYTsKCQl2YXIgcGFyc2VIID0gX3Y3LmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgX3Y4ID0gcGFyc2VBKHMwKTsKCQkJCWlmIChfdjguJCA9PT0gJ0JhZCcpIHsKCQkJCQl2YXIgY29tbWl0dGVkID0gX3Y4LmE7CgkJCQkJdmFyIHggPSBfdjguYjsKCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBjb21taXR0ZWQsIHgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYSA9IF92OC5hOwoJCQkJCXZhciBzMSA9IF92OC5iOwoJCQkJCXZhciBfdjkgPSBwYXJzZUIoczEpOwoJCQkJCWlmIChfdjkuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJdmFyIHggPSBfdjkuYjsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGIgPSBfdjkuYTsKCQkJCQkJdmFyIHMyID0gX3Y5LmI7CgkJCQkJCXZhciBfdjEwID0gcGFyc2VDKHMyKTsKCQkJCQkJaWYgKF92MTAuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCXZhciB4ID0gX3YxMC5iOwoJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYyA9IF92MTAuYTsKCQkJCQkJCXZhciBzMyA9IF92MTAuYjsKCQkJCQkJCXZhciBfdjExID0gcGFyc2VEKHMzKTsKCQkJCQkJCWlmIChfdjExLiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJdmFyIHggPSBfdjExLmI7CgkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBkID0gX3YxMS5hOwoJCQkJCQkJCXZhciBzNCA9IF92MTEuYjsKCQkJCQkJCQl2YXIgX3YxMiA9IHBhcnNlRShzNCk7CgkJCQkJCQkJaWYgKF92MTIuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJdmFyIHggPSBfdjEyLmI7CgkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBlID0gX3YxMi5hOwoJCQkJCQkJCQl2YXIgczUgPSBfdjEyLmI7CgkJCQkJCQkJCXZhciBfdjEzID0gcGFyc2VGKHM1KTsKCQkJCQkJCQkJaWYgKF92MTMuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJCXZhciB4ID0gX3YxMy5iOwoJCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQl2YXIgZiA9IF92MTMuYTsKCQkJCQkJCQkJCXZhciBzNiA9IF92MTMuYjsKCQkJCQkJCQkJCXZhciBfdjE0ID0gcGFyc2VHKHM2KTsKCQkJCQkJCQkJCWlmIChfdjE0LiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCQkJdmFyIHggPSBfdjE0LmI7CgkJCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCXZhciBnID0gX3YxNC5hOwoJCQkJCQkJCQkJCXZhciBzNyA9IF92MTQuYjsKCQkJCQkJCQkJCQl2YXIgX3YxNSA9IHBhcnNlSChzNyk7CgkJCQkJCQkJCQkJaWYgKF92MTUuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJCQkJdmFyIHggPSBfdjE1LmI7CgkJCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCXZhciBoID0gX3YxNS5hOwoJCQkJCQkJCQkJCQl2YXIgczggPSBfdjE1LmI7CgkJCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJCQkJCQlBOSgKCQkJCQkJCQkJCQkJCQlmdW5jLAoJCQkJCQkJCQkJCQkJCXtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9LAoJCQkJCQkJCQkJCQkJCWEsCgkJCQkJCQkJCQkJCQkJYiwKCQkJCQkJCQkJCQkJCQljLAoJCQkJCQkJCQkJCQkJCWQsCgkJCQkJCQkJCQkJCQkJZSwKCQkJCQkJCQkJCQkJCQlmLAoJCQkJCQkJCQkJCQkJCWcsCgkJCQkJCQkJCQkJCQkJaCksCgkJCQkJCQkJCQkJCQlzOCk7CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkdmFsaWRhdGVFbmRDb2x1bW5JbmRlbnRhdGlvbiA9IEYzKAoJZnVuY3Rpb24gKGlzT2theSwgcHJvYmxlbU9uSXNOb3RPa2F5LCBfdjApIHsKCQl2YXIgcGFyc2UgPSBfdjAuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjEgPSBwYXJzZShzMCk7CgkJCQlpZiAoX3YxLiQgPT09ICdHb29kJykgewoJCQkJCXZhciBnb29kID0gX3YxOwoJCQkJCXZhciBzMSA9IGdvb2QuYjsKCQkJCQlyZXR1cm4gQTIoaXNPa2F5LCBzMS5jb2wsIHMxLmluZGVudCkgPyBnb29kIDogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJdHJ1ZSwKCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nQ3VzdG9tLCBzMS5yb3csIHMxLmNvbCwgcHJvYmxlbU9uSXNOb3RPa2F5KSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBiYWQgPSBfdjE7CgkJCQkJcmV0dXJuIGJhZDsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRlbmRzUG9zaXRpdmVseUluZGVudGVkID0gZnVuY3Rpb24gKHBhcnNlcikgewoJcmV0dXJuIEEzKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHZhbGlkYXRlRW5kQ29sdW1uSW5kZW50YXRpb24sCgkJRjIoCgkJCWZ1bmN0aW9uIChjb2x1bW4sIGluZGVudCkgewoJCQkJcmV0dXJuIF9VdGlsc19jbXAoY29sdW1uLCBpbmRlbnQpID4gMDsKCQkJfSksCgkJJ211c3QgYmUgcG9zaXRpdmVseSBpbmRlbnRlZCcsCgkJcGFyc2VyKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRlbmRzUG9zaXRpdmVseUluZGVudGVkKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCR3aGl0ZXNwYWNlQW5kQ29tbWVudHNPckVtcHR5KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUFyb3VuZEJvdGhTaWRlcyA9IGZ1bmN0aW9uICh4KSB7CglyZXR1cm4gQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQlGMygKCQkJZnVuY3Rpb24gKGJlZm9yZSwgdiwgYWZ0ZXIpIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCWFmdGVyLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHYuY29tbWVudHMsIGJlZm9yZSkpLAoJCQkJCXN5bnRheDogdi5zeW50YXgKCQkJCX07CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQl4LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG11bHRpUmVjb3JkQWNjZXNzID0gQTQoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wV2hpbGVTdWNjZWVkcywKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICcuJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUpLAoJX0xpc3RfTmlsLAoJJGVsbSRjb3JlJExpc3QkY29ucywKCSRlbG0kY29yZSRMaXN0JHJldmVyc2UpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRtdWx0aVJlY29yZEFjY2Vzc01hcCA9IGZ1bmN0aW9uIChmaWVsZHNUb1JlcykgewoJcmV0dXJuIEE0KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxvb3BXaGlsZVN1Y2NlZWRzLAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICcuJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUpLAoJCV9MaXN0X05pbCwKCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCWZ1bmN0aW9uIChyZXZlcnNlZCkgewoJCQlyZXR1cm4gZmllbGRzVG9SZXMoCgkJCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKHJldmVyc2VkKSk7CgkJfSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG5lZ2F0aW9uV2hpdGVzcGFjZVByb2JsZW0gPSAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRwcm9ibGVtKCdpZiBhIG5lZ2F0aW9uIHNpZ24gaXMgbm90IHByZWNlZGVkIGJ5IHdoaXRlc3BhY2UsIGl0XCdzIGNvbnNpZGVyZWQgc3VidHJhY3Rpb24nKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRlcXVhbCA9IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwgJz0nLCBfVXRpbHNfVHVwbGUwKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kQXNQYXR0ZXJuID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0FzUGF0dGVybicsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJExpc3RQYXR0ZXJuID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xpc3RQYXR0ZXJuJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJE5hbWVkUGF0dGVybiA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdOYW1lZFBhdHRlcm4nLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRQYXJlbnRoZXNpemVkUGF0dGVybiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQYXJlbnRoZXNpemVkUGF0dGVybicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkUGF0dGVybkNvbXBvc2VkV2l0aEFzID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1BhdHRlcm5Db21wb3NlZFdpdGhBcycsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkUGF0dGVybkNvbXBvc2VkV2l0aENvbnMgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUGF0dGVybkNvbXBvc2VkV2l0aENvbnMnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJFBhdHRlcm5Db21wb3NlZFdpdGhOb3RoaW5nID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1BhdHRlcm5Db21wb3NlZFdpdGhOb3RoaW5nJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJFR1cGxlUGF0dGVybiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUdXBsZVBhdHRlcm4nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kVW5Db25zUGF0dGVybiA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdVbkNvbnNQYXR0ZXJuJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kVW5pdFBhdHRlcm4gPSB7JDogJ1VuaXRQYXR0ZXJuJ307CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJEFsbFBhdHRlcm4gPSB7JDogJ0FsbFBhdHRlcm4nfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbFdpdGhSYW5nZSA9IEYyKAoJZnVuY3Rpb24gKHN0ciwgc3RhcnRBbmRFbmRMb2NhdGlvblRvUmVzKSB7CgkJdmFyIHN0ckxlbmd0aCA9ICRlbG0kY29yZSRTdHJpbmckbGVuZ3RoKHN0cik7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBuZXdPZmZzZXQgPSBzLm9mZnNldCArIHN0ckxlbmd0aDsKCQkJCWlmIChfVXRpbHNfZXEoCgkJCQkJQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgcy5vZmZzZXQsIG5ld09mZnNldCwgcy5zcmMpLAoJCQkJCXN0ciArICcnKSkgewoJCQkJCXZhciBuZXdDb2wgPSBzLmNvbCArIHN0ckxlbmd0aDsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCXN0YXJ0QW5kRW5kTG9jYXRpb25Ub1JlcygKCQkJCQkJCXsKCQkJCQkJCQllbmQ6IHtjb2x1bW46IG5ld0NvbCwgcm93OiBzLnJvd30sCgkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMuY29sLCByb3c6IHMucm93fQoJCQkJCQkJfSksCgkJCQkJCXtjb2w6IG5ld0NvbCwgaW5kZW50OiBzLmluZGVudCwgb2Zmc2V0OiBuZXdPZmZzZXQsIHJvdzogcy5yb3csIHNyYzogcy5zcmN9KTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCWZhbHNlLAoJCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdTeW1ib2wsIHMucm93LCBzLmNvbCwgc3RyKSk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRhbGxQYXR0ZXJuID0gQTIoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xXaXRoUmFuZ2UsCgknXycsCglmdW5jdGlvbiAocmFuZ2UpIHsKCQlyZXR1cm4gewoJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCXN5bnRheDogQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLCByYW5nZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRBbGxQYXR0ZXJuKQoJCX07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kQ2hhclBhdHRlcm4gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnQ2hhclBhdHRlcm4nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGNoYXJQYXR0ZXJuID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGNoYXJhY3RlckxpdGVyYWxNYXBXaXRoUmFuZ2UoCglGMigKCQlmdW5jdGlvbiAocmFuZ2UsIF9jaGFyKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJENoYXJQYXR0ZXJuKF9jaGFyKSkKCQkJfTsKCQl9KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJEhleFBhdHRlcm4gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnSGV4UGF0dGVybicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRJbnRQYXR0ZXJuID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0ludFBhdHRlcm4nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ051bWJlciA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdFeHBlY3RpbmdOdW1iZXInLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRGVjaW1hbCA9IHskOiAnRGVjaW1hbCd9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkSGV4YWRlY2ltYWwgPSB7JDogJ0hleGFkZWNpbWFsJ307CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZTBUbzlzID0gRjMoCglmdW5jdGlvbiAoc29GYXIsIG9mZnNldCwgc3JjKSB7CgkJY29udmVydDBPck1vcmUwVG85czoKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgX3YwID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQlzd2l0Y2ggKF92MCkgewoJCQkJY2FzZSAnMCc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gc29GYXIgKiAxMCwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZTBUbzlzOwoJCQkJY2FzZSAnMSc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTApICsgMSwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZTBUbzlzOwoJCQkJY2FzZSAnMic6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTApICsgMiwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZTBUbzlzOwoJCQkJY2FzZSAnMyc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTApICsgMywKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZTBUbzlzOwoJCQkJY2FzZSAnNCc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTApICsgNCwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZTBUbzlzOwoJCQkJY2FzZSAnNSc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTApICsgNSwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZTBUbzlzOwoJCQkJY2FzZSAnNic6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTApICsgNiwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZTBUbzlzOwoJCQkJY2FzZSAnNyc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTApICsgNywKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZTBUbzlzOwoJCQkJY2FzZSAnOCc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTApICsgOCwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZTBUbzlzOwoJCQkJY2FzZSAnOSc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTApICsgOSwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZTBUbzlzOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4ge19pbnQ6IHNvRmFyLCBvZmZzZXQ6IG9mZnNldH07CgkJCX0KCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWwgPSBGMygKCWZ1bmN0aW9uIChzb0Zhciwgb2Zmc2V0LCBzcmMpIHsKCQljb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBfdjAgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDEsIHNyYyk7CgkJCXN3aXRjaCAoX3YwKSB7CgkJCQljYXNlICcwJzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSBzb0ZhciAqIDE2LAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICcxJzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyAxLAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICcyJzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyAyLAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICczJzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyAzLAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICc0JzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyA0LAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICc1JzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyA1LAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICc2JzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyA2LAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICc3JzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyA3LAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICc4JzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyA4LAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICc5JzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyA5LAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICdhJzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyAxMCwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnQSc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgMTAsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmVIZXhhZGVjaW1hbDsKCQkJCWNhc2UgJ2InOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDE2KSArIDExLAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICdCJzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyAxMSwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnYyc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgMTIsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmVIZXhhZGVjaW1hbDsKCQkJCWNhc2UgJ0MnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDE2KSArIDEyLAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICdkJzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyAxMywKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnRCc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgMTMsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmVIZXhhZGVjaW1hbDsKCQkJCWNhc2UgJ2UnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDE2KSArIDE0LAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICdFJzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyAxNCwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnZic6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgMTUsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmVIZXhhZGVjaW1hbDsKCQkJCWNhc2UgJ0YnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDE2KSArIDE1LAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiB7X2ludDogc29GYXIsIG9mZnNldDogb2Zmc2V0fTsKCQkJfQoJCX0KCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDFPck1vcmVIZXhhZGVjaW1hbCA9IEYyKAoJZnVuY3Rpb24gKG9mZnNldCwgc3JjKSB7CgkJdmFyIF92MCA9IEEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQlzd2l0Y2ggKF92MCkgewoJCQljYXNlICcwJzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCAwLCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICcxJzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCAxLCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICcyJzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCAyLCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICczJzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCAzLCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICc0JzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCA0LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICc1JzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCA1LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICc2JzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCA2LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICc3JzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCA3LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICc4JzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCA4LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICc5JzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCA5LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICdhJzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCAxMCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnQSc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgMTAsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJ2InOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWwsIDExLCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICdCJzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCAxMSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnYyc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgMTIsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJ0MnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWwsIDEyLCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICdkJzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCAxMywgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnRCc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgMTMsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJ2UnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWwsIDE0LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICdFJzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCAxNCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnZic6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgMTUsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJ0YnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWwsIDE1LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIHtfaW50OiAwLCBvZmZzZXQ6IC0xfTsKCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGVycm9yQXNCYXNlT2Zmc2V0QW5kSW50ID0gewoJYmFzZTogJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRGVjaW1hbCwKCW9mZnNldEFuZEludDoge19pbnQ6IDAsIG9mZnNldDogLTF9Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0SW50ZWdlckRlY2ltYWxPckhleGFkZWNpbWFsID0gRjIoCglmdW5jdGlvbiAob2Zmc2V0LCBzcmMpIHsKCQl2YXIgX3YwID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0LCBvZmZzZXQgKyAxLCBzcmMpOwoJCXN3aXRjaCAoX3YwKSB7CgkJCWNhc2UgJzAnOgoJCQkJdmFyIF92MSA9IEEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCArIDEsIG9mZnNldCArIDIsIHNyYyk7CgkJCQlpZiAoX3YxID09PSAneCcpIHsKCQkJCQl2YXIgaGV4ID0gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDFPck1vcmVIZXhhZGVjaW1hbCwgb2Zmc2V0ICsgMiwgc3JjKTsKCQkJCQlyZXR1cm4gewoJCQkJCQliYXNlOiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRIZXhhZGVjaW1hbCwKCQkJCQkJb2Zmc2V0QW5kSW50OiB7X2ludDogaGV4Ll9pbnQsIG9mZnNldDogaGV4Lm9mZnNldH0KCQkJCQl9OwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gewoJCQkJCQliYXNlOiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCREZWNpbWFsLAoJCQkJCQlvZmZzZXRBbmRJbnQ6IHtfaW50OiAwLCBvZmZzZXQ6IG9mZnNldCArIDF9CgkJCQkJfTsKCQkJCX0KCQkJY2FzZSAnMSc6CgkJCQlyZXR1cm4gewoJCQkJCWJhc2U6ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JERlY2ltYWwsCgkJCQkJb2Zmc2V0QW5kSW50OiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZTBUbzlzLCAxLCBvZmZzZXQgKyAxLCBzcmMpCgkJCQl9OwoJCQljYXNlICcyJzoKCQkJCXJldHVybiB7CgkJCQkJYmFzZTogJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRGVjaW1hbCwKCQkJCQlvZmZzZXRBbmRJbnQ6IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDIsIG9mZnNldCArIDEsIHNyYykKCQkJCX07CgkJCWNhc2UgJzMnOgoJCQkJcmV0dXJuIHsKCQkJCQliYXNlOiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCREZWNpbWFsLAoJCQkJCW9mZnNldEFuZEludDogQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgMywgb2Zmc2V0ICsgMSwgc3JjKQoJCQkJfTsKCQkJY2FzZSAnNCc6CgkJCQlyZXR1cm4gewoJCQkJCWJhc2U6ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JERlY2ltYWwsCgkJCQkJb2Zmc2V0QW5kSW50OiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZTBUbzlzLCA0LCBvZmZzZXQgKyAxLCBzcmMpCgkJCQl9OwoJCQljYXNlICc1JzoKCQkJCXJldHVybiB7CgkJCQkJYmFzZTogJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRGVjaW1hbCwKCQkJCQlvZmZzZXRBbmRJbnQ6IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDUsIG9mZnNldCArIDEsIHNyYykKCQkJCX07CgkJCWNhc2UgJzYnOgoJCQkJcmV0dXJuIHsKCQkJCQliYXNlOiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCREZWNpbWFsLAoJCQkJCW9mZnNldEFuZEludDogQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgNiwgb2Zmc2V0ICsgMSwgc3JjKQoJCQkJfTsKCQkJY2FzZSAnNyc6CgkJCQlyZXR1cm4gewoJCQkJCWJhc2U6ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JERlY2ltYWwsCgkJCQkJb2Zmc2V0QW5kSW50OiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZTBUbzlzLCA3LCBvZmZzZXQgKyAxLCBzcmMpCgkJCQl9OwoJCQljYXNlICc4JzoKCQkJCXJldHVybiB7CgkJCQkJYmFzZTogJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRGVjaW1hbCwKCQkJCQlvZmZzZXRBbmRJbnQ6IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDgsIG9mZnNldCArIDEsIHNyYykKCQkJCX07CgkJCWNhc2UgJzknOgoJCQkJcmV0dXJuIHsKCQkJCQliYXNlOiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCREZWNpbWFsLAoJCQkJCW9mZnNldEFuZEludDogQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgOSwgb2Zmc2V0ICsgMSwgc3JjKQoJCQkJfTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRlcnJvckFzQmFzZU9mZnNldEFuZEludDsKCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGludGVnZXJEZWNpbWFsT3JIZXhhZGVjaW1hbE1hcFdpdGhSYW5nZSA9IEYyKAoJZnVuY3Rpb24gKHJhbmdlQW5kSW50RGVjaW1hbFRvUmVzLCByYW5nZUFuZEludEhleGFkZWNpbWFsVG9SZXMpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBzMSA9IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnRJbnRlZ2VyRGVjaW1hbE9ySGV4YWRlY2ltYWwsIHMwLm9mZnNldCwgczAuc3JjKTsKCQkJCWlmIChfVXRpbHNfZXEoczEub2Zmc2V0QW5kSW50Lm9mZnNldCwgLTEpKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCWZhbHNlLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdOdW1iZXIsIHMwLnJvdywgczAuY29sKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBuZXdDb2x1bW4gPSBzMC5jb2wgKyAoczEub2Zmc2V0QW5kSW50Lm9mZnNldCAtIHMwLm9mZnNldCk7CgkJCQkJdmFyIHJhbmdlID0gewoJCQkJCQllbmQ6IHtjb2x1bW46IG5ld0NvbHVtbiwgcm93OiBzMC5yb3d9LAoJCQkJCQlzdGFydDoge2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30KCQkJCQl9OwoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJZnVuY3Rpb24gKCkgewoJCQkJCQkJdmFyIF92MCA9IHMxLmJhc2U7CgkJCQkJCQlpZiAoX3YwLiQgPT09ICdEZWNpbWFsJykgewoJCQkJCQkJCXJldHVybiBBMihyYW5nZUFuZEludERlY2ltYWxUb1JlcywgcmFuZ2UsIHMxLm9mZnNldEFuZEludC5faW50KTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmV0dXJuIEEyKHJhbmdlQW5kSW50SGV4YWRlY2ltYWxUb1JlcywgcmFuZ2UsIHMxLm9mZnNldEFuZEludC5faW50KTsKCQkJCQkJCX0KCQkJCQkJfSgpLAoJCQkJCQl7Y29sOiBuZXdDb2x1bW4sIGluZGVudDogczAuaW5kZW50LCBvZmZzZXQ6IHMxLm9mZnNldEFuZEludC5vZmZzZXQsIHJvdzogczAucm93LCBzcmM6IHMwLnNyY30pOwoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkbnVtYmVyUGFydCA9IEEyKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaW50ZWdlckRlY2ltYWxPckhleGFkZWNpbWFsTWFwV2l0aFJhbmdlLAoJRjIoCgkJZnVuY3Rpb24gKHJhbmdlLCBuKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJEludFBhdHRlcm4obikpCgkJCX07CgkJfSksCglGMigKCQlmdW5jdGlvbiAocmFuZ2UsIG4pIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJCXN5bnRheDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXJhbmdlLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kSGV4UGF0dGVybihuKSkKCQkJfTsKCQl9KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjJPclN1Y2NlZWQgPSBGMygKCWZ1bmN0aW9uIChfdjAsIF92MSwgdGhpcmRSZXMpIHsKCQl2YXIgYXR0ZW1wdEZpcnN0ID0gX3YwLmE7CgkJdmFyIGF0dGVtcHRTZWNvbmQgPSBfdjEuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIF92MiA9IGF0dGVtcHRGaXJzdChzKTsKCQkJCWlmIChfdjIuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJdmFyIGZpcnN0R29vZCA9IF92MjsKCQkJCQlyZXR1cm4gZmlyc3RHb29kOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgZmlyc3RCYWQgPSBfdjI7CgkJCQkJdmFyIGZpcnN0Q29tbWl0dGVkID0gZmlyc3RCYWQuYTsKCQkJCQlpZiAoZmlyc3RDb21taXR0ZWQpIHsKCQkJCQkJcmV0dXJuIGZpcnN0QmFkOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjMgPSBhdHRlbXB0U2Vjb25kKHMpOwoJCQkJCQlpZiAoX3YzLiQgPT09ICdHb29kJykgewoJCQkJCQkJdmFyIHNlY29uZEdvb2QgPSBfdjM7CgkJCQkJCQlyZXR1cm4gc2Vjb25kR29vZDsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBzZWNvbmRCYWQgPSBfdjM7CgkJCQkJCQl2YXIgc2Vjb25kQ29tbWl0dGVkID0gc2Vjb25kQmFkLmE7CgkJCQkJCQlyZXR1cm4gc2Vjb25kQ29tbWl0dGVkID8gc2Vjb25kQmFkIDogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwgdGhpcmRSZXMsIHMpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2Y5ID0gRjkoCglmdW5jdGlvbiAoX3YwLCBfdjEsIF92MiwgX3YzLCBfdjQsIF92NSwgX3Y2LCBfdjcsIF92OCkgewoJCXZhciBhdHRlbXB0MCA9IF92MC5hOwoJCXZhciBhdHRlbXB0MSA9IF92MS5hOwoJCXZhciBhdHRlbXB0MiA9IF92Mi5hOwoJCXZhciBhdHRlbXB0MyA9IF92My5hOwoJCXZhciBhdHRlbXB0NCA9IF92NC5hOwoJCXZhciBhdHRlbXB0NSA9IF92NS5hOwoJCXZhciBhdHRlbXB0NiA9IF92Ni5hOwoJCXZhciBhdHRlbXB0NyA9IF92Ny5hOwoJCXZhciBhdHRlbXB0OCA9IF92OC5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQl2YXIgX3Y5ID0gYXR0ZW1wdDAocyk7CgkJCQlpZiAoX3Y5LiQgPT09ICdHb29kJykgewoJCQkJCXZhciBnb29kID0gX3Y5OwoJCQkJCXJldHVybiBnb29kOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYmFkMCA9IF92OTsKCQkJCQl2YXIgY29tbWl0dGVkMCA9IGJhZDAuYTsKCQkJCQl2YXIgeDAgPSBiYWQwLmI7CgkJCQkJaWYgKGNvbW1pdHRlZDApIHsKCQkJCQkJcmV0dXJuIGJhZDA7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIF92MTAgPSBhdHRlbXB0MShzKTsKCQkJCQkJaWYgKF92MTAuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQl2YXIgZ29vZCA9IF92MTA7CgkJCQkJCQlyZXR1cm4gZ29vZDsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBiYWQxID0gX3YxMDsKCQkJCQkJCXZhciBjb21taXR0ZWQxID0gYmFkMS5hOwoJCQkJCQkJdmFyIHgxID0gYmFkMS5iOwoJCQkJCQkJaWYgKGNvbW1pdHRlZDEpIHsKCQkJCQkJCQlyZXR1cm4gYmFkMTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIF92MTEgPSBhdHRlbXB0MihzKTsKCQkJCQkJCQlpZiAoX3YxMS4kID09PSAnR29vZCcpIHsKCQkJCQkJCQkJdmFyIGdvb2QgPSBfdjExOwoJCQkJCQkJCQlyZXR1cm4gZ29vZDsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgYmFkMiA9IF92MTE7CgkJCQkJCQkJCXZhciBjb21taXR0ZWQyID0gYmFkMi5hOwoJCQkJCQkJCQl2YXIgeDIgPSBiYWQyLmI7CgkJCQkJCQkJCWlmIChjb21taXR0ZWQyKSB7CgkJCQkJCQkJCQlyZXR1cm4gYmFkMjsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXZhciBfdjEyID0gYXR0ZW1wdDMocyk7CgkJCQkJCQkJCQlpZiAoX3YxMi4kID09PSAnR29vZCcpIHsKCQkJCQkJCQkJCQl2YXIgZ29vZCA9IF92MTI7CgkJCQkJCQkJCQkJcmV0dXJuIGdvb2Q7CgkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCXZhciBiYWQzID0gX3YxMjsKCQkJCQkJCQkJCQl2YXIgY29tbWl0dGVkMyA9IGJhZDMuYTsKCQkJCQkJCQkJCQl2YXIgeDMgPSBiYWQzLmI7CgkJCQkJCQkJCQkJaWYgKGNvbW1pdHRlZDMpIHsKCQkJCQkJCQkJCQkJcmV0dXJuIGJhZDM7CgkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJdmFyIF92MTMgPSBhdHRlbXB0NChzKTsKCQkJCQkJCQkJCQkJaWYgKF92MTMuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQkJCQkJCQl2YXIgZ29vZCA9IF92MTM7CgkJCQkJCQkJCQkJCQlyZXR1cm4gZ29vZDsKCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCXZhciBiYWQ0ID0gX3YxMzsKCQkJCQkJCQkJCQkJCXZhciBjb21taXR0ZWQ0ID0gYmFkNC5hOwoJCQkJCQkJCQkJCQkJdmFyIHg0ID0gYmFkNC5iOwoJCQkJCQkJCQkJCQkJaWYgKGNvbW1pdHRlZDQpIHsKCQkJCQkJCQkJCQkJCQlyZXR1cm4gYmFkNDsKCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJdmFyIF92MTQgPSBhdHRlbXB0NShzKTsKCQkJCQkJCQkJCQkJCQlpZiAoX3YxNC4kID09PSAnR29vZCcpIHsKCQkJCQkJCQkJCQkJCQkJdmFyIGdvb2QgPSBfdjE0OwoJCQkJCQkJCQkJCQkJCQlyZXR1cm4gZ29vZDsKCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQl2YXIgYmFkNSA9IF92MTQ7CgkJCQkJCQkJCQkJCQkJCXZhciBjb21taXR0ZWQ1ID0gYmFkNS5hOwoJCQkJCQkJCQkJCQkJCQl2YXIgeDUgPSBiYWQ1LmI7CgkJCQkJCQkJCQkJCQkJCWlmIChjb21taXR0ZWQ1KSB7CgkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gYmFkNTsKCQkJCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCQkJCXZhciBfdjE1ID0gYXR0ZW1wdDYocyk7CgkJCQkJCQkJCQkJCQkJCQlpZiAoX3YxNS4kID09PSAnR29vZCcpIHsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgZ29vZCA9IF92MTU7CgkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIGdvb2Q7CgkJCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQkJCXZhciBiYWQ2ID0gX3YxNTsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgY29tbWl0dGVkNiA9IGJhZDYuYTsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgeDYgPSBiYWQ2LmI7CgkJCQkJCQkJCQkJCQkJCQkJaWYgKGNvbW1pdHRlZDYpIHsKCQkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIGJhZDY7CgkJCQkJCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCQkJCQkJdmFyIF92MTYgPSBhdHRlbXB0NyhzKTsKCQkJCQkJCQkJCQkJCQkJCQkJaWYgKF92MTYuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgZ29vZCA9IF92MTY7CgkJCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gZ29vZDsKCQkJCQkJCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCQkJCQkJCXZhciBiYWQ3ID0gX3YxNjsKCQkJCQkJCQkJCQkJCQkJCQkJCXZhciBjb21taXR0ZWQ3ID0gYmFkNy5hOwoJCQkJCQkJCQkJCQkJCQkJCQkJdmFyIHg3ID0gYmFkNy5iOwoJCQkJCQkJCQkJCQkJCQkJCQkJaWYgKGNvbW1pdHRlZDcpIHsKCQkJCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gYmFkNzsKCQkJCQkJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCQkJCQkJdmFyIF92MTcgPSBhdHRlbXB0OChzKTsKCQkJCQkJCQkJCQkJCQkJCQkJCQlpZiAoX3YxNy4kID09PSAnR29vZCcpIHsKCQkJCQkJCQkJCQkJCQkJCQkJCQkJdmFyIGdvb2QgPSBfdjE3OwoJCQkJCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gZ29vZDsKCQkJCQkJCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgYmFkOCA9IF92MTc7CgkJCQkJCQkJCQkJCQkJCQkJCQkJCXZhciBjb21taXR0ZWQ4ID0gYmFkOC5hOwoJCQkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgeDggPSBiYWQ4LmI7CgkJCQkJCQkJCQkJCQkJCQkJCQkJCXJldHVybiBjb21taXR0ZWQ4ID8gYmFkOCA6IEEyKAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJZmFsc2UsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdPbmVPZiwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQl4MCwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQl4MSwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCVt4MiwgeDMsIHg0LCB4NSwgeDYsIHg3LCB4OF0pKSk7CgkJCQkJCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcGF0dGVybkxpc3RFbXB0eSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kTGlzdFBhdHRlcm4oX0xpc3RfTmlsKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRwcm9ibGVtUG9zaXRpdmVseUluZGVudGVkID0gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkcHJvYmxlbSgnbXVzdCBiZSBwb3NpdGl2ZWx5IGluZGVudGVkJyk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkcG9zaXRpdmVseUluZGVudGVkRm9sbG93ZWRCeSA9IGZ1bmN0aW9uIChuZXh0UGFyc2VyKSB7CglyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29sdW1uSW5kZW50QW5kVGhlbigKCQlGMigKCQkJZnVuY3Rpb24gKGNvbHVtbiwgaW5kZW50KSB7CgkJCQlyZXR1cm4gKF9VdGlsc19jbXAoY29sdW1uLCBpbmRlbnQpID4gMCkgPyBuZXh0UGFyc2VyIDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHByb2JsZW1Qb3NpdGl2ZWx5SW5kZW50ZWQ7CgkJCX0pKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGlmRm9sbG93ZWRCeVdoaWxlV2l0aG91dExpbmVicmVhayA9IEYyKAoJZnVuY3Rpb24gKGZpcnN0SXNPa2F5LCBhZnRlckZpcnN0SXNPa2F5KSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBmaXJzdE9mZnNldCA9IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGlzU3ViQ2hhcldpdGhvdXRMaW5lYnJlYWssIGZpcnN0SXNPa2F5LCBzLm9mZnNldCwgcy5zcmMpOwoJCQkJaWYgKF9VdGlsc19lcShmaXJzdE9mZnNldCwgLTEpKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCWZhbHNlLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdDaGFyU2F0aXNmeWluZ1ByZWRpY2F0ZSwgcy5yb3csIHMuY29sKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBzMSA9IEE2KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtIZWxwLCBhZnRlckZpcnN0SXNPa2F5LCBmaXJzdE9mZnNldCwgcy5yb3csIHMuY29sICsgMSwgcy5zcmMsIHMuaW5kZW50KTsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIHMub2Zmc2V0LCBzMS5vZmZzZXQsIHMuc3JjKSwKCQkJCQkJczEpOwoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkdW5pY29kZUlzVXBwZXJGYXN0ID0gZnVuY3Rpb24gKGMpIHsKCXZhciBjb2RlID0gJGVsbSRjb3JlJENoYXIkdG9Db2RlKGMpOwoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGNoYXJDb2RlSXNVcHBlcihjb2RlKSB8fCBmdW5jdGlvbiAoKSB7CgkJdmFyIGNTdHJpbmcgPSAkZWxtJGNvcmUkU3RyaW5nJGZyb21DaGFyKGMpOwoJCXJldHVybiAoX1V0aWxzX2VxKAoJCQkkZWxtJGNvcmUkU3RyaW5nJHRvVXBwZXIoY1N0cmluZyksCgkJCWNTdHJpbmcgKyAnJykgJiYgKCFfVXRpbHNfZXEoCgkJCSRlbG0kY29yZSRTdHJpbmckdG9Mb3dlcihjU3RyaW5nKSwKCQkJY1N0cmluZyArICcnKSkpID8gKChjb2RlIDw9IDg1NDMpIHx8ICgoKDg1NjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTM5NykpIHx8ICgoOTQyNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA5ODMwNDApKSkpIDogKChjb2RlIDwgMTIwMDE1KSA/ICgoY29kZSA8IDg1MDkpID8gKCgoOTc4IDw9IGNvZGUpICYmIChjb2RlIDw9IDk4MCkpIHx8ICgoY29kZSA9PT0gODQ1MCkgfHwgKChjb2RlID09PSA4NDU1KSB8fCAoKCg4NDU5IDw9IGNvZGUpICYmIChjb2RlIDw9IDg0NjEpKSB8fCAoKCg4NDY0IDw9IGNvZGUpICYmIChjb2RlIDw9IDg0NjYpKSB8fCAoKGNvZGUgPT09IDg0NjkpIHx8ICgoKDg0NzMgPD0gY29kZSkgJiYgKGNvZGUgPD0gODQ3NykpIHx8ICgoY29kZSA9PT0gODQ4NCkgfHwgKChjb2RlID09PSA4NDg4KSB8fCAoKCg4NDkwIDw9IGNvZGUpICYmIChjb2RlIDw9IDg0OTMpKSB8fCAoKDg0OTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gODQ5OSkpKSkpKSkpKSkpKSA6ICgoKDg1MTAgPD0gY29kZSkgJiYgKGNvZGUgPD0gODUxMSkpIHx8ICgoY29kZSA9PT0gODUxNykgfHwgKCgoMTE5ODA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDExOTgzMykpIHx8ICgoKDExOTg2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk4ODUpKSB8fCAoKCgxMTk5MTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE5OTM3KSkgfHwgKChjb2RlID09PSAxMTk5NjQpIHx8ICgoKDExOTk2NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk5NjcpKSB8fCAoKGNvZGUgPT09IDExOTk3MCkgfHwgKCgoMTE5OTczIDw9IGNvZGUpICYmIChjb2RlIDw9IDExOTk3NCkpIHx8ICgoKDExOTk3NyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk5ODApKSB8fCAoKDExOTk4MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk5ODkpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgMTIwMjIzKSA/ICgoKDEyMDAxNiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAwNDEpKSB8fCAoKCgxMjAwNjggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMDY5KSkgfHwgKCgoMTIwMDcxIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDA3NCkpIHx8ICgoKDEyMDA3NyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAwODQpKSB8fCAoKCgxMjAwODYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMDkyKSkgfHwgKCgoMTIwMTIwIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDEyMSkpIHx8ICgoKDEyMDEyMyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAxMjYpKSB8fCAoKCgxMjAxMjggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMTMyKSkgfHwgKChjb2RlID09PSAxMjAxMzQpIHx8ICgoKDEyMDEzOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAxNDQpKSB8fCAoKDEyMDE3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAxOTcpKSkpKSkpKSkpKSkgOiAoKCgxMjAyMjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMjQ5KSkgfHwgKCgoMTIwMjc2IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDMwMSkpIHx8ICgoKDEyMDMyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAzNTMpKSB8fCAoKCgxMjAzODAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNDA1KSkgfHwgKCgoMTIwNDMyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDQ1NykpIHx8ICgoKDEyMDQ4OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA1MTIpKSB8fCAoKCgxMjA1NDYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNTcwKSkgfHwgKCgoMTIwNjA0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDYyOCkpIHx8ICgoKDEyMDY2MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA2ODYpKSB8fCAoKCgxMjA3MjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNzQ0KSkgfHwgKGNvZGUgPT09IDEyMDc3OCkpKSkpKSkpKSkpKSk7Cgl9KCk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHlwZU5hbWUgPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZVdpdGhvdXRMaW5lYnJlYWssICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJHVuaWNvZGVJc1VwcGVyRmFzdCwgJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkdW5pY29kZUlzQWxwaGFOdW1PclVuZGVyc2NvcmVGYXN0KTsKZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJG1heWJlRG90VHlwZU5hbWVzVHVwbGUoKSB7CglyZXR1cm4gQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMk9yU3VjY2VlZCwKCQlGMigKCQkJZnVuY3Rpb24gKHN0YXJ0TmFtZSwgYWZ0ZXJTdGFydE5hbWUpIHsKCQkJCWlmIChhZnRlclN0YXJ0TmFtZS4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCV9VdGlsc19UdXBsZTIoX0xpc3RfTmlsLCBzdGFydE5hbWUpKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIF92MSA9IGFmdGVyU3RhcnROYW1lLmE7CgkJCQkJdmFyIHF1YWxpZmljYXRpb25BZnRlciA9IF92MS5hOwoJCQkJCXZhciB1bnF1YWxpZmllZCA9IF92MS5iOwoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHN0YXJ0TmFtZSwgcXVhbGlmaWNhdGlvbkFmdGVyKSwKCQkJCQkJCXVucXVhbGlmaWVkKSk7CgkJCQl9CgkJCX0pLAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICcuJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsYXp5KAoJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJG1heWJlRG90VHlwZU5hbWVzVHVwbGUoKTsKCQkJfSksCgkJJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpOwp9CnRyeSB7Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkbWF5YmVEb3RUeXBlTmFtZXNUdXBsZSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRtYXliZURvdFR5cGVOYW1lc1R1cGxlKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkbWF5YmVEb3RUeXBlTmFtZXNUdXBsZSA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkbWF5YmVEb3RUeXBlTmFtZXNUdXBsZTsKCX07Cn0gY2F0Y2ggKCQpIHsKCXRocm93ICdTb21lIHRvcC1sZXZlbCBkZWZpbml0aW9ucyBmcm9tIGBFbG0uUGFyc2VyLlBhdHRlcm5zYCBhcmUgY2F1c2luZyBpbmZpbml0ZSByZWN1cnNpb246XG5cbiAg4pSM4pSA4pSA4pSA4pSA4pSA4pSQXG4gIOKUgiAgICBtYXliZURvdFR5cGVOYW1lc1R1cGxlXG4gIOKUlOKUgOKUgOKUgOKUgOKUgOKUmFxuXG5UaGVzZSBlcnJvcnMgYXJlIHZlcnkgdHJpY2t5LCBzbyByZWFkIGh0dHBzOi8vZWxtLWxhbmcub3JnLzAuMTkuMS9iYWQtcmVjdXJzaW9uIHRvIGxlYXJuIGhvdyB0byBmaXggaXQhJzt9CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRxdWFsaWZpZWROYW1lUmVmTm9kZSA9IEEzKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhSYW5nZSwKCUYzKAoJCWZ1bmN0aW9uIChyYW5nZSwgZmlyc3ROYW1lLCBhZnRlcikgewoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQlyYW5nZSwKCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQlpZiAoYWZ0ZXIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiB7bW9kdWxlTmFtZTogX0xpc3RfTmlsLCBuYW1lOiBmaXJzdE5hbWV9OwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjEgPSBhZnRlci5hOwoJCQkJCQl2YXIgcXVhbGlmaWNhdGlvbkFmdGVyID0gX3YxLmE7CgkJCQkJCXZhciB1bnF1YWxpZmllZCA9IF92MS5iOwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbW9kdWxlTmFtZTogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZmlyc3ROYW1lLCBxdWFsaWZpY2F0aW9uQWZ0ZXIpLAoJCQkJCQkJbmFtZTogdW5xdWFsaWZpZWQKCQkJCQkJfTsKCQkJCQl9CgkJCQl9KCkpOwoJCX0pLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkbWF5YmVEb3RUeXBlTmFtZXNUdXBsZSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRxdWFsaWZpZWRQYXR0ZXJuV2l0aG91dENvbnN1bWVBcmdzID0gQTMoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyV2l0aFJhbmdlLAoJRjMoCgkJZnVuY3Rpb24gKHJhbmdlLCBmaXJzdE5hbWUsIGFmdGVyKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiROYW1lZFBhdHRlcm4sCgkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCWlmIChhZnRlci4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQlyZXR1cm4ge21vZHVsZU5hbWU6IF9MaXN0X05pbCwgbmFtZTogZmlyc3ROYW1lfTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIF92MSA9IGFmdGVyLmE7CgkJCQkJCQkJdmFyIHF1YWxpZmljYXRpb25BZnRlciA9IF92MS5hOwoJCQkJCQkJCXZhciB1bnF1YWxpZmllZCA9IF92MS5iOwoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCW1vZHVsZU5hbWU6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGZpcnN0TmFtZSwgcXVhbGlmaWNhdGlvbkFmdGVyKSwKCQkJCQkJCQkJbmFtZTogdW5xdWFsaWZpZWQKCQkJCQkJCQl9OwoJCQkJCQkJfQoJCQkJCQl9KCksCgkJCQkJCV9MaXN0X05pbCkpCgkJCX07CgkJfSksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHlwZU5hbWUsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRtYXliZURvdFR5cGVOYW1lc1R1cGxlKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kUmVjb3JkUGF0dGVybiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdSZWNvcmRQYXR0ZXJuJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRyZWNvcmRQYXR0ZXJuID0gQTMoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyV2l0aFJhbmdlLAoJRjMoCgkJZnVuY3Rpb24gKHJhbmdlLCBjb21tZW50c0JlZm9yZUVsZW1lbnRzLCBlbGVtZW50cykgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgZWxlbWVudHMuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlRWxlbWVudHMpLAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJcmFuZ2UsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRSZWNvcmRQYXR0ZXJuKGVsZW1lbnRzLnN5bnRheCkpCgkJCX07CgkJfSksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAneycsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCglBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGZvbGxvd2VkQnlTeW1ib2wsCgkJCSd9JywKCQkJQTQoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzLAoJCQkJRjMoCgkJCQkJZnVuY3Rpb24gKGhlYWQsIGNvbW1lbnRzQWZ0ZXJIZWFkLCB0YWlsKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCB0YWlsLmNvbW1lbnRzLCBjb21tZW50c0FmdGVySGVhZCksCgkJCQkJCQlzeW50YXg6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGhlYWQsIHRhaWwuc3ludGF4KQoJCQkJCQl9OwoJCQkJCX0pLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJG1hbnkoCgkJCQkJQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQkJCScsJywKCQkJCQkJQTQoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzLAoJCQkJCQkJRjMoCgkJCQkJCQkJZnVuY3Rpb24gKGJlZm9yZU5hbWUsIG5hbWUsIGFmdGVyTmFtZSkgewoJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgYWZ0ZXJOYW1lLCBiZWZvcmVOYW1lKSwKCQkJCQkJCQkJCXN5bnRheDogbmFtZQoJCQkJCQkJCQl9OwoJCQkJCQkJCX0pLAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUsCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpKSkpKSwKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQknfScsCgkJCXtjb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksIHN5bnRheDogX0xpc3RfTmlsfSkpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kU3RyaW5nUGF0dGVybiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdTdHJpbmdQYXR0ZXJuJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRzdHJpbmdQYXR0ZXJuID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHNpbmdsZU9yVHJpcGxlUXVvdGVkU3RyaW5nTGl0ZXJhbE1hcFdpdGhSYW5nZSgKCUYyKAoJCWZ1bmN0aW9uIChyYW5nZSwgc3RyaW5nKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJFN0cmluZ1BhdHRlcm4oc3RyaW5nKSkKCQkJfTsKCQl9KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJFZhclBhdHRlcm4gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVmFyUGF0dGVybicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU1hcFdpdGhSYW5nZSA9IGZ1bmN0aW9uIChyYW5nZUFuZE5hbWVUb1Jlc3VsdCkgewoJcmV0dXJuIEE0KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGlmRm9sbG93ZWRCeVdoaWxlVmFsaWRhdGVNYXBXaXRoUmFuZ2VXaXRob3V0TGluZWJyZWFrLCByYW5nZUFuZE5hbWVUb1Jlc3VsdCwgJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkdW5pY29kZUlzTG93ZXJGYXN0LCAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSR1bmljb2RlSXNBbHBoYU51bU9yVW5kZXJzY29yZUZhc3QsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRpc05vdFJlc2VydmVkKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHZhclBhdHRlcm4gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lTWFwV2l0aFJhbmdlKAoJRjIoCgkJZnVuY3Rpb24gKHJhbmdlLCBfdmFyKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJFZhclBhdHRlcm4oX3ZhcikpCgkJCX07CgkJfSkpOwpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkY29tcG9zYWJsZVBhdHRlcm5UcnlUb0NvbXBvc2UoKSB7CglyZXR1cm4gQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQlGMygKCQkJZnVuY3Rpb24gKHgsIGNvbW1lbnRzQWZ0ZXJMZWZ0LCBtYXliZUNvbXBvc2VkV2l0aFJlc3VsdCkgewoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJbWF5YmVDb21wb3NlZFdpdGhSZXN1bHQuY29tbWVudHMsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlckxlZnQsIHguY29tbWVudHMpKSwKCQkJCQlzeW50YXg6IGZ1bmN0aW9uICgpIHsKCQkJCQkJdmFyIF92NyA9IG1heWJlQ29tcG9zZWRXaXRoUmVzdWx0LnN5bnRheDsKCQkJCQkJc3dpdGNoIChfdjcuJCkgewoJCQkJCQkJY2FzZSAnUGF0dGVybkNvbXBvc2VkV2l0aE5vdGhpbmcnOgoJCQkJCQkJCXJldHVybiB4LnN5bnRheDsKCQkJCQkJCWNhc2UgJ1BhdHRlcm5Db21wb3NlZFdpdGhBcyc6CgkJCQkJCQkJdmFyIGFub3RoZXJOYW1lID0gX3Y3LmE7CgkJCQkJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkY29tYmluZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRBc1BhdHRlcm4sIHguc3ludGF4LCBhbm90aGVyTmFtZSk7CgkJCQkJCQlkZWZhdWx0OgoJCQkJCQkJCXZhciB5ID0gX3Y3LmE7CgkJCQkJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkY29tYmluZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRVbkNvbnNQYXR0ZXJuLCB4LnN5bnRheCwgeSk7CgkJCQkJCX0KCQkJCQl9KCkKCQkJCX07CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRjb21wb3NhYmxlUGF0dGVybigpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkbWF5YmVDb21wb3NlZFdpdGgoKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJGNvbXBvc2FibGVQYXR0ZXJuKCkgewoJcmV0dXJuIEE5KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mOSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyR2YXJQYXR0ZXJuLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRxdWFsaWZpZWRQYXR0ZXJuV2l0aENvbnN1bWVBcmdzKCksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkYWxsUGF0dGVybiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcGFyZW5zUGF0dGVybigpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHJlY29yZFBhdHRlcm4sCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkc3RyaW5nUGF0dGVybiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkbGlzdFBhdHRlcm4oKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRudW1iZXJQYXJ0LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGNoYXJQYXR0ZXJuKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcXVhbGlmaWVkUGF0dGVybldpdGhDb25zdW1lQXJncygpIHsKCXJldHVybiBBNCgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzLAoJCUYzKAoJCQlmdW5jdGlvbiAoX3Y0LCBhZnRlclN0YXJ0TmFtZSwgYXJnc1JldmVyc2UpIHsKCQkJCXZhciBuYW1lUmFuZ2UgPSBfdjQuYTsKCQkJCXZhciBuYW1lID0gX3Y0LmI7CgkJCQl2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoKSB7CgkJCQkJdmFyIF92NSA9IGFyZ3NSZXZlcnNlLnN5bnRheDsKCQkJCQlpZiAoIV92NS5iKSB7CgkJCQkJCXJldHVybiBuYW1lUmFuZ2U7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIF92NiA9IF92NS5hOwoJCQkJCQl2YXIgbGFzdEFyZ1JhbmdlID0gX3Y2LmE7CgkJCQkJCXJldHVybiB7ZW5kOiBsYXN0QXJnUmFuZ2UuZW5kLCBzdGFydDogbmFtZVJhbmdlLnN0YXJ0fTsKCQkJCQl9CgkJCQl9KCk7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGFyZ3NSZXZlcnNlLmNvbW1lbnRzLCBhZnRlclN0YXJ0TmFtZSksCgkJCQkJc3ludGF4OiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQlyYW5nZSwKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJE5hbWVkUGF0dGVybiwKCQkJCQkJCW5hbWUsCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKGFyZ3NSZXZlcnNlLnN5bnRheCkpKQoJCQkJfTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcXVhbGlmaWVkTmFtZVJlZk5vZGUsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQsCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyRtYW55V2l0aG91dFJldmVyc2UoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRwb3NpdGl2ZWx5SW5kZW50ZWRGb2xsb3dlZEJ5KAoJCQkJQTMoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJCQlGMigKCQkJCQkJZnVuY3Rpb24gKGFyZywgY29tbWVudHNBZnRlckFyZykgewoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyQXJnLCBhcmcuY29tbWVudHMpLAoJCQkJCQkJCXN5bnRheDogYXJnLnN5bnRheAoJCQkJCQkJfTsKCQkJCQkJfSksCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhdHRlcm5Ob3REaXJlY3RseUNvbXBvc2luZygpLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvcHRpbWlzdGljTGF5b3V0KSkpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcGF0dGVybk5vdERpcmVjdGx5Q29tcG9zaW5nKCkgewoJcmV0dXJuIEE5KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mOSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyR2YXJQYXR0ZXJuLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHF1YWxpZmllZFBhdHRlcm5XaXRob3V0Q29uc3VtZUFyZ3MsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkYWxsUGF0dGVybiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcGFyZW5zUGF0dGVybigpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHJlY29yZFBhdHRlcm4sCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkc3RyaW5nUGF0dGVybiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkbGlzdFBhdHRlcm4oKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRudW1iZXJQYXJ0LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGNoYXJQYXR0ZXJuKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkbGlzdFBhdHRlcm4oKSB7CglyZXR1cm4gQTMoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhSYW5nZSwKCQlGMygKCQkJZnVuY3Rpb24gKHJhbmdlLCBjb21tZW50c0JlZm9yZUVsZW1lbnRzLCBtYXliZUVsZW1lbnRzKSB7CgkJCQlpZiAobWF5YmVFbGVtZW50cy4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogY29tbWVudHNCZWZvcmVFbGVtZW50cywKCQkJCQkJc3ludGF4OiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsIHJhbmdlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRwYXR0ZXJuTGlzdEVtcHR5KQoJCQkJCX07CgkJCQl9IGVsc2UgewoJCQkJCXZhciBlbGVtZW50cyA9IG1heWJlRWxlbWVudHMuYTsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBlbGVtZW50cy5jb21tZW50cywgY29tbWVudHNCZWZvcmVFbGVtZW50cyksCgkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQlyYW5nZSwKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kTGlzdFBhdHRlcm4oZWxlbWVudHMuc3ludGF4KSkKCQkJCQl9OwoJCQkJfQoJCQl9KSwKCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAnWycsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwKCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLCAnXScsICRlbG0kY29yZSRNYXliZSROb3RoaW5nKSwKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U3ltYm9sLAoJCQkJJ10nLAoJCQkJQTQoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQkJCQlGMygKCQkJCQkJZnVuY3Rpb24gKGhlYWQsIGNvbW1lbnRzQWZ0ZXJIZWFkLCB0YWlsKSB7CgkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJewoJCQkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQljb21tZW50c0FmdGVySGVhZCwKCQkJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgdGFpbC5jb21tZW50cywgaGVhZC5jb21tZW50cykpLAoJCQkJCQkJCQlzeW50YXg6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGhlYWQuc3ludGF4LCB0YWlsLnN5bnRheCkKCQkJCQkJCQl9KTsKCQkJCQkJfSksCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhdHRlcm4oKSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyRtYW55KAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQkJCQknLCcsCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVBcm91bmRCb3RoU2lkZXMoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhdHRlcm4oKSkpKSkpKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJG1heWJlQ29tcG9zZWRXaXRoKCkgewoJcmV0dXJuIEEzKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMk9yU3VjY2VlZCwKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZEZvbGxvd2VkQnksCgkJCSdhcycsCgkJCUEzKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJCUYyKAoJCQkJCWZ1bmN0aW9uIChjb21tZW50c0FmdGVyQXMsIG5hbWUpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWNvbW1lbnRzOiBjb21tZW50c0FmdGVyQXMsCgkJCQkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJFBhdHRlcm5Db21wb3NlZFdpdGhBcyhuYW1lKQoJCQkJCQl9OwoJCQkJCX0pLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUpKSwKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJJzo6JywKCQkJQTMoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJRjIoCgkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQWZ0ZXJDb25zLCBwYXR0ZXJuUmVzdWx0KSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBwYXR0ZXJuUmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c0FmdGVyQ29ucyksCgkJCQkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJFBhdHRlcm5Db21wb3NlZFdpdGhDb25zKHBhdHRlcm5SZXN1bHQuc3ludGF4KQoJCQkJCQl9OwoJCQkJCX0pLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhdHRlcm4oKSkpLAoJCXsKCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJFBhdHRlcm5Db21wb3NlZFdpdGhOb3RoaW5nKF9VdGlsc19UdXBsZTApCgkJfSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhcmVuc1BhdHRlcm4oKSB7CglyZXR1cm4gQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQknKCcsCgkJQTMoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJXaXRoUmFuZ2UsCgkJCUYzKAoJCQkJZnVuY3Rpb24gKHJhbmdlLCBjb21tZW50c0JlZm9yZUhlYWQsIGNvbnRlbnRSZXN1bHQpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb250ZW50UmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZUhlYWQpLAoJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJewoJCQkJCQkJCWVuZDogcmFuZ2UuZW5kLAoJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiByYW5nZS5zdGFydC5jb2x1bW4gLSAxLCByb3c6IHJhbmdlLnN0YXJ0LnJvd30KCQkJCQkJCX0sCgkJCQkJCQljb250ZW50UmVzdWx0LnN5bnRheCkKCQkJCQl9OwoJCQkJfSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJCQlBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wsCgkJCQkJJyknLAoJCQkJCXtjb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksIHN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRVbml0UGF0dGVybn0pLAoJCQkJQTQoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQkJCQlGMygKCQkJCQkJZnVuY3Rpb24gKGhlYWRSZXN1bHQsIGNvbW1lbnRzQWZ0ZXJIZWFkLCB0YWlsUmVzdWx0KSB7CgkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQl0YWlsUmVzdWx0LmNvbW1lbnRzLAoJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJIZWFkLCBoZWFkUmVzdWx0LmNvbW1lbnRzKSksCgkJCQkJCQkJc3ludGF4OiBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJCXZhciBfdjEgPSB0YWlsUmVzdWx0LnN5bnRheDsKCQkJCQkJCQkJaWYgKF92MS4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJFBhcmVudGhlc2l6ZWRQYXR0ZXJuKGhlYWRSZXN1bHQuc3ludGF4KTsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXZhciBzZWNvbmRBbmRNYXliZVRoaXJkUGFydCA9IF92MS5hOwoJCQkJCQkJCQkJdmFyIF92MiA9IHNlY29uZEFuZE1heWJlVGhpcmRQYXJ0Lm1heWJlVGhpcmRQYXJ0OwoJCQkJCQkJCQkJaWYgKF92Mi4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRUdXBsZVBhdHRlcm4oCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVtoZWFkUmVzdWx0LnN5bnRheCwgc2Vjb25kQW5kTWF5YmVUaGlyZFBhcnQuc2Vjb25kUGFydF0pKTsKCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJdmFyIHRoaXJkUGFydCA9IF92Mi5hOwoJCQkJCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJFR1cGxlUGF0dGVybigKCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJW2hlYWRSZXN1bHQuc3ludGF4LCBzZWNvbmRBbmRNYXliZVRoaXJkUGFydC5zZWNvbmRQYXJ0LCB0aGlyZFBhcnRdKSk7CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9KCkKCQkJCQkJCX07CgkJCQkJCX0pLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRwYXR0ZXJuKCksCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCUEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQkJCQkJJyknLAoJCQkJCQkJe2NvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwgc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZ30pLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQkJCQknLCcsCgkJCQkJCQlBNSgKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0LAoJCQkJCQkJCUY0KAoJCQkJCQkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmUsIHNlY29uZFBhcnQsIGNvbW1lbnRzQWZ0ZXIsIG1heWJlVGhpcmRQYXJ0KSB7CgkJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJCQltYXliZVRoaXJkUGFydC5jb21tZW50cywKCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQkJCQljb21tZW50c0FmdGVyLAoJCQkJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBzZWNvbmRQYXJ0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZSkpKSwKCQkJCQkJCQkJCQlzeW50YXg6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCQkJCQl7bWF5YmVUaGlyZFBhcnQ6IG1heWJlVGhpcmRQYXJ0LnN5bnRheCwgc2Vjb25kUGFydDogc2Vjb25kUGFydC5zeW50YXh9KQoJCQkJCQkJCQkJfTsKCQkJCQkJCQkJfSksCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRwYXR0ZXJuKCksCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQkJCQkJCQkJJyknLAoJCQkJCQkJCQkJe2NvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwgc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZ30pLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQkJCQkJCQknLCcsCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U3ltYm9sLAoJCQkJCQkJCQkJCScpJywKCQkJCQkJCQkJCQlBNCgKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQkJCQkJCQkJCQkJRjMoCgkJCQkJCQkJCQkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmUsIHRoaXJkUGFydCwgY29tbWVudHNBZnRlcikgewoJCQkJCQkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJCQkJCQkJCWNvbW1lbnRzQWZ0ZXIsCgkJCQkJCQkJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHRoaXJkUGFydC5jb21tZW50cywgY29tbWVudHNCZWZvcmUpKSwKCQkJCQkJCQkJCQkJCQkJc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkSnVzdCh0aGlyZFBhcnQuc3ludGF4KQoJCQkJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQkJCQl9KSwKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcGF0dGVybigpLAoJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpKSkpKSkpKSkpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcGF0dGVybigpIHsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsYXp5KAoJCWZ1bmN0aW9uIChfdjApIHsKCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRjb21wb3NhYmxlUGF0dGVyblRyeVRvQ29tcG9zZSgpOwoJCX0pOwp9CnRyeSB7Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY29tcG9zYWJsZVBhdHRlcm5UcnlUb0NvbXBvc2UgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkY29tcG9zYWJsZVBhdHRlcm5UcnlUb0NvbXBvc2UoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRjb21wb3NhYmxlUGF0dGVyblRyeVRvQ29tcG9zZSA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY29tcG9zYWJsZVBhdHRlcm5UcnlUb0NvbXBvc2U7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGNvbXBvc2FibGVQYXR0ZXJuID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJGNvbXBvc2FibGVQYXR0ZXJuKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkY29tcG9zYWJsZVBhdHRlcm4gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGNvbXBvc2FibGVQYXR0ZXJuOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRxdWFsaWZpZWRQYXR0ZXJuV2l0aENvbnN1bWVBcmdzID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHF1YWxpZmllZFBhdHRlcm5XaXRoQ29uc3VtZUFyZ3MoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRxdWFsaWZpZWRQYXR0ZXJuV2l0aENvbnN1bWVBcmdzID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRxdWFsaWZpZWRQYXR0ZXJuV2l0aENvbnN1bWVBcmdzOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRwYXR0ZXJuTm90RGlyZWN0bHlDb21wb3NpbmcgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcGF0dGVybk5vdERpcmVjdGx5Q29tcG9zaW5nKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcGF0dGVybk5vdERpcmVjdGx5Q29tcG9zaW5nID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRwYXR0ZXJuTm90RGlyZWN0bHlDb21wb3Npbmc7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGxpc3RQYXR0ZXJuID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJGxpc3RQYXR0ZXJuKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkbGlzdFBhdHRlcm4gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGxpc3RQYXR0ZXJuOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRtYXliZUNvbXBvc2VkV2l0aCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRtYXliZUNvbXBvc2VkV2l0aCgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJG1heWJlQ29tcG9zZWRXaXRoID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRtYXliZUNvbXBvc2VkV2l0aDsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcGFyZW5zUGF0dGVybiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRwYXJlbnNQYXR0ZXJuKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcGFyZW5zUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcGFyZW5zUGF0dGVybjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcGF0dGVybiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRwYXR0ZXJuKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcGF0dGVybjsKCX07Cn0gY2F0Y2ggKCQpIHsKCXRocm93ICdTb21lIHRvcC1sZXZlbCBkZWZpbml0aW9ucyBmcm9tIGBFbG0uUGFyc2VyLlBhdHRlcm5zYCBhcmUgY2F1c2luZyBpbmZpbml0ZSByZWN1cnNpb246XG5cbiAg4pSM4pSA4pSA4pSA4pSA4pSA4pSQXG4gIOKUgiAgICBjb21wb3NhYmxlUGF0dGVyblRyeVRvQ29tcG9zZVxuICDilIIgICAgIOKGk1xuICDilIIgICAgY29tcG9zYWJsZVBhdHRlcm5cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHF1YWxpZmllZFBhdHRlcm5XaXRoQ29uc3VtZUFyZ3NcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHBhdHRlcm5Ob3REaXJlY3RseUNvbXBvc2luZ1xuICDilIIgICAgIOKGk1xuICDilIIgICAgbGlzdFBhdHRlcm5cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIG1heWJlQ29tcG9zZWRXaXRoXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwYXJlbnNQYXR0ZXJuXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwYXR0ZXJuXG4gIOKUlOKUgOKUgOKUgOKUgOKUgOKUmFxuXG5UaGVzZSBlcnJvcnMgYXJlIHZlcnkgdHJpY2t5LCBzbyByZWFkIGh0dHBzOi8vZWxtLWxhbmcub3JnLzAuMTkuMS9iYWQtcmVjdXJzaW9uIHRvIGxlYXJuIGhvdyB0byBmaXggaXQhJzt9CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJHVudGlsID0gRjIoCglmdW5jdGlvbiAoZW5kLCBlbGVtZW50KSB7CgkJcmV0dXJuIEE1KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wVW50aWwsCgkJCWVuZCwKCQkJZWxlbWVudCwKCQkJX1V0aWxzX1R1cGxlMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwgX0xpc3RfTmlsKSwKCQkJRjIoCgkJCQlmdW5jdGlvbiAocFJlc3VsdCwgX3YwKSB7CgkJCQkJdmFyIGNvbW1lbnRzU29GYXIgPSBfdjAuYTsKCQkJCQl2YXIgaXRlbXNTb0ZhciA9IF92MC5iOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHBSZXN1bHQuY29tbWVudHMsIGNvbW1lbnRzU29GYXIpLAoJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBwUmVzdWx0LnN5bnRheCwgaXRlbXNTb0ZhcikpOwoJCQkJfSksCgkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCXZhciBjb21tZW50c1NvRmFyID0gX3YxLmE7CgkJCQl2YXIgaXRlbXNTb0ZhciA9IF92MS5iOwoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogY29tbWVudHNTb0ZhciwKCQkJCQlzeW50YXg6ICRlbG0kY29yZSRMaXN0JHJldmVyc2UoaXRlbXNTb0ZhcikKCQkJCX07CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHBhcmFtZXRlclBhdHRlcm5zRXF1YWwgPSBBMigKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkdW50aWwsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZXF1YWwsCglBMygKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCUYyKAoJCQlmdW5jdGlvbiAocGF0dGVyblJlc3VsdCwgY29tbWVudHNBZnRlclBhdHRlcm4pIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlclBhdHRlcm4sIHBhdHRlcm5SZXN1bHQuY29tbWVudHMpLAoJCQkJCXN5bnRheDogcGF0dGVyblJlc3VsdC5zeW50YXgKCQkJCX07CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHBhdHRlcm5Ob3REaXJlY3RseUNvbXBvc2luZywKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRwb3NpdGl2ZWx5SW5kZW50ZWRQbHVzRm9sbG93ZWRCeSA9IEYyKAoJZnVuY3Rpb24gKGV4dHJhSW5kZW50LCBuZXh0UGFyc2VyKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbHVtbkluZGVudEFuZFRoZW4oCgkJCUYyKAoJCQkJZnVuY3Rpb24gKGNvbHVtbiwgaW5kZW50KSB7CgkJCQkJcmV0dXJuIChfVXRpbHNfY21wKGNvbHVtbiwgaW5kZW50ICsgZXh0cmFJbmRlbnQpID4gMCkgPyBuZXh0UGFyc2VyIDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHByb2JsZW1Qb3NpdGl2ZWx5SW5kZW50ZWQ7CgkJCQl9KSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJvYmxlbUNhbm5vdE1peE5vbkFzc29jaWF0aXZlSW5maXhPcGVyYXRvcnMgPSAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRwcm9ibGVtKCdjYW5ub3QgbWl4IG5vbi1hc3NvY2lhdGl2ZSBpbmZpeCBvcGVyYXRvcnMgd2l0aG91dCBwYXJlbnRoZXNpcycpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRyYW5nZU1vdmVTdGFydExlZnRCeU9uZUNvbHVtbiA9IGZ1bmN0aW9uIChyYW5nZSkgewoJcmV0dXJuIHsKCQllbmQ6IHJhbmdlLmVuZCwKCQlzdGFydDoge2NvbHVtbjogcmFuZ2Uuc3RhcnQuY29sdW1uIC0gMSwgcm93OiByYW5nZS5zdGFydC5yb3d9Cgl9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRSZWNvcmRBY2Nlc3NGdW5jdGlvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdSZWNvcmRBY2Nlc3NGdW5jdGlvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRyZWNvcmRBY2Nlc3NGdW5jdGlvbkV4cHJlc3Npb24gPSBBMigKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgknLicsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lTWFwV2l0aFJhbmdlKAoJCUYyKAoJCQlmdW5jdGlvbiAocmFuZ2UsIGZpZWxkKSB7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcmFuZ2VNb3ZlU3RhcnRMZWZ0QnlPbmVDb2x1bW4ocmFuZ2UpLAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJFJlY29yZEFjY2Vzc0Z1bmN0aW9uKCcuJyArIGZpZWxkKSkKCQkJCX07CgkJCX0pKSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJEZsb2F0YWJsZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdGbG9hdGFibGUnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kSGV4ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0hleCcsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRJbnRlZ2VyID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0ludGVnZXInLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXAwT3JNb3JlRGlnaXRzMFRvOSA9IEYyKAoJZnVuY3Rpb24gKG9mZnNldCwgc3JjKSB7CgkJc2tpcDBPck1vcmVEaWdpdHMwVG85OgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBfdjAgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDEsIHNyYyk7CgkJCXN3aXRjaCAoX3YwKSB7CgkJCQljYXNlICcwJzoKCQkJCQl2YXIgJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgc2tpcDBPck1vcmVEaWdpdHMwVG85OwoJCQkJY2FzZSAnMSc6CgkJCQkJdmFyICR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIHNraXAwT3JNb3JlRGlnaXRzMFRvOTsKCQkJCWNhc2UgJzInOgoJCQkJCXZhciAkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBza2lwME9yTW9yZURpZ2l0czBUbzk7CgkJCQljYXNlICczJzoKCQkJCQl2YXIgJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgc2tpcDBPck1vcmVEaWdpdHMwVG85OwoJCQkJY2FzZSAnNCc6CgkJCQkJdmFyICR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIHNraXAwT3JNb3JlRGlnaXRzMFRvOTsKCQkJCWNhc2UgJzUnOgoJCQkJCXZhciAkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBza2lwME9yTW9yZURpZ2l0czBUbzk7CgkJCQljYXNlICc2JzoKCQkJCQl2YXIgJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgc2tpcDBPck1vcmVEaWdpdHMwVG85OwoJCQkJY2FzZSAnNyc6CgkJCQkJdmFyICR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIHNraXAwT3JNb3JlRGlnaXRzMFRvOTsKCQkJCWNhc2UgJzgnOgoJCQkJCXZhciAkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBza2lwME9yTW9yZURpZ2l0czBUbzk7CgkJCQljYXNlICc5JzoKCQkJCQl2YXIgJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgc2tpcDBPck1vcmVEaWdpdHMwVG85OwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gb2Zmc2V0OwoJCQl9CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwMU9yTW9yZURpZ2l0czBUbzkgPSBGMigKCWZ1bmN0aW9uIChvZmZzZXQsIHNyYykgewoJCXZhciBfdjAgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDEsIHNyYyk7CgkJc3dpdGNoIChfdjApIHsKCQkJY2FzZSAnMCc6CgkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcDBPck1vcmVEaWdpdHMwVG85LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICcxJzoKCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwME9yTW9yZURpZ2l0czBUbzksIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzInOgoJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXAwT3JNb3JlRGlnaXRzMFRvOSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnMyc6CgkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcDBPck1vcmVEaWdpdHMwVG85LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICc0JzoKCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwME9yTW9yZURpZ2l0czBUbzksIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzUnOgoJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXAwT3JNb3JlRGlnaXRzMFRvOSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnNic6CgkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcDBPck1vcmVEaWdpdHMwVG85LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICc3JzoKCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwME9yTW9yZURpZ2l0czBUbzksIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzgnOgoJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXAwT3JNb3JlRGlnaXRzMFRvOSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnOSc6CgkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcDBPck1vcmVEaWdpdHMwVG85LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIC0xOwoJCX0KCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcEFmdGVyRmxvYXRFeHBvbmVudE1hcmsgPSBGMigKCWZ1bmN0aW9uIChvZmZzZXQsIHNyYykgewoJCXZhciBfdjAgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDEsIHNyYyk7CgkJc3dpdGNoIChfdjApIHsKCQkJY2FzZSAnKyc6CgkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcDFPck1vcmVEaWdpdHMwVG85LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICctJzoKCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwMU9yTW9yZURpZ2l0czBUbzksIG9mZnNldCArIDEsIHNyYyk7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcDFPck1vcmVEaWdpdHMwVG85LCBvZmZzZXQsIHNyYyk7CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwRmxvYXRBZnRlckludGVnZXJEZWNpbWFsID0gRjIoCglmdW5jdGlvbiAob2Zmc2V0LCBzcmMpIHsKCQl2YXIgX3YwID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0LCBvZmZzZXQgKyAxLCBzcmMpOwoJCXN3aXRjaCAoX3YwKSB7CgkJCWNhc2UgJy4nOgoJCQkJdmFyIG9mZnNldEFmdGVyRGlnaXRzID0gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcDFPck1vcmVEaWdpdHMwVG85LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQkJaWYgKF9VdGlsc19lcShvZmZzZXRBZnRlckRpZ2l0cywgLTEpKSB7CgkJCQkJcmV0dXJuIC0xOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YxID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0QWZ0ZXJEaWdpdHMsIG9mZnNldEFmdGVyRGlnaXRzICsgMSwgc3JjKTsKCQkJCQlzd2l0Y2ggKF92MSkgewoJCQkJCQljYXNlICdlJzoKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwQWZ0ZXJGbG9hdEV4cG9uZW50TWFyaywgb2Zmc2V0QWZ0ZXJEaWdpdHMgKyAxLCBzcmMpOwoJCQkJCQljYXNlICdFJzoKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwQWZ0ZXJGbG9hdEV4cG9uZW50TWFyaywgb2Zmc2V0QWZ0ZXJEaWdpdHMgKyAxLCBzcmMpOwoJCQkJCQlkZWZhdWx0OgoJCQkJCQkJcmV0dXJuIG9mZnNldEFmdGVyRGlnaXRzOwoJCQkJCX0KCQkJCX0KCQkJY2FzZSAnZSc6CgkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcEFmdGVyRmxvYXRFeHBvbmVudE1hcmssIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJ0UnOgoJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBBZnRlckZsb2F0RXhwb25lbnRNYXJrLCBvZmZzZXQgKyAxLCBzcmMpOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIC0xOwoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJFN0cmluZyR0b0Zsb2F0ID0gX1N0cmluZ190b0Zsb2F0Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZmxvYXRPckludGVnZXJEZWNpbWFsT3JIZXhhZGVjaW1hbE1hcFdpdGhSYW5nZSA9IEYzKAoJZnVuY3Rpb24gKHJhbmdlQW5kRmxvYXRUb1JlcywgcmFuZ2VBbmRJbnREZWNpbWFsVG9SZXMsIHJhbmdlQW5kSW50SGV4YWRlY2ltYWxUb1JlcykgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIHMxID0gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydEludGVnZXJEZWNpbWFsT3JIZXhhZGVjaW1hbCwgczAub2Zmc2V0LCBzMC5zcmMpOwoJCQkJaWYgKF9VdGlsc19lcShzMS5vZmZzZXRBbmRJbnQub2Zmc2V0LCAtMSkpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJZmFsc2UsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ051bWJlciwgczAucm93LCBzMC5jb2wpKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIG9mZnNldEFmdGVyRmxvYXQgPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwRmxvYXRBZnRlckludGVnZXJEZWNpbWFsLCBzMS5vZmZzZXRBbmRJbnQub2Zmc2V0LCBzMC5zcmMpOwoJCQkJCWlmIChfVXRpbHNfZXEob2Zmc2V0QWZ0ZXJGbG9hdCwgLTEpKSB7CgkJCQkJCXZhciBuZXdDb2x1bW4gPSBzMC5jb2wgKyAoczEub2Zmc2V0QW5kSW50Lm9mZnNldCAtIHMwLm9mZnNldCk7CgkJCQkJCXZhciByYW5nZSA9IHsKCQkJCQkJCWVuZDoge2NvbHVtbjogbmV3Q29sdW1uLCByb3c6IHMwLnJvd30sCgkJCQkJCQlzdGFydDoge2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30KCQkJCQkJfTsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCQl2YXIgX3YwID0gczEuYmFzZTsKCQkJCQkJCQlpZiAoX3YwLiQgPT09ICdEZWNpbWFsJykgewoJCQkJCQkJCQlyZXR1cm4gQTIocmFuZ2VBbmRJbnREZWNpbWFsVG9SZXMsIHJhbmdlLCBzMS5vZmZzZXRBbmRJbnQuX2ludCk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJcmV0dXJuIEEyKHJhbmdlQW5kSW50SGV4YWRlY2ltYWxUb1JlcywgcmFuZ2UsIHMxLm9mZnNldEFuZEludC5faW50KTsKCQkJCQkJCQl9CgkJCQkJCQl9KCksCgkJCQkJCQl7Y29sOiBuZXdDb2x1bW4sIGluZGVudDogczAuaW5kZW50LCBvZmZzZXQ6IHMxLm9mZnNldEFuZEludC5vZmZzZXQsIHJvdzogczAucm93LCBzcmM6IHMwLnNyY30pOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjEgPSAkZWxtJGNvcmUkU3RyaW5nJHRvRmxvYXQoCgkJCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzMC5vZmZzZXQsIG9mZnNldEFmdGVyRmxvYXQsIHMwLnNyYykpOwoJCQkJCQlpZiAoX3YxLiQgPT09ICdKdXN0JykgewoJCQkJCQkJdmFyIF9mbG9hdCA9IF92MS5hOwoJCQkJCQkJdmFyIG5ld0NvbHVtbiA9IHMwLmNvbCArIChvZmZzZXRBZnRlckZsb2F0IC0gczAub2Zmc2V0KTsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQlyYW5nZUFuZEZsb2F0VG9SZXMsCgkJCQkJCQkJCXsKCQkJCQkJCQkJCWVuZDoge2NvbHVtbjogbmV3Q29sdW1uLCByb3c6IHMwLnJvd30sCgkJCQkJCQkJCQlzdGFydDoge2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30KCQkJCQkJCQkJfSwKCQkJCQkJCQkJX2Zsb2F0KSwKCQkJCQkJCQl7Y29sOiBuZXdDb2x1bW4sIGluZGVudDogczAuaW5kZW50LCBvZmZzZXQ6IG9mZnNldEFmdGVyRmxvYXQsIHJvdzogczAucm93LCBzcmM6IHMwLnNyY30pOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJCQlmYWxzZSwKCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdOdW1iZXIsIHMwLnJvdywgczAuY29sKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG51bWJlckV4cHJlc3Npb24gPSBBMygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGZsb2F0T3JJbnRlZ2VyRGVjaW1hbE9ySGV4YWRlY2ltYWxNYXBXaXRoUmFuZ2UsCglGMigKCQlmdW5jdGlvbiAocmFuZ2UsIG4pIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJCXN5bnRheDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXJhbmdlLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kRmxvYXRhYmxlKG4pKQoJCQl9OwoJCX0pLAoJRjIoCgkJZnVuY3Rpb24gKHJhbmdlLCBuKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJEludGVnZXIobikpCgkJCX07CgkJfSksCglGMigKCQlmdW5jdGlvbiAocmFuZ2UsIG4pIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJCXN5bnRheDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXJhbmdlLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kSGV4KG4pKQoJCQl9OwoJCX0pKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kRnVuY3Rpb25PclZhbHVlID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0Z1bmN0aW9uT3JWYWx1ZScsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZVZhbGlkYXRlV2l0aG91dExpbmVicmVhayA9IEYzKAoJZnVuY3Rpb24gKGZpcnN0SXNPa2F5LCBhZnRlckZpcnN0SXNPa2F5LCByZXN1bHRJc09rYXkpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIGZpcnN0T2Zmc2V0ID0gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaXNTdWJDaGFyV2l0aG91dExpbmVicmVhaywgZmlyc3RJc09rYXksIHMub2Zmc2V0LCBzLnNyYyk7CgkJCQlpZiAoX1V0aWxzX2VxKGZpcnN0T2Zmc2V0LCAtMSkpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJZmFsc2UsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0NoYXJTYXRpc2Z5aW5nUHJlZGljYXRlLCBzLnJvdywgcy5jb2wpKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHMxID0gQTYoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcFdoaWxlV2l0aG91dExpbmVicmVha0hlbHAsIGFmdGVyRmlyc3RJc09rYXksIGZpcnN0T2Zmc2V0LCBzLnJvdywgcy5jb2wgKyAxLCBzLnNyYywgcy5pbmRlbnQpOwoJCQkJCXZhciBuYW1lID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgcy5vZmZzZXQsIHMxLm9mZnNldCwgcy5zcmMpOwoJCQkJCXJldHVybiByZXN1bHRJc09rYXkobmFtZSkgPyBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLCBuYW1lLCBzMSkgOiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQlmYWxzZSwKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nU3RyaW5nU2F0aXNmeWluZ1ByZWRpY2F0ZSwgcy5yb3csIHMuY29sICsgMSkpOwoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZSA9IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGlmRm9sbG93ZWRCeVdoaWxlVmFsaWRhdGVXaXRob3V0TGluZWJyZWFrLCAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSR1bmljb2RlSXNMb3dlckZhc3QsICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJHVuaWNvZGVJc0FscGhhTnVtT3JVbmRlcnNjb3JlRmFzdCwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGlzTm90UmVzZXJ2ZWQpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyTWFwID0gRjQoCglmdW5jdGlvbiAoZmlyc3RUb0Nob2ljZSwgX3YwLCBzZWNvbmRUb0Nob2ljZSwgX3YxKSB7CgkJdmFyIGF0dGVtcHRGaXJzdCA9IF92MC5hOwoJCXZhciBhdHRlbXB0U2Vjb25kID0gX3YxLmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBfdjIgPSBhdHRlbXB0Rmlyc3Qocyk7CgkJCQlpZiAoX3YyLiQgPT09ICdHb29kJykgewoJCQkJCXZhciBmaXJzdCA9IF92Mi5hOwoJCQkJCXZhciBzMSA9IF92Mi5iOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJZmlyc3RUb0Nob2ljZShmaXJzdCksCgkJCQkJCXMxKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGZpcnN0Q29tbWl0dGVkID0gX3YyLmE7CgkJCQkJdmFyIGZpcnN0WCA9IF92Mi5iOwoJCQkJCWlmIChmaXJzdENvbW1pdHRlZCkgewoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBmaXJzdENvbW1pdHRlZCwgZmlyc3RYKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgX3YzID0gYXR0ZW1wdFNlY29uZChzKTsKCQkJCQkJaWYgKF92My4kID09PSAnR29vZCcpIHsKCQkJCQkJCXZhciBzZWNvbmQgPSBfdjMuYTsKCQkJCQkJCXZhciBzMSA9IF92My5iOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJc2Vjb25kVG9DaG9pY2Uoc2Vjb25kKSwKCQkJCQkJCQlzMSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgc2Vjb25kQ29tbWl0dGVkID0gX3YzLmE7CgkJCQkJCQl2YXIgc2Vjb25kWCA9IF92My5iOwoJCQkJCQkJcmV0dXJuIHNlY29uZENvbW1pdHRlZCA/IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgc2Vjb25kQ29tbWl0dGVkLCBzZWNvbmRYKSA6IEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJCQlmYWxzZSwKCQkJCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdPbmVPZiwgZmlyc3RYLCBzZWNvbmRYLCBfTGlzdF9OaWwpKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9yU3VjY2VlZCA9IEYyKAoJZnVuY3Rpb24gKF92MCwgc2Vjb25kUmVzKSB7CgkJdmFyIGF0dGVtcHRGaXJzdCA9IF92MC5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQl2YXIgX3YxID0gYXR0ZW1wdEZpcnN0KHMpOwoJCQkJaWYgKF92MS4kID09PSAnR29vZCcpIHsKCQkJCQl2YXIgZmlyc3RHb29kID0gX3YxOwoJCQkJCXJldHVybiBmaXJzdEdvb2Q7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBmaXJzdEJhZCA9IF92MTsKCQkJCQl2YXIgZmlyc3RDb21taXR0ZWQgPSBmaXJzdEJhZC5hOwoJCQkJCXJldHVybiBmaXJzdENvbW1pdHRlZCA/IGZpcnN0QmFkIDogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwgc2Vjb25kUmVzLCBzKTsKCQkJCX0KCQkJfSk7Cgl9KTsKZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbWF5YmVEb3RSZWZlcmVuY2VFeHByZXNzaW9uVHVwbGUoKSB7CglyZXR1cm4gQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb3JTdWNjZWVkLAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQknLicsCgkJCUE0KAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyTWFwLAoJCQkJJGVsbSRjb3JlJE1heWJlJEp1c3QsCgkJCQlBMygKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJCUYyKAoJCQkJCQlmdW5jdGlvbiAoZmlyc3ROYW1lLCBhZnRlcikgewoJCQkJCQkJaWYgKGFmdGVyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUzKF9MaXN0X05pbCwgZmlyc3ROYW1lLCBfTGlzdF9OaWwpOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgX3YxID0gYWZ0ZXIuYTsKCQkJCQkJCQl2YXIgcXVhbGlmaWNhdGlvbkFmdGVyID0gX3YxLmE7CgkJCQkJCQkJdmFyIHVucXVhbGlmaWVkID0gX3YxLmI7CgkJCQkJCQkJdmFyIHJlY29yZEFjY2VzcyA9IF92MS5jOwoJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUzKAoJCQkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBmaXJzdE5hbWUsIHF1YWxpZmljYXRpb25BZnRlciksCgkJCQkJCQkJCXVucXVhbGlmaWVkLAoJCQkJCQkJCQlyZWNvcmRBY2Nlc3MpOwoJCQkJCQkJfQoJCQkJCQl9KSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHlwZU5hbWUsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbGF6eSgKCQkJCQkJZnVuY3Rpb24gKF92MikgewoJCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJG1heWJlRG90UmVmZXJlbmNlRXhwcmVzc2lvblR1cGxlKCk7CgkJCQkJCX0pKSwKCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQlBMygKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJCUYyKAoJCQkJCQlmdW5jdGlvbiAobmFtZSwgcmVjb3JkQWNjZXNzZXMpIHsKCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQlfVXRpbHNfVHVwbGUzKF9MaXN0X05pbCwgbmFtZSwgcmVjb3JkQWNjZXNzZXMpKTsKCQkJCQkJfSksCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG11bHRpUmVjb3JkQWNjZXNzKSkpLAoJCSRlbG0kY29yZSRNYXliZSROb3RoaW5nKTsKfQp0cnkgewoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbWF5YmVEb3RSZWZlcmVuY2VFeHByZXNzaW9uVHVwbGUgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRtYXliZURvdFJlZmVyZW5jZUV4cHJlc3Npb25UdXBsZSgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbWF5YmVEb3RSZWZlcmVuY2VFeHByZXNzaW9uVHVwbGUgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbWF5YmVEb3RSZWZlcmVuY2VFeHByZXNzaW9uVHVwbGU7Cgl9Owp9IGNhdGNoICgkKSB7Cgl0aHJvdyAnU29tZSB0b3AtbGV2ZWwgZGVmaW5pdGlvbnMgZnJvbSBgRWxtLlBhcnNlci5FeHByZXNzaW9uYCBhcmUgY2F1c2luZyBpbmZpbml0ZSByZWN1cnNpb246XG5cbiAg4pSM4pSA4pSA4pSA4pSA4pSA4pSQXG4gIOKUgiAgICBtYXliZURvdFJlZmVyZW5jZUV4cHJlc3Npb25UdXBsZVxuICDilJTilIDilIDilIDilIDilIDilJhcblxuVGhlc2UgZXJyb3JzIGFyZSB2ZXJ5IHRyaWNreSwgc28gcmVhZCBodHRwczovL2VsbS1sYW5nLm9yZy8wLjE5LjEvYmFkLXJlY3Vyc2lvbiB0byBsZWFybiBob3cgdG8gZml4IGl0ISc7fQp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRxdWFsaWZpZWRPclZhcmlhbnRPclJlY29yZENvbnN0cnVjdG9yUmVmZXJlbmNlRXhwcmVzc2lvbkZvbGxvd2VkQnlSZWNvcmRBY2Nlc3MgPSBBMygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJXaXRoUmFuZ2UsCglGMygKCQlmdW5jdGlvbiAocmFuZ2UsIGZpcnN0TmFtZSwgYWZ0ZXIpIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJCXN5bnRheDogZnVuY3Rpb24gKCkgewoJCQkJCWlmIChhZnRlci4kID09PSAnTm90aGluZycpIHsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJcmFuZ2UsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJEZ1bmN0aW9uT3JWYWx1ZSwgX0xpc3RfTmlsLCBmaXJzdE5hbWUpKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgX3YxID0gYWZ0ZXIuYTsKCQkJCQkJdmFyIHF1YWxpZmljYXRpb25BZnRlciA9IF92MS5hOwoJCQkJCQl2YXIgdW5xdWFsaWZpZWQgPSBfdjEuYjsKCQkJCQkJdmFyIHJlY29yZEFjY2Vzc2VzID0gX3YxLmM7CgkJCQkJCWlmICghcmVjb3JkQWNjZXNzZXMuYikgewoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQlyYW5nZSwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRGdW5jdGlvbk9yVmFsdWUsCgkJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGZpcnN0TmFtZSwgcXVhbGlmaWNhdGlvbkFmdGVyKSwKCQkJCQkJCQkJdW5xdWFsaWZpZWQpKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBfdjMgPSByZWNvcmRBY2Nlc3Nlcy5hOwoJCQkJCQkJdmFyIGZpcnN0UmVjb3JkQWNjZXNzUmFuZ2UgPSBfdjMuYTsKCQkJCQkJCXZhciByZWZlcmVuY2VOb2RlID0gQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCXsKCQkJCQkJCQkJZW5kOiB7Y29sdW1uOiBmaXJzdFJlY29yZEFjY2Vzc1JhbmdlLnN0YXJ0LmNvbHVtbiAtIDEsIHJvdzogZmlyc3RSZWNvcmRBY2Nlc3NSYW5nZS5zdGFydC5yb3d9LAoJCQkJCQkJCQlzdGFydDogcmFuZ2Uuc3RhcnQKCQkJCQkJCQl9LAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJEZ1bmN0aW9uT3JWYWx1ZSwKCQkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZmlyc3ROYW1lLCBxdWFsaWZpY2F0aW9uQWZ0ZXIpLAoJCQkJCQkJCQl1bnF1YWxpZmllZCkpOwoJCQkJCQkJcmV0dXJuIEEzKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkJCQkJCUYyKAoJCQkJCQkJCQlmdW5jdGlvbiAoZmllbGROb2RlLCBsZWZ0Tm9kZSkgewoJCQkJCQkJCQkJdmFyIGZpZWxkUmFuZ2UgPSBmaWVsZE5vZGUuYTsKCQkJCQkJCQkJCXZhciBsZWZ0UmFuZ2UgPSBsZWZ0Tm9kZS5hOwoJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQkJCQl7ZW5kOiBmaWVsZFJhbmdlLmVuZCwgc3RhcnQ6IGxlZnRSYW5nZS5zdGFydH0sCgkJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRSZWNvcmRBY2Nlc3MsIGxlZnROb2RlLCBmaWVsZE5vZGUpKTsKCQkJCQkJCQkJfSksCgkJCQkJCQkJcmVmZXJlbmNlTm9kZSwKCQkJCQkJCQlyZWNvcmRBY2Nlc3Nlcyk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9KCkKCQkJfTsKCQl9KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyR0eXBlTmFtZSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbWF5YmVEb3RSZWZlcmVuY2VFeHByZXNzaW9uVHVwbGUpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiR1bnF1YWxpZmllZEZ1bmN0aW9uUmVmZXJlbmNlRXhwcmVzc2lvbkZvbGxvd2VkQnlSZWNvcmRBY2Nlc3MgPSBBMygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCglGMigKCQlmdW5jdGlvbiAobGVmdGVzdFJlc3VsdCwgcmVjb3JkQWNjZXNzZXMpIHsKCQkJaWYgKCFyZWNvcmRBY2Nlc3Nlcy5iKSB7CgkJCQlyZXR1cm4gbGVmdGVzdFJlc3VsdDsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IGxlZnRlc3RSZXN1bHQuY29tbWVudHMsCgkJCQkJc3ludGF4OiBBMygKCQkJCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCQkJCUYyKAoJCQkJCQkJZnVuY3Rpb24gKGZpZWxkTm9kZSwgbGVmdE5vZGUpIHsKCQkJCQkJCQl2YXIgZmllbGRSYW5nZSA9IGZpZWxkTm9kZS5hOwoJCQkJCQkJCXZhciBsZWZ0UmFuZ2UgPSBsZWZ0Tm9kZS5hOwoJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCQl7ZW5kOiBmaWVsZFJhbmdlLmVuZCwgc3RhcnQ6IGxlZnRSYW5nZS5zdGFydH0sCgkJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kUmVjb3JkQWNjZXNzLCBsZWZ0Tm9kZSwgZmllbGROb2RlKSk7CgkJCQkJCQl9KSwKCQkJCQkJbGVmdGVzdFJlc3VsdC5zeW50YXgsCgkJCQkJCXJlY29yZEFjY2Vzc2VzKQoJCQkJfTsKCQkJfQoJCX0pLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU1hcFdpdGhSYW5nZSgKCQlGMigKCQkJZnVuY3Rpb24gKHJhbmdlLCB1bnF1YWxpZmllZCkgewoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQkJc3ludGF4OiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQlyYW5nZSwKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRGdW5jdGlvbk9yVmFsdWUsIF9MaXN0X05pbCwgdW5xdWFsaWZpZWQpKQoJCQkJfTsKCQkJfSkpLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRtdWx0aVJlY29yZEFjY2Vzcyk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHJlZmVyZW5jZU9yTnVtYmVyRXhwcmVzc2lvbiA9IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRxdWFsaWZpZWRPclZhcmlhbnRPclJlY29yZENvbnN0cnVjdG9yUmVmZXJlbmNlRXhwcmVzc2lvbkZvbGxvd2VkQnlSZWNvcmRBY2Nlc3MsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kdW5xdWFsaWZpZWRGdW5jdGlvblJlZmVyZW5jZUV4cHJlc3Npb25Gb2xsb3dlZEJ5UmVjb3JkQWNjZXNzLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG51bWJlckV4cHJlc3Npb24pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sQmFja3RyYWNrYWJsZUZvbGxvd2VkQnkgPSBGMigKCWZ1bmN0aW9uIChzdHIsIF92MCkgewoJCXZhciBwYXJzZU5leHQgPSBfdjAuYTsKCQl2YXIgc3RyTGVuZ3RoID0gJGVsbSRjb3JlJFN0cmluZyRsZW5ndGgoc3RyKTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIG5ld09mZnNldCA9IHMub2Zmc2V0ICsgc3RyTGVuZ3RoOwoJCQkJcmV0dXJuIF9VdGlsc19lcSgKCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzLm9mZnNldCwgbmV3T2Zmc2V0LCBzLnNyYyksCgkJCQkJc3RyICsgJycpID8gcGFyc2VOZXh0KAoJCQkJCXtjb2w6IHMuY29sICsgc3RyTGVuZ3RoLCBpbmRlbnQ6IHMuaW5kZW50LCBvZmZzZXQ6IG5ld09mZnNldCwgcm93OiBzLnJvdywgc3JjOiBzLnNyY30pIDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCWZhbHNlLAoJCQkJCUEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ1N5bWJvbCwgcy5yb3csIHMuY29sLCBzdHIpKTsKCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbFdpdGhFbmRMb2NhdGlvbiA9IEYyKAoJZnVuY3Rpb24gKHN0ciwgZW5kTG9jYXRpb25Ub1JlcykgewoJCXZhciBzdHJMZW5ndGggPSAkZWxtJGNvcmUkU3RyaW5nJGxlbmd0aChzdHIpOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQl2YXIgbmV3T2Zmc2V0ID0gcy5vZmZzZXQgKyBzdHJMZW5ndGg7CgkJCQlpZiAoX1V0aWxzX2VxKAoJCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIHMub2Zmc2V0LCBuZXdPZmZzZXQsIHMuc3JjKSwKCQkJCQlzdHIgKyAnJykpIHsKCQkJCQl2YXIgbmV3Q29sID0gcy5jb2wgKyBzdHJMZW5ndGg7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQllbmRMb2NhdGlvblRvUmVzKAoJCQkJCQkJe2NvbHVtbjogbmV3Q29sLCByb3c6IHMucm93fSksCgkJCQkJCXtjb2w6IG5ld0NvbCwgaW5kZW50OiBzLmluZGVudCwgb2Zmc2V0OiBuZXdPZmZzZXQsIHJvdzogcy5yb3csIHNyYzogcy5zcmN9KTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCWZhbHNlLAoJCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdTeW1ib2wsIHMucm93LCBzLmNvbCwgc3RyKSk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHRlbXBvcmFyeUVyclByZWNlZGVuY2VUb29IaWdoID0gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ2luZml4IG9wZXJhdG9yIHByZWNlZGVuY2UgdG9vIGhpZ2gnKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJEZpZWxkc0FmdGVyTmFtZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdGaWVsZHNBZnRlck5hbWUnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJEZ1bmN0aW9uVHlwZUFubm90YXRpb24gPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnRnVuY3Rpb25UeXBlQW5ub3RhdGlvbicsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRHZW5lcmljUmVjb3JkID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0dlbmVyaWNSZWNvcmQnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kUmVjb3JkID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1JlY29yZCcsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kUmVjb3JkRXh0ZW5zaW9uRXhwcmVzc2lvbkFmdGVyTmFtZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdSZWNvcmRFeHRlbnNpb25FeHByZXNzaW9uQWZ0ZXJOYW1lJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRUdXBsZWQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVHVwbGVkJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRUeXBlZCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdUeXBlZCcsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRVbml0ID0geyQ6ICdVbml0J307CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRHZW5lcmljVHlwZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdHZW5lcmljVHlwZScsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kZ2VuZXJpY1R5cGVBbm5vdGF0aW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU1hcFdpdGhSYW5nZSgKCUYyKAoJCWZ1bmN0aW9uIChyYW5nZSwgX3ZhcikgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJcmFuZ2UsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kR2VuZXJpY1R5cGUoX3ZhcikpCgkJCX07CgkJfSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwM1dpdGhSYW5nZSA9IEY0KAoJZnVuY3Rpb24gKGZ1bmMsIF92MCwgX3YxLCBfdjIpIHsKCQl2YXIgcGFyc2VBID0gX3YwLmE7CgkJdmFyIHBhcnNlQiA9IF92MS5hOwoJCXZhciBwYXJzZUMgPSBfdjIuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjMgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92My4kID09PSAnQmFkJykgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjMuYTsKCQkJCQl2YXIgeCA9IF92My5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3YzLmE7CgkJCQkJdmFyIHMxID0gX3YzLmI7CgkJCQkJdmFyIF92NCA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92NC4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92NC5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92NC5hOwoJCQkJCQl2YXIgczIgPSBfdjQuYjsKCQkJCQkJdmFyIF92NSA9IHBhcnNlQyhzMik7CgkJCQkJCWlmIChfdjUuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCXZhciB4ID0gX3Y1LmI7CgkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBjID0gX3Y1LmE7CgkJCQkJCQl2YXIgczMgPSBfdjUuYjsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJCUE0KAoJCQkJCQkJCQlmdW5jLAoJCQkJCQkJCQl7CgkJCQkJCQkJCQllbmQ6IHtjb2x1bW46IHMzLmNvbCwgcm93OiBzMy5yb3d9LAoJCQkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJCQkJCX0sCgkJCQkJCQkJCWEsCgkJCQkJCQkJCWIsCgkJCQkJCQkJCWMpLAoJCQkJCQkJCXMzKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDZXaXRoUmFuZ2UgPSBGNygKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSwgX3YyLCBfdjMsIF92NCwgX3Y1KSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQl2YXIgcGFyc2VDID0gX3YyLmE7CgkJdmFyIHBhcnNlRCA9IF92My5hOwoJCXZhciBwYXJzZUUgPSBfdjQuYTsKCQl2YXIgcGFyc2VGID0gX3Y1LmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgX3Y2ID0gcGFyc2VBKHMwKTsKCQkJCWlmIChfdjYuJCA9PT0gJ0JhZCcpIHsKCQkJCQl2YXIgY29tbWl0dGVkID0gX3Y2LmE7CgkJCQkJdmFyIHggPSBfdjYuYjsKCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBjb21taXR0ZWQsIHgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYSA9IF92Ni5hOwoJCQkJCXZhciBzMSA9IF92Ni5iOwoJCQkJCXZhciBfdjcgPSBwYXJzZUIoczEpOwoJCQkJCWlmIChfdjcuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJdmFyIHggPSBfdjcuYjsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGIgPSBfdjcuYTsKCQkJCQkJdmFyIHMyID0gX3Y3LmI7CgkJCQkJCXZhciBfdjggPSBwYXJzZUMoczIpOwoJCQkJCQlpZiAoX3Y4LiQgPT09ICdCYWQnKSB7CgkJCQkJCQl2YXIgeCA9IF92OC5iOwoJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYyA9IF92OC5hOwoJCQkJCQkJdmFyIHMzID0gX3Y4LmI7CgkJCQkJCQl2YXIgX3Y5ID0gcGFyc2VEKHMzKTsKCQkJCQkJCWlmIChfdjkuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQl2YXIgeCA9IF92OS5iOwoJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgZCA9IF92OS5hOwoJCQkJCQkJCXZhciBzNCA9IF92OS5iOwoJCQkJCQkJCXZhciBfdjEwID0gcGFyc2VFKHM0KTsKCQkJCQkJCQlpZiAoX3YxMC4kID09PSAnQmFkJykgewoJCQkJCQkJCQl2YXIgeCA9IF92MTAuYjsKCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJdmFyIGUgPSBfdjEwLmE7CgkJCQkJCQkJCXZhciBzNSA9IF92MTAuYjsKCQkJCQkJCQkJdmFyIF92MTEgPSBwYXJzZUYoczUpOwoJCQkJCQkJCQlpZiAoX3YxMS4kID09PSAnQmFkJykgewoJCQkJCQkJCQkJdmFyIHggPSBfdjExLmI7CgkJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXZhciBmID0gX3YxMS5hOwoJCQkJCQkJCQkJdmFyIHM2ID0gX3YxMS5iOwoJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJCQkJQTcoCgkJCQkJCQkJCQkJCWZ1bmMsCgkJCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkJCWVuZDoge2NvbHVtbjogczYuY29sLCByb3c6IHM2LnJvd30sCgkJCQkJCQkJCQkJCQlzdGFydDoge2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30KCQkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQkJYSwKCQkJCQkJCQkJCQkJYiwKCQkJCQkJCQkJCQkJYywKCQkJCQkJCQkJCQkJZCwKCQkJCQkJCQkJCQkJZSwKCQkJCQkJCQkJCQkJZiksCgkJCQkJCQkJCQkJczYpOwoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkbWF5YmVEb3RUeXBlTmFtZXNUdXBsZSgpIHsKCXJldHVybiBBNCgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyT3JTdWNjZWVkLAoJCUYyKAoJCQlmdW5jdGlvbiAoZmlyc3ROYW1lLCBhZnRlckZpcnN0TmFtZSkgewoJCQkJaWYgKGFmdGVyRmlyc3ROYW1lLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIGZpcnN0TmFtZSkpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YxID0gYWZ0ZXJGaXJzdE5hbWUuYTsKCQkJCQl2YXIgcXVhbGlmaWNhdGlvbkFmdGVyID0gX3YxLmE7CgkJCQkJdmFyIHVucXVhbGlmaWVkID0gX3YxLmI7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZmlyc3ROYW1lLCBxdWFsaWZpY2F0aW9uQWZ0ZXIpLAoJCQkJCQkJdW5xdWFsaWZpZWQpKTsKCQkJCX0KCQkJfSksCgkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJy4nLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHlwZU5hbWUpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxhenkoCgkJCWZ1bmN0aW9uIChfdjIpIHsKCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkbWF5YmVEb3RUeXBlTmFtZXNUdXBsZSgpOwoJCQl9KSwKCQkkZWxtJGNvcmUkTWF5YmUkTm90aGluZyk7Cn0KdHJ5IHsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRtYXliZURvdFR5cGVOYW1lc1R1cGxlID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJG1heWJlRG90VHlwZU5hbWVzVHVwbGUoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRtYXliZURvdFR5cGVOYW1lc1R1cGxlID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRtYXliZURvdFR5cGVOYW1lc1R1cGxlOwoJfTsKfSBjYXRjaCAoJCkgewoJdGhyb3cgJ1NvbWUgdG9wLWxldmVsIGRlZmluaXRpb25zIGZyb20gYEVsbS5QYXJzZXIuVHlwZUFubm90YXRpb25gIGFyZSBjYXVzaW5nIGluZmluaXRlIHJlY3Vyc2lvbjpcblxuICDilIzilIDilIDilIDilIDilIDilJBcbiAg4pSCICAgIG1heWJlRG90VHlwZU5hbWVzVHVwbGVcbiAg4pSU4pSA4pSA4pSA4pSA4pSA4pSYXG5cblRoZXNlIGVycm9ycyBhcmUgdmVyeSB0cmlja3ksIHNvIHJlYWQgaHR0cHM6Ly9lbG0tbGFuZy5vcmcvMC4xOS4xL2JhZC1yZWN1cnNpb24gdG8gbGVhcm4gaG93IHRvIGZpeCBpdCEnO30KdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mNCA9IEY0KAoJZnVuY3Rpb24gKF92MCwgX3YxLCBfdjIsIF92MykgewoJCXZhciBhdHRlbXB0Rmlyc3QgPSBfdjAuYTsKCQl2YXIgYXR0ZW1wdFNlY29uZCA9IF92MS5hOwoJCXZhciBhdHRlbXB0VGhpcmQgPSBfdjIuYTsKCQl2YXIgYXR0ZW1wdEZvdXJ0aCA9IF92My5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQl2YXIgX3Y0ID0gYXR0ZW1wdEZpcnN0KHMpOwoJCQkJaWYgKF92NC4kID09PSAnR29vZCcpIHsKCQkJCQl2YXIgZmlyc3RHb29kID0gX3Y0OwoJCQkJCXJldHVybiBmaXJzdEdvb2Q7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBmaXJzdEJhZCA9IF92NDsKCQkJCQl2YXIgZmlyc3RDb21taXR0ZWQgPSBmaXJzdEJhZC5hOwoJCQkJCXZhciBmaXJzdFggPSBmaXJzdEJhZC5iOwoJCQkJCWlmIChmaXJzdENvbW1pdHRlZCkgewoJCQkJCQlyZXR1cm4gZmlyc3RCYWQ7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIF92NSA9IGF0dGVtcHRTZWNvbmQocyk7CgkJCQkJCWlmIChfdjUuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQl2YXIgc2Vjb25kR29vZCA9IF92NTsKCQkJCQkJCXJldHVybiBzZWNvbmRHb29kOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIHNlY29uZEJhZCA9IF92NTsKCQkJCQkJCXZhciBzZWNvbmRDb21taXR0ZWQgPSBzZWNvbmRCYWQuYTsKCQkJCQkJCXZhciBzZWNvbmRYID0gc2Vjb25kQmFkLmI7CgkJCQkJCQlpZiAoc2Vjb25kQ29tbWl0dGVkKSB7CgkJCQkJCQkJcmV0dXJuIHNlY29uZEJhZDsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIF92NiA9IGF0dGVtcHRUaGlyZChzKTsKCQkJCQkJCQlpZiAoX3Y2LiQgPT09ICdHb29kJykgewoJCQkJCQkJCQl2YXIgdGhpcmRHb29kID0gX3Y2OwoJCQkJCQkJCQlyZXR1cm4gdGhpcmRHb29kOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciB0aGlyZEJhZCA9IF92NjsKCQkJCQkJCQkJdmFyIHRoaXJkQ29tbWl0dGVkID0gdGhpcmRCYWQuYTsKCQkJCQkJCQkJdmFyIHRoaXJkWCA9IHRoaXJkQmFkLmI7CgkJCQkJCQkJCWlmICh0aGlyZENvbW1pdHRlZCkgewoJCQkJCQkJCQkJcmV0dXJuIHRoaXJkQmFkOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJdmFyIF92NyA9IGF0dGVtcHRGb3VydGgocyk7CgkJCQkJCQkJCQlpZiAoX3Y3LiQgPT09ICdHb29kJykgewoJCQkJCQkJCQkJCXZhciBmb3VydGhHb29kID0gX3Y3OwoJCQkJCQkJCQkJCXJldHVybiBmb3VydGhHb29kOwoJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQl2YXIgZm91cnRoQmFkID0gX3Y3OwoJCQkJCQkJCQkJCXZhciBmb3VydGhDb21taXR0ZWQgPSBmb3VydGhCYWQuYTsKCQkJCQkJCQkJCQl2YXIgZm91cnRoWCA9IGZvdXJ0aEJhZC5iOwoJCQkJCQkJCQkJCXJldHVybiBmb3VydGhDb21taXR0ZWQgPyBmb3VydGhCYWQgOiBBMigKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQkJCQkJCQlmYWxzZSwKCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdPbmVPZiwKCQkJCQkJCQkJCQkJCWZpcnN0WCwKCQkJCQkJCQkJCQkJCXNlY29uZFgsCgkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJW3RoaXJkWCwgZm91cnRoWF0pKSk7CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiR0eXBlQW5ub3RhdGlvblJlY29yZEVtcHR5ID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kUmVjb3JkKF9MaXN0X05pbCk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiR0eXBlZFR5cGVBbm5vdGF0aW9uV2l0aG91dEFyZ3VtZW50cyA9IEEzKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhSYW5nZSwKCUYzKAoJCWZ1bmN0aW9uIChyYW5nZSwgc3RhcnROYW1lLCBhZnRlclN0YXJ0TmFtZSkgewoJCQl2YXIgbmFtZSA9IGZ1bmN0aW9uICgpIHsKCQkJCWlmIChhZnRlclN0YXJ0TmFtZS4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIHN0YXJ0TmFtZSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfdjEgPSBhZnRlclN0YXJ0TmFtZS5hOwoJCQkJCXZhciBxdWFsaWZpY2F0aW9uQWZ0ZXJTdGFydE5hbWUgPSBfdjEuYTsKCQkJCQl2YXIgdW5xdWFsaWZpZWQgPSBfdjEuYjsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgc3RhcnROYW1lLCBxdWFsaWZpY2F0aW9uQWZ0ZXJTdGFydE5hbWUpLAoJCQkJCQl1bnF1YWxpZmllZCk7CgkJCQl9CgkJCX0oKTsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJCXN5bnRheDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXJhbmdlLAoJCQkJCUEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRUeXBlZCwKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLCByYW5nZSwgbmFtZSksCgkJCQkJCV9MaXN0X05pbCkpCgkJCX07CgkJfSksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHlwZU5hbWUsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRtYXliZURvdFR5cGVOYW1lc1R1cGxlKTsKZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVBbm5vdGF0aW9uTm9GbkluY2x1ZGluZ1R5cGVkV2l0aEFyZ3VtZW50cygpIHsKCXJldHVybiBBNCgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjQsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHBhcmVuc1R5cGVBbm5vdGF0aW9uKCksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVkVHlwZUFubm90YXRpb25XaXRoQXJndW1lbnRzT3B0aW1pc3RpY0xheW91dCgpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGdlbmVyaWNUeXBlQW5ub3RhdGlvbiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkcmVjb3JkVHlwZUFubm90YXRpb24oKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVkVHlwZUFubm90YXRpb25XaXRoQXJndW1lbnRzT3B0aW1pc3RpY0xheW91dCgpIHsKCXJldHVybiBBNCgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzLAoJCUYzKAoJCQlmdW5jdGlvbiAobmFtZU5vZGUsIGNvbW1lbnRzQWZ0ZXJOYW1lLCBhcmdzUmV2ZXJzZSkgewoJCQkJdmFyIG5hbWVSYW5nZSA9IG5hbWVOb2RlLmE7CgkJCQl2YXIgcmFuZ2UgPSBmdW5jdGlvbiAoKSB7CgkJCQkJdmFyIF92OCA9IGFyZ3NSZXZlcnNlLnN5bnRheDsKCQkJCQlpZiAoIV92OC5iKSB7CgkJCQkJCXJldHVybiBuYW1lUmFuZ2U7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIF92OSA9IF92OC5hOwoJCQkJCQl2YXIgbGFzdEFyZ1JhbmdlID0gX3Y5LmE7CgkJCQkJCXJldHVybiB7ZW5kOiBsYXN0QXJnUmFuZ2UuZW5kLCBzdGFydDogbmFtZVJhbmdlLnN0YXJ0fTsKCQkJCQl9CgkJCQl9KCk7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGFyZ3NSZXZlcnNlLmNvbW1lbnRzLCBjb21tZW50c0FmdGVyTmFtZSksCgkJCQkJc3ludGF4OiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQlyYW5nZSwKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRUeXBlZCwKCQkJCQkJCW5hbWVOb2RlLAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShhcmdzUmV2ZXJzZS5zeW50YXgpKSkKCQkJCX07CgkJCX0pLAoJCUEzKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyV2l0aFJhbmdlLAoJCQlGMygKCQkJCWZ1bmN0aW9uIChyYW5nZSwgc3RhcnROYW1lLCBhZnRlclN0YXJ0TmFtZSkgewoJCQkJCXZhciBuYW1lID0gZnVuY3Rpb24gKCkgewoJCQkJCQlpZiAoYWZ0ZXJTdGFydE5hbWUuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIHN0YXJ0TmFtZSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgX3YxMSA9IGFmdGVyU3RhcnROYW1lLmE7CgkJCQkJCQl2YXIgcXVhbGlmaWNhdGlvbkFmdGVyU3RhcnROYW1lID0gX3YxMS5hOwoJCQkJCQkJdmFyIHVucXVhbGlmaWVkID0gX3YxMS5iOwoJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgc3RhcnROYW1lLCBxdWFsaWZpY2F0aW9uQWZ0ZXJTdGFydE5hbWUpLAoJCQkJCQkJCXVucXVhbGlmaWVkKTsKCQkJCQkJfQoJCQkJCX0oKTsKCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLCByYW5nZSwgbmFtZSk7CgkJCQl9KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRtYXliZURvdFR5cGVOYW1lc1R1cGxlKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCwKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJG1hbnlXaXRob3V0UmV2ZXJzZSgKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHBvc2l0aXZlbHlJbmRlbnRlZEZvbGxvd2VkQnkoCgkJCQlBMygKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJCUYyKAoJCQkJCQlmdW5jdGlvbiAodHlwZUFubm90YXRpb25SZXN1bHQsIGNvbW1lbnRzQWZ0ZXIpIHsKCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlciwgdHlwZUFubm90YXRpb25SZXN1bHQuY29tbWVudHMpLAoJCQkJCQkJCXN5bnRheDogdHlwZUFubm90YXRpb25SZXN1bHQuc3ludGF4CgkJCQkJCQl9OwoJCQkJCQl9KSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb25Ob0ZuRXhjbHVkaW5nVHlwZWRXaXRoQXJndW1lbnRzKCksCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQpKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlQW5ub3RhdGlvbk5vRm5FeGNsdWRpbmdUeXBlZFdpdGhBcmd1bWVudHMoKSB7CglyZXR1cm4gQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2Y0LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRwYXJlbnNUeXBlQW5ub3RhdGlvbigpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVkVHlwZUFubm90YXRpb25XaXRob3V0QXJndW1lbnRzLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGdlbmVyaWNUeXBlQW5ub3RhdGlvbiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkcmVjb3JkVHlwZUFubm90YXRpb24oKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHBhcmVuc1R5cGVBbm5vdGF0aW9uKCkgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJJygnLAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sV2l0aEVuZExvY2F0aW9uLAoJCQkJJyknLAoJCQkJZnVuY3Rpb24gKGVuZCkgewoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXsKCQkJCQkJCQllbmQ6IGVuZCwKCQkJCQkJCQlzdGFydDoge2NvbHVtbjogZW5kLmNvbHVtbiAtIDIsIHJvdzogZW5kLnJvd30KCQkJCQkJCX0sCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRVbml0KQoJCQkJCX07CgkJCQl9KSwKCQkJQTUoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0V2l0aFJhbmdlLAoJCQkJRjUoCgkJCQkJZnVuY3Rpb24gKHJhbmdlQWZ0ZXJPcGVuaW5nUGFyZW5zLCBjb21tZW50c0JlZm9yZUZpcnN0UGFydCwgZmlyc3RQYXJ0LCBjb21tZW50c0FmdGVyRmlyc3RQYXJ0LCBsYXN0VG9TZWNvbmRQYXJ0KSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCWxhc3RUb1NlY29uZFBhcnQuY29tbWVudHMsCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJY29tbWVudHNBZnRlckZpcnN0UGFydCwKCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBmaXJzdFBhcnQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlRmlyc3RQYXJ0KSkpLAoJCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJewoJCQkJCQkJCQllbmQ6IHJhbmdlQWZ0ZXJPcGVuaW5nUGFyZW5zLmVuZCwKCQkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHJhbmdlQWZ0ZXJPcGVuaW5nUGFyZW5zLnN0YXJ0LmNvbHVtbiAtIDEsIHJvdzogcmFuZ2VBZnRlck9wZW5pbmdQYXJlbnMuc3RhcnQucm93fQoJCQkJCQkJCX0sCgkJCQkJCQkJZnVuY3Rpb24gKCkgewoJCQkJCQkJCQl2YXIgX3Y1ID0gbGFzdFRvU2Vjb25kUGFydC5zeW50YXg7CgkJCQkJCQkJCWlmIChfdjUuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJCQl2YXIgX3Y2ID0gZmlyc3RQYXJ0LnN5bnRheDsKCQkJCQkJCQkJCXZhciBmaXJzdFBhcnRUeXBlID0gX3Y2LmI7CgkJCQkJCQkJCQlyZXR1cm4gZmlyc3RQYXJ0VHlwZTsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXZhciBmaXJzdEFuZE1heWJlVGhpcmRQYXJ0ID0gX3Y1LmE7CgkJCQkJCQkJCQl2YXIgX3Y3ID0gZmlyc3RBbmRNYXliZVRoaXJkUGFydC5tYXliZVRoaXJkUGFydDsKCQkJCQkJCQkJCWlmIChfdjcuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJFR1cGxlZCgKCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJW2ZpcnN0UGFydC5zeW50YXgsIGZpcnN0QW5kTWF5YmVUaGlyZFBhcnQuc2Vjb25kUGFydF0pKTsKCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJdmFyIHRoaXJkUGFydCA9IF92Ny5hOwoJCQkJCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRUdXBsZWQoCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVtmaXJzdFBhcnQuc3ludGF4LCBmaXJzdEFuZE1heWJlVGhpcmRQYXJ0LnNlY29uZFBhcnQsIHRoaXJkUGFydF0pKTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCX0oKSkKCQkJCQkJfTsKCQkJCQl9KSwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlQW5ub3RhdGlvbigpLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCQkJCUEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wsCgkJCQkJCScpJywKCQkJCQkJe2NvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwgc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZ30pLAoJCQkJCUEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCQknLCcsCgkJCQkJCUE1KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNCwKCQkJCQkJCUY0KAoJCQkJCQkJCWZ1bmN0aW9uIChjb21tZW50c0JlZm9yZSwgc2Vjb25kUGFydFJlc3VsdCwgY29tbWVudHNBZnRlciwgbWF5YmVUaGlyZFBhcnRSZXN1bHQpIHsKCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQkJY29tbWVudHNBZnRlciwKCQkJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHNlY29uZFBhcnRSZXN1bHQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKSksCgkJCQkJCQkJCQlzeW50YXg6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCQkJCXttYXliZVRoaXJkUGFydDogbWF5YmVUaGlyZFBhcnRSZXN1bHQuc3ludGF4LCBzZWNvbmRQYXJ0OiBzZWNvbmRQYXJ0UmVzdWx0LnN5bnRheH0pCgkJCQkJCQkJCX07CgkJCQkJCQkJfSksCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb24oKSwKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkJCUEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQkJCQkJCQknKScsCgkJCQkJCQkJCXtjb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksIHN5bnRheDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJCQkJCQkJJywnLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGZvbGxvd2VkQnlTeW1ib2wsCgkJCQkJCQkJCQknKScsCgkJCQkJCQkJCQlBNCgKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzLAoJCQkJCQkJCQkJCUYzKAoJCQkJCQkJCQkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmUsIHRoaXJkUGFydFJlc3VsdCwgY29tbWVudHNBZnRlcikgewoJCQkJCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJCQkJCQkJY29tbWVudHNBZnRlciwKCQkJCQkJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCB0aGlyZFBhcnRSZXN1bHQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKSksCgkJCQkJCQkJCQkJCQkJc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkSnVzdCh0aGlyZFBhcnRSZXN1bHQuc3ludGF4KQoJCQkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCQkJfSksCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlQW5ub3RhdGlvbigpLAoJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCkpKSkpKSkpKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHJlY29yZFR5cGVBbm5vdGF0aW9uKCkgewoJcmV0dXJuIEEzKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJXaXRoUmFuZ2UsCgkJRjMoCgkJCWZ1bmN0aW9uIChyYW5nZSwgY29tbWVudHNCZWZvcmUsIGFmdGVyQ3VybHkpIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgYWZ0ZXJDdXJseS5jb21tZW50cywgY29tbWVudHNCZWZvcmUpLAoJCQkJCXN5bnRheDogZnVuY3Rpb24gKCkgewoJCQkJCQl2YXIgX3YzID0gYWZ0ZXJDdXJseS5zeW50YXg7CgkJCQkJCWlmIChfdjMuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLCByYW5nZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZUFubm90YXRpb25SZWNvcmRFbXB0eSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYWZ0ZXJDdXJseVJlc3VsdCA9IF92My5hOwoJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwgcmFuZ2UsIGFmdGVyQ3VybHlSZXN1bHQpOwoJCQkJCQl9CgkJCQkJfSgpCgkJCQl9OwoJCQl9KSwKCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAneycsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U3ltYm9sLAoJCQkJJ30nLAoJCQkJQTQoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQkJCQlGMygKCQkJCQkJZnVuY3Rpb24gKGZpcnN0TmFtZU5vZGUsIGNvbW1lbnRzQWZ0ZXJGaXJzdE5hbWUsIGFmdGVyRmlyc3ROYW1lKSB7CgkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGFmdGVyRmlyc3ROYW1lLmNvbW1lbnRzLCBjb21tZW50c0FmdGVyRmlyc3ROYW1lKSwKCQkJCQkJCQlzeW50YXg6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJCQkJCQl2YXIgX3Y0ID0gYWZ0ZXJGaXJzdE5hbWUuc3ludGF4OwoJCQkJCQkJCQkJaWYgKF92NC4kID09PSAnUmVjb3JkRXh0ZW5zaW9uRXhwcmVzc2lvbkFmdGVyTmFtZScpIHsKCQkJCQkJCQkJCQl2YXIgZmllbGRzID0gX3Y0LmE7CgkJCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJEdlbmVyaWNSZWNvcmQsIGZpcnN0TmFtZU5vZGUsIGZpZWxkcyk7CgkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCXZhciBmaWVsZHNBZnRlck5hbWUgPSBfdjQuYTsKCQkJCQkJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kUmVjb3JkKAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGNvbWJpbmUsICRlbG0kY29yZSRUdXBsZSRwYWlyLCBmaXJzdE5hbWVOb2RlLCBmaWVsZHNBZnRlck5hbWUuZmlyc3RGaWVsZFZhbHVlKSwKCQkJCQkJCQkJCQkJCWZpZWxkc0FmdGVyTmFtZS50YWlsRmllbGRzKSk7CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0oKSkKCQkJCQkJCX07CgkJCQkJCX0pLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVOb2RlLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQkJCQknfCcsCgkJCQkJCQlBNCgKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzV2l0aFJhbmdlLAoJCQkJCQkJCUY0KAoJCQkJCQkJCQlmdW5jdGlvbiAocmFuZ2UsIGNvbW1lbnRzQmVmb3JlLCBoZWFkLCB0YWlsKSB7CgkJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJCQl0YWlsLmNvbW1lbnRzLAoJCQkJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGhlYWQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKSksCgkJCQkJCQkJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRSZWNvcmRFeHRlbnNpb25FeHByZXNzaW9uQWZ0ZXJOYW1lKAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQkJCQkJCXJhbmdlLAoJCQkJCQkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgaGVhZC5zeW50YXgsIHRhaWwuc3ludGF4KSkpCgkJCQkJCQkJCQl9OwoJCQkJCQkJCQl9KSwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHJlY29yZEZpZWxkRGVmaW5pdGlvbigpLAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkbWFueSgKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCQkJCQkJJywnLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJCQkJCQkJCQlGMigKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCBmaWVsZCkgewoJCQkJCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBmaWVsZC5jb21tZW50cywgY29tbWVudHNCZWZvcmUpLAoJCQkJCQkJCQkJCQkJCXN5bnRheDogZmllbGQuc3ludGF4CgkJCQkJCQkJCQkJCQl9OwoJCQkJCQkJCQkJCQl9KSwKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHJlY29yZEZpZWxkRGVmaW5pdGlvbigpKSkpKSksCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJCQkJCSc6JywKCQkJCQkJCUE1KAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDQsCgkJCQkJCQkJRjQoCgkJCQkJCQkJCWZ1bmN0aW9uIChjb21tZW50c0JlZm9yZUZpcnN0RmllbGRWYWx1ZSwgZmlyc3RGaWVsZFZhbHVlLCBjb21tZW50c0FmdGVyRmlyc3RGaWVsZFZhbHVlLCB0YWlsRmllbGRzKSB7CgkJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJCQl0YWlsRmllbGRzLmNvbW1lbnRzLAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJCQkJCWNvbW1lbnRzQWZ0ZXJGaXJzdEZpZWxkVmFsdWUsCgkJCQkJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGZpcnN0RmllbGRWYWx1ZS5jb21tZW50cywgY29tbWVudHNCZWZvcmVGaXJzdEZpZWxkVmFsdWUpKSksCgkJCQkJCQkJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRGaWVsZHNBZnRlck5hbWUoCgkJCQkJCQkJCQkJCXtmaXJzdEZpZWxkVmFsdWU6IGZpcnN0RmllbGRWYWx1ZS5zeW50YXgsIHRhaWxGaWVsZHM6IHRhaWxGaWVsZHMuc3ludGF4fSkKCQkJCQkJCQkJCX07CgkJCQkJCQkJCX0pLAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb24oKSwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9yU3VjY2VlZCwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCQkJCQkJJywnLAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHJlY29yZEZpZWxkc1R5cGVBbm5vdGF0aW9uKCkpLAoJCQkJCQkJCQl7Y29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LCBzeW50YXg6IF9MaXN0X05pbH0pKSkpKSksCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQkJJ30nLAoJCQkJe2NvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwgc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZ30pKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHJlY29yZEZpZWxkc1R5cGVBbm5vdGF0aW9uKCkgewoJcmV0dXJuIEE0KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDMsCgkJRjMoCgkJCWZ1bmN0aW9uIChjb21tZW50c0JlZm9yZSwgaGVhZCwgdGFpbCkgewoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJdGFpbC5jb21tZW50cywKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBoZWFkLmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZSkpLAoJCQkJCXN5bnRheDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgaGVhZC5zeW50YXgsIHRhaWwuc3ludGF4KQoJCQkJfTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRyZWNvcmRGaWVsZERlZmluaXRpb24oKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJG1hbnkoCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJCScsJywKCQkJCUEzKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCQkJRjIoCgkJCQkJCWZ1bmN0aW9uIChjb21tZW50c0JlZm9yZSwgZmllbGQpIHsKCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgZmllbGQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKSwKCQkJCQkJCQlzeW50YXg6IGZpZWxkLnN5bnRheAoJCQkJCQkJfTsKCQkJCQkJfSksCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRyZWNvcmRGaWVsZERlZmluaXRpb24oKSkpKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHJlY29yZEZpZWxkRGVmaW5pdGlvbigpIHsKCXJldHVybiBBNygKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA2V2l0aFJhbmdlLAoJCUY3KAoJCQlmdW5jdGlvbiAocmFuZ2UsIGNvbW1lbnRzQmVmb3JlRnVuY3Rpb25OYW1lLCBuYW1lLCBjb21tZW50c0FmdGVyRnVuY3Rpb25OYW1lLCBjb21tZW50c0FmdGVyQ29sb24sIHZhbHVlLCBjb21tZW50c0FmdGVyVmFsdWUpIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCWNvbW1lbnRzQWZ0ZXJWYWx1ZSwKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQl2YWx1ZS5jb21tZW50cywKCQkJCQkJCUEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQljb21tZW50c0FmdGVyQ29sb24sCgkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyRnVuY3Rpb25OYW1lLCBjb21tZW50c0JlZm9yZUZ1bmN0aW9uTmFtZSkpKSksCgkJCQkJc3ludGF4OiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQlyYW5nZSwKCQkJCQkJX1V0aWxzX1R1cGxlMihuYW1lLCB2YWx1ZS5zeW50YXgpKQoJCQkJfTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVOb2RlLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAnOicsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVBbm5vdGF0aW9uKCksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb24oKSB7CglyZXR1cm4gQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQlGMygKCQkJZnVuY3Rpb24gKGluVHlwZSwgY29tbWVudHNBZnRlckluLCBtYXliZU91dCkgewoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJbWF5YmVPdXQuY29tbWVudHMsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlckluLCBpblR5cGUuY29tbWVudHMpKSwKCQkJCQlzeW50YXg6IGZ1bmN0aW9uICgpIHsKCQkJCQkJdmFyIF92MCA9IG1heWJlT3V0LnN5bnRheDsKCQkJCQkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCXJldHVybiBpblR5cGUuc3ludGF4OwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIG91dCA9IF92MC5hOwoJCQkJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkY29tYmluZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kRnVuY3Rpb25UeXBlQW5ub3RhdGlvbiwgaW5UeXBlLnN5bnRheCwgb3V0KTsKCQkJCQkJfQoJCQkJCX0oKQoJCQkJfTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbGF6eSgKCQkJZnVuY3Rpb24gKF92MSkgewoJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlQW5ub3RhdGlvbk5vRm5JbmNsdWRpbmdUeXBlZFdpdGhBcmd1bWVudHMoKTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQsCgkJQTQoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJPclN1Y2NlZWQsCgkJCUYyKAoJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQWZ0ZXJBcnJvdywgdHlwZUFubm90YXRpb25SZXN1bHQpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCB0eXBlQW5ub3RhdGlvblJlc3VsdC5jb21tZW50cywgY29tbWVudHNBZnRlckFycm93KSwKCQkJCQkJc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkSnVzdCh0eXBlQW5ub3RhdGlvblJlc3VsdC5zeW50YXgpCgkJCQkJfTsKCQkJCX0pLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQknLT4nLAoJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHBvc2l0aXZlbHlJbmRlbnRlZFBsdXNGb2xsb3dlZEJ5LCAyLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpKSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjIpIHsKCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVBbm5vdGF0aW9uKCk7CgkJCQl9KSwKCQkJe2NvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwgc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZ30pKTsKfQp0cnkgewoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVBbm5vdGF0aW9uTm9GbkluY2x1ZGluZ1R5cGVkV2l0aEFyZ3VtZW50cyA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlQW5ub3RhdGlvbk5vRm5JbmNsdWRpbmdUeXBlZFdpdGhBcmd1bWVudHMoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlQW5ub3RhdGlvbk5vRm5JbmNsdWRpbmdUeXBlZFdpdGhBcmd1bWVudHMgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVBbm5vdGF0aW9uTm9GbkluY2x1ZGluZ1R5cGVkV2l0aEFyZ3VtZW50czsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZWRUeXBlQW5ub3RhdGlvbldpdGhBcmd1bWVudHNPcHRpbWlzdGljTGF5b3V0ID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVkVHlwZUFubm90YXRpb25XaXRoQXJndW1lbnRzT3B0aW1pc3RpY0xheW91dCgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVkVHlwZUFubm90YXRpb25XaXRoQXJndW1lbnRzT3B0aW1pc3RpY0xheW91dCA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZWRUeXBlQW5ub3RhdGlvbldpdGhBcmd1bWVudHNPcHRpbWlzdGljTGF5b3V0OwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiR0eXBlQW5ub3RhdGlvbk5vRm5FeGNsdWRpbmdUeXBlZFdpdGhBcmd1bWVudHMgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb25Ob0ZuRXhjbHVkaW5nVHlwZWRXaXRoQXJndW1lbnRzKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb25Ob0ZuRXhjbHVkaW5nVHlwZWRXaXRoQXJndW1lbnRzID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiR0eXBlQW5ub3RhdGlvbk5vRm5FeGNsdWRpbmdUeXBlZFdpdGhBcmd1bWVudHM7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHBhcmVuc1R5cGVBbm5vdGF0aW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHBhcmVuc1R5cGVBbm5vdGF0aW9uKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkcGFyZW5zVHlwZUFubm90YXRpb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHBhcmVuc1R5cGVBbm5vdGF0aW9uOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRyZWNvcmRUeXBlQW5ub3RhdGlvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRyZWNvcmRUeXBlQW5ub3RhdGlvbigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHJlY29yZFR5cGVBbm5vdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRyZWNvcmRUeXBlQW5ub3RhdGlvbjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kcmVjb3JkRmllbGRzVHlwZUFubm90YXRpb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkcmVjb3JkRmllbGRzVHlwZUFubm90YXRpb24oKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRyZWNvcmRGaWVsZHNUeXBlQW5ub3RhdGlvbiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kcmVjb3JkRmllbGRzVHlwZUFubm90YXRpb247Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHJlY29yZEZpZWxkRGVmaW5pdGlvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRyZWNvcmRGaWVsZERlZmluaXRpb24oKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRyZWNvcmRGaWVsZERlZmluaXRpb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHJlY29yZEZpZWxkRGVmaW5pdGlvbjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZUFubm90YXRpb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb24oKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlQW5ub3RhdGlvbiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZUFubm90YXRpb247Cgl9Owp9IGNhdGNoICgkKSB7Cgl0aHJvdyAnU29tZSB0b3AtbGV2ZWwgZGVmaW5pdGlvbnMgZnJvbSBgRWxtLlBhcnNlci5UeXBlQW5ub3RhdGlvbmAgYXJlIGNhdXNpbmcgaW5maW5pdGUgcmVjdXJzaW9uOlxuXG4gIOKUjOKUgOKUgOKUgOKUgOKUgOKUkFxuICDilIIgICAgdHlwZUFubm90YXRpb25Ob0ZuSW5jbHVkaW5nVHlwZWRXaXRoQXJndW1lbnRzXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICB0eXBlZFR5cGVBbm5vdGF0aW9uV2l0aEFyZ3VtZW50c09wdGltaXN0aWNMYXlvdXRcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHR5cGVBbm5vdGF0aW9uTm9GbkV4Y2x1ZGluZ1R5cGVkV2l0aEFyZ3VtZW50c1xuICDilIIgICAgIOKGk1xuICDilIIgICAgcGFyZW5zVHlwZUFubm90YXRpb25cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHJlY29yZFR5cGVBbm5vdGF0aW9uXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICByZWNvcmRGaWVsZHNUeXBlQW5ub3RhdGlvblxuICDilIIgICAgIOKGk1xuICDilIIgICAgcmVjb3JkRmllbGREZWZpbml0aW9uXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICB0eXBlQW5ub3RhdGlvblxuICDilJTilIDilIDilIDilIDilIDilJhcblxuVGhlc2UgZXJyb3JzIGFyZSB2ZXJ5IHRyaWNreSwgc28gcmVhZCBodHRwczovL2VsbS1sYW5nLm9yZy8wLjE5LjEvYmFkLXJlY3Vyc2lvbiB0byBsZWFybiBob3cgdG8gZml4IGl0ISc7fQp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkdmFsaWRhdGUgPSBGMygKCWZ1bmN0aW9uIChpc09rYXksIHByb2JsZW1Pbk5vdE9rYXksIF92MCkgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjEgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92MS4kID09PSAnQmFkJykgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjEuYTsKCQkJCQl2YXIgeCA9IF92MS5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBnb29kID0gX3YxOwoJCQkJCXZhciBhID0gZ29vZC5hOwoJCQkJCXZhciBzMSA9IGdvb2QuYjsKCQkJCQlyZXR1cm4gaXNPa2F5KGEpID8gZ29vZCA6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCXRydWUsCgkJCQkJCUEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0N1c3RvbSwgczEucm93LCBzMS5jb2wsIHByb2JsZW1Pbk5vdE9rYXkpKTsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHdoaWxlV2l0aG91dExpbmVicmVha0FuZDJQYXJ0VXRmMTZUb1Jlc3VsdEFuZFRoZW4gPSBGMygKCWZ1bmN0aW9uICh3aGlsZUNoYXJJc09rYXksIGNvbnN1bWVkU3RyaW5nVG9JbnRlcm1lZGlhdGVPckVyciwgaW50ZXJtZWRpYXRlVG9Gb2xsb3d1cFBhcnNlcikgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIHMxT2Zmc2V0ID0gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcFdoaWxlV2l0aG91dExpbmVicmVha0FuZDJQYXJ0VXRmMTZIZWxwLCB3aGlsZUNoYXJJc09rYXksIHMwLm9mZnNldCwgczAuc3JjKTsKCQkJCXZhciB3aGlsZUNvbnRlbnQgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzMC5vZmZzZXQsIHMxT2Zmc2V0LCBzMC5zcmMpOwoJCQkJdmFyIF92MCA9IGNvbnN1bWVkU3RyaW5nVG9JbnRlcm1lZGlhdGVPckVycih3aGlsZUNvbnRlbnQpOwoJCQkJaWYgKF92MC4kID09PSAnRXJyJykgewoJCQkJCXZhciBwcm9ibGVtTWVzc2FnZSA9IF92MC5hOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQlmYWxzZSwKCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nQ3VzdG9tLCBzMC5yb3csIHMwLmNvbCwgcHJvYmxlbU1lc3NhZ2UpKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGludGVybWVkaWF0ZSA9IF92MC5hOwoJCQkJCXZhciBzMUNvbHVtbiA9IHMwLmNvbCArIChzMU9mZnNldCAtIHMwLm9mZnNldCk7CgkJCQkJdmFyIF92MSA9IGludGVybWVkaWF0ZVRvRm9sbG93dXBQYXJzZXIoaW50ZXJtZWRpYXRlKTsKCQkJCQl2YXIgcGFyc2VGb2xsb3d1cCA9IF92MS5hOwoJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRwU3RlcENvbW1pdCgKCQkJCQkJcGFyc2VGb2xsb3d1cCgKCQkJCQkJCXtjb2w6IHMxQ29sdW1uLCBpbmRlbnQ6IHMwLmluZGVudCwgb2Zmc2V0OiBzMU9mZnNldCwgcm93OiBzMC5yb3csIHNyYzogczAuc3JjfSkpOwoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY2hhbmdlSW5kZW50ID0gRjIoCglmdW5jdGlvbiAobmV3SW5kZW50LCBzKSB7CgkJcmV0dXJuIHtjb2w6IHMuY29sLCBpbmRlbnQ6IG5ld0luZGVudCwgb2Zmc2V0OiBzLm9mZnNldCwgcm93OiBzLnJvdywgc3JjOiBzLnNyY307Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHdpdGhJbmRlbnRTZXRUb0NvbHVtbiA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBwYXJzZSA9IF92MC5hOwoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQlmdW5jdGlvbiAoczApIHsKCQkJdmFyIF92MSA9IHBhcnNlKAoJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY2hhbmdlSW5kZW50LCBzMC5jb2wsIHMwKSk7CgkJCWlmIChfdjEuJCA9PT0gJ0dvb2QnKSB7CgkJCQl2YXIgYSA9IF92MS5hOwoJCQkJdmFyIHMxID0gX3YxLmI7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQlhLAoJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNoYW5nZUluZGVudCwgczAuaW5kZW50LCBzMSkpOwoJCQl9IGVsc2UgewoJCQkJdmFyIGJhZCA9IF92MTsKCQkJCXJldHVybiBiYWQ7CgkJCX0KCQl9KTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHdpdGhJbmRlbnRTZXRUb0NvbHVtbk1pbnVzID0gRjIoCglmdW5jdGlvbiAoY29sdW1uVG9Nb3ZlSW5kZW50YXRpb25CYXNlQmFja0J5LCBfdjApIHsKCQl2YXIgcGFyc2UgPSBfdjAuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjEgPSBwYXJzZSgKCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjaGFuZ2VJbmRlbnQsIHMwLmNvbCAtIGNvbHVtblRvTW92ZUluZGVudGF0aW9uQmFzZUJhY2tCeSwgczApKTsKCQkJCWlmIChfdjEuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJdmFyIGEgPSBfdjEuYTsKCQkJCQl2YXIgczEgPSBfdjEuYjsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCWEsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNoYW5nZUluZGVudCwgczAuaW5kZW50LCBzMSkpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYmFkID0gX3YxOwoJCQkJCXJldHVybiBiYWQ7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGV4dGVuZGVkU3ViRXhwcmVzc2lvbk9wdGltaXN0aWNMYXlvdXQgPSBGMigKCWZ1bmN0aW9uICh0b1Jlc3VsdCwgYWZ0ZXJDb21taXR0aW5nKSB7CgkJcmV0dXJuIEE0KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wV2hpbGVTdWNjZWVkc09udG9SZXN1bHRGcm9tUGFyc2VyLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkcG9zaXRpdmVseUluZGVudGVkRm9sbG93ZWRCeSgKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhPcGVyYXRvckFuZFRoZW4sIHRvUmVzdWx0LCBhZnRlckNvbW1pdHRpbmcpKSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkc3ViRXhwcmVzc2lvbk1heWJlQXBwbGllZE9wdGltaXN0aWNMYXlvdXQoKSwKCQkJRjIoCgkJCQlmdW5jdGlvbiAoZXh0ZW5zaW9uUmlnaHRSZXN1bHQsIGxlZnROb2RlV2l0aENvbW1lbnRzKSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgZXh0ZW5zaW9uUmlnaHRSZXN1bHQuY29tbWVudHMsIGxlZnROb2RlV2l0aENvbW1lbnRzLmNvbW1lbnRzKSwKCQkJCQkJc3ludGF4OiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGFwcGx5RXh0ZW5zaW9uUmlnaHQsIGV4dGVuc2lvblJpZ2h0UmVzdWx0LnN5bnRheCwgbGVmdE5vZGVXaXRoQ29tbWVudHMuc3ludGF4KQoJCQkJCX07CgkJCQl9KSwKCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhMZWZ0ID0gRjIoCglmdW5jdGlvbiAobGVmdFByZWNlZGVuY2UsIHN5bWJvbCkgewoJCXJldHVybiB7CgkJCWV4dGVuc2lvblJpZ2h0OiBBMygKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCQlGMigKCQkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmVGaXJzdCwgZmlyc3QpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGZpcnN0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZUZpcnN0KSwKCQkJCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRFeHRlbmRSaWdodEJ5T3BlcmF0aW9uKAoJCQkJCQkJCXtkaXJlY3Rpb246ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEluZml4JExlZnQsIGV4cHJlc3Npb246IGZpcnN0LnN5bnRheCwgc3ltYm9sOiBzeW1ib2x9KQoJCQkJCQl9OwoJCQkJCX0pLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRleHRlbmRlZFN1YkV4cHJlc3Npb25PcHRpbWlzdGljTGF5b3V0LAoJCQkJCWZ1bmN0aW9uIChpbmZvKSB7CgkJCQkJCXJldHVybiAoX1V0aWxzX2NtcChpbmZvLmxlZnRQcmVjZWRlbmNlLCBsZWZ0UHJlY2VkZW5jZSkgPiAwKSA/ICRlbG0kY29yZSRSZXN1bHQkT2soaW5mbykgOiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHRlbXBvcmFyeUVyclByZWNlZGVuY2VUb29IaWdoOwoJCQkJCX0sCgkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJcmV0dXJuICQuZXh0ZW5zaW9uUmlnaHQ7CgkJCQkJfSkpLAoJCQlsZWZ0UHJlY2VkZW5jZTogbGVmdFByZWNlZGVuY2UsCgkJCXN5bWJvbDogc3ltYm9sCgkJfTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeE5vbkFzc29jaWF0aXZlID0gRjIoCglmdW5jdGlvbiAobGVmdFByZWNlZGVuY2UsIHN5bWJvbCkgewoJCXJldHVybiB7CgkJCWV4dGVuc2lvblJpZ2h0OiBBMygKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCQlGMigKCQkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmUsIHJpZ2h0KSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCByaWdodC5jb21tZW50cywgY29tbWVudHNCZWZvcmUpLAoJCQkJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJEV4dGVuZFJpZ2h0QnlPcGVyYXRpb24oCgkJCQkJCQkJe2RpcmVjdGlvbjogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkSW5maXgkTm9uLCBleHByZXNzaW9uOiByaWdodC5zeW50YXgsIHN5bWJvbDogc3ltYm9sfSkKCQkJCQkJfTsKCQkJCQl9KSwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCUEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kZXh0ZW5kZWRTdWJFeHByZXNzaW9uT3B0aW1pc3RpY0xheW91dCwKCQkJCQlmdW5jdGlvbiAoaW5mbykgewoJCQkJCQlyZXR1cm4gKF9VdGlsc19jbXAoaW5mby5sZWZ0UHJlY2VkZW5jZSwgbGVmdFByZWNlZGVuY2UpID4gLTEpID8gJGVsbSRjb3JlJFJlc3VsdCRPayhpbmZvKSA6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kdGVtcG9yYXJ5RXJyUHJlY2VkZW5jZVRvb0hpZ2g7CgkJCQkJfSwKCQkJCQlmdW5jdGlvbiAoaW5mbykgewoJCQkJCQlyZXR1cm4gX1V0aWxzX2VxKGluZm8ubGVmdFByZWNlZGVuY2UsIGxlZnRQcmVjZWRlbmNlKSA/ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJvYmxlbUNhbm5vdE1peE5vbkFzc29jaWF0aXZlSW5maXhPcGVyYXRvcnMgOiBpbmZvLmV4dGVuc2lvblJpZ2h0OwoJCQkJCX0pKSwKCQkJbGVmdFByZWNlZGVuY2U6IGxlZnRQcmVjZWRlbmNlLAoJCQlzeW1ib2w6IHN5bWJvbAoJCX07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhPcGVyYXRvckFuZFRoZW4gPSBGMigKCWZ1bmN0aW9uICh0b1Jlc3VsdCwgYWZ0ZXJDb21taXR0aW5nKSB7CgkJcmV0dXJuIEEzKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aGlsZVdpdGhvdXRMaW5lYnJlYWtBbmQyUGFydFV0ZjE2VG9SZXN1bHRBbmRUaGVuLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkaXNPcGVyYXRvclN5bWJvbENoYXIsCgkJCWZ1bmN0aW9uIChvcGVyYXRvcikgewoJCQkJc3dpdGNoIChvcGVyYXRvcikgewoJCQkJCWNhc2UgJ3w+JzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTFBcFIoKSk7CgkJCQkJY2FzZSAnKysnOgoJCQkJCQlyZXR1cm4gdG9SZXN1bHQoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNWFwcGVuZCgpKTsKCQkJCQljYXNlICc8fCc6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2UxQXBMKCkpOwoJCQkJCWNhc2UgJz4+JzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTlDb21wb3NlUigpKTsKCQkJCQljYXNlICc9PSc6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0RXEoKSk7CgkJCQkJY2FzZSAnKic6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U3TXVsKCkpOwoJCQkJCWNhc2UgJzo6JzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTVDb25zKCkpOwoJCQkJCWNhc2UgJysnOgoJCQkJCQlyZXR1cm4gdG9SZXN1bHQoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNkFkZCgpKTsKCQkJCQljYXNlICctJzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTZTdWIoKSk7CgkJCQkJY2FzZSAnfC4nOgoJCQkJCQlyZXR1cm4gdG9SZXN1bHQoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNklnbm9yZSgpKTsKCQkJCQljYXNlICcmJic6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2UzQW5kKCkpOwoJCQkJCWNhc2UgJ3w9JzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTVLZWVwKCkpOwoJCQkJCWNhc2UgJzw8JzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTlDb21wb3NlTCgpKTsKCQkJCQljYXNlICcvPSc6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0TmVxKCkpOwoJCQkJCWNhc2UgJy8vJzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTdJZGl2KCkpOwoJCQkJCWNhc2UgJy8nOgoJCQkJCQlyZXR1cm4gdG9SZXN1bHQoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlN0ZkaXYoKSk7CgkJCQkJY2FzZSAnPC8+JzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTdTbGFzaCgpKTsKCQkJCQljYXNlICd8fCc6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2UyT3IoKSk7CgkJCQkJY2FzZSAnPD0nOgoJCQkJCQlyZXR1cm4gdG9SZXN1bHQoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNExlKCkpOwoJCQkJCWNhc2UgJz49JzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRHZSgpKTsKCQkJCQljYXNlICc+JzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRHdCgpKTsKCQkJCQljYXNlICc8Pz4nOgoJCQkJCQlyZXR1cm4gdG9SZXN1bHQoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlOFF1ZXN0aW9uTWFyaygpKTsKCQkJCQljYXNlICc8JzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRMdCgpKTsKCQkJCQljYXNlICdeJzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZThQb3coKSk7CgkJCQkJZGVmYXVsdDoKCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kZXJyVW5rbm93bkluZml4T3BlcmF0b3I7CgkJCQl9CgkJCX0sCgkJCWFmdGVyQ29tbWl0dGluZyk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhSaWdodCA9IEYyKAoJZnVuY3Rpb24gKGxlZnRQcmVjZWRlbmNlLCBzeW1ib2wpIHsKCQlyZXR1cm4gewoJCQlleHRlbnNpb25SaWdodDogQTMoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJRjIoCgkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlRmlyc3QsIGZpcnN0KSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBmaXJzdC5jb21tZW50cywgY29tbWVudHNCZWZvcmVGaXJzdCksCgkJCQkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kRXh0ZW5kUmlnaHRCeU9wZXJhdGlvbigKCQkJCQkJCQl7ZGlyZWN0aW9uOiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRJbmZpeCRSaWdodCwgZXhwcmVzc2lvbjogZmlyc3Quc3ludGF4LCBzeW1ib2w6IHN5bWJvbH0pCgkJCQkJCX07CgkJCQkJfSksCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQlBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGV4dGVuZGVkU3ViRXhwcmVzc2lvbk9wdGltaXN0aWNMYXlvdXQsCgkJCQkJZnVuY3Rpb24gKGluZm8pIHsKCQkJCQkJcmV0dXJuIChfVXRpbHNfY21wKGluZm8ubGVmdFByZWNlZGVuY2UsIGxlZnRQcmVjZWRlbmNlKSA+IC0xKSA/ICRlbG0kY29yZSRSZXN1bHQkT2soaW5mbykgOiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHRlbXBvcmFyeUVyclByZWNlZGVuY2VUb29IaWdoOwoJCQkJCX0sCgkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJcmV0dXJuICQuZXh0ZW5zaW9uUmlnaHQ7CgkJCQkJfSkpLAoJCQlsZWZ0UHJlY2VkZW5jZTogbGVmdFByZWNlZGVuY2UsCgkJCXN5bWJvbDogc3ltYm9sCgkJfTsKCX0pOwpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXRPclVucXVhbGlmaWVkUmVmZXJlbmNlRXhwcmVzc2lvbigpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0RXhwcmVzc2lvbigpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kdW5xdWFsaWZpZWRGdW5jdGlvblJlZmVyZW5jZUV4cHJlc3Npb25Gb2xsb3dlZEJ5UmVjb3JkQWNjZXNzKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXRFeHByZXNzaW9uKCkgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LAoJCSdsZXQnLAoJCUE0KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzV2l0aFN0YXJ0TG9jYXRpb24sCgkJCUY0KAoJCQkJZnVuY3Rpb24gKHN0YXJ0LCBkZWNsYXJhdGlvbnMsIGNvbW1lbnRzQWZ0ZXJJbiwgZXhwcmVzc2lvblJlc3VsdCkgewoJCQkJCXZhciBfdjM4ID0gZXhwcmVzc2lvblJlc3VsdC5zeW50YXg7CgkJCQkJdmFyIGV4cHJlc3Npb25SYW5nZSA9IF92MzguYTsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQlleHByZXNzaW9uUmVzdWx0LmNvbW1lbnRzLAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVySW4sIGRlY2xhcmF0aW9ucy5jb21tZW50cykpLAoJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJewoJCQkJCQkJCWVuZDogZXhwcmVzc2lvblJhbmdlLmVuZCwKCQkJCQkJCQlzdGFydDoge2NvbHVtbjogc3RhcnQuY29sdW1uIC0gMywgcm93OiBzdGFydC5yb3d9CgkJCQkJCQl9LAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRMZXRFeHByZXNzaW9uKAoJCQkJCQkJCXtkZWNsYXJhdGlvbnM6IGRlY2xhcmF0aW9ucy5kZWNsYXJhdGlvbnMsIGV4cHJlc3Npb246IGV4cHJlc3Npb25SZXN1bHQuc3ludGF4fSkpCgkJCQkJfTsKCQkJCX0pLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHdpdGhJbmRlbnRTZXRUb0NvbHVtbk1pbnVzLAoJCQkJMywKCQkJCUEzKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCQkJRjIoCgkJCQkJCWZ1bmN0aW9uIChjb21tZW50c0FmdGVyTGV0LCBkZWNsYXJhdGlvbnMpIHsKCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgZGVjbGFyYXRpb25zLmNvbW1lbnRzLCBjb21tZW50c0FmdGVyTGV0KSwKCQkJCQkJCQlkZWNsYXJhdGlvbnM6IGRlY2xhcmF0aW9ucy5zeW50YXgKCQkJCQkJCX07CgkJCQkJCX0pLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aXRoSW5kZW50U2V0VG9Db2x1bW4oCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldERlY2xhcmF0aW9uc0luKCkpKSksCgkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRwb3NpdGl2ZWx5SW5kZW50ZWRQbHVzRm9sbG93ZWRCeSwgMiwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkZXhwcmVzc2lvbigpKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0RGVjbGFyYXRpb25zSW4oKSB7CglyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9uVG9wSW5kZW50YXRpb25Gb2xsb3dlZEJ5KAoJCUE0KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzLAoJCQlGMygKCQkJCWZ1bmN0aW9uIChoZWFkTGV0UmVzdWx0LCBjb21tZW50c0FmdGVyLCB0YWlsTGV0UmVzdWx0KSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJdGFpbExldFJlc3VsdC5jb21tZW50cywKCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlciwgaGVhZExldFJlc3VsdC5jb21tZW50cykpLAoJCQkJCQlzeW50YXg6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGhlYWRMZXRSZXN1bHQuc3ludGF4LCB0YWlsTGV0UmVzdWx0LnN5bnRheCkKCQkJCQl9OwoJCQkJfSksCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0RnVuY3Rpb24oKSwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldERlc3RydWN0dXJpbmdEZWNsYXJhdGlvbigpKSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQsCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyR1bnRpbCwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRpblRva2VuLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkYmxvY2tFbGVtZW50KCkpKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkYmxvY2tFbGVtZW50KCkgewoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvblRvcEluZGVudGF0aW9uRm9sbG93ZWRCeSgKCQlBMygKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJRjIoCgkJCQlmdW5jdGlvbiAobGV0RGVjbGFyYXRpb25SZXN1bHQsIGNvbW1lbnRzQWZ0ZXIpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyLCBsZXREZWNsYXJhdGlvblJlc3VsdC5jb21tZW50cyksCgkJCQkJCXN5bnRheDogbGV0RGVjbGFyYXRpb25SZXN1bHQuc3ludGF4CgkJCQkJfTsKCQkJCX0pLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldEZ1bmN0aW9uKCksCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXREZXN0cnVjdHVyaW5nRGVjbGFyYXRpb24oKSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvcHRpbWlzdGljTGF5b3V0KSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkY2FzZU9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uKCkgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRjYXNlRXhwcmVzc2lvbigpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kdW5xdWFsaWZpZWRGdW5jdGlvblJlZmVyZW5jZUV4cHJlc3Npb25Gb2xsb3dlZEJ5UmVjb3JkQWNjZXNzKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRjYXNlRXhwcmVzc2lvbigpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwKCQknY2FzZScsCgkJQTYoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDVXaXRoU3RhcnRMb2NhdGlvbiwKCQkJRjYoCgkJCQlmdW5jdGlvbiAoc3RhcnQsIGNvbW1lbnRzQWZ0ZXJDYXNlLCBjYXNlZEV4cHJlc3Npb25SZXN1bHQsIGNvbW1lbnRzQmVmb3JlT2YsIGNvbW1lbnRzQWZ0ZXJPZiwgY2FzZXNSZXN1bHQpIHsKCQkJCQl2YXIgX3YzMiA9IGNhc2VzUmVzdWx0LnN5bnRheDsKCQkJCQl2YXIgZmlyc3RDYXNlID0gX3YzMi5hOwoJCQkJCXZhciBsYXN0VG9TZWNvbmRDYXNlID0gX3YzMi5iOwoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCWNhc2VzUmVzdWx0LmNvbW1lbnRzLAoJCQkJCQkJQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCWNvbW1lbnRzQWZ0ZXJPZiwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQljb21tZW50c0JlZm9yZU9mLAoJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNhc2VkRXhwcmVzc2lvblJlc3VsdC5jb21tZW50cywgY29tbWVudHNBZnRlckNhc2UpKSkpLAoJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJewoJCQkJCQkJCWVuZDogZnVuY3Rpb24gKCkgewoJCQkJCQkJCQlpZiAobGFzdFRvU2Vjb25kQ2FzZS5iKSB7CgkJCQkJCQkJCQl2YXIgX3YzNCA9IGxhc3RUb1NlY29uZENhc2UuYTsKCQkJCQkJCQkJCXZhciBfdjM1ID0gX3YzNC5iOwoJCQkJCQkJCQkJdmFyIGxhc3RDYXNlRXhwcmVzc2lvblJhbmdlID0gX3YzNS5hOwoJCQkJCQkJCQkJcmV0dXJuIGxhc3RDYXNlRXhwcmVzc2lvblJhbmdlLmVuZDsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXZhciBfdjM2ID0gZmlyc3RDYXNlOwoJCQkJCQkJCQkJdmFyIF92MzcgPSBfdjM2LmI7CgkJCQkJCQkJCQl2YXIgZmlyc3RDYXNlRXhwcmVzc2lvblJhbmdlID0gX3YzNy5hOwoJCQkJCQkJCQkJcmV0dXJuIGZpcnN0Q2FzZUV4cHJlc3Npb25SYW5nZS5lbmQ7CgkJCQkJCQkJCX0KCQkJCQkJCQl9KCksCgkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHN0YXJ0LmNvbHVtbiAtIDQsIHJvdzogc3RhcnQucm93fQoJCQkJCQkJfSwKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kQ2FzZUV4cHJlc3Npb24oCgkJCQkJCQkJewoJCQkJCQkJCQljYXNlczogQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkJZmlyc3RDYXNlLAoJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShsYXN0VG9TZWNvbmRDYXNlKSksCgkJCQkJCQkJCWV4cHJlc3Npb246IGNhc2VkRXhwcmVzc2lvblJlc3VsdC5zeW50YXgKCQkJCQkJCQl9KSkKCQkJCQl9OwoJCQkJfSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkZXhwcmVzc2lvbigpLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LCAnb2YnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aXRoSW5kZW50U2V0VG9Db2x1bW4oCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRjYXNlU3RhdGVtZW50cygpKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGNhc2VTdGF0ZW1lbnRzKCkgewoJcmV0dXJuIEE2KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDUsCgkJRjUoCgkJCWZ1bmN0aW9uIChmaXJzdENhc2VQYXR0ZXJuUmVzdWx0LCBjb21tZW50c0FmdGVyRmlyc3RDYXNlUGF0dGVybiwgY29tbWVudHNBZnRlckZpcnN0Q2FzZUFycm93UmlnaHQsIGZpcnN0Q2FzZUV4cHJlc3Npb25SZXN1bHQsIGxhc3RUb1NlY29uZENhc2UpIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCWxhc3RUb1NlY29uZENhc2UuY29tbWVudHMsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJZmlyc3RDYXNlRXhwcmVzc2lvblJlc3VsdC5jb21tZW50cywKCQkJCQkJCUEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQljb21tZW50c0FmdGVyRmlyc3RDYXNlQXJyb3dSaWdodCwKCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJGaXJzdENhc2VQYXR0ZXJuLCBmaXJzdENhc2VQYXR0ZXJuUmVzdWx0LmNvbW1lbnRzKSkpKSwKCQkJCQlzeW50YXg6IF9VdGlsc19UdXBsZTIoCgkJCQkJCV9VdGlsc19UdXBsZTIoZmlyc3RDYXNlUGF0dGVyblJlc3VsdC5zeW50YXgsIGZpcnN0Q2FzZUV4cHJlc3Npb25SZXN1bHQuc3ludGF4KSwKCQkJCQkJbGFzdFRvU2Vjb25kQ2FzZS5zeW50YXgpCgkJCQl9OwoJCQl9KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRwYXR0ZXJuLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAnLT4nLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJG1hbnlXaXRob3V0UmV2ZXJzZSgKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkY2FzZVN0YXRlbWVudCgpKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkY2FzZVN0YXRlbWVudCgpIHsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb25Ub3BJbmRlbnRhdGlvbkZvbGxvd2VkQnkoCgkJQTUoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDQsCgkJCUY0KAoJCQkJZnVuY3Rpb24gKHBhdHRlcm4sIGNvbW1lbnRzQmVmb3JlQXJyb3dSaWdodCwgY29tbWVudHNBZnRlckFycm93UmlnaHQsIGV4cHIpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQlleHByLmNvbW1lbnRzLAoJCQkJCQkJQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCWNvbW1lbnRzQWZ0ZXJBcnJvd1JpZ2h0LAoJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNCZWZvcmVBcnJvd1JpZ2h0LCBwYXR0ZXJuLmNvbW1lbnRzKSkpLAoJCQkJCQlzeW50YXg6IF9VdGlsc19UdXBsZTIocGF0dGVybi5zeW50YXgsIGV4cHIuc3ludGF4KQoJCQkJCX07CgkJCQl9KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcGF0dGVybiwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAnLT4nLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uKCkpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyR0dXBsZWRFeHByZXNzaW9uSWZOZWNlc3NhcnlGb2xsb3dlZEJ5UmVjb3JkQWNjZXNzKCkgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJJygnLAoJCUEzKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjMsCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sV2l0aEVuZExvY2F0aW9uLAoJCQkJJyknLAoJCQkJZnVuY3Rpb24gKGVuZCkgewoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXsKCQkJCQkJCQllbmQ6IGVuZCwKCQkJCQkJCQlzdGFydDoge2NvbHVtbjogZW5kLmNvbHVtbiAtIDIsIHJvdzogZW5kLnJvd30KCQkJCQkJCX0sCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJFVuaXRFeHByKQoJCQkJCX07CgkJCQl9KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRhbGxvd2VkUHJlZml4T3BlcmF0b3JGb2xsb3dlZEJ5Q2xvc2luZ1BhcmVuc09uZU9mLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyR0dXBsZWRFeHByZXNzaW9uSW5uZXJBZnRlck9wZW5pbmdQYXJlbnMoKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHR1cGxlZEV4cHJlc3Npb25Jbm5lckFmdGVyT3BlbmluZ1BhcmVucygpIHsKCXJldHVybiBBNSgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0V2l0aFJhbmdlLAoJCUY1KAoJCQlmdW5jdGlvbiAocmFuZ2VBZnRlck9wZW5pbmdQYXJlbnMsIGNvbW1lbnRzQmVmb3JlRmlyc3RQYXJ0LCBmaXJzdFBhcnQsIGNvbW1lbnRzQWZ0ZXJGaXJzdFBhcnQsIHRhaWxQYXJ0cykgewoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJdGFpbFBhcnRzLmNvbW1lbnRzLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCWNvbW1lbnRzQWZ0ZXJGaXJzdFBhcnQsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGZpcnN0UGFydC5jb21tZW50cywgY29tbWVudHNCZWZvcmVGaXJzdFBhcnQpKSksCgkJCQkJc3ludGF4OiBmdW5jdGlvbiAoKSB7CgkJCQkJCXZhciBfdjI3ID0gdGFpbFBhcnRzLnN5bnRheDsKCQkJCQkJaWYgKF92MjcuJCA9PT0gJ1R1cGxlZFBhcmVudGhlc2l6ZWRGb2xsb3dlZEJ5UmVjb3JkQWNjZXNzZXMnKSB7CgkJCQkJCQl2YXIgcmVjb3JkQWNjZXNzZXMgPSBfdjI3LmE7CgkJCQkJCQlpZiAoIXJlY29yZEFjY2Vzc2VzLmIpIHsKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQkJewoJCQkJCQkJCQkJZW5kOiByYW5nZUFmdGVyT3BlbmluZ1BhcmVucy5lbmQsCgkJCQkJCQkJCQlzdGFydDoge2NvbHVtbjogcmFuZ2VBZnRlck9wZW5pbmdQYXJlbnMuc3RhcnQuY29sdW1uIC0gMSwgcm93OiByYW5nZUFmdGVyT3BlbmluZ1BhcmVucy5zdGFydC5yb3d9CgkJCQkJCQkJCX0sCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kUGFyZW50aGVzaXplZEV4cHJlc3Npb24oZmlyc3RQYXJ0LnN5bnRheCkpOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgX3YyOSA9IHJlY29yZEFjY2Vzc2VzLmE7CgkJCQkJCQkJdmFyIGZpcnN0UmVjb3JkQWNjZXNzUmFuZ2UgPSBfdjI5LmE7CgkJCQkJCQkJdmFyIHJhbmdlID0gewoJCQkJCQkJCQllbmQ6IHtjb2x1bW46IGZpcnN0UmVjb3JkQWNjZXNzUmFuZ2Uuc3RhcnQuY29sdW1uIC0gMSwgcm93OiBmaXJzdFJlY29yZEFjY2Vzc1JhbmdlLnN0YXJ0LnJvd30sCgkJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiByYW5nZUFmdGVyT3BlbmluZ1BhcmVucy5zdGFydC5jb2x1bW4gLSAxLCByb3c6IHJhbmdlQWZ0ZXJPcGVuaW5nUGFyZW5zLnN0YXJ0LnJvd30KCQkJCQkJCQl9OwoJCQkJCQkJCXZhciBwYXJlbnRoZXNpemVkTm9kZSA9IEEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJCXJhbmdlLAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGZpcnN0UGFydC5zeW50YXgpKTsKCQkJCQkJCQlyZXR1cm4gQTMoCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkJCQkJCQlGMigKCQkJCQkJCQkJCWZ1bmN0aW9uIChmaWVsZE5vZGUsIGxlZnROb2RlKSB7CgkJCQkJCQkJCQkJdmFyIGZpZWxkUmFuZ2UgPSBmaWVsZE5vZGUuYTsKCQkJCQkJCQkJCQl2YXIgbGVmdFJhbmdlID0gbGVmdE5vZGUuYTsKCQkJCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQkJCQkJe2VuZDogZmllbGRSYW5nZS5lbmQsIHN0YXJ0OiBsZWZ0UmFuZ2Uuc3RhcnR9LAoJCQkJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJFJlY29yZEFjY2VzcywgbGVmdE5vZGUsIGZpZWxkTm9kZSkpOwoJCQkJCQkJCQkJfSksCgkJCQkJCQkJCXBhcmVudGhlc2l6ZWROb2RlLAoJCQkJCQkJCQlyZWNvcmRBY2Nlc3Nlcyk7CgkJCQkJCQl9CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgX3YzMCA9IF92MjcuYTsKCQkJCQkJCXZhciBzZWNvbmRQYXJ0ID0gX3YzMC5hOwoJCQkJCQkJdmFyIG1heWJlVGhpcmRQYXJ0ID0gX3YzMC5iOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQl7CgkJCQkJCQkJCWVuZDogcmFuZ2VBZnRlck9wZW5pbmdQYXJlbnMuZW5kLAoJCQkJCQkJCQlzdGFydDoge2NvbHVtbjogcmFuZ2VBZnRlck9wZW5pbmdQYXJlbnMuc3RhcnQuY29sdW1uIC0gMSwgcm93OiByYW5nZUFmdGVyT3BlbmluZ1BhcmVucy5zdGFydC5yb3d9CgkJCQkJCQkJfSwKCQkJCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJCQkJCWlmIChtYXliZVRoaXJkUGFydC4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJFR1cGxlZEV4cHJlc3Npb24oCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbZmlyc3RQYXJ0LnN5bnRheCwgc2Vjb25kUGFydF0pKTsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXZhciB0aGlyZFBhcnQgPSBtYXliZVRoaXJkUGFydC5hOwoJCQkJCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kVHVwbGVkRXhwcmVzc2lvbigKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVtmaXJzdFBhcnQuc3ludGF4LCBzZWNvbmRQYXJ0LCB0aGlyZFBhcnRdKSk7CgkJCQkJCQkJCX0KCQkJCQkJCQl9KCkpOwoJCQkJCQl9CgkJCQkJfSgpCgkJCQl9OwoJCQl9KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkZXhwcmVzc2lvbigpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQknKScsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG11bHRpUmVjb3JkQWNjZXNzTWFwKAoJCQkJCWZ1bmN0aW9uIChyZWNvcmRBY2Nlc3NlcykgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJFR1cGxlZFBhcmVudGhlc2l6ZWRGb2xsb3dlZEJ5UmVjb3JkQWNjZXNzZXMocmVjb3JkQWNjZXNzZXMpCgkJCQkJCX07CgkJCQkJfSkpLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQknLCcsCgkJCQlBNSgKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0LAoJCQkJCUY0KAoJCQkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmUsIHBhcnRSZXN1bHQsIGNvbW1lbnRzQWZ0ZXIsIG1heWJlVGhpcmRQYXJ0KSB7CgkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQltYXliZVRoaXJkUGFydC5jb21tZW50cywKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQljb21tZW50c0FmdGVyLAoJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBwYXJ0UmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZSkpKSwKCQkJCQkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kVHVwbGVkVHdvT3JUaHJlZSgKCQkJCQkJCQkJX1V0aWxzX1R1cGxlMihwYXJ0UmVzdWx0LnN5bnRheCwgbWF5YmVUaGlyZFBhcnQuc3ludGF4KSkKCQkJCQkJCX07CgkJCQkJCX0pLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uKCksCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCUEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQkJCQkJJyknLAoJCQkJCQkJe2NvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwgc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZ30pLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQkJCQknLCcsCgkJCQkJCQlBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U3ltYm9sLAoJCQkJCQkJCScpJywKCQkJCQkJCQlBNCgKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQkJCQkJCQkJRjMoCgkJCQkJCQkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmUsIHBhcnRSZXN1bHQsIGNvbW1lbnRzQWZ0ZXIpIHsKCQkJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQkJCQljb21tZW50c0FmdGVyLAoJCQkJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBwYXJ0UmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZSkpLAoJCQkJCQkJCQkJCQlzeW50YXg6ICRlbG0kY29yZSRNYXliZSRKdXN0KHBhcnRSZXN1bHQuc3ludGF4KQoJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQl9KSwKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uKCksCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCkpKSkpKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHJlY29yZEV4cHJlc3Npb25Gb2xsb3dlZEJ5UmVjb3JkQWNjZXNzKCkgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJJ3snLAoJCUEzKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQlGMigKCQkJCWZ1bmN0aW9uIChsZWZ0ZXN0UmVzdWx0LCByZWNvcmRBY2Nlc3NlcykgewoJCQkJCWlmICghcmVjb3JkQWNjZXNzZXMuYikgewoJCQkJCQlyZXR1cm4gbGVmdGVzdFJlc3VsdDsKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJY29tbWVudHM6IGxlZnRlc3RSZXN1bHQuY29tbWVudHMsCgkJCQkJCQlzeW50YXg6IEEzKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkJCQkJCUYyKAoJCQkJCQkJCQlmdW5jdGlvbiAoZmllbGROb2RlLCBsZWZ0Tm9kZSkgewoJCQkJCQkJCQkJdmFyIGZpZWxkUmFuZ2UgPSBmaWVsZE5vZGUuYTsKCQkJCQkJCQkJCXZhciBsZWZ0UmFuZ2UgPSBsZWZ0Tm9kZS5hOwoJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQkJCQl7ZW5kOiBmaWVsZFJhbmdlLmVuZCwgc3RhcnQ6IGxlZnRSYW5nZS5zdGFydH0sCgkJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRSZWNvcmRBY2Nlc3MsIGxlZnROb2RlLCBmaWVsZE5vZGUpKTsKCQkJCQkJCQkJfSksCgkJCQkJCQkJbGVmdGVzdFJlc3VsdC5zeW50YXgsCgkJCQkJCQkJcmVjb3JkQWNjZXNzZXMpCgkJCQkJCX07CgkJCQkJfQoJCQkJfSksCgkJCUEzKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhSYW5nZSwKCQkJCUYzKAoJCQkJCWZ1bmN0aW9uIChyYW5nZSwgY29tbWVudHNCZWZvcmUsIGFmdGVyQ3VybHkpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGFmdGVyQ3VybHkuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKSwKCQkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcmFuZ2VNb3ZlU3RhcnRMZWZ0QnlPbmVDb2x1bW4ocmFuZ2UpLAoJCQkJCQkJCWFmdGVyQ3VybHkuc3ludGF4KQoJCQkJCQl9OwoJCQkJCX0pLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcmVjb3JkQ29udGVudHNDdXJseUVuZCgpKSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRtdWx0aVJlY29yZEFjY2VzcykpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHJlY29yZENvbnRlbnRzQ3VybHlFbmQoKSB7CglyZXR1cm4gQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCUE2KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA1LAoJCQlGNSgKCQkJCWZ1bmN0aW9uIChuYW1lTm9kZSwgY29tbWVudHNBZnRlckZ1bmN0aW9uTmFtZSwgYWZ0ZXJOYW1lQmVmb3JlRmllbGRzLCB0YWlsRmllbGRzLCBjb21tZW50c0JlZm9yZUNsb3NpbmdDdXJseSkgewoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCWNvbW1lbnRzQmVmb3JlQ2xvc2luZ0N1cmx5LAoJCQkJCQkJQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCXRhaWxGaWVsZHMuY29tbWVudHMsCgkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBhZnRlck5hbWVCZWZvcmVGaWVsZHMuY29tbWVudHMsIGNvbW1lbnRzQWZ0ZXJGdW5jdGlvbk5hbWUpKSksCgkJCQkJCXN5bnRheDogZnVuY3Rpb24gKCkgewoJCQkJCQkJdmFyIF92MjUgPSBhZnRlck5hbWVCZWZvcmVGaWVsZHMuc3ludGF4OwoJCQkJCQkJaWYgKF92MjUuJCA9PT0gJ1JlY29yZFVwZGF0ZUZpcnN0U2V0dGVyJykgewoJCQkJCQkJCXZhciBmaXJzdEZpZWxkID0gX3YyNS5hOwoJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRSZWNvcmRVcGRhdGVFeHByZXNzaW9uLAoJCQkJCQkJCQluYW1lTm9kZSwKCQkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZmlyc3RGaWVsZCwgdGFpbEZpZWxkcy5zeW50YXgpKTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIGZpcnN0RmllbGRWYWx1ZSA9IF92MjUuYTsKCQkJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRSZWNvcmRFeHByKAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGNvbWJpbmUsICRlbG0kY29yZSRUdXBsZSRwYWlyLCBuYW1lTm9kZSwgZmlyc3RGaWVsZFZhbHVlKSwKCQkJCQkJCQkJCXRhaWxGaWVsZHMuc3ludGF4KSk7CgkJCQkJCQl9CgkJCQkJCX0oKQoJCQkJCX07CgkJCQl9KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUsCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJCQlBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCSd8JywKCQkJCQlBMygKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJCQkJRjIoCgkJCQkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmUsIHNldHRlclJlc3VsdCkgewoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHNldHRlclJlc3VsdC5jb21tZW50cywgY29tbWVudHNCZWZvcmUpLAoJCQkJCQkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kUmVjb3JkVXBkYXRlRmlyc3RTZXR0ZXIoc2V0dGVyUmVzdWx0LnN5bnRheCkKCQkJCQkJCQl9OwoJCQkJCQkJfSksCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcmVjb3JkU2V0dGVyTm9kZVdpdGhMYXlvdXQoKSkpLAoJCQkJQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJCQknPScsCgkJCQkJQTQoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDMsCgkJCQkJCUYzKAoJCQkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCBleHByZXNzaW9uUmVzdWx0LCBjb21tZW50c0FmdGVyKSB7CgkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJY29tbWVudHNBZnRlciwKCQkJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgZXhwcmVzc2lvblJlc3VsdC5jb21tZW50cywgY29tbWVudHNCZWZvcmUpKSwKCQkJCQkJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJEZpZWxkc0ZpcnN0VmFsdWUoZXhwcmVzc2lvblJlc3VsdC5zeW50YXgpCgkJCQkJCQkJfTsKCQkJCQkJCX0pLAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKSwKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSkpLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRyZWNvcmRGaWVsZHMoKSwKCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZm9sbG93ZWRCeVN5bWJvbCwgJ30nLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpKSwKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQknfScsCgkJCXsKCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRSZWNvcmRFeHByKF9MaXN0X05pbCkKCQkJfSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHJlY29yZEZpZWxkcygpIHsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJG1hbnkoCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCScsJywKCQkJQTMoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJRjIoCgkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCBzZXR0ZXJSZXN1bHQpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHNldHRlclJlc3VsdC5jb21tZW50cywgY29tbWVudHNCZWZvcmUpLAoJCQkJCQkJc3ludGF4OiBzZXR0ZXJSZXN1bHQuc3ludGF4CgkJCQkJCX07CgkJCQkJfSksCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRyZWNvcmRTZXR0ZXJOb2RlV2l0aExheW91dCgpKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHJlY29yZFNldHRlck5vZGVXaXRoTGF5b3V0KCkgewoJcmV0dXJuIEE2KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDVXaXRoUmFuZ2UsCgkJRjYoCgkJCWZ1bmN0aW9uIChyYW5nZSwgbmFtZSwgY29tbWVudHNBZnRlckZ1bmN0aW9uTmFtZSwgY29tbWVudHNBZnRlckVxdWFscywgZXhwcmVzc2lvblJlc3VsdCwgY29tbWVudHNBZnRlckV4cHJlc3Npb24pIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCWNvbW1lbnRzQWZ0ZXJFeHByZXNzaW9uLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCWV4cHJlc3Npb25SZXN1bHQuY29tbWVudHMsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJFcXVhbHMsIGNvbW1lbnRzQWZ0ZXJGdW5jdGlvbk5hbWUpKSksCgkJCQkJc3ludGF4OiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQlyYW5nZSwKCQkJCQkJX1V0aWxzX1R1cGxlMihuYW1lLCBleHByZXNzaW9uUmVzdWx0LnN5bnRheCkpCgkJCQl9OwoJCQl9KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lTm9kZSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJz0nLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldEZ1bmN0aW9uKCkgewoJcmV0dXJuIEEzKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHZhbGlkYXRlLAoJCWZ1bmN0aW9uIChyZXN1bHQpIHsKCQkJdmFyIF92MTggPSByZXN1bHQuc3ludGF4OwoJCQl2YXIgbGV0RGVjbGFyYXRpb24gPSBfdjE4LmI7CgkJCWlmIChsZXREZWNsYXJhdGlvbi4kID09PSAnTGV0RGVzdHJ1Y3R1cmluZycpIHsKCQkJCXJldHVybiB0cnVlOwoJCQl9IGVsc2UgewoJCQkJdmFyIGxldEZ1bmN0aW9uRGVjbGFyYXRpb24gPSBsZXREZWNsYXJhdGlvbi5hOwoJCQkJdmFyIF92MjAgPSBsZXRGdW5jdGlvbkRlY2xhcmF0aW9uLnNpZ25hdHVyZTsKCQkJCWlmIChfdjIwLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiB0cnVlOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YyMSA9IF92MjAuYTsKCQkJCQl2YXIgc2lnbmF0dXJlID0gX3YyMS5iOwoJCQkJCXZhciBfdjIyID0gc2lnbmF0dXJlLm5hbWU7CgkJCQkJdmFyIHNpZ25hdHVyZU5hbWUgPSBfdjIyLmI7CgkJCQkJdmFyIF92MjMgPSBsZXRGdW5jdGlvbkRlY2xhcmF0aW9uLmRlY2xhcmF0aW9uOwoJCQkJCXZhciBpbXBsZW1lbnRhdGlvbiA9IF92MjMuYjsKCQkJCQl2YXIgX3YyNCA9IGltcGxlbWVudGF0aW9uLm5hbWU7CgkJCQkJdmFyIGltcGxlbWVudGF0aW9uTmFtZSA9IF92MjQuYjsKCQkJCQlyZXR1cm4gX1V0aWxzX2VxKGltcGxlbWVudGF0aW9uTmFtZSwgc2lnbmF0dXJlTmFtZSArICcnKTsKCQkJCX0KCQkJfQoJCX0sCgkJJ0V4cGVjdGVkIHRvIGZpbmQgdGhlIHNhbWUgbmFtZSBmb3IgZGVjbGFyYXRpb24gYW5kIHNpZ25hdHVyZScsCgkJQTcoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDZXaXRoU3RhcnRMb2NhdGlvbiwKCQkJRjcoCgkJCQlmdW5jdGlvbiAoc3RhcnROYW1lU3RhcnQsIHN0YXJ0TmFtZU5vZGUsIGNvbW1lbnRzQWZ0ZXJTdGFydE5hbWUsIG1heWJlU2lnbmF0dXJlLCBfYXJndW1lbnRzLCBjb21tZW50c0FmdGVyRXF1YWwsIGV4cHJlc3Npb25SZXN1bHQpIHsKCQkJCQl2YXIgYWxsQ29tbWVudHMgPSBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQlleHByZXNzaW9uUmVzdWx0LmNvbW1lbnRzLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCWNvbW1lbnRzQWZ0ZXJFcXVhbCwKCQkJCQkJCUEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQlfYXJndW1lbnRzLmNvbW1lbnRzLAoJCQkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCQkJaWYgKG1heWJlU2lnbmF0dXJlLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJCQkJcmV0dXJuIGNvbW1lbnRzQWZ0ZXJTdGFydE5hbWU7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQl2YXIgc2lnbmF0dXJlID0gbWF5YmVTaWduYXR1cmUuYTsKCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHNpZ25hdHVyZS5jb21tZW50cywgY29tbWVudHNBZnRlclN0YXJ0TmFtZSk7CgkJCQkJCQkJCX0KCQkJCQkJCQl9KCkpKSk7CgkJCQkJaWYgKG1heWJlU2lnbmF0dXJlLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQl2YXIgX3YxNCA9IGV4cHJlc3Npb25SZXN1bHQuc3ludGF4OwoJCQkJCQl2YXIgZXhwcmVzc2lvblJhbmdlID0gX3YxNC5hOwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJY29tbWVudHM6IGFsbENvbW1lbnRzLAoJCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJe2VuZDogZXhwcmVzc2lvblJhbmdlLmVuZCwgc3RhcnQ6IHN0YXJ0TmFtZVN0YXJ0fSwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJExldEZ1bmN0aW9uKAoJCQkJCQkJCQl7CgkJCQkJCQkJCQlkZWNsYXJhdGlvbjogQTIoCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCQkJCXtlbmQ6IGV4cHJlc3Npb25SYW5nZS5lbmQsIHN0YXJ0OiBzdGFydE5hbWVTdGFydH0sCgkJCQkJCQkJCQkJe19hcmd1bWVudHM6IF9hcmd1bWVudHMuc3ludGF4LCBleHByZXNzaW9uOiBleHByZXNzaW9uUmVzdWx0LnN5bnRheCwgbmFtZTogc3RhcnROYW1lTm9kZX0pLAoJCQkJCQkJCQkJZG9jdW1lbnRhdGlvbjogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsCgkJCQkJCQkJCQlzaWduYXR1cmU6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nCgkJCQkJCQkJCX0pKQoJCQkJCQl9OwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBzaWduYXR1cmUgPSBtYXliZVNpZ25hdHVyZS5hOwoJCQkJCQl2YXIgX3YxNSA9IHNpZ25hdHVyZS5pbXBsZW1lbnRhdGlvbk5hbWU7CgkJCQkJCXZhciBpbXBsZW1lbnRhdGlvbk5hbWVSYW5nZSA9IF92MTUuYTsKCQkJCQkJdmFyIF92MTYgPSBleHByZXNzaW9uUmVzdWx0LnN5bnRheDsKCQkJCQkJdmFyIGV4cHJlc3Npb25SYW5nZSA9IF92MTYuYTsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWNvbW1lbnRzOiBhbGxDb21tZW50cywKCQkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCXtlbmQ6IGV4cHJlc3Npb25SYW5nZS5lbmQsIHN0YXJ0OiBzdGFydE5hbWVTdGFydH0sCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRMZXRGdW5jdGlvbigKCQkJCQkJCQkJewoJCQkJCQkJCQkJZGVjbGFyYXRpb246IEEyKAoJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQkJCQl7ZW5kOiBleHByZXNzaW9uUmFuZ2UuZW5kLCBzdGFydDogaW1wbGVtZW50YXRpb25OYW1lUmFuZ2Uuc3RhcnR9LAoJCQkJCQkJCQkJCXtfYXJndW1lbnRzOiBfYXJndW1lbnRzLnN5bnRheCwgZXhwcmVzc2lvbjogZXhwcmVzc2lvblJlc3VsdC5zeW50YXgsIG5hbWU6IHNpZ25hdHVyZS5pbXBsZW1lbnRhdGlvbk5hbWV9KSwKCQkJCQkJCQkJCWRvY3VtZW50YXRpb246ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLAoJCQkJCQkJCQkJc2lnbmF0dXJlOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGNvbWJpbmUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFNpZ25hdHVyZSRTaWduYXR1cmUsIHN0YXJ0TmFtZU5vZGUsIHNpZ25hdHVyZS50eXBlQW5ub3RhdGlvbikpCgkJCQkJCQkJCX0pKQoJCQkJCQl9OwoJCQkJCX0KCQkJCX0pLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lTm9kZSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQlBNigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDRPclN1Y2NlZWQsCgkJCQlGNCgKCQkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmVUeXBlQW5ub3RhdGlvbiwgdHlwZUFubm90YXRpb25SZXN1bHQsIGltcGxlbWVudGF0aW9uTmFtZSwgYWZ0ZXJJbXBsZW1lbnRhdGlvbk5hbWUpIHsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJewoJCQkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQlhZnRlckltcGxlbWVudGF0aW9uTmFtZSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQlpbXBsZW1lbnRhdGlvbk5hbWUuY29tbWVudHMsCgkJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHR5cGVBbm5vdGF0aW9uUmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZVR5cGVBbm5vdGF0aW9uKSkpLAoJCQkJCQkJCWltcGxlbWVudGF0aW9uTmFtZTogaW1wbGVtZW50YXRpb25OYW1lLnN5bnRheCwKCQkJCQkJCQl0eXBlQW5ub3RhdGlvbjogdHlwZUFubm90YXRpb25SZXN1bHQuc3ludGF4CgkJCQkJCQl9KTsKCQkJCQl9KSwKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICc6JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVBbm5vdGF0aW9uLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGxheW91dFN0cmljdEZvbGxvd2VkQnkoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUpLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHBhcmFtZXRlclBhdHRlcm5zRXF1YWwsCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkZXhwcmVzc2lvbigpKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0RGVzdHJ1Y3R1cmluZ0RlY2xhcmF0aW9uKCkgewoJcmV0dXJuIEE1KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDQsCgkJRjQoCgkJCWZ1bmN0aW9uIChwYXR0ZXJuLCBjb21tZW50c0FmdGVyUGF0dGVybiwgY29tbWVudHNBZnRlckVxdWFscywgZXhwcmVzc2lvblJlc3VsdCkgewoJCQkJdmFyIF92MTEgPSBwYXR0ZXJuLnN5bnRheDsKCQkJCXZhciBzdGFydCA9IF92MTEuYS5zdGFydDsKCQkJCXZhciBfdjEyID0gZXhwcmVzc2lvblJlc3VsdC5zeW50YXg7CgkJCQl2YXIgZW5kID0gX3YxMi5hLmVuZDsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCWV4cHJlc3Npb25SZXN1bHQuY29tbWVudHMsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJY29tbWVudHNBZnRlckVxdWFscywKCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlclBhdHRlcm4sIHBhdHRlcm4uY29tbWVudHMpKSksCgkJCQkJc3ludGF4OiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQl7ZW5kOiBlbmQsIHN0YXJ0OiBzdGFydH0sCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kTGV0RGVzdHJ1Y3R1cmluZywgcGF0dGVybi5zeW50YXgsIGV4cHJlc3Npb25SZXN1bHQuc3ludGF4KSkKCQkJCX07CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHBhdHRlcm5Ob3REaXJlY3RseUNvbXBvc2luZywKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJz0nLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGFtYmRhRXhwcmVzc2lvbigpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCSdcXCcsCgkJQTcoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDZXaXRoU3RhcnRMb2NhdGlvbiwKCQkJRjcoCgkJCQlmdW5jdGlvbiAoc3RhcnQsIGNvbW1lbnRzQWZ0ZXJCYWNrc2xhc2gsIGZpcnN0QXJnLCBjb21tZW50c0FmdGVyRmlyc3RBcmcsIHNlY29uZFVwQXJncywgY29tbWVudHNBZnRlckFycm93LCBleHByZXNzaW9uUmVzdWx0KSB7CgkJCQkJdmFyIF92MTAgPSBleHByZXNzaW9uUmVzdWx0LnN5bnRheDsKCQkJCQl2YXIgZXhwcmVzc2lvblJhbmdlID0gX3YxMC5hOwoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCWV4cHJlc3Npb25SZXN1bHQuY29tbWVudHMsCgkJCQkJCQlBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJY29tbWVudHNBZnRlckFycm93LAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCXNlY29uZFVwQXJncy5jb21tZW50cywKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQljb21tZW50c0FmdGVyRmlyc3RBcmcsCgkJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGZpcnN0QXJnLmNvbW1lbnRzLCBjb21tZW50c0FmdGVyQmFja3NsYXNoKSkpKSksCgkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQl7CgkJCQkJCQkJZW5kOiBleHByZXNzaW9uUmFuZ2UuZW5kLAoJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzdGFydC5jb2x1bW4gLSAxLCByb3c6IHN0YXJ0LnJvd30KCQkJCQkJCX0sCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJExhbWJkYUV4cHJlc3Npb24oCgkJCQkJCQkJewoJCQkJCQkJCQlhcmdzOiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBmaXJzdEFyZy5zeW50YXgsIHNlY29uZFVwQXJncy5zeW50YXgpLAoJCQkJCQkJCQlleHByZXNzaW9uOiBleHByZXNzaW9uUmVzdWx0LnN5bnRheAoJCQkJCQkJCX0pKQoJCQkJCX07CgkJCQl9KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRwYXR0ZXJuTm90RGlyZWN0bHlDb21wb3NpbmcsCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJHVudGlsLAoJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLCAnLT4nLCBfVXRpbHNfVHVwbGUwKSwKCQkJCUEzKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCQkJRjIoCgkJCQkJCWZ1bmN0aW9uIChwYXR0ZXJuUmVzdWx0LCBjb21tZW50c0FmdGVyKSB7CgkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXIsIHBhdHRlcm5SZXN1bHQuY29tbWVudHMpLAoJCQkJCQkJCXN5bnRheDogcGF0dGVyblJlc3VsdC5zeW50YXgKCQkJCQkJCX07CgkJCQkJCX0pLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHBhdHRlcm5Ob3REaXJlY3RseUNvbXBvc2luZywKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpKSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uKCkpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRpZk9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uKCkgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRpZkJsb2NrRXhwcmVzc2lvbigpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kdW5xdWFsaWZpZWRGdW5jdGlvblJlZmVyZW5jZUV4cHJlc3Npb25Gb2xsb3dlZEJ5UmVjb3JkQWNjZXNzKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRpZkJsb2NrRXhwcmVzc2lvbigpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwKCQknaWYnLAoJCUE5KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA4V2l0aFN0YXJ0TG9jYXRpb24sCgkJCUY5KAoJCQkJZnVuY3Rpb24gKHN0YXJ0LCBjb21tZW50c0FmdGVySWYsIGNvbmRpdGlvbiwgY29tbWVudHNCZWZvcmVUaGVuLCBjb21tZW50c0FmdGVyVGhlbiwgaWZUcnVlLCBjb21tZW50c0JlZm9yZUVsc2UsIGNvbW1lbnRzQWZ0ZXJFbHNlLCBpZkZhbHNlKSB7CgkJCQkJdmFyIF92OSA9IGlmRmFsc2Uuc3ludGF4OwoJCQkJCXZhciBpZkZhbHNlUmFuZ2UgPSBfdjkuYTsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQlpZkZhbHNlLmNvbW1lbnRzLAoJCQkJCQkJQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCWNvbW1lbnRzQWZ0ZXJFbHNlLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCWNvbW1lbnRzQmVmb3JlRWxzZSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQlpZlRydWUuY29tbWVudHMsCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQkJY29tbWVudHNBZnRlclRoZW4sCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJCQkJY29tbWVudHNCZWZvcmVUaGVuLAoJCQkJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbmRpdGlvbi5jb21tZW50cywgY29tbWVudHNBZnRlcklmKSkpKSkpKSwKCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXsKCQkJCQkJCQllbmQ6IGlmRmFsc2VSYW5nZS5lbmQsCgkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHN0YXJ0LmNvbHVtbiAtIDIsIHJvdzogc3RhcnQucm93fQoJCQkJCQkJfSwKCQkJCQkJCUEzKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kSWZCbG9jaywgY29uZGl0aW9uLnN5bnRheCwgaWZUcnVlLnN5bnRheCwgaWZGYWxzZS5zeW50YXgpKQoJCQkJCX07CgkJCQl9KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uKCksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZEZvbGxvd2VkQnksICd0aGVuJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkZXhwcmVzc2lvbigpLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LCAnZWxzZScsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxpc3RPckdsc2xFeHByZXNzaW9uKCkgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJJ1snLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb25BZnRlck9wZW5pbmdTcXVhcmVCcmFja2V0KCkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb25BZnRlck9wZW5pbmdTcXVhcmVCcmFja2V0KCkgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGdsc2xFeHByZXNzaW9uQWZ0ZXJPcGVuaW5nU3F1YXJlQnJhY2tldCwKCQlBMygKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhSYW5nZSwKCQkJRjMoCgkJCQlmdW5jdGlvbiAocmFuZ2UsIGNvbW1lbnRzQmVmb3JlLCBlbGVtZW50cykgewoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGVsZW1lbnRzLmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZSksCgkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQl7CgkJCQkJCQkJZW5kOiByYW5nZS5lbmQsCgkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHJhbmdlLnN0YXJ0LmNvbHVtbiAtIDEsIHJvdzogcmFuZ2Uuc3RhcnQucm93fQoJCQkJCQkJfSwKCQkJCQkJCWVsZW1lbnRzLnN5bnRheCkKCQkJCQl9OwoJCQkJfSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJCQlBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wsCgkJCQkJJ10nLAoJCQkJCXsKCQkJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kTGlzdEV4cHIoX0xpc3RfTmlsKQoJCQkJCX0pLAoJCQkJQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZm9sbG93ZWRCeVN5bWJvbCwKCQkJCQknXScsCgkJCQkJQTQoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDMsCgkJCQkJCUYzKAoJCQkJCQkJZnVuY3Rpb24gKGhlYWQsIGNvbW1lbnRzQWZ0ZXJIZWFkLCB0YWlsKSB7CgkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJdGFpbC5jb21tZW50cywKCQkJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlckhlYWQsIGhlYWQuY29tbWVudHMpKSwKCQkJCQkJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJExpc3RFeHByKAoJCQkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgaGVhZC5zeW50YXgsIHRhaWwuc3ludGF4KSkKCQkJCQkJCQl9OwoJCQkJCQkJfSksCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKSwKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJG1hbnkoCgkJCQkJCQlBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCQkJCScsJywKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVBcm91bmRCb3RoU2lkZXMoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKSkpKSkpKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKSB7CglyZXR1cm4gQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRleHRlbmRlZFN1YkV4cHJlc3Npb25PcHRpbWlzdGljTGF5b3V0LAoJCSRlbG0kY29yZSRSZXN1bHQkT2ssCgkJZnVuY3Rpb24gKCQpIHsKCQkJcmV0dXJuICQuZXh0ZW5zaW9uUmlnaHQ7CgkJfSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTlDb21wb3NlTCgpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4TGVmdCwgOSwgJzw8Jyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZThRdWVzdGlvbk1hcmsoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeExlZnQsIDgsICc8Pz4nKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlN011bCgpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4TGVmdCwgNywgJyonKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlN0lkaXYoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeExlZnQsIDcsICcvLycpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U3RmRpdigpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4TGVmdCwgNywgJy8nKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNlN1YigpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4TGVmdCwgNiwgJy0nKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNklnbm9yZSgpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4TGVmdCwgNiwgJ3wuJyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTZBZGQoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeExlZnQsIDYsICcrJyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTVLZWVwKCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhMZWZ0LCA1LCAnfD0nKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlMUFwUigpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4TGVmdCwgMSwgJ3w+Jyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTROZXEoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeE5vbkFzc29jaWF0aXZlLCA0LCAnLz0nKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNEx0KCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhOb25Bc3NvY2lhdGl2ZSwgNCwgJzwnKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNExlKCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhOb25Bc3NvY2lhdGl2ZSwgNCwgJzw9Jyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRHdCgpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4Tm9uQXNzb2NpYXRpdmUsIDQsICc+Jyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRHZSgpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4Tm9uQXNzb2NpYXRpdmUsIDQsICc+PScpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0RXEoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeE5vbkFzc29jaWF0aXZlLCA0LCAnPT0nKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlOUNvbXBvc2VSKCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhSaWdodCwgOSwgJz4+Jyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZThQb3coKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeFJpZ2h0LCA4LCAnXicpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U3U2xhc2goKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeFJpZ2h0LCA3LCAnPC8+Jyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTVhcHBlbmQoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeFJpZ2h0LCA1LCAnKysnKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNUNvbnMoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeFJpZ2h0LCA1LCAnOjonKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlM0FuZCgpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4UmlnaHQsIDMsICcmJicpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2UyT3IoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeFJpZ2h0LCAyLCAnfHwnKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlMUFwTCgpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4UmlnaHQsIDEsICc8fCcpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJG5lZ2F0aW9uQWZ0ZXJNaW51cygpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAsCgkJZnVuY3Rpb24gKHN1YkV4cHJlc3Npb25SZXN1bHQpIHsKCQkJdmFyIF92NiA9IHN1YkV4cHJlc3Npb25SZXN1bHQuc3ludGF4OwoJCQl2YXIgc3ViRXhwcmVzc2lvblJhbmdlID0gX3Y2LmE7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogc3ViRXhwcmVzc2lvblJlc3VsdC5jb21tZW50cywKCQkJCXN5bnRheDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXsKCQkJCQkJZW5kOiBzdWJFeHByZXNzaW9uUmFuZ2UuZW5kLAoJCQkJCQlzdGFydDoge2NvbHVtbjogc3ViRXhwcmVzc2lvblJhbmdlLnN0YXJ0LmNvbHVtbiAtIDEsIHJvdzogc3ViRXhwcmVzc2lvblJhbmdlLnN0YXJ0LnJvd30KCQkJCQl9LAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kTmVnYXRpb24oc3ViRXhwcmVzc2lvblJlc3VsdC5zeW50YXgpKQoJCQl9OwoJCX0sCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbGF6eSgKCQkJZnVuY3Rpb24gKF92NykgewoJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHN1YkV4cHJlc3Npb24oKTsKCQkJfSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJG5lZ2F0aW9uT3BlcmF0aW9uKCkgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEJhY2t0cmFja2FibGVGb2xsb3dlZEJ5LAoJCSctJywKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvZmZzZXRTb3VyY2VBbmRUaGVuKAoJCQlGMigKCQkJCWZ1bmN0aW9uIChvZmZzZXQsIHNvdXJjZSkgewoJCQkJCXZhciBfdjUgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQgLSAyLCBvZmZzZXQgLSAxLCBzb3VyY2UpOwoJCQkJCXN3aXRjaCAoX3Y1KSB7CgkJCQkJCWNhc2UgJyAnOgoJCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJG5lZ2F0aW9uQWZ0ZXJNaW51cygpOwoJCQkJCQljYXNlICcoJzoKCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRuZWdhdGlvbkFmdGVyTWludXMoKTsKCQkJCQkJY2FzZSAnKSc6CgkJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbmVnYXRpb25BZnRlck1pbnVzKCk7CgkJCQkJCWNhc2UgJ30nOgoJCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJG5lZ2F0aW9uQWZ0ZXJNaW51cygpOwoJCQkJCQljYXNlICcnOgoJCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJG5lZ2F0aW9uQWZ0ZXJNaW51cygpOwoJCQkJCQlkZWZhdWx0OgoJCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbmVnYXRpb25XaGl0ZXNwYWNlUHJvYmxlbTsKCQkJCQl9CgkJCQl9KSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHN1YkV4cHJlc3Npb24oKSB7CglyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb2Zmc2V0U291cmNlQW5kVGhlbigKCQlGMigKCQkJZnVuY3Rpb24gKG9mZnNldCwgc291cmNlKSB7CgkJCQl2YXIgX3Y0ID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0LCBvZmZzZXQgKyAxLCBzb3VyY2UpOwoJCQkJc3dpdGNoIChfdjQpIHsKCQkJCQljYXNlICdcIic6CgkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGxpdGVyYWxFeHByZXNzaW9uOwoJCQkJCWNhc2UgJygnOgoJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkdHVwbGVkRXhwcmVzc2lvbklmTmVjZXNzYXJ5Rm9sbG93ZWRCeVJlY29yZEFjY2VzcygpOwoJCQkJCWNhc2UgJ1snOgoJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGlzdE9yR2xzbEV4cHJlc3Npb24oKTsKCQkJCQljYXNlICd7JzoKCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHJlY29yZEV4cHJlc3Npb25Gb2xsb3dlZEJ5UmVjb3JkQWNjZXNzKCk7CgkJCQkJY2FzZSAnYyc6CgkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRjYXNlT3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb24oKTsKCQkJCQljYXNlICdcXCc6CgkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsYW1iZGFFeHByZXNzaW9uKCk7CgkJCQkJY2FzZSAnbCc6CgkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXRPclVucXVhbGlmaWVkUmVmZXJlbmNlRXhwcmVzc2lvbigpOwoJCQkJCWNhc2UgJ2knOgoJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkaWZPclVucXVhbGlmaWVkUmVmZXJlbmNlRXhwcmVzc2lvbigpOwoJCQkJCWNhc2UgJy4nOgoJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRyZWNvcmRBY2Nlc3NGdW5jdGlvbkV4cHJlc3Npb247CgkJCQkJY2FzZSAnLSc6CgkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRuZWdhdGlvbk9wZXJhdGlvbigpOwoJCQkJCWNhc2UgJ1wnJzoKCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY2hhckxpdGVyYWxFeHByZXNzaW9uOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHJlZmVyZW5jZU9yTnVtYmVyRXhwcmVzc2lvbjsKCQkJCX0KCQkJfSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHN1YkV4cHJlc3Npb25NYXliZUFwcGxpZWRPcHRpbWlzdGljTGF5b3V0KCkgewoJcmV0dXJuIEE0KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDMsCgkJRjMoCgkJCWZ1bmN0aW9uIChsZWZ0RXhwcmVzc2lvblJlc3VsdCwgY29tbWVudHNCZWZvcmVFeHRlbnNpb24sIG1heWJlQXJnc1JldmVyc2UpIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCW1heWJlQXJnc1JldmVyc2UuY29tbWVudHMsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNCZWZvcmVFeHRlbnNpb24sIGxlZnRFeHByZXNzaW9uUmVzdWx0LmNvbW1lbnRzKSksCgkJCQkJc3ludGF4OiBmdW5jdGlvbiAoKSB7CgkJCQkJCXZhciBfdjAgPSBtYXliZUFyZ3NSZXZlcnNlLnN5bnRheDsKCQkJCQkJaWYgKCFfdjAuYikgewoJCQkJCQkJcmV0dXJuIGxlZnRFeHByZXNzaW9uUmVzdWx0LnN5bnRheDsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBhcmdzUmV2ZXJzZSA9IF92MDsKCQkJCQkJCXZhciBfdjEgPSBhcmdzUmV2ZXJzZS5hOwoJCQkJCQkJdmFyIGxhc3RBcmdSYW5nZSA9IF92MS5hOwoJCQkJCQkJdmFyIGxlZnROb2RlID0gbGVmdEV4cHJlc3Npb25SZXN1bHQuc3ludGF4OwoJCQkJCQkJdmFyIGxlZnRSYW5nZSA9IGxlZnROb2RlLmE7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCXtlbmQ6IGxhc3RBcmdSYW5nZS5lbmQsIHN0YXJ0OiBsZWZ0UmFuZ2Uuc3RhcnR9LAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kQXBwbGljYXRpb24oCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCWxlZnROb2RlLAoJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShhcmdzUmV2ZXJzZSkpKSk7CgkJCQkJCX0KCQkJCQl9KCkKCQkJCX07CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxhenkoCgkJCWZ1bmN0aW9uIChfdjIpIHsKCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRzdWJFeHByZXNzaW9uKCk7CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvcHRpbWlzdGljTGF5b3V0LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkbWFueVdpdGhvdXRSZXZlcnNlKAoJCQlBMygKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCQlGMigKCQkJCQlmdW5jdGlvbiAoYXJnLCBjb21tZW50c0FmdGVyKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyLCBhcmcuY29tbWVudHMpLAoJCQkJCQkJc3ludGF4OiBhcmcuc3ludGF4CgkJCQkJCX07CgkJCQkJfSksCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkcG9zaXRpdmVseUluZGVudGVkRm9sbG93ZWRCeSgKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsYXp5KAoJCQkJCQlmdW5jdGlvbiAoX3YzKSB7CgkJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkc3ViRXhwcmVzc2lvbigpOwoJCQkJCQl9KSksCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCkpKTsKfQp0cnkgewoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbGV0T3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXRPclVucXVhbGlmaWVkUmVmZXJlbmNlRXhwcmVzc2lvbigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0T3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbGV0T3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb247Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbGV0RXhwcmVzc2lvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldEV4cHJlc3Npb24oKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldEV4cHJlc3Npb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbGV0RXhwcmVzc2lvbjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRsZXREZWNsYXJhdGlvbnNJbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldERlY2xhcmF0aW9uc0luKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXREZWNsYXJhdGlvbnNJbiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRsZXREZWNsYXJhdGlvbnNJbjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRibG9ja0VsZW1lbnQgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRibG9ja0VsZW1lbnQoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGJsb2NrRWxlbWVudCA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRibG9ja0VsZW1lbnQ7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY2FzZU9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkY2FzZU9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRjYXNlT3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY2FzZU9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGNhc2VFeHByZXNzaW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkY2FzZUV4cHJlc3Npb24oKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGNhc2VFeHByZXNzaW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGNhc2VFeHByZXNzaW9uOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGNhc2VTdGF0ZW1lbnRzID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkY2FzZVN0YXRlbWVudHMoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGNhc2VTdGF0ZW1lbnRzID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGNhc2VTdGF0ZW1lbnRzOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGNhc2VTdGF0ZW1lbnQgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRjYXNlU3RhdGVtZW50KCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRjYXNlU3RhdGVtZW50ID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGNhc2VTdGF0ZW1lbnQ7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kdHVwbGVkRXhwcmVzc2lvbklmTmVjZXNzYXJ5Rm9sbG93ZWRCeVJlY29yZEFjY2VzcyA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHR1cGxlZEV4cHJlc3Npb25JZk5lY2Vzc2FyeUZvbGxvd2VkQnlSZWNvcmRBY2Nlc3MoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHR1cGxlZEV4cHJlc3Npb25JZk5lY2Vzc2FyeUZvbGxvd2VkQnlSZWNvcmRBY2Nlc3MgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kdHVwbGVkRXhwcmVzc2lvbklmTmVjZXNzYXJ5Rm9sbG93ZWRCeVJlY29yZEFjY2VzczsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiR0dXBsZWRFeHByZXNzaW9uSW5uZXJBZnRlck9wZW5pbmdQYXJlbnMgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyR0dXBsZWRFeHByZXNzaW9uSW5uZXJBZnRlck9wZW5pbmdQYXJlbnMoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHR1cGxlZEV4cHJlc3Npb25Jbm5lckFmdGVyT3BlbmluZ1BhcmVucyA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiR0dXBsZWRFeHByZXNzaW9uSW5uZXJBZnRlck9wZW5pbmdQYXJlbnM7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcmVjb3JkRXhwcmVzc2lvbkZvbGxvd2VkQnlSZWNvcmRBY2Nlc3MgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRyZWNvcmRFeHByZXNzaW9uRm9sbG93ZWRCeVJlY29yZEFjY2VzcygpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcmVjb3JkRXhwcmVzc2lvbkZvbGxvd2VkQnlSZWNvcmRBY2Nlc3MgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcmVjb3JkRXhwcmVzc2lvbkZvbGxvd2VkQnlSZWNvcmRBY2Nlc3M7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcmVjb3JkQ29udGVudHNDdXJseUVuZCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHJlY29yZENvbnRlbnRzQ3VybHlFbmQoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHJlY29yZENvbnRlbnRzQ3VybHlFbmQgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcmVjb3JkQ29udGVudHNDdXJseUVuZDsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRyZWNvcmRGaWVsZHMgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRyZWNvcmRGaWVsZHMoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHJlY29yZEZpZWxkcyA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRyZWNvcmRGaWVsZHM7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcmVjb3JkU2V0dGVyTm9kZVdpdGhMYXlvdXQgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRyZWNvcmRTZXR0ZXJOb2RlV2l0aExheW91dCgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcmVjb3JkU2V0dGVyTm9kZVdpdGhMYXlvdXQgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcmVjb3JkU2V0dGVyTm9kZVdpdGhMYXlvdXQ7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbGV0RnVuY3Rpb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXRGdW5jdGlvbigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0RnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbGV0RnVuY3Rpb247Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbGV0RGVzdHJ1Y3R1cmluZ0RlY2xhcmF0aW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0RGVzdHJ1Y3R1cmluZ0RlY2xhcmF0aW9uKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXREZXN0cnVjdHVyaW5nRGVjbGFyYXRpb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbGV0RGVzdHJ1Y3R1cmluZ0RlY2xhcmF0aW9uOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGxhbWJkYUV4cHJlc3Npb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsYW1iZGFFeHByZXNzaW9uKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsYW1iZGFFeHByZXNzaW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGxhbWJkYUV4cHJlc3Npb247Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaWZPclVucXVhbGlmaWVkUmVmZXJlbmNlRXhwcmVzc2lvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGlmT3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb24oKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGlmT3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaWZPclVucXVhbGlmaWVkUmVmZXJlbmNlRXhwcmVzc2lvbjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpZkJsb2NrRXhwcmVzc2lvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGlmQmxvY2tFeHByZXNzaW9uKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRpZkJsb2NrRXhwcmVzc2lvbiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpZkJsb2NrRXhwcmVzc2lvbjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRsaXN0T3JHbHNsRXhwcmVzc2lvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxpc3RPckdsc2xFeHByZXNzaW9uKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsaXN0T3JHbHNsRXhwcmVzc2lvbiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRsaXN0T3JHbHNsRXhwcmVzc2lvbjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRleHByZXNzaW9uQWZ0ZXJPcGVuaW5nU3F1YXJlQnJhY2tldCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb25BZnRlck9wZW5pbmdTcXVhcmVCcmFja2V0KCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uQWZ0ZXJPcGVuaW5nU3F1YXJlQnJhY2tldCA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRleHByZXNzaW9uQWZ0ZXJPcGVuaW5nU3F1YXJlQnJhY2tldDsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRleHByZXNzaW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkZXhwcmVzc2lvbigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkZXhwcmVzc2lvbiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRleHByZXNzaW9uOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U5Q29tcG9zZUwgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlOUNvbXBvc2VMKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlOUNvbXBvc2VMID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U5Q29tcG9zZUw7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZThRdWVzdGlvbk1hcmsgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlOFF1ZXN0aW9uTWFyaygpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZThRdWVzdGlvbk1hcmsgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZThRdWVzdGlvbk1hcms7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTdNdWwgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlN011bCgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTdNdWwgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTdNdWw7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTdJZGl2ID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTdJZGl2KCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlN0lkaXYgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTdJZGl2OwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U3RmRpdiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U3RmRpdigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTdGZGl2ID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U3RmRpdjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNlN1YiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U2U3ViKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNlN1YiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNlN1YjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNklnbm9yZSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U2SWdub3JlKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNklnbm9yZSA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNklnbm9yZTsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNkFkZCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U2QWRkKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNkFkZCA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNkFkZDsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNUtlZXAgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNUtlZXAoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U1S2VlcCA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNUtlZXA7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTFBcFIgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlMUFwUigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTFBcFIgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTFBcFI7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTROZXEgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNE5lcSgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTROZXEgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTROZXE7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTRMdCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0THQoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0THQgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTRMdDsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNExlID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRMZSgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRMZSA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNExlOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U0R3QgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNEd0KCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNEd0ID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U0R3Q7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTRHZSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0R2UoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0R2UgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTRHZTsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNEVxID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRFcSgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRFcSA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNEVxOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U5Q29tcG9zZVIgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlOUNvbXBvc2VSKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlOUNvbXBvc2VSID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U5Q29tcG9zZVI7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZThQb3cgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlOFBvdygpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZThQb3cgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZThQb3c7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTdTbGFzaCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U3U2xhc2goKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U3U2xhc2ggPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTdTbGFzaDsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNWFwcGVuZCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U1YXBwZW5kKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNWFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNWFwcGVuZDsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNUNvbnMgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNUNvbnMoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U1Q29ucyA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNUNvbnM7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTNBbmQgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlM0FuZCgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTNBbmQgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTNBbmQ7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTJPciA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2UyT3IoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2UyT3IgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTJPcjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlMUFwTCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2UxQXBMKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlMUFwTCA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlMUFwTDsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRuZWdhdGlvbkFmdGVyTWludXMgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRuZWdhdGlvbkFmdGVyTWludXMoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJG5lZ2F0aW9uQWZ0ZXJNaW51cyA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRuZWdhdGlvbkFmdGVyTWludXM7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbmVnYXRpb25PcGVyYXRpb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRuZWdhdGlvbk9wZXJhdGlvbigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbmVnYXRpb25PcGVyYXRpb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbmVnYXRpb25PcGVyYXRpb247Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kc3ViRXhwcmVzc2lvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHN1YkV4cHJlc3Npb24oKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHN1YkV4cHJlc3Npb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kc3ViRXhwcmVzc2lvbjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRzdWJFeHByZXNzaW9uTWF5YmVBcHBsaWVkT3B0aW1pc3RpY0xheW91dCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHN1YkV4cHJlc3Npb25NYXliZUFwcGxpZWRPcHRpbWlzdGljTGF5b3V0KCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRzdWJFeHByZXNzaW9uTWF5YmVBcHBsaWVkT3B0aW1pc3RpY0xheW91dCA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRzdWJFeHByZXNzaW9uTWF5YmVBcHBsaWVkT3B0aW1pc3RpY0xheW91dDsKCX07Cn0gY2F0Y2ggKCQpIHsKCXRocm93ICdTb21lIHRvcC1sZXZlbCBkZWZpbml0aW9ucyBmcm9tIGBFbG0uUGFyc2VyLkV4cHJlc3Npb25gIGFyZSBjYXVzaW5nIGluZmluaXRlIHJlY3Vyc2lvbjpcblxuICDilIzilIDilIDilIDilIDilIDilJBcbiAg4pSCICAgIGxldE9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBsZXRFeHByZXNzaW9uXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBsZXREZWNsYXJhdGlvbnNJblxuICDilIIgICAgIOKGk1xuICDilIIgICAgYmxvY2tFbGVtZW50XG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBjYXNlT3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb25cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGNhc2VFeHByZXNzaW9uXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBjYXNlU3RhdGVtZW50c1xuICDilIIgICAgIOKGk1xuICDilIIgICAgY2FzZVN0YXRlbWVudFxuICDilIIgICAgIOKGk1xuICDilIIgICAgdHVwbGVkRXhwcmVzc2lvbklmTmVjZXNzYXJ5Rm9sbG93ZWRCeVJlY29yZEFjY2Vzc1xuICDilIIgICAgIOKGk1xuICDilIIgICAgdHVwbGVkRXhwcmVzc2lvbklubmVyQWZ0ZXJPcGVuaW5nUGFyZW5zXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICByZWNvcmRFeHByZXNzaW9uRm9sbG93ZWRCeVJlY29yZEFjY2Vzc1xuICDilIIgICAgIOKGk1xuICDilIIgICAgcmVjb3JkQ29udGVudHNDdXJseUVuZFxuICDilIIgICAgIOKGk1xuICDilIIgICAgcmVjb3JkRmllbGRzXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICByZWNvcmRTZXR0ZXJOb2RlV2l0aExheW91dFxuICDilIIgICAgIOKGk1xuICDilIIgICAgbGV0RnVuY3Rpb25cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGxldERlc3RydWN0dXJpbmdEZWNsYXJhdGlvblxuICDilIIgICAgIOKGk1xuICDilIIgICAgbGFtYmRhRXhwcmVzc2lvblxuICDilIIgICAgIOKGk1xuICDilIIgICAgaWZPclVucXVhbGlmaWVkUmVmZXJlbmNlRXhwcmVzc2lvblxuICDilIIgICAgIOKGk1xuICDilIIgICAgaWZCbG9ja0V4cHJlc3Npb25cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGxpc3RPckdsc2xFeHByZXNzaW9uXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBleHByZXNzaW9uQWZ0ZXJPcGVuaW5nU3F1YXJlQnJhY2tldFxuICDilIIgICAgIOKGk1xuICDilIIgICAgZXhwcmVzc2lvblxuICDilIIgICAgIOKGk1xuICDilIIgICAgZXh0ZW5kZWRTdWJFeHByZXNzaW9uT3B0aW1pc3RpY0xheW91dFxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTlDb21wb3NlTFxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZThRdWVzdGlvbk1hcmtcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U3TXVsXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwcmVjZWRlbmNlN0lkaXZcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U3RmRpdlxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTZTdWJcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U2SWdub3JlXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwcmVjZWRlbmNlNkFkZFxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTVLZWVwXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwcmVjZWRlbmNlMUFwUlxuICDilIIgICAgIOKGk1xuICDilIIgICAgaW5maXhMZWZ0XG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwcmVjZWRlbmNlNE5lcVxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTRMdFxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTRMZVxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTRHdFxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTRHZVxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTRFcVxuICDilIIgICAgIOKGk1xuICDilIIgICAgaW5maXhOb25Bc3NvY2lhdGl2ZVxuICDilIIgICAgIOKGk1xuICDilIIgICAgaW5maXhPcGVyYXRvckFuZFRoZW5cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U5Q29tcG9zZVJcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U4UG93XG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwcmVjZWRlbmNlN1NsYXNoXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwcmVjZWRlbmNlNWFwcGVuZFxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTVDb25zXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwcmVjZWRlbmNlM0FuZFxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTJPclxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTFBcExcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGluZml4UmlnaHRcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIG5lZ2F0aW9uQWZ0ZXJNaW51c1xuICDilIIgICAgIOKGk1xuICDilIIgICAgbmVnYXRpb25PcGVyYXRpb25cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHN1YkV4cHJlc3Npb25cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHN1YkV4cHJlc3Npb25NYXliZUFwcGxpZWRPcHRpbWlzdGljTGF5b3V0XG4gIOKUlOKUgOKUgOKUgOKUgOKUgOKUmFxuXG5UaGVzZSBlcnJvcnMgYXJlIHZlcnkgdHJpY2t5LCBzbyByZWFkIGh0dHBzOi8vZWxtLWxhbmcub3JnLzAuMTkuMS9iYWQtcmVjdXJzaW9uIHRvIGxlYXJuIGhvdyB0byBmaXggaXQhJzt9CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA2ID0gRjcoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIF92MiwgX3YzLCBfdjQsIF92NSkgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXZhciBwYXJzZUQgPSBfdjMuYTsKCQl2YXIgcGFyc2VFID0gX3Y0LmE7CgkJdmFyIHBhcnNlRiA9IF92NS5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92NiA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3Y2LiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92Ni5hOwoJCQkJCXZhciB4ID0gX3Y2LmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjYuYTsKCQkJCQl2YXIgczEgPSBfdjYuYjsKCQkJCQl2YXIgX3Y3ID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3Y3LiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3Y3LmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3Y3LmE7CgkJCQkJCXZhciBzMiA9IF92Ny5iOwoJCQkJCQl2YXIgX3Y4ID0gcGFyc2VDKHMyKTsKCQkJCQkJaWYgKF92OC4kID09PSAnQmFkJykgewoJCQkJCQkJdmFyIHggPSBfdjguYjsKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIGMgPSBfdjguYTsKCQkJCQkJCXZhciBzMyA9IF92OC5iOwoJCQkJCQkJdmFyIF92OSA9IHBhcnNlRChzMyk7CgkJCQkJCQlpZiAoX3Y5LiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJdmFyIHggPSBfdjkuYjsKCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIGQgPSBfdjkuYTsKCQkJCQkJCQl2YXIgczQgPSBfdjkuYjsKCQkJCQkJCQl2YXIgX3YxMCA9IHBhcnNlRShzNCk7CgkJCQkJCQkJaWYgKF92MTAuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJdmFyIHggPSBfdjEwLmI7CgkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBlID0gX3YxMC5hOwoJCQkJCQkJCQl2YXIgczUgPSBfdjEwLmI7CgkJCQkJCQkJCXZhciBfdjExID0gcGFyc2VGKHM1KTsKCQkJCQkJCQkJaWYgKF92MTEuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJCXZhciB4ID0gX3YxMS5iOwoJCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQl2YXIgZiA9IF92MTEuYTsKCQkJCQkJCQkJCXZhciBzNiA9IF92MTEuYjsKCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJCQkJCUE2KGZ1bmMsIGEsIGIsIGMsIGQsIGUsIGYpLAoJCQkJCQkJCQkJCXM2KTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRwYXJhbWV0ZXJQYXR0ZXJuc0VxdWFsID0gQTIoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJHVudGlsLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGVxdWFsLAoJQTMoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQlGMigKCQkJZnVuY3Rpb24gKHBhdHRlcm5SZXN1bHQsIGNvbW1lbnRzQWZ0ZXJQYXR0ZXJuKSB7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJQYXR0ZXJuLCBwYXR0ZXJuUmVzdWx0LmNvbW1lbnRzKSwKCQkJCQlzeW50YXg6IHBhdHRlcm5SZXN1bHQuc3ludGF4CgkJCQl9OwoJCQl9KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRwYXR0ZXJuTm90RGlyZWN0bHlDb21wb3NpbmcsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkZnVuY3Rpb25BZnRlckRvY3VtZW50YXRpb24gPSBBNygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDYsCglGNigKCQlmdW5jdGlvbiAoc3RhcnROYW1lLCBjb21tZW50c0FmdGVyU3RhcnROYW1lLCBtYXliZVNpZ25hdHVyZSwgX2FyZ3VtZW50cywgY29tbWVudHNBZnRlckVxdWFsLCByZXN1bHQpIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJcmVzdWx0LmNvbW1lbnRzLAoJCQkJCUEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCWNvbW1lbnRzQWZ0ZXJFcXVhbCwKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQlfYXJndW1lbnRzLmNvbW1lbnRzLAoJCQkJCQkJZnVuY3Rpb24gKCkgewoJCQkJCQkJCWlmIChtYXliZVNpZ25hdHVyZS4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJcmV0dXJuIGNvbW1lbnRzQWZ0ZXJTdGFydE5hbWU7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJdmFyIHNpZ25hdHVyZSA9IG1heWJlU2lnbmF0dXJlLmE7CgkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHNpZ25hdHVyZS5jb21tZW50cywgY29tbWVudHNBZnRlclN0YXJ0TmFtZSk7CgkJCQkJCQkJfQoJCQkJCQkJfSgpKSkpLAoJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkRnVuY3Rpb25EZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbigKCQkJCQl7CgkJCQkJCV9hcmd1bWVudHM6IF9hcmd1bWVudHMuc3ludGF4LAoJCQkJCQlleHByZXNzaW9uOiByZXN1bHQuc3ludGF4LAoJCQkJCQlzaWduYXR1cmU6IEEyKAoJCQkJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCQkJcmV0dXJuICQuc3ludGF4OwoJCQkJCQkJfSwKCQkJCQkJCW1heWJlU2lnbmF0dXJlKSwKCQkJCQkJc3RhcnROYW1lOiBzdGFydE5hbWUKCQkJCQl9KQoJCQl9OwoJCX0pLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCglBNigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0T3JTdWNjZWVkLAoJCUY0KAoJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmVUeXBlQW5ub3RhdGlvbiwgdHlwZUFubm90YXRpb25SZXN1bHQsIGltcGxlbWVudGF0aW9uTmFtZSwgYWZ0ZXJJbXBsZW1lbnRhdGlvbk5hbWUpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQl7CgkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCWFmdGVySW1wbGVtZW50YXRpb25OYW1lLAoJCQkJCQkJQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCWltcGxlbWVudGF0aW9uTmFtZS5jb21tZW50cywKCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHR5cGVBbm5vdGF0aW9uUmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZVR5cGVBbm5vdGF0aW9uKSkpLAoJCQkJCQlzeW50YXg6IHtpbXBsZW1lbnRhdGlvbk5hbWU6IGltcGxlbWVudGF0aW9uTmFtZS5zeW50YXgsIHR5cGVBbm5vdGF0aW9uOiB0eXBlQW5ub3RhdGlvblJlc3VsdC5zeW50YXh9CgkJCQkJfSk7CgkJCX0pLAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICc6JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiR0eXBlQW5ub3RhdGlvbiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbGF5b3V0U3RyaWN0Rm9sbG93ZWRCeSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lTm9kZSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCSRlbG0kY29yZSRNYXliZSROb3RoaW5nKSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRwYXJhbWV0ZXJQYXR0ZXJuc0VxdWFsLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRleHByZXNzaW9uKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRsYXlvdXRTdHJpY3RGb2xsb3dlZEJ5V2l0aENvbW1lbnRzID0gZnVuY3Rpb24gKG5leHRQYXJzZXIpIHsKCXJldHVybiBBMygKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCUYyKAoJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmUsIGFmdGVyKSB7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGFmdGVyLmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZSksCgkJCQkJc3ludGF4OiBhZnRlci5zeW50YXgKCQkJCX07CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvcHRpbWlzdGljTGF5b3V0LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvblRvcEluZGVudGF0aW9uRm9sbG93ZWRCeShuZXh0UGFyc2VyKSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkUG9ydERlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1BvcnREZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHBvcnREZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbiA9IEE2KAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNSwKCUY1KAoJCWZ1bmN0aW9uIChjb21tZW50c0FmdGVyUG9ydCwgbmFtZSwgY29tbWVudHNBZnRlck5hbWUsIGNvbW1lbnRzQWZ0ZXJDb2xvbiwgdHlwZUFubm90YXRpb25SZXN1bHQpIHsKCQkJdmFyIG5hbWVSYW5nZSA9IG5hbWUuYTsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJY29tbWVudHNBZnRlckNvbG9uLAoJCQkJCUEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCXR5cGVBbm5vdGF0aW9uUmVzdWx0LmNvbW1lbnRzLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJOYW1lLCBjb21tZW50c0FmdGVyUG9ydCkpKSwKCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJFBvcnREZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbigKCQkJCQl7CgkJCQkJCW5hbWU6IG5hbWUsCgkJCQkJCXN0YXJ0TG9jYXRpb246IHtjb2x1bW46IDEsIHJvdzogbmFtZVJhbmdlLnN0YXJ0LnJvd30sCgkJCQkJCXR5cGVBbm5vdGF0aW9uOiB0eXBlQW5ub3RhdGlvblJlc3VsdC5zeW50YXgKCQkJCQl9KQoJCQl9OwoJCX0pLAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZEZvbGxvd2VkQnksICdwb3J0JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVOb2RlLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJzonLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZUFubm90YXRpb24pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRyYW5nZSA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciByID0gX3YwLmE7CglyZXR1cm4gcjsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRUeXBlRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVHlwZURlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkdHlwZUdlbmVyaWNMaXN0RXF1YWxzID0gQTIoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJHVudGlsLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGVxdWFsLAoJQTMoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQlGMigKCQkJZnVuY3Rpb24gKG5hbWUsIGNvbW1lbnRzQWZ0ZXJOYW1lKSB7CgkJCQlyZXR1cm4ge2NvbW1lbnRzOiBjb21tZW50c0FmdGVyTmFtZSwgc3ludGF4OiBuYW1lfTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZU1hcFdpdGhSYW5nZVdpdGhvdXRMaW5lYnJlYWsgPSBGMygKCWZ1bmN0aW9uIChyYW5nZUFuZENvbnN1bWVkU3RyaW5nVG9SZXMsIGZpcnN0SXNPa2F5LCBhZnRlckZpcnN0SXNPa2F5KSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgZmlyc3RPZmZzZXQgPSBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpc1N1YkNoYXJXaXRob3V0TGluZWJyZWFrLCBmaXJzdElzT2theSwgczAub2Zmc2V0LCBzMC5zcmMpOwoJCQkJaWYgKF9VdGlsc19lcShmaXJzdE9mZnNldCwgLTEpKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCWZhbHNlLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdDaGFyU2F0aXNmeWluZ1ByZWRpY2F0ZSwgczAucm93LCBzMC5jb2wpKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHMxID0gQTYoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcFdoaWxlV2l0aG91dExpbmVicmVha0hlbHAsIGFmdGVyRmlyc3RJc09rYXksIGZpcnN0T2Zmc2V0LCBzMC5yb3csIHMwLmNvbCArIDEsIHMwLnNyYywgczAuaW5kZW50KTsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCUEyKAoJCQkJCQkJcmFuZ2VBbmRDb25zdW1lZFN0cmluZ1RvUmVzLAoJCQkJCQkJewoJCQkJCQkJCWVuZDoge2NvbHVtbjogczEuY29sLCByb3c6IHMxLnJvd30sCgkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJCQl9LAoJCQkJCQkJQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgczAub2Zmc2V0LCBzMS5vZmZzZXQsIHMwLnNyYykpLAoJCQkJCQlzMSk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHlwZU5hbWVOb2RlID0gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaWZGb2xsb3dlZEJ5V2hpbGVNYXBXaXRoUmFuZ2VXaXRob3V0TGluZWJyZWFrLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJHVuaWNvZGVJc1VwcGVyRmFzdCwgJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkdW5pY29kZUlzQWxwaGFOdW1PclVuZGVyc2NvcmVGYXN0KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyR2YWx1ZUNvbnN0cnVjdG9yT3B0aW1pc3RpY0xheW91dCA9IEE0KAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCUYzKAoJCWZ1bmN0aW9uIChuYW1lLCBjb21tZW50c0FmdGVyTmFtZSwgYXJndW1lbnRzUmV2ZXJzZSkgewoJCQl2YXIgbmFtZVJhbmdlID0gbmFtZS5hOwoJCQl2YXIgZnVsbFJhbmdlID0gZnVuY3Rpb24gKCkgewoJCQkJdmFyIF92MCA9IGFyZ3VtZW50c1JldmVyc2Uuc3ludGF4OwoJCQkJaWYgKF92MC5iKSB7CgkJCQkJdmFyIF92MSA9IF92MC5hOwoJCQkJCXZhciBsYXN0QXJnUmFuZ2UgPSBfdjEuYTsKCQkJCQlyZXR1cm4ge2VuZDogbGFzdEFyZ1JhbmdlLmVuZCwgc3RhcnQ6IG5hbWVSYW5nZS5zdGFydH07CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiBuYW1lUmFuZ2U7CgkJCQl9CgkJCX0oKTsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGFyZ3VtZW50c1JldmVyc2UuY29tbWVudHMsIGNvbW1lbnRzQWZ0ZXJOYW1lKSwKCQkJCXN5bnRheDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCWZ1bGxSYW5nZSwKCQkJCQl7CgkJCQkJCV9hcmd1bWVudHM6ICRlbG0kY29yZSRMaXN0JHJldmVyc2UoYXJndW1lbnRzUmV2ZXJzZS5zeW50YXgpLAoJCQkJCQluYW1lOiBuYW1lCgkJCQkJfSkKCQkJfTsKCQl9KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyR0eXBlTmFtZU5vZGUsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCwKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkbWFueVdpdGhvdXRSZXZlcnNlKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRwb3NpdGl2ZWx5SW5kZW50ZWRGb2xsb3dlZEJ5KAoJCQlBMygKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCQlGMigKCQkJCQlmdW5jdGlvbiAodHlwZUFubm90YXRpb25SZXN1bHQsIGNvbW1lbnRzQWZ0ZXIpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXIsIHR5cGVBbm5vdGF0aW9uUmVzdWx0LmNvbW1lbnRzKSwKCQkJCQkJCXN5bnRheDogdHlwZUFubm90YXRpb25SZXN1bHQuc3ludGF4CgkJCQkJCX07CgkJCQkJfSksCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiR0eXBlQW5ub3RhdGlvbk5vRm5FeGNsdWRpbmdUeXBlZFdpdGhBcmd1bWVudHMsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCkpKSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkY3VzdG9tVHlwZURlZmluaXRpb25BZnRlckRvY3VtZW50YXRpb25BZnRlclR5cGVQcmVmaXggPSBBNygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDYsCglGNigKCQlmdW5jdGlvbiAobmFtZSwgY29tbWVudHNBZnRlck5hbWUsIHBhcmFtZXRlcnMsIGNvbW1lbnRzQWZ0ZXJFcXVhbCwgaGVhZFZhcmlhbnQsIHRhaWxWYXJpYW50c1JldmVyc2UpIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJdGFpbFZhcmlhbnRzUmV2ZXJzZS5jb21tZW50cywKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQloZWFkVmFyaWFudC5jb21tZW50cywKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQljb21tZW50c0FmdGVyRXF1YWwsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHBhcmFtZXRlcnMuY29tbWVudHMsIGNvbW1lbnRzQWZ0ZXJOYW1lKSkpKSwKCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJFR5cGVEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbigKCQkJCQl7aGVhZFZhcmlhbnQ6IGhlYWRWYXJpYW50LnN5bnRheCwgbmFtZTogbmFtZSwgcGFyYW1ldGVyczogcGFyYW1ldGVycy5zeW50YXgsIHRhaWxWYXJpYW50c1JldmVyc2U6IHRhaWxWYXJpYW50c1JldmVyc2Uuc3ludGF4fSkKCQkJfTsKCQl9KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyR0eXBlTmFtZU5vZGUsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkdHlwZUdlbmVyaWNMaXN0RXF1YWxzLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHZhbHVlQ29uc3RydWN0b3JPcHRpbWlzdGljTGF5b3V0LAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyRtYW55V2l0aG91dFJldmVyc2UoCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCSd8JywKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkcG9zaXRpdmVseUluZGVudGVkUGx1c0ZvbGxvd2VkQnksCgkJCQkxLAoJCQkJQTMoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJCQlGMigKCQkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlUGlwZSwgdmFyaWFudFJlc3VsdCkgewoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCB2YXJpYW50UmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZVBpcGUpLAoJCQkJCQkJCXN5bnRheDogdmFyaWFudFJlc3VsdC5zeW50YXgKCQkJCQkJCX07CgkJCQkJCX0pLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkdmFsdWVDb25zdHJ1Y3Rvck9wdGltaXN0aWNMYXlvdXQpKSkpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRUeXBlQWxpYXNEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUeXBlQWxpYXNEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHR5cGVBbGlhc0RlZmluaXRpb25BZnRlckRvY3VtZW50YXRpb25BZnRlclR5cGVQcmVmaXggPSBBNygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDYsCglGNigKCQlmdW5jdGlvbiAoY29tbWVudHNBZnRlckFsaWFzLCBuYW1lLCBjb21tZW50c0FmdGVyTmFtZSwgcGFyYW1ldGVycywgY29tbWVudHNBZnRlckVxdWFscywgdHlwZUFubm90YXRpb25SZXN1bHQpIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJdHlwZUFubm90YXRpb25SZXN1bHQuY29tbWVudHMsCgkJCQkJQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJY29tbWVudHNBZnRlckVxdWFscywKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQlwYXJhbWV0ZXJzLmNvbW1lbnRzLAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyTmFtZSwgY29tbWVudHNBZnRlckFsaWFzKSkpKSwKCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJFR5cGVBbGlhc0RlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uKAoJCQkJCXtuYW1lOiBuYW1lLCBwYXJhbWV0ZXJzOiBwYXJhbWV0ZXJzLnN5bnRheCwgdHlwZUFubm90YXRpb246IHR5cGVBbm5vdGF0aW9uUmVzdWx0LnN5bnRheH0pCgkJCX07CgkJfSksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwgJ2FsaWFzJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyR0eXBlTmFtZU5vZGUsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkdHlwZUdlbmVyaWNMaXN0RXF1YWxzLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZUFubm90YXRpb24pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHR5cGVPclR5cGVBbGlhc0RlZmluaXRpb25BZnRlckRvY3VtZW50YXRpb24gPSBBMygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCglGMigKCQlmdW5jdGlvbiAoY29tbWVudHNBZnRlclR5cGUsIGRlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBkZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5jb21tZW50cywgY29tbWVudHNBZnRlclR5cGUpLAoJCQkJc3ludGF4OiBkZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5zeW50YXgKCQkJfTsKCQl9KSwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LCAndHlwZScsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyR0eXBlQWxpYXNEZWZpbml0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uQWZ0ZXJUeXBlUHJlZml4LCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkY3VzdG9tVHlwZURlZmluaXRpb25BZnRlckRvY3VtZW50YXRpb25BZnRlclR5cGVQcmVmaXgpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRkZWNsYXJhdGlvbldpdGhEb2N1bWVudGF0aW9uID0gQTMoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR2YWxpZGF0ZSwKCWZ1bmN0aW9uIChyZXN1bHQpIHsKCQl2YXIgX3YxMSA9IHJlc3VsdC5zeW50YXg7CgkJdmFyIGRlY2wgPSBfdjExLmI7CgkJaWYgKGRlY2wuJCA9PT0gJ0Z1bmN0aW9uRGVjbGFyYXRpb24nKSB7CgkJCXZhciBsZXRGdW5jdGlvbkRlY2xhcmF0aW9uID0gZGVjbC5hOwoJCQl2YXIgX3YxMyA9IGxldEZ1bmN0aW9uRGVjbGFyYXRpb24uc2lnbmF0dXJlOwoJCQlpZiAoX3YxMy4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiB0cnVlOwoJCQl9IGVsc2UgewoJCQkJdmFyIF92MTQgPSBfdjEzLmE7CgkJCQl2YXIgc2lnbmF0dXJlID0gX3YxNC5iOwoJCQkJdmFyIF92MTUgPSBzaWduYXR1cmUubmFtZTsKCQkJCXZhciBzaWduYXR1cmVOYW1lID0gX3YxNS5iOwoJCQkJdmFyIF92MTYgPSBsZXRGdW5jdGlvbkRlY2xhcmF0aW9uLmRlY2xhcmF0aW9uOwoJCQkJdmFyIGltcGxlbWVudGF0aW9uID0gX3YxNi5iOwoJCQkJdmFyIF92MTcgPSBpbXBsZW1lbnRhdGlvbi5uYW1lOwoJCQkJdmFyIGltcGxlbWVudGF0aW9uTmFtZSA9IF92MTcuYjsKCQkJCXJldHVybiBfVXRpbHNfZXEoaW1wbGVtZW50YXRpb25OYW1lLCBzaWduYXR1cmVOYW1lICsgJycpOwoJCQl9CgkJfSBlbHNlIHsKCQkJcmV0dXJuIHRydWU7CgkJfQoJfSwKCSdFeHBlY3RlZCB0byBmaW5kIHRoZSBzYW1lIG5hbWUgZm9yIGRlY2xhcmF0aW9uIGFuZCBzaWduYXR1cmUnLAoJQTMoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQlGMigKCQkJZnVuY3Rpb24gKGRvY3VtZW50YXRpb24sIGFmdGVyRG9jdW1lbnRhdGlvbikgewoJCQkJdmFyIHN0YXJ0ID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRyYW5nZShkb2N1bWVudGF0aW9uKS5zdGFydDsKCQkJCXZhciBfdjAgPSBhZnRlckRvY3VtZW50YXRpb24uc3ludGF4OwoJCQkJc3dpdGNoIChfdjAuJCkgewoJCQkJCWNhc2UgJ0Z1bmN0aW9uRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24nOgoJCQkJCQl2YXIgZnVuY3Rpb25EZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbiA9IF92MC5hOwoJCQkJCQl2YXIgX3YxID0gZnVuY3Rpb25EZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5zaWduYXR1cmU7CgkJCQkJCWlmIChfdjEuJCA9PT0gJ0p1c3QnKSB7CgkJCQkJCQl2YXIgc2lnbmF0dXJlID0gX3YxLmE7CgkJCQkJCQl2YXIgX3YyID0gc2lnbmF0dXJlLmltcGxlbWVudGF0aW9uTmFtZTsKCQkJCQkJCXZhciBpbXBsZW1lbnRhdGlvbk5hbWVSYW5nZSA9IF92Mi5hOwoJCQkJCQkJdmFyIF92MyA9IGZ1bmN0aW9uRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24uZXhwcmVzc2lvbjsKCQkJCQkJCXZhciBleHByZXNzaW9uUmFuZ2UgPSBfdjMuYTsKCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJY29tbWVudHM6IGFmdGVyRG9jdW1lbnRhdGlvbi5jb21tZW50cywKCQkJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJCXtlbmQ6IGV4cHJlc3Npb25SYW5nZS5lbmQsIHN0YXJ0OiBzdGFydH0sCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJEZ1bmN0aW9uRGVjbGFyYXRpb24oCgkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJZGVjbGFyYXRpb246IEEyKAoJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJCQkJCXtlbmQ6IGV4cHJlc3Npb25SYW5nZS5lbmQsIHN0YXJ0OiBpbXBsZW1lbnRhdGlvbk5hbWVSYW5nZS5zdGFydH0sCgkJCQkJCQkJCQkJCXtfYXJndW1lbnRzOiBmdW5jdGlvbkRlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLl9hcmd1bWVudHMsIGV4cHJlc3Npb246IGZ1bmN0aW9uRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24uZXhwcmVzc2lvbiwgbmFtZTogc2lnbmF0dXJlLmltcGxlbWVudGF0aW9uTmFtZX0pLAoJCQkJCQkJCQkJCWRvY3VtZW50YXRpb246ICRlbG0kY29yZSRNYXliZSRKdXN0KGRvY3VtZW50YXRpb24pLAoJCQkJCQkJCQkJCXNpZ25hdHVyZTogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCQkJCUEzKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkY29tYmluZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkU2lnbmF0dXJlJFNpZ25hdHVyZSwgZnVuY3Rpb25EZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5zdGFydE5hbWUsIHNpZ25hdHVyZS50eXBlQW5ub3RhdGlvbikpCgkJCQkJCQkJCQl9KSkKCQkJCQkJCX07CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgX3Y0ID0gZnVuY3Rpb25EZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5zdGFydE5hbWU7CgkJCQkJCQl2YXIgc3RhcnROYW1lUmFuZ2UgPSBfdjQuYTsKCQkJCQkJCXZhciBfdjUgPSBmdW5jdGlvbkRlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLmV4cHJlc3Npb247CgkJCQkJCQl2YXIgZXhwcmVzc2lvblJhbmdlID0gX3Y1LmE7CgkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCWNvbW1lbnRzOiBhZnRlckRvY3VtZW50YXRpb24uY29tbWVudHMsCgkJCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCQl7ZW5kOiBleHByZXNzaW9uUmFuZ2UuZW5kLCBzdGFydDogc3RhcnR9LAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREZWNsYXJhdGlvbiRGdW5jdGlvbkRlY2xhcmF0aW9uKAoJCQkJCQkJCQkJewoJCQkJCQkJCQkJCWRlY2xhcmF0aW9uOiBBMigKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCQkJCQl7ZW5kOiBleHByZXNzaW9uUmFuZ2UuZW5kLCBzdGFydDogc3RhcnROYW1lUmFuZ2Uuc3RhcnR9LAoJCQkJCQkJCQkJCQl7X2FyZ3VtZW50czogZnVuY3Rpb25EZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5fYXJndW1lbnRzLCBleHByZXNzaW9uOiBmdW5jdGlvbkRlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLmV4cHJlc3Npb24sIG5hbWU6IGZ1bmN0aW9uRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24uc3RhcnROYW1lfSksCgkJCQkJCQkJCQkJZG9jdW1lbnRhdGlvbjogJGVsbSRjb3JlJE1heWJlJEp1c3QoZG9jdW1lbnRhdGlvbiksCgkJCQkJCQkJCQkJc2lnbmF0dXJlOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZwoJCQkJCQkJCQkJfSkpCgkJCQkJCQl9OwoJCQkJCQl9CgkJCQkJY2FzZSAnVHlwZURlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uJzoKCQkJCQkJdmFyIHR5cGVEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbiA9IF92MC5hOwoJCQkJCQl2YXIgZW5kID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJdmFyIF92NiA9IHR5cGVEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi50YWlsVmFyaWFudHNSZXZlcnNlOwoJCQkJCQkJaWYgKF92Ni5iKSB7CgkJCQkJCQkJdmFyIF92NyA9IF92Ni5hOwoJCQkJCQkJCXZhciByYW5nZSA9IF92Ny5hOwoJCQkJCQkJCXJldHVybiByYW5nZS5lbmQ7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBfdjggPSB0eXBlRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24uaGVhZFZhcmlhbnQ7CgkJCQkJCQkJdmFyIGhlYWRWYXJpYW50UmFuZ2UgPSBfdjguYTsKCQkJCQkJCQlyZXR1cm4gaGVhZFZhcmlhbnRSYW5nZS5lbmQ7CgkJCQkJCQl9CgkJCQkJCX0oKTsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWNvbW1lbnRzOiBhZnRlckRvY3VtZW50YXRpb24uY29tbWVudHMsCgkJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQl7ZW5kOiBlbmQsIHN0YXJ0OiBzdGFydH0sCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRGVjbGFyYXRpb24kQ3VzdG9tVHlwZURlY2xhcmF0aW9uKAoJCQkJCQkJCQl7CgkJCQkJCQkJCQljb25zdHJ1Y3RvcnM6IEEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkJdHlwZURlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLmhlYWRWYXJpYW50LAoJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UodHlwZURlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLnRhaWxWYXJpYW50c1JldmVyc2UpKSwKCQkJCQkJCQkJCWRvY3VtZW50YXRpb246ICRlbG0kY29yZSRNYXliZSRKdXN0KGRvY3VtZW50YXRpb24pLAoJCQkJCQkJCQkJZ2VuZXJpY3M6IHR5cGVEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5wYXJhbWV0ZXJzLAoJCQkJCQkJCQkJbmFtZTogdHlwZURlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLm5hbWUKCQkJCQkJCQkJfSkpCgkJCQkJCX07CgkJCQkJY2FzZSAnVHlwZUFsaWFzRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24nOgoJCQkJCQl2YXIgdHlwZUFsaWFzRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24gPSBfdjAuYTsKCQkJCQkJdmFyIF92OSA9IHR5cGVBbGlhc0RlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLnR5cGVBbm5vdGF0aW9uOwoJCQkJCQl2YXIgdHlwZUFubm90YXRpb25SYW5nZSA9IF92OS5hOwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJY29tbWVudHM6IGFmdGVyRG9jdW1lbnRhdGlvbi5jb21tZW50cywKCQkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCXtlbmQ6IHR5cGVBbm5vdGF0aW9uUmFuZ2UuZW5kLCBzdGFydDogc3RhcnR9LAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJEFsaWFzRGVjbGFyYXRpb24oCgkJCQkJCQkJCXsKCQkJCQkJCQkJCWRvY3VtZW50YXRpb246ICRlbG0kY29yZSRNYXliZSRKdXN0KGRvY3VtZW50YXRpb24pLAoJCQkJCQkJCQkJZ2VuZXJpY3M6IHR5cGVBbGlhc0RlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLnBhcmFtZXRlcnMsCgkJCQkJCQkJCQluYW1lOiB0eXBlQWxpYXNEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5uYW1lLAoJCQkJCQkJCQkJdHlwZUFubm90YXRpb246IHR5cGVBbGlhc0RlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLnR5cGVBbm5vdGF0aW9uCgkJCQkJCQkJCX0pKQoJCQkJCQl9OwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXZhciBwb3J0RGVjbGFyYXRpb25BZnRlck5hbWUgPSBfdjAuYTsKCQkJCQkJdmFyIF92MTAgPSBwb3J0RGVjbGFyYXRpb25BZnRlck5hbWUudHlwZUFubm90YXRpb247CgkJCQkJCXZhciB0eXBlQW5ub3RhdGlvblJhbmdlID0gX3YxMC5hOwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGZpbGxlZFByZXBlbmRUbywKCQkJCQkJCQlhZnRlckRvY3VtZW50YXRpb24uY29tbWVudHMsCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkb25lKGRvY3VtZW50YXRpb24pKSwKCQkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCXtlbmQ6IHR5cGVBbm5vdGF0aW9uUmFuZ2UuZW5kLCBzdGFydDogcG9ydERlY2xhcmF0aW9uQWZ0ZXJOYW1lLnN0YXJ0TG9jYXRpb259LAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJFBvcnREZWNsYXJhdGlvbigKCQkJCQkJCQkJe25hbWU6IHBvcnREZWNsYXJhdGlvbkFmdGVyTmFtZS5uYW1lLCB0eXBlQW5ub3RhdGlvbjogcG9ydERlY2xhcmF0aW9uQWZ0ZXJOYW1lLnR5cGVBbm5vdGF0aW9ufSkpCgkJCQkJCX07CgkJCQl9CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJENvbW1lbnRzJGRlY2xhcmF0aW9uRG9jdW1lbnRhdGlvbiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbGF5b3V0U3RyaWN0Rm9sbG93ZWRCeVdpdGhDb21tZW50cygKCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YzLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkZnVuY3Rpb25BZnRlckRvY3VtZW50YXRpb24sICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyR0eXBlT3JUeXBlQWxpYXNEZWZpbml0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkcG9ydERlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uKSkpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVOb3RJbmZpeE5vZGUgPSBBNCgKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGlmRm9sbG93ZWRCeVdoaWxlVmFsaWRhdGVNYXBXaXRoUmFuZ2VXaXRob3V0TGluZWJyZWFrLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkdW5pY29kZUlzTG93ZXJGYXN0LAoJJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkdW5pY29kZUlzQWxwaGFOdW1PclVuZGVyc2NvcmVGYXN0LAoJZnVuY3Rpb24gKG5hbWUpIHsKCQlyZXR1cm4gKG5hbWUgIT09ICdpbmZpeCcpICYmICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRpc05vdFJlc2VydmVkKG5hbWUpOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkZnVuY3Rpb25EZWNsYXJhdGlvbldpdGhvdXREb2N1bWVudGF0aW9uID0gQTMoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR2YWxpZGF0ZSwKCWZ1bmN0aW9uIChyZXN1bHQpIHsKCQl2YXIgX3Y1ID0gcmVzdWx0LnN5bnRheDsKCQl2YXIgZGVjbCA9IF92NS5iOwoJCWlmIChkZWNsLiQgPT09ICdGdW5jdGlvbkRlY2xhcmF0aW9uJykgewoJCQl2YXIgbGV0RnVuY3Rpb25EZWNsYXJhdGlvbiA9IGRlY2wuYTsKCQkJdmFyIF92NyA9IGxldEZ1bmN0aW9uRGVjbGFyYXRpb24uc2lnbmF0dXJlOwoJCQlpZiAoX3Y3LiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuIHRydWU7CgkJCX0gZWxzZSB7CgkJCQl2YXIgX3Y4ID0gX3Y3LmE7CgkJCQl2YXIgc2lnbmF0dXJlID0gX3Y4LmI7CgkJCQl2YXIgX3Y5ID0gc2lnbmF0dXJlLm5hbWU7CgkJCQl2YXIgc2lnbmF0dXJlTmFtZSA9IF92OS5iOwoJCQkJdmFyIF92MTAgPSBsZXRGdW5jdGlvbkRlY2xhcmF0aW9uLmRlY2xhcmF0aW9uOwoJCQkJdmFyIGltcGxlbWVudGF0aW9uID0gX3YxMC5iOwoJCQkJdmFyIF92MTEgPSBpbXBsZW1lbnRhdGlvbi5uYW1lOwoJCQkJdmFyIGltcGxlbWVudGF0aW9uTmFtZSA9IF92MTEuYjsKCQkJCXJldHVybiBfVXRpbHNfZXEoaW1wbGVtZW50YXRpb25OYW1lLCBzaWduYXR1cmVOYW1lICsgJycpOwoJCQl9CgkJfSBlbHNlIHsKCQkJcmV0dXJuIHRydWU7CgkJfQoJfSwKCSdFeHBlY3RlZCB0byBmaW5kIHRoZSBzYW1lIG5hbWUgZm9yIGRlY2xhcmF0aW9uIGFuZCBzaWduYXR1cmUnLAoJQTcoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNldpdGhTdGFydExvY2F0aW9uLAoJCUY3KAoJCQlmdW5jdGlvbiAoc3RhcnROYW1lU3RhcnQsIHN0YXJ0TmFtZU5vZGUsIGNvbW1lbnRzQWZ0ZXJTdGFydE5hbWUsIG1heWJlU2lnbmF0dXJlLCBfYXJndW1lbnRzLCBjb21tZW50c0FmdGVyRXF1YWwsIHJlc3VsdCkgewoJCQkJdmFyIGFsbENvbW1lbnRzID0gQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCXJlc3VsdC5jb21tZW50cywKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQljb21tZW50c0FmdGVyRXF1YWwsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJX2FyZ3VtZW50cy5jb21tZW50cywKCQkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCQlpZiAobWF5YmVTaWduYXR1cmUuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJCXJldHVybiBjb21tZW50c0FmdGVyU3RhcnROYW1lOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBzaWduYXR1cmUgPSBtYXliZVNpZ25hdHVyZS5hOwoJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBzaWduYXR1cmUuY29tbWVudHMsIGNvbW1lbnRzQWZ0ZXJTdGFydE5hbWUpOwoJCQkJCQkJCX0KCQkJCQkJCX0oKSkpKTsKCQkJCWlmIChtYXliZVNpZ25hdHVyZS4kID09PSAnTm90aGluZycpIHsKCQkJCQl2YXIgX3YxID0gcmVzdWx0LnN5bnRheDsKCQkJCQl2YXIgZXhwcmVzc2lvblJhbmdlID0gX3YxLmE7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IGFsbENvbW1lbnRzLAoJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJe2VuZDogZXhwcmVzc2lvblJhbmdlLmVuZCwgc3RhcnQ6IHN0YXJ0TmFtZVN0YXJ0fSwKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJEZ1bmN0aW9uRGVjbGFyYXRpb24oCgkJCQkJCQkJewoJCQkJCQkJCQlkZWNsYXJhdGlvbjogQTIoCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJCQl7ZW5kOiBleHByZXNzaW9uUmFuZ2UuZW5kLCBzdGFydDogc3RhcnROYW1lU3RhcnR9LAoJCQkJCQkJCQkJe19hcmd1bWVudHM6IF9hcmd1bWVudHMuc3ludGF4LCBleHByZXNzaW9uOiByZXN1bHQuc3ludGF4LCBuYW1lOiBzdGFydE5hbWVOb2RlfSksCgkJCQkJCQkJCWRvY3VtZW50YXRpb246ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLAoJCQkJCQkJCQlzaWduYXR1cmU6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nCgkJCQkJCQkJfSkpCgkJCQkJfTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHNpZ25hdHVyZSA9IG1heWJlU2lnbmF0dXJlLmE7CgkJCQkJdmFyIF92MiA9IHNpZ25hdHVyZS5pbXBsZW1lbnRhdGlvbk5hbWU7CgkJCQkJdmFyIGltcGxlbWVudGF0aW9uTmFtZVJhbmdlID0gX3YyLmE7CgkJCQkJdmFyIF92MyA9IHJlc3VsdC5zeW50YXg7CgkJCQkJdmFyIGV4cHJlc3Npb25SYW5nZSA9IF92My5hOwoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiBhbGxDb21tZW50cywKCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXtlbmQ6IGV4cHJlc3Npb25SYW5nZS5lbmQsIHN0YXJ0OiBzdGFydE5hbWVTdGFydH0sCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREZWNsYXJhdGlvbiRGdW5jdGlvbkRlY2xhcmF0aW9uKAoJCQkJCQkJCXsKCQkJCQkJCQkJZGVjbGFyYXRpb246IEEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCQkJe2VuZDogZXhwcmVzc2lvblJhbmdlLmVuZCwgc3RhcnQ6IGltcGxlbWVudGF0aW9uTmFtZVJhbmdlLnN0YXJ0fSwKCQkJCQkJCQkJCXtfYXJndW1lbnRzOiBfYXJndW1lbnRzLnN5bnRheCwgZXhwcmVzc2lvbjogcmVzdWx0LnN5bnRheCwgbmFtZTogc2lnbmF0dXJlLmltcGxlbWVudGF0aW9uTmFtZX0pLAoJCQkJCQkJCQlkb2N1bWVudGF0aW9uOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywKCQkJCQkJCQkJc2lnbmF0dXJlOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQkJCUEzKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkY29tYmluZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkU2lnbmF0dXJlJFNpZ25hdHVyZSwgc3RhcnROYW1lTm9kZSwgc2lnbmF0dXJlLnR5cGVBbm5vdGF0aW9uKSkKCQkJCQkJCQl9KSkKCQkJCQl9OwoJCQkJfQoJCQl9KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lTm90SW5maXhOb2RlLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQlBNigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNE9yU3VjY2VlZCwKCQkJRjQoCgkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmVUeXBlQW5ub3RhdGlvbiwgdHlwZUFubm90YXRpb25SZXN1bHQsIGltcGxlbWVudGF0aW9uTmFtZSwgYWZ0ZXJJbXBsZW1lbnRhdGlvbk5hbWUpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCXsKCQkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJYWZ0ZXJJbXBsZW1lbnRhdGlvbk5hbWUsCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJaW1wbGVtZW50YXRpb25OYW1lLmNvbW1lbnRzLAoJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHR5cGVBbm5vdGF0aW9uUmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZVR5cGVBbm5vdGF0aW9uKSkpLAoJCQkJCQkJaW1wbGVtZW50YXRpb25OYW1lOiBpbXBsZW1lbnRhdGlvbk5hbWUuc3ludGF4LAoJCQkJCQkJdHlwZUFubm90YXRpb246IHR5cGVBbm5vdGF0aW9uUmVzdWx0LnN5bnRheAoJCQkJCQl9KTsKCQkJCX0pLAoJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAnOicsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVBbm5vdGF0aW9uLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbGF5b3V0U3RyaWN0Rm9sbG93ZWRCeSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lTm9kZSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRwYXJhbWV0ZXJQYXR0ZXJuc0VxdWFsLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGV4cHJlc3Npb24pKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJEluZml4RGVjbGFyYXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnSW5maXhEZWNsYXJhdGlvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGluZml4RGlyZWN0aW9uID0gQTMoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjMsCglBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXBXaXRoUmFuZ2UsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmQsICdyaWdodCcsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEluZml4JFJpZ2h0KSksCglBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXBXaXRoUmFuZ2UsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmQsICdsZWZ0JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkSW5maXgkTGVmdCkpLAoJQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwV2l0aFJhbmdlLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkLCAnbm9uJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkSW5maXgkTm9uKSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZXJyb3JBc09mZnNldEFuZEludCA9IHtfaW50OiAwLCBvZmZzZXQ6IC0xfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnRJbnRlZ2VyRGVjaW1hbCA9IEYyKAoJZnVuY3Rpb24gKG9mZnNldCwgc3JjKSB7CgkJdmFyIF92MCA9IEEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQlzd2l0Y2ggKF92MCkgewoJCQljYXNlICcwJzoKCQkJCXJldHVybiB7X2ludDogMCwgb2Zmc2V0OiBvZmZzZXQgKyAxfTsKCQkJY2FzZSAnMSc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgMSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnMic6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgMiwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnMyc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgMywgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnNCc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgNCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnNSc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgNSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnNic6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgNiwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnNyc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgNywgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnOCc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgOCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnOSc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgOSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRlcnJvckFzT2Zmc2V0QW5kSW50OwoJCX0KCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaW50ZWdlckRlY2ltYWxNYXBXaXRoUmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2VBbmRJbnRUb1JlcykgewoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQlmdW5jdGlvbiAoczApIHsKCQkJdmFyIHMxID0gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydEludGVnZXJEZWNpbWFsLCBzMC5vZmZzZXQsIHMwLnNyYyk7CgkJCWlmIChfVXRpbHNfZXEoczEub2Zmc2V0LCAtMSkpIHsKCQkJCXJldHVybiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJZmFsc2UsCgkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nTnVtYmVyLCBzMC5yb3csIHMwLmNvbCkpOwoJCQl9IGVsc2UgewoJCQkJdmFyIG5ld0NvbHVtbiA9IHMwLmNvbCArIChzMS5vZmZzZXQgLSBzMC5vZmZzZXQpOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJQTIoCgkJCQkJCXJhbmdlQW5kSW50VG9SZXMsCgkJCQkJCXsKCQkJCQkJCWVuZDoge2NvbHVtbjogbmV3Q29sdW1uLCByb3c6IHMwLnJvd30sCgkJCQkJCQlzdGFydDoge2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30KCQkJCQkJfSwKCQkJCQkJczEuX2ludCksCgkJCQkJe2NvbDogbmV3Q29sdW1uLCBpbmRlbnQ6IHMwLmluZGVudCwgb2Zmc2V0OiBzMS5vZmZzZXQsIHJvdzogczAucm93LCBzcmM6IHMwLnNyY30pOwoJCQl9CgkJfSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA5V2l0aFJhbmdlID0gZnVuY3Rpb24gKGZ1bmMpIHsKCXJldHVybiBmdW5jdGlvbiAoX3YwKSB7CgkJcmV0dXJuIGZ1bmN0aW9uIChfdjEpIHsKCQkJcmV0dXJuIGZ1bmN0aW9uIChfdjIpIHsKCQkJCXJldHVybiBmdW5jdGlvbiAoX3YzKSB7CgkJCQkJcmV0dXJuIGZ1bmN0aW9uIChfdjQpIHsKCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChfdjUpIHsKCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoX3Y2KSB7CgkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChfdjcpIHsKCQkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChfdjgpIHsKCQkJCQkJCQkJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQkJCQkJCQkJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQkJCQkJCQkJCXZhciBwYXJzZUMgPSBfdjIuYTsKCQkJCQkJCQkJCXZhciBwYXJzZUQgPSBfdjMuYTsKCQkJCQkJCQkJCXZhciBwYXJzZUUgPSBfdjQuYTsKCQkJCQkJCQkJCXZhciBwYXJzZUYgPSBfdjUuYTsKCQkJCQkJCQkJCXZhciBwYXJzZUcgPSBfdjYuYTsKCQkJCQkJCQkJCXZhciBwYXJzZUggPSBfdjcuYTsKCQkJCQkJCQkJCXZhciBwYXJzZUkgPSBfdjguYTsKCQkJCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCQkJCQkJCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQkJCQkJCQkJCXZhciBfdjkgPSBwYXJzZUEoczApOwoJCQkJCQkJCQkJCQlpZiAoX3Y5LiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCQkJCQl2YXIgY29tbWl0dGVkID0gX3Y5LmE7CgkJCQkJCQkJCQkJCQl2YXIgeCA9IF92OS5iOwoJCQkJCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCXZhciBhID0gX3Y5LmE7CgkJCQkJCQkJCQkJCQl2YXIgczEgPSBfdjkuYjsKCQkJCQkJCQkJCQkJCXZhciBfdjEwID0gcGFyc2VCKHMxKTsKCQkJCQkJCQkJCQkJCWlmIChfdjEwLiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCQkJCQkJdmFyIHggPSBfdjEwLmI7CgkJCQkJCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCXZhciBiID0gX3YxMC5hOwoJCQkJCQkJCQkJCQkJCXZhciBzMiA9IF92MTAuYjsKCQkJCQkJCQkJCQkJCQl2YXIgX3YxMSA9IHBhcnNlQyhzMik7CgkJCQkJCQkJCQkJCQkJaWYgKF92MTEuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJCQkJCQkJdmFyIHggPSBfdjExLmI7CgkJCQkJCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCXZhciBjID0gX3YxMS5hOwoJCQkJCQkJCQkJCQkJCQl2YXIgczMgPSBfdjExLmI7CgkJCQkJCQkJCQkJCQkJCXZhciBfdjEyID0gcGFyc2VEKHMzKTsKCQkJCQkJCQkJCQkJCQkJaWYgKF92MTIuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJCQkJCQkJCXZhciB4ID0gX3YxMi5iOwoJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCQl2YXIgZCA9IF92MTIuYTsKCQkJCQkJCQkJCQkJCQkJCXZhciBzNCA9IF92MTIuYjsKCQkJCQkJCQkJCQkJCQkJCXZhciBfdjEzID0gcGFyc2VFKHM0KTsKCQkJCQkJCQkJCQkJCQkJCWlmIChfdjEzLiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIHggPSBfdjEzLmI7CgkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQkJCXZhciBlID0gX3YxMy5hOwoJCQkJCQkJCQkJCQkJCQkJCXZhciBzNSA9IF92MTMuYjsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgX3YxNCA9IHBhcnNlRihzNSk7CgkJCQkJCQkJCQkJCQkJCQkJaWYgKF92MTQuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJCQkJCQkJCQkJdmFyIHggPSBfdjE0LmI7CgkJCQkJCQkJCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCQkJCXZhciBmID0gX3YxNC5hOwoJCQkJCQkJCQkJCQkJCQkJCQl2YXIgczYgPSBfdjE0LmI7CgkJCQkJCQkJCQkJCQkJCQkJCXZhciBfdjE1ID0gcGFyc2VHKHM2KTsKCQkJCQkJCQkJCQkJCQkJCQkJaWYgKF92MTUuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJCQkJCQkJCQkJCXZhciB4ID0gX3YxNS5iOwoJCQkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgZyA9IF92MTUuYTsKCQkJCQkJCQkJCQkJCQkJCQkJCXZhciBzNyA9IF92MTUuYjsKCQkJCQkJCQkJCQkJCQkJCQkJCXZhciBfdjE2ID0gcGFyc2VIKHM3KTsKCQkJCQkJCQkJCQkJCQkJCQkJCWlmIChfdjE2LiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCQkJCQkJCQkJCQkJdmFyIHggPSBfdjE2LmI7CgkJCQkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQkJCQkJCXZhciBoID0gX3YxNi5hOwoJCQkJCQkJCQkJCQkJCQkJCQkJCXZhciBzOCA9IF92MTYuYjsKCQkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgX3YxNyA9IHBhcnNlSShzOCk7CgkJCQkJCQkJCQkJCQkJCQkJCQkJaWYgKF92MTcuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJCQkJCQkJCQkJCQkJdmFyIHggPSBfdjE3LmI7CgkJCQkJCQkJCQkJCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCQkJCQkJCXZhciBpID0gX3YxNy5hOwoJCQkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgczkgPSBfdjE3LmI7CgkJCQkJCQkJCQkJCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQlmdW5jKAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJZW5kOiB7Y29sdW1uOiBzOS5jb2wsIHJvdzogczkucm93fSwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJfSkoYSkoYikoYykoZCkoZSkoZikoZykoaCkoaSksCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQlzOSk7CgkJCQkJCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCX07CgkJCQkJCQkJfTsKCQkJCQkJCX07CgkJCQkJCX07CgkJCQkJfTsKCQkJCX07CgkJCX07CgkJfTsKCX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkaW5maXhEZWNsYXJhdGlvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDlXaXRoUmFuZ2UoCglmdW5jdGlvbiAocmFuZ2UpIHsKCQlyZXR1cm4gZnVuY3Rpb24gKGNvbW1lbnRzQWZ0ZXJJbmZpeCkgewoJCQlyZXR1cm4gZnVuY3Rpb24gKGRpcmVjdGlvbikgewoJCQkJcmV0dXJuIGZ1bmN0aW9uIChjb21tZW50c0FmdGVyRGlyZWN0aW9uKSB7CgkJCQkJcmV0dXJuIGZ1bmN0aW9uIChwcmVjZWRlbmNlKSB7CgkJCQkJCXJldHVybiBmdW5jdGlvbiAoY29tbWVudHNBZnRlclByZWNlZGVuY2UpIHsKCQkJCQkJCXJldHVybiBmdW5jdGlvbiAob3BlcmF0b3IpIHsKCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGNvbW1lbnRzQWZ0ZXJPcGVyYXRvcikgewoJCQkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGNvbW1lbnRzQWZ0ZXJFcXVhbCkgewoJCQkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChmbikgewoJCQkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJCQkJCWNvbW1lbnRzQWZ0ZXJFcXVhbCwKCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJCQkJCQljb21tZW50c0FmdGVyT3BlcmF0b3IsCgkJCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJCQkJCQkJY29tbWVudHNBZnRlclByZWNlZGVuY2UsCgkJCQkJCQkJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlckRpcmVjdGlvbiwgY29tbWVudHNBZnRlckluZml4KSkpKSwKCQkJCQkJCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQkJCQkJCXJhbmdlLAoJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRGVjbGFyYXRpb24kSW5maXhEZWNsYXJhdGlvbigKCQkJCQkJCQkJCQkJCQl7ZGlyZWN0aW9uOiBkaXJlY3Rpb24sIF9mdW5jdGlvbjogZm4sIG9wZXJhdG9yOiBvcGVyYXRvciwgcHJlY2VkZW5jZTogcHJlY2VkZW5jZX0pKQoJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQl9OwoJCQkJCQkJCQl9OwoJCQkJCQkJCX07CgkJCQkJCQl9OwoJCQkJCQl9OwoJCQkJCX07CgkJCQl9OwoJCQl9OwoJCX07Cgl9KSgKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LCAnaW5maXgnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpKSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkaW5maXhEaXJlY3Rpb24pKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCkoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpbnRlZ2VyRGVjaW1hbE1hcFdpdGhSYW5nZSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUpKSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpKAoJQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQknKCcsCgkJQTQoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHdoaWxlV2l0aG91dExpbmVicmVha0FuZDJQYXJ0VXRmMTZWYWxpZGF0ZU1hcFdpdGhSYW5nZUJhY2t0cmFja2FibGVGb2xsb3dlZEJ5U3ltYm9sLAoJCQlGMigKCQkJCWZ1bmN0aW9uIChvcGVyYXRvclJhbmdlLCBvcGVyYXRvcikgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQl7CgkJCQkJCQllbmQ6IHtjb2x1bW46IG9wZXJhdG9yUmFuZ2UuZW5kLmNvbHVtbiArIDEsIHJvdzogb3BlcmF0b3JSYW5nZS5lbmQucm93fSwKCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBvcGVyYXRvclJhbmdlLnN0YXJ0LmNvbHVtbiAtIDEsIHJvdzogb3BlcmF0b3JSYW5nZS5zdGFydC5yb3d9CgkJCQkJCX0sCgkJCQkJCW9wZXJhdG9yKTsKCQkJCX0pLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkaXNPcGVyYXRvclN5bWJvbENoYXIsCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRpc0FsbG93ZWRPcGVyYXRvclRva2VuLAoJCQknKScpKSkoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSgKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICc9JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSkoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2Y1ID0gRjUoCglmdW5jdGlvbiAoX3YwLCBfdjEsIF92MiwgX3YzLCBfdjQpIHsKCQl2YXIgYXR0ZW1wdEZpcnN0ID0gX3YwLmE7CgkJdmFyIGF0dGVtcHRTZWNvbmQgPSBfdjEuYTsKCQl2YXIgYXR0ZW1wdFRoaXJkID0gX3YyLmE7CgkJdmFyIGF0dGVtcHRGb3VydGggPSBfdjMuYTsKCQl2YXIgYXR0ZW1wdEZpZnRoID0gX3Y0LmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBfdjUgPSBhdHRlbXB0Rmlyc3Qocyk7CgkJCQlpZiAoX3Y1LiQgPT09ICdHb29kJykgewoJCQkJCXZhciBmaXJzdEdvb2QgPSBfdjU7CgkJCQkJcmV0dXJuIGZpcnN0R29vZDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGZpcnN0QmFkID0gX3Y1OwoJCQkJCXZhciBmaXJzdENvbW1pdHRlZCA9IGZpcnN0QmFkLmE7CgkJCQkJdmFyIGZpcnN0WCA9IGZpcnN0QmFkLmI7CgkJCQkJaWYgKGZpcnN0Q29tbWl0dGVkKSB7CgkJCQkJCXJldHVybiBmaXJzdEJhZDsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgX3Y2ID0gYXR0ZW1wdFNlY29uZChzKTsKCQkJCQkJaWYgKF92Ni4kID09PSAnR29vZCcpIHsKCQkJCQkJCXZhciBzZWNvbmRHb29kID0gX3Y2OwoJCQkJCQkJcmV0dXJuIHNlY29uZEdvb2Q7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgc2Vjb25kQmFkID0gX3Y2OwoJCQkJCQkJdmFyIHNlY29uZENvbW1pdHRlZCA9IHNlY29uZEJhZC5hOwoJCQkJCQkJdmFyIHNlY29uZFggPSBzZWNvbmRCYWQuYjsKCQkJCQkJCWlmIChzZWNvbmRDb21taXR0ZWQpIHsKCQkJCQkJCQlyZXR1cm4gc2Vjb25kQmFkOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgX3Y3ID0gYXR0ZW1wdFRoaXJkKHMpOwoJCQkJCQkJCWlmIChfdjcuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQkJCXZhciB0aGlyZEdvb2QgPSBfdjc7CgkJCQkJCQkJCXJldHVybiB0aGlyZEdvb2Q7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJdmFyIHRoaXJkQmFkID0gX3Y3OwoJCQkJCQkJCQl2YXIgdGhpcmRDb21taXR0ZWQgPSB0aGlyZEJhZC5hOwoJCQkJCQkJCQl2YXIgdGhpcmRYID0gdGhpcmRCYWQuYjsKCQkJCQkJCQkJaWYgKHRoaXJkQ29tbWl0dGVkKSB7CgkJCQkJCQkJCQlyZXR1cm4gdGhpcmRCYWQ7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQl2YXIgX3Y4ID0gYXR0ZW1wdEZvdXJ0aChzKTsKCQkJCQkJCQkJCWlmIChfdjguJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQkJCQkJdmFyIGZvdXJ0aEdvb2QgPSBfdjg7CgkJCQkJCQkJCQkJcmV0dXJuIGZvdXJ0aEdvb2Q7CgkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCXZhciBmb3VydGhCYWQgPSBfdjg7CgkJCQkJCQkJCQkJdmFyIGZvdXJ0aENvbW1pdHRlZCA9IGZvdXJ0aEJhZC5hOwoJCQkJCQkJCQkJCXZhciBmb3VydGhYID0gZm91cnRoQmFkLmI7CgkJCQkJCQkJCQkJaWYgKGZvdXJ0aENvbW1pdHRlZCkgewoJCQkJCQkJCQkJCQlyZXR1cm4gZm91cnRoQmFkOwoJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCXZhciBfdjkgPSBhdHRlbXB0RmlmdGgocyk7CgkJCQkJCQkJCQkJCWlmIChfdjkuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQkJCQkJCQl2YXIgZmlmdGhHb29kID0gX3Y5OwoJCQkJCQkJCQkJCQkJcmV0dXJuIGZpZnRoR29vZDsKCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCXZhciBmaWZ0aEJhZCA9IF92OTsKCQkJCQkJCQkJCQkJCXZhciBmaWZ0aENvbW1pdHRlZCA9IGZpZnRoQmFkLmE7CgkJCQkJCQkJCQkJCQl2YXIgZmlmdGhYID0gZmlmdGhCYWQuYjsKCQkJCQkJCQkJCQkJCXJldHVybiBmaWZ0aENvbW1pdHRlZCA/IGZpZnRoQmFkIDogQTIoCgkJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQkJCQkJCQkJCWZhbHNlLAoJCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdPbmVPZiwKCQkJCQkJCQkJCQkJCQkJZmlyc3RYLAoJCQkJCQkJCQkJCQkJCQlzZWNvbmRYLAoJCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCQlbdGhpcmRYLCBmb3VydGhYLCBmaWZ0aFhdKSkpOwoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHBvcnREZWNsYXJhdGlvbldpdGhvdXREb2N1bWVudGF0aW9uID0gQTYoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA1LAoJRjUoCgkJZnVuY3Rpb24gKGNvbW1lbnRzQWZ0ZXJQb3J0LCBuYW1lLCBjb21tZW50c0FmdGVyTmFtZSwgY29tbWVudHNBZnRlckNvbG9uLCB0eXBlQW5ub3RhdGlvblJlc3VsdCkgewoJCQl2YXIgbmFtZVJhbmdlID0gbmFtZS5hOwoJCQl2YXIgX3YwID0gdHlwZUFubm90YXRpb25SZXN1bHQuc3ludGF4OwoJCQl2YXIgZW5kID0gX3YwLmEuZW5kOwoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQl0eXBlQW5ub3RhdGlvblJlc3VsdC5jb21tZW50cywKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQljb21tZW50c0FmdGVyQ29sb24sCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlck5hbWUsIGNvbW1lbnRzQWZ0ZXJQb3J0KSkpLAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJewoJCQkJCQllbmQ6IGVuZCwKCQkJCQkJc3RhcnQ6IHtjb2x1bW46IDEsIHJvdzogbmFtZVJhbmdlLnN0YXJ0LnJvd30KCQkJCQl9LAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJFBvcnREZWNsYXJhdGlvbigKCQkJCQkJe25hbWU6IG5hbWUsIHR5cGVBbm5vdGF0aW9uOiB0eXBlQW5ub3RhdGlvblJlc3VsdC5zeW50YXh9KSkKCQkJfTsKCQl9KSwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LCAncG9ydCcsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lTm9kZSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICc6JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVBbm5vdGF0aW9uKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRUeXBlRGVjbGFyYXRpb25XaXRob3V0RG9jdW1lbnRhdGlvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUeXBlRGVjbGFyYXRpb25XaXRob3V0RG9jdW1lbnRhdGlvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGN1c3RvbVR5cGVEZWZpbml0aW9uV2l0aG91dERvY3VtZW50YXRpb25BZnRlclR5cGVQcmVmaXggPSBBNygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDYsCglGNigKCQlmdW5jdGlvbiAobmFtZSwgY29tbWVudHNBZnRlck5hbWUsIHBhcmFtZXRlcnMsIGNvbW1lbnRzQWZ0ZXJFcXVhbCwgaGVhZFZhcmlhbnQsIHRhaWxWYXJpYW50c1JldmVyc2UpIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJdGFpbFZhcmlhbnRzUmV2ZXJzZS5jb21tZW50cywKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQloZWFkVmFyaWFudC5jb21tZW50cywKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQljb21tZW50c0FmdGVyRXF1YWwsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHBhcmFtZXRlcnMuY29tbWVudHMsIGNvbW1lbnRzQWZ0ZXJOYW1lKSkpKSwKCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJFR5cGVEZWNsYXJhdGlvbldpdGhvdXREb2N1bWVudGF0aW9uKAoJCQkJCXtoZWFkVmFyaWFudDogaGVhZFZhcmlhbnQuc3ludGF4LCBuYW1lOiBuYW1lLCBwYXJhbWV0ZXJzOiBwYXJhbWV0ZXJzLnN5bnRheCwgdGFpbFZhcmlhbnRzUmV2ZXJzZTogdGFpbFZhcmlhbnRzUmV2ZXJzZS5zeW50YXh9KQoJCQl9OwoJCX0pLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lTm9kZSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyR0eXBlR2VuZXJpY0xpc3RFcXVhbHMsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkdmFsdWVDb25zdHJ1Y3Rvck9wdGltaXN0aWNMYXlvdXQsCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJG1hbnlXaXRob3V0UmV2ZXJzZSgKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJJ3wnLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRwb3NpdGl2ZWx5SW5kZW50ZWRQbHVzRm9sbG93ZWRCeSwKCQkJCTEsCgkJCQlBMygKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJCUYyKAoJCQkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmVQaXBlLCB2YXJpYW50UmVzdWx0KSB7CgkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHZhcmlhbnRSZXN1bHQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlUGlwZSksCgkJCQkJCQkJc3ludGF4OiB2YXJpYW50UmVzdWx0LnN5bnRheAoJCQkJCQkJfTsKCQkJCQkJfSksCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyR2YWx1ZUNvbnN0cnVjdG9yT3B0aW1pc3RpY0xheW91dCkpKSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhTdGFydExvY2F0aW9uID0gRjMoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEpIHsKCQl2YXIgcGFyc2VBID0gX3YwLmE7CgkJdmFyIHBhcnNlQiA9IF92MS5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92MiA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3YyLiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92Mi5hOwoJCQkJCXZhciB4ID0gX3YyLmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjIuYTsKCQkJCQl2YXIgczEgPSBfdjIuYjsKCQkJCQl2YXIgX3YzID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3YzLiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3YzLmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3YzLmE7CgkJCQkJCXZhciBzMiA9IF92My5iOwoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJQTMoCgkJCQkJCQkJZnVuYywKCQkJCQkJCQl7Y29sdW1uOiBzMC5jb2wsIHJvdzogczAucm93fSwKCQkJCQkJCQlhLAoJCQkJCQkJCWIpLAoJCQkJCQkJczIpOwoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRUeXBlQWxpYXNEZWNsYXJhdGlvbldpdGhvdXREb2N1bWVudGF0aW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1R5cGVBbGlhc0RlY2xhcmF0aW9uV2l0aG91dERvY3VtZW50YXRpb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyR0eXBlQWxpYXNEZWZpbml0aW9uV2l0aG91dERvY3VtZW50YXRpb25BZnRlclR5cGVQcmVmaXggPSBBNygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDYsCglGNigKCQlmdW5jdGlvbiAoY29tbWVudHNBZnRlckFsaWFzLCBuYW1lLCBjb21tZW50c0FmdGVyTmFtZSwgcGFyYW1ldGVycywgY29tbWVudHNBZnRlckVxdWFsLCB0eXBlQW5ub3RhdGlvblJlc3VsdCkgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQl0eXBlQW5ub3RhdGlvblJlc3VsdC5jb21tZW50cywKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQljb21tZW50c0FmdGVyRXF1YWwsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJcGFyYW1ldGVycy5jb21tZW50cywKCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlck5hbWUsIGNvbW1lbnRzQWZ0ZXJBbGlhcykpKSksCgkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRUeXBlQWxpYXNEZWNsYXJhdGlvbldpdGhvdXREb2N1bWVudGF0aW9uKAoJCQkJCXtuYW1lOiBuYW1lLCBwYXJhbWV0ZXJzOiBwYXJhbWV0ZXJzLnN5bnRheCwgdHlwZUFubm90YXRpb246IHR5cGVBbm5vdGF0aW9uUmVzdWx0LnN5bnRheH0pCgkJCX07CgkJfSksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwgJ2FsaWFzJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyR0eXBlTmFtZU5vZGUsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkdHlwZUdlbmVyaWNMaXN0RXF1YWxzLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZUFubm90YXRpb24pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHR5cGVPclR5cGVBbGlhc0RlZmluaXRpb25XaXRob3V0RG9jdW1lbnRhdGlvbiA9IEEzKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhTdGFydExvY2F0aW9uLAoJRjMoCgkJZnVuY3Rpb24gKHN0YXJ0LCBjb21tZW50c0FmdGVyVHlwZSwgYWZ0ZXJTdGFydCkgewoJCQl2YXIgYWxsQ29tbWVudHMgPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGFmdGVyU3RhcnQuY29tbWVudHMsIGNvbW1lbnRzQWZ0ZXJUeXBlKTsKCQkJdmFyIF92MCA9IGFmdGVyU3RhcnQuc3ludGF4OwoJCQlpZiAoX3YwLiQgPT09ICdUeXBlRGVjbGFyYXRpb25XaXRob3V0RG9jdW1lbnRhdGlvbicpIHsKCQkJCXZhciB0eXBlRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24gPSBfdjAuYTsKCQkJCXZhciBlbmQgPSBmdW5jdGlvbiAoKSB7CgkJCQkJdmFyIF92MSA9IHR5cGVEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi50YWlsVmFyaWFudHNSZXZlcnNlOwoJCQkJCWlmIChfdjEuYikgewoJCQkJCQl2YXIgX3YyID0gX3YxLmE7CgkJCQkJCXZhciByYW5nZSA9IF92Mi5hOwoJCQkJCQlyZXR1cm4gcmFuZ2UuZW5kOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjMgPSB0eXBlRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24uaGVhZFZhcmlhbnQ7CgkJCQkJCXZhciBoZWFkVmFyaWFudFJhbmdlID0gX3YzLmE7CgkJCQkJCXJldHVybiBoZWFkVmFyaWFudFJhbmdlLmVuZDsKCQkJCQl9CgkJCQl9KCk7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBhbGxDb21tZW50cywKCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCXtlbmQ6IGVuZCwgc3RhcnQ6IHN0YXJ0fSwKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRGVjbGFyYXRpb24kQ3VzdG9tVHlwZURlY2xhcmF0aW9uKAoJCQkJCQkJewoJCQkJCQkJCWNvbnN0cnVjdG9yczogQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCXR5cGVEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5oZWFkVmFyaWFudCwKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZSh0eXBlRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24udGFpbFZhcmlhbnRzUmV2ZXJzZSkpLAoJCQkJCQkJCWRvY3VtZW50YXRpb246ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLAoJCQkJCQkJCWdlbmVyaWNzOiB0eXBlRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24ucGFyYW1ldGVycywKCQkJCQkJCQluYW1lOiB0eXBlRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24ubmFtZQoJCQkJCQkJfSkpCgkJCQl9OwoJCQl9IGVsc2UgewoJCQkJdmFyIHR5cGVBbGlhc0RlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uID0gX3YwLmE7CgkJCQl2YXIgX3Y0ID0gdHlwZUFsaWFzRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24udHlwZUFubm90YXRpb247CgkJCQl2YXIgdHlwZUFubm90YXRpb25SYW5nZSA9IF92NC5hOwoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogYWxsQ29tbWVudHMsCgkJCQkJc3ludGF4OiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQl7ZW5kOiB0eXBlQW5ub3RhdGlvblJhbmdlLmVuZCwgc3RhcnQ6IHN0YXJ0fSwKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRGVjbGFyYXRpb24kQWxpYXNEZWNsYXJhdGlvbigKCQkJCQkJCXtkb2N1bWVudGF0aW9uOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywgZ2VuZXJpY3M6IHR5cGVBbGlhc0RlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLnBhcmFtZXRlcnMsIG5hbWU6IHR5cGVBbGlhc0RlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLm5hbWUsIHR5cGVBbm5vdGF0aW9uOiB0eXBlQWxpYXNEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi50eXBlQW5ub3RhdGlvbn0pKQoJCQkJfTsKCQkJfQoJCX0pLAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZEZvbGxvd2VkQnksICd0eXBlJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHR5cGVBbGlhc0RlZmluaXRpb25XaXRob3V0RG9jdW1lbnRhdGlvbkFmdGVyVHlwZVByZWZpeCwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGN1c3RvbVR5cGVEZWZpbml0aW9uV2l0aG91dERvY3VtZW50YXRpb25BZnRlclR5cGVQcmVmaXgpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRkZWNsYXJhdGlvbiA9IEE1KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mNSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGZ1bmN0aW9uRGVjbGFyYXRpb25XaXRob3V0RG9jdW1lbnRhdGlvbiwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGRlY2xhcmF0aW9uV2l0aERvY3VtZW50YXRpb24sICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyR0eXBlT3JUeXBlQWxpYXNEZWZpbml0aW9uV2l0aG91dERvY3VtZW50YXRpb24sICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRwb3J0RGVjbGFyYXRpb25XaXRob3V0RG9jdW1lbnRhdGlvbiwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGluZml4RGVjbGFyYXRpb24pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29sdW1uQW5kVGhlbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQlmdW5jdGlvbiAocykgewoJCQl2YXIgX3YwID0gY2FsbGJhY2socy5jb2wpOwoJCQl2YXIgcGFyc2UgPSBfdjAuYTsKCQkJcmV0dXJuIHBhcnNlKHMpOwoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHByb2JsZW1Nb2R1bGVMZXZlbEluZGVudGF0aW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkcHJvYmxlbSgnbXVzdCBiZSBvbiBtb2R1bGUtbGV2ZWwgaW5kZW50YXRpb24nKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtb2R1bGVMZXZlbEluZGVudGF0aW9uRm9sbG93ZWRCeSA9IGZ1bmN0aW9uIChuZXh0UGFyc2VyKSB7CglyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29sdW1uQW5kVGhlbigKCQlmdW5jdGlvbiAoY29sdW1uKSB7CgkJCXJldHVybiAoY29sdW1uID09PSAxKSA/IG5leHRQYXJzZXIgOiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkcHJvYmxlbU1vZHVsZUxldmVsSW5kZW50YXRpb247CgkJfSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRGaWxlJGZpbGVEZWNsYXJhdGlvbnMgPSAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJG1hbnkoCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbW9kdWxlTGV2ZWxJbmRlbnRhdGlvbkZvbGxvd2VkQnkoCgkJQTMoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCUYyKAoJCQkJZnVuY3Rpb24gKGRlY2xhcmF0aW9uUGFyc2VkLCBjb21tZW50c0FmdGVyKSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlciwgZGVjbGFyYXRpb25QYXJzZWQuY29tbWVudHMpLAoJCQkJCQlzeW50YXg6IGRlY2xhcmF0aW9uUGFyc2VkLnN5bnRheAoJCQkJCX07CgkJCQl9KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGRlY2xhcmF0aW9uLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCkpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cG9zaW5nJEFsbCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdBbGwnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cG9zaW5nJEV4cGxpY2l0ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0V4cGxpY2l0JywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHBvc2luZyRGdW5jdGlvbkV4cG9zZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdGdW5jdGlvbkV4cG9zZScsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwb3NlJGZ1bmN0aW9uRXhwb3NlID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU1hcFdpdGhSYW5nZSgKCUYyKAoJCWZ1bmN0aW9uIChyYW5nZSwgbmFtZSkgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJcmFuZ2UsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwb3NpbmckRnVuY3Rpb25FeHBvc2UobmFtZSkpCgkJCX07CgkJfSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwb3NpbmckSW5maXhFeHBvc2UgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnSW5maXhFeHBvc2UnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRwYXJlbnNFbmQgPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wsICcpJywgX1V0aWxzX1R1cGxlMCk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHBvc2UkaW5maXhFeHBvc2UgPSBBMygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJXaXRoUmFuZ2UsCglGMygKCQlmdW5jdGlvbiAocmFuZ2UsIGluZml4TmFtZSwgX3YwKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHBvc2luZyRJbmZpeEV4cG9zZShpbmZpeE5hbWUpKQoJCQl9OwoJCX0pLAoJQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQknKCcsCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGlmRm9sbG93ZWRCeVdoaWxlV2l0aG91dExpbmVicmVhaywKCQkJZnVuY3Rpb24gKGMpIHsKCQkJCXN3aXRjaCAoYy52YWx1ZU9mKCkpIHsKCQkJCQljYXNlICcpJzoKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCWNhc2UgJ1xuJzoKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCWNhc2UgJyAnOgoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJZGVmYXVsdDoKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQl9CgkJCX0sCgkJCWZ1bmN0aW9uIChjKSB7CgkJCQlzd2l0Y2ggKGMudmFsdWVPZigpKSB7CgkJCQkJY2FzZSAnKSc6CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQljYXNlICdcbic6CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQljYXNlICcgJzoKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXJldHVybiB0cnVlOwoJCQkJfQoJCQl9KSksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkcGFyZW5zRW5kKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cG9zaW5nJFR5cGVFeHBvc2UgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVHlwZUV4cG9zZScsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwb3NpbmckVHlwZU9yQWxpYXNFeHBvc2UgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVHlwZU9yQWxpYXNFeHBvc2UnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJXaXRoUmFuZ2VPclN1Y2NlZWQgPSBGNCgKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSwgZmFsbGJhY2spIHsKCQl2YXIgcGFyc2VBID0gX3YwLmE7CgkJdmFyIHBhcnNlQiA9IF92MS5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92MiA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3YyLiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGMxID0gX3YyLmE7CgkJCQkJdmFyIHggPSBfdjIuYjsKCQkJCQlyZXR1cm4gYzEgPyBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpIDogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwgZmFsbGJhY2ssIHMwKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjIuYTsKCQkJCQl2YXIgczEgPSBfdjIuYjsKCQkJCQl2YXIgX3YzID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3YzLiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3YzLmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3YzLmE7CgkJCQkJCXZhciBzMiA9IF92My5iOwoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJQTMoCgkJCQkJCQkJZnVuYywKCQkJCQkJCQl7CgkJCQkJCQkJCWVuZDoge2NvbHVtbjogczIuY29sLCByb3c6IHMyLnJvd30sCgkJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzMC5jb2wsIHJvdzogczAucm93fQoJCQkJCQkJCX0sCgkJCQkJCQkJYSwKCQkJCQkJCQliKSwKCQkJCQkJCXMyKTsKCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHBvc2UkdHlwZUV4cG9zZSA9IEE0KAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCUYzKAoJCWZ1bmN0aW9uIChfdjAsIGNvbW1lbnRzQmVmb3JlTWF5YmVPcGVuLCBtYXliZU9wZW4pIHsKCQkJdmFyIHR5cGVOYW1lUmFuZ2UgPSBfdjAuYTsKCQkJdmFyIHR5cGVOYW1lID0gX3YwLmI7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBtYXliZU9wZW4uY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlTWF5YmVPcGVuKSwKCQkJCXN5bnRheDogZnVuY3Rpb24gKCkgewoJCQkJCXZhciBfdjEgPSBtYXliZU9wZW4uc3ludGF4OwoJCQkJCWlmIChfdjEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXR5cGVOYW1lUmFuZ2UsCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHBvc2luZyRUeXBlT3JBbGlhc0V4cG9zZSh0eXBlTmFtZSkpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBvcGVuUmFuZ2UgPSBfdjEuYTsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJe2VuZDogb3BlblJhbmdlLmVuZCwgc3RhcnQ6IHR5cGVOYW1lUmFuZ2Uuc3RhcnR9LAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwb3NpbmckVHlwZUV4cG9zZSgKCQkJCQkJCQl7bmFtZTogdHlwZU5hbWUsIG9wZW46IG1heWJlT3Blbi5zeW50YXh9KSk7CgkJCQkJfQoJCQkJfSgpCgkJCX07CgkJfSksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHlwZU5hbWVOb2RlLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQsCglBNCgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyV2l0aFJhbmdlT3JTdWNjZWVkLAoJCUYzKAoJCQlmdW5jdGlvbiAocmFuZ2UsIGxlZnQsIHJpZ2h0KSB7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHJpZ2h0LCBsZWZ0KSwKCQkJCQlzeW50YXg6ICRlbG0kY29yZSRNYXliZSRKdXN0KHJhbmdlKQoJCQkJfTsKCQkJfSksCgkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJygnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U3ltYm9sLAoJCQknKScsCgkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICcuLicsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCkpLAoJCXtjb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksIHN5bnRheDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHBvc2UkZXhwb3NhYmxlID0gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YzLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHBvc2UkZnVuY3Rpb25FeHBvc2UsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cG9zZSR0eXBlRXhwb3NlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHBvc2UkaW5maXhFeHBvc2UpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwb3NlJGV4cG9zaW5nTGlzdElubmVyID0gQTIoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCglBNCgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzLAoJCUYzKAoJCQlmdW5jdGlvbiAoaGVhZEVsZW1lbnQsIGNvbW1lbnRzQWZ0ZXJIZWFkRWxlbWVudCwgdGFpbEVsZW1lbnRzKSB7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQl0YWlsRWxlbWVudHMuY29tbWVudHMsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlckhlYWRFbGVtZW50LCBoZWFkRWxlbWVudC5jb21tZW50cykpLAoJCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwb3NpbmckRXhwbGljaXQoCgkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGhlYWRFbGVtZW50LnN5bnRheCwgdGFpbEVsZW1lbnRzLnN5bnRheCkpCgkJCQl9OwoJCQl9KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHBvc2UkZXhwb3NhYmxlLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJG1hbnkoCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJCScsJywKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUFyb3VuZEJvdGhTaWRlcygkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHBvc2UkZXhwb3NhYmxlKSkpKSwKCUEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcFdpdGhSYW5nZSwKCQlGMigKCQkJZnVuY3Rpb24gKHJhbmdlLCBjb21tZW50c0FmdGVyRG90RG90KSB7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBjb21tZW50c0FmdGVyRG90RG90LAoJCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwb3NpbmckQWxsKHJhbmdlKQoJCQkJfTsKCQkJfSksCgkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJy4uJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwb3NlJGV4cG9zZURlZmluaXRpb24gPSBBNCgKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDNXaXRoUmFuZ2UsCglGNCgKCQlmdW5jdGlvbiAocmFuZ2UsIGNvbW1lbnRzQWZ0ZXJFeHBvc2luZywgY29tbWVudHNCZWZvcmUsIGV4cG9zaW5nTGlzdElubmVyUmVzdWx0KSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCWV4cG9zaW5nTGlzdElubmVyUmVzdWx0LmNvbW1lbnRzLAoJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNCZWZvcmUsIGNvbW1lbnRzQWZ0ZXJFeHBvc2luZykpLAoJCQkJc3ludGF4OiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsIHJhbmdlLCBleHBvc2luZ0xpc3RJbm5lclJlc3VsdC5zeW50YXgpCgkJCX07CgkJfSksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAnZXhwb3NpbmcnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJygnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U3ltYm9sLCAnKScsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cG9zZSRleHBvc2luZ0xpc3RJbm5lcikpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwM09yU3VjY2VlZCA9IEY1KAoJZnVuY3Rpb24gKGZ1bmMsIF92MCwgX3YxLCBfdjIsIGZhbGxiYWNrKSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQl2YXIgcGFyc2VDID0gX3YyLmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgX3YzID0gcGFyc2VBKHMwKTsKCQkJCWlmIChfdjMuJCA9PT0gJ0JhZCcpIHsKCQkJCQl2YXIgYzEgPSBfdjMuYTsKCQkJCQl2YXIgeCA9IF92My5iOwoJCQkJCXJldHVybiBjMSA/IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCkgOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLCBmYWxsYmFjaywgczApOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYSA9IF92My5hOwoJCQkJCXZhciBzMSA9IF92My5iOwoJCQkJCXZhciBfdjQgPSBwYXJzZUIoczEpOwoJCQkJCWlmIChfdjQuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJdmFyIHggPSBfdjQuYjsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGIgPSBfdjQuYTsKCQkJCQkJdmFyIHMyID0gX3Y0LmI7CgkJCQkJCXZhciBfdjUgPSBwYXJzZUMoczIpOwoJCQkJCQlpZiAoX3Y1LiQgPT09ICdCYWQnKSB7CgkJCQkJCQl2YXIgeCA9IF92NS5iOwoJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYyA9IF92NS5hOwoJCQkJCQkJdmFyIHMzID0gX3Y1LmI7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCQlBMyhmdW5jLCBhLCBiLCBjKSwKCQkJCQkJCQlzMyk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEJhc2UkY3ljbGljJG1vZHVsZU5hbWVPckVtcHR5KCkgewoJcmV0dXJuIEE0KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJPclN1Y2NlZWQsCgkJRjIoCgkJCWZ1bmN0aW9uIChoZWFkLCB0YWlsKSB7CgkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgaGVhZCwgdGFpbCk7CgkJCX0pLAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICcuJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsYXp5KAoJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQmFzZSRjeWNsaWMkbW9kdWxlTmFtZU9yRW1wdHkoKTsKCQkJfSksCgkJX0xpc3RfTmlsKTsKfQp0cnkgewoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEJhc2UkbW9kdWxlTmFtZU9yRW1wdHkgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRCYXNlJGN5Y2xpYyRtb2R1bGVOYW1lT3JFbXB0eSgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQmFzZSRjeWNsaWMkbW9kdWxlTmFtZU9yRW1wdHkgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEJhc2UkbW9kdWxlTmFtZU9yRW1wdHk7Cgl9Owp9IGNhdGNoICgkKSB7Cgl0aHJvdyAnU29tZSB0b3AtbGV2ZWwgZGVmaW5pdGlvbnMgZnJvbSBgRWxtLlBhcnNlci5CYXNlYCBhcmUgY2F1c2luZyBpbmZpbml0ZSByZWN1cnNpb246XG5cbiAg4pSM4pSA4pSA4pSA4pSA4pSA4pSQXG4gIOKUgiAgICBtb2R1bGVOYW1lT3JFbXB0eVxuICDilJTilIDilIDilIDilIDilIDilJhcblxuVGhlc2UgZXJyb3JzIGFyZSB2ZXJ5IHRyaWNreSwgc28gcmVhZCBodHRwczovL2VsbS1sYW5nLm9yZy8wLjE5LjEvYmFkLXJlY3Vyc2lvbiB0byBsZWFybiBob3cgdG8gZml4IGl0ISc7fQp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQmFzZSRtb2R1bGVOYW1lID0gQTMoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyV2l0aFJhbmdlLAoJRjMoCgkJZnVuY3Rpb24gKHJhbmdlLCBoZWFkLCB0YWlsKSB7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCXJhbmdlLAoJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgaGVhZCwgdGFpbCkpOwoJCX0pLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQmFzZSRtb2R1bGVOYW1lT3JFbXB0eSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHlwZU5hbWVNYXBXaXRoUmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2VBbmROYW1lVG9SZXMpIHsKCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZU1hcFdpdGhSYW5nZVdpdGhvdXRMaW5lYnJlYWssIHJhbmdlQW5kTmFtZVRvUmVzLCAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSR1bmljb2RlSXNVcHBlckZhc3QsICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJHVuaWNvZGVJc0FscGhhTnVtT3JVbmRlcnNjb3JlRmFzdCk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRJbXBvcnRzJGltcG9ydERlZmluaXRpb24gPSBBNigKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDVXaXRoU3RhcnRMb2NhdGlvbiwKCUY2KAoJCWZ1bmN0aW9uIChzdGFydCwgY29tbWVudHNBZnRlckltcG9ydCwgbW9kLCBjb21tZW50c0FmdGVyTW9kdWxlTmFtZSwgbWF5YmVNb2R1bGVBbGlhcywgbWF5YmVFeHBvc2luZ0xpc3QpIHsKCQkJdmFyIGNvbW1lbnRzQmVmb3JlQWxpYXMgPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJNb2R1bGVOYW1lLCBjb21tZW50c0FmdGVySW1wb3J0KTsKCQkJaWYgKG1heWJlTW9kdWxlQWxpYXMuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQlpZiAobWF5YmVFeHBvc2luZ0xpc3QuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJdmFyIF92MiA9IG1vZDsKCQkJCQl2YXIgbW9kUmFuZ2UgPSBfdjIuYTsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogY29tbWVudHNCZWZvcmVBbGlhcywKCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXtlbmQ6IG1vZFJhbmdlLmVuZCwgc3RhcnQ6IHN0YXJ0fSwKCQkJCQkJCXtleHBvc2luZ0xpc3Q6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLCBtb2R1bGVBbGlhczogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsIG1vZHVsZU5hbWU6IG1vZH0pCgkJCQkJfTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGV4cG9zaW5nTGlzdFZhbHVlID0gbWF5YmVFeHBvc2luZ0xpc3QuYTsKCQkJCQl2YXIgX3YzID0gZXhwb3NpbmdMaXN0VmFsdWUuc3ludGF4OwoJCQkJCXZhciBleHBvc2luZ1JhbmdlID0gX3YzLmE7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgZXhwb3NpbmdMaXN0VmFsdWUuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlQWxpYXMpLAoJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJe2VuZDogZXhwb3NpbmdSYW5nZS5lbmQsIHN0YXJ0OiBzdGFydH0sCgkJCQkJCQl7CgkJCQkJCQkJZXhwb3NpbmdMaXN0OiAkZWxtJGNvcmUkTWF5YmUkSnVzdChleHBvc2luZ0xpc3RWYWx1ZS5zeW50YXgpLAoJCQkJCQkJCW1vZHVsZUFsaWFzOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywKCQkJCQkJCQltb2R1bGVOYW1lOiBtb2QKCQkJCQkJCX0pCgkJCQkJfTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXZhciBtb2R1bGVBbGlhc1Jlc3VsdCA9IG1heWJlTW9kdWxlQWxpYXMuYTsKCQkJCWlmIChtYXliZUV4cG9zaW5nTGlzdC4kID09PSAnTm90aGluZycpIHsKCQkJCQl2YXIgX3Y1ID0gbW9kdWxlQWxpYXNSZXN1bHQuc3ludGF4OwoJCQkJCXZhciBhbGlhc1JhbmdlID0gX3Y1LmE7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgbW9kdWxlQWxpYXNSZXN1bHQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlQWxpYXMpLAoJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJe2VuZDogYWxpYXNSYW5nZS5lbmQsIHN0YXJ0OiBzdGFydH0sCgkJCQkJCQl7CgkJCQkJCQkJZXhwb3NpbmdMaXN0OiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywKCQkJCQkJCQltb2R1bGVBbGlhczogJGVsbSRjb3JlJE1heWJlJEp1c3QobW9kdWxlQWxpYXNSZXN1bHQuc3ludGF4KSwKCQkJCQkJCQltb2R1bGVOYW1lOiBtb2QKCQkJCQkJCX0pCgkJCQkJfTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGV4cG9zaW5nTGlzdFZhbHVlID0gbWF5YmVFeHBvc2luZ0xpc3QuYTsKCQkJCQl2YXIgX3Y2ID0gZXhwb3NpbmdMaXN0VmFsdWUuc3ludGF4OwoJCQkJCXZhciBleHBvc2luZ1JhbmdlID0gX3Y2LmE7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJZXhwb3NpbmdMaXN0VmFsdWUuY29tbWVudHMsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIG1vZHVsZUFsaWFzUmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZUFsaWFzKSksCgkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQl7ZW5kOiBleHBvc2luZ1JhbmdlLmVuZCwgc3RhcnQ6IHN0YXJ0fSwKCQkJCQkJCXsKCQkJCQkJCQlleHBvc2luZ0xpc3Q6ICRlbG0kY29yZSRNYXliZSRKdXN0KGV4cG9zaW5nTGlzdFZhbHVlLnN5bnRheCksCgkJCQkJCQkJbW9kdWxlQWxpYXM6ICRlbG0kY29yZSRNYXliZSRKdXN0KG1vZHVsZUFsaWFzUmVzdWx0LnN5bnRheCksCgkJCQkJCQkJbW9kdWxlTmFtZTogbW9kCgkJCQkJCQl9KQoJCQkJCX07CgkJCQl9CgkJCX0KCQl9KSwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LCAnaW1wb3J0JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEJhc2UkbW9kdWxlTmFtZSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvcHRpbWlzdGljTGF5b3V0LAoJQTUoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwM09yU3VjY2VlZCwKCQlGMygKCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCBtb2R1bGVBbGlhc05vZGUsIGNvbW1lbnRzQWZ0ZXIpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQl7CgkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXIsIGNvbW1lbnRzQmVmb3JlKSwKCQkJCQkJc3ludGF4OiBtb2R1bGVBbGlhc05vZGUKCQkJCQl9KTsKCQkJfSksCgkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZEZvbGxvd2VkQnksICdhcycsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lTWFwV2l0aFJhbmdlKAoJCQlGMigKCQkJCWZ1bmN0aW9uIChyYW5nZSwgbW9kdWxlQWxpYXMpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJcmFuZ2UsCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVttb2R1bGVBbGlhc10pKTsKCQkJCX0pKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCwKCQkkZWxtJGNvcmUkTWF5YmUkTm90aGluZyksCglBNCgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyT3JTdWNjZWVkLAoJCUYyKAoJCQlmdW5jdGlvbiAoZXhwb3NpbmdSZXN1bHQsIGNvbW1lbnRzQWZ0ZXIpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQl7CgkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXIsIGV4cG9zaW5nUmVzdWx0LmNvbW1lbnRzKSwKCQkJCQkJc3ludGF4OiBleHBvc2luZ1Jlc3VsdC5zeW50YXgKCQkJCQl9KTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwb3NlJGV4cG9zZURlZmluaXRpb24sCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQsCgkJJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRlbmRzVG9wSW5kZW50ZWQgPSBmdW5jdGlvbiAocGFyc2VyKSB7CglyZXR1cm4gQTMoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkdmFsaWRhdGVFbmRDb2x1bW5JbmRlbnRhdGlvbiwKCQlGMigKCQkJZnVuY3Rpb24gKGNvbHVtbiwgaW5kZW50KSB7CgkJCQlyZXR1cm4gIShjb2x1bW4gLSBpbmRlbnQpOwoJCQl9KSwKCQknbXVzdCBiZSBvbiB0b3AgaW5kZW50YXRpb24nLAoJCXBhcnNlcik7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbGF5b3V0U3RyaWN0ID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGVuZHNUb3BJbmRlbnRlZCgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbGF5b3V0U3RyaWN0Rm9sbG93ZWRCeUNvbW1lbnRzID0gZnVuY3Rpb24gKG5leHRQYXJzZXIpIHsKCXJldHVybiBBMygKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCUYyKAoJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmUsIGFmdGVyQ29tbWVudHMpIHsKCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGFmdGVyQ29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9uVG9wSW5kZW50YXRpb25Gb2xsb3dlZEJ5KG5leHRQYXJzZXIpKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE1vZHVsZSRFZmZlY3RNb2R1bGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRWZmZWN0TW9kdWxlJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRNb2R1bGVzJGVmZmVjdFdoZXJlQ2xhdXNlID0gQTUoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0LAoJRjQoCgkJZnVuY3Rpb24gKGZuTmFtZSwgY29tbWVudHNBZnRlckZuTmFtZSwgY29tbWVudHNBZnRlckVxdWFsLCB0eXBlTmFtZV8pIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJFcXVhbCwgY29tbWVudHNBZnRlckZuTmFtZSksCgkJCQlzeW50YXg6IF9VdGlsc19UdXBsZTIoZm5OYW1lLCB0eXBlTmFtZV8pCgkJCX07CgkJfSksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJz0nLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lTm9kZSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkTGlzdCRFeHRyYSRmaW5kID0gRjIoCglmdW5jdGlvbiAocHJlZGljYXRlLCBsaXN0KSB7CgkJZmluZDoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIWxpc3QuYikgewoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQl9IGVsc2UgewoJCQkJdmFyIHggPSBsaXN0LmE7CgkJCQl2YXIgeHMgPSBsaXN0LmI7CgkJCQlpZiAocHJlZGljYXRlKHgpKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KHgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgJHRlbXAkcHJlZGljYXRlID0gcHJlZGljYXRlLAoJCQkJCQkkdGVtcCRsaXN0ID0geHM7CgkJCQkJcHJlZGljYXRlID0gJHRlbXAkcHJlZGljYXRlOwoJCQkJCWxpc3QgPSAkdGVtcCRsaXN0OwoJCQkJCWNvbnRpbnVlIGZpbmQ7CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJE1vZHVsZXMkd2hlcmVCbG9jayA9IEEyKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZm9sbG93ZWRCeVN5bWJvbCwKCSd9JywKCUEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJJ3snLAoJCUE1KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0LAoJCQlGNCgKCQkJCWZ1bmN0aW9uIChjb21tZW50c0JlZm9yZUhlYWQsIGhlYWQsIGNvbW1lbnRzQWZ0ZXJIZWFkLCB0YWlsKSB7CgkJCQkJdmFyIHBhaXJzID0gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgaGVhZC5zeW50YXgsIHRhaWwuc3ludGF4KTsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQl0YWlsLmNvbW1lbnRzLAoJCQkJCQkJQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCWNvbW1lbnRzQWZ0ZXJIZWFkLAoJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgaGVhZC5jb21tZW50cywgY29tbWVudHNCZWZvcmVIZWFkKSkpLAoJCQkJCQlzeW50YXg6IHsKCQkJCQkJCWNvbW1hbmQ6IEEyKAoJCQkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCQkJJGVsbSRjb3JlJFR1cGxlJHNlY29uZCwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JExpc3QkRXh0cmEkZmluZCwKCQkJCQkJCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJCQkJCQkJdmFyIGZuTmFtZSA9IF92MC5hOwoJCQkJCQkJCQkJcmV0dXJuIGZuTmFtZSA9PT0gJ2NvbW1hbmQnOwoJCQkJCQkJCQl9LAoJCQkJCQkJCQlwYWlycykpLAoJCQkJCQkJc3Vic2NyaXB0aW9uOiBBMigKCQkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQkJCSRlbG0kY29yZSRUdXBsZSRzZWNvbmQsCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRMaXN0JEV4dHJhJGZpbmQsCgkJCQkJCQkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCQkJCQkJCXZhciBmbk5hbWUgPSBfdjEuYTsKCQkJCQkJCQkJCXJldHVybiBmbk5hbWUgPT09ICdzdWJzY3JpcHRpb24nOwoJCQkJCQkJCQl9LAoJCQkJCQkJCQlwYWlycykpCgkJCQkJCX0KCQkJCQl9OwoJCQkJfSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTW9kdWxlcyRlZmZlY3RXaGVyZUNsYXVzZSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJG1hbnkoCgkJCQlBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCScsJywKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVBcm91bmRCb3RoU2lkZXMoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTW9kdWxlcyRlZmZlY3RXaGVyZUNsYXVzZSkpKSkpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJE1vZHVsZXMkZWZmZWN0V2hlcmVDbGF1c2VzID0gQTMoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJRjIoCgkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCB3aGVyZVJlc3VsdCkgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgd2hlcmVSZXN1bHQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKSwKCQkJCXN5bnRheDogd2hlcmVSZXN1bHQuc3ludGF4CgkJCX07CgkJfSksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwgJ3doZXJlJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJE1vZHVsZXMkd2hlcmVCbG9jayk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA3V2l0aFJhbmdlID0gRjgoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIF92MiwgX3YzLCBfdjQsIF92NSwgX3Y2KSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQl2YXIgcGFyc2VDID0gX3YyLmE7CgkJdmFyIHBhcnNlRCA9IF92My5hOwoJCXZhciBwYXJzZUUgPSBfdjQuYTsKCQl2YXIgcGFyc2VGID0gX3Y1LmE7CgkJdmFyIHBhcnNlRyA9IF92Ni5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92NyA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3Y3LiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92Ny5hOwoJCQkJCXZhciB4ID0gX3Y3LmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjcuYTsKCQkJCQl2YXIgczEgPSBfdjcuYjsKCQkJCQl2YXIgX3Y4ID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3Y4LiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3Y4LmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3Y4LmE7CgkJCQkJCXZhciBzMiA9IF92OC5iOwoJCQkJCQl2YXIgX3Y5ID0gcGFyc2VDKHMyKTsKCQkJCQkJaWYgKF92OS4kID09PSAnQmFkJykgewoJCQkJCQkJdmFyIHggPSBfdjkuYjsKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIGMgPSBfdjkuYTsKCQkJCQkJCXZhciBzMyA9IF92OS5iOwoJCQkJCQkJdmFyIF92MTAgPSBwYXJzZUQoczMpOwoJCQkJCQkJaWYgKF92MTAuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQl2YXIgeCA9IF92MTAuYjsKCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIGQgPSBfdjEwLmE7CgkJCQkJCQkJdmFyIHM0ID0gX3YxMC5iOwoJCQkJCQkJCXZhciBfdjExID0gcGFyc2VFKHM0KTsKCQkJCQkJCQlpZiAoX3YxMS4kID09PSAnQmFkJykgewoJCQkJCQkJCQl2YXIgeCA9IF92MTEuYjsKCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJdmFyIGUgPSBfdjExLmE7CgkJCQkJCQkJCXZhciBzNSA9IF92MTEuYjsKCQkJCQkJCQkJdmFyIF92MTIgPSBwYXJzZUYoczUpOwoJCQkJCQkJCQlpZiAoX3YxMi4kID09PSAnQmFkJykgewoJCQkJCQkJCQkJdmFyIHggPSBfdjEyLmI7CgkJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXZhciBmID0gX3YxMi5hOwoJCQkJCQkJCQkJdmFyIHM2ID0gX3YxMi5iOwoJCQkJCQkJCQkJdmFyIF92MTMgPSBwYXJzZUcoczYpOwoJCQkJCQkJCQkJaWYgKF92MTMuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJCQl2YXIgeCA9IF92MTMuYjsKCQkJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJdmFyIGcgPSBfdjEzLmE7CgkJCQkJCQkJCQkJdmFyIHM3ID0gX3YxMy5iOwoJCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCQkJCQkJQTgoCgkJCQkJCQkJCQkJCQlmdW5jLAoJCQkJCQkJCQkJCQkJewoJCQkJCQkJCQkJCQkJCWVuZDoge2NvbHVtbjogczcuY29sLCByb3c6IHM3LnJvd30sCgkJCQkJCQkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCQkJYSwKCQkJCQkJCQkJCQkJCWIsCgkJCQkJCQkJCQkJCQljLAoJCQkJCQkJCQkJCQkJZCwKCQkJCQkJCQkJCQkJCWUsCgkJCQkJCQkJCQkJCQlmLAoJCQkJCQkJCQkJCQkJZyksCgkJCQkJCQkJCQkJCXM3KTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJE1vZHVsZXMkZWZmZWN0TW9kdWxlRGVmaW5pdGlvbiA9IEE4KAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwN1dpdGhSYW5nZSwKCUY4KAoJCWZ1bmN0aW9uIChyYW5nZSwgY29tbWVudHNBZnRlckVmZmVjdCwgY29tbWVudHNBZnRlck1vZHVsZSwgbmFtZSwgY29tbWVudHNBZnRlck5hbWUsIHdoZXJlQ2xhdXNlcywgY29tbWVudHNBZnRlcldoZXJlQ2xhdXNlcywgZXhwKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCWV4cC5jb21tZW50cywKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQljb21tZW50c0FmdGVyV2hlcmVDbGF1c2VzLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCXdoZXJlQ2xhdXNlcy5jb21tZW50cywKCQkJCQkJCUEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQljb21tZW50c0FmdGVyTmFtZSwKCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJNb2R1bGUsIGNvbW1lbnRzQWZ0ZXJFZmZlY3QpKSkpKSwKCQkJCXN5bnRheDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXJhbmdlLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE1vZHVsZSRFZmZlY3RNb2R1bGUoCgkJCQkJCXtjb21tYW5kOiB3aGVyZUNsYXVzZXMuc3ludGF4LmNvbW1hbmQsIGV4cG9zaW5nTGlzdDogZXhwLnN5bnRheCwgbW9kdWxlTmFtZTogbmFtZSwgc3Vic2NyaXB0aW9uOiB3aGVyZUNsYXVzZXMuc3ludGF4LnN1YnNjcmlwdGlvbn0pKQoJCQl9OwoJCX0pLAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZEZvbGxvd2VkQnksICdlZmZlY3QnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZEZvbGxvd2VkQnksICdtb2R1bGUnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQmFzZSRtb2R1bGVOYW1lLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTW9kdWxlcyRlZmZlY3RXaGVyZUNsYXVzZXMsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHBvc2UkZXhwb3NlRGVmaW5pdGlvbik7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGUkTm9ybWFsTW9kdWxlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ05vcm1hbE1vZHVsZScsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTW9kdWxlcyRub3JtYWxNb2R1bGVEZWZpbml0aW9uID0gQTUoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0V2l0aFJhbmdlLAoJRjUoCgkJZnVuY3Rpb24gKHJhbmdlLCBjb21tZW50c0FmdGVyTW9kdWxlLCBtb2R1bGVOYW1lLCBjb21tZW50c0FmdGVyTW9kdWxlTmFtZSwgZXhwb3NpbmdMaXN0KSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCWV4cG9zaW5nTGlzdC5jb21tZW50cywKCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJNb2R1bGVOYW1lLCBjb21tZW50c0FmdGVyTW9kdWxlKSksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGUkTm9ybWFsTW9kdWxlKAoJCQkJCQl7ZXhwb3NpbmdMaXN0OiBleHBvc2luZ0xpc3Quc3ludGF4LCBtb2R1bGVOYW1lOiBtb2R1bGVOYW1lfSkpCgkJCX07CgkJfSksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwgJ21vZHVsZScsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRCYXNlJG1vZHVsZU5hbWUsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHBvc2UkZXhwb3NlRGVmaW5pdGlvbik7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGUkUG9ydE1vZHVsZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQb3J0TW9kdWxlJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRNb2R1bGVzJHBvcnRNb2R1bGVEZWZpbml0aW9uID0gQTYoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA1V2l0aFJhbmdlLAoJRjYoCgkJZnVuY3Rpb24gKHJhbmdlLCBjb21tZW50c0FmdGVyUG9ydCwgY29tbWVudHNBZnRlck1vZHVsZSwgbW9kdWxlTmFtZSwgY29tbWVudHNBZnRlck1vZHVsZU5hbWUsIGV4cG9zaW5nTGlzdCkgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQlleHBvc2luZ0xpc3QuY29tbWVudHMsCgkJCQkJQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJY29tbWVudHNBZnRlck1vZHVsZU5hbWUsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlck1vZHVsZSwgY29tbWVudHNBZnRlclBvcnQpKSksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGUkUG9ydE1vZHVsZSgKCQkJCQkJe2V4cG9zaW5nTGlzdDogZXhwb3NpbmdMaXN0LnN5bnRheCwgbW9kdWxlTmFtZTogbW9kdWxlTmFtZX0pKQoJCQl9OwoJCX0pLAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZEZvbGxvd2VkQnksICdwb3J0JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LCAnbW9kdWxlJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEJhc2UkbW9kdWxlTmFtZSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cG9zZSRleHBvc2VEZWZpbml0aW9uKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJE1vZHVsZXMkbW9kdWxlRGVmaW5pdGlvbiA9IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTW9kdWxlcyRub3JtYWxNb2R1bGVEZWZpbml0aW9uLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRNb2R1bGVzJHBvcnRNb2R1bGVEZWZpbml0aW9uLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRNb2R1bGVzJGVmZmVjdE1vZHVsZURlZmluaXRpb24pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQ29tbWVudHMkbW9kdWxlRG9jdW1lbnRhdGlvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJENvbW1lbnRzJGRlY2xhcmF0aW9uRG9jdW1lbnRhdGlvbjsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHJvcGVMaWtlbHlGaWxsZWRUb0xpc3RJbnRvID0gRjIoCglmdW5jdGlvbiAoaW5pdGlhbEFjYywgcm9wZUxpa2VseUZpbGxlZCkgewoJCXJvcGVMaWtlbHlGaWxsZWRUb0xpc3RJbnRvOgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmIChyb3BlTGlrZWx5RmlsbGVkLiQgPT09ICdMZWFmJykgewoJCQkJdmFyIG9ubHlFbGVtZW50ID0gcm9wZUxpa2VseUZpbGxlZC5hOwoJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIG9ubHlFbGVtZW50LCBpbml0aWFsQWNjKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBsZWZ0ID0gcm9wZUxpa2VseUZpbGxlZC5hOwoJCQkJdmFyIHJpZ2h0ID0gcm9wZUxpa2VseUZpbGxlZC5iOwoJCQkJdmFyICR0ZW1wJGluaXRpYWxBY2MgPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRyb3BlTGlrZWx5RmlsbGVkVG9MaXN0SW50bywgaW5pdGlhbEFjYywgcmlnaHQpLAoJCQkJCSR0ZW1wJHJvcGVMaWtlbHlGaWxsZWQgPSBsZWZ0OwoJCQkJaW5pdGlhbEFjYyA9ICR0ZW1wJGluaXRpYWxBY2M7CgkJCQlyb3BlTGlrZWx5RmlsbGVkID0gJHRlbXAkcm9wZUxpa2VseUZpbGxlZDsKCQkJCWNvbnRpbnVlIHJvcGVMaWtlbHlGaWxsZWRUb0xpc3RJbnRvOwoJCQl9CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSR0b0xpc3QgPSBmdW5jdGlvbiAocm9wZSkgewoJaWYgKHJvcGUuJCA9PT0gJ05vdGhpbmcnKSB7CgkJcmV0dXJuIF9MaXN0X05pbDsKCX0gZWxzZSB7CgkJdmFyIHJvcGVMaWtlbHlGaWxsZWQgPSByb3BlLmE7CgkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHJvcGVMaWtlbHlGaWxsZWRUb0xpc3RJbnRvLCBfTGlzdF9OaWwsIHJvcGVMaWtlbHlGaWxsZWQpOwoJfQp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRmlsZSRmaWxlID0gQTUoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0LAoJRjQoCgkJZnVuY3Rpb24gKG1vZHVsZURlZmluaXRpb24sIG1vZHVsZUNvbW1lbnRzLCBpbXBvcnRzLCBkZWNsYXJhdGlvbnMpIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSR0b0xpc3QoCgkJCQkJQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJZGVjbGFyYXRpb25zLmNvbW1lbnRzLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCWltcG9ydHMuY29tbWVudHMsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIG1vZHVsZUNvbW1lbnRzLCBtb2R1bGVEZWZpbml0aW9uLmNvbW1lbnRzKSkpKSwKCQkJCWRlY2xhcmF0aW9uczogZGVjbGFyYXRpb25zLnN5bnRheCwKCQkJCWltcG9ydHM6IGltcG9ydHMuc3ludGF4LAoJCQkJbW9kdWxlRGVmaW5pdGlvbjogbW9kdWxlRGVmaW5pdGlvbi5zeW50YXgKCQkJfTsKCQl9KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRsYXlvdXRTdHJpY3RGb2xsb3dlZEJ5V2l0aENvbW1lbnRzKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJE1vZHVsZXMkbW9kdWxlRGVmaW5pdGlvbiksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbGF5b3V0U3RyaWN0Rm9sbG93ZWRCeUNvbW1lbnRzKAoJCUE0KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyT3JTdWNjZWVkLAoJCQlGMigKCQkJCWZ1bmN0aW9uIChtb2R1bGVEb2N1bWVudGF0aW9uLCBjb21tZW50c0FmdGVyKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRmaWxsZWRQcmVwZW5kVG8sCgkJCQkJCWNvbW1lbnRzQWZ0ZXIsCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJG9uZShtb2R1bGVEb2N1bWVudGF0aW9uKSk7CgkJCQl9KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQ29tbWVudHMkbW9kdWxlRG9jdW1lbnRhdGlvbiwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGxheW91dFN0cmljdCwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHkpKSwKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkbWFueSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRJbXBvcnRzJGltcG9ydERlZmluaXRpb24pLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRmlsZSRmaWxlRGVjbGFyYXRpb25zKTsKdmFyICRlbG0kcGFyc2VyJFBhcnNlciRFeHBlY3RpbmdFbmQgPSB7JDogJ0V4cGVjdGluZ0VuZCd9Owp2YXIgJGVsbSRwYXJzZXIkUGFyc2VyJEV4cGVjdGluZ0tleXdvcmQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRXhwZWN0aW5nS2V5d29yZCcsIGE6IGF9Owp9Owp2YXIgJGVsbSRwYXJzZXIkUGFyc2VyJEV4cGVjdGluZ051bWJlciA9IHskOiAnRXhwZWN0aW5nTnVtYmVyJ307CnZhciAkZWxtJHBhcnNlciRQYXJzZXIkRXhwZWN0aW5nU3ltYm9sID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0V4cGVjdGluZ1N5bWJvbCcsIGE6IGF9Owp9Owp2YXIgJGVsbSRwYXJzZXIkUGFyc2VyJFByb2JsZW0gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUHJvYmxlbScsIGE6IGF9Owp9Owp2YXIgJGVsbSRwYXJzZXIkUGFyc2VyJFVuZXhwZWN0ZWRDaGFyID0geyQ6ICdVbmV4cGVjdGVkQ2hhcid9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkcm9wZUZpbGxlZFRvTGlzdCA9IEYyKAoJZnVuY3Rpb24gKHByb2JsZW1Ub0NvbnZlcnQsIHNvRmFyKSB7CgkJc3dpdGNoIChwcm9ibGVtVG9Db252ZXJ0LiQpIHsKCQkJY2FzZSAnRXhwZWN0aW5nT25lT2YnOgoJCQkJdmFyIGZpcnN0VHJ5ID0gcHJvYmxlbVRvQ29udmVydC5hOwoJCQkJdmFyIHNlY29uZFRyeSA9IHByb2JsZW1Ub0NvbnZlcnQuYjsKCQkJCXZhciB0aGlyZFRyeVVwID0gcHJvYmxlbVRvQ29udmVydC5jOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHJvcGVGaWxsZWRUb0xpc3QsCgkJCQkJZmlyc3RUcnksCgkJCQkJQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHJvcGVGaWxsZWRUb0xpc3QsCgkJCQkJCXNlY29uZFRyeSwKCQkJCQkJQTMoJGVsbSRjb3JlJExpc3QkZm9sZHIsICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHJvcGVGaWxsZWRUb0xpc3QsIHNvRmFyLCB0aGlyZFRyeVVwKSkpOwoJCQljYXNlICdFeHBlY3RpbmdOdW1iZXInOgoJCQkJdmFyIHJvdyA9IHByb2JsZW1Ub0NvbnZlcnQuYTsKCQkJCXZhciBjb2wgPSBwcm9ibGVtVG9Db252ZXJ0LmI7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQl7Y29sOiBjb2wsIHByb2JsZW06ICRlbG0kcGFyc2VyJFBhcnNlciRFeHBlY3RpbmdOdW1iZXIsIHJvdzogcm93fSwKCQkJCQlzb0Zhcik7CgkJCWNhc2UgJ0V4cGVjdGluZ1N5bWJvbCc6CgkJCQl2YXIgcm93ID0gcHJvYmxlbVRvQ29udmVydC5hOwoJCQkJdmFyIGNvbCA9IHByb2JsZW1Ub0NvbnZlcnQuYjsKCQkJCXZhciBzeW1ib2xTdHJpbmcgPSBwcm9ibGVtVG9Db252ZXJ0LmM7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQl7CgkJCQkJCWNvbDogY29sLAoJCQkJCQlwcm9ibGVtOiAkZWxtJHBhcnNlciRQYXJzZXIkRXhwZWN0aW5nU3ltYm9sKHN5bWJvbFN0cmluZyksCgkJCQkJCXJvdzogcm93CgkJCQkJfSwKCQkJCQlzb0Zhcik7CgkJCWNhc2UgJ0V4cGVjdGluZ0FueUNoYXInOgoJCQkJdmFyIHJvdyA9IHByb2JsZW1Ub0NvbnZlcnQuYTsKCQkJCXZhciBjb2wgPSBwcm9ibGVtVG9Db252ZXJ0LmI7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQl7CgkJCQkJCWNvbDogY29sLAoJCQkJCQlwcm9ibGVtOiAkZWxtJHBhcnNlciRQYXJzZXIkUHJvYmxlbSgnZXhwZWN0aW5nIGFueSBjaGFyJyksCgkJCQkJCXJvdzogcm93CgkJCQkJfSwKCQkJCQlzb0Zhcik7CgkJCWNhc2UgJ0V4cGVjdGluZ0tleXdvcmQnOgoJCQkJdmFyIHJvdyA9IHByb2JsZW1Ub0NvbnZlcnQuYTsKCQkJCXZhciBjb2wgPSBwcm9ibGVtVG9Db252ZXJ0LmI7CgkJCQl2YXIga2V5d29yZFN0cmluZyA9IHByb2JsZW1Ub0NvbnZlcnQuYzsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCXsKCQkJCQkJY29sOiBjb2wsCgkJCQkJCXByb2JsZW06ICRlbG0kcGFyc2VyJFBhcnNlciRFeHBlY3RpbmdLZXl3b3JkKGtleXdvcmRTdHJpbmcpLAoJCQkJCQlyb3c6IHJvdwoJCQkJCX0sCgkJCQkJc29GYXIpOwoJCQljYXNlICdFeHBlY3RpbmdDaGFyU2F0aXNmeWluZ1ByZWRpY2F0ZSc6CgkJCQl2YXIgcm93ID0gcHJvYmxlbVRvQ29udmVydC5hOwoJCQkJdmFyIGNvbCA9IHByb2JsZW1Ub0NvbnZlcnQuYjsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCXtjb2w6IGNvbCwgcHJvYmxlbTogJGVsbSRwYXJzZXIkUGFyc2VyJFVuZXhwZWN0ZWRDaGFyLCByb3c6IHJvd30sCgkJCQkJc29GYXIpOwoJCQljYXNlICdFeHBlY3RpbmdTdHJpbmdTYXRpc2Z5aW5nUHJlZGljYXRlJzoKCQkJCXZhciByb3cgPSBwcm9ibGVtVG9Db252ZXJ0LmE7CgkJCQl2YXIgY29sID0gcHJvYmxlbVRvQ29udmVydC5iOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJewoJCQkJCQljb2w6IGNvbCwKCQkJCQkJcHJvYmxlbTogJGVsbSRwYXJzZXIkUGFyc2VyJFByb2JsZW0oJ2V4cGVjdGVkIHN0cmluZyB0byBwYXNzIHZhbGlkYXRpb24nKSwKCQkJCQkJcm93OiByb3cKCQkJCQl9LAoJCQkJCXNvRmFyKTsKCQkJZGVmYXVsdDoKCQkJCXZhciByb3cgPSBwcm9ibGVtVG9Db252ZXJ0LmE7CgkJCQl2YXIgY29sID0gcHJvYmxlbVRvQ29udmVydC5iOwoJCQkJdmFyIGN1c3RvbU1lc3NhZ2UgPSBwcm9ibGVtVG9Db252ZXJ0LmM7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQl7CgkJCQkJCWNvbDogY29sLAoJCQkJCQlwcm9ibGVtOiAkZWxtJHBhcnNlciRQYXJzZXIkUHJvYmxlbShjdXN0b21NZXNzYWdlKSwKCQkJCQkJcm93OiByb3cKCQkJCQl9LAoJCQkJCXNvRmFyKTsKCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHJ1biA9IEYyKAoJZnVuY3Rpb24gKF92MCwgc3JjKSB7CgkJdmFyIHBhcnNlID0gX3YwLmE7CgkJdmFyIF92MSA9IHBhcnNlKAoJCQl7Y29sOiAxLCBpbmRlbnQ6IDEsIG9mZnNldDogMCwgcm93OiAxLCBzcmM6IHNyY30pOwoJCWlmIChfdjEuJCA9PT0gJ0dvb2QnKSB7CgkJCXZhciB2YWx1ZSA9IF92MS5hOwoJCQl2YXIgZmluYWxTdGF0ZSA9IF92MS5iOwoJCQlyZXR1cm4gKCEoZmluYWxTdGF0ZS5vZmZzZXQgLSAkZWxtJGNvcmUkU3RyaW5nJGxlbmd0aChmaW5hbFN0YXRlLnNyYykpKSA/ICRlbG0kY29yZSRSZXN1bHQkT2sodmFsdWUpIDogJGVsbSRjb3JlJFJlc3VsdCRFcnIoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQl7Y29sOiBmaW5hbFN0YXRlLmNvbCwgcHJvYmxlbTogJGVsbSRwYXJzZXIkUGFyc2VyJEV4cGVjdGluZ0VuZCwgcm93OiBmaW5hbFN0YXRlLnJvd30KCQkJCQldKSk7CgkJfSBlbHNlIHsKCQkJdmFyIGRlYWRFbmRzID0gX3YxLmI7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHJvcGVGaWxsZWRUb0xpc3QsIGRlYWRFbmRzLCBfTGlzdF9OaWwpKTsKCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJHBhcnNlVG9GaWxlID0gZnVuY3Rpb24gKGlucHV0KSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkcnVuLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRGaWxlJGZpbGUsIGlucHV0KTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtTW9kdWxlVGV4dCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJHBhcnNlVG9GaWxlOwp2YXIgJGVsbSRjb3JlJFJlc3VsdCR3aXRoRGVmYXVsdCA9IEYyKAoJZnVuY3Rpb24gKGRlZiwgcmVzdWx0KSB7CgkJaWYgKHJlc3VsdC4kID09PSAnT2snKSB7CgkJCXZhciBhID0gcmVzdWx0LmE7CgkJCXJldHVybiBhOwoJCX0gZWxzZSB7CgkJCXJldHVybiBkZWY7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRhZGRNb2R1bGVzRnJvbVRleHRUb0FwcEZpbGVzID0gRjMoCglmdW5jdGlvbiAoc291cmNlRGlycywgbW9kdWxlc1RvQWRkLCBzb3VyY2VGaWxlcykgewoJCXJldHVybiBBMygKCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCUYyKAoJCQkJZnVuY3Rpb24gKG1vZHVsZVRvQWRkLCBwcmV2RmlsZXMpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kY29yZSRSZXN1bHQkd2l0aERlZmF1bHQsCgkJCQkJCXByZXZGaWxlcywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJCWZ1bmN0aW9uIChtb2R1bGVUb0FkZFN5bnRheCkgewoJCQkJCQkJCXZhciBmaWxlUGF0aCA9IEEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRmaWxlUGF0aEZyb21FbG1Nb2R1bGVOYW1lLAoJCQkJCQkJCQlzb3VyY2VEaXJzLAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGUkbW9kdWxlTmFtZSgKCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUobW9kdWxlVG9BZGRTeW50YXgubW9kdWxlRGVmaW5pdGlvbikpKTsKCQkJCQkJCQlyZXR1cm4gQTMoCgkJCQkJCQkJCSRlbG0kY29yZSREaWN0JGluc2VydCwKCQkJCQkJCQkJZmlsZVBhdGgsCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGZpbGVDb250ZW50RnJvbVN0cmluZyhtb2R1bGVUb0FkZCksCgkJCQkJCQkJCXByZXZGaWxlcyk7CgkJCQkJCQl9LAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VFbG1Nb2R1bGVUZXh0KG1vZHVsZVRvQWRkKSkpOwoJCQkJfSksCgkJCXNvdXJjZUZpbGVzLAoJCQltb2R1bGVzVG9BZGQpOwoJfSk7CnZhciAkZWxtJGNvcmUkU3RyaW5nJGRyb3BSaWdodCA9IEYyKAoJZnVuY3Rpb24gKG4sIHN0cmluZykgewoJCXJldHVybiAobiA8IDEpID8gc3RyaW5nIDogQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgMCwgLW4sIHN0cmluZyk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwTGlzdEV4dHJhJGlzUHJlZml4T2YgPSBGMigKCWZ1bmN0aW9uIChwcmVmaXgsIGxpc3QpIHsKCQlpc1ByZWZpeE9mOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBfdjAgPSBfVXRpbHNfVHVwbGUyKHByZWZpeCwgbGlzdCk7CgkJCWlmICghX3YwLmEuYikgewoJCQkJcmV0dXJuIHRydWU7CgkJCX0gZWxzZSB7CgkJCQlpZiAoIV92MC5iLmIpIHsKCQkJCQl2YXIgX3YxID0gX3YwLmE7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YyID0gX3YwLmE7CgkJCQkJdmFyIHAgPSBfdjIuYTsKCQkJCQl2YXIgcHMgPSBfdjIuYjsKCQkJCQl2YXIgX3YzID0gX3YwLmI7CgkJCQkJdmFyIHggPSBfdjMuYTsKCQkJCQl2YXIgeHMgPSBfdjMuYjsKCQkJCQlpZiAoX1V0aWxzX2VxKHAsIHgpKSB7CgkJCQkJCXZhciAkdGVtcCRwcmVmaXggPSBwcywKCQkJCQkJCSR0ZW1wJGxpc3QgPSB4czsKCQkJCQkJcHJlZml4ID0gJHRlbXAkcHJlZml4OwoJCQkJCQlsaXN0ID0gJHRlbXAkbGlzdDsKCQkJCQkJY29udGludWUgaXNQcmVmaXhPZjsKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tbW9uJGxpc3RNYXBGaW5kID0gRjIoCglmdW5jdGlvbiAobWFwSXRlbSwgbGlzdCkgewoJCWxpc3RNYXBGaW5kOgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmICghbGlzdC5iKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCX0gZWxzZSB7CgkJCQl2YXIgaXRlbSA9IGxpc3QuYTsKCQkJCXZhciByZXN0ID0gbGlzdC5iOwoJCQkJdmFyIF92MSA9IG1hcEl0ZW0oaXRlbSk7CgkJCQlpZiAoX3YxLiQgPT09ICdKdXN0JykgewoJCQkJCXZhciBpdGVtT2sgPSBfdjEuYTsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoaXRlbU9rKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyICR0ZW1wJG1hcEl0ZW0gPSBtYXBJdGVtLAoJCQkJCQkkdGVtcCRsaXN0ID0gcmVzdDsKCQkJCQltYXBJdGVtID0gJHRlbXAkbWFwSXRlbTsKCQkJCQlsaXN0ID0gJHRlbXAkbGlzdDsKCQkJCQljb250aW51ZSBsaXN0TWFwRmluZDsKCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZWxtTW9kdWxlTmFtZUZyb21GaWxlUGF0aCA9IEYyKAoJZnVuY3Rpb24gKHNvdXJjZURpcnMsIGZpbGVQYXRoKSB7CgkJdmFyIF92MCA9ICRlbG0kY29yZSRMaXN0JHJldmVyc2UoZmlsZVBhdGgpOwoJCWlmICghX3YwLmIpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCX0gZWxzZSB7CgkJCXZhciBmaWxlTmFtZSA9IF92MC5hOwoJCQl2YXIgZGlyZWN0b3J5TmFtZVJldmVyc2VkID0gX3YwLmI7CgkJCWlmICghQTIoCgkJCQkkZWxtJGNvcmUkU3RyaW5nJGVuZHNXaXRoLAoJCQkJJy5lbG0nLAoJCQkJJGVsbSRjb3JlJFN0cmluZyR0b0xvd2VyKGZpbGVOYW1lKSkpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJfSBlbHNlIHsKCQkJCXZhciBzb3VyY2VEaXJlY3RvcnlQYXRocyA9IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHNvdXJjZURpcnMubWFpblNvdXJjZURpcmVjdG9yeVBhdGgsIHNvdXJjZURpcnMuc2Vjb25kYXJ5U291cmNlRGlyZWN0b3JpZXMpOwoJCQkJdmFyIG1vZHVsZU5hbWVMYXN0SXRlbSA9IEEyKCRlbG0kY29yZSRTdHJpbmckZHJvcFJpZ2h0LCA0LCBmaWxlTmFtZSk7CgkJCQl2YXIgZGlyZWN0b3J5TmFtZSA9ICRlbG0kY29yZSRMaXN0JHJldmVyc2UoZGlyZWN0b3J5TmFtZVJldmVyc2VkKTsKCQkJCXJldHVybiBBMigKCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tbW9uJGxpc3RNYXBGaW5kLAoJCQkJCWZ1bmN0aW9uIChzb3VyY2VEaXIpIHsKCQkJCQkJcmV0dXJuIEEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwTGlzdEV4dHJhJGlzUHJlZml4T2YsIHNvdXJjZURpciwgZGlyZWN0b3J5TmFtZSkgPyAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCV9VdGlsc19hcCgKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkZHJvcCwKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkbGVuZ3RoKHNvdXJjZURpciksCgkJCQkJCQkJCWRpcmVjdG9yeU5hbWUpLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJW21vZHVsZU5hbWVMYXN0SXRlbV0pKSkgOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQl9LAoJCQkJCXNvdXJjZURpcmVjdG9yeVBhdGhzKTsKCQkJfQoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHBMaXN0RXh0cmEkaXNTdWZmaXhPZiA9IEYyKAoJZnVuY3Rpb24gKHN1ZmZpeCwgeHMpIHsKCQlyZXR1cm4gQTIoCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwTGlzdEV4dHJhJGlzUHJlZml4T2YsCgkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2Uoc3VmZml4KSwKCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZSh4cykpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRsaXN0Rm9sZGxUb0FnZ3JlZ2F0ZVJlc3VsdCA9IGZ1bmN0aW9uIChnZXRFbGVtZW50UmVzdWx0KSB7CglyZXR1cm4gJGVsbSRjb3JlJExpc3QkZm9sZGwoCgkJRjIoCgkJCWZ1bmN0aW9uIChlbGVtZW50LCBwcmV2aW91c0FnZ3JlZ2F0ZVJlc3VsdCkgewoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRSZXN1bHQkYW5kVGhlbiwKCQkJCQlmdW5jdGlvbiAocHJldmlvdXNBZ2dyZWdhdGUpIHsKCQkJCQkJcmV0dXJuIEEyKGdldEVsZW1lbnRSZXN1bHQsIGVsZW1lbnQsIHByZXZpb3VzQWdncmVnYXRlKTsKCQkJCQl9LAoJCQkJCXByZXZpb3VzQWdncmVnYXRlUmVzdWx0KTsKCQkJfSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkc3RyaW5nRnJvbUZpbGVDb250ZW50ID0gZnVuY3Rpb24gKGJ5dGVzKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkZGVjb2RlLAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHN0cmluZygKCQkJJGVsbSRieXRlcyRCeXRlcyR3aWR0aChieXRlcykpLAoJCWJ5dGVzKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGFwcGx5TG93ZXJpbmdVbmRlclByZWZpeCA9IEY1KAoJZnVuY3Rpb24gKGxvd2VyTW9kdWxlLCBfdjAsIGVyckZyb21TdHJpbmcsIHNvdXJjZURpcnMsIHNvdXJjZUZpbGVzKSB7CgkJdmFyIHByZWZpeCA9IF92MC5wcmVmaXg7CgkJdmFyIG1vZHVsZU5hbWVFbmQgPSBfdjAubW9kdWxlTmFtZUVuZDsKCQlyZXR1cm4gQTMoCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxpc3RGb2xkbFRvQWdncmVnYXRlUmVzdWx0LAoJCQlGMigKCQkJCWZ1bmN0aW9uIChmaWxlUGF0aCwgaW50ZXJtZWRpYXRlRmlsZXMpIHsKCQkJCQl2YXIgX3YxID0gQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZWxtTW9kdWxlTmFtZUZyb21GaWxlUGF0aCwgc291cmNlRGlycywgZmlsZVBhdGgpOwoJCQkJCWlmIChfdjEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKGludGVybWVkaWF0ZUZpbGVzKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgbW9kdWxlTmFtZSA9IF92MS5hOwoJCQkJCQlpZiAoIUEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwTGlzdEV4dHJhJGlzUHJlZml4T2YsIHByZWZpeCwgbW9kdWxlTmFtZSkpIHsKCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKGludGVybWVkaWF0ZUZpbGVzKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWlmICghQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHBMaXN0RXh0cmEkaXNTdWZmaXhPZiwgbW9kdWxlTmFtZUVuZCwgbW9kdWxlTmFtZSkpIHsKCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPayhpbnRlcm1lZGlhdGVGaWxlcyk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBfdjIgPSBBMigkZWxtJGNvcmUkRGljdCRnZXQsIGZpbGVQYXRoLCBpbnRlcm1lZGlhdGVGaWxlcyk7CgkJCQkJCQkJaWYgKF92Mi4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soaW50ZXJtZWRpYXRlRmlsZXMpOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBlbG1Nb2R1bGVGaWxlID0gX3YyLmE7CgkJCQkJCQkJCXZhciBfdjMgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRzdHJpbmdGcm9tRmlsZUNvbnRlbnQoZWxtTW9kdWxlRmlsZSk7CgkJCQkJCQkJCWlmIChfdjMuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCWVyckZyb21TdHJpbmcsCgkJCQkJCQkJCQkJCXtmaWxlUGF0aDogZmlsZVBhdGh9LAoJCQkJCQkJCQkJCQknRmFpbGVkIHRvIGRlY29kZSBmaWxlIGNvbnRlbnQgYXMgc3RyaW5nJykpOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJdmFyIG1vZHVsZVRleHQgPSBfdjMuYTsKCQkJCQkJCQkJCXZhciBfdjQgPSBsb3dlck1vZHVsZSgKCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUzKGludGVybWVkaWF0ZUZpbGVzLCBmaWxlUGF0aCwgbW9kdWxlVGV4dCkpOwoJCQkJCQkJCQkJaWYgKF92NC4kID09PSAnRXJyJykgewoJCQkJCQkJCQkJCXZhciBlcnIgPSBfdjQuYTsKCQkJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoZXJyKTsKCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJdmFyIF92NSA9IF92NC5hOwoJCQkJCQkJCQkJCXZhciBuZXdBcHBDb2RlID0gX3Y1LmE7CgkJCQkJCQkJCQkJdmFyIG5ld01vZHVsZVRleHQgPSBfdjUuYjsKCQkJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkkZWxtJGNvcmUkRGljdCRpbnNlcnQsCgkJCQkJCQkJCQkJCQlmaWxlUGF0aCwKCQkJCQkJCQkJCQkJCSRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJGVuY29kZSgKCQkJCQkJCQkJCQkJCQkkZWxtJGJ5dGVzJEJ5dGVzJEVuY29kZSRzdHJpbmcobmV3TW9kdWxlVGV4dCkpLAoJCQkJCQkJCQkJCQkJbmV3QXBwQ29kZSkpOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfSksCgkJCSRlbG0kY29yZSRSZXN1bHQkT2soc291cmNlRmlsZXMpLAoJCQkkZWxtJGNvcmUkRGljdCRrZXlzKHNvdXJjZUZpbGVzKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGFwcGx5TG93ZXJpbmdVbmRlclByZWZpeGVzID0gRjUoCglmdW5jdGlvbiAobG93ZXJNb2R1bGUsIF92MCwgZXJyRnJvbVN0cmluZywgc291cmNlRGlycywgc291cmNlRmlsZXMpIHsKCQl2YXIgcHJlZml4ZXMgPSBfdjAucHJlZml4ZXM7CgkJdmFyIG1vZHVsZU5hbWVFbmQgPSBfdjAubW9kdWxlTmFtZUVuZDsKCQlyZXR1cm4gQTMoCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxpc3RGb2xkbFRvQWdncmVnYXRlUmVzdWx0LAoJCQlmdW5jdGlvbiAocHJlZml4KSB7CgkJCQlyZXR1cm4gQTQoCgkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkYXBwbHlMb3dlcmluZ1VuZGVyUHJlZml4LAoJCQkJCWxvd2VyTW9kdWxlLAoJCQkJCXttb2R1bGVOYW1lRW5kOiBtb2R1bGVOYW1lRW5kLCBwcmVmaXg6IHByZWZpeH0sCgkJCQkJZXJyRnJvbVN0cmluZywKCQkJCQlzb3VyY2VEaXJzKTsKCQkJfSwKCQkJJGVsbSRjb3JlJFJlc3VsdCRPayhzb3VyY2VGaWxlcyksCgkJCXByZWZpeGVzKTsKCX0pOwp2YXIgJGVsbSRwYXJzZXIkUGFyc2VyJGRlYWRFbmRzVG9TdHJpbmcgPSBmdW5jdGlvbiAoZGVhZEVuZHMpIHsKCXJldHVybiAnVE9ETyBkZWFkRW5kc1RvU3RyaW5nJzsKfTsKdmFyICRlbG0kY29yZSREaWN0JGZpbHRlciA9IEYyKAoJZnVuY3Rpb24gKGlzR29vZCwgZGljdCkgewoJCXJldHVybiBBMygKCQkJJGVsbSRjb3JlJERpY3QkZm9sZGwsCgkJCUYzKAoJCQkJZnVuY3Rpb24gKGssIHYsIGQpIHsKCQkJCQlyZXR1cm4gQTIoaXNHb29kLCBrLCB2KSA/IEEzKCRlbG0kY29yZSREaWN0JGluc2VydCwgaywgdiwgZCkgOiBkOwoJCQkJfSksCgkJCSRlbG0kY29yZSREaWN0JGVtcHR5LAoJCQlkaWN0KTsKCX0pOwp2YXIgJGVsbSRjb3JlJERpY3QkbWFwID0gRjIoCglmdW5jdGlvbiAoZnVuYywgZGljdCkgewoJCWlmIChkaWN0LiQgPT09ICdSQkVtcHR5X2VsbV9idWlsdGluJykgewoJCQlyZXR1cm4gJGVsbSRjb3JlJERpY3QkUkJFbXB0eV9lbG1fYnVpbHRpbjsKCQl9IGVsc2UgewoJCQl2YXIgY29sb3IgPSBkaWN0LmE7CgkJCXZhciBrZXkgPSBkaWN0LmI7CgkJCXZhciB2YWx1ZSA9IGRpY3QuYzsKCQkJdmFyIGxlZnQgPSBkaWN0LmQ7CgkJCXZhciByaWdodCA9IGRpY3QuZTsKCQkJcmV0dXJuIEE1KAoJCQkJJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLAoJCQkJY29sb3IsCgkJCQlrZXksCgkJCQlBMihmdW5jLCBrZXksIHZhbHVlKSwKCQkJCUEyKCRlbG0kY29yZSREaWN0JG1hcCwgZnVuYywgbGVmdCksCgkJCQlBMigkZWxtJGNvcmUkRGljdCRtYXAsIGZ1bmMsIHJpZ2h0KSk7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRlbG1Nb2R1bGVzRGljdEZyb21BcHBGaWxlcyA9IEEyKAoJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCSRlbG0kY29yZSREaWN0JGZpbHRlcigKCQlBMigKCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZSwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJJGVsbSRjb3JlJExpc3QkaGVhZCwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCgKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyR0b0xvd2VyLAoJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRlbmRzV2l0aCgnLmVsbScpKSksCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdChmYWxzZSksCgkJCQkJCSRlbG0kY29yZSRCYXNpY3MkYWx3YXlzKSkpKSksCgkkZWxtJGNvcmUkRGljdCRtYXAoCgkJZnVuY3Rpb24gKF92MCkgewoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkc3RyaW5nRnJvbUZpbGVDb250ZW50LAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwKCRlbG0kY29yZSRSZXN1bHQkT2spLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQoCgkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JEVycignRmFpbGVkIHRvIGRlY29kZSBmaWxlIGNvbnRlbnQgYXMgc3RyaW5nJykpLAoJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JGFuZFRoZW4oCgkJCQkJCQlmdW5jdGlvbiAoZmlsZUNvbnRlbnRBc1N0cmluZykgewoJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAsCgkJCQkJCQkJCWZ1bmN0aW9uIChwYXJzZWRTeW50YXgpIHsKCQkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQkJZmlsZVRleHQ6IGZpbGVDb250ZW50QXNTdHJpbmcsCgkJCQkJCQkJCQkJbW9kdWxlTmFtZTogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlJG1vZHVsZU5hbWUoCgkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUocGFyc2VkU3ludGF4Lm1vZHVsZURlZmluaXRpb24pKSwKCQkJCQkJCQkJCQlwYXJzZWRTeW50YXg6IHBhcnNlZFN5bnRheAoJCQkJCQkJCQkJfTsKCQkJCQkJCQkJfSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCQkJCQkJJGVsbSRwYXJzZXIkUGFyc2VyJGRlYWRFbmRzVG9TdHJpbmcsCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUVsbU1vZHVsZVRleHQoZmlsZUNvbnRlbnRBc1N0cmluZykpKTsKCQkJCQkJCX0pKSkpOwoJCX0pKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFJhbmdlJGVtcHR5ID0gewoJZW5kOiB7Y29sdW1uOiAwLCByb3c6IDB9LAoJc3RhcnQ6IHtjb2x1bW46IDAsIHJvdzogMH0KfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFJhbmdlJGVtcHR5UmFuZ2UgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRSYW5nZSRlbXB0eTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEVsbUpzb24gPSBmdW5jdGlvbiAoc291cmNlRGlyZWN0b3JpZXMpIHsKCXJldHVybiB7c291cmNlRGlyZWN0b3JpZXM6IHNvdXJjZURpcmVjdG9yaWVzfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGRlY29kZUVsbUpzb24gPSBBMigKCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRFbG1Kc29uLAoJQTIoCgkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCSdzb3VyY2UtZGlyZWN0b3JpZXMnLAoJCSRlbG0kanNvbiRKc29uJERlY29kZSRsaXN0KCRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpKSk7CnZhciAkZWxtX2NvbW11bml0eSRsaXN0X2V4dHJhJExpc3QkRXh0cmEkZHJvcFdoaWxlID0gRjIoCglmdW5jdGlvbiAocHJlZGljYXRlLCBsaXN0KSB7CgkJZHJvcFdoaWxlOgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmICghbGlzdC5iKSB7CgkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQl9IGVsc2UgewoJCQkJdmFyIHggPSBsaXN0LmE7CgkJCQl2YXIgeHMgPSBsaXN0LmI7CgkJCQlpZiAocHJlZGljYXRlKHgpKSB7CgkJCQkJdmFyICR0ZW1wJHByZWRpY2F0ZSA9IHByZWRpY2F0ZSwKCQkJCQkJJHRlbXAkbGlzdCA9IHhzOwoJCQkJCXByZWRpY2F0ZSA9ICR0ZW1wJHByZWRpY2F0ZTsKCQkJCQlsaXN0ID0gJHRlbXAkbGlzdDsKCQkJCQljb250aW51ZSBkcm9wV2hpbGU7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiBsaXN0OwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkU3RyaW5nJHJlcGxhY2UgPSBGMygKCWZ1bmN0aW9uIChiZWZvcmUsIGFmdGVyLCBzdHJpbmcpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJYWZ0ZXIsCgkJCUEyKCRlbG0kY29yZSRTdHJpbmckc3BsaXQsIGJlZm9yZSwgc3RyaW5nKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtSnNvblNvdXJjZURpcmVjdG9yeVBhdGggPSBmdW5jdGlvbiAocGF0aEluSnNvbikgewoJcGFyc2VFbG1Kc29uU291cmNlRGlyZWN0b3J5UGF0aDoKCXdoaWxlICh0cnVlKSB7CgkJaWYgKEEyKCRlbG0kY29yZSRTdHJpbmckY29udGFpbnMsICdcXCcsIHBhdGhJbkpzb24pKSB7CgkJCXZhciAkdGVtcCRwYXRoSW5Kc29uID0gQTMoJGVsbSRjb3JlJFN0cmluZyRyZXBsYWNlLCAnXFwnLCAnLycsIHBhdGhJbkpzb24pOwoJCQlwYXRoSW5Kc29uID0gJHRlbXAkcGF0aEluSnNvbjsKCQkJY29udGludWUgcGFyc2VFbG1Kc29uU291cmNlRGlyZWN0b3J5UGF0aDsKCQl9IGVsc2UgewoJCQl2YXIgcGF0aEl0ZW1zID0gQTIoCgkJCQkkZWxtX2NvbW11bml0eSRsaXN0X2V4dHJhJExpc3QkRXh0cmEkZHJvcFdoaWxlLAoJCQkJJGVsbSRjb3JlJFN0cmluZyRpc0VtcHR5LAoJCQkJQTIoJGVsbSRjb3JlJFN0cmluZyRzcGxpdCwgJy8nLCBwYXRoSW5Kc29uKSk7CgkJCXJldHVybiBBMygKCQkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkJRjIoCgkJCQkJZnVuY3Rpb24gKG5leHRTZWdtZW50LCBfdjApIHsKCQkJCQkJdmFyIHBhcmVudExldmVsID0gX3YwLnBhcmVudExldmVsOwoJCQkJCQl2YXIgc3ViZGlyZWN0b3JpZXMgPSBfdjAuc3ViZGlyZWN0b3JpZXM7CgkJCQkJCXN3aXRjaCAobmV4dFNlZ21lbnQpIHsKCQkJCQkJCWNhc2UgJy4uJzoKCQkJCQkJCQlyZXR1cm4gKDAgPCAkZWxtJGNvcmUkTGlzdCRsZW5ndGgoc3ViZGlyZWN0b3JpZXMpKSA/IHsKCQkJCQkJCQkJcGFyZW50TGV2ZWw6IHBhcmVudExldmVsLAoJCQkJCQkJCQlzdWJkaXJlY3RvcmllczogQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCR0YWtlLAoJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkbGVuZ3RoKHN1YmRpcmVjdG9yaWVzKSAtIDEsCgkJCQkJCQkJCQlzdWJkaXJlY3RvcmllcykKCQkJCQkJCQl9IDoge3BhcmVudExldmVsOiBwYXJlbnRMZXZlbCArIDEsIHN1YmRpcmVjdG9yaWVzOiBzdWJkaXJlY3Rvcmllc307CgkJCQkJCQljYXNlICcuJzoKCQkJCQkJCQlyZXR1cm4ge3BhcmVudExldmVsOiBwYXJlbnRMZXZlbCwgc3ViZGlyZWN0b3JpZXM6IHN1YmRpcmVjdG9yaWVzfTsKCQkJCQkJCWRlZmF1bHQ6CgkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJcGFyZW50TGV2ZWw6IHBhcmVudExldmVsLAoJCQkJCQkJCQlzdWJkaXJlY3RvcmllczogX1V0aWxzX2FwKAoJCQkJCQkJCQkJc3ViZGlyZWN0b3JpZXMsCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJW25leHRTZWdtZW50XSkpCgkJCQkJCQkJfTsKCQkJCQkJfQoJCQkJCX0pLAoJCQkJe3BhcmVudExldmVsOiAwLCBzdWJkaXJlY3RvcmllczogX0xpc3RfTmlsfSwKCQkJCXBhdGhJdGVtcyk7CgkJfQoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHBMaXN0RXh0cmEkcmV2ZXJzZUFwcGVuZCA9IEYyKAoJZnVuY3Rpb24gKGxpc3QxLCBsaXN0MikgewoJCXJldHVybiBBMygkZWxtJGNvcmUkTGlzdCRmb2xkbCwgJGVsbSRjb3JlJExpc3QkY29ucywgbGlzdDIsIGxpc3QxKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHBMaXN0RXh0cmEkcmVtb3ZlSGVscCA9IEY0KAoJZnVuY3Rpb24gKGxpc3QsIHgsIHhzLCBwcmV2aW91c0VsZW1lbnRzKSB7CgkJcmVtb3ZlSGVscDoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIXhzLmIpIHsKCQkJCXJldHVybiBsaXN0OwoJCQl9IGVsc2UgewoJCQkJdmFyIHkgPSB4cy5hOwoJCQkJdmFyIHlzID0geHMuYjsKCQkJCWlmIChfVXRpbHNfZXEoeCwgeSkpIHsKCQkJCQlyZXR1cm4gQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHBMaXN0RXh0cmEkcmV2ZXJzZUFwcGVuZCwgcHJldmlvdXNFbGVtZW50cywgeXMpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgJHRlbXAkbGlzdCA9IGxpc3QsCgkJCQkJCSR0ZW1wJHggPSB4LAoJCQkJCQkkdGVtcCR4cyA9IHlzLAoJCQkJCQkkdGVtcCRwcmV2aW91c0VsZW1lbnRzID0gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgeSwgcHJldmlvdXNFbGVtZW50cyk7CgkJCQkJbGlzdCA9ICR0ZW1wJGxpc3Q7CgkJCQkJeCA9ICR0ZW1wJHg7CgkJCQkJeHMgPSAkdGVtcCR4czsKCQkJCQlwcmV2aW91c0VsZW1lbnRzID0gJHRlbXAkcHJldmlvdXNFbGVtZW50czsKCQkJCQljb250aW51ZSByZW1vdmVIZWxwOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcExpc3RFeHRyYSRyZW1vdmUgPSBGMigKCWZ1bmN0aW9uICh4LCB4cykgewoJCXJldHVybiBBNCgkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcExpc3RFeHRyYSRyZW1vdmVIZWxwLCB4cywgeCwgeHMsIF9MaXN0X05pbCk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGZpbmRTb3VyY2VEaXJlY3RvcmllcyA9IGZ1bmN0aW9uIChfYXJndW1lbnRzKSB7Cgl2YXIgc2VhcmNoUmVjdXJzaXZlID0gZnVuY3Rpb24gKGN1cnJlbnREaXJlY3RvcnkpIHsKCQlzZWFyY2hSZWN1cnNpdmU6CgkJd2hpbGUgKHRydWUpIHsKCQkJdmFyIF92MCA9IEEyKAoJCQkJJGVsbSRjb3JlJERpY3QkZ2V0LAoJCQkJX1V0aWxzX2FwKAoJCQkJCWN1cnJlbnREaXJlY3RvcnksCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbJ2VsbS5qc29uJ10pKSwKCQkJCV9hcmd1bWVudHMuc291cmNlRmlsZXMpOwoJCQlpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCQkJaWYgKF9VdGlsc19lcShjdXJyZW50RGlyZWN0b3J5LCBfTGlzdF9OaWwpKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKCdEaWQgbm90IGZpbmQgZWxtLmpzb24nKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyICR0ZW1wJGN1cnJlbnREaXJlY3RvcnkgPSBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkdGFrZSwKCQkJCQkJJGVsbSRjb3JlJExpc3QkbGVuZ3RoKGN1cnJlbnREaXJlY3RvcnkpIC0gMSwKCQkJCQkJY3VycmVudERpcmVjdG9yeSk7CgkJCQkJY3VycmVudERpcmVjdG9yeSA9ICR0ZW1wJGN1cnJlbnREaXJlY3Rvcnk7CgkJCQkJY29udGludWUgc2VhcmNoUmVjdXJzaXZlOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJdmFyIGVsbUpzb25GaWxlID0gX3YwLmE7CgkJCQl2YXIgX3YxID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkc3RyaW5nRnJvbUZpbGVDb250ZW50KGVsbUpzb25GaWxlKTsKCQkJCWlmIChfdjEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKCdGYWlsZWQgdG8gZGVjb2RlIGZpbGUgY29udGVudCBhcyBzdHJpbmcnKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGVsbUpzb25TdHJpbmcgPSBfdjEuYTsKCQkJCQl2YXIgX3YyID0gQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRkZWNvZGVTdHJpbmcsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGRlY29kZUVsbUpzb24sCgkJCQkJCSRlbG0kY29yZSRTdHJpbmckdHJpbShlbG1Kc29uU3RyaW5nKSk7CgkJCQkJaWYgKF92Mi4kID09PSAnRXJyJykgewoJCQkJCQl2YXIgZXJyID0gX3YyLmE7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCQkJCSdGYWlsZWQgdG8gZGVjb2RlIGVsbS5qc29uOiAnICsgJGVsbSRqc29uJEpzb24kRGVjb2RlJGVycm9yVG9TdHJpbmcoZXJyKSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGVsbUpzb24gPSBfdjIuYTsKCQkJCQkJdmFyIHBhcnNlZFNvdXJjZURpcnMgPSBBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtSnNvblNvdXJjZURpcmVjdG9yeVBhdGgsIGVsbUpzb24uc291cmNlRGlyZWN0b3JpZXMpOwoJCQkJCQl2YXIgY29tcGlsYXRpb25Sb290RmlsZVBhdGhGcm9tRWxtSnNvbiA9IEEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkZHJvcCwKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGxlbmd0aChjdXJyZW50RGlyZWN0b3J5KSwKCQkJCQkJCV9hcmd1bWVudHMuY29tcGlsYXRpb25Sb290RmlsZVBhdGgpOwoJCQkJCQl2YXIgX3YzID0gJGVsbSRjb3JlJExpc3QkaGVhZCgKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlciwKCQkJCQkJCQlmdW5jdGlvbiAoYykgewoJCQkJCQkJCQlyZXR1cm4gKCFjLnBhcmVudExldmVsKSAmJiBBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcExpc3RFeHRyYSRpc1ByZWZpeE9mLCBjLnN1YmRpcmVjdG9yaWVzLCBjb21waWxhdGlvblJvb3RGaWxlUGF0aEZyb21FbG1Kc29uKTsKCQkJCQkJCQl9LAoJCQkJCQkJCXBhcnNlZFNvdXJjZURpcnMpKTsKCQkJCQkJaWYgKF92My4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCQknICcsCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQknRGlkIG5vdCBmaW5kIGEgbWF0Y2hpbmcgZGlyZWN0b3J5IGluIHNvdXJjZS1kaXJlY3RvcmllcycsCgkJCQkJCQkJCQkJJyhjdXJyZW50RGlyZWN0b3J5OiAnICsgKEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy8nLCBjdXJyZW50RGlyZWN0b3J5KSArICcpJykKCQkJCQkJCQkJCV0pKSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgbWF0Y2hpbmdTb3VyY2VEaXJlY3RvcnkgPSBfdjMuYTsKCQkJCQkJCXZhciBzZWNvbmRhcnlTb3VyY2VEaXJlY3RvcmllcyA9IEEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCQlmdW5jdGlvbiAocGFyc2VkRGlyKSB7CgkJCQkJCQkJCXJldHVybiBfVXRpbHNfYXAoCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCR0YWtlLAoJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGxlbmd0aChjdXJyZW50RGlyZWN0b3J5KSAtIHBhcnNlZERpci5wYXJlbnRMZXZlbCwKCQkJCQkJCQkJCQljdXJyZW50RGlyZWN0b3J5KSwKCQkJCQkJCQkJCXBhcnNlZERpci5zdWJkaXJlY3Rvcmllcyk7CgkJCQkJCQkJfSwKCQkJCQkJCQlBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcExpc3RFeHRyYSRyZW1vdmUsIG1hdGNoaW5nU291cmNlRGlyZWN0b3J5LCBwYXJzZWRTb3VyY2VEaXJzKSk7CgkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkJCQl7CgkJCQkJCQkJCWVsbUpzb25EaXJlY3RvcnlQYXRoOiBjdXJyZW50RGlyZWN0b3J5LAoJCQkJCQkJCQltYWluU291cmNlRGlyZWN0b3J5UGF0aDogX1V0aWxzX2FwKGN1cnJlbnREaXJlY3RvcnksIG1hdGNoaW5nU291cmNlRGlyZWN0b3J5LnN1YmRpcmVjdG9yaWVzKSwKCQkJCQkJCQkJc2Vjb25kYXJ5U291cmNlRGlyZWN0b3JpZXM6IHNlY29uZGFyeVNvdXJjZURpcmVjdG9yaWVzCgkJCQkJCQkJfSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9OwoJcmV0dXJuIHNlYXJjaFJlY3Vyc2l2ZShfYXJndW1lbnRzLmNvbXBpbGF0aW9uUm9vdEZpbGVQYXRoKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxvY2F0ZWRJblNvdXJjZUZpbGVzRnJvbUp1c3RGaWxlUGF0aCA9IEYyKAoJZnVuY3Rpb24gKF92MCwgZXJyKSB7CgkJdmFyIGZpbGVQYXRoID0gX3YwLmZpbGVQYXRoOwoJCXJldHVybiBBMigKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkTG9jYXRlZEluU291cmNlRmlsZXMsCgkJCXtmaWxlUGF0aDogZmlsZVBhdGgsIGxvY2F0aW9uSW5Nb2R1bGVUZXh0OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRSYW5nZSRlbXB0eVJhbmdlfSwKCQkJZXJyKTsKCX0pOwp2YXIgJGVsbSRjb3JlJERpY3Qkc2l6ZUhlbHAgPSBGMigKCWZ1bmN0aW9uIChuLCBkaWN0KSB7CgkJc2l6ZUhlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKGRpY3QuJCA9PT0gJ1JCRW1wdHlfZWxtX2J1aWx0aW4nKSB7CgkJCQlyZXR1cm4gbjsKCQkJfSBlbHNlIHsKCQkJCXZhciBsZWZ0ID0gZGljdC5kOwoJCQkJdmFyIHJpZ2h0ID0gZGljdC5lOwoJCQkJdmFyICR0ZW1wJG4gPSBBMigkZWxtJGNvcmUkRGljdCRzaXplSGVscCwgbiArIDEsIHJpZ2h0KSwKCQkJCQkkdGVtcCRkaWN0ID0gbGVmdDsKCQkJCW4gPSAkdGVtcCRuOwoJCQkJZGljdCA9ICR0ZW1wJGRpY3Q7CgkJCQljb250aW51ZSBzaXplSGVscDsKCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJERpY3Qkc2l6ZSA9IGZ1bmN0aW9uIChkaWN0KSB7CglyZXR1cm4gQTIoJGVsbSRjb3JlJERpY3Qkc2l6ZUhlbHAsIDAsIGRpY3QpOwp9Owp2YXIgJGVsbSRjb3JlJFNldCRzaXplID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIGRpY3QgPSBfdjAuYTsKCXJldHVybiAkZWxtJGNvcmUkRGljdCRzaXplKGRpY3QpOwp9Owp2YXIgJGVsbSRjb3JlJERpY3QkdW5pb24gPSBGMigKCWZ1bmN0aW9uICh0MSwgdDIpIHsKCQlyZXR1cm4gQTMoJGVsbSRjb3JlJERpY3QkZm9sZGwsICRlbG0kY29yZSREaWN0JGluc2VydCwgdDIsIHQxKTsKCX0pOwp2YXIgJGVsbSRjb3JlJFNldCR1bmlvbiA9IEYyKAoJZnVuY3Rpb24gKF92MCwgX3YxKSB7CgkJdmFyIGRpY3QxID0gX3YwLmE7CgkJdmFyIGRpY3QyID0gX3YxLmE7CgkJcmV0dXJuICRlbG0kY29yZSRTZXQkU2V0X2VsbV9idWlsdGluKAoJCQlBMigkZWxtJGNvcmUkRGljdCR1bmlvbiwgZGljdDEsIGRpY3QyKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxvd2VyZWRGb3JDb21waWxhdGlvblJvb3QgPSBGMygKCWZ1bmN0aW9uIChlbnRyeVBvaW50Q2xhc3NlcywgY29uZmlnLCBzb3VyY2VGaWxlcykgewoJCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkRGljdCRnZXQsIGNvbmZpZy5jb21waWxhdGlvblJvb3RGaWxlUGF0aCwgY29uZmlnLm9yaWdpbmFsU291cmNlTW9kdWxlcyk7CgkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJExvY2F0ZWRJblNvdXJjZUZpbGVzLAoJCQkJCQl7ZmlsZVBhdGg6IGNvbmZpZy5jb21waWxhdGlvblJvb3RGaWxlUGF0aCwgbG9jYXRpb25Jbk1vZHVsZVRleHQ6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFJhbmdlJGVtcHR5UmFuZ2V9LAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRPdGhlckNvbXBpbGF0aW9uRXJyb3IoCgkJCQkJCQknRGlkIG5vdCBmaW5kIGZpbGUgJyArIEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy8nLCBjb25maWcuY29tcGlsYXRpb25Sb290RmlsZVBhdGgpKSkKCQkJCQldKSk7CgkJfSBlbHNlIHsKCQkJdmFyIGNvbXBpbGF0aW9uUm9vdE1vZHVsZSA9IF92MC5hOwoJCQl2YXIgZW50cnlQb2ludE1hdGNoZXNSZXN1bHRzID0gQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkkZWxtJGNvcmUkQmFzaWNzJGFwUihjb21waWxhdGlvblJvb3RNb2R1bGUpLAoJCQkJZW50cnlQb2ludENsYXNzZXMpOwoJCQl2YXIgX3YxID0gJGVsbSRjb3JlJExpc3QkaGVhZCgKCQkJCUEyKCRlbG0kY29yZSRMaXN0JGZpbHRlck1hcCwgJGVsbSRjb3JlJFJlc3VsdCR0b01heWJlLCBlbnRyeVBvaW50TWF0Y2hlc1Jlc3VsdHMpKTsKCQkJaWYgKF92MS4kID09PSAnTm90aGluZycpIHsKCQkJCXZhciBhbGxTdXBwb3J0ZWREZWNsYXJhdGlvbk5hbWVzID0gQTMoCgkJCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCQkJZnVuY3Rpb24gKGVudHJ5UG9pbnRNYXRjaGVzUmVzdWx0KSB7CgkJCQkJCWlmIChlbnRyeVBvaW50TWF0Y2hlc1Jlc3VsdC4kID09PSAnRXJyJykgewoJCQkJCQkJdmFyIHN1cHBvcnRlZERlY2xhcmF0aW9uTmFtZXMgPSBlbnRyeVBvaW50TWF0Y2hlc1Jlc3VsdC5hLnN1cHBvcnRlZERlY2xhcmF0aW9uTmFtZXM7CgkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFNldCR1bmlvbihzdXBwb3J0ZWREZWNsYXJhdGlvbk5hbWVzKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5OwoJCQkJCQl9CgkJCQkJfSwKCQkJCQkkZWxtJGNvcmUkU2V0JGVtcHR5LAoJCQkJCWVudHJ5UG9pbnRNYXRjaGVzUmVzdWx0cyk7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQl7CgkJCQkJCWNvbXBpbGVkRmlsZXM6IHNvdXJjZUZpbGVzLAoJCQkJCQlyb290TW9kdWxlRW50cnlQb2ludEtpbmQ6ICRlbG0kY29yZSRSZXN1bHQkRXJyKAoJCQkJCQkJJ0ZvdW5kIG5vIGRlY2xhcmF0aW9uIG9mIGFuIGVudHJ5IHBvaW50LiBJIG9ubHkgc3VwcG9ydCB0aGUgZm9sbG93aW5nICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KAoJCQkJCQkJCSRlbG0kY29yZSRTZXQkc2l6ZShhbGxTdXBwb3J0ZWREZWNsYXJhdGlvbk5hbWVzKSkgKyAoJyBuYW1lcyBmb3IgZW50cnkgcG9pbnRzIGRlY2xhcmF0aW9uczogJyArIEEyKAoJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQknLCAnLAoJCQkJCQkJCSRlbG0kY29yZSRTZXQkdG9MaXN0KGFsbFN1cHBvcnRlZERlY2xhcmF0aW9uTmFtZXMpKSkpKQoJCQkJCX0pOwoJCQl9IGVsc2UgewoJCQkJdmFyIGJ1aWxkRW50cnlQb2ludCA9IF92MS5hOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCWZ1bmN0aW9uIChidWlsZEVudHJ5UG9pbnRPaykgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJY29tcGlsZWRGaWxlczogYnVpbGRFbnRyeVBvaW50T2suY29tcGlsZWRGaWxlcywKCQkJCQkJCXJvb3RNb2R1bGVFbnRyeVBvaW50S2luZDogJGVsbSRjb3JlJFJlc3VsdCRPayhidWlsZEVudHJ5UG9pbnRPay5yb290TW9kdWxlRW50cnlQb2ludEtpbmQpCgkJCQkJCX07CgkJCQkJfSwKCQkJCQlBMigKCQkJCQkJYnVpbGRFbnRyeVBvaW50LAoJCQkJCQl7Y29tcGlsYXRpb25Sb290RmlsZVBhdGg6IGNvbmZpZy5jb21waWxhdGlvblJvb3RGaWxlUGF0aCwgY29tcGlsYXRpb25Sb290TW9kdWxlOiBjb21waWxhdGlvblJvb3RNb2R1bGUsIGludGVyZmFjZVRvSG9zdFJvb3RNb2R1bGVOYW1lOiBjb25maWcuaW50ZXJmYWNlVG9Ib3N0Um9vdE1vZHVsZU5hbWUsIG9yaWdpbmFsU291cmNlTW9kdWxlczogY29uZmlnLm9yaWdpbmFsU291cmNlTW9kdWxlc30sCgkJCQkJCXNvdXJjZUZpbGVzKSk7CgkJCX0KCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGltcG9ydFN5bnRheFRleHRGcm9tTW9kdWxlTmFtZUFuZEFsaWFzID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIG1vZHVsZU5hbWUgPSBfdjAuYTsKCXZhciBtYXliZUFsaWFzID0gX3YwLmI7CglyZXR1cm4gJ2ltcG9ydCAnICsgKEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy4nLCBtb2R1bGVOYW1lKSArIEEyKAoJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQknJywKCQlBMigKCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJJGVsbSRjb3JlJEJhc2ljcyRhcHBlbmQoJyBhcyAnKSwKCQkJbWF5YmVBbGlhcykpKTsKfTsKdmFyICRlbG0kY29yZSRTdHJpbmckbGluZXMgPSBfU3RyaW5nX2xpbmVzOwp2YXIgJGVsbSRjb3JlJExpc3QkbWF4aW11bSA9IGZ1bmN0aW9uIChsaXN0KSB7CglpZiAobGlzdC5iKSB7CgkJdmFyIHggPSBsaXN0LmE7CgkJdmFyIHhzID0gbGlzdC5iOwoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJQTMoJGVsbSRjb3JlJExpc3QkZm9sZGwsICRlbG0kY29yZSRCYXNpY3MkbWF4LCB4LCB4cykpOwoJfSBlbHNlIHsKCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7Cgl9Cn07CnZhciAkZWxtJGNvcmUkTGlzdCRpbnRlcnNwZXJzZSA9IEYyKAoJZnVuY3Rpb24gKHNlcCwgeHMpIHsKCQlpZiAoIXhzLmIpIHsKCQkJcmV0dXJuIF9MaXN0X05pbDsKCQl9IGVsc2UgewoJCQl2YXIgaGQgPSB4cy5hOwoJCQl2YXIgdGwgPSB4cy5iOwoJCQl2YXIgc3RlcCA9IEYyKAoJCQkJZnVuY3Rpb24gKHgsIHJlc3QpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCXNlcCwKCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgeCwgcmVzdCkpOwoJCQkJfSk7CgkJCXZhciBzcGVyc2VkID0gQTMoJGVsbSRjb3JlJExpc3QkZm9sZHIsIHN0ZXAsIF9MaXN0X05pbCwgdGwpOwoJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgaGQsIHNwZXJzZWQpOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VyUHJvYmxlbVRvU3RyaW5nID0gZnVuY3Rpb24gKHApIHsKCXN3aXRjaCAocC4kKSB7CgkJY2FzZSAnRXhwZWN0aW5nJzoKCQkJdmFyIHMgPSBwLmE7CgkJCXJldHVybiAnZXhwZWN0aW5nIFwnJyArIChzICsgJ1wnJyk7CgkJY2FzZSAnRXhwZWN0aW5nSW50JzoKCQkJcmV0dXJuICdleHBlY3RpbmcgaW50JzsKCQljYXNlICdFeHBlY3RpbmdIZXgnOgoJCQlyZXR1cm4gJ2V4cGVjdGluZyBoZXgnOwoJCWNhc2UgJ0V4cGVjdGluZ09jdGFsJzoKCQkJcmV0dXJuICdleHBlY3Rpbmcgb2N0YWwnOwoJCWNhc2UgJ0V4cGVjdGluZ0JpbmFyeSc6CgkJCXJldHVybiAnZXhwZWN0aW5nIGJpbmFyeSc7CgkJY2FzZSAnRXhwZWN0aW5nRmxvYXQnOgoJCQlyZXR1cm4gJ2V4cGVjdGluZyBmbG9hdCc7CgkJY2FzZSAnRXhwZWN0aW5nTnVtYmVyJzoKCQkJcmV0dXJuICdleHBlY3RpbmcgbnVtYmVyJzsKCQljYXNlICdFeHBlY3RpbmdWYXJpYWJsZSc6CgkJCXJldHVybiAnZXhwZWN0aW5nIHZhcmlhYmxlJzsKCQljYXNlICdFeHBlY3RpbmdTeW1ib2wnOgoJCQl2YXIgcyA9IHAuYTsKCQkJcmV0dXJuICdleHBlY3Rpbmcgc3ltYm9sIFwnJyArIChzICsgJ1wnJyk7CgkJY2FzZSAnRXhwZWN0aW5nS2V5d29yZCc6CgkJCXZhciBzID0gcC5hOwoJCQlyZXR1cm4gJ2V4cGVjdGluZyBrZXl3b3JkIFwnJyArIChzICsgJ1wnJyk7CgkJY2FzZSAnRXhwZWN0aW5nRW5kJzoKCQkJcmV0dXJuICdleHBlY3RpbmcgZW5kJzsKCQljYXNlICdVbmV4cGVjdGVkQ2hhcic6CgkJCXJldHVybiAndW5leHBlY3RlZCBjaGFyJzsKCQljYXNlICdQcm9ibGVtJzoKCQkJdmFyIHMgPSBwLmE7CgkJCXJldHVybiAncHJvYmxlbSAnICsgczsKCQlkZWZhdWx0OgoJCQlyZXR1cm4gJ2JhZCByZXBlYXQnOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VyRGVhZEVuZFRvU3RyaW5nID0gRjIoCglmdW5jdGlvbiAocGFyc2VkVGV4dCwgZGVhZGVuZCkgewoJCXJldHVybiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZXJQcm9ibGVtVG9TdHJpbmcoZGVhZGVuZC5wcm9ibGVtKSArICgnIGF0IHJvdyAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChkZWFkZW5kLnJvdykgKyAoJywgY29sICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KGRlYWRlbmQuY29sKSArICgnOiBcJycgKyAoQTIoCgkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJJ1xuJywKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCR0YWtlLAoJCQkJNCwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGRyb3AsCgkJCQkJZGVhZGVuZC5yb3cgLSAyLAoJCQkJCSRlbG0kY29yZSRTdHJpbmckbGluZXMocGFyc2VkVGV4dCkpKSkgKyAnXCcnKSkpKSkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZXJEZWFkRW5kc1RvU3RyaW5nID0gRjIoCglmdW5jdGlvbiAocGFyc2VkVGV4dCwgZGVhZEVuZHMpIHsKCQlyZXR1cm4gJGVsbSRjb3JlJFN0cmluZyRjb25jYXQoCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkaW50ZXJzcGVyc2UsCgkJCQknOyAnLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlckRlYWRFbmRUb1N0cmluZyhwYXJzZWRUZXh0KSwKCQkJCQlkZWFkRW5kcykpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VBbmRNYXBFbG1Nb2R1bGVUZXh0ID0gRjIoCglmdW5jdGlvbiAobWFwRGVwZW5kaW5nT25QYXJzaW5nLCBtb2R1bGVUZXh0KSB7CgkJdmFyIF92MCA9ICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtTW9kdWxlVGV4dChtb2R1bGVUZXh0KTsKCQlpZiAoX3YwLiQgPT09ICdFcnInKSB7CgkJCXZhciBlcnJvciA9IF92MC5hOwoJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoCgkJCQknRmFpbGVkIHRvIHBhcnNlIEVsbSBtb2R1bGUgdGV4dDogJyArIEEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlckRlYWRFbmRzVG9TdHJpbmcsIG1vZHVsZVRleHQsIGVycm9yKSk7CgkJfSBlbHNlIHsKCQkJdmFyIHBhcnNlZE1vZHVsZSA9IF92MC5hOwoJCQlyZXR1cm4gbWFwRGVwZW5kaW5nT25QYXJzaW5nKHBhcnNlZE1vZHVsZSk7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRhZGRJbXBvcnRzSW5FbG1Nb2R1bGVUZXh0ID0gRjIoCglmdW5jdGlvbiAoaW1wb3J0cywgbW9kdWxlVGV4dCkgewoJCXJldHVybiBBMigKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VBbmRNYXBFbG1Nb2R1bGVUZXh0LAoJCQlmdW5jdGlvbiAocGFyc2VkTW9kdWxlKSB7CgkJCQl2YXIgbW9kdWxlVGV4dExpbmVzID0gJGVsbSRjb3JlJFN0cmluZyRsaW5lcyhtb2R1bGVUZXh0KTsKCQkJCXZhciBpbnNlcnRpb25Sb3cgPSBBMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRyYW5nZShwYXJzZWRNb2R1bGUubW9kdWxlRGVmaW5pdGlvbikuZW5kLnJvdywKCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXhpbXVtKAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRyYW5nZSwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCQkJCXJldHVybiAkLmVuZDsKCQkJCQkJCQkJfSwKCQkJCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCQkJCXJldHVybiAkLnJvdzsKCQkJCQkJCQkJfSkpLAoJCQkJCQkJcGFyc2VkTW9kdWxlLmltcG9ydHMpKSk7CgkJCQl2YXIgaW1wb3J0U3RhdGVtZW50c0xpbmVzID0gQTIoJGVsbSRjb3JlJExpc3QkbWFwLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRpbXBvcnRTeW50YXhUZXh0RnJvbU1vZHVsZU5hbWVBbmRBbGlhcywgaW1wb3J0cyk7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQknXG4nLAoJCQkJCQlfVXRpbHNfYXAoCgkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCR0YWtlLCBpbnNlcnRpb25Sb3csIG1vZHVsZVRleHRMaW5lcyksCgkJCQkJCQlfVXRpbHNfYXAoCgkJCQkJCQkJaW1wb3J0U3RhdGVtZW50c0xpbmVzLAoJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGRyb3AsIGluc2VydGlvblJvdywgbW9kdWxlVGV4dExpbmVzKSkpKSk7CgkJCX0sCgkJCW1vZHVsZVRleHQpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRkZWNsYXJhdGlvbldpdGhSYW5nZUFzRnVuY3Rpb25EZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChkZWNsYXJhdGlvbikgewoJdmFyIF92MCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoZGVjbGFyYXRpb24pOwoJaWYgKF92MC4kID09PSAnRnVuY3Rpb25EZWNsYXJhdGlvbicpIHsKCQl2YXIgZnVuY3Rpb25EZWNsYXJhdGlvbiA9IF92MC5hOwoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHJhbmdlKGRlY2xhcmF0aW9uKSwKCQkJCWZ1bmN0aW9uRGVjbGFyYXRpb24pKTsKCX0gZWxzZSB7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZW5jb2RpbmdNb2R1bGVJbXBvcnRCeXRlcyA9IF9VdGlsc19UdXBsZTIoCglfTGlzdF9mcm9tQXJyYXkoCgkJWydDb21waWxlckdlbmVyYXRlZCcsICdFbmNvZGVCeXRlcyddKSwKCSRlbG0kY29yZSRNYXliZSRKdXN0KCdFbmNvZGVCeXRlcycpKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxvY2F0ZWRJblNvdXJjZUZpbGVzRnJvbVJhbmdlID0gRjIoCglmdW5jdGlvbiAoZmlsZVBhdGgsIF92MCkgewoJCXZhciByYW5nZSA9IF92MC5hOwoJCXZhciBhID0gX3YwLmI7CgkJcmV0dXJuIEEyKAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRMb2NhdGVkSW5Tb3VyY2VGaWxlcywKCQkJe2ZpbGVQYXRoOiBmaWxlUGF0aCwgbG9jYXRpb25Jbk1vZHVsZVRleHQ6IHJhbmdlfSwKCQkJYSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkbWFwID0gRjIoCglmdW5jdGlvbiAoZiwgX3YwKSB7CgkJdmFyIHIgPSBfdjAuYTsKCQl2YXIgYSA9IF92MC5iOwoJCXJldHVybiBBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQlyLAoJCQlmKGEpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbGlzdE1hcEZpcnN0RWxlbWVudCA9IEYyKAoJZnVuY3Rpb24gKG1hcEVsZW1lbnQsIGxpc3QpIHsKCQlpZiAobGlzdC5iKSB7CgkJCXZhciBmaXJzdEVsZW1lbnQgPSBsaXN0LmE7CgkJCXZhciBmb2xsb3dpbmdFbGVtZW50cyA9IGxpc3QuYjsKCQkJcmV0dXJuIEEyKAoJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCW1hcEVsZW1lbnQoZmlyc3RFbGVtZW50KSwKCQkJCWZvbGxvd2luZ0VsZW1lbnRzKTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gbGlzdDsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGdldFRleHRMaW5lc0Zyb21SYW5nZSA9IEYyKAoJZnVuY3Rpb24gKHJhbmdlLCB0ZXh0KSB7CgkJdmFyIGxpbmVzID0gJGVsbSRjb3JlJFN0cmluZyRsaW5lcyh0ZXh0KTsKCQlyZXR1cm4gQTIoCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxpc3RNYXBGaXJzdEVsZW1lbnQsCgkJCSRlbG0kY29yZSRTdHJpbmckZHJvcExlZnQocmFuZ2Uuc3RhcnQuY29sdW1uIC0gMSksCgkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoCgkJCQlBMigKCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRsaXN0TWFwRmlyc3RFbGVtZW50LAoJCQkJCSRlbG0kY29yZSRTdHJpbmckbGVmdChyYW5nZS5lbmQuY29sdW1uIC0gMSksCgkJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZSgKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRkcm9wLAoJCQkJCQkJcmFuZ2Uuc3RhcnQucm93IC0gMSwKCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JHRha2UsIHJhbmdlLmVuZC5yb3csIGxpbmVzKSkpKSkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRyZXBsYWNlUmFuZ2VJblRleHQgPSBGMygKCWZ1bmN0aW9uIChyYW5nZSwgcmFuZ2VSZXBsYWNlbWVudCwgb3JpZ2luYWxUZXh0KSB7CgkJdmFyIG9yaWdpbmFsVGV4dExpbmVzID0gJGVsbSRjb3JlJFN0cmluZyRsaW5lcyhvcmlnaW5hbFRleHQpOwoJCXZhciBzdGFydExpbmVzID0gQTIoJGVsbSRjb3JlJExpc3QkdGFrZSwgcmFuZ2Uuc3RhcnQucm93IC0gMSwgb3JpZ2luYWxUZXh0TGluZXMpOwoJCXZhciBsaW5lU3RhcnQgPSBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRsZWZ0LAoJCQlyYW5nZS5zdGFydC5jb2x1bW4gLSAxLAoJCQlBMigKCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCScnLAoJCQkJJGVsbSRjb3JlJExpc3QkaGVhZCgKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkZHJvcCwKCQkJCQkJJGVsbSRjb3JlJExpc3QkbGVuZ3RoKHN0YXJ0TGluZXMpLAoJCQkJCQlvcmlnaW5hbFRleHRMaW5lcykpKSk7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCSdcbicsCgkJCV9VdGlsc19hcCgKCQkJCUEyKCRlbG0kY29yZSRMaXN0JHRha2UsIHJhbmdlLnN0YXJ0LnJvdyAtIDEsIG9yaWdpbmFsVGV4dExpbmVzKSwKCQkJCV9VdGlsc19hcCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCV9VdGlsc19hcChsaW5lU3RhcnQsIHJhbmdlUmVwbGFjZW1lbnQpCgkJCQkJCV0pLAoJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGRyb3AsIHJhbmdlLmVuZC5yb3csIG9yaWdpbmFsVGV4dExpbmVzKSkpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkYWRkT3JVcGRhdGVGdW5jdGlvbkluRWxtTW9kdWxlVGV4dCA9IEYyKAoJZnVuY3Rpb24gKF92MCwgbW9kdWxlVGV4dCkgewoJCXZhciBmdW5jdGlvbk5hbWUgPSBfdjAuZnVuY3Rpb25OYW1lOwoJCXZhciBtYXBGdW5jdGlvbkxpbmVzID0gX3YwLm1hcEZ1bmN0aW9uTGluZXM7CgkJcmV0dXJuIEEyKAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUFuZE1hcEVsbU1vZHVsZVRleHQsCgkJCWZ1bmN0aW9uIChwYXJzZWRNb2R1bGUpIHsKCQkJCXZhciBfdjEgPSBBMigKCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tbW9uJGxpc3RGaW5kLAoJCQkJCWZ1bmN0aW9uIChfdjIpIHsKCQkJCQkJdmFyIGRlY2xhcmF0aW9uID0gX3YyLmI7CgkJCQkJCWlmIChkZWNsYXJhdGlvbi4kID09PSAnRnVuY3Rpb25EZWNsYXJhdGlvbicpIHsKCQkJCQkJCXZhciBmdW5jdGlvbkRlY2xhcmF0aW9uID0gZGVjbGFyYXRpb24uYTsKCQkJCQkJCXZhciBfdjQgPSBmdW5jdGlvbkRlY2xhcmF0aW9uLmRlY2xhcmF0aW9uOwoJCQkJCQkJdmFyIGZ1bmN0aW9uRGVjbGFyYXRpb25WYWx1ZSA9IF92NC5iOwoJCQkJCQkJdmFyIF92NSA9IGZ1bmN0aW9uRGVjbGFyYXRpb25WYWx1ZS5uYW1lOwoJCQkJCQkJdmFyIGNhbmRpZGF0ZUZ1bmN0aW9uTmFtZSA9IF92NS5iOwoJCQkJCQkJcmV0dXJuIF9VdGlsc19lcShmdW5jdGlvbk5hbWUsIGNhbmRpZGF0ZUZ1bmN0aW9uTmFtZSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCX0KCQkJCQl9LAoJCQkJCXBhcnNlZE1vZHVsZS5kZWNsYXJhdGlvbnMpOwoJCQkJaWYgKF92MS4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQknXG5cblxuJywKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCW1vZHVsZVRleHQsCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQkJCSdcbicsCgkJCQkJCQkJCW1hcEZ1bmN0aW9uTGluZXMoJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpKQoJCQkJCQkJCV0pKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfdjYgPSBfdjEuYTsKCQkJCQl2YXIgZGVjbGFyYXRpb25SYW5nZSA9IF92Ni5hOwoJCQkJCXZhciBvcmlnaW5hbEZ1bmN0aW9uTGluZXMgPSBBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRnZXRUZXh0TGluZXNGcm9tUmFuZ2UsIGRlY2xhcmF0aW9uUmFuZ2UsIG1vZHVsZVRleHQpOwoJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJCQlBMygKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHJlcGxhY2VSYW5nZUluVGV4dCwKCQkJCQkJCWRlY2xhcmF0aW9uUmFuZ2UsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQkJJ1xuJywKCQkJCQkJCQltYXBGdW5jdGlvbkxpbmVzKAoJCQkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdChvcmlnaW5hbEZ1bmN0aW9uTGluZXMpKSksCgkJCQkJCQltb2R1bGVUZXh0KSk7CgkJCQl9CgkJCX0sCgkJCW1vZHVsZVRleHQpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRSZWNvcmRUcmVlQnJhbmNoID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1JlY29yZFRyZWVCcmFuY2gnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJFJlY29yZFRyZWVMZWFmID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1JlY29yZFRyZWVMZWFmJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRsaXN0UmVzdWx0UGFydGl0aW9uID0gZnVuY3Rpb24gKHJlc3VsdHMpIHsKCXJldHVybiBBMygKCQkkZWxtJGNvcmUkTGlzdCRmb2xkciwKCQlGMigKCQkJZnVuY3Rpb24gKHIsIF92MCkgewoJCQkJdmFyIGVyciA9IF92MC5hOwoJCQkJdmFyIHN1Y2MgPSBfdjAuYjsKCQkJCWlmIChyLiQgPT09ICdPaycpIHsKCQkJCQl2YXIgdiA9IHIuYTsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJZXJyLAoJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCB2LCBzdWNjKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBlID0gci5hOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBlLCBlcnIpLAoJCQkJCQlzdWNjKTsKCQkJCX0KCQkJfSksCgkJX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIF9MaXN0X05pbCksCgkJcmVzdWx0cyk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRhdHRlbXB0TWFwUmVjb3JkVHJlZUxlYXZlcyA9IEYzKAoJZnVuY3Rpb24gKHBhdGhQcmVmaXgsIGF0dGVtcHRNYXBMZWFmLCB0cmVlKSB7CgkJaWYgKHRyZWUuJCA9PT0gJ1JlY29yZFRyZWVMZWFmJykgewoJCQl2YXIgbGVhZiA9IHRyZWUuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAsCgkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRSZWNvcmRUcmVlTGVhZiwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCSRlbG0kY29yZSRUdXBsZSRwYWlyKF9MaXN0X05pbCksCgkJCQkJCSRlbG0kY29yZSRMaXN0JHNpbmdsZXRvbiksCgkJCQkJQTIoYXR0ZW1wdE1hcExlYWYsIHBhdGhQcmVmaXgsIGxlYWYpKSk7CgkJfSBlbHNlIHsKCQkJdmFyIGZpZWxkcyA9IHRyZWUuYTsKCQkJdmFyIF92MSA9IEEyKAoJCQkJJGVsbSRjb3JlJFR1cGxlJG1hcEZpcnN0LAoJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0LAoJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbGlzdFJlc3VsdFBhcnRpdGlvbigKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQkJCQl2YXIgZmllbGROYW1lID0gX3YyLmE7CgkJCQkJCQl2YXIgZmllbGROb2RlID0gX3YyLmI7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXBFcnJvciwKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAoCgkJCQkJCQkJCSRlbG0kY29yZSRUdXBsZSRtYXBGaXJzdCgKCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMoZmllbGROYW1lKSkpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJCQkJJGVsbSRjb3JlJFR1cGxlJHBhaXIoZmllbGROYW1lKSwKCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRhdHRlbXB0TWFwUmVjb3JkVHJlZUxlYXZlcywKCQkJCQkJCQkJCV9VdGlsc19hcCgKCQkJCQkJCQkJCQlwYXRoUHJlZml4LAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJW2ZpZWxkTmFtZV0pKSwKCQkJCQkJCQkJCWF0dGVtcHRNYXBMZWFmLAoJCQkJCQkJCQkJZmllbGROb2RlKSkpOwoJCQkJCQl9LAoJCQkJCQlmaWVsZHMpKSk7CgkJCXZhciBlcnJvcnMgPSBfdjEuYTsKCQkJdmFyIHN1Y2Nlc3NlcyA9IF92MS5iOwoJCQlyZXR1cm4gX1V0aWxzX2VxKGVycm9ycywgX0xpc3RfTmlsKSA/ICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRSZWNvcmRUcmVlQnJhbmNoKHN1Y2Nlc3NlcykpIDogJGVsbSRjb3JlJFJlc3VsdCRFcnIoZXJyb3JzKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGVtaXRSZWNvcmRFeHByZXNzaW9uRnJvbVJlY29yZFRyZWUgPSBGMigKCWZ1bmN0aW9uIChleHByZXNzaW9uRnJvbUxlYWZWYWx1ZSwgdHJlZSkgewoJCWlmICh0cmVlLiQgPT09ICdSZWNvcmRUcmVlTGVhZicpIHsKCQkJdmFyIGxlYWYgPSB0cmVlLmE7CgkJCXJldHVybiBleHByZXNzaW9uRnJvbUxlYWZWYWx1ZShsZWFmKTsKCQl9IGVsc2UgewoJCQl2YXIgZmllbGRzID0gdHJlZS5hOwoJCQl2YXIgZmllbGRzRXhwcmVzc2lvbnMgPSBBMigKCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCQl2YXIgZmllbGROYW1lID0gX3YxLmE7CgkJCQkJdmFyIGVuY29kaW5nRXhwcmVzc2lvbiA9IF92MS5iOwoJCQkJCXJldHVybiBmaWVsZE5hbWUgKyAoJyA9ICcgKyBBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRlbWl0UmVjb3JkRXhwcmVzc2lvbkZyb21SZWNvcmRUcmVlLCBleHByZXNzaW9uRnJvbUxlYWZWYWx1ZSwgZW5jb2RpbmdFeHByZXNzaW9uKSk7CgkJCQl9LAoJCQkJZmllbGRzKTsKCQkJcmV0dXJuICd7ICcgKyAoQTIoJGVsbSRjb3JlJFN0cmluZyRqb2luLCAnXG4sICcsIGZpZWxkc0V4cHJlc3Npb25zKSArICdcbn0nKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGVudW1lcmF0ZUxlYXZlc0Zyb21SZWNvcmRUcmVlID0gZnVuY3Rpb24gKG5vZGUpIHsKCWlmIChub2RlLiQgPT09ICdSZWNvcmRUcmVlTGVhZicpIHsKCQl2YXIgbGVhZiA9IG5vZGUuYTsKCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlfVXRpbHNfVHVwbGUyKF9MaXN0X05pbCwgbGVhZikKCQkJXSk7Cgl9IGVsc2UgewoJCXZhciBjaGlsZHJlbiA9IG5vZGUuYTsKCQlyZXR1cm4gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCQl2YXIgZmllbGROYW1lID0gX3YxLmE7CgkJCQkJdmFyIGNoaWxkID0gX3YxLmI7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCSRlbG0kY29yZSRUdXBsZSRtYXBGaXJzdCgKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMoZmllbGROYW1lKSksCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGVudW1lcmF0ZUxlYXZlc0Zyb21SZWNvcmRUcmVlKGNoaWxkKSk7CgkJCQl9LAoJCQkJY2hpbGRyZW4pKTsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGluZGVudEVsbUNvZGVMaW5lcyA9IGZ1bmN0aW9uIChsZXZlbCkgewoJcmV0dXJuIEEyKAoJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJJGVsbSRjb3JlJFN0cmluZyRsaW5lcywKCQlBMigKCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJJGVsbSRjb3JlJExpc3QkbWFwKAoJCQkJJGVsbSRjb3JlJEJhc2ljcyRhcHBlbmQoCgkJCQkJQTIoJGVsbSRjb3JlJFN0cmluZyRyZXBlYXQsIGxldmVsLCAnICAgICcpKSksCgkJCSRlbG0kY29yZSRTdHJpbmckam9pbignXG4nKSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW50ZXJmYWNlTW9kdWxlUmVjb3JkRXhwcmVzc2lvbiA9IEYyKAoJZnVuY3Rpb24gKGludGVyZmFjZU1vZHVsZVRyZWUsIGNvbnRleHQpIHsKCQlyZXR1cm4gQTIoCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGVtaXRSZWNvcmRFeHByZXNzaW9uRnJvbVJlY29yZFRyZWUsCgkJCWZ1bmN0aW9uIChsZWFmTWFwKSB7CgkJCQlyZXR1cm4gbGVhZk1hcChjb250ZXh0KTsKCQkJfSwKCQkJaW50ZXJmYWNlTW9kdWxlVHJlZSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEVsbU1ha2VPdXRwdXRUeXBlSHRtbCA9IHskOiAnRWxtTWFrZU91dHB1dFR5cGVIdG1sJ307CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRFbG1NYWtlT3V0cHV0VHlwZUpzID0geyQ6ICdFbG1NYWtlT3V0cHV0VHlwZUpzJ307CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRpbnRlZ3JhdGVFbG1NYWtlRnVuY3Rpb25SZWNvcmRGaWVsZE5hbWUgPSBGMigKCWZ1bmN0aW9uIChmaWVsZE5hbWUsIGNvbmZpZ0JlZm9yZSkgewoJCXN3aXRjaCAoZmllbGROYW1lKSB7CgkJCWNhc2UgJ2RlYnVnJzoKCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCWNvbmZpZ0JlZm9yZSwKCQkJCQkJe2VuYWJsZURlYnVnOiB0cnVlfSkpOwoJCQljYXNlICdvcHRpbWl6ZSc6CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQlfVXRpbHNfdXBkYXRlKAoJCQkJCQljb25maWdCZWZvcmUsCgkJCQkJCXtlbmFibGVPcHRpbWl6ZTogdHJ1ZX0pKTsKCQkJY2FzZSAnaHRtbCc6CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQlfVXRpbHNfdXBkYXRlKAoJCQkJCQljb25maWdCZWZvcmUsCgkJCQkJCXtvdXRwdXRUeXBlOiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRFbG1NYWtlT3V0cHV0VHlwZUh0bWx9KSk7CgkJCWNhc2UgJ2phdmFzY3JpcHQnOgoJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCQkJY29uZmlnQmVmb3JlLAoJCQkJCQl7b3V0cHV0VHlwZTogJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkRWxtTWFrZU91dHB1dFR5cGVKc30pKTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycignVW5zdXBwb3J0ZWQgZmllbGQgbmFtZTogJyArIGZpZWxkTmFtZSk7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRidWlsZEJhc2U2NEVsbUV4cHJlc3Npb24gPSBmdW5jdGlvbiAoYnl0ZXMpIHsKCXZhciBfdjAgPSAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEJhc2U2NCRmcm9tQnl0ZXMoYnl0ZXMpOwoJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ0Vycm9yIGVuY29kaW5nIHRvIGJhc2U2NCcpOwoJfSBlbHNlIHsKCQl2YXIgYXNCYXNlNjQgPSBfdjAuYTsKCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygnXCInICsgKGFzQmFzZTY0ICsgJ1wiJykpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkYnl0ZXNfZGVjb2RlX2xpc3RTdGVwID0gRjIoCglmdW5jdGlvbiAoZWxlbWVudERlY29kZXIsIF92MCkgewoJCXZhciBuID0gX3YwLmE7CgkJdmFyIGVsZW1lbnRzID0gX3YwLmI7CgkJcmV0dXJuIChuIDw9IDApID8gJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkc3VjY2VlZCgKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkRG9uZSgKCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoZWxlbWVudHMpKSkgOiBBMigKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbWFwLAoJCQlmdW5jdGlvbiAoZWxlbWVudCkgewoJCQkJcmV0dXJuICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJExvb3AoCgkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJbiAtIDEsCgkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGVsZW1lbnQsIGVsZW1lbnRzKSkpOwoJCQl9LAoJCQllbGVtZW50RGVjb2Rlcik7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGJ5dGVzX2RlY29kZV9saXN0ID0gRjIoCglmdW5jdGlvbiAobGVuZ3RoLCBhRGVjb2RlcikgewoJCXJldHVybiAoIWxlbmd0aCkgPyAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRzdWNjZWVkKF9MaXN0X05pbCkgOiBBMigKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkbG9vcCwKCQkJX1V0aWxzX1R1cGxlMihsZW5ndGgsIF9MaXN0X05pbCksCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGJ5dGVzX2RlY29kZV9saXN0U3RlcChhRGVjb2RlcikpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRieXRlc19kZWNvZGVfd2l0aE9mZnNldCA9IEYyKAoJZnVuY3Rpb24gKG9mZnNldCwgZGVjb2RlcikgewoJCXJldHVybiBBMigKCQkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkYW5kVGhlbiwKCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJcmV0dXJuIGRlY29kZXI7CgkJCX0sCgkJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGJ5dGVzKAoJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRtYXgsIDAsIG9mZnNldCkpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkYnVpbGRVaW50MzJVaW50OEVsbUV4cHJlc3Npb24gPSBmdW5jdGlvbiAoYnl0ZXMpIHsKCXZhciB1aW50MzJfY291bnQgPSAoJGVsbSRieXRlcyRCeXRlcyR3aWR0aChieXRlcykgLyA0KSB8IDA7Cgl2YXIgdWludDMyX2RlY29kZXIgPSAoIXVpbnQzMl9jb3VudCkgPyAkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRzdWNjZWVkKF9MaXN0X05pbCkgOiBBMigKCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRieXRlc19kZWNvZGVfbGlzdCwKCQl1aW50MzJfY291bnQsCgkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkdW5zaWduZWRJbnQzMigkZWxtJGJ5dGVzJEJ5dGVzJEJFKSk7Cgl2YXIgdWludDhfb2Zmc2V0ID0gdWludDMyX2NvdW50ICogNDsKCXZhciB1aW50OF9jb3VudCA9ICRlbG0kYnl0ZXMkQnl0ZXMkd2lkdGgoYnl0ZXMpIC0gdWludDhfb2Zmc2V0OwoJdmFyIHVpbnQ4X2RlY29kZXIgPSAoIXVpbnQ4X2NvdW50KSA/ICRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHN1Y2NlZWQoX0xpc3RfTmlsKSA6IEEyKAoJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGJ5dGVzX2RlY29kZV93aXRoT2Zmc2V0LAoJCXVpbnQ4X29mZnNldCwKCQlBMigKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkYnl0ZXNfZGVjb2RlX2xpc3QsCgkJCXVpbnQ4X2NvdW50LAoJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSR1bnNpZ25lZEludDMyKCRlbG0kYnl0ZXMkQnl0ZXMkQkUpKSk7Cgl2YXIgcmVjb3JkRXhwcmVzc2lvbiA9IGZ1bmN0aW9uIChmaWVsZHMpIHsKCQlyZXR1cm4gJ3sgJyArIChBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknLCAnLAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCQl2YXIgZmllbGROYW1lID0gX3YxLmE7CgkJCQkJdmFyIGZpZWxkVmFsdWVFeHByZXNzaW9uID0gX3YxLmI7CgkJCQkJcmV0dXJuIGZpZWxkTmFtZSArICgnID0gJyArIGZpZWxkVmFsdWVFeHByZXNzaW9uKTsKCQkJCX0sCgkJCQlmaWVsZHMpKSArICcgfScpOwoJfTsKCXZhciBleHByZXNzaW9uRnJvbUxpc3RJbnQgPSBmdW5jdGlvbiAobGlzdCkgewoJCXJldHVybiAnWyAnICsgKEEyKAoJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCScsICcsCgkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50LCBsaXN0KSkgKyAnIF0nKTsKCX07Cgl2YXIgZGVjb2RlciA9IEEyKAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGFuZFRoZW4sCgkJZnVuY3Rpb24gKHVpbnQzMikgewoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGJ5dGVzJEJ5dGVzJERlY29kZSRtYXAsCgkJCQlmdW5jdGlvbiAodWludDgpIHsKCQkJCQlyZXR1cm4ge3VpbnQzMjogdWludDMyLCB1aW50ODogdWludDh9OwoJCQkJfSwKCQkJCXVpbnQ4X2RlY29kZXIpOwoJCX0sCgkJdWludDMyX2RlY29kZXIpOwoJdmFyIF92MCA9IEEyKCRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJGRlY29kZSwgZGVjb2RlciwgYnl0ZXMpOwoJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ0ZhaWxlZCBkZWNvZGluZyBieXRlcyB0byBpbnRlZ2VycycpOwoJfSBlbHNlIHsKCQl2YXIgdWludDMyID0gX3YwLmEudWludDMyOwoJCXZhciB1aW50OCA9IF92MC5hLnVpbnQ4OwoJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQlyZWNvcmRFeHByZXNzaW9uKAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ3VpbnQzMicsCgkJCQkJCWV4cHJlc3Npb25Gcm9tTGlzdEludCh1aW50MzIpKSwKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ3VpbnQ4JywKCQkJCQkJZXhwcmVzc2lvbkZyb21MaXN0SW50KHVpbnQ4KSkKCQkJCQldKSkpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkc3RyaW5nRXhwcmVzc2lvbkZyb21TdHJpbmcgPSBmdW5jdGlvbiAoc3RyaW5nKSB7CglyZXR1cm4gJ1wiJyArIChBMygKCQkkZWxtJGNvcmUkU3RyaW5nJHJlcGxhY2UsCgkJJ1wiJywKCQknXFxcIicsCgkJQTMoCgkJCSRlbG0kY29yZSRTdHJpbmckcmVwbGFjZSwKCQkJJ1x1MDAwRCcsCgkJCSdcXHInLAoJCQlBMygKCQkJCSRlbG0kY29yZSRTdHJpbmckcmVwbGFjZSwKCQkJCSdcbicsCgkJCQknXFxuJywKCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckcmVwbGFjZSwgJ1xcJywgJ1xcXFwnLCBzdHJpbmcpKSkpICsgJ1wiJyk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRidWlsZFV0ZjhFbG1FeHByZXNzaW9uID0gZnVuY3Rpb24gKGJ5dGVzKSB7Cgl2YXIgX3YwID0gQTIoCgkJJGVsbSRieXRlcyRCeXRlcyREZWNvZGUkZGVjb2RlLAoJCSRlbG0kYnl0ZXMkQnl0ZXMkRGVjb2RlJHN0cmluZygKCQkJJGVsbSRieXRlcyRCeXRlcyR3aWR0aChieXRlcykpLAoJCWJ5dGVzKTsKCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKCdGYWlsZWQgdG8gZGVjb2RlIGJ5dGVzIGFzIFVURjgnKTsKCX0gZWxzZSB7CgkJdmFyIGFzVXRmOCA9IF92MC5hOwoJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRzdHJpbmdFeHByZXNzaW9uRnJvbVN0cmluZyhhc1V0ZjgpKTsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJG1hcFJlY29yZFRyZWVMZWF2ZXMgPSBGMigKCWZ1bmN0aW9uIChtYXBMZWFmLCB0cmVlKSB7CgkJaWYgKHRyZWUuJCA9PT0gJ1JlY29yZFRyZWVMZWFmJykgewoJCQl2YXIgbGVhZiA9IHRyZWUuYTsKCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJFJlY29yZFRyZWVMZWFmKAoJCQkJbWFwTGVhZihsZWFmKSk7CgkJfSBlbHNlIHsKCQkJdmFyIGZpZWxkcyA9IHRyZWUuYTsKCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJFJlY29yZFRyZWVCcmFuY2goCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJZnVuY3Rpb24gKF92MSkgewoJCQkJCQl2YXIgZmllbGROYW1lID0gX3YxLmE7CgkJCQkJCXZhciBmaWVsZE5vZGUgPSBfdjEuYjsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJGVsbSRjb3JlJFR1cGxlJHBhaXIsCgkJCQkJCQlmaWVsZE5hbWUsCgkJCQkJCQlBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRtYXBSZWNvcmRUcmVlTGVhdmVzLCBtYXBMZWFmLCBmaWVsZE5vZGUpKTsKCQkJCQl9LAoJCQkJCWZpZWxkcykpOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbW1vbiRyZXN1bHRMaXN0TWFwQ29tYmluZUhlbHBlciA9IEYzKAoJZnVuY3Rpb24gKGNvbXBsZXRlTGlzdCwgbWFwSXRlbSwgc291cmNlTGlzdCkgewoJCXJlc3VsdExpc3RNYXBDb21iaW5lSGVscGVyOgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmICghc291cmNlTGlzdC5iKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKGNvbXBsZXRlTGlzdCkpOwoJCQl9IGVsc2UgewoJCQkJdmFyIGl0ZW0gPSBzb3VyY2VMaXN0LmE7CgkJCQl2YXIgdGFpbCA9IHNvdXJjZUxpc3QuYjsKCQkJCXZhciBfdjEgPSBtYXBJdGVtKGl0ZW0pOwoJCQkJaWYgKF92MS4kID09PSAnT2snKSB7CgkJCQkJdmFyIGl0ZW1PayA9IF92MS5hOwoJCQkJCXZhciAkdGVtcCRjb21wbGV0ZUxpc3QgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBpdGVtT2ssIGNvbXBsZXRlTGlzdCksCgkJCQkJCSR0ZW1wJG1hcEl0ZW0gPSBtYXBJdGVtLAoJCQkJCQkkdGVtcCRzb3VyY2VMaXN0ID0gdGFpbDsKCQkJCQljb21wbGV0ZUxpc3QgPSAkdGVtcCRjb21wbGV0ZUxpc3Q7CgkJCQkJbWFwSXRlbSA9ICR0ZW1wJG1hcEl0ZW07CgkJCQkJc291cmNlTGlzdCA9ICR0ZW1wJHNvdXJjZUxpc3Q7CgkJCQkJY29udGludWUgcmVzdWx0TGlzdE1hcENvbWJpbmVIZWxwZXI7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBlcnIgPSBfdjEuYTsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoZXJyKTsKCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbW1vbiRyZXN1bHRMaXN0TWFwQ29tYmluZSA9IEYyKAoJZnVuY3Rpb24gKG1hcEl0ZW0sIGxpc3QpIHsKCQlyZXR1cm4gQTMoJGF1dGhvciRwcm9qZWN0JENvbW1vbiRyZXN1bHRMaXN0TWFwQ29tYmluZUhlbHBlciwgX0xpc3RfTmlsLCBtYXBJdGVtLCBsaXN0KTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcHJlcGFyZVJlY29yZFRyZWVFbWl0Rm9yVHJlZU9yQmxvYlVuZGVyUGF0aCA9IEYyKAoJZnVuY3Rpb24gKHBhdGhQcmVmaXgsIHRyZWUpIHsKCQl2YXIgbWFwcGluZ1V0ZjggPSB7ZmllbGROYW1lOiAndXRmOCcsIHZhbHVlTW9kdWxlQnVpbGRFeHByZXNzaW9uOiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRidWlsZFV0ZjhFbG1FeHByZXNzaW9ufTsKCQl2YXIgbWFwcGluZ1VpbnQzMlVpbnQ4ID0ge2ZpZWxkTmFtZTogJ3VpbnQzMl91aW50OCcsIHZhbHVlTW9kdWxlQnVpbGRFeHByZXNzaW9uOiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRidWlsZFVpbnQzMlVpbnQ4RWxtRXhwcmVzc2lvbn07CgkJdmFyIG1hcHBpbmdCYXNlNjQgPSB7ZmllbGROYW1lOiAnYmFzZTY0JywgdmFsdWVNb2R1bGVCdWlsZEV4cHJlc3Npb246ICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGJ1aWxkQmFzZTY0RWxtRXhwcmVzc2lvbn07CgkJdmFyIGZyb21VaW50MzJVaW50OFRvQnl0ZXMgPSBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknICcsCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsnfD4gRW5jb2RlQnl0ZXMuYnl0ZXNfZW5jb2Rlcl9mcm9tX3VpbnQzMl91aW50OCcsICd8PiBCeXRlcy5FbmNvZGUuZW5jb2RlJ10pKTsKCQl2YXIgbWFwcGluZ0J5dGVzID0gX1V0aWxzX1R1cGxlMigKCQkJbWFwcGluZ1VpbnQzMlVpbnQ4LAoJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdChmcm9tVWludDMyVWludDhUb0J5dGVzKSk7CgkJdmFyIG1hcFRvVmFsdWVEaWN0ID0gJGVsbSRjb3JlJERpY3QkZnJvbUxpc3QoCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWydiYXNlNjQnXSksCgkJCQkJX1V0aWxzX1R1cGxlMihtYXBwaW5nQmFzZTY0LCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZykpLAoJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbJ2J5dGVzJ10pLAoJCQkJCW1hcHBpbmdCeXRlcyksCgkJCQkJX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIG1hcHBpbmdCeXRlcyksCgkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsndXRmOCddKSwKCQkJCQlfVXRpbHNfVHVwbGUyKG1hcHBpbmdVdGY4LCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZykpCgkJCQldKSk7CgkJdmFyIGF0dGVtcHRNYXBMZWFmID0gRjIoCgkJCWZ1bmN0aW9uIChsZWFmUGF0aCwgX3Y2KSB7CgkJCQl2YXIgcGF0aCA9IF9VdGlsc19hcChwYXRoUHJlZml4LCBsZWFmUGF0aCk7CgkJCQl2YXIgX3YyID0gQTIoJGVsbSRjb3JlJERpY3QkZ2V0LCBwYXRoLCBtYXBUb1ZhbHVlRGljdCk7CgkJCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCQkJJ0ZvdW5kIG5vIG1hcHBpbmcgZm9yIHBhdGggJyArIEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy4nLCBwYXRoKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfdjMgPSBfdjIuYTsKCQkJCQl2YXIgdmFsdWVNb2R1bGUgPSBfdjMuYTsKCQkJCQl2YXIgbWF5YmVNYXBwaW5nSW5JbnRlcmZhY2VNb2R1bGUgPSBfdjMuYjsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkJewoJCQkJCQkJaW50ZXJmYWNlTW9kdWxlOiBmdW5jdGlvbiAoX3Y0KSB7CgkJCQkJCQkJdmFyIHNvdXJjZUV4cHJlc3Npb24gPSBfdjQuc291cmNlRXhwcmVzc2lvbjsKCQkJCQkJCQl2YXIgYmVmb3JlTWFwcGluZyA9IHNvdXJjZUV4cHJlc3Npb24gKyAoJy4nICsgdmFsdWVNb2R1bGUuZmllbGROYW1lKTsKCQkJCQkJCQlpZiAobWF5YmVNYXBwaW5nSW5JbnRlcmZhY2VNb2R1bGUuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJCXJldHVybiBiZWZvcmVNYXBwaW5nOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBtYXBwaW5nSW5JbnRlcmZhY2VNb2R1bGUgPSBtYXliZU1hcHBpbmdJbkludGVyZmFjZU1vZHVsZS5hOwoJCQkJCQkJCQlyZXR1cm4gJygnICsgKGJlZm9yZU1hcHBpbmcgKyAoJykgJyArIG1hcHBpbmdJbkludGVyZmFjZU1vZHVsZSkpOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl2YWx1ZU1vZHVsZToge2J1aWxkRXhwcmVzc2lvbjogdmFsdWVNb2R1bGUudmFsdWVNb2R1bGVCdWlsZEV4cHJlc3Npb24sIGZpZWxkTmFtZTogdmFsdWVNb2R1bGUuZmllbGROYW1lfQoJCQkJCQl9KTsKCQkJCX0KCQkJfSk7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJZnVuY3Rpb24gKG1hcHBlZFRyZWUpIHsKCQkJCXJldHVybiB7CgkJCQkJaW50ZXJmYWNlTW9kdWxlOiBBMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbWFwUmVjb3JkVHJlZUxlYXZlcywKCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCXJldHVybiAkLmludGVyZmFjZU1vZHVsZTsKCQkJCQkJfSwKCQkJCQkJbWFwcGVkVHJlZSksCgkJCQkJdmFsdWVNb2R1bGU6IGZ1bmN0aW9uICh2YWx1ZUJ5dGVzKSB7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCQkJJGVsbSRjb3JlJERpY3QkZnJvbUxpc3QsCgkJCQkJCQlBMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tbW9uJHJlc3VsdExpc3RNYXBDb21iaW5lLAoJCQkJCQkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCQkJCQkJdmFyIGxlYWYgPSBfdjEuYjsKCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAsCgkJCQkJCQkJCQlmdW5jdGlvbiAoZXhwcmVzc2lvbikgewoJCQkJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQlsZWFmLnZhbHVlTW9kdWxlLmZpZWxkTmFtZSwKCQkJCQkJCQkJCQkJe2V4cHJlc3Npb246IGV4cHJlc3Npb259KTsKCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkYXBwZW5kKCdGYWlsZWQgdG8gYnVpbGQgZXhwcmVzc2lvbiBmb3IgZmllbGQgXCcnICsgKGxlYWYudmFsdWVNb2R1bGUuZmllbGROYW1lICsgJ1wnOiAnKSksCgkJCQkJCQkJCQkJbGVhZi52YWx1ZU1vZHVsZS5idWlsZEV4cHJlc3Npb24odmFsdWVCeXRlcykpKTsKCQkJCQkJCQl9LAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGVudW1lcmF0ZUxlYXZlc0Zyb21SZWNvcmRUcmVlKG1hcHBlZFRyZWUpKSk7CgkJCQkJfQoJCQkJfTsKCQkJfSwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAoCgkJCQkJCWZ1bmN0aW9uIChfdjApIHsKCQkJCQkJCXZhciBlcnJvclBhdGggPSBfdjAuYTsKCQkJCQkJCXZhciBlcnJvciA9IF92MC5iOwoJCQkJCQkJcmV0dXJuICdFcnJvciBhdCBwYXRoICcgKyAoQTIoJGVsbSRjb3JlJFN0cmluZyRqb2luLCAnLicsIGVycm9yUGF0aCkgKyAoJzogJyArIGVycm9yKSk7CgkJCQkJCX0pLAoJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbignLCAnKSksCgkJCQlBMygkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRhdHRlbXB0TWFwUmVjb3JkVHJlZUxlYXZlcywgX0xpc3RfTmlsLCBhdHRlbXB0TWFwTGVhZiwgdHJlZSkpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VFbG1NYWtlRnVuY3Rpb25Db25maWdGcm9tUmVjb3JkVHJlZUludGVybmFsID0gRjIoCglmdW5jdGlvbiAoZWxtTWFrZUNvbmZpZywgcmVjb3JkVHJlZSkgewoJCXZhciBsZWFmRnJvbVRyZWUgPSBmdW5jdGlvbiAocGF0aFByZWZpeCkgewoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcHJlcGFyZVJlY29yZFRyZWVFbWl0Rm9yVHJlZU9yQmxvYlVuZGVyUGF0aChwYXRoUHJlZml4KSwKCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwKAoJCQkJCWZ1bmN0aW9uIChlbWl0QmxvYikgewoJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkUmVjb3JkVHJlZUxlYWYoCgkJCQkJCQl7ZWxtTWFrZUNvbmZpZzogZWxtTWFrZUNvbmZpZywgZW1pdEJsb2I6IGVtaXRCbG9ifSk7CgkJCQkJfSkpOwoJCX07CgkJaWYgKHJlY29yZFRyZWUuJCA9PT0gJ1JlY29yZFRyZWVMZWFmJykgewoJCQl2YXIgbGVhZiA9IHJlY29yZFRyZWUuYTsKCQkJcmV0dXJuIEEyKAoJCQkJbGVhZkZyb21UcmVlLAoJCQkJX0xpc3RfTmlsLAoJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkUmVjb3JkVHJlZUxlYWYoX1V0aWxzX1R1cGxlMCkpOwoJCX0gZWxzZSB7CgkJCXZhciBicmFuY2ggPSByZWNvcmRUcmVlLmE7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkUmVjb3JkVHJlZUJyYW5jaCwKCQkJCUEyKAoJCQkJCSRhdXRob3IkcHJvamVjdCRDb21tb24kcmVzdWx0TGlzdE1hcENvbWJpbmUsCgkJCQkJZnVuY3Rpb24gKF92MSkgewoJCQkJCQl2YXIgYnJhbmNoTmFtZSA9IF92MS5hOwoJCQkJCQl2YXIgYnJhbmNoVmFsdWUgPSBfdjEuYjsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAsCgkJCQkJCQkkZWxtJGNvcmUkVHVwbGUkcGFpcihicmFuY2hOYW1lKSwKCQkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCQl2YXIgX3YyID0gQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW50ZWdyYXRlRWxtTWFrZUZ1bmN0aW9uUmVjb3JkRmllbGROYW1lLCBicmFuY2hOYW1lLCBlbG1NYWtlQ29uZmlnKTsKCQkJCQkJCQlpZiAoX3YyLiQgPT09ICdFcnInKSB7CgkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCWxlYWZGcm9tVHJlZSwKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbYnJhbmNoTmFtZV0pLAoJCQkJCQkJCQkJYnJhbmNoVmFsdWUpOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBuZXdFbG1NYWtlQ29uZmlnID0gX3YyLmE7CgkJCQkJCQkJCXJldHVybiBBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUVsbU1ha2VGdW5jdGlvbkNvbmZpZ0Zyb21SZWNvcmRUcmVlSW50ZXJuYWwsIG5ld0VsbU1ha2VDb25maWcsIGJyYW5jaFZhbHVlKTsKCQkJCQkJCQl9CgkJCQkJCQl9KCkpOwoJCQkJCX0sCgkJCQkJYnJhbmNoKSk7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUVsbU1ha2VGdW5jdGlvbkNvbmZpZ0Zyb21SZWNvcmRUcmVlID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VFbG1NYWtlRnVuY3Rpb25Db25maWdGcm9tUmVjb3JkVHJlZUludGVybmFsKAoJe2VuYWJsZURlYnVnOiBmYWxzZSwgZW5hYmxlT3B0aW1pemU6IGZhbHNlLCBvdXRwdXRUeXBlOiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRFbG1NYWtlT3V0cHV0VHlwZUh0bWx9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEFsaWFzRGVjbGFyYXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnQWxpYXNEZWNsYXJhdGlvbicsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkQ2hvaWNlRWxtVHlwZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdDaG9pY2VFbG1UeXBlJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRDaG9pY2VUeXBlRGVjbGFyYXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnQ2hvaWNlVHlwZURlY2xhcmF0aW9uJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRHZW5lcmljVHlwZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdHZW5lcmljVHlwZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkSW5zdGFuY2VFbG1UeXBlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0luc3RhbmNlRWxtVHlwZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkTGVhZkVsbVR5cGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnTGVhZkVsbVR5cGUnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJFJlY29yZEVsbVR5cGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUmVjb3JkRWxtVHlwZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkVHVwbGVFbG1UeXBlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1R1cGxlRWxtVHlwZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkVW5pdFR5cGUgPSB7JDogJ1VuaXRUeXBlJ307CnZhciAkZWxtJGNvcmUkTGlzdCRhbnkgPSBGMigKCWZ1bmN0aW9uIChpc09rYXksIGxpc3QpIHsKCQlhbnk6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFsaXN0LmIpIHsKCQkJCXJldHVybiBmYWxzZTsKCQkJfSBlbHNlIHsKCQkJCXZhciB4ID0gbGlzdC5hOwoJCQkJdmFyIHhzID0gbGlzdC5iOwoJCQkJaWYgKGlzT2theSh4KSkgewoJCQkJCXJldHVybiB0cnVlOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgJHRlbXAkaXNPa2F5ID0gaXNPa2F5LAoJCQkJCQkkdGVtcCRsaXN0ID0geHM7CgkJCQkJaXNPa2F5ID0gJHRlbXAkaXNPa2F5OwoJCQkJCWxpc3QgPSAkdGVtcCRsaXN0OwoJCQkJCWNvbnRpbnVlIGFueTsKCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZmluZE1vZHVsZUJ5TmFtZSA9IGZ1bmN0aW9uIChtb2R1bGVOYW1lKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkkZWxtJGNvcmUkRGljdCR0b0xpc3QsCgkJQTIoCgkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCSRlbG0kY29yZSRMaXN0JGZpbHRlcigKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJJGVsbSRjb3JlJFR1cGxlJHNlY29uZCwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCXJldHVybiAkLm1vZHVsZU5hbWU7CgkJCQkJCX0sCgkJCQkJCSRlbG0kY29yZSRCYXNpY3MkZXEobW9kdWxlTmFtZSkpKSksCgkJCSRlbG0kY29yZSRMaXN0JGhlYWQpKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxpc3RUdXBsZVNlY29uZERpY3RVbmlvbiA9IGZ1bmN0aW9uIChsaXN0KSB7CglyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRlbG0kY29yZSRUdXBsZSRmaXJzdCwgbGlzdCksCgkJQTMoCgkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkkZWxtJGNvcmUkRGljdCR1bmlvbiwKCQkJJGVsbSRjb3JlJERpY3QkZW1wdHksCgkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJGVsbSRjb3JlJFR1cGxlJHNlY29uZCwgbGlzdCkpKTsKfTsKdmFyICRlbG0kY29yZSREaWN0JG1lbWJlciA9IEYyKAoJZnVuY3Rpb24gKGtleSwgZGljdCkgewoJCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkRGljdCRnZXQsIGtleSwgZGljdCk7CgkJaWYgKF92MC4kID09PSAnSnVzdCcpIHsKCQkJcmV0dXJuIHRydWU7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJFNldCRtZW1iZXIgPSBGMigKCWZ1bmN0aW9uIChrZXksIF92MCkgewoJCXZhciBkaWN0ID0gX3YwLmE7CgkJcmV0dXJuIEEyKCRlbG0kY29yZSREaWN0JG1lbWJlciwga2V5LCBkaWN0KTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkQXJyYXlMZWFmID0geyQ6ICdBcnJheUxlYWYnfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEJvb2xMZWFmID0geyQ6ICdCb29sTGVhZid9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkQnl0ZXNMZWFmID0geyQ6ICdCeXRlc0xlYWYnfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJERpY3RMZWFmID0geyQ6ICdEaWN0TGVhZid9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkRmxvYXRMZWFmID0geyQ6ICdGbG9hdExlYWYnfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEludExlYWYgPSB7JDogJ0ludExlYWYnfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEpzb25FbmNvZGVWYWx1ZUxlYWYgPSB7JDogJ0pzb25FbmNvZGVWYWx1ZUxlYWYnfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJExpc3RMZWFmID0geyQ6ICdMaXN0TGVhZid9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkTWF5YmVMZWFmID0geyQ6ICdNYXliZUxlYWYnfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJFJlc3VsdExlYWYgPSB7JDogJ1Jlc3VsdExlYWYnfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJFNldExlYWYgPSB7JDogJ1NldExlYWYnfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJFN0cmluZ0xlYWYgPSB7JDogJ1N0cmluZ0xlYWYnfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtVHlwZUxlYXZlc05hbWVzID0gJGVsbSRjb3JlJERpY3QkZnJvbUxpc3QoCglfTGlzdF9mcm9tQXJyYXkoCgkJWwoJCQlfVXRpbHNfVHVwbGUyKCdTdHJpbmcnLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRTdHJpbmdMZWFmKSwKCQkJX1V0aWxzX1R1cGxlMignSW50JywgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkSW50TGVhZiksCgkJCV9VdGlsc19UdXBsZTIoJ0Jvb2wnLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRCb29sTGVhZiksCgkJCV9VdGlsc19UdXBsZTIoJ0Zsb2F0JywgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkRmxvYXRMZWFmKSwKCQkJX1V0aWxzX1R1cGxlMignQnl0ZXMuQnl0ZXMnLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRCeXRlc0xlYWYpLAoJCQlfVXRpbHNfVHVwbGUyKCdMaXN0JywgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkTGlzdExlYWYpLAoJCQlfVXRpbHNfVHVwbGUyKCdBcnJheS5BcnJheScsICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEFycmF5TGVhZiksCgkJCV9VdGlsc19UdXBsZTIoJ1NldC5TZXQnLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRTZXRMZWFmKSwKCQkJX1V0aWxzX1R1cGxlMignUmVzdWx0JywgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkUmVzdWx0TGVhZiksCgkJCV9VdGlsc19UdXBsZTIoJ01heWJlJywgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkTWF5YmVMZWFmKSwKCQkJX1V0aWxzX1R1cGxlMignRGljdC5EaWN0JywgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkRGljdExlYWYpLAoJCQlfVXRpbHNfVHVwbGUyKCdKc29uLkVuY29kZS5WYWx1ZScsICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEpzb25FbmNvZGVWYWx1ZUxlYWYpCgkJXSkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbW1vbiRyZXN1bHRMaXN0SW5kZXhlZE1hcENvbWJpbmVIZWxwZXIgPSBGNCgKCWZ1bmN0aW9uIChpbmRleCwgY29tcGxldGVMaXN0LCBtYXBJdGVtLCBzb3VyY2VMaXN0KSB7CgkJcmVzdWx0TGlzdEluZGV4ZWRNYXBDb21iaW5lSGVscGVyOgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmICghc291cmNlTGlzdC5iKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKGNvbXBsZXRlTGlzdCkpOwoJCQl9IGVsc2UgewoJCQkJdmFyIGl0ZW0gPSBzb3VyY2VMaXN0LmE7CgkJCQl2YXIgdGFpbCA9IHNvdXJjZUxpc3QuYjsKCQkJCXZhciBfdjEgPSBtYXBJdGVtKAoJCQkJCV9VdGlsc19UdXBsZTIoaW5kZXgsIGl0ZW0pKTsKCQkJCWlmIChfdjEuJCA9PT0gJ09rJykgewoJCQkJCXZhciBpdGVtT2sgPSBfdjEuYTsKCQkJCQl2YXIgJHRlbXAkaW5kZXggPSBpbmRleCArIDEsCgkJCQkJCSR0ZW1wJGNvbXBsZXRlTGlzdCA9IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGl0ZW1PaywgY29tcGxldGVMaXN0KSwKCQkJCQkJJHRlbXAkbWFwSXRlbSA9IG1hcEl0ZW0sCgkJCQkJCSR0ZW1wJHNvdXJjZUxpc3QgPSB0YWlsOwoJCQkJCWluZGV4ID0gJHRlbXAkaW5kZXg7CgkJCQkJY29tcGxldGVMaXN0ID0gJHRlbXAkY29tcGxldGVMaXN0OwoJCQkJCW1hcEl0ZW0gPSAkdGVtcCRtYXBJdGVtOwoJCQkJCXNvdXJjZUxpc3QgPSAkdGVtcCRzb3VyY2VMaXN0OwoJCQkJCWNvbnRpbnVlIHJlc3VsdExpc3RJbmRleGVkTWFwQ29tYmluZUhlbHBlcjsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGVyciA9IF92MS5hOwoJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihlcnIpOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tbW9uJHJlc3VsdExpc3RJbmRleGVkTWFwQ29tYmluZSA9IEYyKAoJZnVuY3Rpb24gKG1hcEl0ZW0sIGxpc3QpIHsKCQlyZXR1cm4gQTQoJGF1dGhvciRwcm9qZWN0JENvbW1vbiRyZXN1bHRMaXN0SW5kZXhlZE1hcENvbWJpbmVIZWxwZXIsIDAsIF9MaXN0X05pbCwgbWFwSXRlbSwgbGlzdCk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHRyeUNvbmNyZXRpemVSZWNvcmRJbnN0YW5jZSA9IEYyKAoJZnVuY3Rpb24gKHR5cGVBcmd1bWVudHMsIHJlY29yZFR5cGUpIHsKCQl2YXIgdHJ5Q29uY3JldGl6ZUZpZWxkVHlwZSA9IGZ1bmN0aW9uIChmaWVsZFR5cGUpIHsKCQkJc3dpdGNoIChmaWVsZFR5cGUuJCkgewoJCQkJY2FzZSAnR2VuZXJpY1R5cGUnOgoJCQkJCXZhciBnZW5lcmljTmFtZSA9IGZpZWxkVHlwZS5hOwoJCQkJCXZhciBfdjEgPSBBMigkZWxtJGNvcmUkRGljdCRnZXQsIGdlbmVyaWNOYW1lLCB0eXBlQXJndW1lbnRzKTsKCQkJCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ0RpZCBub3QgZmluZCB0eXBlIGZvciBcJycgKyAoZ2VuZXJpY05hbWUgKyAnXCcnKSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIHR5cGVBcmd1bWVudCA9IF92MS5hOwoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPayh0eXBlQXJndW1lbnQpOwoJCQkJCX0KCQkJCWNhc2UgJ0luc3RhbmNlRWxtVHlwZSc6CgkJCQkJdmFyIGluc3RhbmNlRWxtVHlwZSA9IGZpZWxkVHlwZS5hOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRhbmRUaGVuLAoJCQkJCQlmdW5jdGlvbiAoY29uY3JldGVJbnN0YW50aWF0ZWQpIHsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJCQlmdW5jdGlvbiAoY29uY3JldGVBcmd1bWVudHMpIHsKCQkJCQkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEluc3RhbmNlRWxtVHlwZSgKCQkJCQkJCQkJCXtfYXJndW1lbnRzOiBjb25jcmV0ZUFyZ3VtZW50cywgaW5zdGFudGlhdGVkOiBjb25jcmV0ZUluc3RhbnRpYXRlZH0pOwoJCQkJCQkJCX0sCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21tb24kcmVzdWx0TGlzdEluZGV4ZWRNYXBDb21iaW5lLAoJCQkJCQkJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQkJCQkJCQl2YXIgYXJnSW5kZXggPSBfdjIuYTsKCQkJCQkJCQkJCXZhciBhcmdWYWwgPSBfdjIuYjsKCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkYXBwZW5kKAoJCQkJCQkJCQkJCQknRmFpbGVkIHRvIGNvbmNyZXRpemUgaW5zdGFuY2UgYXJndW1lbnQgJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoYXJnSW5kZXgpICsgJzogJykpLAoJCQkJCQkJCQkJCXRyeUNvbmNyZXRpemVGaWVsZFR5cGUoYXJnVmFsKSk7CgkJCQkJCQkJCX0sCgkJCQkJCQkJCWluc3RhbmNlRWxtVHlwZS5fYXJndW1lbnRzKSk7CgkJCQkJCX0sCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXBFcnJvciwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkYXBwZW5kKCdGYWlsZWQgdG8gY29uY3JldGl6ZSBpbnN0YW50aWF0ZWQ6ICcpLAoJCQkJCQkJdHJ5Q29uY3JldGl6ZUZpZWxkVHlwZShpbnN0YW5jZUVsbVR5cGUuaW5zdGFudGlhdGVkKSkpOwoJCQkJY2FzZSAnVHVwbGVFbG1UeXBlJzoKCQkJCQl2YXIgdHVwbGVFbG1UeXBlID0gZmllbGRUeXBlLmE7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkVHVwbGVFbG1UeXBlLAoJCQkJCQlBMigKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21tb24kcmVzdWx0TGlzdEluZGV4ZWRNYXBDb21iaW5lLAoJCQkJCQkJZnVuY3Rpb24gKF92MykgewoJCQkJCQkJCXZhciBhcmdJbmRleCA9IF92My5hOwoJCQkJCQkJCXZhciBhcmdWYWwgPSBfdjMuYjsKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkYXBwZW5kKAoJCQkJCQkJCQkJJ0ZhaWxlZCB0byBjb25jcmV0aXplIHR1cGxlIGVsZW1lbnQgJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoYXJnSW5kZXgpICsgJzogJykpLAoJCQkJCQkJCQl0cnlDb25jcmV0aXplRmllbGRUeXBlKGFyZ1ZhbCkpOwoJCQkJCQkJfSwKCQkJCQkJCXR1cGxlRWxtVHlwZSkpOwoJCQkJY2FzZSAnUmVjb3JkRWxtVHlwZSc6CgkJCQkJdmFyIHJlY29yZEVsbVR5cGUgPSBmaWVsZFR5cGUuYTsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCQlmdW5jdGlvbiAoZmllbGRzKSB7CgkJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkUmVjb3JkRWxtVHlwZSgKCQkJCQkJCQl7ZmllbGRzOiBmaWVsZHN9KTsKCQkJCQkJfSwKCQkJCQkJQTIoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tbW9uJHJlc3VsdExpc3RNYXBDb21iaW5lLAoJCQkJCQkJZnVuY3Rpb24gKF92NCkgewoJCQkJCQkJCXZhciBmaWVsZE5hbWUgPSBfdjQuYTsKCQkJCQkJCQl2YXIgaW5uZXJGaWVsZFR5cGUgPSBfdjQuYjsKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCQkJCQkkZWxtJGNvcmUkVHVwbGUkcGFpcihmaWVsZE5hbWUpLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGFwcGVuZCgnRmFpbGVkIHRvIGNvbmNyZXRpemUgZmllbGQgJyArIChmaWVsZE5hbWUgKyAnOiAnKSksCgkJCQkJCQkJCQl0cnlDb25jcmV0aXplRmllbGRUeXBlKGlubmVyRmllbGRUeXBlKSkpOwoJCQkJCQkJfSwKCQkJCQkJCXJlY29yZEVsbVR5cGUuZmllbGRzKSk7CgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKGZpZWxkVHlwZSk7CgkJCX0KCQl9OwoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAsCgkJCWZ1bmN0aW9uIChmaWVsZHMpIHsKCQkJCXJldHVybiB7ZmllbGRzOiBmaWVsZHN9OwoJCQl9LAoJCQlBMygKCQkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkJRjIoCgkJCQkJZnVuY3Rpb24gKF92NSwgcHJldkFnZ3JlZ2F0ZSkgewoJCQkJCQl2YXIgZmllbGROYW1lID0gX3Y1LmE7CgkJCQkJCXZhciBmaWVsZFR5cGUgPSBfdjUuYjsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRhbmRUaGVuLAoJCQkJCQkJZnVuY3Rpb24gKHByZXZGaWVsZHMpIHsKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCQkJCQlmdW5jdGlvbiAoY29uY3JldGl6ZWRGaWVsZFR5cGUpIHsKCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoZmllbGROYW1lLCBjb25jcmV0aXplZEZpZWxkVHlwZSksCgkJCQkJCQkJCQkJcHJldkZpZWxkcyk7CgkJCQkJCQkJCX0sCgkJCQkJCQkJCXRyeUNvbmNyZXRpemVGaWVsZFR5cGUoZmllbGRUeXBlKSk7CgkJCQkJCQl9LAoJCQkJCQkJcHJldkFnZ3JlZ2F0ZSk7CgkJCQkJfSksCgkJCQkkZWxtJGNvcmUkUmVzdWx0JE9rKF9MaXN0X05pbCksCgkJCQlyZWNvcmRUeXBlLmZpZWxkcykpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcExpc3RFeHRyYSR6aXAgPSAkZWxtJGNvcmUkTGlzdCRtYXAyKCRlbG0kY29yZSRUdXBsZSRwYWlyKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtVHlwZUFuZERlcGVuZGVuY2llc1JlY3Vyc2l2ZWx5RnJvbUFubm90YXRpb25JbnRlcm5hbCA9IEYzKAoJZnVuY3Rpb24gKHN0YWNrLCBtb2R1bGVzLCBfdjE3KSB7CgkJdmFyIGN1cnJlbnRNb2R1bGUgPSBfdjE3LmE7CgkJdmFyIHR5cGVBbm5vdGF0aW9uID0gX3YxNy5iOwoJCXN3aXRjaCAodHlwZUFubm90YXRpb24uJCkgewoJCQljYXNlICdUeXBlZCc6CgkJCQl2YXIgaW5zdGFudGlhdGVkTm9kZSA9IHR5cGVBbm5vdGF0aW9uLmE7CgkJCQl2YXIgYXJndW1lbnRzTm9kZXMgPSB0eXBlQW5ub3RhdGlvbi5iOwoJCQkJcmV0dXJuIEEzKAoJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtVHlwZUFuZERlcGVuZGVuY2llc1JlY3Vyc2l2ZWx5RnJvbUFubm90YXRpb25JbnRlcm5hbFR5cGVkLAoJCQkJCXN0YWNrLAoJCQkJCW1vZHVsZXMsCgkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJY3VycmVudE1vZHVsZSwKCQkJCQkJX1V0aWxzX1R1cGxlMihpbnN0YW50aWF0ZWROb2RlLCBhcmd1bWVudHNOb2RlcykpKTsKCQkJY2FzZSAnUmVjb3JkJzoKCQkJCXZhciBmaWVsZHNOb2RlcyA9IHR5cGVBbm5vdGF0aW9uLmE7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAsCgkJCQkJZnVuY3Rpb24gKF92MjIpIHsKCQkJCQkJdmFyIGZpZWxkcyA9IF92MjIuYTsKCQkJCQkJdmFyIGZpZWxkc0RlcGVuZGVuY2llcyA9IF92MjIuYjsKCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRSZWNvcmRFbG1UeXBlKAoJCQkJCQkJCXtmaWVsZHM6IGZpZWxkc30pLAoJCQkJCQkJZmllbGRzRGVwZW5kZW5jaWVzKTsKCQkJCQl9LAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbGlzdFR1cGxlU2Vjb25kRGljdFVuaW9uLAoJCQkJCQlBMigKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21tb24kcmVzdWx0TGlzdE1hcENvbWJpbmUsCgkJCQkJCQlmdW5jdGlvbiAoX3YxOSkgewoJCQkJCQkJCXZhciBmaWVsZE5hbWVOb2RlID0gX3YxOS5hOwoJCQkJCQkJCXZhciBmaWVsZEFubm90YXRpb24gPSBfdjE5LmI7CgkJCQkJCQkJdmFyIF92MjAgPSBBMygKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VFbG1UeXBlQW5kRGVwZW5kZW5jaWVzUmVjdXJzaXZlbHlGcm9tQW5ub3RhdGlvbkludGVybmFsLAoJCQkJCQkJCQlzdGFjaywKCQkJCQkJCQkJbW9kdWxlcywKCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCWN1cnJlbnRNb2R1bGUsCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKGZpZWxkQW5ub3RhdGlvbikpKTsKCQkJCQkJCQlpZiAoX3YyMC4kID09PSAnRXJyJykgewoJCQkJCQkJCQl2YXIgZXJyb3IgPSBfdjIwLmE7CgkJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCQkJCQkJCSdGYWlsZWQgdG8gcGFyc2UgYW5ub3RhdGlvbiBvZiBmaWVsZCBcJycgKyAoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShmaWVsZE5hbWVOb2RlKSArICgnXCc6ICcgKyBlcnJvcikpKTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgX3YyMSA9IF92MjAuYTsKCQkJCQkJCQkJdmFyIGZpZWxkVHlwZSA9IF92MjEuYTsKCQkJCQkJCQkJdmFyIGZpZWxkVHlwZURlcHMgPSBfdjIxLmI7CgkJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKGZpZWxkTmFtZU5vZGUpLAoJCQkJCQkJCQkJCQlmaWVsZFR5cGUpLAoJCQkJCQkJCQkJCWZpZWxkVHlwZURlcHMpKTsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkbWFwLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlLCBmaWVsZHNOb2RlcykpKSk7CgkJCWNhc2UgJ1R1cGxlZCc6CgkJCQl2YXIgdHVwbGVkID0gdHlwZUFubm90YXRpb24uYTsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQlmdW5jdGlvbiAoX3YyMykgewoJCQkJCQl2YXIgaXRlbXMgPSBfdjIzLmE7CgkJCQkJCXZhciBpdGVtc0RlcGVuZGVuY2llcyA9IF92MjMuYjsKCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRUdXBsZUVsbVR5cGUoaXRlbXMpLAoJCQkJCQkJaXRlbXNEZXBlbmRlbmNpZXMpOwoJCQkJCX0sCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRsaXN0VHVwbGVTZWNvbmREaWN0VW5pb24sCgkJCQkJCUEyKAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbW1vbiRyZXN1bHRMaXN0TWFwQ29tYmluZSwKCQkJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtVHlwZUFuZERlcGVuZGVuY2llc1JlY3Vyc2l2ZWx5RnJvbUFubm90YXRpb25JbnRlcm5hbCwgc3RhY2ssIG1vZHVsZXMpLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlLAoJCQkJCQkJCQkkZWxtJGNvcmUkVHVwbGUkcGFpcihjdXJyZW50TW9kdWxlKSksCgkJCQkJCQkJdHVwbGVkKSkpKTsKCQkJY2FzZSAnR2VuZXJpY1R5cGUnOgoJCQkJdmFyIGdlbmVyaWNOYW1lID0gdHlwZUFubm90YXRpb24uYTsKCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEdlbmVyaWNUeXBlKGdlbmVyaWNOYW1lKSwKCQkJCQkJJGVsbSRjb3JlJERpY3QkZW1wdHkpKTsKCQkJY2FzZSAnVW5pdCc6CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQlfVXRpbHNfVHVwbGUyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJFVuaXRUeXBlLCAkZWxtJGNvcmUkRGljdCRlbXB0eSkpOwoJCQljYXNlICdGdW5jdGlvblR5cGVBbm5vdGF0aW9uJzoKCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycignRnVuY3Rpb25UeXBlQW5ub3RhdGlvbiBub3QgaW1wbGVtZW50ZWQnKTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycignR2VuZXJpY1JlY29yZCBub3QgaW1wbGVtZW50ZWQnKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtVHlwZUFuZERlcGVuZGVuY2llc1JlY3Vyc2l2ZWx5RnJvbUFubm90YXRpb25JbnRlcm5hbFR5cGVkID0gRjMoCglmdW5jdGlvbiAoc3RhY2ssIG1vZHVsZXMsIF92MCkgewoJCXZhciBjdXJyZW50TW9kdWxlID0gX3YwLmE7CgkJdmFyIF92MSA9IF92MC5iOwoJCXZhciBpbnN0YW50aWF0ZWROb2RlID0gX3YxLmE7CgkJdmFyIGFyZ3VtZW50c05vZGVzID0gX3YxLmI7CgkJdmFyIF92MiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoaW5zdGFudGlhdGVkTm9kZSk7CgkJdmFyIGluc3RhbnRpYXRlZE1vZHVsZUFsaWFzID0gX3YyLmE7CgkJdmFyIGluc3RhbnRpYXRlZExvY2FsTmFtZSA9IF92Mi5iOwoJCXZhciBpbnN0YW50aWF0ZWRSZXN1bHQgPSBmdW5jdGlvbiAoKSB7CgkJCXZhciBfdjYgPSBBMigKCQkJCSRlbG0kY29yZSREaWN0JGdldCwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQknLicsCgkJCQkJX1V0aWxzX2FwKAoJCQkJCQlpbnN0YW50aWF0ZWRNb2R1bGVBbGlhcywKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJW2luc3RhbnRpYXRlZExvY2FsTmFtZV0pKSksCgkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUVsbVR5cGVMZWF2ZXNOYW1lcyk7CgkJCWlmIChfdjYuJCA9PT0gJ0p1c3QnKSB7CgkJCQl2YXIgbGVhZiA9IF92Ni5hOwoJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkJX1V0aWxzX1R1cGxlMygKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkTGVhZkVsbVR5cGUobGVhZiksCgkJCQkJCSRlbG0kY29yZSREaWN0JGVtcHR5LAoJCQkJCQlfTGlzdF9OaWwpKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBtYXliZUluc3RhbnRpYXRlZE1vZHVsZSA9IF9VdGlsc19lcShpbnN0YW50aWF0ZWRNb2R1bGVBbGlhcywgX0xpc3RfTmlsKSA/ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCQkJCWN1cnJlbnRNb2R1bGUsCgkJCQkJCSRlbG0kY29yZSRMaXN0JGhlYWQoCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsCgkJCQkJCQkJZnVuY3Rpb24gKG1vZHVsZUltcG9ydCkgewoJCQkJCQkJCQl2YXIgX3YxNCA9IEEyKCRlbG0kY29yZSRNYXliZSRtYXAsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUsIG1vZHVsZUltcG9ydC5leHBvc2luZ0xpc3QpOwoJCQkJCQkJCQlpZiAoX3YxNC4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXZhciBpbXBvcnRFeHBvc2luZyA9IF92MTQuYTsKCQkJCQkJCQkJCXZhciBjb250YWluc01hdGNoaW5nRXhwb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJCQkJCQlpZiAoaW1wb3J0RXhwb3NpbmcuJCA9PT0gJ0FsbCcpIHsKCQkJCQkJCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCXZhciB0b3BMZXZlbEV4cG9zaXRpb25zID0gaW1wb3J0RXhwb3NpbmcuYTsKCQkJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkYW55LAoJCQkJCQkJCQkJCQkJZnVuY3Rpb24gKHRvcExldmVsRXhwb3NlKSB7CgkJCQkJCQkJCQkJCQkJdmFyIF92MTYgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKHRvcExldmVsRXhwb3NlKTsKCQkJCQkJCQkJCQkJCQlzd2l0Y2ggKF92MTYuJCkgewoJCQkJCQkJCQkJCQkJCQljYXNlICdJbmZpeEV4cG9zZSc6CgkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCQkJCQkJCQkJCWNhc2UgJ0Z1bmN0aW9uRXhwb3NlJzoKCQkJCQkJCQkJCQkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQkJCQkJCQkJCQkJY2FzZSAnVHlwZU9yQWxpYXNFeHBvc2UnOgoJCQkJCQkJCQkJCQkJCQkJdmFyIHR5cGVPckFsaWFzRXhwb3NlID0gX3YxNi5hOwoJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIF9VdGlsc19lcSh0eXBlT3JBbGlhc0V4cG9zZSwgaW5zdGFudGlhdGVkTG9jYWxOYW1lKTsKCQkJCQkJCQkJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQkJCQkJCQkJCXZhciB0eXBlRXhwb3NlID0gX3YxNi5hOwoJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIF9VdGlsc19lcSh0eXBlRXhwb3NlLm5hbWUsIGluc3RhbnRpYXRlZExvY2FsTmFtZSk7CgkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQkJCXRvcExldmVsRXhwb3NpdGlvbnMpOwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0oKTsKCQkJCQkJCQkJCXJldHVybiBjb250YWluc01hdGNoaW5nRXhwb3NpdGlvbiA/IEEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJCQkJCSRlbG0kY29yZSRUdXBsZSRzZWNvbmQsCgkJCQkJCQkJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCQkJCQkJCQlyZXR1cm4gJC5wYXJzZWRTeW50YXg7CgkJCQkJCQkJCQkJCX0pLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRmaW5kTW9kdWxlQnlOYW1lLAoJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKG1vZHVsZUltcG9ydC5tb2R1bGVOYW1lKSwKCQkJCQkJCQkJCQkJbW9kdWxlcykpIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCQkJCX0KCQkJCQkJCQl9LAoJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZSwgY3VycmVudE1vZHVsZS5pbXBvcnRzKSkpKSkgOiBBMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkYW5kVGhlbiwKCQkJCQlmdW5jdGlvbiAobWF0Y2hpbmdJbXBvcnQpIHsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJJGVsbSRjb3JlJFR1cGxlJHNlY29uZCwKCQkJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJCQlyZXR1cm4gJC5wYXJzZWRTeW50YXg7CgkJCQkJCQkJfSksCgkJCQkJCQlBMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRmaW5kTW9kdWxlQnlOYW1lLAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUobWF0Y2hpbmdJbXBvcnQubW9kdWxlTmFtZSksCgkJCQkJCQkJbW9kdWxlcykpOwoJCQkJCX0sCgkJCQkJJGVsbSRjb3JlJExpc3QkaGVhZCgKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXIsCgkJCQkJCQlmdW5jdGlvbiAobW9kdWxlSW1wb3J0KSB7CgkJCQkJCQkJcmV0dXJuIF9VdGlsc19lcSgKCQkJCQkJCQkJaW5zdGFudGlhdGVkTW9kdWxlQWxpYXMsCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoCgkJCQkJCQkJCQlBMigkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsIG1vZHVsZUltcG9ydC5tb2R1bGVOYW1lLCBtb2R1bGVJbXBvcnQubW9kdWxlQWxpYXMpKSk7CgkJCQkJCQl9LAoJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkbWFwLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlLCBjdXJyZW50TW9kdWxlLmltcG9ydHMpKSkpOwoJCQkJaWYgKG1heWJlSW5zdGFudGlhdGVkTW9kdWxlLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCQkJJ0RpZCBub3QgZmluZCByZWZlcmVuY2VkIG1vZHVsZSBcJycgKyAoQTIoJGVsbSRjb3JlJFN0cmluZyRqb2luLCAnLicsIGluc3RhbnRpYXRlZE1vZHVsZUFsaWFzKSArICdcJycpKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGluc3RhbnRpYXRlZE1vZHVsZSA9IG1heWJlSW5zdGFudGlhdGVkTW9kdWxlLmE7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCQkJCSRlbG0kY29yZSRSZXN1bHQkRXJyKAoJCQkJCQkJJ0RpZCBub3QgZmluZCBkZWNsYXJhdGlvbiBvZiBcJycgKyAoaW5zdGFudGlhdGVkTG9jYWxOYW1lICsgKCdcJyBpbiBtb2R1bGUgXCcnICsgKEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy4nLCBpbnN0YW50aWF0ZWRNb2R1bGVBbGlhcykgKyAnXCcnKSkpKSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQkJZnVuY3Rpb24gKGRlY2xhcmF0aW9uKSB7CgkJCQkJCQkJaWYgKGRlY2xhcmF0aW9uLiQgPT09ICdBbGlhc0RlY2xhcmF0aW9uJykgewoJCQkJCQkJCQl2YXIgYWxpYXNEZWNsYXJhdGlvbiA9IGRlY2xhcmF0aW9uLmE7CgkJCQkJCQkJCXZhciBfdjEwID0gQTMoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUVsbVR5cGVBbmREZXBlbmRlbmNpZXNSZWN1cnNpdmVseUZyb21Bbm5vdGF0aW9uSW50ZXJuYWwsCgkJCQkJCQkJCQlzdGFjaywKCQkJCQkJCQkJCW1vZHVsZXMsCgkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCWluc3RhbnRpYXRlZE1vZHVsZSwKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKGFsaWFzRGVjbGFyYXRpb24udHlwZUFubm90YXRpb24pKSk7CgkJCQkJCQkJCWlmIChfdjEwLiQgPT09ICdFcnInKSB7CgkJCQkJCQkJCQl2YXIgZXJyb3IgPSBfdjEwLmE7CgkJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoCgkJCQkJCQkJCQkJJ0ZhaWxlZCB0byBwYXJzZSBhbGlhcyBcJycgKyAoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShhbGlhc0RlY2xhcmF0aW9uLm5hbWUpICsgKCdcJyB0eXBlIGFubm90YXRpb246ICcgKyBlcnJvcikpKTsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXZhciBfdjExID0gX3YxMC5hOwoJCQkJCQkJCQkJdmFyIGFsaWFzZWRUeXBlID0gX3YxMS5hOwoJCQkJCQkJCQkJdmFyIGFsaWFzZWRUeXBlRGVwcyA9IF92MTEuYjsKCQkJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTMoCgkJCQkJCQkJCQkJCWFsaWFzZWRUeXBlLAoJCQkJCQkJCQkJCQlhbGlhc2VkVHlwZURlcHMsCgkJCQkJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZSwgYWxpYXNEZWNsYXJhdGlvbi5nZW5lcmljcykpKTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBjaG9pY2VUeXBlRGVjbGFyYXRpb24gPSBkZWNsYXJhdGlvbi5hOwoJCQkJCQkJCQl2YXIgdHlwZU5hbWUgPSBBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQkJCScuJywKCQkJCQkJCQkJCV9VdGlsc19hcCgKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGUkbW9kdWxlTmFtZSgKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShpbnN0YW50aWF0ZWRNb2R1bGUubW9kdWxlRGVmaW5pdGlvbikpLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShjaG9pY2VUeXBlRGVjbGFyYXRpb24ubmFtZSkKCQkJCQkJCQkJCQkJXSkpKTsKCQkJCQkJCQkJdmFyIGdlbmVyaWNzTmFtZXMgPSBBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUsIGNob2ljZVR5cGVEZWNsYXJhdGlvbi5nZW5lcmljcyk7CgkJCQkJCQkJCXJldHVybiBBMigkZWxtJGNvcmUkU2V0JG1lbWJlciwgdHlwZU5hbWUsIHN0YWNrLnR5cGVzVG9JZ25vcmUpID8gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkJCQkJCV9VdGlsc19UdXBsZTMoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkQ2hvaWNlRWxtVHlwZSh0eXBlTmFtZSksCgkJCQkJCQkJCQkJJGVsbSRjb3JlJERpY3QkZW1wdHksCgkJCQkJCQkJCQkJZ2VuZXJpY3NOYW1lcykpIDogQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJCQkJCWZ1bmN0aW9uIChfdjEzKSB7CgkJCQkJCQkJCQkJdmFyIGNvbnN0cnVjdG9ycyA9IF92MTMuYTsKCQkJCQkJCQkJCQl2YXIgY29uc3RydWN0b3JzRGVwcyA9IF92MTMuYjsKCQkJCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMygKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkQ2hvaWNlRWxtVHlwZSh0eXBlTmFtZSksCgkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJERpY3QkaW5zZXJ0LAoJCQkJCQkJCQkJCQkJdHlwZU5hbWUsCgkJCQkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJCQkJcGFyYW1ldGVyczogZ2VuZXJpY3NOYW1lcywKCQkJCQkJCQkJCQkJCQl0YWdzOiAkZWxtJGNvcmUkRGljdCRmcm9tTGlzdChjb25zdHJ1Y3RvcnMpCgkJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCQkJY29uc3RydWN0b3JzRGVwcyksCgkJCQkJCQkJCQkJCWdlbmVyaWNzTmFtZXMpOwoJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxpc3RUdXBsZVNlY29uZERpY3RVbmlvbiwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbW1vbiRyZXN1bHRMaXN0TWFwQ29tYmluZSwKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKGNvbnN0cnVjdG9yKSB7CgkJCQkJCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAsCgkJCQkJCQkJCQkJCQkJZnVuY3Rpb24gKF92MTIpIHsKCQkJCQkJCQkJCQkJCQkJdmFyIGFyZ3VtZW50c1R5cGVzID0gX3YxMi5hOwoJCQkJCQkJCQkJCQkJCQl2YXIgYXJndW1lbnRzRGVwcyA9IF92MTIuYjsKCQkJCQkJCQkJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoY29uc3RydWN0b3IubmFtZSksCgkJCQkJCQkJCQkJCQkJCQkJYXJndW1lbnRzVHlwZXMpLAoJCQkJCQkJCQkJCQkJCQkJYXJndW1lbnRzRGVwcyk7CgkJCQkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAsCgkJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxpc3RUdXBsZVNlY29uZERpY3RVbmlvbiwKCQkJCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRhcHBlbmQoCgkJCQkJCQkJCQkJCQkJCQkJJ0ZhaWxlZCB0byBwYXJzZSBjb25zdHJ1Y3RvciBcJycgKyAoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShjb25zdHJ1Y3Rvci5uYW1lKSArICdcJzogJykpLAoJCQkJCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbW1vbiRyZXN1bHRMaXN0TWFwQ29tYmluZSwKCQkJCQkJCQkJCQkJCQkJCQlmdW5jdGlvbiAoY29uc3RydWN0b3JBcmd1bWVudCkgewoJCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCQkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCQkJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRhcHBlbmQoJ0ZhaWxlZCB0byBwYXJzZSBhcmd1bWVudDogJyksCgkJCQkJCQkJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUVsbVR5cGVBbmREZXBlbmRlbmNpZXNSZWN1cnNpdmVseUZyb21Bbm5vdGF0aW9uSW50ZXJuYWwsCgkJCQkJCQkJCQkJCQkJCQkJCQkJewoJCQkJCQkJCQkJCQkJCQkJCQkJCQl0eXBlc1RvSWdub3JlOiBBMigkZWxtJGNvcmUkU2V0JGluc2VydCwgdHlwZU5hbWUsIHN0YWNrLnR5cGVzVG9JZ25vcmUpCgkJCQkJCQkJCQkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQkJCQkJCQkJCQltb2R1bGVzLAoJCQkJCQkJCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCWluc3RhbnRpYXRlZE1vZHVsZSwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShjb25zdHJ1Y3RvckFyZ3VtZW50KSkpKTsKCQkJCQkJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCQkJCQkJCWNvbnN0cnVjdG9yLl9hcmd1bWVudHMpKSkpOwoJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUsIGNob2ljZVR5cGVEZWNsYXJhdGlvbi5jb25zdHJ1Y3RvcnMpKSkpOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRoZWFkKAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsCgkJCQkJCQkJCWZ1bmN0aW9uIChkZWNsYXJhdGlvbikgewoJCQkJCQkJCQkJc3dpdGNoIChkZWNsYXJhdGlvbi4kKSB7CgkJCQkJCQkJCQkJY2FzZSAnQWxpYXNEZWNsYXJhdGlvbic6CgkJCQkJCQkJCQkJCXZhciBhbGlhc0RlY2xhcmF0aW9uID0gZGVjbGFyYXRpb24uYTsKCQkJCQkJCQkJCQkJcmV0dXJuICghX1V0aWxzX2VxKAoJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShhbGlhc0RlY2xhcmF0aW9uLm5hbWUpLAoJCQkJCQkJCQkJCQkJaW5zdGFudGlhdGVkTG9jYWxOYW1lKSkgPyAkZWxtJGNvcmUkTWF5YmUkTm90aGluZyA6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkQWxpYXNEZWNsYXJhdGlvbihhbGlhc0RlY2xhcmF0aW9uKSk7CgkJCQkJCQkJCQkJY2FzZSAnQ3VzdG9tVHlwZURlY2xhcmF0aW9uJzoKCQkJCQkJCQkJCQkJdmFyIGNob2ljZVR5cGVEZWNsYXJhdGlvbiA9IGRlY2xhcmF0aW9uLmE7CgkJCQkJCQkJCQkJCXJldHVybiAoIV9VdGlsc19lcSgKCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoY2hvaWNlVHlwZURlY2xhcmF0aW9uLm5hbWUpLAoJCQkJCQkJCQkJCQkJaW5zdGFudGlhdGVkTG9jYWxOYW1lKSkgPyAkZWxtJGNvcmUkTWF5YmUkTm90aGluZyA6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkQ2hvaWNlVHlwZURlY2xhcmF0aW9uKGNob2ljZVR5cGVEZWNsYXJhdGlvbikpOwoJCQkJCQkJCQkJCWRlZmF1bHQ6CgkJCQkJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfSwKCQkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkbWFwLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlLCBpbnN0YW50aWF0ZWRNb2R1bGUuZGVjbGFyYXRpb25zKSkpKSk7CgkJCQl9CgkJCX0KCQl9KCk7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkUmVzdWx0JGFuZFRoZW4sCgkJCWZ1bmN0aW9uIChfdjMpIHsKCQkJCXZhciBpbnN0YW50aWF0ZWRUeXBlID0gX3YzLmE7CgkJCQl2YXIgaW5zdGFudGlhdGVkRGVwZW5kZW5jaWVzID0gX3YzLmI7CgkJCQl2YXIgZ2VuZXJpY3NOYW1lcyA9IF92My5jOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRSZXN1bHQkYW5kVGhlbiwKCQkJCQlmdW5jdGlvbiAoX3Y0KSB7CgkJCQkJCXZhciBpbnN0YW5jZUFyZ3VtZW50cyA9IF92NC5hOwoJCQkJCQl2YXIgaW5zdGFuY2VBcmd1bWVudHNEZXBzID0gX3Y0LmI7CgkJCQkJCWlmIChfVXRpbHNfZXEoaW5zdGFuY2VBcmd1bWVudHMsIF9MaXN0X05pbCkpIHsKCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJCQkJCV9VdGlsc19UdXBsZTIoaW5zdGFudGlhdGVkVHlwZSwgaW5zdGFudGlhdGVkRGVwZW5kZW5jaWVzKSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlpZiAoaW5zdGFudGlhdGVkVHlwZS4kID09PSAnUmVjb3JkRWxtVHlwZScpIHsKCQkJCQkJCQl2YXIgcmVjb3JkVHlwZSA9IGluc3RhbnRpYXRlZFR5cGUuYTsKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkYXBwZW5kKCdGYWlsZWQgdG8gY29uY3JldGl6ZSByZWNvcmQgaW5zdGFuY2U6ICcpLAoJCQkJCQkJCQkoIV9VdGlsc19lcSgKCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGxlbmd0aChnZW5lcmljc05hbWVzKSwKCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGxlbmd0aChpbnN0YW5jZUFyZ3VtZW50cykpKSA/ICRlbG0kY29yZSRSZXN1bHQkRXJyKCdNaXNtYXRjaCBiZXR3ZWVuIGxlbmd0aHMgb2YgZ2VuZXJpY3NOYW1lcyBhbmQgaW5zdGFuY2VBcmd1bWVudHMnKSA6IEEyKAoJCQkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAsCgkJCQkJCQkJCQlmdW5jdGlvbiAoY29uY3JldGl6ZWRSZWNvcmQpIHsKCQkJCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkUmVjb3JkRWxtVHlwZShjb25jcmV0aXplZFJlY29yZCksCgkJCQkJCQkJCQkJCUEyKCRlbG0kY29yZSREaWN0JHVuaW9uLCBpbnN0YW50aWF0ZWREZXBlbmRlbmNpZXMsIGluc3RhbmNlQXJndW1lbnRzRGVwcykpOwoJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHRyeUNvbmNyZXRpemVSZWNvcmRJbnN0YW5jZSwKCQkJCQkJCQkJCQkkZWxtJGNvcmUkRGljdCRmcm9tTGlzdCgKCQkJCQkJCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHBMaXN0RXh0cmEkemlwLCBnZW5lcmljc05hbWVzLCBpbnN0YW5jZUFyZ3VtZW50cykpLAoJCQkJCQkJCQkJCXJlY29yZFR5cGUpKSk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkSW5zdGFuY2VFbG1UeXBlKAoJCQkJCQkJCQkJCXtfYXJndW1lbnRzOiBpbnN0YW5jZUFyZ3VtZW50cywgaW5zdGFudGlhdGVkOiBpbnN0YW50aWF0ZWRUeXBlfSksCgkJCQkJCQkJCQlBMigkZWxtJGNvcmUkRGljdCR1bmlvbiwgaW5zdGFudGlhdGVkRGVwZW5kZW5jaWVzLCBpbnN0YW5jZUFyZ3VtZW50c0RlcHMpKSk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9LAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbGlzdFR1cGxlU2Vjb25kRGljdFVuaW9uLAoJCQkJCQlBMigKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21tb24kcmVzdWx0TGlzdE1hcENvbWJpbmUsCgkJCQkJCQlBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUVsbVR5cGVBbmREZXBlbmRlbmNpZXNSZWN1cnNpdmVseUZyb21Bbm5vdGF0aW9uSW50ZXJuYWwsIHN0YWNrLCBtb2R1bGVzKSwKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZSwKCQkJCQkJCQkJJGVsbSRjb3JlJFR1cGxlJHBhaXIoY3VycmVudE1vZHVsZSkpLAoJCQkJCQkJCWFyZ3VtZW50c05vZGVzKSkpKTsKCQkJfSwKCQkJaW5zdGFudGlhdGVkUmVzdWx0KTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VFbG1UeXBlQW5kRGVwZW5kZW5jaWVzUmVjdXJzaXZlbHlGcm9tQW5ub3RhdGlvbiA9IEYyKAoJZnVuY3Rpb24gKG1vZHVsZXMsIF92MCkgewoJCXZhciBfdjEgPSBfdjAuYTsKCQl2YXIgY3VycmVudE1vZHVsZUZpbGVQYXRoID0gX3YxLmE7CgkJdmFyIGN1cnJlbnRNb2R1bGUgPSBfdjEuYjsKCQl2YXIgdHlwZUFubm90YXRpb25Ob2RlID0gX3YwLmI7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRMb2NhdGVkSW5Tb3VyY2VGaWxlcygKCQkJCXsKCQkJCQlmaWxlUGF0aDogY3VycmVudE1vZHVsZUZpbGVQYXRoLAoJCQkJCWxvY2F0aW9uSW5Nb2R1bGVUZXh0OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHJhbmdlKHR5cGVBbm5vdGF0aW9uTm9kZSkKCQkJCX0pLAoJCQlBMygKCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtVHlwZUFuZERlcGVuZGVuY2llc1JlY3Vyc2l2ZWx5RnJvbUFubm90YXRpb25JbnRlcm5hbCwKCQkJCXt0eXBlc1RvSWdub3JlOiAkZWxtJGNvcmUkU2V0JGVtcHR5fSwKCQkJCW1vZHVsZXMsCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCWN1cnJlbnRNb2R1bGUsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZSh0eXBlQW5ub3RhdGlvbk5vZGUpKSkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUludGVyZmFjZVJlY29yZFRyZWUgPSBGNCgKCWZ1bmN0aW9uIChlcnJvckZyb21TdHJpbmcsIGludGVncmF0ZUZpZWxkTmFtZSwgdHlwZUFubm90YXRpb24sIHNlZWQpIHsKCQl2YXIgZXJyb3JVbnN1cHBvcnRlZFR5cGUgPSBmdW5jdGlvbiAodHlwZVRleHQpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQlfTGlzdF9OaWwsCgkJCQkJZXJyb3JGcm9tU3RyaW5nKCdVbnN1cHBvcnRlZCB0eXBlOiAnICsgdHlwZVRleHQpKSk7CgkJfTsKCQlzd2l0Y2ggKHR5cGVBbm5vdGF0aW9uLiQpIHsKCQkJY2FzZSAnUmVjb3JkRWxtVHlwZSc6CgkJCQl2YXIgcmVjb3JkID0gdHlwZUFubm90YXRpb24uYTsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRSZWNvcmRUcmVlQnJhbmNoLAoJCQkJCUEyKAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tbW9uJHJlc3VsdExpc3RNYXBDb21iaW5lLAoJCQkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJCQl2YXIgZmllbGROYW1lID0gX3YxLmE7CgkJCQkJCQl2YXIgZmllbGRUeXBlID0gX3YxLmI7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRhbmRUaGVuLAoJCQkJCQkJCWZ1bmN0aW9uICh3aXRoRmllbGROYW1lSW50ZWdyYXRlZCkgewoJCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCQkJCQkJJGVsbSRjb3JlJFR1cGxlJG1hcEZpcnN0KAoJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMoZmllbGROYW1lKSksCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJCQkJCQkkZWxtJGNvcmUkVHVwbGUkcGFpcihmaWVsZE5hbWUpLAoJCQkJCQkJCQkJCUE0KCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlSW50ZXJmYWNlUmVjb3JkVHJlZSwgZXJyb3JGcm9tU3RyaW5nLCBpbnRlZ3JhdGVGaWVsZE5hbWUsIGZpZWxkVHlwZSwgd2l0aEZpZWxkTmFtZUludGVncmF0ZWQpKSk7CgkJCQkJCQkJfSwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXBFcnJvciwKCQkJCQkJCQkJJGVsbSRjb3JlJFR1cGxlJHBhaXIoCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJW2ZpZWxkTmFtZV0pKSwKCQkJCQkJCQkJQTIoaW50ZWdyYXRlRmllbGROYW1lLCBmaWVsZE5hbWUsIHNlZWQpKSk7CgkJCQkJCX0sCgkJCQkJCXJlY29yZC5maWVsZHMpKTsKCQkJY2FzZSAnQ2hvaWNlRWxtVHlwZSc6CgkJCQlyZXR1cm4gZXJyb3JVbnN1cHBvcnRlZFR5cGUoJ2Nob2ljZScpOwoJCQljYXNlICdJbnN0YW5jZUVsbVR5cGUnOgoJCQkJcmV0dXJuIGVycm9yVW5zdXBwb3J0ZWRUeXBlKCdpbnN0YW5jZScpOwoJCQljYXNlICdUdXBsZUVsbVR5cGUnOgoJCQkJcmV0dXJuIGVycm9yVW5zdXBwb3J0ZWRUeXBlKCd0dXBsZScpOwoJCQljYXNlICdMZWFmRWxtVHlwZSc6CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRSZWNvcmRUcmVlTGVhZihzZWVkKSk7CgkJCWNhc2UgJ0dlbmVyaWNUeXBlJzoKCQkJCXJldHVybiBlcnJvclVuc3VwcG9ydGVkVHlwZSgnZ2VuZXJpYycpOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkUmVjb3JkVHJlZUJyYW5jaChfTGlzdF9OaWwpKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtTWFrZUZ1bmN0aW9uQ29uZmlnRnJvbVR5cGVBbm5vdGF0aW9uID0gRjIoCglmdW5jdGlvbiAoY3VycmVudE1vZHVsZSwgdHlwZUFubm90YXRpb25Ob2RlKSB7CgkJdmFyIF92MCA9IEEyKAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUVsbVR5cGVBbmREZXBlbmRlbmNpZXNSZWN1cnNpdmVseUZyb21Bbm5vdGF0aW9uLAoJCQkkZWxtJGNvcmUkRGljdCRlbXB0eSwKCQkJX1V0aWxzX1R1cGxlMihjdXJyZW50TW9kdWxlLCB0eXBlQW5ub3RhdGlvbk5vZGUpKTsKCQlpZiAoX3YwLiQgPT09ICdFcnInKSB7CgkJCXZhciBfdjEgPSBfdjAuYTsKCQkJdmFyIGVycm9yID0gX3YxLmI7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycignRmFpbGVkIHRvIHBhcnNlIHR5cGUgYW5ub3RhdGlvbjogJyArIGVycm9yKTsKCQl9IGVsc2UgewoJCQl2YXIgX3YyID0gX3YwLmE7CgkJCXZhciB0eXBlQW5ub3RhdGlvbiA9IF92Mi5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGNvcmUkUmVzdWx0JGFuZFRoZW4sCgkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUVsbU1ha2VGdW5jdGlvbkNvbmZpZ0Zyb21SZWNvcmRUcmVlLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXBFcnJvciwKCQkJCQlmdW5jdGlvbiAoX3YzKSB7CgkJCQkJCXZhciBwYXRoID0gX3YzLmE7CgkJCQkJCXZhciBlcnJvciA9IF92My5iOwoJCQkJCQlyZXR1cm4gJ0ZhaWxlZCBhdCBwYXRoICcgKyAoQTIoJGVsbSRjb3JlJFN0cmluZyRqb2luLCAnLicsIHBhdGgpICsgKCc6ICcgKyBlcnJvcikpOwoJCQkJCX0sCgkJCQkJQTQoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlSW50ZXJmYWNlUmVjb3JkVHJlZSwKCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwKCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRhbHdheXMoJGVsbSRjb3JlJFJlc3VsdCRPayksCgkJCQkJCXR5cGVBbm5vdGF0aW9uLAoJCQkJCQlfVXRpbHNfVHVwbGUwKSkpOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZWxtTWFrZUZ1bmN0aW9uTmFtZVN0YXJ0ID0gJ2VsbV9tYWtlJzsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGZ1bmN0aW9uTmFtZUZsYWdzU2VwYXJhdG9yID0gJ19fX18nOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VGbGFnc0FuZFBhdGhQYXR0ZXJuRnJvbUZ1bmN0aW9uTmFtZSA9IEYyKAoJZnVuY3Rpb24gKHByZWZpeGVzLCBmdW5jdGlvbk5hbWUpIHsKCQl2YXIgX3YwID0gQTIoJGVsbSRjb3JlJFN0cmluZyRzcGxpdCwgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZnVuY3Rpb25OYW1lRmxhZ3NTZXBhcmF0b3IsIGZ1bmN0aW9uTmFtZSk7CgkJaWYgKCFfdjAuYikgewoJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ1N0cmluZy5zcGxpdCByZXR1cm5lZCBlbXB0eSBsaXN0Jyk7CgkJfSBlbHNlIHsKCQkJaWYgKCFfdjAuYi5iKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ0RpZCBub3QgZmluZCBzZXBhcmF0b3IgYmV0d2VlbiBmbGFncyBhbmQgcGF0aCcpOwoJCQl9IGVsc2UgewoJCQkJdmFyIHByZWZpeEFuZEZsYWdzID0gX3YwLmE7CgkJCQl2YXIgcmVzdCA9IF92MC5iOwoJCQkJdmFyIHBhdGggPSBBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGZ1bmN0aW9uTmFtZUZsYWdzU2VwYXJhdG9yLCByZXN0KTsKCQkJCXZhciBjb250aW51ZVdpdGhQcmVmaXhTdHJpbmdBbmRGbGFncyA9IEYyKAoJCQkJCWZ1bmN0aW9uIChwcmVmaXhTdHJpbmcsIGZsYWdzKSB7CgkJCQkJCXZhciBfdjIgPSBBMigkZWxtJGNvcmUkRGljdCRnZXQsIHByZWZpeFN0cmluZywgcHJlZml4ZXMpOwoJCQkJCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKCdVbmtub3duIHByZWZpeDogXCcnICsgKHByZWZpeFN0cmluZyArICdcJycpKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBwcmVmaXggPSBfdjIuYTsKCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJCQkJCV9VdGlsc19UdXBsZTMocHJlZml4LCBmbGFncywgcGF0aCkpOwoJCQkJCQl9CgkJCQkJfSk7CgkJCQl2YXIgX3YxID0gQTIoJGVsbSRjb3JlJFN0cmluZyRzcGxpdCwgJ19fJywgcHJlZml4QW5kRmxhZ3MpOwoJCQkJaWYgKCFfdjEuYikgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycignU3RyaW5nLnNwbGl0IHJldHVybmVkIGVtcHR5IGxpc3QnKTsKCQkJCX0gZWxzZSB7CgkJCQkJaWYgKCFfdjEuYi5iKSB7CgkJCQkJCXZhciBwcmVmaXggPSBfdjEuYTsKCQkJCQkJcmV0dXJuIEEyKGNvbnRpbnVlV2l0aFByZWZpeFN0cmluZ0FuZEZsYWdzLCBwcmVmaXgsIF9MaXN0X05pbCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIHByZWZpeCA9IF92MS5hOwoJCQkJCQl2YXIgZmxhZ3MgPSBfdjEuYjsKCQkJCQkJcmV0dXJuIEEyKGNvbnRpbnVlV2l0aFByZWZpeFN0cmluZ0FuZEZsYWdzLCBwcmVmaXgsIGZsYWdzKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtTWFrZU1vZHVsZUZ1bmN0aW9uTmFtZSA9IGZ1bmN0aW9uIChmdW5jdGlvbk5hbWUpIHsKCXJldHVybiBBMigKCQkkZWxtJGNvcmUkUmVzdWx0JGFuZFRoZW4sCgkJZnVuY3Rpb24gKF92MCkgewoJCQl2YXIgZmxhZ3MgPSBfdjAuYjsKCQkJdmFyIGZpbGVQYXRoUmVwcmVzZW50YXRpb24gPSBfdjAuYzsKCQkJcmV0dXJuICghX1V0aWxzX2VxKGZsYWdzLCBfTGlzdF9OaWwpKSA/ICRlbG0kY29yZSRSZXN1bHQkRXJyKCdGbGFncyBhcmUgbm90IHN1cHBvcnRlZCBpbiBFbG1NYWtlIGRlY2xhcmF0aW9ucycpIDogJGVsbSRjb3JlJFJlc3VsdCRPayhmaWxlUGF0aFJlcHJlc2VudGF0aW9uKTsKCQl9LAoJCUEyKAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUZsYWdzQW5kUGF0aFBhdHRlcm5Gcm9tRnVuY3Rpb25OYW1lLAoJCQkkZWxtJGNvcmUkRGljdCRmcm9tTGlzdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZWxtTWFrZUZ1bmN0aW9uTmFtZVN0YXJ0LCBfVXRpbHNfVHVwbGUwKQoJCQkJCV0pKSwKCQkJZnVuY3Rpb25OYW1lKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUVsbU1ha2VNb2R1bGVGdW5jdGlvbiA9IEYyKAoJZnVuY3Rpb24gKGN1cnJlbnRNb2R1bGUsIGZ1bmN0aW9uRGVjbGFyYXRpb24pIHsKCQl2YXIgZnVuY3Rpb25OYW1lID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZSgKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShmdW5jdGlvbkRlY2xhcmF0aW9uLmRlY2xhcmF0aW9uKS5uYW1lKTsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRSZXN1bHQkYW5kVGhlbiwKCQkJZnVuY3Rpb24gKHJlZmVyZW5jZWROYW1lKSB7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAsCgkJCQkJJGVsbSRjb3JlJFR1cGxlJHBhaXIocmVmZXJlbmNlZE5hbWUpLAoJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJdmFyIF92MCA9IGZ1bmN0aW9uRGVjbGFyYXRpb24uc2lnbmF0dXJlOwoJCQkJCQlpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKCdNaXNzaW5nIGZ1bmN0aW9uIHNpZ25hdHVyZScpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIHNpZ25hdHVyZSA9IF92MC5hOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRhcHBlbmQoJ0ZhaWxlZCB0byBwYXJzZSBjb25maWc6ICcpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUVsbU1ha2VGdW5jdGlvbkNvbmZpZ0Zyb21UeXBlQW5ub3RhdGlvbiwKCQkJCQkJCQkJY3VycmVudE1vZHVsZSwKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShzaWduYXR1cmUpLnR5cGVBbm5vdGF0aW9uKSk7CgkJCQkJCX0KCQkJCQl9KCkpOwoJCQl9LAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUVsbU1ha2VNb2R1bGVGdW5jdGlvbk5hbWUoZnVuY3Rpb25OYW1lKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEVsbU1ha2VEZXBlbmRlbmN5ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0VsbU1ha2VEZXBlbmRlbmN5JywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRNaXNzaW5nRGVwZW5kZW5jeUVycm9yID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ01pc3NpbmdEZXBlbmRlbmN5RXJyb3InLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21tb24kY29tbW9uUHJlZml4TGVuZ3RoID0gRjIoCglmdW5jdGlvbiAobGlzdEEsIGxpc3RCKSB7CgkJaWYgKCFsaXN0QS5iKSB7CgkJCXJldHVybiAwOwoJCX0gZWxzZSB7CgkJCXZhciBhID0gbGlzdEEuYTsKCQkJdmFyIHJlc3RBID0gbGlzdEEuYjsKCQkJaWYgKCFsaXN0Qi5iKSB7CgkJCQlyZXR1cm4gMDsKCQkJfSBlbHNlIHsKCQkJCXZhciBiID0gbGlzdEIuYTsKCQkJCXZhciByZXN0QiA9IGxpc3RCLmI7CgkJCQlyZXR1cm4gX1V0aWxzX2VxKGEsIGIpID8gKDEgKyBBMigkYXV0aG9yJHByb2plY3QkQ29tbW9uJGNvbW1vblByZWZpeExlbmd0aCwgcmVzdEEsIHJlc3RCKSkgOiAwOwoJCQl9CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRhcmVBcHBGaWxlc0VxdWFsID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXZhciByZXByZXNlbnRhdGlvbkZvckNvbXBhcmlzb24gPSAkZWxtJGNvcmUkRGljdCRtYXAoCgkJCSRlbG0kY29yZSRCYXNpY3MkYWx3YXlzKCRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkQmFzZTY0JGZyb21CeXRlcykpOwoJCXJldHVybiBfVXRpbHNfZXEoCgkJCXJlcHJlc2VudGF0aW9uRm9yQ29tcGFyaXNvbihhKSwKCQkJcmVwcmVzZW50YXRpb25Gb3JDb21wYXJpc29uKGIpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZWxtTWFrZVJlcXVlc3RzQXJlRXF1YWwgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIF9VdGlsc19lcShhLCBiKSAmJiBBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRhcmVBcHBGaWxlc0VxdWFsLCBhLmZpbGVzLCBiLmZpbGVzKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZGVwZW5kZW5jeUtleXNBcmVFcXVhbCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQl2YXIgX3YwID0gX1V0aWxzX1R1cGxlMihhLCBiKTsKCQl2YXIgZWxtTWFrZUEgPSBfdjAuYS5hOwoJCXZhciBlbG1NYWtlQiA9IF92MC5iLmE7CgkJcmV0dXJuIEEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGVsbU1ha2VSZXF1ZXN0c0FyZUVxdWFsLCBlbG1NYWtlQSwgZWxtTWFrZUIpOwoJfSk7CnZhciAkZWxtJGNvcmUkU3RyaW5nJG1hcCA9IF9TdHJpbmdfbWFwOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZmlsZVBhdGhSZXByZXNlbnRhdGlvbkluRnVuY3Rpb25OYW1lID0gZnVuY3Rpb24gKHBhdGhJdGVtcykgewoJcmV0dXJuIEEyKAoJCSRlbG0kY29yZSRTdHJpbmckbWFwLAoJCWZ1bmN0aW9uIChfY2hhcikgewoJCQlyZXR1cm4gJGVsbSRjb3JlJENoYXIkaXNBbHBoYU51bShfY2hhcikgPyBfY2hhciA6IF9VdGlsc19jaHIoJ18nKTsKCQl9LAoJCUEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJ18nLCBwYXRoSXRlbXMpKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRsaXN0Tm9kZXNXaXRoUGF0aCA9IGZ1bmN0aW9uIChub2RlKSB7Cgl2YXIgY2hpbGROb2RlcyA9IGZ1bmN0aW9uICgpIHsKCQlpZiAobm9kZS4kID09PSAnQmxvYk5vZGUnKSB7CgkJCXJldHVybiBfTGlzdF9OaWw7CgkJfSBlbHNlIHsKCQkJdmFyIHRyZWVFbnRyaWVzID0gbm9kZS5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsCgkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJdmFyIGVudHJ5TmFtZSA9IF92MS5hOwoJCQkJCXZhciBjaGlsZE5vZGUgPSBfdjEuYjsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJZnVuY3Rpb24gKF92MikgewoJCQkJCQkJdmFyIHBhdGggPSBfdjIuYTsKCQkJCQkJCXZhciBkZXNjZW5kYW50Tm9kZSA9IF92Mi5iOwoJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZW50cnlOYW1lLCBwYXRoKSwKCQkJCQkJCQlkZXNjZW5kYW50Tm9kZSk7CgkJCQkJCX0sCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRsaXN0Tm9kZXNXaXRoUGF0aChjaGlsZE5vZGUpKTsKCQkJCX0sCgkJCQl0cmVlRW50cmllcyk7CgkJfQoJfSgpOwoJcmV0dXJuIEEyKAoJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIG5vZGUpLAoJCWNoaWxkTm9kZXMpOwp9Owp2YXIgJGVsbSRjb3JlJExpc3QkbWVtYmVyID0gRjIoCglmdW5jdGlvbiAoeCwgeHMpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRMaXN0JGFueSwKCQkJZnVuY3Rpb24gKGEpIHsKCQkJCXJldHVybiBfVXRpbHNfZXEoYSwgeCk7CgkJCX0sCgkJCXhzKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHBMaXN0RXh0cmEkdW5pcXVlQnlIZWxwID0gRjQoCglmdW5jdGlvbiAoZiwgZXhpc3RpbmcsIHJlbWFpbmluZywgYWNjdW11bGF0b3IpIHsKCQl1bmlxdWVCeUhlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFyZW1haW5pbmcuYikgewoJCQkJcmV0dXJuICRlbG0kY29yZSRMaXN0JHJldmVyc2UoYWNjdW11bGF0b3IpOwoJCQl9IGVsc2UgewoJCQkJdmFyIGZpcnN0ID0gcmVtYWluaW5nLmE7CgkJCQl2YXIgcmVzdCA9IHJlbWFpbmluZy5iOwoJCQkJdmFyIGNvbXB1dGVkRmlyc3QgPSBmKGZpcnN0KTsKCQkJCWlmIChBMigkZWxtJGNvcmUkTGlzdCRtZW1iZXIsIGNvbXB1dGVkRmlyc3QsIGV4aXN0aW5nKSkgewoJCQkJCXZhciAkdGVtcCRmID0gZiwKCQkJCQkJJHRlbXAkZXhpc3RpbmcgPSBleGlzdGluZywKCQkJCQkJJHRlbXAkcmVtYWluaW5nID0gcmVzdCwKCQkJCQkJJHRlbXAkYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvcjsKCQkJCQlmID0gJHRlbXAkZjsKCQkJCQlleGlzdGluZyA9ICR0ZW1wJGV4aXN0aW5nOwoJCQkJCXJlbWFpbmluZyA9ICR0ZW1wJHJlbWFpbmluZzsKCQkJCQlhY2N1bXVsYXRvciA9ICR0ZW1wJGFjY3VtdWxhdG9yOwoJCQkJCWNvbnRpbnVlIHVuaXF1ZUJ5SGVscDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyICR0ZW1wJGYgPSBmLAoJCQkJCQkkdGVtcCRleGlzdGluZyA9IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGNvbXB1dGVkRmlyc3QsIGV4aXN0aW5nKSwKCQkJCQkJJHRlbXAkcmVtYWluaW5nID0gcmVzdCwKCQkJCQkJJHRlbXAkYWNjdW11bGF0b3IgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBmaXJzdCwgYWNjdW11bGF0b3IpOwoJCQkJCWYgPSAkdGVtcCRmOwoJCQkJCWV4aXN0aW5nID0gJHRlbXAkZXhpc3Rpbmc7CgkJCQkJcmVtYWluaW5nID0gJHRlbXAkcmVtYWluaW5nOwoJCQkJCWFjY3VtdWxhdG9yID0gJHRlbXAkYWNjdW11bGF0b3I7CgkJCQkJY29udGludWUgdW5pcXVlQnlIZWxwOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcExpc3RFeHRyYSR1bmlxdWVCeSA9IEYyKAoJZnVuY3Rpb24gKGYsIGxpc3QpIHsKCQlyZXR1cm4gQTQoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHBMaXN0RXh0cmEkdW5pcXVlQnlIZWxwLCBmLCBfTGlzdF9OaWwsIGxpc3QsIF9MaXN0X05pbCk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGZpbmRGaWxlVHJlZU5vZGVXaXRoUGF0aE1hdGNoaW5nUmVwcmVzZW50YXRpb25JbkZ1bmN0aW9uTmFtZSA9IEYzKAoJZnVuY3Rpb24gKHNvdXJjZURpcnMsIHNvdXJjZUZpbGVzLCBwYXRoUGF0dGVybikgewoJCXZhciBzb3VyY2VEaXJlY3RvcnlQYXRocyA9IEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQlzb3VyY2VEaXJzLmVsbUpzb25EaXJlY3RvcnlQYXRoLAoJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBzb3VyY2VEaXJzLm1haW5Tb3VyY2VEaXJlY3RvcnlQYXRoLCBzb3VyY2VEaXJzLnNlY29uZGFyeVNvdXJjZURpcmVjdG9yaWVzKSk7CgkJdmFyIGZpbGVUcmVlID0gQTMoCgkJCSRlbG0kY29yZSREaWN0JGZvbGRsLAoJCQlGMigKCQkJCWZ1bmN0aW9uIChmaWxlUGF0aCwgZmlsZUNvbnRlbnQpIHsKCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJHNldE5vZGVBdFBhdGhJblNvcnRlZEZpbGVUcmVlKAoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJZmlsZVBhdGgsCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkQmxvYk5vZGUoZmlsZUNvbnRlbnQpKSk7CgkJCQl9KSwKCQkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJFRyZWVOb2RlKF9MaXN0X05pbCksCgkJCXNvdXJjZUZpbGVzKTsKCQl2YXIgbm9kZXNXaXRoUmVwcmVzZW50YXRpb25zID0gQTIoCgkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJZnVuY3Rpb24gKHNvdXJjZURpclBhdGgpIHsKCQkJCXZhciBfdjEgPSBBMigkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkZ2V0Tm9kZUF0UGF0aEZyb21GaWxlVHJlZSwgc291cmNlRGlyUGF0aCwgZmlsZVRyZWUpOwoJCQkJaWYgKF92MS4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgc291cmNlRGlyTm9kZSA9IF92MS5hOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQkJCQl2YXIgbm9kZVBhdGhSZWxhdGl2ZSA9IF92Mi5hOwoJCQkJCQkJdmFyIG5vZGUgPSBfdjIuYjsKCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGZpbGVQYXRoUmVwcmVzZW50YXRpb25JbkZ1bmN0aW9uTmFtZShub2RlUGF0aFJlbGF0aXZlKSwKCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQl7CgkJCQkJCQkJCQlhYnNvbHV0ZVBhdGg6ICRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVtzb3VyY2VEaXJQYXRoLCBub2RlUGF0aFJlbGF0aXZlXSkpLAoJCQkJCQkJCQkJcmVsYXRpdmVQYXRoOiBub2RlUGF0aFJlbGF0aXZlCgkJCQkJCQkJCX0sCgkJCQkJCQkJCW5vZGUpKTsKCQkJCQkJfSwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJGxpc3ROb2Rlc1dpdGhQYXRoKHNvdXJjZURpck5vZGUpKTsKCQkJCX0KCQkJfSwKCQkJc291cmNlRGlyZWN0b3J5UGF0aHMpOwoJCXZhciBub2Rlc0dyb3VwZWRCeVJlcHJlc2VudGF0aW9uID0gJGVsbSRjb3JlJERpY3QkZnJvbUxpc3QoCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJZnVuY3Rpb24gKHJlcHJlc2VudGF0aW9uKSB7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCXJlcHJlc2VudGF0aW9uLAoJCQkJCQlBMigKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwTGlzdEV4dHJhJHVuaXF1ZUJ5LAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkkZWxtJGNvcmUkVHVwbGUkZmlyc3QsCgkJCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCQkJcmV0dXJuICQuYWJzb2x1dGVQYXRoOwoJCQkJCQkJCX0pLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQkJCSRlbG0kY29yZSRUdXBsZSRzZWNvbmQsCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlciwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCQkJJGVsbSRjb3JlJFR1cGxlJGZpcnN0LAoJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRlcShyZXByZXNlbnRhdGlvbikpLAoJCQkJCQkJCQlub2Rlc1dpdGhSZXByZXNlbnRhdGlvbnMpKSkpOwoJCQkJfSwKCQkJCSRlbG0kY29yZSRTZXQkdG9MaXN0KAoJCQkJCSRlbG0kY29yZSRTZXQkZnJvbUxpc3QoCgkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJGVsbSRjb3JlJFR1cGxlJGZpcnN0LCBub2Rlc1dpdGhSZXByZXNlbnRhdGlvbnMpKSkpKTsKCQl2YXIgX3YwID0gQTIoCgkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJX0xpc3RfTmlsLAoJCQlBMigkZWxtJGNvcmUkRGljdCRnZXQsIHBhdGhQYXR0ZXJuLCBub2Rlc0dyb3VwZWRCeVJlcHJlc2VudGF0aW9uKSk7CgkJaWYgKF92MC5iKSB7CgkJCWlmICghX3YwLmIuYikgewoJCQkJdmFyIG1hdGNoaW5nTm9kZSA9IF92MC5hOwoJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2sobWF0Y2hpbmdOb2RlKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBtYXRjaGluZ0ZpbGVzID0gX3YwOwoJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKAoJCQkJCSdUaGUgZmlsZSBwYXRoIHJlcHJlc2VudGF0aW9uIFwnJyArIChwYXRoUGF0dGVybiArICgnXCcgaXMgbm90IHVuaXF1ZSBiZWNhdXNlIGl0IG1hdGNoZXMgJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoCgkJCQkJCSRlbG0kY29yZSRMaXN0JGxlbmd0aChtYXRjaGluZ0ZpbGVzKSkgKyAoJyBvZiB0aGUgc291cmNlIGZpbGVzIG5vZGVzOiAnICsgQTIoCgkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJJywgJywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCSRlbG0kY29yZSRUdXBsZSRmaXJzdCwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCQkJCXJldHVybiAkLmFic29sdXRlUGF0aDsKCQkJCQkJCQkJfSwKCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luKCcvJykpKSwKCQkJCQkJCW1hdGNoaW5nRmlsZXMpKSkpKSkpOwoJCQl9CgkJfSBlbHNlIHsKCQkJdmFyIGV4YW1wbGVzTGlzdEl0ZW1zID0gJGVsbSRjb3JlJERpY3Qka2V5cyhub2Rlc0dyb3VwZWRCeVJlcHJlc2VudGF0aW9uKTsKCQkJdmFyIGV4YW1wbGVzTGlzdEl0ZW1zRm9yRGlzcGxheSA9IEEyKCRlbG0kY29yZSRMaXN0JHRha2UsIDgsIGV4YW1wbGVzTGlzdEl0ZW1zKTsKCQkJdmFyIGV4YW1wbGVzTGlzdEl0ZW1zRGlzcGxheUl0ZW1zID0gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJZXhhbXBsZXNMaXN0SXRlbXNGb3JEaXNwbGF5LAoJCQkJCQlfVXRpbHNfZXEoZXhhbXBsZXNMaXN0SXRlbXNGb3JEaXNwbGF5LCBleGFtcGxlc0xpc3RJdGVtcykgPyBfTGlzdF9OaWwgOiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsnLi4uJ10pCgkJCQkJXSkpOwoJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJJ1xuJywKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWydEaWQgbm90IGZpbmQgYW55IGZpbGUgb3IgZGlyZWN0b3J5IHdpdGggYSBwYXRoIG1hdGNoaW5nIHRoZSByZXByZXNlbnRhdGlvbiBcJycgKyAocGF0aFBhdHRlcm4gKyAnXCcuJyldKSwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQknVGhlcmUgYXJlICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KAoJCQkJCQkJCQkkZWxtJGNvcmUkRGljdCRzaXplKHNvdXJjZUZpbGVzKSkgKyAoJyBmaWxlcyBhbmQgZGlyZWN0b3JpZXMgYXZhaWxhYmxlIGluIHRoaXMgY29tcGlsYXRpb246ICcgKyBBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcsICcsIGV4YW1wbGVzTGlzdEl0ZW1zRGlzcGxheUl0ZW1zKSkpCgkJCQkJCQkJXSkKCQkJCQkJCV0pKSkpOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZmluZEZpbGVXaXRoUGF0aE1hdGNoaW5nUmVwcmVzZW50YXRpb25JbkZ1bmN0aW9uTmFtZSA9IEYzKAoJZnVuY3Rpb24gKHNvdXJjZURpcnMsIHNvdXJjZUZpbGVzLCBwYXRoUGF0dGVybikgewoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJFJlc3VsdCRhbmRUaGVuLAoJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQl2YXIgbWF0Y2hQYXRoID0gX3YwLmE7CgkJCQl2YXIgbWF0Y2hOb2RlID0gX3YwLmI7CgkJCQlpZiAobWF0Y2hOb2RlLiQgPT09ICdCbG9iTm9kZScpIHsKCQkJCQl2YXIgYmxvYiA9IG1hdGNoTm9kZS5hOwoJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJCQlfVXRpbHNfVHVwbGUyKG1hdGNoUGF0aCwgYmxvYikpOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ1RoaXMgcGF0dGVybiBtYXRjaGVzIHBhdGggXCcnICsgKHBhdGhQYXR0ZXJuICsgJ1wnIGJ1dCB0aGUgbm9kZSBoZXJlIGlzIGEgdHJlZSwgbm90IGEgZmlsZScpKTsKCQkJCX0KCQkJfSwKCQkJQTMoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZmluZEZpbGVUcmVlTm9kZVdpdGhQYXRoTWF0Y2hpbmdSZXByZXNlbnRhdGlvbkluRnVuY3Rpb25OYW1lLCBzb3VyY2VEaXJzLCBzb3VyY2VGaWxlcywgcGF0aFBhdHRlcm4pKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW5jbHVkZUZpbGVQYXRoSW5FbG1NYWtlUmVxdWVzdCA9IGZ1bmN0aW9uIChwYXRoKSB7Cgl2YXIgX3YwID0gJGVsbSRjb3JlJExpc3QkaGVhZCgKCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKHBhdGgpKTsKCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJcmV0dXJuIGZhbHNlOwoJfSBlbHNlIHsKCQl2YXIgZmlsZU5hbWUgPSBfdjAuYTsKCQlyZXR1cm4gKGZpbGVOYW1lID09PSAnZWxtLmpzb24nKSB8fCBBMigkZWxtJGNvcmUkU3RyaW5nJGVuZHNXaXRoLCAnLmVsbScsIGZpbGVOYW1lKTsKCX0KfTsKdmFyICRlbG0kY29yZSRMaXN0JHNvcnQgPSBmdW5jdGlvbiAoeHMpIHsKCXJldHVybiBBMigkZWxtJGNvcmUkTGlzdCRzb3J0QnksICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIHhzKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHByZXBhcmVFbG1NYWtlRnVuY3Rpb25Gb3JFbWl0ID0gRjUoCglmdW5jdGlvbiAoc291cmNlRGlycywgc291cmNlRmlsZXMsIGRlcGVuZGVuY2llcywgX3YwLCBjb25maWcpIHsKCQl2YXIgZmlsZVBhdGhSZXByZXNlbnRhdGlvbiA9IF92MC5maWxlUGF0aFJlcHJlc2VudGF0aW9uOwoJCXZhciBfdjEgPSBBMygkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRmaW5kRmlsZVdpdGhQYXRoTWF0Y2hpbmdSZXByZXNlbnRhdGlvbkluRnVuY3Rpb25OYW1lLCBzb3VyY2VEaXJzLCBzb3VyY2VGaWxlcywgZmlsZVBhdGhSZXByZXNlbnRhdGlvbik7CgkJaWYgKF92MS4kID09PSAnRXJyJykgewoJCQl2YXIgZXJyb3IgPSBfdjEuYTsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKAoJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkT3RoZXJDb21waWxhdGlvbkVycm9yKCdGYWlsZWQgdG8gaWRlbnRpZnkgZmlsZSBmb3IgXCcnICsgKGZpbGVQYXRoUmVwcmVzZW50YXRpb24gKyAoJ1wnOiAnICsgZXJyb3IpKSkpOwoJCX0gZWxzZSB7CgkJCXZhciBfdjIgPSBfdjEuYTsKCQkJdmFyIGVudHJ5UG9pbnRGaWxlTWF0Y2ggPSBfdjIuYTsKCQkJdmFyIHNvdXJjZUZpbGVzRm9yRWxtTWFrZSA9IEEyKAoJCQkJJGVsbSRjb3JlJERpY3QkZmlsdGVyLAoJCQkJRjIoCgkJCQkJZnVuY3Rpb24gKGZpbGVQYXRoLCBfdjYpIHsKCQkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGluY2x1ZGVGaWxlUGF0aEluRWxtTWFrZVJlcXVlc3QoZmlsZVBhdGgpOwoJCQkJCX0pLAoJCQkJc291cmNlRmlsZXMpOwoJCQl2YXIgc2hhcmVkTGV2ZWxzID0gQTIoJGF1dGhvciRwcm9qZWN0JENvbW1vbiRjb21tb25QcmVmaXhMZW5ndGgsIGVudHJ5UG9pbnRGaWxlTWF0Y2guYWJzb2x1dGVQYXRoLCBzb3VyY2VEaXJzLmVsbUpzb25EaXJlY3RvcnlQYXRoKTsKCQkJdmFyIGdldE5hbWVDb21wb25lbnRzRnJvbUxlYWZDb25maWcgPSBmdW5jdGlvbiAobGVhZkNvbmZpZykgewoJCQkJcmV0dXJuICRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCWxlYWZDb25maWcuZW5hYmxlRGVidWcgPyBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbJ2RlYnVnJ10pIDogX0xpc3RfTmlsLAoJCQkJCQkJbGVhZkNvbmZpZy5lbmFibGVPcHRpbWl6ZSA/IF9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsnb3B0aW1pemUnXSkgOiBfTGlzdF9OaWwsCgkJCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJCQl2YXIgX3Y1ID0gbGVhZkNvbmZpZy5vdXRwdXRUeXBlOwoJCQkJCQkJaWYgKF92NS4kID09PSAnRWxtTWFrZU91dHB1dFR5cGVIdG1sJykgewoJCQkJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsnaHRtbCddKTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWydqYXZhc2NyaXB0J10pOwoJCQkJCQkJfQoJCQkJCQl9KCkKCQkJCQkJXSkpOwoJCQl9OwoJCQl2YXIgZW50cnlQb2ludEZpbGVQYXRoID0gX1V0aWxzX2FwKAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkcmVwZWF0LAoJCQkJCSRlbG0kY29yZSRMaXN0JGxlbmd0aChzb3VyY2VEaXJzLmVsbUpzb25EaXJlY3RvcnlQYXRoKSAtIHNoYXJlZExldmVscywKCQkJCQknLi4nKSwKCQkJCUEyKCRlbG0kY29yZSRMaXN0JGRyb3AsIHNoYXJlZExldmVscywgZW50cnlQb2ludEZpbGVNYXRjaC5hYnNvbHV0ZVBhdGgpKTsKCQkJdmFyIGVsbU1ha2VSZXF1ZXN0ID0ge2VuYWJsZURlYnVnOiBjb25maWcuZWxtTWFrZUNvbmZpZy5lbmFibGVEZWJ1ZywgZW50cnlQb2ludEZpbGVQYXRoOiBlbnRyeVBvaW50RmlsZVBhdGgsIGZpbGVzOiBzb3VyY2VGaWxlc0ZvckVsbU1ha2UsIG91dHB1dFR5cGU6IGNvbmZpZy5lbG1NYWtlQ29uZmlnLm91dHB1dFR5cGV9OwoJCQl2YXIgZGVwZW5kZW5jeUtleSA9ICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEVsbU1ha2VEZXBlbmRlbmN5KGVsbU1ha2VSZXF1ZXN0KTsKCQkJdmFyIF92MyA9ICRlbG0kY29yZSRMaXN0JGhlYWQoCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXIsCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCSRlbG0kY29yZSRUdXBsZSRmaXJzdCwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZGVwZW5kZW5jeUtleXNBcmVFcXVhbChkZXBlbmRlbmN5S2V5KSksCgkJCQkJZGVwZW5kZW5jaWVzKSk7CgkJCWlmIChfdjMuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoCgkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkTWlzc2luZ0RlcGVuZGVuY3lFcnJvcihkZXBlbmRlbmN5S2V5KSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgX3Y0ID0gX3YzLmE7CgkJCQl2YXIgZGVwZW5kZW5jeVZhbHVlID0gX3Y0LmI7CgkJCQl2YXIgdmFyaWFudE5hbWUgPSBBMigKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJJ18nLAoJCQkJCSRlbG0kY29yZSRMaXN0JHNvcnQoCgkJCQkJCWdldE5hbWVDb21wb25lbnRzRnJvbUxlYWZDb25maWcoY29uZmlnLmVsbU1ha2VDb25maWcpKSk7CgkJCQl2YXIgdmFsdWVGdW5jdGlvbk5hbWUgPSBBMigKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJJ18nLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWydlbG1fbWFrZV9vdXRwdXQnLCBmaWxlUGF0aFJlcHJlc2VudGF0aW9uLCB2YXJpYW50TmFtZV0pKTsKCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJCXtibG9iOiBkZXBlbmRlbmN5VmFsdWUsIGVtaXRCbG9iOiBjb25maWcuZW1pdEJsb2IsIHZhbHVlRnVuY3Rpb25OYW1lOiB2YWx1ZUZ1bmN0aW9uTmFtZX0pOwoJCQl9CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCR2YWx1ZU1vZHVsZVJlY29yZEV4cHJlc3Npb25Gcm9tRW5jb2RpbmdzID0gRjIoCglmdW5jdGlvbiAoZW5jb2RpbmdzLCBibG9iKSB7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJZnVuY3Rpb24gKGZpZWxkc0RpY3QpIHsKCQkJCXJldHVybiAneyAnICsgKEEyKAoJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQknXG4sICcsCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJCQkJdmFyIGZpZWxkTmFtZSA9IF92MC5hOwoJCQkJCQkJdmFyIGZpZWxkID0gX3YwLmI7CgkJCQkJCQlyZXR1cm4gZmllbGROYW1lICsgKCcgPSAnICsgZmllbGQuZXhwcmVzc2lvbik7CgkJCQkJCX0sCgkJCQkJCSRlbG0kY29yZSREaWN0JHRvTGlzdChmaWVsZHNEaWN0KSkpICsgJyB9Jyk7CgkJCX0sCgkJCWVuY29kaW5ncyhibG9iKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHJlY29yZFRyZWVFbWl0RWxtTWFrZSA9IEYyKAoJZnVuY3Rpb24gKHJlY29yZFRyZWUsIGJ5dGVzKSB7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJZnVuY3Rpb24gKGV4cHJlc3Npb24pIHsKCQkJCXJldHVybiB7CgkJCQkJaW50ZXJmYWNlTW9kdWxlOiByZWNvcmRUcmVlLmludGVyZmFjZU1vZHVsZSwKCQkJCQl2YWx1ZU1vZHVsZToge2V4cHJlc3Npb246IGV4cHJlc3Npb259CgkJCQl9OwoJCQl9LAoJCQlBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCR2YWx1ZU1vZHVsZVJlY29yZEV4cHJlc3Npb25Gcm9tRW5jb2RpbmdzLCByZWNvcmRUcmVlLnZhbHVlTW9kdWxlLCBieXRlcykpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwcmVwYXJlUmVwbGFjZUZ1bmN0aW9uSW5FbG1NYWtlTW9kdWxlVGV4dCA9IEY1KAoJZnVuY3Rpb24gKGRlcGVuZGVuY2llcywgc291cmNlRGlycywgc291cmNlRmlsZXMsIGN1cnJlbnRNb2R1bGUsIG9yaWdpbmFsRnVuY3Rpb25EZWNsYXJhdGlvbikgewoJCXZhciBmdW5jdGlvbk5hbWUgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKG9yaWdpbmFsRnVuY3Rpb25EZWNsYXJhdGlvbi5kZWNsYXJhdGlvbikubmFtZSk7CgkJdmFyIF92MCA9IEEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtTWFrZU1vZHVsZUZ1bmN0aW9uLCBjdXJyZW50TW9kdWxlLCBvcmlnaW5hbEZ1bmN0aW9uRGVjbGFyYXRpb24pOwoJCWlmIChfdjAuJCA9PT0gJ0VycicpIHsKCQkJdmFyIGVycm9yID0gX3YwLmE7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJE90aGVyQ29tcGlsYXRpb25FcnJvcignRmFpbGVkIHRvIHBhcnNlIEVsbSBtYWtlIGZ1bmN0aW9uOiAnICsgZXJyb3IpCgkJCQkJXSkpOwoJCX0gZWxzZSB7CgkJCXZhciBfdjEgPSBfdjAuYTsKCQkJdmFyIGZpbGVQYXRoUmVwcmVzZW50YXRpb24gPSBfdjEuYTsKCQkJdmFyIGVsbU1ha2VUcmVlID0gX3YxLmI7CgkJCXZhciBjb250aW51ZU1hcFJlc3VsdCA9IGZ1bmN0aW9uIChsZWFmQmVmb3JlQXBwbHlCeXRlcykgewoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCWZ1bmN0aW9uIChlbWl0QmxvYikgewoJCQkJCQlyZXR1cm4ge2VtaXRCbG9iOiBlbWl0QmxvYiwgdmFsdWVGdW5jdGlvbk5hbWU6IGxlYWZCZWZvcmVBcHBseUJ5dGVzLnZhbHVlRnVuY3Rpb25OYW1lfTsKCQkJCQl9LAoJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHJlY29yZFRyZWVFbWl0RWxtTWFrZSwgbGVhZkJlZm9yZUFwcGx5Qnl0ZXMuZW1pdEJsb2IsIGxlYWZCZWZvcmVBcHBseUJ5dGVzLmJsb2IpKTsKCQkJfTsKCQkJdmFyIG1hcFRyZWVMZWFmID0gQTIoCgkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJQTQoCgkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcHJlcGFyZUVsbU1ha2VGdW5jdGlvbkZvckVtaXQsCgkJCQkJc291cmNlRGlycywKCQkJCQlzb3VyY2VGaWxlcywKCQkJCQlkZXBlbmRlbmNpZXMsCgkJCQkJe2ZpbGVQYXRoUmVwcmVzZW50YXRpb246IGZpbGVQYXRoUmVwcmVzZW50YXRpb259KSwKCQkJCSRlbG0kY29yZSRSZXN1bHQkYW5kVGhlbigKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJY29udGludWVNYXBSZXN1bHQsCgkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkT3RoZXJDb21waWxhdGlvbkVycm9yKSkpKTsKCQkJdmFyIG1hcHBlZFRyZWVSZXN1bHQgPSBBMigKCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkkZWxtJGNvcmUkTGlzdCRtYXAoJGVsbSRjb3JlJFR1cGxlJHNlY29uZCksCgkJCQlBMygKCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRhdHRlbXB0TWFwUmVjb3JkVHJlZUxlYXZlcywKCQkJCQlfTGlzdF9OaWwsCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRhbHdheXMobWFwVHJlZUxlYWYpLAoJCQkJCWVsbU1ha2VUcmVlKSk7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRSZXN1bHQkYW5kVGhlbiwKCQkJCWZ1bmN0aW9uIChtYXBwZWRUcmVlKSB7CgkJCQkJdmFyIHVwZGF0ZUludGVyZmFjZU1vZHVsZVRleHQgPSBGMigKCQkJCQkJZnVuY3Rpb24gKF92MiwgbW9kdWxlVGV4dCkgewoJCQkJCQkJdmFyIGdlbmVyYXRlZE1vZHVsZU5hbWUgPSBfdjIuZ2VuZXJhdGVkTW9kdWxlTmFtZTsKCQkJCQkJCXZhciBmaWxlRXhwcmVzc2lvbiA9IEEyKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGVtaXRSZWNvcmRFeHByZXNzaW9uRnJvbVJlY29yZFRyZWUsCgkJCQkJCQkJZnVuY3Rpb24gKGxlYWYpIHsKCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW50ZXJmYWNlTW9kdWxlUmVjb3JkRXhwcmVzc2lvbiwKCQkJCQkJCQkJCWxlYWYuZW1pdEJsb2IuaW50ZXJmYWNlTW9kdWxlLAoJCQkJCQkJCQkJewoJCQkJCQkJCQkJCXNvdXJjZUV4cHJlc3Npb246IEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy4nLCBnZW5lcmF0ZWRNb2R1bGVOYW1lKSArICgnLicgKyBsZWFmLnZhbHVlRnVuY3Rpb25OYW1lKQoJCQkJCQkJCQkJfSk7CgkJCQkJCQkJfSwKCQkJCQkJCQltYXBwZWRUcmVlKTsKCQkJCQkJCXZhciBidWlsZE5ld0Z1bmN0aW9uTGluZXMgPSBmdW5jdGlvbiAocHJldmlvdXNGdW5jdGlvbkxpbmVzKSB7CgkJCQkJCQkJcmV0dXJuIF9VdGlsc19hcCgKCQkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkdGFrZSwgMiwgcHJldmlvdXNGdW5jdGlvbkxpbmVzKSwKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGluZGVudEVsbUNvZGVMaW5lcywgMSwgZmlsZUV4cHJlc3Npb24pCgkJCQkJCQkJCQldKSk7CgkJCQkJCQl9OwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGFkZE9yVXBkYXRlRnVuY3Rpb25JbkVsbU1vZHVsZVRleHQsCgkJCQkJCQkJewoJCQkJCQkJCQlmdW5jdGlvbk5hbWU6IGZ1bmN0aW9uTmFtZSwKCQkJCQkJCQkJbWFwRnVuY3Rpb25MaW5lczogQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0KF9MaXN0X05pbCksCgkJCQkJCQkJCQlidWlsZE5ld0Z1bmN0aW9uTGluZXMpCgkJCQkJCQkJfSwKCQkJCQkJCQltb2R1bGVUZXh0KTsKCQkJCQkJfSk7CgkJCQkJdmFyIGxlYXZlcyA9IEEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCSRlbG0kY29yZSRUdXBsZSRzZWNvbmQsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGVudW1lcmF0ZUxlYXZlc0Zyb21SZWNvcmRUcmVlKG1hcHBlZFRyZWUpKTsKCQkJCQl2YXIgdmFsdWVGdW5jdGlvbnMgPSBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQlmdW5jdGlvbiAobGVhZikgewoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQlmdW5jdGlvbk5hbWU6IGxlYWYudmFsdWVGdW5jdGlvbk5hbWUsCgkJCQkJCQkJZnVuY3Rpb25UZXh0OiBsZWFmLnZhbHVlRnVuY3Rpb25OYW1lICsgKCcgPVxuJyArIEEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGluZGVudEVsbUNvZGVMaW5lcywgMSwgbGVhZi5lbWl0QmxvYi52YWx1ZU1vZHVsZS5leHByZXNzaW9uKSkKCQkJCQkJCX07CgkJCQkJCX0sCgkJCQkJCWxlYXZlcyk7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkJCXsKCQkJCQkJCXVwZGF0ZUludGVyZmFjZU1vZHVsZVRleHQ6IHVwZGF0ZUludGVyZmFjZU1vZHVsZVRleHQsCgkJCQkJCQl2YWx1ZUZ1bmN0aW9uc1RleHRzOiBBMigKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCQkJcmV0dXJuICQuZnVuY3Rpb25UZXh0OwoJCQkJCQkJCX0sCgkJCQkJCQkJdmFsdWVGdW5jdGlvbnMpCgkJCQkJCX0pOwoJCQkJfSwKCQkJCW1hcHBlZFRyZWVSZXN1bHQpOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcmVzdWx0Q29tYmluZUNvbmNhdGVuYXRpbmdFcnJvcnMgPSBBMigKCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJRjIoCgkJZnVuY3Rpb24gKHJlc3VsdCwgcHJldmlvdXNBZ2dyZWdhdGUpIHsKCQkJaWYgKHByZXZpb3VzQWdncmVnYXRlLiQgPT09ICdFcnInKSB7CgkJCQl2YXIgcHJldmlvdXNFcnJvcnMgPSBwcmV2aW91c0FnZ3JlZ2F0ZS5hOwoJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKAoJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJaWYgKHJlc3VsdC4kID09PSAnRXJyJykgewoJCQkJCQkJdmFyIGVycm9yID0gcmVzdWx0LmE7CgkJCQkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZXJyb3IsIHByZXZpb3VzRXJyb3JzKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXJldHVybiBwcmV2aW91c0Vycm9yczsKCQkJCQkJfQoJCQkJCX0oKSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgcHJldmlvdXNMaXN0ID0gcHJldmlvdXNBZ2dyZWdhdGUuYTsKCQkJCWlmIChyZXN1bHQuJCA9PT0gJ0VycicpIHsKCQkJCQl2YXIgZXJyb3IgPSByZXN1bHQuYTsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVtlcnJvcl0pKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIG5ld0l0ZW0gPSByZXN1bHQuYTsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkJX1V0aWxzX2FwKAoJCQkJCQkJcHJldmlvdXNMaXN0LAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVtuZXdJdGVtXSkpKTsKCQkJCX0KCQkJfQoJCX0pLAoJJGVsbSRjb3JlJFJlc3VsdCRPayhfTGlzdF9OaWwpKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHN5bnRheFJhbmdlQ292ZXJpbmdDb21wbGV0ZVN0cmluZyA9IGZ1bmN0aW9uIChzdHJpbmcpIHsKCXZhciBsaW5lcyA9ICRlbG0kY29yZSRTdHJpbmckbGluZXMoc3RyaW5nKTsKCXJldHVybiB7CgkJZW5kOiB7CgkJCWNvbHVtbjogZnVuY3Rpb24gKCkgewoJCQkJdmFyIF92MCA9ICRlbG0kY29yZSRMaXN0JGhlYWQoCgkJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShsaW5lcykpOwoJCQkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gMTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGxhc3RMaW5lID0gX3YwLmE7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRTdHJpbmckbGVuZ3RoKGxhc3RMaW5lKSArIDE7CgkJCQl9CgkJCX0oKSwKCQkJcm93OiAkZWxtJGNvcmUkTGlzdCRsZW5ndGgobGluZXMpICsgMQoJCX0sCgkJc3RhcnQ6IHtjb2x1bW46IDEsIHJvdzogMX0KCX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCR1cGRhdGVGaWxlQ29udGVudEF0UGF0aCA9IEYzKAoJZnVuY3Rpb24gKHVwZGF0ZUZpbGVDb250ZW50LCBmaWxlUGF0aCwgYXBwRmlsZXMpIHsKCQl2YXIgZmlsZUNvbnRlbnQgPSB1cGRhdGVGaWxlQ29udGVudCgKCQkJQTIoJGVsbSRjb3JlJERpY3QkZ2V0LCBmaWxlUGF0aCwgYXBwRmlsZXMpKTsKCQlyZXR1cm4gQTMoJGVsbSRjb3JlJERpY3QkaW5zZXJ0LCBmaWxlUGF0aCwgZmlsZUNvbnRlbnQsIGFwcEZpbGVzKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbWFwRWxtTWFrZU1vZHVsZVRleHQgPSBGMygKCWZ1bmN0aW9uIChzb3VyY2VEaXJzLCBkZXBlbmRlbmNpZXMsIF92MCkgewoJCXZhciBzb3VyY2VGaWxlcyA9IF92MC5hOwoJCXZhciBtb2R1bGVGaWxlUGF0aCA9IF92MC5iOwoJCXZhciBtb2R1bGVUZXh0ID0gX3YwLmM7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkkZWxtJGNvcmUkTGlzdCRtYXAoCgkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRsb2NhdGVkSW5Tb3VyY2VGaWxlc0Zyb21SYW5nZShtb2R1bGVGaWxlUGF0aCkpLAoJCQlBMigKCQkJCSRlbG0kY29yZSRSZXN1bHQkYW5kVGhlbiwKCQkJCWZ1bmN0aW9uIChwYXJzZWRNb2R1bGUpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kY29yZSRSZXN1bHQkYW5kVGhlbiwKCQkJCQkJZnVuY3Rpb24gKGZ1bmN0aW9uc1RvUmVwbGFjZUZ1bmN0aW9uKSB7CgkJCQkJCQl2YXIgaW50ZXJmYWNlTW9kdWxlTmFtZSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE1vZHVsZSRtb2R1bGVOYW1lKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUocGFyc2VkTW9kdWxlLm1vZHVsZURlZmluaXRpb24pKTsKCQkJCQkJCXZhciBnZW5lcmF0ZWRNb2R1bGVUZXh0V2l0aG91dE1vZHVsZURlY2xhcmF0aW9uID0gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCSdcblxuJywKCQkJCQkJCQkkZWxtJGNvcmUkU2V0JHRvTGlzdCgKCQkJCQkJCQkJJGVsbSRjb3JlJFNldCRmcm9tTGlzdCgKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFR1cGxlJHNlY29uZCwKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCQkJCQkJCXJldHVybiAkLnZhbHVlRnVuY3Rpb25zVGV4dHM7CgkJCQkJCQkJCQkJCX0pLAoJCQkJCQkJCQkJCWZ1bmN0aW9uc1RvUmVwbGFjZUZ1bmN0aW9uKSkpKTsKCQkJCQkJCXZhciBnZW5lcmF0ZWRNb2R1bGVOYW1lID0gX1V0aWxzX2FwKAoJCQkJCQkJCWludGVyZmFjZU1vZHVsZU5hbWUsCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbJ0dlbmVyYXRlZF9FbG1NYWtlJ10pKTsKCQkJCQkJCXZhciBnZW5lcmF0ZWRNb2R1bGVQYXRoID0gQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZmlsZVBhdGhGcm9tRWxtTW9kdWxlTmFtZSwgc291cmNlRGlycywgZ2VuZXJhdGVkTW9kdWxlTmFtZSk7CgkJCQkJCQl2YXIgZ2VuZXJhdGVkTW9kdWxlVGV4dCA9IEEyKAoJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQknXG5cbicsCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQknbW9kdWxlICcgKyAoQTIoJGVsbSRjb3JlJFN0cmluZyRqb2luLCAnLicsIGdlbmVyYXRlZE1vZHVsZU5hbWUpICsgJyBleHBvc2luZyAoLi4pJyksCgkJCQkJCQkJCQlnZW5lcmF0ZWRNb2R1bGVUZXh0V2l0aG91dE1vZHVsZURlY2xhcmF0aW9uCgkJCQkJCQkJCV0pKTsKCQkJCQkJCXZhciBhcHBGaWxlcyA9IEEzKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHVwZGF0ZUZpbGVDb250ZW50QXRQYXRoLAoJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkYWx3YXlzKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRmaWxlQ29udGVudEZyb21TdHJpbmcoZ2VuZXJhdGVkTW9kdWxlVGV4dCkpLAoJCQkJCQkJCWdlbmVyYXRlZE1vZHVsZVBhdGgsCgkJCQkJCQkJc291cmNlRmlsZXMpOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCQkJCSRlbG0kY29yZSRUdXBsZSRwYWlyKGFwcEZpbGVzKSwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXBFcnJvciwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRtYXAoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkT3RoZXJDb21waWxhdGlvbkVycm9yKSwKCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JHNpbmdsZXRvbiksCgkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbGlzdEZvbGRsVG9BZ2dyZWdhdGVSZXN1bHQsCgkJCQkJCQkJCQlGMigKCQkJCQkJCQkJCQlmdW5jdGlvbiAoX3YxLCBwcmV2aW91c0FnZ3JlZ2F0ZSkgewoJCQkJCQkJCQkJCQl2YXIgZGVjbGFyYXRpb25SYW5nZSA9IF92MS5hOwoJCQkJCQkJCQkJCQl2YXIgcmVwbGFjZUZ1bmN0aW9uID0gX3YxLmI7CgkJCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUoZGVjbGFyYXRpb25SYW5nZSksCgkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCQlyZXBsYWNlRnVuY3Rpb24udXBkYXRlSW50ZXJmYWNlTW9kdWxlVGV4dCwKCQkJCQkJCQkJCQkJCQl7Z2VuZXJhdGVkTW9kdWxlTmFtZTogZ2VuZXJhdGVkTW9kdWxlTmFtZX0sCgkJCQkJCQkJCQkJCQkJcHJldmlvdXNBZ2dyZWdhdGUpKTsKCQkJCQkJCQkJCQl9KSwKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRzeW50YXhSYW5nZUNvdmVyaW5nQ29tcGxldGVTdHJpbmcobW9kdWxlVGV4dCkpLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRhZGRJbXBvcnRzSW5FbG1Nb2R1bGVUZXh0LAoJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZW5jb2RpbmdNb2R1bGVJbXBvcnRCeXRlcywKCQkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKGdlbmVyYXRlZE1vZHVsZU5hbWUsICRlbG0kY29yZSRNYXliZSROb3RoaW5nKQoJCQkJCQkJCQkJCQkJXSksCgkJCQkJCQkJCQkJCW1vZHVsZVRleHQpKSwKCQkJCQkJCQkJCWZ1bmN0aW9uc1RvUmVwbGFjZUZ1bmN0aW9uKSkpOwoJCQkJCQl9LAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXQsCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRyZXN1bHRDb21iaW5lQ29uY2F0ZW5hdGluZ0Vycm9ycygKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQkJCQlmdW5jdGlvbiAoZGVjbGFyYXRpb24pIHsKCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJCQkJCQkkZWxtJGNvcmUkVHVwbGUkcGFpcigKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRyYW5nZShkZWNsYXJhdGlvbikpLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAoCgkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUoCgkJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRyYW5nZShkZWNsYXJhdGlvbikpKSwKCQkJCQkJCQkJCQkJQTUoCgkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwcmVwYXJlUmVwbGFjZUZ1bmN0aW9uSW5FbG1NYWtlTW9kdWxlVGV4dCwKCQkJCQkJCQkJCQkJCWRlcGVuZGVuY2llcywKCQkJCQkJCQkJCQkJCXNvdXJjZURpcnMsCgkJCQkJCQkJCQkJCQlzb3VyY2VGaWxlcywKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIobW9kdWxlRmlsZVBhdGgsIHBhcnNlZE1vZHVsZSksCgkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKGRlY2xhcmF0aW9uKSkpKTsKCQkJCQkJCQkJfSwKCQkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRkZWNsYXJhdGlvbldpdGhSYW5nZUFzRnVuY3Rpb25EZWNsYXJhdGlvbiwgcGFyc2VkTW9kdWxlLmRlY2xhcmF0aW9ucykpKSkpOwoJCQkJfSwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlckRlYWRFbmRzVG9TdHJpbmcobW9kdWxlVGV4dCksCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkYXBwZW5kKCdGYWlsZWQgdG8gcGFyc2UgRWxtIG1vZHVsZSB0ZXh0OiAnKSwKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkT3RoZXJDb21waWxhdGlvbkVycm9yLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRzeW50YXhSYW5nZUNvdmVyaW5nQ29tcGxldGVTdHJpbmcobW9kdWxlVGV4dCkpLAoJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRzaW5nbGV0b24pKSkpLAoJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtTW9kdWxlVGV4dChtb2R1bGVUZXh0KSkpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkYnVpbGRUeXBlQW5ub3RhdGlvblRleHQgPSBmdW5jdGlvbiAodHlwZUFubm90YXRpb24pIHsKCXN3aXRjaCAodHlwZUFubm90YXRpb24uJCkgewoJCWNhc2UgJ0Nob2ljZUVsbVR5cGUnOgoJCQl2YXIgY2hvaWNlID0gdHlwZUFubm90YXRpb24uYTsKCQkJcmV0dXJuIGNob2ljZTsKCQljYXNlICdSZWNvcmRFbG1UeXBlJzoKCQkJdmFyIGZpZWxkcyA9IHR5cGVBbm5vdGF0aW9uLmEuZmllbGRzOwoJCQlyZXR1cm4gJ3sgJyArIChBMigKCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCScsICcsCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJZnVuY3Rpb24gKF92MSkgewoJCQkJCQl2YXIgZmllbGROYW1lID0gX3YxLmE7CgkJCQkJCXZhciBmaWVsZFR5cGUgPSBfdjEuYjsKCQkJCQkJcmV0dXJuIGZpZWxkTmFtZSArICgnIDogJyArICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGJ1aWxkVHlwZUFubm90YXRpb25UZXh0KGZpZWxkVHlwZSkpOwoJCQkJCX0sCgkJCQkJZmllbGRzKSkgKyAnIH0nKTsKCQljYXNlICdJbnN0YW5jZUVsbVR5cGUnOgoJCQl2YXIgaW5zdGFuY2UgPSB0eXBlQW5ub3RhdGlvbi5hOwoJCQlyZXR1cm4gJyggJyArIChBMigKCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCScgJywKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRidWlsZFR5cGVBbm5vdGF0aW9uVGV4dCwKCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBpbnN0YW5jZS5pbnN0YW50aWF0ZWQsIGluc3RhbmNlLl9hcmd1bWVudHMpKSkgKyAnICknKTsKCQljYXNlICdUdXBsZUVsbVR5cGUnOgoJCQl2YXIgdHVwbGUgPSB0eXBlQW5ub3RhdGlvbi5hOwoJCQlyZXR1cm4gJygnICsgKEEyKAoJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJJywgJywKCQkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkYnVpbGRUeXBlQW5ub3RhdGlvblRleHQsIHR1cGxlKSkgKyAnKScpOwoJCWNhc2UgJ0dlbmVyaWNUeXBlJzoKCQkJdmFyIG5hbWUgPSB0eXBlQW5ub3RhdGlvbi5hOwoJCQlyZXR1cm4gbmFtZTsKCQljYXNlICdVbml0VHlwZSc6CgkJCXJldHVybiAnKCknOwoJCWRlZmF1bHQ6CgkJCXZhciBsZWFmID0gdHlwZUFubm90YXRpb24uYTsKCQkJc3dpdGNoIChsZWFmLiQpIHsKCQkJCWNhc2UgJ1N0cmluZ0xlYWYnOgoJCQkJCXJldHVybiAnU3RyaW5nJzsKCQkJCWNhc2UgJ0ludExlYWYnOgoJCQkJCXJldHVybiAnSW50JzsKCQkJCWNhc2UgJ0Jvb2xMZWFmJzoKCQkJCQlyZXR1cm4gJ0Jvb2wnOwoJCQkJY2FzZSAnRmxvYXRMZWFmJzoKCQkJCQlyZXR1cm4gJ0Zsb2F0JzsKCQkJCWNhc2UgJ0J5dGVzTGVhZic6CgkJCQkJcmV0dXJuICdCeXRlcy5CeXRlcyc7CgkJCQljYXNlICdMaXN0TGVhZic6CgkJCQkJcmV0dXJuICdMaXN0JzsKCQkJCWNhc2UgJ0FycmF5TGVhZic6CgkJCQkJcmV0dXJuICdBcnJheS5BcnJheSc7CgkJCQljYXNlICdTZXRMZWFmJzoKCQkJCQlyZXR1cm4gJ1NldC5TZXQnOwoJCQkJY2FzZSAnUmVzdWx0TGVhZic6CgkJCQkJcmV0dXJuICdSZXN1bHQnOwoJCQkJY2FzZSAnTWF5YmVMZWFmJzoKCQkJCQlyZXR1cm4gJ01heWJlJzsKCQkJCWNhc2UgJ0RpY3RMZWFmJzoKCQkJCQlyZXR1cm4gJ0RpY3QuRGljdCc7CgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiAnSnNvbi5FbmNvZGUuVmFsdWUnOwoJCQl9Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRk5WMWEkaGFzaGVyID0gRjIoCglmdW5jdGlvbiAoX2J5dGUsIGhhc2hWYWx1ZSkgewoJCXZhciBtaXhlZCA9IF9ieXRlIF4gaGFzaFZhbHVlOwoJCXJldHVybiAoKCgobWl4ZWQgKyAobWl4ZWQgPDwgMSkpICsgKG1peGVkIDw8IDQpKSArIChtaXhlZCA8PCA3KSkgKyAobWl4ZWQgPDwgOCkpICsgKG1peGVkIDw8IDI0KTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZOVjFhJHV0ZjMyVG9VdGY4ID0gRjIoCglmdW5jdGlvbiAoX2NoYXIsIGFjYykgewoJCXZhciBfYnl0ZSA9ICRlbG0kY29yZSRDaGFyJHRvQ29kZShfY2hhcik7CgkJcmV0dXJuIChfYnl0ZSA8IDEyOCkgPyBBMigkYXV0aG9yJHByb2plY3QkRk5WMWEkaGFzaGVyLCBfYnl0ZSwgYWNjKSA6ICgoX2J5dGUgPCAyMDQ4KSA/IEEyKAoJCQkkYXV0aG9yJHByb2plY3QkRk5WMWEkaGFzaGVyLAoJCQkxMjggfCAoNjMgJiBfYnl0ZSksCgkJCUEyKCRhdXRob3IkcHJvamVjdCRGTlYxYSRoYXNoZXIsIDE5MiB8IChfYnl0ZSA+Pj4gNiksIGFjYykpIDogKChfYnl0ZSA8IDY1NTM2KSA/IEEyKAoJCQkkYXV0aG9yJHByb2plY3QkRk5WMWEkaGFzaGVyLAoJCQkxMjggfCAoNjMgJiBfYnl0ZSksCgkJCUEyKAoJCQkJJGF1dGhvciRwcm9qZWN0JEZOVjFhJGhhc2hlciwKCQkJCTEyOCB8ICg2MyAmIChfYnl0ZSA+Pj4gNikpLAoJCQkJQTIoJGF1dGhvciRwcm9qZWN0JEZOVjFhJGhhc2hlciwgMjI0IHwgKF9ieXRlID4+PiAxMiksIGFjYykpKSA6IEEyKAoJCQkkYXV0aG9yJHByb2plY3QkRk5WMWEkaGFzaGVyLAoJCQkxMjggfCAoNjMgJiBfYnl0ZSksCgkJCUEyKAoJCQkJJGF1dGhvciRwcm9qZWN0JEZOVjFhJGhhc2hlciwKCQkJCTEyOCB8ICg2MyAmIChfYnl0ZSA+Pj4gNikpLAoJCQkJQTIoCgkJCQkJJGF1dGhvciRwcm9qZWN0JEZOVjFhJGhhc2hlciwKCQkJCQkxMjggfCAoNjMgJiAoX2J5dGUgPj4+IDEyKSksCgkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JEZOVjFhJGhhc2hlciwgMjQwIHwgKF9ieXRlID4+PiAxOCksIGFjYykpKSkpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZOVjFhJGhhc2hXaXRoU2VlZCA9IEYyKAoJZnVuY3Rpb24gKHN0ciwgc2VlZCkgewoJCXZhciBjaGFycyA9ICRlbG0kY29yZSRTdHJpbmckdG9MaXN0KHN0cik7CgkJcmV0dXJuIEEzKCRlbG0kY29yZSRMaXN0JGZvbGRsLCAkYXV0aG9yJHByb2plY3QkRk5WMWEkdXRmMzJUb1V0ZjgsIHNlZWQsIGNoYXJzKSA+Pj4gMDsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZOVjFhJGluaXRpYWxTZWVkID0gMjE2NjEzNjI2MTsKdmFyICRhdXRob3IkcHJvamVjdCRGTlYxYSRoYXNoID0gZnVuY3Rpb24gKHN0cikgewoJcmV0dXJuIEEyKCRhdXRob3IkcHJvamVjdCRGTlYxYSRoYXNoV2l0aFNlZWQsIHN0ciwgJGF1dGhvciRwcm9qZWN0JEZOVjFhJGluaXRpYWxTZWVkKTsKfTsKdmFyICRlbG0kY29yZSRDaGFyJHRvVXBwZXIgPSBfQ2hhcl90b1VwcGVyOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZmlyc3RDaGFyVG9VcHBlckNhc2UgPSBmdW5jdGlvbiAoc3RyaW5nKSB7Cgl2YXIgX3YwID0gJGVsbSRjb3JlJFN0cmluZyR1bmNvbnMoc3RyaW5nKTsKCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJcmV0dXJuICcnOwoJfSBlbHNlIHsKCQl2YXIgX3YxID0gX3YwLmE7CgkJdmFyIGZpcnN0Q2hhciA9IF92MS5hOwoJCXZhciByZXN0ID0gX3YxLmI7CgkJcmV0dXJuIF9VdGlsc19hcCgKCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tQ2hhcigKCQkJCSRlbG0kY29yZSRDaGFyJHRvVXBwZXIoZmlyc3RDaGFyKSksCgkJCXJlc3QpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRBcnJheUZ1bmN0aW9uTmFtZUNvbW1vblBhcnQgPSAnX2dlbmVyaWNfQXJyYXknOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnREaWN0RnVuY3Rpb25OYW1lQ29tbW9uUGFydCA9ICdfZ2VuZXJpY19EaWN0JzsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25Db252ZXJ0TGlzdEZ1bmN0aW9uTmFtZUNvbW1vblBhcnQgPSAnX2dlbmVyaWNfTGlzdCc7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydE1heWJlRnVuY3Rpb25OYW1lQ29tbW9uUGFydCA9ICdfZ2VuZXJpY19NYXliZSc7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydFJlc3VsdEZ1bmN0aW9uTmFtZUNvbW1vblBhcnQgPSAnX2dlbmVyaWNfUmVzdWx0JzsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25Db252ZXJ0U2V0RnVuY3Rpb25OYW1lQ29tbW9uUGFydCA9ICdfZ2VuZXJpY19TZXQnOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRlckZ1bmN0aW9uTmFtZUNvbW1vblBhcnRGcm9tVHlwZU5hbWUgPSBBMigKCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkkZWxtJGNvcmUkU3RyaW5nJHRvTGlzdCwKCUEyKAoJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJJGVsbSRjb3JlJExpc3QkbWFwKAoJCQlmdW5jdGlvbiAoX2NoYXIpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkQ2hhciRpc0FscGhhTnVtKF9jaGFyKSA/IF9jaGFyIDogX1V0aWxzX2NocignXycpOwoJCQl9KSwKCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21MaXN0KSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uRGVjb2RlRnVuY3Rpb25OYW1lUHJlZml4ID0gJ2pzb25EZWNvZGVfJzsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25FbmNvZGVGdW5jdGlvbk5hbWVQcmVmaXggPSAnanNvbkVuY29kZV8nOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRlckZ1bmN0aW9uTmFtZUZyb21UeXBlUGFyYW1ldGVyTmFtZSA9IGZ1bmN0aW9uIChwYXJhbU5hbWUpIHsKCXJldHVybiB7ZGVjb2RlTmFtZTogJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkRlY29kZUZ1bmN0aW9uTmFtZVByZWZpeCArICgndHlwZV9wYXJhbWV0ZXJfJyArIHBhcmFtTmFtZSksIGVuY29kZU5hbWU6ICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25FbmNvZGVGdW5jdGlvbk5hbWVQcmVmaXggKyAoJ3R5cGVfcGFyYW1ldGVyXycgKyBwYXJhbU5hbWUpfTsKfTsKdmFyICRlbG0kY29yZSRTdHJpbmckdHJpbUxlZnQgPSBfU3RyaW5nX3RyaW1MZWZ0Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRlckV4cHJlc3Npb25Gcm9tVHlwZSA9IEYyKAoJZnVuY3Rpb24gKF92MCwgX3YxKSB7CgkJanNvbkNvbnZlcnRlckV4cHJlc3Npb25Gcm9tVHlwZToKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgZW5jb2RlVmFsdWVFeHByZXNzaW9uID0gX3YwLmVuY29kZVZhbHVlRXhwcmVzc2lvbjsKCQkJdmFyIHR5cGVBcmdMb2NhbE5hbWUgPSBfdjAudHlwZUFyZ0xvY2FsTmFtZTsKCQkJdmFyIHR5cGVBbm5vdGF0aW9uID0gX3YxLmE7CgkJCXZhciB0eXBlQXJndW1lbnRzID0gX3YxLmI7CgkJCXZhciB0eXBlQXJndW1lbnRzRXhwcmVzc2lvbnMgPSBBMigKCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCWZ1bmN0aW9uICh0eXBlQXJndW1lbnQpIHsKCQkJCQl2YXIgdHlwZUFyZ3VtZW50RXhwcmVzc2lvbnMgPSBBMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRlckV4cHJlc3Npb25Gcm9tVHlwZSwKCQkJCQkJe2VuY29kZVZhbHVlRXhwcmVzc2lvbjogdHlwZUFyZ0xvY2FsTmFtZSwgdHlwZUFyZ0xvY2FsTmFtZTogdHlwZUFyZ0xvY2FsTmFtZSArICdfJ30sCgkJCQkJCV9VdGlsc19UdXBsZTIodHlwZUFyZ3VtZW50LCBfTGlzdF9OaWwpKTsKCQkJCQl2YXIgZGVjb2RlID0gQTIoJGVsbSRjb3JlJFN0cmluZyRjb250YWlucywgJyAnLCB0eXBlQXJndW1lbnRFeHByZXNzaW9ucy5kZWNvZGVFeHByZXNzaW9uKSA/ICgnKCcgKyAodHlwZUFyZ3VtZW50RXhwcmVzc2lvbnMuZGVjb2RlRXhwcmVzc2lvbiArICcpJykpIDogdHlwZUFyZ3VtZW50RXhwcmVzc2lvbnMuZGVjb2RlRXhwcmVzc2lvbjsKCQkJCQlyZXR1cm4ge2RlY29kZTogZGVjb2RlLCBlbmNvZGU6ICcoXFwnICsgKHR5cGVBcmdMb2NhbE5hbWUgKyAoJyAtPiAnICsgKHR5cGVBcmd1bWVudEV4cHJlc3Npb25zLmVuY29kZUV4cHJlc3Npb24gKyAnKScpKSl9OwoJCQkJfSwKCQkJCXR5cGVBcmd1bWVudHMpOwoJCQl2YXIgdHlwZUFyZ3VtZW50c0VuY29kZUV4cHJlc3Npb25zVGV4dCA9IEEyKAoJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJJyAnLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCXJldHVybiAkLmVuY29kZTsKCQkJCQl9LAoJCQkJCXR5cGVBcmd1bWVudHNFeHByZXNzaW9ucykpOwoJCQl2YXIgdHlwZUFyZ3VtZW50c0RlY29kZUV4cHJlc3Npb25zVGV4dCA9IEEyKAoJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJJyAnLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCXJldHVybiAkLmRlY29kZTsKCQkJCQl9LAoJCQkJCXR5cGVBcmd1bWVudHNFeHByZXNzaW9ucykpOwoJCQl2YXIgY29udGludWVXaXRoTG9jYWxOYW1lQW5kQ29tbW9uUHJlZml4ID0gZnVuY3Rpb24gKGxvY2FsTmFtZSkgewoJCQkJcmV0dXJuIHsKCQkJCQlkZWNvZGVFeHByZXNzaW9uOiAkZWxtJGNvcmUkU3RyaW5nJHRyaW0oJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkRlY29kZUZ1bmN0aW9uTmFtZVByZWZpeCArIChsb2NhbE5hbWUgKyAoJyAnICsgdHlwZUFyZ3VtZW50c0RlY29kZUV4cHJlc3Npb25zVGV4dCkpKSwKCQkJCQllbmNvZGVFeHByZXNzaW9uOiBBMigKCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQknICcsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyLAoJCQkJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJGVsbSRjb3JlJFN0cmluZyRpc0VtcHR5LCAkZWxtJGNvcmUkQmFzaWNzJG5vdCksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQlfVXRpbHNfYXAoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkVuY29kZUZ1bmN0aW9uTmFtZVByZWZpeCwgbG9jYWxOYW1lKSwKCQkJCQkJCQkJdHlwZUFyZ3VtZW50c0VuY29kZUV4cHJlc3Npb25zVGV4dCwKCQkJCQkJCQkJZW5jb2RlVmFsdWVFeHByZXNzaW9uCgkJCQkJCQkJXSkpKQoJCQkJfTsKCQkJfTsKCQkJdmFyIGNvbnRpbnVlV2l0aEF0b21Jbkpzb25Db3JlID0gZnVuY3Rpb24gKGF0b21OYW1lKSB7CgkJCQlyZXR1cm4gewoJCQkJCWRlY29kZUV4cHJlc3Npb246ICRlbG0kY29yZSRTdHJpbmckdHJpbSgnSnNvbi5EZWNvZGUuJyArIChhdG9tTmFtZSArICgnICcgKyB0eXBlQXJndW1lbnRzRGVjb2RlRXhwcmVzc2lvbnNUZXh0KSkpLAoJCQkJCWVuY29kZUV4cHJlc3Npb246IEEyKAoJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCScgJywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXIsCgkJCQkJCQlBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLCAkZWxtJGNvcmUkU3RyaW5nJGlzRW1wdHksICRlbG0kY29yZSRCYXNpY3Mkbm90KSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbJ0pzb24uRW5jb2RlLicgKyBhdG9tTmFtZSwgdHlwZUFyZ3VtZW50c0VuY29kZUV4cHJlc3Npb25zVGV4dCwgZW5jb2RlVmFsdWVFeHByZXNzaW9uXSkpKQoJCQkJfTsKCQkJfTsKCQkJc3dpdGNoICh0eXBlQW5ub3RhdGlvbi4kKSB7CgkJCQljYXNlICdDaG9pY2VFbG1UeXBlJzoKCQkJCQl2YXIgY2hvaWNlID0gdHlwZUFubm90YXRpb24uYTsKCQkJCQl2YXIgdHlwZU5hbWVSZXByZXNlbnRhdGlvbiA9ICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25Db252ZXJ0ZXJGdW5jdGlvbk5hbWVDb21tb25QYXJ0RnJvbVR5cGVOYW1lKGNob2ljZSk7CgkJCQkJcmV0dXJuIHsKCQkJCQkJZGVjb2RlRXhwcmVzc2lvbjogJGVsbSRjb3JlJFN0cmluZyR0cmltKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25EZWNvZGVGdW5jdGlvbk5hbWVQcmVmaXggKyAodHlwZU5hbWVSZXByZXNlbnRhdGlvbiArICgnICcgKyB0eXBlQXJndW1lbnRzRGVjb2RlRXhwcmVzc2lvbnNUZXh0KSkpLAoJCQkJCQllbmNvZGVFeHByZXNzaW9uOiBBMigKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCScgJywKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlciwKCQkJCQkJCQlBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLCAkZWxtJGNvcmUkU3RyaW5nJGlzRW1wdHksICRlbG0kY29yZSRCYXNpY3Mkbm90KSwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCV9VdGlsc19hcCgkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uRW5jb2RlRnVuY3Rpb25OYW1lUHJlZml4LCB0eXBlTmFtZVJlcHJlc2VudGF0aW9uKSwKCQkJCQkJCQkJCXR5cGVBcmd1bWVudHNFbmNvZGVFeHByZXNzaW9uc1RleHQsCgkJCQkJCQkJCQllbmNvZGVWYWx1ZUV4cHJlc3Npb24KCQkJCQkJCQkJXSkpKQoJCQkJCX07CgkJCQljYXNlICdSZWNvcmRFbG1UeXBlJzoKCQkJCQl2YXIgcmVjb3JkID0gdHlwZUFubm90YXRpb24uYTsKCQkJCQlpZiAoX1V0aWxzX2VxKHJlY29yZC5maWVsZHMsIF9MaXN0X05pbCkpIHsKCQkJCQkJcmV0dXJuIHtkZWNvZGVFeHByZXNzaW9uOiAnSnNvbi5EZWNvZGUuc3VjY2VlZCB7fScsIGVuY29kZUV4cHJlc3Npb246ICdKc29uLkVuY29kZS5vYmplY3QgW10nfTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgZmllbGRzRXhwcmVzc2lvbnMgPSBBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCWZ1bmN0aW9uIChfdjQpIHsKCQkJCQkJCQl2YXIgZmllbGROYW1lID0gX3Y0LmE7CgkJCQkJCQkJdmFyIGZpZWxkVHlwZSA9IF92NC5iOwoJCQkJCQkJCXZhciBmaWVsZEV4cHJlc3Npb24gPSBBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRlckV4cHJlc3Npb25Gcm9tVHlwZSwKCQkJCQkJCQkJe2VuY29kZVZhbHVlRXhwcmVzc2lvbjogZW5jb2RlVmFsdWVFeHByZXNzaW9uICsgKCcuJyArIGZpZWxkTmFtZSksIHR5cGVBcmdMb2NhbE5hbWU6IHR5cGVBcmdMb2NhbE5hbWV9LAoJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKGZpZWxkVHlwZSwgX0xpc3RfTmlsKSk7CgkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJZGVjb2RlOiBmaWVsZEV4cHJlc3Npb24uZGVjb2RlRXhwcmVzc2lvbiwKCQkJCQkJCQkJZW5jb2RlOiAnKCBcIicgKyAoZmllbGROYW1lICsgKCdcIlxuICAsICcgKyAoJGVsbSRjb3JlJFN0cmluZyR0cmltTGVmdCgKCQkJCQkJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGluZGVudEVsbUNvZGVMaW5lcywgMSwgZmllbGRFeHByZXNzaW9uLmVuY29kZUV4cHJlc3Npb24pKSArICdcbiAgKScpKSksCgkJCQkJCQkJCWZpZWxkTmFtZTogZmllbGROYW1lCgkJCQkJCQkJfTsKCQkJCQkJCX0sCgkJCQkJCQlyZWNvcmQuZmllbGRzKTsKCQkJCQkJdmFyIGVuY29kZUxpc3RFeHByZXNzaW9uID0gJ1sgJyArIChBMigKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCSdcbiwgJywKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJCQlyZXR1cm4gJC5lbmNvZGU7CgkJCQkJCQkJfSwKCQkJCQkJCQlmaWVsZHNFeHByZXNzaW9ucykpICsgJ1xuXScpOwoJCQkJCQl2YXIgZGVjb2RlTWFwID0gJyhcXCcgKyAoQTIoCgkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQknICcsCgkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRlbG0kY29yZSRUdXBsZSRmaXJzdCwgcmVjb3JkLmZpZWxkcykpICsgKCcgLT4geyAnICsgKEEyKAoJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJJywgJywKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCQlmdW5jdGlvbiAoX3YzKSB7CgkJCQkJCQkJCXZhciBmaWVsZE5hbWUgPSBfdjMuYTsKCQkJCQkJCQkJcmV0dXJuIGZpZWxkTmFtZSArICgnID0gJyArIGZpZWxkTmFtZSk7CgkJCQkJCQkJfSwKCQkJCQkJCQlyZWNvcmQuZmllbGRzKSkgKyAnIH0pJykpKTsKCQkJCQkJdmFyIGRlY29kZUZpZWxkc0xpbmVzID0gQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQlmdW5jdGlvbiAoZmllbGQpIHsKCQkJCQkJCQl2YXIgZmllbGREZWNvZGUgPSBBMigkZWxtJGNvcmUkU3RyaW5nJGNvbnRhaW5zLCAnICcsIGZpZWxkLmRlY29kZSkgPyAoJyggJyArIChmaWVsZC5kZWNvZGUgKyAnXG4pJykpIDogZmllbGQuZGVjb2RlOwoJCQkJCQkJCXZhciBhbHRlcm5hdGVGaWVsZE5hbWVzID0gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRmaXJzdENoYXJUb1VwcGVyQ2FzZShmaWVsZC5maWVsZE5hbWUpCgkJCQkJCQkJCV0pOwoJCQkJCQkJCXZhciBmaWVsZE1hcExpbmVzID0gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQknKCBqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcyAnICsgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkc3RyaW5nRXhwcmVzc2lvbkZyb21TdHJpbmcoZmllbGQuZmllbGROYW1lKSwKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW5kZW50RWxtQ29kZUxpbmVzLAoJCQkJCQkJCQkJMSwKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQkJCQknICcsCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQknWycsCgkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQkJCQkJCScsICcsCgkJCQkJCQkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHN0cmluZ0V4cHJlc3Npb25Gcm9tU3RyaW5nLCBhbHRlcm5hdGVGaWVsZE5hbWVzKSksCgkJCQkJCQkJCQkJCQknXScKCQkJCQkJCQkJCQkJXSkpKSwKCQkJCQkJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGluZGVudEVsbUNvZGVMaW5lcywgMSwgZmllbGREZWNvZGUpLAoJCQkJCQkJCQkJJyknCgkJCQkJCQkJCV0pOwoJCQkJCQkJCXJldHVybiAnfD4ganNvbkRlY29kZV9hbmRNYXBcbicgKyBBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW5kZW50RWxtQ29kZUxpbmVzLAoJCQkJCQkJCQkxLAoJCQkJCQkJCQlBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICdcbicsIGZpZWxkTWFwTGluZXMpKTsKCQkJCQkJCX0sCgkJCQkJCQlmaWVsZHNFeHByZXNzaW9ucyk7CgkJCQkJCXJldHVybiB7CgkJCQkJCQlkZWNvZGVFeHByZXNzaW9uOiAnSnNvbi5EZWNvZGUuc3VjY2VlZCAnICsgKGRlY29kZU1hcCArICgnXG4nICsgQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW5kZW50RWxtQ29kZUxpbmVzLAoJCQkJCQkJCTEsCgkJCQkJCQkJQTIoJGVsbSRjb3JlJFN0cmluZyRqb2luLCAnXG4nLCBkZWNvZGVGaWVsZHNMaW5lcykpKSksCgkJCQkJCQllbmNvZGVFeHByZXNzaW9uOiBBMigKCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQkJJ1xuJywKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCSdKc29uLkVuY29kZS5vYmplY3QnLAoJCQkJCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW5kZW50RWxtQ29kZUxpbmVzLCAxLCBlbmNvZGVMaXN0RXhwcmVzc2lvbikKCQkJCQkJCQkJXSkpCgkJCQkJCX07CgkJCQkJfQoJCQkJY2FzZSAnSW5zdGFuY2VFbG1UeXBlJzoKCQkJCQl2YXIgaW5zdGFuY2UgPSB0eXBlQW5ub3RhdGlvbi5hOwoJCQkJCXZhciAkdGVtcCRfdjAgPSB7ZW5jb2RlVmFsdWVFeHByZXNzaW9uOiBlbmNvZGVWYWx1ZUV4cHJlc3Npb24sIHR5cGVBcmdMb2NhbE5hbWU6IHR5cGVBcmdMb2NhbE5hbWV9LAoJCQkJCQkkdGVtcCRfdjEgPSBfVXRpbHNfVHVwbGUyKGluc3RhbmNlLmluc3RhbnRpYXRlZCwgaW5zdGFuY2UuX2FyZ3VtZW50cyk7CgkJCQkJX3YwID0gJHRlbXAkX3YwOwoJCQkJCV92MSA9ICR0ZW1wJF92MTsKCQkJCQljb250aW51ZSBqc29uQ29udmVydGVyRXhwcmVzc2lvbkZyb21UeXBlOwoJCQkJY2FzZSAnVHVwbGVFbG1UeXBlJzoKCQkJCQl2YXIgdHVwbGUgPSB0eXBlQW5ub3RhdGlvbi5hOwoJCQkJCXZhciBpdGVtc05hbWVzID0gQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50LAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRhcHBlbmQoJ2l0ZW1fJykpLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJhbmdlLAoJCQkJCQkJMCwKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGxlbmd0aCh0dXBsZSkgLSAxKSk7CgkJCQkJdmFyIGdldEl0ZW1GdW5jdGlvbkZyb21JbmRleCA9IGZ1bmN0aW9uIChpdGVtSW5kZXgpIHsKCQkJCQkJcmV0dXJuICcoXFwoICcgKyAoQTIoJGVsbSRjb3JlJFN0cmluZyRqb2luLCAnLCAnLCBpdGVtc05hbWVzKSArICgnICkgLT4gaXRlbV8nICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChpdGVtSW5kZXgpICsgJyknKSkpOwoJCQkJCX07CgkJCQkJdmFyIGl0ZW1zRXhwcmVzc2lvbnMgPSBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkaW5kZXhlZE1hcCwKCQkJCQkJRjIoCgkJCQkJCQlmdW5jdGlvbiAoaSwgaXRlbVR5cGUpIHsKCQkJCQkJCQl2YXIgbG9jYWxOYW1lID0gJ2l0ZW1fJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludChpKTsKCQkJCQkJCQl2YXIgZ2V0SXRlbUZ1bmN0aW9uID0gZ2V0SXRlbUZ1bmN0aW9uRnJvbUluZGV4KGkpOwoJCQkJCQkJCXZhciBpdGVtRXhwcmVzc2lvbiA9IEEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydGVyRXhwcmVzc2lvbkZyb21UeXBlLAoJCQkJCQkJCQl7ZW5jb2RlVmFsdWVFeHByZXNzaW9uOiAnKCcgKyAoZ2V0SXRlbUZ1bmN0aW9uICsgKCcgJyArIChlbmNvZGVWYWx1ZUV4cHJlc3Npb24gKyAnKScpKSksIHR5cGVBcmdMb2NhbE5hbWU6IHR5cGVBcmdMb2NhbE5hbWV9LAoJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKGl0ZW1UeXBlLCBfTGlzdF9OaWwpKTsKCQkJCQkJCQl2YXIgaXRlbURlY29kZUV4cHIgPSBBMigkZWxtJGNvcmUkU3RyaW5nJGNvbnRhaW5zLCAnICcsIGl0ZW1FeHByZXNzaW9uLmRlY29kZUV4cHJlc3Npb24pID8gKCcoJyArIChpdGVtRXhwcmVzc2lvbi5kZWNvZGVFeHByZXNzaW9uICsgJyknKSkgOiBpdGVtRXhwcmVzc2lvbi5kZWNvZGVFeHByZXNzaW9uOwoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCWRlY29kZTogJyhKc29uLkRlY29kZS5pbmRleCAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChpKSArICgnICcgKyAoaXRlbURlY29kZUV4cHIgKyAnKScpKSksCgkJCQkJCQkJCWVuY29kZTogaXRlbUV4cHJlc3Npb24uZW5jb2RlRXhwcmVzc2lvbiwKCQkJCQkJCQkJbG9jYWxOYW1lOiBsb2NhbE5hbWUKCQkJCQkJCQl9OwoJCQkJCQkJfSksCgkJCQkJCXR1cGxlKTsKCQkJCQl2YXIgZW5jb2RlTGlzdEV4cHJlc3Npb24gPSAnWyAnICsgKEEyKAoJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCSdcbiwgJywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJCXJldHVybiAkLmVuY29kZTsKCQkJCQkJCX0sCgkJCQkJCQlpdGVtc0V4cHJlc3Npb25zKSkgKyAnXG5dJyk7CgkJCQkJdmFyIGRlY29kZU1hcCA9ICcoXFwnICsgKEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJyAnLCBpdGVtc05hbWVzKSArICgnIC0+ICggJyArIChBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcsICcsIGl0ZW1zTmFtZXMpICsgJyApKScpKSk7CgkJCQkJcmV0dXJuIHsKCQkJCQkJZGVjb2RlRXhwcmVzc2lvbjogJ0pzb24uRGVjb2RlLm1hcCcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkbGVuZ3RoKHR1cGxlKSkgKyAoJyAnICsgKGRlY29kZU1hcCArICgnXG4nICsgQTIoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRpbmRlbnRFbG1Db2RlTGluZXMsCgkJCQkJCQkxLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCSdcbicsCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCQkJCXJldHVybiAkLmRlY29kZTsKCQkJCQkJCQkJfSwKCQkJCQkJCQkJaXRlbXNFeHByZXNzaW9ucykpKSkpKSksCgkJCQkJCWVuY29kZUV4cHJlc3Npb246ICdKc29uLkVuY29kZS5saXN0IGlkZW50aXR5XG4nICsgQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW5kZW50RWxtQ29kZUxpbmVzLCAxLCBlbmNvZGVMaXN0RXhwcmVzc2lvbikKCQkJCQl9OwoJCQkJY2FzZSAnR2VuZXJpY1R5cGUnOgoJCQkJCXZhciBuYW1lID0gdHlwZUFubm90YXRpb24uYTsKCQkJCQl2YXIgZnVuY3Rpb25zTmFtZXMgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydGVyRnVuY3Rpb25OYW1lRnJvbVR5cGVQYXJhbWV0ZXJOYW1lKG5hbWUpOwoJCQkJCXJldHVybiB7ZGVjb2RlRXhwcmVzc2lvbjogZnVuY3Rpb25zTmFtZXMuZGVjb2RlTmFtZSwgZW5jb2RlRXhwcmVzc2lvbjogZnVuY3Rpb25zTmFtZXMuZW5jb2RlTmFtZSArICgnICcgKyBlbmNvZGVWYWx1ZUV4cHJlc3Npb24pfTsKCQkJCWNhc2UgJ1VuaXRUeXBlJzoKCQkJCQlyZXR1cm4ge2RlY29kZUV4cHJlc3Npb246ICdKc29uLkRlY29kZS5zdWNjZWVkICgpJywgZW5jb2RlRXhwcmVzc2lvbjogJ0pzb24uRW5jb2RlLmxpc3QgKGFsd2F5cyAoSnNvbi5FbmNvZGUub2JqZWN0IFtdKSkgW10nfTsKCQkJCWRlZmF1bHQ6CgkJCQkJdmFyIGxlYWYgPSB0eXBlQW5ub3RhdGlvbi5hOwoJCQkJCXN3aXRjaCAobGVhZi4kKSB7CgkJCQkJCWNhc2UgJ1N0cmluZ0xlYWYnOgoJCQkJCQkJcmV0dXJuIGNvbnRpbnVlV2l0aEF0b21Jbkpzb25Db3JlKCdzdHJpbmcnKTsKCQkJCQkJY2FzZSAnSW50TGVhZic6CgkJCQkJCQlyZXR1cm4gY29udGludWVXaXRoQXRvbUluSnNvbkNvcmUoJ2ludCcpOwoJCQkJCQljYXNlICdCb29sTGVhZic6CgkJCQkJCQlyZXR1cm4gY29udGludWVXaXRoQXRvbUluSnNvbkNvcmUoJ2Jvb2wnKTsKCQkJCQkJY2FzZSAnRmxvYXRMZWFmJzoKCQkJCQkJCXJldHVybiBjb250aW51ZVdpdGhBdG9tSW5Kc29uQ29yZSgnZmxvYXQnKTsKCQkJCQkJY2FzZSAnQnl0ZXNMZWFmJzoKCQkJCQkJCXJldHVybiB7ZGVjb2RlRXhwcmVzc2lvbjogJ2pzb25fZGVjb2RlX0J5dGVzJywgZW5jb2RlRXhwcmVzc2lvbjogJ2pzb25fZW5jb2RlX0J5dGVzICcgKyBlbmNvZGVWYWx1ZUV4cHJlc3Npb259OwoJCQkJCQljYXNlICdMaXN0TGVhZic6CgkJCQkJCQlyZXR1cm4gY29udGludWVXaXRoTG9jYWxOYW1lQW5kQ29tbW9uUHJlZml4KCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25Db252ZXJ0TGlzdEZ1bmN0aW9uTmFtZUNvbW1vblBhcnQpOwoJCQkJCQljYXNlICdBcnJheUxlYWYnOgoJCQkJCQkJcmV0dXJuIGNvbnRpbnVlV2l0aExvY2FsTmFtZUFuZENvbW1vblByZWZpeCgkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydEFycmF5RnVuY3Rpb25OYW1lQ29tbW9uUGFydCk7CgkJCQkJCWNhc2UgJ1NldExlYWYnOgoJCQkJCQkJcmV0dXJuIGNvbnRpbnVlV2l0aExvY2FsTmFtZUFuZENvbW1vblByZWZpeCgkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydFNldEZ1bmN0aW9uTmFtZUNvbW1vblBhcnQpOwoJCQkJCQljYXNlICdSZXN1bHRMZWFmJzoKCQkJCQkJCXJldHVybiBjb250aW51ZVdpdGhMb2NhbE5hbWVBbmRDb21tb25QcmVmaXgoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRSZXN1bHRGdW5jdGlvbk5hbWVDb21tb25QYXJ0KTsKCQkJCQkJY2FzZSAnTWF5YmVMZWFmJzoKCQkJCQkJCXJldHVybiBjb250aW51ZVdpdGhMb2NhbE5hbWVBbmRDb21tb25QcmVmaXgoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRNYXliZUZ1bmN0aW9uTmFtZUNvbW1vblBhcnQpOwoJCQkJCQljYXNlICdEaWN0TGVhZic6CgkJCQkJCQlyZXR1cm4gY29udGludWVXaXRoTG9jYWxOYW1lQW5kQ29tbW9uUHJlZml4KCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25Db252ZXJ0RGljdEZ1bmN0aW9uTmFtZUNvbW1vblBhcnQpOwoJCQkJCQlkZWZhdWx0OgoJCQkJCQkJcmV0dXJuIHtkZWNvZGVFeHByZXNzaW9uOiAnSnNvbi5EZWNvZGUudmFsdWUnLCBlbmNvZGVFeHByZXNzaW9uOiBlbmNvZGVWYWx1ZUV4cHJlc3Npb259OwoJCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkVuY29kZVBhcmFtTmFtZSA9ICd2YWx1ZVRvRW5jb2RlJzsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGJ1aWxkSnNvbkNvbnZlcnRlckZ1bmN0aW9uc0ZvclR5cGVBbm5vdGF0aW9uID0gZnVuY3Rpb24gKHR5cGVBbm5vdGF0aW9uKSB7Cgl2YXIgdHlwZUFubm90YXRpb25UZXh0ID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkYnVpbGRUeXBlQW5ub3RhdGlvblRleHQodHlwZUFubm90YXRpb24pOwoJdmFyIG5hbWVDb21tb25QYXJ0ID0gQTIoCgkJJGVsbSRjb3JlJFN0cmluZyRsZWZ0LAoJCTEwLAoJCSRlbG0kY29yZSRTdHJpbmckZnJvbUludCgKCQkJJGF1dGhvciRwcm9qZWN0JEZOVjFhJGhhc2godHlwZUFubm90YXRpb25UZXh0KSkpOwoJdmFyIGpzb25Db252ZXJ0ZXJFeHByZXNzaW9ucyA9IEEyKAoJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25Db252ZXJ0ZXJFeHByZXNzaW9uRnJvbVR5cGUsCgkJe2VuY29kZVZhbHVlRXhwcmVzc2lvbjogJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkVuY29kZVBhcmFtTmFtZSwgdHlwZUFyZ0xvY2FsTmFtZTogJ3R5cGVfYXJnJ30sCgkJX1V0aWxzX1R1cGxlMih0eXBlQW5ub3RhdGlvbiwgX0xpc3RfTmlsKSk7Cgl2YXIgZW5jb2RlRnVuY3Rpb25OYW1lID0gX1V0aWxzX2FwKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25FbmNvZGVGdW5jdGlvbk5hbWVQcmVmaXgsIG5hbWVDb21tb25QYXJ0KTsKCXZhciBlbmNvZGVGdW5jdGlvblRleHQgPSBlbmNvZGVGdW5jdGlvbk5hbWUgKyAoJyAnICsgKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25FbmNvZGVQYXJhbU5hbWUgKyAoJyA9XG4nICsgQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW5kZW50RWxtQ29kZUxpbmVzLCAxLCBqc29uQ29udmVydGVyRXhwcmVzc2lvbnMuZW5jb2RlRXhwcmVzc2lvbikpKSk7Cgl2YXIgZGVjb2RlRnVuY3Rpb25OYW1lID0gX1V0aWxzX2FwKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25EZWNvZGVGdW5jdGlvbk5hbWVQcmVmaXgsIG5hbWVDb21tb25QYXJ0KTsKCXZhciBkZWNvZGVGdW5jdGlvblRleHQgPSBkZWNvZGVGdW5jdGlvbk5hbWUgKyAoJyA9XG4nICsgQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW5kZW50RWxtQ29kZUxpbmVzLCAxLCBqc29uQ29udmVydGVyRXhwcmVzc2lvbnMuZGVjb2RlRXhwcmVzc2lvbikpOwoJcmV0dXJuIHsKCQlkZWNvZGVGdW5jdGlvbjoge25hbWU6IGRlY29kZUZ1bmN0aW9uTmFtZSwgdGV4dDogZGVjb2RlRnVuY3Rpb25UZXh0fSwKCQllbmNvZGVGdW5jdGlvbjoge25hbWU6IGVuY29kZUZ1bmN0aW9uTmFtZSwgdGV4dDogZW5jb2RlRnVuY3Rpb25UZXh0fQoJfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21tb24kbGlzdFVuaXF1ZUhlbHAgPSBGMigKCWZ1bmN0aW9uIChyZW1haW5pbmcsIGFjY3VtdWxhdG9yKSB7CgkJbGlzdFVuaXF1ZUhlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFyZW1haW5pbmcuYikgewoJCQkJcmV0dXJuICRlbG0kY29yZSRMaXN0JHJldmVyc2UoYWNjdW11bGF0b3IpOwoJCQl9IGVsc2UgewoJCQkJdmFyIGZpcnN0ID0gcmVtYWluaW5nLmE7CgkJCQl2YXIgcmVzdCA9IHJlbWFpbmluZy5iOwoJCQkJaWYgKEEyKCRlbG0kY29yZSRMaXN0JG1lbWJlciwgZmlyc3QsIGFjY3VtdWxhdG9yKSkgewoJCQkJCXZhciAkdGVtcCRyZW1haW5pbmcgPSByZXN0LAoJCQkJCQkkdGVtcCRhY2N1bXVsYXRvciA9IGFjY3VtdWxhdG9yOwoJCQkJCXJlbWFpbmluZyA9ICR0ZW1wJHJlbWFpbmluZzsKCQkJCQlhY2N1bXVsYXRvciA9ICR0ZW1wJGFjY3VtdWxhdG9yOwoJCQkJCWNvbnRpbnVlIGxpc3RVbmlxdWVIZWxwOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgJHRlbXAkcmVtYWluaW5nID0gcmVzdCwKCQkJCQkJJHRlbXAkYWNjdW11bGF0b3IgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBmaXJzdCwgYWNjdW11bGF0b3IpOwoJCQkJCXJlbWFpbmluZyA9ICR0ZW1wJHJlbWFpbmluZzsKCQkJCQlhY2N1bXVsYXRvciA9ICR0ZW1wJGFjY3VtdWxhdG9yOwoJCQkJCWNvbnRpbnVlIGxpc3RVbmlxdWVIZWxwOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tbW9uJGxpc3RVbmlxdWUgPSBmdW5jdGlvbiAobGlzdCkgewoJcmV0dXJuIEEyKCRhdXRob3IkcHJvamVjdCRDb21tb24kbGlzdFVuaXF1ZUhlbHAsIGxpc3QsIF9MaXN0X05pbCk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRtb2R1bGVOYW1lRnJvbVR5cGVOYW1lID0gQTIoCgkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJJGVsbSRjb3JlJFN0cmluZyRzcGxpdCgnLicpLAoJQTIoCgkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlLAoJCUEyKAoJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkkZWxtJGNvcmUkTGlzdCRkcm9wKDEpLAoJCQlBMigKCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlLAoJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luKCcuJykpKSkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZ2VuZXJhdGVGdW5jdGlvbnNGb3JNdWx0aXBsZVR5cGVzID0gRjMoCglmdW5jdGlvbiAoY29uZmlnLCB0eXBlQW5ub3RhdGlvbnNCZWZvcmVEZWR1cGxpY2F0aW5nLCBjaG9pY2VUeXBlcykgewoJCXZhciBtb2R1bGVzVG9JbXBvcnRGb3JDaG9pY2VUeXBlcyA9ICRlbG0kY29yZSRTZXQkZnJvbUxpc3QoCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJJGVsbSRjb3JlJFN0cmluZyRzcGxpdCgnLicpLAoJCQkJJGVsbSRjb3JlJFNldCR0b0xpc3QoCgkJCQkJJGVsbSRjb3JlJFNldCRmcm9tTGlzdCgKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRtb2R1bGVOYW1lRnJvbVR5cGVOYW1lLAoJCQkJCQkJJGVsbSRjb3JlJERpY3Qka2V5cyhjaG9pY2VUeXBlcykpKSkpKTsKCQl2YXIgZ2VuZXJhdGVkRnVuY3Rpb25zRnJvbVR5cGVBbm5vdGF0aW9ucyA9IEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsCgkJCWNvbmZpZy5nZW5lcmF0ZUZyb21UeXBlQW5ub3RhdGlvbiwKCQkJJGF1dGhvciRwcm9qZWN0JENvbW1vbiRsaXN0VW5pcXVlKHR5cGVBbm5vdGF0aW9uc0JlZm9yZURlZHVwbGljYXRpbmcpKTsKCQl2YXIgZ2VuZXJhdGVkRnVuY3Rpb25zRnJvbUNob2ljZVR5cGVzID0gQTIoCgkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJY29uZmlnLmdlbmVyYXRlRnJvbUNob2ljZVR5cGUsCgkJCSRlbG0kY29yZSREaWN0JHRvTGlzdChjaG9pY2VUeXBlcykpOwoJCXZhciBnZW5lcmF0ZWRGdW5jdGlvbnMgPSBfVXRpbHNfYXAoZ2VuZXJhdGVkRnVuY3Rpb25zRnJvbVR5cGVBbm5vdGF0aW9ucywgZ2VuZXJhdGVkRnVuY3Rpb25zRnJvbUNob2ljZVR5cGVzKTsKCQlyZXR1cm4ge2dlbmVyYXRlZEZ1bmN0aW9uczogZ2VuZXJhdGVkRnVuY3Rpb25zLCBtb2R1bGVzVG9JbXBvcnRGb3JDaG9pY2VUeXBlczogbW9kdWxlc1RvSW1wb3J0Rm9yQ2hvaWNlVHlwZXN9OwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydGVyRnVuY3Rpb25Gcm9tQ2hvaWNlVHlwZSA9IEYyKAoJZnVuY3Rpb24gKF92MCwgY2hvaWNlVHlwZSkgewoJCXZhciBjaG9pY2VUeXBlTmFtZSA9IF92MC5jaG9pY2VUeXBlTmFtZTsKCQl2YXIgZW5jb2RlVmFsdWVFeHByZXNzaW9uID0gX3YwLmVuY29kZVZhbHVlRXhwcmVzc2lvbjsKCQl2YXIgdHlwZUFyZ0xvY2FsTmFtZSA9IF92MC50eXBlQXJnTG9jYWxOYW1lOwoJCXZhciB0eXBlTmFtZVJlcHJlc2VudGF0aW9uID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRlckZ1bmN0aW9uTmFtZUNvbW1vblBhcnRGcm9tVHlwZU5hbWUoY2hvaWNlVHlwZU5hbWUpOwoJCXZhciBtb2R1bGVOYW1lID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbW9kdWxlTmFtZUZyb21UeXBlTmFtZShjaG9pY2VUeXBlTmFtZSk7CgkJdmFyIHRhZ3NFeHByZXNzaW9ucyA9IEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCXZhciB0YWdOYW1lID0gX3YxLmE7CgkJCQl2YXIgdGFnUGFyYW1ldGVycyA9IF92MS5iOwoJCQkJdmFyIHRhZ1BhcmFtZXRlcnNFeHByZXNzaW9ucyA9IEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGluZGV4ZWRNYXAsCgkJCQkJRjIoCgkJCQkJCWZ1bmN0aW9uIChpLCB0YWdQYXJhbVR5cGUpIHsKCQkJCQkJCXZhciBhcmd1bWVudExvY2FsTmFtZSA9ICd0YWdBcmd1bWVudCcgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoaSk7CgkJCQkJCQl2YXIgdGFnUGFyYW1FeHByID0gQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRlckV4cHJlc3Npb25Gcm9tVHlwZSwKCQkJCQkJCQl7ZW5jb2RlVmFsdWVFeHByZXNzaW9uOiBhcmd1bWVudExvY2FsTmFtZSwgdHlwZUFyZ0xvY2FsTmFtZTogdHlwZUFyZ0xvY2FsTmFtZX0sCgkJCQkJCQkJX1V0aWxzX1R1cGxlMih0YWdQYXJhbVR5cGUsIF9MaXN0X05pbCkpOwoJCQkJCQkJcmV0dXJuIHtkZWNvZGU6IHRhZ1BhcmFtRXhwci5kZWNvZGVFeHByZXNzaW9uLCBlbmNvZGU6IHRhZ1BhcmFtRXhwci5lbmNvZGVFeHByZXNzaW9uLCBsb2NhbE5hbWU6IGFyZ3VtZW50TG9jYWxOYW1lfTsKCQkJCQkJfSksCgkJCQkJdGFnUGFyYW1ldGVycyk7CgkJCQl2YXIgZW5jb2RlU2Vjb25kTGluZSA9ICdKc29uLkVuY29kZS5vYmplY3QgWyAoIFwiJyArICh0YWdOYW1lICsgKCdcIiwgSnNvbi5FbmNvZGUubGlzdCBpZGVudGl0eSBbJyArICgoX1V0aWxzX2VxKHRhZ1BhcmFtZXRlcnNFeHByZXNzaW9ucywgX0xpc3RfTmlsKSA/ICcnIDogKCcgJyArIChBMigKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJJywgJywKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJcmV0dXJuICQuZW5jb2RlOwoJCQkJCQl9LAoJCQkJCQl0YWdQYXJhbWV0ZXJzRXhwcmVzc2lvbnMpKSArICcgJykpKSArICddICkgXScpKSk7CgkJCQl2YXIgZW5jb2RlQXJndW1lbnRzID0gQTIoCgkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCScgJywKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJcmV0dXJuICQubG9jYWxOYW1lOwoJCQkJCQl9LAoJCQkJCQl0YWdQYXJhbWV0ZXJzRXhwcmVzc2lvbnMpKTsKCQkJCXZhciBlbmNvZGVGaXJzdExpbmUgPSBBMigKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJJyAnLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXIsCgkJCQkJCUEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsICRlbG0kY29yZSRTdHJpbmckaXNFbXB0eSwgJGVsbSRjb3JlJEJhc2ljcyRub3QpLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbbW9kdWxlTmFtZSArICgnLicgKyB0YWdOYW1lKSwgZW5jb2RlQXJndW1lbnRzLCAnLT4nXSkpKTsKCQkJCXZhciBkZWNvZGVJbkZpZWxkID0gX1V0aWxzX2VxKHRhZ1BhcmFtZXRlcnNFeHByZXNzaW9ucywgX0xpc3RfTmlsKSA/ICgnanNvbkRlY29kZVN1Y2NlZWRXaGVuTm90TnVsbCAnICsgKG1vZHVsZU5hbWUgKyAoJy4nICsgdGFnTmFtZSkpKSA6ICgnSnNvbi5EZWNvZGUubGF6eSAoXFxfIC0+IEpzb24uRGVjb2RlLm1hcCcgKyAoKCgkZWxtJGNvcmUkTGlzdCRsZW5ndGgodGFnUGFyYW1ldGVyc0V4cHJlc3Npb25zKSA9PT0gMSkgPyAnJyA6ICRlbG0kY29yZSRTdHJpbmckZnJvbUludCgKCQkJCQkkZWxtJGNvcmUkTGlzdCRsZW5ndGgodGFnUGFyYW1ldGVyc0V4cHJlc3Npb25zKSkpICsgKCcgJyArIChtb2R1bGVOYW1lICsgKCcuJyArICh0YWdOYW1lICsgKCcgJyArIChBMigKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJJyAnLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRpbmRleGVkTWFwLAoJCQkJCQlGMigKCQkJCQkJCWZ1bmN0aW9uIChpLCB0YWdQYXJhbUV4cHIpIHsKCQkJCQkJCQl2YXIgdGFnUGFyYW1EZWNvZGVFeHByID0gQTIoJGVsbSRjb3JlJFN0cmluZyRjb250YWlucywgJyAnLCB0YWdQYXJhbUV4cHIuZGVjb2RlKSA/ICgnKCcgKyAodGFnUGFyYW1FeHByLmRlY29kZSArICcpJykpIDogdGFnUGFyYW1FeHByLmRlY29kZTsKCQkJCQkJCQlyZXR1cm4gJyhKc29uLkRlY29kZS5pbmRleCAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChpKSArICgnICcgKyAodGFnUGFyYW1EZWNvZGVFeHByICsgJyknKSkpOwoJCQkJCQkJfSksCgkJCQkJCXRhZ1BhcmFtZXRlcnNFeHByZXNzaW9ucykpICsgJyknKSkpKSkpKSk7CgkJCQlyZXR1cm4gewoJCQkJCWRlY29kZTogJ0pzb24uRGVjb2RlLmZpZWxkIFwiJyArICh0YWdOYW1lICsgKCdcIiAoJyArIChkZWNvZGVJbkZpZWxkICsgJyknKSkpLAoJCQkJCWVuY29kZTogQTIoCgkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJJ1xuJywKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCWVuY29kZUZpcnN0TGluZSwKCQkJCQkJCQlBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRpbmRlbnRFbG1Db2RlTGluZXMsIDEsIGVuY29kZVNlY29uZExpbmUpCgkJCQkJCQldKSkKCQkJCX07CgkJCX0sCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3Qkc29ydEJ5LAoJCQkJJGVsbSRjb3JlJFR1cGxlJGZpcnN0LAoJCQkJJGVsbSRjb3JlJERpY3QkdG9MaXN0KGNob2ljZVR5cGUudGFncykpKTsKCQl2YXIgZW5jb2RlUGFyYW1ldGVyc1RleHQgPSBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknICcsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydGVyRnVuY3Rpb25OYW1lRnJvbVR5cGVQYXJhbWV0ZXJOYW1lLAoJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCXJldHVybiAkLmVuY29kZU5hbWU7CgkJCQkJfSksCgkJCQljaG9pY2VUeXBlLnBhcmFtZXRlcnMpKTsKCQl2YXIgZW5jb2RlTGlzdEV4cHJlc3Npb24gPSBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknXG4nLAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJcmV0dXJuICQuZW5jb2RlOwoJCQkJfSwKCQkJCXRhZ3NFeHByZXNzaW9ucykpOwoJCXZhciBlbmNvZGVGdW5jdGlvbk5hbWUgPSBfVXRpbHNfYXAoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkVuY29kZUZ1bmN0aW9uTmFtZVByZWZpeCwgdHlwZU5hbWVSZXByZXNlbnRhdGlvbik7CgkJdmFyIGVuY29kZUV4cHJlc3Npb24gPSBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknXG4nLAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJJ2Nhc2UgJyArIChlbmNvZGVWYWx1ZUV4cHJlc3Npb24gKyAnIG9mJyksCgkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW5kZW50RWxtQ29kZUxpbmVzLCAxLCBlbmNvZGVMaXN0RXhwcmVzc2lvbikKCQkJCV0pKTsKCQl2YXIgZGVjb2RlUGFyYW1ldGVyc1RleHQgPSBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknICcsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydGVyRnVuY3Rpb25OYW1lRnJvbVR5cGVQYXJhbWV0ZXJOYW1lLAoJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCXJldHVybiAkLmRlY29kZU5hbWU7CgkJCQkJfSksCgkJCQljaG9pY2VUeXBlLnBhcmFtZXRlcnMpKTsKCQl2YXIgZGVjb2RlTGlzdEV4cHJlc3Npb24gPSAnWyAnICsgKEEyKAoJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCSdcbiwgJywKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCXJldHVybiAkLmRlY29kZTsKCQkJCX0sCgkJCQl0YWdzRXhwcmVzc2lvbnMpKSArICdcbl0nKTsKCQl2YXIgZGVjb2RlRnVuY3Rpb25OYW1lID0gX1V0aWxzX2FwKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25EZWNvZGVGdW5jdGlvbk5hbWVQcmVmaXgsIHR5cGVOYW1lUmVwcmVzZW50YXRpb24pOwoJCXZhciBkZWNvZGVFeHByZXNzaW9uID0gQTIoCgkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJJ1xuJywKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCSdKc29uLkRlY29kZS5vbmVPZicsCgkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW5kZW50RWxtQ29kZUxpbmVzLCAxLCBkZWNvZGVMaXN0RXhwcmVzc2lvbikKCQkJCV0pKTsKCQlyZXR1cm4gewoJCQlkZWNvZGVGdW5jdGlvbjogewoJCQkJbmFtZTogZGVjb2RlRnVuY3Rpb25OYW1lLAoJCQkJdGV4dDogQTIoCgkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCSdcbicsCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCScgJywKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlciwKCQkJCQkJCQlBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLCAkZWxtJGNvcmUkU3RyaW5nJGlzRW1wdHksICRlbG0kY29yZSRCYXNpY3Mkbm90KSwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVtkZWNvZGVGdW5jdGlvbk5hbWUsIGRlY29kZVBhcmFtZXRlcnNUZXh0LCAnPSddKSkpLAoJCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW5kZW50RWxtQ29kZUxpbmVzLCAxLCBkZWNvZGVFeHByZXNzaW9uKQoJCQkJCQldKSkKCQkJfSwKCQkJZW5jb2RlRnVuY3Rpb246IHsKCQkJCW5hbWU6IGVuY29kZUZ1bmN0aW9uTmFtZSwKCQkJCXRleHQ6IEEyKAoJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQknXG4nLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQknICcsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXIsCgkJCQkJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJGVsbSRjb3JlJFN0cmluZyRpc0VtcHR5LCAkZWxtJGNvcmUkQmFzaWNzJG5vdCksCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbZW5jb2RlRnVuY3Rpb25OYW1lLCBlbmNvZGVQYXJhbWV0ZXJzVGV4dCwgZW5jb2RlVmFsdWVFeHByZXNzaW9uLCAnPSddKSkpLAoJCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW5kZW50RWxtQ29kZUxpbmVzLCAxLCBlbmNvZGVFeHByZXNzaW9uKQoJCQkJCQldKSkKCQkJfQoJCX07Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25Db252ZXJ0VHVwbGVGdW5jdGlvbk5hbWVDb21tb25QYXJ0ID0gJ190dXBsZV8nOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRlclN1cHBvcnRpbmdGdW5jdGlvbnNUZXh0c1dpdGhDb21tb25OYW1lUGF0dGVybiA9IF9MaXN0X2Zyb21BcnJheSgKCVsKCQl7ZGVjb2RlU3ludGF4OiAnZGVjb2RlciA9XG4gICAgSnNvbi5EZWNvZGUub25lT2ZcbiAgICAgICAgWyBKc29uLkRlY29kZS5maWVsZCAiTm90aGluZyIgKEpzb24uRGVjb2RlLnN1Y2NlZWQgTm90aGluZylcbiAgICAgICAgLCBKc29uLkRlY29kZS5maWVsZCAiSnVzdCIgKChKc29uLkRlY29kZS5pbmRleCAwIGRlY29kZXIpIHw+IEpzb24uRGVjb2RlLm1hcCBKdXN0KVxuICAgICAgICAsIEpzb24uRGVjb2RlLmZpZWxkICJKdXN0IiAoZGVjb2RlciB8PiBKc29uLkRlY29kZS5tYXAgSnVzdCkgLS0gMjAyMC0wMy0wNyBTdXBwb3J0IGVhc3kgbWlncmF0aW9uIG9mIGFwcHM6IFN1cHBvcnQgZGVjb2RlIGZyb20gb2xkZXIgSlNPTiBmb3JtYXQgZm9yIG5vdy5cbiAgICAgICAgLCBKc29uLkRlY29kZS5udWxsIE5vdGhpbmcgLS0gVGVtcG9yYXJ5IGJhY2t3YXJkc2NvbXBhdGliaWxpdHk6IE1hcCBcJ251bGxcJyB0byBOb3RoaW5nXG4gICAgICAgIF1cbiAgICAgJywgZW5jb2RlU3ludGF4OiAnZW5jb2RlSnVzdCB2YWx1ZVRvRW5jb2RlID1cbiAgICBjYXNlIHZhbHVlVG9FbmNvZGUgb2ZcbiAgICAgICAgTm90aGluZyAtPlxuICAgICAgICAgICAgWyAoICJOb3RoaW5nIiwgW10gfD4gSnNvbi5FbmNvZGUubGlzdCBpZGVudGl0eSApIF0gfD4gSnNvbi5FbmNvZGUub2JqZWN0XG5cbiAgICAgICAgSnVzdCBqdXN0IC0+XG4gICAgICAgICAgICBbICggIkp1c3QiLCBbIGp1c3QgXSB8PiBKc29uLkVuY29kZS5saXN0IGVuY29kZUp1c3QgKSBdIHw+IEpzb24uRW5jb2RlLm9iamVjdFxuJywgZnVuY3Rpb25OYW1lQ29tbW9uUGFydDogJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRNYXliZUZ1bmN0aW9uTmFtZUNvbW1vblBhcnR9LAoJCXtkZWNvZGVTeW50YXg6ICcgPSBKc29uLkRlY29kZS5saXN0JywgZW5jb2RlU3ludGF4OiAnID0gSnNvbi5FbmNvZGUubGlzdCcsIGZ1bmN0aW9uTmFtZUNvbW1vblBhcnQ6ICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25Db252ZXJ0TGlzdEZ1bmN0aW9uTmFtZUNvbW1vblBhcnR9LAoJCXtkZWNvZGVTeW50YXg6ICcgPSBKc29uLkRlY29kZS5hcnJheScsIGVuY29kZVN5bnRheDogJyA9IEpzb24uRW5jb2RlLmFycmF5JywgZnVuY3Rpb25OYW1lQ29tbW9uUGFydDogJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRBcnJheUZ1bmN0aW9uTmFtZUNvbW1vblBhcnR9LAoJCXtkZWNvZGVTeW50YXg6ICdkZWNvZGVyID1cbiAgICBKc29uLkRlY29kZS5saXN0IGRlY29kZXIgfD4gSnNvbi5EZWNvZGUubWFwIFNldC5mcm9tTGlzdCcsIGVuY29kZVN5bnRheDogJ2VuY29kZXIgPVxuICAgIFNldC50b0xpc3QgPj4gSnNvbi5FbmNvZGUubGlzdCBlbmNvZGVyJywgZnVuY3Rpb25OYW1lQ29tbW9uUGFydDogJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRTZXRGdW5jdGlvbk5hbWVDb21tb25QYXJ0fSwKCQl7ZGVjb2RlU3ludGF4OiAnZGVjb2RlS2V5IGRlY29kZVZhbHVlID1cbiAgICAgICAgKEpzb24uRGVjb2RlLmxpc3QgKCcgKyAoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkRlY29kZUZ1bmN0aW9uTmFtZVByZWZpeCArICgkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydFR1cGxlRnVuY3Rpb25OYW1lQ29tbW9uUGFydCArICcyIGRlY29kZUtleSBkZWNvZGVWYWx1ZSkpXG4gICAgICAgICAgICB8PiBKc29uLkRlY29kZS5tYXAgRGljdC5mcm9tTGlzdCcpKSwgZW5jb2RlU3ludGF4OiAnZW5jb2RlS2V5IGVuY29kZVZhbHVlID1cbiAgICBEaWN0LnRvTGlzdCA+PiBKc29uLkVuY29kZS5saXN0ICgnICsgKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25FbmNvZGVGdW5jdGlvbk5hbWVQcmVmaXggKyAoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRUdXBsZUZ1bmN0aW9uTmFtZUNvbW1vblBhcnQgKyAnMiBlbmNvZGVLZXkgZW5jb2RlVmFsdWUpJykpLCBmdW5jdGlvbk5hbWVDb21tb25QYXJ0OiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydERpY3RGdW5jdGlvbk5hbWVDb21tb25QYXJ0fSwKCQl7ZGVjb2RlU3ludGF4OiAnZGVjb2RlRXJyIGRlY29kZU9rID1cbiAgICBKc29uLkRlY29kZS5vbmVPZlxuICAgICAgICBbIEpzb24uRGVjb2RlLmZpZWxkICJFcnIiIChKc29uLkRlY29kZS5pbmRleCAwIGRlY29kZUVycikgfD4gSnNvbi5EZWNvZGUubWFwIEVyclxuICAgICAgICAsIEpzb24uRGVjb2RlLmZpZWxkICJPayIgKEpzb24uRGVjb2RlLmluZGV4IDAgZGVjb2RlT2spIHw+IEpzb24uRGVjb2RlLm1hcCBPa1xuICAgICAgICAsIEpzb24uRGVjb2RlLmZpZWxkICJFcnIiIGRlY29kZUVyciB8PiBKc29uLkRlY29kZS5tYXAgRXJyIC0tIDIwMjAtMDMtMDcgU3VwcG9ydCBlYXN5IG1pZ3JhdGlvbiBvZiBhcHBzOiBTdXBwb3J0IGRlY29kZSBmcm9tIG9sZGVyIEpTT04gZm9ybWF0IGZvciBub3cuXG4gICAgICAgICwgSnNvbi5EZWNvZGUuZmllbGQgIk9rIiBkZWNvZGVPayB8PiBKc29uLkRlY29kZS5tYXAgT2sgLS0gMjAyMC0wMy0wNyBTdXBwb3J0IGVhc3kgbWlncmF0aW9uIG9mIGFwcHM6IFN1cHBvcnQgZGVjb2RlIGZyb20gb2xkZXIgSlNPTiBmb3JtYXQgZm9yIG5vdy5cbiAgICAgICAgXScsIGVuY29kZVN5bnRheDogJ2VuY29kZUVyciBlbmNvZGVPayB2YWx1ZVRvRW5jb2RlID1cbiAgICBjYXNlIHZhbHVlVG9FbmNvZGUgb2ZcbiAgICAgICAgRXJyIHZhbHVlVG9FbmNvZGVFcnJvciAtPlxuICAgICAgICAgICAgWyAoICJFcnIiLCBbIHZhbHVlVG9FbmNvZGVFcnJvciBdIHw+IEpzb24uRW5jb2RlLmxpc3QgZW5jb2RlRXJyICkgXSB8PiBKc29uLkVuY29kZS5vYmplY3RcblxuICAgICAgICBPayB2YWx1ZVRvRW5jb2RlT2sgLT5cbiAgICAgICAgICAgIFsgKCAiT2siLCBbIHZhbHVlVG9FbmNvZGVPayBdIHw+IEpzb24uRW5jb2RlLmxpc3QgZW5jb2RlT2sgKSBdIHw+IEpzb24uRW5jb2RlLm9iamVjdCcsIGZ1bmN0aW9uTmFtZUNvbW1vblBhcnQ6ICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25Db252ZXJ0UmVzdWx0RnVuY3Rpb25OYW1lQ29tbW9uUGFydH0sCgkJe2RlY29kZVN5bnRheDogJ2RlY29kZUEgZGVjb2RlQiA9XG4gICAgSnNvbi5EZWNvZGUubWFwMiAoXFxhIGIgLT4gKCBhLCBiICkpXG4gICAgICAgIChKc29uLkRlY29kZS5pbmRleCAwIGRlY29kZUEpXG4gICAgICAgIChKc29uLkRlY29kZS5pbmRleCAxIGRlY29kZUIpJywgZW5jb2RlU3ludGF4OiAnZW5jb2RlQSBlbmNvZGVCICggYSwgYiApID1cbiAgICBbIGEgfD4gZW5jb2RlQSwgYiB8PiBlbmNvZGVCIF1cbiAgICAgICAgfD4gSnNvbi5FbmNvZGUubGlzdCBpZGVudGl0eScsIGZ1bmN0aW9uTmFtZUNvbW1vblBhcnQ6ICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGpzb25Db252ZXJ0VHVwbGVGdW5jdGlvbk5hbWVDb21tb25QYXJ0ICsgJzInfSwKCQl7ZGVjb2RlU3ludGF4OiAnZGVjb2RlQSBkZWNvZGVCIGRlY29kZUMgPVxuICAgIEpzb24uRGVjb2RlLm1hcDMgKFxcYSBiIGMgLT4gKCBhLCBiLCBjICkpXG4gICAgICAgIChKc29uLkRlY29kZS5pbmRleCAwIGRlY29kZUEpXG4gICAgICAgIChKc29uLkRlY29kZS5pbmRleCAxIGRlY29kZUIpXG4gICAgICAgIChKc29uLkRlY29kZS5pbmRleCAyIGRlY29kZUMpJywgZW5jb2RlU3ludGF4OiAnZW5jb2RlQSBlbmNvZGVCIGVuY29kZUMgKCBhLCBiLCBjICkgPVxuICAgIFsgYSB8PiBlbmNvZGVBLCBiIHw+IGVuY29kZUIsIGMgfD4gZW5jb2RlQyBdXG4gICAgICAgIHw+IEpzb24uRW5jb2RlLmxpc3QgaWRlbnRpdHknLCBmdW5jdGlvbk5hbWVDb21tb25QYXJ0OiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydFR1cGxlRnVuY3Rpb25OYW1lQ29tbW9uUGFydCArICczJ30KCV0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkNvbnZlcnRlclN1cHBvcnRpbmdGdW5jdGlvbnNUZXh0cyA9IEEyKAoJJGVsbSRjb3JlJExpc3QkbWFwLAoJZnVuY3Rpb24gKF9mdW5jdGlvbikgewoJCXJldHVybiB7ZnVuY3Rpb25OYW1lOiBfZnVuY3Rpb24uZnVuY3Rpb25OYW1lLCBmdW5jdGlvblRleHQ6IF9mdW5jdGlvbi5mdW5jdGlvblRleHQsIG1vZHVsZXNUb0ltcG9ydDogJGVsbSRjb3JlJFNldCRlbXB0eX07Cgl9LAoJX1V0aWxzX2FwKAoJCUEyKAoJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCWZ1bmN0aW9uIChfZnVuY3Rpb24pIHsKCQkJCXJldHVybiB7ZnVuY3Rpb25OYW1lOiBfZnVuY3Rpb24ubmFtZSwgZnVuY3Rpb25UZXh0OiBfZnVuY3Rpb24ubmFtZSArICgnICcgKyBfZnVuY3Rpb24uYWZ0ZXJOYW1lKX07CgkJCX0sCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJZnVuY3Rpb24gKHN1cHBvcnRpbmdGdW5jdGlvbikgewoJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCXsKCQkJCQkJCWFmdGVyTmFtZTogc3VwcG9ydGluZ0Z1bmN0aW9uLmVuY29kZVN5bnRheCwKCQkJCQkJCW5hbWU6IF9VdGlsc19hcCgkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uRW5jb2RlRnVuY3Rpb25OYW1lUHJlZml4LCBzdXBwb3J0aW5nRnVuY3Rpb24uZnVuY3Rpb25OYW1lQ29tbW9uUGFydCkKCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCWFmdGVyTmFtZTogc3VwcG9ydGluZ0Z1bmN0aW9uLmRlY29kZVN5bnRheCwKCQkJCQkJCW5hbWU6IF9VdGlsc19hcCgkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uRGVjb2RlRnVuY3Rpb25OYW1lUHJlZml4LCBzdXBwb3J0aW5nRnVuY3Rpb24uZnVuY3Rpb25OYW1lQ29tbW9uUGFydCkKCQkJCQkJfQoJCQkJCQldKTsKCQkJCX0sCgkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydGVyU3VwcG9ydGluZ0Z1bmN0aW9uc1RleHRzV2l0aENvbW1vbk5hbWVQYXR0ZXJuKSksCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQl7ZnVuY3Rpb25OYW1lOiAnanNvbkRlY29kZV9hbmRNYXAnLCBmdW5jdGlvblRleHQ6ICdcbmpzb25EZWNvZGVfYW5kTWFwIDogSnNvbi5EZWNvZGUuRGVjb2RlciBhIC0+IEpzb24uRGVjb2RlLkRlY29kZXIgKGEgLT4gYikgLT4gSnNvbi5EZWNvZGUuRGVjb2RlciBiXG5qc29uRGVjb2RlX2FuZE1hcCA9XG4gICAgSnNvbi5EZWNvZGUubWFwMiAofD4pJ30sCgkJCQl7ZnVuY3Rpb25OYW1lOiAnanNvbl9lbmNvZGVfQnl0ZXMnLCBmdW5jdGlvblRleHQ6ICdcbmpzb25fZW5jb2RlX0J5dGVzIDogQnl0ZXMuQnl0ZXMgLT4gSnNvbi5FbmNvZGUuVmFsdWVcbmpzb25fZW5jb2RlX0J5dGVzIGJ5dGVzID1cbiAgICBbICggIkFzQmFzZTY0IiwgYnl0ZXMgfD4gQmFzZTY0LmZyb21CeXRlcyB8PiBNYXliZS53aXRoRGVmYXVsdCAiRXJyb3IgZW5jb2RpbmcgdG8gYmFzZTY0IiB8PiBKc29uLkVuY29kZS5zdHJpbmcgKSBdXG4gICAgICAgIHw+IEpzb24uRW5jb2RlLm9iamVjdCd9LAoJCQkJe2Z1bmN0aW9uTmFtZTogJ2pzb25fZGVjb2RlX0J5dGVzJywgZnVuY3Rpb25UZXh0OiAnXG5qc29uX2RlY29kZV9CeXRlcyA6IEpzb24uRGVjb2RlLkRlY29kZXIgQnl0ZXMuQnl0ZXNcbmpzb25fZGVjb2RlX0J5dGVzID1cbiAgICBKc29uLkRlY29kZS5maWVsZCAiQXNCYXNlNjQiXG4gICAgICAgIChKc29uLkRlY29kZS5zdHJpbmdcbiAgICAgICAgICAgIHw+IEpzb24uRGVjb2RlLmFuZFRoZW5cbiAgICAgICAgICAgICAgICAoQmFzZTY0LnRvQnl0ZXMgPj4gTWF5YmUubWFwIEpzb24uRGVjb2RlLnN1Y2NlZWQgPj4gTWF5YmUud2l0aERlZmF1bHQgKEpzb24uRGVjb2RlLmZhaWwgIkZhaWxlZCB0byBkZWNvZGUgYmFzZTY0LiIpKVxuICAgICAgICApXG4gICAgICAgICAgICAgICd9LAoJCQkJe2Z1bmN0aW9uTmFtZTogJ2pzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwnLCBmdW5jdGlvblRleHQ6ICdcbmpzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwgOiBhIC0+IEpzb24uRGVjb2RlLkRlY29kZXIgYVxuanNvbkRlY29kZVN1Y2NlZWRXaGVuTm90TnVsbCB2YWx1ZUlmTm90TnVsbCA9XG4gICAgSnNvbi5EZWNvZGUudmFsdWVcbiAgICAgICAgfD4gSnNvbi5EZWNvZGUuYW5kVGhlblxuICAgICAgICAgICAgKFxcYXNWYWx1ZSAtPlxuICAgICAgICAgICAgICAgIGlmIGFzVmFsdWUgPT0gSnNvbi5FbmNvZGUubnVsbCB0aGVuXG4gICAgICAgICAgICAgICAgICAgIEpzb24uRGVjb2RlLmZhaWwgIklzIG51bGwuIlxuXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBKc29uLkRlY29kZS5zdWNjZWVkIHZhbHVlSWZOb3ROdWxsXG4gICAgICAgICAgICApJ30sCgkJCQl7ZnVuY3Rpb25OYW1lOiAnanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMnLCBmdW5jdGlvblRleHQ6ICdcbmpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzIDogU3RyaW5nIC0+IExpc3QgU3RyaW5nIC0+IEpzb24uRGVjb2RlLkRlY29kZXIgYSAtPiBKc29uLkRlY29kZS5EZWNvZGVyIGFcbmpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzIGZpZWxkTmFtZSBhbHRlcm5hdGVOYW1lcyBkZWNvZGVyID1cbiAgICBKc29uLkRlY29kZS5vbmVPZlxuICAgICAgICAoKGZpZWxkTmFtZSA6OiBhbHRlcm5hdGVOYW1lcylcbiAgICAgICAgICAgIHw+IExpc3QubWFwIChcXG5hbWUgLT4gSnNvbi5EZWNvZGUuZmllbGQgbmFtZSBkZWNvZGVyKVxuICAgICAgICApJ30KCQkJXSkpKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGJ1aWxkSnNvbkNvbnZlcnRlckZ1bmN0aW9uc0Zvck11bHRpcGxlVHlwZXMgPSBGMigKCWZ1bmN0aW9uICh0eXBlQW5ub3RhdGlvbnMsIGNob2ljZVR5cGVzKSB7CgkJdmFyIGRlZmF1bHRNb2R1bGVzVG9JbXBvcnRGb3JGdW5jdGlvbiA9ICRlbG0kY29yZSRTZXQkZnJvbUxpc3QoCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWydEaWN0J10pLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbJ1NldCddKSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWydBcnJheSddKSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWydKc29uJywgJ0RlY29kZSddKSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWydKc29uJywgJ0VuY29kZSddKSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWydCeXRlcyddKSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWydCeXRlcycsICdEZWNvZGUnXSksCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsnQnl0ZXMnLCAnRW5jb2RlJ10pCgkJCQldKSk7CgkJdmFyIGdlbmVyYXRlZEZ1bmN0aW9uc0ZvclR5cGVzID0gQTMoCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGdlbmVyYXRlRnVuY3Rpb25zRm9yTXVsdGlwbGVUeXBlcywKCQkJewoJCQkJZ2VuZXJhdGVGcm9tQ2hvaWNlVHlwZTogQTIoCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQkJCXZhciBjaG9pY2VUeXBlTmFtZSA9IF92MC5hOwoJCQkJCQl2YXIgY2hvaWNlVHlwZSA9IF92MC5iOwoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydGVyRnVuY3Rpb25Gcm9tQ2hvaWNlVHlwZSwKCQkJCQkJCXtjaG9pY2VUeXBlTmFtZTogY2hvaWNlVHlwZU5hbWUsIGVuY29kZVZhbHVlRXhwcmVzc2lvbjogJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkanNvbkVuY29kZVBhcmFtTmFtZSwgdHlwZUFyZ0xvY2FsTmFtZTogJ3R5cGVfYXJnJ30sCgkJCQkJCQljaG9pY2VUeXBlKTsKCQkJCQl9LAoJCQkJCWZ1bmN0aW9uIChmdW5jdGlvbnNGb3JUeXBlKSB7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCWZ1bmN0aW9uIChfZnVuY3Rpb24pIHsKCQkJCQkJCQlyZXR1cm4ge2Z1bmN0aW9uTmFtZTogX2Z1bmN0aW9uLm5hbWUsIGZ1bmN0aW9uVGV4dDogX2Z1bmN0aW9uLnRleHQsIG1vZHVsZXNUb0ltcG9ydDogZGVmYXVsdE1vZHVsZXNUb0ltcG9ydEZvckZ1bmN0aW9ufTsKCQkJCQkJCX0sCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJW2Z1bmN0aW9uc0ZvclR5cGUuZW5jb2RlRnVuY3Rpb24sIGZ1bmN0aW9uc0ZvclR5cGUuZGVjb2RlRnVuY3Rpb25dKSk7CgkJCQkJfSksCgkJCQlnZW5lcmF0ZUZyb21UeXBlQW5ub3RhdGlvbjogQTIoCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRidWlsZEpzb25Db252ZXJ0ZXJGdW5jdGlvbnNGb3JUeXBlQW5ub3RhdGlvbiwKCQkJCQlmdW5jdGlvbiAoZnVuY3Rpb25zRm9yVHlwZSkgewoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQlmdW5jdGlvbiAoX2Z1bmN0aW9uKSB7CgkJCQkJCQkJcmV0dXJuIHtmdW5jdGlvbk5hbWU6IF9mdW5jdGlvbi5uYW1lLCBmdW5jdGlvblRleHQ6IF9mdW5jdGlvbi50ZXh0LCBtb2R1bGVzVG9JbXBvcnQ6IGRlZmF1bHRNb2R1bGVzVG9JbXBvcnRGb3JGdW5jdGlvbn07CgkJCQkJCQl9LAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVtmdW5jdGlvbnNGb3JUeXBlLmVuY29kZUZ1bmN0aW9uLCBmdW5jdGlvbnNGb3JUeXBlLmRlY29kZUZ1bmN0aW9uXSkpOwoJCQkJCX0pCgkJCX0sCgkJCXR5cGVBbm5vdGF0aW9ucywKCQkJY2hvaWNlVHlwZXMpOwoJCXZhciBnZW5lcmF0ZWRGdW5jdGlvbnMgPSBfVXRpbHNfYXAoZ2VuZXJhdGVkRnVuY3Rpb25zRm9yVHlwZXMuZ2VuZXJhdGVkRnVuY3Rpb25zLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRqc29uQ29udmVydGVyU3VwcG9ydGluZ0Z1bmN0aW9uc1RleHRzKTsKCQlyZXR1cm4ge2dlbmVyYXRlZEZ1bmN0aW9uczogZ2VuZXJhdGVkRnVuY3Rpb25zLCBtb2R1bGVzVG9JbXBvcnRGb3JDaG9pY2VUeXBlczogZ2VuZXJhdGVkRnVuY3Rpb25zRm9yVHlwZXMubW9kdWxlc1RvSW1wb3J0Rm9yQ2hvaWNlVHlwZXN9OwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRlbmNvZGluZ01vZHVsZUltcG9ydEJhc2U2NCA9IF9VdGlsc19UdXBsZTIoCglfTGlzdF9mcm9tQXJyYXkoCgkJWydDb21waWxlckdlbmVyYXRlZCcsICdCYXNlNjQnXSksCgkkZWxtJGNvcmUkTWF5YmUkSnVzdCgnQmFzZTY0JykpOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZXhwb3NlQWxsSW5FbG1Nb2R1bGUgPSBmdW5jdGlvbiAobW9kdWxlVGV4dCkgewoJdmFyIF92MCA9ICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtTW9kdWxlVGV4dChtb2R1bGVUZXh0KTsKCWlmIChfdjAuJCA9PT0gJ0VycicpIHsKCQlyZXR1cm4gbW9kdWxlVGV4dDsKCX0gZWxzZSB7CgkJdmFyIHBhcnNlZE1vZHVsZSA9IF92MC5hOwoJCXZhciBleHBvc2luZ0xpc3ROb2RlID0gZnVuY3Rpb24gKCkgewoJCQl2YXIgX3YyID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShwYXJzZWRNb2R1bGUubW9kdWxlRGVmaW5pdGlvbik7CgkJCXN3aXRjaCAoX3YyLiQpIHsKCQkJCWNhc2UgJ05vcm1hbE1vZHVsZSc6CgkJCQkJdmFyIG5vcm1hbE1vZHVsZSA9IF92Mi5hOwoJCQkJCXJldHVybiBub3JtYWxNb2R1bGUuZXhwb3NpbmdMaXN0OwoJCQkJY2FzZSAnUG9ydE1vZHVsZSc6CgkJCQkJdmFyIHBvcnRNb2R1bGUgPSBfdjIuYTsKCQkJCQlyZXR1cm4gcG9ydE1vZHVsZS5leHBvc2luZ0xpc3Q7CgkJCQlkZWZhdWx0OgoJCQkJCXZhciBlZmZlY3RNb2R1bGUgPSBfdjIuYTsKCQkJCQlyZXR1cm4gZWZmZWN0TW9kdWxlLmV4cG9zaW5nTGlzdDsKCQkJfQoJCX0oKTsKCQl2YXIgZXhwb3NpbmdMaXN0UmFuZ2UgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHJhbmdlKGV4cG9zaW5nTGlzdE5vZGUpOwoJCXZhciBfdjEgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKGV4cG9zaW5nTGlzdE5vZGUpOwoJCWlmIChfdjEuJCA9PT0gJ0FsbCcpIHsKCQkJcmV0dXJuIG1vZHVsZVRleHQ7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIEEzKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHJlcGxhY2VSYW5nZUluVGV4dCwgZXhwb3NpbmdMaXN0UmFuZ2UsICdleHBvc2luZyAoLi4pJywgbW9kdWxlVGV4dCk7CgkJfQoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZXhwb3NlQWxsSW5FbG1Nb2R1bGVJbkFwcEZpbGVzID0gRjMoCglmdW5jdGlvbiAoc291cmNlRGlycywgbW9kdWxlTmFtZSwgYXBwRmlsZXMpIHsKCQl2YXIgbW9kdWxlRmlsZVBhdGggPSBBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRmaWxlUGF0aEZyb21FbG1Nb2R1bGVOYW1lLCBzb3VyY2VEaXJzLCBtb2R1bGVOYW1lKTsKCQl2YXIgX3YwID0gQTIoCgkJCSRlbG0kY29yZSRNYXliZSRhbmRUaGVuLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRzdHJpbmdGcm9tRmlsZUNvbnRlbnQsCgkJCUEyKCRlbG0kY29yZSREaWN0JGdldCwgbW9kdWxlRmlsZVBhdGgsIGFwcEZpbGVzKSk7CgkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIGFwcEZpbGVzOwoJCX0gZWxzZSB7CgkJCXZhciBvcmlnaW5hbE1vZHVsZVRleHQgPSBfdjAuYTsKCQkJdmFyIG1vZHVsZVRleHQgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRleHBvc2VBbGxJbkVsbU1vZHVsZShvcmlnaW5hbE1vZHVsZVRleHQpOwoJCQlyZXR1cm4gQTMoCgkJCQkkZWxtJGNvcmUkRGljdCRpbnNlcnQsCgkJCQltb2R1bGVGaWxlUGF0aCwKCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGZpbGVDb250ZW50RnJvbVN0cmluZyhtb2R1bGVUZXh0KSwKCQkJCWFwcEZpbGVzKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJG1hcEFwcEZpbGVzVG9TdXBwb3J0SnNvbkNvbnZlcnRlcnMgPSBGNCgKCWZ1bmN0aW9uIChfdjAsIHR5cGVBbm5vdGF0aW9uc0JlZm9yZURlZHVwbGljYXRpbmcsIGNob2ljZVR5cGVzLCBhcHBGaWxlc0JlZm9yZSkgewoJCXZhciBnZW5lcmF0ZWRNb2R1bGVOYW1lUHJlZml4ID0gX3YwLmdlbmVyYXRlZE1vZHVsZU5hbWVQcmVmaXg7CgkJdmFyIHNvdXJjZURpcnMgPSBfdjAuc291cmNlRGlyczsKCQl2YXIgZ2VuZXJhdGVkTW9kdWxlTmFtZSA9IF9VdGlsc19hcCgKCQkJZ2VuZXJhdGVkTW9kdWxlTmFtZVByZWZpeCwKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWydHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMnXSkpOwoJCXZhciBnZW5lcmF0ZWRNb2R1bGVQYXRoID0gQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZmlsZVBhdGhGcm9tRWxtTW9kdWxlTmFtZSwgc291cmNlRGlycywgZ2VuZXJhdGVkTW9kdWxlTmFtZSk7CgkJdmFyIGdlbmVyYXRlZEZ1bmN0aW9ucyA9IEEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGJ1aWxkSnNvbkNvbnZlcnRlckZ1bmN0aW9uc0Zvck11bHRpcGxlVHlwZXMsIHR5cGVBbm5vdGF0aW9uc0JlZm9yZURlZHVwbGljYXRpbmcsIGNob2ljZVR5cGVzKTsKCQl2YXIgbW9kdWxlc1RvSW1wb3J0ID0gQTIoCgkJCSRlbG0kY29yZSRTZXQkdW5pb24sCgkJCWdlbmVyYXRlZEZ1bmN0aW9ucy5tb2R1bGVzVG9JbXBvcnRGb3JDaG9pY2VUeXBlcywKCQkJQTMoCgkJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJCSRlbG0kY29yZSRTZXQkdW5pb24sCgkJCQkkZWxtJGNvcmUkU2V0JGVtcHR5LAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCXJldHVybiAkLm1vZHVsZXNUb0ltcG9ydDsKCQkJCQl9LAoJCQkJCWdlbmVyYXRlZEZ1bmN0aW9ucy5nZW5lcmF0ZWRGdW5jdGlvbnMpKSk7CgkJdmFyIGdlbmVyYXRlZE1vZHVsZU1vZHVsZXNUb0ltcG9ydCA9IEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRlbmNvZGluZ01vZHVsZUltcG9ydEJhc2U2NCwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCSRlbG0kY29yZSRUdXBsZSRwYWlyLAoJCQkJCSRlbG0kY29yZSRCYXNpY3MkYXBSKCRlbG0kY29yZSRNYXliZSROb3RoaW5nKSksCgkJCQkkZWxtJGNvcmUkU2V0JHRvTGlzdChtb2R1bGVzVG9JbXBvcnQpKSk7CgkJdmFyIGdlbmVyYXRlZE1vZHVsZVRleHRXaXRob3V0TW9kdWxlRGVjbGFyYXRpb24gPSBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknXG5cblxuJywKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkkZWxtJGNvcmUkU3RyaW5nJHRyaW0sCgkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCSdcbicsCgkJCQkJCQkJJGVsbSRjb3JlJExpc3Qkc29ydCgKCQkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkbWFwLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRpbXBvcnRTeW50YXhUZXh0RnJvbU1vZHVsZU5hbWVBbmRBbGlhcywgZ2VuZXJhdGVkTW9kdWxlTW9kdWxlc1RvSW1wb3J0KSkpCgkJCQkJCQldKSwKCQkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCQlyZXR1cm4gJC5mdW5jdGlvblRleHQ7CgkJCQkJCQl9LAoJCQkJCQkJZ2VuZXJhdGVkRnVuY3Rpb25zLmdlbmVyYXRlZEZ1bmN0aW9ucykKCQkJCQkJXSkpKSk7CgkJdmFyIGdlbmVyYXRlZE1vZHVsZVRleHQgPSBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknXG5cbicsCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQknbW9kdWxlICcgKyAoQTIoJGVsbSRjb3JlJFN0cmluZyRqb2luLCAnLicsIGdlbmVyYXRlZE1vZHVsZU5hbWUpICsgJyBleHBvc2luZyAoLi4pJyksCgkJCQkJZ2VuZXJhdGVkTW9kdWxlVGV4dFdpdGhvdXRNb2R1bGVEZWNsYXJhdGlvbgoJCQkJXSkpOwoJCXZhciBhcHBGaWxlc0FmdGVyRXhwb3NpbmdDaG9pY2VUeXBlc0luTW9kdWxlcyA9IEEzKAoJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZXhwb3NlQWxsSW5FbG1Nb2R1bGVJbkFwcEZpbGVzKHNvdXJjZURpcnMpLAoJCQlhcHBGaWxlc0JlZm9yZSwKCQkJJGVsbSRjb3JlJFNldCR0b0xpc3QoZ2VuZXJhdGVkRnVuY3Rpb25zLm1vZHVsZXNUb0ltcG9ydEZvckNob2ljZVR5cGVzKSk7CgkJdmFyIGFwcEZpbGVzID0gQTMoCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHVwZGF0ZUZpbGVDb250ZW50QXRQYXRoLAoJCQkkZWxtJGNvcmUkQmFzaWNzJGFsd2F5cygKCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGZpbGVDb250ZW50RnJvbVN0cmluZyhnZW5lcmF0ZWRNb2R1bGVUZXh0KSksCgkJCWdlbmVyYXRlZE1vZHVsZVBhdGgsCgkJCWFwcEZpbGVzQWZ0ZXJFeHBvc2luZ0Nob2ljZVR5cGVzSW5Nb2R1bGVzKTsKCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJYXBwRmlsZXMsCgkJCXsKCQkJCWdlbmVyYXRlZE1vZHVsZU5hbWU6IGdlbmVyYXRlZE1vZHVsZU5hbWUsCgkJCQltb2R1bGVzVG9JbXBvcnQ6IEEyKCRlbG0kY29yZSRTZXQkaW5zZXJ0LCBnZW5lcmF0ZWRNb2R1bGVOYW1lLCBtb2R1bGVzVG9JbXBvcnQpCgkJCX0pOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRtYXBMb2NhdGVkSW5Tb3VyY2VGaWxlcyA9IEYyKAoJZnVuY3Rpb24gKG1hcExvY2F0ZWQsIG9yaWcpIHsKCQl2YXIgbG9jYXRpb24gPSBvcmlnLmE7CgkJdmFyIGxvY2F0ZWQgPSBvcmlnLmI7CgkJcmV0dXJuIEEyKAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRMb2NhdGVkSW5Tb3VyY2VGaWxlcywKCQkJbG9jYXRpb24sCgkJCW1hcExvY2F0ZWQobG9jYXRlZCkpOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGVOYW1lJGVuY29kZSA9ICRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0KCRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUmFuZ2UkZW5jb2RlID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIHN0YXJ0ID0gX3YwLnN0YXJ0OwoJdmFyIGVuZCA9IF92MC5lbmQ7CglyZXR1cm4gQTIoCgkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsCgkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludCwKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVtzdGFydC5yb3csIHN0YXJ0LmNvbHVtbiwgZW5kLnJvdywgZW5kLmNvbHVtbl0pKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlID0gRjIoCglmdW5jdGlvbiAoZiwgX3YwKSB7CgkJdmFyIHIgPSBfdjAuYTsKCQl2YXIgdiA9IF92MC5iOwoJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkncmFuZ2UnLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFJhbmdlJGVuY29kZShyKSksCgkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkndmFsdWUnLAoJCQkJCWYodikpCgkJCQldKSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkID0gRjIoCglmdW5jdGlvbiAoeCwgdikgewoJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkndHlwZScsCgkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh4KSksCgkJCQkJX1V0aWxzX1R1cGxlMih4LCB2KQoJCQkJXSkpOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRlbmNvZGUgPSBmdW5jdGlvbiAodHlwZUFubm90YXRpb24pIHsKCXN3aXRjaCAodHlwZUFubm90YXRpb24uJCkgewoJCWNhc2UgJ0dlbmVyaWNUeXBlJzoKCQkJdmFyIG5hbWUgPSB0eXBlQW5ub3RhdGlvbi5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSdnZW5lcmljJywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ3ZhbHVlJywKCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcobmFtZSkpCgkJCQkJCV0pKSk7CgkJY2FzZSAnVHlwZWQnOgoJCQl2YXIgbW9kdWxlTmFtZUFuZE5hbWUgPSB0eXBlQW5ub3RhdGlvbi5hOwoJCQl2YXIgYXJncyA9IHR5cGVBbm5vdGF0aW9uLmI7CgkJCXZhciBpbm5lciA9IGZ1bmN0aW9uIChfdjIpIHsKCQkJCXZhciBtb2QgPSBfdjIuYTsKCQkJCXZhciBuID0gX3YyLmI7CgkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQknbW9kdWxlTmFtZScsCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGVOYW1lJGVuY29kZShtb2QpKSwKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQknbmFtZScsCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKG4pKQoJCQkJCQldKSk7CgkJCX07CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ3R5cGVkJywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ21vZHVsZU5hbWVBbmROYW1lJywKCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCBpbm5lciwgbW9kdWxlTmFtZUFuZE5hbWUpKSwKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQknYXJncycsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRlbmNvZGUpLAoJCQkJCQkJCWFyZ3MpKQoJCQkJCQldKSkpOwoJCWNhc2UgJ1VuaXQnOgoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSd1bml0JywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoX0xpc3RfTmlsKSk7CgkJY2FzZSAnVHVwbGVkJzoKCQkJdmFyIHQgPSB0eXBlQW5ub3RhdGlvbi5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSd0dXBsZWQnLAoJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkndmFsdWVzJywKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJGVuY29kZSksCgkJCQkJCQkJdCkpCgkJCQkJCV0pKSk7CgkJY2FzZSAnRnVuY3Rpb25UeXBlQW5ub3RhdGlvbic6CgkJCXZhciBsZWZ0ID0gdHlwZUFubm90YXRpb24uYTsKCQkJdmFyIHJpZ2h0ID0gdHlwZUFubm90YXRpb24uYjsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQknZnVuY3Rpb24nLAoJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQknbGVmdCcsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kZW5jb2RlLCBsZWZ0KSksCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ3JpZ2h0JywKCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRlbmNvZGUsIHJpZ2h0KSkKCQkJCQkJXSkpKTsKCQljYXNlICdSZWNvcmQnOgoJCQl2YXIgcmVjb3JkRGVmaW5pdGlvbiA9IHR5cGVBbm5vdGF0aW9uLmE7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ3JlY29yZCcsCgkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCSd2YWx1ZScsCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkZW5jb2RlUmVjb3JkRGVmaW5pdGlvbigpKHJlY29yZERlZmluaXRpb24pKQoJCQkJCQldKSkpOwoJCWRlZmF1bHQ6CgkJCXZhciBuYW1lID0gdHlwZUFubm90YXRpb24uYTsKCQkJdmFyIHJlY29yZERlZmluaXRpb24gPSB0eXBlQW5ub3RhdGlvbi5iOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSdnZW5lcmljUmVjb3JkJywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ25hbWUnLAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcsIG5hbWUpKSwKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkndmFsdWVzJywKCQkJCQkJCUEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRlbmNvZGVSZWNvcmREZWZpbml0aW9uKCksCgkJCQkJCQkJcmVjb3JkRGVmaW5pdGlvbikpCgkJCQkJCV0pKSk7Cgl9Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRlbmNvZGVSZWNvcmRGaWVsZCA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBuYW1lID0gX3YwLmE7Cgl2YXIgcmVmID0gX3YwLmI7CglyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknbmFtZScsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZywgbmFtZSkpLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSd0eXBlQW5ub3RhdGlvbicsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kZW5jb2RlLCByZWYpKQoJCQldKSk7Cn07CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRlbmNvZGVSZWNvcmREZWZpbml0aW9uKCkgewoJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJGVuY29kZVJlY29yZEZpZWxkKSk7Cn0KdHJ5IHsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRlbmNvZGVSZWNvcmREZWZpbml0aW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kY3ljbGljJGVuY29kZVJlY29yZERlZmluaXRpb24oKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRlbmNvZGVSZWNvcmREZWZpbml0aW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRlbmNvZGVSZWNvcmREZWZpbml0aW9uOwoJfTsKfSBjYXRjaCAoJCkgewoJdGhyb3cgJ1NvbWUgdG9wLWxldmVsIGRlZmluaXRpb25zIGZyb20gYEVsbS5TeW50YXguVHlwZUFubm90YXRpb25gIGFyZSBjYXVzaW5nIGluZmluaXRlIHJlY3Vyc2lvbjpcblxuICDilIzilIDilIDilIDilIDilIDilJBcbiAg4pSCICAgIGVuY29kZVxuICDilIIgICAgIOKGk1xuICDilIIgICAgZW5jb2RlUmVjb3JkRGVmaW5pdGlvblxuICDilIIgICAgIOKGk1xuICDilIIgICAgZW5jb2RlUmVjb3JkRmllbGRcbiAg4pSU4pSA4pSA4pSA4pSA4pSA4pSYXG5cblRoZXNlIGVycm9ycyBhcmUgdmVyeSB0cmlja3ksIHNvIHJlYWQgaHR0cHM6Ly9lbG0tbGFuZy5vcmcvMC4xOS4xL2JhZC1yZWN1cnNpb24gdG8gbGVhcm4gaG93IHRvIGZpeCBpdCEnO30KdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlSnNvbkNvbnZlcnRlckRlY2xhcmF0aW9uVHlwZSA9IGZ1bmN0aW9uIChzaWduYXR1cmUpIHsKCXZhciBlcnJvclZhbHVlID0gZnVuY3Rpb24gKGRldGFpbCkgewoJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJJ1VuZXhwZWN0ZWQgdHlwZSBzaWduYXR1cmUgKCcgKyAoZGV0YWlsICsgKCcpOiAnICsgQTIoCgkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkZW5jb2RlLAoJCQkJMCwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJGVuY29kZSgKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKHNpZ25hdHVyZS50eXBlQW5ub3RhdGlvbikpKSkpKTsKCX07Cgl2YXIgX3YwID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShzaWduYXR1cmUudHlwZUFubm90YXRpb24pOwoJc3dpdGNoIChfdjAuJCkgewoJCWNhc2UgJ1R5cGVkJzoKCQkJdmFyIGdlbmVyaWNUeXBlID0gX3YwLmE7CgkJCXZhciB0eXBlQXJndW1lbnRzID0gX3YwLmI7CgkJCWlmICgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKGdlbmVyaWNUeXBlKS5iICE9PSAnRGVjb2RlcicpIHsKCQkJCXJldHVybiBlcnJvclZhbHVlKCdHZW5lcmljIHR5cGUgaXMgbm90IFwnRGVjb2RlclwnJyk7CgkJCX0gZWxzZSB7CgkJCQlpZiAodHlwZUFyZ3VtZW50cy5iICYmICghdHlwZUFyZ3VtZW50cy5iLmIpKSB7CgkJCQkJdmFyIHNpbmdsZVR5cGVBcmd1bWVudCA9IHR5cGVBcmd1bWVudHMuYTsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkJe2lzRGVjb2RlcjogdHJ1ZSwgdHlwZUFubm90YXRpb246IHNpbmdsZVR5cGVBcmd1bWVudH0pOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gZXJyb3JWYWx1ZSgnVW5leHBlY3RlZCBudW1iZXIgb2YgdHlwZSBhcmd1bWVudHMgZm9yIFwnRGVjb2RlclwnJyk7CgkJCQl9CgkJCX0KCQljYXNlICdGdW5jdGlvblR5cGVBbm5vdGF0aW9uJzoKCQkJdmFyIGxlZnRUeXBlID0gX3YwLmE7CgkJCXZhciByaWdodFR5cGUgPSBfdjAuYjsKCQkJdmFyIF92MiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUocmlnaHRUeXBlKTsKCQkJaWYgKF92Mi4kID09PSAnVHlwZWQnKSB7CgkJCQl2YXIgcmlnaHROYW1lTm9kZSA9IF92Mi5hOwoJCQkJcmV0dXJuICgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKHJpZ2h0TmFtZU5vZGUpLmIgIT09ICdWYWx1ZScpID8gZXJyb3JWYWx1ZSgncmlnaHQgc2lkZSBvZiBmdW5jdGlvbiB0eXBlIGlzIG5vdCBcJ1ZhbHVlXCcnKSA6ICRlbG0kY29yZSRSZXN1bHQkT2soCgkJCQkJe2lzRGVjb2RlcjogZmFsc2UsIHR5cGVBbm5vdGF0aW9uOiBsZWZ0VHlwZX0pOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIGVycm9yVmFsdWUoJ3JpZ2h0IHNpZGUgb2YgZnVuY3Rpb24gdHlwZScpOwoJCQl9CgkJZGVmYXVsdDoKCQkJcmV0dXJuIGVycm9yVmFsdWUoJycpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbWFwSnNvbkNvbnZlcnRlcnNNb2R1bGVUZXh0ID0gRjIoCglmdW5jdGlvbiAoX3YwLCBfdjEpIHsKCQl2YXIgb3JpZ2luYWxTb3VyY2VNb2R1bGVzID0gX3YwLm9yaWdpbmFsU291cmNlTW9kdWxlczsKCQl2YXIgc291cmNlRGlycyA9IF92MC5zb3VyY2VEaXJzOwoJCXZhciBzb3VyY2VGaWxlcyA9IF92MS5hOwoJCXZhciBtb2R1bGVGaWxlUGF0aCA9IF92MS5iOwoJCXZhciBtb2R1bGVUZXh0ID0gX3YxLmM7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkUmVzdWx0JGFuZFRoZW4sCgkJCWZ1bmN0aW9uIChwYXJzZWRNb2R1bGUpIHsKCQkJCXZhciBpbnRlcmZhY2VNb2R1bGVOYW1lID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlJG1vZHVsZU5hbWUoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShwYXJzZWRNb2R1bGUubW9kdWxlRGVmaW5pdGlvbikpOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRSZXN1bHQkYW5kVGhlbiwKCQkJCQlmdW5jdGlvbiAoZnVuY3Rpb25zVG9SZXBsYWNlKSB7CgkJCQkJCXZhciBfdjYgPSBBNCgKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJG1hcEFwcEZpbGVzVG9TdXBwb3J0SnNvbkNvbnZlcnRlcnMsCgkJCQkJCQl7Z2VuZXJhdGVkTW9kdWxlTmFtZVByZWZpeDogaW50ZXJmYWNlTW9kdWxlTmFtZSwgc291cmNlRGlyczogc291cmNlRGlyc30sCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCQkJcmV0dXJuICQucGFyc2VkVHlwZUFubm90YXRpb247CgkJCQkJCQkJfSwKCQkJCQkJCQlmdW5jdGlvbnNUb1JlcGxhY2UpLAoJCQkJCQkJQTMoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCQkJCQkJJGVsbSRjb3JlJERpY3QkdW5pb24sCgkJCQkJCQkJJGVsbSRjb3JlJERpY3QkZW1wdHksCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCQkJCXJldHVybiAkLmRlcGVuZGVuY2llczsKCQkJCQkJCQkJfSwKCQkJCQkJCQkJZnVuY3Rpb25zVG9SZXBsYWNlKSksCgkJCQkJCQlzb3VyY2VGaWxlcyk7CgkJCQkJCXZhciBhcHBGaWxlcyA9IF92Ni5hOwoJCQkJCQl2YXIgZ2VuZXJhdGVkTW9kdWxlTmFtZSA9IF92Ni5iLmdlbmVyYXRlZE1vZHVsZU5hbWU7CgkJCQkJCXZhciBtb2R1bGVzVG9JbXBvcnQgPSBfdjYuYi5tb2R1bGVzVG9JbXBvcnQ7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRsb2NhdGVkSW5Tb3VyY2VGaWxlc0Zyb21SYW5nZShtb2R1bGVGaWxlUGF0aCksCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJCQkkZWxtJGNvcmUkVHVwbGUkcGFpcihhcHBGaWxlcyksCgkJCQkJCQkJQTMoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxpc3RGb2xkbFRvQWdncmVnYXRlUmVzdWx0LAoJCQkJCQkJCQlGMigKCQkJCQkJCQkJCWZ1bmN0aW9uIChmdW5jdGlvblRvUmVwbGFjZSwgcHJldmlvdXNNb2R1bGVUZXh0KSB7CgkJCQkJCQkJCQkJdmFyIGZ1bmN0aW9uc05hbWVzSW5HZW5lcmF0ZWRNb2R1bGVzID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkYnVpbGRKc29uQ29udmVydGVyRnVuY3Rpb25zRm9yVHlwZUFubm90YXRpb24oZnVuY3Rpb25Ub1JlcGxhY2UucGFyc2VkVHlwZUFubm90YXRpb24pOwoJCQkJCQkJCQkJCXZhciBmdW5jdGlvbk5hbWUgPSBmdW5jdGlvblRvUmVwbGFjZS5mdW5jdGlvbk5hbWU7CgkJCQkJCQkJCQkJdmFyIG5ld0Z1bmN0aW9uID0gZnVuY3Rpb25OYW1lICsgKCcgPVxuICAgICcgKyBBMigKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCQkJCQknLicsCgkJCQkJCQkJCQkJCV9VdGlsc19hcCgKCQkJCQkJCQkJCQkJCWdlbmVyYXRlZE1vZHVsZU5hbWUsCgkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJCQlmdW5jdGlvblRvUmVwbGFjZS5mdW5jdGlvblR5cGUuaXNEZWNvZGVyID8gZnVuY3Rpb25zTmFtZXNJbkdlbmVyYXRlZE1vZHVsZXMuZGVjb2RlRnVuY3Rpb24ubmFtZSA6IGZ1bmN0aW9uc05hbWVzSW5HZW5lcmF0ZWRNb2R1bGVzLmVuY29kZUZ1bmN0aW9uLm5hbWUKCQkJCQkJCQkJCQkJCQldKSkpKTsKCQkJCQkJCQkJCQl2YXIgbWFwRnVuY3Rpb25EZWNsYXJhdGlvbkxpbmVzID0gZnVuY3Rpb24gKG9yaWdpbmFsRnVuY3Rpb25UZXh0TGluZXMpIHsKCQkJCQkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JHRha2UsIDEsIG9yaWdpbmFsRnVuY3Rpb25UZXh0TGluZXMpLAoJCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCVtuZXdGdW5jdGlvbl0pCgkJCQkJCQkJCQkJCQkJXSkpOwoJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUoZnVuY3Rpb25Ub1JlcGxhY2UuZGVjbGFyYXRpb25SYW5nZSksCgkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXBFcnJvciwKCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkYXBwZW5kKCdGYWlsZWQgdG8gcmVwbGFjZSBmdW5jdGlvbiB0ZXh0OiAnKSwKCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGFkZE9yVXBkYXRlRnVuY3Rpb25JbkVsbU1vZHVsZVRleHQsCgkJCQkJCQkJCQkJCQkJewoJCQkJCQkJCQkJCQkJCQlmdW5jdGlvbk5hbWU6IGZ1bmN0aW9uTmFtZSwKCQkJCQkJCQkJCQkJCQkJbWFwRnVuY3Rpb25MaW5lczogQTIoCgkJCQkJCQkJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0KF9MaXN0X05pbCksCgkJCQkJCQkJCQkJCQkJCQltYXBGdW5jdGlvbkRlY2xhcmF0aW9uTGluZXMpCgkJCQkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQkJCQlwcmV2aW91c01vZHVsZVRleHQpKSk7CgkJCQkJCQkJCQl9KSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlKAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHN5bnRheFJhbmdlQ292ZXJpbmdDb21wbGV0ZVN0cmluZyhtb2R1bGVUZXh0KSksCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRhZGRJbXBvcnRzSW5FbG1Nb2R1bGVUZXh0LAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRUdXBsZSRwYWlyLAoJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRhcFIoJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpKSwKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFNldCR0b0xpc3QobW9kdWxlc1RvSW1wb3J0KSksCgkJCQkJCQkJCQkJbW9kdWxlVGV4dCkpLAoJCQkJCQkJCQlmdW5jdGlvbnNUb1JlcGxhY2UpKSk7CgkJCQkJfSwKCQkJCQlBMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbW1vbiRyZXN1bHRMaXN0TWFwQ29tYmluZSwKCQkJCQkJZnVuY3Rpb24gKGZ1bmN0aW9uRGVjbGFyYXRpb24pIHsKCQkJCQkJCXZhciBfdjMgPSBmdW5jdGlvbkRlY2xhcmF0aW9uLnNpZ25hdHVyZTsKCQkJCQkJCWlmIChfdjMuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJExvY2F0ZWRJblNvdXJjZUZpbGVzLAoJCQkJCQkJCQkJewoJCQkJCQkJCQkJCWZpbGVQYXRoOiBtb2R1bGVGaWxlUGF0aCwKCQkJCQkJCQkJCQlsb2NhdGlvbkluTW9kdWxlVGV4dDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRyYW5nZShmdW5jdGlvbkRlY2xhcmF0aW9uLmRlY2xhcmF0aW9uKQoJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCSdNaXNzaW5nIGZ1bmN0aW9uIHNpZ25hdHVyZScpKTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIGZ1bmN0aW9uU2lnbmF0dXJlID0gX3YzLmE7CgkJCQkJCQkJdmFyIGZ1bmN0aW9uTmFtZSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoZnVuY3Rpb25TaWduYXR1cmUpLm5hbWUpOwoJCQkJCQkJCXZhciBfdjQgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUpzb25Db252ZXJ0ZXJEZWNsYXJhdGlvblR5cGUoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoZnVuY3Rpb25TaWduYXR1cmUpKTsKCQkJCQkJCQlpZiAoX3Y0LiQgPT09ICdFcnInKSB7CgkJCQkJCQkJCXZhciBlcnJvciA9IF92NC5hOwoJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRMb2NhdGVkSW5Tb3VyY2VGaWxlcywKCQkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJCWZpbGVQYXRoOiBtb2R1bGVGaWxlUGF0aCwKCQkJCQkJCQkJCQkJbG9jYXRpb25Jbk1vZHVsZVRleHQ6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkcmFuZ2UoZnVuY3Rpb25TaWduYXR1cmUpCgkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQknRmFpbGVkIHBhcnNpbmcganNvbiBjb2RpbmcgZnVuY3Rpb24gdHlwZTogJyArIGVycm9yKSk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJdmFyIGZ1bmN0aW9uVHlwZSA9IF92NC5hOwoJCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbWFwTG9jYXRlZEluU291cmNlRmlsZXMoCgkJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRhcHBlbmQoJ0ZhaWxlZCB0byBwcmVwYXJlIG1hcHBpbmcgXCcnICsgKGZ1bmN0aW9uTmFtZSArICdcJzogJykpKSwKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCQkJCQkJCWZ1bmN0aW9uIChfdjUpIHsKCQkJCQkJCQkJCQkJdmFyIHBhcnNlZFR5cGVBbm5vdGF0aW9uID0gX3Y1LmE7CgkJCQkJCQkJCQkJCXZhciBkZXBlbmRlbmNpZXMgPSBfdjUuYjsKCQkJCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCQkJCWRlY2xhcmF0aW9uUmFuZ2U6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkcmFuZ2UoZnVuY3Rpb25EZWNsYXJhdGlvbi5kZWNsYXJhdGlvbiksCgkJCQkJCQkJCQkJCQlkZXBlbmRlbmNpZXM6IGRlcGVuZGVuY2llcywKCQkJCQkJCQkJCQkJCWZ1bmN0aW9uTmFtZTogZnVuY3Rpb25OYW1lLAoJCQkJCQkJCQkJCQkJZnVuY3Rpb25UeXBlOiBmdW5jdGlvblR5cGUsCgkJCQkJCQkJCQkJCQlwYXJzZWRUeXBlQW5ub3RhdGlvbjogcGFyc2VkVHlwZUFubm90YXRpb24KCQkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRtYXBMb2NhdGVkSW5Tb3VyY2VGaWxlcygKCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkYXBwZW5kKCdGYWlsZWQgdG8gcGFyc2UgdHlwZSBhbm5vdGF0aW9uOiAnKSksCgkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VFbG1UeXBlQW5kRGVwZW5kZW5jaWVzUmVjdXJzaXZlbHlGcm9tQW5ub3RhdGlvbiwKCQkJCQkJCQkJCQkJCW9yaWdpbmFsU291cmNlTW9kdWxlcywKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMihtb2R1bGVGaWxlUGF0aCwgcGFyc2VkTW9kdWxlKSwKCQkJCQkJCQkJCQkJCQlmdW5jdGlvblR5cGUudHlwZUFubm90YXRpb24pKSkpKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLAoJCQkJCQkJZnVuY3Rpb24gKGRlY2xhcmF0aW9uKSB7CgkJCQkJCQkJdmFyIF92MiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoZGVjbGFyYXRpb24pOwoJCQkJCQkJCWlmIChfdjIuJCA9PT0gJ0Z1bmN0aW9uRGVjbGFyYXRpb24nKSB7CgkJCQkJCQkJCXZhciBmdW5jdGlvbkRlY2xhcmF0aW9uID0gX3YyLmE7CgkJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChmdW5jdGlvbkRlY2xhcmF0aW9uKTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXBhcnNlZE1vZHVsZS5kZWNsYXJhdGlvbnMpKSk7CgkJCX0sCgkJCUEyKAoJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXBFcnJvciwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VyRGVhZEVuZHNUb1N0cmluZyhtb2R1bGVUZXh0KSwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRhcHBlbmQoJ0ZhaWxlZCB0byBwYXJzZSBFbG0gbW9kdWxlIHRleHQ6ICcpLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkc3ludGF4UmFuZ2VDb3ZlcmluZ0NvbXBsZXRlU3RyaW5nKG1vZHVsZVRleHQpKSwKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxvY2F0ZWRJblNvdXJjZUZpbGVzRnJvbVJhbmdlKG1vZHVsZUZpbGVQYXRoKSkpKSwKCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtTW9kdWxlVGV4dChtb2R1bGVUZXh0KSkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRCeXRlc0VuY29kaW5nID0geyQ6ICdCeXRlc0VuY29kaW5nJ307CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRCYXNlNjRFbmNvZGluZyA9IHskOiAnQmFzZTY0RW5jb2RpbmcnfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJFV0ZjhFbmNvZGluZyA9IHskOiAnVXRmOEVuY29kaW5nJ307CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRlbmNvZGluZ0Zyb21Tb3VyY2VGaWxlRmllbGROYW1lID0gJGVsbSRjb3JlJERpY3QkZnJvbUxpc3QoCglfTGlzdF9mcm9tQXJyYXkoCgkJWwoJCQlfVXRpbHNfVHVwbGUyKCdiYXNlNjQnLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRCYXNlNjRFbmNvZGluZyksCgkJCV9VdGlsc19UdXBsZTIoJ3V0ZjgnLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRVdGY4RW5jb2RpbmcpLAoJCQlfVXRpbHNfVHVwbGUyKCdieXRlcycsICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEJ5dGVzRW5jb2RpbmcpCgkJXSkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW50ZWdyYXRlU291cmNlRmlsZXNGdW5jdGlvblJlY29yZEZpZWxkTmFtZSA9IEYyKAoJZnVuY3Rpb24gKGZpZWxkTmFtZSwgY29uZmlnQmVmb3JlKSB7CgkJdmFyIF92MCA9IEEyKCRlbG0kY29yZSREaWN0JGdldCwgZmllbGROYW1lLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRlbmNvZGluZ0Zyb21Tb3VyY2VGaWxlRmllbGROYW1lKTsKCQlpZiAoX3YwLiQgPT09ICdKdXN0JykgewoJCQl2YXIgZW5jb2RpbmcgPSBfdjAuYTsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soZW5jb2RpbmcpOwoJCX0gZWxzZSB7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycignVW5zdXBwb3J0ZWQgZmllbGQgbmFtZTogJyArIGZpZWxkTmFtZSk7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZVNvdXJjZUZpbGVGdW5jdGlvbkVuY29kaW5nRnJvbVR5cGVBbm5vdGF0aW9uID0gZnVuY3Rpb24gKHR5cGVBbm5vdGF0aW9uKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJFJlc3VsdCRtYXBFcnJvciwKCQlmdW5jdGlvbiAoX3YwKSB7CgkJCXZhciBwYXRoID0gX3YwLmE7CgkJCXZhciBlcnJvciA9IF92MC5iOwoJCQlyZXR1cm4gJ0ZhaWxlZCBhdCBwYXRoICcgKyAoQTIoJGVsbSRjb3JlJFN0cmluZyRqb2luLCAnLicsIHBhdGgpICsgKCc6ICcgKyBlcnJvcikpOwoJCX0sCgkJQTQoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VJbnRlcmZhY2VSZWNvcmRUcmVlLCAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRpbnRlZ3JhdGVTb3VyY2VGaWxlc0Z1bmN0aW9uUmVjb3JkRmllbGROYW1lLCB0eXBlQW5ub3RhdGlvbiwgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkQnl0ZXNFbmNvZGluZykpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VTb3VyY2VGaWxlRnVuY3Rpb25Gcm9tVHlwZUFubm90YXRpb24gPSBmdW5jdGlvbiAodHlwZUFubm90YXRpb24pIHsKCXN3aXRjaCAodHlwZUFubm90YXRpb24uJCkgewoJCWNhc2UgJ1JlY29yZEVsbVR5cGUnOgoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCWZ1bmN0aW9uIChlbmNvZGluZykgewoJCQkJCXJldHVybiB7ZW5jb2Rpbmc6IGVuY29kaW5nLCBpc1RyZWU6IGZhbHNlfTsKCQkJCX0sCgkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZVNvdXJjZUZpbGVGdW5jdGlvbkVuY29kaW5nRnJvbVR5cGVBbm5vdGF0aW9uKHR5cGVBbm5vdGF0aW9uKSk7CgkJY2FzZSAnSW5zdGFuY2VFbG1UeXBlJzoKCQkJdmFyIGluc3RhbmNlID0gdHlwZUFubm90YXRpb24uYTsKCQkJdmFyIGNvbnRpbnVlV2l0aEVycm9yVW5leHBlY3RlZEluc3QgPSBmdW5jdGlvbiAoZGV0YWlsKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ1VuZXhwZWN0ZWQgc2hhcGUgb2YgaW5zdGFudGlhdGlvbjogJyArIGRldGFpbCk7CgkJCX07CgkJCXZhciBfdjEgPSBpbnN0YW5jZS5pbnN0YW50aWF0ZWQ7CgkJCWlmIChfdjEuJCA9PT0gJ0Nob2ljZUVsbVR5cGUnKSB7CgkJCQl2YXIgaW5zdGFudGlhdGVkVHlwZU5hbWUgPSBfdjEuYTsKCQkJCWlmICghQTIoJGVsbSRjb3JlJFN0cmluZyRlbmRzV2l0aCwgJy5GaWxlVHJlZU5vZGUnLCBpbnN0YW50aWF0ZWRUeXBlTmFtZSkpIHsKCQkJCQlyZXR1cm4gY29udGludWVXaXRoRXJyb3JVbmV4cGVjdGVkSW5zdCgnaW5zdGF0aWF0ZWRUeXBlTmFtZTogJyArIGluc3RhbnRpYXRlZFR5cGVOYW1lKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIF92MiA9IGluc3RhbmNlLl9hcmd1bWVudHM7CgkJCQkJaWYgKF92Mi5iICYmICghX3YyLmIuYikpIHsKCQkJCQkJdmFyIHNpbmdsZUFyZ3VtZW50ID0gX3YyLmE7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCQkJZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkJCQkJCQkJcmV0dXJuIHtlbmNvZGluZzogZW5jb2RpbmcsIGlzVHJlZTogdHJ1ZX07CgkJCQkJCQl9LAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXBFcnJvciwKCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGFwcGVuZCgnRmFpbGVkIHRvIHBhcnNlIGFyZ3VtZW50OiAnKSwKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZVNvdXJjZUZpbGVGdW5jdGlvbkVuY29kaW5nRnJvbVR5cGVBbm5vdGF0aW9uKHNpbmdsZUFyZ3VtZW50KSkpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXJldHVybiBjb250aW51ZVdpdGhFcnJvclVuZXhwZWN0ZWRJbnN0KAoJCQkJCQkJJ1VuZXhwZWN0ZWQgbnVtYmVyIG9mIGFyZ3VtZW50czogJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludCgKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRsZW5ndGgoaW5zdGFuY2UuX2FyZ3VtZW50cykpKTsKCQkJCQl9CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gY29udGludWVXaXRoRXJyb3JVbmV4cGVjdGVkSW5zdCgnSW5zdGFudGlhdGVkIGlzIG5vdCBhIGNob2ljZSB0eXBlJyk7CgkJCX0KCQlkZWZhdWx0OgoJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCXsKCQkJCQllbmNvZGluZzogJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkUmVjb3JkVHJlZUxlYWYoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkQnl0ZXNFbmNvZGluZyksCgkJCQkJaXNUcmVlOiBmYWxzZQoJCQkJfSk7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZVNvdXJjZUZpbGVGdW5jdGlvbkVuY29kaW5nRnJvbUVsbVR5cGVBbm5vdGF0aW9uID0gRjIoCglmdW5jdGlvbiAoY3VycmVudE1vZHVsZSwgdHlwZUFubm90YXRpb25Ob2RlKSB7CgkJdmFyIF92MCA9IEEyKAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZUVsbVR5cGVBbmREZXBlbmRlbmNpZXNSZWN1cnNpdmVseUZyb21Bbm5vdGF0aW9uLAoJCQkkZWxtJGNvcmUkRGljdCRlbXB0eSwKCQkJX1V0aWxzX1R1cGxlMihjdXJyZW50TW9kdWxlLCB0eXBlQW5ub3RhdGlvbk5vZGUpKTsKCQlpZiAoX3YwLiQgPT09ICdFcnInKSB7CgkJCXZhciBfdjEgPSBfdjAuYTsKCQkJdmFyIGVycm9yID0gX3YxLmI7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycignRmFpbGVkIHRvIHBhcnNlIHR5cGUgYW5ub3RhdGlvbjogJyArIGVycm9yKTsKCQl9IGVsc2UgewoJCQl2YXIgX3YyID0gX3YwLmE7CgkJCXZhciB0eXBlQW5ub3RhdGlvbiA9IF92Mi5hOwoJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VTb3VyY2VGaWxlRnVuY3Rpb25Gcm9tVHlwZUFubm90YXRpb24odHlwZUFubm90YXRpb24pOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VTb3VyY2VGaWxlRnVuY3Rpb25FbmNvZGluZ0Zyb21EZWNsYXJhdGlvbiA9IEYyKAoJZnVuY3Rpb24gKGN1cnJlbnRNb2R1bGUsIGZ1bmN0aW9uRGVjbGFyYXRpb24pIHsKCQl2YXIgX3YwID0gZnVuY3Rpb25EZWNsYXJhdGlvbi5zaWduYXR1cmU7CgkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKCdNaXNzaW5nIHNpZ25hdHVyZScpOwoJCX0gZWxzZSB7CgkJCXZhciBzaWduYXR1cmUgPSBfdjAuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VTb3VyY2VGaWxlRnVuY3Rpb25FbmNvZGluZ0Zyb21FbG1UeXBlQW5ub3RhdGlvbiwKCQkJCWN1cnJlbnRNb2R1bGUsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKHNpZ25hdHVyZSkudHlwZUFubm90YXRpb24pOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkU291cmNlRmlsZSA9IHskOiAnU291cmNlRmlsZSd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkU291cmNlRmlsZVRyZWUgPSB7JDogJ1NvdXJjZUZpbGVUcmVlJ307CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRzb3VyY2VGaWxlRnVuY3Rpb25OYW1lU3RhcnQgPSAnZmlsZSc7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRzb3VyY2VGaWxlVHJlZUZ1bmN0aW9uTmFtZVN0YXJ0ID0gJ2ZpbGVfdHJlZSc7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZVNvdXJjZUZpbGVGdW5jdGlvbk5hbWUgPSBmdW5jdGlvbiAoZnVuY3Rpb25OYW1lKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJFJlc3VsdCRhbmRUaGVuLAoJCWZ1bmN0aW9uIChfdjApIHsKCQkJdmFyIHZhcmlhbnQgPSBfdjAuYTsKCQkJdmFyIGZsYWdzID0gX3YwLmI7CgkJCXZhciBmaWxlUGF0aFJlcHJlc2VudGF0aW9uID0gX3YwLmM7CgkJCXJldHVybiAoIV9VdGlsc19lcShmbGFncywgX0xpc3RfTmlsKSkgPyAkZWxtJGNvcmUkUmVzdWx0JEVycignRmxhZ3MgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gU291cmNlRmlsZXMgZGVjbGFyYXRpb25zJykgOiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJX1V0aWxzX1R1cGxlMihmaWxlUGF0aFJlcHJlc2VudGF0aW9uLCB2YXJpYW50KSk7CgkJfSwKCQlBMigKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VGbGFnc0FuZFBhdGhQYXR0ZXJuRnJvbUZ1bmN0aW9uTmFtZSwKCQkJJGVsbSRjb3JlJERpY3QkZnJvbUxpc3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHNvdXJjZUZpbGVGdW5jdGlvbk5hbWVTdGFydCwgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkU291cmNlRmlsZSksCgkJCQkJCV9VdGlsc19UdXBsZTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkc291cmNlRmlsZVRyZWVGdW5jdGlvbk5hbWVTdGFydCwgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkU291cmNlRmlsZVRyZWUpCgkJCQkJXSkpLAoJCQlmdW5jdGlvbk5hbWUpKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlU291cmNlRmlsZUZ1bmN0aW9uID0gRjIoCglmdW5jdGlvbiAoY3VycmVudE1vZHVsZSwgZnVuY3Rpb25EZWNsYXJhdGlvbikgewoJCXZhciBfdjAgPSBBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZVNvdXJjZUZpbGVGdW5jdGlvbkVuY29kaW5nRnJvbURlY2xhcmF0aW9uLCBjdXJyZW50TW9kdWxlLCBmdW5jdGlvbkRlY2xhcmF0aW9uKTsKCQlpZiAoX3YwLiQgPT09ICdFcnInKSB7CgkJCXZhciBlcnJvciA9IF92MC5hOwoJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ0ZhaWxlZCB0byBwYXJzZSBlbmNvZGluZzogJyArIGVycm9yKTsKCQl9IGVsc2UgewoJCQl2YXIgZW5jb2RpbmdGcm9tRGVjbGFyYXRpb24gPSBfdjAuYTsKCQkJdmFyIGZ1bmN0aW9uTmFtZSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKGZ1bmN0aW9uRGVjbGFyYXRpb24uZGVjbGFyYXRpb24pLm5hbWUpOwoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCSRlbG0kY29yZSRUdXBsZSRtYXBTZWNvbmQoCgkJCQkJZnVuY3Rpb24gKHZhcmlhbnQpIHsKCQkJCQkJcmV0dXJuIHtlbmNvZGluZzogZW5jb2RpbmdGcm9tRGVjbGFyYXRpb24uZW5jb2RpbmcsIHZhcmlhbnQ6IHZhcmlhbnR9OwoJCQkJCX0pLAoJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VTb3VyY2VGaWxlRnVuY3Rpb25OYW1lKGZ1bmN0aW9uTmFtZSkpOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkc291cmNlRmlsZXNJbnRlcmZhY2VNb2R1bGVBZGRlZEZ1bmN0aW9uTWFwQmxvYnMgPSB7CglmdW5jdGlvbk5hbWU6ICdtYXBCbG9icycsCgltYXBGdW5jdGlvbkxpbmVzOiAkZWxtJGNvcmUkQmFzaWNzJGFsd2F5cygKCQkkZWxtJGNvcmUkQmFzaWNzJGFsd2F5cygKCQkJQTIoJGVsbSRjb3JlJFN0cmluZyRzcGxpdCwgJ1xuJywgJ1xubWFwQmxvYnMgOiAoYSAtPiBiKSAtPiBGaWxlVHJlZU5vZGUgYSAtPiBGaWxlVHJlZU5vZGUgYlxubWFwQmxvYnMgbWFwQmxvYiBub2RlID1cbiAgICBjYXNlIG5vZGUgb2ZcbiAgICAgICAgVHJlZU5vZGUgdHJlZSAtPlxuICAgICAgICAgICAgVHJlZU5vZGUgKHRyZWUgfD4gTGlzdC5tYXAgKFR1cGxlLm1hcFNlY29uZCAobWFwQmxvYnMgbWFwQmxvYikpKVxuXG4gICAgICAgIEJsb2JOb2RlIGJsb2IgLT5cbiAgICAgICAgICAgIEJsb2JOb2RlIChtYXBCbG9iIGJsb2IpXG4nKSkpCn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRzb3VyY2VGaWxlc0ludGVyZmFjZU1vZHVsZUFkZGVkRnVuY3Rpb25NYXBOb2RlID0gewoJZnVuY3Rpb25OYW1lOiAnbWFwRmlsZVRyZWVOb2RlRnJvbUdlbmVyYXRlZCcsCgltYXBGdW5jdGlvbkxpbmVzOiBmdW5jdGlvbiAoX3YwKSB7CgkJdmFyIGdlbmVyYXRlZE1vZHVsZU5hbWUgPSBfdjAuZ2VuZXJhdGVkTW9kdWxlTmFtZTsKCQlyZXR1cm4gJGVsbSRjb3JlJEJhc2ljcyRhbHdheXMoCgkJCUEyKAoJCQkJJGVsbSRjb3JlJFN0cmluZyRzcGxpdCwKCQkJCSdcbicsCgkJCQknXG5tYXBGaWxlVHJlZU5vZGVGcm9tR2VuZXJhdGVkIDogJyArIChBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcuJywgZ2VuZXJhdGVkTW9kdWxlTmFtZSkgKyAoJy5GaWxlVHJlZU5vZGUgYSAtPiBGaWxlVHJlZU5vZGUgYVxubWFwRmlsZVRyZWVOb2RlRnJvbUdlbmVyYXRlZCBub2RlID1cbiAgICBjYXNlIG5vZGUgb2ZcbiAgICAgICAgJyArIChBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcuJywgZ2VuZXJhdGVkTW9kdWxlTmFtZSkgKyAoJy5CbG9iTm9kZSBibG9iIC0+XG4gICAgICAgICAgICBCbG9iTm9kZSBibG9iXG5cbiAgICAgICAgJyArIChBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcuJywgZ2VuZXJhdGVkTW9kdWxlTmFtZSkgKyAnLlRyZWVOb2RlIHRyZWUgLT5cbiAgICAgICAgICAgIHRyZWUgfD4gTGlzdC5tYXAgKFR1cGxlLm1hcFNlY29uZCBtYXBGaWxlVHJlZU5vZGVGcm9tR2VuZXJhdGVkKSB8PiBUcmVlTm9kZVxuJykpKSkpKSk7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwcmVwYXJlUmVwbGFjZUZ1bmN0aW9uSW5Tb3VyY2VGaWxlc01vZHVsZVRleHQgPSBGNCgKCWZ1bmN0aW9uIChzb3VyY2VEaXJzLCBzb3VyY2VGaWxlcywgY3VycmVudE1vZHVsZSwgb3JpZ2luYWxGdW5jdGlvbkRlY2xhcmF0aW9uKSB7CgkJdmFyIGZ1bmN0aW9uTmFtZSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKG9yaWdpbmFsRnVuY3Rpb25EZWNsYXJhdGlvbikuZGVjbGFyYXRpb24pLm5hbWUpOwoJCXZhciBfdjAgPSBBMigKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VTb3VyY2VGaWxlRnVuY3Rpb24sCgkJCWN1cnJlbnRNb2R1bGUsCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUob3JpZ2luYWxGdW5jdGlvbkRlY2xhcmF0aW9uKSk7CgkJaWYgKF92MC4kID09PSAnRXJyJykgewoJCQl2YXIgZXJyb3IgPSBfdjAuYTsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKCdGYWlsZWQgdG8gcGFyc2UgZnVuY3Rpb246ICcgKyBlcnJvcik7CgkJfSBlbHNlIHsKCQkJdmFyIF92MSA9IF92MC5hOwoJCQl2YXIgZmlsZVBhdGhSZXByZXNlbnRhdGlvbiA9IF92MS5hOwoJCQl2YXIgY29uZmlnID0gX3YxLmI7CgkJCXZhciBfdjIgPSBBMygkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRmaW5kRmlsZVRyZWVOb2RlV2l0aFBhdGhNYXRjaGluZ1JlcHJlc2VudGF0aW9uSW5GdW5jdGlvbk5hbWUsIHNvdXJjZURpcnMsIHNvdXJjZUZpbGVzLCBmaWxlUGF0aFJlcHJlc2VudGF0aW9uKTsKCQkJaWYgKF92Mi4kID09PSAnRXJyJykgewoJCQkJdmFyIGVycm9yID0gX3YyLmE7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ0ZhaWxlZCB0byBpZGVudGlmeSBmaWxlIGZvciBcJycgKyAoZmlsZVBhdGhSZXByZXNlbnRhdGlvbiArICgnXCc6ICcgKyBlcnJvcikpKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBfdjMgPSBfdjIuYTsKCQkJCXZhciBwYXRoTWF0Y2hJbmZvID0gX3YzLmE7CgkJCQl2YXIgZmlsZVRyZWVDb250ZW50ID0gX3YzLmI7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJFJlc3VsdCRhbmRUaGVuLAoJCQkJCWZ1bmN0aW9uIChwcmVwYXJlT2spIHsKCQkJCQkJdmFyIGZpbGVFbmNvZGluZ1RyZWVFeHByZXNzaW9uID0gZnVuY3Rpb24gKHNvdXJjZUV4cHJlc3Npb24pIHsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRpbnRlcmZhY2VNb2R1bGVSZWNvcmRFeHByZXNzaW9uLAoJCQkJCQkJCXByZXBhcmVPay5pbnRlcmZhY2VNb2R1bGUsCgkJCQkJCQkJe3NvdXJjZUV4cHJlc3Npb246IHNvdXJjZUV4cHJlc3Npb259KTsKCQkJCQkJfTsKCQkJCQkJdmFyIGV4cHJlc3Npb25Gcm9tRmlsZUNvbnRlbnQgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCR2YWx1ZU1vZHVsZVJlY29yZEV4cHJlc3Npb25Gcm9tRW5jb2RpbmdzKHByZXBhcmVPay52YWx1ZU1vZHVsZSk7CgkJCQkJCXZhciBleHByZXNzaW9uRnJvbUZpbGVUcmVlTm9kZSA9IGZ1bmN0aW9uIChmaWxlVHJlZU5vZGUpIHsKCQkJCQkJCWlmIChmaWxlVHJlZU5vZGUuJCA9PT0gJ0Jsb2JOb2RlJykgewoJCQkJCQkJCXZhciBibG9iID0gZmlsZVRyZWVOb2RlLmE7CgkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJCQkJZnVuY3Rpb24gKGV4cHJlc3Npb24pIHsKCQkJCQkJCQkJCXJldHVybiAnQmxvYk5vZGUgKCcgKyAoZXhwcmVzc2lvbiArICcpJyk7CgkJCQkJCQkJCX0sCgkJCQkJCQkJCWV4cHJlc3Npb25Gcm9tRmlsZUNvbnRlbnQoYmxvYikpOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgdHJlZSA9IGZpbGVUcmVlTm9kZS5hOwoJCQkJCQkJCXZhciBidWlsZFRyZWVFbnRyeUV4cHJlc3Npb24gPSBmdW5jdGlvbiAoX3Y1KSB7CgkJCQkJCQkJCXZhciBlbnRyeU5hbWUgPSBfdjUuYTsKCQkJCQkJCQkJdmFyIGVudHJ5Tm9kZSA9IF92NS5iOwoJCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJCQkJCWZ1bmN0aW9uIChlbnRyeU5vZGVFeHByKSB7CgkJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQkJCQkJCSdcbicsCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVsnKCBcIicgKyAoZW50cnlOYW1lICsgJ1wiJyksICcsICcgKyBlbnRyeU5vZGVFeHByLCAnKSddKSk7CgkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJZXhwcmVzc2lvbkZyb21GaWxlVHJlZU5vZGUoZW50cnlOb2RlKSk7CgkJCQkJCQkJfTsKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCQkJCQlmdW5jdGlvbiAoZW50cmllc0V4cHJlc3Npb25zKSB7CgkJCQkJCQkJCQlyZXR1cm4gJ1RyZWVOb2RlXG4nICsgQTIoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkaW5kZW50RWxtQ29kZUxpbmVzLAoJCQkJCQkJCQkJCTEsCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQkJCQkJJ1xuJywKCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJCSdbJyArIChBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICdcbiwnLCBlbnRyaWVzRXhwcmVzc2lvbnMpICsgJ10nKQoJCQkJCQkJCQkJCQkJXSkpKTsKCQkJCQkJCQkJfSwKCQkJCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JENvbW1vbiRyZXN1bHRMaXN0TWFwQ29tYmluZSwgYnVpbGRUcmVlRW50cnlFeHByZXNzaW9uLCB0cmVlKSk7CgkJCQkJCQl9CgkJCQkJCX07CgkJCQkJCXZhciBleHByZXNzaW9uUmVzdWx0ID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJdmFyIF92OSA9IGNvbmZpZy52YXJpYW50OwoJCQkJCQkJaWYgKF92OS4kID09PSAnU291cmNlRmlsZScpIHsKCQkJCQkJCQlpZiAoZmlsZVRyZWVDb250ZW50LiQgPT09ICdUcmVlTm9kZScpIHsKCQkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKAoJCQkJCQkJCQkJJ1RoaXMgcGF0dGVybiBtYXRjaGVzIHBhdGggXCcnICsgKEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy8nLCBwYXRoTWF0Y2hJbmZvLmFic29sdXRlUGF0aCkgKyAnXCcgYnV0IHRoZSBub2RlIGhlcmUgaXMgYSB0cmVlLCBub3QgYSBmaWxlJykpOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBmaWxlQ29udGVudCA9IGZpbGVUcmVlQ29udGVudC5hOwoJCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJCQkJCWZ1bmN0aW9uIChleHByZXNzaW9uKSB7CgkJCQkJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVsnZmlsZV8nLCBmaWxlUGF0aFJlcHJlc2VudGF0aW9uXSksCgkJCQkJCQkJCQkJCWV4cHJlc3Npb24pOwoJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCWV4cHJlc3Npb25Gcm9tRmlsZUNvbnRlbnQoZmlsZUNvbnRlbnQpKTsKCQkJCQkJCQl9CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAsCgkJCQkJCQkJCSRlbG0kY29yZSRUdXBsZSRwYWlyKAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsnZmlsZV90cmVlX25vZGUnLCBmaWxlUGF0aFJlcHJlc2VudGF0aW9uXSkpLAoJCQkJCQkJCQlleHByZXNzaW9uRnJvbUZpbGVUcmVlTm9kZShmaWxlVHJlZUNvbnRlbnQpKTsKCQkJCQkJCX0KCQkJCQkJfSgpOwoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJCWZ1bmN0aW9uIChfdjYpIHsKCQkJCQkJCQl2YXIgZmlsZU5hbWVDb21wb25lbnRzID0gX3Y2LmE7CgkJCQkJCQkJdmFyIGV4cHJlc3Npb24gPSBfdjYuYjsKCQkJCQkJCQl2YXIgdmFsdWVGdW5jdGlvbk5hbWUgPSBBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICdfJywgZmlsZU5hbWVDb21wb25lbnRzKTsKCQkJCQkJCQl2YXIgdmFsdWVGdW5jdGlvblRleHQgPSB2YWx1ZUZ1bmN0aW9uTmFtZSArICgnID1cbicgKyBBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRpbmRlbnRFbG1Db2RlTGluZXMsIDEsIGV4cHJlc3Npb24pKTsKCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQl1cGRhdGVJbnRlcmZhY2VNb2R1bGVUZXh0OiBGMigKCQkJCQkJCQkJCWZ1bmN0aW9uIChfdjcsIG1vZHVsZVRleHQpIHsKCQkJCQkJCQkJCQl2YXIgZ2VuZXJhdGVkTW9kdWxlTmFtZSA9IF92Ny5nZW5lcmF0ZWRNb2R1bGVOYW1lOwoJCQkJCQkJCQkJCXZhciBmaWxlRXhwcmVzc2lvbiA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJCQkJCQkJdmFyIF92OCA9IGNvbmZpZy52YXJpYW50OwoJCQkJCQkJCQkJCQlpZiAoX3Y4LiQgPT09ICdTb3VyY2VGaWxlJykgewoJCQkJCQkJCQkJCQkJcmV0dXJuIGZpbGVFbmNvZGluZ1RyZWVFeHByZXNzaW9uKAoJCQkJCQkJCQkJCQkJCUEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy4nLCBnZW5lcmF0ZWRNb2R1bGVOYW1lKSArICgnLicgKyB2YWx1ZUZ1bmN0aW9uTmFtZSkpOwoJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQkJCQkJCQknXG58PicsCgkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJCQlBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcuJywgZ2VuZXJhdGVkTW9kdWxlTmFtZSkgKyAoJy4nICsgdmFsdWVGdW5jdGlvbk5hbWUpLAoJCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkc291cmNlRmlsZXNJbnRlcmZhY2VNb2R1bGVBZGRlZEZ1bmN0aW9uTWFwTm9kZS5mdW5jdGlvbk5hbWUsCgkJCQkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRzb3VyY2VGaWxlc0ludGVyZmFjZU1vZHVsZUFkZGVkRnVuY3Rpb25NYXBCbG9icy5mdW5jdGlvbk5hbWUgKyAoJyhcXGJsb2JWYWx1ZSAtPiAnICsgKGZpbGVFbmNvZGluZ1RyZWVFeHByZXNzaW9uKCdibG9iVmFsdWUnKSArICcpJykpCgkJCQkJCQkJCQkJCQkJCV0pKTsKCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCX0oKTsKCQkJCQkJCQkJCQl2YXIgYnVpbGROZXdGdW5jdGlvbkxpbmVzID0gZnVuY3Rpb24gKHByZXZpb3VzRnVuY3Rpb25MaW5lcykgewoJCQkJCQkJCQkJCQlyZXR1cm4gX1V0aWxzX2FwKAoJCQkJCQkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkdGFrZSwgMiwgcHJldmlvdXNGdW5jdGlvbkxpbmVzKSwKCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGluZGVudEVsbUNvZGVMaW5lcywgMSwgZmlsZUV4cHJlc3Npb24pCgkJCQkJCQkJCQkJCQkJXSkpOwoJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRhZGRPclVwZGF0ZUZ1bmN0aW9uSW5FbG1Nb2R1bGVUZXh0LAoJCQkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJCQlmdW5jdGlvbk5hbWU6IGZ1bmN0aW9uTmFtZSwKCQkJCQkJCQkJCQkJCW1hcEZ1bmN0aW9uTGluZXM6IEEyKAoJCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0KF9MaXN0X05pbCksCgkJCQkJCQkJCQkJCQkJYnVpbGROZXdGdW5jdGlvbkxpbmVzKQoJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCQltb2R1bGVUZXh0KTsKCQkJCQkJCQkJCX0pLAoJCQkJCQkJCQl2YWx1ZUZ1bmN0aW9uVGV4dDogdmFsdWVGdW5jdGlvblRleHQKCQkJCQkJCQl9OwoJCQkJCQkJfSwKCQkJCQkJCWV4cHJlc3Npb25SZXN1bHQpOwoJCQkJCX0sCgkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcHJlcGFyZVJlY29yZFRyZWVFbWl0Rm9yVHJlZU9yQmxvYlVuZGVyUGF0aCwgX0xpc3RfTmlsLCBjb25maWcuZW5jb2RpbmcpKTsKCQkJfQoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkc291cmNlRmlsZXNJbnRlcmZhY2VNb2R1bGVBZGRlZEZ1bmN0aW9ucyA9IF9MaXN0X2Zyb21BcnJheSgKCVskYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRzb3VyY2VGaWxlc0ludGVyZmFjZU1vZHVsZUFkZGVkRnVuY3Rpb25NYXBOb2RlLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRzb3VyY2VGaWxlc0ludGVyZmFjZU1vZHVsZUFkZGVkRnVuY3Rpb25NYXBCbG9ic10pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbWFwU291cmNlRmlsZXNNb2R1bGVUZXh0ID0gRjIoCglmdW5jdGlvbiAoc291cmNlRGlycywgX3YwKSB7CgkJdmFyIHNvdXJjZUZpbGVzID0gX3YwLmE7CgkJdmFyIG1vZHVsZUZpbGVQYXRoID0gX3YwLmI7CgkJdmFyIG1vZHVsZVRleHQgPSBfdjAuYzsKCQl2YXIgc291cmNlRmlsZXNJbnRlcmZhY2VNb2R1bGVBZGRlZEZ1bmN0aW9uc05hbWVzID0gQTIoCgkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJZnVuY3Rpb24gKCQpIHsKCQkJCXJldHVybiAkLmZ1bmN0aW9uTmFtZTsKCQkJfSwKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkc291cmNlRmlsZXNJbnRlcmZhY2VNb2R1bGVBZGRlZEZ1bmN0aW9ucyk7CgkJdmFyIG1hcEVycm9yU3RyaW5nRm9yRnVuY3Rpb25EZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChmdW5jdGlvbkRlY2xhcmF0aW9uKSB7CgkJCXZhciBmdW5jdGlvbk5hbWUgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZSgKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKGZ1bmN0aW9uRGVjbGFyYXRpb24pLmRlY2xhcmF0aW9uKS5uYW1lKTsKCQkJcmV0dXJuICRlbG0kY29yZSRCYXNpY3MkYXBwZW5kKCdGYWlsZWQgdG8gcmVwbGFjZSBmdW5jdGlvbiBcJycgKyAoZnVuY3Rpb25OYW1lICsgJ1wnOiAnKSk7CgkJfTsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxvY2F0ZWRJblNvdXJjZUZpbGVzRnJvbVJhbmdlKG1vZHVsZUZpbGVQYXRoKSwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkUmVzdWx0JGFuZFRoZW4sCgkJCQlmdW5jdGlvbiAocGFyc2VkTW9kdWxlKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JGFuZFRoZW4sCgkJCQkJCWZ1bmN0aW9uIChwcmVwYXJlZEZ1bmN0aW9ucykgewoJCQkJCQkJdmFyIGludGVyZmFjZU1vZHVsZU5hbWUgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGUkbW9kdWxlTmFtZSgKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKHBhcnNlZE1vZHVsZS5tb2R1bGVEZWZpbml0aW9uKSk7CgkJCQkJCQl2YXIgaW50ZXJmYWNlTW9kdWxlRGVjbGFyZXNUeXBlRmlsZVRyZWVOb2RlID0gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkYW55LAoJCQkJCQkJCWZ1bmN0aW9uIChkZWNsYXJhdGlvbikgewoJCQkJCQkJCQl2YXIgX3YyID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShkZWNsYXJhdGlvbik7CgkJCQkJCQkJCWlmIChfdjIuJCA9PT0gJ0N1c3RvbVR5cGVEZWNsYXJhdGlvbicpIHsKCQkJCQkJCQkJCXZhciBjaG9pY2VUeXBlRGVjbGFyYXRpb24gPSBfdjIuYTsKCQkJCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKGNob2ljZVR5cGVEZWNsYXJhdGlvbi5uYW1lKSA9PT0gJ0ZpbGVUcmVlTm9kZSc7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCQkJCX0KCQkJCQkJCQl9LAoJCQkJCQkJCXBhcnNlZE1vZHVsZS5kZWNsYXJhdGlvbnMpOwoJCQkJCQkJdmFyIGdlbmVyYXRlZE1vZHVsZVR5cGVEZWNsYXJhdGlvbnMgPSBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWydcbnR5cGUgRmlsZVRyZWVOb2RlIGJsb2JTdHJ1Y3R1cmVcbiAgICA9IEJsb2JOb2RlIGJsb2JTdHJ1Y3R1cmVcbiAgICB8IFRyZWVOb2RlIChMaXN0ICggU3RyaW5nLCBGaWxlVHJlZU5vZGUgYmxvYlN0cnVjdHVyZSApKVxuJ10pOwoJCQkJCQkJdmFyIGdlbmVyYXRlZE1vZHVsZU5hbWUgPSAkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQlpbnRlcmZhY2VNb2R1bGVOYW1lLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWydHZW5lcmF0ZWRfU291cmNlRmlsZXMnXSkKCQkJCQkJCQkJXSkpOwoJCQkJCQkJdmFyIGdlbmVyYXRlZE1vZHVsZVBhdGggPSBBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRmaWxlUGF0aEZyb21FbG1Nb2R1bGVOYW1lLCBzb3VyY2VEaXJzLCBnZW5lcmF0ZWRNb2R1bGVOYW1lKTsKCQkJCQkJCXZhciBnZW5lcmF0ZWRNb2R1bGVEZWNsYXJhdGlvbnNCZWZvcmVSZW1vdmluZ0R1cGxpY2F0ZXMgPSBfVXRpbHNfYXAoCgkJCQkJCQkJZ2VuZXJhdGVkTW9kdWxlVHlwZURlY2xhcmF0aW9ucywKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJCQkkZWxtJGNvcmUkVHVwbGUkc2Vjb25kLAoJCQkJCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCQkJCQlyZXR1cm4gJC52YWx1ZUZ1bmN0aW9uVGV4dDsKCQkJCQkJCQkJCX0pLAoJCQkJCQkJCQlwcmVwYXJlZEZ1bmN0aW9ucykpOwoJCQkJCQkJdmFyIGdlbmVyYXRlZE1vZHVsZURlY2xhcmF0aW9ucyA9ICRlbG0kY29yZSRTZXQkZnJvbUxpc3QoZ2VuZXJhdGVkTW9kdWxlRGVjbGFyYXRpb25zQmVmb3JlUmVtb3ZpbmdEdXBsaWNhdGVzKTsKCQkJCQkJCXZhciBnZW5lcmF0ZWRNb2R1bGVUZXh0V2l0aG91dE1vZHVsZURlY2xhcmF0aW9uID0gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCSdcblxuJywKCQkJCQkJCQkkZWxtJGNvcmUkU2V0JHRvTGlzdChnZW5lcmF0ZWRNb2R1bGVEZWNsYXJhdGlvbnMpKTsKCQkJCQkJCXZhciBnZW5lcmF0ZWRNb2R1bGVUZXh0ID0gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCSdcblxuJywKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCSdtb2R1bGUgJyArIChBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcuJywgZ2VuZXJhdGVkTW9kdWxlTmFtZSkgKyAnIGV4cG9zaW5nICguLiknKSwKCQkJCQkJCQkJCWdlbmVyYXRlZE1vZHVsZVRleHRXaXRob3V0TW9kdWxlRGVjbGFyYXRpb24KCQkJCQkJCQkJXSkpOwoJCQkJCQkJdmFyIGFwcEZpbGVzID0gQTMoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkdXBkYXRlRmlsZUNvbnRlbnRBdFBhdGgsCgkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRhbHdheXMoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGZpbGVDb250ZW50RnJvbVN0cmluZyhnZW5lcmF0ZWRNb2R1bGVUZXh0KSksCgkJCQkJCQkJZ2VuZXJhdGVkTW9kdWxlUGF0aCwKCQkJCQkJCQlzb3VyY2VGaWxlcyk7CgkJCQkJCQl2YXIgYWRkTWFwcGluZ0Z1bmN0aW9uSWZUeXBlSXNQcmVzZW50ID0gaW50ZXJmYWNlTW9kdWxlRGVjbGFyZXNUeXBlRmlsZVRyZWVOb2RlID8gZnVuY3Rpb24gKG1vZHVsZVRleHRCZWZvcmUpIHsKCQkJCQkJCQlyZXR1cm4gQTMoCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkJCQkJCQlGMigKCQkJCQkJCQkJCWZ1bmN0aW9uIChhZGRlZEZ1bmN0aW9uLCBwcmV2aW91c1Jlc3VsdCkgewoJCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRhbmRUaGVuLAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRhZGRPclVwZGF0ZUZ1bmN0aW9uSW5FbG1Nb2R1bGVUZXh0KAoJCQkJCQkJCQkJCQkJewoJCQkJCQkJCQkJCQkJCWZ1bmN0aW9uTmFtZTogYWRkZWRGdW5jdGlvbi5mdW5jdGlvbk5hbWUsCgkJCQkJCQkJCQkJCQkJbWFwRnVuY3Rpb25MaW5lczogYWRkZWRGdW5jdGlvbi5tYXBGdW5jdGlvbkxpbmVzKAoJCQkJCQkJCQkJCQkJCQl7Z2VuZXJhdGVkTW9kdWxlTmFtZTogZ2VuZXJhdGVkTW9kdWxlTmFtZX0pCgkJCQkJCQkJCQkJCQl9KSwKCQkJCQkJCQkJCQkJcHJldmlvdXNSZXN1bHQpOwoJCQkJCQkJCQkJfSksCgkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkT2sobW9kdWxlVGV4dEJlZm9yZSksCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHNvdXJjZUZpbGVzSW50ZXJmYWNlTW9kdWxlQWRkZWRGdW5jdGlvbnMpOwoJCQkJCQkJfSA6ICRlbG0kY29yZSRSZXN1bHQkT2s7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAsCgkJCQkJCQkJJGVsbSRjb3JlJFR1cGxlJHBhaXIoYXBwRmlsZXMpLAoJCQkJCQkJCUEzKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRsaXN0Rm9sZGxUb0FnZ3JlZ2F0ZVJlc3VsdCwKCQkJCQkJCQkJRjIoCgkJCQkJCQkJCQlmdW5jdGlvbiAoX3YxLCBwcmV2aW91c0FnZ3JlZ2F0ZSkgewoJCQkJCQkJCQkJCXZhciBmdW5jdGlvbkRlY2xhcmF0aW9uID0gX3YxLmE7CgkJCQkJCQkJCQkJdmFyIHJlcGxhY2VGdW5jdGlvbiA9IF92MS5iOwoJCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXBFcnJvciwKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlKAoJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRyYW5nZShmdW5jdGlvbkRlY2xhcmF0aW9uKSksCgkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXBFcnJvciwKCQkJCQkJCQkJCQkJCW1hcEVycm9yU3RyaW5nRm9yRnVuY3Rpb25EZWNsYXJhdGlvbihmdW5jdGlvbkRlY2xhcmF0aW9uKSwKCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCXJlcGxhY2VGdW5jdGlvbi51cGRhdGVJbnRlcmZhY2VNb2R1bGVUZXh0LAoJCQkJCQkJCQkJCQkJCXtnZW5lcmF0ZWRNb2R1bGVOYW1lOiBnZW5lcmF0ZWRNb2R1bGVOYW1lfSwKCQkJCQkJCQkJCQkJCQlwcmV2aW91c0FnZ3JlZ2F0ZSkpKTsKCQkJCQkJCQkJCX0pLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkc3ludGF4UmFuZ2VDb3ZlcmluZ0NvbXBsZXRlU3RyaW5nKG1vZHVsZVRleHQpKSwKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkYW5kVGhlbiwKCQkJCQkJCQkJCQlhZGRNYXBwaW5nRnVuY3Rpb25JZlR5cGVJc1ByZXNlbnQsCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGFkZEltcG9ydHNJbkVsbU1vZHVsZVRleHQsCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRlbmNvZGluZ01vZHVsZUltcG9ydEJ5dGVzLAoJCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoZ2VuZXJhdGVkTW9kdWxlTmFtZSwgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpCgkJCQkJCQkJCQkJCQldKSwKCQkJCQkJCQkJCQkJbW9kdWxlVGV4dCkpKSwKCQkJCQkJCQkJcHJlcGFyZWRGdW5jdGlvbnMpKTsKCQkJCQkJfSwKCQkJCQkJQTIoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tbW9uJHJlc3VsdExpc3RNYXBDb21iaW5lLAoJCQkJCQkJZnVuY3Rpb24gKGZ1bmN0aW9uRGVjbGFyYXRpb24pIHsKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSgKCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkcmFuZ2UoZnVuY3Rpb25EZWNsYXJhdGlvbikpLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCQkJCQkJJGVsbSRjb3JlJFR1cGxlJHBhaXIoZnVuY3Rpb25EZWNsYXJhdGlvbiksCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCQkJCQkJCW1hcEVycm9yU3RyaW5nRm9yRnVuY3Rpb25EZWNsYXJhdGlvbihmdW5jdGlvbkRlY2xhcmF0aW9uKSwKCQkJCQkJCQkJCQlBNCgKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcHJlcGFyZVJlcGxhY2VGdW5jdGlvbkluU291cmNlRmlsZXNNb2R1bGVUZXh0LAoJCQkJCQkJCQkJCQlzb3VyY2VEaXJzLAoJCQkJCQkJCQkJCQlzb3VyY2VGaWxlcywKCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMihtb2R1bGVGaWxlUGF0aCwgcGFyc2VkTW9kdWxlKSwKCQkJCQkJCQkJCQkJZnVuY3Rpb25EZWNsYXJhdGlvbikpKSk7CgkJCQkJCQl9LAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJCQkJCXJldHVybiAkLmRlY2xhcmF0aW9uOwoJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZSwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCQkJCQkJCXJldHVybiAkLm5hbWU7CgkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUsCgkJCQkJCQkJCQkJCQlmdW5jdGlvbiAoZnVuY3Rpb25OYW1lKSB7CgkJCQkJCQkJCQkJCQkJcmV0dXJuICFBMigkZWxtJGNvcmUkTGlzdCRtZW1iZXIsIGZ1bmN0aW9uTmFtZSwgc291cmNlRmlsZXNJbnRlcmZhY2VNb2R1bGVBZGRlZEZ1bmN0aW9uc05hbWVzKTsKCQkJCQkJCQkJCQkJCX0pKSkpKSwKCQkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGRlY2xhcmF0aW9uV2l0aFJhbmdlQXNGdW5jdGlvbkRlY2xhcmF0aW9uLCBwYXJzZWRNb2R1bGUuZGVjbGFyYXRpb25zKSkpKTsKCQkJCX0sCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRwYXJzZXJEZWFkRW5kc1RvU3RyaW5nKG1vZHVsZVRleHQpLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGFwcGVuZCgnRmFpbGVkIHRvIHBhcnNlIEVsbSBtb2R1bGUgdGV4dDogJyksCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkc3ludGF4UmFuZ2VDb3ZlcmluZ0NvbXBsZXRlU3RyaW5nKG1vZHVsZVRleHQpKSkpLAoJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlRWxtTW9kdWxlVGV4dChtb2R1bGVUZXh0KSkpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbW9kdWxlc1RvQWRkRm9yQmFzZTY0Q29kaW5nID0gX0xpc3RfZnJvbUFycmF5KAoJWwoJCSRlbG0kY29yZSRTdHJpbmckdHJpbUxlZnQoJ1xubW9kdWxlIENvbXBpbGVyR2VuZXJhdGVkLkJhc2U2NCBleHBvc2luZ1xuICAgICggZnJvbUJ5dGVzLCBmcm9tU3RyaW5nLCB0b0J5dGVzLCB0b1N0cmluZ1xuICAgICwgZW5jb2RlciwgZGVjb2RlclxuICAgIClcblxuey18IFRoaXMgcGFja2FnZSBjYW4gY29udmVydFxuW2J5dGVzXShodHRwczovL3BhY2thZ2UuZWxtLWxhbmcub3JnL3BhY2thZ2VzL2VsbS9ieXRlcy9sYXRlc3QvKVxudG8gQmFzZTY0IHN0cmluZ3MgYW5kIHZpY2UgdmVyc2EuXG5cblxuIyBDb252ZXJzaW9uXG5cbkBkb2NzIGZyb21CeXRlcywgZnJvbVN0cmluZywgdG9CeXRlcywgdG9TdHJpbmdcblxuXG4jIEJ5dGVzIEVuY29kZXIgYW5kIERlY29kZXJcblxuU2xpZ2h0bHkgbG93ZXIgbGV2ZWwgZnVuY3Rpb25zLlxuXG5bYGZyb21CeXRlc2BdKCNmcm9tQnl0ZXMpIGFuZCBbYHRvQnl0ZXNgXSgjdG9CeXRlcykgZnVuY3Rpb25zXG5hcmUgcHJldHR5IG11Y2ggd3JhcHBlcnMgYXJvdW5kIHRoZXNlIGZ1bmN0aW9ucy5cblxuQGRvY3MgZW5jb2RlciwgZGVjb2RlclxuXG4tfVxuXG5pbXBvcnQgQnl0ZXMgZXhwb3NpbmcgKEJ5dGVzKVxuaW1wb3J0IEJ5dGVzLkRlY29kZVxuaW1wb3J0IEJ5dGVzLkVuY29kZVxuaW1wb3J0IENvbXBpbGVyR2VuZXJhdGVkLkRlY29kZSBhcyBEZWNvZGVcbmltcG9ydCBDb21waWxlckdlbmVyYXRlZC5FbmNvZGUgYXMgRW5jb2RlXG5cblxuey18IENvbnZlcnQgYnl0ZXMgdG8gYSBCYXNlNjQgc3RyaW5nLlxuSWYgeW91IHdhbnQgbW9yZSBjb250cm9sIG92ZXIgdGhlIHByb2Nlc3MsIHlvdSBzaG91bGQgdXNlIFtgZGVjb2RlcmBdKCNkZWNvZGVyKS5cblxuVGhpcyBmdW5jdGlvbiBzaG91bGQgbmV2ZXIgcmV0dXJuIGBOb3RoaW5nYCwgYnV0IGl0IHVzZXNcbltgQnl0ZXMuRGVjb2RlLmRlY29kZWBdKGh0dHBzOi8vcGFja2FnZS5lbG0tbGFuZy5vcmcvcGFja2FnZXMvZWxtL2J5dGVzL2xhdGVzdC9CeXRlcy1EZWNvZGUjZGVjb2RlKSxcbndoaWNoIHJldHVybnMgYSBgTWF5YmUgU3RyaW5nYC5cblxuLX1cbmZyb21CeXRlcyA6IEJ5dGVzIC0+IE1heWJlIFN0cmluZ1xuZnJvbUJ5dGVzID1cbiAgICBEZWNvZGUuZnJvbUJ5dGVzXG5cblxuey18IEVuY29kZSBhIHN0cmluZyBpbnRvIGEgQmFzZTY0IHN0cmluZy5cblRoaXMgZnVuY3Rpb24gaXMgYSB3cmFwcGVyIGFyb3VuZCBbYGZyb21CeXRlc2BdKCNmcm9tQnl0ZXMpLlxuXG5TaW1pbGFybHksIGl0IHNob3VsZCBuZXZlciByZXR1cm4gYE5vdGhpbmdgLCBidXQgYWxhcywgW2BCeXRlcy5EZWNvZGUuZGVjb2RlYF0oaHR0cHM6Ly9wYWNrYWdlLmVsbS1sYW5nLm9yZy9wYWNrYWdlcy9lbG0vYnl0ZXMvbGF0ZXN0L0J5dGVzLURlY29kZSNkZWNvZGUpLFxud2hpY2ggW2Bmcm9tQnl0ZXNgXSgjZnJvbUJ5dGVzKSB1c2VzLCByZXR1cm5zIGEgYE1heWJlIFN0cmluZ2AuXG5cbi19XG5mcm9tU3RyaW5nIDogU3RyaW5nIC0+IE1heWJlIFN0cmluZ1xuZnJvbVN0cmluZyBzdHJpbmcgPVxuICAgIHN0cmluZ1xuICAgICAgICB8PiBCeXRlcy5FbmNvZGUuc3RyaW5nXG4gICAgICAgIHw+IEJ5dGVzLkVuY29kZS5lbmNvZGVcbiAgICAgICAgfD4gZnJvbUJ5dGVzXG5cblxuey18IENvbnZlcnQgYSBCYXNlNjQgc3RyaW5nIHRvIGJ5dGVzLlxuSWYgeW91IHdhbnQgbW9yZSBjb250cm9sIG92ZXIgdGhlIHByb2Nlc3MsIHlvdSBzaG91bGQgdXNlIFtgZW5jb2RlcmBdKCNlbmNvZGVyKS5cblxuVGhpcyBmdW5jdGlvbiBmYWlscyAocmV0dXJucyBgTm90aGluZ2ApIGlmIHlvdSBnaXZlIGl0IGFuIGludmFsaWQgQmFzZTY0IHNlcXVlbmNlLlxuXG4tfVxudG9CeXRlcyA6IFN0cmluZyAtPiBNYXliZSBCeXRlc1xudG9CeXRlcyA9XG4gICAgRW5jb2RlLnRvQnl0ZXNcblxuXG57LXwgRGVjb2RlIGEgQmFzZTY0IHN0cmluZyBpbnRvIGEgc3RyaW5nLlxuVGhpcyBmdW5jdGlvbiBpcyBhIHdyYXBwZXIgYXJvdW5kIFtgdG9CeXRlc2BdKCN0b0J5dGVzKS5cblxuSXQgd2lsbCBmYWlsIChyZXR1cm4gYE5vdGhpbmdgKSBpZiB5b3UgZ2l2ZSBpdCBhbiBpbnZhbGlkIEJhc2U2NCBzZXF1ZW5jZS5cblxuLX1cbnRvU3RyaW5nIDogU3RyaW5nIC0+IE1heWJlIFN0cmluZ1xudG9TdHJpbmcgYjY0U3RyaW5nID1cbiAgICBjYXNlIHRvQnl0ZXMgYjY0U3RyaW5nIG9mXG4gICAgICAgIE5vdGhpbmcgLT5cbiAgICAgICAgICAgIE5vdGhpbmdcblxuICAgICAgICBKdXN0IGI2NEJ5dGVzIC0+XG4gICAgICAgICAgICBCeXRlcy5EZWNvZGUuZGVjb2RlXG4gICAgICAgICAgICAgICAgKEJ5dGVzLkRlY29kZS5zdHJpbmcgKEJ5dGVzLndpZHRoIGI2NEJ5dGVzKSlcbiAgICAgICAgICAgICAgICBiNjRCeXRlc1xuXG5cbnstfCBgZGVjb2RlciB3aWR0aGAgaXMgYSBieXRlcyBkZWNvZGVyIHRoYXQgd2lsbCBjb252ZXJ0IGB3aWR0aGAgYnl0ZXMgaW50byBhXG5CYXNlNjQgc3RyaW5nLlxuXG5JdFwncyB1c2VkIGluIFtgZnJvbUJ5dGVzYF0oI2Zyb21CeXRlcyk6XG5cbiAgICBmcm9tQnl0ZXMgOiBCeXRlcyAtPiBNYXliZSBTdHJpbmdcbiAgICBmcm9tQnl0ZXMgYnl0ZXMgPVxuICAgICAgICBCeXRlcy5EZWNvZGUuZGVjb2RlIChkZWNvZGVyIChCeXRlcy53aWR0aCBieXRlcykpIGJ5dGVzXG5cbi19XG5kZWNvZGVyIDogSW50IC0+IEJ5dGVzLkRlY29kZS5EZWNvZGVyIFN0cmluZ1xuZGVjb2RlciA9XG4gICAgRGVjb2RlLmRlY29kZXJcblxuXG57LXwgYGVuY29kZXJgIHJldHVybnMgYSBieXRlcyBlbmNvZGVyLiBJdCBmYWlscyBpZiB0aGUgc3RyaW5nIHRoYXQgaXMgcGFzc2VkXG50byBpdCBpcyBub3QgYSB2YWxpZCBCYXNlNjQgc2VxdWVuY2UuXG5cbkl0XCdzIHVzZWQgaW4gW2B0b0J5dGVzYF0oI3RvQnl0ZXMpOlxuXG4gICAgdG9CeXRlcyA6IFN0cmluZyAtPiBNYXliZSBCeXRlc1xuICAgIHRvQnl0ZXMgc3RyaW5nID1cbiAgICAgICAgTWF5YmUubWFwIEJ5dGVzLkVuY29kZS5lbmNvZGUgKGVuY29kZXIgc3RyaW5nKVxuXG4tfVxuZW5jb2RlciA6IFN0cmluZyAtPiBNYXliZSBCeXRlcy5FbmNvZGUuRW5jb2RlclxuZW5jb2RlciA9XG4gICAgRW5jb2RlLmVuY29kZXJcbicpLAoJCSRlbG0kY29yZSRTdHJpbmckdHJpbUxlZnQoJ1xubW9kdWxlIENvbXBpbGVyR2VuZXJhdGVkLkVuY29kZSBleHBvc2luZyAoZW5jb2RlciwgdG9CeXRlcylcblxuaW1wb3J0IEJpdHdpc2VcbmltcG9ydCBCeXRlcyBleHBvc2luZyAoQnl0ZXMsIEVuZGlhbm5lc3MoLi4pKVxuaW1wb3J0IEJ5dGVzLkVuY29kZSBhcyBFbmNvZGUgZXhwb3NpbmcgKEVuY29kZXIpXG5cblxudG9CeXRlcyA6IFN0cmluZyAtPiBNYXliZSBCeXRlc1xudG9CeXRlcyBzdHJpbmcgPVxuICAgIE1heWJlLm1hcCBFbmNvZGUuZW5jb2RlIChlbmNvZGVyIHN0cmluZylcblxuXG5lbmNvZGVyIDogU3RyaW5nIC0+IE1heWJlIEVuY29kZS5FbmNvZGVyXG5lbmNvZGVyIHN0cmluZyA9XG4gICAgZW5jb2RlQ2h1bmtzIHN0cmluZyBbXVxuICAgICAgICB8PiBNYXliZS5tYXAgKExpc3QucmV2ZXJzZSA+PiBFbmNvZGUuc2VxdWVuY2UpXG5cblxuey18IEJpZyBwaWN0dXJlOlxuXG4gIC0gcmVhZCA0IGJhc2U2NCBjaGFyYWN0ZXJzXG4gIC0gY29udmVydCB0aGVtIHRvIDMgYnl0ZXMgKDI0IGJpdHMpXG4gIC0gZW5jb2RlIHRoZXNlIGJ5dGVzXG5cbi19XG5lbmNvZGVDaHVua3MgOiBTdHJpbmcgLT4gTGlzdCBFbmNvZGVyIC0+IE1heWJlIChMaXN0IEVuY29kZXIpXG5lbmNvZGVDaHVua3MgaW5wdXQgYWNjdW0gPVxuICAgIHstIFBlcmZvcm1hbmNlIE5vdGVcblxuICAgICAgIHNsaWNlIGFuZCB0b0xpc3QgaXMganVzdCBhcyBmYXN0IGFzIChwb3NzaWJseSBhIGxpdHRsZSBmYXN0ZXIgdGhhbikgcmVwZWF0ZWQgYFN0cmluZy51bmNvbnNgLFxuICAgICAgIGJ1dCB0aGlzIGNvZGUgaXMgbXVjaCBtb3JlIHJlYWRhYmxlXG4gICAgLX1cbiAgICBjYXNlIFN0cmluZy50b0xpc3QgKFN0cmluZy5sZWZ0IDQgaW5wdXQpIG9mXG4gICAgICAgIFtdIC0+XG4gICAgICAgICAgICBKdXN0IGFjY3VtXG5cbiAgICAgICAgWyBhLCBiLCBjLCBkIF0gLT5cbiAgICAgICAgICAgIGNhc2UgZW5jb2RlQ2hhcmFjdGVycyBhIGIgYyBkIG9mXG4gICAgICAgICAgICAgICAgSnVzdCBlbmMgLT5cbiAgICAgICAgICAgICAgICAgICAgZW5jb2RlQ2h1bmtzIChTdHJpbmcuZHJvcExlZnQgNCBpbnB1dCkgKGVuYyA6OiBhY2N1bSlcblxuICAgICAgICAgICAgICAgIE5vdGhpbmcgLT5cbiAgICAgICAgICAgICAgICAgICAgTm90aGluZ1xuXG4gICAgICAgIFsgYSwgYiwgYyBdIC0+XG4gICAgICAgICAgICBjYXNlIGVuY29kZUNoYXJhY3RlcnMgYSBiIGMgXCc9XCcgb2ZcbiAgICAgICAgICAgICAgICBOb3RoaW5nIC0+XG4gICAgICAgICAgICAgICAgICAgIE5vdGhpbmdcblxuICAgICAgICAgICAgICAgIEp1c3QgZW5jIC0+XG4gICAgICAgICAgICAgICAgICAgIEp1c3QgKGVuYyA6OiBhY2N1bSlcblxuICAgICAgICBbIGEsIGIgXSAtPlxuICAgICAgICAgICAgY2FzZSBlbmNvZGVDaGFyYWN0ZXJzIGEgYiBcJz1cJyBcJz1cJyBvZlxuICAgICAgICAgICAgICAgIE5vdGhpbmcgLT5cbiAgICAgICAgICAgICAgICAgICAgTm90aGluZ1xuXG4gICAgICAgICAgICAgICAgSnVzdCBlbmMgLT5cbiAgICAgICAgICAgICAgICAgICAgSnVzdCAoZW5jIDo6IGFjY3VtKVxuXG4gICAgICAgIF8gLT5cbiAgICAgICAgICAgIE5vdGhpbmdcblxuXG57LXwgQ29udmVydCA0IGNoYXJhY3RlcnMgdG8gMjQgYml0cyAoYXMgYW4gRW5jb2Rlcilcbi19XG5lbmNvZGVDaGFyYWN0ZXJzIDogQ2hhciAtPiBDaGFyIC0+IENoYXIgLT4gQ2hhciAtPiBNYXliZSBFbmNvZGVyXG5lbmNvZGVDaGFyYWN0ZXJzIGEgYiBjIGQgPVxuICAgIHstIFBlcmZvcm1hbmNlIG5vdGVzXG5cbiAgICAgICBXZSB1c2UgYml0c2hpZnRzIGFuZCBvdGhlciBiaXR3aXNlIG9wZXJhdG9ycyBoZXJlLiBUaGV5IGFyZSBtdWNoIGZhc3RlciB0aGFuIHRoZSBhbHRlcm5hdGl2ZXMuXG4gICAgICAgVGhpcyBtYXkgbm90IG5vcm1hbGx5IG1hdHRlciBidXQgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYSBsb3Qgc28gZXZlbiBzbWFsbCBpbmNyZWFzZXNcbiAgICAgICBpbiBlZmZpY2llbmN5IGFyZSBub3RpY2FibGVcblxuICAgICAgIFNlY29uZGx5LCB3ZSBjb21iaW5lIHR3byBgdWludDhgIGludG8gb25lIGB1aW50MTYgQkVgLiBUaGlzIGhhcyBubyBkaXJlY3Qgc3BlZWQgYmVuZWZpdFxuICAgICAgIChlbG0vYnl0ZXMgdXNlcyBhIERhdGFWaWV3LCB3aGljaCBvbmx5IG5hdGl2ZWx5IHN1cHBvcnRzIGFkZGluZy9yZWFkaW5nIHVpbnQ4KVxuICAgICAgIGJ1dCBoYXZpbmcgZmV3ZXIgbGlzdCBpdGVtcyBkZWNyZWFzZXMgIyBvZiBlbmNvZGluZyBzdGVwcyBhbmQgYWxsb2NhdGlvbixcbiAgICAgICBhbmQgaXMgdGhlcmVmb3JlIGZhc3Rlci5cbiAgICAtfVxuICAgIGlmIGlzVmFsaWRDaGFyIGEgJiYgaXNWYWxpZENoYXIgYiB0aGVuXG4gICAgICAgIGxldFxuICAgICAgICAgICAgbjEgPVxuICAgICAgICAgICAgICAgIHVuc2FmZUNvbnZlcnRDaGFyIGFcblxuICAgICAgICAgICAgbjIgPVxuICAgICAgICAgICAgICAgIHVuc2FmZUNvbnZlcnRDaGFyIGJcbiAgICAgICAgaW5cbiAgICAgICAgLS0gYD1gIGlzIHRoZSBwYWRkaW5nIGNoYXJhY3RlciwgYW5kIG11c3QgYmUgc3BlY2lhbC1jYXNlZFxuICAgICAgICAtLSBvbmx5IHRoZSBgY2AgYW5kIGBkYCBjaGFyIGFyZSBhbGxvd2VkIHRvIGJlIHBhZGRpbmdcbiAgICAgICAgY2FzZSBkIG9mXG4gICAgICAgICAgICBcJz1cJyAtPlxuICAgICAgICAgICAgICAgIGNhc2UgYyBvZlxuICAgICAgICAgICAgICAgICAgICBcJz1cJyAtPlxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpdHdpc2Uub3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChCaXR3aXNlLnNoaWZ0TGVmdEJ5IDE4IG4xKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKEJpdHdpc2Uuc2hpZnRMZWZ0QnkgMTIgbjIpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiMSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIG1hc2tpbmcgaGlnaGVyIGJpdHMgaXMgbm90IG5lZWRlZCwgRW5jb2RlLnVuc2lnbmVkSW50OCBpZ25vcmVzIGhpZ2hlciBiaXRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpdHdpc2Uuc2hpZnRSaWdodEJ5IDE2IG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgICAgICAgICAgICBKdXN0IChFbmNvZGUudW5zaWduZWRJbnQ4IGIxKVxuXG4gICAgICAgICAgICAgICAgICAgIF8gLT5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzVmFsaWRDaGFyIGMgdGhlblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuMyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNhZmVDb252ZXJ0Q2hhciBjXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCaXR3aXNlLm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKEJpdHdpc2Uub3IgKEJpdHdpc2Uuc2hpZnRMZWZ0QnkgMTggbjEpIChCaXR3aXNlLnNoaWZ0TGVmdEJ5IDEyIG4yKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQml0d2lzZS5zaGlmdExlZnRCeSA2IG4zKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpdHdpc2Uuc2hpZnRSaWdodEJ5IDggblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSnVzdCAoRW5jb2RlLnVuc2lnbmVkSW50MTYgQkUgY29tYmluZWQpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBOb3RoaW5nXG5cbiAgICAgICAgICAgIF8gLT5cbiAgICAgICAgICAgICAgICBpZiBpc1ZhbGlkQ2hhciBjICYmIGlzVmFsaWRDaGFyIGQgdGhlblxuICAgICAgICAgICAgICAgICAgICBsZXRcbiAgICAgICAgICAgICAgICAgICAgICAgIG4zID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNhZmVDb252ZXJ0Q2hhciBjXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG40ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNhZmVDb252ZXJ0Q2hhciBkXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJpdHdpc2Uub3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKEJpdHdpc2Uub3IgKEJpdHdpc2Uuc2hpZnRMZWZ0QnkgMTggbjEpIChCaXR3aXNlLnNoaWZ0TGVmdEJ5IDEyIG4yKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKEJpdHdpc2Uub3IgKEJpdHdpc2Uuc2hpZnRMZWZ0QnkgNiBuMykgbjQpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGIzID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBNYXNraW5nIHRoZSBoaWdoZXIgYml0cyBpcyBub3QgbmVlZGVkOiBFbmNvZGUudW5zaWduZWRJbnQ4IGlnbm9yZXMgaGlnaGVyIGJpdHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCaXR3aXNlLnNoaWZ0UmlnaHRCeSA4IG5cbiAgICAgICAgICAgICAgICAgICAgaW5cbiAgICAgICAgICAgICAgICAgICAgSnVzdFxuICAgICAgICAgICAgICAgICAgICAgICAgKEVuY29kZS5zZXF1ZW5jZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsgRW5jb2RlLnVuc2lnbmVkSW50MTYgQkUgY29tYmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIEVuY29kZS51bnNpZ25lZEludDggYjNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIE5vdGhpbmdcblxuICAgIGVsc2VcbiAgICAgICAgTm90aGluZ1xuXG5cbnstfCBpcyB0aGUgY2hhcmFjdGVyIGEgYmFzZTY0IGRpZ2l0P1xuXG5UaGUgYmFzZTE2IGRpZ2l0cyBhcmU6IEEtWiwgYS16LCAwLTEsIFwnK1wnIGFuZCBcJy9cJ1xuXG4tfVxuaXNWYWxpZENoYXIgOiBDaGFyIC0+IEJvb2xcbmlzVmFsaWRDaGFyIGMgPVxuICAgIGlmIENoYXIuaXNBbHBoYU51bSBjIHRoZW5cbiAgICAgICAgVHJ1ZVxuXG4gICAgZWxzZVxuICAgICAgICBjYXNlIGMgb2ZcbiAgICAgICAgICAgIFwnK1wnIC0+XG4gICAgICAgICAgICAgICAgVHJ1ZVxuXG4gICAgICAgICAgICBcJy9cJyAtPlxuICAgICAgICAgICAgICAgIFRydWVcblxuICAgICAgICAgICAgXyAtPlxuICAgICAgICAgICAgICAgIEZhbHNlXG5cblxuey18IENvbnZlcnQgYSBiYXNlNjQgY2hhcmFjdGVyL2RpZ2l0IHRvIGl0cyBpbmRleFxuXG5TZWUgYWxzbyBbV2lraXBlZGlhXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXNlNjQjQmFzZTY0X3RhYmxlKVxuXG4tfVxudW5zYWZlQ29udmVydENoYXIgOiBDaGFyIC0+IEludFxudW5zYWZlQ29udmVydENoYXIgY2hhciA9XG4gICAgey0gUGVyZm9ybWFuY2UgTm90ZVxuXG4gICAgICAgV29ya2luZyB3aXRoIHRoZSBrZXkgZGlyZWN0bHkgaXMgZmFzdGVyIHRoYW4gdXNpbmcgZS5nLiBgQ2hhci5pc0FscGhhYCBhbmQgYENoYXIuaXNVcHBlcmBcbiAgICAtfVxuICAgIGxldFxuICAgICAgICBrZXkgPVxuICAgICAgICAgICAgQ2hhci50b0NvZGUgY2hhclxuICAgIGluXG4gICAgaWYga2V5ID49IDY1ICYmIGtleSA8PSA5MCB0aGVuXG4gICAgICAgIC0tIEEtWlxuICAgICAgICBrZXkgLSA2NVxuXG4gICAgZWxzZSBpZiBrZXkgPj0gOTcgJiYga2V5IDw9IDEyMiB0aGVuXG4gICAgICAgIC0tIGEtelxuICAgICAgICAoa2V5IC0gOTcpICsgMjZcblxuICAgIGVsc2UgaWYga2V5ID49IDQ4ICYmIGtleSA8PSA1NyB0aGVuXG4gICAgICAgIC0tIDAtOVxuICAgICAgICAoa2V5IC0gNDgpICsgMjYgKyAyNlxuXG4gICAgZWxzZVxuICAgICAgICBjYXNlIGNoYXIgb2ZcbiAgICAgICAgICAgIFwnK1wnIC0+XG4gICAgICAgICAgICAgICAgNjJcblxuICAgICAgICAgICAgXCcvXCcgLT5cbiAgICAgICAgICAgICAgICA2M1xuXG4gICAgICAgICAgICBfIC0+XG4gICAgICAgICAgICAgICAgLTFcbicpLAoJCSRlbG0kY29yZSRTdHJpbmckdHJpbUxlZnQoJ1xubW9kdWxlIENvbXBpbGVyR2VuZXJhdGVkLkRlY29kZSBleHBvc2luZyAoZGVjb2RlciwgZnJvbUJ5dGVzKVxuXG5pbXBvcnQgQml0d2lzZVxuaW1wb3J0IEJ5dGVzIGV4cG9zaW5nIChCeXRlcylcbmltcG9ydCBCeXRlcy5EZWNvZGUgYXMgRGVjb2RlXG5cblxuZnJvbUJ5dGVzIDogQnl0ZXMgLT4gTWF5YmUgU3RyaW5nXG5mcm9tQnl0ZXMgYnl0ZXMgPVxuICAgIERlY29kZS5kZWNvZGUgKGRlY29kZXIgKEJ5dGVzLndpZHRoIGJ5dGVzKSkgYnl0ZXNcblxuXG5kZWNvZGVyIDogSW50IC0+IERlY29kZS5EZWNvZGVyIFN0cmluZ1xuZGVjb2RlciB3aWR0aCA9XG4gICAgRGVjb2RlLmxvb3AgeyByZW1haW5pbmcgPSB3aWR0aCwgc3RyaW5nID0gIiIgfSBsb29wSGVscFxuXG5cblxuLS0gSU5URVJOQUxTXG5cblxuey18IEJhc2U2NCB1c2VzIDYgYml0cyBwZXIgZGlnaXQgKGJlY2F1c2UgMl42ID09IDY0KVxuYW5kIGNhbiBuaWNlbHkgc3RvcmUgNCBkaWdpdHMgaW4gMjQgYml0cywgd2hpY2ggYXJlIDMgYnl0ZXMuXG5cblRoZSBkZWNvZGluZyBwcm9jZXNzIGlzIHRodXMgcm91Z2hseTpcblxuICAtIHJlYWQgYSAzLWJ5dGUgY2h1bmtcbiAgLSBleHRyYWN0IHRoZSA0IDYtYml0IHNlZ21lbnRzXG4gIC0gY29udmVydCB0aG9zZSBzZWdtZW50cyBpbnRvIGNoYXJhY3RlcnNcblxuQnV0IHRoZSBpbnB1dCBkb2VzIG5vdCBuZWVkIHRvIGhhdmUgYSBtdWx0aXBsZSBvZiA0IGNoYXJhY3RlcnMsXG5zbyBhdCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcgc29tZSBjaGFyYWN0ZXJzIGNhbiBiZSBvbWl0dGVkLlxuVGhpcyBtZWFucyB0aGVyZSBtYXkgYmUgMiBvciAxIGJ5dGVzIHJlbWFpbmluZyBhdCB0aGUgZW5kLiBXZSBoYXZlIHRvIGNvdmVyIHRob3NlIGNhc2VzIVxuXG4tfVxubG9vcEhlbHAgOiB7IHJlbWFpbmluZyA6IEludCwgc3RyaW5nIDogU3RyaW5nIH0gLT4gRGVjb2RlLkRlY29kZXIgKERlY29kZS5TdGVwIHsgcmVtYWluaW5nIDogSW50LCBzdHJpbmcgOiBTdHJpbmcgfSBTdHJpbmcpXG5sb29wSGVscCB7IHJlbWFpbmluZywgc3RyaW5nIH0gPVxuICAgIGlmIHJlbWFpbmluZyA+PSAxOCB0aGVuXG4gICAgICAgIC0tIE5vdGU6IHRoaXMgY2FzZSBpcyBoZWF2aWx5IG9wdGltaXplZC5cbiAgICAgICAgLS0gRm9yIHRoZSBnZW5lcmFsIGlkZWEgb2Ygd2hhdCB0aGlzIGZ1bmN0aW9uIGRvZXMsIHRoZSBgcmVtYWluaW5nID49IDNgIGNhc2UgaXMgbW9yZSBpbGx1c3RyYXRpdmUuXG4gICAgICAgIGRlY29kZTE4Qnl0ZXNcbiAgICAgICAgICAgIHw+IERlY29kZS5tYXBcbiAgICAgICAgICAgICAgICAoXFxyZXN1bHQgLT5cbiAgICAgICAgICAgICAgICAgICAgRGVjb2RlLkxvb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgcmVtYWluaW5nID0gcmVtYWluaW5nIC0gMThcbiAgICAgICAgICAgICAgICAgICAgICAgICwgc3RyaW5nID0gc3RyaW5nICsrIHJlc3VsdFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcblxuICAgIGVsc2UgaWYgcmVtYWluaW5nID49IDMgdGhlblxuICAgICAgICBsZXRcbiAgICAgICAgICAgIGhlbHBlciBhIGIgYyA9XG4gICAgICAgICAgICAgICAgbGV0XG4gICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIEJpdHdpc2Uub3IgKEJpdHdpc2Uub3IgKEJpdHdpc2Uuc2hpZnRMZWZ0QnkgMTYgYSkgKEJpdHdpc2Uuc2hpZnRMZWZ0QnkgOCBiKSkgY1xuICAgICAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgICAgRGVjb2RlLkxvb3BcbiAgICAgICAgICAgICAgICAgICAgeyByZW1haW5pbmcgPSByZW1haW5pbmcgLSAzXG4gICAgICAgICAgICAgICAgICAgICwgc3RyaW5nID0gc3RyaW5nICsrIGJpdHNUb0NoYXJzIGNvbWJpbmVkIDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICBpblxuICAgICAgICBEZWNvZGUubWFwMyBoZWxwZXJcbiAgICAgICAgICAgIERlY29kZS51bnNpZ25lZEludDhcbiAgICAgICAgICAgIERlY29kZS51bnNpZ25lZEludDhcbiAgICAgICAgICAgIERlY29kZS51bnNpZ25lZEludDhcblxuICAgIGVsc2UgaWYgcmVtYWluaW5nID09IDAgdGhlblxuICAgICAgICBEZWNvZGUuc3VjY2VlZCAoRGVjb2RlLkRvbmUgc3RyaW5nKVxuXG4gICAgZWxzZSBpZiByZW1haW5pbmcgPT0gMiB0aGVuXG4gICAgICAgIGxldFxuICAgICAgICAgICAgaGVscGVyIGEgYiA9XG4gICAgICAgICAgICAgICAgbGV0XG4gICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIEJpdHdpc2Uub3IgKEJpdHdpc2Uuc2hpZnRMZWZ0QnkgMTYgYSkgKEJpdHdpc2Uuc2hpZnRMZWZ0QnkgOCBiKVxuICAgICAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgICAgRGVjb2RlLkRvbmUgKHN0cmluZyArKyBiaXRzVG9DaGFycyBjb21iaW5lZCAxKVxuICAgICAgICBpblxuICAgICAgICBEZWNvZGUubWFwMiBoZWxwZXJcbiAgICAgICAgICAgIERlY29kZS51bnNpZ25lZEludDhcbiAgICAgICAgICAgIERlY29kZS51bnNpZ25lZEludDhcblxuICAgIGVsc2VcbiAgICAgICAgLS0gcmVtYWluaW5nID09IDFcbiAgICAgICAgRGVjb2RlLm1hcCAoXFxhIC0+IERlY29kZS5Eb25lIChzdHJpbmcgKysgYml0c1RvQ2hhcnMgKEJpdHdpc2Uuc2hpZnRMZWZ0QnkgMTYgYSkgMikpXG4gICAgICAgICAgICBEZWNvZGUudW5zaWduZWRJbnQ4XG5cblxuey18IE1hc2sgdGhhdCBjYW4gYmUgdXNlZCB0byBnZXQgdGhlIGxvd2VzdCA2IGJpdHMgb2YgYSBiaW5hcnkgbnVtYmVyXG4tfVxubG93ZXN0NkJpdHNNYXNrIDogSW50XG5sb3dlc3Q2Qml0c01hc2sgPVxuICAgIDYzXG5cblxuey18IFR1cm4gdGhlIGRlY29kZWQgYml0cyAoYXQgbW9zdCAyNCwgY2FuIGJlIGZld2VyIGJlY2F1c2Ugb2YgcGFkZGluZykgaW50byA0IGJhc2U2NCBjaGFyYWN0ZXJzLlxuXG4oLSAtIC0gLSAtIC0gLSAtKSgtIC0gLSAtIC0gLSAtIC0pKC0gLSAtIC0gLSAtIC0gLSlcbigtIC0gLSAtIC0gLXwtIC0gLSAtIC0gLXwtIC0gLSAtIC0gLXwtIC0gLSAtIC0gLSlcblxuLX1cbmJpdHNUb0NoYXJzIDogSW50IC0+IEludCAtPiBTdHJpbmdcbmJpdHNUb0NoYXJzIGJpdHMgbWlzc2luZyA9XG4gICAgey0gUGVyZm9ybWFuY2UgTm90ZXNcblxuICAgICAgIGBTdHJpbmcuY29uc2AgcHJvdmVkIHRvIGJlIHRoZSBmYXN0ZXN0IHdheSBvZiBjb21iaW5pbmcgY2hhcmFjdGVycyBpbnRvIGEgc3RyaW5nXG4gICAgICAgc2VlIGFsc28gaHR0cHM6Ly9naXRodWIuY29tL2RhbmZpc2hnb2xkL2Jhc2U2NC1ieXRlcy9wdWxsLzMjZGlzY3Vzc2lvbl9yMzQyMzIxOTQwXG5cbiAgICAgICBUaGUgaW5wdXQgaXMgMjQgYml0cywgd2hpY2ggd2UgaGF2ZSB0byBwYXJ0aXRpb24gaW50byA0IDYtYml0IHNlZ21lbnRzLiBXZSBhY2hpZXZlIHRoaXMgYnlcbiAgICAgICBzaGlmdGluZyB0byB0aGUgcmlnaHQgYnkgKGEgbXVsdGlwbGUgb2YpIDYgdG8gcmVtb3ZlIHVud2FudGVkIGJpdHMgb24gdGhlIHJpZ2h0LCB0aGVuIGBCaXR3aXNlLmFuZGBcbiAgICAgICB3aXRoIGAwYjExMTExMWAgKHdoaWNoIGlzIDJeNiAtIDEgb3IgNjMpIChzbywgNiAxcykgdG8gcmVtb3ZlIHVud2FudGVkIGJpdHMgb24gdGhlIGxlZnQuXG5cbiAgICAtfVxuICAgIGxldFxuICAgICAgICAtLSBhbnkgNi1iaXQgbnVtYmVyIGlzIGEgdmFsaWQgYmFzZTY0IGRpZ2l0LCBzbyB0aGlzIGlzIGFjdHVhbGx5IHNhZmVcbiAgICAgICAgcCA9XG4gICAgICAgICAgICB1bnNhZmVUb0NoYXIgKEJpdHdpc2Uuc2hpZnRSaWdodFpmQnkgMTggYml0cylcblxuICAgICAgICBxID1cbiAgICAgICAgICAgIHVuc2FmZVRvQ2hhciAoQml0d2lzZS5hbmQgKEJpdHdpc2Uuc2hpZnRSaWdodFpmQnkgMTIgYml0cykgbG93ZXN0NkJpdHNNYXNrKVxuXG4gICAgICAgIHIgPVxuICAgICAgICAgICAgdW5zYWZlVG9DaGFyIChCaXR3aXNlLmFuZCAoQml0d2lzZS5zaGlmdFJpZ2h0WmZCeSA2IGJpdHMpIGxvd2VzdDZCaXRzTWFzaylcblxuICAgICAgICBzID1cbiAgICAgICAgICAgIHVuc2FmZVRvQ2hhciAoQml0d2lzZS5hbmQgYml0cyBsb3dlc3Q2Qml0c01hc2spXG4gICAgaW5cbiAgICBjYXNlIG1pc3Npbmcgb2ZcbiAgICAgICAgLS0gY2FzZSBgMGAgaXMgdGhlIG1vc3QgY29tbW9uLCBzbyBwdXQgaXQgZmlyc3QuXG4gICAgICAgIDAgLT5cbiAgICAgICAgICAgIFN0cmluZy5jb25zIHAgKFN0cmluZy5jb25zIHEgKFN0cmluZy5jb25zIHIgKFN0cmluZy5mcm9tQ2hhciBzKSkpXG5cbiAgICAgICAgMSAtPlxuICAgICAgICAgICAgU3RyaW5nLmNvbnMgcCAoU3RyaW5nLmNvbnMgcSAoU3RyaW5nLmNvbnMgciAiPSIpKVxuXG4gICAgICAgIDIgLT5cbiAgICAgICAgICAgIFN0cmluZy5jb25zIHAgKFN0cmluZy5jb25zIHEgIj09IilcblxuICAgICAgICBfIC0+XG4gICAgICAgICAgICAiIlxuXG5cbnstfCBCYXNlNjQgaW5kZXggdG8gY2hhcmFjdGVyL2RpZ2l0XG4tfVxudW5zYWZlVG9DaGFyIDogSW50IC0+IENoYXJcbnVuc2FmZVRvQ2hhciBuID1cbiAgICBpZiBuIDw9IDI1IHRoZW5cbiAgICAgICAgLS0gdXBwZXJjYXNlIGNoYXJhY3RlcnNcbiAgICAgICAgQ2hhci5mcm9tQ29kZSAoNjUgKyBuKVxuXG4gICAgZWxzZSBpZiBuIDw9IDUxIHRoZW5cbiAgICAgICAgLS0gbG93ZXJjYXNlIGNoYXJhY3RlcnNcbiAgICAgICAgQ2hhci5mcm9tQ29kZSAoOTcgKyAobiAtIDI2KSlcblxuICAgIGVsc2UgaWYgbiA8PSA2MSB0aGVuXG4gICAgICAgIC0tIGRpZ2l0IGNoYXJhY3RlcnNcbiAgICAgICAgQ2hhci5mcm9tQ29kZSAoNDggKyAobiAtIDUyKSlcblxuICAgIGVsc2VcbiAgICAgICAgLS0gc3BlY2lhbCBjYXNlc1xuICAgICAgICBjYXNlIG4gb2ZcbiAgICAgICAgICAgIDYyIC0+XG4gICAgICAgICAgICAgICAgXCcrXCdcblxuICAgICAgICAgICAgNjMgLT5cbiAgICAgICAgICAgICAgICBcJy9cJ1xuXG4gICAgICAgICAgICBfIC0+XG4gICAgICAgICAgICAgICAgXCdcXHV7MDAwMH1cJ1xuXG5cblxuLS0gT1BUSU1JWkVEIFZFUlNJT05cblxuXG51MzJCRSA6IERlY29kZS5EZWNvZGVyIEludFxudTMyQkUgPVxuICAgIERlY29kZS51bnNpZ25lZEludDMyIEJ5dGVzLkJFXG5cblxudTE2QkUgOiBEZWNvZGUuRGVjb2RlciBJbnRcbnUxNkJFID1cbiAgICBEZWNvZGUudW5zaWduZWRJbnQxNiBCeXRlcy5CRVxuXG5cbnstfCBBIHNwZWNpYWxpemVkIHZlcnNpb24gcmVhZGluZyAxOCBieXRlcyBhdCBvbmNlXG5UbyBnZXQgYSBiZXR0ZXIgdW5kZXJzdGFuZGluZyBvZiB3aGF0IHRoaXMgY29kZSBkb2VzLCByZWFkIHRoZSBgcmVtYWluZGVyID49IDNgIGNhc2UgYWJvdmUuXG5cblRoaXMgdHJpZXMgdG8gdGFrZSB0aGUgYmlnZ2VzdCBzdGVwIHBvc3NpYmxlIHdpdGhpbiBhIGBEZWNvZGUubG9vcGAgaXRlcmF0aW9uLlxuVGhlIGlkZWEgaXMgc2ltaWxhciB0byBsb29wLXVucm9sbGluZyBpbiBsYW5ndWFnZXMgbGlrZSBjOiBhdm9pZGluZyBqdW1wcyBnaXZlcyBiZXR0ZXIgcGVyZm9ybWFuY2VcblxuQnV0IGBEZWNvZGUubG9vcGAgYWxzbyByZXF1aXJlcyB0aGF0IHRoZSBhY2N1bXVsYXRvciBpcyB3cmFwcGVkIGluIGEgYFN0ZXAgYSBiYCwgaS5lLiBpdCBhbGxvY2F0ZXMgYSBgRGVjb2RlLkxvb3AgX2BcbmZvciBldmVyeSBpdGVyYXRpb24uIEFsbG9jYXRpb24gaXMgZXhwZW5zaXZlIGluIHRpZ2h0IGxvb3BzIGxpa2UgdGhpcyBvbmUuIFNvIHRoZXJlIGlzIGEgZG91YmxlIHJlYXNvbiB0byBsaW1pdCB0aGUgbnVtYmVyXG5vZiBpdGVyYXRpb25zOiBhdm9pZGluZyBqdW1wcyBhbmQgYXZvaWRpbmcgYWxsb2NhdGlvbi5cblxuR2l2ZW4gdGhhdCBgRGVjb2RlLm1hcDVgIGlzIHRoZSBoaWdoZXN0IG9uZSBkZWZpbmVkIGJ5IGBlbG0vYnl0ZXNgIGFuZCB3ZSBuZWVkIGEgbXVsdGlwbGUgb2YgMyBieXRlcyxcbmA0ICogNCArIDIgPSAxOGAgaXMgdGhlIGJlc3Qgd2UgY2FuIGRvLlxuXG4tfVxuZGVjb2RlMThCeXRlcyA6IERlY29kZS5EZWNvZGVyIFN0cmluZ1xuZGVjb2RlMThCeXRlcyA9XG4gICAgRGVjb2RlLm1hcDUgZGVjb2RlMThIZWxwXG4gICAgICAgIHUzMkJFXG4gICAgICAgIHUzMkJFXG4gICAgICAgIHUzMkJFXG4gICAgICAgIHUzMkJFXG4gICAgICAgIHUxNkJFXG5cblxuey18IEdldCAxOCBieXRlcyAoNCB0aW1lcyAzMi1iaXQsIG9uZSAxNi1iaXQpIGFuZCBzcGxpdCB0aGVtIGludG8gMy1ieXRlIGNodW5rcy5cblxuVGhlbiBjb252ZXJ0IHRoZSAzLWJ5dGUgY2h1bmtzIHRvIGNoYXJhY3RlcnMgYW5kIHByb2R1Y2UgYSBzdHJpbmcuXG5cbi19XG5kZWNvZGUxOEhlbHAgOiBJbnQgLT4gSW50IC0+IEludCAtPiBJbnQgLT4gSW50IC0+IFN0cmluZ1xuZGVjb2RlMThIZWxwIGEgYiBjIGQgZSA9XG4gICAgbGV0XG4gICAgICAgIGNvbWJpbmVkMSA9XG4gICAgICAgICAgICBCaXR3aXNlLnNoaWZ0UmlnaHRaZkJ5IDggYVxuXG4gICAgICAgIGNvbWJpbmVkMiA9XG4gICAgICAgICAgICBCaXR3aXNlLm9yXG4gICAgICAgICAgICAgICAgKEJpdHdpc2UuYW5kIDB4RkYgYSB8PiBCaXR3aXNlLnNoaWZ0TGVmdEJ5IDE2KVxuICAgICAgICAgICAgICAgIChCaXR3aXNlLnNoaWZ0UmlnaHRaZkJ5IDE2IGIpXG5cbiAgICAgICAgY29tYmluZWQzID1cbiAgICAgICAgICAgIEJpdHdpc2Uub3JcbiAgICAgICAgICAgICAgICAoQml0d2lzZS5hbmQgMHhGRkZGIGIgfD4gQml0d2lzZS5zaGlmdExlZnRCeSA4KVxuICAgICAgICAgICAgICAgIChCaXR3aXNlLnNoaWZ0UmlnaHRaZkJ5IDI0IGMpXG5cbiAgICAgICAgY29tYmluZWQ0ID1cbiAgICAgICAgICAgIEJpdHdpc2UuYW5kIDB4MDBGRkZGRkYgY1xuXG4gICAgICAgIGNvbWJpbmVkNSA9XG4gICAgICAgICAgICBCaXR3aXNlLnNoaWZ0UmlnaHRaZkJ5IDggZFxuXG4gICAgICAgIGNvbWJpbmVkNiA9XG4gICAgICAgICAgICBCaXR3aXNlLm9yXG4gICAgICAgICAgICAgICAgKEJpdHdpc2UuYW5kIDB4RkYgZCB8PiBCaXR3aXNlLnNoaWZ0TGVmdEJ5IDE2KVxuICAgICAgICAgICAgICAgIGVcbiAgICBpblxuICAgIC0tIHRoZSBvcmRlciBpcyBjb3VudGVyLWludHVpdGl2ZSBiZWNhdXNlIGBTdHJpbmcuY29uc2AgaXMgdXNlZCBpbiBiaXRzVG9DaGFyU3BlY2lhbGl6ZWQuXG4gICAgIiJcbiAgICAgICAgfD4gYml0c1RvQ2hhclNwZWNpYWxpemVkIGNvbWJpbmVkNiBjb21iaW5lZDUgY29tYmluZWQ0XG4gICAgICAgIHw+IGJpdHNUb0NoYXJTcGVjaWFsaXplZCBjb21iaW5lZDMgY29tYmluZWQyIGNvbWJpbmVkMVxuXG5cbnstfCBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYml0c1RvQ2hhciB0aGF0IGhhbmRsZXMgMyAyNC1iaXQgaW50ZWdlcnMgYXQgb25jZS5cblxuVGhpcyB3YXMgZG9uZSB0byBsaW1pdCB0aGUgbnVtYmVyIG9mIGZ1bmN0aW9uIGNhbGxzLiBXaGVuIGRvaW5nIGJpdHdpc2UgbWFuaXB1bGF0aW9ucyAod2hpY2ggYXJlIHZlcnkgZWZmaWNpZW50KSwgdGhlXG5vdmVyaGVhZCBvZiBmdW5jdGlvbiBjYWxscyAtLSBzb21ldGhpbmcgd2Ugbm9ybWFsbHkgZG9uXCd0IHJlYWxseSB0aGluayBhYm91dCAtLSBzdGFydHMgdG8gbWF0dGVyLlxuXG4tfVxuYml0c1RvQ2hhclNwZWNpYWxpemVkIDogSW50IC0+IEludCAtPiBJbnQgLT4gU3RyaW5nIC0+IFN0cmluZ1xuYml0c1RvQ2hhclNwZWNpYWxpemVkIGJpdHMxIGJpdHMyIGJpdHMzIGFjY3VtID1cbiAgICBsZXRcbiAgICAgICAgLS0gQklUUyAxXG4gICAgICAgIHAgPVxuICAgICAgICAgICAgdW5zYWZlVG9DaGFyIChCaXR3aXNlLnNoaWZ0UmlnaHRaZkJ5IDE4IGJpdHMxKVxuXG4gICAgICAgIHEgPVxuICAgICAgICAgICAgdW5zYWZlVG9DaGFyIChCaXR3aXNlLmFuZCAoQml0d2lzZS5zaGlmdFJpZ2h0WmZCeSAxMiBiaXRzMSkgbG93ZXN0NkJpdHNNYXNrKVxuXG4gICAgICAgIHIgPVxuICAgICAgICAgICAgdW5zYWZlVG9DaGFyIChCaXR3aXNlLmFuZCAoQml0d2lzZS5zaGlmdFJpZ2h0WmZCeSA2IGJpdHMxKSBsb3dlc3Q2Qml0c01hc2spXG5cbiAgICAgICAgcyA9XG4gICAgICAgICAgICB1bnNhZmVUb0NoYXIgKEJpdHdpc2UuYW5kIGJpdHMxIGxvd2VzdDZCaXRzTWFzaylcblxuICAgICAgICAtLSBCSVRTIDJcbiAgICAgICAgYSA9XG4gICAgICAgICAgICB1bnNhZmVUb0NoYXIgKEJpdHdpc2Uuc2hpZnRSaWdodFpmQnkgMTggYml0czIpXG5cbiAgICAgICAgYiA9XG4gICAgICAgICAgICB1bnNhZmVUb0NoYXIgKEJpdHdpc2UuYW5kIChCaXR3aXNlLnNoaWZ0UmlnaHRaZkJ5IDEyIGJpdHMyKSBsb3dlc3Q2Qml0c01hc2spXG5cbiAgICAgICAgYyA9XG4gICAgICAgICAgICB1bnNhZmVUb0NoYXIgKEJpdHdpc2UuYW5kIChCaXR3aXNlLnNoaWZ0UmlnaHRaZkJ5IDYgYml0czIpIGxvd2VzdDZCaXRzTWFzaylcblxuICAgICAgICBkID1cbiAgICAgICAgICAgIHVuc2FmZVRvQ2hhciAoQml0d2lzZS5hbmQgYml0czIgbG93ZXN0NkJpdHNNYXNrKVxuXG4gICAgICAgIC0tIEJJVFMgM1xuICAgICAgICB4ID1cbiAgICAgICAgICAgIHVuc2FmZVRvQ2hhciAoQml0d2lzZS5zaGlmdFJpZ2h0WmZCeSAxOCBiaXRzMylcblxuICAgICAgICB5ID1cbiAgICAgICAgICAgIHVuc2FmZVRvQ2hhciAoQml0d2lzZS5hbmQgKEJpdHdpc2Uuc2hpZnRSaWdodFpmQnkgMTIgYml0czMpIGxvd2VzdDZCaXRzTWFzaylcblxuICAgICAgICB6ID1cbiAgICAgICAgICAgIHVuc2FmZVRvQ2hhciAoQml0d2lzZS5hbmQgKEJpdHdpc2Uuc2hpZnRSaWdodFpmQnkgNiBiaXRzMykgbG93ZXN0NkJpdHNNYXNrKVxuXG4gICAgICAgIHcgPVxuICAgICAgICAgICAgdW5zYWZlVG9DaGFyIChCaXR3aXNlLmFuZCBiaXRzMyBsb3dlc3Q2Qml0c01hc2spXG4gICAgaW5cbiAgICAtLSBQZXJmb3JtYW5jZTogVGhpcyBpcyB0aGUgZmFzdGVzdCB3YXkgdG8gY3JlYXRlIGEgc3RyaW5nIGZyb20gY2hhcmFjdGVycy5cbiAgICAtLSBzZWUgYWxzbyBodHRwczovL2dpdGh1Yi5jb20vZGFuZmlzaGdvbGQvYmFzZTY0LWJ5dGVzL3B1bGwvMyNkaXNjdXNzaW9uX3IzNDIzMjE5NDBcbiAgICAtLSBjb25zIGFkZHMgb24gdGhlIGxlZnQsIHNvIGNoYXJhY3RlcnMgYXJlIGFkZGVkIGluIHJldmVyc2Ugb3JkZXIuXG4gICAgYWNjdW1cbiAgICAgICAgfD4gU3RyaW5nLmNvbnMgc1xuICAgICAgICB8PiBTdHJpbmcuY29ucyByXG4gICAgICAgIHw+IFN0cmluZy5jb25zIHFcbiAgICAgICAgfD4gU3RyaW5nLmNvbnMgcFxuICAgICAgICB8PiBTdHJpbmcuY29ucyBkXG4gICAgICAgIHw+IFN0cmluZy5jb25zIGNcbiAgICAgICAgfD4gU3RyaW5nLmNvbnMgYlxuICAgICAgICB8PiBTdHJpbmcuY29ucyBhXG4gICAgICAgIHw+IFN0cmluZy5jb25zIHdcbiAgICAgICAgfD4gU3RyaW5nLmNvbnMgelxuICAgICAgICB8PiBTdHJpbmcuY29ucyB5XG4gICAgICAgIHw+IFN0cmluZy5jb25zIHhcbicpCgldKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJG1vZHVsZXNUb0FkZEZvckJ5dGVzQ29kaW5nID0gX0xpc3RfZnJvbUFycmF5KAoJWwoJCSRlbG0kY29yZSRTdHJpbmckdHJpbUxlZnQoJ1xubW9kdWxlIENvbXBpbGVyR2VuZXJhdGVkLkVuY29kZUJ5dGVzIGV4cG9zaW5nICguLilcblxuaW1wb3J0IEJ5dGVzXG5pbXBvcnQgQnl0ZXMuRW5jb2RlXG5cblxuYnl0ZXNfZW5jb2Rlcl9mcm9tX3VpbnQzMl91aW50OCA6IHsgdWludDMyIDogTGlzdCBJbnQsIHVpbnQ4IDogTGlzdCBJbnQgfSAtPiBCeXRlcy5FbmNvZGUuRW5jb2RlclxuYnl0ZXNfZW5jb2Rlcl9mcm9tX3VpbnQzMl91aW50OCB7IHVpbnQzMiwgdWludDggfSA9XG4gICAgWyB1aW50MzIgfD4gTGlzdC5tYXAgKEJ5dGVzLkVuY29kZS51bnNpZ25lZEludDMyIEJ5dGVzLkJFKVxuICAgICwgdWludDggfD4gTGlzdC5tYXAgQnl0ZXMuRW5jb2RlLnVuc2lnbmVkSW50OFxuICAgIF1cbiAgICAgICAgfD4gTGlzdC5jb25jYXRcbiAgICAgICAgfD4gQnl0ZXMuRW5jb2RlLnNlcXVlbmNlXG5cbicpCgldKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGFzQ29tcGxldGVseUxvd2VyZWRFbG1BcHAgPSBGMigKCWZ1bmN0aW9uIChlbnRyeVBvaW50Q2xhc3NlcywgX2FyZ3VtZW50cykgewoJCXZhciBfdjAgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRmaW5kU291cmNlRGlyZWN0b3JpZXMoX2FyZ3VtZW50cyk7CgkJaWYgKF92MC4kID09PSAnRXJyJykgewoJCQl2YXIgZXJyID0gX3YwLmE7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRMb2NhdGVkSW5Tb3VyY2VGaWxlcywKCQkJCQkJe2ZpbGVQYXRoOiBfYXJndW1lbnRzLmNvbXBpbGF0aW9uUm9vdEZpbGVQYXRoLCBsb2NhdGlvbkluTW9kdWxlVGV4dDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUmFuZ2UkZW1wdHlSYW5nZX0sCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJE90aGVyQ29tcGlsYXRpb25FcnJvcignRmFpbGVkIHRvIGZpbmQgc291cmNlIGRpcmVjdG9yaWVzOiAnICsgZXJyKSkKCQkJCQldKSk7CgkJfSBlbHNlIHsKCQkJdmFyIHNvdXJjZURpcnMgPSBfdjAuYTsKCQkJdmFyIHNvdXJjZU1vZHVsZXMgPSAkZWxtJGNvcmUkRGljdCRmcm9tTGlzdCgKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlck1hcCwKCQkJCQlmdW5jdGlvbiAoX3Y0KSB7CgkJCQkJCXZhciBmaWxlUGF0aCA9IF92NC5hOwoJCQkJCQl2YXIgbW9kdWxlUmVzdWx0ID0gX3Y0LmI7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCQkkZWxtJGNvcmUkVHVwbGUkcGFpcihmaWxlUGF0aCksCgkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JHRvTWF5YmUobW9kdWxlUmVzdWx0KSk7CgkJCQkJfSwKCQkJCQkkZWxtJGNvcmUkRGljdCR0b0xpc3QoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGVsbU1vZHVsZXNEaWN0RnJvbUFwcEZpbGVzKF9hcmd1bWVudHMuc291cmNlRmlsZXMpKSkpOwoJCQl2YXIgdXNlZENvbXBpbGF0aW9uSW50ZXJmYWNlTW9kdWxlcyA9IEEzKAoJCQkJJGVsbSRjb3JlJERpY3QkZm9sZGwsCgkJCQlGMigKCQkJCQlmdW5jdGlvbiAoX3YxLCBzb3VyY2VNb2R1bGUpIHsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRTZXQkdW5pb24oCgkJCQkJCQkkZWxtJGNvcmUkU2V0JGZyb21MaXN0KAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsCgkJCQkJCQkJCWZ1bmN0aW9uIChjb21waWxhdGlvbkludGVyZmFjZVByZWZpeCkgewoJCQkJCQkJCQkJdmFyIF92MiA9IHNvdXJjZU1vZHVsZS5tb2R1bGVOYW1lOwoJCQkJCQkJCQkJaWYgKCFfdjIuYikgewoJCQkJCQkJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCXZhciBmaXJzdERpcmVjdG9yeSA9IF92Mi5hOwoJCQkJCQkJCQkJCXZhciBhZnRlckNvbW1vblByZWZpeCA9IF92Mi5iOwoJCQkJCQkJCQkJCWlmICghX1V0aWxzX2VxKGZpcnN0RGlyZWN0b3J5LCBjb21waWxhdGlvbkludGVyZmFjZVByZWZpeCkpIHsKCQkJCQkJCQkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQl2YXIgX3YzID0gJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShhZnRlckNvbW1vblByZWZpeCk7CgkJCQkJCQkJCQkJCWlmIChfdjMuYikgewoJCQkJCQkJCQkJCQkJdmFyIGxhc3RQYXRoQ29tcG9uZW50ID0gX3YzLmE7CgkJCQkJCQkJCQkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCQkJbGFzdFBhdGhDb21wb25lbnQsCgkJCQkJCQkJCQkJCQkJCUEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy4nLCBhZnRlckNvbW1vblByZWZpeCkKCQkJCQkJCQkJCQkJCQldKTsKCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0sCgkJCQkJCQkJCV9hcmd1bWVudHMuY29tcGlsYXRpb25JbnRlcmZhY2VFbG1Nb2R1bGVOYW1lUHJlZml4ZXMpKSk7CgkJCQkJfSksCgkJCQkkZWxtJGNvcmUkU2V0JGVtcHR5LAoJCQkJc291cmNlTW9kdWxlcyk7CgkJCXZhciBjb21waWxhdGlvbkludGVyZmFjZU1vZHVsZURlcGVuZGVuY2llcyA9ICRlbG0kY29yZSREaWN0JGZyb21MaXN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMignU291cmNlRmlsZXMnLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRtb2R1bGVzVG9BZGRGb3JCeXRlc0NvZGluZyksCgkJCQkJCV9VdGlsc19UdXBsZTIoJ0VsbU1ha2UnLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRtb2R1bGVzVG9BZGRGb3JCeXRlc0NvZGluZyksCgkJCQkJCV9VdGlsc19UdXBsZTIoJ0dlbmVyYXRlSnNvbkNvbnZlcnRlcnMnLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRtb2R1bGVzVG9BZGRGb3JCYXNlNjRDb2RpbmcpCgkJCQkJXSkpOwoJCQl2YXIgbW9kdWxlc1RvQWRkID0gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLAoJCQkJCWZ1bmN0aW9uIChtb2R1bGVOYW1lKSB7CgkJCQkJCXJldHVybiBBMigkZWxtJGNvcmUkRGljdCRnZXQsIG1vZHVsZU5hbWUsIGNvbXBpbGF0aW9uSW50ZXJmYWNlTW9kdWxlRGVwZW5kZW5jaWVzKTsKCQkJCQl9LAoJCQkJCSRlbG0kY29yZSRTZXQkdG9MaXN0KHVzZWRDb21waWxhdGlvbkludGVyZmFjZU1vZHVsZXMpKSk7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRSZXN1bHQkYW5kVGhlbiwKCQkJCUEyKAoJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxvd2VyZWRGb3JDb21waWxhdGlvblJvb3QsCgkJCQkJZW50cnlQb2ludENsYXNzZXMsCgkJCQkJe2NvbXBpbGF0aW9uUm9vdEZpbGVQYXRoOiBfYXJndW1lbnRzLmNvbXBpbGF0aW9uUm9vdEZpbGVQYXRoLCBpbnRlcmZhY2VUb0hvc3RSb290TW9kdWxlTmFtZTogX2FyZ3VtZW50cy5pbnRlcmZhY2VUb0hvc3RSb290TW9kdWxlTmFtZSwgb3JpZ2luYWxTb3VyY2VNb2R1bGVzOiBzb3VyY2VNb2R1bGVzfSksCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkUmVzdWx0JGFuZFRoZW4sCgkJCQkJQTQoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGFwcGx5TG93ZXJpbmdVbmRlclByZWZpeGVzLAoJCQkJCQlBMigkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRtYXBFbG1NYWtlTW9kdWxlVGV4dCwgc291cmNlRGlycywgX2FyZ3VtZW50cy5kZXBlbmRlbmNpZXMpLAoJCQkJCQl7CgkJCQkJCQltb2R1bGVOYW1lRW5kOiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWydFbG1NYWtlJ10pLAoJCQkJCQkJcHJlZml4ZXM6IEEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJHNwbGl0KCcuJyksCgkJCQkJCQkJX2FyZ3VtZW50cy5jb21waWxhdGlvbkludGVyZmFjZUVsbU1vZHVsZU5hbWVQcmVmaXhlcykKCQkJCQkJfSwKCQkJCQkJZnVuY3Rpb24gKGNvbnRleHQpIHsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJE90aGVyQ29tcGlsYXRpb25FcnJvciwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbG9jYXRlZEluU291cmNlRmlsZXNGcm9tSnVzdEZpbGVQYXRoKGNvbnRleHQpLAoJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRzaW5nbGV0b24pKTsKCQkJCQkJfSwKCQkJCQkJc291cmNlRGlycyksCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJG1hcExvY2F0ZWRJblNvdXJjZUZpbGVzKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJE90aGVyQ29tcGlsYXRpb25FcnJvciksCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRzaW5nbGV0b24pLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRSZXN1bHQkYW5kVGhlbiwKCQkJCQkJCUE0KAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGFwcGx5TG93ZXJpbmdVbmRlclByZWZpeGVzLAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJG1hcEpzb25Db252ZXJ0ZXJzTW9kdWxlVGV4dCgKCQkJCQkJCQkJe29yaWdpbmFsU291cmNlTW9kdWxlczogc291cmNlTW9kdWxlcywgc291cmNlRGlyczogc291cmNlRGlyc30pLAoJCQkJCQkJCXsKCQkJCQkJCQkJbW9kdWxlTmFtZUVuZDogX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWydHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJ10pLAoJCQkJCQkJCQlwcmVmaXhlczogQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJHNwbGl0KCcuJyksCgkJCQkJCQkJCQlfYXJndW1lbnRzLmNvbXBpbGF0aW9uSW50ZXJmYWNlRWxtTW9kdWxlTmFtZVByZWZpeGVzKQoJCQkJCQkJCX0sCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbG9jYXRlZEluU291cmNlRmlsZXNGcm9tSnVzdEZpbGVQYXRoLAoJCQkJCQkJCXNvdXJjZURpcnMpLAoJCQkJCQkJQTUoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkYXBwbHlMb3dlcmluZ1VuZGVyUHJlZml4ZXMsCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkbWFwU291cmNlRmlsZXNNb2R1bGVUZXh0KHNvdXJjZURpcnMpLAoJCQkJCQkJCXsKCQkJCQkJCQkJbW9kdWxlTmFtZUVuZDogX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWydTb3VyY2VGaWxlcyddKSwKCQkJCQkJCQkJcHJlZml4ZXM6IEEyKAoJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRzcGxpdCgnLicpLAoJCQkJCQkJCQkJX2FyZ3VtZW50cy5jb21waWxhdGlvbkludGVyZmFjZUVsbU1vZHVsZU5hbWVQcmVmaXhlcykKCQkJCQkJCQl9LAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxvY2F0ZWRJblNvdXJjZUZpbGVzRnJvbUp1c3RGaWxlUGF0aCwKCQkJCQkJCQlzb3VyY2VEaXJzLAoJCQkJCQkJCUEzKCRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGFkZE1vZHVsZXNGcm9tVGV4dFRvQXBwRmlsZXMsIHNvdXJjZURpcnMsIG1vZHVsZXNUb0FkZCwgX2FyZ3VtZW50cy5zb3VyY2VGaWxlcykpKSkpKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZEJhY2tlbmRJbnRlcmZhY2UkRWxtTWFrZU91dHB1dFR5cGVKcyA9IHskOiAnRWxtTWFrZU91dHB1dFR5cGVKcyd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kTG93ZXJpbmdDb21wbGV0ZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdMb3dlcmluZ0NvbXBsZXRlJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRMb3dlcmluZ0NvbnRpbnVlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xvd2VyaW5nQ29udGludWUnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJExvd2VyaW5nRXJyb3IgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnTG93ZXJpbmdFcnJvcicsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbWFwRmlsZXNUb1JlcXVlc3RUb0JhY2tlbmRTdHJ1Y3R1cmUgPSBmdW5jdGlvbiAobWFwQ29udGVudCkgewoJcmV0dXJuICRlbG0kY29yZSRMaXN0JG1hcCgKCQlmdW5jdGlvbiAoX3YwKSB7CgkJCXZhciBwYXRoID0gX3YwLmE7CgkJCXZhciBjb250ZW50ID0gX3YwLmI7CgkJCXJldHVybiB7CgkJCQljb250ZW50QmFzZTY0OiBtYXBDb250ZW50KGNvbnRlbnQpLAoJCQkJcGF0aDogcGF0aAoJCQl9OwoJCX0pOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kY29udGludWVMb3dlcmluZyA9IEYyKAoJZnVuY3Rpb24gKGRlcGVuZGVuY2llc0Zyb21Db21wbGV0ZWRJdGVyYXRpb25zLCBjb21waWxhdGlvbk9yaWdpbikgewoJCXZhciBiYXNlNjRGcm9tQnl0ZXMgPSBBMigKCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJJGRhbmZpc2hnb2xkJGJhc2U2NF9ieXRlcyRCYXNlNjQkZnJvbUJ5dGVzLAoJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQoJ0Vycm9yIGVuY29kaW5nIGluIGJhc2U2NCcpKTsKCQl2YXIgX3YwID0gY29tcGlsYXRpb25PcmlnaW4ubG93ZXJlZEVsbUFwcEZyb21EZXBlbmRlbmNpZXMoZGVwZW5kZW5jaWVzRnJvbUNvbXBsZXRlZEl0ZXJhdGlvbnMpOwoJCWlmIChfdjAuJCA9PT0gJ0VycicpIHsKCQkJdmFyIGxvd2VyaW5nRXJyb3JzID0gX3YwLmE7CgkJCXZhciBlcnJvcnNNaXNzaW5nRGVwZW5kZW5jeUVsbU1ha2UgPSBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlck1hcCwKCQkJCWZ1bmN0aW9uIChsb2NhdGVkRXJyb3IpIHsKCQkJCQl2YXIgZXJyb3IgPSBsb2NhdGVkRXJyb3IuYjsKCQkJCQlpZiAoZXJyb3IuJCA9PT0gJ01pc3NpbmdEZXBlbmRlbmN5RXJyb3InKSB7CgkJCQkJCXZhciBtaXNzaW5nRGVwZW5kZW5jeUVsbU1ha2UgPSBlcnJvci5hLmE7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChtaXNzaW5nRGVwZW5kZW5jeUVsbU1ha2UpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQl9CgkJCQl9LAoJCQkJbG93ZXJpbmdFcnJvcnMpOwoJCQl2YXIgX3YxID0gJGVsbSRjb3JlJExpc3QkaGVhZChlcnJvcnNNaXNzaW5nRGVwZW5kZW5jeUVsbU1ha2UpOwoJCQlpZiAoX3YxLiQgPT09ICdKdXN0JykgewoJCQkJdmFyIG1pc3NpbmdEZXBlbmRlbmN5RWxtTWFrZSA9IF92MS5hOwoJCQkJdmFyIG91dHB1dFR5cGUgPSBmdW5jdGlvbiAoKSB7CgkJCQkJdmFyIF92MiA9IG1pc3NpbmdEZXBlbmRlbmN5RWxtTWFrZS5vdXRwdXRUeXBlOwoJCQkJCWlmIChfdjIuJCA9PT0gJ0VsbU1ha2VPdXRwdXRUeXBlSHRtbCcpIHsKCQkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRGcm9udGVuZEJhY2tlbmRJbnRlcmZhY2UkRWxtTWFrZU91dHB1dFR5cGVIdG1sOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmRCYWNrZW5kSW50ZXJmYWNlJEVsbU1ha2VPdXRwdXRUeXBlSnM7CgkJCQkJfQoJCQkJfSgpOwoJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJExvd2VyaW5nQ29udGludWUoCgkJCQkJewoJCQkJCQllbG1NYWtlUmVxdWVzdDogewoJCQkJCQkJZW50cnlQb2ludEZpbGVQYXRoRnJvbVdvcmtpbmdEaXJlY3Rvcnk6IG1pc3NpbmdEZXBlbmRlbmN5RWxtTWFrZS5lbnRyeVBvaW50RmlsZVBhdGgsCgkJCQkJCQlmaWxlczogQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbWFwRmlsZXNUb1JlcXVlc3RUb0JhY2tlbmRTdHJ1Y3R1cmUsCgkJCQkJCQkJYmFzZTY0RnJvbUJ5dGVzLAoJCQkJCQkJCSRlbG0kY29yZSREaWN0JHRvTGlzdChtaXNzaW5nRGVwZW5kZW5jeUVsbU1ha2UuZmlsZXMpKSwKCQkJCQkJCW1ha2VPcHRpb25EZWJ1ZzogbWlzc2luZ0RlcGVuZGVuY3lFbG1NYWtlLmVuYWJsZURlYnVnLAoJCQkJCQkJb3V0cHV0VHlwZTogb3V0cHV0VHlwZSwKCQkJCQkJCXdvcmtpbmdEaXJlY3RvcnlQYXRoOiBfTGlzdF9OaWwKCQkJCQkJfSwKCQkJCQkJZm9yRGVwZW5kZW5jeUVsbU1ha2VSZXF1ZXN0OiBtaXNzaW5nRGVwZW5kZW5jeUVsbU1ha2UKCQkJCQl9KTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRMb3dlcmluZ0NvbXBsZXRlKAoJCQkJCXsKCQkJCQkJZWxtTWFrZVJlcXVlc3Q6IGNvbXBpbGF0aW9uT3JpZ2luLnJlcXVlc3RGcm9tVXNlciwKCQkJCQkJZWxtTWFrZVJlc3VsdDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsCgkJCQkJCWxvd2VyaW5nUmVzdWx0OiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJExvd2VyaW5nRXJyb3IobG93ZXJpbmdFcnJvcnMpKQoJCQkJCX0pOwoJCQl9CgkJfSBlbHNlIHsKCQkJdmFyIGNvbXBsZXRlZExvd2VyaW5nID0gX3YwLmE7CgkJCXZhciByZXF1ZXN0RnJvbVVzZXIgPSBjb21waWxhdGlvbk9yaWdpbi5yZXF1ZXN0RnJvbVVzZXI7CgkJCXZhciBmaWxlcyA9IEEyKAoJCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyLAoJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJGVsbSRjb3JlJFR1cGxlJGZpcnN0LCAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRpbmNsdWRlRmlsZVBhdGhJbkVsbU1ha2VSZXF1ZXN0KSwKCQkJCSRlbG0kY29yZSREaWN0JHRvTGlzdChjb21wbGV0ZWRMb3dlcmluZykpOwoJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kTG93ZXJpbmdDb21wbGV0ZSgKCQkJCXsKCQkJCQllbG1NYWtlUmVxdWVzdDogX1V0aWxzX3VwZGF0ZSgKCQkJCQkJcmVxdWVzdEZyb21Vc2VyLAoJCQkJCQl7CgkJCQkJCQlmaWxlczogQTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbWFwRmlsZXNUb1JlcXVlc3RUb0JhY2tlbmRTdHJ1Y3R1cmUsIGJhc2U2NEZyb21CeXRlcywgZmlsZXMpCgkJCQkJCX0pLAoJCQkJCWVsbU1ha2VSZXN1bHQ6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLAoJCQkJCWxvd2VyaW5nUmVzdWx0OiAkZWxtJGNvcmUkUmVzdWx0JE9rKF9VdGlsc19UdXBsZTApCgkJCQl9KTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEJsb2JNYWtlRW50cnlQb2ludCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdCbG9iTWFrZUVudHJ5UG9pbnQnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJENsYXNzaWNNYWtlRW50cnlQb2ludCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdDbGFzc2ljTWFrZUVudHJ5UG9pbnQnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGVudHJ5UG9pbnRDbGFzc0Zyb21TZXRPZkVxdWFsbHlQcm9jZXNzZWROYW1lcyA9IEYzKAoJZnVuY3Rpb24gKHN1cHBvcnRlZERlY2xhcmF0aW9uTmFtZXMsIHByb2Nlc3NFbnRyeVBvaW50LCBzb3VyY2VNb2R1bGUpIHsKCQl2YXIgZGVjbGFyYXRpb25zTmFtZXMgPSBBMigKCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLAoJCQlmdW5jdGlvbiAoZGVjbGFyYXRpb24pIHsKCQkJCWlmIChkZWNsYXJhdGlvbi4kID09PSAnRnVuY3Rpb25EZWNsYXJhdGlvbicpIHsKCQkJCQl2YXIgZnVuY3Rpb25EZWNsYXJhdGlvbiA9IGRlY2xhcmF0aW9uLmE7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZSgKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJHZhbHVlKGZ1bmN0aW9uRGVjbGFyYXRpb24uZGVjbGFyYXRpb24pLm5hbWUpLAoJCQkJCQkJZGVjbGFyYXRpb24pKTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJfQoJCQl9LAoJCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUsIHNvdXJjZU1vZHVsZS5wYXJzZWRTeW50YXguZGVjbGFyYXRpb25zKSk7CgkJdmFyIF92MCA9ICRlbG0kY29yZSRMaXN0JGhlYWQoCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkkZWxtJGNvcmUkVHVwbGUkZmlyc3QsCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCSRlbG0kY29yZSRTZXQkbWVtYmVyLAoJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGFwUihzdXBwb3J0ZWREZWNsYXJhdGlvbk5hbWVzKSkpLAoJCQkJZGVjbGFyYXRpb25zTmFtZXMpKTsKCQlpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoCgkJCQl7c3VwcG9ydGVkRGVjbGFyYXRpb25OYW1lczogc3VwcG9ydGVkRGVjbGFyYXRpb25OYW1lc30pOwoJCX0gZWxzZSB7CgkJCXZhciBfdjEgPSBfdjAuYTsKCQkJdmFyIGRlY2xhcmF0aW9uID0gX3YxLmI7CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJcHJvY2Vzc0VudHJ5UG9pbnQoZGVjbGFyYXRpb24pKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGVudHJ5UG9pbnRDbGFzc0Zyb21TZXRPZkVxdWFsbHlQcm9jZXNzZWRGdW5jdGlvbk5hbWVzID0gRjMoCglmdW5jdGlvbiAoc3VwcG9ydGVkRGVjbGFyYXRpb25OYW1lcywgcHJvY2Vzc0VudHJ5UG9pbnQsIHNvdXJjZU1vZHVsZSkgewoJCXJldHVybiBBMygKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZW50cnlQb2ludENsYXNzRnJvbVNldE9mRXF1YWxseVByb2Nlc3NlZE5hbWVzLAoJCQlzdXBwb3J0ZWREZWNsYXJhdGlvbk5hbWVzLAoJCQlmdW5jdGlvbiAoZGVjbGFyYXRpb24pIHsKCQkJCWlmIChkZWNsYXJhdGlvbi4kID09PSAnRnVuY3Rpb25EZWNsYXJhdGlvbicpIHsKCQkJCQl2YXIgZnVuY3Rpb25EZWNsYXJhdGlvbiA9IGRlY2xhcmF0aW9uLmE7CgkJCQkJcmV0dXJuIHByb2Nlc3NFbnRyeVBvaW50KGZ1bmN0aW9uRGVjbGFyYXRpb24pOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gRjIoCgkJCQkJCWZ1bmN0aW9uIChjb25maWcsIF92MSkgewoJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWwoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRMb2NhdGVkSW5Tb3VyY2VGaWxlcywKCQkJCQkJCQkJCXtmaWxlUGF0aDogY29uZmlnLmNvbXBpbGF0aW9uUm9vdEZpbGVQYXRoLCBsb2NhdGlvbkluTW9kdWxlVGV4dDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUmFuZ2UkZW1wdHlSYW5nZX0sCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRPdGhlckNvbXBpbGF0aW9uRXJyb3IoJ0lzIG5vdCBhIGZ1bmN0aW9uIGRlY2xhcmF0aW9uJykpCgkJCQkJCQkJCV0pKTsKCQkJCQkJfSk7CgkJCQl9CgkJCX0sCgkJCXNvdXJjZU1vZHVsZSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxvd2VyZWRGb3JCbG9iRW50cnlQb2ludCA9IEYyKAoJZnVuY3Rpb24gKF92MCwgc291cmNlRmlsZXMpIHsKCQl2YXIgY29tcGlsYXRpb25Sb290RmlsZVBhdGggPSBfdjAuY29tcGlsYXRpb25Sb290RmlsZVBhdGg7CgkJdmFyIGNvbXBpbGF0aW9uUm9vdE1vZHVsZSA9IF92MC5jb21waWxhdGlvblJvb3RNb2R1bGU7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJZnVuY3Rpb24gKHJvb3RNb2R1bGVUZXh0KSB7CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQlBMygKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkdXBkYXRlRmlsZUNvbnRlbnRBdFBhdGgsCgkJCQkJCSRlbG0kY29yZSRCYXNpY3MkYWx3YXlzKAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZmlsZUNvbnRlbnRGcm9tU3RyaW5nKHJvb3RNb2R1bGVUZXh0KSksCgkJCQkJCWNvbXBpbGF0aW9uUm9vdEZpbGVQYXRoLAoJCQkJCQlzb3VyY2VGaWxlcyksCgkJCQkJewoJCQkJCQllbG1NYWtlSmF2YVNjcmlwdEZ1bmN0aW9uTmFtZTogQTIoCgkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQknLicsCgkJCQkJCQlfVXRpbHNfYXAoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlJG1vZHVsZU5hbWUoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoY29tcGlsYXRpb25Sb290TW9kdWxlLnBhcnNlZFN5bnRheC5tb2R1bGVEZWZpbml0aW9uKSksCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbJ2Jsb2JfbWFpbl9hc19iYXNlNjQnXSkpKQoJCQkJCX0pOwoJCQl9LAoJCQlBMigKCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IsCgkJCQlmdW5jdGlvbiAoZXJyKSB7CgkJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJQTIoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRMb2NhdGVkSW5Tb3VyY2VGaWxlcywKCQkJCQkJCXtmaWxlUGF0aDogY29tcGlsYXRpb25Sb290RmlsZVBhdGgsIGxvY2F0aW9uSW5Nb2R1bGVUZXh0OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRSYW5nZSRlbXB0eVJhbmdlfSwKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJE90aGVyQ29tcGlsYXRpb25FcnJvcignRmFpbGVkIHRvIGFkZCBpbXBvcnQ6ICcgKyBlcnIpKQoJCQkJCQldKTsKCQkJCX0sCgkJCQlBMigKCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRhZGRJbXBvcnRzSW5FbG1Nb2R1bGVUZXh0LAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbJ0Jhc2U2NCddKSwKCQkJCQkJCSRlbG0kY29yZSRNYXliZSROb3RoaW5nKQoJCQkJCQldKSwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQknXG5cbicsCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQljb21waWxhdGlvblJvb3RNb2R1bGUuZmlsZVRleHQsCgkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyR0cmltKCdcbmJsb2JfbWFpbl9hc19iYXNlNjQgOiBTdHJpbmdcbmJsb2JfbWFpbl9hc19iYXNlNjQgPVxuICAgIGJsb2JNYWluXG4gICAgICAgIHw+IEJhc2U2NC5mcm9tQnl0ZXNcbiAgICAgICAgfD4gTWF5YmUud2l0aERlZmF1bHQgIkZhaWxlZCB0byBlbmNvZGUgYXMgQmFzZTY0IlxuXG5cbnstfCBTdXBwb3J0IGZ1bmN0aW9uLWxldmVsIGRlYWQgY29kZSBlbGltaW5hdGlvbiAoPGh0dHBzOi8vZWxtLWxhbmcub3JnL2Jsb2cvc21hbGwtYXNzZXRzLXdpdGhvdXQtdGhlLWhlYWRhY2hlPikgRWxtIGNvZGUgbmVlZGVkIHRvIGluZm9ybSB0aGUgRWxtIGNvbXBpbGVyIGFib3V0IG91ciBlbnRyeSBwb2ludHMuXG4tfVxubWFpbiA6IFByb2dyYW0gSW50IHt9IFN0cmluZ1xubWFpbiA9XG4gICAgUGxhdGZvcm0ud29ya2VyXG4gICAgICAgIHsgaW5pdCA9IGFsd2F5cyAoIHt9LCBDbWQubm9uZSApXG4gICAgICAgICwgdXBkYXRlID0gYWx3YXlzIChhbHdheXMgKCBibG9iX21haW5fYXNfYmFzZTY0IHw+IGFsd2F5cyB7fSwgQ21kLm5vbmUgKSlcbiAgICAgICAgLCBzdWJzY3JpcHRpb25zID0gYWx3YXlzIFN1Yi5ub25lXG4gICAgICAgIH1cbicpCgkJCQkJCQldKSkpKSk7Cgl9KTsKdmFyICRlbG0kY29yZSREaWN0JHNpbmdsZXRvbiA9IEYyKAoJZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsKCQlyZXR1cm4gQTUoJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLCAkZWxtJGNvcmUkRGljdCRCbGFjaywga2V5LCB2YWx1ZSwgJGVsbSRjb3JlJERpY3QkUkJFbXB0eV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkUkJFbXB0eV9lbG1fYnVpbHRpbik7Cgl9KTsKdmFyICRlbG0kY29yZSRTZXQkc2luZ2xldG9uID0gZnVuY3Rpb24gKGtleSkgewoJcmV0dXJuICRlbG0kY29yZSRTZXQkU2V0X2VsbV9idWlsdGluKAoJCUEyKCRlbG0kY29yZSREaWN0JHNpbmdsZXRvbiwga2V5LCBfVXRpbHNfVHVwbGUwKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRkZWZhdWx0RW50cnlQb2ludHMgPSBfTGlzdF9mcm9tQXJyYXkoCglbCgkJQTIoCgkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZW50cnlQb2ludENsYXNzRnJvbVNldE9mRXF1YWxseVByb2Nlc3NlZEZ1bmN0aW9uTmFtZXMsCgkJJGVsbSRjb3JlJFNldCRzaW5nbGV0b24oJ2Jsb2JNYWluJyksCgkJRjIoCgkJCWZ1bmN0aW9uIChfdjAsIGVudHJ5UG9pbnRDb25maWcpIHsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGxvd2VyZWRGb3JCbG9iRW50cnlQb2ludChlbnRyeVBvaW50Q29uZmlnKSwKCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCgKCQkJCQkJZnVuY3Rpb24gKF92MSkgewoJCQkJCQkJdmFyIGNvbXBpbGVkRmlsZXMgPSBfdjEuYTsKCQkJCQkJCXZhciBlbnRyeVBvaW50ID0gX3YxLmI7CgkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCWNvbXBpbGVkRmlsZXM6IGNvbXBpbGVkRmlsZXMsCgkJCQkJCQkJcm9vdE1vZHVsZUVudHJ5UG9pbnRLaW5kOiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRCbG9iTWFrZUVudHJ5UG9pbnQoZW50cnlQb2ludCkKCQkJCQkJCX07CgkJCQkJCX0pKTsKCQkJfSkpLAoJCUEyKAoJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJGVudHJ5UG9pbnRDbGFzc0Zyb21TZXRPZkVxdWFsbHlQcm9jZXNzZWRGdW5jdGlvbk5hbWVzLAoJCSRlbG0kY29yZSRTZXQkc2luZ2xldG9uKCdtYWluJyksCgkJRjMoCgkJCWZ1bmN0aW9uIChfdjIsIGVudHJ5UG9pbnRDb25maWcsIGNvbXBpbGVkRmlsZXMpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKAoJCQkJCXsKCQkJCQkJY29tcGlsZWRGaWxlczogY29tcGlsZWRGaWxlcywKCQkJCQkJcm9vdE1vZHVsZUVudHJ5UG9pbnRLaW5kOiAkYXV0aG9yJHByb2plY3QkQ29tcGlsZUVsbUFwcCRDbGFzc2ljTWFrZUVudHJ5UG9pbnQoCgkJCQkJCQl7CgkJCQkJCQkJZWxtTWFrZUphdmFTY3JpcHRGdW5jdGlvbk5hbWU6IEEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQkJCScuJywKCQkJCQkJCQkJX1V0aWxzX2FwKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlJG1vZHVsZU5hbWUoCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZShlbnRyeVBvaW50Q29uZmlnLmNvbXBpbGF0aW9uUm9vdE1vZHVsZS5wYXJzZWRTeW50YXgubW9kdWxlRGVmaW5pdGlvbikpLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsnbWFpbiddKSkpCgkJCQkJCQl9KQoJCQkJCX0pOwoJCQl9KSkKCV0pOwp2YXIgJGVsbV9jb21tdW5pdHkkbGlzdF9leHRyYSRMaXN0JEV4dHJhJGluaXRzID0gQTIoCgkkZWxtJGNvcmUkTGlzdCRmb2xkciwKCUYyKAoJCWZ1bmN0aW9uIChlLCBhY2MpIHsKCQkJcmV0dXJuIEEyKAoJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCV9MaXN0X05pbCwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zKGUpLAoJCQkJCWFjYykpOwoJCX0pLAoJX0xpc3RfZnJvbUFycmF5KAoJCVtfTGlzdF9OaWxdKSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRwcmVwYXJlQ29tcGlsZUZvckZpbGVPcGVuZWRJbkVkaXRvciA9IGZ1bmN0aW9uICh3b3Jrc3BhY2UpIHsKCXZhciBfdjAgPSB3b3Jrc3BhY2UuZWRpdGluZzsKCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfSBlbHNlIHsKCQl2YXIgZWRpdGluZyA9IF92MC5hOwoJCXZhciBmaWxlc0JlZm9yZUxvd2VyaW5nID0gJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJGZsYXRMaXN0T2ZCbG9ic0Zyb21GaWxlVHJlZU5vZGUod29ya3NwYWNlLmZpbGVUcmVlKTsKCQl2YXIgZGlyZWN0b3J5Q29udGFpbnNFbG1Kc29uID0gZnVuY3Rpb24gKGRpcmVjdG9yeVBhdGgpIHsKCQkJcmV0dXJuIEEyKAoJCQkJJGVsbSRjb3JlJExpc3QkbWVtYmVyLAoJCQkJX1V0aWxzX2FwKAoJCQkJCWRpcmVjdG9yeVBhdGgsCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbJ2VsbS5qc29uJ10pKSwKCQkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJGVsbSRjb3JlJFR1cGxlJGZpcnN0LCBmaWxlc0JlZm9yZUxvd2VyaW5nKSk7CgkJfTsKCQl2YXIgX3YxID0gZWRpdGluZy5maWxlTG9jYXRpb247CgkJdmFyIGVudHJ5UG9pbnREaXJlY3RvcnlQYXRoID0gX3YxLmE7CgkJdmFyIGVudHJ5UG9pbnRGaWxlTmFtZSA9IF92MS5iOwoJCXZhciB3b3JraW5nRGlyZWN0b3J5UGF0aCA9IEEyKAoJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCV9MaXN0X05pbCwKCQkJJGVsbSRjb3JlJExpc3QkaGVhZCgKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlciwKCQkJCQlkaXJlY3RvcnlDb250YWluc0VsbUpzb24sCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JHNvcnRCeSwKCQkJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJGVsbSRjb3JlJExpc3QkbGVuZ3RoLCAkZWxtJGNvcmUkQmFzaWNzJG5lZ2F0ZSksCgkJCQkJCSRlbG1fY29tbXVuaXR5JGxpc3RfZXh0cmEkTGlzdCRFeHRyYSRpbml0cyhlbnRyeVBvaW50RGlyZWN0b3J5UGF0aCkpKSkpOwoJCXZhciBlbnRyeVBvaW50RmlsZVBhdGggPSBfVXRpbHNfYXAoCgkJCWVudHJ5UG9pbnREaXJlY3RvcnlQYXRoLAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbZW50cnlQb2ludEZpbGVOYW1lXSkpOwoJCXZhciByZXF1ZXN0RnJvbVVzZXJJZGVudGl0eSA9IHsKCQkJZW50cnlQb2ludEZpbGVQYXRoRnJvbVdvcmtpbmdEaXJlY3Rvcnk6IEEyKAoJCQkJJGVsbSRjb3JlJExpc3QkZHJvcCwKCQkJCSRlbG0kY29yZSRMaXN0JGxlbmd0aCh3b3JraW5nRGlyZWN0b3J5UGF0aCksCgkJCQllbnRyeVBvaW50RmlsZVBhdGgpLAoJCQlmaWxlczogQTIoCgkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRtYXBGaWxlc1RvUmVxdWVzdFRvQmFja2VuZFN0cnVjdHVyZSwKCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJcmV0dXJuICQuYXNCYXNlNjQ7CgkJCQl9LAoJCQkJZmlsZXNCZWZvcmVMb3dlcmluZyksCgkJCW1ha2VPcHRpb25EZWJ1Zzogd29ya3NwYWNlLmVuYWJsZUluc3BlY3Rpb25PbkNvbXBpbGUsCgkJCW91dHB1dFR5cGU6ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZEJhY2tlbmRJbnRlcmZhY2UkRWxtTWFrZU91dHB1dFR5cGVIdG1sLAoJCQl3b3JraW5nRGlyZWN0b3J5UGF0aDogd29ya2luZ0RpcmVjdG9yeVBhdGgKCQl9OwoJCXZhciBjb21waWxlID0gZnVuY3Rpb24gKF92MikgewoJCQl2YXIgZmlsZXNCZWZvcmVMb3dlcmluZ09ubHlBc0J5dGVzID0gQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkkZWxtJGNvcmUkVHVwbGUkbWFwU2Vjb25kKAoJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCXJldHVybiAkLmFzQnl0ZXM7CgkJCQkJfSksCgkJCQlmaWxlc0JlZm9yZUxvd2VyaW5nKTsKCQkJdmFyIGxvd2VyZWRFbG1BcHBGcm9tRGVwZW5kZW5jaWVzID0gZnVuY3Rpb24gKGRlcGVuZGVuY2llcykgewoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCXJldHVybiAkLmNvbXBpbGVkRmlsZXM7CgkJCQkJfSwKCQkJCQlBMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkYXNDb21wbGV0ZWx5TG93ZXJlZEVsbUFwcCwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkZGVmYXVsdEVudHJ5UG9pbnRzLAoJCQkJCQl7CgkJCQkJCQljb21waWxhdGlvbkludGVyZmFjZUVsbU1vZHVsZU5hbWVQcmVmaXhlczogX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsnQ29tcGlsYXRpb25JbnRlcmZhY2UnXSksCgkJCQkJCQljb21waWxhdGlvblJvb3RGaWxlUGF0aDogZW50cnlQb2ludEZpbGVQYXRoLAoJCQkJCQkJZGVwZW5kZW5jaWVzOiBkZXBlbmRlbmNpZXMsCgkJCQkJCQlpbnRlcmZhY2VUb0hvc3RSb290TW9kdWxlTmFtZTogX0xpc3RfTmlsLAoJCQkJCQkJc291cmNlRmlsZXM6ICRlbG0kY29yZSREaWN0JGZyb21MaXN0KGZpbGVzQmVmb3JlTG93ZXJpbmdPbmx5QXNCeXRlcykKCQkJCQkJfSkpOwoJCQl9OwoJCQl2YXIgY29tcGlsYXRpb25PcmlnaW4gPSB7bG93ZXJlZEVsbUFwcEZyb21EZXBlbmRlbmNpZXM6IGxvd2VyZWRFbG1BcHBGcm9tRGVwZW5kZW5jaWVzLCByZXF1ZXN0RnJvbVVzZXI6IHJlcXVlc3RGcm9tVXNlcklkZW50aXR5fTsKCQkJdmFyIGxvd2VyaW5nSXRlcmF0aW9uQ29tcGxldGUgPSBBMigkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRjb250aW51ZUxvd2VyaW5nLCBfTGlzdF9OaWwsIGNvbXBpbGF0aW9uT3JpZ2luKTsKCQkJcmV0dXJuIHtkZXBlbmRlbmNpZXNGcm9tQ29tcGxldGVkSXRlcmF0aW9uczogX0xpc3RfTmlsLCBsb3dlcmluZ0xhc3RJdGVyYXRpb246IGxvd2VyaW5nSXRlcmF0aW9uQ29tcGxldGUsIG9yaWdpbjogY29tcGlsYXRpb25PcmlnaW59OwoJCX07CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQl7Y29tcGlsZTogY29tcGlsZSwgcmVxdWVzdEZyb21Vc2VySWRlbnRpdHk6IHJlcXVlc3RGcm9tVXNlcklkZW50aXR5fSk7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRCYWNrZW5kRWxtTWFrZVJlc3BvbnNlRXZlbnQgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnQmFja2VuZEVsbU1ha2VSZXNwb25zZUV2ZW50JywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZEJhY2tlbmRJbnRlcmZhY2UkRWxtTWFrZVJlcXVlc3QgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRWxtTWFrZVJlcXVlc3QnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHJlcXVlc3RUb0JhY2tlbmRDbWRGcm9tQ29tcGlsYXRpb25JblByb2dyZXNzID0gZnVuY3Rpb24gKGNvbXBpbGF0aW9uKSB7Cgl2YXIganNvbkRlY29kZXIgPSBmdW5jdGlvbiAoYmFja2VuZFJlc3BvbnNlKSB7CgkJaWYgKGJhY2tlbmRSZXNwb25zZS4kID09PSAnRWxtTWFrZVJlc3BvbnNlJykgewoJCQl2YXIgZWxtTWFrZVJlc3BvbnNlID0gYmFja2VuZFJlc3BvbnNlLmE7CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZChlbG1NYWtlUmVzcG9uc2UpOwoJCX0gZWxzZSB7CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiREZWNvZGUkZmFpbCgnVW5leHBlY3RlZCByZXNwb25zZScpOwoJCX0KCX07Cgl2YXIgZWxtTWFrZVJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7CgkJdmFyIF92MCA9IGNvbXBpbGF0aW9uLmxvd2VyaW5nTGFzdEl0ZXJhdGlvbjsKCQlpZiAoX3YwLiQgPT09ICdMb3dlcmluZ0NvbnRpbnVlJykgewoJCQl2YXIgbG93ZXJpbmdDb250aW51ZSA9IF92MC5hOwoJCQlyZXR1cm4gbG93ZXJpbmdDb250aW51ZS5lbG1NYWtlUmVxdWVzdDsKCQl9IGVsc2UgewoJCQl2YXIgbG93ZXJpbmdDb21wbGV0ZSA9IF92MC5hOwoJCQlyZXR1cm4gbG93ZXJpbmdDb21wbGV0ZS5lbG1NYWtlUmVxdWVzdDsKCQl9Cgl9KCk7CglyZXR1cm4gQTMoCgkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcmVxdWVzdFRvQXBpQ21kLAoJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZEJhY2tlbmRJbnRlcmZhY2UkRWxtTWFrZVJlcXVlc3QoZWxtTWFrZVJlcXVlc3QpLAoJCWpzb25EZWNvZGVyLAoJCUEyKAoJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCgkZWxtJGNvcmUkVHVwbGUkc2Vjb25kKSwKCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kQmFja2VuZEVsbU1ha2VSZXNwb25zZUV2ZW50KGVsbU1ha2VSZXF1ZXN0KSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kY29tcGlsZUZpbGVPcGVuZWRJbkVkaXRvciA9IGZ1bmN0aW9uIChzdGF0ZUJlZm9yZSkgewoJdmFyIF92MCA9ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHByZXBhcmVDb21waWxlRm9yRmlsZU9wZW5lZEluRWRpdG9yKHN0YXRlQmVmb3JlKTsKCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJcmV0dXJuIF9VdGlsc19UdXBsZTIoc3RhdGVCZWZvcmUsICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7Cgl9IGVsc2UgewoJCXZhciBwcmVwYXJlZENvbXBpbGF0aW9uID0gX3YwLmE7CgkJdmFyIGNvbXBpbGF0aW9uID0gcHJlcGFyZWRDb21waWxhdGlvbi5jb21waWxlKF9VdGlsc19UdXBsZTApOwoJCXZhciByZXF1ZXN0VG9CYWNrZW5kQ21kID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcmVxdWVzdFRvQmFja2VuZENtZEZyb21Db21waWxhdGlvbkluUHJvZ3Jlc3MoY29tcGlsYXRpb24pOwoJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQlfVXRpbHNfdXBkYXRlKAoJCQkJc3RhdGVCZWZvcmUsCgkJCQl7CgkJCQkJY29tcGlsYXRpb246ICRlbG0kY29yZSRNYXliZSRKdXN0KGNvbXBpbGF0aW9uKSwKCQkJCQlzeW50YXhJbnNwZWN0aW9uOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZwoJCQkJfSksCgkJCXJlcXVlc3RUb0JhY2tlbmRDbWQpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRFcnJvclNldmVyaXR5ID0geyQ6ICdFcnJvclNldmVyaXR5J307CnZhciAkZWxtJHJlZ2V4JFJlZ2V4JE1hdGNoID0gRjQoCglmdW5jdGlvbiAobWF0Y2gsIGluZGV4LCBudW1iZXIsIHN1Ym1hdGNoZXMpIHsKCQlyZXR1cm4ge2luZGV4OiBpbmRleCwgbWF0Y2g6IG1hdGNoLCBudW1iZXI6IG51bWJlciwgc3VibWF0Y2hlczogc3VibWF0Y2hlc307Cgl9KTsKdmFyICRlbG0kcmVnZXgkUmVnZXgkZnJvbVN0cmluZ1dpdGggPSBfUmVnZXhfZnJvbVN0cmluZ1dpdGg7CnZhciAkZWxtJHJlZ2V4JFJlZ2V4JGZyb21TdHJpbmcgPSBmdW5jdGlvbiAoc3RyaW5nKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRyZWdleCRSZWdleCRmcm9tU3RyaW5nV2l0aCwKCQl7Y2FzZUluc2Vuc2l0aXZlOiBmYWxzZSwgbXVsdGlsaW5lOiBmYWxzZX0sCgkJc3RyaW5nKTsKfTsKdmFyICRlbG0kcmVnZXgkUmVnZXgkbmV2ZXIgPSBfUmVnZXhfbmV2ZXI7CnZhciAkZWxtX2NvbW11bml0eSRzdHJpbmdfZXh0cmEkU3RyaW5nJEV4dHJhJHJlZ2V4RnJvbVN0cmluZyA9IEEyKAoJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCSRlbG0kcmVnZXgkUmVnZXgkZnJvbVN0cmluZywKCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCgkZWxtJHJlZ2V4JFJlZ2V4JG5ldmVyKSk7CnZhciAkZWxtJHJlZ2V4JFJlZ2V4JHJlcGxhY2UgPSBfUmVnZXhfcmVwbGFjZUF0TW9zdChfUmVnZXhfaW5maW5pdHkpOwp2YXIgJGVsbV9jb21tdW5pdHkkc3RyaW5nX2V4dHJhJFN0cmluZyRFeHRyYSRjaGFuZ2VDYXNlID0gRjIoCglmdW5jdGlvbiAobXV0YXRvciwgd29yZCkgewoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQknJywKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJCXZhciBoZWFkID0gX3YwLmE7CgkJCQkJdmFyIHRhaWwgPSBfdjAuYjsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kY29yZSRTdHJpbmckY29ucywKCQkJCQkJbXV0YXRvcihoZWFkKSwKCQkJCQkJdGFpbCk7CgkJCQl9LAoJCQkJJGVsbSRjb3JlJFN0cmluZyR1bmNvbnMod29yZCkpKTsKCX0pOwp2YXIgJGVsbV9jb21tdW5pdHkkc3RyaW5nX2V4dHJhJFN0cmluZyRFeHRyYSR0b1NlbnRlbmNlQ2FzZSA9IGZ1bmN0aW9uICh3b3JkKSB7CglyZXR1cm4gQTIoJGVsbV9jb21tdW5pdHkkc3RyaW5nX2V4dHJhJFN0cmluZyRFeHRyYSRjaGFuZ2VDYXNlLCAkZWxtJGNvcmUkQ2hhciR0b1VwcGVyLCB3b3JkKTsKfTsKdmFyICRlbG1fY29tbXVuaXR5JHN0cmluZ19leHRyYSRTdHJpbmckRXh0cmEkdG9UaXRsZUNhc2UgPSBmdW5jdGlvbiAod3MpIHsKCXZhciB1cHBlcmNhc2VNYXRjaCA9IEEyKAoJCSRlbG0kcmVnZXgkUmVnZXgkcmVwbGFjZSwKCQkkZWxtX2NvbW11bml0eSRzdHJpbmdfZXh0cmEkU3RyaW5nJEV4dHJhJHJlZ2V4RnJvbVN0cmluZygnXFx3KycpLAoJCUEyKAoJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQlmdW5jdGlvbiAoJCkgewoJCQkJcmV0dXJuICQubWF0Y2g7CgkJCX0sCgkJCSRlbG1fY29tbXVuaXR5JHN0cmluZ19leHRyYSRTdHJpbmckRXh0cmEkdG9TZW50ZW5jZUNhc2UpKTsKCXJldHVybiBBMygKCQkkZWxtJHJlZ2V4JFJlZ2V4JHJlcGxhY2UsCgkJJGVsbV9jb21tdW5pdHkkc3RyaW5nX2V4dHJhJFN0cmluZyRFeHRyYSRyZWdleEZyb21TdHJpbmcoJ14oW2Etel0pfFxccysoW2Etel0pJyksCgkJQTIoCgkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCWZ1bmN0aW9uICgkKSB7CgkJCQlyZXR1cm4gJC5tYXRjaDsKCQkJfSwKCQkJdXBwZXJjYXNlTWF0Y2gpLAoJCXdzKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGVsbUVkaXRvclByb2JsZW1EaXNwbGF5VGl0bGVGcm9tUmVwb3J0VGl0bGUgPSBBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLCAkZWxtJGNvcmUkU3RyaW5nJHRvTG93ZXIsICRlbG1fY29tbXVuaXR5JHN0cmluZ19leHRyYSRTdHJpbmckRXh0cmEkdG9UaXRsZUNhc2UpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZWxtTWFrZVJlcG9ydFRleHRGcm9tTWVzc2FnZUl0ZW0gPSBmdW5jdGlvbiAobWVzc2FnZUl0ZW0pIHsKCWlmIChtZXNzYWdlSXRlbS4kID09PSAnRWxtTWFrZVJlcG9ydE1lc3NhZ2VMaXN0SXRlbVBsYWluJykgewoJCXZhciB0ZXh0ID0gbWVzc2FnZUl0ZW0uYTsKCQlyZXR1cm4gdGV4dDsKCX0gZWxzZSB7CgkJdmFyIHN0eWxlZCA9IG1lc3NhZ2VJdGVtLmE7CgkJcmV0dXJuIHN0eWxlZC5zdHJpbmc7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlZGl0b3JEb2N1bWVudE1hcmtlckZyb21FbG1NYWtlUHJvYmxlbSA9IGZ1bmN0aW9uIChlbG1NYWtlUHJvYmxlbSkgewoJcmV0dXJuIHsKCQllbmRDb2x1bW46IGVsbU1ha2VQcm9ibGVtLnJlZ2lvbi5lbmQuY29sdW1uLAoJCWVuZExpbmVOdW1iZXI6IGVsbU1ha2VQcm9ibGVtLnJlZ2lvbi5lbmQubGluZSwKCQltZXNzYWdlOiAnIyAnICsgKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGVsbUVkaXRvclByb2JsZW1EaXNwbGF5VGl0bGVGcm9tUmVwb3J0VGl0bGUoZWxtTWFrZVByb2JsZW0udGl0bGUpICsgKCdcbicgKyBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknJywKCQkJQTIoJGVsbSRjb3JlJExpc3QkbWFwLCAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlbG1NYWtlUmVwb3J0VGV4dEZyb21NZXNzYWdlSXRlbSwgZWxtTWFrZVByb2JsZW0ubWVzc2FnZSkpKSksCgkJc2V2ZXJpdHk6ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkRXJyb3JTZXZlcml0eSwKCQlzdGFydENvbHVtbjogZWxtTWFrZVByb2JsZW0ucmVnaW9uLnN0YXJ0LmNvbHVtbiwKCQlzdGFydExpbmVOdW1iZXI6IGVsbU1ha2VQcm9ibGVtLnJlZ2lvbi5zdGFydC5saW5lCgl9Owp9Owp2YXIgJGVsbV9jb21tdW5pdHkkbGlzdF9leHRyYSRMaXN0JEV4dHJhJHRhaWxzSGVscCA9IEYyKAoJZnVuY3Rpb24gKGUsIGxpc3QpIHsKCQlpZiAobGlzdC5iKSB7CgkJCXZhciB4ID0gbGlzdC5hOwoJCQl2YXIgeHMgPSBsaXN0LmI7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBlLCB4KSwKCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHgsIHhzKSk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIF9MaXN0X05pbDsKCQl9Cgl9KTsKdmFyICRlbG1fY29tbXVuaXR5JGxpc3RfZXh0cmEkTGlzdCRFeHRyYSR0YWlscyA9IEEyKAoJJGVsbSRjb3JlJExpc3QkZm9sZHIsCgkkZWxtX2NvbW11bml0eSRsaXN0X2V4dHJhJExpc3QkRXh0cmEkdGFpbHNIZWxwLAoJX0xpc3RfZnJvbUFycmF5KAoJCVtfTGlzdF9OaWxdKSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRmaWxlUGF0aEZyb21FeGlzdGluZ1BhdGhzQW5kRWxtTWFrZVJlcG9ydFBhdGhTdHJpbmcgPSBGMigKCWZ1bmN0aW9uIChleGlzdGluZ1BhdGhzLCBlbG1NYWtlUmVwb3J0UGF0aFN0cmluZykgewoJCXZhciBwYXRoU2VnbWVudHMgPSBBMigKCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkkZWxtJGNvcmUkU3RyaW5nJHNwbGl0KCdcXCcpLAoJCQlBMigkZWxtJGNvcmUkU3RyaW5nJHNwbGl0LCAnLycsIGVsbU1ha2VSZXBvcnRQYXRoU3RyaW5nKSk7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCXBhdGhTZWdtZW50cywKCQkJJGVsbSRjb3JlJExpc3QkaGVhZCgKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlciwKCQkJCQlmdW5jdGlvbiAocGF0aEVuZCkgewoJCQkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkbWVtYmVyLCBwYXRoRW5kLCBleGlzdGluZ1BhdGhzKTsKCQkJCQl9LAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXIsCgkJCQkJCUEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsICRlbG0kY29yZSRMaXN0JGlzRW1wdHksICRlbG0kY29yZSRCYXNpY3Mkbm90KSwKCQkJCQkJJGVsbV9jb21tdW5pdHkkbGlzdF9leHRyYSRMaXN0JEV4dHJhJHRhaWxzKHBhdGhTZWdtZW50cykpKSkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlZGl0b3JEb2N1bWVudE1hcmtlcnNGcm9tRWxtTWFrZVJlcG9ydCA9IEYyKAoJZnVuY3Rpb24gKF92MCwgbWF5YmVSZXBvcnRGcm9tSnNvbikgewoJCXZhciBlbG1NYWtlUmVxdWVzdCA9IF92MC5lbG1NYWtlUmVxdWVzdDsKCQl2YXIgZmlsZU9wZW5JbkVkaXRvciA9IF92MC5maWxlT3BlbkluRWRpdG9yOwoJCWlmIChtYXliZVJlcG9ydEZyb21Kc29uLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCX0gZWxzZSB7CgkJCXZhciByZXBvcnRGcm9tSnNvbiA9IG1heWJlUmVwb3J0RnJvbUpzb24uYTsKCQkJdmFyIGZpbGVPcGVuZWRJbkVkaXRvckJhc2U2NCA9IGZpbGVPcGVuSW5FZGl0b3IuYi5hc0Jhc2U2NDsKCQkJdmFyIF92MiA9IGZpbGVPcGVuSW5FZGl0b3IuYTsKCQkJdmFyIGRpcmVjdG9yeVBhdGggPSBfdjIuYTsKCQkJdmFyIGZpbGVOYW1lID0gX3YyLmI7CgkJCXZhciBmaWxlUGF0aE9wZW5JbkVkaXRvciA9IF9VdGlsc19hcCgKCQkJCWRpcmVjdG9yeVBhdGgsCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJW2ZpbGVOYW1lXSkpOwoJCQl2YXIgX3YzID0gJGVsbSRjb3JlJExpc3QkaGVhZCgKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlciwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCXJldHVybiAkLnBhdGg7CgkJCQkJCX0sCgkJCQkJCSRlbG0kY29yZSRCYXNpY3MkZXEoZmlsZVBhdGhPcGVuSW5FZGl0b3IpKSwKCQkJCQllbG1NYWtlUmVxdWVzdC5maWxlcykpOwoJCQlpZiAoX3YzLiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJfSBlbHNlIHsKCQkJCXZhciByZXF1ZXN0RmlsZSA9IF92My5hOwoJCQkJaWYgKCFfVXRpbHNfZXEocmVxdWVzdEZpbGUuY29udGVudEJhc2U2NCwgZmlsZU9wZW5lZEluRWRpdG9yQmFzZTY0KSkgewoJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQl9IGVsc2UgewoJCQkJCWlmIChyZXBvcnRGcm9tSnNvbi4kID09PSAnRXJyJykgewoJCQkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciByZXBvcnQgPSByZXBvcnRGcm9tSnNvbi5hOwoJCQkJCQlpZiAocmVwb3J0LiQgPT09ICdFcnJvclJlcG9ydCcpIHsKCQkJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgY29tcGlsZUVycm9ycyA9IHJlcG9ydC5hOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlZGl0b3JEb2N1bWVudE1hcmtlckZyb21FbG1NYWtlUHJvYmxlbSwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJCQkJcmV0dXJuICQucHJvYmxlbXM7CgkJCQkJCQkJCX0sCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJCQkJCQlyZXR1cm4gJC5wYXRoOwoJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGZpbGVQYXRoRnJvbUV4aXN0aW5nUGF0aHNBbmRFbG1NYWtlUmVwb3J0UGF0aFN0cmluZygKCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCQkJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJCQkJCQkJCQlyZXR1cm4gJC5wYXRoOwoJCQkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCQkJZWxtTWFrZVJlcXVlc3QuZmlsZXMpKSwKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRlcShmaWxlUGF0aE9wZW5JbkVkaXRvcikpKSwKCQkJCQkJCQkJCWNvbXBpbGVFcnJvcnMpKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGNvbXBpbGF0aW9uU3ludGF4TG9jYXRpb25Bc0VsbU1ha2VSZXBvcnRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikgewoJcmV0dXJuIHtjb2x1bW46IGxvY2F0aW9uLmNvbHVtbiwgbGluZTogbG9jYXRpb24ucm93fTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGNvbXBpbGF0aW9uU3ludGF4UmFuZ2VBc0VsbU1ha2VSZXBvcnRSZWdpb24gPSBmdW5jdGlvbiAocmFuZ2UpIHsKCXJldHVybiB7CgkJZW5kOiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRjb21waWxhdGlvblN5bnRheExvY2F0aW9uQXNFbG1NYWtlUmVwb3J0TG9jYXRpb24ocmFuZ2UuZW5kKSwKCQlzdGFydDogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kY29tcGlsYXRpb25TeW50YXhMb2NhdGlvbkFzRWxtTWFrZVJlcG9ydExvY2F0aW9uKHJhbmdlLnN0YXJ0KQoJfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGxvd2VyaW5nQ29tcGlsYXRpb25FcnJvckRpc3BsYXlUZXh0ID0gZnVuY3Rpb24gKGNvbXBpbGF0aW9uRXJyb3IpIHsKCWlmIChjb21waWxhdGlvbkVycm9yLiQgPT09ICdNaXNzaW5nRGVwZW5kZW5jeUVycm9yJykgewoJCXZhciBtaXNzaW5nRGVwZW5kZW5jeSA9IGNvbXBpbGF0aW9uRXJyb3IuYTsKCQlyZXR1cm4gJ01pc3NpbmcgRGVwZW5kZW5jeTogJyArIGZ1bmN0aW9uICgpIHsKCQkJdmFyIGVsbU1ha2VSZXF1ZXN0ID0gbWlzc2luZ0RlcGVuZGVuY3kuYTsKCQkJcmV0dXJuICdFbG0gTWFrZSAnICsgKGZ1bmN0aW9uICgpIHsKCQkJCXZhciBfdjIgPSBlbG1NYWtlUmVxdWVzdC5vdXRwdXRUeXBlOwoJCQkJaWYgKF92Mi4kID09PSAnRWxtTWFrZU91dHB1dFR5cGVKcycpIHsKCQkJCQlyZXR1cm4gJ2phdmFzY3JpcHQnOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gJ2h0bWwnOwoJCQkJfQoJCQl9KCkgKyAoJyBmcm9tICcgKyBBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcvJywgZWxtTWFrZVJlcXVlc3QuZW50cnlQb2ludEZpbGVQYXRoKSkpOwoJCX0oKTsKCX0gZWxzZSB7CgkJdmFyIG90aGVyRXJyb3IgPSBjb21waWxhdGlvbkVycm9yLmE7CgkJcmV0dXJuIG90aGVyRXJyb3I7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlZGl0b3JEb2N1bWVudE1hcmtlckZyb21Mb3dlcmluZ0NvbXBpbGVFcnJvciA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciByZWdpb24gPSBfdjAuYTsKCXZhciBlcnJvciA9IF92MC5iOwoJcmV0dXJuIHsKCQllbmRDb2x1bW46IHJlZ2lvbi5lbmQuY29sdW1uLAoJCWVuZExpbmVOdW1iZXI6IHJlZ2lvbi5lbmQubGluZSwKCQltZXNzYWdlOiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRsb3dlcmluZ0NvbXBpbGF0aW9uRXJyb3JEaXNwbGF5VGV4dChlcnJvciksCgkJc2V2ZXJpdHk6ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkRXJyb3JTZXZlcml0eSwKCQlzdGFydENvbHVtbjogcmVnaW9uLnN0YXJ0LmNvbHVtbiwKCQlzdGFydExpbmVOdW1iZXI6IHJlZ2lvbi5zdGFydC5saW5lCgl9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZWRpdG9yRG9jdW1lbnRNYXJrZXJzRnJvbUZhaWxlZExvd2VyaW5nID0gRjIoCglmdW5jdGlvbiAoX3YwLCBjb21waWxlRXJyb3JzKSB7CgkJdmFyIGNvbXBpbGVSZXF1ZXN0ID0gX3YwLmNvbXBpbGVSZXF1ZXN0OwoJCXZhciBmaWxlT3BlbkluRWRpdG9yID0gX3YwLmZpbGVPcGVuSW5FZGl0b3I7CgkJdmFyIGZpbGVPcGVuZWRJbkVkaXRvckJhc2U2NCA9IGZpbGVPcGVuSW5FZGl0b3IuYi5hc0Jhc2U2NDsKCQl2YXIgX3YxID0gZmlsZU9wZW5JbkVkaXRvci5hOwoJCXZhciBkaXJlY3RvcnlQYXRoID0gX3YxLmE7CgkJdmFyIGZpbGVOYW1lID0gX3YxLmI7CgkJdmFyIGZpbGVQYXRoT3BlbkluRWRpdG9yID0gX1V0aWxzX2FwKAoJCQlkaXJlY3RvcnlQYXRoLAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbZmlsZU5hbWVdKSk7CgkJdmFyIF92MiA9ICRlbG0kY29yZSRMaXN0JGhlYWQoCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQlyZXR1cm4gJC5wYXRoOwoJCQkJCX0sCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRlcShmaWxlUGF0aE9wZW5JbkVkaXRvcikpLAoJCQkJY29tcGlsZVJlcXVlc3QuZmlsZXMpKTsKCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCX0gZWxzZSB7CgkJCXZhciByZXF1ZXN0RmlsZSA9IF92Mi5hOwoJCQlyZXR1cm4gKCFfVXRpbHNfZXEocmVxdWVzdEZpbGUuY29udGVudEJhc2U2NCwgZmlsZU9wZW5lZEluRWRpdG9yQmFzZTY0KSkgPyBfTGlzdF9OaWwgOiBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlck1hcCwKCQkJCWZ1bmN0aW9uIChsb2NhdGVkQ29tcGlsYXRpb25FcnJvcikgewoJCQkJCXZhciBsb2NhdGlvbiA9IGxvY2F0ZWRDb21waWxhdGlvbkVycm9yLmE7CgkJCQkJdmFyIGVycm9yID0gbG9jYXRlZENvbXBpbGF0aW9uRXJyb3IuYjsKCQkJCQlyZXR1cm4gX1V0aWxzX2VxKGxvY2F0aW9uLmZpbGVQYXRoLCBmaWxlUGF0aE9wZW5JbkVkaXRvcikgPyAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZWRpdG9yRG9jdW1lbnRNYXJrZXJGcm9tTG93ZXJpbmdDb21waWxlRXJyb3IoCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGNvbXBpbGF0aW9uU3ludGF4UmFuZ2VBc0VsbU1ha2VSZXBvcnRSZWdpb24obG9jYXRpb24ubG9jYXRpb25Jbk1vZHVsZVRleHQpLAoJCQkJCQkJCWVycm9yKSkpIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9LAoJCQkJY29tcGlsZUVycm9ycyk7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkRmlsZUVkaXRvciRDc3NDb250ZW50ID0geyQ6ICdDc3NDb250ZW50J307CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkRmlsZUVkaXRvciRIdG1sQ29udGVudCA9IHskOiAnSHRtbENvbnRlbnQnfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRGaWxlRWRpdG9yJEpzb25Db250ZW50ID0geyQ6ICdKc29uQ29udGVudCd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEZpbGVFZGl0b3IkTWFya2Rvd25Db250ZW50ID0geyQ6ICdNYXJrZG93bkNvbnRlbnQnfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRGaWxlRWRpdG9yJFhtbENvbnRlbnQgPSB7JDogJ1htbENvbnRlbnQnfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRGaWxlRWRpdG9yJGZpbGVDb250ZW50VHlwZUZyb21GaWxlTmFtZSA9IGZ1bmN0aW9uIChmaWxlTmFtZSkgewoJdmFyIF92MCA9ICRlbG0kY29yZSRMaXN0JHJldmVyc2UoCgkJQTIoJGVsbSRjb3JlJFN0cmluZyRzcGxpdCwgJy4nLCBmaWxlTmFtZSkpOwoJaWYgKCFfdjAuYikgewoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCX0gZWxzZSB7CgkJdmFyIGZpbGVFeHRlbnNpb24gPSBfdjAuYTsKCQl2YXIgX3YxID0gJGVsbSRjb3JlJFN0cmluZyR0b0xvd2VyKGZpbGVFeHRlbnNpb24pOwoJCXN3aXRjaCAoX3YxKSB7CgkJCWNhc2UgJ2VsbSc6CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEZpbGVFZGl0b3IkRWxtQ29udGVudCk7CgkJCWNhc2UgJ2pzb24nOgoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRGaWxlRWRpdG9yJEpzb25Db250ZW50KTsKCQkJY2FzZSAneG1sJzoKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkRmlsZUVkaXRvciRYbWxDb250ZW50KTsKCQkJY2FzZSAnbWQnOgoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRGaWxlRWRpdG9yJE1hcmtkb3duQ29udGVudCk7CgkJCWNhc2UgJ2h0bWwnOgoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRGaWxlRWRpdG9yJEh0bWxDb250ZW50KTsKCQkJY2FzZSAnY3NzJzoKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkRmlsZUVkaXRvciRDc3NDb250ZW50KTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQl9Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRmaWxlT3BlbmVkSW5FZGl0b3JGcm9tV29ya3NwYWNlID0gZnVuY3Rpb24gKHdvcmtzcGFjZUFjdGl2ZSkgewoJdmFyIF92MCA9IHdvcmtzcGFjZUFjdGl2ZS5lZGl0aW5nOwoJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7Cgl9IGVsc2UgewoJCXZhciBlZGl0aW5nID0gX3YwLmE7CgkJdmFyIF92MSA9IGVkaXRpbmcuZmlsZUxvY2F0aW9uOwoJCXZhciBkaXJlY3RvcnlQYXRoID0gX3YxLmE7CgkJdmFyIGZpbGVOYW1lID0gX3YxLmI7CgkJdmFyIF92MiA9IEEyKAoJCQkkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkZ2V0QmxvYkF0UGF0aEZyb21GaWxlVHJlZSwKCQkJX1V0aWxzX2FwKAoJCQkJZGlyZWN0b3J5UGF0aCwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbZmlsZU5hbWVdKSksCgkJCXdvcmtzcGFjZUFjdGl2ZS5maWxlVHJlZSk7CgkJaWYgKF92Mi4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCX0gZWxzZSB7CgkJCXZhciBmaWxlQ29udGVudCA9IF92Mi5hOwoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQlfVXRpbHNfVHVwbGUyKGVkaXRpbmcsIGZpbGVDb250ZW50KSk7CgkJfQoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZmlsZUxvY2F0aW9uT3BlbkluRWRpdG9yRnJvbVdvcmtzcGFjZSA9IEEyKAoJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGZpbGVPcGVuZWRJbkVkaXRvckZyb21Xb3Jrc3BhY2UsCgkkZWxtJGNvcmUkTWF5YmUkbWFwKCRlbG0kY29yZSRUdXBsZSRmaXJzdCkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbW9uYWNvTGFuZ3VhZ2VOYW1lRm9yRmlsZUNvbnRlbnQgPSBmdW5jdGlvbiAoZmlsZUNvbnRlbnQpIHsKCXN3aXRjaCAoZmlsZUNvbnRlbnQuJCkgewoJCWNhc2UgJ0VsbUNvbnRlbnQnOgoJCQlyZXR1cm4gJ0VsbSc7CgkJY2FzZSAnSnNvbkNvbnRlbnQnOgoJCQlyZXR1cm4gJ2pzb24nOwoJCWNhc2UgJ1htbENvbnRlbnQnOgoJCQlyZXR1cm4gJ3htbCc7CgkJY2FzZSAnTWFya2Rvd25Db250ZW50JzoKCQkJcmV0dXJuICdtYXJrZG93bic7CgkJY2FzZSAnSHRtbENvbnRlbnQnOgoJCQlyZXR1cm4gJ2h0bWwnOwoJCWRlZmF1bHQ6CgkJCXJldHVybiAnY3NzJzsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJG1vbmFjb1VyaUZvckZpbGVQYXRoID0gZnVuY3Rpb24gKGZpbGVQYXRoKSB7CglyZXR1cm4gJ2ZpbGU6Ly8vJyArIEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy8nLCBmaWxlUGF0aCk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRtb25hY29VcmlGb3JEaXJlY3RvcnlQYXRoQW5kRmlsZU5hbWUgPSBGMigKCWZ1bmN0aW9uIChkaXJlY3RvcnlQYXRoLCBmaWxlTmFtZSkgewoJCXJldHVybiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRtb25hY29VcmlGb3JGaWxlUGF0aCgKCQkJX1V0aWxzX2FwKAoJCQkJZGlyZWN0b3J5UGF0aCwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbZmlsZU5hbWVdKSkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJE9wZW5Eb2N1bWVudEV2ZW50ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ09wZW5Eb2N1bWVudEV2ZW50JywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9Gcm9udGVuZF9Nb25hY29FZGl0b3JfQ29tcGxldGlvbkl0ZW1LaW5kID0gZnVuY3Rpb24gKHZhbHVlVG9FbmNvZGUpIHsKCXN3aXRjaCAodmFsdWVUb0VuY29kZS4kKSB7CgkJY2FzZSAnQ29uc3RydWN0b3JDb21wbGV0aW9uSXRlbUtpbmQnOgoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdDb25zdHJ1Y3RvckNvbXBsZXRpb25JdGVtS2luZCcsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LCAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LCBfTGlzdF9OaWwpKQoJCQkJCV0pKTsKCQljYXNlICdFbnVtQ29tcGxldGlvbkl0ZW1LaW5kJzoKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknRW51bUNvbXBsZXRpb25JdGVtS2luZCcsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LCAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LCBfTGlzdF9OaWwpKQoJCQkJCV0pKTsKCQljYXNlICdFbnVtTWVtYmVyQ29tcGxldGlvbkl0ZW1LaW5kJzoKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknRW51bU1lbWJlckNvbXBsZXRpb25JdGVtS2luZCcsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LCAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LCBfTGlzdF9OaWwpKQoJCQkJCV0pKTsKCQljYXNlICdGdW5jdGlvbkNvbXBsZXRpb25JdGVtS2luZCc6CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ0Z1bmN0aW9uQ29tcGxldGlvbkl0ZW1LaW5kJywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQkJXSkpOwoJCWNhc2UgJ01vZHVsZUNvbXBsZXRpb25JdGVtS2luZCc6CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ01vZHVsZUNvbXBsZXRpb25JdGVtS2luZCcsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LCAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LCBfTGlzdF9OaWwpKQoJCQkJCV0pKTsKCQlkZWZhdWx0OgoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdTdHJ1Y3RDb21wbGV0aW9uSXRlbUtpbmQnLAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwgJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwgX0xpc3RfTmlsKSkKCQkJCQldKSk7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9Gcm9udGVuZF9Nb25hY29FZGl0b3JfRWRpdG9yTWFya2VyU2V2ZXJpdHkgPSBmdW5jdGlvbiAodmFsdWVUb0VuY29kZSkgewoJc3dpdGNoICh2YWx1ZVRvRW5jb2RlLiQpIHsKCQljYXNlICdFcnJvclNldmVyaXR5JzoKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknRXJyb3JTZXZlcml0eScsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LCAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LCBfTGlzdF9OaWwpKQoJCQkJCV0pKTsKCQljYXNlICdIaW50U2V2ZXJpdHknOgoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdIaW50U2V2ZXJpdHknLAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwgJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwgX0xpc3RfTmlsKSkKCQkJCQldKSk7CgkJY2FzZSAnSW5mb1NldmVyaXR5JzoKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknSW5mb1NldmVyaXR5JywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQkJXSkpOwoJCWRlZmF1bHQ6CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ1dhcm5pbmdTZXZlcml0eScsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LCAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LCBfTGlzdF9OaWwpKQoJCQkJCV0pKTsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0Zyb250ZW5kX01vbmFjb0VkaXRvcl9NZXNzYWdlVG9FZGl0b3IgPSBmdW5jdGlvbiAodmFsdWVUb0VuY29kZSkgewoJc3dpdGNoICh2YWx1ZVRvRW5jb2RlLiQpIHsKCQljYXNlICdPcGVuRG9jdW1lbnRFdmVudCc6CgkJCXZhciB0YWdBcmd1bWVudDAgPSB2YWx1ZVRvRW5jb2RlLmE7CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ09wZW5Eb2N1bWVudEV2ZW50JywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkndmFsdWUnLAoJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodGFnQXJndW1lbnQwLnZhbHVlKSksCgkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQknbGFuZ3VhZ2UnLAoJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodGFnQXJndW1lbnQwLmxhbmd1YWdlKSksCgkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkndXJpJywKCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHRhZ0FyZ3VtZW50MC51cmkpKSwKCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCSdwb3NpdGlvbicsCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkJJ2xpbmVOdW1iZXInLAoJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodGFnQXJndW1lbnQwLnBvc2l0aW9uLmxpbmVOdW1iZXIpKSwKCQkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJCSdjb2x1bW4nLAoJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodGFnQXJndW1lbnQwLnBvc2l0aW9uLmNvbHVtbikpCgkJCQkJCQkJCQkJCQldKSkpCgkJCQkJCQkJCQldKSkKCQkJCQkJCQldKSkpCgkJCQkJXSkpOwoJCWNhc2UgJ1Byb3ZpZGVDb21wbGV0aW9uSXRlbXNFdmVudCc6CgkJCXZhciB0YWdBcmd1bWVudDAgPSB2YWx1ZVRvRW5jb2RlLmE7CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ1Byb3ZpZGVDb21wbGV0aW9uSXRlbXNFdmVudCcsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX19nZW5lcmljX0xpc3QsCgkJCQkJCQkJCWZ1bmN0aW9uICh0eXBlX2FyZykgewoJCQkJCQkJCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJJ2xhYmVsJywKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodHlwZV9hcmcubGFiZWwpKSwKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkna2luZCcsCgkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9Gcm9udGVuZF9Nb25hY29FZGl0b3JfQ29tcGxldGlvbkl0ZW1LaW5kKHR5cGVfYXJnLmtpbmQpKSwKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQknZG9jdW1lbnRhdGlvbicsCgkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHR5cGVfYXJnLmRvY3VtZW50YXRpb24pKSwKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQknaW5zZXJ0VGV4dCcsCgkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHR5cGVfYXJnLmluc2VydFRleHQpKQoJCQkJCQkJCQkJCQldKSk7CgkJCQkJCQkJCX0sCgkJCQkJCQkJCXRhZ0FyZ3VtZW50MCkKCQkJCQkJCQldKSkpCgkJCQkJXSkpOwoJCWNhc2UgJ1Byb3ZpZGVEZWZpbml0aW9uRXZlbnQnOgoJCQl2YXIgdGFnQXJndW1lbnQwID0gdmFsdWVUb0VuY29kZS5hOwoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdQcm92aWRlRGVmaW5pdGlvbkV2ZW50JywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQlBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfX2dlbmVyaWNfTGlzdCwKCQkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCQkJCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkncmFuZ2UnLAoJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkJCQknc3RhcnRMaW5lTnVtYmVyJywKCQkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodHlwZV9hcmcucmFuZ2Uuc3RhcnRMaW5lTnVtYmVyKSksCgkJCQkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJCQkJJ3N0YXJ0Q29sdW1uJywKCQkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodHlwZV9hcmcucmFuZ2Uuc3RhcnRDb2x1bW4pKSwKCQkJCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkJCQknZW5kTGluZU51bWJlcicsCgkJCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KHR5cGVfYXJnLnJhbmdlLmVuZExpbmVOdW1iZXIpKSwKCQkJCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkJCQknZW5kQ29sdW1uJywKCQkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodHlwZV9hcmcucmFuZ2UuZW5kQ29sdW1uKSkKCQkJCQkJCQkJCQkJCQkJXSkpKSwKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkndXJpJywKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodHlwZV9hcmcudXJpKSkKCQkJCQkJCQkJCQkJXSkpOwoJCQkJCQkJCQl9LAoJCQkJCQkJCQl0YWdBcmd1bWVudDApCgkJCQkJCQkJXSkpKQoJCQkJCV0pKTsKCQljYXNlICdQcm92aWRlSG92ZXJFdmVudCc6CgkJCXZhciB0YWdBcmd1bWVudDAgPSB2YWx1ZVRvRW5jb2RlLmE7CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ1Byb3ZpZGVIb3ZlckV2ZW50JywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQlBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfX2dlbmVyaWNfTGlzdCwKCQkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCQkJCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0eXBlX2FyZyk7CgkJCQkJCQkJCX0sCgkJCQkJCQkJCXRhZ0FyZ3VtZW50MCkKCQkJCQkJCQldKSkpCgkJCQkJXSkpOwoJCWNhc2UgJ1JldmVhbFBvc2l0aW9uSW5DZW50ZXInOgoJCQl2YXIgdGFnQXJndW1lbnQwID0gdmFsdWVUb0VuY29kZS5hOwoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdSZXZlYWxQb3NpdGlvbkluQ2VudGVyJywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQknbGluZU51bWJlcicsCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludCh0YWdBcmd1bWVudDAubGluZU51bWJlcikpLAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJJ2NvbHVtbicsCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludCh0YWdBcmd1bWVudDAuY29sdW1uKSkKCQkJCQkJCQkJCV0pKQoJCQkJCQkJCV0pKSkKCQkJCQldKSk7CgkJZGVmYXVsdDoKCQkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknU2V0TW9kZWxNYXJrZXJzJywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQlBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfX2dlbmVyaWNfTGlzdCwKCQkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCQkJCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQknbWVzc2FnZScsCgkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHR5cGVfYXJnLm1lc3NhZ2UpKSwKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQknc3RhcnRMaW5lTnVtYmVyJywKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodHlwZV9hcmcuc3RhcnRMaW5lTnVtYmVyKSksCgkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJJ3N0YXJ0Q29sdW1uJywKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodHlwZV9hcmcuc3RhcnRDb2x1bW4pKSwKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQknZW5kTGluZU51bWJlcicsCgkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KHR5cGVfYXJnLmVuZExpbmVOdW1iZXIpKSwKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQknZW5kQ29sdW1uJywKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodHlwZV9hcmcuZW5kQ29sdW1uKSksCgkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJJ3NldmVyaXR5JywKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0Zyb250ZW5kX01vbmFjb0VkaXRvcl9FZGl0b3JNYXJrZXJTZXZlcml0eSh0eXBlX2FyZy5zZXZlcml0eSkpCgkJCQkJCQkJCQkJCV0pKTsKCQkJCQkJCQkJfSwKCQkJCQkJCQkJdGFnQXJndW1lbnQwKQoJCQkJCQkJCV0pKSkKCQkJCQldKSk7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV8zOTM5OTM2NDEwID0gZnVuY3Rpb24gKHZhbHVlVG9FbmNvZGUpIHsKCXJldHVybiAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9Gcm9udGVuZF9Nb25hY29FZGl0b3JfTWVzc2FnZVRvRWRpdG9yKHZhbHVlVG9FbmNvZGUpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZU1lc3NhZ2VUb01vbmFjb0VkaXRvciA9ICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlXzM5Mzk5MzY0MTA7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRzZW5kTWVzc2FnZVRvTW9uYWNvRnJhbWUgPSBfUGxhdGZvcm1fb3V0Z29pbmdQb3J0KCdzZW5kTWVzc2FnZVRvTW9uYWNvRnJhbWUnLCAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHNldENvbnRlbnRJbk1vbmFjb0VkaXRvckNtZCA9IGZ1bmN0aW9uIChvcGVuRG9jdW1lbnQpIHsKCXJldHVybiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRzZW5kTWVzc2FnZVRvTW9uYWNvRnJhbWUoCgkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZU1lc3NhZ2VUb01vbmFjb0VkaXRvcigKCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRPcGVuRG9jdW1lbnRFdmVudChvcGVuRG9jdW1lbnQpKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJFNldE1vZGVsTWFya2VycyA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdTZXRNb2RlbE1hcmtlcnMnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHNldE1vZGVsTWFya2Vyc0luTW9uYWNvRWRpdG9yQ21kID0gQTIoCgkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRTZXRNb2RlbE1hcmtlcnMsCglBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRqc29uRW5jb2RlTWVzc2FnZVRvTW9uYWNvRWRpdG9yLCAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRzZW5kTWVzc2FnZVRvTW9uYWNvRnJhbWUpKTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHN0cmluZ0Zyb21GaWxlQ29udGVudCA9ICRhdXRob3IkcHJvamVjdCRDb21tb24kZGVjb2RlQnl0ZXNUb1N0cmluZzsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZVdvcmtzcGFjZUFmdGVyRXZlbnQgPSBGMigKCWZ1bmN0aW9uIChzdGF0ZUJlZm9yZUFwcGx5RXZlbnQsIHN0YXRlQWZ0ZXJFdmVudCkgewoJCXZhciBfdjAgPSAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRmaWxlT3BlbmVkSW5FZGl0b3JGcm9tV29ya3NwYWNlKHN0YXRlQWZ0ZXJFdmVudCk7CgkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoc3RhdGVBZnRlckV2ZW50LCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCX0gZWxzZSB7CgkJCXZhciBfdjEgPSBfdjAuYTsKCQkJdmFyIGVkaXRpbmcgPSBfdjEuYTsKCQkJdmFyIGZpbGVDb250ZW50ID0gX3YxLmI7CgkJCXZhciBfdjIgPSAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRzdHJpbmdGcm9tRmlsZUNvbnRlbnQoZmlsZUNvbnRlbnQuYXNCeXRlcyk7CgkJCWlmIChfdjIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihzdGF0ZUFmdGVyRXZlbnQsICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgdGV4dEZvckVkaXRvciA9IF92Mi5hOwoJCQkJdmFyIGZpbGVMb2NhdGlvbk9wZW5lZEJlZm9yZUV2ZW50ID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZmlsZUxvY2F0aW9uT3BlbkluRWRpdG9yRnJvbVdvcmtzcGFjZShzdGF0ZUJlZm9yZUFwcGx5RXZlbnQpOwoJCQkJdmFyIGZpbGVMb2NhdGlvbkNoYW5nZWQgPSAhX1V0aWxzX2VxKAoJCQkJCWZpbGVMb2NhdGlvbk9wZW5lZEJlZm9yZUV2ZW50LAoJCQkJCSRlbG0kY29yZSRNYXliZSRKdXN0KGVkaXRpbmcpKTsKCQkJCXZhciBjb21waWxhdGlvbkNoYW5nZWQgPSAhX1V0aWxzX2VxKHN0YXRlQmVmb3JlQXBwbHlFdmVudC5jb21waWxhdGlvbiwgc3RhdGVBZnRlckV2ZW50LmNvbXBpbGF0aW9uKTsKCQkJCXZhciBzZXRNb2RlbE1hcmtlcnNUb0VkaXRvckNtZCA9IGZ1bmN0aW9uICgpIHsKCQkJCQlpZiAoIShjb21waWxhdGlvbkNoYW5nZWQgfHwgZmlsZUxvY2F0aW9uQ2hhbmdlZCkpIHsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjYgPSBzdGF0ZUFmdGVyRXZlbnQuY29tcGlsYXRpb247CgkJCQkJCWlmIChfdjYuJCA9PT0gJ0p1c3QnKSB7CgkJCQkJCQl2YXIgY29tcGlsYXRpb24gPSBfdjYuYTsKCQkJCQkJCXZhciBfdjcgPSBjb21waWxhdGlvbi5sb3dlcmluZ0xhc3RJdGVyYXRpb247CgkJCQkJCQlpZiAoX3Y3LiQgPT09ICdMb3dlcmluZ0NvbXBsZXRlJykgewoJCQkJCQkJCXZhciBsb3dlcmluZ0NvbXBsZXRlID0gX3Y3LmE7CgkJCQkJCQkJdmFyIGxvd2VyaW5nTWFya2VycyA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJCQkJdmFyIF92OCA9IGxvd2VyaW5nQ29tcGxldGUubG93ZXJpbmdSZXN1bHQ7CgkJCQkJCQkJCWlmIChfdjguJCA9PT0gJ09rJykgewoJCQkJCQkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCWlmIChfdjguYS4kID09PSAnRGVwZW5kZW5jeUxvd2VyaW5nRXJyb3InKSB7CgkJCQkJCQkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJdmFyIGxvd2VyaW5nRXJyb3JzID0gX3Y4LmEuYTsKCQkJCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGVkaXRvckRvY3VtZW50TWFya2Vyc0Zyb21GYWlsZWRMb3dlcmluZywKCQkJCQkJCQkJCQkJewoJCQkJCQkJCQkJCQkJY29tcGlsZVJlcXVlc3Q6IGNvbXBpbGF0aW9uLm9yaWdpbi5yZXF1ZXN0RnJvbVVzZXIsCgkJCQkJCQkJCQkJCQlmaWxlT3BlbkluRWRpdG9yOiBfVXRpbHNfVHVwbGUyKGVkaXRpbmcuZmlsZUxvY2F0aW9uLCBmaWxlQ29udGVudCkKCQkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQkJbG93ZXJpbmdFcnJvcnMpOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfSgpOwoJCQkJCQkJCXZhciBlbG1NYWtlTWFya2VycyA9IEEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlZGl0b3JEb2N1bWVudE1hcmtlcnNGcm9tRWxtTWFrZVJlcG9ydCwKCQkJCQkJCQkJewoJCQkJCQkJCQkJZWxtTWFrZVJlcXVlc3Q6IGxvd2VyaW5nQ29tcGxldGUuZWxtTWFrZVJlcXVlc3QsCgkJCQkJCQkJCQlmaWxlT3BlbkluRWRpdG9yOiBfVXRpbHNfVHVwbGUyKGVkaXRpbmcuZmlsZUxvY2F0aW9uLCBmaWxlQ29udGVudCkKCQkJCQkJCQkJfSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkYW5kVGhlbiwKCQkJCQkJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCQkJCQkJcmV0dXJuICQucmVwb3J0RnJvbUpzb247CgkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJQTIoJGVsbSRjb3JlJE1heWJlJGFuZFRoZW4sICRlbG0kY29yZSRSZXN1bHQkdG9NYXliZSwgbG93ZXJpbmdDb21wbGV0ZS5lbG1NYWtlUmVzdWx0KSkpOwoJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kc2V0TW9kZWxNYXJrZXJzSW5Nb25hY29FZGl0b3JDbWQoCgkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbbG93ZXJpbmdNYXJrZXJzLCBlbG1NYWtlTWFya2Vyc10pKSkpOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCQl9CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCX0KCQkJCQl9CgkJCQl9KCk7CgkJCQl2YXIgX3YzID0gZWRpdGluZy5maWxlTG9jYXRpb247CgkJCQl2YXIgZGlyZWN0b3J5UGF0aCA9IF92My5hOwoJCQkJdmFyIGZpbGVOYW1lID0gX3YzLmI7CgkJCQl2YXIgZmlsZUNvbnRlbnRUeXBlID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJEZpbGVFZGl0b3IkZmlsZUNvbnRlbnRUeXBlRnJvbUZpbGVOYW1lKGZpbGVOYW1lKTsKCQkJCXZhciB0cmlnZ2VyQ29tcGlsZUZvckZpcnN0T3BlbmVkTW9kdWxlID0gX1V0aWxzX2VxKAoJCQkJCWZpbGVDb250ZW50VHlwZSwKCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkRmlsZUVkaXRvciRFbG1Db250ZW50KSkgJiYgKF9VdGlsc19lcShzdGF0ZUFmdGVyRXZlbnQuY29tcGlsYXRpb24sICRlbG0kY29yZSRNYXliZSROb3RoaW5nKSAmJiBfVXRpbHNfZXEoc3RhdGVBZnRlckV2ZW50LnN5bnRheEluc3BlY3Rpb24sICRlbG0kY29yZSRNYXliZSROb3RoaW5nKSk7CgkJCQl2YXIgX3Y0ID0gdHJpZ2dlckNvbXBpbGVGb3JGaXJzdE9wZW5lZE1vZHVsZSA/ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGNvbXBpbGVGaWxlT3BlbmVkSW5FZGl0b3Ioc3RhdGVBZnRlckV2ZW50KSA6IF9VdGlsc19UdXBsZTIoc3RhdGVBZnRlckV2ZW50LCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQkJdmFyIHN0YXRlID0gX3Y0LmE7CgkJCQl2YXIgY29tcGlsZUNtZCA9IF92NC5iOwoJCQkJdmFyIHNldFRleHRUb0VkaXRvckNtZCA9IChfVXRpbHNfZXEoCgkJCQkJJGVsbSRjb3JlJE1heWJlJEp1c3QodGV4dEZvckVkaXRvciksCgkJCQkJc3RhdGUubGFzdFRleHRSZWNlaXZlZEZyb21FZGl0b3IpICYmICghZmlsZUxvY2F0aW9uQ2hhbmdlZCkpID8gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcgOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRzZXRDb250ZW50SW5Nb25hY29FZGl0b3JDbWQoCgkJCQkJCXsKCQkJCQkJCWxhbmd1YWdlOiBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJaWYgKGZpbGVDb250ZW50VHlwZS4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJcmV0dXJuICd0eHQnOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBjb250ZW50VHlwZSA9IGZpbGVDb250ZW50VHlwZS5hOwoJCQkJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbW9uYWNvTGFuZ3VhZ2VOYW1lRm9yRmlsZUNvbnRlbnQoY29udGVudFR5cGUpOwoJCQkJCQkJCX0KCQkJCQkJCX0oKSwKCQkJCQkJCXBvc2l0aW9uOiBlZGl0aW5nLm9wZW5Qb3NpdGlvbiwKCQkJCQkJCXVyaTogQTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbW9uYWNvVXJpRm9yRGlyZWN0b3J5UGF0aEFuZEZpbGVOYW1lLCBkaXJlY3RvcnlQYXRoLCBmaWxlTmFtZSksCgkJCQkJCQl2YWx1ZTogdGV4dEZvckVkaXRvcgoJCQkJCQl9KSk7CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQlzdGF0ZSwKCQkJCQkkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJGJhdGNoKAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUsIHNldFRleHRUb0VkaXRvckNtZCksCgkJCQkJCQkJQTIoJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUsIHNldE1vZGVsTWFya2Vyc1RvRWRpdG9yQ21kKSwKCQkJCQkJCQljb21waWxlQ21kCgkJCQkJCQldKSkpOwoJCQl9CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRFbG1Gb3JtYXRJblByb2dyZXNzID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0VsbUZvcm1hdEluUHJvZ3Jlc3MnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJEVsbUZvcm1hdFJlc3VsdCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdFbG1Gb3JtYXRSZXN1bHQnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0Q2hhbmdlVGV4dEluRWRpdG9yID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ1VzZXJJbnB1dENoYW5nZVRleHRJbkVkaXRvcicsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRDbG9zZUVkaXRvciA9IHskOiAnVXNlcklucHV0Q2xvc2VFZGl0b3InfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dENvbXBpbGUgPSB7JDogJ1VzZXJJbnB1dENvbXBpbGUnfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dEZvcm1hdCA9IHskOiAnVXNlcklucHV0Rm9ybWF0J307CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRJbnNwZWN0U3ludGF4ID0geyQ6ICdVc2VySW5wdXRJbnNwZWN0U3ludGF4J307CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRCYWNrZW5kRWxtRm9ybWF0UmVzcG9uc2VFdmVudCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdCYWNrZW5kRWxtRm9ybWF0UmVzcG9uc2VFdmVudCcsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kQmFja2VuZEludGVyZmFjZSRGb3JtYXRFbG1Nb2R1bGVUZXh0UmVxdWVzdCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdGb3JtYXRFbG1Nb2R1bGVUZXh0UmVxdWVzdCcsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZWxtRm9ybWF0Q21kRnJvbVN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7Cgl2YXIgX3YwID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZmlsZU9wZW5lZEluRWRpdG9yRnJvbVdvcmtzcGFjZShzdGF0ZSk7CglpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCX0gZWxzZSB7CgkJdmFyIF92MSA9IF92MC5hOwoJCXZhciBlZGl0aW5nID0gX3YxLmE7CgkJdmFyIGZpbGVDb250ZW50ID0gX3YxLmI7CgkJdmFyIF92MiA9ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHN0cmluZ0Zyb21GaWxlQ29udGVudChmaWxlQ29udGVudC5hc0J5dGVzKTsKCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJfSBlbHNlIHsKCQkJdmFyIGZpbGVDb250ZW50U3RyaW5nID0gX3YyLmE7CgkJCXZhciByZXF1ZXN0ID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kQmFja2VuZEludGVyZmFjZSRGb3JtYXRFbG1Nb2R1bGVUZXh0UmVxdWVzdChmaWxlQ29udGVudFN0cmluZyk7CgkJCXZhciBqc29uRGVjb2RlciA9IGZ1bmN0aW9uIChiYWNrZW5kUmVzcG9uc2UpIHsKCQkJCWlmIChiYWNrZW5kUmVzcG9uc2UuJCA9PT0gJ0Zvcm1hdEVsbU1vZHVsZVRleHRSZXNwb25zZScpIHsKCQkJCQl2YXIgZm9ybWF0UmVzcG9uc2UgPSBiYWNrZW5kUmVzcG9uc2UuYTsKCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoZm9ybWF0UmVzcG9uc2UpOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRGVjb2RlJGZhaWwoJ1VuZXhwZWN0ZWQgcmVzcG9uc2UnKTsKCQkJCX0KCQkJfTsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQlmaWxlQ29udGVudFN0cmluZywKCQkJCQlBMygKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcmVxdWVzdFRvQXBpQ21kLAoJCQkJCQlyZXF1ZXN0LAoJCQkJCQlqc29uRGVjb2RlciwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAoJGVsbSRjb3JlJFR1cGxlJHNlY29uZCksCgkJCQkJCQlmdW5jdGlvbiAocmVzdWx0KSB7CgkJCQkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJEJhY2tlbmRFbG1Gb3JtYXRSZXNwb25zZUV2ZW50KAoJCQkJCQkJCQl7ZmlsZUxvY2F0aW9uOiBlZGl0aW5nLmZpbGVMb2NhdGlvbiwgcmVzdWx0OiByZXN1bHR9KTsKCQkJCQkJCX0pKSkpOwoJCX0KCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGZpbGVDb250ZW50RnJvbVN0cmluZyA9IEEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsICRlbG0kYnl0ZXMkQnl0ZXMkRW5jb2RlJHN0cmluZywgJGVsbSRieXRlcyRCeXRlcyRFbmNvZGUkZW5jb2RlKTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkUHJvdmlkZUNvbXBsZXRpb25JdGVtc1Jlc3BvbnNlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1Byb3ZpZGVDb21wbGV0aW9uSXRlbXNSZXNwb25zZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRQcm92aWRlRGVmaW5pdGlvblJlc3BvbnNlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1Byb3ZpZGVEZWZpbml0aW9uUmVzcG9uc2UnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkUHJvdmlkZUhvdmVyUmVzcG9uc2UgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUHJvdmlkZUhvdmVyUmVzcG9uc2UnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkVGV4dERvY3VtZW50UmVmZXJlbmNlc1Jlc3BvbnNlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1RleHREb2N1bWVudFJlZmVyZW5jZXNSZXNwb25zZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRUZXh0RG9jdW1lbnRSZW5hbWVSZXNwb25zZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUZXh0RG9jdW1lbnRSZW5hbWVSZXNwb25zZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRUZXh0RG9jdW1lbnRTeW1ib2xSZXNwb25zZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUZXh0RG9jdW1lbnRTeW1ib2xSZXNwb25zZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRXb3Jrc3BhY2VTdW1tYXJ5UmVzcG9uc2UgPSB7JDogJ1dvcmtzcGFjZVN1bW1hcnlSZXNwb25zZSd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRDb25zdHJ1Y3RvckNvbXBsZXRpb25JdGVtS2luZCA9IHskOiAnQ29uc3RydWN0b3JDb21wbGV0aW9uSXRlbUtpbmQnfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkRW51bUNvbXBsZXRpb25JdGVtS2luZCA9IHskOiAnRW51bUNvbXBsZXRpb25JdGVtS2luZCd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRFbnVtTWVtYmVyQ29tcGxldGlvbkl0ZW1LaW5kID0geyQ6ICdFbnVtTWVtYmVyQ29tcGxldGlvbkl0ZW1LaW5kJ307CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJEZ1bmN0aW9uQ29tcGxldGlvbkl0ZW1LaW5kID0geyQ6ICdGdW5jdGlvbkNvbXBsZXRpb25JdGVtS2luZCd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRNb2R1bGVDb21wbGV0aW9uSXRlbUtpbmQgPSB7JDogJ01vZHVsZUNvbXBsZXRpb25JdGVtS2luZCd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRTdHJ1Y3RDb21wbGV0aW9uSXRlbUtpbmQgPSB7JDogJ1N0cnVjdENvbXBsZXRpb25JdGVtS2luZCd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfRnJvbnRlbmRfTW9uYWNvRWRpdG9yX0NvbXBsZXRpb25JdGVtS2luZCA9ICRlbG0kanNvbiRKc29uJERlY29kZSRvbmVPZigKCV9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdDb25zdHJ1Y3RvckNvbXBsZXRpb25JdGVtS2luZCcsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlU3VjY2VlZFdoZW5Ob3ROdWxsKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkQ29uc3RydWN0b3JDb21wbGV0aW9uSXRlbUtpbmQpKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ0VudW1Db21wbGV0aW9uSXRlbUtpbmQnLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZVN1Y2NlZWRXaGVuTm90TnVsbCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJEVudW1Db21wbGV0aW9uSXRlbUtpbmQpKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ0VudW1NZW1iZXJDb21wbGV0aW9uSXRlbUtpbmQnLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZVN1Y2NlZWRXaGVuTm90TnVsbCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJEVudW1NZW1iZXJDb21wbGV0aW9uSXRlbUtpbmQpKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ0Z1bmN0aW9uQ29tcGxldGlvbkl0ZW1LaW5kJywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRGdW5jdGlvbkNvbXBsZXRpb25JdGVtS2luZCkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknTW9kdWxlQ29tcGxldGlvbkl0ZW1LaW5kJywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRNb2R1bGVDb21wbGV0aW9uSXRlbUtpbmQpKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ1N0cnVjdENvbXBsZXRpb25JdGVtS2luZCcsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlU3VjY2VlZFdoZW5Ob3ROdWxsKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkU3RydWN0Q29tcGxldGlvbkl0ZW1LaW5kKSkKCQldKSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJERvY3VtZW50U3ltYm9sID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0RvY3VtZW50U3ltYm9sJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfQXJyYXkgPSB7JDogJ1N5bWJvbEtpbmRfQXJyYXknfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkU3ltYm9sS2luZF9Cb29sZWFuID0geyQ6ICdTeW1ib2xLaW5kX0Jvb2xlYW4nfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkU3ltYm9sS2luZF9DbGFzcyA9IHskOiAnU3ltYm9sS2luZF9DbGFzcyd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRTeW1ib2xLaW5kX0NvbnN0YW50ID0geyQ6ICdTeW1ib2xLaW5kX0NvbnN0YW50J307CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfRW51bSA9IHskOiAnU3ltYm9sS2luZF9FbnVtJ307CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfRW51bU1lbWJlciA9IHskOiAnU3ltYm9sS2luZF9FbnVtTWVtYmVyJ307CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfRmlsZSA9IHskOiAnU3ltYm9sS2luZF9GaWxlJ307CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfRnVuY3Rpb24gPSB7JDogJ1N5bWJvbEtpbmRfRnVuY3Rpb24nfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkU3ltYm9sS2luZF9JbnRlcmZhY2UgPSB7JDogJ1N5bWJvbEtpbmRfSW50ZXJmYWNlJ307CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfTW9kdWxlID0geyQ6ICdTeW1ib2xLaW5kX01vZHVsZSd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRTeW1ib2xLaW5kX05hbWVzcGFjZSA9IHskOiAnU3ltYm9sS2luZF9OYW1lc3BhY2UnfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkU3ltYm9sS2luZF9OdW1iZXIgPSB7JDogJ1N5bWJvbEtpbmRfTnVtYmVyJ307CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfUGFja2FnZSA9IHskOiAnU3ltYm9sS2luZF9QYWNrYWdlJ307CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfU3RyaW5nID0geyQ6ICdTeW1ib2xLaW5kX1N0cmluZyd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRTeW1ib2xLaW5kX1N0cnVjdCA9IHskOiAnU3ltYm9sS2luZF9TdHJ1Y3QnfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9TeW1ib2xLaW5kID0gJGVsbSRqc29uJEpzb24kRGVjb2RlJG9uZU9mKAoJX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ1N5bWJvbEtpbmRfQXJyYXknLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZVN1Y2NlZWRXaGVuTm90TnVsbCgkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfQXJyYXkpKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ1N5bWJvbEtpbmRfQm9vbGVhbicsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlU3VjY2VlZFdoZW5Ob3ROdWxsKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkU3ltYm9sS2luZF9Cb29sZWFuKSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdTeW1ib2xLaW5kX0NsYXNzJywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRTeW1ib2xLaW5kX0NsYXNzKSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdTeW1ib2xLaW5kX0NvbnN0YW50JywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRTeW1ib2xLaW5kX0NvbnN0YW50KSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdTeW1ib2xLaW5kX0VudW0nLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZVN1Y2NlZWRXaGVuTm90TnVsbCgkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfRW51bSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknU3ltYm9sS2luZF9FbnVtTWVtYmVyJywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRTeW1ib2xLaW5kX0VudW1NZW1iZXIpKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ1N5bWJvbEtpbmRfRmlsZScsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlU3VjY2VlZFdoZW5Ob3ROdWxsKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkU3ltYm9sS2luZF9GaWxlKSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdTeW1ib2xLaW5kX0Z1bmN0aW9uJywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRTeW1ib2xLaW5kX0Z1bmN0aW9uKSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdTeW1ib2xLaW5kX0ludGVyZmFjZScsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlU3VjY2VlZFdoZW5Ob3ROdWxsKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkU3ltYm9sS2luZF9JbnRlcmZhY2UpKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ1N5bWJvbEtpbmRfTW9kdWxlJywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRTeW1ib2xLaW5kX01vZHVsZSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknU3ltYm9sS2luZF9OYW1lc3BhY2UnLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZVN1Y2NlZWRXaGVuTm90TnVsbCgkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfTmFtZXNwYWNlKSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdTeW1ib2xLaW5kX051bWJlcicsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlU3VjY2VlZFdoZW5Ob3ROdWxsKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkU3ltYm9sS2luZF9OdW1iZXIpKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ1N5bWJvbEtpbmRfUGFja2FnZScsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlU3VjY2VlZFdoZW5Ob3ROdWxsKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkU3ltYm9sS2luZF9QYWNrYWdlKSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdTeW1ib2xLaW5kX1N0cmluZycsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlU3VjY2VlZFdoZW5Ob3ROdWxsKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkU3ltYm9sS2luZF9TdHJpbmcpKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ1N5bWJvbEtpbmRfU3RydWN0JywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRTeW1ib2xLaW5kX1N0cnVjdCkpCgkJXSkpOwpmdW5jdGlvbiAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkY3ljbGljJGpzb25EZWNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0RvY3VtZW50U3ltYm9sKCkgewoJcmV0dXJuICRlbG0kanNvbiRKc29uJERlY29kZSRvbmVPZigKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKAoJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQkJJ0RvY3VtZW50U3ltYm9sJywKCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRsYXp5KAoJCQkJCWZ1bmN0aW9uIChfdjApIHsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkRG9jdW1lbnRTeW1ib2wsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkJMCwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQlBMygKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCSdjaGlsZHJlbicsCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWydDaGlsZHJlbiddKSwKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX19nZW5lcmljX0xpc3QoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGN5Y2xpYyRqc29uRGVjb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9Eb2N1bWVudFN5bWJvbCgpKSksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCSdzZWxlY3Rpb25SYW5nZScsCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbJ1NlbGVjdGlvblJhbmdlJ10pLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJJ2VuZENvbHVtbicsCgkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJWydFbmRDb2x1bW4nXSksCgkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW50KSwKCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJCQkJJ2VuZExpbmVOdW1iZXInLAoJCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQkJWydFbmRMaW5lTnVtYmVyJ10pLAoJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJCQkJCSdzdGFydENvbHVtbicsCgkJCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQkJCVsnU3RhcnRDb2x1bW4nXSksCgkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJCQkJJ3N0YXJ0TGluZU51bWJlcicsCgkJCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCQkJWydTdGFydExpbmVOdW1iZXInXSksCgkJCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW50KSwKCQkJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoCgkJCQkJCQkJCQkJCQkJCQlGNCgKCQkJCQkJCQkJCQkJCQkJCQlmdW5jdGlvbiAoc3RhcnRMaW5lTnVtYmVyLCBzdGFydENvbHVtbiwgZW5kTGluZU51bWJlciwgZW5kQ29sdW1uKSB7CgkJCQkJCQkJCQkJCQkJCQkJCXJldHVybiB7ZW5kQ29sdW1uOiBlbmRDb2x1bW4sIGVuZExpbmVOdW1iZXI6IGVuZExpbmVOdW1iZXIsIHN0YXJ0Q29sdW1uOiBzdGFydENvbHVtbiwgc3RhcnRMaW5lTnVtYmVyOiBzdGFydExpbmVOdW1iZXJ9OwoJCQkJCQkJCQkJCQkJCQkJCX0pKSkpKSkpLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJCSdyYW5nZScsCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVsnUmFuZ2UnXSksCgkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJCSdlbmRDb2x1bW4nLAoJCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQkJWydFbmRDb2x1bW4nXSksCgkJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQkJCQkJJ2VuZExpbmVOdW1iZXInLAoJCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCQlbJ0VuZExpbmVOdW1iZXInXSksCgkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJCQkJJ3N0YXJ0Q29sdW1uJywKCQkJCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQkJCQlbJ1N0YXJ0Q29sdW1uJ10pLAoJCQkJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJCQkJCSdzdGFydExpbmVOdW1iZXInLAoJCQkJCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQkJCQkJWydTdGFydExpbmVOdW1iZXInXSksCgkJCQkJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJCQkJCQkJCQlGNCgKCQkJCQkJCQkJCQkJCQkJCQkJZnVuY3Rpb24gKHN0YXJ0TGluZU51bWJlciwgc3RhcnRDb2x1bW4sIGVuZExpbmVOdW1iZXIsIGVuZENvbHVtbikgewoJCQkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIHtlbmRDb2x1bW46IGVuZENvbHVtbiwgZW5kTGluZU51bWJlcjogZW5kTGluZU51bWJlciwgc3RhcnRDb2x1bW46IHN0YXJ0Q29sdW1uLCBzdGFydExpbmVOdW1iZXI6IHN0YXJ0TGluZU51bWJlcn07CgkJCQkJCQkJCQkJCQkJCQkJCX0pKSkpKSkpLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJJ2tpbmQnLAoJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCVsnS2luZCddKSwKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9TeW1ib2xLaW5kKSwKCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJCQkJJ25hbWUnLAoJCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQkJWydOYW1lJ10pLAoJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoCgkJCQkJCQkJCQkJCQkJRjUoCgkJCQkJCQkJCQkJCQkJCWZ1bmN0aW9uIChuYW1lLCBraW5kLCByYW5nZSwgc2VsZWN0aW9uUmFuZ2UsIGNoaWxkcmVuKSB7CgkJCQkJCQkJCQkJCQkJCQlyZXR1cm4ge2NoaWxkcmVuOiBjaGlsZHJlbiwga2luZDoga2luZCwgbmFtZTogbmFtZSwgcmFuZ2U6IHJhbmdlLCBzZWxlY3Rpb25SYW5nZTogc2VsZWN0aW9uUmFuZ2V9OwoJCQkJCQkJCQkJCQkJCQl9KSkpKSkpKSkpOwoJCQkJCX0pKQoJCQldKSk7Cn0KdHJ5IHsKCXZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9MYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2VfRG9jdW1lbnRTeW1ib2wgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkY3ljbGljJGpzb25EZWNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0RvY3VtZW50U3ltYm9sKCk7CgkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkY3ljbGljJGpzb25EZWNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0RvY3VtZW50U3ltYm9sID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9MYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2VfRG9jdW1lbnRTeW1ib2w7Cgl9Owp9IGNhdGNoICgkKSB7Cgl0aHJvdyAnU29tZSB0b3AtbGV2ZWwgZGVmaW5pdGlvbnMgZnJvbSBgQ29tcGlsYXRpb25JbnRlcmZhY2UuR2VuZXJhdGVKc29uQ29udmVydGVycy5HZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnNgIGFyZSBjYXVzaW5nIGluZmluaXRlIHJlY3Vyc2lvbjpcblxuICDilIzilIDilIDilIDilIDilIDilJBcbiAg4pSCICAgIGpzb25EZWNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0RvY3VtZW50U3ltYm9sXG4gIOKUlOKUgOKUgOKUgOKUgOKUgOKUmFxuXG5UaGVzZSBlcnJvcnMgYXJlIHZlcnkgdHJpY2t5LCBzbyByZWFkIGh0dHBzOi8vZWxtLWxhbmcub3JnLzAuMTkuMS9iYWQtcmVjdXJzaW9uIHRvIGxlYXJuIGhvdyB0byBmaXggaXQhJzt9CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJEVsbVBhY2thZ2VGaWxlTG9jYXRpb24gPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnRWxtUGFja2FnZUZpbGVMb2NhdGlvbicsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFdvcmtzcGFjZUZpbGVMb2NhdGlvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdXb3Jrc3BhY2VGaWxlTG9jYXRpb24nLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkRWxtUGFja2FnZVZlcnNpb24wMTlJZGVudGlmZXIgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnRWxtUGFja2FnZVZlcnNpb24wMTlJZGVudGlmZXInLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0VsbVBhY2thZ2VWZXJzaW9uSWRlbnRpZmVyID0gJGVsbSRqc29uJEpzb24kRGVjb2RlJG9uZU9mKAoJX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ0VsbVBhY2thZ2VWZXJzaW9uMDE5SWRlbnRpZmVyJywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQkJcmV0dXJuIEEzKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwMiwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRFbG1QYWNrYWdlVmVyc2lvbjAxOUlkZW50aWZlciwKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LCAwLCAkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSwKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LCAxLCAkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSk7CgkJCQl9KSkKCQldKSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9MYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2VfRmlsZUxvY2F0aW9uID0gJGVsbSRqc29uJEpzb24kRGVjb2RlJG9uZU9mKAoJX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ0VsbVBhY2thZ2VGaWxlTG9jYXRpb24nLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjApIHsKCQkJCQlyZXR1cm4gQTMoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAyLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJEVsbVBhY2thZ2VGaWxlTG9jYXRpb24sCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwgMCwgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0VsbVBhY2thZ2VWZXJzaW9uSWRlbnRpZmVyKSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkxLAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfX2dlbmVyaWNfTGlzdCgkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSkpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknV29ya3NwYWNlRmlsZUxvY2F0aW9uJywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFdvcmtzcGFjZUZpbGVMb2NhdGlvbiwKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LCAwLCAkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSk7CgkJCQl9KSkKCQldKSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9MYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2VfUmVzcG9uc2UgPSAkZWxtJGpzb24kSnNvbiREZWNvZGUkb25lT2YoCglfTGlzdF9mcm9tQXJyYXkoCgkJWwoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknUHJvdmlkZUNvbXBsZXRpb25JdGVtc1Jlc3BvbnNlJywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFByb3ZpZGVDb21wbGV0aW9uSXRlbXNSZXNwb25zZSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkwLAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfX2dlbmVyaWNfTGlzdCgKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQlBMygKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCSdpbnNlcnRUZXh0JywKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbJ0luc2VydFRleHQnXSksCgkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJJ2RvY3VtZW50YXRpb24nLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWydEb2N1bWVudGF0aW9uJ10pLAoJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJCSdraW5kJywKCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJWydLaW5kJ10pLAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9Gcm9udGVuZF9Nb25hY29FZGl0b3JfQ29tcGxldGlvbkl0ZW1LaW5kKSwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQkJCSdsYWJlbCcsCgkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJWydMYWJlbCddKSwKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJCQkJCUY0KAoJCQkJCQkJCQkJCQkJCWZ1bmN0aW9uIChsYWJlbCwga2luZCwgZG9jdW1lbnRhdGlvbiwgaW5zZXJ0VGV4dCkgewoJCQkJCQkJCQkJCQkJCQlyZXR1cm4ge2RvY3VtZW50YXRpb246IGRvY3VtZW50YXRpb24sIGluc2VydFRleHQ6IGluc2VydFRleHQsIGtpbmQ6IGtpbmQsIGxhYmVsOiBsYWJlbH07CgkJCQkJCQkJCQkJCQkJfSkpKSkpKSkpKTsKCQkJCX0pKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ1Byb3ZpZGVEZWZpbml0aW9uUmVzcG9uc2UnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkUHJvdmlkZURlZmluaXRpb25SZXNwb25zZSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkwLAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfX2dlbmVyaWNfTGlzdCgKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQlBMygKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCSdyYW5nZScsCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWydSYW5nZSddKSwKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQknZW5kQ29sdW1uJywKCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJWydFbmRDb2x1bW4nXSksCgkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJJ2VuZExpbmVOdW1iZXInLAoJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCVsnRW5kTGluZU51bWJlciddKSwKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQkJCQknc3RhcnRDb2x1bW4nLAoJCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQkJWydTdGFydENvbHVtbiddKSwKCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW50KSwKCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJCQknc3RhcnRMaW5lTnVtYmVyJywKCQkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQkJWydTdGFydExpbmVOdW1iZXInXSksCgkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCQkJCQkJCQkJCQlGNCgKCQkJCQkJCQkJCQkJCQkJCWZ1bmN0aW9uIChzdGFydExpbmVOdW1iZXIsIHN0YXJ0Q29sdW1uLCBlbmRMaW5lTnVtYmVyLCBlbmRDb2x1bW4pIHsKCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4ge2VuZENvbHVtbjogZW5kQ29sdW1uLCBlbmRMaW5lTnVtYmVyOiBlbmRMaW5lTnVtYmVyLCBzdGFydENvbHVtbjogc3RhcnRDb2x1bW4sIHN0YXJ0TGluZU51bWJlcjogc3RhcnRMaW5lTnVtYmVyfTsKCQkJCQkJCQkJCQkJCQkJCX0pKSkpKSkpLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQknZmlsZUxvY2F0aW9uJywKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVsnRmlsZUxvY2F0aW9uJ10pLAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9GaWxlTG9jYXRpb24pLAoJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoCgkJCQkJCQkJCQkJRjIoCgkJCQkJCQkJCQkJCWZ1bmN0aW9uIChmaWxlTG9jYXRpb24sIHJhbmdlKSB7CgkJCQkJCQkJCQkJCQlyZXR1cm4ge2ZpbGVMb2NhdGlvbjogZmlsZUxvY2F0aW9uLCByYW5nZTogcmFuZ2V9OwoJCQkJCQkJCQkJCQl9KSkpKSkpKTsKCQkJCX0pKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ1Byb3ZpZGVIb3ZlclJlc3BvbnNlJywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFByb3ZpZGVIb3ZlclJlc3BvbnNlLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwKCQkJCQkJCTAsCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9fZ2VuZXJpY19MaXN0KCRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpKSk7CgkJCQl9KSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdUZXh0RG9jdW1lbnRSZWZlcmVuY2VzUmVzcG9uc2UnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjMpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkVGV4dERvY3VtZW50UmVmZXJlbmNlc1Jlc3BvbnNlLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwKCQkJCQkJCTAsCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9fZ2VuZXJpY19MaXN0KAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJJ3JhbmdlJywKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbJ1JhbmdlJ10pLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJCSdlbmRDb2x1bW4nLAoJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQlbJ0VuZENvbHVtbiddKSwKCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJCQknZW5kTGluZU51bWJlcicsCgkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJWydFbmRMaW5lTnVtYmVyJ10pLAoJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJCSdzdGFydENvbHVtbicsCgkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQlbJ1N0YXJ0Q29sdW1uJ10pLAoJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJCQkJCSdzdGFydExpbmVOdW1iZXInLAoJCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCQlbJ1N0YXJ0TGluZU51bWJlciddKSwKCQkJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoCgkJCQkJCQkJCQkJCQkJCUY0KAoJCQkJCQkJCQkJCQkJCQkJZnVuY3Rpb24gKHN0YXJ0TGluZU51bWJlciwgc3RhcnRDb2x1bW4sIGVuZExpbmVOdW1iZXIsIGVuZENvbHVtbikgewoJCQkJCQkJCQkJCQkJCQkJCXJldHVybiB7ZW5kQ29sdW1uOiBlbmRDb2x1bW4sIGVuZExpbmVOdW1iZXI6IGVuZExpbmVOdW1iZXIsIHN0YXJ0Q29sdW1uOiBzdGFydENvbHVtbiwgc3RhcnRMaW5lTnVtYmVyOiBzdGFydExpbmVOdW1iZXJ9OwoJCQkJCQkJCQkJCQkJCQkJfSkpKSkpKSksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCSdmaWxlTG9jYXRpb24nLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWydGaWxlTG9jYXRpb24nXSksCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0ZpbGVMb2NhdGlvbiksCgkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJCQlGMigKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKGZpbGVMb2NhdGlvbiwgcmFuZ2UpIHsKCQkJCQkJCQkJCQkJCXJldHVybiB7ZmlsZUxvY2F0aW9uOiBmaWxlTG9jYXRpb24sIHJhbmdlOiByYW5nZX07CgkJCQkJCQkJCQkJCX0pKSkpKSkpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknVGV4dERvY3VtZW50UmVuYW1lUmVzcG9uc2UnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjQpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkVGV4dERvY3VtZW50UmVuYW1lUmVzcG9uc2UsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LAoJCQkJCQkJMCwKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX19nZW5lcmljX0xpc3QoCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQknZWRpdHMnLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsnRWRpdHMnXSksCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9fZ2VuZXJpY19MaXN0KAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJJ25ld1RleHQnLAoJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCVsnTmV3VGV4dCddKSwKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQkJCQkncmFuZ2UnLAoJCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQkJWydSYW5nZSddKSwKCQkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQkJCQkJCSdlbmRDb2x1bW4nLAoJCQkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQkJCVsnRW5kQ29sdW1uJ10pLAoJCQkJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJCQkJCSdlbmRMaW5lTnVtYmVyJywKCQkJCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCQkJCVsnRW5kTGluZU51bWJlciddKSwKCQkJCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW50KSwKCQkJCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQkJCQkJCQknc3RhcnRDb2x1bW4nLAoJCQkJCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCQkJCQlbJ1N0YXJ0Q29sdW1uJ10pLAoJCQkJCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW50KSwKCQkJCQkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQkJCQkJCQkJCSdzdGFydExpbmVOdW1iZXInLAoJCQkJCQkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQkJCQkJCVsnU3RhcnRMaW5lTnVtYmVyJ10pLAoJCQkJCQkJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCQkJCQkJCQkJCQkJCQkJRjQoCgkJCQkJCQkJCQkJCQkJCQkJCQkJZnVuY3Rpb24gKHN0YXJ0TGluZU51bWJlciwgc3RhcnRDb2x1bW4sIGVuZExpbmVOdW1iZXIsIGVuZENvbHVtbikgewoJCQkJCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4ge2VuZENvbHVtbjogZW5kQ29sdW1uLCBlbmRMaW5lTnVtYmVyOiBlbmRMaW5lTnVtYmVyLCBzdGFydENvbHVtbjogc3RhcnRDb2x1bW4sIHN0YXJ0TGluZU51bWJlcjogc3RhcnRMaW5lTnVtYmVyfTsKCQkJCQkJCQkJCQkJCQkJCQkJCQl9KSkpKSkpKSwKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCQkJCQkJCQkJCUYyKAoJCQkJCQkJCQkJCQkJCQlmdW5jdGlvbiAocmFuZ2UsIG5ld1RleHQpIHsKCQkJCQkJCQkJCQkJCQkJCXJldHVybiB7bmV3VGV4dDogbmV3VGV4dCwgcmFuZ2U6IHJhbmdlfTsKCQkJCQkJCQkJCQkJCQkJfSkpKSkpKSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJJ2ZpbGVQYXRoJywKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVsnRmlsZVBhdGgnXSksCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJCQlGMigKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKGZpbGVQYXRoLCBlZGl0cykgewoJCQkJCQkJCQkJCQkJcmV0dXJuIHtlZGl0czogZWRpdHMsIGZpbGVQYXRoOiBmaWxlUGF0aH07CgkJCQkJCQkJCQkJCX0pKSkpKSkpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknVGV4dERvY3VtZW50U3ltYm9sUmVzcG9uc2UnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjUpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkVGV4dERvY3VtZW50U3ltYm9sUmVzcG9uc2UsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LAoJCQkJCQkJMCwKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX19nZW5lcmljX0xpc3QoJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0RvY3VtZW50U3ltYm9sKSkpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknV29ya3NwYWNlU3VtbWFyeVJlc3BvbnNlJywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVTdWNjZWVkV2hlbk5vdE51bGwoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRXb3Jrc3BhY2VTdW1tYXJ5UmVzcG9uc2UpKQoJCV0pKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX19nZW5lcmljX1Jlc3VsdCA9IEYyKAoJZnVuY3Rpb24gKGRlY29kZUVyciwgZGVjb2RlT2spIHsKCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRGVjb2RlJG9uZU9mKAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJQTIoCgkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkkZWxtJGNvcmUkUmVzdWx0JEVyciwKCQkJCQlBMigKCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQkJCQknRXJyJywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LCAwLCBkZWNvZGVFcnIpKSksCgkJCQkJQTIoCgkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkkZWxtJGNvcmUkUmVzdWx0JE9rLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCQkJCSdPaycsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwgMCwgZGVjb2RlT2spKSksCgkJCQkJQTIoCgkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkkZWxtJGNvcmUkUmVzdWx0JEVyciwKCQkJCQlBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsICdFcnInLCBkZWNvZGVFcnIpKSwKCQkJCQlBMigKCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCSRlbG0kY29yZSRSZXN1bHQkT2ssCgkJCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLCAnT2snLCBkZWNvZGVPaykpCgkJCQldKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlXzM3NDY3NTcyNDcgPSBBMigKCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCUEzKAoJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkncmVxdWVzdElkJywKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsnUmVxdWVzdElkJ10pLAoJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJQTIoCgkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCUEzKAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCSdyZXNwb25zZScsCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsnUmVzcG9uc2UnXSksCgkJCUEyKCRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX19nZW5lcmljX1Jlc3VsdCwgJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZywgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX1Jlc3BvbnNlKSksCgkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoCgkJCUYyKAoJCQkJZnVuY3Rpb24gKHJlc3BvbnNlLCByZXF1ZXN0SWQpIHsKCQkJCQlyZXR1cm4ge3JlcXVlc3RJZDogcmVxdWVzdElkLCByZXNwb25zZTogcmVzcG9uc2V9OwoJCQkJfSkpKSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRqc29uRGVjb2RlTGFuZ3VhZ2VTZXJ2aWNlUmVzcG9uc2UgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV8zNzQ2NzU3MjQ3Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcGFyc2VFbG1Gb3JtYXRSZXNwb25zZSA9IGZ1bmN0aW9uIChyZXNwb25zZSkgewoJdmFyIF92MCA9IHJlc3BvbnNlLmZvcm1hdHRlZFRleHQ7CglpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihyZXNwb25zZSk7Cgl9IGVsc2UgewoJCXZhciBmb3JtYXR0ZWRUZXh0ID0gX3YwLmE7CgkJcmV0dXJuICghcmVzcG9uc2UucHJvY2Vzc091dHB1dC5leGl0Q29kZSkgPyAkZWxtJGNvcmUkUmVzdWx0JE9rKGZvcm1hdHRlZFRleHQpIDogJGVsbSRjb3JlJFJlc3VsdCRFcnIocmVzcG9uc2UpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRQcm92aWRlQ29tcGxldGlvbkl0ZW1zRXZlbnQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUHJvdmlkZUNvbXBsZXRpb25JdGVtc0V2ZW50JywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRwcm92aWRlQ29tcGxldGlvbkl0ZW1zSW5Nb25hY29FZGl0b3JDbWQgPSBBMigKCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJFByb3ZpZGVDb21wbGV0aW9uSXRlbXNFdmVudCwKCUEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVNZXNzYWdlVG9Nb25hY29FZGl0b3IsICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHNlbmRNZXNzYWdlVG9Nb25hY29GcmFtZSkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRQcm92aWRlRGVmaW5pdGlvbkV2ZW50ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1Byb3ZpZGVEZWZpbml0aW9uRXZlbnQnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHByb3ZpZGVEZWZpbml0aW9uSW5Nb25hY29FZGl0b3JDbWQgPSBmdW5jdGlvbiAobG9jYXRpb25zSW5GaWxlcykgewoJdmFyIG1vbmFjb0xvY2F0aW9ucyA9IEEyKAoJCSRlbG0kY29yZSRMaXN0JGZpbHRlck1hcCwKCQlmdW5jdGlvbiAobG9jYXRpb25JbkZpbGUpIHsKCQkJdmFyIF92MCA9IGxvY2F0aW9uSW5GaWxlLmZpbGVMb2NhdGlvbjsKCQkJaWYgKF92MC4kID09PSAnV29ya3NwYWNlRmlsZUxvY2F0aW9uJykgewoJCQkJdmFyIGZpbGVQYXRoID0gX3YwLmE7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJewoJCQkJCQlyYW5nZTogbG9jYXRpb25JbkZpbGUucmFuZ2UsCgkJCQkJCXVyaTogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbW9uYWNvVXJpRm9yRmlsZVBhdGgoCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJW2ZpbGVQYXRoXSkpCgkJCQkJfSk7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCX0KCQl9LAoJCWxvY2F0aW9uc0luRmlsZXMpOwoJcmV0dXJuICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHNlbmRNZXNzYWdlVG9Nb25hY29GcmFtZSgKCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRqc29uRW5jb2RlTWVzc2FnZVRvTW9uYWNvRWRpdG9yKAoJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJFByb3ZpZGVEZWZpbml0aW9uRXZlbnQobW9uYWNvTG9jYXRpb25zKSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRQcm92aWRlSG92ZXJFdmVudCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQcm92aWRlSG92ZXJFdmVudCcsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcHJvdmlkZUhvdmVySW5Nb25hY29FZGl0b3JDbWQgPSBBMigKCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJFByb3ZpZGVIb3ZlckV2ZW50LAoJQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZU1lc3NhZ2VUb01vbmFjb0VkaXRvciwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kc2VuZE1lc3NhZ2VUb01vbmFjb0ZyYW1lKSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJFJldmVhbFBvc2l0aW9uSW5DZW50ZXIgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUmV2ZWFsUG9zaXRpb25JbkNlbnRlcicsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcmV2ZWFsUG9zaXRpb25JbkNlbnRlckluTW9uYWNvRWRpdG9yQ21kID0gQTIoCgkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRSZXZlYWxQb3NpdGlvbkluQ2VudGVyLAoJQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZU1lc3NhZ2VUb01vbmFjb0VkaXRvciwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kc2VuZE1lc3NhZ2VUb01vbmFjb0ZyYW1lKSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRzeW50YXhJbnNwZWN0RmlsZU9wZW5lZEluRWRpdG9yID0gZnVuY3Rpb24gKHN0YXRlQmVmb3JlKSB7Cgl2YXIgX3YwID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZmlsZU9wZW5lZEluRWRpdG9yRnJvbVdvcmtzcGFjZShzdGF0ZUJlZm9yZSk7CglpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCXJldHVybiBfVXRpbHNfVHVwbGUyKHN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJfSBlbHNlIHsKCQl2YXIgX3YxID0gX3YwLmE7CgkJdmFyIGZpbGVPcGVuZWRJbkVkaXRvciA9IF92MS5iOwoJCXZhciBwYXJzZUZpbGVSZXN1bHQgPSBBMigKCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkkZWxtJGNvcmUkUmVzdWx0JEVycignRmFpbGVkIHRvIGRlY29kZSBmaWxlIGNvbnRlbnRzIGFzIHN0cmluZycpLAoJCQlBMigKCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQlmdW5jdGlvbiAoZmlsZUNvbnRlbnRTdHJpbmcpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPaygKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCWZpbGVDb250ZW50U3RyaW5nLAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGVFbG1BcHAkcGFyc2VFbG1Nb2R1bGVUZXh0KGZpbGVDb250ZW50U3RyaW5nKSkpOwoJCQkJfSwKCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHN0cmluZ0Zyb21GaWxlQ29udGVudChmaWxlT3BlbmVkSW5FZGl0b3IuYXNCeXRlcykpKTsKCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCXN0YXRlQmVmb3JlLAoJCQkJewoJCQkJCWNvbXBpbGF0aW9uOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywKCQkJCQlzeW50YXhJbnNwZWN0aW9uOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJe3BhcnNlRmlsZVJlc3VsdDogcGFyc2VGaWxlUmVzdWx0fSkKCQkJCX0pLAoJCQkkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kRGVwZW5kZW5jeUxvd2VyaW5nRXJyb3IgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRGVwZW5kZW5jeUxvd2VyaW5nRXJyb3InLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGNvbnRpbnVlTG93ZXJpbmdXaXRoUmVzb2x2ZWREZXBlbmRlbmN5ID0gRjIoCglmdW5jdGlvbiAoX3YwLCBjb21waWxhdGlvbkluUHJvZ3Jlc3MpIHsKCQl2YXIgZWxtTWFrZURlcGVuZGVuY3kgPSBfdjAuYTsKCQl2YXIgbGFzdEl0ZXJhdGlvblJlc3BvbnNlID0gX3YwLmI7CgkJdmFyIG5ld0RlcGVuZGVuY2llcyA9IGZ1bmN0aW9uICgpIHsKCQkJdmFyIF92MSA9IEEyKCRlbG0kY29yZSRNYXliZSRhbmRUaGVuLCAkZGFuZmlzaGdvbGQkYmFzZTY0X2J5dGVzJEJhc2U2NCR0b0J5dGVzLCBsYXN0SXRlcmF0aW9uUmVzcG9uc2Uub3V0cHV0RmlsZUNvbnRlbnRCYXNlNjQpOwoJCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJfSBlbHNlIHsKCQkJCXZhciBvdXRwdXRGaWxlQ29udGVudCA9IF92MS5hOwoJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJEVsbU1ha2VEZXBlbmRlbmN5KGVsbU1ha2VEZXBlbmRlbmN5KSwKCQkJCQkJb3V0cHV0RmlsZUNvbnRlbnQpCgkJCQkJXSk7CgkJCX0KCQl9KCk7CgkJdmFyIGRlcGVuZGVuY2llc0Zyb21Db21wbGV0ZWRJdGVyYXRpb25zID0gX1V0aWxzX2FwKGNvbXBpbGF0aW9uSW5Qcm9ncmVzcy5kZXBlbmRlbmNpZXNGcm9tQ29tcGxldGVkSXRlcmF0aW9ucywgbmV3RGVwZW5kZW5jaWVzKTsKCQl2YXIgbG93ZXJpbmdJdGVyYXRpb25Db21wbGV0ZSA9IEEyKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGNvbnRpbnVlTG93ZXJpbmcsIGRlcGVuZGVuY2llc0Zyb21Db21wbGV0ZWRJdGVyYXRpb25zLCBjb21waWxhdGlvbkluUHJvZ3Jlc3Mub3JpZ2luKTsKCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJY29tcGlsYXRpb25JblByb2dyZXNzLAoJCQl7ZGVwZW5kZW5jaWVzRnJvbUNvbXBsZXRlZEl0ZXJhdGlvbnM6IGRlcGVuZGVuY2llc0Zyb21Db21wbGV0ZWRJdGVyYXRpb25zLCBsb3dlcmluZ0xhc3RJdGVyYXRpb246IGxvd2VyaW5nSXRlcmF0aW9uQ29tcGxldGV9KTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbW1vbiRkZWNvZGVCYXNlNjRUb1N0cmluZyA9IEEyKAoJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCSRkYW5maXNoZ29sZCRiYXNlNjRfYnl0ZXMkQmFzZTY0JHRvQnl0ZXMsCgkkZWxtJGNvcmUkTWF5YmUkYW5kVGhlbigkYXV0aG9yJHByb2plY3QkQ29tbW9uJGRlY29kZUJ5dGVzVG9TdHJpbmcpKTsKdmFyICRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkQ29tcGlsZUVycm9yc1JlcG9ydCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdDb21waWxlRXJyb3JzUmVwb3J0JywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRWxtTWFrZUV4ZWN1dGFibGVGaWxlJEVsbU1ha2VSZXBvcnRDb21waWxlRXJyb3JTdHJ1Y3R1cmUgPSBGMygKCWZ1bmN0aW9uIChwYXRoLCBuYW1lLCBwcm9ibGVtcykgewoJCXJldHVybiB7bmFtZTogbmFtZSwgcGF0aDogcGF0aCwgcHJvYmxlbXM6IHByb2JsZW1zfTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEVsbU1ha2VFeGVjdXRhYmxlRmlsZSRFbG1NYWtlUmVwb3J0UHJvYmxlbSA9IEYzKAoJZnVuY3Rpb24gKHRpdGxlLCByZWdpb24sIG1lc3NhZ2UpIHsKCQlyZXR1cm4ge21lc3NhZ2U6IG1lc3NhZ2UsIHJlZ2lvbjogcmVnaW9uLCB0aXRsZTogdGl0bGV9OwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRWxtTWFrZUV4ZWN1dGFibGVGaWxlJEVsbU1ha2VSZXBvcnRNZXNzYWdlTGlzdEl0ZW1QbGFpbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdFbG1NYWtlUmVwb3J0TWVzc2FnZUxpc3RJdGVtUGxhaW4nLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkRWxtTWFrZVJlcG9ydE1lc3NhZ2VMaXN0SXRlbVN0eWxlZCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdFbG1NYWtlUmVwb3J0TWVzc2FnZUxpc3RJdGVtU3R5bGVkJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRWxtTWFrZUV4ZWN1dGFibGVGaWxlJEVsbU1ha2VSZXBvcnRNZXNzYWdlTGlzdEl0ZW1TdHlsZWRTdHJ1Y3R1cmUgPSBGNCgKCWZ1bmN0aW9uIChib2xkLCB1bmRlcmxpbmUsIGNvbG9yLCBzdHJpbmcpIHsKCQlyZXR1cm4ge2JvbGQ6IGJvbGQsIGNvbG9yOiBjb2xvciwgc3RyaW5nOiBzdHJpbmcsIHVuZGVybGluZTogdW5kZXJsaW5lfTsKCX0pOwp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJGJvb2wgPSBfSnNvbl9kZWNvZGVCb29sOwp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcDQgPSBfSnNvbl9tYXA0Owp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJG51bGxhYmxlID0gZnVuY3Rpb24gKGRlY29kZXIpIHsKCXJldHVybiAkZWxtJGpzb24kSnNvbiREZWNvZGUkb25lT2YoCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbnVsbCgkZWxtJGNvcmUkTWF5YmUkTm90aGluZyksCgkJCQlBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLCAkZWxtJGNvcmUkTWF5YmUkSnVzdCwgZGVjb2RlcikKCQkJXSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEVsbU1ha2VFeGVjdXRhYmxlRmlsZSRqc29uRGVjb2RlRWxtTWFrZVJlcG9ydE1lc3NhZ2VMaXN0SXRlbVN0eWxlZCA9IEE1KAoJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcDQsCgkkYXV0aG9yJHByb2plY3QkRWxtTWFrZUV4ZWN1dGFibGVGaWxlJEVsbU1ha2VSZXBvcnRNZXNzYWdlTGlzdEl0ZW1TdHlsZWRTdHJ1Y3R1cmUsCglBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsICdib2xkJywgJGVsbSRqc29uJEpzb24kRGVjb2RlJGJvb2wpLAoJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLCAndW5kZXJsaW5lJywgJGVsbSRqc29uJEpzb24kRGVjb2RlJGJvb2wpLAoJQTIoCgkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCSdjb2xvcicsCgkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG51bGxhYmxlKCRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpKSwKCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ3N0cmluZycsICRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpKTsKdmFyICRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkanNvbkRlY29kZUVsbU1ha2VSZXBvcnRNZXNzYWdlTGlzdEl0ZW0gPSAkZWxtJGpzb24kSnNvbiREZWNvZGUkb25lT2YoCglfTGlzdF9mcm9tQXJyYXkoCgkJWwoJCQlBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLCAkYXV0aG9yJHByb2plY3QkRWxtTWFrZUV4ZWN1dGFibGVGaWxlJEVsbU1ha2VSZXBvcnRNZXNzYWdlTGlzdEl0ZW1QbGFpbiwgJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsICRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkRWxtTWFrZVJlcG9ydE1lc3NhZ2VMaXN0SXRlbVN0eWxlZCwgJGF1dGhvciRwcm9qZWN0JEVsbU1ha2VFeGVjdXRhYmxlRmlsZSRqc29uRGVjb2RlRWxtTWFrZVJlcG9ydE1lc3NhZ2VMaXN0SXRlbVN0eWxlZCkKCQldKSk7CnZhciAkYXV0aG9yJHByb2plY3QkRWxtTWFrZUV4ZWN1dGFibGVGaWxlJEVsbU1ha2VSZXBvcnRSZWdpb24gPSBGMigKCWZ1bmN0aW9uIChzdGFydCwgZW5kKSB7CgkJcmV0dXJuIHtlbmQ6IGVuZCwgc3RhcnQ6IHN0YXJ0fTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEVsbU1ha2VFeGVjdXRhYmxlRmlsZSRFbG1NYWtlUmVwb3J0TG9jYXRpb24gPSBGMigKCWZ1bmN0aW9uIChsaW5lLCBjb2x1bW4pIHsKCQlyZXR1cm4ge2NvbHVtbjogY29sdW1uLCBsaW5lOiBsaW5lfTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEVsbU1ha2VFeGVjdXRhYmxlRmlsZSRqc29uRGVjb2RlRWxtTWFrZVJlcG9ydExvY2F0aW9uID0gQTMoCgkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwMiwKCSRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkRWxtTWFrZVJlcG9ydExvY2F0aW9uLAoJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLCAnbGluZScsICRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLCAnY29sdW1uJywgJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEVsbU1ha2VFeGVjdXRhYmxlRmlsZSRqc29uRGVjb2RlRWxtTWFrZVJlcG9ydFJlZ2lvbiA9IEEzKAoJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcDIsCgkkYXV0aG9yJHByb2plY3QkRWxtTWFrZUV4ZWN1dGFibGVGaWxlJEVsbU1ha2VSZXBvcnRSZWdpb24sCglBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsICdzdGFydCcsICRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkanNvbkRlY29kZUVsbU1ha2VSZXBvcnRMb2NhdGlvbiksCglBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsICdlbmQnLCAkYXV0aG9yJHByb2plY3QkRWxtTWFrZUV4ZWN1dGFibGVGaWxlJGpzb25EZWNvZGVFbG1NYWtlUmVwb3J0TG9jYXRpb24pKTsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRtYXAzID0gX0pzb25fbWFwMzsKdmFyICRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkanNvbkRlY29kZUVsbU1ha2VSZXBvcnRQcm9ibGVtID0gQTQoCgkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwMywKCSRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkRWxtTWFrZVJlcG9ydFByb2JsZW0sCglBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsICd0aXRsZScsICRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLCAncmVnaW9uJywgJGF1dGhvciRwcm9qZWN0JEVsbU1ha2VFeGVjdXRhYmxlRmlsZSRqc29uRGVjb2RlRWxtTWFrZVJlcG9ydFJlZ2lvbiksCglBMigKCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJJ21lc3NhZ2UnLAoJCSRlbG0kanNvbiRKc29uJERlY29kZSRsaXN0KCRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkanNvbkRlY29kZUVsbU1ha2VSZXBvcnRNZXNzYWdlTGlzdEl0ZW0pKSk7CnZhciAkYXV0aG9yJHByb2plY3QkRWxtTWFrZUV4ZWN1dGFibGVGaWxlJGpzb25EZWNvZGVFbG1NYWtlUmVwb3J0Q29tcGlsZUVycm9yID0gQTQoCgkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwMywKCSRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkRWxtTWFrZVJlcG9ydENvbXBpbGVFcnJvclN0cnVjdHVyZSwKCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ3BhdGgnLCAkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSwKCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ25hbWUnLCAkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSwKCUEyKAoJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkncHJvYmxlbXMnLAoJCSRlbG0kanNvbiRKc29uJERlY29kZSRsaXN0KCRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkanNvbkRlY29kZUVsbU1ha2VSZXBvcnRQcm9ibGVtKSkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEVsbU1ha2VFeGVjdXRhYmxlRmlsZSRqc29uRGVjb2RlRWxtTWFrZVJlcG9ydENvbXBpbGVFcnJvcnMgPSBBMigKCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkkYXV0aG9yJHByb2plY3QkRWxtTWFrZUV4ZWN1dGFibGVGaWxlJENvbXBpbGVFcnJvcnNSZXBvcnQsCglBMigKCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJJ2Vycm9ycycsCgkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxpc3QoJGF1dGhvciRwcm9qZWN0JEVsbU1ha2VFeGVjdXRhYmxlRmlsZSRqc29uRGVjb2RlRWxtTWFrZVJlcG9ydENvbXBpbGVFcnJvcikpKTsKdmFyICRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkRXJyb3JSZXBvcnQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRXJyb3JSZXBvcnQnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkRXJyb3JSZXBvcnRTdHJ1Y3R1cmUgPSBGMygKCWZ1bmN0aW9uIChwYXRoLCB0aXRsZSwgbWVzc2FnZSkgewoJCXJldHVybiB7bWVzc2FnZTogbWVzc2FnZSwgcGF0aDogcGF0aCwgdGl0bGU6IHRpdGxlfTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEVsbU1ha2VFeGVjdXRhYmxlRmlsZSRqc29uRGVjb2RlRWxtTWFrZVJlcG9ydEVycm9yID0gQTIoCgkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJJGF1dGhvciRwcm9qZWN0JEVsbU1ha2VFeGVjdXRhYmxlRmlsZSRFcnJvclJlcG9ydCwKCUE0KAoJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAzLAoJCSRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkRXJyb3JSZXBvcnRTdHJ1Y3R1cmUsCgkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ3BhdGgnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbnVsbGFibGUoJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZykpLAoJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ3RpdGxlJywgJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ21lc3NhZ2UnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGlzdCgkYXV0aG9yJHByb2plY3QkRWxtTWFrZUV4ZWN1dGFibGVGaWxlJGpzb25EZWNvZGVFbG1NYWtlUmVwb3J0TWVzc2FnZUxpc3RJdGVtKSkpKTsKdmFyICRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkdHlwZXNEZWNvZGVycyA9ICRlbG0kY29yZSREaWN0JGZyb21MaXN0KAoJX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJX1V0aWxzX1R1cGxlMignZXJyb3InLCAkYXV0aG9yJHByb2plY3QkRWxtTWFrZUV4ZWN1dGFibGVGaWxlJGpzb25EZWNvZGVFbG1NYWtlUmVwb3J0RXJyb3IpLAoJCQlfVXRpbHNfVHVwbGUyKCdjb21waWxlLWVycm9ycycsICRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkanNvbkRlY29kZUVsbU1ha2VSZXBvcnRDb21waWxlRXJyb3JzKQoJCV0pKTsKdmFyICRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkanNvbkRlY29kZUVsbU1ha2VSZXBvcnQgPSBBMigKCSRlbG0kanNvbiRKc29uJERlY29kZSRhbmRUaGVuLAoJZnVuY3Rpb24gKHR5cGVfKSB7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmYWlsKCdVbmtub3duIHJlcG9ydCB0eXBlOiBcJycgKyAodHlwZV8gKyAnXCcnKSksCgkJCUEyKCRlbG0kY29yZSREaWN0JGdldCwgdHlwZV8sICRhdXRob3IkcHJvamVjdCRFbG1NYWtlRXhlY3V0YWJsZUZpbGUkdHlwZXNEZWNvZGVycykpOwoJfSwKCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ3R5cGUnLCAkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR1cGRhdGVDb21waWxhdGlvbkZvckVsbU1ha2VSZXF1ZXN0UmVzcG9uc2UgPSBGMygKCWZ1bmN0aW9uIChlbG1NYWtlUmVxdWVzdCwgaHR0cFJlc3BvbnNlLCBjb21waWxhdGlvbkJlZm9yZSkgewoJCXZhciBlbG1NYWtlUmVzdWx0ID0gQTIoCgkJCSRlbG0kY29yZSRSZXN1bHQkbWFwLAoJCQlmdW5jdGlvbiAoZWxtTWFrZVJlc3BvbnNlKSB7CgkJCQl2YXIgcmVwb3J0RnJvbUpzb24gPSBmdW5jdGlvbiAoKSB7CgkJCQkJdmFyIF92MyA9IEEyKCRlbG0kanNvbiRKc29uJERlY29kZSRkZWNvZGVTdHJpbmcsICRlbG0kanNvbiRKc29uJERlY29kZSR2YWx1ZSwgZWxtTWFrZVJlc3BvbnNlLnJlcG9ydEpzb25Qcm9jZXNzT3V0cHV0LnN0YW5kYXJkRXJyb3IpOwoJCQkJCWlmIChfdjMuJCA9PT0gJ0VycicpIHsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBlbG1NYWtlUmVwb3J0SnNvbiA9IF92My5hOwoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcEVycm9yLAoJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRlcnJvclRvU3RyaW5nLAoJCQkJCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRkZWNvZGVWYWx1ZSwgJGF1dGhvciRwcm9qZWN0JEVsbU1ha2VFeGVjdXRhYmxlRmlsZSRqc29uRGVjb2RlRWxtTWFrZVJlcG9ydCwgZWxtTWFrZVJlcG9ydEpzb24pKSk7CgkJCQkJfQoJCQkJfSgpOwoJCQkJdmFyIGNvbXBpbGVkSHRtbERvY3VtZW50ID0gZnVuY3Rpb24gKCkgewoJCQkJCXZhciBfdjIgPSBlbG1NYWtlUmVzcG9uc2Uub3V0cHV0RmlsZUNvbnRlbnRCYXNlNjQ7CgkJCQkJaWYgKF92Mi4kID09PSAnTm90aGluZycpIHsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBvdXRwdXRGaWxlQ29udGVudEJhc2U2NCA9IF92Mi5hOwoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCQkJCQkJJ0Vycm9yIGRlY29kaW5nIGJhc2U2NDogJyArIG91dHB1dEZpbGVDb250ZW50QmFzZTY0LAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21tb24kZGVjb2RlQmFzZTY0VG9TdHJpbmcob3V0cHV0RmlsZUNvbnRlbnRCYXNlNjQpKSk7CgkJCQkJfQoJCQkJfSgpOwoJCQkJcmV0dXJuIHtjb21waWxlZEh0bWxEb2N1bWVudDogY29tcGlsZWRIdG1sRG9jdW1lbnQsIHJlcG9ydEZyb21Kc29uOiByZXBvcnRGcm9tSnNvbiwgcmVzcG9uc2U6IGVsbU1ha2VSZXNwb25zZX07CgkJCX0sCgkJCWh0dHBSZXNwb25zZSk7CgkJdmFyIF92MCA9IGNvbXBpbGF0aW9uQmVmb3JlLmxvd2VyaW5nTGFzdEl0ZXJhdGlvbjsKCQlpZiAoX3YwLiQgPT09ICdMb3dlcmluZ0NvbXBsZXRlJykgewoJCQl2YXIgbG93ZXJpbmdDb21wbGV0ZSA9IF92MC5hOwoJCQlyZXR1cm4gX1V0aWxzX2VxKGVsbU1ha2VSZXF1ZXN0LCBsb3dlcmluZ0NvbXBsZXRlLmVsbU1ha2VSZXF1ZXN0KSA/IF9VdGlsc19UdXBsZTIoCgkJCQlfVXRpbHNfdXBkYXRlKAoJCQkJCWNvbXBpbGF0aW9uQmVmb3JlLAoJCQkJCXsKCQkJCQkJbG93ZXJpbmdMYXN0SXRlcmF0aW9uOiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRMb3dlcmluZ0NvbXBsZXRlKAoJCQkJCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCQlsb3dlcmluZ0NvbXBsZXRlLAoJCQkJCQkJCXsKCQkJCQkJCQkJZWxtTWFrZVJlc3VsdDogJGVsbSRjb3JlJE1heWJlJEp1c3QoZWxtTWFrZVJlc3VsdCkKCQkJCQkJCQl9KSkKCQkJCQl9KSwKCQkJCSRlbG0kY29yZSRNYXliZSROb3RoaW5nKSA6IF9VdGlsc19UdXBsZTIoY29tcGlsYXRpb25CZWZvcmUsICRlbG0kY29yZSRNYXliZSROb3RoaW5nKTsKCQl9IGVsc2UgewoJCQl2YXIgbG93ZXJpbmdDb250aW51ZSA9IF92MC5hOwoJCQlpZiAoX1V0aWxzX2VxKGVsbU1ha2VSZXF1ZXN0LCBsb3dlcmluZ0NvbnRpbnVlLmVsbU1ha2VSZXF1ZXN0KSkgewoJCQkJaWYgKGVsbU1ha2VSZXN1bHQuJCA9PT0gJ0VycicpIHsKCQkJCQl2YXIgZWxtTWFrZUVyciA9IGVsbU1ha2VSZXN1bHQuYTsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCWNvbXBpbGF0aW9uQmVmb3JlLAoJCQkJCQkJewoJCQkJCQkJCWxvd2VyaW5nTGFzdEl0ZXJhdGlvbjogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kTG93ZXJpbmdDb21wbGV0ZSgKCQkJCQkJCQkJewoJCQkJCQkJCQkJZWxtTWFrZVJlcXVlc3Q6IGNvbXBpbGF0aW9uQmVmb3JlLm9yaWdpbi5yZXF1ZXN0RnJvbVVzZXIsCgkJCQkJCQkJCQllbG1NYWtlUmVzdWx0OiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywKCQkJCQkJCQkJCWxvd2VyaW5nUmVzdWx0OiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiREZXBlbmRlbmN5TG93ZXJpbmdFcnJvcihlbG1NYWtlRXJyKSkKCQkJCQkJCQkJfSkKCQkJCQkJCX0pLAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkTm90aGluZyk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBlbG1NYWtlT2sgPSBlbG1NYWtlUmVzdWx0LmE7CgkJCQkJdmFyIGNvbXBpbGF0aW9uID0gQTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGNvbnRpbnVlTG93ZXJpbmdXaXRoUmVzb2x2ZWREZXBlbmRlbmN5LAoJCQkJCQlfVXRpbHNfVHVwbGUyKGxvd2VyaW5nQ29udGludWUuZm9yRGVwZW5kZW5jeUVsbU1ha2VSZXF1ZXN0LCBlbG1NYWtlT2sucmVzcG9uc2UpLAoJCQkJCQljb21waWxhdGlvbkJlZm9yZSk7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCWNvbXBpbGF0aW9uLAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHJlcXVlc3RUb0JhY2tlbmRDbWRGcm9tQ29tcGlsYXRpb25JblByb2dyZXNzKGNvbXBpbGF0aW9uKSkpOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoY29tcGlsYXRpb25CZWZvcmUsICRlbG0kY29yZSRNYXliZSROb3RoaW5nKTsKCQkJfQoJCX0KCX0pOwp2YXIgJGVsbV9jb21tdW5pdHkkbGlzdF9leHRyYSRMaXN0JEV4dHJhJGZpbmQgPSBGMigKCWZ1bmN0aW9uIChwcmVkaWNhdGUsIGxpc3QpIHsKCQlmaW5kOgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmICghbGlzdC5iKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCX0gZWxzZSB7CgkJCQl2YXIgZmlyc3QgPSBsaXN0LmE7CgkJCQl2YXIgcmVzdCA9IGxpc3QuYjsKCQkJCWlmIChwcmVkaWNhdGUoZmlyc3QpKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KGZpcnN0KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyICR0ZW1wJHByZWRpY2F0ZSA9IHByZWRpY2F0ZSwKCQkJCQkJJHRlbXAkbGlzdCA9IHJlc3Q7CgkJCQkJcHJlZGljYXRlID0gJHRlbXAkcHJlZGljYXRlOwoJCQkJCWxpc3QgPSAkdGVtcCRsaXN0OwoJCQkJCWNvbnRpbnVlIGZpbmQ7CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGZpbmRGaWxlTG9jYXRpb25Gcm9tVXJpID0gRjIoCglmdW5jdGlvbiAodXJpLCB3b3Jrc3BhY2VTdGF0ZSkgewoJCXZhciBfdjAgPSBBMigKCQkJJGVsbV9jb21tdW5pdHkkbGlzdF9leHRyYSRMaXN0JEV4dHJhJGZpbmQsCgkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCXZhciBmaWxlUGF0aCA9IF92MS5hOwoJCQkJcmV0dXJuIF9VdGlsc19lcSgKCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRtb25hY29VcmlGb3JGaWxlUGF0aChmaWxlUGF0aCksCgkJCQkJdXJpKTsKCQkJfSwKCQkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJGZsYXRMaXN0T2ZCbG9ic0Zyb21GaWxlVHJlZU5vZGUod29ya3NwYWNlU3RhdGUuZmlsZVRyZWUpKTsKCQlpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJfSBlbHNlIHsKCQkJdmFyIF92MiA9IF92MC5hOwoJCQl2YXIgZmlsZVBhdGggPSBfdjIuYTsKCQkJdmFyIF92MyA9ICRlbG0kY29yZSRMaXN0JHJldmVyc2UoZmlsZVBhdGgpOwoJCQlpZiAoIV92My5iKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCX0gZWxzZSB7CgkJCQl2YXIgZmlsZU5hbWUgPSBfdjMuYTsKCQkJCXZhciBkaXJlY3RvcnlQYXRoUmV2ZXJzZWQgPSBfdjMuYjsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKGRpcmVjdG9yeVBhdGhSZXZlcnNlZCksCgkJCQkJCWZpbGVOYW1lKSk7CgkJCX0KCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZUZvck9wZW5Db2RlRWRpdG9yUmVxdWVzdCA9IEYyKAoJZnVuY3Rpb24gKHJlcXVlc3QsIHdvcmtzcGFjZVN0YXRlQmVmb3JlKSB7CgkJdmFyIF92MCA9IEEyKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGZpbmRGaWxlTG9jYXRpb25Gcm9tVXJpLCByZXF1ZXN0LnVyaSwgd29ya3NwYWNlU3RhdGVCZWZvcmUpOwoJCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHdvcmtzcGFjZVN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCX0gZWxzZSB7CgkJCXZhciBmaWxlTG9jYXRpb24gPSBfdjAuYTsKCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQlfVXRpbHNfdXBkYXRlKAoJCQkJCXdvcmtzcGFjZVN0YXRlQmVmb3JlLAoJCQkJCXsKCQkJCQkJZWRpdGluZzogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQl7ZmlsZUxvY2F0aW9uOiBmaWxlTG9jYXRpb24sIG9wZW5Qb3NpdGlvbjogcmVxdWVzdC5wb3NpdGlvbn0pCgkJCQkJfSksCgkJCQkkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRQcm92aWRlQ29tcGxldGlvbkl0ZW1zUmVxdWVzdCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQcm92aWRlQ29tcGxldGlvbkl0ZW1zUmVxdWVzdCcsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0VsbVBhY2thZ2VWZXJzaW9uSWRlbnRpZmVyID0gZnVuY3Rpb24gKHZhbHVlVG9FbmNvZGUpIHsKCXZhciB0YWdBcmd1bWVudDAgPSB2YWx1ZVRvRW5jb2RlLmE7Cgl2YXIgdGFnQXJndW1lbnQxID0gdmFsdWVUb0VuY29kZS5iOwoJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ0VsbVBhY2thZ2VWZXJzaW9uMDE5SWRlbnRpZmVyJywKCQkJCUEyKAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHRhZ0FyZ3VtZW50MCksCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHRhZ0FyZ3VtZW50MSkKCQkJCQkJXSkpKQoJCQldKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9MYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2VfRmlsZUxvY2F0aW9uID0gZnVuY3Rpb24gKHZhbHVlVG9FbmNvZGUpIHsKCWlmICh2YWx1ZVRvRW5jb2RlLiQgPT09ICdFbG1QYWNrYWdlRmlsZUxvY2F0aW9uJykgewoJCXZhciB0YWdBcmd1bWVudDAgPSB2YWx1ZVRvRW5jb2RlLmE7CgkJdmFyIHRhZ0FyZ3VtZW50MSA9IHZhbHVlVG9FbmNvZGUuYjsKCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJJ0VsbVBhY2thZ2VGaWxlTG9jYXRpb24nLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9FbG1QYWNrYWdlVmVyc2lvbklkZW50aWZlcih0YWdBcmd1bWVudDApLAoJCQkJCQkJCUEyKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX19nZW5lcmljX0xpc3QsCgkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCQkJCQkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHR5cGVfYXJnKTsKCQkJCQkJCQl9LAoJCQkJCQkJCXRhZ0FyZ3VtZW50MSkKCQkJCQkJCV0pKSkKCQkJCV0pKTsKCX0gZWxzZSB7CgkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJJ1dvcmtzcGFjZUZpbGVMb2NhdGlvbicsCgkJCQkJQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0YWdBcmd1bWVudDApCgkJCQkJCQldKSkpCgkJCQldKSk7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9fZ2VuZXJpY19NYXliZSA9IEYyKAoJZnVuY3Rpb24gKGVuY29kZUp1c3QsIHZhbHVlVG9FbmNvZGUpIHsKCQlpZiAodmFsdWVUb0VuY29kZS4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknTm90aGluZycsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LCAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LCBfTGlzdF9OaWwpKQoJCQkJCV0pKTsKCQl9IGVsc2UgewoJCQl2YXIganVzdCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknSnVzdCcsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsCgkJCQkJCQllbmNvZGVKdXN0LAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVtqdXN0XSkpKQoJCQkJCV0pKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9SZXF1ZXN0ID0gZnVuY3Rpb24gKHZhbHVlVG9FbmNvZGUpIHsKCXN3aXRjaCAodmFsdWVUb0VuY29kZS4kKSB7CgkJY2FzZSAnQWRkRWxtUGFja2FnZVZlcnNpb25SZXF1ZXN0JzoKCQkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJdmFyIHRhZ0FyZ3VtZW50MSA9IHZhbHVlVG9FbmNvZGUuYjsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknQWRkRWxtUGFja2FnZVZlcnNpb25SZXF1ZXN0JywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9MYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2VfRWxtUGFja2FnZVZlcnNpb25JZGVudGlmZXIodGFnQXJndW1lbnQwKSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX19nZW5lcmljX0xpc3QsCgkJCQkJCQkJCWZ1bmN0aW9uICh0eXBlX2FyZykgewoJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX19nZW5lcmljX0xpc3QsCgkJCQkJCQkJCQkJCQlmdW5jdGlvbiAodHlwZV9hcmdfKSB7CgkJCQkJCQkJCQkJCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodHlwZV9hcmdfKTsKCQkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJCQkJCQkJCQkJdmFyIGl0ZW1fMCA9IF92MS5hOwoJCQkJCQkJCQkJCQkJCXZhciBpdGVtXzEgPSBfdjEuYjsKCQkJCQkJCQkJCQkJCQlyZXR1cm4gaXRlbV8wOwoJCQkJCQkJCQkJCQkJfSh0eXBlX2FyZykpLAoJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkJCSdhc0Jhc2U2NCcsCgkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcoCgkJCQkJCQkJCQkJCQkJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIGl0ZW1fMCA9IF92Mi5hOwoJCQkJCQkJCQkJCQkJCQkJCXZhciBpdGVtXzEgPSBfdjIuYjsKCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gaXRlbV8xOwoJCQkJCQkJCQkJCQkJCQkJfSh0eXBlX2FyZykuYXNCYXNlNjQpKSwKCQkJCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJCQkJJ2FzVGV4dCcsCgkJCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfX2dlbmVyaWNfTWF5YmUsCgkJCQkJCQkJCQkJCQkJCQlmdW5jdGlvbiAodHlwZV9hcmdfKSB7CgkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodHlwZV9hcmdfKTsKCQkJCQkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCQkJCQlmdW5jdGlvbiAoX3YzKSB7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIGl0ZW1fMCA9IF92My5hOwoJCQkJCQkJCQkJCQkJCQkJCXZhciBpdGVtXzEgPSBfdjMuYjsKCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gaXRlbV8xOwoJCQkJCQkJCQkJCQkJCQkJfSh0eXBlX2FyZykuYXNUZXh0KSkKCQkJCQkJCQkJCQkJCQldKSkKCQkJCQkJCQkJCQkJXSkpOwoJCQkJCQkJCQl9LAoJCQkJCQkJCQl0YWdBcmd1bWVudDEpCgkJCQkJCQkJXSkpKQoJCQkJCV0pKTsKCQljYXNlICdBZGRXb3Jrc3BhY2VGaWxlUmVxdWVzdCc6CgkJCXZhciB0YWdBcmd1bWVudDAgPSB2YWx1ZVRvRW5jb2RlLmE7CgkJCXZhciB0YWdBcmd1bWVudDEgPSB2YWx1ZVRvRW5jb2RlLmI7CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ0FkZFdvcmtzcGFjZUZpbGVSZXF1ZXN0JywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHRhZ0FyZ3VtZW50MCksCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCSdhc0Jhc2U2NCcsCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0YWdBcmd1bWVudDEuYXNCYXNlNjQpKSwKCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCSdhc1RleHQnLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9fZ2VuZXJpY19NYXliZSwKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCQkJCQkJCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0eXBlX2FyZyk7CgkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCXRhZ0FyZ3VtZW50MS5hc1RleHQpKQoJCQkJCQkJCQkJXSkpCgkJCQkJCQkJXSkpKQoJCQkJCV0pKTsKCQljYXNlICdEZWxldGVXb3Jrc3BhY2VGaWxlUmVxdWVzdCc6CgkJCXZhciB0YWdBcmd1bWVudDAgPSB2YWx1ZVRvRW5jb2RlLmE7CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ0RlbGV0ZVdvcmtzcGFjZUZpbGVSZXF1ZXN0JywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHRhZ0FyZ3VtZW50MCkKCQkJCQkJCQldKSkpCgkJCQkJXSkpOwoJCWNhc2UgJ1Byb3ZpZGVDb21wbGV0aW9uSXRlbXNSZXF1ZXN0JzoKCQkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknUHJvdmlkZUNvbXBsZXRpb25JdGVtc1JlcXVlc3QnLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCSdmaWxlUGF0aE9wZW5lZEluRWRpdG9yJywKCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHRhZ0FyZ3VtZW50MC5maWxlUGF0aE9wZW5lZEluRWRpdG9yKSksCgkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQknY3Vyc29yTGluZU51bWJlcicsCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludCh0YWdBcmd1bWVudDAuY3Vyc29yTGluZU51bWJlcikpLAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJJ2N1cnNvckNvbHVtbicsCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludCh0YWdBcmd1bWVudDAuY3Vyc29yQ29sdW1uKSkKCQkJCQkJCQkJCV0pKQoJCQkJCQkJCV0pKSkKCQkJCQldKSk7CgkJY2FzZSAnUHJvdmlkZURlZmluaXRpb25SZXF1ZXN0JzoKCQkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknUHJvdmlkZURlZmluaXRpb25SZXF1ZXN0JywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQknZmlsZUxvY2F0aW9uJywKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9MYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2VfRmlsZUxvY2F0aW9uKHRhZ0FyZ3VtZW50MC5maWxlTG9jYXRpb24pKSwKCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCSdwb3NpdGlvbkxpbmVOdW1iZXInLAoJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodGFnQXJndW1lbnQwLnBvc2l0aW9uTGluZU51bWJlcikpLAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJJ3Bvc2l0aW9uQ29sdW1uJywKCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KHRhZ0FyZ3VtZW50MC5wb3NpdGlvbkNvbHVtbikpCgkJCQkJCQkJCQldKSkKCQkJCQkJCQldKSkpCgkJCQkJXSkpOwoJCWNhc2UgJ1Byb3ZpZGVIb3ZlclJlcXVlc3QnOgoJCQl2YXIgdGFnQXJndW1lbnQwID0gdmFsdWVUb0VuY29kZS5hOwoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdQcm92aWRlSG92ZXJSZXF1ZXN0JywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQknZmlsZUxvY2F0aW9uJywKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9MYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2VfRmlsZUxvY2F0aW9uKHRhZ0FyZ3VtZW50MC5maWxlTG9jYXRpb24pKSwKCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCSdwb3NpdGlvbkxpbmVOdW1iZXInLAoJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodGFnQXJndW1lbnQwLnBvc2l0aW9uTGluZU51bWJlcikpLAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJJ3Bvc2l0aW9uQ29sdW1uJywKCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KHRhZ0FyZ3VtZW50MC5wb3NpdGlvbkNvbHVtbikpCgkJCQkJCQkJCQldKSkKCQkJCQkJCQldKSkpCgkJCQkJXSkpOwoJCWNhc2UgJ1RleHREb2N1bWVudFJlZmVyZW5jZXNSZXF1ZXN0JzoKCQkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknVGV4dERvY3VtZW50UmVmZXJlbmNlc1JlcXVlc3QnLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCSdmaWxlTG9jYXRpb24nLAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9GaWxlTG9jYXRpb24odGFnQXJndW1lbnQwLmZpbGVMb2NhdGlvbikpLAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJJ3Bvc2l0aW9uTGluZU51bWJlcicsCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludCh0YWdBcmd1bWVudDAucG9zaXRpb25MaW5lTnVtYmVyKSksCgkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkncG9zaXRpb25Db2x1bW4nLAoJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodGFnQXJndW1lbnQwLnBvc2l0aW9uQ29sdW1uKSkKCQkJCQkJCQkJCV0pKQoJCQkJCQkJCV0pKSkKCQkJCQldKSk7CgkJY2FzZSAnVGV4dERvY3VtZW50UmVuYW1lUmVxdWVzdCc6CgkJCXZhciB0YWdBcmd1bWVudDAgPSB2YWx1ZVRvRW5jb2RlLmE7CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ1RleHREb2N1bWVudFJlbmFtZVJlcXVlc3QnLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCSdmaWxlUGF0aCcsCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0YWdBcmd1bWVudDAuZmlsZVBhdGgpKSwKCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCSdwb3NpdGlvbkxpbmVOdW1iZXInLAoJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodGFnQXJndW1lbnQwLnBvc2l0aW9uTGluZU51bWJlcikpLAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJJ3Bvc2l0aW9uQ29sdW1uJywKCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KHRhZ0FyZ3VtZW50MC5wb3NpdGlvbkNvbHVtbikpLAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJJ25ld05hbWUnLAoJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodGFnQXJndW1lbnQwLm5ld05hbWUpKQoJCQkJCQkJCQkJXSkpCgkJCQkJCQkJXSkpKQoJCQkJCV0pKTsKCQlkZWZhdWx0OgoJCQl2YXIgdGFnQXJndW1lbnQwID0gdmFsdWVUb0VuY29kZS5hOwoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdUZXh0RG9jdW1lbnRTeW1ib2xSZXF1ZXN0JywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHRhZ0FyZ3VtZW50MCkKCQkJCQkJCQldKSkpCgkJCQkJXSkpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfNDIzNzQxMzA1ID0gZnVuY3Rpb24gKHZhbHVlVG9FbmNvZGUpIHsKCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdyZXF1ZXN0JywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ3dvcmtzcGFjZScsCgkJCQkJCQlBMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9GaWxlVHJlZV9GaWxlVHJlZU5vZGUsCgkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCQkJCQkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJJ2FzQmFzZTY0JywKCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0eXBlX2FyZy5hc0Jhc2U2NCkpLAoJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQknYXNUZXh0JywKCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9fZ2VuZXJpY19NYXliZSwKCQkJCQkJCQkJCQkJCWZ1bmN0aW9uICh0eXBlX2FyZ18pIHsKCQkJCQkJCQkJCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0eXBlX2FyZ18pOwoJCQkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQkJCXR5cGVfYXJnLmFzVGV4dCkpCgkJCQkJCQkJCQkJXSkpOwoJCQkJCQkJCX0sCgkJCQkJCQkJdmFsdWVUb0VuY29kZS5yZXF1ZXN0LndvcmtzcGFjZSkpLAoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCSdyZXF1ZXN0JywKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9SZXF1ZXN0KHZhbHVlVG9FbmNvZGUucmVxdWVzdC5yZXF1ZXN0KSkKCQkJCQkJXSkpKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknaWQnLAoJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh2YWx1ZVRvRW5jb2RlLmlkKSkKCQkJXSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZUxhbmd1YWdlU2VydmljZVJlcXVlc3RJbldvcmtzcGFjZSA9ICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlXzQyMzc0MTMwNTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHNlbmRSZXF1ZXN0VG9MYW5ndWFnZVNlcnZpY2UgPSBfUGxhdGZvcm1fb3V0Z29pbmdQb3J0KCdzZW5kUmVxdWVzdFRvTGFuZ3VhZ2VTZXJ2aWNlJywgJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR3b3Jrc3BhY2VGb3JMYW5nU2VydmljZVJlcXVlc3QgPSBmdW5jdGlvbiAod29ya3NwYWNlKSB7CglyZXR1cm4gQTIoCgkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJG1hcEJsb2JzLAoJCWZ1bmN0aW9uIChfdjApIHsKCQkJdmFyIGFzQnl0ZXMgPSBfdjAuYXNCeXRlczsKCQkJdmFyIGFzQmFzZTY0ID0gX3YwLmFzQmFzZTY0OwoJCQlyZXR1cm4gewoJCQkJYXNCYXNlNjQ6IGFzQmFzZTY0LAoJCQkJYXNUZXh0OiAkYXV0aG9yJHByb2plY3QkQ29tbW9uJGRlY29kZUJ5dGVzVG9TdHJpbmcoYXNCeXRlcykKCQkJfTsKCQl9LAoJCXdvcmtzcGFjZS5maWxlVHJlZSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR1cGRhdGVGb3JSZXF1ZXN0VG9MYW5ndWFnZVNlcnZpY2UgPSBGMigKCWZ1bmN0aW9uIChyZXF1ZXN0LCB3b3Jrc3BhY2VTdGF0ZUJlZm9yZSkgewoJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQl3b3Jrc3BhY2VTdGF0ZUJlZm9yZSwKCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kc2VuZFJlcXVlc3RUb0xhbmd1YWdlU2VydmljZSgKCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVMYW5ndWFnZVNlcnZpY2VSZXF1ZXN0SW5Xb3Jrc3BhY2UoCgkJCQkJewoJCQkJCQlpZDogJycsCgkJCQkJCXJlcXVlc3Q6IHsKCQkJCQkJCXJlcXVlc3Q6IHJlcXVlc3QsCgkJCQkJCQl3b3Jrc3BhY2U6ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHdvcmtzcGFjZUZvckxhbmdTZXJ2aWNlUmVxdWVzdCh3b3Jrc3BhY2VTdGF0ZUJlZm9yZSkKCQkJCQkJfQoJCQkJCX0pKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZVRvUHJvdmlkZUNvbXBsZXRpb25JdGVtc1JlcXVlc3QgPSBGMigKCWZ1bmN0aW9uIChyZXF1ZXN0LCB3b3Jrc3BhY2VTdGF0ZUJlZm9yZSkgewoJCXZhciBfdjAgPSB3b3Jrc3BhY2VTdGF0ZUJlZm9yZS5lZGl0aW5nOwoJCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHdvcmtzcGFjZVN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCX0gZWxzZSB7CgkJCXZhciBlZGl0aW5nID0gX3YwLmE7CgkJCXZhciBfdjEgPSBlZGl0aW5nLmZpbGVMb2NhdGlvbjsKCQkJdmFyIGRpcmVjdG9yeVBhdGggPSBfdjEuYTsKCQkJdmFyIGZpbGVOYW1lID0gX3YxLmI7CgkJCXJldHVybiBBMigKCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZUZvclJlcXVlc3RUb0xhbmd1YWdlU2VydmljZSwKCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkUHJvdmlkZUNvbXBsZXRpb25JdGVtc1JlcXVlc3QoCgkJCQkJewoJCQkJCQljdXJzb3JDb2x1bW46IHJlcXVlc3QuY3Vyc29yQ29sdW1uLAoJCQkJCQljdXJzb3JMaW5lTnVtYmVyOiByZXF1ZXN0LmN1cnNvckxpbmVOdW1iZXIsCgkJCQkJCWZpbGVQYXRoT3BlbmVkSW5FZGl0b3I6IEEyKAoJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJJy8nLAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWwoJCQkJCQkJCQkJZGlyZWN0b3J5UGF0aCwKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVtmaWxlTmFtZV0pCgkJCQkJCQkJCV0pKSkKCQkJCQl9KSwKCQkJCXdvcmtzcGFjZVN0YXRlQmVmb3JlKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkUHJvdmlkZURlZmluaXRpb25SZXF1ZXN0ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1Byb3ZpZGVEZWZpbml0aW9uUmVxdWVzdCcsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZmlsZUxvY2F0aW9uRnJvbVBhdGhJdGVtcyA9IGZ1bmN0aW9uIChwYXRoSXRlbXMpIHsKCXJldHVybiAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFdvcmtzcGFjZUZpbGVMb2NhdGlvbigKCQlBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcvJywgcGF0aEl0ZW1zKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR1cGRhdGVUb1Byb3ZpZGVEZWZpbml0aW9uUmVxdWVzdCA9IEYyKAoJZnVuY3Rpb24gKHJlcXVlc3QsIHdvcmtzcGFjZVN0YXRlQmVmb3JlKSB7CgkJdmFyIF92MCA9IHdvcmtzcGFjZVN0YXRlQmVmb3JlLmVkaXRpbmc7CgkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIod29ya3NwYWNlU3RhdGVCZWZvcmUsICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJfSBlbHNlIHsKCQkJdmFyIGVkaXRpbmcgPSBfdjAuYTsKCQkJdmFyIF92MSA9IGVkaXRpbmcuZmlsZUxvY2F0aW9uOwoJCQl2YXIgZGlyZWN0b3J5UGF0aCA9IF92MS5hOwoJCQl2YXIgZmlsZU5hbWUgPSBfdjEuYjsKCQkJcmV0dXJuIEEyKAoJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdXBkYXRlRm9yUmVxdWVzdFRvTGFuZ3VhZ2VTZXJ2aWNlLAoJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRQcm92aWRlRGVmaW5pdGlvblJlcXVlc3QoCgkJCQkJewoJCQkJCQlmaWxlTG9jYXRpb246ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGZpbGVMb2NhdGlvbkZyb21QYXRoSXRlbXMoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQlkaXJlY3RvcnlQYXRoLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJW2ZpbGVOYW1lXSkKCQkJCQkJCQkJXSkpKSwKCQkJCQkJcG9zaXRpb25Db2x1bW46IHJlcXVlc3QucG9zaXRpb25Db2x1bW4sCgkJCQkJCXBvc2l0aW9uTGluZU51bWJlcjogcmVxdWVzdC5wb3NpdGlvbkxpbmVOdW1iZXIKCQkJCQl9KSwKCQkJCXdvcmtzcGFjZVN0YXRlQmVmb3JlKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkUHJvdmlkZUhvdmVyUmVxdWVzdCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQcm92aWRlSG92ZXJSZXF1ZXN0JywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR1cGRhdGVUb1Byb3ZpZGVIb3ZlclJlcXVlc3QgPSBGMigKCWZ1bmN0aW9uIChyZXF1ZXN0LCB3b3Jrc3BhY2VTdGF0ZUJlZm9yZSkgewoJCXZhciBfdjAgPSB3b3Jrc3BhY2VTdGF0ZUJlZm9yZS5lZGl0aW5nOwoJCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHdvcmtzcGFjZVN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCX0gZWxzZSB7CgkJCXZhciBlZGl0aW5nID0gX3YwLmE7CgkJCXZhciBfdjEgPSBlZGl0aW5nLmZpbGVMb2NhdGlvbjsKCQkJdmFyIGRpcmVjdG9yeVBhdGggPSBfdjEuYTsKCQkJdmFyIGZpbGVOYW1lID0gX3YxLmI7CgkJCXJldHVybiBBMigKCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZUZvclJlcXVlc3RUb0xhbmd1YWdlU2VydmljZSwKCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkUHJvdmlkZUhvdmVyUmVxdWVzdCgKCQkJCQl7CgkJCQkJCWZpbGVMb2NhdGlvbjogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZmlsZUxvY2F0aW9uRnJvbVBhdGhJdGVtcygKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCWRpcmVjdG9yeVBhdGgsCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbZmlsZU5hbWVdKQoJCQkJCQkJCQldKSkpLAoJCQkJCQlwb3NpdGlvbkNvbHVtbjogcmVxdWVzdC5wb3NpdGlvbkNvbHVtbiwKCQkJCQkJcG9zaXRpb25MaW5lTnVtYmVyOiByZXF1ZXN0LnBvc2l0aW9uTGluZU51bWJlcgoJCQkJCX0pLAoJCQkJd29ya3NwYWNlU3RhdGVCZWZvcmUpOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdXBkYXRlV29ya3NwYWNlV2l0aG91dENtZFRvVXBkYXRlRWRpdG9yID0gRjMoCglmdW5jdGlvbiAodXBkYXRlQ29uZmlnLCBldmVudCwgc3RhdGVCZWZvcmUpIHsKCQl1cGRhdGVXb3Jrc3BhY2VXaXRob3V0Q21kVG9VcGRhdGVFZGl0b3I6CgkJd2hpbGUgKHRydWUpIHsKCQkJc3dpdGNoIChldmVudC4kKSB7CgkJCQljYXNlICdVc2VySW5wdXRPcGVuRmlsZUluRWRpdG9yJzoKCQkJCQl2YXIgZmlsZUxvY2F0aW9uID0gZXZlbnQuYTsKCQkJCQl2YXIgX3YxID0gZmlsZUxvY2F0aW9uOwoJCQkJCXZhciBkaXJlY3RvcnlQYXRoID0gX3YxLmE7CgkJCQkJdmFyIGZpbGVOYW1lID0gX3YxLmI7CgkJCQkJcmV0dXJuIF9VdGlsc19lcSgKCQkJCQkJQTIoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkZ2V0QmxvYkF0UGF0aEZyb21GaWxlVHJlZSwKCQkJCQkJCV9VdGlsc19hcCgKCQkJCQkJCQlkaXJlY3RvcnlQYXRoLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJW2ZpbGVOYW1lXSkpLAoJCQkJCQkJc3RhdGVCZWZvcmUuZmlsZVRyZWUpLAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkTm90aGluZykgPyBfVXRpbHNfVHVwbGUyKHN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpIDogX1V0aWxzX1R1cGxlMigKCQkJCQkJZnVuY3Rpb24gKCkgewoJCQkJCQkJdmFyIGVkaXRpbmcgPSBzdGF0ZUJlZm9yZS5lZGl0aW5nOwoJCQkJCQkJcmV0dXJuIF9VdGlsc191cGRhdGUoCgkJCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCQkJewoJCQkJCQkJCQllZGl0aW5nOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQkJCXtmaWxlTG9jYXRpb246IGZpbGVMb2NhdGlvbiwgb3BlblBvc2l0aW9uOiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0RWRpdG9yT3BlblBvc2l0aW9ufSkKCQkJCQkJCQl9KTsKCQkJCQkJfSgpLAoJCQkJCQkkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQkJY2FzZSAnVXNlcklucHV0Q2hhbmdlVGV4dEluRWRpdG9yJzoKCQkJCQl2YXIgZWRpdG9yU2NvcGUgPSBldmVudC5hOwoJCQkJCXZhciBpbnB1dFRleHQgPSBldmVudC5iOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJCQl2YXIgX3YyID0gc3RhdGVCZWZvcmUuZWRpdGluZzsKCQkJCQkJCWlmIChfdjIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJcmV0dXJuIHN0YXRlQmVmb3JlOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgZWRpdGluZyA9IF92Mi5hOwoJCQkJCQkJCXZhciBfdjMgPSBlZGl0aW5nLmZpbGVMb2NhdGlvbjsKCQkJCQkJCQl2YXIgZGlyZWN0b3J5UGF0aCA9IF92My5hOwoJCQkJCQkJCXZhciBmaWxlTmFtZSA9IF92My5iOwoJCQkJCQkJCXZhciBleHBlY3RlZFVyaSA9IEEyKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJG1vbmFjb1VyaUZvckRpcmVjdG9yeVBhdGhBbmRGaWxlTmFtZSwgZGlyZWN0b3J5UGF0aCwgZmlsZU5hbWUpOwoJCQkJCQkJCXZhciBmaWxlUGF0aCA9IF9VdGlsc19hcCgKCQkJCQkJCQkJZGlyZWN0b3J5UGF0aCwKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJW2ZpbGVOYW1lXSkpOwoJCQkJCQkJCXJldHVybiAoIV9VdGlsc19lcShlZGl0b3JTY29wZS51cmksIGV4cGVjdGVkVXJpKSkgPyBzdGF0ZUJlZm9yZSA6IF9VdGlsc191cGRhdGUoCgkJCQkJCQkJCXN0YXRlQmVmb3JlLAoJCQkJCQkJCQl7CgkJCQkJCQkJCQllbG1Gb3JtYXQ6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLAoJCQkJCQkJCQkJZmlsZVRyZWU6IEEyKAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJHNldEJsb2JBdFBhdGhJblNvcnRlZEZpbGVUcmVlRnJvbUJ5dGVzLAoJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCWZpbGVQYXRoLAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRmaWxlQ29udGVudEZyb21TdHJpbmcoaW5wdXRUZXh0KSksCgkJCQkJCQkJCQkJc3RhdGVCZWZvcmUuZmlsZVRyZWUpLAoJCQkJCQkJCQkJbGFzdFRleHRSZWNlaXZlZEZyb21FZGl0b3I6ICRlbG0kY29yZSRNYXliZSRKdXN0KGlucHV0VGV4dCkKCQkJCQkJCQkJfSk7CgkJCQkJCQl9CgkJCQkJCX0oKSwKCQkJCQkJJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQkJCWNhc2UgJ1VzZXJJbnB1dFJldmVhbFBvc2l0aW9uSW5FZGl0b3InOgoJCQkJCXZhciByZXZlYWxQb3NpdGlvbkluRWRpdG9yID0gZXZlbnQuYTsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCXZhciBfdjQgPSAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRmaWxlT3BlbmVkSW5FZGl0b3JGcm9tV29ya3NwYWNlKHN0YXRlQmVmb3JlKTsKCQkJCQkJCWlmIChfdjQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIF92NSA9IF92NC5hOwoJCQkJCQkJCXZhciBlZGl0aW5nID0gX3Y1LmE7CgkJCQkJCQkJcmV0dXJuIF9VdGlsc19lcShlZGl0aW5nLmZpbGVMb2NhdGlvbiwgcmV2ZWFsUG9zaXRpb25JbkVkaXRvci5maWxlTG9jYXRpb24pID8gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcmV2ZWFsUG9zaXRpb25JbkNlbnRlckluTW9uYWNvRWRpdG9yQ21kKAoJCQkJCQkJCQl7Y29sdW1uOiByZXZlYWxQb3NpdGlvbkluRWRpdG9yLmNvbHVtbiwgbGluZU51bWJlcjogcmV2ZWFsUG9zaXRpb25JbkVkaXRvci5saW5lTnVtYmVyfSkgOiAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmU7CgkJCQkJCQl9CgkJCQkJCX0oKSk7CgkJCQljYXNlICdNb25hY29FZGl0b3JFdmVudCc6CgkJCQkJdmFyIG1vbmFjb0VkaXRvckV2ZW50ID0gZXZlbnQuYTsKCQkJCQl2YXIgX3Y2ID0gQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGRlY29kZVZhbHVlLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRqc29uRGVjb2RlTWVzc2FnZUZyb21Nb25hY29FZGl0b3IsIG1vbmFjb0VkaXRvckV2ZW50KTsKCQkJCQlpZiAoX3Y2LiQgPT09ICdFcnInKSB7CgkJCQkJCXZhciBkZWNvZGVFcnJvciA9IF92Ni5hOwoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCQkJewoJCQkJCQkJCQlkZWNvZGVNZXNzYWdlRnJvbU1vbmFjb0VkaXRvckVycm9yOiAkZWxtJGNvcmUkTWF5YmUkSnVzdChkZWNvZGVFcnJvcikKCQkJCQkJCQl9KSwKCQkJCQkJCSRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGRlY29kZWRNb25hY29FZGl0b3JFdmVudCA9IF92Ni5hOwoJCQkJCQlzd2l0Y2ggKGRlY29kZWRNb25hY29FZGl0b3JFdmVudC4kKSB7CgkJCQkJCQljYXNlICdEaWRDaGFuZ2VDb250ZW50RXZlbnQnOgoJCQkJCQkJCXZhciBjb250ZW50ID0gZGVjb2RlZE1vbmFjb0VkaXRvckV2ZW50LmE7CgkJCQkJCQkJcmV0dXJuIEEzKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR1cGRhdGVXb3Jrc3BhY2VXaXRob3V0Q21kVG9VcGRhdGVFZGl0b3IsCgkJCQkJCQkJCXVwZGF0ZUNvbmZpZywKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRDaGFuZ2VUZXh0SW5FZGl0b3IsCgkJCQkJCQkJCQl7dXJpOiBjb250ZW50LnVyaX0sCgkJCQkJCQkJCQljb250ZW50LnRleHRNb2RlbFZhbHVlKSwKCQkJCQkJCQkJc3RhdGVCZWZvcmUpOwoJCQkJCQkJY2FzZSAnQ29tcGxldGVkU2V0dXBFdmVudCc6CgkJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCQkJCXtsYXN0VGV4dFJlY2VpdmVkRnJvbUVkaXRvcjogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSwKCQkJCQkJCQkJJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQkJCQkJCWNhc2UgJ0VkaXRvckFjdGlvbkNsb3NlRWRpdG9yRXZlbnQnOgoJCQkJCQkJCXZhciAkdGVtcCR1cGRhdGVDb25maWcgPSB1cGRhdGVDb25maWcsCgkJCQkJCQkJCSR0ZW1wJGV2ZW50ID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0Q2xvc2VFZGl0b3IsCgkJCQkJCQkJCSR0ZW1wJHN0YXRlQmVmb3JlID0gc3RhdGVCZWZvcmU7CgkJCQkJCQkJdXBkYXRlQ29uZmlnID0gJHRlbXAkdXBkYXRlQ29uZmlnOwoJCQkJCQkJCWV2ZW50ID0gJHRlbXAkZXZlbnQ7CgkJCQkJCQkJc3RhdGVCZWZvcmUgPSAkdGVtcCRzdGF0ZUJlZm9yZTsKCQkJCQkJCQljb250aW51ZSB1cGRhdGVXb3Jrc3BhY2VXaXRob3V0Q21kVG9VcGRhdGVFZGl0b3I7CgkJCQkJCQljYXNlICdFZGl0b3JBY3Rpb25Gb3JtYXREb2N1bWVudEV2ZW50JzoKCQkJCQkJCQl2YXIgJHRlbXAkdXBkYXRlQ29uZmlnID0gdXBkYXRlQ29uZmlnLAoJCQkJCQkJCQkkdGVtcCRldmVudCA9ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dEZvcm1hdCwKCQkJCQkJCQkJJHRlbXAkc3RhdGVCZWZvcmUgPSBzdGF0ZUJlZm9yZTsKCQkJCQkJCQl1cGRhdGVDb25maWcgPSAkdGVtcCR1cGRhdGVDb25maWc7CgkJCQkJCQkJZXZlbnQgPSAkdGVtcCRldmVudDsKCQkJCQkJCQlzdGF0ZUJlZm9yZSA9ICR0ZW1wJHN0YXRlQmVmb3JlOwoJCQkJCQkJCWNvbnRpbnVlIHVwZGF0ZVdvcmtzcGFjZVdpdGhvdXRDbWRUb1VwZGF0ZUVkaXRvcjsKCQkJCQkJCWNhc2UgJ0VkaXRvckFjdGlvbkNvbXBpbGVFdmVudCc6CgkJCQkJCQkJdmFyICR0ZW1wJHVwZGF0ZUNvbmZpZyA9IHVwZGF0ZUNvbmZpZywKCQkJCQkJCQkJJHRlbXAkZXZlbnQgPSAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRDb21waWxlLAoJCQkJCQkJCQkkdGVtcCRzdGF0ZUJlZm9yZSA9IHN0YXRlQmVmb3JlOwoJCQkJCQkJCXVwZGF0ZUNvbmZpZyA9ICR0ZW1wJHVwZGF0ZUNvbmZpZzsKCQkJCQkJCQlldmVudCA9ICR0ZW1wJGV2ZW50OwoJCQkJCQkJCXN0YXRlQmVmb3JlID0gJHRlbXAkc3RhdGVCZWZvcmU7CgkJCQkJCQkJY29udGludWUgdXBkYXRlV29ya3NwYWNlV2l0aG91dENtZFRvVXBkYXRlRWRpdG9yOwoJCQkJCQkJY2FzZSAnRWRpdG9yQWN0aW9uSW5zcGVjdFN5bnRheEV2ZW50JzoKCQkJCQkJCQl2YXIgJHRlbXAkdXBkYXRlQ29uZmlnID0gdXBkYXRlQ29uZmlnLAoJCQkJCQkJCQkkdGVtcCRldmVudCA9ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dEluc3BlY3RTeW50YXgsCgkJCQkJCQkJCSR0ZW1wJHN0YXRlQmVmb3JlID0gc3RhdGVCZWZvcmU7CgkJCQkJCQkJdXBkYXRlQ29uZmlnID0gJHRlbXAkdXBkYXRlQ29uZmlnOwoJCQkJCQkJCWV2ZW50ID0gJHRlbXAkZXZlbnQ7CgkJCQkJCQkJc3RhdGVCZWZvcmUgPSAkdGVtcCRzdGF0ZUJlZm9yZTsKCQkJCQkJCQljb250aW51ZSB1cGRhdGVXb3Jrc3BhY2VXaXRob3V0Q21kVG9VcGRhdGVFZGl0b3I7CgkJCQkJCQljYXNlICdSZXF1ZXN0Q29tcGxldGlvbkl0ZW1zRXZlbnQnOgoJCQkJCQkJCXZhciByZXF1ZXN0Q29tcGxldGlvbkl0ZW1zID0gZGVjb2RlZE1vbmFjb0VkaXRvckV2ZW50LmE7CgkJCQkJCQkJcmV0dXJuIEEyKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZVRvUHJvdmlkZUNvbXBsZXRpb25JdGVtc1JlcXVlc3QsIHJlcXVlc3RDb21wbGV0aW9uSXRlbXMsIHN0YXRlQmVmb3JlKTsKCQkJCQkJCWNhc2UgJ1JlcXVlc3RIb3ZlckV2ZW50JzoKCQkJCQkJCQl2YXIgcmVxdWVzdEhvdmVyRXZlbnQgPSBkZWNvZGVkTW9uYWNvRWRpdG9yRXZlbnQuYTsKCQkJCQkJCQlyZXR1cm4gQTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdXBkYXRlVG9Qcm92aWRlSG92ZXJSZXF1ZXN0LCByZXF1ZXN0SG92ZXJFdmVudCwgc3RhdGVCZWZvcmUpOwoJCQkJCQkJY2FzZSAnUmVxdWVzdERlZmluaXRpb25FdmVudCc6CgkJCQkJCQkJdmFyIHJlcXVlc3REZWZpbml0aW9uRXZlbnQgPSBkZWNvZGVkTW9uYWNvRWRpdG9yRXZlbnQuYTsKCQkJCQkJCQlyZXR1cm4gQTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdXBkYXRlVG9Qcm92aWRlRGVmaW5pdGlvblJlcXVlc3QsIHJlcXVlc3REZWZpbml0aW9uRXZlbnQsIHN0YXRlQmVmb3JlKTsKCQkJCQkJCWNhc2UgJ09wZW5Db2RlRWRpdG9yRXZlbnQnOgoJCQkJCQkJCXZhciBvcGVuQ29kZUVkaXRvckV2ZW50ID0gZGVjb2RlZE1vbmFjb0VkaXRvckV2ZW50LmE7CgkJCQkJCQkJcmV0dXJuIEEyKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZUZvck9wZW5Db2RlRWRpdG9yUmVxdWVzdCwgb3BlbkNvZGVFZGl0b3JFdmVudCwgc3RhdGVCZWZvcmUpOwoJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihzdGF0ZUJlZm9yZSwgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQkJCQkJfQoJCQkJCX0KCQkJCWNhc2UgJ1VzZXJJbnB1dEZvcm1hdCc6CgkJCQkJdmFyIF92OCA9ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGVsbUZvcm1hdENtZEZyb21TdGF0ZShzdGF0ZUJlZm9yZSk7CgkJCQkJaWYgKF92OC4kID09PSAnTm90aGluZycpIHsKCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoc3RhdGVCZWZvcmUsICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIF92OSA9IF92OC5hOwoJCQkJCQl2YXIgbW9kdWxlVGV4dCA9IF92OS5hOwoJCQkJCQl2YXIgZWxtRm9ybWF0Q21kID0gX3Y5LmI7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCQl7CgkJCQkJCQkJCWVsbUZvcm1hdDogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRFbG1Gb3JtYXRJblByb2dyZXNzKAoJCQkJCQkJCQkJCXtpbnB1dE1vZHVsZVRleHQ6IG1vZHVsZVRleHQsIHN0YXJ0VGltZTogdXBkYXRlQ29uZmlnLnRpbWV9KSkKCQkJCQkJCQl9KSwKCQkJCQkJCWVsbUZvcm1hdENtZCk7CgkJCQkJfQoJCQkJY2FzZSAnVXNlcklucHV0Q2FuY2VsRm9ybWF0dGluZyc6CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCXtlbG1Gb3JtYXQ6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nfSksCgkJCQkJCSRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQljYXNlICdVc2VySW5wdXRDb21waWxlJzoKCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kY29tcGlsZUZpbGVPcGVuZWRJbkVkaXRvcigKCQkJCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCXN0YXRlQmVmb3JlLAoJCQkJCQkJe3ZpZXdFbmxhcmdlZFBhbmU6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nfSkpOwoJCQkJY2FzZSAnVXNlcklucHV0SW5zcGVjdFN5bnRheCc6CgkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHN5bnRheEluc3BlY3RGaWxlT3BlbmVkSW5FZGl0b3IoCgkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCXt2aWV3RW5sYXJnZWRQYW5lOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZ30pKTsKCQkJCWNhc2UgJ1VzZXJJbnB1dENsb3NlRWRpdG9yJzoKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJZnVuY3Rpb24gKCkgewoJCQkJCQkJdmFyIGVkaXRpbmcgPSBzdGF0ZUJlZm9yZS5lZGl0aW5nOwoJCQkJCQkJcmV0dXJuIF9VdGlsc191cGRhdGUoCgkJCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCQkJe2VkaXRpbmc6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLCBlbG1Gb3JtYXQ6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nfSk7CgkJCQkJCX0oKSwKCQkJCQkJJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQkJCWNhc2UgJ0JhY2tlbmRFbG1Gb3JtYXRSZXNwb25zZUV2ZW50JzoKCQkJCQl2YXIgZm9ybWF0UmVzcG9uc2VFdmVudCA9IGV2ZW50LmE7CgkJCQkJdmFyIF92MTAgPSBzdGF0ZUJlZm9yZS5lbG1Gb3JtYXQ7CgkJCQkJaWYgKChfdjEwLiQgPT09ICdKdXN0JykgJiYgKF92MTAuYS4kID09PSAnRWxtRm9ybWF0SW5Qcm9ncmVzcycpKSB7CgkJCQkJCXZhciBmb3JtYXRTdGFydCA9IF92MTAuYS5hOwoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCQlpZiAoIV9VdGlsc19lcSgKCQkJCQkJCQkJJGVsbSRjb3JlJE1heWJlJEp1c3QoZm9ybWF0UmVzcG9uc2VFdmVudC5maWxlTG9jYXRpb24pLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJCQkJCXJldHVybiAkLmZpbGVMb2NhdGlvbjsKCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQlzdGF0ZUJlZm9yZS5lZGl0aW5nKSkpIHsKCQkJCQkJCQkJcmV0dXJuIHN0YXRlQmVmb3JlOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBfdjExID0gQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkYW5kVGhlbiwKCQkJCQkJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCQkJCQkJcmV0dXJuICQuZm9ybWF0dGVkVGV4dDsKCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JHRvTWF5YmUoZm9ybWF0UmVzcG9uc2VFdmVudC5yZXN1bHQpKTsKCQkJCQkJCQkJaWYgKF92MTEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJCQlyZXR1cm4gc3RhdGVCZWZvcmU7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQl2YXIgZm9ybWF0dGVkVGV4dCA9IF92MTEuYTsKCQkJCQkJCQkJCXZhciBmb3JtYXRSZXN1bHQgPSBBMigkZWxtJGNvcmUkUmVzdWx0JG1hcCwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcGFyc2VFbG1Gb3JtYXRSZXNwb25zZSwgZm9ybWF0UmVzcG9uc2VFdmVudC5yZXN1bHQpOwoJCQkJCQkJCQkJdmFyIF92MTIgPSBmb3JtYXRSZXNwb25zZUV2ZW50LmZpbGVMb2NhdGlvbjsKCQkJCQkJCQkJCXZhciBkaXJlY3RvcnlQYXRoID0gX3YxMi5hOwoJCQkJCQkJCQkJdmFyIGZpbGVOYW1lID0gX3YxMi5iOwoJCQkJCQkJCQkJdmFyIGZpbGVQYXRoID0gX1V0aWxzX2FwKAoJCQkJCQkJCQkJCWRpcmVjdG9yeVBhdGgsCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbZmlsZU5hbWVdKSk7CgkJCQkJCQkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJCWVsbUZvcm1hdDogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCQkJCQlBMigkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRFbG1Gb3JtYXRSZXN1bHQsIGZvcm1hdFN0YXJ0LCBmb3JtYXRSZXN1bHQpKSwKCQkJCQkJCQkJCQkJZmlsZVRyZWU6IEEyKAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlSW5Xb3Jrc3BhY2Ukc2V0QmxvYkF0UGF0aEluU29ydGVkRmlsZVRyZWVGcm9tQnl0ZXMsCgkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJCWZpbGVQYXRoLAoJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGZpbGVDb250ZW50RnJvbVN0cmluZyhmb3JtYXR0ZWRUZXh0KSksCgkJCQkJCQkJCQkJCQlzdGF0ZUJlZm9yZS5maWxlVHJlZSkKCQkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0oKSwKCQkJCQkJCSRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoc3RhdGVCZWZvcmUsICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQkJfQoJCQkJY2FzZSAnQmFja2VuZEVsbU1ha2VSZXNwb25zZUV2ZW50JzoKCQkJCQl2YXIgcmVxdWVzdElkZW50aXR5ID0gZXZlbnQuYTsKCQkJCQl2YXIgaHR0cFJlc3BvbnNlID0gZXZlbnQuYjsKCQkJCQl2YXIgX3YxMyA9IHN0YXRlQmVmb3JlLmNvbXBpbGF0aW9uOwoJCQkJCWlmIChfdjEzLiQgPT09ICdKdXN0JykgewoJCQkJCQl2YXIgY29tcGlsYXRpb25CZWZvcmUgPSBfdjEzLmE7CgkJCQkJCXZhciBfdjE0ID0gQTMoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdXBkYXRlQ29tcGlsYXRpb25Gb3JFbG1NYWtlUmVxdWVzdFJlc3BvbnNlLCByZXF1ZXN0SWRlbnRpdHksIGh0dHBSZXNwb25zZSwgY29tcGlsYXRpb25CZWZvcmUpOwoJCQkJCQl2YXIgY29tcGlsYXRpb24gPSBfdjE0LmE7CgkJCQkJCXZhciBjbWQgPSBfdjE0LmI7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCQl7CgkJCQkJCQkJCWNvbXBpbGF0aW9uOiAkZWxtJGNvcmUkTWF5YmUkSnVzdChjb21waWxhdGlvbiksCgkJCQkJCQkJCWVsbUZvcm1hdDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcKCQkJCQkJCQl9KSwKCQkJCQkJCUEyKCRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lLCBjbWQpKTsKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihzdGF0ZUJlZm9yZSwgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQkJCQl9CgkJCQljYXNlICdVc2VySW5wdXRTZXRFbmxhcmdlZFBhbmUnOgoJCQkJCXZhciBlbmxhcmdlZFBhbmUgPSBldmVudC5hOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlfVXRpbHNfdXBkYXRlKAoJCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCQl7dmlld0VubGFyZ2VkUGFuZTogZW5sYXJnZWRQYW5lfSksCgkJCQkJCSRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQljYXNlICdVc2VySW5wdXRTZXRJbnNwZWN0aW9uT25Db21waWxlJzoKCQkJCQl2YXIgZW5hYmxlSW5zcGVjdGlvbiA9IGV2ZW50LmE7CgkJCQkJdmFyIHN0YXRlID0gX1V0aWxzX3VwZGF0ZSgKCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCXtlbmFibGVJbnNwZWN0aW9uT25Db21waWxlOiBlbmFibGVJbnNwZWN0aW9ufSk7CgkJCQkJaWYgKF9VdGlsc19lcShzdGF0ZSwgc3RhdGVCZWZvcmUpKSB7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciAkdGVtcCR1cGRhdGVDb25maWcgPSB1cGRhdGVDb25maWcsCgkJCQkJCQkkdGVtcCRldmVudCA9ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dENvbXBpbGUsCgkJCQkJCQkkdGVtcCRzdGF0ZUJlZm9yZSA9IHN0YXRlOwoJCQkJCQl1cGRhdGVDb25maWcgPSAkdGVtcCR1cGRhdGVDb25maWc7CgkJCQkJCWV2ZW50ID0gJHRlbXAkZXZlbnQ7CgkJCQkJCXN0YXRlQmVmb3JlID0gJHRlbXAkc3RhdGVCZWZvcmU7CgkJCQkJCWNvbnRpbnVlIHVwZGF0ZVdvcmtzcGFjZVdpdGhvdXRDbWRUb1VwZGF0ZUVkaXRvcjsKCQkJCQl9CgkJCQlkZWZhdWx0OgoJCQkJCXZhciByZXNwb25zZUpzb24gPSBldmVudC5hOwoJCQkJCXZhciBfdjE1ID0gQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGRlY29kZVZhbHVlLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRqc29uRGVjb2RlTGFuZ3VhZ2VTZXJ2aWNlUmVzcG9uc2UsIHJlc3BvbnNlSnNvbik7CgkJCQkJaWYgKF92MTUuJCA9PT0gJ0VycicpIHsKCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoc3RhdGVCZWZvcmUsICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIHJlc3BvbnNlV2l0aElkID0gX3YxNS5hOwoJCQkJCQl2YXIgX3YxNiA9IHJlc3BvbnNlV2l0aElkLnJlc3BvbnNlOwoJCQkJCQlpZiAoX3YxNi4kID09PSAnRXJyJykgewoJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoc3RhdGVCZWZvcmUsICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgcmVzcG9uc2UgPSBfdjE2LmE7CgkJCQkJCQl2YXIgY21kID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJCXN3aXRjaCAocmVzcG9uc2UuJCkgewoJCQkJCQkJCQljYXNlICdQcm92aWRlSG92ZXJSZXNwb25zZSc6CgkJCQkJCQkJCQl2YXIgcHJvdmlkZUhvdmVyID0gcmVzcG9uc2UuYTsKCQkJCQkJCQkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRwcm92aWRlSG92ZXJJbk1vbmFjb0VkaXRvckNtZChwcm92aWRlSG92ZXIpOwoJCQkJCQkJCQljYXNlICdQcm92aWRlQ29tcGxldGlvbkl0ZW1zUmVzcG9uc2UnOgoJCQkJCQkJCQkJdmFyIGNvbXBsZXRpb25JdGVtcyA9IHJlc3BvbnNlLmE7CgkJCQkJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcHJvdmlkZUNvbXBsZXRpb25JdGVtc0luTW9uYWNvRWRpdG9yQ21kKGNvbXBsZXRpb25JdGVtcyk7CgkJCQkJCQkJCWNhc2UgJ1Byb3ZpZGVEZWZpbml0aW9uUmVzcG9uc2UnOgoJCQkJCQkJCQkJdmFyIGxvY2F0aW9uc0luRmlsZXMgPSByZXNwb25zZS5hOwoJCQkJCQkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHByb3ZpZGVEZWZpbml0aW9uSW5Nb25hY29FZGl0b3JDbWQobG9jYXRpb25zSW5GaWxlcyk7CgkJCQkJCQkJCWNhc2UgJ1dvcmtzcGFjZVN1bW1hcnlSZXNwb25zZSc6CgkJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lOwoJCQkJCQkJCQljYXNlICdUZXh0RG9jdW1lbnRTeW1ib2xSZXNwb25zZSc6CgkJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lOwoJCQkJCQkJCQljYXNlICdUZXh0RG9jdW1lbnRSZWZlcmVuY2VzUmVzcG9uc2UnOgoJCQkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZTsKCQkJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmU7CgkJCQkJCQkJfQoJCQkJCQkJfSgpOwoJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoc3RhdGVCZWZvcmUsIGNtZCk7CgkJCQkJCX0KCQkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZVdvcmtzcGFjZSA9IEYzKAoJZnVuY3Rpb24gKHVwZGF0ZUNvbmZpZywgZXZlbnQsIHN0YXRlQmVmb3JlQXBwbHlpbmdFdmVudCkgewoJCXZhciBfdjAgPSBBMygkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR1cGRhdGVXb3Jrc3BhY2VXaXRob3V0Q21kVG9VcGRhdGVFZGl0b3IsIHVwZGF0ZUNvbmZpZywgZXZlbnQsIHN0YXRlQmVmb3JlQXBwbHlpbmdFdmVudCk7CgkJdmFyIHN0YXRlQWZ0ZXJBcHBseUV2ZW50ID0gX3YwLmE7CgkJdmFyIGV2ZW50Q21kID0gX3YwLmI7CgkJdmFyIF92MSA9IEEyKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZVdvcmtzcGFjZUFmdGVyRXZlbnQsIHN0YXRlQmVmb3JlQXBwbHlpbmdFdmVudCwgc3RhdGVBZnRlckFwcGx5RXZlbnQpOwoJCXZhciBzdGF0ZSA9IF92MS5hOwoJCXZhciBhZnRlckV2ZW50Q21kID0gX3YxLmI7CgkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCXN0YXRlLAoJCQkkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJGJhdGNoKAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVtldmVudENtZCwgYWZ0ZXJFdmVudENtZF0pKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVzZXJJbnB1dEZvY3VzT3V0c2lkZVRpdGxlYmFyTWVudSA9IGZ1bmN0aW9uIChzdGF0ZUJlZm9yZSkgewoJdmFyIHBvcHVwSXNPcGVuRm9yVGl0bGViYXJNZW51ID0gZnVuY3Rpb24gKCkgewoJCXZhciBfdjAgPSBzdGF0ZUJlZm9yZS5wb3B1cDsKCQlpZiAoKF92MC4kID09PSAnSnVzdCcpICYmIChfdjAuYS4kID09PSAnVGl0bGViYXJNZW51JykpIHsKCQkJdmFyIF92MSA9IF92MC5hOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfSgpOwoJcmV0dXJuIHBvcHVwSXNPcGVuRm9yVGl0bGViYXJNZW51ID8gX1V0aWxzX3VwZGF0ZSgKCQlzdGF0ZUJlZm9yZSwKCQl7cG9wdXA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nfSkgOiBzdGF0ZUJlZm9yZTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZSA9IEYyKAoJZnVuY3Rpb24gKGV2ZW50LCBzdGF0ZUJlZm9yZSkgewoJCXVwZGF0ZToKCQl3aGlsZSAodHJ1ZSkgewoJCQlzd2l0Y2ggKGV2ZW50LiQpIHsKCQkJCWNhc2UgJ1RpbWVIYXNBcnJpdmVkJzoKCQkJCQl2YXIgdGltZSA9IGV2ZW50LmE7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCXt0aW1lOiB0aW1lfSksCgkJCQkJCSRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQljYXNlICdVcmxDaGFuZ2UnOgoJCQkJCXZhciB1cmwgPSBldmVudC5hOwoJCQkJCXJldHVybiBBMigkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRwcm9jZXNzRXZlbnRVcmxDaGFuZ2VkLCB1cmwsIHN0YXRlQmVmb3JlKTsKCQkJCWNhc2UgJ1VybFJlcXVlc3QnOgoJCQkJCXZhciB1cmxSZXF1ZXN0ID0gZXZlbnQuYTsKCQkJCQlpZiAodXJsUmVxdWVzdC4kID09PSAnSW50ZXJuYWwnKSB7CgkJCQkJCXZhciB1cmwgPSB1cmxSZXF1ZXN0LmE7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGJyb3dzZXIkQnJvd3NlciROYXZpZ2F0aW9uJHB1c2hVcmwsCgkJCQkJCQkJc3RhdGVCZWZvcmUubmF2aWdhdGlvbktleSwKCQkJCQkJCQkkZWxtJHVybCRVcmwkdG9TdHJpbmcodXJsKSkpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciB1cmwgPSB1cmxSZXF1ZXN0LmE7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCQkkZWxtJGJyb3dzZXIkQnJvd3NlciROYXZpZ2F0aW9uJGxvYWQodXJsKSk7CgkJCQkJfQoJCQkJY2FzZSAnVXNlcklucHV0VG9nZ2xlVGl0bGVCYXJNZW51JzoKCQkJCQl2YXIgbWVudUVudHJ5ID0gZXZlbnQuYTsKCQkJCQl2YXIgZnJvbU9wZW5lZCA9IGZ1bmN0aW9uIChvcGVuZWQpIHsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVGl0bGViYXJNZW51LCBtZW51RW50cnksIG9wZW5lZCkpOwoJCQkJCX07CgkJCQkJdmFyIHBvcHVwID0gX1V0aWxzX2VxKAoJCQkJCQlzdGF0ZUJlZm9yZS5wb3B1cCwKCQkJCQkJZnJvbU9wZW5lZCh0cnVlKSkgPyBmcm9tT3BlbmVkKGZhbHNlKSA6IGZyb21PcGVuZWQodHJ1ZSk7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCXtwb3B1cDogcG9wdXB9KSwKCQkJCQkJJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQkJCWNhc2UgJ1VzZXJJbnB1dE1vdXNlT3ZlclRpdGxlQmFyTWVudSc6CgkJCQkJdmFyIG1heWJlTWVudUVudHJ5ID0gZXZlbnQuYTsKCQkJCQl2YXIgX3YyID0gc3RhdGVCZWZvcmUud29ya3NwYWNlOwoJCQkJCWlmIChfdjIuJCA9PT0gJ1dvcmtzcGFjZUFjdGl2ZScpIHsKCQkJCQkJdmFyIGZyb21PcGVuZWQgPSBmdW5jdGlvbiAob3BlbmVkKSB7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJCQkJCQlmdW5jdGlvbiAobWVudUVudHJ5KSB7CgkJCQkJCQkJCXJldHVybiBBMigkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRUaXRsZWJhck1lbnUsIG1lbnVFbnRyeSwgb3BlbmVkKTsKCQkJCQkJCQl9LAoJCQkJCQkJCW1heWJlTWVudUVudHJ5KTsKCQkJCQkJfTsKCQkJCQkJdmFyIHBvcHVwID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJdmFyIF92MyA9IHN0YXRlQmVmb3JlLnBvcHVwOwoJCQkJCQkJaWYgKF92My4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQlyZXR1cm4gZnJvbU9wZW5lZChmYWxzZSk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWlmIChfdjMuYS4kID09PSAnTW9kYWxEaWFsb2cnKSB7CgkJCQkJCQkJCXJldHVybiBzdGF0ZUJlZm9yZS5wb3B1cDsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgX3Y0ID0gX3YzLmE7CgkJCQkJCQkJCXZhciBvcGVuZWQgPSBfdjQuYjsKCQkJCQkJCQkJcmV0dXJuIChvcGVuZWQgJiYgX1V0aWxzX2VxKG1heWJlTWVudUVudHJ5LCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZykpID8gc3RhdGVCZWZvcmUucG9wdXAgOiBmcm9tT3BlbmVkKG9wZW5lZCk7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9KCk7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCQl7cG9wdXA6IHBvcHVwfSksCgkJCQkJCQkkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQkJCX0KCQkJCWNhc2UgJ1VzZXJJbnB1dEdldExpbmtUb1dvcmtzcGFjZSc6CgkJCQkJdmFyIGdlbmVyYXRlTGluayA9IGV2ZW50LmE7CgkJCQkJdmFyIF92NSA9IHN0YXRlQmVmb3JlLndvcmtzcGFjZTsKCQkJCQlpZiAoX3Y1LiQgPT09ICdXb3Jrc3BhY2VBY3RpdmUnKSB7CgkJCQkJCXZhciB3b3Jrc3BhY2VBY3RpdmUgPSBfdjUuYTsKCQkJCQkJdmFyIHVybFRvV29ya3NwYWNlID0gJGVsbSR1cmwkVXJsJHRvU3RyaW5nKAoJCQkJCQkJQTMoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kc2V0V29ya3NwYWNlU3RhdGVJblVybEZvckJvb2ttYXJrLAoJCQkJCQkJCXtjcmVhdGVEaWZmSWZCYXNlQXZhaWxhYmxlOiBnZW5lcmF0ZUxpbmsuY3JlYXRlRGlmZklmQmFzZUF2YWlsYWJsZX0sCgkJCQkJCQkJd29ya3NwYWNlQWN0aXZlLAoJCQkJCQkJCXN0YXRlQmVmb3JlKSk7CgkJCQkJCXZhciBkaWFsb2cgPSB7dXJsVG9Xb3Jrc3BhY2U6IHVybFRvV29ya3NwYWNlfTsKCQkJCQkJdmFyIGNtZCA9IEEyKCRlbG0kYnJvd3NlciRCcm93c2VyJE5hdmlnYXRpb24kcHVzaFVybCwgc3RhdGVCZWZvcmUubmF2aWdhdGlvbktleSwgdXJsVG9Xb3Jrc3BhY2UpOwoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCQkJewoJCQkJCQkJCQlwb3B1cDogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRNb2RhbERpYWxvZygKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRHZXRMaW5rVG9Xb3Jrc3BhY2VEaWFsb2coZGlhbG9nKSkpCgkJCQkJCQkJfSksCgkJCQkJCQljbWQpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQkJCX0KCQkJCWNhc2UgJ1VzZXJJbnB1dExvYWRGcm9tR2l0T3BlbkRpYWxvZyc6CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCXsKCQkJCQkJCQlwb3B1cDogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJE1vZGFsRGlhbG9nKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kTG9hZEZyb21HaXREaWFsb2coCgkJCQkJCQkJCQkJe2xvYWRDb21wb3NpdGlvblJlc3VsdDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsIHJlcXVlc3Q6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLCB1cmxJbnRvR2l0UmVwb3NpdG9yeTogJyd9KSkpCgkJCQkJCQl9KSwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZm9jdXNJbnB1dFVybEVsZW1lbnRDbWQpOwoJCQkJY2FzZSAnVXNlcklucHV0TG9hZEZyb21HaXQnOgoJCQkJCXZhciBkaWFsb2dFdmVudCA9IGV2ZW50LmE7CgkJCQkJdmFyIF92NiA9IHN0YXRlQmVmb3JlLnBvcHVwOwoJCQkJCWlmICgoKF92Ni4kID09PSAnSnVzdCcpICYmIChfdjYuYS4kID09PSAnTW9kYWxEaWFsb2cnKSkgJiYgKF92Ni5hLmEuJCA9PT0gJ0xvYWRGcm9tR2l0RGlhbG9nJykpIHsKCQkJCQkJdmFyIGRpYWxvZ1N0YXRlQmVmb3JlID0gX3Y2LmEuYS5hOwoJCQkJCQl2YXIgX3Y3ID0gQTMoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR1cGRhdGVGb3JVc2VySW5wdXRMb2FkRnJvbUdpdCwKCQkJCQkJCXt0aW1lOiBzdGF0ZUJlZm9yZS50aW1lfSwKCQkJCQkJCWRpYWxvZ0V2ZW50LAoJCQkJCQkJZGlhbG9nU3RhdGVCZWZvcmUpOwoJCQkJCQl2YXIgZGlhbG9nU3RhdGUgPSBfdjcuYTsKCQkJCQkJdmFyIGNtZCA9IF92Ny5iOwoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCQkJewoJCQkJCQkJCQlwb3B1cDogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRNb2RhbERpYWxvZygKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRMb2FkRnJvbUdpdERpYWxvZyhkaWFsb2dTdGF0ZSkpKQoJCQkJCQkJCX0pLAoJCQkJCQkJY21kKTsKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihzdGF0ZUJlZm9yZSwgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQkJCQl9CgkJCQljYXNlICdVc2VySW5wdXRMb2FkT3JJbXBvcnRUYWtlV29ya3NwYWNlU3RhdGVFdmVudCc6CgkJCQkJdmFyIG9yaWdpbiA9IGV2ZW50LmE7CgkJCQkJdmFyIF92OCA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJaWYgKG9yaWdpbi4kID09PSAnRnJvbVppcEFyY2hpdmVXb3Jrc3BhY2VTdGF0ZScpIHsKCQkJCQkJCXZhciBmcm9tWmlwID0gb3JpZ2luLmE7CgkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJCQlmcm9tWmlwLmZpbGVUcmVlLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJHVybCRVcmwkQnVpbGRlciRhYnNvbHV0ZSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXIsCgkJCQkJCQkJCQlBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLCAkZWxtJGNvcmUkU3RyaW5nJGlzRW1wdHksICRlbG0kY29yZSRCYXNpY3Mkbm90KSwKCQkJCQkJCQkJCUEyKCRlbG0kY29yZSRTdHJpbmckc3BsaXQsICcvJywgc3RhdGVCZWZvcmUudXJsLnBhdGgpKSwKCQkJCQkJCQkJX0xpc3RfTmlsKSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgZnJvbUdpdCA9IG9yaWdpbi5hOwoJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJZnJvbUdpdC5maWxlVHJlZSwKCQkJCQkJCQkkZWxtJHVybCRVcmwkdG9TdHJpbmcoCgkJCQkJCQkJCUE0KAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5Vcmwkc2V0V29ya3NwYWNlU3RhdGVJblVybCwKCQkJCQkJCQkJCWZyb21HaXQuZmlsZVRyZWUsCgkJCQkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdChmcm9tR2l0KSwKCQkJCQkJCQkJCXtmaWxlUGF0aFRvT3BlbjogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9LAoJCQkJCQkJCQkJc3RhdGVCZWZvcmUudXJsKSkpOwoJCQkJCQl9CgkJCQkJfSgpOwoJCQkJCXZhciBmaWxlVHJlZSA9IF92OC5hOwoJCQkJCXZhciB1cmxUb1B1c2ggPSBfdjguYjsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCXN0YXRlQmVmb3JlLAoJCQkJCQkJewoJCQkJCQkJCXBvcHVwOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywKCQkJCQkJCQl3b3Jrc3BhY2U6ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFdvcmtzcGFjZUFjdGl2ZSgKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kaW5pdFdvcmtzcGFjZUZyb21GaWxlVHJlZUFuZEZpbGVTZWxlY3Rpb24oCgkJCQkJCQkJCQl7ZmlsZUxvY2F0aW9uT3BlbkluRWRpdG9yOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywgZmlsZVRyZWU6IGZpbGVUcmVlfSkpCgkJCQkJCQl9KSwKCQkJCQkJQTIoJGVsbSRicm93c2VyJEJyb3dzZXIkTmF2aWdhdGlvbiRwdXNoVXJsLCBzdGF0ZUJlZm9yZS5uYXZpZ2F0aW9uS2V5LCB1cmxUb1B1c2gpKTsKCQkJCWNhc2UgJ1VzZXJJbnB1dEV4cG9ydFdvcmtzcGFjZVRvWmlwQXJjaGl2ZSc6CgkJCQkJdmFyIHNlbmREb3dubG9hZENtZCA9IGV2ZW50LmEuc2VuZERvd25sb2FkQ21kOwoJCQkJCXZhciBfdjEwID0gc3RhdGVCZWZvcmUud29ya3NwYWNlOwoJCQkJCWlmIChfdjEwLiQgPT09ICdXb3Jrc3BhY2VBY3RpdmUnKSB7CgkJCQkJCXZhciB3b3Jrc3BhY2VBY3RpdmUgPSBfdjEwLmE7CgkJCQkJCXZhciBjbWQgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQlpZiAoc2VuZERvd25sb2FkQ21kKSB7CgkJCQkJCQkJdmFyIHdvcmtzcGFjZVN0YXRlSGFzaCA9ICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZUluV29ya3NwYWNlJGNvbXBvc2l0aW9uSGFzaEZyb21GaWxlVHJlZU5vZGUod29ya3NwYWNlQWN0aXZlLmZpbGVUcmVlKTsKCQkJCQkJCQlyZXR1cm4gQTMoCgkJCQkJCQkJCSRlbG0kZmlsZSRGaWxlJERvd25sb2FkJGJ5dGVzLAoJCQkJCQkJCQknZWxtLWFwcC0nICsgKCRmb2xrZXJ0ZGV2JGVsbV9zaGEyJFNIQTI1NiR0b0hleCh3b3Jrc3BhY2VTdGF0ZUhhc2gpICsgJy56aXAnKSwKCQkJCQkJCQkJJ2FwcGxpY2F0aW9uL3ppcCcsCgkJCQkJCQkJCSRhZ3VfeiRlbG1femlwJFppcCR0b0J5dGVzKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kYnVpbGRaaXBBcmNoaXZlRnJvbUZpbGVUcmVlKHdvcmtzcGFjZUFjdGl2ZS5maWxlVHJlZSkpKTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZTsKCQkJCQkJCX0KCQkJCQkJfSgpOwoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCQkJewoJCQkJCQkJCQlwb3B1cDogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRNb2RhbERpYWxvZygkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRFeHBvcnRUb1ppcEFyY2hpdmVEaWFsb2cpKQoJCQkJCQkJCX0pLAoJCQkJCQkJY21kKTsKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihzdGF0ZUJlZm9yZSwgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQkJCQl9CgkJCQljYXNlICdVc2VySW5wdXRJbXBvcnRXb3Jrc3BhY2VGcm9tWmlwQXJjaGl2ZSc6CgkJCQkJaWYgKGV2ZW50LmEuJCA9PT0gJ0ltcG9ydEZyb21aaXBBcmNoaXZlT3BlbkRpYWxvZycpIHsKCQkJCQkJdmFyIF92MTEgPSBldmVudC5hOwoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCQkJewoJCQkJCQkJCQlwb3B1cDogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRNb2RhbERpYWxvZygKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRJbXBvcnRGcm9tWmlwQXJjaGl2ZURpYWxvZygKCQkJCQkJCQkJCQkJe2xvYWRDb21wb3NpdGlvblJlc3VsdDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSkpCgkJCQkJCQkJfSksCgkJCQkJCQkkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjEyID0gZXZlbnQuYTsKCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kZmlsZSRGaWxlJFNlbGVjdCRmaWxlLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWydhcHBsaWNhdGlvbi96aXAnXSksCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0TG9hZGVkWmlwQXJjaGl2ZUZpbGUpKTsKCQkJCQl9CgkJCQljYXNlICdVc2VySW5wdXRMb2FkZWRaaXBBcmNoaXZlRmlsZSc6CgkJCQkJdmFyIGZpbGUgPSBldmVudC5hOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkVGFzayRwZXJmb3JtLAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0TG9hZGVkWmlwQXJjaGl2ZUJ5dGVzLAoJCQkJCQkJJGVsbSRmaWxlJEZpbGUkdG9CeXRlcyhmaWxlKSkpOwoJCQkJY2FzZSAnVXNlcklucHV0TG9hZGVkWmlwQXJjaGl2ZUJ5dGVzJzoKCQkJCQl2YXIgYnl0ZXMgPSBldmVudC5hOwoJCQkJCXZhciBfdjEzID0gc3RhdGVCZWZvcmUucG9wdXA7CgkJCQkJaWYgKCgoX3YxMy4kID09PSAnSnVzdCcpICYmIChfdjEzLmEuJCA9PT0gJ01vZGFsRGlhbG9nJykpICYmIChfdjEzLmEuYS4kID09PSAnSW1wb3J0RnJvbVppcEFyY2hpdmVEaWFsb2cnKSkgewoJCQkJCQl2YXIgbG9hZENvbXBvc2l0aW9uUmVzdWx0ID0gQTIoCgkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JG1hcCwKCQkJCQkJCWZ1bmN0aW9uIChmaWxlVHJlZSkgewoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCWNvbXBvc2l0aW9uSWRDYWNoZTogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5Vcmwkd29ya3NwYWNlU3RhdGVDb21wb3NpdGlvbkhhc2goCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRmlsZVRyZWVJbldvcmtzcGFjZSRtYXBCbG9ic1RvQnl0ZXMoZmlsZVRyZWUpKSwKCQkJCQkJCQkJZmlsZVRyZWU6IGZpbGVUcmVlCgkJCQkJCQkJfTsKCQkJCQkJCX0sCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRFcnIoJ0ZhaWxlZCB0byBkZWNvZGUgdGhpcyBmaWxlIGFzIHppcCBhcmNoaXZlJyksCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGV4dHJhY3RGaWxlVHJlZUZyb21aaXBBcmNoaXZlLAoJCQkJCQkJCQkkYWd1X3okZWxtX3ppcCRaaXAkZnJvbUJ5dGVzKGJ5dGVzKSkpKTsKCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQlfVXRpbHNfdXBkYXRlKAoJCQkJCQkJCXN0YXRlQmVmb3JlLAoJCQkJCQkJCXsKCQkJCQkJCQkJcG9wdXA6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kTW9kYWxEaWFsb2coCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kSW1wb3J0RnJvbVppcEFyY2hpdmVEaWFsb2coCgkJCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkJCWxvYWRDb21wb3NpdGlvblJlc3VsdDogJGVsbSRjb3JlJE1heWJlJEp1c3QobG9hZENvbXBvc2l0aW9uUmVzdWx0KQoJCQkJCQkJCQkJCQl9KSkpCgkJCQkJCQkJfSksCgkJCQkJCQkkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQkJCX0KCQkJCWNhc2UgJ0JhY2tlbmRMb2FkRnJvbUdpdFJlc3VsdEV2ZW50JzoKCQkJCQl2YXIgdXJsSW50b0dpdFJlcG9zaXRvcnkgPSBldmVudC5hOwoJCQkJCXZhciByZXN1bHQgPSBldmVudC5iOwoJCQkJCXJldHVybiBBMygkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRwcm9jZXNzRXZlbnRCYWNrZW5kTG9hZEZyb21HaXRSZXN1bHQsIHVybEludG9HaXRSZXBvc2l0b3J5LCByZXN1bHQsIHN0YXRlQmVmb3JlKTsKCQkJCWNhc2UgJ1VzZXJJbnB1dENsb3NlUG9wdXAnOgoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlfVXRpbHNfdXBkYXRlKAoJCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCQl7cG9wdXA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nfSksCgkJCQkJCSRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQljYXNlICdXb3Jrc3BhY2VFdmVudCc6CgkJCQkJdmFyIHdvcmtzcGFjZUV2ZW50ID0gZXZlbnQuYTsKCQkJCQl2YXIgX3YxNCA9IHN0YXRlQmVmb3JlLndvcmtzcGFjZTsKCQkJCQlzd2l0Y2ggKF92MTQuJCkgewoJCQkJCQljYXNlICdXb3Jrc3BhY2VBY3RpdmUnOgoJCQkJCQkJdmFyIHdvcmtzcGFjZUJlZm9yZSA9IF92MTQuYTsKCQkJCQkJCXZhciB3b3Jrc3BhY2VFdmVudElzRWRpdG9yR290Rm9jdXMgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJaWYgKHdvcmtzcGFjZUV2ZW50LiQgPT09ICdNb25hY29FZGl0b3JFdmVudCcpIHsKCQkJCQkJCQkJdmFyIG1vbmFjb0VkaXRvckV2ZW50SnNvbiA9IHdvcmtzcGFjZUV2ZW50LmE7CgkJCQkJCQkJCXJldHVybiBfVXRpbHNfZXEoCgkJCQkJCQkJCQkkZWxtJGNvcmUkUmVzdWx0JE9rKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkRGlkRm9jdXNFZGl0b3JXaWRnZXRFdmVudCksCgkJCQkJCQkJCQlBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkZGVjb2RlVmFsdWUsICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVNZXNzYWdlRnJvbU1vbmFjb0VkaXRvciwgbW9uYWNvRWRpdG9yRXZlbnRKc29uKSk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCQkJCX0KCQkJCQkJCX0oKTsKCQkJCQkJCXZhciBzaG91bGRVcGRhdGVVcmwgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJaWYgKHdvcmtzcGFjZUV2ZW50LiQgPT09ICdVc2VySW5wdXRDb21waWxlJykgewoJCQkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCQkJfQoJCQkJCQkJfSgpOwoJCQkJCQkJdmFyIHNldFdvcmtzcGFjZVN0YXRlSW5VcmxDbWQgPSBzaG91bGRVcGRhdGVVcmwgPyBBMigKCQkJCQkJCQkkZWxtJGJyb3dzZXIkQnJvd3NlciROYXZpZ2F0aW9uJHB1c2hVcmwsCgkJCQkJCQkJc3RhdGVCZWZvcmUubmF2aWdhdGlvbktleSwKCQkJCQkJCQkkZWxtJHVybCRVcmwkdG9TdHJpbmcoCgkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kc2V0V29ya3NwYWNlU3RhdGVJblVybEZvckJvb2ttYXJrLAoJCQkJCQkJCQkJe2NyZWF0ZURpZmZJZkJhc2VBdmFpbGFibGU6IHRydWV9LAoJCQkJCQkJCQkJd29ya3NwYWNlQmVmb3JlLAoJCQkJCQkJCQkJc3RhdGVCZWZvcmUpKSkgOiAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmU7CgkJCQkJCQl2YXIgbWFwRm9yRm9jdXNPdXRzaWRlVGl0bGViYXJNZW51ID0gd29ya3NwYWNlRXZlbnRJc0VkaXRvckdvdEZvY3VzID8gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdXNlcklucHV0Rm9jdXNPdXRzaWRlVGl0bGViYXJNZW51IDogJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eTsKCQkJCQkJCXZhciBfdjE1ID0gQTMoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdXBkYXRlV29ya3NwYWNlLAoJCQkJCQkJCXt0aW1lOiBzdGF0ZUJlZm9yZS50aW1lfSwKCQkJCQkJCQl3b3Jrc3BhY2VFdmVudCwKCQkJCQkJCQl3b3Jrc3BhY2VCZWZvcmUpOwoJCQkJCQkJdmFyIHdvcmtzcGFjZSA9IF92MTUuYTsKCQkJCQkJCXZhciB3b3Jrc3BhY2VDbWQgPSBfdjE1LmI7CgkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJCQltYXBGb3JGb2N1c091dHNpZGVUaXRsZWJhck1lbnUoCgkJCQkJCQkJCV9VdGlsc191cGRhdGUoCgkJCQkJCQkJCQlzdGF0ZUJlZm9yZSwKCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQl3b3Jrc3BhY2U6ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFdvcmtzcGFjZUFjdGl2ZSh3b3Jrc3BhY2UpCgkJCQkJCQkJCQl9KSksCgkJCQkJCQkJJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRiYXRjaCgKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCUEyKCRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbWFwLCAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRXb3Jrc3BhY2VFdmVudCwgd29ya3NwYWNlQ21kKSwKCQkJCQkJCQkJCQlzZXRXb3Jrc3BhY2VTdGF0ZUluVXJsQ21kCgkJCQkJCQkJCQldKSkpOwoJCQkJCQljYXNlICdXb3Jrc3BhY2VMb2FkaW5nRnJvbUxpbmsnOgoJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoc3RhdGVCZWZvcmUsICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQkJCWRlZmF1bHQ6CgkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihzdGF0ZUJlZm9yZSwgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQkJCQl9CgkJCQljYXNlICdVc2VySW5wdXRLZXlEb3duRXZlbnQnOgoJCQkJCXZhciBrZXlib2FyZEV2ZW50ID0gZXZlbnQuYTsKCQkJCQlpZiAoX1V0aWxzX2VxKGtleWJvYXJkRXZlbnQua2V5Q29kZSwgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRXNjYXBlKSkgewoJCQkJCQl2YXIgJHRlbXAkZXZlbnQgPSAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRDbG9zZVBvcHVwLAoJCQkJCQkJJHRlbXAkc3RhdGVCZWZvcmUgPSBzdGF0ZUJlZm9yZTsKCQkJCQkJZXZlbnQgPSAkdGVtcCRldmVudDsKCQkJCQkJc3RhdGVCZWZvcmUgPSAkdGVtcCRzdGF0ZUJlZm9yZTsKCQkJCQkJY29udGludWUgdXBkYXRlOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCQkJCX0KCQkJCWNhc2UgJ1VzZXJJbnB1dEZvY3VzT3V0c2lkZVRpdGxlYmFyTWVudSc6CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVzZXJJbnB1dEZvY3VzT3V0c2lkZVRpdGxlYmFyTWVudShzdGF0ZUJlZm9yZSksCgkJCQkJCSRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCQljYXNlICdSZWNlaXZlTWVzc2FnZUZyb21Db250YWluZXJIdG1sRXZlbnQnOgoJCQkJCXZhciBtZXNzYWdlSnNvbiA9IGV2ZW50LmE7CgkJCQkJdmFyIF92MTggPSBBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkZGVjb2RlVmFsdWUsICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVNZXNzYWdlRnJvbUNvbnRhaW5lckh0bWwsIG1lc3NhZ2VKc29uKTsKCQkJCQlpZiAoX3YxOC4kID09PSAnRXJyJykgewoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihzdGF0ZUJlZm9yZSwgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgbWVzc2FnZSA9IF92MTguYTsKCQkJCQkJdmFyIGNsaWNrZWRMaW5rID0gbWVzc2FnZS5hOwoJCQkJCQlyZXR1cm4gQTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdXBkYXRlVXNlckNsaWNrZWRMaW5rSW5QcmV2aWV3LCBjbGlja2VkTGluaywgc3RhdGVCZWZvcmUpOwoJCQkJCX0KCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoc3RhdGVCZWZvcmUsICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSk7CgkJCX0KCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRXb3Jrc3BhY2VMaW5rID0gJ2h0dHBzOi8vZ2l0aHViLmNvbS9vbmxpbmVnYW1lbWFrZXIvbWFraW5nLW9ubGluZS1nYW1lcy90cmVlLzY4MzhmNzEwMGRkODZjOGM4YWZjZmUzZWZkNTUzZjhmYTM5Yzc3YWUvaW1wbGVtZW50L2xhbmRpbmctYXBwJzsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZUJlZ2luTG9hZERlZmF1bHRJZldvcmtzcGFjZUVyciA9IGZ1bmN0aW9uIChzdGF0ZUJlZm9yZSkgewoJdmFyIF92MCA9IHN0YXRlQmVmb3JlLndvcmtzcGFjZTsKCWlmIChfdjAuJCA9PT0gJ1dvcmtzcGFjZUVycicpIHsKCQlyZXR1cm4gQTMoCgkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZVRvQmVnaW5Mb2FkV29ya3NwYWNlU3RhdGUsCgkJCXsKCQkJCWZpbGVQYXRoVG9PcGVuOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsnc3JjJywgJ01haW4uZWxtJ10pKSwKCQkJCXdvcmtzcGFjZVN0YXRlRXhwZWN0ZWRDb21wb3NpdGlvbkhhc2g6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nCgkJCX0sCgkJCXN0YXRlQmVmb3JlLAoJCQl7YmFzZTogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdFdvcmtzcGFjZUxpbmssIGRpZmZlcmVuY2VGcm9tQmFzZTogJGF1dGhvciRwcm9qZWN0JFdvcmtzcGFjZVN0YXRlXzIwMjFfMDEkbm9EaWZmZXJlbmNlfSk7Cgl9IGVsc2UgewoJCXJldHVybiBfVXRpbHNfVHVwbGUyKHN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kaW5pdCA9IEY0KAoJZnVuY3Rpb24gKF92MCwgdXJsLCBuYXZpZ2F0aW9uS2V5LCB0aW1lKSB7CgkJcmV0dXJuIEEyKAoJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRmb2xkVXBkYXRlcywKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZSgKCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVcmxDaGFuZ2UodXJsKSksCgkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdXBkYXRlQmVnaW5Mb2FkRGVmYXVsdElmV29ya3NwYWNlRXJyCgkJCQldKSwKCQkJewoJCQkJbGFzdEJhY2tlbmRMb2FkRnJvbUdpdFJlc3VsdDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsCgkJCQluYXZpZ2F0aW9uS2V5OiBuYXZpZ2F0aW9uS2V5LAoJCQkJcG9wdXA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLAoJCQkJdGltZTogdGltZSwKCQkJCXVybDogdXJsLAoJCQkJd29ya3NwYWNlOiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRXb3Jrc3BhY2VFcnIoJ0luaXRpYWwgdXBkYXRlIGZhaWxlZCcpCgkJCX0pOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRNb25hY29FZGl0b3JFdmVudCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdNb25hY29FZGl0b3JFdmVudCcsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kUmVjZWl2ZU1lc3NhZ2VGcm9tQ29udGFpbmVySHRtbEV2ZW50ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1JlY2VpdmVNZXNzYWdlRnJvbUNvbnRhaW5lckh0bWxFdmVudCcsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kUmVzcG9uc2VGcm9tTGFuZ3VhZ2VTZXJ2aWNlRXZlbnQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUmVzcG9uc2VGcm9tTGFuZ3VhZ2VTZXJ2aWNlRXZlbnQnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFRpbWVIYXNBcnJpdmVkID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1RpbWVIYXNBcnJpdmVkJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRGb2N1c091dHNpZGVUaXRsZWJhck1lbnUgPSB7JDogJ1VzZXJJbnB1dEZvY3VzT3V0c2lkZVRpdGxlYmFyTWVudSd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0S2V5RG93bkV2ZW50ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1VzZXJJbnB1dEtleURvd25FdmVudCcsIGE6IGF9Owp9Owp2YXIgJGVsbSRjb3JlJFBsYXRmb3JtJFN1YiRiYXRjaCA9IF9QbGF0Zm9ybV9iYXRjaDsKdmFyICRHaXpyYSRlbG1fa2V5Ym9hcmRfZXZlbnQkS2V5Ym9hcmQkRXZlbnQkS2V5Ym9hcmRFdmVudCA9IEY3KAoJZnVuY3Rpb24gKGFsdEtleSwgY3RybEtleSwga2V5LCBrZXlDb2RlLCBtZXRhS2V5LCByZXBlYXQsIHNoaWZ0S2V5KSB7CgkJcmV0dXJuIHthbHRLZXk6IGFsdEtleSwgY3RybEtleTogY3RybEtleSwga2V5OiBrZXksIGtleUNvZGU6IGtleUNvZGUsIG1ldGFLZXk6IG1ldGFLZXksIHJlcGVhdDogcmVwZWF0LCBzaGlmdEtleTogc2hpZnRLZXl9OwoJfSk7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkbWF5YmUgPSBmdW5jdGlvbiAoZGVjb2RlcikgewoJcmV0dXJuICRlbG0kanNvbiRKc29uJERlY29kZSRvbmVPZigKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsICRlbG0kY29yZSRNYXliZSRKdXN0LCBkZWNvZGVyKSwKCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKCRlbG0kY29yZSRNYXliZSROb3RoaW5nKQoJCQldKSk7Cn07CnZhciAkR2l6cmEkZWxtX2tleWJvYXJkX2V2ZW50JEtleWJvYXJkJEV2ZW50JGRlY29kZUtleSA9ICRlbG0kanNvbiRKc29uJERlY29kZSRtYXliZSgKCUEyKAoJCSRlbG0kanNvbiRKc29uJERlY29kZSRhbmRUaGVuLAoJCWZ1bmN0aW9uIChrZXkpIHsKCQkJcmV0dXJuICRlbG0kY29yZSRTdHJpbmckaXNFbXB0eShrZXkpID8gJGVsbSRqc29uJEpzb24kRGVjb2RlJGZhaWwoJ2VtcHR5IGtleScpIDogJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoa2V5KTsKCQl9LAoJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ2tleScsICRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpKSk7CnZhciAkR2l6cmEkZWxtX2tleWJvYXJkX2V2ZW50JEtleWJvYXJkJEV2ZW50JGRlY29kZU5vblplcm8gPSBBMigKCSRlbG0kanNvbiRKc29uJERlY29kZSRhbmRUaGVuLAoJZnVuY3Rpb24gKGNvZGUpIHsKCQlyZXR1cm4gKCFjb2RlKSA/ICRlbG0kanNvbiRKc29uJERlY29kZSRmYWlsKCdjb2RlIHdhcyB6ZXJvJykgOiAkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZChjb2RlKTsKCX0sCgkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW50KTsKdmFyICRHaXpyYSRlbG1fa2V5Ym9hcmRfZXZlbnQkS2V5Ym9hcmQkRXZlbnQkZGVjb2RlS2V5Q29kZSA9ICRlbG0kanNvbiRKc29uJERlY29kZSRvbmVPZigKCV9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ2tleUNvZGUnLCAkR2l6cmEkZWxtX2tleWJvYXJkX2V2ZW50JEtleWJvYXJkJEV2ZW50JGRlY29kZU5vblplcm8pLAoJCQlBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsICd3aGljaCcsICRHaXpyYSRlbG1fa2V5Ym9hcmRfZXZlbnQkS2V5Ym9hcmQkRXZlbnQkZGVjb2RlTm9uWmVybyksCgkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ2NoYXJDb2RlJywgJEdpenJhJGVsbV9rZXlib2FyZF9ldmVudCRLZXlib2FyZCRFdmVudCRkZWNvZGVOb25aZXJvKSwKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoMCkKCQldKSk7CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRBID0geyQ6ICdBJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRBZGQgPSB7JDogJ0FkZCd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkQWx0ID0geyQ6ICdBbHQnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEFtYmlndW91cyA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdBbWJpZ3VvdXMnLCBhOiBhfTsKfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEIgPSB7JDogJ0InfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEJhY2tzcGFjZSA9IHskOiAnQmFja3NwYWNlJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRDID0geyQ6ICdDJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRDYXBzTG9jayA9IHskOiAnQ2Fwc0xvY2snfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JENocm9tZVNlYXJjaCA9IHskOiAnQ2hyb21lU2VhcmNoJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRDb21tYW5kID0geyQ6ICdDb21tYW5kJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRDdHJsID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0N0cmwnLCBhOiBhfTsKfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEQgPSB7JDogJ0QnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JERlY2ltYWwgPSB7JDogJ0RlY2ltYWwnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JERlbGV0ZSA9IHskOiAnRGVsZXRlJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSREaXZpZGUgPSB7JDogJ0RpdmlkZSd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRG93biA9IHskOiAnRG93bid9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRSA9IHskOiAnRSd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRWlnaHQgPSB7JDogJ0VpZ2h0J307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRFbmQgPSB7JDogJ0VuZCd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRW50ZXIgPSB7JDogJ0VudGVyJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRGID0geyQ6ICdGJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRGMSA9IHskOiAnRjEnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEYxMCA9IHskOiAnRjEwJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRGMTEgPSB7JDogJ0YxMSd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRjEyID0geyQ6ICdGMTInfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEYyID0geyQ6ICdGMid9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRjMgPSB7JDogJ0YzJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRGNCA9IHskOiAnRjQnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEY1ID0geyQ6ICdGNSd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRjYgPSB7JDogJ0Y2J307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRGNyA9IHskOiAnRjcnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEY4ID0geyQ6ICdGOCd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRjkgPSB7JDogJ0Y5J307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRGaXZlID0geyQ6ICdGaXZlJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRGb3VyID0geyQ6ICdGb3VyJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRHID0geyQ6ICdHJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRIID0geyQ6ICdIJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRIb21lID0geyQ6ICdIb21lJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRJID0geyQ6ICdJJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRJbnNlcnQgPSB7JDogJ0luc2VydCd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkSiA9IHskOiAnSid9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkSyA9IHskOiAnSyd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkTCA9IHskOiAnTCd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkTGVmdCA9IHskOiAnTGVmdCd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkTSA9IHskOiAnTSd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkTXVsdGlwbHkgPSB7JDogJ011bHRpcGx5J307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSROID0geyQ6ICdOJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSROaW5lID0geyQ6ICdOaW5lJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSROdW1Mb2NrID0geyQ6ICdOdW1Mb2NrJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSROdW1wYWRFaWdodCA9IHskOiAnTnVtcGFkRWlnaHQnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JE51bXBhZEZpdmUgPSB7JDogJ051bXBhZEZpdmUnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JE51bXBhZEZvdXIgPSB7JDogJ051bXBhZEZvdXInfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JE51bXBhZE5pbmUgPSB7JDogJ051bXBhZE5pbmUnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JE51bXBhZE9uZSA9IHskOiAnTnVtcGFkT25lJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSROdW1wYWRTZXZlbiA9IHskOiAnTnVtcGFkU2V2ZW4nfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JE51bXBhZFNpeCA9IHskOiAnTnVtcGFkU2l4J307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSROdW1wYWRUaHJlZSA9IHskOiAnTnVtcGFkVGhyZWUnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JE51bXBhZFR3byA9IHskOiAnTnVtcGFkVHdvJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSROdW1wYWRaZXJvID0geyQ6ICdOdW1wYWRaZXJvJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRPID0geyQ6ICdPJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRPbmUgPSB7JDogJ09uZSd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkUCA9IHskOiAnUCd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkUGFnZURvd24gPSB7JDogJ1BhZ2VEb3duJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRQYWdlVXAgPSB7JDogJ1BhZ2VVcCd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkUGF1c2VCcmVhayA9IHskOiAnUGF1c2VCcmVhayd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkUHJpbnRTY3JlZW4gPSB7JDogJ1ByaW50U2NyZWVuJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRRID0geyQ6ICdRJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRSID0geyQ6ICdSJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRSaWdodCA9IHskOiAnUmlnaHQnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JFMgPSB7JDogJ1MnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JFNjcm9sbExvY2sgPSB7JDogJ1Njcm9sbExvY2snfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JFNldmVuID0geyQ6ICdTZXZlbid9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkU2hpZnQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnU2hpZnQnLCBhOiBhfTsKfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JFNpeCA9IHskOiAnU2l4J307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRTcGFjZWJhciA9IHskOiAnU3BhY2ViYXInfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JFN1YnRyYWN0ID0geyQ6ICdTdWJ0cmFjdCd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkVCA9IHskOiAnVCd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkVGFiID0geyQ6ICdUYWInfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JFRocmVlID0geyQ6ICdUaHJlZSd9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkVHdvID0geyQ6ICdUd28nfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JFUgPSB7JDogJ1UnfTsKdmFyICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JFVua25vd24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVW5rbm93bicsIGE6IGF9Owp9Owp2YXIgJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkVXAgPSB7JDogJ1VwJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRWID0geyQ6ICdWJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRXID0geyQ6ICdXJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRXaW5kb3dzID0geyQ6ICdXaW5kb3dzJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRYID0geyQ6ICdYJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRZID0geyQ6ICdZJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRaID0geyQ6ICdaJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRaZXJvID0geyQ6ICdaZXJvJ307CnZhciAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRmcm9tQ29kZSA9IGZ1bmN0aW9uIChrZXlDb2RlKSB7Cglzd2l0Y2ggKGtleUNvZGUpIHsKCQljYXNlIDg6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRCYWNrc3BhY2U7CgkJY2FzZSA5OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkVGFiOwoJCWNhc2UgMTM6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRFbnRlcjsKCQljYXNlIDE2OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkU2hpZnQoJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpOwoJCWNhc2UgMTc6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRDdHJsKCRlbG0kY29yZSRNYXliZSROb3RoaW5nKTsKCQljYXNlIDE4OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkQWx0OwoJCWNhc2UgMTk6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRQYXVzZUJyZWFrOwoJCWNhc2UgMjA6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRDYXBzTG9jazsKCQljYXNlIDI3OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRXNjYXBlOwoJCWNhc2UgMzI6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRTcGFjZWJhcjsKCQljYXNlIDMzOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkUGFnZVVwOwoJCWNhc2UgMzQ6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRQYWdlRG93bjsKCQljYXNlIDM1OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRW5kOwoJCWNhc2UgMzY6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRIb21lOwoJCWNhc2UgMzc6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRMZWZ0OwoJCWNhc2UgMzg6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRVcDsKCQljYXNlIDM5OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkUmlnaHQ7CgkJY2FzZSA0MDoKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JERvd247CgkJY2FzZSA0NDoKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JFByaW50U2NyZWVuOwoJCWNhc2UgNDU6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRJbnNlcnQ7CgkJY2FzZSA0NjoKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JERlbGV0ZTsKCQljYXNlIDQ4OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkWmVybzsKCQljYXNlIDQ5OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkT25lOwoJCWNhc2UgNTA6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRUd287CgkJY2FzZSA1MToKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JFRocmVlOwoJCWNhc2UgNTI6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRGb3VyOwoJCWNhc2UgNTM6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRGaXZlOwoJCWNhc2UgNTQ6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRTaXg7CgkJY2FzZSA1NToKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JFNldmVuOwoJCWNhc2UgNTY6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRFaWdodDsKCQljYXNlIDU3OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkTmluZTsKCQljYXNlIDY1OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkQTsKCQljYXNlIDY2OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkQjsKCQljYXNlIDY3OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkQzsKCQljYXNlIDY4OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRDsKCQljYXNlIDY5OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRTsKCQljYXNlIDcwOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRjsKCQljYXNlIDcxOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRzsKCQljYXNlIDcyOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkSDsKCQljYXNlIDczOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkSTsKCQljYXNlIDc0OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkSjsKCQljYXNlIDc1OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkSzsKCQljYXNlIDc2OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkTDsKCQljYXNlIDc3OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkTTsKCQljYXNlIDc4OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkTjsKCQljYXNlIDc5OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkTzsKCQljYXNlIDgwOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkUDsKCQljYXNlIDgxOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkUTsKCQljYXNlIDgyOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkUjsKCQljYXNlIDgzOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkUzsKCQljYXNlIDg0OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkVDsKCQljYXNlIDg1OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkVTsKCQljYXNlIDg2OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkVjsKCQljYXNlIDg3OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkVzsKCQljYXNlIDg4OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkWDsKCQljYXNlIDg5OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkWTsKCQljYXNlIDkwOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkWjsKCQljYXNlIDkxOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkQW1iaWd1b3VzKAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVskU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRXaW5kb3dzLCAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRDb21tYW5kLCAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRDaHJvbWVTZWFyY2hdKSk7CgkJY2FzZSA5NjoKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JE51bXBhZFplcm87CgkJY2FzZSA5NzoKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JE51bXBhZE9uZTsKCQljYXNlIDk4OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkTnVtcGFkVHdvOwoJCWNhc2UgOTk6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSROdW1wYWRUaHJlZTsKCQljYXNlIDEwMDoKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JE51bXBhZEZvdXI7CgkJY2FzZSAxMDE6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSROdW1wYWRGaXZlOwoJCWNhc2UgMTAyOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkTnVtcGFkU2l4OwoJCWNhc2UgMTAzOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkTnVtcGFkU2V2ZW47CgkJY2FzZSAxMDQ6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSROdW1wYWRFaWdodDsKCQljYXNlIDEwNToKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JE51bXBhZE5pbmU7CgkJY2FzZSAxMDY6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRNdWx0aXBseTsKCQljYXNlIDEwNzoKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEFkZDsKCQljYXNlIDEwOToKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JFN1YnRyYWN0OwoJCWNhc2UgMTEwOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRGVjaW1hbDsKCQljYXNlIDExMToKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JERpdmlkZTsKCQljYXNlIDExMjoKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEYxOwoJCWNhc2UgMTEzOgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRjI7CgkJY2FzZSAxMTQ6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRGMzsKCQljYXNlIDExNToKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEY0OwoJCWNhc2UgMTE2OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRjU7CgkJY2FzZSAxMTc6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRGNjsKCQljYXNlIDExODoKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEY3OwoJCWNhc2UgMTE5OgoJCQlyZXR1cm4gJFN3aWZ0c05hbWVzYWtlJHByb3Blcl9rZXlib2FyZCRLZXlib2FyZCRLZXkkRjg7CgkJY2FzZSAxMjA6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRGOTsKCQljYXNlIDEyMToKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEYxMDsKCQljYXNlIDEyMjoKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEYxMTsKCQljYXNlIDEyMzoKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JEYxMjsKCQljYXNlIDE0NDoKCQkJcmV0dXJuICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JE51bUxvY2s7CgkJY2FzZSAxNDU6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRTY3JvbGxMb2NrOwoJCWRlZmF1bHQ6CgkJCXJldHVybiAkU3dpZnRzTmFtZXNha2UkcHJvcGVyX2tleWJvYXJkJEtleWJvYXJkJEtleSRVbmtub3duKGtleUNvZGUpOwoJfQp9Owp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcDcgPSBfSnNvbl9tYXA3Owp2YXIgJEdpenJhJGVsbV9rZXlib2FyZF9ldmVudCRLZXlib2FyZCRFdmVudCRkZWNvZGVLZXlib2FyZEV2ZW50ID0gQTgoCgkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwNywKCSRHaXpyYSRlbG1fa2V5Ym9hcmRfZXZlbnQkS2V5Ym9hcmQkRXZlbnQkS2V5Ym9hcmRFdmVudCwKCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ2FsdEtleScsICRlbG0kanNvbiRKc29uJERlY29kZSRib29sKSwKCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ2N0cmxLZXknLCAkZWxtJGpzb24kSnNvbiREZWNvZGUkYm9vbCksCgkkR2l6cmEkZWxtX2tleWJvYXJkX2V2ZW50JEtleWJvYXJkJEV2ZW50JGRlY29kZUtleSwKCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsICRTd2lmdHNOYW1lc2FrZSRwcm9wZXJfa2V5Ym9hcmQkS2V5Ym9hcmQkS2V5JGZyb21Db2RlLCAkR2l6cmEkZWxtX2tleWJvYXJkX2V2ZW50JEtleWJvYXJkJEV2ZW50JGRlY29kZUtleUNvZGUpLAoJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLCAnbWV0YUtleScsICRlbG0kanNvbiRKc29uJERlY29kZSRib29sKSwKCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ3JlcGVhdCcsICRlbG0kanNvbiRKc29uJERlY29kZSRib29sKSwKCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ3NoaWZ0S2V5JywgJGVsbSRqc29uJEpzb24kRGVjb2RlJGJvb2wpKTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGlzT3V0c2lkZVBhcmVudFdpdGhJZCA9IGZ1bmN0aW9uIChwYXJlbnRJZCkgewoJcmV0dXJuICRlbG0kanNvbiRKc29uJERlY29kZSRvbmVPZigKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKAoJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGFuZFRoZW4sCgkJCQlmdW5jdGlvbiAoaWQpIHsKCQkJCQlyZXR1cm4gX1V0aWxzX2VxKHBhcmVudElkLCBpZCkgPyAkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZChmYWxzZSkgOiAkZWxtJGpzb24kSnNvbiREZWNvZGUkZmFpbCgnY29udGludWUnKTsKCQkJCX0sCgkJCQlBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsICdpZCcsICRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpKSwKCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRsYXp5KAoJCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQkJCQkncGFyZW50Tm9kZScsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGlzT3V0c2lkZVBhcmVudFdpdGhJZChwYXJlbnRJZCkpOwoJCQkJfSksCgkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCh0cnVlKQoJCQldKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRpc1RhcmdldE91dHNpZGVQYXJlbnRXaXRoSWQgPSBGMigKCWZ1bmN0aW9uIChwYXJlbnRJZCwgZXZlbnQpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRhbmRUaGVuLAoJCQlmdW5jdGlvbiAoaXNPdXRzaWRlKSB7CgkJCQlyZXR1cm4gaXNPdXRzaWRlID8gJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoZXZlbnQpIDogJGVsbSRqc29uJEpzb24kRGVjb2RlJGZhaWwoJ2lzIG5vdCBvdXRzaWRlICcgKyBwYXJlbnRJZCk7CgkJCX0sCgkJCUEyKAoJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQkJJ3RhcmdldCcsCgkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRpc091dHNpZGVQYXJlbnRXaXRoSWQocGFyZW50SWQpKSk7Cgl9KTsKdmFyICRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyREb2N1bWVudCA9IHskOiAnRG9jdW1lbnQnfTsKdmFyICRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRNeVN1YiA9IEYzKAoJZnVuY3Rpb24gKGEsIGIsIGMpIHsKCQlyZXR1cm4geyQ6ICdNeVN1YicsIGE6IGEsIGI6IGIsIGM6IGN9OwoJfSk7CnZhciAkZWxtJGJyb3dzZXIkQnJvd3NlciRFdmVudHMkU3RhdGUgPSBGMigKCWZ1bmN0aW9uIChzdWJzLCBwaWRzKSB7CgkJcmV0dXJuIHtwaWRzOiBwaWRzLCBzdWJzOiBzdWJzfTsKCX0pOwp2YXIgJGVsbSRicm93c2VyJEJyb3dzZXIkRXZlbnRzJGluaXQgPSAkZWxtJGNvcmUkVGFzayRzdWNjZWVkKAoJQTIoJGVsbSRicm93c2VyJEJyb3dzZXIkRXZlbnRzJFN0YXRlLCBfTGlzdF9OaWwsICRlbG0kY29yZSREaWN0JGVtcHR5KSk7CnZhciAkZWxtJGJyb3dzZXIkQnJvd3NlciRFdmVudHMkbm9kZVRvS2V5ID0gZnVuY3Rpb24gKG5vZGUpIHsKCWlmIChub2RlLiQgPT09ICdEb2N1bWVudCcpIHsKCQlyZXR1cm4gJ2RfJzsKCX0gZWxzZSB7CgkJcmV0dXJuICd3Xyc7Cgl9Cn07CnZhciAkZWxtJGJyb3dzZXIkQnJvd3NlciRFdmVudHMkYWRkS2V5ID0gZnVuY3Rpb24gKHN1YikgewoJdmFyIG5vZGUgPSBzdWIuYTsKCXZhciBuYW1lID0gc3ViLmI7CglyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQlfVXRpbHNfYXAoCgkJCSRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRub2RlVG9LZXkobm9kZSksCgkJCW5hbWUpLAoJCXN1Yik7Cn07CnZhciAkZWxtJGJyb3dzZXIkQnJvd3NlciRFdmVudHMkRXZlbnQgPSBGMigKCWZ1bmN0aW9uIChrZXksIGV2ZW50KSB7CgkJcmV0dXJuIHtldmVudDogZXZlbnQsIGtleToga2V5fTsKCX0pOwp2YXIgJGVsbSRicm93c2VyJEJyb3dzZXIkRXZlbnRzJHNwYXduID0gRjMoCglmdW5jdGlvbiAocm91dGVyLCBrZXksIF92MCkgewoJCXZhciBub2RlID0gX3YwLmE7CgkJdmFyIG5hbWUgPSBfdjAuYjsKCQl2YXIgYWN0dWFsTm9kZSA9IGZ1bmN0aW9uICgpIHsKCQkJaWYgKG5vZGUuJCA9PT0gJ0RvY3VtZW50JykgewoJCQkJcmV0dXJuIF9Ccm93c2VyX2RvYzsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiBfQnJvd3Nlcl93aW5kb3c7CgkJCX0KCQl9KCk7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkVGFzayRtYXAsCgkJCWZ1bmN0aW9uICh2YWx1ZSkgewoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoa2V5LCB2YWx1ZSk7CgkJCX0sCgkJCUEzKAoJCQkJX0Jyb3dzZXJfb24sCgkJCQlhY3R1YWxOb2RlLAoJCQkJbmFtZSwKCQkJCWZ1bmN0aW9uIChldmVudCkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJFBsYXRmb3JtJHNlbmRUb1NlbGYsCgkJCQkJCXJvdXRlciwKCQkJCQkJQTIoJGVsbSRicm93c2VyJEJyb3dzZXIkRXZlbnRzJEV2ZW50LCBrZXksIGV2ZW50KSk7CgkJCQl9KSk7Cgl9KTsKdmFyICRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRvbkVmZmVjdHMgPSBGMygKCWZ1bmN0aW9uIChyb3V0ZXIsIHN1YnMsIHN0YXRlKSB7CgkJdmFyIHN0ZXBSaWdodCA9IEYzKAoJCQlmdW5jdGlvbiAoa2V5LCBzdWIsIF92NikgewoJCQkJdmFyIGRlYWRzID0gX3Y2LmE7CgkJCQl2YXIgbGl2ZXMgPSBfdjYuYjsKCQkJCXZhciBuZXdzID0gX3Y2LmM7CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMygKCQkJCQlkZWFkcywKCQkJCQlsaXZlcywKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJQTMoJGVsbSRicm93c2VyJEJyb3dzZXIkRXZlbnRzJHNwYXduLCByb3V0ZXIsIGtleSwgc3ViKSwKCQkJCQkJbmV3cykpOwoJCQl9KTsKCQl2YXIgc3RlcExlZnQgPSBGMygKCQkJZnVuY3Rpb24gKF92NCwgcGlkLCBfdjUpIHsKCQkJCXZhciBkZWFkcyA9IF92NS5hOwoJCQkJdmFyIGxpdmVzID0gX3Y1LmI7CgkJCQl2YXIgbmV3cyA9IF92NS5jOwoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTMoCgkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgcGlkLCBkZWFkcyksCgkJCQkJbGl2ZXMsCgkJCQkJbmV3cyk7CgkJCX0pOwoJCXZhciBzdGVwQm90aCA9IEY0KAoJCQlmdW5jdGlvbiAoa2V5LCBwaWQsIF92MiwgX3YzKSB7CgkJCQl2YXIgZGVhZHMgPSBfdjMuYTsKCQkJCXZhciBsaXZlcyA9IF92My5iOwoJCQkJdmFyIG5ld3MgPSBfdjMuYzsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUzKAoJCQkJCWRlYWRzLAoJCQkJCUEzKCRlbG0kY29yZSREaWN0JGluc2VydCwga2V5LCBwaWQsIGxpdmVzKSwKCQkJCQluZXdzKTsKCQkJfSk7CgkJdmFyIG5ld1N1YnMgPSBBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRhZGRLZXksIHN1YnMpOwoJCXZhciBfdjAgPSBBNigKCQkJJGVsbSRjb3JlJERpY3QkbWVyZ2UsCgkJCXN0ZXBMZWZ0LAoJCQlzdGVwQm90aCwKCQkJc3RlcFJpZ2h0LAoJCQlzdGF0ZS5waWRzLAoJCQkkZWxtJGNvcmUkRGljdCRmcm9tTGlzdChuZXdTdWJzKSwKCQkJX1V0aWxzX1R1cGxlMyhfTGlzdF9OaWwsICRlbG0kY29yZSREaWN0JGVtcHR5LCBfTGlzdF9OaWwpKTsKCQl2YXIgZGVhZFBpZHMgPSBfdjAuYTsKCQl2YXIgbGl2ZVBpZHMgPSBfdjAuYjsKCQl2YXIgbWFrZU5ld1BpZHMgPSBfdjAuYzsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRUYXNrJGFuZFRoZW4sCgkJCWZ1bmN0aW9uIChwaWRzKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJFRhc2skc3VjY2VlZCgKCQkJCQlBMigKCQkJCQkJJGVsbSRicm93c2VyJEJyb3dzZXIkRXZlbnRzJFN0YXRlLAoJCQkJCQluZXdTdWJzLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSREaWN0JHVuaW9uLAoJCQkJCQkJbGl2ZVBpZHMsCgkJCQkJCQkkZWxtJGNvcmUkRGljdCRmcm9tTGlzdChwaWRzKSkpKTsKCQkJfSwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkVGFzayRhbmRUaGVuLAoJCQkJZnVuY3Rpb24gKF92MSkgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkVGFzayRzZXF1ZW5jZShtYWtlTmV3UGlkcyk7CgkJCQl9LAoJCQkJJGVsbSRjb3JlJFRhc2skc2VxdWVuY2UoCgkJCQkJQTIoJGVsbSRjb3JlJExpc3QkbWFwLCAkZWxtJGNvcmUkUHJvY2VzcyRraWxsLCBkZWFkUGlkcykpKSk7Cgl9KTsKdmFyICRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRvblNlbGZNc2cgPSBGMygKCWZ1bmN0aW9uIChyb3V0ZXIsIF92MCwgc3RhdGUpIHsKCQl2YXIga2V5ID0gX3YwLmtleTsKCQl2YXIgZXZlbnQgPSBfdjAuZXZlbnQ7CgkJdmFyIHRvTWVzc2FnZSA9IGZ1bmN0aW9uIChfdjIpIHsKCQkJdmFyIHN1YktleSA9IF92Mi5hOwoJCQl2YXIgX3YzID0gX3YyLmI7CgkJCXZhciBub2RlID0gX3YzLmE7CgkJCXZhciBuYW1lID0gX3YzLmI7CgkJCXZhciBkZWNvZGVyID0gX3YzLmM7CgkJCXJldHVybiBfVXRpbHNfZXEoc3ViS2V5LCBrZXkpID8gQTIoX0Jyb3dzZXJfZGVjb2RlRXZlbnQsIGRlY29kZXIsIGV2ZW50KSA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCX07CgkJdmFyIG1lc3NhZ2VzID0gQTIoJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLCB0b01lc3NhZ2UsIHN0YXRlLnN1YnMpOwoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJFRhc2skYW5kVGhlbiwKCQkJZnVuY3Rpb24gKF92MSkgewoJCQkJcmV0dXJuICRlbG0kY29yZSRUYXNrJHN1Y2NlZWQoc3RhdGUpOwoJCQl9LAoJCQkkZWxtJGNvcmUkVGFzayRzZXF1ZW5jZSgKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkkZWxtJGNvcmUkUGxhdGZvcm0kc2VuZFRvQXBwKHJvdXRlciksCgkJCQkJbWVzc2FnZXMpKSk7Cgl9KTsKdmFyICRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRzdWJNYXAgPSBGMigKCWZ1bmN0aW9uIChmdW5jLCBfdjApIHsKCQl2YXIgbm9kZSA9IF92MC5hOwoJCXZhciBuYW1lID0gX3YwLmI7CgkJdmFyIGRlY29kZXIgPSBfdjAuYzsKCQlyZXR1cm4gQTMoCgkJCSRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRNeVN1YiwKCQkJbm9kZSwKCQkJbmFtZSwKCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwgZnVuYywgZGVjb2RlcikpOwoJfSk7Cl9QbGF0Zm9ybV9lZmZlY3RNYW5hZ2Vyc1snQnJvd3Nlci5FdmVudHMnXSA9IF9QbGF0Zm9ybV9jcmVhdGVNYW5hZ2VyKCRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRpbml0LCAkZWxtJGJyb3dzZXIkQnJvd3NlciRFdmVudHMkb25FZmZlY3RzLCAkZWxtJGJyb3dzZXIkQnJvd3NlciRFdmVudHMkb25TZWxmTXNnLCAwLCAkZWxtJGJyb3dzZXIkQnJvd3NlciRFdmVudHMkc3ViTWFwKTsKdmFyICRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRzdWJzY3JpcHRpb24gPSBfUGxhdGZvcm1fbGVhZignQnJvd3Nlci5FdmVudHMnKTsKdmFyICRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRvbiA9IEYzKAoJZnVuY3Rpb24gKG5vZGUsIG5hbWUsIGRlY29kZXIpIHsKCQlyZXR1cm4gJGVsbSRicm93c2VyJEJyb3dzZXIkRXZlbnRzJHN1YnNjcmlwdGlvbigKCQkJQTMoJGVsbSRicm93c2VyJEJyb3dzZXIkRXZlbnRzJE15U3ViLCBub2RlLCBuYW1lLCBkZWNvZGVyKSk7Cgl9KTsKdmFyICRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRvbktleURvd24gPSBBMigkZWxtJGJyb3dzZXIkQnJvd3NlciRFdmVudHMkb24sICRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyREb2N1bWVudCwgJ2tleWRvd24nKTsKdmFyICRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRvbk1vdXNlRG93biA9IEEyKCRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRvbiwgJGVsbSRicm93c2VyJEJyb3dzZXIkRXZlbnRzJERvY3VtZW50LCAnbW91c2Vkb3duJyk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRyZWNlaXZlTWVzc2FnZUZyb21Db250YWluZXJIdG1sID0gX1BsYXRmb3JtX2luY29taW5nUG9ydCgncmVjZWl2ZU1lc3NhZ2VGcm9tQ29udGFpbmVySHRtbCcsICRlbG0kanNvbiRKc29uJERlY29kZSR2YWx1ZSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRyZWNlaXZlTWVzc2FnZUZyb21Nb25hY29GcmFtZSA9IF9QbGF0Zm9ybV9pbmNvbWluZ1BvcnQoJ3JlY2VpdmVNZXNzYWdlRnJvbU1vbmFjb0ZyYW1lJywgJGVsbSRqc29uJEpzb24kRGVjb2RlJHZhbHVlKTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHJlY2VpdmVSZXNwb25zZUZyb21MYW5ndWFnZVNlcnZpY2UgPSBfUGxhdGZvcm1faW5jb21pbmdQb3J0KCdyZWNlaXZlUmVzcG9uc2VGcm9tTGFuZ3VhZ2VTZXJ2aWNlJywgJGVsbSRqc29uJEpzb24kRGVjb2RlJHZhbHVlKTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHRpdGxlQmFyTWVudWJhckVsZW1lbnRJZCA9ICd0aXRsZWJhci1tZW51YmFyJzsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHN1YnNjcmlwdGlvbnMgPSBmdW5jdGlvbiAoX3YwKSB7CglyZXR1cm4gJGVsbSRjb3JlJFBsYXRmb3JtJFN1YiRiYXRjaCgKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHJlY2VpdmVNZXNzYWdlRnJvbU1vbmFjb0ZyYW1lKAoJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kTW9uYWNvRWRpdG9yRXZlbnQsICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFdvcmtzcGFjZUV2ZW50KSksCgkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRyZWNlaXZlTWVzc2FnZUZyb21Db250YWluZXJIdG1sKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFJlY2VpdmVNZXNzYWdlRnJvbUNvbnRhaW5lckh0bWxFdmVudCksCgkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRyZWNlaXZlUmVzcG9uc2VGcm9tTGFuZ3VhZ2VTZXJ2aWNlKAoJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kUmVzcG9uc2VGcm9tTGFuZ3VhZ2VTZXJ2aWNlRXZlbnQsICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFdvcmtzcGFjZUV2ZW50KSksCgkJCQlBMigkZWxtJHRpbWUkVGltZSRldmVyeSwgNTAwLCAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRUaW1lSGFzQXJyaXZlZCksCgkJCQkkZWxtJGJyb3dzZXIkQnJvd3NlciRFdmVudHMkb25LZXlEb3duKAoJCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0S2V5RG93bkV2ZW50LCAkR2l6cmEkZWxtX2tleWJvYXJkX2V2ZW50JEtleWJvYXJkJEV2ZW50JGRlY29kZUtleWJvYXJkRXZlbnQpKSwKCQkJCSRlbG0kYnJvd3NlciRCcm93c2VyJEV2ZW50cyRvbk1vdXNlRG93bigKCQkJCUEyKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGlzVGFyZ2V0T3V0c2lkZVBhcmVudFdpdGhJZCwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdGl0bGVCYXJNZW51YmFyRWxlbWVudElkLCAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRGb2N1c091dHNpZGVUaXRsZWJhck1lbnUpKQoJCQldKSk7Cn07CnZhciAkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kdGV4dCA9IF9WaXJ0dWFsRG9tX3RleHQ7CnZhciAkZWxtJGh0bWwkSHRtbCR0ZXh0ID0gJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJHRleHQ7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkVmlzdWFscyRDbG9zZUVkaXRvckljb24gPSB7JDogJ0Nsb3NlRWRpdG9ySWNvbid9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkRGlyZWN0b3J5Q29sbGFwc2VkSWNvbiA9IHskOiAnRGlyZWN0b3J5Q29sbGFwc2VkSWNvbid9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kRWRpdG9yUGFuZSA9IHskOiAnRWRpdG9yUGFuZSd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kT3V0cHV0UGFuZSA9IHskOiAnT3V0cHV0UGFuZSd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0Q2FuY2VsRm9ybWF0dGluZyA9IHskOiAnVXNlcklucHV0Q2FuY2VsRm9ybWF0dGluZyd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0T3BlbkZpbGVJbkVkaXRvciA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdVc2VySW5wdXRPcGVuRmlsZUluRWRpdG9yJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRXb3Jrc3BhY2VNZW51RW50cnkgPSB7JDogJ1dvcmtzcGFjZU1lbnVFbnRyeSd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkQ2hhdEFjdGlvbkljb24gPSB7JDogJ0NoYXRBY3Rpb25JY29uJ307CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkVmlzdWFscyRHaXRIdWJBY3Rpb25JY29uID0geyQ6ICdHaXRIdWJBY3Rpb25JY29uJ307CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRhY3Rpdml0eUJhcldpZHRoID0gNDg7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQWxpZ25ZID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0FsaWduWScsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEJvdHRvbSA9IHskOiAnQm90dG9tJ307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRhbGlnbkJvdHRvbSA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBbGlnblkoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEJvdHRvbSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGVDbGFzcyA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdTdHlsZUNsYXNzJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRUcmFuc3BhcmVuY3kgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnVHJhbnNwYXJlbmN5JywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRlbG0kY29yZSRCYXNpY3Mkcm91bmQgPSBfQmFzaWNzX3JvdW5kOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZsb2F0Q2xhc3MgPSBmdW5jdGlvbiAoeCkgewoJcmV0dXJuICRlbG0kY29yZSRTdHJpbmckZnJvbUludCgKCQkkZWxtJGNvcmUkQmFzaWNzJHJvdW5kKHggKiAyNTUpKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJEZsYWcgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRmxhZycsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckU2Vjb25kID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1NlY29uZCcsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZmxhZyA9IGZ1bmN0aW9uIChpKSB7CglyZXR1cm4gKGkgPiAzMSkgPyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRTZWNvbmQoMSA8PCAoaSAtIDMyKSkgOiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRGbGFnKDEgPDwgaSk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR0cmFuc3BhcmVuY3kgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmbGFnKDApOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkYWxwaGEgPSBmdW5jdGlvbiAobykgewoJdmFyIHRyYW5zcGFyZW5jeSA9IGZ1bmN0aW9uICh4KSB7CgkJcmV0dXJuIDEgLSB4OwoJfSgKCQlBMigKCQkJJGVsbSRjb3JlJEJhc2ljcyRtaW4sCgkJCTEuMCwKCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRtYXgsIDAuMCwgbykpKTsKCXJldHVybiBBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGVDbGFzcywKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR0cmFuc3BhcmVuY3ksCgkJQTIoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRUcmFuc3BhcmVuY3ksCgkJCSd0cmFuc3BhcmVuY3ktJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmbG9hdENsYXNzKHRyYW5zcGFyZW5jeSksCgkJCXRyYW5zcGFyZW5jeSkpOwp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEFsaWduWCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdBbGlnblgnLCBhOiBhfTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRDZW50ZXJYID0geyQ6ICdDZW50ZXJYJ307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjZW50ZXJYID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEFsaWduWCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ2VudGVyWCk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ29sb3JlZCA9IEYzKAoJZnVuY3Rpb24gKGEsIGIsIGMpIHsKCQlyZXR1cm4geyQ6ICdDb2xvcmVkJywgYTogYSwgYjogYiwgYzogY307Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGJnQ29sb3IgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmbGFnKDgpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZvcm1hdENvbG9yQ2xhc3MgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgcmVkID0gX3YwLmE7Cgl2YXIgZ3JlZW4gPSBfdjAuYjsKCXZhciBibHVlID0gX3YwLmM7Cgl2YXIgYWxwaGEgPSBfdjAuZDsKCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZmxvYXRDbGFzcyhyZWQpICsgKCctJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZmxvYXRDbGFzcyhncmVlbikgKyAoJy0nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmbG9hdENsYXNzKGJsdWUpICsgKCctJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmbG9hdENsYXNzKGFscGhhKSkpKSkpOwp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQmFja2dyb3VuZCRjb2xvciA9IGZ1bmN0aW9uIChjbHIpIHsKCXJldHVybiBBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGVDbGFzcywKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRiZ0NvbG9yLAoJCUEzKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ29sb3JlZCwKCQkJJ2JnLScgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZm9ybWF0Q29sb3JDbGFzcyhjbHIpLAoJCQknYmFja2dyb3VuZC1jb2xvcicsCgkJCWNscikpOwp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVua2V5ZWQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVW5rZXllZCcsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEFzQ29sdW1uID0geyQ6ICdBc0NvbHVtbid9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFzQ29sdW1uID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEFzQ29sdW1uOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMgPSB7YWJvdmU6ICdhJywgYWN0aXZlOiAnYXR2JywgYWxpZ25Cb3R0b206ICdhYicsIGFsaWduQ2VudGVyWDogJ2N4JywgYWxpZ25DZW50ZXJZOiAnY3knLCBhbGlnbkNvbnRhaW5lckJvdHRvbTogJ2FjYicsIGFsaWduQ29udGFpbmVyQ2VudGVyWDogJ2FjY3gnLCBhbGlnbkNvbnRhaW5lckNlbnRlclk6ICdhY2N5JywgYWxpZ25Db250YWluZXJSaWdodDogJ2FjcicsIGFsaWduTGVmdDogJ2FsJywgYWxpZ25SaWdodDogJ2FyJywgYWxpZ25Ub3A6ICdhdCcsIGFsaWduZWRIb3Jpem9udGFsbHk6ICdhaCcsIGFsaWduZWRWZXJ0aWNhbGx5OiAnYXYnLCBhbnk6ICdzJywgYmVoaW5kOiAnYmgnLCBiZWxvdzogJ2InLCBib2xkOiAndzcnLCBib3JkZXJEYXNoZWQ6ICdiZCcsIGJvcmRlckRvdHRlZDogJ2JkdCcsIGJvcmRlck5vbmU6ICdibicsIGJvcmRlclNvbGlkOiAnYnMnLCBjYXB0dXJlUG9pbnRlckV2ZW50czogJ2NwZScsIGNsaXA6ICdjcCcsIGNsaXBYOiAnY3B4JywgY2xpcFk6ICdjcHknLCBjb2x1bW46ICdjJywgY29udGFpbmVyOiAnY3RyJywgY29udGVudEJvdHRvbTogJ2NiJywgY29udGVudENlbnRlclg6ICdjY3gnLCBjb250ZW50Q2VudGVyWTogJ2NjeScsIGNvbnRlbnRMZWZ0OiAnY2wnLCBjb250ZW50UmlnaHQ6ICdjcicsIGNvbnRlbnRUb3A6ICdjdCcsIGN1cnNvclBvaW50ZXI6ICdjcHRyJywgY3Vyc29yVGV4dDogJ2N0eHQnLCBmb2N1czogJ2ZjcycsIGZvY3VzZWRXaXRoaW46ICdmb2N1cy13aXRoaW4nLCBmdWxsU2l6ZTogJ2ZzJywgZ3JpZDogJ2cnLCBoYXNCZWhpbmQ6ICdoYmgnLCBoZWlnaHRDb250ZW50OiAnaGMnLCBoZWlnaHRFeGFjdDogJ2hlJywgaGVpZ2h0RmlsbDogJ2hmJywgaGVpZ2h0RmlsbFBvcnRpb246ICdoZnAnLCBob3ZlcjogJ2h2JywgaW1hZ2VDb250YWluZXI6ICdpYycsIGluRnJvbnQ6ICdmcicsIGlucHV0TGFiZWw6ICdsYmwnLCBpbnB1dE11bHRpbGluZTogJ2ltbCcsIGlucHV0TXVsdGlsaW5lRmlsbGVyOiAnaW1sZicsIGlucHV0TXVsdGlsaW5lUGFyZW50OiAnaW1scCcsIGlucHV0TXVsdGlsaW5lV3JhcHBlcjogJ2ltcGx3JywgaW5wdXRUZXh0OiAnaXQnLCBpdGFsaWM6ICdpJywgbGluazogJ2xuaycsIG5lYXJieTogJ25iJywgbm9UZXh0U2VsZWN0aW9uOiAnbm90eHQnLCBvbkxlZnQ6ICdvbCcsIG9uUmlnaHQ6ICdvcicsIG9wYXF1ZTogJ29xJywgb3ZlcmZsb3dIaWRkZW46ICdvaCcsIHBhZ2U6ICdwZycsIHBhcmFncmFwaDogJ3AnLCBwYXNzUG9pbnRlckV2ZW50czogJ3BwZScsIHJvb3Q6ICd1aScsIHJvdzogJ3InLCBzY3JvbGxiYXJzOiAnc2InLCBzY3JvbGxiYXJzWDogJ3NieCcsIHNjcm9sbGJhcnNZOiAnc2J5Jywgc2VCdXR0b246ICdzYnQnLCBzaW5nbGU6ICdlJywgc2l6ZUJ5Q2FwaXRhbDogJ2NhcCcsIHNwYWNlRXZlbmx5OiAnc2V2Jywgc3RyaWtlOiAnc2snLCB0ZXh0OiAndCcsIHRleHRDZW50ZXI6ICd0YycsIHRleHRFeHRyYUJvbGQ6ICd3OCcsIHRleHRFeHRyYUxpZ2h0OiAndzInLCB0ZXh0SGVhdnk6ICd3OScsIHRleHRKdXN0aWZ5OiAndGonLCB0ZXh0SnVzdGlmeUFsbDogJ3RqYScsIHRleHRMZWZ0OiAndGwnLCB0ZXh0TGlnaHQ6ICd3MycsIHRleHRNZWRpdW06ICd3NScsIHRleHROb3JtYWxXZWlnaHQ6ICd3NCcsIHRleHRSaWdodDogJ3RyJywgdGV4dFNlbWlCb2xkOiAndzYnLCB0ZXh0VGhpbjogJ3cxJywgdGV4dFVuaXRhbGljaXplZDogJ3R1bicsIHRyYW5zaXRpb246ICd0cycsIHRyYW5zcGFyZW50OiAnY2xyJywgdW5kZXJsaW5lOiAndScsIHdpZHRoQ29udGVudDogJ3djJywgd2lkdGhFeGFjdDogJ3dlJywgd2lkdGhGaWxsOiAnd2YnLCB3aWR0aEZpbGxQb3J0aW9uOiAnd2ZwJywgd3JhcHBlZDogJ3dycCd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEdlbmVyaWMgPSB7JDogJ0dlbmVyaWMnfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRkaXYgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkR2VuZXJpYzsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb05lYXJieUNoaWxkcmVuID0geyQ6ICdOb05lYXJieUNoaWxkcmVuJ307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkY29sdW1uQ2xhc3MgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkgKyAoJyAnICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29sdW1uKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRncmlkQ2xhc3MgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkgKyAoJyAnICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuZ3JpZCk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcGFnZUNsYXNzID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55ICsgKCcgJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnBhZ2UpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHBhcmFncmFwaENsYXNzID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55ICsgKCcgJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnBhcmFncmFwaCk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcm93Q2xhc3MgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkgKyAoJyAnICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMucm93KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRzaW5nbGVDbGFzcyA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSArICgnICcgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5zaW5nbGUpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGNvbnRleHRDbGFzc2VzID0gZnVuY3Rpb24gKGNvbnRleHQpIHsKCXN3aXRjaCAoY29udGV4dC4kKSB7CgkJY2FzZSAnQXNSb3cnOgoJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJvd0NsYXNzOwoJCWNhc2UgJ0FzQ29sdW1uJzoKCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRjb2x1bW5DbGFzczsKCQljYXNlICdBc0VsJzoKCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRzaW5nbGVDbGFzczsKCQljYXNlICdBc0dyaWQnOgoJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGdyaWRDbGFzczsKCQljYXNlICdBc1BhcmFncmFwaCc6CgkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcGFyYWdyYXBoQ2xhc3M7CgkJZGVmYXVsdDoKCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRwYWdlQ2xhc3M7Cgl9Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkS2V5ZWQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnS2V5ZWQnLCBhOiBhfTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb1N0eWxlU2hlZXQgPSB7JDogJ05vU3R5bGVTaGVldCd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlZCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdTdHlsZWQnLCBhOiBhfTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRVbnN0eWxlZCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdVbnN0eWxlZCcsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFkZENoaWxkcmVuID0gRjIoCglmdW5jdGlvbiAoZXhpc3RpbmcsIG5lYXJieUNoaWxkcmVuKSB7CgkJc3dpdGNoIChuZWFyYnlDaGlsZHJlbi4kKSB7CgkJCWNhc2UgJ05vTmVhcmJ5Q2hpbGRyZW4nOgoJCQkJcmV0dXJuIGV4aXN0aW5nOwoJCQljYXNlICdDaGlsZHJlbkJlaGluZCc6CgkJCQl2YXIgYmVoaW5kID0gbmVhcmJ5Q2hpbGRyZW4uYTsKCQkJCXJldHVybiBfVXRpbHNfYXAoYmVoaW5kLCBleGlzdGluZyk7CgkJCWNhc2UgJ0NoaWxkcmVuSW5Gcm9udCc6CgkJCQl2YXIgaW5Gcm9udCA9IG5lYXJieUNoaWxkcmVuLmE7CgkJCQlyZXR1cm4gX1V0aWxzX2FwKGV4aXN0aW5nLCBpbkZyb250KTsKCQkJZGVmYXVsdDoKCQkJCXZhciBiZWhpbmQgPSBuZWFyYnlDaGlsZHJlbi5hOwoJCQkJdmFyIGluRnJvbnQgPSBuZWFyYnlDaGlsZHJlbi5iOwoJCQkJcmV0dXJuIF9VdGlsc19hcCgKCQkJCQliZWhpbmQsCgkJCQkJX1V0aWxzX2FwKGV4aXN0aW5nLCBpbkZyb250KSk7CgkJfQoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYWRkS2V5ZWRDaGlsZHJlbiA9IEYzKAoJZnVuY3Rpb24gKGtleSwgZXhpc3RpbmcsIG5lYXJieUNoaWxkcmVuKSB7CgkJc3dpdGNoIChuZWFyYnlDaGlsZHJlbi4kKSB7CgkJCWNhc2UgJ05vTmVhcmJ5Q2hpbGRyZW4nOgoJCQkJcmV0dXJuIGV4aXN0aW5nOwoJCQljYXNlICdDaGlsZHJlbkJlaGluZCc6CgkJCQl2YXIgYmVoaW5kID0gbmVhcmJ5Q2hpbGRyZW4uYTsKCQkJCXJldHVybiBfVXRpbHNfYXAoCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJZnVuY3Rpb24gKHgpIHsKCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKGtleSwgeCk7CgkJCQkJCX0sCgkJCQkJCWJlaGluZCksCgkJCQkJZXhpc3RpbmcpOwoJCQljYXNlICdDaGlsZHJlbkluRnJvbnQnOgoJCQkJdmFyIGluRnJvbnQgPSBuZWFyYnlDaGlsZHJlbi5hOwoJCQkJcmV0dXJuIF9VdGlsc19hcCgKCQkJCQlleGlzdGluZywKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQlmdW5jdGlvbiAoeCkgewoJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoa2V5LCB4KTsKCQkJCQkJfSwKCQkJCQkJaW5Gcm9udCkpOwoJCQlkZWZhdWx0OgoJCQkJdmFyIGJlaGluZCA9IG5lYXJieUNoaWxkcmVuLmE7CgkJCQl2YXIgaW5Gcm9udCA9IG5lYXJieUNoaWxkcmVuLmI7CgkJCQlyZXR1cm4gX1V0aWxzX2FwKAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCWZ1bmN0aW9uICh4KSB7CgkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihrZXksIHgpOwoJCQkJCQl9LAoJCQkJCQliZWhpbmQpLAoJCQkJCV9VdGlsc19hcCgKCQkJCQkJZXhpc3RpbmcsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQkJZnVuY3Rpb24gKHgpIHsKCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihrZXksIHgpOwoJCQkJCQkJfSwKCQkJCQkJCWluRnJvbnQpKSk7CgkJfQoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQXNFbCA9IHskOiAnQXNFbCd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFzRWwgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQXNFbDsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBc1BhcmFncmFwaCA9IHskOiAnQXNQYXJhZ3JhcGgnfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhc1BhcmFncmFwaCA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBc1BhcmFncmFwaDsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGFsaWduQm90dG9tID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZmxhZyg0MSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhbGlnblJpZ2h0ID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZmxhZyg0MCk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRjZW50ZXJYID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZmxhZyg0Mik7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRjZW50ZXJZID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZmxhZyg0Myk7CnZhciAkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0cmluZ1Byb3BlcnR5ID0gRjIoCglmdW5jdGlvbiAoa2V5LCBzdHJpbmcpIHsKCQlyZXR1cm4gQTIoCgkJCV9WaXJ0dWFsRG9tX3Byb3BlcnR5LAoJCQlrZXksCgkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcoc3RyaW5nKSk7Cgl9KTsKdmFyICRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkY2xhc3MgPSAkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0cmluZ1Byb3BlcnR5KCdjbGFzc05hbWUnKTsKdmFyICRlbG0kaHRtbCRIdG1sJGRpdiA9IF9WaXJ0dWFsRG9tX25vZGUoJ2RpdicpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGxlbmd0aENsYXNzTmFtZSA9IGZ1bmN0aW9uICh4KSB7Cglzd2l0Y2ggKHguJCkgewoJCWNhc2UgJ1B4JzoKCQkJdmFyIHB4ID0geC5hOwoJCQlyZXR1cm4gJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHB4KSArICdweCc7CgkJY2FzZSAnQ29udGVudCc6CgkJCXJldHVybiAnYXV0byc7CgkJY2FzZSAnRmlsbCc6CgkJCXZhciBpID0geC5hOwoJCQlyZXR1cm4gJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KGkpICsgJ2ZyJzsKCQljYXNlICdNaW4nOgoJCQl2YXIgbWluID0geC5hOwoJCQl2YXIgbGVuID0geC5iOwoJCQlyZXR1cm4gJ21pbicgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KG1pbikgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkbGVuZ3RoQ2xhc3NOYW1lKGxlbikpOwoJCWRlZmF1bHQ6CgkJCXZhciBtYXggPSB4LmE7CgkJCXZhciBsZW4gPSB4LmI7CgkJCXJldHVybiAnbWF4JyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQobWF4KSArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRsZW5ndGhDbGFzc05hbWUobGVuKSk7Cgl9Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdHJhbnNmb3JtQ2xhc3MgPSBmdW5jdGlvbiAodHJhbnNmb3JtKSB7Cglzd2l0Y2ggKHRyYW5zZm9ybS4kKSB7CgkJY2FzZSAnVW50cmFuc2Zvcm1lZCc6CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQljYXNlICdNb3ZlZCc6CgkJCXZhciBfdjEgPSB0cmFuc2Zvcm0uYTsKCQkJdmFyIHggPSBfdjEuYTsKCQkJdmFyIHkgPSBfdjEuYjsKCQkJdmFyIHogPSBfdjEuYzsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJJ212LScgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZsb2F0Q2xhc3MoeCkgKyAoJy0nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmbG9hdENsYXNzKHkpICsgKCctJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmbG9hdENsYXNzKHopKSkpKSk7CgkJZGVmYXVsdDoKCQkJdmFyIF92MiA9IHRyYW5zZm9ybS5hOwoJCQl2YXIgdHggPSBfdjIuYTsKCQkJdmFyIHR5ID0gX3YyLmI7CgkJCXZhciB0eiA9IF92Mi5jOwoJCQl2YXIgX3YzID0gdHJhbnNmb3JtLmI7CgkJCXZhciBzeCA9IF92My5hOwoJCQl2YXIgc3kgPSBfdjMuYjsKCQkJdmFyIHN6ID0gX3YzLmM7CgkJCXZhciBfdjQgPSB0cmFuc2Zvcm0uYzsKCQkJdmFyIG94ID0gX3Y0LmE7CgkJCXZhciBveSA9IF92NC5iOwoJCQl2YXIgb3ogPSBfdjQuYzsKCQkJdmFyIGFuZ2xlID0gdHJhbnNmb3JtLmQ7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCSd0ZnJtLScgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZsb2F0Q2xhc3ModHgpICsgKCctJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZmxvYXRDbGFzcyh0eSkgKyAoJy0nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmbG9hdENsYXNzKHR6KSArICgnLScgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZsb2F0Q2xhc3Moc3gpICsgKCctJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZmxvYXRDbGFzcyhzeSkgKyAoJy0nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmbG9hdENsYXNzKHN6KSArICgnLScgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZsb2F0Q2xhc3Mob3gpICsgKCctJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZmxvYXRDbGFzcyhveSkgKyAoJy0nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmbG9hdENsYXNzKG96KSArICgnLScgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZmxvYXRDbGFzcyhhbmdsZSkpKSkpKSkpKSkpKSkpKSkpKSkpOwoJfQp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGdldFN0eWxlTmFtZSA9IGZ1bmN0aW9uIChzdHlsZSkgewoJc3dpdGNoIChzdHlsZS4kKSB7CgkJY2FzZSAnU2hhZG93cyc6CgkJCXZhciBuYW1lID0gc3R5bGUuYTsKCQkJcmV0dXJuIG5hbWU7CgkJY2FzZSAnVHJhbnNwYXJlbmN5JzoKCQkJdmFyIG5hbWUgPSBzdHlsZS5hOwoJCQl2YXIgbyA9IHN0eWxlLmI7CgkJCXJldHVybiBuYW1lOwoJCWNhc2UgJ1N0eWxlJzoKCQkJdmFyIF9jbGFzcyA9IHN0eWxlLmE7CgkJCXJldHVybiBfY2xhc3M7CgkJY2FzZSAnRm9udEZhbWlseSc6CgkJCXZhciBuYW1lID0gc3R5bGUuYTsKCQkJcmV0dXJuIG5hbWU7CgkJY2FzZSAnRm9udFNpemUnOgoJCQl2YXIgaSA9IHN0eWxlLmE7CgkJCXJldHVybiAnZm9udC1zaXplLScgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoaSk7CgkJY2FzZSAnU2luZ2xlJzoKCQkJdmFyIF9jbGFzcyA9IHN0eWxlLmE7CgkJCXJldHVybiBfY2xhc3M7CgkJY2FzZSAnQ29sb3JlZCc6CgkJCXZhciBfY2xhc3MgPSBzdHlsZS5hOwoJCQlyZXR1cm4gX2NsYXNzOwoJCWNhc2UgJ1NwYWNpbmdTdHlsZSc6CgkJCXZhciBjbHMgPSBzdHlsZS5hOwoJCQl2YXIgeCA9IHN0eWxlLmI7CgkJCXZhciB5ID0gc3R5bGUuYzsKCQkJcmV0dXJuIGNsczsKCQljYXNlICdQYWRkaW5nU3R5bGUnOgoJCQl2YXIgY2xzID0gc3R5bGUuYTsKCQkJdmFyIHRvcCA9IHN0eWxlLmI7CgkJCXZhciByaWdodCA9IHN0eWxlLmM7CgkJCXZhciBib3R0b20gPSBzdHlsZS5kOwoJCQl2YXIgbGVmdCA9IHN0eWxlLmU7CgkJCXJldHVybiBjbHM7CgkJY2FzZSAnQm9yZGVyV2lkdGgnOgoJCQl2YXIgY2xzID0gc3R5bGUuYTsKCQkJdmFyIHRvcCA9IHN0eWxlLmI7CgkJCXZhciByaWdodCA9IHN0eWxlLmM7CgkJCXZhciBib3R0b20gPSBzdHlsZS5kOwoJCQl2YXIgbGVmdCA9IHN0eWxlLmU7CgkJCXJldHVybiBjbHM7CgkJY2FzZSAnR3JpZFRlbXBsYXRlU3R5bGUnOgoJCQl2YXIgdGVtcGxhdGUgPSBzdHlsZS5hOwoJCQlyZXR1cm4gJ2dyaWQtcm93cy0nICsgKEEyKAoJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJJy0nLAoJCQkJQTIoJGVsbSRjb3JlJExpc3QkbWFwLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkbGVuZ3RoQ2xhc3NOYW1lLCB0ZW1wbGF0ZS5yb3dzKSkgKyAoJy1jb2xzLScgKyAoQTIoCgkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQknLScsCgkJCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRsZW5ndGhDbGFzc05hbWUsIHRlbXBsYXRlLmNvbHVtbnMpKSArICgnLXNwYWNlLXgtJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkbGVuZ3RoQ2xhc3NOYW1lKHRlbXBsYXRlLnNwYWNpbmcuYSkgKyAoJy1zcGFjZS15LScgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkbGVuZ3RoQ2xhc3NOYW1lKHRlbXBsYXRlLnNwYWNpbmcuYikpKSkpKSk7CgkJY2FzZSAnR3JpZFBvc2l0aW9uJzoKCQkJdmFyIHBvcyA9IHN0eWxlLmE7CgkJCXJldHVybiAnZ3AgZ3JpZC1wb3MtJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9zLnJvdykgKyAoJy0nICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChwb3MuY29sKSArICgnLScgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHBvcy53aWR0aCkgKyAoJy0nICsgJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHBvcy5oZWlnaHQpKSkpKSkpOwoJCWNhc2UgJ1BzZXVkb1NlbGVjdG9yJzoKCQkJdmFyIHNlbGVjdG9yID0gc3R5bGUuYTsKCQkJdmFyIHN1YlN0eWxlID0gc3R5bGUuYjsKCQkJdmFyIG5hbWUgPSBmdW5jdGlvbiAoKSB7CgkJCQlzd2l0Y2ggKHNlbGVjdG9yLiQpIHsKCQkJCQljYXNlICdGb2N1cyc6CgkJCQkJCXJldHVybiAnZnMnOwoJCQkJCWNhc2UgJ0hvdmVyJzoKCQkJCQkJcmV0dXJuICdodic7CgkJCQkJZGVmYXVsdDoKCQkJCQkJcmV0dXJuICdhY3QnOwoJCQkJfQoJCQl9KCk7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCScgJywKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQlmdW5jdGlvbiAoc3R5KSB7CgkJCQkJCXZhciBfdjEgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZ2V0U3R5bGVOYW1lKHN0eSk7CgkJCQkJCWlmIChfdjEgPT09ICcnKSB7CgkJCQkJCQlyZXR1cm4gJyc7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgc3R5bGVOYW1lID0gX3YxOwoJCQkJCQkJcmV0dXJuIHN0eWxlTmFtZSArICgnLScgKyBuYW1lKTsKCQkJCQkJfQoJCQkJCX0sCgkJCQkJc3ViU3R5bGUpKTsKCQlkZWZhdWx0OgoJCQl2YXIgeCA9IHN0eWxlLmE7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCScnLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHRyYW5zZm9ybUNsYXNzKHgpKTsKCX0KfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZWR1Y2VTdHlsZXMgPSBGMigKCWZ1bmN0aW9uIChzdHlsZSwgbmV2ZXJtaW5kKSB7CgkJdmFyIGNhY2hlID0gbmV2ZXJtaW5kLmE7CgkJdmFyIGV4aXN0aW5nID0gbmV2ZXJtaW5kLmI7CgkJdmFyIHN0eWxlTmFtZSA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRnZXRTdHlsZU5hbWUoc3R5bGUpOwoJCXJldHVybiBBMigkZWxtJGNvcmUkU2V0JG1lbWJlciwgc3R5bGVOYW1lLCBjYWNoZSkgPyBuZXZlcm1pbmQgOiBfVXRpbHNfVHVwbGUyKAoJCQlBMigkZWxtJGNvcmUkU2V0JGluc2VydCwgc3R5bGVOYW1lLCBjYWNoZSksCgkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHN0eWxlLCBleGlzdGluZykpOwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHkgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnUHJvcGVydHknLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ1N0eWxlJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QgPSBmdW5jdGlvbiAoYykgewoJcmV0dXJuICcuJyArIGM7Cn07CnZhciAkZWxtJGNvcmUkU3RyaW5nJGZyb21GbG9hdCA9IF9TdHJpbmdfZnJvbU51bWJlcjsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmb3JtYXRDb2xvciA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciByZWQgPSBfdjAuYTsKCXZhciBncmVlbiA9IF92MC5iOwoJdmFyIGJsdWUgPSBfdjAuYzsKCXZhciBhbHBoYSA9IF92MC5kOwoJcmV0dXJuICdyZ2JhKCcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KAoJCSRlbG0kY29yZSRCYXNpY3Mkcm91bmQocmVkICogMjU1KSkgKyAoKCcsJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludCgKCQkkZWxtJGNvcmUkQmFzaWNzJHJvdW5kKGdyZWVuICogMjU1KSkpICsgKCgnLCcgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoCgkJJGVsbSRjb3JlJEJhc2ljcyRyb3VuZChibHVlICogMjU1KSkpICsgKCcsJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21GbG9hdChhbHBoYSkgKyAnKScpKSkpKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmb3JtYXRCb3hTaGFkb3cgPSBmdW5jdGlvbiAoc2hhZG93KSB7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCScgJywKCQlBMigKCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLAoJCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJc2hhZG93Lmluc2V0ID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoJ2luc2V0JykgOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywKCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21GbG9hdChzaGFkb3cub2Zmc2V0LmEpICsgJ3B4JyksCgkJCQkJJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQoc2hhZG93Lm9mZnNldC5iKSArICdweCcpLAoJCQkJCSRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCSRlbG0kY29yZSRTdHJpbmckZnJvbUZsb2F0KHNoYWRvdy5ibHVyKSArICdweCcpLAoJCQkJCSRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCSRlbG0kY29yZSRTdHJpbmckZnJvbUZsb2F0KHNoYWRvdy5zaXplKSArICdweCcpLAoJCQkJCSRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmb3JtYXRDb2xvcihzaGFkb3cuY29sb3IpKQoJCQkJXSkpKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJGb2N1c1N0eWxlID0gZnVuY3Rpb24gKGZvY3VzKSB7CglyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJQTIoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTdHlsZSwKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5mb2N1c2VkV2l0aGluKSArICc6Zm9jdXMtd2l0aGluJywKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsCgkJCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCWZ1bmN0aW9uIChjb2xvcikgewoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwKCQkJCQkJCQknYm9yZGVyLWNvbG9yJywKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZm9ybWF0Q29sb3IoY29sb3IpKTsKCQkJCQkJfSwKCQkJCQkJZm9jdXMuYm9yZGVyQ29sb3IpLAoJCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJCQkJZnVuY3Rpb24gKGNvbG9yKSB7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFByb3BlcnR5LAoJCQkJCQkJCSdiYWNrZ3JvdW5kLWNvbG9yJywKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZm9ybWF0Q29sb3IoY29sb3IpKTsKCQkJCQkJfSwKCQkJCQkJZm9jdXMuYmFja2dyb3VuZENvbG9yKSwKCQkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCWZ1bmN0aW9uIChzaGFkb3cpIHsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHksCgkJCQkJCQkJJ2JveC1zaGFkb3cnLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmb3JtYXRCb3hTaGFkb3coCgkJCQkJCQkJCXsKCQkJCQkJCQkJCWJsdXI6IHNoYWRvdy5ibHVyLAoJCQkJCQkJCQkJY29sb3I6IHNoYWRvdy5jb2xvciwKCQkJCQkJCQkJCWluc2V0OiBmYWxzZSwKCQkJCQkJCQkJCW9mZnNldDogQTIoCgkJCQkJCQkJCQkJJGVsbSRjb3JlJFR1cGxlJG1hcFNlY29uZCwKCQkJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJHRvRmxvYXQsCgkJCQkJCQkJCQkJQTIoJGVsbSRjb3JlJFR1cGxlJG1hcEZpcnN0LCAkZWxtJGNvcmUkQmFzaWNzJHRvRmxvYXQsIHNoYWRvdy5vZmZzZXQpKSwKCQkJCQkJCQkJCXNpemU6IHNoYWRvdy5zaXplCgkJCQkJCQkJCX0pKTsKCQkJCQkJfSwKCQkJCQkJZm9jdXMuc2hhZG93KSwKCQkJCQkJJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwgJ291dGxpbmUnLCAnbm9uZScpKQoJCQkJCV0pKSksCgkJCUEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGUsCgkJCSgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSkgKyAnOmZvY3VzIC5mb2N1c2FibGUsICcpICsgKCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSkgKyAnLmZvY3VzYWJsZTpmb2N1cywgJykgKyAoJy51aS1zbGlkZS1iYXI6Zm9jdXMgKyAnICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55KSArICcgLmZvY3VzYWJsZS10aHVtYicpKSksCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLAoJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQlmdW5jdGlvbiAoY29sb3IpIHsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHksCgkJCQkJCQkJJ2JvcmRlci1jb2xvcicsCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZvcm1hdENvbG9yKGNvbG9yKSk7CgkJCQkJCX0sCgkJCQkJCWZvY3VzLmJvcmRlckNvbG9yKSwKCQkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCWZ1bmN0aW9uIChjb2xvcikgewoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwKCQkJCQkJCQknYmFja2dyb3VuZC1jb2xvcicsCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZvcm1hdENvbG9yKGNvbG9yKSk7CgkJCQkJCX0sCgkJCQkJCWZvY3VzLmJhY2tncm91bmRDb2xvciksCgkJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQlmdW5jdGlvbiAoc2hhZG93KSB7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFByb3BlcnR5LAoJCQkJCQkJCSdib3gtc2hhZG93JywKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZm9ybWF0Qm94U2hhZG93KAoJCQkJCQkJCQl7CgkJCQkJCQkJCQlibHVyOiBzaGFkb3cuYmx1ciwKCQkJCQkJCQkJCWNvbG9yOiBzaGFkb3cuY29sb3IsCgkJCQkJCQkJCQlpbnNldDogZmFsc2UsCgkJCQkJCQkJCQlvZmZzZXQ6IEEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRUdXBsZSRtYXBTZWNvbmQsCgkJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyR0b0Zsb2F0LAoJCQkJCQkJCQkJCUEyKCRlbG0kY29yZSRUdXBsZSRtYXBGaXJzdCwgJGVsbSRjb3JlJEJhc2ljcyR0b0Zsb2F0LCBzaGFkb3cub2Zmc2V0KSksCgkJCQkJCQkJCQlzaXplOiBzaGFkb3cuc2l6ZQoJCQkJCQkJCQl9KSk7CgkJCQkJCX0sCgkJCQkJCWZvY3VzLnNoYWRvdyksCgkJCQkJCSRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHksICdvdXRsaW5lJywgJ25vbmUnKSkKCQkJCQldKSkpCgkJXSk7Cn07CnZhciAkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kbm9kZSA9IGZ1bmN0aW9uICh0YWcpIHsKCXJldHVybiBfVmlydHVhbERvbV9ub2RlKAoJCV9WaXJ0dWFsRG9tX25vU2NyaXB0KHRhZykpOwp9Owp2YXIgJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJHByb3BlcnR5ID0gRjIoCglmdW5jdGlvbiAoa2V5LCB2YWx1ZSkgewoJCXJldHVybiBBMigKCQkJX1ZpcnR1YWxEb21fcHJvcGVydHksCgkJCV9WaXJ0dWFsRG9tX25vSW5uZXJIdG1sT3JGb3JtQWN0aW9uKGtleSksCgkJCV9WaXJ0dWFsRG9tX25vSmF2YVNjcmlwdE9ySHRtbEpzb24odmFsdWUpKTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJEFsbENoaWxkcmVuID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0FsbENoaWxkcmVuJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRCYXRjaCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdCYXRjaCcsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0NoaWxkJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDbGFzcyA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdDbGFzcycsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdEZXNjcmlwdG9yJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRMZWZ0ID0geyQ6ICdMZWZ0J307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdQcm9wJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRSaWdodCA9IHskOiAnUmlnaHQnfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRTZWxmID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1NlbGYnLCBhOiBhfTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRTdXBwb3J0cyA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdTdXBwb3J0cycsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ29udGVudCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdDb250ZW50JywgYTogYX07Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQm90dG9tID0geyQ6ICdCb3R0b20nfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDZW50ZXJYID0geyQ6ICdDZW50ZXJYJ307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2VudGVyWSA9IHskOiAnQ2VudGVyWSd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFRvcCA9IHskOiAnVG9wJ307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkYWxpZ25tZW50cyA9IF9MaXN0X2Zyb21BcnJheSgKCVskbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkVG9wLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQm90dG9tLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUmlnaHQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRMZWZ0LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2VudGVyWCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENlbnRlclldKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjb250ZW50TmFtZSA9IGZ1bmN0aW9uIChkZXNjKSB7Cglzd2l0Y2ggKGRlc2MuYS4kKSB7CgkJY2FzZSAnVG9wJzoKCQkJdmFyIF92MSA9IGRlc2MuYTsKCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29udGVudFRvcCk7CgkJY2FzZSAnQm90dG9tJzoKCQkJdmFyIF92MiA9IGRlc2MuYTsKCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29udGVudEJvdHRvbSk7CgkJY2FzZSAnUmlnaHQnOgoJCQl2YXIgX3YzID0gZGVzYy5hOwoJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5jb250ZW50UmlnaHQpOwoJCWNhc2UgJ0xlZnQnOgoJCQl2YXIgX3Y0ID0gZGVzYy5hOwoJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5jb250ZW50TGVmdCk7CgkJY2FzZSAnQ2VudGVyWCc6CgkJCXZhciBfdjUgPSBkZXNjLmE7CgkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmNvbnRlbnRDZW50ZXJYKTsKCQlkZWZhdWx0OgoJCQl2YXIgX3Y2ID0gZGVzYy5hOwoJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5jb250ZW50Q2VudGVyWSk7Cgl9Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkc2VsZk5hbWUgPSBmdW5jdGlvbiAoZGVzYykgewoJc3dpdGNoIChkZXNjLmEuJCkgewoJCWNhc2UgJ1RvcCc6CgkJCXZhciBfdjEgPSBkZXNjLmE7CgkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFsaWduVG9wKTsKCQljYXNlICdCb3R0b20nOgoJCQl2YXIgX3YyID0gZGVzYy5hOwoJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkJvdHRvbSk7CgkJY2FzZSAnUmlnaHQnOgoJCQl2YXIgX3YzID0gZGVzYy5hOwoJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnblJpZ2h0KTsKCQljYXNlICdMZWZ0JzoKCQkJdmFyIF92NCA9IGRlc2MuYTsKCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25MZWZ0KTsKCQljYXNlICdDZW50ZXJYJzoKCQkJdmFyIF92NSA9IGRlc2MuYTsKCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25DZW50ZXJYKTsKCQlkZWZhdWx0OgoJCQl2YXIgX3Y2ID0gZGVzYy5hOwoJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkNlbnRlclkpOwoJfQp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRlc2NyaWJlQWxpZ25tZW50ID0gZnVuY3Rpb24gKHZhbHVlcykgewoJdmFyIGNyZWF0ZURlc2NyaXB0aW9uID0gZnVuY3Rpb24gKGFsaWdubWVudCkgewoJCXZhciBfdjAgPSB2YWx1ZXMoYWxpZ25tZW50KTsKCQl2YXIgY29udGVudCA9IF92MC5hOwoJCXZhciBpbmRpdiA9IF92MC5iOwoJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY29udGVudE5hbWUoCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENvbnRlbnQoYWxpZ25tZW50KSksCgkJCQljb250ZW50KSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkc2VsZk5hbWUoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkU2VsZihhbGlnbm1lbnQpKSwKCQkJCQkJaW5kaXYpCgkJCQkJXSkpCgkJCV0pOwoJfTsKCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQmF0Y2goCgkJQTIoJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLCBjcmVhdGVEZXNjcmlwdGlvbiwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGFsaWdubWVudHMpKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRlbERlc2NyaXB0aW9uID0gX0xpc3RfZnJvbUFycmF5KAoJWwoJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZGlzcGxheScsICdmbGV4JyksCgkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmbGV4LWRpcmVjdGlvbicsICdjb2x1bW4nKSwKCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3doaXRlLXNwYWNlJywgJ3ByZScpLAoJCUEyKAoJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaGFzQmVoaW5kKSwKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnei1pbmRleCcsICcwJyksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYmVoaW5kKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnei1pbmRleCcsICctMScpCgkJCQkJXSkpCgkJCV0pKSwKCQlBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNlQnV0dG9uKSwKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy50ZXh0KSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5oZWlnaHRGaWxsKSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1ncm93JywgJzAnKQoJCQkJCQkJXSkpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMud2lkdGhGaWxsKSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnYWxpZ24tc2VsZicsICdhdXRvICFpbXBvcnRhbnQnKQoJCQkJCQkJXSkpCgkJCQkJXSkpCgkJCV0pKSwKCQlBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5oZWlnaHRDb250ZW50KSwKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnaGVpZ2h0JywgJ2F1dG8nKQoJCQldKSksCgkJQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaGVpZ2h0RmlsbCksCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtZ3JvdycsICcxMDAwMDAnKQoJCQldKSksCgkJQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMud2lkdGhGaWxsKSwKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnd2lkdGgnLCAnMTAwJScpCgkJCV0pKSwKCQlBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy53aWR0aEZpbGxQb3J0aW9uKSwKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnd2lkdGgnLCAnMTAwJScpCgkJCV0pKSwKCQlBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy53aWR0aENvbnRlbnQpLAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdhbGlnbi1zZWxmJywgJ2ZsZXgtc3RhcnQnKQoJCQldKSksCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRlc2NyaWJlQWxpZ25tZW50KAoJCWZ1bmN0aW9uIChhbGlnbm1lbnQpIHsKCQkJc3dpdGNoIChhbGlnbm1lbnQuJCkgewoJCQkJY2FzZSAnVG9wJzoKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnanVzdGlmeS1jb250ZW50JywgJ2ZsZXgtc3RhcnQnKQoJCQkJCQkJXSksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ21hcmdpbi1ib3R0b20nLCAnYXV0byAhaW1wb3J0YW50JyksCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdtYXJnaW4tdG9wJywgJzAgIWltcG9ydGFudCcpCgkJCQkJCQldKSk7CgkJCQljYXNlICdCb3R0b20nOgoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdqdXN0aWZ5LWNvbnRlbnQnLCAnZmxleC1lbmQnKQoJCQkJCQkJXSksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ21hcmdpbi10b3AnLCAnYXV0byAhaW1wb3J0YW50JyksCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdtYXJnaW4tYm90dG9tJywgJzAgIWltcG9ydGFudCcpCgkJCQkJCQldKSk7CgkJCQljYXNlICdSaWdodCc6CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2FsaWduLWl0ZW1zJywgJ2ZsZXgtZW5kJykKCQkJCQkJCV0pLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdhbGlnbi1zZWxmJywgJ2ZsZXgtZW5kJykKCQkJCQkJCV0pKTsKCQkJCWNhc2UgJ0xlZnQnOgoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdhbGlnbi1pdGVtcycsICdmbGV4LXN0YXJ0JykKCQkJCQkJCV0pLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdhbGlnbi1zZWxmJywgJ2ZsZXgtc3RhcnQnKQoJCQkJCQkJXSkpOwoJCQkJY2FzZSAnQ2VudGVyWCc6CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2FsaWduLWl0ZW1zJywgJ2NlbnRlcicpCgkJCQkJCQldKSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnYWxpZ24tc2VsZicsICdjZW50ZXInKQoJCQkJCQkJXSkpOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSksCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ21hcmdpbi10b3AnLCAnYXV0bycpLAoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdtYXJnaW4tYm90dG9tJywgJ2F1dG8nKQoJCQkJCQkJCQldKSkKCQkJCQkJCV0pLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdtYXJnaW4tdG9wJywgJ2F1dG8gIWltcG9ydGFudCcpLAoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbWFyZ2luLWJvdHRvbScsICdhdXRvICFpbXBvcnRhbnQnKQoJCQkJCQkJXSkpOwoJCQl9CgkJfSkKCV0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGdyaWRBbGlnbm1lbnRzID0gZnVuY3Rpb24gKHZhbHVlcykgewoJdmFyIGNyZWF0ZURlc2NyaXB0aW9uID0gZnVuY3Rpb24gKGFsaWdubWVudCkgewoJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkc2VsZk5hbWUoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkU2VsZihhbGlnbm1lbnQpKSwKCQkJCQkJdmFsdWVzKGFsaWdubWVudCkpCgkJCQkJXSkpCgkJCV0pOwoJfTsKCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQmF0Y2goCgkJQTIoJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLCBjcmVhdGVEZXNjcmlwdGlvbiwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGFsaWdubWVudHMpKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRBYm92ZSA9IHskOiAnQWJvdmUnfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRCZWhpbmQgPSB7JDogJ0JlaGluZCd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJEJlbG93ID0geyQ6ICdCZWxvdyd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJE9uTGVmdCA9IHskOiAnT25MZWZ0J307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkT25SaWdodCA9IHskOiAnT25SaWdodCd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFdpdGhpbiA9IHskOiAnV2l0aGluJ307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkbG9jYXRpb25zID0gZnVuY3Rpb24gKCkgewoJdmFyIGxvYyA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRBYm92ZTsKCXZhciBfdjAgPSBmdW5jdGlvbiAoKSB7CgkJc3dpdGNoIChsb2MuJCkgewoJCQljYXNlICdBYm92ZSc6CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMDsKCQkJY2FzZSAnQmVsb3cnOgoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTA7CgkJCWNhc2UgJ09uUmlnaHQnOgoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTA7CgkJCWNhc2UgJ09uTGVmdCc6CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMDsKCQkJY2FzZSAnV2l0aGluJzoKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUwOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTA7CgkJfQoJfSgpOwoJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQlbJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJEFib3ZlLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQmVsb3csICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRPblJpZ2h0LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkT25MZWZ0LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkV2l0aGluLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQmVoaW5kXSk7Cn0oKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRiYXNlU2hlZXQgPSBfTGlzdF9mcm9tQXJyYXkoCglbCgkJQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENsYXNzLAoJCSdodG1sLGJvZHknLAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdoZWlnaHQnLCAnMTAwJScpLAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdwYWRkaW5nJywgJzAnKSwKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbWFyZ2luJywgJzAnKQoJCQldKSksCgkJQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENsYXNzLAoJCV9VdGlsc19hcCgKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkpLAoJCQlfVXRpbHNfYXAoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNpbmdsZSksCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmltYWdlQ29udGFpbmVyKSkpLAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdkaXNwbGF5JywgJ2Jsb2NrJyksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5oZWlnaHRGaWxsKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCSdpbWcnLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdtYXgtaGVpZ2h0JywgJzEwMCUnKSwKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ29iamVjdC1maXQnLCAnY292ZXInKQoJCQkJCQkJXSkpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMud2lkdGhGaWxsKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCSdpbWcnLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdtYXgtd2lkdGgnLCAnMTAwJScpLAoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnb2JqZWN0LWZpdCcsICdjb3ZlcicpCgkJCQkJCQldKSkKCQkJCQldKSkKCQkJXSkpLAoJCUEyKAoJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDbGFzcywKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSkgKyAnOmZvY3VzJywKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnb3V0bGluZScsICdub25lJykKCQkJXSkpLAoJCUEyKAoJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDbGFzcywKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnJvb3QpLAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd3aWR0aCcsICcxMDAlJyksCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2hlaWdodCcsICdhdXRvJyksCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ21pbi1oZWlnaHQnLCAnMTAwJScpLAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd6LWluZGV4JywgJzAnKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQlfVXRpbHNfYXAoCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkpLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaGVpZ2h0RmlsbCkpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdoZWlnaHQnLCAnMTAwJScpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmhlaWdodEZpbGwpLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdoZWlnaHQnLCAnMTAwJScpCgkJCQkJCQldKSkKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaW5Gcm9udCksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMubmVhcmJ5KSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAncG9zaXRpb24nLCAnZml4ZWQnKSwKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3otaW5kZXgnLCAnMjAnKQoJCQkJCQkJXSkpCgkJCQkJXSkpCgkJCV0pKSwKCQlBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2xhc3MsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5uZWFyYnkpLAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdwb3NpdGlvbicsICdyZWxhdGl2ZScpLAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdib3JkZXInLCAnbm9uZScpLAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdkaXNwbGF5JywgJ2ZsZXgnKSwKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1kaXJlY3Rpb24nLCAncm93JyksCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtYmFzaXMnLCAnYXV0bycpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc2luZ2xlKSwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRlbERlc2NyaXB0aW9uKSwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRCYXRjaCgKCQkJCWZ1bmN0aW9uIChmbikgewoJCQkJCXJldHVybiBBMigkZWxtJGNvcmUkTGlzdCRtYXAsIGZuLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkbG9jYXRpb25zKTsKCQkJCX0oCgkJCQkJZnVuY3Rpb24gKGxvYykgewoJCQkJCQlzd2l0Y2ggKGxvYy4kKSB7CgkJCQkJCQljYXNlICdBYm92ZSc6CgkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hYm92ZSksCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3Bvc2l0aW9uJywgJ2Fic29sdXRlJyksCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdib3R0b20nLCAnMTAwJScpLAoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbGVmdCcsICcwJyksCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd3aWR0aCcsICcxMDAlJyksCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd6LWluZGV4JywgJzIwJyksCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdtYXJnaW4nLCAnMCAhaW1wb3J0YW50JyksCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaGVpZ2h0RmlsbCksCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2hlaWdodCcsICdhdXRvJykKCQkJCQkJCQkJCQkJXSkpLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLndpZHRoRmlsbCksCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3dpZHRoJywgJzEwMCUnKQoJCQkJCQkJCQkJCQldKSksCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdwb2ludGVyLWV2ZW50cycsICdub25lJyksCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkJCQkJCScqJywKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAncG9pbnRlci1ldmVudHMnLCAnYXV0bycpCgkJCQkJCQkJCQkJCV0pKQoJCQkJCQkJCQkJXSkpOwoJCQkJCQkJY2FzZSAnQmVsb3cnOgoJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYmVsb3cpLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdwb3NpdGlvbicsICdhYnNvbHV0ZScpLAoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnYm90dG9tJywgJzAnKSwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2xlZnQnLCAnMCcpLAoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnaGVpZ2h0JywgJzAnKSwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3dpZHRoJywgJzEwMCUnKSwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3otaW5kZXgnLCAnMjAnKSwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ21hcmdpbicsICcwICFpbXBvcnRhbnQnKSwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKSwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCQkJCQkJJyonLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdwb2ludGVyLWV2ZW50cycsICdhdXRvJykKCQkJCQkJCQkJCQkJXSkpLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmhlaWdodEZpbGwpLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdoZWlnaHQnLCAnYXV0bycpCgkJCQkJCQkJCQkJCV0pKQoJCQkJCQkJCQkJXSkpOwoJCQkJCQkJY2FzZSAnT25SaWdodCc6CgkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5vblJpZ2h0KSwKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAncG9zaXRpb24nLCAnYWJzb2x1dGUnKSwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2xlZnQnLCAnMTAwJScpLAoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAndG9wJywgJzAnKSwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2hlaWdodCcsICcxMDAlJyksCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdtYXJnaW4nLCAnMCAhaW1wb3J0YW50JyksCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd6LWluZGV4JywgJzIwJyksCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdwb2ludGVyLWV2ZW50cycsICdub25lJyksCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkJCQkJCScqJywKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAncG9pbnRlci1ldmVudHMnLCAnYXV0bycpCgkJCQkJCQkJCQkJCV0pKQoJCQkJCQkJCQkJXSkpOwoJCQkJCQkJY2FzZSAnT25MZWZ0JzoKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLm9uTGVmdCksCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3Bvc2l0aW9uJywgJ2Fic29sdXRlJyksCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdyaWdodCcsICcxMDAlJyksCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd0b3AnLCAnMCcpLAoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnaGVpZ2h0JywgJzEwMCUnKSwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ21hcmdpbicsICcwICFpbXBvcnRhbnQnKSwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3otaW5kZXgnLCAnMjAnKSwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKSwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCQkJCQkJJyonLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdwb2ludGVyLWV2ZW50cycsICdhdXRvJykKCQkJCQkJCQkJCQkJXSkpCgkJCQkJCQkJCQldKSk7CgkJCQkJCQljYXNlICdXaXRoaW4nOgoJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaW5Gcm9udCksCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3Bvc2l0aW9uJywgJ2Fic29sdXRlJyksCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd3aWR0aCcsICcxMDAlJyksCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdoZWlnaHQnLCAnMTAwJScpLAoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbGVmdCcsICcwJyksCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd0b3AnLCAnMCcpLAoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbWFyZ2luJywgJzAgIWltcG9ydGFudCcpLAoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAncG9pbnRlci1ldmVudHMnLCAnbm9uZScpLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJCQkJCQknKicsCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3BvaW50ZXItZXZlbnRzJywgJ2F1dG8nKQoJCQkJCQkJCQkJCQldKSkKCQkJCQkJCQkJCV0pKTsKCQkJCQkJCWRlZmF1bHQ6CgkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5iZWhpbmQpLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdwb3NpdGlvbicsICdhYnNvbHV0ZScpLAoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnd2lkdGgnLCAnMTAwJScpLAoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnaGVpZ2h0JywgJzEwMCUnKSwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2xlZnQnLCAnMCcpLAoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAndG9wJywgJzAnKSwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ21hcmdpbicsICcwICFpbXBvcnRhbnQnKSwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3otaW5kZXgnLCAnMCcpLAoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAncG9pbnRlci1ldmVudHMnLCAnbm9uZScpLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJCQkJCQknKicsCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3BvaW50ZXItZXZlbnRzJywgJ2F1dG8nKQoJCQkJCQkJCQkJCQldKSkKCQkJCQkJCQkJCV0pKTsKCQkJCQkJfQoJCQkJCX0pKQoJCQldKSksCgkJQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENsYXNzLAoJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55KSwKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAncG9zaXRpb24nLCAncmVsYXRpdmUnKSwKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnYm9yZGVyJywgJ25vbmUnKSwKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1zaHJpbmsnLCAnMCcpLAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdkaXNwbGF5JywgJ2ZsZXgnKSwKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1kaXJlY3Rpb24nLCAncm93JyksCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtYmFzaXMnLCAnYXV0bycpLAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdyZXNpemUnLCAnbm9uZScpLAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmb250LWZlYXR1cmUtc2V0dGluZ3MnLCAnaW5oZXJpdCcpLAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdib3gtc2l6aW5nJywgJ2JvcmRlci1ib3gnKSwKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbWFyZ2luJywgJzAnKSwKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAncGFkZGluZycsICcwJyksCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2JvcmRlci13aWR0aCcsICcwJyksCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2JvcmRlci1zdHlsZScsICdzb2xpZCcpLAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmb250LXNpemUnLCAnaW5oZXJpdCcpLAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdjb2xvcicsICdpbmhlcml0JyksCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZvbnQtZmFtaWx5JywgJ2luaGVyaXQnKSwKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbGluZS1oZWlnaHQnLCAnMScpLAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmb250LXdlaWdodCcsICdpbmhlcml0JyksCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3RleHQtZGVjb3JhdGlvbicsICdub25lJyksCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZvbnQtc3R5bGUnLCAnaW5oZXJpdCcpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMud3JhcHBlZCksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtd3JhcCcsICd3cmFwJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5ub1RleHRTZWxlY3Rpb24pLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICctbW96LXVzZXItc2VsZWN0JywgJ25vbmUnKSwKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICctd2Via2l0LXVzZXItc2VsZWN0JywgJ25vbmUnKSwKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICctbXMtdXNlci1zZWxlY3QnLCAnbm9uZScpLAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3VzZXItc2VsZWN0JywgJ25vbmUnKQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmN1cnNvclBvaW50ZXIpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdjdXJzb3InLCAncG9pbnRlcicpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY3Vyc29yVGV4dCksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2N1cnNvcicsICd0ZXh0JykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5wYXNzUG9pbnRlckV2ZW50cyksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUgIWltcG9ydGFudCcpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY2FwdHVyZVBvaW50ZXJFdmVudHMpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdwb2ludGVyLWV2ZW50cycsICdhdXRvICFpbXBvcnRhbnQnKQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnRyYW5zcGFyZW50KSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnb3BhY2l0eScsICcwJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5vcGFxdWUpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdvcGFjaXR5JywgJzEnKQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KAoJCQkJCV9VdGlsc19hcCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5ob3ZlciwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMudHJhbnNwYXJlbnQpKSArICc6aG92ZXInLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdvcGFjaXR5JywgJzAnKQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KAoJCQkJCV9VdGlsc19hcCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5ob3ZlciwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMub3BhcXVlKSkgKyAnOmhvdmVyJywKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnb3BhY2l0eScsICcxJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgKCQkJCQlfVXRpbHNfYXAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuZm9jdXMsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnRyYW5zcGFyZW50KSkgKyAnOmZvY3VzJywKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnb3BhY2l0eScsICcwJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgKCQkJCQlfVXRpbHNfYXAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuZm9jdXMsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLm9wYXF1ZSkpICsgJzpmb2N1cycsCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ29wYWNpdHknLCAnMScpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoCgkJCQkJX1V0aWxzX2FwKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFjdGl2ZSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMudHJhbnNwYXJlbnQpKSArICc6YWN0aXZlJywKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnb3BhY2l0eScsICcwJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgKCQkJCQlfVXRpbHNfYXAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWN0aXZlLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5vcGFxdWUpKSArICc6YWN0aXZlJywKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnb3BhY2l0eScsICcxJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy50cmFuc2l0aW9uKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwKCQkJCQkJJ3RyYW5zaXRpb24nLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCScsICcsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQkJZnVuY3Rpb24gKHgpIHsKCQkJCQkJCQkJcmV0dXJuIHggKyAnIDE2MG1zJzsKCQkJCQkJCQl9LAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWyd0cmFuc2Zvcm0nLCAnb3BhY2l0eScsICdmaWx0ZXInLCAnYmFja2dyb3VuZC1jb2xvcicsICdjb2xvcicsICdmb250LXNpemUnXSkpKSkKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5zY3JvbGxiYXJzKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnb3ZlcmZsb3cnLCAnYXV0bycpLAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtc2hyaW5rJywgJzEnKQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNjcm9sbGJhcnNYKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnb3ZlcmZsb3cteCcsICdhdXRvJyksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5yb3cpLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmbGV4LXNocmluaycsICcxJykKCQkJCQkJCV0pKQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNjcm9sbGJhcnNZKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnb3ZlcmZsb3cteScsICdhdXRvJyksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5jb2x1bW4pLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmbGV4LXNocmluaycsICcxJykKCQkJCQkJCV0pKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNpbmdsZSksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtc2hyaW5rJywgJzEnKQoJCQkJCQkJXSkpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY2xpcCksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ292ZXJmbG93JywgJ2hpZGRlbicpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY2xpcFgpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdvdmVyZmxvdy14JywgJ2hpZGRlbicpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY2xpcFkpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdvdmVyZmxvdy15JywgJ2hpZGRlbicpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMud2lkdGhDb250ZW50KSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnd2lkdGgnLCAnYXV0bycpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYm9yZGVyTm9uZSksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2JvcmRlci13aWR0aCcsICcwJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5ib3JkZXJEYXNoZWQpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdib3JkZXItc3R5bGUnLCAnZGFzaGVkJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5ib3JkZXJEb3R0ZWQpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdib3JkZXItc3R5bGUnLCAnZG90dGVkJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5ib3JkZXJTb2xpZCksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2JvcmRlci1zdHlsZScsICdzb2xpZCcpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMudGV4dCksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3doaXRlLXNwYWNlJywgJ3ByZScpLAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2Rpc3BsYXknLCAnaW5saW5lLWJsb2NrJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5pbnB1dFRleHQpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdsaW5lLWhlaWdodCcsICcxLjA1JyksCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnYmFja2dyb3VuZCcsICd0cmFuc3BhcmVudCcpLAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3RleHQtYWxpZ24nLCAnaW5oZXJpdCcpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc2luZ2xlKSwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRlbERlc2NyaXB0aW9uKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnJvdyksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2Rpc3BsYXknLCAnZmxleCcpLAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtZGlyZWN0aW9uJywgJ3JvdycpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtYmFzaXMnLCAnMCUnKSwKCQkJCQkJCQlBMigKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLndpZHRoRXhhY3QpLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWwoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmbGV4LWJhc2lzJywgJ2F1dG8nKQoJCQkJCQkJCQldKSksCgkJCQkJCQkJQTIoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5saW5rKSwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1iYXNpcycsICdhdXRvJykKCQkJCQkJCQkJXSkpCgkJCQkJCQldKSksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaGVpZ2h0RmlsbCksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2FsaWduLXNlbGYnLCAnc3RyZXRjaCAhaW1wb3J0YW50JykKCQkJCQkJCV0pKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5oZWlnaHRGaWxsUG9ydGlvbiksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2FsaWduLXNlbGYnLCAnc3RyZXRjaCAhaW1wb3J0YW50JykKCQkJCQkJCV0pKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy53aWR0aEZpbGwpLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmbGV4LWdyb3cnLCAnMTAwMDAwJykKCQkJCQkJCV0pKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5jb250YWluZXIpLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmbGV4LWdyb3cnLCAnMCcpLAoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1iYXNpcycsICdhdXRvJyksCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdhbGlnbi1zZWxmJywgJ3N0cmV0Y2gnKQoJCQkJCQkJXSkpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkndTpmaXJzdC1vZi10eXBlLicgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkNvbnRhaW5lclJpZ2h0LAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmbGV4LWdyb3cnLCAnMScpCgkJCQkJCQldKSksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCSdzOmZpcnN0LW9mLXR5cGUuJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFsaWduQ29udGFpbmVyQ2VudGVyWCwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1ncm93JywgJzEnKSwKCQkJCQkJCQlBMigKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkNlbnRlclgpLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWwoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdtYXJnaW4tbGVmdCcsICdhdXRvICFpbXBvcnRhbnQnKQoJCQkJCQkJCQldKSkKCQkJCQkJCV0pKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJJ3M6bGFzdC1vZi10eXBlLicgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkNvbnRhaW5lckNlbnRlclgsCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtZ3JvdycsICcxJyksCgkJCQkJCQkJQTIoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25DZW50ZXJYKSwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbWFyZ2luLXJpZ2h0JywgJ2F1dG8gIWltcG9ydGFudCcpCgkJCQkJCQkJCV0pKQoJCQkJCQkJXSkpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQknczpvbmx5LW9mLXR5cGUuJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFsaWduQ29udGFpbmVyQ2VudGVyWCwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1ncm93JywgJzEnKSwKCQkJCQkJCQlBMigKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkNlbnRlclkpLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWwoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdtYXJnaW4tdG9wJywgJ2F1dG8gIWltcG9ydGFudCcpLAoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdtYXJnaW4tYm90dG9tJywgJ2F1dG8gIWltcG9ydGFudCcpCgkJCQkJCQkJCV0pKQoJCQkJCQkJXSkpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQknczpsYXN0LW9mLXR5cGUuJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkNvbnRhaW5lckNlbnRlclggKyAnIH4gdScpLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmbGV4LWdyb3cnLCAnMCcpCgkJCQkJCQldKSksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCSd1OmZpcnN0LW9mLXR5cGUuJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkNvbnRhaW5lclJpZ2h0ICsgKCcgfiBzLicgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkNvbnRhaW5lckNlbnRlclgpKSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1ncm93JywgJzAnKQoJCQkJCQkJXSkpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZGVzY3JpYmVBbGlnbm1lbnQoCgkJCQkJCWZ1bmN0aW9uIChhbGlnbm1lbnQpIHsKCQkJCQkJCXN3aXRjaCAoYWxpZ25tZW50LiQpIHsKCQkJCQkJCQljYXNlICdUb3AnOgoJCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnYWxpZ24taXRlbXMnLCAnZmxleC1zdGFydCcpCgkJCQkJCQkJCQkJXSksCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2FsaWduLXNlbGYnLCAnZmxleC1zdGFydCcpCgkJCQkJCQkJCQkJXSkpOwoJCQkJCQkJCWNhc2UgJ0JvdHRvbSc6CgkJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdhbGlnbi1pdGVtcycsICdmbGV4LWVuZCcpCgkJCQkJCQkJCQkJXSksCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2FsaWduLXNlbGYnLCAnZmxleC1lbmQnKQoJCQkJCQkJCQkJCV0pKTsKCQkJCQkJCQljYXNlICdSaWdodCc6CgkJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdqdXN0aWZ5LWNvbnRlbnQnLCAnZmxleC1lbmQnKQoJCQkJCQkJCQkJCV0pLAoJCQkJCQkJCQkJX0xpc3RfTmlsKTsKCQkJCQkJCQljYXNlICdMZWZ0JzoKCQkJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2p1c3RpZnktY29udGVudCcsICdmbGV4LXN0YXJ0JykKCQkJCQkJCQkJCQldKSwKCQkJCQkJCQkJCV9MaXN0X05pbCk7CgkJCQkJCQkJY2FzZSAnQ2VudGVyWCc6CgkJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdqdXN0aWZ5LWNvbnRlbnQnLCAnY2VudGVyJykKCQkJCQkJCQkJCQldKSwKCQkJCQkJCQkJCV9MaXN0X05pbCk7CgkJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2FsaWduLWl0ZW1zJywgJ2NlbnRlcicpCgkJCQkJCQkJCQkJXSksCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2FsaWduLXNlbGYnLCAnY2VudGVyJykKCQkJCQkJCQkJCQldKSk7CgkJCQkJCQl9CgkJCQkJCX0pLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc3BhY2VFdmVubHkpLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdqdXN0aWZ5LWNvbnRlbnQnLCAnc3BhY2UtYmV0d2VlbicpCgkJCQkJCQldKSksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5pbnB1dExhYmVsKSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnYWxpZ24taXRlbXMnLCAnYmFzZWxpbmUnKQoJCQkJCQkJXSkpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29sdW1uKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZGlzcGxheScsICdmbGV4JyksCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1kaXJlY3Rpb24nLCAnY29sdW1uJyksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55KSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1iYXNpcycsICcwcHgnKSwKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ21pbi1oZWlnaHQnLCAnbWluLWNvbnRlbnQnKSwKCQkJCQkJCQlBMigKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmhlaWdodEV4YWN0KSwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1iYXNpcycsICdhdXRvJykKCQkJCQkJCQkJXSkpCgkJCQkJCQldKSksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaGVpZ2h0RmlsbCksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtZ3JvdycsICcxMDAwMDAnKQoJCQkJCQkJXSkpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLndpZHRoRmlsbCksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3dpZHRoJywgJzEwMCUnKQoJCQkJCQkJXSkpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLndpZHRoRmlsbFBvcnRpb24pLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd3aWR0aCcsICcxMDAlJykKCQkJCQkJCV0pKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy53aWR0aENvbnRlbnQpLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdhbGlnbi1zZWxmJywgJ2ZsZXgtc3RhcnQnKQoJCQkJCQkJXSkpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkndTpmaXJzdC1vZi10eXBlLicgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkNvbnRhaW5lckJvdHRvbSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1ncm93JywgJzEnKQoJCQkJCQkJXSkpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQknczpmaXJzdC1vZi10eXBlLicgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkNvbnRhaW5lckNlbnRlclksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtZ3JvdycsICcxJyksCgkJCQkJCQkJQTIoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25DZW50ZXJZKSwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbWFyZ2luLXRvcCcsICdhdXRvICFpbXBvcnRhbnQnKSwKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbWFyZ2luLWJvdHRvbScsICcwICFpbXBvcnRhbnQnKQoJCQkJCQkJCQldKSkKCQkJCQkJCV0pKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJJ3M6bGFzdC1vZi10eXBlLicgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkNvbnRhaW5lckNlbnRlclksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtZ3JvdycsICcxJyksCgkJCQkJCQkJQTIoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25DZW50ZXJZKSwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbWFyZ2luLWJvdHRvbScsICdhdXRvICFpbXBvcnRhbnQnKSwKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbWFyZ2luLXRvcCcsICcwICFpbXBvcnRhbnQnKQoJCQkJCQkJCQldKSkKCQkJCQkJCV0pKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJJ3M6b25seS1vZi10eXBlLicgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkNvbnRhaW5lckNlbnRlclksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtZ3JvdycsICcxJyksCgkJCQkJCQkJQTIoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25DZW50ZXJZKSwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbWFyZ2luLXRvcCcsICdhdXRvICFpbXBvcnRhbnQnKSwKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbWFyZ2luLWJvdHRvbScsICdhdXRvICFpbXBvcnRhbnQnKQoJCQkJCQkJCQldKSkKCQkJCQkJCV0pKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJJ3M6bGFzdC1vZi10eXBlLicgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25Db250YWluZXJDZW50ZXJZICsgJyB+IHUnKSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1ncm93JywgJzAnKQoJCQkJCQkJXSkpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkndTpmaXJzdC1vZi10eXBlLicgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25Db250YWluZXJCb3R0b20gKyAoJyB+IHMuJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFsaWduQ29udGFpbmVyQ2VudGVyWSkpLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmbGV4LWdyb3cnLCAnMCcpCgkJCQkJCQldKSksCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkZXNjcmliZUFsaWdubWVudCgKCQkJCQkJZnVuY3Rpb24gKGFsaWdubWVudCkgewoJCQkJCQkJc3dpdGNoIChhbGlnbm1lbnQuJCkgewoJCQkJCQkJCWNhc2UgJ1RvcCc6CgkJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdqdXN0aWZ5LWNvbnRlbnQnLCAnZmxleC1zdGFydCcpCgkJCQkJCQkJCQkJXSksCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ21hcmdpbi1ib3R0b20nLCAnYXV0bycpCgkJCQkJCQkJCQkJXSkpOwoJCQkJCQkJCWNhc2UgJ0JvdHRvbSc6CgkJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdqdXN0aWZ5LWNvbnRlbnQnLCAnZmxleC1lbmQnKQoJCQkJCQkJCQkJCV0pLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdtYXJnaW4tdG9wJywgJ2F1dG8nKQoJCQkJCQkJCQkJCV0pKTsKCQkJCQkJCQljYXNlICdSaWdodCc6CgkJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdhbGlnbi1pdGVtcycsICdmbGV4LWVuZCcpCgkJCQkJCQkJCQkJXSksCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2FsaWduLXNlbGYnLCAnZmxleC1lbmQnKQoJCQkJCQkJCQkJCV0pKTsKCQkJCQkJCQljYXNlICdMZWZ0JzoKCQkJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2FsaWduLWl0ZW1zJywgJ2ZsZXgtc3RhcnQnKQoJCQkJCQkJCQkJCV0pLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdhbGlnbi1zZWxmJywgJ2ZsZXgtc3RhcnQnKQoJCQkJCQkJCQkJCV0pKTsKCQkJCQkJCQljYXNlICdDZW50ZXJYJzoKCQkJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2FsaWduLWl0ZW1zJywgJ2NlbnRlcicpCgkJCQkJCQkJCQkJXSksCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2FsaWduLXNlbGYnLCAnY2VudGVyJykKCQkJCQkJCQkJCQldKSk7CgkJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2p1c3RpZnktY29udGVudCcsICdjZW50ZXInKQoJCQkJCQkJCQkJCV0pLAoJCQkJCQkJCQkJX0xpc3RfTmlsKTsKCQkJCQkJCX0KCQkJCQkJfSksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29udGFpbmVyKSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1ncm93JywgJzAnKSwKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZsZXgtYmFzaXMnLCAnYXV0bycpLAoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnd2lkdGgnLCAnMTAwJScpLAoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnYWxpZ24tc2VsZicsICdzdHJldGNoICFpbXBvcnRhbnQnKQoJCQkJCQkJXSkpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc3BhY2VFdmVubHkpLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdqdXN0aWZ5LWNvbnRlbnQnLCAnc3BhY2UtYmV0d2VlbicpCgkJCQkJCQldKSkKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5ncmlkKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZGlzcGxheScsICctbXMtZ3JpZCcpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQknLmdwJywKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSksCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3dpZHRoJywgJzEwMCUnKQoJCQkJCQkJCQldKSkKCQkJCQkJCV0pKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRTdXBwb3J0cywKCQkJCQkJX1V0aWxzX1R1cGxlMignZGlzcGxheScsICdncmlkJyksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlfVXRpbHNfVHVwbGUyKCdkaXNwbGF5JywgJ2dyaWQnKQoJCQkJCQkJXSkpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZ3JpZEFsaWdubWVudHMoCgkJCQkJCWZ1bmN0aW9uIChhbGlnbm1lbnQpIHsKCQkJCQkJCXN3aXRjaCAoYWxpZ25tZW50LiQpIHsKCQkJCQkJCQljYXNlICdUb3AnOgoJCQkJCQkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnanVzdGlmeS1jb250ZW50JywgJ2ZsZXgtc3RhcnQnKQoJCQkJCQkJCQkJXSk7CgkJCQkJCQkJY2FzZSAnQm90dG9tJzoKCQkJCQkJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2p1c3RpZnktY29udGVudCcsICdmbGV4LWVuZCcpCgkJCQkJCQkJCQldKTsKCQkJCQkJCQljYXNlICdSaWdodCc6CgkJCQkJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdhbGlnbi1pdGVtcycsICdmbGV4LWVuZCcpCgkJCQkJCQkJCQldKTsKCQkJCQkJCQljYXNlICdMZWZ0JzoKCQkJCQkJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2FsaWduLWl0ZW1zJywgJ2ZsZXgtc3RhcnQnKQoJCQkJCQkJCQkJXSk7CgkJCQkJCQkJY2FzZSAnQ2VudGVyWCc6CgkJCQkJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdhbGlnbi1pdGVtcycsICdjZW50ZXInKQoJCQkJCQkJCQkJXSk7CgkJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2p1c3RpZnktY29udGVudCcsICdjZW50ZXInKQoJCQkJCQkJCQkJXSk7CgkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMucGFnZSksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2Rpc3BsYXknLCAnYmxvY2snKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkgKyAnOmZpcnN0LWNoaWxkJyksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ21hcmdpbicsICcwICFpbXBvcnRhbnQnKQoJCQkJCQkJXSkpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENoaWxkLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55ICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRzZWxmTmFtZSgKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkU2VsZigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkTGVmdCkpICsgKCc6Zmlyc3QtY2hpbGQgKyAuJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSkpKSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbWFyZ2luJywgJzAgIWltcG9ydGFudCcpCgkJCQkJCQldKSksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJHNlbGZOYW1lKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRTZWxmKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRSaWdodCkpICsgKCc6Zmlyc3QtY2hpbGQgKyAuJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSkpKSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnbWFyZ2luJywgJzAgIWltcG9ydGFudCcpCgkJCQkJCQldKSksCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkZXNjcmliZUFsaWdubWVudCgKCQkJCQkJZnVuY3Rpb24gKGFsaWdubWVudCkgewoJCQkJCQkJc3dpdGNoIChhbGlnbm1lbnQuJCkgewoJCQkJCQkJCWNhc2UgJ1RvcCc6CgkJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKF9MaXN0X05pbCwgX0xpc3RfTmlsKTsKCQkJCQkJCQljYXNlICdCb3R0b20nOgoJCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIF9MaXN0X05pbCk7CgkJCQkJCQkJY2FzZSAnUmlnaHQnOgoJCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCV9MaXN0X05pbCwKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxvYXQnLCAncmlnaHQnKSwKCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJCQkJCQkJCQknOjphZnRlcicsCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2NvbnRlbnQnLCAnXCJcIicpLAoJCQkJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZGlzcGxheScsICd0YWJsZScpLAoJCQkJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnY2xlYXInLCAnYm90aCcpCgkJCQkJCQkJCQkJCQldKSkKCQkJCQkJCQkJCQldKSk7CgkJCQkJCQkJY2FzZSAnTGVmdCc6CgkJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJX0xpc3RfTmlsLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmbG9hdCcsICdsZWZ0JyksCgkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCQkJCQkJCQkJJzo6YWZ0ZXInLAoJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdjb250ZW50JywgJ1wiXCInKSwKCQkJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2Rpc3BsYXknLCAndGFibGUnKSwKCQkJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2NsZWFyJywgJ2JvdGgnKQoJCQkJCQkJCQkJCQkJXSkpCgkJCQkJCQkJCQkJXSkpOwoJCQkJCQkJCWNhc2UgJ0NlbnRlclgnOgoJCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIF9MaXN0X05pbCk7CgkJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoX0xpc3RfTmlsLCBfTGlzdF9OaWwpOwoJCQkJCQkJfQoJCQkJCQl9KQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmlucHV0TXVsdGlsaW5lKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnd2hpdGUtc3BhY2UnLCAncHJlLXdyYXAgIWltcG9ydGFudCcpLAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2hlaWdodCcsICcxMDAlJyksCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnd2lkdGgnLCAnMTAwJScpLAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2JhY2tncm91bmQtY29sb3InLCAndHJhbnNwYXJlbnQnKQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmlucHV0TXVsdGlsaW5lV3JhcHBlciksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc2luZ2xlKSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZmxleC1iYXNpcycsICdhdXRvJykKCQkJCQkJCV0pKQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmlucHV0TXVsdGlsaW5lUGFyZW50KSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnd2hpdGUtc3BhY2UnLCAncHJlLXdyYXAgIWltcG9ydGFudCcpLAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2N1cnNvcicsICd0ZXh0JyksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaW5wdXRNdWx0aWxpbmVGaWxsZXIpLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd3aGl0ZS1zcGFjZScsICdwcmUtd3JhcCAhaW1wb3J0YW50JyksCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdjb2xvcicsICd0cmFuc3BhcmVudCcpCgkJCQkJCQldKSkKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5wYXJhZ3JhcGgpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdkaXNwbGF5JywgJ2Jsb2NrJyksCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnd2hpdGUtc3BhY2UnLCAnbm9ybWFsJyksCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnb3ZlcmZsb3ctd3JhcCcsICdicmVhay13b3JkJyksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5oYXNCZWhpbmQpLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd6LWluZGV4JywgJzAnKSwKCQkJCQkJCQlBMigKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5iZWhpbmQpLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWwoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd6LWluZGV4JywgJy0xJykKCQkJCQkJCQkJXSkpCgkJCQkJCQldKSksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQWxsQ2hpbGRyZW4sCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMudGV4dCksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2Rpc3BsYXknLCAnaW5saW5lJyksCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd3aGl0ZS1zcGFjZScsICdub3JtYWwnKQoJCQkJCQkJXSkpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJEFsbENoaWxkcmVuLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnBhcmFncmFwaCksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2Rpc3BsYXknLCAnaW5saW5lJyksCgkJCQkJCQkJQTIoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkJCQkJJzo6YWZ0ZXInLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWwoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdjb250ZW50JywgJ25vbmUnKQoJCQkJCQkJCQldKSksCgkJCQkJCQkJQTIoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkJCQkJJzo6YmVmb3JlJywKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnY29udGVudCcsICdub25lJykKCQkJCQkJCQkJXSkpCgkJCQkJCQldKSksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQWxsQ2hpbGRyZW4sCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc2luZ2xlKSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZGlzcGxheScsICdpbmxpbmUnKSwKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3doaXRlLXNwYWNlJywgJ25vcm1hbCcpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMud2lkdGhFeGFjdCksCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2Rpc3BsYXknLCAnaW5saW5lLWJsb2NrJykKCQkJCQkJCQkJXSkpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaW5Gcm9udCksCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2Rpc3BsYXknLCAnZmxleCcpCgkJCQkJCQkJCV0pKSwKCQkJCQkJCQlBMigKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmJlaGluZCksCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2Rpc3BsYXknLCAnZmxleCcpCgkJCQkJCQkJCV0pKSwKCQkJCQkJCQlBMigKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFib3ZlKSwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZGlzcGxheScsICdmbGV4JykKCQkJCQkJCQkJXSkpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYmVsb3cpLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWwoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdkaXNwbGF5JywgJ2ZsZXgnKQoJCQkJCQkJCQldKSksCgkJCQkJCQkJQTIoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5vblJpZ2h0KSwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZGlzcGxheScsICdmbGV4JykKCQkJCQkJCQkJXSkpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMub25MZWZ0KSwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZGlzcGxheScsICdmbGV4JykKCQkJCQkJCQkJXSkpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnRleHQpLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWwoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdkaXNwbGF5JywgJ2lubGluZScpLAoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd3aGl0ZS1zcGFjZScsICdub3JtYWwnKQoJCQkJCQkJCQldKSkKCQkJCQkJCV0pKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDaGlsZCwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5yb3cpLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdkaXNwbGF5JywgJ2lubGluZScpCgkJCQkJCQldKSksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29sdW1uKSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZGlzcGxheScsICdpbmxpbmUtZmxleCcpCgkJCQkJCQldKSksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2hpbGQsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuZ3JpZCksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2Rpc3BsYXknLCAnaW5saW5lLWdyaWQnKQoJCQkJCQkJXSkpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZGVzY3JpYmVBbGlnbm1lbnQoCgkJCQkJCWZ1bmN0aW9uIChhbGlnbm1lbnQpIHsKCQkJCQkJCXN3aXRjaCAoYWxpZ25tZW50LiQpIHsKCQkJCQkJCQljYXNlICdUb3AnOgoJCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIF9MaXN0X05pbCk7CgkJCQkJCQkJY2FzZSAnQm90dG9tJzoKCQkJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoX0xpc3RfTmlsLCBfTGlzdF9OaWwpOwoJCQkJCQkJCWNhc2UgJ1JpZ2h0JzoKCQkJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQlfTGlzdF9OaWwsCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2Zsb2F0JywgJ3JpZ2h0JykKCQkJCQkJCQkJCQldKSk7CgkJCQkJCQkJY2FzZSAnTGVmdCc6CgkJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJX0xpc3RfTmlsLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmbG9hdCcsICdsZWZ0JykKCQkJCQkJCQkJCQldKSk7CgkJCQkJCQkJY2FzZSAnQ2VudGVyWCc6CgkJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKF9MaXN0X05pbCwgX0xpc3RfTmlsKTsKCQkJCQkJCQlkZWZhdWx0OgoJCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIF9MaXN0X05pbCk7CgkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCScuaGlkZGVuJywKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZGlzcGxheScsICdub25lJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy50ZXh0VGhpbiksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZvbnQtd2VpZ2h0JywgJzEwMCcpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMudGV4dEV4dHJhTGlnaHQpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmb250LXdlaWdodCcsICcyMDAnKQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnRleHRMaWdodCksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZvbnQtd2VpZ2h0JywgJzMwMCcpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMudGV4dE5vcm1hbFdlaWdodCksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZvbnQtd2VpZ2h0JywgJzQwMCcpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMudGV4dE1lZGl1bSksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZvbnQtd2VpZ2h0JywgJzUwMCcpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMudGV4dFNlbWlCb2xkKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZm9udC13ZWlnaHQnLCAnNjAwJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5ib2xkKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZm9udC13ZWlnaHQnLCAnNzAwJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy50ZXh0RXh0cmFCb2xkKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZm9udC13ZWlnaHQnLCAnODAwJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy50ZXh0SGVhdnkpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmb250LXdlaWdodCcsICc5MDAnKQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLml0YWxpYyksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZvbnQtc3R5bGUnLCAnaXRhbGljJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5zdHJpa2UpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd0ZXh0LWRlY29yYXRpb24nLCAnbGluZS10aHJvdWdoJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy51bmRlcmxpbmUpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd0ZXh0LWRlY29yYXRpb24nLCAndW5kZXJsaW5lJyksCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAndGV4dC1kZWNvcmF0aW9uLXNraXAtaW5rJywgJ2F1dG8nKSwKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd0ZXh0LWRlY29yYXRpb24tc2tpcCcsICdpbmsnKQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQlfVXRpbHNfYXAoCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy51bmRlcmxpbmUpLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc3RyaWtlKSksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3RleHQtZGVjb3JhdGlvbicsICdsaW5lLXRocm91Z2ggdW5kZXJsaW5lJyksCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAndGV4dC1kZWNvcmF0aW9uLXNraXAtaW5rJywgJ2F1dG8nKSwKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd0ZXh0LWRlY29yYXRpb24tc2tpcCcsICdpbmsnKQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnRleHRVbml0YWxpY2l6ZWQpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmb250LXN0eWxlJywgJ25vcm1hbCcpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMudGV4dEp1c3RpZnkpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd0ZXh0LWFsaWduJywgJ2p1c3RpZnknKQoJCQkJCV0pKSwKCQkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJERlc2NyaXB0b3IsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnRleHRKdXN0aWZ5QWxsKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAndGV4dC1hbGlnbicsICdqdXN0aWZ5LWFsbCcpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMudGV4dENlbnRlciksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3RleHQtYWxpZ24nLCAnY2VudGVyJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy50ZXh0UmlnaHQpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICd0ZXh0LWFsaWduJywgJ3JpZ2h0JykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSREZXNjcmlwdG9yLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy50ZXh0TGVmdCksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3RleHQtYWxpZ24nLCAnbGVmdCcpCgkJCQkJXSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkRGVzY3JpcHRvciwKCQkJCScubW9kYWwnLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdwb3NpdGlvbicsICdmaXhlZCcpLAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2xlZnQnLCAnMCcpLAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ3RvcCcsICcwJyksCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnd2lkdGgnLCAnMTAwJScpLAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2hlaWdodCcsICcxMDAlJyksCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAncG9pbnRlci1ldmVudHMnLCAnbm9uZScpCgkJCQkJXSkpCgkJCV0pKQoJXSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZm9udFZhcmlhbnQgPSBmdW5jdGlvbiAoX3ZhcikgewoJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCUEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2xhc3MsCgkJCScudi0nICsgX3ZhciwKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRQcm9wLCAnZm9udC1mZWF0dXJlLXNldHRpbmdzJywgJ1wiJyArIChfdmFyICsgJ1wiJykpCgkJCQldKSksCgkJCUEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2xhc3MsCgkJCScudi0nICsgKF92YXIgKyAnLW9mZicpLAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsICdmb250LWZlYXR1cmUtc2V0dGluZ3MnLCAnXCInICsgKF92YXIgKyAnXCIgMCcpKQoJCQkJXSkpCgkJXSk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY29tbW9uVmFsdWVzID0gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJQTIoCgkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJZnVuY3Rpb24gKHgpIHsKCQkJCXJldHVybiBBMigKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2xhc3MsCgkJCQkJJy5ib3JkZXItJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludCh4KSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCUEyKAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsCgkJCQkJCQknYm9yZGVyLXdpZHRoJywKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckZnJvbUludCh4KSArICdweCcpCgkJCQkJCV0pKTsKCQkJfSwKCQkJQTIoJGVsbSRjb3JlJExpc3QkcmFuZ2UsIDAsIDYpKSwKCQkJQTIoCgkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJZnVuY3Rpb24gKGkpIHsKCQkJCXJldHVybiBBMigKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2xhc3MsCgkJCQkJJy5mb250LXNpemUtJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludChpKSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCUEyKAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJFByb3AsCgkJCQkJCQknZm9udC1zaXplJywKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckZnJvbUludChpKSArICdweCcpCgkJCQkJCV0pKTsKCQkJfSwKCQkJQTIoJGVsbSRjb3JlJExpc3QkcmFuZ2UsIDgsIDMyKSksCgkJCUEyKAoJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCWZ1bmN0aW9uIChpKSB7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJENsYXNzLAoJCQkJCScucC0nICsgJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KGkpLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJQTIoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwKCQkJCQkJCSdwYWRkaW5nJywKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckZnJvbUludChpKSArICdweCcpCgkJCQkJCV0pKTsKCQkJfSwKCQkJQTIoJGVsbSRjb3JlJExpc3QkcmFuZ2UsIDAsIDI0KSksCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkQ2xhc3MsCgkJCQknLnYtc21jcCcsCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZvbnQtdmFyaWFudCcsICdzbWFsbC1jYXBzJykKCQkJCQldKSksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRDbGFzcywKCQkJCScudi1zbWNwLW9mZicsCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkUHJvcCwgJ2ZvbnQtdmFyaWFudCcsICdub3JtYWwnKQoJCQkJCV0pKQoJCQldKSwKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGZvbnRWYXJpYW50KCd6ZXJvJyksCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRmb250VmFyaWFudCgnb251bScpLAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZm9udFZhcmlhbnQoJ2xpZ2EnKSwKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGZvbnRWYXJpYW50KCdkbGlnJyksCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRmb250VmFyaWFudCgnb3JkbicpLAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZm9udFZhcmlhbnQoJ3RudW0nKSwKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGZvbnRWYXJpYW50KCdhZnJjJyksCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRmb250VmFyaWFudCgnZnJhYycpCgkJXSkpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGV4cGxhaW5lciA9ICdcbi5leHBsYWluIHtcbiAgICBib3JkZXI6IDZweCBzb2xpZCByZ2IoMTc0LCAxMjEsIDE1KSAhaW1wb3J0YW50O1xufVxuLmV4cGxhaW4gPiAuJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkgKyAoJyB7XG4gICAgYm9yZGVyOiA0cHggZGFzaGVkIHJnYigwLCAxNTEsIDE2NykgIWltcG9ydGFudDtcbn1cblxuLmN0ciB7XG4gICAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7XG59XG4uZXhwbGFpbiA+IC5jdHIgPiAuJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkgKyAnIHtcbiAgICBib3JkZXI6IDRweCBkYXNoZWQgcmdiKDAsIDE1MSwgMTY3KSAhaW1wb3J0YW50O1xufVxuXG4nKSkpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGlucHV0VGV4dFJlc2V0ID0gJ1xuaW5wdXRbdHlwZT0ic2VhcmNoIl0sXG5pbnB1dFt0eXBlPSJzZWFyY2giXTo6LXdlYmtpdC1zZWFyY2gtZGVjb3JhdGlvbixcbmlucHV0W3R5cGU9InNlYXJjaCJdOjotd2Via2l0LXNlYXJjaC1jYW5jZWwtYnV0dG9uLFxuaW5wdXRbdHlwZT0ic2VhcmNoIl06Oi13ZWJraXQtc2VhcmNoLXJlc3VsdHMtYnV0dG9uLFxuaW5wdXRbdHlwZT0ic2VhcmNoIl06Oi13ZWJraXQtc2VhcmNoLXJlc3VsdHMtZGVjb3JhdGlvbiB7XG4gIC13ZWJraXQtYXBwZWFyYW5jZTpub25lO1xufVxuJzsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRzbGlkZXJSZXNldCA9ICdcbmlucHV0W3R5cGU9cmFuZ2VdIHtcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lOyBcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIHBvc2l0aW9uOmFic29sdXRlO1xuICBsZWZ0OjA7XG4gIHRvcDowO1xuICB6LWluZGV4OjEwO1xuICB3aWR0aDogMTAwJTtcbiAgb3V0bGluZTogZGFzaGVkIDFweDtcbiAgaGVpZ2h0OiAxMDAlO1xuICBvcGFjaXR5OiAwO1xufVxuJzsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSR0aHVtYlJlc2V0ID0gJ1xuaW5wdXRbdHlwZT1yYW5nZV06Oi13ZWJraXQtc2xpZGVyLXRodW1iIHtcbiAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XG4gICAgb3BhY2l0eTogMC41O1xuICAgIHdpZHRoOiA4MHB4O1xuICAgIGhlaWdodDogODBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcbiAgICBib3JkZXI6bm9uZTtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG59XG5pbnB1dFt0eXBlPXJhbmdlXTo6LW1vei1yYW5nZS10aHVtYiB7XG4gICAgb3BhY2l0eTogMC41O1xuICAgIHdpZHRoOiA4MHB4O1xuICAgIGhlaWdodDogODBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcbiAgICBib3JkZXI6bm9uZTtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG59XG5pbnB1dFt0eXBlPXJhbmdlXTo6LW1zLXRodW1iIHtcbiAgICBvcGFjaXR5OiAwLjU7XG4gICAgd2lkdGg6IDgwcHg7XG4gICAgaGVpZ2h0OiA4MHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xuICAgIGJvcmRlcjpub25lO1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbn1cbmlucHV0W3R5cGU9cmFuZ2VdW29yaWVudD12ZXJ0aWNhbF17XG4gICAgd3JpdGluZy1tb2RlOiBidC1scjsgLyogSUUgKi9cbiAgICAtd2Via2l0LWFwcGVhcmFuY2U6IHNsaWRlci12ZXJ0aWNhbDsgIC8qIFdlYktpdCAqL1xufVxuJzsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSR0cmFja1Jlc2V0ID0gJ1xuaW5wdXRbdHlwZT1yYW5nZV06Oi1tb3otcmFuZ2UtdHJhY2sge1xuICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn1cbmlucHV0W3R5cGU9cmFuZ2VdOjotbXMtdHJhY2sge1xuICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn1cbmlucHV0W3R5cGU9cmFuZ2VdOjotd2Via2l0LXNsaWRlci1ydW5uYWJsZS10cmFjayB7XG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufVxuJzsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRvdmVycmlkZXMgPSAnQG1lZGlhIHNjcmVlbiBhbmQgKC1tcy1oaWdoLWNvbnRyYXN0OiBhY3RpdmUpLCAoLW1zLWhpZ2gtY29udHJhc3Q6IG5vbmUpIHsnICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55KSArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnJvdykgKyAoJyA+ICcgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkpICsgKCcgeyBmbGV4LWJhc2lzOiBhdXRvICFpbXBvcnRhbnQ7IH0gJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSkgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5yb3cpICsgKCcgPiAnICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55KSArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmNvbnRhaW5lcikgKyAoJyB7IGZsZXgtYmFzaXM6IGF1dG8gIWltcG9ydGFudDsgfX0nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRpbnB1dFRleHRSZXNldCArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkc2xpZGVyUmVzZXQgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJHRyYWNrUmVzZXQgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJHRodW1iUmVzZXQgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZXhwbGFpbmVyKSkpKSkpKSkpKSkpKSkpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJEludGVybWVkaWF0ZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdJbnRlcm1lZGlhdGUnLCBhOiBhfTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRlbXB0eUludGVybWVkaWF0ZSA9IEYyKAoJZnVuY3Rpb24gKHNlbGVjdG9yLCBjbG9zaW5nKSB7CgkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRJbnRlcm1lZGlhdGUoCgkJCXtjbG9zaW5nOiBjbG9zaW5nLCBvdGhlcnM6IF9MaXN0X05pbCwgcHJvcHM6IF9MaXN0X05pbCwgc2VsZWN0b3I6IHNlbGVjdG9yfSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRyZW5kZXJSdWxlcyA9IEYyKAoJZnVuY3Rpb24gKF92MCwgcnVsZXNUb1JlbmRlcikgewoJCXZhciBwYXJlbnQgPSBfdjAuYTsKCQl2YXIgZ2VuZXJhdGVJbnRlcm1lZGlhdGVzID0gRjIoCgkJCWZ1bmN0aW9uIChydWxlLCByZW5kZXJlZCkgewoJCQkJc3dpdGNoIChydWxlLiQpIHsKCQkJCQljYXNlICdQcm9wJzoKCQkJCQkJdmFyIG5hbWUgPSBydWxlLmE7CgkJCQkJCXZhciB2YWwgPSBydWxlLmI7CgkJCQkJCXJldHVybiBfVXRpbHNfdXBkYXRlKAoJCQkJCQkJcmVuZGVyZWQsCgkJCQkJCQl7CgkJCQkJCQkJcHJvcHM6IEEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKG5hbWUsIHZhbCksCgkJCQkJCQkJCXJlbmRlcmVkLnByb3BzKQoJCQkJCQkJfSk7CgkJCQkJY2FzZSAnU3VwcG9ydHMnOgoJCQkJCQl2YXIgX3YyID0gcnVsZS5hOwoJCQkJCQl2YXIgcHJvcCA9IF92Mi5hOwoJCQkJCQl2YXIgdmFsdWUgPSBfdjIuYjsKCQkJCQkJdmFyIHByb3BzID0gcnVsZS5iOwoJCQkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCXJlbmRlcmVkLAoJCQkJCQkJewoJCQkJCQkJCW90aGVyczogQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRJbnRlcm1lZGlhdGUoCgkJCQkJCQkJCQl7Y2xvc2luZzogJ1xufScsIG90aGVyczogX0xpc3RfTmlsLCBwcm9wczogcHJvcHMsIHNlbGVjdG9yOiAnQHN1cHBvcnRzICgnICsgKHByb3AgKyAoJzonICsgKHZhbHVlICsgKCcpIHsnICsgcGFyZW50LnNlbGVjdG9yKSkpKX0pLAoJCQkJCQkJCQlyZW5kZXJlZC5vdGhlcnMpCgkJCQkJCQl9KTsKCQkJCQljYXNlICdBZGphY2VudCc6CgkJCQkJCXZhciBzZWxlY3RvciA9IHJ1bGUuYTsKCQkJCQkJdmFyIGFkalJ1bGVzID0gcnVsZS5iOwoJCQkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCXJlbmRlcmVkLAoJCQkJCQkJewoJCQkJCQkJCW90aGVyczogQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJHJlbmRlclJ1bGVzLAoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGVtcHR5SW50ZXJtZWRpYXRlLCBwYXJlbnQuc2VsZWN0b3IgKyAoJyArICcgKyBzZWxlY3RvciksICcnKSwKCQkJCQkJCQkJCWFkalJ1bGVzKSwKCQkJCQkJCQkJcmVuZGVyZWQub3RoZXJzKQoJCQkJCQkJfSk7CgkJCQkJY2FzZSAnQ2hpbGQnOgoJCQkJCQl2YXIgY2hpbGQgPSBydWxlLmE7CgkJCQkJCXZhciBjaGlsZFJ1bGVzID0gcnVsZS5iOwoJCQkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCXJlbmRlcmVkLAoJCQkJCQkJewoJCQkJCQkJCW90aGVyczogQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJHJlbmRlclJ1bGVzLAoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGVtcHR5SW50ZXJtZWRpYXRlLCBwYXJlbnQuc2VsZWN0b3IgKyAoJyA+ICcgKyBjaGlsZCksICcnKSwKCQkJCQkJCQkJCWNoaWxkUnVsZXMpLAoJCQkJCQkJCQlyZW5kZXJlZC5vdGhlcnMpCgkJCQkJCQl9KTsKCQkJCQljYXNlICdBbGxDaGlsZHJlbic6CgkJCQkJCXZhciBjaGlsZCA9IHJ1bGUuYTsKCQkJCQkJdmFyIGNoaWxkUnVsZXMgPSBydWxlLmI7CgkJCQkJCXJldHVybiBfVXRpbHNfdXBkYXRlKAoJCQkJCQkJcmVuZGVyZWQsCgkJCQkJCQl7CgkJCQkJCQkJb3RoZXJzOiBBMigKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkcmVuZGVyUnVsZXMsCgkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZW1wdHlJbnRlcm1lZGlhdGUsIHBhcmVudC5zZWxlY3RvciArICgnICcgKyBjaGlsZCksICcnKSwKCQkJCQkJCQkJCWNoaWxkUnVsZXMpLAoJCQkJCQkJCQlyZW5kZXJlZC5vdGhlcnMpCgkJCQkJCQl9KTsKCQkJCQljYXNlICdEZXNjcmlwdG9yJzoKCQkJCQkJdmFyIGRlc2NyaXB0b3IgPSBydWxlLmE7CgkJCQkJCXZhciBkZXNjcmlwdG9yUnVsZXMgPSBydWxlLmI7CgkJCQkJCXJldHVybiBfVXRpbHNfdXBkYXRlKAoJCQkJCQkJcmVuZGVyZWQsCgkJCQkJCQl7CgkJCQkJCQkJb3RoZXJzOiBBMigKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkcmVuZGVyUnVsZXMsCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZW1wdHlJbnRlcm1lZGlhdGUsCgkJCQkJCQkJCQkJX1V0aWxzX2FwKHBhcmVudC5zZWxlY3RvciwgZGVzY3JpcHRvciksCgkJCQkJCQkJCQkJJycpLAoJCQkJCQkJCQkJZGVzY3JpcHRvclJ1bGVzKSwKCQkJCQkJCQkJcmVuZGVyZWQub3RoZXJzKQoJCQkJCQkJfSk7CgkJCQkJZGVmYXVsdDoKCQkJCQkJdmFyIGJhdGNoZWQgPSBydWxlLmE7CgkJCQkJCXJldHVybiBfVXRpbHNfdXBkYXRlKAoJCQkJCQkJcmVuZGVyZWQsCgkJCQkJCQl7CgkJCQkJCQkJb3RoZXJzOiBBMigKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkcmVuZGVyUnVsZXMsCgkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZW1wdHlJbnRlcm1lZGlhdGUsIHBhcmVudC5zZWxlY3RvciwgJycpLAoJCQkJCQkJCQkJYmF0Y2hlZCksCgkJCQkJCQkJCXJlbmRlcmVkLm90aGVycykKCQkJCQkJCX0pOwoJCQkJfQoJCQl9KTsKCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJEludGVybWVkaWF0ZSgKCQkJQTMoJGVsbSRjb3JlJExpc3QkZm9sZHIsIGdlbmVyYXRlSW50ZXJtZWRpYXRlcywgcGFyZW50LCBydWxlc1RvUmVuZGVyKSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRyZW5kZXJDb21wYWN0ID0gZnVuY3Rpb24gKHN0eWxlQ2xhc3NlcykgewoJdmFyIHJlbmRlclZhbHVlcyA9IGZ1bmN0aW9uICh2YWx1ZXMpIHsKCQlyZXR1cm4gJGVsbSRjb3JlJFN0cmluZyRjb25jYXQoCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJZnVuY3Rpb24gKF92MykgewoJCQkJCXZhciB4ID0gX3YzLmE7CgkJCQkJdmFyIHkgPSBfdjMuYjsKCQkJCQlyZXR1cm4geCArICgnOicgKyAoeSArICc7JykpOwoJCQkJfSwKCQkJCXZhbHVlcykpOwoJfTsKCXZhciByZW5kZXJDbGFzcyA9IGZ1bmN0aW9uIChydWxlKSB7CgkJdmFyIF92MiA9IHJ1bGUucHJvcHM7CgkJaWYgKCFfdjIuYikgewoJCQlyZXR1cm4gJyc7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIHJ1bGUuc2VsZWN0b3IgKyAoJ3snICsgKHJlbmRlclZhbHVlcyhydWxlLnByb3BzKSArIChydWxlLmNsb3NpbmcgKyAnfScpKSk7CgkJfQoJfTsKCXZhciByZW5kZXJJbnRlcm1lZGlhdGUgPSBmdW5jdGlvbiAoX3YwKSB7CgkJdmFyIHJ1bGUgPSBfdjAuYTsKCQlyZXR1cm4gX1V0aWxzX2FwKAoJCQlyZW5kZXJDbGFzcyhydWxlKSwKCQkJJGVsbSRjb3JlJFN0cmluZyRjb25jYXQoCgkJCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsIHJlbmRlckludGVybWVkaWF0ZSwgcnVsZS5vdGhlcnMpKSk7Cgl9OwoJcmV0dXJuICRlbG0kY29yZSRTdHJpbmckY29uY2F0KAoJCUEyKAoJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCXJlbmRlckludGVybWVkaWF0ZSwKCQkJQTMoCgkJCQkkZWxtJGNvcmUkTGlzdCRmb2xkciwKCQkJCUYyKAoJCQkJCWZ1bmN0aW9uIChfdjEsIGV4aXN0aW5nKSB7CgkJCQkJCXZhciBuYW1lID0gX3YxLmE7CgkJCQkJCXZhciBzdHlsZVJ1bGVzID0gX3YxLmI7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQlBMigKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkcmVuZGVyUnVsZXMsCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGVtcHR5SW50ZXJtZWRpYXRlLCBuYW1lLCAnJyksCgkJCQkJCQkJc3R5bGVSdWxlcyksCgkJCQkJCQlleGlzdGluZyk7CgkJCQkJfSksCgkJCQlfTGlzdF9OaWwsCgkJCQlzdHlsZUNsYXNzZXMpKSk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkcnVsZXMgPSBfVXRpbHNfYXAoCgkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkb3ZlcnJpZGVzLAoJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJHJlbmRlckNvbXBhY3QoCgkJX1V0aWxzX2FwKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRiYXNlU2hlZXQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjb21tb25WYWx1ZXMpKSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkc3RhdGljUm9vdCA9IGZ1bmN0aW9uIChvcHRzKSB7Cgl2YXIgX3YwID0gb3B0cy5tb2RlOwoJc3dpdGNoIChfdjAuJCkgewoJCWNhc2UgJ0xheW91dCc6CgkJCXJldHVybiBBMygKCQkJCSRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRub2RlLAoJCQkJJ2RpdicsCgkJCQlfTGlzdF9OaWwsCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMygKCQkJCQkJJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJG5vZGUsCgkJCQkJCSdzdHlsZScsCgkJCQkJCV9MaXN0X05pbCwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCSRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSR0ZXh0KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRydWxlcykKCQkJCQkJCV0pKQoJCQkJCV0pKTsKCQljYXNlICdOb1N0YXRpY1N0eWxlU2hlZXQnOgoJCQlyZXR1cm4gJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJHRleHQoJycpOwoJCWRlZmF1bHQ6CgkJCXJldHVybiBBMygKCQkJCSRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRub2RlLAoJCQkJJ2VsbS11aS1zdGF0aWMtcnVsZXMnLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoCgkJCQkJCSRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRwcm9wZXJ0eSwKCQkJCQkJJ3J1bGVzJywKCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkcnVsZXMpKQoJCQkJCV0pLAoJCQkJX0xpc3RfTmlsKTsKCX0KfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmb250TmFtZSA9IGZ1bmN0aW9uIChmb250KSB7Cglzd2l0Y2ggKGZvbnQuJCkgewoJCWNhc2UgJ1NlcmlmJzoKCQkJcmV0dXJuICdzZXJpZic7CgkJY2FzZSAnU2Fuc1NlcmlmJzoKCQkJcmV0dXJuICdzYW5zLXNlcmlmJzsKCQljYXNlICdNb25vc3BhY2UnOgoJCQlyZXR1cm4gJ21vbm9zcGFjZSc7CgkJY2FzZSAnVHlwZWZhY2UnOgoJCQl2YXIgbmFtZSA9IGZvbnQuYTsKCQkJcmV0dXJuICdcIicgKyAobmFtZSArICdcIicpOwoJCWNhc2UgJ0ltcG9ydEZvbnQnOgoJCQl2YXIgbmFtZSA9IGZvbnQuYTsKCQkJdmFyIHVybCA9IGZvbnQuYjsKCQkJcmV0dXJuICdcIicgKyAobmFtZSArICdcIicpOwoJCWRlZmF1bHQ6CgkJCXZhciBuYW1lID0gZm9udC5hLm5hbWU7CgkJCXJldHVybiAnXCInICsgKG5hbWUgKyAnXCInKTsKCX0KfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRpc1NtYWxsQ2FwcyA9IGZ1bmN0aW9uIChfdmFyKSB7Cglzd2l0Y2ggKF92YXIuJCkgewoJCWNhc2UgJ1ZhcmlhbnRBY3RpdmUnOgoJCQl2YXIgbmFtZSA9IF92YXIuYTsKCQkJcmV0dXJuIG5hbWUgPT09ICdzbWNwJzsKCQljYXNlICdWYXJpYW50T2ZmJzoKCQkJdmFyIG5hbWUgPSBfdmFyLmE7CgkJCXJldHVybiBmYWxzZTsKCQlkZWZhdWx0OgoJCQl2YXIgbmFtZSA9IF92YXIuYTsKCQkJdmFyIGluZGV4ID0gX3Zhci5iOwoJCQlyZXR1cm4gKG5hbWUgPT09ICdzbWNwJykgJiYgKGluZGV4ID09PSAxKTsKCX0KfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRoYXNTbWFsbENhcHMgPSBmdW5jdGlvbiAodHlwZWZhY2UpIHsKCWlmICh0eXBlZmFjZS4kID09PSAnRm9udFdpdGgnKSB7CgkJdmFyIGZvbnQgPSB0eXBlZmFjZS5hOwoJCXJldHVybiBBMigkZWxtJGNvcmUkTGlzdCRhbnksICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRpc1NtYWxsQ2FwcywgZm9udC52YXJpYW50cyk7Cgl9IGVsc2UgewoJCXJldHVybiBmYWxzZTsKCX0KfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJQcm9wcyA9IEYzKAoJZnVuY3Rpb24gKGZvcmNlLCBfdjAsIGV4aXN0aW5nKSB7CgkJdmFyIGtleSA9IF92MC5hOwoJCXZhciB2YWwgPSBfdjAuYjsKCQlyZXR1cm4gZm9yY2UgPyAoZXhpc3RpbmcgKyAoJ1xuICAnICsgKGtleSArICgnOiAnICsgKHZhbCArICcgIWltcG9ydGFudDsnKSkpKSkgOiAoZXhpc3RpbmcgKyAoJ1xuICAnICsgKGtleSArICgnOiAnICsgKHZhbCArICc7JykpKSkpOwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyU3R5bGUgPSBGNCgKCWZ1bmN0aW9uIChvcHRpb25zLCBtYXliZVBzZXVkbywgc2VsZWN0b3IsIHByb3BzKSB7CgkJaWYgKG1heWJlUHNldWRvLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCXNlbGVjdG9yICsgKCd7JyArIChBMygKCQkJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyUHJvcHMoZmFsc2UpLAoJCQkJCScnLAoJCQkJCXByb3BzKSArICdcbn0nKSkKCQkJCV0pOwoJCX0gZWxzZSB7CgkJCXZhciBwc2V1ZG8gPSBtYXliZVBzZXVkby5hOwoJCQlzd2l0Y2ggKHBzZXVkby4kKSB7CgkJCQljYXNlICdIb3Zlcic6CgkJCQkJdmFyIF92MiA9IG9wdGlvbnMuaG92ZXI7CgkJCQkJc3dpdGNoIChfdjIuJCkgewoJCQkJCQljYXNlICdOb0hvdmVyJzoKCQkJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQkJCWNhc2UgJ0ZvcmNlSG92ZXInOgoJCQkJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCXNlbGVjdG9yICsgKCctaHYgeycgKyAoQTMoCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyUHJvcHModHJ1ZSksCgkJCQkJCQkJCScnLAoJCQkJCQkJCQlwcm9wcykgKyAnXG59JykpCgkJCQkJCQkJXSk7CgkJCQkJCWRlZmF1bHQ6CgkJCQkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJc2VsZWN0b3IgKyAoJy1odjpob3ZlciB7JyArIChBMygKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJQcm9wcyhmYWxzZSksCgkJCQkJCQkJCScnLAoJCQkJCQkJCQlwcm9wcykgKyAnXG59JykpCgkJCQkJCQkJXSk7CgkJCQkJfQoJCQkJY2FzZSAnRm9jdXMnOgoJCQkJCXZhciByZW5kZXJlZFByb3BzID0gQTMoCgkJCQkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyUHJvcHMoZmFsc2UpLAoJCQkJCQknJywKCQkJCQkJcHJvcHMpOwoJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCXNlbGVjdG9yICsgKCctZnM6Zm9jdXMgeycgKyAocmVuZGVyZWRQcm9wcyArICdcbn0nKSksCgkJCQkJCQkoJy4nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSArICgnOmZvY3VzICcgKyAoc2VsZWN0b3IgKyAnLWZzICB7JykpKSkgKyAocmVuZGVyZWRQcm9wcyArICdcbn0nKSwKCQkJCQkJCShzZWxlY3RvciArICctZnM6Zm9jdXMtd2l0aGluIHsnKSArIChyZW5kZXJlZFByb3BzICsgJ1xufScpLAoJCQkJCQkJKCcudWktc2xpZGUtYmFyOmZvY3VzICsgJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSkgKyAoJyAuZm9jdXNhYmxlLXRodW1iJyArIChzZWxlY3RvciArICctZnMgeycpKSkpICsgKHJlbmRlcmVkUHJvcHMgKyAnXG59JykKCQkJCQkJXSk7CgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCXNlbGVjdG9yICsgKCctYWN0OmFjdGl2ZSB7JyArIChBMygKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlclByb3BzKGZhbHNlKSwKCQkJCQkJCScnLAoJCQkJCQkJcHJvcHMpICsgJ1xufScpKQoJCQkJCQldKTsKCQkJfQoJCX0KCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlclZhcmlhbnQgPSBmdW5jdGlvbiAoX3ZhcikgewoJc3dpdGNoIChfdmFyLiQpIHsKCQljYXNlICdWYXJpYW50QWN0aXZlJzoKCQkJdmFyIG5hbWUgPSBfdmFyLmE7CgkJCXJldHVybiAnXCInICsgKG5hbWUgKyAnXCInKTsKCQljYXNlICdWYXJpYW50T2ZmJzoKCQkJdmFyIG5hbWUgPSBfdmFyLmE7CgkJCXJldHVybiAnXCInICsgKG5hbWUgKyAnXCIgMCcpOwoJCWRlZmF1bHQ6CgkJCXZhciBuYW1lID0gX3Zhci5hOwoJCQl2YXIgaW5kZXggPSBfdmFyLmI7CgkJCXJldHVybiAnXCInICsgKG5hbWUgKyAoJ1wiICcgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoaW5kZXgpKSk7Cgl9Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyVmFyaWFudHMgPSBmdW5jdGlvbiAodHlwZWZhY2UpIHsKCWlmICh0eXBlZmFjZS4kID09PSAnRm9udFdpdGgnKSB7CgkJdmFyIGZvbnQgPSB0eXBlZmFjZS5hOwoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJQTIoCgkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQknLCAnLAoJCQkJQTIoJGVsbSRjb3JlJExpc3QkbWFwLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyVmFyaWFudCwgZm9udC52YXJpYW50cykpKTsKCX0gZWxzZSB7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfQp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHRyYW5zZm9ybVZhbHVlID0gZnVuY3Rpb24gKHRyYW5zZm9ybSkgewoJc3dpdGNoICh0cmFuc2Zvcm0uJCkgewoJCWNhc2UgJ1VudHJhbnNmb3JtZWQnOgoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJY2FzZSAnTW92ZWQnOgoJCQl2YXIgX3YxID0gdHJhbnNmb3JtLmE7CgkJCXZhciB4ID0gX3YxLmE7CgkJCXZhciB5ID0gX3YxLmI7CgkJCXZhciB6ID0gX3YxLmM7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCSd0cmFuc2xhdGUzZCgnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUZsb2F0KHgpICsgKCdweCwgJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21GbG9hdCh5KSArICgncHgsICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQoeikgKyAncHgpJykpKSkpKTsKCQlkZWZhdWx0OgoJCQl2YXIgX3YyID0gdHJhbnNmb3JtLmE7CgkJCXZhciB0eCA9IF92Mi5hOwoJCQl2YXIgdHkgPSBfdjIuYjsKCQkJdmFyIHR6ID0gX3YyLmM7CgkJCXZhciBfdjMgPSB0cmFuc2Zvcm0uYjsKCQkJdmFyIHN4ID0gX3YzLmE7CgkJCXZhciBzeSA9IF92My5iOwoJCQl2YXIgc3ogPSBfdjMuYzsKCQkJdmFyIF92NCA9IHRyYW5zZm9ybS5jOwoJCQl2YXIgb3ggPSBfdjQuYTsKCQkJdmFyIG95ID0gX3Y0LmI7CgkJCXZhciBveiA9IF92NC5jOwoJCQl2YXIgYW5nbGUgPSB0cmFuc2Zvcm0uZDsKCQkJdmFyIHRyYW5zbGF0ZSA9ICd0cmFuc2xhdGUzZCgnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUZsb2F0KHR4KSArICgncHgsICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQodHkpICsgKCdweCwgJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21GbG9hdCh0eikgKyAncHgpJykpKSkpOwoJCQl2YXIgc2NhbGUgPSAnc2NhbGUzZCgnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUZsb2F0KHN4KSArICgnLCAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUZsb2F0KHN5KSArICgnLCAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUZsb2F0KHN6KSArICcpJykpKSkpOwoJCQl2YXIgcm90YXRlID0gJ3JvdGF0ZTNkKCcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQob3gpICsgKCcsICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQob3kpICsgKCcsICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQob3opICsgKCcsICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQoYW5nbGUpICsgJ3JhZCknKSkpKSkpKTsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KHRyYW5zbGF0ZSArICgnICcgKyAoc2NhbGUgKyAoJyAnICsgcm90YXRlKSkpKTsKCX0KfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJTdHlsZVJ1bGUgPSBGMygKCWZ1bmN0aW9uIChvcHRpb25zLCBydWxlLCBtYXliZVBzZXVkbykgewoJCXN3aXRjaCAocnVsZS4kKSB7CgkJCWNhc2UgJ1N0eWxlJzoKCQkJCXZhciBzZWxlY3RvciA9IHJ1bGUuYTsKCQkJCXZhciBwcm9wcyA9IHJ1bGUuYjsKCQkJCXJldHVybiBBNCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyU3R5bGUsIG9wdGlvbnMsIG1heWJlUHNldWRvLCBzZWxlY3RvciwgcHJvcHMpOwoJCQljYXNlICdTaGFkb3dzJzoKCQkJCXZhciBuYW1lID0gcnVsZS5hOwoJCQkJdmFyIHByb3AgPSBydWxlLmI7CgkJCQlyZXR1cm4gQTQoCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlclN0eWxlLAoJCQkJCW9wdGlvbnMsCgkJCQkJbWF5YmVQc2V1ZG8sCgkJCQkJJy4nICsgbmFtZSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwgJ2JveC1zaGFkb3cnLCBwcm9wKQoJCQkJCQldKSk7CgkJCWNhc2UgJ1RyYW5zcGFyZW5jeSc6CgkJCQl2YXIgbmFtZSA9IHJ1bGUuYTsKCQkJCXZhciB0cmFuc3BhcmVuY3kgPSBydWxlLmI7CgkJCQl2YXIgb3BhY2l0eSA9IEEyKAoJCQkJCSRlbG0kY29yZSRCYXNpY3MkbWF4LAoJCQkJCTAsCgkJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRtaW4sIDEsIDEgLSB0cmFuc3BhcmVuY3kpKTsKCQkJCXJldHVybiBBNCgKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyU3R5bGUsCgkJCQkJb3B0aW9ucywKCQkJCQltYXliZVBzZXVkbywKCQkJCQknLicgKyBuYW1lLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJQTIoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHksCgkJCQkJCQknb3BhY2l0eScsCgkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21GbG9hdChvcGFjaXR5KSkKCQkJCQkJXSkpOwoJCQljYXNlICdGb250U2l6ZSc6CgkJCQl2YXIgaSA9IHJ1bGUuYTsKCQkJCXJldHVybiBBNCgKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyU3R5bGUsCgkJCQkJb3B0aW9ucywKCQkJCQltYXliZVBzZXVkbywKCQkJCQknLmZvbnQtc2l6ZS0nICsgJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KGkpLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJQTIoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHksCgkJCQkJCQknZm9udC1zaXplJywKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckZnJvbUludChpKSArICdweCcpCgkJCQkJCV0pKTsKCQkJY2FzZSAnRm9udEZhbWlseSc6CgkJCQl2YXIgbmFtZSA9IHJ1bGUuYTsKCQkJCXZhciB0eXBlZmFjZXMgPSBydWxlLmI7CgkJCQl2YXIgZmVhdHVyZXMgPSBBMigKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJJywgJywKCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJWYXJpYW50cywgdHlwZWZhY2VzKSk7CgkJCQl2YXIgZmFtaWxpZXMgPSBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFByb3BlcnR5LAoJCQkJCQknZm9udC1mYW1pbHknLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCScsICcsCgkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmb250TmFtZSwgdHlwZWZhY2VzKSkpLAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHksICdmb250LWZlYXR1cmUtc2V0dGluZ3MnLCBmZWF0dXJlcyksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHksCgkJCQkJCSdmb250LXZhcmlhbnQnLAoJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRhbnksICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRoYXNTbWFsbENhcHMsIHR5cGVmYWNlcykgPyAnc21hbGwtY2FwcycgOiAnbm9ybWFsJykKCQkJCQldKTsKCQkJCXJldHVybiBBNCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyU3R5bGUsIG9wdGlvbnMsIG1heWJlUHNldWRvLCAnLicgKyBuYW1lLCBmYW1pbGllcyk7CgkJCWNhc2UgJ1NpbmdsZSc6CgkJCQl2YXIgX2NsYXNzID0gcnVsZS5hOwoJCQkJdmFyIHByb3AgPSBydWxlLmI7CgkJCQl2YXIgdmFsID0gcnVsZS5jOwoJCQkJcmV0dXJuIEE0KAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJTdHlsZSwKCQkJCQlvcHRpb25zLAoJCQkJCW1heWJlUHNldWRvLAoJCQkJCScuJyArIF9jbGFzcywKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwgcHJvcCwgdmFsKQoJCQkJCQldKSk7CgkJCWNhc2UgJ0NvbG9yZWQnOgoJCQkJdmFyIF9jbGFzcyA9IHJ1bGUuYTsKCQkJCXZhciBwcm9wID0gcnVsZS5iOwoJCQkJdmFyIGNvbG9yID0gcnVsZS5jOwoJCQkJcmV0dXJuIEE0KAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJTdHlsZSwKCQkJCQlvcHRpb25zLAoJCQkJCW1heWJlUHNldWRvLAoJCQkJCScuJyArIF9jbGFzcywKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCUEyKAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFByb3BlcnR5LAoJCQkJCQkJcHJvcCwKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmb3JtYXRDb2xvcihjb2xvcikpCgkJCQkJCV0pKTsKCQkJY2FzZSAnU3BhY2luZ1N0eWxlJzoKCQkJCXZhciBjbHMgPSBydWxlLmE7CgkJCQl2YXIgeCA9IHJ1bGUuYjsKCQkJCXZhciB5ID0gcnVsZS5jOwoJCQkJdmFyIHlQeCA9ICRlbG0kY29yZSRTdHJpbmckZnJvbUludCh5KSArICdweCc7CgkJCQl2YXIgeFB4ID0gJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHgpICsgJ3B4JzsKCQkJCXZhciBzaW5nbGUgPSAnLicgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5zaW5nbGU7CgkJCQl2YXIgcm93ID0gJy4nICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMucm93OwoJCQkJdmFyIHdyYXBwZWRSb3cgPSAnLicgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMud3JhcHBlZCArIHJvdyk7CgkJCQl2YXIgcmlnaHQgPSAnLicgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnblJpZ2h0OwoJCQkJdmFyIHBhcmFncmFwaCA9ICcuJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnBhcmFncmFwaDsKCQkJCXZhciBwYWdlID0gJy4nICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMucGFnZTsKCQkJCXZhciBsZWZ0ID0gJy4nICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25MZWZ0OwoJCQkJdmFyIGhhbGZZID0gJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQoeSAvIDIpICsgJ3B4JzsKCQkJCXZhciBoYWxmWCA9ICRlbG0kY29yZSRTdHJpbmckZnJvbUZsb2F0KHggLyAyKSArICdweCc7CgkJCQl2YXIgY29sdW1uID0gJy4nICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29sdW1uOwoJCQkJdmFyIF9jbGFzcyA9ICcuJyArIGNsczsKCQkJCXZhciBhbnkgPSAnLicgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnk7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJQTQoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyU3R5bGUsCgkJCQkJCQlvcHRpb25zLAoJCQkJCQkJbWF5YmVQc2V1ZG8sCgkJCQkJCQlfY2xhc3MgKyAocm93ICsgKCcgPiAnICsgKGFueSArICgnICsgJyArIGFueSkpKSksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHksICdtYXJnaW4tbGVmdCcsIHhQeCkKCQkJCQkJCQldKSksCgkJCQkJCQlBNCgKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJTdHlsZSwKCQkJCQkJCW9wdGlvbnMsCgkJCQkJCQltYXliZVBzZXVkbywKCQkJCQkJCV9jbGFzcyArICh3cmFwcGVkUm93ICsgKCcgPiAnICsgYW55KSksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHksICdtYXJnaW4nLCBoYWxmWSArICgnICcgKyBoYWxmWCkpCgkJCQkJCQkJXSkpLAoJCQkJCQkJQTQoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyU3R5bGUsCgkJCQkJCQlvcHRpb25zLAoJCQkJCQkJbWF5YmVQc2V1ZG8sCgkJCQkJCQlfY2xhc3MgKyAoY29sdW1uICsgKCcgPiAnICsgKGFueSArICgnICsgJyArIGFueSkpKSksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHksICdtYXJnaW4tdG9wJywgeVB4KQoJCQkJCQkJCV0pKSwKCQkJCQkJCUE0KAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlclN0eWxlLAoJCQkJCQkJb3B0aW9ucywKCQkJCQkJCW1heWJlUHNldWRvLAoJCQkJCQkJX2NsYXNzICsgKHBhZ2UgKyAoJyA+ICcgKyAoYW55ICsgKCcgKyAnICsgYW55KSkpKSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwgJ21hcmdpbi10b3AnLCB5UHgpCgkJCQkJCQkJXSkpLAoJCQkJCQkJQTQoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyU3R5bGUsCgkJCQkJCQlvcHRpb25zLAoJCQkJCQkJbWF5YmVQc2V1ZG8sCgkJCQkJCQlfY2xhc3MgKyAocGFnZSArICgnID4gJyArIGxlZnQpKSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwgJ21hcmdpbi1yaWdodCcsIHhQeCkKCQkJCQkJCQldKSksCgkJCQkJCQlBNCgKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJTdHlsZSwKCQkJCQkJCW9wdGlvbnMsCgkJCQkJCQltYXliZVBzZXVkbywKCQkJCQkJCV9jbGFzcyArIChwYWdlICsgKCcgPiAnICsgcmlnaHQpKSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwgJ21hcmdpbi1sZWZ0JywgeFB4KQoJCQkJCQkJCV0pKSwKCQkJCQkJCUE0KAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlclN0eWxlLAoJCQkJCQkJb3B0aW9ucywKCQkJCQkJCW1heWJlUHNldWRvLAoJCQkJCQkJX1V0aWxzX2FwKF9jbGFzcywgcGFyYWdyYXBoKSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHksCgkJCQkJCQkJCSdsaW5lLWhlaWdodCcsCgkJCQkJCQkJCSdjYWxjKDFlbSArICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHkpICsgJ3B4KScpKQoJCQkJCQkJCV0pKSwKCQkJCQkJCUE0KAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlclN0eWxlLAoJCQkJCQkJb3B0aW9ucywKCQkJCQkJCW1heWJlUHNldWRvLAoJCQkJCQkJJ3RleHRhcmVhJyArIChhbnkgKyBfY2xhc3MpLAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwKCQkJCQkJCQkJJ2xpbmUtaGVpZ2h0JywKCQkJCQkJCQkJJ2NhbGMoMWVtICsgJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoeSkgKyAncHgpJykpLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFByb3BlcnR5LAoJCQkJCQkJCQknaGVpZ2h0JywKCQkJCQkJCQkJJ2NhbGMoMTAwJSArICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHkpICsgJ3B4KScpKQoJCQkJCQkJCV0pKSwKCQkJCQkJCUE0KAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlclN0eWxlLAoJCQkJCQkJb3B0aW9ucywKCQkJCQkJCW1heWJlUHNldWRvLAoJCQkJCQkJX2NsYXNzICsgKHBhcmFncmFwaCArICgnID4gJyArIGxlZnQpKSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwgJ21hcmdpbi1yaWdodCcsIHhQeCkKCQkJCQkJCQldKSksCgkJCQkJCQlBNCgKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJTdHlsZSwKCQkJCQkJCW9wdGlvbnMsCgkJCQkJCQltYXliZVBzZXVkbywKCQkJCQkJCV9jbGFzcyArIChwYXJhZ3JhcGggKyAoJyA+ICcgKyByaWdodCkpLAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFByb3BlcnR5LCAnbWFyZ2luLWxlZnQnLCB4UHgpCgkJCQkJCQkJXSkpLAoJCQkJCQkJQTQoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyU3R5bGUsCgkJCQkJCQlvcHRpb25zLAoJCQkJCQkJbWF5YmVQc2V1ZG8sCgkJCQkJCQlfY2xhc3MgKyAocGFyYWdyYXBoICsgJzo6YWZ0ZXInKSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwgJ2NvbnRlbnQnLCAnXCdcJycpLAoJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHksICdkaXNwbGF5JywgJ2Jsb2NrJyksCgkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwgJ2hlaWdodCcsICcwJyksCgkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwgJ3dpZHRoJywgJzAnKSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwKCQkJCQkJCQkJJ21hcmdpbi10b3AnLAoJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoKC0xKSAqICgoeSAvIDIpIHwgMCkpICsgJ3B4JykKCQkJCQkJCQldKSksCgkJCQkJCQlBNCgKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJTdHlsZSwKCQkJCQkJCW9wdGlvbnMsCgkJCQkJCQltYXliZVBzZXVkbywKCQkJCQkJCV9jbGFzcyArIChwYXJhZ3JhcGggKyAnOjpiZWZvcmUnKSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwgJ2NvbnRlbnQnLCAnXCdcJycpLAoJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUHJvcGVydHksICdkaXNwbGF5JywgJ2Jsb2NrJyksCgkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwgJ2hlaWdodCcsICcwJyksCgkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwgJ3dpZHRoJywgJzAnKSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQcm9wZXJ0eSwKCQkJCQkJCQkJJ21hcmdpbi1ib3R0b20nLAoJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoKC0xKSAqICgoeSAvIDIpIHwgMCkpICsgJ3B4JykKCQkJCQkJCQldKSkKCQkJCQkJXSkpOwoJCQljYXNlICdQYWRkaW5nU3R5bGUnOgoJCQkJdmFyIGNscyA9IHJ1bGUuYTsKCQkJCXZhciB0b3AgPSBydWxlLmI7CgkJCQl2YXIgcmlnaHQgPSBydWxlLmM7CgkJCQl2YXIgYm90dG9tID0gcnVsZS5kOwoJCQkJdmFyIGxlZnQgPSBydWxlLmU7CgkJCQl2YXIgX2NsYXNzID0gJy4nICsgY2xzOwoJCQkJcmV0dXJuIEE0KAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJTdHlsZSwKCQkJCQlvcHRpb25zLAoJCQkJCW1heWJlUHNldWRvLAoJCQkJCV9jbGFzcywKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCUEyKAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFByb3BlcnR5LAoJCQkJCQkJJ3BhZGRpbmcnLAoJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQodG9wKSArICgncHggJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21GbG9hdChyaWdodCkgKyAoJ3B4ICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQoYm90dG9tKSArICgncHggJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21GbG9hdChsZWZ0KSArICdweCcpKSkpKSkpCgkJCQkJCV0pKTsKCQkJY2FzZSAnQm9yZGVyV2lkdGgnOgoJCQkJdmFyIGNscyA9IHJ1bGUuYTsKCQkJCXZhciB0b3AgPSBydWxlLmI7CgkJCQl2YXIgcmlnaHQgPSBydWxlLmM7CgkJCQl2YXIgYm90dG9tID0gcnVsZS5kOwoJCQkJdmFyIGxlZnQgPSBydWxlLmU7CgkJCQl2YXIgX2NsYXNzID0gJy4nICsgY2xzOwoJCQkJcmV0dXJuIEE0KAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJTdHlsZSwKCQkJCQlvcHRpb25zLAoJCQkJCW1heWJlUHNldWRvLAoJCQkJCV9jbGFzcywKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCUEyKAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFByb3BlcnR5LAoJCQkJCQkJJ2JvcmRlci13aWR0aCcsCgkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQodG9wKSArICgncHggJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocmlnaHQpICsgKCdweCAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChib3R0b20pICsgKCdweCAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChsZWZ0KSArICdweCcpKSkpKSkpCgkJCQkJCV0pKTsKCQkJY2FzZSAnR3JpZFRlbXBsYXRlU3R5bGUnOgoJCQkJdmFyIHRlbXBsYXRlID0gcnVsZS5hOwoJCQkJdmFyIHRvR3JpZExlbmd0aEhlbHBlciA9IEYzKAoJCQkJCWZ1bmN0aW9uIChtaW5pbXVtLCBtYXhpbXVtLCB4KSB7CgkJCQkJCXRvR3JpZExlbmd0aEhlbHBlcjoKCQkJCQkJd2hpbGUgKHRydWUpIHsKCQkJCQkJCXN3aXRjaCAoeC4kKSB7CgkJCQkJCQkJY2FzZSAnUHgnOgoJCQkJCQkJCQl2YXIgcHggPSB4LmE7CgkJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocHgpICsgJ3B4JzsKCQkJCQkJCQljYXNlICdDb250ZW50JzoKCQkJCQkJCQkJdmFyIF92MiA9IF9VdGlsc19UdXBsZTIobWluaW11bSwgbWF4aW11bSk7CgkJCQkJCQkJCWlmIChfdjIuYS4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJCWlmIChfdjIuYi4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJCQl2YXIgX3YzID0gX3YyLmE7CgkJCQkJCQkJCQkJdmFyIF92NCA9IF92Mi5iOwoJCQkJCQkJCQkJCXJldHVybiAnbWF4LWNvbnRlbnQnOwoJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQl2YXIgX3Y2ID0gX3YyLmE7CgkJCQkJCQkJCQkJdmFyIG1heFNpemUgPSBfdjIuYi5hOwoJCQkJCQkJCQkJCXJldHVybiAnbWlubWF4KG1heC1jb250ZW50LCAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChtYXhTaXplKSArICdweCknKTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCWlmIChfdjIuYi4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJCQl2YXIgbWluU2l6ZSA9IF92Mi5hLmE7CgkJCQkJCQkJCQkJdmFyIF92NSA9IF92Mi5iOwoJCQkJCQkJCQkJCXJldHVybiAnbWlubWF4KCcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KG1pblNpemUpICsgKCdweCwgJyArICdtYXgtY29udGVudCknKSk7CgkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCXZhciBtaW5TaXplID0gX3YyLmEuYTsKCQkJCQkJCQkJCQl2YXIgbWF4U2l6ZSA9IF92Mi5iLmE7CgkJCQkJCQkJCQkJcmV0dXJuICdtaW5tYXgoJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQobWluU2l6ZSkgKyAoJ3B4LCAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChtYXhTaXplKSArICdweCknKSkpOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJY2FzZSAnRmlsbCc6CgkJCQkJCQkJCXZhciBpID0geC5hOwoJCQkJCQkJCQl2YXIgX3Y3ID0gX1V0aWxzX1R1cGxlMihtaW5pbXVtLCBtYXhpbXVtKTsKCQkJCQkJCQkJaWYgKF92Ny5hLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJCQkJaWYgKF92Ny5iLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJCQkJCXZhciBfdjggPSBfdjcuYTsKCQkJCQkJCQkJCQl2YXIgX3Y5ID0gX3Y3LmI7CgkJCQkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRTdHJpbmckZnJvbUludChpKSArICdmcic7CgkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCXZhciBfdjExID0gX3Y3LmE7CgkJCQkJCQkJCQkJdmFyIG1heFNpemUgPSBfdjcuYi5hOwoJCQkJCQkJCQkJCXJldHVybiAnbWlubWF4KG1heC1jb250ZW50LCAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChtYXhTaXplKSArICdweCknKTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCWlmIChfdjcuYi4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJCQl2YXIgbWluU2l6ZSA9IF92Ny5hLmE7CgkJCQkJCQkJCQkJdmFyIF92MTAgPSBfdjcuYjsKCQkJCQkJCQkJCQlyZXR1cm4gJ21pbm1heCgnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChtaW5TaXplKSArICgncHgsICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KGkpICsgKCdmcicgKyAnZnIpJykpKSk7CgkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCXZhciBtaW5TaXplID0gX3Y3LmEuYTsKCQkJCQkJCQkJCQl2YXIgbWF4U2l6ZSA9IF92Ny5iLmE7CgkJCQkJCQkJCQkJcmV0dXJuICdtaW5tYXgoJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQobWluU2l6ZSkgKyAoJ3B4LCAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChtYXhTaXplKSArICdweCknKSkpOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJY2FzZSAnTWluJzoKCQkJCQkJCQkJdmFyIG0gPSB4LmE7CgkJCQkJCQkJCXZhciBsZW4gPSB4LmI7CgkJCQkJCQkJCXZhciAkdGVtcCRtaW5pbXVtID0gJGVsbSRjb3JlJE1heWJlJEp1c3QobSksCgkJCQkJCQkJCQkkdGVtcCRtYXhpbXVtID0gbWF4aW11bSwKCQkJCQkJCQkJCSR0ZW1wJHggPSBsZW47CgkJCQkJCQkJCW1pbmltdW0gPSAkdGVtcCRtaW5pbXVtOwoJCQkJCQkJCQltYXhpbXVtID0gJHRlbXAkbWF4aW11bTsKCQkJCQkJCQkJeCA9ICR0ZW1wJHg7CgkJCQkJCQkJCWNvbnRpbnVlIHRvR3JpZExlbmd0aEhlbHBlcjsKCQkJCQkJCQlkZWZhdWx0OgoJCQkJCQkJCQl2YXIgbSA9IHguYTsKCQkJCQkJCQkJdmFyIGxlbiA9IHguYjsKCQkJCQkJCQkJdmFyICR0ZW1wJG1pbmltdW0gPSBtaW5pbXVtLAoJCQkJCQkJCQkJJHRlbXAkbWF4aW11bSA9ICRlbG0kY29yZSRNYXliZSRKdXN0KG0pLAoJCQkJCQkJCQkJJHRlbXAkeCA9IGxlbjsKCQkJCQkJCQkJbWluaW11bSA9ICR0ZW1wJG1pbmltdW07CgkJCQkJCQkJCW1heGltdW0gPSAkdGVtcCRtYXhpbXVtOwoJCQkJCQkJCQl4ID0gJHRlbXAkeDsKCQkJCQkJCQkJY29udGludWUgdG9HcmlkTGVuZ3RoSGVscGVyOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSk7CgkJCQl2YXIgdG9HcmlkTGVuZ3RoID0gZnVuY3Rpb24gKHgpIHsKCQkJCQlyZXR1cm4gQTModG9HcmlkTGVuZ3RoSGVscGVyLCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsIHgpOwoJCQkJfTsKCQkJCXZhciB4U3BhY2luZyA9IHRvR3JpZExlbmd0aCh0ZW1wbGF0ZS5zcGFjaW5nLmEpOwoJCQkJdmFyIHlTcGFjaW5nID0gdG9HcmlkTGVuZ3RoKHRlbXBsYXRlLnNwYWNpbmcuYik7CgkJCQl2YXIgcm93cyA9IGZ1bmN0aW9uICh4KSB7CgkJCQkJcmV0dXJuICdncmlkLXRlbXBsYXRlLXJvd3M6ICcgKyAoeCArICc7Jyk7CgkJCQl9KAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCScgJywKCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkbWFwLCB0b0dyaWRMZW5ndGgsIHRlbXBsYXRlLnJvd3MpKSk7CgkJCQl2YXIgbXNSb3dzID0gZnVuY3Rpb24gKHgpIHsKCQkJCQlyZXR1cm4gJy1tcy1ncmlkLXJvd3M6ICcgKyAoeCArICc7Jyk7CgkJCQl9KAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCXlTcGFjaW5nLAoJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsIHRvR3JpZExlbmd0aCwgdGVtcGxhdGUuY29sdW1ucykpKTsKCQkJCXZhciBtc0NvbHVtbnMgPSBmdW5jdGlvbiAoeCkgewoJCQkJCXJldHVybiAnLW1zLWdyaWQtY29sdW1uczogJyArICh4ICsgJzsnKTsKCQkJCX0oCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJeVNwYWNpbmcsCgkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgdG9HcmlkTGVuZ3RoLCB0ZW1wbGF0ZS5jb2x1bW5zKSkpOwoJCQkJdmFyIGdhcFkgPSAnZ3JpZC1yb3ctZ2FwOicgKyAodG9HcmlkTGVuZ3RoKHRlbXBsYXRlLnNwYWNpbmcuYikgKyAnOycpOwoJCQkJdmFyIGdhcFggPSAnZ3JpZC1jb2x1bW4tZ2FwOicgKyAodG9HcmlkTGVuZ3RoKHRlbXBsYXRlLnNwYWNpbmcuYSkgKyAnOycpOwoJCQkJdmFyIGNvbHVtbnMgPSBmdW5jdGlvbiAoeCkgewoJCQkJCXJldHVybiAnZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAnICsgKHggKyAnOycpOwoJCQkJfSgKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQknICcsCgkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgdG9HcmlkTGVuZ3RoLCB0ZW1wbGF0ZS5jb2x1bW5zKSkpOwoJCQkJdmFyIF9jbGFzcyA9ICcuZ3JpZC1yb3dzLScgKyAoQTIoCgkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCSctJywKCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRsZW5ndGhDbGFzc05hbWUsIHRlbXBsYXRlLnJvd3MpKSArICgnLWNvbHMtJyArIChBMigKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJJy0nLAoJCQkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGxlbmd0aENsYXNzTmFtZSwgdGVtcGxhdGUuY29sdW1ucykpICsgKCctc3BhY2UteC0nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRsZW5ndGhDbGFzc05hbWUodGVtcGxhdGUuc3BhY2luZy5hKSArICgnLXNwYWNlLXktJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRsZW5ndGhDbGFzc05hbWUodGVtcGxhdGUuc3BhY2luZy5iKSkpKSkpKTsKCQkJCXZhciBtb2Rlcm5HcmlkID0gX2NsYXNzICsgKCd7JyArIChjb2x1bW5zICsgKHJvd3MgKyAoZ2FwWCArIChnYXBZICsgJ30nKSkpKSk7CgkJCQl2YXIgc3VwcG9ydHMgPSAnQHN1cHBvcnRzIChkaXNwbGF5OmdyaWQpIHsnICsgKG1vZGVybkdyaWQgKyAnfScpOwoJCQkJdmFyIGJhc2UgPSBfY2xhc3MgKyAoJ3snICsgKG1zQ29sdW1ucyArIChtc1Jvd3MgKyAnfScpKSk7CgkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCVtiYXNlLCBzdXBwb3J0c10pOwoJCQljYXNlICdHcmlkUG9zaXRpb24nOgoJCQkJdmFyIHBvc2l0aW9uID0gcnVsZS5hOwoJCQkJdmFyIG1zUG9zaXRpb24gPSBBMigKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJJyAnLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJJy1tcy1ncmlkLXJvdzogJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9zaXRpb24ucm93KSArICc7JyksCgkJCQkJCQknLW1zLWdyaWQtcm93LXNwYW46ICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHBvc2l0aW9uLmhlaWdodCkgKyAnOycpLAoJCQkJCQkJJy1tcy1ncmlkLWNvbHVtbjogJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9zaXRpb24uY29sKSArICc7JyksCgkJCQkJCQknLW1zLWdyaWQtY29sdW1uLXNwYW46ICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHBvc2l0aW9uLndpZHRoKSArICc7JykKCQkJCQkJXSkpOwoJCQkJdmFyIG1vZGVyblBvc2l0aW9uID0gQTIoCgkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCScgJywKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCSdncmlkLXJvdzogJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9zaXRpb24ucm93KSArICgnIC8gJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9zaXRpb24ucm93ICsgcG9zaXRpb24uaGVpZ2h0KSArICc7JykpKSwKCQkJCQkJCSdncmlkLWNvbHVtbjogJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9zaXRpb24uY29sKSArICgnIC8gJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9zaXRpb24uY29sICsgcG9zaXRpb24ud2lkdGgpICsgJzsnKSkpCgkJCQkJCV0pKTsKCQkJCXZhciBfY2xhc3MgPSAnLmdyaWQtcG9zLScgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHBvc2l0aW9uLnJvdykgKyAoJy0nICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChwb3NpdGlvbi5jb2wpICsgKCctJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9zaXRpb24ud2lkdGgpICsgKCctJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludChwb3NpdGlvbi5oZWlnaHQpKSkpKSkpOwoJCQkJdmFyIG1vZGVybkdyaWQgPSBfY2xhc3MgKyAoJ3snICsgKG1vZGVyblBvc2l0aW9uICsgJ30nKSk7CgkJCQl2YXIgc3VwcG9ydHMgPSAnQHN1cHBvcnRzIChkaXNwbGF5OmdyaWQpIHsnICsgKG1vZGVybkdyaWQgKyAnfScpOwoJCQkJdmFyIGJhc2UgPSBfY2xhc3MgKyAoJ3snICsgKG1zUG9zaXRpb24gKyAnfScpKTsKCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJW2Jhc2UsIHN1cHBvcnRzXSk7CgkJCWNhc2UgJ1BzZXVkb1NlbGVjdG9yJzoKCQkJCXZhciBfY2xhc3MgPSBydWxlLmE7CgkJCQl2YXIgc3R5bGVzID0gcnVsZS5iOwoJCQkJdmFyIHJlbmRlclBzZXVkb1J1bGUgPSBmdW5jdGlvbiAoc3R5bGUpIHsKCQkJCQlyZXR1cm4gQTMoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJTdHlsZVJ1bGUsCgkJCQkJCW9wdGlvbnMsCgkJCQkJCXN0eWxlLAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdChfY2xhc3MpKTsKCQkJCX07CgkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLCByZW5kZXJQc2V1ZG9SdWxlLCBzdHlsZXMpOwoJCQlkZWZhdWx0OgoJCQkJdmFyIHRyYW5zZm9ybSA9IHJ1bGUuYTsKCQkJCXZhciB2YWwgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdHJhbnNmb3JtVmFsdWUodHJhbnNmb3JtKTsKCQkJCXZhciBfY2xhc3MgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdHJhbnNmb3JtQ2xhc3ModHJhbnNmb3JtKTsKCQkJCXZhciBfdjEyID0gX1V0aWxzX1R1cGxlMihfY2xhc3MsIHZhbCk7CgkJCQlpZiAoKF92MTIuYS4kID09PSAnSnVzdCcpICYmIChfdjEyLmIuJCA9PT0gJ0p1c3QnKSkgewoJCQkJCXZhciBjbHMgPSBfdjEyLmEuYTsKCQkJCQl2YXIgdiA9IF92MTIuYi5hOwoJCQkJCXJldHVybiBBNCgKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlclN0eWxlLAoJCQkJCQlvcHRpb25zLAoJCQkJCQltYXliZVBzZXVkbywKCQkJCQkJJy4nICsgY2xzLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFByb3BlcnR5LCAndHJhbnNmb3JtJywgdikKCQkJCQkJCV0pKTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCX0KCQl9Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbmNvZGVTdHlsZXMgPSBGMigKCWZ1bmN0aW9uIChvcHRpb25zLCBzdHlsZXNoZWV0KSB7CgkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJZnVuY3Rpb24gKHN0eWxlKSB7CgkJCQkJdmFyIHN0eWxlZCA9IEEzKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJTdHlsZVJ1bGUsIG9wdGlvbnMsIHN0eWxlLCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZyk7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRnZXRTdHlsZU5hbWUoc3R5bGUpLAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwgJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZywgc3R5bGVkKSk7CgkJCQl9LAoJCQkJc3R5bGVzaGVldCkpOwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYnJhY2tldCA9IEYyKAoJZnVuY3Rpb24gKHNlbGVjdG9yLCBydWxlcykgewoJCXZhciByZW5kZXJQYWlyID0gZnVuY3Rpb24gKF92MCkgewoJCQl2YXIgbmFtZSA9IF92MC5hOwoJCQl2YXIgdmFsID0gX3YwLmI7CgkJCXJldHVybiBuYW1lICsgKCc6ICcgKyAodmFsICsgJzsnKSk7CgkJfTsKCQlyZXR1cm4gc2VsZWN0b3IgKyAoJyB7JyArIChBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknJywKCQkJQTIoJGVsbSRjb3JlJExpc3QkbWFwLCByZW5kZXJQYWlyLCBydWxlcykpICsgJ30nKSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmb250UnVsZSA9IEYzKAoJZnVuY3Rpb24gKG5hbWUsIG1vZGlmaWVyLCBfdjApIHsKCQl2YXIgcGFyZW50QWRqID0gX3YwLmE7CgkJdmFyIHRleHRBZGp1c3RtZW50ID0gX3YwLmI7CgkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGJyYWNrZXQsICcuJyArIChuYW1lICsgKCcuJyArIChtb2RpZmllciArICgnLCAnICsgKCcuJyArIChuYW1lICsgKCcgLicgKyBtb2RpZmllcikpKSkpKSksIHBhcmVudEFkaiksCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYnJhY2tldCwgJy4nICsgKG5hbWUgKyAoJy4nICsgKG1vZGlmaWVyICsgKCc+IC4nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnRleHQgKyAoJywgLicgKyAobmFtZSArICgnIC4nICsgKG1vZGlmaWVyICsgKCcgPiAuJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnRleHQpKSkpKSkpKSkpLCB0ZXh0QWRqdXN0bWVudCkKCQkJXSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJGb250QWRqdXN0bWVudFJ1bGUgPSBGMygKCWZ1bmN0aW9uIChmb250VG9BZGp1c3QsIF92MCwgb3RoZXJGb250TmFtZSkgewoJCXZhciBmdWxsID0gX3YwLmE7CgkJdmFyIGNhcGl0YWwgPSBfdjAuYjsKCQl2YXIgbmFtZSA9IF9VdGlsc19lcShmb250VG9BZGp1c3QsIG90aGVyRm9udE5hbWUpID8gZm9udFRvQWRqdXN0IDogKG90aGVyRm9udE5hbWUgKyAoJyAuJyArIGZvbnRUb0FkanVzdCkpOwoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknICcsCgkJCV9VdGlsc19hcCgKCQkJCUEzKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmb250UnVsZSwgbmFtZSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc2l6ZUJ5Q2FwaXRhbCwgY2FwaXRhbCksCgkJCQlBMygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZm9udFJ1bGUsIG5hbWUsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmZ1bGxTaXplLCBmdWxsKSkpOwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyTnVsbEFkanVzdG1lbnRSdWxlID0gRjIoCglmdW5jdGlvbiAoZm9udFRvQWRqdXN0LCBvdGhlckZvbnROYW1lKSB7CgkJdmFyIG5hbWUgPSBfVXRpbHNfZXEoZm9udFRvQWRqdXN0LCBvdGhlckZvbnROYW1lKSA/IGZvbnRUb0FkanVzdCA6IChvdGhlckZvbnROYW1lICsgKCcgLicgKyBmb250VG9BZGp1c3QpKTsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJJyAnLAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJQTIoCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGJyYWNrZXQsCgkJCQkJJy4nICsgKG5hbWUgKyAoJy4nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNpemVCeUNhcGl0YWwgKyAoJywgJyArICgnLicgKyAobmFtZSArICgnIC4nICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc2l6ZUJ5Q2FwaXRhbCkpKSkpKSksCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUyKCdsaW5lLWhlaWdodCcsICcxJykKCQkJCQkJXSkpLAoJCQkJCUEyKAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRicmFja2V0LAoJCQkJCScuJyArIChuYW1lICsgKCcuJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5zaXplQnlDYXBpdGFsICsgKCc+IC4nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnRleHQgKyAoJywgLicgKyAobmFtZSArICgnIC4nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNpemVCeUNhcGl0YWwgKyAoJyA+IC4nICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMudGV4dCkpKSkpKSkpKSksCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUyKCd2ZXJ0aWNhbC1hbGlnbicsICcwJyksCgkJCQkJCQlfVXRpbHNfVHVwbGUyKCdsaW5lLWhlaWdodCcsICcxJykKCQkJCQkJXSkpCgkJCQldKSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhZGp1c3QgPSBGMygKCWZ1bmN0aW9uIChzaXplLCBoZWlnaHQsIHZlcnRpY2FsKSB7CgkJcmV0dXJuIHtoZWlnaHQ6IGhlaWdodCAvIHNpemUsIHNpemU6IHNpemUsIHZlcnRpY2FsOiB2ZXJ0aWNhbH07Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JG1pbmltdW0gPSBmdW5jdGlvbiAobGlzdCkgewoJaWYgKGxpc3QuYikgewoJCXZhciB4ID0gbGlzdC5hOwoJCXZhciB4cyA9IGxpc3QuYjsKCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCUEzKCRlbG0kY29yZSRMaXN0JGZvbGRsLCAkZWxtJGNvcmUkQmFzaWNzJG1pbiwgeCwgeHMpKTsKCX0gZWxzZSB7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfQp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGNvbnZlcnRBZGp1c3RtZW50ID0gZnVuY3Rpb24gKGFkanVzdG1lbnQpIHsKCXZhciBsaW5lcyA9IF9MaXN0X2Zyb21BcnJheSgKCQlbYWRqdXN0bWVudC5jYXBpdGFsLCBhZGp1c3RtZW50LmJhc2VsaW5lLCBhZGp1c3RtZW50LmRlc2NlbmRlciwgYWRqdXN0bWVudC5sb3dlcmNhc2VdKTsKCXZhciBsaW5lSGVpZ2h0ID0gMS41OwoJdmFyIG5vcm1hbERlc2NlbmRlciA9IChsaW5lSGVpZ2h0IC0gMSkgLyAyOwoJdmFyIG9sZE1pZGRsZSA9IGxpbmVIZWlnaHQgLyAyOwoJdmFyIGRlc2NlbmRlciA9IEEyKAoJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQlhZGp1c3RtZW50LmRlc2NlbmRlciwKCQkkZWxtJGNvcmUkTGlzdCRtaW5pbXVtKGxpbmVzKSk7Cgl2YXIgbmV3QmFzZWxpbmUgPSBBMigKCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJYWRqdXN0bWVudC5iYXNlbGluZSwKCQkkZWxtJGNvcmUkTGlzdCRtaW5pbXVtKAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlciwKCQkJCWZ1bmN0aW9uICh4KSB7CgkJCQkJcmV0dXJuICFfVXRpbHNfZXEoeCwgZGVzY2VuZGVyKTsKCQkJCX0sCgkJCQlsaW5lcykpKTsKCXZhciBiYXNlID0gbGluZUhlaWdodDsKCXZhciBhc2NlbmRlciA9IEEyKAoJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQlhZGp1c3RtZW50LmNhcGl0YWwsCgkJJGVsbSRjb3JlJExpc3QkbWF4aW11bShsaW5lcykpOwoJdmFyIGNhcGl0YWxTaXplID0gMSAvIChhc2NlbmRlciAtIG5ld0Jhc2VsaW5lKTsKCXZhciBjYXBpdGFsVmVydGljYWwgPSAxIC0gYXNjZW5kZXI7Cgl2YXIgZnVsbFNpemUgPSAxIC8gKGFzY2VuZGVyIC0gZGVzY2VuZGVyKTsKCXZhciBmdWxsVmVydGljYWwgPSAxIC0gYXNjZW5kZXI7Cgl2YXIgbmV3Q2FwaXRhbE1pZGRsZSA9ICgoYXNjZW5kZXIgLSBuZXdCYXNlbGluZSkgLyAyKSArIG5ld0Jhc2VsaW5lOwoJdmFyIG5ld0Z1bGxNaWRkbGUgPSAoKGFzY2VuZGVyIC0gZGVzY2VuZGVyKSAvIDIpICsgZGVzY2VuZGVyOwoJcmV0dXJuIHsKCQljYXBpdGFsOiBBMygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYWRqdXN0LCBjYXBpdGFsU2l6ZSwgYXNjZW5kZXIgLSBuZXdCYXNlbGluZSwgY2FwaXRhbFZlcnRpY2FsKSwKCQlmdWxsOiBBMygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYWRqdXN0LCBmdWxsU2l6ZSwgYXNjZW5kZXIgLSBkZXNjZW5kZXIsIGZ1bGxWZXJ0aWNhbCkKCX07Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZm9udEFkanVzdG1lbnRSdWxlcyA9IGZ1bmN0aW9uIChjb252ZXJ0ZWQpIHsKCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJX1V0aWxzX1R1cGxlMignZGlzcGxheScsICdibG9jaycpCgkJCV0pLAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJX1V0aWxzX1R1cGxlMignZGlzcGxheScsICdpbmxpbmUtYmxvY2snKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknbGluZS1oZWlnaHQnLAoJCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQoY29udmVydGVkLmhlaWdodCkpLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSd2ZXJ0aWNhbC1hbGlnbicsCgkJCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21GbG9hdChjb252ZXJ0ZWQudmVydGljYWwpICsgJ2VtJyksCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ2ZvbnQtc2l6ZScsCgkJCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21GbG9hdChjb252ZXJ0ZWQuc2l6ZSkgKyAnZW0nKQoJCQldKSk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdHlwZWZhY2VBZGp1c3RtZW50ID0gZnVuY3Rpb24gKHR5cGVmYWNlcykgewoJcmV0dXJuIEEzKAoJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCUYyKAoJCQlmdW5jdGlvbiAoZmFjZSwgZm91bmQpIHsKCQkJCWlmIChmb3VuZC4kID09PSAnTm90aGluZycpIHsKCQkJCQlpZiAoZmFjZS4kID09PSAnRm9udFdpdGgnKSB7CgkJCQkJCXZhciBfd2l0aCA9IGZhY2UuYTsKCQkJCQkJdmFyIF92MiA9IF93aXRoLmFkanVzdG1lbnQ7CgkJCQkJCWlmIChfdjIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQlyZXR1cm4gZm91bmQ7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYWRqdXN0bWVudCA9IF92Mi5hOwoJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmb250QWRqdXN0bWVudFJ1bGVzKAoJCQkJCQkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJCQkJCQlyZXR1cm4gJC5mdWxsOwoJCQkJCQkJCQkJfSgKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkY29udmVydEFkanVzdG1lbnQoYWRqdXN0bWVudCkpKSwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZvbnRBZGp1c3RtZW50UnVsZXMoCgkJCQkJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJCQkJCXJldHVybiAkLmNhcGl0YWw7CgkJCQkJCQkJCQl9KAoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRjb252ZXJ0QWRqdXN0bWVudChhZGp1c3RtZW50KSkpKSk7CgkJCQkJCX0KCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gZm91bmQ7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gZm91bmQ7CgkJCQl9CgkJCX0pLAoJCSRlbG0kY29yZSRNYXliZSROb3RoaW5nLAoJCXR5cGVmYWNlcyk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyVG9wTGV2ZWxWYWx1ZXMgPSBmdW5jdGlvbiAocnVsZXMpIHsKCXZhciB3aXRoSW1wb3J0ID0gZnVuY3Rpb24gKGZvbnQpIHsKCQlpZiAoZm9udC4kID09PSAnSW1wb3J0Rm9udCcpIHsKCQkJdmFyIHVybCA9IGZvbnQuYjsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KCdAaW1wb3J0IHVybChcJycgKyAodXJsICsgJ1wnKTsnKSk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCX0KCX07Cgl2YXIgZm9udEltcG9ydHMgPSBmdW5jdGlvbiAoX3YyKSB7CgkJdmFyIG5hbWUgPSBfdjIuYTsKCQl2YXIgdHlwZWZhY2VzID0gX3YyLmI7CgkJdmFyIGltcG9ydHMgPSBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknXG4nLAoJCQlBMigkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsIHdpdGhJbXBvcnQsIHR5cGVmYWNlcykpOwoJCXJldHVybiBpbXBvcnRzOwoJfTsKCXZhciBhbGxOYW1lcyA9IEEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJGVsbSRjb3JlJFR1cGxlJGZpcnN0LCBydWxlcyk7Cgl2YXIgZm9udEFkanVzdG1lbnRzID0gZnVuY3Rpb24gKF92MSkgewoJCXZhciBuYW1lID0gX3YxLmE7CgkJdmFyIHR5cGVmYWNlcyA9IF92MS5iOwoJCXZhciBfdjAgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdHlwZWZhY2VBZGp1c3RtZW50KHR5cGVmYWNlcyk7CgkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIEEyKAoJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJJycsCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlck51bGxBZGp1c3RtZW50UnVsZShuYW1lKSwKCQkJCQlhbGxOYW1lcykpOwoJCX0gZWxzZSB7CgkJCXZhciBhZGp1c3RtZW50ID0gX3YwLmE7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCScnLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJGb250QWRqdXN0bWVudFJ1bGUsIG5hbWUsIGFkanVzdG1lbnQpLAoJCQkJCWFsbE5hbWVzKSk7CgkJfQoJfTsKCXJldHVybiBfVXRpbHNfYXAoCgkJQTIoCgkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJJ1xuJywKCQkJQTIoJGVsbSRjb3JlJExpc3QkbWFwLCBmb250SW1wb3J0cywgcnVsZXMpKSwKCQlBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQknXG4nLAoJCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsIGZvbnRBZGp1c3RtZW50cywgcnVsZXMpKSk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdG9wTGV2ZWxWYWx1ZSA9IGZ1bmN0aW9uIChydWxlKSB7CglpZiAocnVsZS4kID09PSAnRm9udEZhbWlseScpIHsKCQl2YXIgbmFtZSA9IHJ1bGUuYTsKCQl2YXIgdHlwZWZhY2VzID0gcnVsZS5iOwoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJX1V0aWxzX1R1cGxlMihuYW1lLCB0eXBlZmFjZXMpKTsKCX0gZWxzZSB7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfQp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHRvU3R5bGVTaGVldFN0cmluZyA9IEYyKAoJZnVuY3Rpb24gKG9wdGlvbnMsIHN0eWxlc2hlZXQpIHsKCQl2YXIgY29tYmluZSA9IEYyKAoJCQlmdW5jdGlvbiAoc3R5bGUsIHJlbmRlcmVkKSB7CgkJCQlyZXR1cm4gewoJCQkJCXJ1bGVzOiBfVXRpbHNfYXAoCgkJCQkJCXJlbmRlcmVkLnJ1bGVzLAoJCQkJCQlBMygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyU3R5bGVSdWxlLCBvcHRpb25zLCBzdHlsZSwgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpKSwKCQkJCQl0b3BMZXZlbDogZnVuY3Rpb24gKCkgewoJCQkJCQl2YXIgX3YxID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHRvcExldmVsVmFsdWUoc3R5bGUpOwoJCQkJCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJcmV0dXJuIHJlbmRlcmVkLnRvcExldmVsOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIHRvcExldmVsID0gX3YxLmE7CgkJCQkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgdG9wTGV2ZWwsIHJlbmRlcmVkLnRvcExldmVsKTsKCQkJCQkJfQoJCQkJCX0oKQoJCQkJfTsKCQkJfSk7CgkJdmFyIF92MCA9IEEzKAoJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJY29tYmluZSwKCQkJe3J1bGVzOiBfTGlzdF9OaWwsIHRvcExldmVsOiBfTGlzdF9OaWx9LAoJCQlzdHlsZXNoZWV0KTsKCQl2YXIgdG9wTGV2ZWwgPSBfdjAudG9wTGV2ZWw7CgkJdmFyIHJ1bGVzID0gX3YwLnJ1bGVzOwoJCXJldHVybiBfVXRpbHNfYXAoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJUb3BMZXZlbFZhbHVlcyh0b3BMZXZlbCksCgkJCSRlbG0kY29yZSRTdHJpbmckY29uY2F0KHJ1bGVzKSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCR0b1N0eWxlU2hlZXQgPSBGMigKCWZ1bmN0aW9uIChvcHRpb25zLCBzdHlsZVNoZWV0KSB7CgkJdmFyIF92MCA9IG9wdGlvbnMubW9kZTsKCQlzd2l0Y2ggKF92MC4kKSB7CgkJCWNhc2UgJ0xheW91dCc6CgkJCQlyZXR1cm4gQTMoCgkJCQkJJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJG5vZGUsCgkJCQkJJ2RpdicsCgkJCQkJX0xpc3RfTmlsLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJQTMoCgkJCQkJCQkkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kbm9kZSwKCQkJCQkJCSdzdHlsZScsCgkJCQkJCQlfTGlzdF9OaWwsCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQkkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kdGV4dCgKCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHRvU3R5bGVTaGVldFN0cmluZywgb3B0aW9ucywgc3R5bGVTaGVldCkpCgkJCQkJCQkJXSkpCgkJCQkJCV0pKTsKCQkJY2FzZSAnTm9TdGF0aWNTdHlsZVNoZWV0JzoKCQkJCXJldHVybiBBMygKCQkJCQkkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kbm9kZSwKCQkJCQknZGl2JywKCQkJCQlfTGlzdF9OaWwsCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlBMygKCQkJCQkJCSRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRub2RlLAoJCQkJCQkJJ3N0eWxlJywKCQkJCQkJCV9MaXN0X05pbCwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCSRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSR0ZXh0KAoJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdG9TdHlsZVNoZWV0U3RyaW5nLCBvcHRpb25zLCBzdHlsZVNoZWV0KSkKCQkJCQkJCQldKSkKCQkJCQkJXSkpOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIEEzKAoJCQkJCSRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRub2RlLAoJCQkJCSdlbG0tdWktcnVsZXMnLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJQTIoCgkJCQkJCQkkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kcHJvcGVydHksCgkJCQkJCQkncnVsZXMnLAoJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGVuY29kZVN0eWxlcywgb3B0aW9ucywgc3R5bGVTaGVldCkpCgkJCQkJCV0pLAoJCQkJCV9MaXN0X05pbCk7CgkJfQoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZW1iZWRLZXllZCA9IEY0KAoJZnVuY3Rpb24gKF9zdGF0aWMsIG9wdHMsIHN0eWxlcywgY2hpbGRyZW4pIHsKCQl2YXIgZHluYW1pY1N0eWxlU2hlZXQgPSBBMigKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHRvU3R5bGVTaGVldCwKCQkJb3B0cywKCQkJQTMoCgkJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZWR1Y2VTdHlsZXMsCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCSRlbG0kY29yZSRTZXQkZW1wdHksCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlckZvY3VzU3R5bGUob3B0cy5mb2N1cykpLAoJCQkJc3R5bGVzKS5iKTsKCQlyZXR1cm4gX3N0YXRpYyA/IEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ3N0YXRpYy1zdHlsZXNoZWV0JywKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRzdGF0aWNSb290KG9wdHMpKSwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJX1V0aWxzX1R1cGxlMignZHluYW1pYy1zdHlsZXNoZWV0JywgZHluYW1pY1N0eWxlU2hlZXQpLAoJCQkJY2hpbGRyZW4pKSA6IEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQlfVXRpbHNfVHVwbGUyKCdkeW5hbWljLXN0eWxlc2hlZXQnLCBkeW5hbWljU3R5bGVTaGVldCksCgkJCWNoaWxkcmVuKTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGVtYmVkV2l0aCA9IEY0KAoJZnVuY3Rpb24gKF9zdGF0aWMsIG9wdHMsIHN0eWxlcywgY2hpbGRyZW4pIHsKCQl2YXIgZHluYW1pY1N0eWxlU2hlZXQgPSBBMigKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHRvU3R5bGVTaGVldCwKCQkJb3B0cywKCQkJQTMoCgkJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZWR1Y2VTdHlsZXMsCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCSRlbG0kY29yZSRTZXQkZW1wdHksCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlckZvY3VzU3R5bGUob3B0cy5mb2N1cykpLAoJCQkJc3R5bGVzKS5iKTsKCQlyZXR1cm4gX3N0YXRpYyA/IEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkc3RhdGljUm9vdChvcHRzKSwKCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZHluYW1pY1N0eWxlU2hlZXQsIGNoaWxkcmVuKSkgOiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBkeW5hbWljU3R5bGVTaGVldCwgY2hpbGRyZW4pOwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRoZWlnaHRCZXR3ZWVuID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZmxhZyg0NSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRoZWlnaHRGaWxsID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZmxhZygzNyk7CnZhciAkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20ka2V5ZWROb2RlID0gZnVuY3Rpb24gKHRhZykgewoJcmV0dXJuIF9WaXJ0dWFsRG9tX2tleWVkTm9kZSgKCQlfVmlydHVhbERvbV9ub1NjcmlwdCh0YWcpKTsKfTsKdmFyICRlbG0kaHRtbCRIdG1sJHAgPSBfVmlydHVhbERvbV9ub2RlKCdwJyk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRwcmVzZW50ID0gRjIoCglmdW5jdGlvbiAobXlGbGFnLCBfdjApIHsKCQl2YXIgZmllbGRPbmUgPSBfdjAuYTsKCQl2YXIgZmllbGRUd28gPSBfdjAuYjsKCQlpZiAobXlGbGFnLiQgPT09ICdGbGFnJykgewoJCQl2YXIgZmlyc3QgPSBteUZsYWcuYTsKCQkJcmV0dXJuIF9VdGlsc19lcShmaXJzdCAmIGZpZWxkT25lLCBmaXJzdCk7CgkJfSBlbHNlIHsKCQkJdmFyIHNlY29uZCA9IG15RmxhZy5hOwoJCQlyZXR1cm4gX1V0aWxzX2VxKHNlY29uZCAmIGZpZWxkVHdvLCBzZWNvbmQpOwoJCX0KCX0pOwp2YXIgJGVsbSRodG1sJEh0bWwkcyA9IF9WaXJ0dWFsRG9tX25vZGUoJ3MnKTsKdmFyICRlbG0kaHRtbCRIdG1sJHUgPSBfVmlydHVhbERvbV9ub2RlKCd1Jyk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR3aWR0aEJldHdlZW4gPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmbGFnKDQ0KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHdpZHRoRmlsbCA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGZsYWcoMzkpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZpbmFsaXplTm9kZSA9IEY2KAoJZnVuY3Rpb24gKGhhcywgbm9kZSwgYXR0cmlidXRlcywgY2hpbGRyZW4sIGVtYmVkTW9kZSwgcGFyZW50Q29udGV4dCkgewoJCXZhciBjcmVhdGVOb2RlID0gRjIoCgkJCWZ1bmN0aW9uIChub2RlTmFtZSwgYXR0cnMpIHsKCQkJCWlmIChjaGlsZHJlbi4kID09PSAnS2V5ZWQnKSB7CgkJCQkJdmFyIGtleWVkID0gY2hpbGRyZW4uYTsKCQkJCQlyZXR1cm4gQTMoCgkJCQkJCSRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRrZXllZE5vZGUsCgkJCQkJCW5vZGVOYW1lLAoJCQkJCQlhdHRycywKCQkJCQkJZnVuY3Rpb24gKCkgewoJCQkJCQkJc3dpdGNoIChlbWJlZE1vZGUuJCkgewoJCQkJCQkJCWNhc2UgJ05vU3R5bGVTaGVldCc6CgkJCQkJCQkJCXJldHVybiBrZXllZDsKCQkJCQkJCQljYXNlICdPbmx5RHluYW1pYyc6CgkJCQkJCQkJCXZhciBvcHRzID0gZW1iZWRNb2RlLmE7CgkJCQkJCQkJCXZhciBzdHlsZXMgPSBlbWJlZE1vZGUuYjsKCQkJCQkJCQkJcmV0dXJuIEE0KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbWJlZEtleWVkLCBmYWxzZSwgb3B0cywgc3R5bGVzLCBrZXllZCk7CgkJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQkJdmFyIG9wdHMgPSBlbWJlZE1vZGUuYTsKCQkJCQkJCQkJdmFyIHN0eWxlcyA9IGVtYmVkTW9kZS5iOwoJCQkJCQkJCQlyZXR1cm4gQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGVtYmVkS2V5ZWQsIHRydWUsIG9wdHMsIHN0eWxlcywga2V5ZWQpOwoJCQkJCQkJfQoJCQkJCQl9KCkpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgdW5rZXllZCA9IGNoaWxkcmVuLmE7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJCQlzd2l0Y2ggKG5vZGVOYW1lKSB7CgkJCQkJCQkJY2FzZSAnZGl2JzoKCQkJCQkJCQkJcmV0dXJuICRlbG0kaHRtbCRIdG1sJGRpdjsKCQkJCQkJCQljYXNlICdwJzoKCQkJCQkJCQkJcmV0dXJuICRlbG0kaHRtbCRIdG1sJHA7CgkJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQkJcmV0dXJuICRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRub2RlKG5vZGVOYW1lKTsKCQkJCQkJCX0KCQkJCQkJfSgpLAoJCQkJCQlhdHRycywKCQkJCQkJZnVuY3Rpb24gKCkgewoJCQkJCQkJc3dpdGNoIChlbWJlZE1vZGUuJCkgewoJCQkJCQkJCWNhc2UgJ05vU3R5bGVTaGVldCc6CgkJCQkJCQkJCXJldHVybiB1bmtleWVkOwoJCQkJCQkJCWNhc2UgJ09ubHlEeW5hbWljJzoKCQkJCQkJCQkJdmFyIG9wdHMgPSBlbWJlZE1vZGUuYTsKCQkJCQkJCQkJdmFyIHN0eWxlcyA9IGVtYmVkTW9kZS5iOwoJCQkJCQkJCQlyZXR1cm4gQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGVtYmVkV2l0aCwgZmFsc2UsIG9wdHMsIHN0eWxlcywgdW5rZXllZCk7CgkJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQkJdmFyIG9wdHMgPSBlbWJlZE1vZGUuYTsKCQkJCQkJCQkJdmFyIHN0eWxlcyA9IGVtYmVkTW9kZS5iOwoJCQkJCQkJCQlyZXR1cm4gQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGVtYmVkV2l0aCwgdHJ1ZSwgb3B0cywgc3R5bGVzLCB1bmtleWVkKTsKCQkJCQkJCX0KCQkJCQkJfSgpKTsKCQkJCX0KCQkJfSk7CgkJdmFyIGh0bWwgPSBmdW5jdGlvbiAoKSB7CgkJCXN3aXRjaCAobm9kZS4kKSB7CgkJCQljYXNlICdHZW5lcmljJzoKCQkJCQlyZXR1cm4gQTIoY3JlYXRlTm9kZSwgJ2RpdicsIGF0dHJpYnV0ZXMpOwoJCQkJY2FzZSAnTm9kZU5hbWUnOgoJCQkJCXZhciBub2RlTmFtZSA9IG5vZGUuYTsKCQkJCQlyZXR1cm4gQTIoY3JlYXRlTm9kZSwgbm9kZU5hbWUsIGF0dHJpYnV0ZXMpOwoJCQkJZGVmYXVsdDoKCQkJCQl2YXIgbm9kZU5hbWUgPSBub2RlLmE7CgkJCQkJdmFyIGludGVybmFsID0gbm9kZS5iOwoJCQkJCXJldHVybiBBMygKCQkJCQkJJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJG5vZGUsCgkJCQkJCW5vZGVOYW1lLAoJCQkJCQlhdHRyaWJ1dGVzLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoCgkJCQkJCQkJY3JlYXRlTm9kZSwKCQkJCQkJCQlpbnRlcm5hbCwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCSRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkY2xhc3MoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55ICsgKCcgJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNpbmdsZSkpCgkJCQkJCQkJCV0pKQoJCQkJCQkJXSkpOwoJCQl9CgkJfSgpOwoJCXN3aXRjaCAocGFyZW50Q29udGV4dC4kKSB7CgkJCWNhc2UgJ0FzUm93JzoKCQkJCXJldHVybiAoQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckcHJlc2VudCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckd2lkdGhGaWxsLCBoYXMpICYmICghQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckcHJlc2VudCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckd2lkdGhCZXR3ZWVuLCBoYXMpKSkgPyBodG1sIDogKEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHByZXNlbnQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGFsaWduUmlnaHQsIGhhcykgPyBBMigKCQkJCQkkZWxtJGh0bWwkSHRtbCR1LAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRjbGFzcygKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQknICcsCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5zaW5nbGUsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmNvbnRhaW5lciwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29udGVudENlbnRlclksICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFsaWduQ29udGFpbmVyUmlnaHRdKSkpCgkJCQkJCV0pLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJW2h0bWxdKSkgOiAoQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckcHJlc2VudCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckY2VudGVyWCwgaGFzKSA/IEEyKAoJCQkJCSRlbG0kaHRtbCRIdG1sJHMsCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJGNsYXNzKAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCScgJywKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVskbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnksICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNpbmdsZSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29udGFpbmVyLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5jb250ZW50Q2VudGVyWSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25Db250YWluZXJDZW50ZXJYXSkpKQoJCQkJCQldKSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVtodG1sXSkpIDogaHRtbCkpOwoJCQljYXNlICdBc0NvbHVtbic6CgkJCQlyZXR1cm4gKEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHByZXNlbnQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGhlaWdodEZpbGwsIGhhcykgJiYgKCFBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRwcmVzZW50LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRoZWlnaHRCZXR3ZWVuLCBoYXMpKSkgPyBodG1sIDogKEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHByZXNlbnQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGNlbnRlclksIGhhcykgPyBBMigKCQkJCQkkZWxtJGh0bWwkSHRtbCRzLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRjbGFzcygKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQknICcsCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5zaW5nbGUsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmNvbnRhaW5lciwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25Db250YWluZXJDZW50ZXJZXSkpKQoJCQkJCQldKSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVtodG1sXSkpIDogKEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHByZXNlbnQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGFsaWduQm90dG9tLCBoYXMpID8gQTIoCgkJCQkJJGVsbSRodG1sJEh0bWwkdSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCSRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkY2xhc3MoCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQkJJyAnLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWyRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc2luZ2xlLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5jb250YWluZXIsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFsaWduQ29udGFpbmVyQm90dG9tXSkpKQoJCQkJCQldKSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVtodG1sXSkpIDogaHRtbCkpOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIGh0bWw7CgkJfQoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdGV4dEVsZW1lbnRDbGFzc2VzID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55ICsgKCcgJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy50ZXh0ICsgKCcgJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy53aWR0aENvbnRlbnQgKyAoJyAnICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaGVpZ2h0Q29udGVudCkpKSkpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHRleHRFbGVtZW50ID0gZnVuY3Rpb24gKHN0cikgewoJcmV0dXJuIEEyKAoJCSRlbG0kaHRtbCRIdG1sJGRpdiwKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCSRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkY2xhc3MoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHRleHRFbGVtZW50Q2xhc3NlcykKCQkJXSksCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQkkZWxtJGh0bWwkSHRtbCR0ZXh0KHN0cikKCQkJXSkpOwp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHRleHRFbGVtZW50RmlsbENsYXNzZXMgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkgKyAoJyAnICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnRleHQgKyAoJyAnICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLndpZHRoRmlsbCArICgnICcgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5oZWlnaHRGaWxsKSkpKSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdGV4dEVsZW1lbnRGaWxsID0gZnVuY3Rpb24gKHN0cikgewoJcmV0dXJuIEEyKAoJCSRlbG0kaHRtbCRIdG1sJGRpdiwKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCSRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkY2xhc3MoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHRleHRFbGVtZW50RmlsbENsYXNzZXMpCgkJCV0pLAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJJGVsbSRodG1sJEh0bWwkdGV4dChzdHIpCgkJCV0pKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRjcmVhdGVFbGVtZW50ID0gRjMoCglmdW5jdGlvbiAoY29udGV4dCwgY2hpbGRyZW4sIHJlbmRlcmVkKSB7CgkJdmFyIGdhdGhlcktleWVkID0gRjIoCgkJCWZ1bmN0aW9uIChfdjgsIF92OSkgewoJCQkJdmFyIGtleSA9IF92OC5hOwoJCQkJdmFyIGNoaWxkID0gX3Y4LmI7CgkJCQl2YXIgaHRtbHMgPSBfdjkuYTsKCQkJCXZhciBleGlzdGluZ1N0eWxlcyA9IF92OS5iOwoJCQkJc3dpdGNoIChjaGlsZC4kKSB7CgkJCQkJY2FzZSAnVW5zdHlsZWQnOgoJCQkJCQl2YXIgaHRtbCA9IGNoaWxkLmE7CgkJCQkJCXJldHVybiBfVXRpbHNfZXEoY29udGV4dCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFzUGFyYWdyYXBoKSA/IF9VdGlsc19UdXBsZTIoCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCWtleSwKCQkJCQkJCQkJaHRtbChjb250ZXh0KSksCgkJCQkJCQkJaHRtbHMpLAoJCQkJCQkJZXhpc3RpbmdTdHlsZXMpIDogX1V0aWxzX1R1cGxlMigKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJa2V5LAoJCQkJCQkJCQlodG1sKGNvbnRleHQpKSwKCQkJCQkJCQlodG1scyksCgkJCQkJCQlleGlzdGluZ1N0eWxlcyk7CgkJCQkJY2FzZSAnU3R5bGVkJzoKCQkJCQkJdmFyIHN0eWxlZCA9IGNoaWxkLmE7CgkJCQkJCXJldHVybiBfVXRpbHNfZXEoY29udGV4dCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFzUGFyYWdyYXBoKSA/IF9VdGlsc19UdXBsZTIoCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCWtleSwKCQkJCQkJCQkJQTIoc3R5bGVkLmh0bWwsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb1N0eWxlU2hlZXQsIGNvbnRleHQpKSwKCQkJCQkJCQlodG1scyksCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRpc0VtcHR5KGV4aXN0aW5nU3R5bGVzKSA/IHN0eWxlZC5zdHlsZXMgOiBfVXRpbHNfYXAoc3R5bGVkLnN0eWxlcywgZXhpc3RpbmdTdHlsZXMpKSA6IF9VdGlsc19UdXBsZTIoCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCWtleSwKCQkJCQkJCQkJQTIoc3R5bGVkLmh0bWwsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb1N0eWxlU2hlZXQsIGNvbnRleHQpKSwKCQkJCQkJCQlodG1scyksCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRpc0VtcHR5KGV4aXN0aW5nU3R5bGVzKSA/IHN0eWxlZC5zdHlsZXMgOiBfVXRpbHNfYXAoc3R5bGVkLnN0eWxlcywgZXhpc3RpbmdTdHlsZXMpKTsKCQkJCQljYXNlICdUZXh0JzoKCQkJCQkJdmFyIHN0ciA9IGNoaWxkLmE7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQlrZXksCgkJCQkJCQkJCV9VdGlsc19lcShjb250ZXh0LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNFbCkgPyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdGV4dEVsZW1lbnRGaWxsKHN0cikgOiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdGV4dEVsZW1lbnQoc3RyKSksCgkJCQkJCQkJaHRtbHMpLAoJCQkJCQkJZXhpc3RpbmdTdHlsZXMpOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKGh0bWxzLCBleGlzdGluZ1N0eWxlcyk7CgkJCQl9CgkJCX0pOwoJCXZhciBnYXRoZXIgPSBGMigKCQkJZnVuY3Rpb24gKGNoaWxkLCBfdjYpIHsKCQkJCXZhciBodG1scyA9IF92Ni5hOwoJCQkJdmFyIGV4aXN0aW5nU3R5bGVzID0gX3Y2LmI7CgkJCQlzd2l0Y2ggKGNoaWxkLiQpIHsKCQkJCQljYXNlICdVbnN0eWxlZCc6CgkJCQkJCXZhciBodG1sID0gY2hpbGQuYTsKCQkJCQkJcmV0dXJuIF9VdGlsc19lcShjb250ZXh0LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNQYXJhZ3JhcGgpID8gX1V0aWxzX1R1cGxlMigKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJaHRtbChjb250ZXh0KSwKCQkJCQkJCQlodG1scyksCgkJCQkJCQlleGlzdGluZ1N0eWxlcykgOiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQlodG1sKGNvbnRleHQpLAoJCQkJCQkJCWh0bWxzKSwKCQkJCQkJCWV4aXN0aW5nU3R5bGVzKTsKCQkJCQljYXNlICdTdHlsZWQnOgoJCQkJCQl2YXIgc3R5bGVkID0gY2hpbGQuYTsKCQkJCQkJcmV0dXJuIF9VdGlsc19lcShjb250ZXh0LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNQYXJhZ3JhcGgpID8gX1V0aWxzX1R1cGxlMigKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJQTIoc3R5bGVkLmh0bWwsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb1N0eWxlU2hlZXQsIGNvbnRleHQpLAoJCQkJCQkJCWh0bWxzKSwKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGlzRW1wdHkoZXhpc3RpbmdTdHlsZXMpID8gc3R5bGVkLnN0eWxlcyA6IF9VdGlsc19hcChzdHlsZWQuc3R5bGVzLCBleGlzdGluZ1N0eWxlcykpIDogX1V0aWxzX1R1cGxlMigKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJQTIoc3R5bGVkLmh0bWwsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb1N0eWxlU2hlZXQsIGNvbnRleHQpLAoJCQkJCQkJCWh0bWxzKSwKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGlzRW1wdHkoZXhpc3RpbmdTdHlsZXMpID8gc3R5bGVkLnN0eWxlcyA6IF9VdGlsc19hcChzdHlsZWQuc3R5bGVzLCBleGlzdGluZ1N0eWxlcykpOwoJCQkJCWNhc2UgJ1RleHQnOgoJCQkJCQl2YXIgc3RyID0gY2hpbGQuYTsKCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCV9VdGlsc19lcShjb250ZXh0LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNFbCkgPyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdGV4dEVsZW1lbnRGaWxsKHN0cikgOiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdGV4dEVsZW1lbnQoc3RyKSwKCQkJCQkJCQlodG1scyksCgkJCQkJCQlleGlzdGluZ1N0eWxlcyk7CgkJCQkJZGVmYXVsdDoKCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoaHRtbHMsIGV4aXN0aW5nU3R5bGVzKTsKCQkJCX0KCQkJfSk7CgkJaWYgKGNoaWxkcmVuLiQgPT09ICdLZXllZCcpIHsKCQkJdmFyIGtleWVkQ2hpbGRyZW4gPSBjaGlsZHJlbi5hOwoJCQl2YXIgX3YxID0gQTMoCgkJCQkkZWxtJGNvcmUkTGlzdCRmb2xkciwKCQkJCWdhdGhlcktleWVkLAoJCQkJX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIF9MaXN0X05pbCksCgkJCQlrZXllZENoaWxkcmVuKTsKCQkJdmFyIGtleWVkID0gX3YxLmE7CgkJCXZhciBzdHlsZXMgPSBfdjEuYjsKCQkJdmFyIG5ld1N0eWxlcyA9ICRlbG0kY29yZSRMaXN0JGlzRW1wdHkoc3R5bGVzKSA/IHJlbmRlcmVkLnN0eWxlcyA6IF9VdGlsc19hcChyZW5kZXJlZC5zdHlsZXMsIHN0eWxlcyk7CgkJCWlmICghbmV3U3R5bGVzLmIpIHsKCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVW5zdHlsZWQoCgkJCQkJQTUoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmaW5hbGl6ZU5vZGUsCgkJCQkJCXJlbmRlcmVkLmhhcywKCQkJCQkJcmVuZGVyZWQubm9kZSwKCQkJCQkJcmVuZGVyZWQuYXR0cmlidXRlcywKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEtleWVkKAoJCQkJCQkJQTMoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFkZEtleWVkQ2hpbGRyZW4sICduZWFyYnktZWxlbWVudC1wbHMnLCBrZXllZCwgcmVuZGVyZWQuY2hpbGRyZW4pKSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE5vU3R5bGVTaGVldCkpOwoJCQl9IGVsc2UgewoJCQkJdmFyIGFsbFN0eWxlcyA9IG5ld1N0eWxlczsKCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGVkKAoJCQkJCXsKCQkJCQkJaHRtbDogQTQoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZmluYWxpemVOb2RlLAoJCQkJCQkJcmVuZGVyZWQuaGFzLAoJCQkJCQkJcmVuZGVyZWQubm9kZSwKCQkJCQkJCXJlbmRlcmVkLmF0dHJpYnV0ZXMsCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkS2V5ZWQoCgkJCQkJCQkJQTMoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFkZEtleWVkQ2hpbGRyZW4sICduZWFyYnktZWxlbWVudC1wbHMnLCBrZXllZCwgcmVuZGVyZWQuY2hpbGRyZW4pKSksCgkJCQkJCXN0eWxlczogYWxsU3R5bGVzCgkJCQkJfSk7CgkJCX0KCQl9IGVsc2UgewoJCQl2YXIgdW5rZXllZENoaWxkcmVuID0gY2hpbGRyZW4uYTsKCQkJdmFyIF92MyA9IEEzKAoJCQkJJGVsbSRjb3JlJExpc3QkZm9sZHIsCgkJCQlnYXRoZXIsCgkJCQlfVXRpbHNfVHVwbGUyKF9MaXN0X05pbCwgX0xpc3RfTmlsKSwKCQkJCXVua2V5ZWRDaGlsZHJlbik7CgkJCXZhciB1bmtleWVkID0gX3YzLmE7CgkJCXZhciBzdHlsZXMgPSBfdjMuYjsKCQkJdmFyIG5ld1N0eWxlcyA9ICRlbG0kY29yZSRMaXN0JGlzRW1wdHkoc3R5bGVzKSA/IHJlbmRlcmVkLnN0eWxlcyA6IF9VdGlsc19hcChyZW5kZXJlZC5zdHlsZXMsIHN0eWxlcyk7CgkJCWlmICghbmV3U3R5bGVzLmIpIHsKCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVW5zdHlsZWQoCgkJCQkJQTUoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmaW5hbGl6ZU5vZGUsCgkJCQkJCXJlbmRlcmVkLmhhcywKCQkJCQkJcmVuZGVyZWQubm9kZSwKCQkJCQkJcmVuZGVyZWQuYXR0cmlidXRlcywKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVua2V5ZWQoCgkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYWRkQ2hpbGRyZW4sIHVua2V5ZWQsIHJlbmRlcmVkLmNoaWxkcmVuKSksCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb1N0eWxlU2hlZXQpKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBhbGxTdHlsZXMgPSBuZXdTdHlsZXM7CgkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlZCgKCQkJCQl7CgkJCQkJCWh0bWw6IEE0KAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZpbmFsaXplTm9kZSwKCQkJCQkJCXJlbmRlcmVkLmhhcywKCQkJCQkJCXJlbmRlcmVkLm5vZGUsCgkJCQkJCQlyZW5kZXJlZC5hdHRyaWJ1dGVzLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVua2V5ZWQoCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFkZENoaWxkcmVuLCB1bmtleWVkLCByZW5kZXJlZC5jaGlsZHJlbikpKSwKCQkJCQkJc3R5bGVzOiBhbGxTdHlsZXMKCQkJCQl9KTsKCQkJfQoJCX0KCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFNpbmdsZSA9IEYzKAoJZnVuY3Rpb24gKGEsIGIsIGMpIHsKCQlyZXR1cm4geyQ6ICdTaW5nbGUnLCBhOiBhLCBiOiBiLCBjOiBjfTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFRyYW5zZm9ybSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUcmFuc2Zvcm0nLCBhOiBhfTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJEZpZWxkID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0ZpZWxkJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGFkZCA9IEYyKAoJZnVuY3Rpb24gKG15RmxhZywgX3YwKSB7CgkJdmFyIG9uZSA9IF92MC5hOwoJCXZhciB0d28gPSBfdjAuYjsKCQlpZiAobXlGbGFnLiQgPT09ICdGbGFnJykgewoJCQl2YXIgZmlyc3QgPSBteUZsYWcuYTsKCQkJcmV0dXJuIEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJEZpZWxkLCBmaXJzdCB8IG9uZSwgdHdvKTsKCQl9IGVsc2UgewoJCQl2YXIgc2Vjb25kID0gbXlGbGFnLmE7CgkJCXJldHVybiBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRGaWVsZCwgb25lLCBzZWNvbmQgfCB0d28pOwoJCX0KCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJENoaWxkcmVuQmVoaW5kID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0NoaWxkcmVuQmVoaW5kJywgYTogYX07Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ2hpbGRyZW5CZWhpbmRBbmRJbkZyb250ID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0NoaWxkcmVuQmVoaW5kQW5kSW5Gcm9udCcsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ2hpbGRyZW5JbkZyb250ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0NoaWxkcmVuSW5Gcm9udCcsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJG5lYXJieUVsZW1lbnQgPSBGMigKCWZ1bmN0aW9uIChsb2NhdGlvbiwgZWxlbSkgewoJCXJldHVybiBBMigKCQkJJGVsbSRodG1sJEh0bWwkZGl2LAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRjbGFzcygKCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJCXN3aXRjaCAobG9jYXRpb24uJCkgewoJCQkJCQkJY2FzZSAnQWJvdmUnOgoJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCQknICcsCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVskbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5uZWFyYnksICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNpbmdsZSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWJvdmVdKSk7CgkJCQkJCQljYXNlICdCZWxvdyc6CgkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQkJCScgJywKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWyRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLm5lYXJieSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc2luZ2xlLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5iZWxvd10pKTsKCQkJCQkJCWNhc2UgJ09uUmlnaHQnOgoJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCQknICcsCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVskbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5uZWFyYnksICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNpbmdsZSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMub25SaWdodF0pKTsKCQkJCQkJCWNhc2UgJ09uTGVmdCc6CgkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQkJCScgJywKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWyRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLm5lYXJieSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc2luZ2xlLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5vbkxlZnRdKSk7CgkJCQkJCQljYXNlICdJbkZyb250JzoKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQkJJyAnLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMubmVhcmJ5LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5zaW5nbGUsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmluRnJvbnRdKSk7CgkJCQkJCQlkZWZhdWx0OgoJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCQknICcsCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVskbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5uZWFyYnksICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNpbmdsZSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYmVoaW5kXSkpOwoJCQkJCQl9CgkJCQkJfSgpKQoJCQkJXSksCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJc3dpdGNoIChlbGVtLiQpIHsKCQkJCQkJY2FzZSAnRW1wdHknOgoJCQkJCQkJcmV0dXJuICRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSR0ZXh0KCcnKTsKCQkJCQkJY2FzZSAnVGV4dCc6CgkJCQkJCQl2YXIgc3RyID0gZWxlbS5hOwoJCQkJCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCR0ZXh0RWxlbWVudChzdHIpOwoJCQkJCQljYXNlICdVbnN0eWxlZCc6CgkJCQkJCQl2YXIgaHRtbCA9IGVsZW0uYTsKCQkJCQkJCXJldHVybiBodG1sKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhc0VsKTsKCQkJCQkJZGVmYXVsdDoKCQkJCQkJCXZhciBzdHlsZWQgPSBlbGVtLmE7CgkJCQkJCQlyZXR1cm4gQTIoc3R5bGVkLmh0bWwsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb1N0eWxlU2hlZXQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhc0VsKTsKCQkJCQl9CgkJCQl9KCkKCQkJCV0pKTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFkZE5lYXJieUVsZW1lbnQgPSBGMygKCWZ1bmN0aW9uIChsb2NhdGlvbiwgZWxlbSwgZXhpc3RpbmcpIHsKCQl2YXIgbmVhcmJ5ID0gQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJG5lYXJieUVsZW1lbnQsIGxvY2F0aW9uLCBlbGVtKTsKCQlzd2l0Y2ggKGV4aXN0aW5nLiQpIHsKCQkJY2FzZSAnTm9OZWFyYnlDaGlsZHJlbic6CgkJCQlpZiAobG9jYXRpb24uJCA9PT0gJ0JlaGluZCcpIHsKCQkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJENoaWxkcmVuQmVoaW5kKAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbbmVhcmJ5XSkpOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJENoaWxkcmVuSW5Gcm9udCgKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJW25lYXJieV0pKTsKCQkJCX0KCQkJY2FzZSAnQ2hpbGRyZW5CZWhpbmQnOgoJCQkJdmFyIGV4aXN0aW5nQmVoaW5kID0gZXhpc3RpbmcuYTsKCQkJCWlmIChsb2NhdGlvbi4kID09PSAnQmVoaW5kJykgewoJCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ2hpbGRyZW5CZWhpbmQoCgkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIG5lYXJieSwgZXhpc3RpbmdCZWhpbmQpKTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ2hpbGRyZW5CZWhpbmRBbmRJbkZyb250LAoJCQkJCQlleGlzdGluZ0JlaGluZCwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJW25lYXJieV0pKTsKCQkJCX0KCQkJY2FzZSAnQ2hpbGRyZW5JbkZyb250JzoKCQkJCXZhciBleGlzdGluZ0luRnJvbnQgPSBleGlzdGluZy5hOwoJCQkJaWYgKGxvY2F0aW9uLiQgPT09ICdCZWhpbmQnKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ2hpbGRyZW5CZWhpbmRBbmRJbkZyb250LAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbbmVhcmJ5XSksCgkJCQkJCWV4aXN0aW5nSW5Gcm9udCk7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ2hpbGRyZW5JbkZyb250KAoJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBuZWFyYnksIGV4aXN0aW5nSW5Gcm9udCkpOwoJCQkJfQoJCQlkZWZhdWx0OgoJCQkJdmFyIGV4aXN0aW5nQmVoaW5kID0gZXhpc3RpbmcuYTsKCQkJCXZhciBleGlzdGluZ0luRnJvbnQgPSBleGlzdGluZy5iOwoJCQkJaWYgKGxvY2F0aW9uLiQgPT09ICdCZWhpbmQnKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ2hpbGRyZW5CZWhpbmRBbmRJbkZyb250LAoJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBuZWFyYnksIGV4aXN0aW5nQmVoaW5kKSwKCQkJCQkJZXhpc3RpbmdJbkZyb250KTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ2hpbGRyZW5CZWhpbmRBbmRJbkZyb250LAoJCQkJCQlleGlzdGluZ0JlaGluZCwKCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgbmVhcmJ5LCBleGlzdGluZ0luRnJvbnQpKTsKCQkJCX0KCQl9Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRFbWJlZGRlZCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdFbWJlZGRlZCcsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTm9kZU5hbWUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnTm9kZU5hbWUnLCBhOiBhfTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhZGROb2RlTmFtZSA9IEYyKAoJZnVuY3Rpb24gKG5ld05vZGUsIG9sZCkgewoJCXN3aXRjaCAob2xkLiQpIHsKCQkJY2FzZSAnR2VuZXJpYyc6CgkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE5vZGVOYW1lKG5ld05vZGUpOwoJCQljYXNlICdOb2RlTmFtZSc6CgkJCQl2YXIgbmFtZSA9IG9sZC5hOwoJCQkJcmV0dXJuIEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRFbWJlZGRlZCwgbmFtZSwgbmV3Tm9kZSk7CgkJCWRlZmF1bHQ6CgkJCQl2YXIgeCA9IG9sZC5hOwoJCQkJdmFyIHkgPSBvbGQuYjsKCQkJCXJldHVybiBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkRW1iZWRkZWQsIHgsIHkpOwoJCX0KCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFsaWduWE5hbWUgPSBmdW5jdGlvbiAoYWxpZ24pIHsKCXN3aXRjaCAoYWxpZ24uJCkgewoJCWNhc2UgJ0xlZnQnOgoJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25lZEhvcml6b250YWxseSArICgnICcgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkxlZnQpOwoJCWNhc2UgJ1JpZ2h0JzoKCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFsaWduZWRIb3Jpem9udGFsbHkgKyAoJyAnICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25SaWdodCk7CgkJZGVmYXVsdDoKCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFsaWduZWRIb3Jpem9udGFsbHkgKyAoJyAnICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25DZW50ZXJYKTsKCX0KfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhbGlnbllOYW1lID0gZnVuY3Rpb24gKGFsaWduKSB7Cglzd2l0Y2ggKGFsaWduLiQpIHsKCQljYXNlICdUb3AnOgoJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25lZFZlcnRpY2FsbHkgKyAoJyAnICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYWxpZ25Ub3ApOwoJCWNhc2UgJ0JvdHRvbSc6CgkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbmVkVmVydGljYWxseSArICgnICcgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbGlnbkJvdHRvbSk7CgkJZGVmYXVsdDoKCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFsaWduZWRWZXJ0aWNhbGx5ICsgKCcgJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFsaWduQ2VudGVyWSk7Cgl9Cn07CnZhciAkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kYXR0cmlidXRlID0gRjIoCglmdW5jdGlvbiAoa2V5LCB2YWx1ZSkgewoJCXJldHVybiBBMigKCQkJX1ZpcnR1YWxEb21fYXR0cmlidXRlLAoJCQlfVmlydHVhbERvbV9ub09uT3JGb3JtQWN0aW9uKGtleSksCgkJCV9WaXJ0dWFsRG9tX25vSmF2YVNjcmlwdE9ySHRtbFVyaSh2YWx1ZSkpOwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkRnVsbFRyYW5zZm9ybSA9IEY0KAoJZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsKCQlyZXR1cm4geyQ6ICdGdWxsVHJhbnNmb3JtJywgYTogYSwgYjogYiwgYzogYywgZDogZH07Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRNb3ZlZCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdNb3ZlZCcsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGNvbXBvc2VUcmFuc2Zvcm1hdGlvbiA9IEYyKAoJZnVuY3Rpb24gKHRyYW5zZm9ybSwgY29tcG9uZW50KSB7CgkJc3dpdGNoICh0cmFuc2Zvcm0uJCkgewoJCQljYXNlICdVbnRyYW5zZm9ybWVkJzoKCQkJCXN3aXRjaCAoY29tcG9uZW50LiQpIHsKCQkJCQljYXNlICdNb3ZlWCc6CgkJCQkJCXZhciB4ID0gY29tcG9uZW50LmE7CgkJCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTW92ZWQoCgkJCQkJCQlfVXRpbHNfVHVwbGUzKHgsIDAsIDApKTsKCQkJCQljYXNlICdNb3ZlWSc6CgkJCQkJCXZhciB5ID0gY29tcG9uZW50LmE7CgkJCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTW92ZWQoCgkJCQkJCQlfVXRpbHNfVHVwbGUzKDAsIHksIDApKTsKCQkJCQljYXNlICdNb3ZlWic6CgkJCQkJCXZhciB6ID0gY29tcG9uZW50LmE7CgkJCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTW92ZWQoCgkJCQkJCQlfVXRpbHNfVHVwbGUzKDAsIDAsIHopKTsKCQkJCQljYXNlICdNb3ZlWFlaJzoKCQkJCQkJdmFyIHh5eiA9IGNvbXBvbmVudC5hOwoJCQkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE1vdmVkKHh5eik7CgkJCQkJY2FzZSAnUm90YXRlJzoKCQkJCQkJdmFyIHh5eiA9IGNvbXBvbmVudC5hOwoJCQkJCQl2YXIgYW5nbGUgPSBjb21wb25lbnQuYjsKCQkJCQkJcmV0dXJuIEE0KAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEZ1bGxUcmFuc2Zvcm0sCgkJCQkJCQlfVXRpbHNfVHVwbGUzKDAsIDAsIDApLAoJCQkJCQkJX1V0aWxzX1R1cGxlMygxLCAxLCAxKSwKCQkJCQkJCXh5eiwKCQkJCQkJCWFuZ2xlKTsKCQkJCQlkZWZhdWx0OgoJCQkJCQl2YXIgeHl6ID0gY29tcG9uZW50LmE7CgkJCQkJCXJldHVybiBBNCgKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRGdWxsVHJhbnNmb3JtLAoJCQkJCQkJX1V0aWxzX1R1cGxlMygwLCAwLCAwKSwKCQkJCQkJCXh5eiwKCQkJCQkJCV9VdGlsc19UdXBsZTMoMCwgMCwgMSksCgkJCQkJCQkwKTsKCQkJCX0KCQkJY2FzZSAnTW92ZWQnOgoJCQkJdmFyIG1vdmVkID0gdHJhbnNmb3JtLmE7CgkJCQl2YXIgeCA9IG1vdmVkLmE7CgkJCQl2YXIgeSA9IG1vdmVkLmI7CgkJCQl2YXIgeiA9IG1vdmVkLmM7CgkJCQlzd2l0Y2ggKGNvbXBvbmVudC4kKSB7CgkJCQkJY2FzZSAnTW92ZVgnOgoJCQkJCQl2YXIgbmV3WCA9IGNvbXBvbmVudC5hOwoJCQkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE1vdmVkKAoJCQkJCQkJX1V0aWxzX1R1cGxlMyhuZXdYLCB5LCB6KSk7CgkJCQkJY2FzZSAnTW92ZVknOgoJCQkJCQl2YXIgbmV3WSA9IGNvbXBvbmVudC5hOwoJCQkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE1vdmVkKAoJCQkJCQkJX1V0aWxzX1R1cGxlMyh4LCBuZXdZLCB6KSk7CgkJCQkJY2FzZSAnTW92ZVonOgoJCQkJCQl2YXIgbmV3WiA9IGNvbXBvbmVudC5hOwoJCQkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE1vdmVkKAoJCQkJCQkJX1V0aWxzX1R1cGxlMyh4LCB5LCBuZXdaKSk7CgkJCQkJY2FzZSAnTW92ZVhZWic6CgkJCQkJCXZhciB4eXogPSBjb21wb25lbnQuYTsKCQkJCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRNb3ZlZCh4eXopOwoJCQkJCWNhc2UgJ1JvdGF0ZSc6CgkJCQkJCXZhciB4eXogPSBjb21wb25lbnQuYTsKCQkJCQkJdmFyIGFuZ2xlID0gY29tcG9uZW50LmI7CgkJCQkJCXJldHVybiBBNCgKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRGdWxsVHJhbnNmb3JtLAoJCQkJCQkJbW92ZWQsCgkJCQkJCQlfVXRpbHNfVHVwbGUzKDEsIDEsIDEpLAoJCQkJCQkJeHl6LAoJCQkJCQkJYW5nbGUpOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXZhciBzY2FsZSA9IGNvbXBvbmVudC5hOwoJCQkJCQlyZXR1cm4gQTQoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkRnVsbFRyYW5zZm9ybSwKCQkJCQkJCW1vdmVkLAoJCQkJCQkJc2NhbGUsCgkJCQkJCQlfVXRpbHNfVHVwbGUzKDAsIDAsIDEpLAoJCQkJCQkJMCk7CgkJCQl9CgkJCWRlZmF1bHQ6CgkJCQl2YXIgbW92ZWQgPSB0cmFuc2Zvcm0uYTsKCQkJCXZhciB4ID0gbW92ZWQuYTsKCQkJCXZhciB5ID0gbW92ZWQuYjsKCQkJCXZhciB6ID0gbW92ZWQuYzsKCQkJCXZhciBzY2FsZWQgPSB0cmFuc2Zvcm0uYjsKCQkJCXZhciBvcmlnaW4gPSB0cmFuc2Zvcm0uYzsKCQkJCXZhciBhbmdsZSA9IHRyYW5zZm9ybS5kOwoJCQkJc3dpdGNoIChjb21wb25lbnQuJCkgewoJCQkJCWNhc2UgJ01vdmVYJzoKCQkJCQkJdmFyIG5ld1ggPSBjb21wb25lbnQuYTsKCQkJCQkJcmV0dXJuIEE0KAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEZ1bGxUcmFuc2Zvcm0sCgkJCQkJCQlfVXRpbHNfVHVwbGUzKG5ld1gsIHksIHopLAoJCQkJCQkJc2NhbGVkLAoJCQkJCQkJb3JpZ2luLAoJCQkJCQkJYW5nbGUpOwoJCQkJCWNhc2UgJ01vdmVZJzoKCQkJCQkJdmFyIG5ld1kgPSBjb21wb25lbnQuYTsKCQkJCQkJcmV0dXJuIEE0KAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEZ1bGxUcmFuc2Zvcm0sCgkJCQkJCQlfVXRpbHNfVHVwbGUzKHgsIG5ld1ksIHopLAoJCQkJCQkJc2NhbGVkLAoJCQkJCQkJb3JpZ2luLAoJCQkJCQkJYW5nbGUpOwoJCQkJCWNhc2UgJ01vdmVaJzoKCQkJCQkJdmFyIG5ld1ogPSBjb21wb25lbnQuYTsKCQkJCQkJcmV0dXJuIEE0KAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEZ1bGxUcmFuc2Zvcm0sCgkJCQkJCQlfVXRpbHNfVHVwbGUzKHgsIHksIG5ld1opLAoJCQkJCQkJc2NhbGVkLAoJCQkJCQkJb3JpZ2luLAoJCQkJCQkJYW5nbGUpOwoJCQkJCWNhc2UgJ01vdmVYWVonOgoJCQkJCQl2YXIgbmV3TW92ZSA9IGNvbXBvbmVudC5hOwoJCQkJCQlyZXR1cm4gQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEZ1bGxUcmFuc2Zvcm0sIG5ld01vdmUsIHNjYWxlZCwgb3JpZ2luLCBhbmdsZSk7CgkJCQkJY2FzZSAnUm90YXRlJzoKCQkJCQkJdmFyIG5ld09yaWdpbiA9IGNvbXBvbmVudC5hOwoJCQkJCQl2YXIgbmV3QW5nbGUgPSBjb21wb25lbnQuYjsKCQkJCQkJcmV0dXJuIEE0KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRGdWxsVHJhbnNmb3JtLCBtb3ZlZCwgc2NhbGVkLCBuZXdPcmlnaW4sIG5ld0FuZ2xlKTsKCQkJCQlkZWZhdWx0OgoJCQkJCQl2YXIgbmV3U2NhbGUgPSBjb21wb25lbnQuYTsKCQkJCQkJcmV0dXJuIEE0KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRGdWxsVHJhbnNmb3JtLCBtb3ZlZCwgbmV3U2NhbGUsIG9yaWdpbiwgYW5nbGUpOwoJCQkJfQoJCX0KCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckaGVpZ2h0ID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZmxhZyg3KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGhlaWdodENvbnRlbnQgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmbGFnKDM2KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJG1lcmdlID0gRjIoCglmdW5jdGlvbiAoX3YwLCBfdjEpIHsKCQl2YXIgb25lID0gX3YwLmE7CgkJdmFyIHR3byA9IF92MC5iOwoJCXZhciB0aHJlZSA9IF92MS5hOwoJCXZhciBmb3VyID0gX3YxLmI7CgkJcmV0dXJuIEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJEZpZWxkLCBvbmUgfCB0aHJlZSwgdHdvIHwgZm91cik7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJG5vbmUgPSBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRGaWVsZCwgMCwgMCk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVySGVpZ2h0ID0gZnVuY3Rpb24gKGgpIHsKCXN3aXRjaCAoaC4kKSB7CgkJY2FzZSAnUHgnOgoJCQl2YXIgcHggPSBoLmE7CgkJCXZhciB2YWwgPSAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocHgpOwoJCQl2YXIgbmFtZSA9ICdoZWlnaHQtcHgtJyArIHZhbDsKCQkJcmV0dXJuIF9VdGlsc19UdXBsZTMoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRub25lLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaGVpZ2h0RXhhY3QgKyAoJyAnICsgbmFtZSksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU2luZ2xlLCBuYW1lLCAnaGVpZ2h0JywgdmFsICsgJ3B4JykKCQkJCQldKSk7CgkJY2FzZSAnQ29udGVudCc6CgkJCXJldHVybiBfVXRpbHNfVHVwbGUzKAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRoZWlnaHRDb250ZW50LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRub25lKSwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmhlaWdodENvbnRlbnQsCgkJCQlfTGlzdF9OaWwpOwoJCWNhc2UgJ0ZpbGwnOgoJCQl2YXIgcG9ydGlvbiA9IGguYTsKCQkJcmV0dXJuIChwb3J0aW9uID09PSAxKSA/IF9VdGlsc19UdXBsZTMoCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGhlaWdodEZpbGwsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJG5vbmUpLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaGVpZ2h0RmlsbCwKCQkJCV9MaXN0X05pbCkgOiBfVXRpbHNfVHVwbGUzKAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRoZWlnaHRGaWxsLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRub25lKSwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmhlaWdodEZpbGxQb3J0aW9uICsgKCcgaGVpZ2h0LWZpbGwtJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludChwb3J0aW9uKSksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMygKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFNpbmdsZSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55ICsgKCcuJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5jb2x1bW4gKyAoJyA+ICcgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkZG90KAoJCQkJCQkJJ2hlaWdodC1maWxsLScgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9ydGlvbikpKSkpLAoJCQkJCQknZmxleC1ncm93JywKCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHBvcnRpb24gKiAxMDAwMDApKQoJCQkJCV0pKTsKCQljYXNlICdNaW4nOgoJCQl2YXIgbWluU2l6ZSA9IGguYTsKCQkJdmFyIGxlbiA9IGguYjsKCQkJdmFyIGNscyA9ICdtaW4taGVpZ2h0LScgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQobWluU2l6ZSk7CgkJCXZhciBzdHlsZSA9IEEzKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFNpbmdsZSwKCQkJCWNscywKCQkJCSdtaW4taGVpZ2h0JywKCQkJCSRlbG0kY29yZSRTdHJpbmckZnJvbUludChtaW5TaXplKSArICdweCAhaW1wb3J0YW50Jyk7CgkJCXZhciBfdjEgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVySGVpZ2h0KGxlbik7CgkJCXZhciBuZXdGbGFnID0gX3YxLmE7CgkJCXZhciBuZXdBdHRycyA9IF92MS5iOwoJCQl2YXIgbmV3U3R5bGUgPSBfdjEuYzsKCQkJcmV0dXJuIF9VdGlsc19UdXBsZTMoCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGhlaWdodEJldHdlZW4sIG5ld0ZsYWcpLAoJCQkJY2xzICsgKCcgJyArIG5ld0F0dHJzKSwKCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHN0eWxlLCBuZXdTdHlsZSkpOwoJCWRlZmF1bHQ6CgkJCXZhciBtYXhTaXplID0gaC5hOwoJCQl2YXIgbGVuID0gaC5iOwoJCQl2YXIgY2xzID0gJ21heC1oZWlnaHQtJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludChtYXhTaXplKTsKCQkJdmFyIHN0eWxlID0gQTMoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU2luZ2xlLAoJCQkJY2xzLAoJCQkJJ21heC1oZWlnaHQnLAoJCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KG1heFNpemUpICsgJ3B4Jyk7CgkJCXZhciBfdjIgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVySGVpZ2h0KGxlbik7CgkJCXZhciBuZXdGbGFnID0gX3YyLmE7CgkJCXZhciBuZXdBdHRycyA9IF92Mi5iOwoJCQl2YXIgbmV3U3R5bGUgPSBfdjIuYzsKCQkJcmV0dXJuIF9VdGlsc19UdXBsZTMoCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGhlaWdodEJldHdlZW4sIG5ld0ZsYWcpLAoJCQkJY2xzICsgKCcgJyArIG5ld0F0dHJzKSwKCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHN0eWxlLCBuZXdTdHlsZSkpOwoJfQp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckd2lkdGhDb250ZW50ID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZmxhZygzOCk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyV2lkdGggPSBmdW5jdGlvbiAodykgewoJc3dpdGNoICh3LiQpIHsKCQljYXNlICdQeCc6CgkJCXZhciBweCA9IHcuYTsKCQkJcmV0dXJuIF9VdGlsc19UdXBsZTMoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRub25lLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMud2lkdGhFeGFjdCArICgnIHdpZHRoLXB4LScgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocHgpKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEzKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU2luZ2xlLAoJCQkJCQknd2lkdGgtcHgtJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludChweCksCgkJCQkJCSd3aWR0aCcsCgkJCQkJCSRlbG0kY29yZSRTdHJpbmckZnJvbUludChweCkgKyAncHgnKQoJCQkJCV0pKTsKCQljYXNlICdDb250ZW50JzoKCQkJcmV0dXJuIF9VdGlsc19UdXBsZTMoCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHdpZHRoQ29udGVudCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckbm9uZSksCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy53aWR0aENvbnRlbnQsCgkJCQlfTGlzdF9OaWwpOwoJCWNhc2UgJ0ZpbGwnOgoJCQl2YXIgcG9ydGlvbiA9IHcuYTsKCQkJcmV0dXJuIChwb3J0aW9uID09PSAxKSA/IF9VdGlsc19UdXBsZTMoCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHdpZHRoRmlsbCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckbm9uZSksCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy53aWR0aEZpbGwsCgkJCQlfTGlzdF9OaWwpIDogX1V0aWxzX1R1cGxlMygKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGFkZCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckd2lkdGhGaWxsLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRub25lKSwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLndpZHRoRmlsbFBvcnRpb24gKyAoJyB3aWR0aC1maWxsLScgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9ydGlvbikpLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTMoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTaW5nbGUsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSArICgnLicgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMucm93ICsgKCcgPiAnICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgKCQkJCQkJCSd3aWR0aC1maWxsLScgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9ydGlvbikpKSkpLAoJCQkJCQknZmxleC1ncm93JywKCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHBvcnRpb24gKiAxMDAwMDApKQoJCQkJCV0pKTsKCQljYXNlICdNaW4nOgoJCQl2YXIgbWluU2l6ZSA9IHcuYTsKCQkJdmFyIGxlbiA9IHcuYjsKCQkJdmFyIGNscyA9ICdtaW4td2lkdGgtJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludChtaW5TaXplKTsKCQkJdmFyIHN0eWxlID0gQTMoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU2luZ2xlLAoJCQkJY2xzLAoJCQkJJ21pbi13aWR0aCcsCgkJCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQobWluU2l6ZSkgKyAncHgnKTsKCQkJdmFyIF92MSA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJXaWR0aChsZW4pOwoJCQl2YXIgbmV3RmxhZyA9IF92MS5hOwoJCQl2YXIgbmV3QXR0cnMgPSBfdjEuYjsKCQkJdmFyIG5ld1N0eWxlID0gX3YxLmM7CgkJCXJldHVybiBfVXRpbHNfVHVwbGUzKAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR3aWR0aEJldHdlZW4sIG5ld0ZsYWcpLAoJCQkJY2xzICsgKCcgJyArIG5ld0F0dHJzKSwKCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHN0eWxlLCBuZXdTdHlsZSkpOwoJCWRlZmF1bHQ6CgkJCXZhciBtYXhTaXplID0gdy5hOwoJCQl2YXIgbGVuID0gdy5iOwoJCQl2YXIgY2xzID0gJ21heC13aWR0aC0nICsgJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KG1heFNpemUpOwoJCQl2YXIgc3R5bGUgPSBBMygKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTaW5nbGUsCgkJCQljbHMsCgkJCQknbWF4LXdpZHRoJywKCQkJCSRlbG0kY29yZSRTdHJpbmckZnJvbUludChtYXhTaXplKSArICdweCcpOwoJCQl2YXIgX3YyID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlcldpZHRoKGxlbik7CgkJCXZhciBuZXdGbGFnID0gX3YyLmE7CgkJCXZhciBuZXdBdHRycyA9IF92Mi5iOwoJCQl2YXIgbmV3U3R5bGUgPSBfdjIuYzsKCQkJcmV0dXJuIF9VdGlsc19UdXBsZTMoCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHdpZHRoQmV0d2VlbiwgbmV3RmxhZyksCgkJCQljbHMgKyAoJyAnICsgbmV3QXR0cnMpLAoJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgc3R5bGUsIG5ld1N0eWxlKSk7Cgl9Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRib3JkZXJXaWR0aCA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGZsYWcoMjcpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHNraXBwYWJsZSA9IEYyKAoJZnVuY3Rpb24gKGZsYWcsIHN0eWxlKSB7CgkJaWYgKF9VdGlsc19lcShmbGFnLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRib3JkZXJXaWR0aCkpIHsKCQkJaWYgKHN0eWxlLiQgPT09ICdTaW5nbGUnKSB7CgkJCQl2YXIgdmFsID0gc3R5bGUuYzsKCQkJCXN3aXRjaCAodmFsKSB7CgkJCQkJY2FzZSAnMHB4JzoKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJY2FzZSAnMXB4JzoKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJY2FzZSAnMnB4JzoKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJY2FzZSAnM3B4JzoKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJY2FzZSAnNHB4JzoKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJY2FzZSAnNXB4JzoKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJY2FzZSAnNnB4JzoKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJZGVmYXVsdDoKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJfSBlbHNlIHsKCQkJc3dpdGNoIChzdHlsZS4kKSB7CgkJCQljYXNlICdGb250U2l6ZSc6CgkJCQkJdmFyIGkgPSBzdHlsZS5hOwoJCQkJCXJldHVybiAoaSA+PSA4KSAmJiAoaSA8PSAzMik7CgkJCQljYXNlICdQYWRkaW5nU3R5bGUnOgoJCQkJCXZhciBuYW1lID0gc3R5bGUuYTsKCQkJCQl2YXIgdCA9IHN0eWxlLmI7CgkJCQkJdmFyIHIgPSBzdHlsZS5jOwoJCQkJCXZhciBiID0gc3R5bGUuZDsKCQkJCQl2YXIgbCA9IHN0eWxlLmU7CgkJCQkJcmV0dXJuIF9VdGlsc19lcSh0LCBiKSAmJiAoX1V0aWxzX2VxKHQsIHIpICYmIChfVXRpbHNfZXEodCwgbCkgJiYgKCh0ID49IDApICYmICh0IDw9IDI0KSkpKTsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJfQoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR3aWR0aCA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGZsYWcoNik7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR4QWxpZ24gPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmbGFnKDMwKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHlBbGlnbiA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGZsYWcoMjkpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGdhdGhlckF0dHJSZWN1cnNpdmUgPSBGOCgKCWZ1bmN0aW9uIChjbGFzc2VzLCBub2RlLCBoYXMsIHRyYW5zZm9ybSwgc3R5bGVzLCBhdHRycywgY2hpbGRyZW4sIGVsZW1lbnRBdHRycykgewoJCWdhdGhlckF0dHJSZWN1cnNpdmU6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFlbGVtZW50QXR0cnMuYikgewoJCQkJdmFyIF92MSA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCR0cmFuc2Zvcm1DbGFzcyh0cmFuc2Zvcm0pOwoJCQkJaWYgKF92MS4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQlhdHRyaWJ1dGVzOiBBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJGNsYXNzKGNsYXNzZXMpLAoJCQkJCQkJYXR0cnMpLAoJCQkJCQljaGlsZHJlbjogY2hpbGRyZW4sCgkJCQkJCWhhczogaGFzLAoJCQkJCQlub2RlOiBub2RlLAoJCQkJCQlzdHlsZXM6IHN0eWxlcwoJCQkJCX07CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfY2xhc3MgPSBfdjEuYTsKCQkJCQlyZXR1cm4gewoJCQkJCQlhdHRyaWJ1dGVzOiBBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJGNsYXNzKGNsYXNzZXMgKyAoJyAnICsgX2NsYXNzKSksCgkJCQkJCQlhdHRycyksCgkJCQkJCWNoaWxkcmVuOiBjaGlsZHJlbiwKCQkJCQkJaGFzOiBoYXMsCgkJCQkJCW5vZGU6IG5vZGUsCgkJCQkJCXN0eWxlczogQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFRyYW5zZm9ybSh0cmFuc2Zvcm0pLAoJCQkJCQkJc3R5bGVzKQoJCQkJCX07CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQl2YXIgYXR0cmlidXRlID0gZWxlbWVudEF0dHJzLmE7CgkJCQl2YXIgcmVtYWluaW5nID0gZWxlbWVudEF0dHJzLmI7CgkJCQlzd2l0Y2ggKGF0dHJpYnV0ZS4kKSB7CgkJCQkJY2FzZSAnTm9BdHRyaWJ1dGUnOgoJCQkJCQl2YXIgJHRlbXAkY2xhc3NlcyA9IGNsYXNzZXMsCgkJCQkJCQkkdGVtcCRub2RlID0gbm9kZSwKCQkJCQkJCSR0ZW1wJGhhcyA9IGhhcywKCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IHN0eWxlcywKCQkJCQkJCSR0ZW1wJGF0dHJzID0gYXR0cnMsCgkJCQkJCQkkdGVtcCRjaGlsZHJlbiA9IGNoaWxkcmVuLAoJCQkJCQkJJHRlbXAkZWxlbWVudEF0dHJzID0gcmVtYWluaW5nOwoJCQkJCQljbGFzc2VzID0gJHRlbXAkY2xhc3NlczsKCQkJCQkJbm9kZSA9ICR0ZW1wJG5vZGU7CgkJCQkJCWhhcyA9ICR0ZW1wJGhhczsKCQkJCQkJdHJhbnNmb3JtID0gJHRlbXAkdHJhbnNmb3JtOwoJCQkJCQlzdHlsZXMgPSAkdGVtcCRzdHlsZXM7CgkJCQkJCWF0dHJzID0gJHRlbXAkYXR0cnM7CgkJCQkJCWNoaWxkcmVuID0gJHRlbXAkY2hpbGRyZW47CgkJCQkJCWVsZW1lbnRBdHRycyA9ICR0ZW1wJGVsZW1lbnRBdHRyczsKCQkJCQkJY29udGludWUgZ2F0aGVyQXR0clJlY3Vyc2l2ZTsKCQkJCQljYXNlICdDbGFzcyc6CgkJCQkJCXZhciBmbGFnID0gYXR0cmlidXRlLmE7CgkJCQkJCXZhciBleGFjdENsYXNzTmFtZSA9IGF0dHJpYnV0ZS5iOwoJCQkJCQlpZiAoQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckcHJlc2VudCwgZmxhZywgaGFzKSkgewoJCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSBjbGFzc2VzLAoJCQkJCQkJCSR0ZW1wJG5vZGUgPSBub2RlLAoJCQkJCQkJCSR0ZW1wJGhhcyA9IGhhcywKCQkJCQkJCQkkdGVtcCR0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0sCgkJCQkJCQkJJHRlbXAkc3R5bGVzID0gc3R5bGVzLAoJCQkJCQkJCSR0ZW1wJGF0dHJzID0gYXR0cnMsCgkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQljbGFzc2VzID0gJHRlbXAkY2xhc3NlczsKCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJdHJhbnNmb3JtID0gJHRlbXAkdHJhbnNmb3JtOwoJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCWNoaWxkcmVuID0gJHRlbXAkY2hpbGRyZW47CgkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSBleGFjdENsYXNzTmFtZSArICgnICcgKyBjbGFzc2VzKSwKCQkJCQkJCQkkdGVtcCRub2RlID0gbm9kZSwKCQkJCQkJCQkkdGVtcCRoYXMgPSBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsIGZsYWcsIGhhcyksCgkJCQkJCQkJJHRlbXAkdHJhbnNmb3JtID0gdHJhbnNmb3JtLAoJCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IHN0eWxlcywKCQkJCQkJCQkkdGVtcCRhdHRycyA9IGF0dHJzLAoJCQkJCQkJCSR0ZW1wJGNoaWxkcmVuID0gY2hpbGRyZW4sCgkJCQkJCQkJJHRlbXAkZWxlbWVudEF0dHJzID0gcmVtYWluaW5nOwoJCQkJCQkJY2xhc3NlcyA9ICR0ZW1wJGNsYXNzZXM7CgkJCQkJCQlub2RlID0gJHRlbXAkbm9kZTsKCQkJCQkJCWhhcyA9ICR0ZW1wJGhhczsKCQkJCQkJCXRyYW5zZm9ybSA9ICR0ZW1wJHRyYW5zZm9ybTsKCQkJCQkJCXN0eWxlcyA9ICR0ZW1wJHN0eWxlczsKCQkJCQkJCWF0dHJzID0gJHRlbXAkYXR0cnM7CgkJCQkJCQljaGlsZHJlbiA9ICR0ZW1wJGNoaWxkcmVuOwoJCQkJCQkJZWxlbWVudEF0dHJzID0gJHRlbXAkZWxlbWVudEF0dHJzOwoJCQkJCQkJY29udGludWUgZ2F0aGVyQXR0clJlY3Vyc2l2ZTsKCQkJCQkJfQoJCQkJCWNhc2UgJ0F0dHInOgoJCQkJCQl2YXIgYWN0dWFsQXR0cmlidXRlID0gYXR0cmlidXRlLmE7CgkJCQkJCXZhciAkdGVtcCRjbGFzc2VzID0gY2xhc3NlcywKCQkJCQkJCSR0ZW1wJG5vZGUgPSBub2RlLAoJCQkJCQkJJHRlbXAkaGFzID0gaGFzLAoJCQkJCQkJJHRlbXAkdHJhbnNmb3JtID0gdHJhbnNmb3JtLAoJCQkJCQkJJHRlbXAkc3R5bGVzID0gc3R5bGVzLAoJCQkJCQkJJHRlbXAkYXR0cnMgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBhY3R1YWxBdHRyaWJ1dGUsIGF0dHJzKSwKCQkJCQkJCSR0ZW1wJGNoaWxkcmVuID0gY2hpbGRyZW4sCgkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQlub2RlID0gJHRlbXAkbm9kZTsKCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCXN0eWxlcyA9ICR0ZW1wJHN0eWxlczsKCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJZWxlbWVudEF0dHJzID0gJHRlbXAkZWxlbWVudEF0dHJzOwoJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCWNhc2UgJ1N0eWxlQ2xhc3MnOgoJCQkJCQl2YXIgZmxhZyA9IGF0dHJpYnV0ZS5hOwoJCQkJCQl2YXIgc3R5bGUgPSBhdHRyaWJ1dGUuYjsKCQkJCQkJaWYgKEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHByZXNlbnQsIGZsYWcsIGhhcykpIHsKCQkJCQkJCXZhciAkdGVtcCRjbGFzc2VzID0gY2xhc3NlcywKCQkJCQkJCQkkdGVtcCRub2RlID0gbm9kZSwKCQkJCQkJCQkkdGVtcCRoYXMgPSBoYXMsCgkJCQkJCQkJJHRlbXAkdHJhbnNmb3JtID0gdHJhbnNmb3JtLAoJCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IHN0eWxlcywKCQkJCQkJCQkkdGVtcCRhdHRycyA9IGF0dHJzLAoJCQkJCQkJCSR0ZW1wJGNoaWxkcmVuID0gY2hpbGRyZW4sCgkJCQkJCQkJJHRlbXAkZWxlbWVudEF0dHJzID0gcmVtYWluaW5nOwoJCQkJCQkJY2xhc3NlcyA9ICR0ZW1wJGNsYXNzZXM7CgkJCQkJCQlub2RlID0gJHRlbXAkbm9kZTsKCQkJCQkJCWhhcyA9ICR0ZW1wJGhhczsKCQkJCQkJCXRyYW5zZm9ybSA9ICR0ZW1wJHRyYW5zZm9ybTsKCQkJCQkJCXN0eWxlcyA9ICR0ZW1wJHN0eWxlczsKCQkJCQkJCWF0dHJzID0gJHRlbXAkYXR0cnM7CgkJCQkJCQljaGlsZHJlbiA9ICR0ZW1wJGNoaWxkcmVuOwoJCQkJCQkJZWxlbWVudEF0dHJzID0gJHRlbXAkZWxlbWVudEF0dHJzOwoJCQkJCQkJY29udGludWUgZ2F0aGVyQXR0clJlY3Vyc2l2ZTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWlmIChBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkc2tpcHBhYmxlLCBmbGFnLCBzdHlsZSkpIHsKCQkJCQkJCQl2YXIgJHRlbXAkY2xhc3NlcyA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRnZXRTdHlsZU5hbWUoc3R5bGUpICsgKCcgJyArIGNsYXNzZXMpLAoJCQkJCQkJCQkkdGVtcCRub2RlID0gbm9kZSwKCQkJCQkJCQkJJHRlbXAkaGFzID0gQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLCBmbGFnLCBoYXMpLAoJCQkJCQkJCQkkdGVtcCR0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0sCgkJCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IHN0eWxlcywKCQkJCQkJCQkJJHRlbXAkYXR0cnMgPSBhdHRycywKCQkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkJJHRlbXAkZWxlbWVudEF0dHJzID0gcmVtYWluaW5nOwoJCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJCWhhcyA9ICR0ZW1wJGhhczsKCQkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJCWF0dHJzID0gJHRlbXAkYXR0cnM7CgkJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQkJY29udGludWUgZ2F0aGVyQXR0clJlY3Vyc2l2ZTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZ2V0U3R5bGVOYW1lKHN0eWxlKSArICgnICcgKyBjbGFzc2VzKSwKCQkJCQkJCQkJJHRlbXAkbm9kZSA9IG5vZGUsCgkJCQkJCQkJCSR0ZW1wJGhhcyA9IEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGFkZCwgZmxhZywgaGFzKSwKCQkJCQkJCQkJJHRlbXAkdHJhbnNmb3JtID0gdHJhbnNmb3JtLAoJCQkJCQkJCQkkdGVtcCRzdHlsZXMgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBzdHlsZSwgc3R5bGVzKSwKCQkJCQkJCQkJJHRlbXAkYXR0cnMgPSBhdHRycywKCQkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkJJHRlbXAkZWxlbWVudEF0dHJzID0gcmVtYWluaW5nOwoJCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJCWhhcyA9ICR0ZW1wJGhhczsKCQkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJCWF0dHJzID0gJHRlbXAkYXR0cnM7CgkJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQkJY29udGludWUgZ2F0aGVyQXR0clJlY3Vyc2l2ZTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCWNhc2UgJ1RyYW5zZm9ybUNvbXBvbmVudCc6CgkJCQkJCXZhciBmbGFnID0gYXR0cmlidXRlLmE7CgkJCQkJCXZhciBjb21wb25lbnQgPSBhdHRyaWJ1dGUuYjsKCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSBjbGFzc2VzLAoJCQkJCQkJJHRlbXAkbm9kZSA9IG5vZGUsCgkJCQkJCQkkdGVtcCRoYXMgPSBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsIGZsYWcsIGhhcyksCgkJCQkJCQkkdGVtcCR0cmFuc2Zvcm0gPSBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkY29tcG9zZVRyYW5zZm9ybWF0aW9uLCB0cmFuc2Zvcm0sIGNvbXBvbmVudCksCgkJCQkJCQkkdGVtcCRzdHlsZXMgPSBzdHlsZXMsCgkJCQkJCQkkdGVtcCRhdHRycyA9IGF0dHJzLAoJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCSR0ZW1wJGVsZW1lbnRBdHRycyA9IHJlbWFpbmluZzsKCQkJCQkJY2xhc3NlcyA9ICR0ZW1wJGNsYXNzZXM7CgkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQloYXMgPSAkdGVtcCRoYXM7CgkJCQkJCXRyYW5zZm9ybSA9ICR0ZW1wJHRyYW5zZm9ybTsKCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQlhdHRycyA9ICR0ZW1wJGF0dHJzOwoJCQkJCQljaGlsZHJlbiA9ICR0ZW1wJGNoaWxkcmVuOwoJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCWNvbnRpbnVlIGdhdGhlckF0dHJSZWN1cnNpdmU7CgkJCQkJY2FzZSAnV2lkdGgnOgoJCQkJCQl2YXIgd2lkdGggPSBhdHRyaWJ1dGUuYTsKCQkJCQkJaWYgKEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHByZXNlbnQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHdpZHRoLCBoYXMpKSB7CgkJCQkJCQl2YXIgJHRlbXAkY2xhc3NlcyA9IGNsYXNzZXMsCgkJCQkJCQkJJHRlbXAkbm9kZSA9IG5vZGUsCgkJCQkJCQkJJHRlbXAkaGFzID0gaGFzLAoJCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCQkkdGVtcCRzdHlsZXMgPSBzdHlsZXMsCgkJCQkJCQkJJHRlbXAkYXR0cnMgPSBhdHRycywKCQkJCQkJCQkkdGVtcCRjaGlsZHJlbiA9IGNoaWxkcmVuLAoJCQkJCQkJCSR0ZW1wJGVsZW1lbnRBdHRycyA9IHJlbWFpbmluZzsKCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJbm9kZSA9ICR0ZW1wJG5vZGU7CgkJCQkJCQloYXMgPSAkdGVtcCRoYXM7CgkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQlzdHlsZXMgPSAkdGVtcCRzdHlsZXM7CgkJCQkJCQlhdHRycyA9ICR0ZW1wJGF0dHJzOwoJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCWVsZW1lbnRBdHRycyA9ICR0ZW1wJGVsZW1lbnRBdHRyczsKCQkJCQkJCWNvbnRpbnVlIGdhdGhlckF0dHJSZWN1cnNpdmU7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlzd2l0Y2ggKHdpZHRoLiQpIHsKCQkJCQkJCQljYXNlICdQeCc6CgkJCQkJCQkJCXZhciBweCA9IHdpZHRoLmE7CgkJCQkJCQkJCXZhciAkdGVtcCRjbGFzc2VzID0gKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLndpZHRoRXhhY3QgKyAoJyB3aWR0aC1weC0nICsgJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHB4KSkpICsgKCcgJyArIGNsYXNzZXMpLAoJCQkJCQkJCQkJJHRlbXAkbm9kZSA9IG5vZGUsCgkJCQkJCQkJCQkkdGVtcCRoYXMgPSBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHdpZHRoLCBoYXMpLAoJCQkJCQkJCQkJJHRlbXAkdHJhbnNmb3JtID0gdHJhbnNmb3JtLAoJCQkJCQkJCQkJJHRlbXAkc3R5bGVzID0gQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFNpbmdsZSwKCQkJCQkJCQkJCQknd2lkdGgtcHgtJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludChweCksCgkJCQkJCQkJCQkJJ3dpZHRoJywKCQkJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocHgpICsgJ3B4JyksCgkJCQkJCQkJCQlzdHlsZXMpLAoJCQkJCQkJCQkJJHRlbXAkYXR0cnMgPSBhdHRycywKCQkJCQkJCQkJCSR0ZW1wJGNoaWxkcmVuID0gY2hpbGRyZW4sCgkJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJCQlub2RlID0gJHRlbXAkbm9kZTsKCQkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQkJCXN0eWxlcyA9ICR0ZW1wJHN0eWxlczsKCQkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCQkJZWxlbWVudEF0dHJzID0gJHRlbXAkZWxlbWVudEF0dHJzOwoJCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQkJCWNhc2UgJ0NvbnRlbnQnOgoJCQkJCQkJCQl2YXIgJHRlbXAkY2xhc3NlcyA9IGNsYXNzZXMgKyAoJyAnICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMud2lkdGhDb250ZW50KSwKCQkJCQkJCQkJCSR0ZW1wJG5vZGUgPSBub2RlLAoJCQkJCQkJCQkJJHRlbXAkaGFzID0gQTIoCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR3aWR0aENvbnRlbnQsCgkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHdpZHRoLCBoYXMpKSwKCQkJCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IHN0eWxlcywKCQkJCQkJCQkJCSR0ZW1wJGF0dHJzID0gYXR0cnMsCgkJCQkJCQkJCQkkdGVtcCRjaGlsZHJlbiA9IGNoaWxkcmVuLAoJCQkJCQkJCQkJJHRlbXAkZWxlbWVudEF0dHJzID0gcmVtYWluaW5nOwoJCQkJCQkJCQljbGFzc2VzID0gJHRlbXAkY2xhc3NlczsKCQkJCQkJCQkJbm9kZSA9ICR0ZW1wJG5vZGU7CgkJCQkJCQkJCWhhcyA9ICR0ZW1wJGhhczsKCQkJCQkJCQkJdHJhbnNmb3JtID0gJHRlbXAkdHJhbnNmb3JtOwoJCQkJCQkJCQlzdHlsZXMgPSAkdGVtcCRzdHlsZXM7CgkJCQkJCQkJCWF0dHJzID0gJHRlbXAkYXR0cnM7CgkJCQkJCQkJCWNoaWxkcmVuID0gJHRlbXAkY2hpbGRyZW47CgkJCQkJCQkJCWVsZW1lbnRBdHRycyA9ICR0ZW1wJGVsZW1lbnRBdHRyczsKCQkJCQkJCQkJY29udGludWUgZ2F0aGVyQXR0clJlY3Vyc2l2ZTsKCQkJCQkJCQljYXNlICdGaWxsJzoKCQkJCQkJCQkJdmFyIHBvcnRpb24gPSB3aWR0aC5hOwoJCQkJCQkJCQlpZiAocG9ydGlvbiA9PT0gMSkgewoJCQkJCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSBjbGFzc2VzICsgKCcgJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLndpZHRoRmlsbCksCgkJCQkJCQkJCQkJJHRlbXAkbm9kZSA9IG5vZGUsCgkJCQkJCQkJCQkJJHRlbXAkaGFzID0gQTIoCgkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLAoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHdpZHRoRmlsbCwKCQkJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHdpZHRoLCBoYXMpKSwKCQkJCQkJCQkJCQkkdGVtcCR0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0sCgkJCQkJCQkJCQkJJHRlbXAkc3R5bGVzID0gc3R5bGVzLAoJCQkJCQkJCQkJCSR0ZW1wJGF0dHJzID0gYXR0cnMsCgkJCQkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJCQljbGFzc2VzID0gJHRlbXAkY2xhc3NlczsKCQkJCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCQkJdHJhbnNmb3JtID0gJHRlbXAkdHJhbnNmb3JtOwoJCQkJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQkJCWNoaWxkcmVuID0gJHRlbXAkY2hpbGRyZW47CgkJCQkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSBjbGFzc2VzICsgKCcgJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy53aWR0aEZpbGxQb3J0aW9uICsgKCcgd2lkdGgtZmlsbC0nICsgJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHBvcnRpb24pKSkpLAoJCQkJCQkJCQkJCSR0ZW1wJG5vZGUgPSBub2RlLAoJCQkJCQkJCQkJCSR0ZW1wJGhhcyA9IEEyKAoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGFkZCwKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR3aWR0aEZpbGwsCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR3aWR0aCwgaGFzKSksCgkJCQkJCQkJCQkJJHRlbXAkdHJhbnNmb3JtID0gdHJhbnNmb3JtLAoJCQkJCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IEEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTaW5nbGUsCgkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmFueSArICgnLicgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMucm93ICsgKCcgPiAnICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGRvdCgKCQkJCQkJCQkJCQkJCSd3aWR0aC1maWxsLScgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9ydGlvbikpKSkpLAoJCQkJCQkJCQkJCQknZmxleC1ncm93JywKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHBvcnRpb24gKiAxMDAwMDApKSwKCQkJCQkJCQkJCQlzdHlsZXMpLAoJCQkJCQkJCQkJCSR0ZW1wJGF0dHJzID0gYXR0cnMsCgkJCQkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJCQljbGFzc2VzID0gJHRlbXAkY2xhc3NlczsKCQkJCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCQkJdHJhbnNmb3JtID0gJHRlbXAkdHJhbnNmb3JtOwoJCQkJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQkJCWNoaWxkcmVuID0gJHRlbXAkY2hpbGRyZW47CgkJCQkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQkJCQl9CgkJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQkJdmFyIF92NCA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW5kZXJXaWR0aCh3aWR0aCk7CgkJCQkJCQkJCXZhciBhZGRUb0ZsYWdzID0gX3Y0LmE7CgkJCQkJCQkJCXZhciBuZXdDbGFzcyA9IF92NC5iOwoJCQkJCQkJCQl2YXIgbmV3U3R5bGVzID0gX3Y0LmM7CgkJCQkJCQkJCXZhciAkdGVtcCRjbGFzc2VzID0gY2xhc3NlcyArICgnICcgKyBuZXdDbGFzcyksCgkJCQkJCQkJCQkkdGVtcCRub2RlID0gbm9kZSwKCQkJCQkJCQkJCSR0ZW1wJGhhcyA9IEEyKAoJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckbWVyZ2UsCgkJCQkJCQkJCQlhZGRUb0ZsYWdzLAoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR3aWR0aCwgaGFzKSksCgkJCQkJCQkJCQkkdGVtcCR0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0sCgkJCQkJCQkJCQkkdGVtcCRzdHlsZXMgPSBfVXRpbHNfYXAobmV3U3R5bGVzLCBzdHlsZXMpLAoJCQkJCQkJCQkJJHRlbXAkYXR0cnMgPSBhdHRycywKCQkJCQkJCQkJCSR0ZW1wJGNoaWxkcmVuID0gY2hpbGRyZW4sCgkJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJCQlub2RlID0gJHRlbXAkbm9kZTsKCQkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQkJCXN0eWxlcyA9ICR0ZW1wJHN0eWxlczsKCQkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCQkJZWxlbWVudEF0dHJzID0gJHRlbXAkZWxlbWVudEF0dHJzOwoJCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJY2FzZSAnSGVpZ2h0JzoKCQkJCQkJdmFyIGhlaWdodCA9IGF0dHJpYnV0ZS5hOwoJCQkJCQlpZiAoQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckcHJlc2VudCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckaGVpZ2h0LCBoYXMpKSB7CgkJCQkJCQl2YXIgJHRlbXAkY2xhc3NlcyA9IGNsYXNzZXMsCgkJCQkJCQkJJHRlbXAkbm9kZSA9IG5vZGUsCgkJCQkJCQkJJHRlbXAkaGFzID0gaGFzLAoJCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCQkkdGVtcCRzdHlsZXMgPSBzdHlsZXMsCgkJCQkJCQkJJHRlbXAkYXR0cnMgPSBhdHRycywKCQkJCQkJCQkkdGVtcCRjaGlsZHJlbiA9IGNoaWxkcmVuLAoJCQkJCQkJCSR0ZW1wJGVsZW1lbnRBdHRycyA9IHJlbWFpbmluZzsKCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJbm9kZSA9ICR0ZW1wJG5vZGU7CgkJCQkJCQloYXMgPSAkdGVtcCRoYXM7CgkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQlzdHlsZXMgPSAkdGVtcCRzdHlsZXM7CgkJCQkJCQlhdHRycyA9ICR0ZW1wJGF0dHJzOwoJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCWVsZW1lbnRBdHRycyA9ICR0ZW1wJGVsZW1lbnRBdHRyczsKCQkJCQkJCWNvbnRpbnVlIGdhdGhlckF0dHJSZWN1cnNpdmU7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlzd2l0Y2ggKGhlaWdodC4kKSB7CgkJCQkJCQkJY2FzZSAnUHgnOgoJCQkJCQkJCQl2YXIgcHggPSBoZWlnaHQuYTsKCQkJCQkJCQkJdmFyIHZhbCA9ICRlbG0kY29yZSRTdHJpbmckZnJvbUludChweCkgKyAncHgnOwoJCQkJCQkJCQl2YXIgbmFtZSA9ICdoZWlnaHQtcHgtJyArIHZhbDsKCQkJCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5oZWlnaHRFeGFjdCArICgnICcgKyAobmFtZSArICgnICcgKyBjbGFzc2VzKSkpLAoJCQkJCQkJCQkJJHRlbXAkbm9kZSA9IG5vZGUsCgkJCQkJCQkJCQkkdGVtcCRoYXMgPSBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGhlaWdodCwgaGFzKSwKCQkJCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IEEyKAoJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCUEzKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTaW5nbGUsIG5hbWUsICdoZWlnaHQgJywgdmFsKSwKCQkJCQkJCQkJCXN0eWxlcyksCgkJCQkJCQkJCQkkdGVtcCRhdHRycyA9IGF0dHJzLAoJCQkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkJCSR0ZW1wJGVsZW1lbnRBdHRycyA9IHJlbWFpbmluZzsKCQkJCQkJCQkJY2xhc3NlcyA9ICR0ZW1wJGNsYXNzZXM7CgkJCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJCQloYXMgPSAkdGVtcCRoYXM7CgkJCQkJCQkJCXRyYW5zZm9ybSA9ICR0ZW1wJHRyYW5zZm9ybTsKCQkJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJCQlhdHRycyA9ICR0ZW1wJGF0dHJzOwoJCQkJCQkJCQljaGlsZHJlbiA9ICR0ZW1wJGNoaWxkcmVuOwoJCQkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQkJCWNvbnRpbnVlIGdhdGhlckF0dHJSZWN1cnNpdmU7CgkJCQkJCQkJY2FzZSAnQ29udGVudCc6CgkJCQkJCQkJCXZhciAkdGVtcCRjbGFzc2VzID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaGVpZ2h0Q29udGVudCArICgnICcgKyBjbGFzc2VzKSwKCQkJCQkJCQkJCSR0ZW1wJG5vZGUgPSBub2RlLAoJCQkJCQkJCQkJJHRlbXAkaGFzID0gQTIoCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRoZWlnaHRDb250ZW50LAoJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRoZWlnaHQsIGhhcykpLAoJCQkJCQkJCQkJJHRlbXAkdHJhbnNmb3JtID0gdHJhbnNmb3JtLAoJCQkJCQkJCQkJJHRlbXAkc3R5bGVzID0gc3R5bGVzLAoJCQkJCQkJCQkJJHRlbXAkYXR0cnMgPSBhdHRycywKCQkJCQkJCQkJCSR0ZW1wJGNoaWxkcmVuID0gY2hpbGRyZW4sCgkJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJCQlub2RlID0gJHRlbXAkbm9kZTsKCQkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQkJCXN0eWxlcyA9ICR0ZW1wJHN0eWxlczsKCQkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCQkJZWxlbWVudEF0dHJzID0gJHRlbXAkZWxlbWVudEF0dHJzOwoJCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQkJCWNhc2UgJ0ZpbGwnOgoJCQkJCQkJCQl2YXIgcG9ydGlvbiA9IGhlaWdodC5hOwoJCQkJCQkJCQlpZiAocG9ydGlvbiA9PT0gMSkgewoJCQkJCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5oZWlnaHRGaWxsICsgKCcgJyArIGNsYXNzZXMpLAoJCQkJCQkJCQkJCSR0ZW1wJG5vZGUgPSBub2RlLAoJCQkJCQkJCQkJCSR0ZW1wJGhhcyA9IEEyKAoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGFkZCwKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRoZWlnaHRGaWxsLAoJCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGFkZCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckaGVpZ2h0LCBoYXMpKSwKCQkJCQkJCQkJCQkkdGVtcCR0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0sCgkJCQkJCQkJCQkJJHRlbXAkc3R5bGVzID0gc3R5bGVzLAoJCQkJCQkJCQkJCSR0ZW1wJGF0dHJzID0gYXR0cnMsCgkJCQkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJCQljbGFzc2VzID0gJHRlbXAkY2xhc3NlczsKCQkJCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCQkJdHJhbnNmb3JtID0gJHRlbXAkdHJhbnNmb3JtOwoJCQkJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQkJCWNoaWxkcmVuID0gJHRlbXAkY2hpbGRyZW47CgkJCQkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSBjbGFzc2VzICsgKCcgJyArICgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5oZWlnaHRGaWxsUG9ydGlvbiArICgnIGhlaWdodC1maWxsLScgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9ydGlvbikpKSksCgkJCQkJCQkJCQkJJHRlbXAkbm9kZSA9IG5vZGUsCgkJCQkJCQkJCQkJJHRlbXAkaGFzID0gQTIoCgkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLAoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGhlaWdodEZpbGwsCgkJCQkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRoZWlnaHQsIGhhcykpLAoJCQkJCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCQkJCQkkdGVtcCRzdHlsZXMgPSBBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU2luZ2xlLAoJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5hbnkgKyAoJy4nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmNvbHVtbiArICgnID4gJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRkb3QoCgkJCQkJCQkJCQkJCQknaGVpZ2h0LWZpbGwtJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludChwb3J0aW9uKSkpKSksCgkJCQkJCQkJCQkJCSdmbGV4LWdyb3cnLAoJCQkJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocG9ydGlvbiAqIDEwMDAwMCkpLAoJCQkJCQkJCQkJCXN0eWxlcyksCgkJCQkJCQkJCQkJJHRlbXAkYXR0cnMgPSBhdHRycywKCQkJCQkJCQkJCQkkdGVtcCRjaGlsZHJlbiA9IGNoaWxkcmVuLAoJCQkJCQkJCQkJCSR0ZW1wJGVsZW1lbnRBdHRycyA9IHJlbWFpbmluZzsKCQkJCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJCQkJbm9kZSA9ICR0ZW1wJG5vZGU7CgkJCQkJCQkJCQloYXMgPSAkdGVtcCRoYXM7CgkJCQkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQkJCQlzdHlsZXMgPSAkdGVtcCRzdHlsZXM7CgkJCQkJCQkJCQlhdHRycyA9ICR0ZW1wJGF0dHJzOwoJCQkJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCQkJCWVsZW1lbnRBdHRycyA9ICR0ZW1wJGVsZW1lbnRBdHRyczsKCQkJCQkJCQkJCWNvbnRpbnVlIGdhdGhlckF0dHJSZWN1cnNpdmU7CgkJCQkJCQkJCX0KCQkJCQkJCQlkZWZhdWx0OgoJCQkJCQkJCQl2YXIgX3Y2ID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlckhlaWdodChoZWlnaHQpOwoJCQkJCQkJCQl2YXIgYWRkVG9GbGFncyA9IF92Ni5hOwoJCQkJCQkJCQl2YXIgbmV3Q2xhc3MgPSBfdjYuYjsKCQkJCQkJCQkJdmFyIG5ld1N0eWxlcyA9IF92Ni5jOwoJCQkJCQkJCQl2YXIgJHRlbXAkY2xhc3NlcyA9IGNsYXNzZXMgKyAoJyAnICsgbmV3Q2xhc3MpLAoJCQkJCQkJCQkJJHRlbXAkbm9kZSA9IG5vZGUsCgkJCQkJCQkJCQkkdGVtcCRoYXMgPSBBMigKCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJG1lcmdlLAoJCQkJCQkJCQkJYWRkVG9GbGFncywKCQkJCQkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGFkZCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckaGVpZ2h0LCBoYXMpKSwKCQkJCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IF9VdGlsc19hcChuZXdTdHlsZXMsIHN0eWxlcyksCgkJCQkJCQkJCQkkdGVtcCRhdHRycyA9IGF0dHJzLAoJCQkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkJCSR0ZW1wJGVsZW1lbnRBdHRycyA9IHJlbWFpbmluZzsKCQkJCQkJCQkJY2xhc3NlcyA9ICR0ZW1wJGNsYXNzZXM7CgkJCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJCQloYXMgPSAkdGVtcCRoYXM7CgkJCQkJCQkJCXRyYW5zZm9ybSA9ICR0ZW1wJHRyYW5zZm9ybTsKCQkJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJCQlhdHRycyA9ICR0ZW1wJGF0dHJzOwoJCQkJCQkJCQljaGlsZHJlbiA9ICR0ZW1wJGNoaWxkcmVuOwoJCQkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQkJCWNvbnRpbnVlIGdhdGhlckF0dHJSZWN1cnNpdmU7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQljYXNlICdEZXNjcmliZSc6CgkJCQkJCXZhciBkZXNjcmlwdGlvbiA9IGF0dHJpYnV0ZS5hOwoJCQkJCQlzd2l0Y2ggKGRlc2NyaXB0aW9uLiQpIHsKCQkJCQkJCWNhc2UgJ01haW4nOgoJCQkJCQkJCXZhciAkdGVtcCRjbGFzc2VzID0gY2xhc3NlcywKCQkJCQkJCQkJJHRlbXAkbm9kZSA9IEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhZGROb2RlTmFtZSwgJ21haW4nLCBub2RlKSwKCQkJCQkJCQkJJHRlbXAkaGFzID0gaGFzLAoJCQkJCQkJCQkkdGVtcCR0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0sCgkJCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IHN0eWxlcywKCQkJCQkJCQkJJHRlbXAkYXR0cnMgPSBhdHRycywKCQkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkJJHRlbXAkZWxlbWVudEF0dHJzID0gcmVtYWluaW5nOwoJCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJCWhhcyA9ICR0ZW1wJGhhczsKCQkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJCWF0dHJzID0gJHRlbXAkYXR0cnM7CgkJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQkJY29udGludWUgZ2F0aGVyQXR0clJlY3Vyc2l2ZTsKCQkJCQkJCWNhc2UgJ05hdmlnYXRpb24nOgoJCQkJCQkJCXZhciAkdGVtcCRjbGFzc2VzID0gY2xhc3NlcywKCQkJCQkJCQkJJHRlbXAkbm9kZSA9IEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhZGROb2RlTmFtZSwgJ25hdicsIG5vZGUpLAoJCQkJCQkJCQkkdGVtcCRoYXMgPSBoYXMsCgkJCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCQkJJHRlbXAkc3R5bGVzID0gc3R5bGVzLAoJCQkJCQkJCQkkdGVtcCRhdHRycyA9IGF0dHJzLAoJCQkJCQkJCQkkdGVtcCRjaGlsZHJlbiA9IGNoaWxkcmVuLAoJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJY2xhc3NlcyA9ICR0ZW1wJGNsYXNzZXM7CgkJCQkJCQkJbm9kZSA9ICR0ZW1wJG5vZGU7CgkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCXRyYW5zZm9ybSA9ICR0ZW1wJHRyYW5zZm9ybTsKCQkJCQkJCQlzdHlsZXMgPSAkdGVtcCRzdHlsZXM7CgkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQljaGlsZHJlbiA9ICR0ZW1wJGNoaWxkcmVuOwoJCQkJCQkJCWVsZW1lbnRBdHRycyA9ICR0ZW1wJGVsZW1lbnRBdHRyczsKCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQkJY2FzZSAnQ29udGVudEluZm8nOgoJCQkJCQkJCXZhciAkdGVtcCRjbGFzc2VzID0gY2xhc3NlcywKCQkJCQkJCQkJJHRlbXAkbm9kZSA9IEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhZGROb2RlTmFtZSwgJ2Zvb3RlcicsIG5vZGUpLAoJCQkJCQkJCQkkdGVtcCRoYXMgPSBoYXMsCgkJCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCQkJJHRlbXAkc3R5bGVzID0gc3R5bGVzLAoJCQkJCQkJCQkkdGVtcCRhdHRycyA9IGF0dHJzLAoJCQkJCQkJCQkkdGVtcCRjaGlsZHJlbiA9IGNoaWxkcmVuLAoJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJY2xhc3NlcyA9ICR0ZW1wJGNsYXNzZXM7CgkJCQkJCQkJbm9kZSA9ICR0ZW1wJG5vZGU7CgkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCXRyYW5zZm9ybSA9ICR0ZW1wJHRyYW5zZm9ybTsKCQkJCQkJCQlzdHlsZXMgPSAkdGVtcCRzdHlsZXM7CgkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQljaGlsZHJlbiA9ICR0ZW1wJGNoaWxkcmVuOwoJCQkJCQkJCWVsZW1lbnRBdHRycyA9ICR0ZW1wJGVsZW1lbnRBdHRyczsKCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQkJY2FzZSAnQ29tcGxlbWVudGFyeSc6CgkJCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSBjbGFzc2VzLAoJCQkJCQkJCQkkdGVtcCRub2RlID0gQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFkZE5vZGVOYW1lLCAnYXNpZGUnLCBub2RlKSwKCQkJCQkJCQkJJHRlbXAkaGFzID0gaGFzLAoJCQkJCQkJCQkkdGVtcCR0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0sCgkJCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IHN0eWxlcywKCQkJCQkJCQkJJHRlbXAkYXR0cnMgPSBhdHRycywKCQkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkJJHRlbXAkZWxlbWVudEF0dHJzID0gcmVtYWluaW5nOwoJCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJCWhhcyA9ICR0ZW1wJGhhczsKCQkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJCWF0dHJzID0gJHRlbXAkYXR0cnM7CgkJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQkJY29udGludWUgZ2F0aGVyQXR0clJlY3Vyc2l2ZTsKCQkJCQkJCWNhc2UgJ0hlYWRpbmcnOgoJCQkJCQkJCXZhciBpID0gZGVzY3JpcHRpb24uYTsKCQkJCQkJCQlpZiAoaSA8PSAxKSB7CgkJCQkJCQkJCXZhciAkdGVtcCRjbGFzc2VzID0gY2xhc3NlcywKCQkJCQkJCQkJCSR0ZW1wJG5vZGUgPSBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYWRkTm9kZU5hbWUsICdoMScsIG5vZGUpLAoJCQkJCQkJCQkJJHRlbXAkaGFzID0gaGFzLAoJCQkJCQkJCQkJJHRlbXAkdHJhbnNmb3JtID0gdHJhbnNmb3JtLAoJCQkJCQkJCQkJJHRlbXAkc3R5bGVzID0gc3R5bGVzLAoJCQkJCQkJCQkJJHRlbXAkYXR0cnMgPSBhdHRycywKCQkJCQkJCQkJCSR0ZW1wJGNoaWxkcmVuID0gY2hpbGRyZW4sCgkJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJCQlub2RlID0gJHRlbXAkbm9kZTsKCQkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQkJCXN0eWxlcyA9ICR0ZW1wJHN0eWxlczsKCQkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCQkJZWxlbWVudEF0dHJzID0gJHRlbXAkZWxlbWVudEF0dHJzOwoJCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCWlmIChpIDwgNykgewoJCQkJCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSBjbGFzc2VzLAoJCQkJCQkJCQkJCSR0ZW1wJG5vZGUgPSBBMigKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYWRkTm9kZU5hbWUsCgkJCQkJCQkJCQkJJ2gnICsgJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KGkpLAoJCQkJCQkJCQkJCW5vZGUpLAoJCQkJCQkJCQkJCSR0ZW1wJGhhcyA9IGhhcywKCQkJCQkJCQkJCQkkdGVtcCR0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0sCgkJCQkJCQkJCQkJJHRlbXAkc3R5bGVzID0gc3R5bGVzLAoJCQkJCQkJCQkJCSR0ZW1wJGF0dHJzID0gYXR0cnMsCgkJCQkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJCQljbGFzc2VzID0gJHRlbXAkY2xhc3NlczsKCQkJCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCQkJdHJhbnNmb3JtID0gJHRlbXAkdHJhbnNmb3JtOwoJCQkJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQkJCWNoaWxkcmVuID0gJHRlbXAkY2hpbGRyZW47CgkJCQkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSBjbGFzc2VzLAoJCQkJCQkJCQkJCSR0ZW1wJG5vZGUgPSBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYWRkTm9kZU5hbWUsICdoNicsIG5vZGUpLAoJCQkJCQkJCQkJCSR0ZW1wJGhhcyA9IGhhcywKCQkJCQkJCQkJCQkkdGVtcCR0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0sCgkJCQkJCQkJCQkJJHRlbXAkc3R5bGVzID0gc3R5bGVzLAoJCQkJCQkJCQkJCSR0ZW1wJGF0dHJzID0gYXR0cnMsCgkJCQkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJCQljbGFzc2VzID0gJHRlbXAkY2xhc3NlczsKCQkJCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCQkJdHJhbnNmb3JtID0gJHRlbXAkdHJhbnNmb3JtOwoJCQkJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQkJCWNoaWxkcmVuID0gJHRlbXAkY2hpbGRyZW47CgkJCQkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJY2FzZSAnUGFyYWdyYXBoJzoKCQkJCQkJCQl2YXIgJHRlbXAkY2xhc3NlcyA9IGNsYXNzZXMsCgkJCQkJCQkJCSR0ZW1wJG5vZGUgPSBub2RlLAoJCQkJCQkJCQkkdGVtcCRoYXMgPSBoYXMsCgkJCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCQkJJHRlbXAkc3R5bGVzID0gc3R5bGVzLAoJCQkJCQkJCQkkdGVtcCRhdHRycyA9IGF0dHJzLAoJCQkJCQkJCQkkdGVtcCRjaGlsZHJlbiA9IGNoaWxkcmVuLAoJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJY2xhc3NlcyA9ICR0ZW1wJGNsYXNzZXM7CgkJCQkJCQkJbm9kZSA9ICR0ZW1wJG5vZGU7CgkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCXRyYW5zZm9ybSA9ICR0ZW1wJHRyYW5zZm9ybTsKCQkJCQkJCQlzdHlsZXMgPSAkdGVtcCRzdHlsZXM7CgkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQljaGlsZHJlbiA9ICR0ZW1wJGNoaWxkcmVuOwoJCQkJCQkJCWVsZW1lbnRBdHRycyA9ICR0ZW1wJGVsZW1lbnRBdHRyczsKCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQkJY2FzZSAnQnV0dG9uJzoKCQkJCQkJCQl2YXIgJHRlbXAkY2xhc3NlcyA9IGNsYXNzZXMsCgkJCQkJCQkJCSR0ZW1wJG5vZGUgPSBub2RlLAoJCQkJCQkJCQkkdGVtcCRoYXMgPSBoYXMsCgkJCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCQkJJHRlbXAkc3R5bGVzID0gc3R5bGVzLAoJCQkJCQkJCQkkdGVtcCRhdHRycyA9IEEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQlBMigkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kYXR0cmlidXRlLCAncm9sZScsICdidXR0b24nKSwKCQkJCQkJCQkJYXR0cnMpLAoJCQkJCQkJCQkkdGVtcCRjaGlsZHJlbiA9IGNoaWxkcmVuLAoJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJY2xhc3NlcyA9ICR0ZW1wJGNsYXNzZXM7CgkJCQkJCQkJbm9kZSA9ICR0ZW1wJG5vZGU7CgkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCXRyYW5zZm9ybSA9ICR0ZW1wJHRyYW5zZm9ybTsKCQkJCQkJCQlzdHlsZXMgPSAkdGVtcCRzdHlsZXM7CgkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQljaGlsZHJlbiA9ICR0ZW1wJGNoaWxkcmVuOwoJCQkJCQkJCWVsZW1lbnRBdHRycyA9ICR0ZW1wJGVsZW1lbnRBdHRyczsKCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQkJY2FzZSAnTGFiZWwnOgoJCQkJCQkJCXZhciBsYWJlbCA9IGRlc2NyaXB0aW9uLmE7CgkJCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSBjbGFzc2VzLAoJCQkJCQkJCQkkdGVtcCRub2RlID0gbm9kZSwKCQkJCQkJCQkJJHRlbXAkaGFzID0gaGFzLAoJCQkJCQkJCQkkdGVtcCR0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0sCgkJCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IHN0eWxlcywKCQkJCQkJCQkJJHRlbXAkYXR0cnMgPSBBMigKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJQTIoJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJGF0dHJpYnV0ZSwgJ2FyaWEtbGFiZWwnLCBsYWJlbCksCgkJCQkJCQkJCWF0dHJzKSwKCQkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkJJHRlbXAkZWxlbWVudEF0dHJzID0gcmVtYWluaW5nOwoJCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJCWhhcyA9ICR0ZW1wJGhhczsKCQkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJCWF0dHJzID0gJHRlbXAkYXR0cnM7CgkJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQkJY29udGludWUgZ2F0aGVyQXR0clJlY3Vyc2l2ZTsKCQkJCQkJCWNhc2UgJ0xpdmVQb2xpdGUnOgoJCQkJCQkJCXZhciAkdGVtcCRjbGFzc2VzID0gY2xhc3NlcywKCQkJCQkJCQkJJHRlbXAkbm9kZSA9IG5vZGUsCgkJCQkJCQkJCSR0ZW1wJGhhcyA9IGhhcywKCQkJCQkJCQkJJHRlbXAkdHJhbnNmb3JtID0gdHJhbnNmb3JtLAoJCQkJCQkJCQkkdGVtcCRzdHlsZXMgPSBzdHlsZXMsCgkJCQkJCQkJCSR0ZW1wJGF0dHJzID0gQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCUEyKCRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRhdHRyaWJ1dGUsICdhcmlhLWxpdmUnLCAncG9saXRlJyksCgkJCQkJCQkJCWF0dHJzKSwKCQkJCQkJCQkJJHRlbXAkY2hpbGRyZW4gPSBjaGlsZHJlbiwKCQkJCQkJCQkJJHRlbXAkZWxlbWVudEF0dHJzID0gcmVtYWluaW5nOwoJCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJCW5vZGUgPSAkdGVtcCRub2RlOwoJCQkJCQkJCWhhcyA9ICR0ZW1wJGhhczsKCQkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQkJc3R5bGVzID0gJHRlbXAkc3R5bGVzOwoJCQkJCQkJCWF0dHJzID0gJHRlbXAkYXR0cnM7CgkJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCQllbGVtZW50QXR0cnMgPSAkdGVtcCRlbGVtZW50QXR0cnM7CgkJCQkJCQkJY29udGludWUgZ2F0aGVyQXR0clJlY3Vyc2l2ZTsKCQkJCQkJCWRlZmF1bHQ6CgkJCQkJCQkJdmFyICR0ZW1wJGNsYXNzZXMgPSBjbGFzc2VzLAoJCQkJCQkJCQkkdGVtcCRub2RlID0gbm9kZSwKCQkJCQkJCQkJJHRlbXAkaGFzID0gaGFzLAoJCQkJCQkJCQkkdGVtcCR0cmFuc2Zvcm0gPSB0cmFuc2Zvcm0sCgkJCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IHN0eWxlcywKCQkJCQkJCQkJJHRlbXAkYXR0cnMgPSBBMigKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJQTIoJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJGF0dHJpYnV0ZSwgJ2FyaWEtbGl2ZScsICdhc3NlcnRpdmUnKSwKCQkJCQkJCQkJYXR0cnMpLAoJCQkJCQkJCQkkdGVtcCRjaGlsZHJlbiA9IGNoaWxkcmVuLAoJCQkJCQkJCQkkdGVtcCRlbGVtZW50QXR0cnMgPSByZW1haW5pbmc7CgkJCQkJCQkJY2xhc3NlcyA9ICR0ZW1wJGNsYXNzZXM7CgkJCQkJCQkJbm9kZSA9ICR0ZW1wJG5vZGU7CgkJCQkJCQkJaGFzID0gJHRlbXAkaGFzOwoJCQkJCQkJCXRyYW5zZm9ybSA9ICR0ZW1wJHRyYW5zZm9ybTsKCQkJCQkJCQlzdHlsZXMgPSAkdGVtcCRzdHlsZXM7CgkJCQkJCQkJYXR0cnMgPSAkdGVtcCRhdHRyczsKCQkJCQkJCQljaGlsZHJlbiA9ICR0ZW1wJGNoaWxkcmVuOwoJCQkJCQkJCWVsZW1lbnRBdHRycyA9ICR0ZW1wJGVsZW1lbnRBdHRyczsKCQkJCQkJCQljb250aW51ZSBnYXRoZXJBdHRyUmVjdXJzaXZlOwoJCQkJCQl9CgkJCQkJY2FzZSAnTmVhcmJ5JzoKCQkJCQkJdmFyIGxvY2F0aW9uID0gYXR0cmlidXRlLmE7CgkJCQkJCXZhciBlbGVtID0gYXR0cmlidXRlLmI7CgkJCQkJCXZhciBuZXdTdHlsZXMgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQlzd2l0Y2ggKGVsZW0uJCkgewoJCQkJCQkJCWNhc2UgJ0VtcHR5JzoKCQkJCQkJCQkJcmV0dXJuIHN0eWxlczsKCQkJCQkJCQljYXNlICdUZXh0JzoKCQkJCQkJCQkJdmFyIHN0ciA9IGVsZW0uYTsKCQkJCQkJCQkJcmV0dXJuIHN0eWxlczsKCQkJCQkJCQljYXNlICdVbnN0eWxlZCc6CgkJCQkJCQkJCXZhciBodG1sID0gZWxlbS5hOwoJCQkJCQkJCQlyZXR1cm4gc3R5bGVzOwoJCQkJCQkJCWRlZmF1bHQ6CgkJCQkJCQkJCXZhciBzdHlsZWQgPSBlbGVtLmE7CgkJCQkJCQkJCXJldHVybiBfVXRpbHNfYXAoc3R5bGVzLCBzdHlsZWQuc3R5bGVzKTsKCQkJCQkJCX0KCQkJCQkJfSgpOwoJCQkJCQl2YXIgJHRlbXAkY2xhc3NlcyA9IGNsYXNzZXMsCgkJCQkJCQkkdGVtcCRub2RlID0gbm9kZSwKCQkJCQkJCSR0ZW1wJGhhcyA9IGhhcywKCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IG5ld1N0eWxlcywKCQkJCQkJCSR0ZW1wJGF0dHJzID0gYXR0cnMsCgkJCQkJCQkkdGVtcCRjaGlsZHJlbiA9IEEzKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhZGROZWFyYnlFbGVtZW50LCBsb2NhdGlvbiwgZWxlbSwgY2hpbGRyZW4pLAoJCQkJCQkJJHRlbXAkZWxlbWVudEF0dHJzID0gcmVtYWluaW5nOwoJCQkJCQljbGFzc2VzID0gJHRlbXAkY2xhc3NlczsKCQkJCQkJbm9kZSA9ICR0ZW1wJG5vZGU7CgkJCQkJCWhhcyA9ICR0ZW1wJGhhczsKCQkJCQkJdHJhbnNmb3JtID0gJHRlbXAkdHJhbnNmb3JtOwoJCQkJCQlzdHlsZXMgPSAkdGVtcCRzdHlsZXM7CgkJCQkJCWF0dHJzID0gJHRlbXAkYXR0cnM7CgkJCQkJCWNoaWxkcmVuID0gJHRlbXAkY2hpbGRyZW47CgkJCQkJCWVsZW1lbnRBdHRycyA9ICR0ZW1wJGVsZW1lbnRBdHRyczsKCQkJCQkJY29udGludWUgZ2F0aGVyQXR0clJlY3Vyc2l2ZTsKCQkJCQljYXNlICdBbGlnblgnOgoJCQkJCQl2YXIgeCA9IGF0dHJpYnV0ZS5hOwoJCQkJCQlpZiAoQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckcHJlc2VudCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckeEFsaWduLCBoYXMpKSB7CgkJCQkJCQl2YXIgJHRlbXAkY2xhc3NlcyA9IGNsYXNzZXMsCgkJCQkJCQkJJHRlbXAkbm9kZSA9IG5vZGUsCgkJCQkJCQkJJHRlbXAkaGFzID0gaGFzLAoJCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCQkkdGVtcCRzdHlsZXMgPSBzdHlsZXMsCgkJCQkJCQkJJHRlbXAkYXR0cnMgPSBhdHRycywKCQkJCQkJCQkkdGVtcCRjaGlsZHJlbiA9IGNoaWxkcmVuLAoJCQkJCQkJCSR0ZW1wJGVsZW1lbnRBdHRycyA9IHJlbWFpbmluZzsKCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJbm9kZSA9ICR0ZW1wJG5vZGU7CgkJCQkJCQloYXMgPSAkdGVtcCRoYXM7CgkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQlzdHlsZXMgPSAkdGVtcCRzdHlsZXM7CgkJCQkJCQlhdHRycyA9ICR0ZW1wJGF0dHJzOwoJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCWVsZW1lbnRBdHRycyA9ICR0ZW1wJGVsZW1lbnRBdHRyczsKCQkJCQkJCWNvbnRpbnVlIGdhdGhlckF0dHJSZWN1cnNpdmU7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgJHRlbXAkY2xhc3NlcyA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhbGlnblhOYW1lKHgpICsgKCcgJyArIGNsYXNzZXMpLAoJCQkJCQkJCSR0ZW1wJG5vZGUgPSBub2RlLAoJCQkJCQkJCSR0ZW1wJGhhcyA9IGZ1bmN0aW9uIChmbGFncykgewoJCQkJCQkJCXN3aXRjaCAoeC4kKSB7CgkJCQkJCQkJCWNhc2UgJ0NlbnRlclgnOgoJCQkJCQkJCQkJcmV0dXJuIEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGFkZCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckY2VudGVyWCwgZmxhZ3MpOwoJCQkJCQkJCQljYXNlICdSaWdodCc6CgkJCQkJCQkJCQlyZXR1cm4gQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhbGlnblJpZ2h0LCBmbGFncyk7CgkJCQkJCQkJCWRlZmF1bHQ6CgkJCQkJCQkJCQlyZXR1cm4gZmxhZ3M7CgkJCQkJCQkJfQoJCQkJCQkJfSgKCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhZGQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHhBbGlnbiwgaGFzKSksCgkJCQkJCQkJJHRlbXAkdHJhbnNmb3JtID0gdHJhbnNmb3JtLAoJCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IHN0eWxlcywKCQkJCQkJCQkkdGVtcCRhdHRycyA9IGF0dHJzLAoJCQkJCQkJCSR0ZW1wJGNoaWxkcmVuID0gY2hpbGRyZW4sCgkJCQkJCQkJJHRlbXAkZWxlbWVudEF0dHJzID0gcmVtYWluaW5nOwoJCQkJCQkJY2xhc3NlcyA9ICR0ZW1wJGNsYXNzZXM7CgkJCQkJCQlub2RlID0gJHRlbXAkbm9kZTsKCQkJCQkJCWhhcyA9ICR0ZW1wJGhhczsKCQkJCQkJCXRyYW5zZm9ybSA9ICR0ZW1wJHRyYW5zZm9ybTsKCQkJCQkJCXN0eWxlcyA9ICR0ZW1wJHN0eWxlczsKCQkJCQkJCWF0dHJzID0gJHRlbXAkYXR0cnM7CgkJCQkJCQljaGlsZHJlbiA9ICR0ZW1wJGNoaWxkcmVuOwoJCQkJCQkJZWxlbWVudEF0dHJzID0gJHRlbXAkZWxlbWVudEF0dHJzOwoJCQkJCQkJY29udGludWUgZ2F0aGVyQXR0clJlY3Vyc2l2ZTsKCQkJCQkJfQoJCQkJCWRlZmF1bHQ6CgkJCQkJCXZhciB5ID0gYXR0cmlidXRlLmE7CgkJCQkJCWlmIChBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRwcmVzZW50LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR5QWxpZ24sIGhhcykpIHsKCQkJCQkJCXZhciAkdGVtcCRjbGFzc2VzID0gY2xhc3NlcywKCQkJCQkJCQkkdGVtcCRub2RlID0gbm9kZSwKCQkJCQkJCQkkdGVtcCRoYXMgPSBoYXMsCgkJCQkJCQkJJHRlbXAkdHJhbnNmb3JtID0gdHJhbnNmb3JtLAoJCQkJCQkJCSR0ZW1wJHN0eWxlcyA9IHN0eWxlcywKCQkJCQkJCQkkdGVtcCRhdHRycyA9IGF0dHJzLAoJCQkJCQkJCSR0ZW1wJGNoaWxkcmVuID0gY2hpbGRyZW4sCgkJCQkJCQkJJHRlbXAkZWxlbWVudEF0dHJzID0gcmVtYWluaW5nOwoJCQkJCQkJY2xhc3NlcyA9ICR0ZW1wJGNsYXNzZXM7CgkJCQkJCQlub2RlID0gJHRlbXAkbm9kZTsKCQkJCQkJCWhhcyA9ICR0ZW1wJGhhczsKCQkJCQkJCXRyYW5zZm9ybSA9ICR0ZW1wJHRyYW5zZm9ybTsKCQkJCQkJCXN0eWxlcyA9ICR0ZW1wJHN0eWxlczsKCQkJCQkJCWF0dHJzID0gJHRlbXAkYXR0cnM7CgkJCQkJCQljaGlsZHJlbiA9ICR0ZW1wJGNoaWxkcmVuOwoJCQkJCQkJZWxlbWVudEF0dHJzID0gJHRlbXAkZWxlbWVudEF0dHJzOwoJCQkJCQkJY29udGludWUgZ2F0aGVyQXR0clJlY3Vyc2l2ZTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciAkdGVtcCRjbGFzc2VzID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFsaWduWU5hbWUoeSkgKyAoJyAnICsgY2xhc3NlcyksCgkJCQkJCQkJJHRlbXAkbm9kZSA9IG5vZGUsCgkJCQkJCQkJJHRlbXAkaGFzID0gZnVuY3Rpb24gKGZsYWdzKSB7CgkJCQkJCQkJc3dpdGNoICh5LiQpIHsKCQkJCQkJCQkJY2FzZSAnQ2VudGVyWSc6CgkJCQkJCQkJCQlyZXR1cm4gQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRjZW50ZXJZLCBmbGFncyk7CgkJCQkJCQkJCWNhc2UgJ0JvdHRvbSc6CgkJCQkJCQkJCQlyZXR1cm4gQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRhbGlnbkJvdHRvbSwgZmxhZ3MpOwoJCQkJCQkJCQlkZWZhdWx0OgoJCQkJCQkJCQkJcmV0dXJuIGZsYWdzOwoJCQkJCQkJCX0KCQkJCQkJCX0oCgkJCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYWRkLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR5QWxpZ24sIGhhcykpLAoJCQkJCQkJCSR0ZW1wJHRyYW5zZm9ybSA9IHRyYW5zZm9ybSwKCQkJCQkJCQkkdGVtcCRzdHlsZXMgPSBzdHlsZXMsCgkJCQkJCQkJJHRlbXAkYXR0cnMgPSBhdHRycywKCQkJCQkJCQkkdGVtcCRjaGlsZHJlbiA9IGNoaWxkcmVuLAoJCQkJCQkJCSR0ZW1wJGVsZW1lbnRBdHRycyA9IHJlbWFpbmluZzsKCQkJCQkJCWNsYXNzZXMgPSAkdGVtcCRjbGFzc2VzOwoJCQkJCQkJbm9kZSA9ICR0ZW1wJG5vZGU7CgkJCQkJCQloYXMgPSAkdGVtcCRoYXM7CgkJCQkJCQl0cmFuc2Zvcm0gPSAkdGVtcCR0cmFuc2Zvcm07CgkJCQkJCQlzdHlsZXMgPSAkdGVtcCRzdHlsZXM7CgkJCQkJCQlhdHRycyA9ICR0ZW1wJGF0dHJzOwoJCQkJCQkJY2hpbGRyZW4gPSAkdGVtcCRjaGlsZHJlbjsKCQkJCQkJCWVsZW1lbnRBdHRycyA9ICR0ZW1wJGVsZW1lbnRBdHRyczsKCQkJCQkJCWNvbnRpbnVlIGdhdGhlckF0dHJSZWN1cnNpdmU7CgkJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVudHJhbnNmb3JtZWQgPSB7JDogJ1VudHJhbnNmb3JtZWQnfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCR1bnRyYW5zZm9ybWVkID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVudHJhbnNmb3JtZWQ7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZWxlbWVudCA9IEY0KAoJZnVuY3Rpb24gKGNvbnRleHQsIG5vZGUsIGF0dHJpYnV0ZXMsIGNoaWxkcmVuKSB7CgkJcmV0dXJuIEEzKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkY3JlYXRlRWxlbWVudCwKCQkJY29udGV4dCwKCQkJY2hpbGRyZW4sCgkJCUE4KAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGdhdGhlckF0dHJSZWN1cnNpdmUsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkY29udGV4dENsYXNzZXMoY29udGV4dCksCgkJCQlub2RlLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckbm9uZSwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCR1bnRyYW5zZm9ybWVkLAoJCQkJX0xpc3RfTmlsLAoJCQkJX0xpc3RfTmlsLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE5vTmVhcmJ5Q2hpbGRyZW4sCgkJCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKGF0dHJpYnV0ZXMpKSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRIZWlnaHQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnSGVpZ2h0JywgYTogYX07Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRoZWlnaHQgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkSGVpZ2h0Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEF0dHIgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnQXR0cicsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGh0bWxDbGFzcyA9IGZ1bmN0aW9uIChjbHMpIHsKCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQXR0cigKCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJGNsYXNzKGNscykpOwp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJENvbnRlbnQgPSB7JDogJ0NvbnRlbnQnfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNocmluayA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRDb250ZW50Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFdpZHRoID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1dpZHRoJywgYTogYX07Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRXaWR0aDsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbiA9IEYyKAoJZnVuY3Rpb24gKGF0dHJzLCBjaGlsZHJlbikgewoJCXJldHVybiBBNCgKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGVsZW1lbnQsCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhc0NvbHVtbiwKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGRpdiwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGh0bWxDbGFzcygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5jb250ZW50VG9wICsgKCcgJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmNvbnRlbnRMZWZ0KSksCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzaHJpbmspLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzaHJpbmspLAoJCQkJCQlhdHRycykpKSwKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVua2V5ZWQoY2hpbGRyZW4pKTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwgPSBGMigKCWZ1bmN0aW9uIChhdHRycywgY2hpbGQpIHsKCQlyZXR1cm4gQTQoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbGVtZW50LAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNFbCwKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGRpdiwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2hyaW5rKSwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNocmluayksCgkJCQkJYXR0cnMpKSwKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVua2V5ZWQoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJW2NoaWxkXSkpKTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEZpbGwgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRmlsbCcsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRGaWxsKDEpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbEF0dHJpYnV0ZSA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBdHRyOwp2YXIgJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkZCA9IF9WaXJ0dWFsRG9tX2F0dHJpYnV0ZSgnZCcpOwp2YXIgJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkZmlsbCA9IF9WaXJ0dWFsRG9tX2F0dHJpYnV0ZSgnZmlsbCcpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHVuc3R5bGVkID0gQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlTCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVuc3R5bGVkLCAkZWxtJGNvcmUkQmFzaWNzJGFsd2F5cyk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHVuc3R5bGVkOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkaWNvblN2Z1BhdGhzRGF0YSA9IGZ1bmN0aW9uIChpY29uKSB7Cglzd2l0Y2ggKGljb24uJCkgewoJCWNhc2UgJ0NoYXRBY3Rpb25JY29uJzoKCQkJcmV0dXJuIHsKCQkJCWhlaWdodDogMjQsCgkJCQlvZmZzZXRYOiAwLAoJCQkJb2Zmc2V0WTogMCwKCQkJCXBhdGhzOiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQl7ZmlsbE5vbmU6IGZhbHNlLCBwYXRoRGF0YTogJ00yMCAySDRjLTEuMSAwLTIgLjktMiAydjE4bDQtNGgxNGMxLjEgMCAyLS45IDItMlY0YzAtMS4xLS45LTItMi0yeid9CgkJCQkJXSksCgkJCQl3aWR0aDogMjQKCQkJfTsKCQljYXNlICdHaXRIdWJBY3Rpb25JY29uJzoKCQkJcmV0dXJuIHsKCQkJCWhlaWdodDogMjQsCgkJCQlvZmZzZXRYOiAwLAoJCQkJb2Zmc2V0WTogMCwKCQkJCXBhdGhzOiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQl7ZmlsbE5vbmU6IGZhbHNlLCBwYXRoRGF0YTogJ00xMiAxYTExIDExIDAgMSAwIDAgMjIgMTEgMTEgMCAwIDAgMC0yMnptMi45IDE5Ljk2OGgtLjA4NmEuNDcxLjQ3MSAwIDAgMS0uMzUtLjEyOS40NzEuNDcxIDAgMCAxLS4xMjktLjM0di0xLjI5Yy4wMDYtLjQyOC4wMS0uODYuMDEtMS4yOTdhMy4zODUgMy4zODUgMCAwIDAtLjEzOS0uOTQzIDEuNjc5IDEuNjc5IDAgMCAwLS40OTYtLjgwMiA3LjM0IDcuMzQgMCAwIDAgMS44NjgtLjQzMiAzLjcxNSAzLjcxNSAwIDAgMCAxLjM0NC0uODgzYy4zNzMtLjM5Mi42NS0uODY0LjgxLTEuMzgxLjE5Ni0uNjMyLjI4OS0xLjI5LjI3Ni0xLjk1MmEzLjc5NyAzLjc5NyAwIDAgMC0uMjQtMS4zNTMgMy41NjkgMy41NjkgMCAwIDAtLjcyNy0xLjE3N2MuMDY4LS4xNzIuMTE4LS4zNTEuMTQ4LS41MzRhMy4yODYgMy4yODYgMCAwIDAtLjAzNi0xLjI2MiA0Ljg3IDQuODcgMCAwIDAtLjIwMy0uNy4yNjkuMjY5IDAgMCAwLS4xMDItLjAxOGgtLjFjLS4yMS4wMDItLjQxOS4wMzctLjYxOC4xMDItLjIyLjA2NC0uNDM2LjE0NC0uNjQ1LjIzOWE1Ljk3IDUuOTcgMCAwIDAtLjYwNi4zMTQgOS45OTIgOS45OTIgMCAwIDAtLjUyNS4zMzIgOC43OCA4Ljc4IDAgMCAwLTQuNzE0IDAgMTIuMzY3IDEyLjM2NyAwIDAgMC0uNTI1LS4zMzIgNS41MiA1LjUyIDAgMCAwLS42MTYtLjMxNCA0LjE0IDQuMTQgMCAwIDAtLjY0Ni0uMjM5IDIuMDIgMi4wMiAwIDAgMC0uNjA3LS4xMDJoLS4xYS4yNjYuMjY2IDAgMCAwLS4xLjAxOSA1LjM1NiA1LjM1NiAwIDAgMC0uMjEzLjY5OSAzLjQ0MSAzLjQ0MSAwIDAgMC0uMDI3IDEuMjYyYy4wMy4xODMuMDc5LjM2Mi4xNDcuNTM0YTMuNTY1IDMuNTY1IDAgMCAwLS43MjYgMS4xNzcgMy43OTcgMy43OTcgMCAwIDAtLjI0IDEuMzUzIDYuMjk4IDYuMjk4IDAgMCAwIC4yNjYgMS45NDJjLjE2Ny41MTcuNDQzLjk5Mi44MTEgMS4zOTEuMzguMzg2LjgzOC42ODcgMS4zNDQuODgzLjU5OC4yMyAxLjIyNS4zNzcgMS44NjMuNDM3LS4xNzguMTYxLS4zMi4zNi0uNDE0LjU4LS4wOS4yMTktLjE1My40NDgtLjE4NC42ODJhMi41MjQgMi41MjQgMCAwIDEtMS4wNzcuMjQ4IDEuNjM5IDEuNjM5IDAgMCAxLS45NzYtLjI3NiAyLjY2MSAyLjY2MSAwIDAgMS0uNjktLjc1NSAyLjkxNCAyLjkxNCAwIDAgMC0uMjY3LS4zNSAyLjQ1OSAyLjQ1OSAwIDAgMC0uMzQtLjMxNCAxLjY4NyAxLjY4NyAwIDAgMC0uMzk3LS4yMiAxLjEgMS4xIDAgMCAwLS40NDEtLjA5My45NDIuOTQyIDAgMCAwLS4xMS4wMWMtLjA1IDAtLjEuMDA2LS4xNDguMDE4YS4zNzYuMzc2IDAgMCAwLS4xMi4wNTUuMTA3LjEwNyAwIDAgMC0uMDU0LjA5MS4zMDQuMzA0IDAgMCAwIC4xMjkuMjIyYy4wODQuMDY4LjE1NS4xMi4yMTIuMTU3bC4wMjYuMDE5Yy4xMjMuMDk0LjI0LjE5Ni4zNS4zMDUuMTA0LjA5LjE5Ny4xOTIuMjc2LjMwMy4wODMuMTA4LjE1NC4yMjYuMjEyLjM0OS4wNjcuMTIzLjEzOC4yNjQuMjEyLjQyNC4xNzIuNDM0LjQ3OC44MDIuODc0IDEuMDUuNDE1LjIyMy44ODIuMzM0IDEuMzUzLjMyMi4xNiAwIC4zMi0uMDEuNDgtLjAyOC4xNTYtLjAyNS4zMTMtLjA1Mi40Ny0uMDgzdjEuNTk4YS40NTkuNDU5IDAgMCAxLS40ODguNDc3aC0uMDU3YTkuNDI4IDkuNDI4IDAgMSAxIDUuNzk3IDB2LjAwNXonfQoJCQkJCV0pLAoJCQkJd2lkdGg6IDI0CgkJCX07CgkJY2FzZSAnR3Jvd0FjdGlvbkljb24nOgoJCQlyZXR1cm4gewoJCQkJaGVpZ2h0OiAyNCwKCQkJCW9mZnNldFg6IDAsCgkJCQlvZmZzZXRZOiAwLAoJCQkJcGF0aHM6IF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCXtmaWxsTm9uZTogZmFsc2UsIHBhdGhEYXRhOiAnTTE0LjUgMEwxNC41IDIuNUwxOS41IDIuNUwxMy41IDguNUwxNS41IDEwLjVMMjEuMCA1LjBMMjEuMCA5LjVMMjQuMCA5LjVMMjQuMCAwTDE0LjUgMFonfSwKCQkJCQkJe2ZpbGxOb25lOiBmYWxzZSwgcGF0aERhdGE6ICdNOS41IDI0LjBMOS41IDIxLjVMNC41IDIxLjVMMTAuNSAxNS41TDguNSAxMy41TDMuMCAxOS4wTDMuMCAxNC41TDAgMTQuNUwwIDI0LjBMOS41IDI0LjBaJ30KCQkJCQldKSwKCQkJCXdpZHRoOiAyNAoJCQl9OwoJCWNhc2UgJ1Nocmlua0FjdGlvbkljb24nOgoJCQlyZXR1cm4gewoJCQkJaGVpZ2h0OiAyNCwKCQkJCW9mZnNldFg6IDAsCgkJCQlvZmZzZXRZOiAwLAoJCQkJcGF0aHM6IF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCXtmaWxsTm9uZTogZmFsc2UsIHBhdGhEYXRhOiAnTTIzLjAgMTAuNUwyMy4wIDguMEwxOC4wIDguMEwyNC4wIDIuMEwyMi4wIDBMMTYuNSA1LjVMMTYuNSAxLjBMMTMuNSAxLjBMMTMuNSAxMC41TDIzLjAgMTAuNVonfSwKCQkJCQkJe2ZpbGxOb25lOiBmYWxzZSwgcGF0aERhdGE6ICdNMS4wIDEzLjVMMS4wIDE2LjBMNi4wIDE2LjBMMCAyMi4wTDIuMCAyNC4wTDcuNSAxOC41TDcuNSAyMy4wTDEwLjUgMjMuMEwxMC41IDEzLjVMMS4wIDEzLjVaJ30KCQkJCQldKSwKCQkJCXdpZHRoOiAyNAoJCQl9OwoJCWNhc2UgJ0RpcmVjdG9yeUV4cGFuZGVkSWNvbic6CgkJCXJldHVybiB7CgkJCQloZWlnaHQ6IDIwMCwKCQkJCW9mZnNldFg6IDAsCgkJCQlvZmZzZXRZOiAwLAoJCQkJcGF0aHM6IF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCXtmaWxsTm9uZTogZmFsc2UsIHBhdGhEYXRhOiAnTTIwIDQwTDEwMCAxMjBMMTgwIDQwTDIwMCA2MEwxMDAgMTYwTDAgNjBMMjAgNDBaJ30KCQkJCQldKSwKCQkJCXdpZHRoOiAyMDAKCQkJfTsKCQljYXNlICdEaXJlY3RvcnlDb2xsYXBzZWRJY29uJzoKCQkJcmV0dXJuIHsKCQkJCWhlaWdodDogMjAwLAoJCQkJb2Zmc2V0WDogMCwKCQkJCW9mZnNldFk6IDAsCgkJCQlwYXRoczogX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJe2ZpbGxOb25lOiBmYWxzZSwgcGF0aERhdGE6ICdNNDAgMjBMMTIwIDEwMEw0MCAxODBMNjAgMjAwTDE2MCAxMDBMNjAgMEw0MCAyMFonfQoJCQkJCV0pLAoJCQkJd2lkdGg6IDIwMAoJCQl9OwoJCWNhc2UgJ0Nsb3NlRWRpdG9ySWNvbic6CgkJCXJldHVybiB7CgkJCQloZWlnaHQ6IDIwMCwKCQkJCW9mZnNldFg6IDAsCgkJCQlvZmZzZXRZOiAwLAoJCQkJcGF0aHM6IF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCXtmaWxsTm9uZTogZmFsc2UsIHBhdGhEYXRhOiAnTTAgMjBMODAgMTAwTDAgMTgwTDIwIDIwMEwxMDAgMTIwTDE4MCAyMDBMMjAwIDE4MEwxMjAgMTAwTDIwMCAyMEwxODAgMEwxMDAgODBMMjAgMEwwIDIwWid9CgkJCQkJXSksCgkJCQl3aWR0aDogMjAwCgkJCX07CgkJY2FzZSAnRmlsZVR5cGVFbG1JY29uJzoKCQkJcmV0dXJuIHsKCQkJCWhlaWdodDogNjQwLAoJCQkJb2Zmc2V0WDogMCwKCQkJCW9mZnNldFk6IDAsCgkJCQlwYXRoczogX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJe2ZpbGxOb25lOiBmYWxzZSwgcGF0aERhdGE6ICdNMCA2MjBMMzAwIDMyMEwwIDIwTDAgNjIwWid9LAoJCQkJCQl7ZmlsbE5vbmU6IGZhbHNlLCBwYXRoRGF0YTogJ002MjAgNjQwTDIwIDY0MEwzMjAgMzM4LjkyTDYyMCA2NDBaJ30sCgkJCQkJCXtmaWxsTm9uZTogZmFsc2UsIHBhdGhEYXRhOiAnTTE2MCAxNDBMNDYwIDE0MEwzMjAgMEwyMCAwTDE2MCAxNDBaJ30sCgkJCQkJCXtmaWxsTm9uZTogZmFsc2UsIHBhdGhEYXRhOiAnTTY0MCAyODBMNjQwIDBMMzYwIDBMNjQwIDI4MFonfSwKCQkJCQkJe2ZpbGxOb25lOiBmYWxzZSwgcGF0aERhdGE6ICdNMzIwIDMwMEw0NjAgMTYwTDE4MCAxNjBMMzIwIDMwMFonfSwKCQkJCQkJe2ZpbGxOb25lOiBmYWxzZSwgcGF0aERhdGE6ICdNNDkwIDQ3MEw2NDAgMzIwTDQ5MCAxNjguOTJMMzQwIDMyMEw0OTAgNDcwWid9LAoJCQkJCQl7ZmlsbE5vbmU6IGZhbHNlLCBwYXRoRGF0YTogJ002NDAgNjIwTDY0MCAzNjBMNTEwIDQ5MEw2NDAgNjIwWid9CgkJCQkJXSksCgkJCQl3aWR0aDogNjQwCgkJCX07CgkJY2FzZSAnRmlsZVR5cGVKc29uSWNvbic6CgkJCXJldHVybiB7CgkJCQloZWlnaHQ6IDE4LAoJCQkJb2Zmc2V0WDogNywKCQkJCW9mZnNldFk6IDcsCgkJCQlwYXRoczogX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJe2ZpbGxOb25lOiBmYWxzZSwgcGF0aERhdGE6ICdNNy41IDE1LjFjMS41IDAgMS43LS44IDEuNy0xLjUgMC0uNi0uMS0xLjEtLjEtMS43UzkgMTAuNyA5IDEwLjJjMC0yLjEgMS4zLTMgMy40LTNoLjh2MS45aC0uNGMtMSAwLTEuMy42LTEuMyAxLjYgMCAuNC4xLjguMSAxLjMgMCAuNC4xLjkuMSAxLjUgMCAxLjctLjcgMi4zLTEuOSAyLjYgMS4yLjMgMS45LjkgMS45IDIuNiAwIC42LS4xIDEuMS0uMSAxLjUgMCAuNC0uMS45LS4xIDEuMiAwIDEgLjMgMS42IDEuMyAxLjZoLjR2MS45aC0uOGMtMiAwLTMuMy0uOC0zLjMtMyAwLS42IDAtMS4xLjEtMS43LjEtLjYuMS0xLjIuMS0xLjcgMC0uNi0uMi0xLjUtMS43LTEuNWwtLjEtMS45em0xNyAxLjdjLTEuNSAwLTEuNy45LTEuNyAxLjVzLjEgMS4xLjEgMS43Yy4xLjYuMSAxLjIuMSAxLjcgMCAyLjItMS40IDMtMy40IDNoLS44VjIzaC40YzEgMCAxLjMtLjYgMS4zLTEuNiAwLS40IDAtLjgtLjEtMS4yIDAtLjUtLjEtMS0uMS0xLjUgMC0xLjcuNy0yLjMgMS45LTIuNi0xLjItLjMtMS45LS45LTEuOS0yLjYgMC0uNi4xLTEuMS4xLTEuNS4xLS41LjEtLjkuMS0xLjMgMC0xLS40LTEuNS0xLjMtMS42aC0uNFY3LjJoLjhjMi4xIDAgMy40LjkgMy40IDMgMCAuNi0uMSAxLjEtLjEgMS43LS4xLjYtLjEgMS4yLS4xIDEuNyAwIC43LjIgMS41IDEuNyAxLjV2MS43eid9CgkJCQkJXSksCgkJCQl3aWR0aDogMTgKCQkJfTsKCQlkZWZhdWx0OgoJCQlyZXR1cm4gewoJCQkJaGVpZ2h0OiAyMCwKCQkJCW9mZnNldFg6IDYsCgkJCQlvZmZzZXRZOiA2LAoJCQkJcGF0aHM6IF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCXtmaWxsTm9uZTogZmFsc2UsIHBhdGhEYXRhOiAnTTIwLjcgNi43djkuOWgzLjhjLTIuOSAzLTUuOCA1LjktOC43IDguOC0yLjctMi44LTUuNi01LjgtOC40LTguN2gzLjVWNi42YzEuMy45IDQuNCAzLjEgNSAzLjEuNiAwIDMuNi0yLjIgNC44LTN6J30KCQkJCQldKSwKCQkJCXdpZHRoOiAyMAoJCQl9OwoJfQp9Owp2YXIgJGVsbSRzdmckU3ZnJHRydXN0ZWROb2RlID0gX1ZpcnR1YWxEb21fbm9kZU5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycpOwp2YXIgJGVsbSRzdmckU3ZnJHBhdGggPSAkZWxtJHN2ZyRTdmckdHJ1c3RlZE5vZGUoJ3BhdGgnKTsKdmFyICRlbG0kc3ZnJFN2ZyRzdmcgPSAkZWxtJHN2ZyRTdmckdHJ1c3RlZE5vZGUoJ3N2ZycpOwp2YXIgJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkdmlld0JveCA9IF9WaXJ0dWFsRG9tX2F0dHJpYnV0ZSgndmlld0JveCcpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkaWNvblN2Z0VsZW1lbnRGcm9tSWNvbiA9IEYyKAoJZnVuY3Rpb24gKF92MCwgaWNvblR5cGUpIHsKCQl2YXIgY29sb3IgPSBfdjAuY29sb3I7CgkJdmFyIGljb25TdmcgPSAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkVmlzdWFscyRpY29uU3ZnUGF0aHNEYXRhKGljb25UeXBlKTsKCQl2YXIgcGF0aHNFbGVtZW50cyA9IEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCWZ1bmN0aW9uIChwYXRoSW5mbykgewoJCQkJdmFyIGZpbGxBdHRyaWJ1dGVzID0gcGF0aEluZm8uZmlsbE5vbmUgPyBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQkkZWxtJHN2ZyRTdmckQXR0cmlidXRlcyRmaWxsKCdub25lJykKCQkJCQldKSA6IF9MaXN0X05pbDsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJHN2ZyRTdmckcGF0aCwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkZChwYXRoSW5mby5wYXRoRGF0YSksCgkJCQkJCWZpbGxBdHRyaWJ1dGVzKSwKCQkJCQlfTGlzdF9OaWwpOwoJCQl9LAoJCQlpY29uU3ZnLnBhdGhzKTsKCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbCgKCQkJQTIoCgkJCQkkZWxtJHN2ZyRTdmckc3ZnLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkdmlld0JveCgKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQknICcsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50LAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJW2ljb25Tdmcub2Zmc2V0WCwgaWNvblN2Zy5vZmZzZXRZLCBpY29uU3ZnLndpZHRoLCBpY29uU3ZnLmhlaWdodF0pKSkpLAoJCQkJCQkkZWxtJHN2ZyRTdmckQXR0cmlidXRlcyRmaWxsKGNvbG9yKQoJCQkJCV0pLAoJCQkJcGF0aHNFbGVtZW50cykpOwoJfSk7CnZhciAkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJGhyZWYgPSBmdW5jdGlvbiAodXJsKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHJpbmdQcm9wZXJ0eSwKCQknaHJlZicsCgkJX1ZpcnR1YWxEb21fbm9KYXZhU2NyaXB0VXJpKHVybCkpOwp9Owp2YXIgJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRyZWwgPSBfVmlydHVhbERvbV9hdHRyaWJ1dGUoJ3JlbCcpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbGluayA9IEYyKAoJZnVuY3Rpb24gKGF0dHJzLCBfdjApIHsKCQl2YXIgdXJsID0gX3YwLnVybDsKCQl2YXIgbGFiZWwgPSBfdjAubGFiZWw7CgkJcmV0dXJuIEE0KAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZWxlbWVudCwKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFzRWwsCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb2RlTmFtZSgnYScpLAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQXR0cigKCQkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJGhyZWYodXJsKSksCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBdHRyKAoJCQkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHJlbCgnbm9vcGVuZXIgbm9yZWZlcnJlcicpKSwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2hyaW5rKSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNocmluayksCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRodG1sQ2xhc3MoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29udGVudENlbnRlclggKyAoJyAnICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmNvbnRlbnRDZW50ZXJZICsgKCcgJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmxpbmspKSkpLAoJCQkJCQkJCWF0dHJzKSkpKSksCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRVbmtleWVkKAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVtsYWJlbF0pKSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRIb3ZlciA9IHskOiAnSG92ZXInfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQc2V1ZG9TZWxlY3RvciA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdQc2V1ZG9TZWxlY3RvcicsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRob3ZlciA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGZsYWcoMzMpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJENsYXNzID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0NsYXNzJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCREZXNjcmliZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdEZXNjcmliZScsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE5lYXJieSA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdOZWFyYnknLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE5vQXR0cmlidXRlID0geyQ6ICdOb0F0dHJpYnV0ZSd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFRyYW5zZm9ybUNvbXBvbmVudCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdUcmFuc2Zvcm1Db21wb25lbnQnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEVtcHR5ID0geyQ6ICdFbXB0eSd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFRleHQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVGV4dCcsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJG1hcCA9IEYyKAoJZnVuY3Rpb24gKGZuLCBlbCkgewoJCXN3aXRjaCAoZWwuJCkgewoJCQljYXNlICdTdHlsZWQnOgoJCQkJdmFyIHN0eWxlZCA9IGVsLmE7CgkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlZCgKCQkJCQl7CgkJCQkJCWh0bWw6IEYyKAoJCQkJCQkJZnVuY3Rpb24gKGFkZCwgY29udGV4dCkgewoJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJG1hcCwKCQkJCQkJCQkJZm4sCgkJCQkJCQkJCUEyKHN0eWxlZC5odG1sLCBhZGQsIGNvbnRleHQpKTsKCQkJCQkJCX0pLAoJCQkJCQlzdHlsZXM6IHN0eWxlZC5zdHlsZXMKCQkJCQl9KTsKCQkJY2FzZSAnVW5zdHlsZWQnOgoJCQkJdmFyIGh0bWwgPSBlbC5hOwoJCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRVbnN0eWxlZCgKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlTCwKCQkJCQkJJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJG1hcChmbiksCgkJCQkJCWh0bWwpKTsKCQkJY2FzZSAnVGV4dCc6CgkJCQl2YXIgc3RyID0gZWwuYTsKCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVGV4dChzdHIpOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRFbXB0eTsKCQl9Cgl9KTsKdmFyICRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRtYXBBdHRyaWJ1dGUgPSBfVmlydHVhbERvbV9tYXBBdHRyaWJ1dGU7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkbWFwQXR0ckZyb21TdHlsZSA9IEYyKAoJZnVuY3Rpb24gKGZuLCBhdHRyKSB7CgkJc3dpdGNoIChhdHRyLiQpIHsKCQkJY2FzZSAnTm9BdHRyaWJ1dGUnOgoJCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb0F0dHJpYnV0ZTsKCQkJY2FzZSAnRGVzY3JpYmUnOgoJCQkJdmFyIGRlc2NyaXB0aW9uID0gYXR0ci5hOwoJCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCREZXNjcmliZShkZXNjcmlwdGlvbik7CgkJCWNhc2UgJ0FsaWduWCc6CgkJCQl2YXIgeCA9IGF0dHIuYTsKCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQWxpZ25YKHgpOwoJCQljYXNlICdBbGlnblknOgoJCQkJdmFyIHkgPSBhdHRyLmE7CgkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEFsaWduWSh5KTsKCQkJY2FzZSAnV2lkdGgnOgoJCQkJdmFyIHggPSBhdHRyLmE7CgkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFdpZHRoKHgpOwoJCQljYXNlICdIZWlnaHQnOgoJCQkJdmFyIHggPSBhdHRyLmE7CgkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEhlaWdodCh4KTsKCQkJY2FzZSAnQ2xhc3MnOgoJCQkJdmFyIHggPSBhdHRyLmE7CgkJCQl2YXIgeSA9IGF0dHIuYjsKCQkJCXJldHVybiBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ2xhc3MsIHgsIHkpOwoJCQljYXNlICdTdHlsZUNsYXNzJzoKCQkJCXZhciBmbGFnID0gYXR0ci5hOwoJCQkJdmFyIHN0eWxlID0gYXR0ci5iOwoJCQkJcmV0dXJuIEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTdHlsZUNsYXNzLCBmbGFnLCBzdHlsZSk7CgkJCWNhc2UgJ05lYXJieSc6CgkJCQl2YXIgbG9jYXRpb24gPSBhdHRyLmE7CgkJCQl2YXIgZWxlbSA9IGF0dHIuYjsKCQkJCXJldHVybiBBMigKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTmVhcmJ5LAoJCQkJCWxvY2F0aW9uLAoJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRtYXAsIGZuLCBlbGVtKSk7CgkJCWNhc2UgJ0F0dHInOgoJCQkJdmFyIGh0bWxBdHRyID0gYXR0ci5hOwoJCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBdHRyKAoJCQkJCUEyKCRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRtYXBBdHRyaWJ1dGUsIGZuLCBodG1sQXR0cikpOwoJCQlkZWZhdWx0OgoJCQkJdmFyIGZsID0gYXR0ci5hOwoJCQkJdmFyIHRyYW5zID0gYXR0ci5iOwoJCQkJcmV0dXJuIEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRUcmFuc2Zvcm1Db21wb25lbnQsIGZsLCB0cmFucyk7CgkJfQoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVtb3ZlTmV2ZXIgPSBmdW5jdGlvbiAoc3R5bGUpIHsKCXJldHVybiBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkbWFwQXR0ckZyb21TdHlsZSwgJGVsbSRjb3JlJEJhc2ljcyRuZXZlciwgc3R5bGUpOwp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHVud3JhcERlY3NIZWxwZXIgPSBGMigKCWZ1bmN0aW9uIChhdHRyLCBfdjApIHsKCQl2YXIgc3R5bGVzID0gX3YwLmE7CgkJdmFyIHRyYW5zID0gX3YwLmI7CgkJdmFyIF92MSA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyZW1vdmVOZXZlcihhdHRyKTsKCQlzd2l0Y2ggKF92MS4kKSB7CgkJCWNhc2UgJ1N0eWxlQ2xhc3MnOgoJCQkJdmFyIHN0eWxlID0gX3YxLmI7CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBzdHlsZSwgc3R5bGVzKSwKCQkJCQl0cmFucyk7CgkJCWNhc2UgJ1RyYW5zZm9ybUNvbXBvbmVudCc6CgkJCQl2YXIgZmxhZyA9IF92MS5hOwoJCQkJdmFyIGNvbXBvbmVudCA9IF92MS5iOwoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJc3R5bGVzLAoJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRjb21wb3NlVHJhbnNmb3JtYXRpb24sIHRyYW5zLCBjb21wb25lbnQpKTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHN0eWxlcywgdHJhbnMpOwoJCX0KCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHVud3JhcERlY29yYXRpb25zID0gZnVuY3Rpb24gKGF0dHJzKSB7Cgl2YXIgX3YwID0gQTMoCgkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHVud3JhcERlY3NIZWxwZXIsCgkJX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRVbnRyYW5zZm9ybWVkKSwKCQlhdHRycyk7Cgl2YXIgc3R5bGVzID0gX3YwLmE7Cgl2YXIgdHJhbnNmb3JtID0gX3YwLmI7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVHJhbnNmb3JtKHRyYW5zZm9ybSksCgkJc3R5bGVzKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JG1vdXNlT3ZlciA9IGZ1bmN0aW9uIChkZWNzKSB7CglyZXR1cm4gQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlQ2xhc3MsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckaG92ZXIsCgkJQTIoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQc2V1ZG9TZWxlY3RvciwKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEhvdmVyLAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdW53cmFwRGVjb3JhdGlvbnMoZGVjcykpKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQYWRkaW5nU3R5bGUgPSBGNSgKCWZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlKSB7CgkJcmV0dXJuIHskOiAnUGFkZGluZ1N0eWxlJywgYTogYSwgYjogYiwgYzogYywgZDogZCwgZTogZX07Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHBhZGRpbmcgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmbGFnKDIpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFkZGluZyA9IGZ1bmN0aW9uICh4KSB7Cgl2YXIgZiA9IHg7CglyZXR1cm4gQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlQ2xhc3MsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckcGFkZGluZywKCQlBNSgKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFBhZGRpbmdTdHlsZSwKCQkJJ3AtJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludCh4KSwKCQkJZiwKCQkJZiwKCQkJZiwKCQkJZikpOwp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckY3Vyc29yID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZmxhZygyMSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwb2ludGVyID0gQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJENsYXNzLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRjdXJzb3IsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmN1cnNvclBvaW50ZXIpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFB4ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1B4JywgYTogYX07Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRweCA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQeDsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRSZ2JhID0gRjQoCglmdW5jdGlvbiAoYSwgYiwgYywgZCkgewoJCXJldHVybiB7JDogJ1JnYmEnLCBhOiBhLCBiOiBiLCBjOiBjLCBkOiBkfTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiID0gRjMoCglmdW5jdGlvbiAociwgZywgYikgewoJCXJldHVybiBBNCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUmdiYSwgciwgZywgYiwgMSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTcGFjaW5nU3R5bGUgPSBGMygKCWZ1bmN0aW9uIChhLCBiLCBjKSB7CgkJcmV0dXJuIHskOiAnU3BhY2luZ1N0eWxlJywgYTogYSwgYjogYiwgYzogY307Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHNwYWNpbmcgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmbGFnKDMpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHNwYWNpbmdOYW1lID0gRjIoCglmdW5jdGlvbiAoeCwgeSkgewoJCXJldHVybiAnc3BhY2luZy0nICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludCh4KSArICgnLScgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoeSkpKTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc3BhY2luZyA9IGZ1bmN0aW9uICh4KSB7CglyZXR1cm4gQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlQ2xhc3MsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckc3BhY2luZywKCQlBMygKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFNwYWNpbmdTdHlsZSwKCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHNwYWNpbmdOYW1lLCB4LCB4KSwKCQkJeCwKCQkJeCkpOwp9Owp2YXIgJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyR0aXRsZSA9ICRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkc3RyaW5nUHJvcGVydHkoJ3RpdGxlJyk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRhY3Rpdml0eUJhciA9IGZ1bmN0aW9uICgpIHsKCXZhciBib3R0b21BY3Rpb25JdGVtcyA9IF9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCXsKCQkJaWNvbjogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkQ2hhdEFjdGlvbkljb24sCgkJCWxpbmtVcmw6ICRlbG0kY29yZSRNYXliZSRKdXN0KCdodHRwczovL2dpdGh1Yi5jb20vcGluZS12bS9waW5lL2Rpc2N1c3Npb25zJyksCgkJCXRpdGxlOiAnRWxtIEVkaXRvciBEaXNjdXNzaW9ucycKCQl9LAoJCQl7CgkJCWljb246ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRWaXN1YWxzJEdpdEh1YkFjdGlvbkljb24sCgkJCWxpbmtVcmw6ICRlbG0kY29yZSRNYXliZSRKdXN0KCdodHRwczovL2dpdGh1Yi5jb20vcGluZS12bS9waW5lL3RyZWUvbWFpbi9pbXBsZW1lbnQvZXhhbXBsZS1hcHBzL2VsbS1lZGl0b3InKSwKCQkJdGl0bGU6ICdFbG0gRWRpdG9yIHNvdXJjZSBjb2RlIG9uIEdpdEh1YicKCQl9CgkJXSk7Cgl2YXIgYWN0aW9uSXRlbVNwYWNpbmcgPSA0OwoJdmFyIGFjdGlvbkl0ZW1JY29uUGFkZGluZyA9IDg7Cgl2YXIgYWN0aW9uSXRlbVdyYXBwZXIgPSBmdW5jdGlvbiAoaXRlbUNvbmZpZykgewoJCXZhciBsaW5rV3JhcHBlciA9IGZ1bmN0aW9uICgpIHsKCQkJdmFyIF92MCA9IGl0ZW1Db25maWcubGlua1VybDsKCQkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5OwoJCQl9IGVsc2UgewoJCQkJdmFyIGp1c3RMaW5rVXJsID0gX3YwLmE7CgkJCQlyZXR1cm4gZnVuY3Rpb24gKGxpbmtMYWJlbCkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbGluaywKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWxBdHRyaWJ1dGUoCgkJCQkJCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyR0aXRsZShpdGVtQ29uZmlnLnRpdGxlKSkKCQkJCQkJCV0pLAoJCQkJCQl7bGFiZWw6IGxpbmtMYWJlbCwgdXJsOiBqdXN0TGlua1VybH0pOwoJCQkJfTsKCQkJfQoJCX0oKTsKCQlyZXR1cm4gQTMoCgkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsKAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFkZGluZyhhY3Rpb25JdGVtSWNvblBhZGRpbmcpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjZW50ZXJYLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkYWxwaGEoMC40KSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbW91c2VPdmVyKAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkYWxwaGEoMSkKCQkJCQkJCV0pKSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcG9pbnRlcgoJCQkJCV0pKSwKCQkJbGlua1dyYXBwZXIsCgkJCUEyKAoJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkaWNvblN2Z0VsZW1lbnRGcm9tSWNvbiwKCQkJCXtjb2xvcjogJ3doaXRlJ30sCgkJCQlpdGVtQ29uZmlnLmljb24pKTsKCX07CglyZXR1cm4gQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY29sdW1uLAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRweCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRhY3Rpdml0eUJhcldpZHRoKSksCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRoZWlnaHQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCYWNrZ3JvdW5kJGNvbG9yKAoJCQkJQTMoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiLCAwLjA5LCAwLjA5LCAwLjA5KSkKCQkJXSksCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbiwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKGFjdGlvbkl0ZW1TcGFjaW5nKSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkYWxpZ25Cb3R0b20KCQkJCQldKSwKCQkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgYWN0aW9uSXRlbVdyYXBwZXIsIGJvdHRvbUFjdGlvbkl0ZW1zKSkKCQkJXSkpOwp9KCk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTGVmdCA9IHskOiAnTGVmdCd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkYWxpZ25MZWZ0ID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEFsaWduWCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTGVmdCk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUmlnaHQgPSB7JDogJ1JpZ2h0J307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRhbGlnblJpZ2h0ID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEFsaWduWCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUmlnaHQpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFRvcCA9IHskOiAnVG9wJ307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRhbGlnblRvcCA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBbGlnblkoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFRvcCk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRiYWNrZ3JvdW5kQ29sb3IgPSBBMygkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyZ2IsIDAuMTIsIDAuMTIsIDAuMTIpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEJ1dHRvbiA9IHskOiAnQnV0dG9uJ307CnZhciAkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJGJvb2xQcm9wZXJ0eSA9IEYyKAoJZnVuY3Rpb24gKGtleSwgYm9vbCkgewoJCXJldHVybiBBMigKCQkJX1ZpcnR1YWxEb21fcHJvcGVydHksCgkJCWtleSwKCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGJvb2woYm9vbCkpOwoJfSk7CnZhciAkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJGRpc2FibGVkID0gJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRib29sUHJvcGVydHkoJ2Rpc2FibGVkJyk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRlbnRlciA9ICdFbnRlcic7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRoYXNGb2N1c1N0eWxlID0gZnVuY3Rpb24gKGF0dHIpIHsKCWlmICgoKGF0dHIuJCA9PT0gJ1N0eWxlQ2xhc3MnKSAmJiAoYXR0ci5iLiQgPT09ICdQc2V1ZG9TZWxlY3RvcicpKSAmJiAoYXR0ci5iLmEuJCA9PT0gJ0ZvY3VzJykpIHsKCQl2YXIgX3YxID0gYXR0ci5iOwoJCXZhciBfdjIgPSBfdjEuYTsKCQlyZXR1cm4gdHJ1ZTsKCX0gZWxzZSB7CgkJcmV0dXJuIGZhbHNlOwoJfQp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkZm9jdXNEZWZhdWx0ID0gZnVuY3Rpb24gKGF0dHJzKSB7CglyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkYW55LCAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRoYXNGb2N1c1N0eWxlLCBhdHRycykgPyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTm9BdHRyaWJ1dGUgOiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkaHRtbENsYXNzKCdmb2N1c2FibGUnKTsKfTsKdmFyICRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSROb3JtYWwgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnTm9ybWFsJywgYTogYX07Cn07CnZhciAkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kb24gPSBfVmlydHVhbERvbV9vbjsKdmFyICRlbG0kaHRtbCRIdG1sJEV2ZW50cyRvbiA9IEYyKAoJZnVuY3Rpb24gKGV2ZW50LCBkZWNvZGVyKSB7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kb24sCgkJCWV2ZW50LAoJCQkkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kTm9ybWFsKGRlY29kZXIpKTsKCX0pOwp2YXIgJGVsbSRodG1sJEh0bWwkRXZlbnRzJG9uQ2xpY2sgPSBmdW5jdGlvbiAobXNnKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRodG1sJEh0bWwkRXZlbnRzJG9uLAoJCSdjbGljaycsCgkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQobXNnKSk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRFdmVudHMkb25DbGljayA9IEEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZUwsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBdHRyLCAkZWxtJGh0bWwkSHRtbCRFdmVudHMkb25DbGljayk7CnZhciAkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kTWF5UHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnTWF5UHJldmVudERlZmF1bHQnLCBhOiBhfTsKfTsKdmFyICRlbG0kaHRtbCRIdG1sJEV2ZW50cyRwcmV2ZW50RGVmYXVsdE9uID0gRjIoCglmdW5jdGlvbiAoZXZlbnQsIGRlY29kZXIpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRvbiwKCQkJZXZlbnQsCgkJCSRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRNYXlQcmV2ZW50RGVmYXVsdChkZWNvZGVyKSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JG9uS2V5TG9va3VwID0gZnVuY3Rpb24gKGxvb2t1cCkgewoJdmFyIGRlY29kZSA9IGZ1bmN0aW9uIChjb2RlKSB7CgkJdmFyIF92MCA9IGxvb2t1cChjb2RlKTsKCQlpZiAoX3YwLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRGVjb2RlJGZhaWwoJ05vIGtleSBtYXRjaGVkJyk7CgkJfSBlbHNlIHsKCQkJdmFyIG1zZyA9IF92MC5hOwoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQobXNnKTsKCQl9Cgl9OwoJdmFyIGlzS2V5ID0gQTIoCgkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGFuZFRoZW4sCgkJZGVjb2RlLAoJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ2tleScsICRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpKTsKCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQXR0cigKCQlBMigKCQkJJGVsbSRodG1sJEh0bWwkRXZlbnRzJHByZXZlbnREZWZhdWx0T24sCgkJCSdrZXlkb3duJywKCQkJQTIoCgkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJZnVuY3Rpb24gKGZpcmVkKSB7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoZmlyZWQsIHRydWUpOwoJCQkJfSwKCQkJCWlzS2V5KSkpOwp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkc3BhY2UgPSAnICc7CnZhciAkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHRhYmluZGV4ID0gZnVuY3Rpb24gKG4pIHsKCXJldHVybiBBMigKCQlfVmlydHVhbERvbV9hdHRyaWJ1dGUsCgkJJ3RhYkluZGV4JywKCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQobikpOwp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkYnV0dG9uID0gRjIoCglmdW5jdGlvbiAoYXR0cnMsIF92MCkgewoJCXZhciBvblByZXNzID0gX3YwLm9uUHJlc3M7CgkJdmFyIGxhYmVsID0gX3YwLmxhYmVsOwoJCXJldHVybiBBNCgKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGVsZW1lbnQsCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhc0VsLAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZGl2LAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzaHJpbmspLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRoZWlnaHQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2hyaW5rKSwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGh0bWxDbGFzcygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5jb250ZW50Q2VudGVyWCArICgnICcgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29udGVudENlbnRlclkgKyAoJyAnICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNlQnV0dG9uICsgKCcgJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLm5vVGV4dFNlbGVjdGlvbikpKSkpKSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcG9pbnRlciwKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkZm9jdXNEZWZhdWx0KGF0dHJzKSwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJERlc2NyaWJlKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRCdXR0b24pLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQXR0cigKCQkJCQkJCQkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHRhYmluZGV4KDApKSwKCQkJCQkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCQkJCQlpZiAob25QcmVzcy4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBdHRyKAoJCQkJCQkJCQkJCQkJCSRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkZGlzYWJsZWQodHJ1ZSkpLAoJCQkJCQkJCQkJCQkJYXR0cnMpOwoJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCXZhciBtc2cgPSBvblByZXNzLmE7CgkJCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRFdmVudHMkb25DbGljayhtc2cpLAoJCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRvbktleUxvb2t1cCgKCQkJCQkJCQkJCQkJCQkJZnVuY3Rpb24gKGNvZGUpIHsKCQkJCQkJCQkJCQkJCQkJCXJldHVybiBfVXRpbHNfZXEoY29kZSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkZW50ZXIpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QobXNnKSA6IChfVXRpbHNfZXEoY29kZSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkc3BhY2UpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QobXNnKSA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nKTsKCQkJCQkJCQkJCQkJCQkJfSksCgkJCQkJCQkJCQkJCQkJYXR0cnMpKTsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9KCkpKSkpKSkpLAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVW5rZXllZCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbbGFiZWxdKSkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRidXR0b25CYWNrZ3JvdW5kQ29sb3IgPSB7CglfZGVmYXVsdDogQTMoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiLCAwLjA1NSwgMC4zODgsIDAuNjEyKSwKCW1vdXNlT3ZlcjogQTMoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiLCAwLjA2NywgMC40NjcsIDAuNzMzKQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplID0gMTQ7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nWFkgPSBGMigKCWZ1bmN0aW9uICh4LCB5KSB7CgkJaWYgKF9VdGlsc19lcSh4LCB5KSkgewoJCQl2YXIgZiA9IHg7CgkJCXJldHVybiBBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTdHlsZUNsYXNzLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckcGFkZGluZywKCQkJCUE1KAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQYWRkaW5nU3R5bGUsCgkJCQkJJ3AtJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludCh4KSwKCQkJCQlmLAoJCQkJCWYsCgkJCQkJZiwKCQkJCQlmKSk7CgkJfSBlbHNlIHsKCQkJdmFyIHlGbG9hdCA9IHk7CgkJCXZhciB4RmxvYXQgPSB4OwoJCQlyZXR1cm4gQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGVDbGFzcywKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHBhZGRpbmcsCgkJCQlBNSgKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUGFkZGluZ1N0eWxlLAoJCQkJCSdwLScgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHgpICsgKCctJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludCh5KSkpLAoJCQkJCXlGbG9hdCwKCQkJCQl4RmxvYXQsCgkJCQkJeUZsb2F0LAoJCQkJCXhGbG9hdCkpOwoJCX0KCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYm9yZGVyUm91bmQgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmbGFnKDE3KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJvcmRlciRyb3VuZGVkID0gZnVuY3Rpb24gKHJhZGl1cykgewoJcmV0dXJuIEEyKAoJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTdHlsZUNsYXNzLAoJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGJvcmRlclJvdW5kLAoJCUEzKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU2luZ2xlLAoJCQknYnItJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludChyYWRpdXMpLAoJCQknYm9yZGVyLXJhZGl1cycsCgkJCSRlbG0kY29yZSRTdHJpbmckZnJvbUludChyYWRpdXMpICsgJ3B4JykpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kYnV0dG9uRWxlbWVudCA9IGZ1bmN0aW9uIChidXR0b25Db25maWcpIHsKCXJldHVybiBBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRidXR0b24sCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCYWNrZ3JvdW5kJGNvbG9yKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGJ1dHRvbkJhY2tncm91bmRDb2xvci5fZGVmYXVsdCksCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRtb3VzZU92ZXIoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCYWNrZ3JvdW5kJGNvbG9yKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGJ1dHRvbkJhY2tncm91bmRDb2xvci5tb3VzZU92ZXIpCgkJCQkJXSkpLAoJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFkZGluZ1hZLCAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUsICgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUgLyAyKSB8IDApLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQm9yZGVyJHJvdW5kZWQoMikKCQkJXSksCgkJe2xhYmVsOiBidXR0b25Db25maWcubGFiZWwsIG9uUHJlc3M6IGJ1dHRvbkNvbmZpZy5vblByZXNzfSk7Cn07CnZhciAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRJY29uRGVmID0gRjQoCglmdW5jdGlvbiAocHJlZml4LCBuYW1lLCBzaXplLCBwYXRocykgewoJCXJldHVybiB7bmFtZTogbmFtZSwgcGF0aHM6IHBhdGhzLCBwcmVmaXg6IHByZWZpeCwgc2l6ZTogc2l6ZX07Cgl9KTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJERlZmluaXRpb25zJGNpcmNsZVBsYXkgPSBBNCgKCSRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJEljb25EZWYsCgknZmFzJywKCSdjaXJjbGUtcGxheScsCglfVXRpbHNfVHVwbGUyKDUxMiwgNTEyKSwKCV9VdGlsc19UdXBsZTIoJ00wIDI1NmEyNTYgMjU2IDAgMSAxIDUxMiAwQTI1NiAyNTYgMCAxIDEgMCAyNTZ6TTE4OC4zIDE0Ny4xYy03LjYgNC4yLTEyLjMgMTIuMy0xMi4zIDIwLjlsMCAxNzZjMCA4LjcgNC43IDE2LjcgMTIuMyAyMC45czE2LjggNC4xIDI0LjMtLjVsMTQ0LTg4YzcuMS00LjQgMTEuNS0xMi4xIDExLjUtMjAuNXMtNC40LTE2LjEtMTEuNS0yMC41bC0xNDQtODhjLTcuNC00LjUtMTYuNy00LjctMjQuMy0uNXonLCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZykpOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkSW50ZXJuYWwkSWNvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdJY29uJywgYTogYX07Cn07CnZhciAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRwcmVzZW50ID0gZnVuY3Rpb24gKGljb24pIHsKCXJldHVybiAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRJbnRlcm5hbCRJY29uKAoJCXthdHRyaWJ1dGVzOiBfTGlzdF9OaWwsIGljb246IGljb24sIGlkOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywgb3V0ZXI6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLCByb2xlOiAnaW1nJywgdGl0bGU6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLCB0cmFuc2Zvcm1zOiBfTGlzdF9OaWx9KTsKfTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJGNpcmNsZVBsYXkgPSAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRwcmVzZW50KCRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJERlZmluaXRpb25zJGNpcmNsZVBsYXkpOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkcGxheUNpcmNsZSA9ICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJGNpcmNsZVBsYXk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQXNSb3cgPSB7JDogJ0FzUm93J307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNSb3cgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQXNSb3c7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyb3cgPSBGMigKCWZ1bmN0aW9uIChhdHRycywgY2hpbGRyZW4pIHsKCQlyZXR1cm4gQTQoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbGVtZW50LAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNSb3csCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRkaXYsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRodG1sQ2xhc3MoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29udGVudExlZnQgKyAoJyAnICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29udGVudENlbnRlclkpKSwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2hyaW5rKSwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNocmluayksCgkJCQkJCWF0dHJzKSkpLAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVW5rZXllZChjaGlsZHJlbikpOwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHsKCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVGV4dChjb250ZW50KTsKfTsKdmFyICRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkYXR0cmlidXRlID0gJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJGF0dHJpYnV0ZTsKdmFyICRlbG0kc3ZnJFN2ZyRBdHRyaWJ1dGVzJGNsYXNzID0gX1ZpcnR1YWxEb21fYXR0cmlidXRlKCdjbGFzcycpOwp2YXIgJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkaWQgPSBfVmlydHVhbERvbV9hdHRyaWJ1dGUoJ2lkJyk7CnZhciAkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJG1hcCA9ICRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRtYXBBdHRyaWJ1dGU7CnZhciAkZWxtJHN2ZyRTdmckdGV4dCA9ICRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSR0ZXh0Owp2YXIgJGVsbSRzdmckU3ZnJHRpdGxlID0gJGVsbSRzdmckU3ZnJHRydXN0ZWROb2RlKCd0aXRsZScpOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkSW50ZXJuYWwkdG9wTGV2ZWxEaW1lbnNpb25zID0gZnVuY3Rpb24gKF92MSkgewoJdmFyIGljb24gPSBfdjEuYS5pY29uOwoJdmFyIG91dGVyID0gX3YxLmEub3V0ZXI7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCWljb24uc2l6ZSwKCQlBMigkZWxtJGNvcmUkTWF5YmUkbWFwLCAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRJbnRlcm5hbCR0b3BMZXZlbERpbWVuc2lvbnNJbnRlcm5hbCwgb3V0ZXIpKTsKfTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJEludGVybmFsJHRvcExldmVsRGltZW5zaW9uc0ludGVybmFsID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIGljb24gPSBfdjAuYS5pY29uOwoJdmFyIG91dGVyID0gX3YwLmEub3V0ZXI7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCWljb24uc2l6ZSwKCQlBMigkZWxtJGNvcmUkTWF5YmUkbWFwLCAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRJbnRlcm5hbCR0b3BMZXZlbERpbWVuc2lvbnMsIG91dGVyKSk7Cn07CnZhciAkZWxtJHN2ZyRTdmckZGVmcyA9ICRlbG0kc3ZnJFN2ZyR0cnVzdGVkTm9kZSgnZGVmcycpOwp2YXIgJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkaGVpZ2h0ID0gX1ZpcnR1YWxEb21fYXR0cmlidXRlKCdoZWlnaHQnKTsKdmFyICRlbG0kc3ZnJFN2ZyRBdHRyaWJ1dGVzJHdpZHRoID0gX1ZpcnR1YWxEb21fYXR0cmlidXRlKCd3aWR0aCcpOwp2YXIgJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkeCA9IF9WaXJ0dWFsRG9tX2F0dHJpYnV0ZSgneCcpOwp2YXIgJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkeSA9IF9WaXJ0dWFsRG9tX2F0dHJpYnV0ZSgneScpOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU3ZnJGZpbGwgPSBfTGlzdF9mcm9tQXJyYXkoCglbCgkJJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkeCgnMCcpLAoJCSRlbG0kc3ZnJFN2ZyRBdHRyaWJ1dGVzJHkoJzAnKSwKCQkkZWxtJHN2ZyRTdmckQXR0cmlidXRlcyR3aWR0aCgnMTAwJScpLAoJCSRlbG0kc3ZnJFN2ZyRBdHRyaWJ1dGVzJGhlaWdodCgnMTAwJScpCgldKTsKdmFyICRlbG0kc3ZnJFN2ZyRnID0gJGVsbSRzdmckU3ZnJHRydXN0ZWROb2RlKCdnJyk7CnZhciAkZWxtJHN2ZyRTdmckbWFzayA9ICRlbG0kc3ZnJFN2ZyR0cnVzdGVkTm9kZSgnbWFzaycpOwp2YXIgJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkbWFzayA9IF9WaXJ0dWFsRG9tX2F0dHJpYnV0ZSgnbWFzaycpOwp2YXIgJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkbWFza0NvbnRlbnRVbml0cyA9IF9WaXJ0dWFsRG9tX2F0dHJpYnV0ZSgnbWFza0NvbnRlbnRVbml0cycpOwp2YXIgJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkbWFza1VuaXRzID0gX1ZpcnR1YWxEb21fYXR0cmlidXRlKCdtYXNrVW5pdHMnKTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFRyYW5zZm9ybXMkSW50ZXJuYWwkYWRkID0gRjIoCglmdW5jdGlvbiAodHJhbnNmb3JtLCBjb21iaW5lZCkgewoJCXN3aXRjaCAodHJhbnNmb3JtLiQpIHsKCQkJY2FzZSAnU2NhbGUnOgoJCQkJdmFyIGJ5ID0gdHJhbnNmb3JtLmE7CgkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQljb21iaW5lZCwKCQkJCQl7c2l6ZTogY29tYmluZWQuc2l6ZSArIGJ5fSk7CgkJCWNhc2UgJ1JlcG9zaXRpb24nOgoJCQkJdmFyIGF4aXMgPSB0cmFuc2Zvcm0uYTsKCQkJCXZhciBieSA9IHRyYW5zZm9ybS5iOwoJCQkJdmFyIF92MSA9IGZ1bmN0aW9uICgpIHsKCQkJCQlpZiAoYXhpcy4kID09PSAnVmVydGljYWwnKSB7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKDAsIGJ5KTsKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihieSwgMCk7CgkJCQkJfQoJCQkJfSgpOwoJCQkJdmFyIHggPSBfdjEuYTsKCQkJCXZhciB5ID0gX3YxLmI7CgkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQljb21iaW5lZCwKCQkJCQl7eDogY29tYmluZWQueCArIHgsIHk6IGNvbWJpbmVkLnkgKyB5fSk7CgkJCWNhc2UgJ1JvdGF0ZSc6CgkJCQl2YXIgcm90YXRpb24gPSB0cmFuc2Zvcm0uYTsKCQkJCXJldHVybiBfVXRpbHNfdXBkYXRlKAoJCQkJCWNvbWJpbmVkLAoJCQkJCXtyb3RhdGU6IGNvbWJpbmVkLnJvdGF0ZSArIHJvdGF0aW9ufSk7CgkJCWRlZmF1bHQ6CgkJCQl2YXIgYXhpcyA9IHRyYW5zZm9ybS5hOwoJCQkJaWYgKGF4aXMuJCA9PT0gJ1ZlcnRpY2FsJykgewoJCQkJCXJldHVybiBfVXRpbHNfdXBkYXRlKAoJCQkJCQljb21iaW5lZCwKCQkJCQkJe2ZsaXBZOiAhY29tYmluZWQuZmxpcFl9KTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIF9VdGlsc191cGRhdGUoCgkJCQkJCWNvbWJpbmVkLAoJCQkJCQl7ZmxpcFg6ICFjb21iaW5lZC5mbGlwWH0pOwoJCQkJfQoJCX0KCX0pOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkVHJhbnNmb3JtcyRJbnRlcm5hbCRiYXNlU2l6ZSA9IDE2Owp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkVHJhbnNmb3JtcyRJbnRlcm5hbCRtZWFuaW5nbGVzc1RyYW5zZm9ybSA9IHtmbGlwWDogZmFsc2UsIGZsaXBZOiBmYWxzZSwgcm90YXRlOiAwLCBzaXplOiAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRUcmFuc2Zvcm1zJEludGVybmFsJGJhc2VTaXplLCB4OiAwLCB5OiAwfTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFRyYW5zZm9ybXMkSW50ZXJuYWwkY29tYmluZSA9IGZ1bmN0aW9uICh0cmFuc2Zvcm1zKSB7CglyZXR1cm4gQTMoJGVsbSRjb3JlJExpc3QkZm9sZGwsICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFRyYW5zZm9ybXMkSW50ZXJuYWwkYWRkLCAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRUcmFuc2Zvcm1zJEludGVybmFsJG1lYW5pbmdsZXNzVHJhbnNmb3JtLCB0cmFuc2Zvcm1zKTsKfTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFRyYW5zZm9ybXMkSW50ZXJuYWwkbWVhbmluZ2Z1bFRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0cmFuc2Zvcm1zKSB7Cgl2YXIgY29tYmluZWQgPSAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRUcmFuc2Zvcm1zJEludGVybmFsJGNvbWJpbmUodHJhbnNmb3Jtcyk7CglyZXR1cm4gX1V0aWxzX2VxKGNvbWJpbmVkLCAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRUcmFuc2Zvcm1zJEludGVybmFsJG1lYW5pbmdsZXNzVHJhbnNmb3JtKSA/ICRlbG0kY29yZSRNYXliZSROb3RoaW5nIDogJGVsbSRjb3JlJE1heWJlJEp1c3QoY29tYmluZWQpOwp9Owp2YXIgJGVsbSRzdmckU3ZnJHJlY3QgPSAkZWxtJHN2ZyRTdmckdHJ1c3RlZE5vZGUoJ3JlY3QnKTsKdmFyICRlbG0kc3ZnJFN2ZyRBdHRyaWJ1dGVzJHRyYW5zZm9ybSA9IF9WaXJ0dWFsRG9tX2F0dHJpYnV0ZSgndHJhbnNmb3JtJyk7CnZhciAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRUcmFuc2Zvcm1zJEludGVybmFsJHRyYW5zZm9ybUZvclN2ZyA9IEYzKAoJZnVuY3Rpb24gKGNvbnRhaW5lcldpZHRoLCBpY29uV2lkdGgsIHRyYW5zZm9ybSkgewoJCXZhciBwYXRoID0gJ3RyYW5zbGF0ZSgnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUZsb2F0KChpY29uV2lkdGggLyAyKSAqICgtMSkpICsgJyAtMjU2KScpOwoJCXZhciBvdXRlciA9ICd0cmFuc2xhdGUoJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21GbG9hdChjb250YWluZXJXaWR0aCAvIDIpICsgJyAyNTYpJyk7CgkJdmFyIGlubmVyVHJhbnNsYXRlID0gJ3RyYW5zbGF0ZSgnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUZsb2F0KHRyYW5zZm9ybS54ICogMzIpICsgKCcsJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21GbG9hdCh0cmFuc2Zvcm0ueSAqIDMyKSArICcpICcpKSk7CgkJdmFyIGlubmVyUm90YXRlID0gJ3JvdGF0ZSgnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUZsb2F0KHRyYW5zZm9ybS5yb3RhdGUpICsgJyAwIDApJyk7CgkJdmFyIGZsaXBZID0gdHJhbnNmb3JtLmZsaXBZID8gKC0xKSA6IDE7CgkJdmFyIHNjYWxlWSA9ICh0cmFuc2Zvcm0uc2l6ZSAvICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFRyYW5zZm9ybXMkSW50ZXJuYWwkYmFzZVNpemUpICogZmxpcFk7CgkJdmFyIGZsaXBYID0gdHJhbnNmb3JtLmZsaXBYID8gKC0xKSA6IDE7CgkJdmFyIHNjYWxlWCA9ICh0cmFuc2Zvcm0uc2l6ZSAvICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFRyYW5zZm9ybXMkSW50ZXJuYWwkYmFzZVNpemUpICogZmxpcFg7CgkJdmFyIGlubmVyU2NhbGUgPSAnc2NhbGUoJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21GbG9hdChzY2FsZVgpICsgKCcsICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQoc2NhbGVZKSArICcpICcpKSk7CgkJcmV0dXJuIHsKCQkJaW5uZXI6ICRlbG0kc3ZnJFN2ZyRBdHRyaWJ1dGVzJHRyYW5zZm9ybSgKCQkJCV9VdGlsc19hcCgKCQkJCQlpbm5lclRyYW5zbGF0ZSwKCQkJCQlfVXRpbHNfYXAoaW5uZXJTY2FsZSwgaW5uZXJSb3RhdGUpKSksCgkJCW91dGVyOiAkZWxtJHN2ZyRTdmckQXR0cmlidXRlcyR0cmFuc2Zvcm0ob3V0ZXIpLAoJCQlwYXRoOiAkZWxtJHN2ZyRTdmckQXR0cmlidXRlcyR0cmFuc2Zvcm0ocGF0aCkKCQl9OwoJfSk7CnZhciAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRTdmckdmlld1BhdGggPSBGMigKCWZ1bmN0aW9uIChhdHRycywgZCkgewoJCXJldHVybiBBMigKCQkJJGVsbSRzdmckU3ZnJHBhdGgsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCSRlbG0kc3ZnJFN2ZyRBdHRyaWJ1dGVzJGQoZCksCgkJCQlhdHRycyksCgkJCV9MaXN0X05pbCk7Cgl9KTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFN2ZyR2aWV3UGF0aHMgPSBGMigKCWZ1bmN0aW9uIChhdHRycywgX3YwKSB7CgkJdmFyIHBhdGhzID0gX3YwLnBhdGhzOwoJCWlmIChwYXRocy5iLiQgPT09ICdOb3RoaW5nJykgewoJCQl2YXIgb25seSA9IHBhdGhzLmE7CgkJCXZhciBfdjIgPSBwYXRocy5iOwoJCQlyZXR1cm4gQTIoJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU3ZnJHZpZXdQYXRoLCBhdHRycywgb25seSk7CgkJfSBlbHNlIHsKCQkJdmFyIHNlY29uZGFyeSA9IHBhdGhzLmE7CgkJCXZhciBwcmltYXJ5ID0gcGF0aHMuYi5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJHN2ZyRTdmckZywKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRlbG0kc3ZnJFN2ZyRBdHRyaWJ1dGVzJGNsYXNzKCdmYS1ncm91cCcpCgkJCQkJXSksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigKCQkJCQkJJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU3ZnJHZpZXdQYXRoLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkkZWxtJHN2ZyRTdmckQXR0cmlidXRlcyRjbGFzcygnZmEtc2Vjb25kYXJ5JyksCgkJCQkJCQlhdHRycyksCgkJCQkJCXNlY29uZGFyeSksCgkJCQkJCUEyKAoJCQkJCQkkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRTdmckdmlld1BhdGgsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCSRlbG0kc3ZnJFN2ZyRBdHRyaWJ1dGVzJGNsYXNzKCdmYS1wcmltYXJ5JyksCgkJCQkJCQlhdHRycyksCgkJCQkJCXByaW1hcnkpCgkJCQkJXSkpOwoJCX0KCX0pOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU3ZnJHZpZXdXaXRoVHJhbnNmb3JtID0gRjMoCglmdW5jdGlvbiAoY29sb3IsIF92MCwgaWNvbikgewoJCXZhciBvdXRlciA9IF92MC5vdXRlcjsKCQl2YXIgaW5uZXIgPSBfdjAuaW5uZXI7CgkJdmFyIHBhdGggPSBfdjAucGF0aDsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kc3ZnJFN2ZyRnLAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbb3V0ZXJdKSwKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCUEyKAoJCQkJCSRlbG0kc3ZnJFN2ZyRnLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJW2lubmVyXSksCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlBMigKCQkJCQkJCSRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFN2ZyR2aWV3UGF0aHMsCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQkkZWxtJHN2ZyRTdmckQXR0cmlidXRlcyRmaWxsKGNvbG9yKSwKCQkJCQkJCQkJcGF0aAoJCQkJCQkJCV0pLAoJCQkJCQkJaWNvbikKCQkJCQkJXSkpCgkJCQldKSk7Cgl9KTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFN2ZyR2aWV3SW5Db2xvciA9IEYyKAoJZnVuY3Rpb24gKGNvbG9yLCBmdWxsSWNvbikgewoJCXZhciBpY29uID0gZnVsbEljb24uYS5pY29uOwoJCXZhciB0cmFuc2Zvcm1zID0gZnVsbEljb24uYS50cmFuc2Zvcm1zOwoJCXZhciBpZCA9IGZ1bGxJY29uLmEuaWQ7CgkJdmFyIG91dGVyID0gZnVsbEljb24uYS5vdXRlcjsKCQl2YXIgY29tYmluZWRUcmFuc2Zvcm1zID0gJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkVHJhbnNmb3JtcyRJbnRlcm5hbCRtZWFuaW5nZnVsVHJhbnNmb3JtKHRyYW5zZm9ybXMpOwoJCXZhciBfdjAgPSBpY29uLnNpemU7CgkJdmFyIHdpZHRoID0gX3YwLmE7CgkJdmFyIF92MSA9ICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJEludGVybmFsJHRvcExldmVsRGltZW5zaW9ucyhmdWxsSWNvbik7CgkJdmFyIHRvcExldmVsV2lkdGggPSBfdjEuYTsKCQlpZiAoY29tYmluZWRUcmFuc2Zvcm1zLiQgPT09ICdKdXN0JykgewoJCQl2YXIgbWVhbmluZ2Z1bFRyYW5zZm9ybSA9IGNvbWJpbmVkVHJhbnNmb3Jtcy5hOwoJCQl2YXIgc3ZnVHJhbnNmb3JtID0gQTMoJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkVHJhbnNmb3JtcyRJbnRlcm5hbCR0cmFuc2Zvcm1Gb3JTdmcsIHRvcExldmVsV2lkdGgsIHdpZHRoLCBtZWFuaW5nZnVsVHJhbnNmb3JtKTsKCQkJaWYgKG91dGVyLiQgPT09ICdKdXN0JykgewoJCQkJdmFyIG91dGVySWNvbiA9IG91dGVyLmE7CgkJCQlyZXR1cm4gQTQoJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU3ZnJHZpZXdNYXNrZWRXaXRoVHJhbnNmb3JtLCBjb2xvciwgc3ZnVHJhbnNmb3JtLCBpY29uLCBvdXRlckljb24pOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIEEzKCRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFN2ZyR2aWV3V2l0aFRyYW5zZm9ybSwgY29sb3IsIHN2Z1RyYW5zZm9ybSwgaWNvbik7CgkJCX0KCQl9IGVsc2UgewoJCQlyZXR1cm4gQTIoCgkJCQkkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRTdmckdmlld1BhdGhzLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkZmlsbChjb2xvcikKCQkJCQldKSwKCQkJCWljb24pOwoJCX0KCX0pOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU3ZnJHZpZXdNYXNrZWRXaXRoVHJhbnNmb3JtID0gRjQoCglmdW5jdGlvbiAoY29sb3IsIHRyYW5zZm9ybXMsIGV4Y2x1ZGUsIGluY2x1ZGUpIHsKCQl2YXIgaWQgPSBpbmNsdWRlLmEuaWQ7CgkJdmFyIGFsd2F5c0lkID0gQTIoJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LCAnJywgaWQpOwoJCXZhciBjbGlwSWQgPSAnY2xpcC0nICsgYWx3YXlzSWQ7CgkJdmFyIG1hc2tJZCA9ICdtYXNrLScgKyBhbHdheXNJZDsKCQl2YXIgbWFza1RhZyA9IEEyKAoJCQkkZWxtJHN2ZyRTdmckbWFzaywKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkaWQobWFza0lkKSwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkbWFza1VuaXRzKCd1c2VyU3BhY2VPblVzZScpLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkkZWxtJHN2ZyRTdmckQXR0cmlidXRlcyRtYXNrQ29udGVudFVuaXRzKCd1c2VyU3BhY2VPblVzZScpLAoJCQkJCQkkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRTdmckZmlsbCkpKSwKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCUEyKCRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFN2ZyR2aWV3SW5Db2xvciwgJ3doaXRlJywgaW5jbHVkZSksCgkJCQkJQTMoJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU3ZnJHZpZXdXaXRoVHJhbnNmb3JtLCAnYmxhY2snLCB0cmFuc2Zvcm1zLCBleGNsdWRlKQoJCQkJXSkpOwoJCXZhciBkZWZzID0gQTIoCgkJCSRlbG0kc3ZnJFN2ZyRkZWZzLAoJCQlfTGlzdF9OaWwsCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVttYXNrVGFnXSkpOwoJCXZhciByZWN0ID0gQTIoCgkJCSRlbG0kc3ZnJFN2ZyRyZWN0LAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkkZWxtJHN2ZyRTdmckQXR0cmlidXRlcyRmaWxsKGNvbG9yKSwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkbWFzaygndXJsKCMnICsgKG1hc2tJZCArICcpJykpLAoJCQkJCSRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFN2ZyRmaWxsKSksCgkJCV9MaXN0X05pbCk7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJHN2ZyRTdmckZywKCQkJX0xpc3RfTmlsLAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbZGVmcywgcmVjdF0pKTsKCX0pOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU3ZnJHZpZXcgPSAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRTdmckdmlld0luQ29sb3IoJ2N1cnJlbnRDb2xvcicpOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkaW50ZXJuYWxWaWV3ID0gRjIoCglmdW5jdGlvbiAoZnVsbEljb24sIGV4dHJhQXR0cmlidXRlcykgewoJCXZhciBpY29uID0gZnVsbEljb24uYS5pY29uOwoJCXZhciB0cmFuc2Zvcm1zID0gZnVsbEljb24uYS50cmFuc2Zvcm1zOwoJCXZhciByb2xlID0gZnVsbEljb24uYS5yb2xlOwoJCXZhciBpZCA9IGZ1bGxJY29uLmEuaWQ7CgkJdmFyIHRpdGxlID0gZnVsbEljb24uYS50aXRsZTsKCQl2YXIgb3V0ZXIgPSBmdWxsSWNvbi5hLm91dGVyOwoJCXZhciBhdHRyaWJ1dGVzID0gZnVsbEljb24uYS5hdHRyaWJ1dGVzOwoJCXZhciBjb250ZW50cyA9ICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFN2ZyR2aWV3KGZ1bGxJY29uKTsKCQl2YXIgX3YwID0gZnVuY3Rpb24gKCkgewoJCQlpZiAodGl0bGUuJCA9PT0gJ0p1c3QnKSB7CgkJCQl2YXIgZ2l2ZW5UaXRsZSA9IHRpdGxlLmE7CgkJCQl2YXIgdGl0bGVJZCA9IEEyKCRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwgJycsIGlkKSArICctdGl0bGUnOwoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRhdHRyaWJ1dGUsICdhcmlhLWxhYmVsbGVkYnknLCB0aXRsZUlkKSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCUEyKAoJCQkJCQkJJGVsbSRzdmckU3ZnJHRpdGxlLAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkaWQodGl0bGVJZCkKCQkJCQkJCQldKSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCSRlbG0kc3ZnJFN2ZyR0ZXh0KGdpdmVuVGl0bGUpCgkJCQkJCQkJXSkpLAoJCQkJCQkJY29udGVudHMKCQkJCQkJXSkpOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRhdHRyaWJ1dGUsICdhcmlhLWhpZGRlbicsICd0cnVlJyksCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbY29udGVudHNdKSk7CgkJCX0KCQl9KCk7CgkJdmFyIHNlbWFudGljcyA9IF92MC5hOwoJCXZhciBwb3RlbnRpYWxseVRpdGxlZENvbnRlbnRzID0gX3YwLmI7CgkJdmFyIF92MiA9ICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJEludGVybmFsJHRvcExldmVsRGltZW5zaW9ucyhmdWxsSWNvbik7CgkJdmFyIHdpZHRoID0gX3YyLmE7CgkJdmFyIGhlaWdodCA9IF92Mi5iOwoJCXZhciBhc3BlY3RSYXRpbyA9ICRlbG0kY29yZSRCYXNpY3MkY2VpbGluZygod2lkdGggLyBoZWlnaHQpICogMTYpOwoJCXZhciBjbGFzc2VzID0gX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQknc3ZnLWlubGluZS0tZmEnLAoJCQkJJ2ZhLScgKyBpY29uLm5hbWUsCgkJCQknZmEtdy0nICsgJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KGFzcGVjdFJhdGlvKQoJCQldKTsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kc3ZnJFN2ZyRzdmcsCgkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRhdHRyaWJ1dGUsICdyb2xlJywgcm9sZSksCgkJCQkJCQlBMigkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJGF0dHJpYnV0ZSwgJ3htbG5zJywgJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyksCgkJCQkJCQkkZWxtJHN2ZyRTdmckQXR0cmlidXRlcyR2aWV3Qm94KAoJCQkJCQkJJzAgMCAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludCh3aWR0aCkgKyAoJyAnICsgJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KGhlaWdodCkpKSksCgkJCQkJCQlzZW1hbnRpY3MKCQkJCQkJXSksCgkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkY2xhc3MsIGNsYXNzZXMpLAoJCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJG1hcCgkZWxtJGNvcmUkQmFzaWNzJG5ldmVyKSwKCQkJCQkJYXR0cmlidXRlcyksCgkJCQkJCWV4dHJhQXR0cmlidXRlcwoJCQkJCV0pKSwKCQkJcG90ZW50aWFsbHlUaXRsZWRDb250ZW50cyk7Cgl9KTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJHZpZXcgPSBmdW5jdGlvbiAocHJlc2VudGF0aW9uKSB7CglyZXR1cm4gQTIoJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkaW50ZXJuYWxWaWV3LCBwcmVzZW50YXRpb24sIF9MaXN0X05pbCk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRidXR0b25Db21waWxlID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kYnV0dG9uRWxlbWVudCgKCXsKCQlsYWJlbDogQTIoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJvdywKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKSwKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sQXR0cmlidXRlKAoJCQkJCSRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkdGl0bGUoJ0NvbXBpbGUnKSkKCQkJCV0pLAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJQTIoCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwsCgkJCQkJX0xpc3RfTmlsLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWwoCgkJCQkJCSRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJHZpZXcoJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkcGxheUNpcmNsZSkpKSwKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdDb21waWxlJykKCQkJCV0pKSwKCQlvblByZXNzOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRDb21waWxlKQoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ2VudGVyWSA9IHskOiAnQ2VudGVyWSd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY2VudGVyWSA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBbGlnblkoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJENlbnRlclkpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckb3ZlcmZsb3cgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmbGFnKDIwKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNsaXAgPSBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ2xhc3MsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJG92ZXJmbG93LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5jbGlwKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGZvbnRDb2xvciA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGZsYWcoMTQpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkRm9udCRjb2xvciA9IGZ1bmN0aW9uIChmb250Q29sb3IpIHsKCXJldHVybiBBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGVDbGFzcywKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmb250Q29sb3IsCgkJQTMoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRDb2xvcmVkLAoJCQknZmMtJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmb3JtYXRDb2xvckNsYXNzKGZvbnRDb2xvciksCgkJCSdjb2xvcicsCgkJCWZvbnRDb2xvcikpOwp9Owp2YXIgJGVsbSRodG1sJEh0bWwkbm9kZSA9ICRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRub2RlOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU3R5bGVzJGNzcyA9IEEzKAoJJGVsbSRodG1sJEh0bWwkbm9kZSwKCSdzdHlsZScsCglfTGlzdF9OaWwsCglfTGlzdF9mcm9tQXJyYXkoCgkJWwoJCQkkZWxtJGh0bWwkSHRtbCR0ZXh0KCc6cm9vdCwgOmhvc3QgeyAgLS1mYS1mb250LXNvbGlkOiBub3JtYWwgOTAwIDFlbS8xIFwiRm9udCBBd2Vzb21lIDYgRnJlZVwiOyAgLS1mYS1mb250LXJlZ3VsYXI6IG5vcm1hbCA0MDAgMWVtLzEgXCJGb250IEF3ZXNvbWUgNiBGcmVlXCI7ICAtLWZhLWZvbnQtbGlnaHQ6IG5vcm1hbCAzMDAgMWVtLzEgXCJGb250IEF3ZXNvbWUgNiBQcm9cIjsgIC0tZmEtZm9udC10aGluOiBub3JtYWwgMTAwIDFlbS8xIFwiRm9udCBBd2Vzb21lIDYgUHJvXCI7ICAtLWZhLWZvbnQtZHVvdG9uZTogbm9ybWFsIDkwMCAxZW0vMSBcIkZvbnQgQXdlc29tZSA2IER1b3RvbmVcIjsgIC0tZmEtZm9udC1kdW90b25lLXJlZ3VsYXI6IG5vcm1hbCA0MDAgMWVtLzEgXCJGb250IEF3ZXNvbWUgNiBEdW90b25lXCI7ICAtLWZhLWZvbnQtZHVvdG9uZS1saWdodDogbm9ybWFsIDMwMCAxZW0vMSBcIkZvbnQgQXdlc29tZSA2IER1b3RvbmVcIjsgIC0tZmEtZm9udC1kdW90b25lLXRoaW46IG5vcm1hbCAxMDAgMWVtLzEgXCJGb250IEF3ZXNvbWUgNiBEdW90b25lXCI7ICAtLWZhLWZvbnQtYnJhbmRzOiBub3JtYWwgNDAwIDFlbS8xIFwiRm9udCBBd2Vzb21lIDYgQnJhbmRzXCI7ICAtLWZhLWZvbnQtc2hhcnAtc29saWQ6IG5vcm1hbCA5MDAgMWVtLzEgXCJGb250IEF3ZXNvbWUgNiBTaGFycFwiOyAgLS1mYS1mb250LXNoYXJwLXJlZ3VsYXI6IG5vcm1hbCA0MDAgMWVtLzEgXCJGb250IEF3ZXNvbWUgNiBTaGFycFwiOyAgLS1mYS1mb250LXNoYXJwLWxpZ2h0OiBub3JtYWwgMzAwIDFlbS8xIFwiRm9udCBBd2Vzb21lIDYgU2hhcnBcIjsgIC0tZmEtZm9udC1zaGFycC10aGluOiBub3JtYWwgMTAwIDFlbS8xIFwiRm9udCBBd2Vzb21lIDYgU2hhcnBcIjsgIC0tZmEtZm9udC1zaGFycC1kdW90b25lLXNvbGlkOiBub3JtYWwgOTAwIDFlbS8xIFwiRm9udCBBd2Vzb21lIDYgU2hhcnAgRHVvdG9uZVwiOyAgLS1mYS1mb250LXNoYXJwLWR1b3RvbmUtcmVndWxhcjogbm9ybWFsIDQwMCAxZW0vMSBcIkZvbnQgQXdlc29tZSA2IFNoYXJwIER1b3RvbmVcIjsgIC0tZmEtZm9udC1zaGFycC1kdW90b25lLWxpZ2h0OiBub3JtYWwgMzAwIDFlbS8xIFwiRm9udCBBd2Vzb21lIDYgU2hhcnAgRHVvdG9uZVwiOyAgLS1mYS1mb250LXNoYXJwLWR1b3RvbmUtdGhpbjogbm9ybWFsIDEwMCAxZW0vMSBcIkZvbnQgQXdlc29tZSA2IFNoYXJwIER1b3RvbmVcIjt9c3ZnOm5vdCg6cm9vdCkuc3ZnLWlubGluZS0tZmEsIHN2Zzpub3QoOmhvc3QpLnN2Zy1pbmxpbmUtLWZhIHsgIG92ZXJmbG93OiB2aXNpYmxlOyAgYm94LXNpemluZzogY29udGVudC1ib3g7fS5zdmctaW5saW5lLS1mYSB7ICBkaXNwbGF5OiB2YXIoLS1mYS1kaXNwbGF5LCBpbmxpbmUtYmxvY2spOyAgaGVpZ2h0OiAxZW07ICBvdmVyZmxvdzogdmlzaWJsZTsgIHZlcnRpY2FsLWFsaWduOiAtMC4xMjVlbTt9LnN2Zy1pbmxpbmUtLWZhLmZhLTJ4cyB7ICB2ZXJ0aWNhbC1hbGlnbjogMC4xZW07fS5zdmctaW5saW5lLS1mYS5mYS14cyB7ICB2ZXJ0aWNhbC1hbGlnbjogMGVtO30uc3ZnLWlubGluZS0tZmEuZmEtc20geyAgdmVydGljYWwtYWxpZ246IC0wLjA3MTQyODU3MDVlbTt9LnN2Zy1pbmxpbmUtLWZhLmZhLWxnIHsgIHZlcnRpY2FsLWFsaWduOiAtMC4yZW07fS5zdmctaW5saW5lLS1mYS5mYS14bCB7ICB2ZXJ0aWNhbC1hbGlnbjogLTAuMjVlbTt9LnN2Zy1pbmxpbmUtLWZhLmZhLTJ4bCB7ICB2ZXJ0aWNhbC1hbGlnbjogLTAuMzEyNWVtO30uc3ZnLWlubGluZS0tZmEuZmEtcHVsbC1sZWZ0IHsgIG1hcmdpbi1yaWdodDogdmFyKC0tZmEtcHVsbC1tYXJnaW4sIDAuM2VtKTsgIHdpZHRoOiBhdXRvO30uc3ZnLWlubGluZS0tZmEuZmEtcHVsbC1yaWdodCB7ICBtYXJnaW4tbGVmdDogdmFyKC0tZmEtcHVsbC1tYXJnaW4sIDAuM2VtKTsgIHdpZHRoOiBhdXRvO30uc3ZnLWlubGluZS0tZmEuZmEtbGkgeyAgd2lkdGg6IHZhcigtLWZhLWxpLXdpZHRoLCAyZW0pOyAgdG9wOiAwLjI1ZW07fS5zdmctaW5saW5lLS1mYS5mYS1mdyB7ICB3aWR0aDogdmFyKC0tZmEtZnctd2lkdGgsIDEuMjVlbSk7fS5mYS1sYXllcnMgc3ZnLnN2Zy1pbmxpbmUtLWZhIHsgIGJvdHRvbTogMDsgIGxlZnQ6IDA7ICBtYXJnaW46IGF1dG87ICBwb3NpdGlvbjogYWJzb2x1dGU7ICByaWdodDogMDsgIHRvcDogMDt9LmZhLWxheWVycy1jb3VudGVyLCAuZmEtbGF5ZXJzLXRleHQgeyAgZGlzcGxheTogaW5saW5lLWJsb2NrOyAgcG9zaXRpb246IGFic29sdXRlOyAgdGV4dC1hbGlnbjogY2VudGVyO30uZmEtbGF5ZXJzIHsgIGRpc3BsYXk6IGlubGluZS1ibG9jazsgIGhlaWdodDogMWVtOyAgcG9zaXRpb246IHJlbGF0aXZlOyAgdGV4dC1hbGlnbjogY2VudGVyOyAgdmVydGljYWwtYWxpZ246IC0wLjEyNWVtOyAgd2lkdGg6IDFlbTt9LmZhLWxheWVycyBzdmcuc3ZnLWlubGluZS0tZmEgeyAgdHJhbnNmb3JtLW9yaWdpbjogY2VudGVyIGNlbnRlcjt9LmZhLWxheWVycy10ZXh0IHsgIGxlZnQ6IDUwJTsgIHRvcDogNTAlOyAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7ICB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXIgY2VudGVyO30uZmEtbGF5ZXJzLWNvdW50ZXIgeyAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZmEtY291bnRlci1iYWNrZ3JvdW5kLWNvbG9yLCAjZmYyNTNhKTsgIGJvcmRlci1yYWRpdXM6IHZhcigtLWZhLWNvdW50ZXItYm9yZGVyLXJhZGl1cywgMWVtKTsgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7ICBjb2xvcjogdmFyKC0tZmEtaW52ZXJzZSwgI2ZmZik7ICBsaW5lLWhlaWdodDogdmFyKC0tZmEtY291bnRlci1saW5lLWhlaWdodCwgMSk7ICBtYXgtd2lkdGg6IHZhcigtLWZhLWNvdW50ZXItbWF4LXdpZHRoLCA1ZW0pOyAgbWluLXdpZHRoOiB2YXIoLS1mYS1jb3VudGVyLW1pbi13aWR0aCwgMS41ZW0pOyAgb3ZlcmZsb3c6IGhpZGRlbjsgIHBhZGRpbmc6IHZhcigtLWZhLWNvdW50ZXItcGFkZGluZywgMC4yNWVtIDAuNWVtKTsgIHJpZ2h0OiB2YXIoLS1mYS1yaWdodCwgMCk7ICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgIHRvcDogdmFyKC0tZmEtdG9wLCAwKTsgIHRyYW5zZm9ybTogc2NhbGUodmFyKC0tZmEtY291bnRlci1zY2FsZSwgMC4yNSkpOyAgdHJhbnNmb3JtLW9yaWdpbjogdG9wIHJpZ2h0O30uZmEtbGF5ZXJzLWJvdHRvbS1yaWdodCB7ICBib3R0b206IHZhcigtLWZhLWJvdHRvbSwgMCk7ICByaWdodDogdmFyKC0tZmEtcmlnaHQsIDApOyAgdG9wOiBhdXRvOyAgdHJhbnNmb3JtOiBzY2FsZSh2YXIoLS1mYS1sYXllcnMtc2NhbGUsIDAuMjUpKTsgIHRyYW5zZm9ybS1vcmlnaW46IGJvdHRvbSByaWdodDt9LmZhLWxheWVycy1ib3R0b20tbGVmdCB7ICBib3R0b206IHZhcigtLWZhLWJvdHRvbSwgMCk7ICBsZWZ0OiB2YXIoLS1mYS1sZWZ0LCAwKTsgIHJpZ2h0OiBhdXRvOyAgdG9wOiBhdXRvOyAgdHJhbnNmb3JtOiBzY2FsZSh2YXIoLS1mYS1sYXllcnMtc2NhbGUsIDAuMjUpKTsgIHRyYW5zZm9ybS1vcmlnaW46IGJvdHRvbSBsZWZ0O30uZmEtbGF5ZXJzLXRvcC1yaWdodCB7ICB0b3A6IHZhcigtLWZhLXRvcCwgMCk7ICByaWdodDogdmFyKC0tZmEtcmlnaHQsIDApOyAgdHJhbnNmb3JtOiBzY2FsZSh2YXIoLS1mYS1sYXllcnMtc2NhbGUsIDAuMjUpKTsgIHRyYW5zZm9ybS1vcmlnaW46IHRvcCByaWdodDt9LmZhLWxheWVycy10b3AtbGVmdCB7ICBsZWZ0OiB2YXIoLS1mYS1sZWZ0LCAwKTsgIHJpZ2h0OiBhdXRvOyAgdG9wOiB2YXIoLS1mYS10b3AsIDApOyAgdHJhbnNmb3JtOiBzY2FsZSh2YXIoLS1mYS1sYXllcnMtc2NhbGUsIDAuMjUpKTsgIHRyYW5zZm9ybS1vcmlnaW46IHRvcCBsZWZ0O30uZmEtMXggeyAgZm9udC1zaXplOiAxZW07fS5mYS0yeCB7ICBmb250LXNpemU6IDJlbTt9LmZhLTN4IHsgIGZvbnQtc2l6ZTogM2VtO30uZmEtNHggeyAgZm9udC1zaXplOiA0ZW07fS5mYS01eCB7ICBmb250LXNpemU6IDVlbTt9LmZhLTZ4IHsgIGZvbnQtc2l6ZTogNmVtO30uZmEtN3ggeyAgZm9udC1zaXplOiA3ZW07fS5mYS04eCB7ICBmb250LXNpemU6IDhlbTt9LmZhLTl4IHsgIGZvbnQtc2l6ZTogOWVtO30uZmEtMTB4IHsgIGZvbnQtc2l6ZTogMTBlbTt9LmZhLTJ4cyB7ICBmb250LXNpemU6IDAuNjI1ZW07ICBsaW5lLWhlaWdodDogMC4xZW07ICB2ZXJ0aWNhbC1hbGlnbjogMC4yMjVlbTt9LmZhLXhzIHsgIGZvbnQtc2l6ZTogMC43NWVtOyAgbGluZS1oZWlnaHQ6IDAuMDgzMzMzMzMzN2VtOyAgdmVydGljYWwtYWxpZ246IDAuMTI1ZW07fS5mYS1zbSB7ICBmb250LXNpemU6IDAuODc1ZW07ICBsaW5lLWhlaWdodDogMC4wNzE0Mjg1NzE4ZW07ICB2ZXJ0aWNhbC1hbGlnbjogMC4wNTM1NzE0Mjk1ZW07fS5mYS1sZyB7ICBmb250LXNpemU6IDEuMjVlbTsgIGxpbmUtaGVpZ2h0OiAwLjA1ZW07ICB2ZXJ0aWNhbC1hbGlnbjogLTAuMDc1ZW07fS5mYS14bCB7ICBmb250LXNpemU6IDEuNWVtOyAgbGluZS1oZWlnaHQ6IDAuMDQxNjY2NjY4MmVtOyAgdmVydGljYWwtYWxpZ246IC0wLjEyNWVtO30uZmEtMnhsIHsgIGZvbnQtc2l6ZTogMmVtOyAgbGluZS1oZWlnaHQ6IDAuMDMxMjVlbTsgIHZlcnRpY2FsLWFsaWduOiAtMC4xODc1ZW07fS5mYS1mdyB7ICB0ZXh0LWFsaWduOiBjZW50ZXI7ICB3aWR0aDogMS4yNWVtO30uZmEtdWwgeyAgbGlzdC1zdHlsZS10eXBlOiBub25lOyAgbWFyZ2luLWxlZnQ6IHZhcigtLWZhLWxpLW1hcmdpbiwgMi41ZW0pOyAgcGFkZGluZy1sZWZ0OiAwO30uZmEtdWwgPiBsaSB7ICBwb3NpdGlvbjogcmVsYXRpdmU7fS5mYS1saSB7ICBsZWZ0OiBjYWxjKC0xICogdmFyKC0tZmEtbGktd2lkdGgsIDJlbSkpOyAgcG9zaXRpb246IGFic29sdXRlOyAgdGV4dC1hbGlnbjogY2VudGVyOyAgd2lkdGg6IHZhcigtLWZhLWxpLXdpZHRoLCAyZW0pOyAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7fS5mYS1ib3JkZXIgeyAgYm9yZGVyLWNvbG9yOiB2YXIoLS1mYS1ib3JkZXItY29sb3IsICNlZWUpOyAgYm9yZGVyLXJhZGl1czogdmFyKC0tZmEtYm9yZGVyLXJhZGl1cywgMC4xZW0pOyAgYm9yZGVyLXN0eWxlOiB2YXIoLS1mYS1ib3JkZXItc3R5bGUsIHNvbGlkKTsgIGJvcmRlci13aWR0aDogdmFyKC0tZmEtYm9yZGVyLXdpZHRoLCAwLjA4ZW0pOyAgcGFkZGluZzogdmFyKC0tZmEtYm9yZGVyLXBhZGRpbmcsIDAuMmVtIDAuMjVlbSAwLjE1ZW0pO30uZmEtcHVsbC1sZWZ0IHsgIGZsb2F0OiBsZWZ0OyAgbWFyZ2luLXJpZ2h0OiB2YXIoLS1mYS1wdWxsLW1hcmdpbiwgMC4zZW0pO30uZmEtcHVsbC1yaWdodCB7ICBmbG9hdDogcmlnaHQ7ICBtYXJnaW4tbGVmdDogdmFyKC0tZmEtcHVsbC1tYXJnaW4sIDAuM2VtKTt9LmZhLWJlYXQgeyAgYW5pbWF0aW9uLW5hbWU6IGZhLWJlYXQ7ICBhbmltYXRpb24tZGVsYXk6IHZhcigtLWZhLWFuaW1hdGlvbi1kZWxheSwgMHMpOyAgYW5pbWF0aW9uLWRpcmVjdGlvbjogdmFyKC0tZmEtYW5pbWF0aW9uLWRpcmVjdGlvbiwgbm9ybWFsKTsgIGFuaW1hdGlvbi1kdXJhdGlvbjogdmFyKC0tZmEtYW5pbWF0aW9uLWR1cmF0aW9uLCAxcyk7ICBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50OiB2YXIoLS1mYS1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50LCBpbmZpbml0ZSk7ICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiB2YXIoLS1mYS1hbmltYXRpb24tdGltaW5nLCBlYXNlLWluLW91dCk7fS5mYS1ib3VuY2UgeyAgYW5pbWF0aW9uLW5hbWU6IGZhLWJvdW5jZTsgIGFuaW1hdGlvbi1kZWxheTogdmFyKC0tZmEtYW5pbWF0aW9uLWRlbGF5LCAwcyk7ICBhbmltYXRpb24tZGlyZWN0aW9uOiB2YXIoLS1mYS1hbmltYXRpb24tZGlyZWN0aW9uLCBub3JtYWwpOyAgYW5pbWF0aW9uLWR1cmF0aW9uOiB2YXIoLS1mYS1hbmltYXRpb24tZHVyYXRpb24sIDFzKTsgIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IHZhcigtLWZhLWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQsIGluZmluaXRlKTsgIGFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IHZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsIGN1YmljLWJlemllcigwLjI4LCAwLjg0LCAwLjQyLCAxKSk7fS5mYS1mYWRlIHsgIGFuaW1hdGlvbi1uYW1lOiBmYS1mYWRlOyAgYW5pbWF0aW9uLWRlbGF5OiB2YXIoLS1mYS1hbmltYXRpb24tZGVsYXksIDBzKTsgIGFuaW1hdGlvbi1kaXJlY3Rpb246IHZhcigtLWZhLWFuaW1hdGlvbi1kaXJlY3Rpb24sIG5vcm1hbCk7ICBhbmltYXRpb24tZHVyYXRpb246IHZhcigtLWZhLWFuaW1hdGlvbi1kdXJhdGlvbiwgMXMpOyAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogdmFyKC0tZmEtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudCwgaW5maW5pdGUpOyAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogdmFyKC0tZmEtYW5pbWF0aW9uLXRpbWluZywgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC42LCAxKSk7fS5mYS1iZWF0LWZhZGUgeyAgYW5pbWF0aW9uLW5hbWU6IGZhLWJlYXQtZmFkZTsgIGFuaW1hdGlvbi1kZWxheTogdmFyKC0tZmEtYW5pbWF0aW9uLWRlbGF5LCAwcyk7ICBhbmltYXRpb24tZGlyZWN0aW9uOiB2YXIoLS1mYS1hbmltYXRpb24tZGlyZWN0aW9uLCBub3JtYWwpOyAgYW5pbWF0aW9uLWR1cmF0aW9uOiB2YXIoLS1mYS1hbmltYXRpb24tZHVyYXRpb24sIDFzKTsgIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IHZhcigtLWZhLWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQsIGluZmluaXRlKTsgIGFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IHZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsIGN1YmljLWJlemllcigwLjQsIDAsIDAuNiwgMSkpO30uZmEtZmxpcCB7ICBhbmltYXRpb24tbmFtZTogZmEtZmxpcDsgIGFuaW1hdGlvbi1kZWxheTogdmFyKC0tZmEtYW5pbWF0aW9uLWRlbGF5LCAwcyk7ICBhbmltYXRpb24tZGlyZWN0aW9uOiB2YXIoLS1mYS1hbmltYXRpb24tZGlyZWN0aW9uLCBub3JtYWwpOyAgYW5pbWF0aW9uLWR1cmF0aW9uOiB2YXIoLS1mYS1hbmltYXRpb24tZHVyYXRpb24sIDFzKTsgIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IHZhcigtLWZhLWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQsIGluZmluaXRlKTsgIGFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IHZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsIGVhc2UtaW4tb3V0KTt9LmZhLXNoYWtlIHsgIGFuaW1hdGlvbi1uYW1lOiBmYS1zaGFrZTsgIGFuaW1hdGlvbi1kZWxheTogdmFyKC0tZmEtYW5pbWF0aW9uLWRlbGF5LCAwcyk7ICBhbmltYXRpb24tZGlyZWN0aW9uOiB2YXIoLS1mYS1hbmltYXRpb24tZGlyZWN0aW9uLCBub3JtYWwpOyAgYW5pbWF0aW9uLWR1cmF0aW9uOiB2YXIoLS1mYS1hbmltYXRpb24tZHVyYXRpb24sIDFzKTsgIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IHZhcigtLWZhLWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQsIGluZmluaXRlKTsgIGFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IHZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsIGxpbmVhcik7fS5mYS1zcGluIHsgIGFuaW1hdGlvbi1uYW1lOiBmYS1zcGluOyAgYW5pbWF0aW9uLWRlbGF5OiB2YXIoLS1mYS1hbmltYXRpb24tZGVsYXksIDBzKTsgIGFuaW1hdGlvbi1kaXJlY3Rpb246IHZhcigtLWZhLWFuaW1hdGlvbi1kaXJlY3Rpb24sIG5vcm1hbCk7ICBhbmltYXRpb24tZHVyYXRpb246IHZhcigtLWZhLWFuaW1hdGlvbi1kdXJhdGlvbiwgMnMpOyAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogdmFyKC0tZmEtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudCwgaW5maW5pdGUpOyAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogdmFyKC0tZmEtYW5pbWF0aW9uLXRpbWluZywgbGluZWFyKTt9LmZhLXNwaW4tcmV2ZXJzZSB7ICAtLWZhLWFuaW1hdGlvbi1kaXJlY3Rpb246IHJldmVyc2U7fS5mYS1wdWxzZSwuZmEtc3Bpbi1wdWxzZSB7ICBhbmltYXRpb24tbmFtZTogZmEtc3BpbjsgIGFuaW1hdGlvbi1kaXJlY3Rpb246IHZhcigtLWZhLWFuaW1hdGlvbi1kaXJlY3Rpb24sIG5vcm1hbCk7ICBhbmltYXRpb24tZHVyYXRpb246IHZhcigtLWZhLWFuaW1hdGlvbi1kdXJhdGlvbiwgMXMpOyAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogdmFyKC0tZmEtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudCwgaW5maW5pdGUpOyAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogdmFyKC0tZmEtYW5pbWF0aW9uLXRpbWluZywgc3RlcHMoOCkpO31AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSkgeyAgLmZhLWJlYXQsLmZhLWJvdW5jZSwuZmEtZmFkZSwuZmEtYmVhdC1mYWRlLC5mYS1mbGlwLC5mYS1wdWxzZSwuZmEtc2hha2UsLmZhLXNwaW4sLmZhLXNwaW4tcHVsc2UgeyAgICBhbmltYXRpb24tZGVsYXk6IC0xbXM7ICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMW1zOyAgICBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50OiAxOyAgICB0cmFuc2l0aW9uLWRlbGF5OiAwczsgICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMHM7ICB9fUBrZXlmcmFtZXMgZmEtYmVhdCB7ICAwJSwgOTAlIHsgICAgdHJhbnNmb3JtOiBzY2FsZSgxKTsgIH0gIDQ1JSB7ICAgIHRyYW5zZm9ybTogc2NhbGUodmFyKC0tZmEtYmVhdC1zY2FsZSwgMS4yNSkpOyAgfX1Aa2V5ZnJhbWVzIGZhLWJvdW5jZSB7ICAwJSB7ICAgIHRyYW5zZm9ybTogc2NhbGUoMSwgMSkgdHJhbnNsYXRlWSgwKTsgIH0gIDEwJSB7ICAgIHRyYW5zZm9ybTogc2NhbGUodmFyKC0tZmEtYm91bmNlLXN0YXJ0LXNjYWxlLXgsIDEuMSksIHZhcigtLWZhLWJvdW5jZS1zdGFydC1zY2FsZS15LCAwLjkpKSB0cmFuc2xhdGVZKDApOyAgfSAgMzAlIHsgICAgdHJhbnNmb3JtOiBzY2FsZSh2YXIoLS1mYS1ib3VuY2UtanVtcC1zY2FsZS14LCAwLjkpLCB2YXIoLS1mYS1ib3VuY2UtanVtcC1zY2FsZS15LCAxLjEpKSB0cmFuc2xhdGVZKHZhcigtLWZhLWJvdW5jZS1oZWlnaHQsIC0wLjVlbSkpOyAgfSAgNTAlIHsgICAgdHJhbnNmb3JtOiBzY2FsZSh2YXIoLS1mYS1ib3VuY2UtbGFuZC1zY2FsZS14LCAxLjA1KSwgdmFyKC0tZmEtYm91bmNlLWxhbmQtc2NhbGUteSwgMC45NSkpIHRyYW5zbGF0ZVkoMCk7ICB9ICA1NyUgeyAgICB0cmFuc2Zvcm06IHNjYWxlKDEsIDEpIHRyYW5zbGF0ZVkodmFyKC0tZmEtYm91bmNlLXJlYm91bmQsIC0wLjEyNWVtKSk7ICB9ICA2NCUgeyAgICB0cmFuc2Zvcm06IHNjYWxlKDEsIDEpIHRyYW5zbGF0ZVkoMCk7ICB9ICAxMDAlIHsgICAgdHJhbnNmb3JtOiBzY2FsZSgxLCAxKSB0cmFuc2xhdGVZKDApOyAgfX1Aa2V5ZnJhbWVzIGZhLWZhZGUgeyAgNTAlIHsgICAgb3BhY2l0eTogdmFyKC0tZmEtZmFkZS1vcGFjaXR5LCAwLjQpOyAgfX1Aa2V5ZnJhbWVzIGZhLWJlYXQtZmFkZSB7ICAwJSwgMTAwJSB7ICAgIG9wYWNpdHk6IHZhcigtLWZhLWJlYXQtZmFkZS1vcGFjaXR5LCAwLjQpOyAgICB0cmFuc2Zvcm06IHNjYWxlKDEpOyAgfSAgNTAlIHsgICAgb3BhY2l0eTogMTsgICAgdHJhbnNmb3JtOiBzY2FsZSh2YXIoLS1mYS1iZWF0LWZhZGUtc2NhbGUsIDEuMTI1KSk7ICB9fUBrZXlmcmFtZXMgZmEtZmxpcCB7ICA1MCUgeyAgICB0cmFuc2Zvcm06IHJvdGF0ZTNkKHZhcigtLWZhLWZsaXAteCwgMCksIHZhcigtLWZhLWZsaXAteSwgMSksIHZhcigtLWZhLWZsaXAteiwgMCksIHZhcigtLWZhLWZsaXAtYW5nbGUsIC0xODBkZWcpKTsgIH19QGtleWZyYW1lcyBmYS1zaGFrZSB7ICAwJSB7ICAgIHRyYW5zZm9ybTogcm90YXRlKC0xNWRlZyk7ICB9ICA0JSB7ICAgIHRyYW5zZm9ybTogcm90YXRlKDE1ZGVnKTsgIH0gIDglLCAyNCUgeyAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtMThkZWcpOyAgfSAgMTIlLCAyOCUgeyAgICB0cmFuc2Zvcm06IHJvdGF0ZSgxOGRlZyk7ICB9ICAxNiUgeyAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtMjJkZWcpOyAgfSAgMjAlIHsgICAgdHJhbnNmb3JtOiByb3RhdGUoMjJkZWcpOyAgfSAgMzIlIHsgICAgdHJhbnNmb3JtOiByb3RhdGUoLTEyZGVnKTsgIH0gIDM2JSB7ICAgIHRyYW5zZm9ybTogcm90YXRlKDEyZGVnKTsgIH0gIDQwJSwgMTAwJSB7ICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyAgfX1Aa2V5ZnJhbWVzIGZhLXNwaW4geyAgMCUgeyAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgIH0gIDEwMCUgeyAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyAgfX0uZmEtcm90YXRlLTkwIHsgIHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTt9LmZhLXJvdGF0ZS0xODAgeyAgdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKTt9LmZhLXJvdGF0ZS0yNzAgeyAgdHJhbnNmb3JtOiByb3RhdGUoMjcwZGVnKTt9LmZhLWZsaXAtaG9yaXpvbnRhbCB7ICB0cmFuc2Zvcm06IHNjYWxlKC0xLCAxKTt9LmZhLWZsaXAtdmVydGljYWwgeyAgdHJhbnNmb3JtOiBzY2FsZSgxLCAtMSk7fS5mYS1mbGlwLWJvdGgsLmZhLWZsaXAtaG9yaXpvbnRhbC5mYS1mbGlwLXZlcnRpY2FsIHsgIHRyYW5zZm9ybTogc2NhbGUoLTEsIC0xKTt9LmZhLXJvdGF0ZS1ieSB7ICB0cmFuc2Zvcm06IHJvdGF0ZSh2YXIoLS1mYS1yb3RhdGUtYW5nbGUsIDApKTt9LmZhLXN0YWNrIHsgIGRpc3BsYXk6IGlubGluZS1ibG9jazsgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7ICBoZWlnaHQ6IDJlbTsgIHBvc2l0aW9uOiByZWxhdGl2ZTsgIHdpZHRoOiAyLjVlbTt9LmZhLXN0YWNrLTF4LC5mYS1zdGFjay0yeCB7ICBib3R0b206IDA7ICBsZWZ0OiAwOyAgbWFyZ2luOiBhdXRvOyAgcG9zaXRpb246IGFic29sdXRlOyAgcmlnaHQ6IDA7ICB0b3A6IDA7ICB6LWluZGV4OiB2YXIoLS1mYS1zdGFjay16LWluZGV4LCBhdXRvKTt9LnN2Zy1pbmxpbmUtLWZhLmZhLXN0YWNrLTF4IHsgIGhlaWdodDogMWVtOyAgd2lkdGg6IDEuMjVlbTt9LnN2Zy1pbmxpbmUtLWZhLmZhLXN0YWNrLTJ4IHsgIGhlaWdodDogMmVtOyAgd2lkdGg6IDIuNWVtO30uZmEtaW52ZXJzZSB7ICBjb2xvcjogdmFyKC0tZmEtaW52ZXJzZSwgI2ZmZik7fS5zci1vbmx5LC5mYS1zci1vbmx5IHsgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgIHdpZHRoOiAxcHg7ICBoZWlnaHQ6IDFweDsgIHBhZGRpbmc6IDA7ICBtYXJnaW46IC0xcHg7ICBvdmVyZmxvdzogaGlkZGVuOyAgY2xpcDogcmVjdCgwLCAwLCAwLCAwKTsgIHdoaXRlLXNwYWNlOiBub3dyYXA7ICBib3JkZXItd2lkdGg6IDA7fS5zci1vbmx5LWZvY3VzYWJsZTpub3QoOmZvY3VzKSwuZmEtc3Itb25seS1mb2N1c2FibGU6bm90KDpmb2N1cykgeyAgcG9zaXRpb246IGFic29sdXRlOyAgd2lkdGg6IDFweDsgIGhlaWdodDogMXB4OyAgcGFkZGluZzogMDsgIG1hcmdpbjogLTFweDsgIG92ZXJmbG93OiBoaWRkZW47ICBjbGlwOiByZWN0KDAsIDAsIDAsIDApOyAgd2hpdGUtc3BhY2U6IG5vd3JhcDsgIGJvcmRlci13aWR0aDogMDt9LnN2Zy1pbmxpbmUtLWZhIC5mYS1wcmltYXJ5IHsgIGZpbGw6IHZhcigtLWZhLXByaW1hcnktY29sb3IsIGN1cnJlbnRDb2xvcik7ICBvcGFjaXR5OiB2YXIoLS1mYS1wcmltYXJ5LW9wYWNpdHksIDEpO30uc3ZnLWlubGluZS0tZmEgLmZhLXNlY29uZGFyeSB7ICBmaWxsOiB2YXIoLS1mYS1zZWNvbmRhcnktY29sb3IsIGN1cnJlbnRDb2xvcik7ICBvcGFjaXR5OiB2YXIoLS1mYS1zZWNvbmRhcnktb3BhY2l0eSwgMC40KTt9LnN2Zy1pbmxpbmUtLWZhLmZhLXN3YXAtb3BhY2l0eSAuZmEtcHJpbWFyeSB7ICBvcGFjaXR5OiB2YXIoLS1mYS1zZWNvbmRhcnktb3BhY2l0eSwgMC40KTt9LnN2Zy1pbmxpbmUtLWZhLmZhLXN3YXAtb3BhY2l0eSAuZmEtc2Vjb25kYXJ5IHsgIG9wYWNpdHk6IHZhcigtLWZhLXByaW1hcnktb3BhY2l0eSwgMSk7fS5zdmctaW5saW5lLS1mYSBtYXNrIC5mYS1wcmltYXJ5LC5zdmctaW5saW5lLS1mYSBtYXNrIC5mYS1zZWNvbmRhcnkgeyAgZmlsbDogYmxhY2s7fScpCgkJXSkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZXJyb3JUZXh0Q29sb3IgPSBBMygkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyZ2IsIDEsIDAuNjQsIDApOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFBhcmFncmFwaCA9IHskOiAnUGFyYWdyYXBoJ307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYXJhZ3JhcGggPSBGMigKCWZ1bmN0aW9uIChhdHRycywgY2hpbGRyZW4pIHsKCQlyZXR1cm4gQTQoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbGVtZW50LAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNQYXJhZ3JhcGgsCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRkaXYsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCREZXNjcmliZSgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUGFyYWdyYXBoKSwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoNSksCgkJCQkJCWF0dHJzKSkpLAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVW5rZXllZChjaGlsZHJlbikpOwoJfSk7CnZhciAkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kc3R5bGUgPSBfVmlydHVhbERvbV9zdHlsZTsKdmFyICRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkc3R5bGUgPSAkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kc3R5bGU7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkaWFsb2dFcnJvckVsZW1lbnRGcm9tRGVzY3JpcHRpb24gPSBBMigKCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkkZWxtJGh0bWwkSHRtbCR0ZXh0LAoJQTIoCgkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sLAoJCUEyKAoJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWxBdHRyaWJ1dGUoCgkJCQkJCUEyKCRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkc3R5bGUsICd3aGl0ZS1zcGFjZScsICdwcmUtd3JhcCcpKQoJCQkJCV0pKSwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJJGVsbSRjb3JlJExpc3Qkc2luZ2xldG9uLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFyYWdyYXBoKAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkRm9udCRjb2xvcigkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlcnJvclRleHRDb2xvcikKCQkJCQkJXSkpKSkpKTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlc2NyaWJlRXJyb3JMb2FkaW5nQ29udGVudHNGcm9tR2l0ID0gZnVuY3Rpb24gKGxvYWRFcnJvcikgewoJcmV0dXJuICdGYWlsZWQgdG8gbG9hZCBjb250ZW50cyBmcm9tIGdpdDogJyArICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlc2NyaWJlSHR0cEVycm9yKGxvYWRFcnJvcik7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlbGVtZW50VG9EaXNwbGF5TG9hZEZyb21HaXRFcnJvciA9IEEyKAoJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlc2NyaWJlRXJyb3JMb2FkaW5nQ29udGVudHNGcm9tR2l0LAoJQTIoCgkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkkZWxtJGNvcmUkU3RyaW5nJGxlZnQoNTAwKSwKCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkaWFsb2dFcnJvckVsZW1lbnRGcm9tRGVzY3JpcHRpb24pKTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRWaXN1YWxzJGVsbUVkaXRvckljb25TdmcgPSBmdW5jdGlvbiAoc2l6ZSkgewoJdmFyIGZvcmVncm91bmRQYXRocyA9IF9MaXN0X2Zyb21BcnJheSgKCQlbJ00gNDIuOTAxIDY4LjU2NSBMIDQyLjkwMSA3Ni4zOTYgTCAxMSA3Ni4zOTYgTCAxMSAyMCBMIDQyLjkwMSAyMCBMIDQyLjkwMSAyNy43OTIgTCAyMC4yMTkgMjcuNzkyIEwgMjAuMjE5IDQzLjE0NSBMIDQxLjQ3NCA0My4xNDUgTCA0MS40NzQgNTAuODU5IEwgMjAuMjE5IDUwLjg1OSBMIDIwLjIxOSA2OC41NjUgTCA0Mi45MDEgNjguNTY1IFonLCAnTSA4OS4zNDQgNTIuMjA5IEwgODkuMzQ0IDU3LjEwOCBMIDYwLjkxNSA1Ny4xMDggUSA2MS4xMDggNjMuMzE5IDY0LjI3MSA2Ni42NTYgQSAxMS42ODkgMTEuNjg5IDAgMCAwIDczLjE4MiA2OS45OTIgUSA3Ni45NjIgNjkuOTkyIDgwLjIyMSA2OS4yNzkgQSAzNi45MDEgMzYuOTAxIDAgMCAwIDg3LjIyMyA2Ni45MDYgTCA4Ny4yMjMgNzQuMjc0IEEgMjcuODMyIDI3LjgzMiAwIDAgMSA4MC41MTEgNzYuNTExIEEgNDEuMTU3IDQxLjE1NyAwIDAgMSA3Mi43NTcgNzcuMTY3IEEgMjAuNjM4IDIwLjYzOCAwIDAgMSA1Ny4xOTMgNzEuMzYyIFEgNTEuNTggNjUuNTU2IDUxLjU4IDU1LjM3MyBBIDI0LjMyNiAyNC4zMjYgMCAwIDEgNTYuNjI2IDM5LjEyOCBBIDE4LjMxNCAxOC4zMTQgMCAwIDEgNTYuNzg4IDM4Ljk0IEEgMTcuOTg3IDE3Ljk4NyAwIDAgMSA3MS4wOTkgMzIuOTYxIEEgMTcuNTggMTcuNTggMCAwIDEgODQuNDQ1IDM4LjA5MSBBIDE5LjYwNCAxOS42MDQgMCAwIDEgODkuMzQ0IDUyLjIwOSBaIE0gNjEuMDY5IDUwLjU1MSBMIDgwLjQzNCA1MC41NTEgQSAxMS44MDkgMTEuODA5IDAgMCAwIDc3Ljg4OCA0Mi41NDcgQSA4LjcwOCA4LjcwOCAwIDAgMCA3MS4wOTkgMzkuODI3IFEgNjYuNzc4IDM5LjgyNyA2NC4xNzUgNDIuNTY2IFEgNjEuNTcxIDQ1LjMwNSA2MS4wNjkgNTAuNTUxIFonLCAnTTAgMTAwTDAgMEwxMDAgMEwxMDAgMTAwTDAgMTAwWk00IDk3TDk3IDk3TDk3IDNMMyAzTDMgOTdaJ10pOwoJdmFyIGZvcmVncm91bmRQYXRoc0VsZW1lbnRzID0gQTIoCgkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCWZ1bmN0aW9uIChwYXRoRGF0YSkgewoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJHN2ZyRTdmckcGF0aCwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRlbG0kc3ZnJFN2ZyRBdHRyaWJ1dGVzJGQocGF0aERhdGEpLAoJCQkJCQkkZWxtJHN2ZyRTdmckQXR0cmlidXRlcyRmaWxsKCcjN0JDQTM5JykKCQkJCQldKSwKCQkJCV9MaXN0X05pbCk7CgkJfSwKCQlmb3JlZ3JvdW5kUGF0aHMpOwoJdmFyIGJhY2tncm91bmRQYXRoRGF0YSA9ICdNMSA5OUwxIDFMOTkgMUw5OSA5OUwxIDk5Wic7CglyZXR1cm4gQTIoCgkJJGVsbSRzdmckU3ZnJHN2ZywKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCSRlbG0kc3ZnJFN2ZyRBdHRyaWJ1dGVzJHZpZXdCb3goCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJJyAnLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCSRlbG0kY29yZSRTdHJpbmckZnJvbUludCwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWzAsIDAsIDEwMCwgMTAwXSkpKSksCgkJCQkkZWxtJHN2ZyRTdmckQXR0cmlidXRlcyR3aWR0aChzaXplKSwKCQkJCSRlbG0kc3ZnJFN2ZyRBdHRyaWJ1dGVzJGhlaWdodChzaXplKQoJCQldKSwKCQlBMigKCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJQTIoCgkJCQkkZWxtJHN2ZyRTdmckcGF0aCwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRlbG0kc3ZnJFN2ZyRBdHRyaWJ1dGVzJGQoYmFja2dyb3VuZFBhdGhEYXRhKSwKCQkJCQkJJGVsbSRzdmckU3ZnJEF0dHJpYnV0ZXMkZmlsbCgnIzFBMkIwQycpCgkJCQkJXSksCgkJCQlfTGlzdF9OaWwpLAoJCQlmb3JlZ3JvdW5kUGF0aHNFbGVtZW50cykpOwp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEZvbnRGYW1pbHkgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnRm9udEZhbWlseScsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmb250RmFtaWx5ID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZmxhZyg1KTsKdmFyICRlbG0kY29yZSRTdHJpbmckd29yZHMgPSBfU3RyaW5nX3dvcmRzOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlckZvbnRDbGFzc05hbWUgPSBGMigKCWZ1bmN0aW9uIChmb250LCBjdXJyZW50KSB7CgkJcmV0dXJuIF9VdGlsc19hcCgKCQkJY3VycmVudCwKCQkJZnVuY3Rpb24gKCkgewoJCQkJc3dpdGNoIChmb250LiQpIHsKCQkJCQljYXNlICdTZXJpZic6CgkJCQkJCXJldHVybiAnc2VyaWYnOwoJCQkJCWNhc2UgJ1NhbnNTZXJpZic6CgkJCQkJCXJldHVybiAnc2Fucy1zZXJpZic7CgkJCQkJY2FzZSAnTW9ub3NwYWNlJzoKCQkJCQkJcmV0dXJuICdtb25vc3BhY2UnOwoJCQkJCWNhc2UgJ1R5cGVmYWNlJzoKCQkJCQkJdmFyIG5hbWUgPSBmb250LmE7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCSctJywKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckd29yZHMoCgkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyR0b0xvd2VyKG5hbWUpKSk7CgkJCQkJY2FzZSAnSW1wb3J0Rm9udCc6CgkJCQkJCXZhciBuYW1lID0gZm9udC5hOwoJCQkJCQl2YXIgdXJsID0gZm9udC5iOwoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQknLScsCgkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJHdvcmRzKAoJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckdG9Mb3dlcihuYW1lKSkpOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXZhciBuYW1lID0gZm9udC5hLm5hbWU7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCSctJywKCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckd29yZHMoCgkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyR0b0xvd2VyKG5hbWUpKSk7CgkJCQl9CgkJCX0oKSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEZvbnQkZmFtaWx5ID0gZnVuY3Rpb24gKGZhbWlsaWVzKSB7CglyZXR1cm4gQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlQ2xhc3MsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZm9udEZhbWlseSwKCQlBMigKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEZvbnRGYW1pbHksCgkJCUEzKCRlbG0kY29yZSRMaXN0JGZvbGRsLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyRm9udENsYXNzTmFtZSwgJ2ZmLScsIGZhbWlsaWVzKSwKCQkJZmFtaWxpZXMpKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGxQb3J0aW9uID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEZpbGw7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlbGVtZW50Rm9udFNpemVQZXJjZW50ID0gZnVuY3Rpb24gKHBlcmNlbnQpIHsKCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sQXR0cmlidXRlKAoJCUEyKAoJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0eWxlLAoJCQknZm9udC1zaXplJywKCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHBlcmNlbnQpICsgJyUnKSk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkSGVhZGluZyA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdIZWFkaW5nJywgYTogYX07Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRSZWdpb24kaGVhZGluZyA9IEEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZUwsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCREZXNjcmliZSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEhlYWRpbmcpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kaGVhZGluZ0F0dHJpYnV0ZXMgPSBmdW5jdGlvbiAocmFuaykgewoJdmFyIGZvbnRTaXplUGVyY2VudCA9IEEyKCRlbG0kY29yZSRCYXNpY3MkbWF4LCAwLCA5MCAtIChyYW5rICogMjApKSArIDEwMDsKCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJWwoJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlbGVtZW50Rm9udFNpemVQZXJjZW50KGZvbnRTaXplUGVyY2VudCksCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JFJlZ2lvbiRoZWFkaW5nKHJhbmspCgkJXSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkVmlzdWFscyRGaWxlVHlwZUVsbUljb24gPSB7JDogJ0ZpbGVUeXBlRWxtSWNvbid9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkRmlsZVR5cGVKc29uSWNvbiA9IHskOiAnRmlsZVR5cGVKc29uSWNvbid9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkRmlsZVR5cGVNYXJrZG93bkljb24gPSB7JDogJ0ZpbGVUeXBlTWFya2Rvd25JY29uJ307CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkVmlzdWFscyRpY29uRnJvbUZpbGVDb250ZW50VHlwZSA9IGZ1bmN0aW9uIChjb250ZW50VHlwZSkgewoJc3dpdGNoIChjb250ZW50VHlwZS4kKSB7CgkJY2FzZSAnRWxtQ29udGVudCc6CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCV9VdGlsc19UdXBsZTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkRmlsZVR5cGVFbG1JY29uLCAnIzUyOUJCQScpKTsKCQljYXNlICdKc29uQ29udGVudCc6CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCV9VdGlsc19UdXBsZTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkRmlsZVR5cGVKc29uSWNvbiwgJyNEQkNENjgnKSk7CgkJY2FzZSAnTWFya2Rvd25Db250ZW50JzoKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJX1V0aWxzX1R1cGxlMigkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkVmlzdWFscyRGaWxlVHlwZU1hcmtkb3duSWNvbiwgJyM1MjlCQkEnKSk7CgkJZGVmYXVsdDoKCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkaWNvbkZyb21GaWxlTmFtZSA9IGZ1bmN0aW9uIChmaWxlTmFtZSkgewoJcmV0dXJuIEEyKAoJCSRlbG0kY29yZSRNYXliZSRhbmRUaGVuLAoJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRWaXN1YWxzJGljb25Gcm9tRmlsZUNvbnRlbnRUeXBlLAoJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRGaWxlRWRpdG9yJGZpbGVDb250ZW50VHlwZUZyb21GaWxlTmFtZShmaWxlTmFtZSkpOwp9Owp2YXIgJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRpZCA9ICRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkc3RyaW5nUHJvcGVydHkoJ2lkJyk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkSW5Gcm9udCA9IHskOiAnSW5Gcm9udCd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY3JlYXRlTmVhcmJ5ID0gRjIoCglmdW5jdGlvbiAobG9jLCBlbGVtZW50KSB7CgkJaWYgKGVsZW1lbnQuJCA9PT0gJ0VtcHR5JykgewoJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE5vQXR0cmlidXRlOwoJCX0gZWxzZSB7CgkJCXJldHVybiBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTmVhcmJ5LCBsb2MsIGVsZW1lbnQpOwoJCX0KCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaW5Gcm9udCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CglyZXR1cm4gQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY3JlYXRlTmVhcmJ5LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkSW5Gcm9udCwgZWxlbWVudCk7Cn07CnZhciAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRTb2xpZCREZWZpbml0aW9ucyRpbmRlbnQgPSBBNCgKCSRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJEljb25EZWYsCgknZmFzJywKCSdpbmRlbnQnLAoJX1V0aWxzX1R1cGxlMig0NDgsIDUxMiksCglfVXRpbHNfVHVwbGUyKCdNMCA2NEMwIDQ2LjMgMTQuMyAzMiAzMiAzMmwzODQgMGMxNy43IDAgMzIgMTQuMyAzMiAzMnMtMTQuMyAzMi0zMiAzMkwzMiA5NkMxNC4zIDk2IDAgODEuNyAwIDY0ek0xOTIgMTkyYzAtMTcuNyAxNC4zLTMyIDMyLTMybDE5MiAwYzE3LjcgMCAzMiAxNC4zIDMyIDMycy0xNC4zIDMyLTMyIDMybC0xOTIgMGMtMTcuNyAwLTMyLTE0LjMtMzItMzJ6bTMyIDk2bDE5MiAwYzE3LjcgMCAzMiAxNC4zIDMyIDMycy0xNC4zIDMyLTMyIDMybC0xOTIgMGMtMTcuNyAwLTMyLTE0LjMtMzItMzJzMTQuMy0zMiAzMi0zMnpNMCA0NDhjMC0xNy43IDE0LjMtMzIgMzItMzJsMzg0IDBjMTcuNyAwIDMyIDE0LjMgMzIgMzJzLTE0LjMgMzItMzIgMzJMMzIgNDgwYy0xNy43IDAtMzItMTQuMy0zMi0zMnpNMTI3LjggMjY4LjZMMjUuOCAzNDcuOUMxNS4zIDM1Ni4xIDAgMzQ4LjYgMCAzMzUuM0wwIDE3Ni43YzAtMTMuMyAxNS4zLTIwLjggMjUuOC0xMi42bDEwMS45IDc5LjNjOC4yIDYuNCA4LjIgMTguOSAwIDI1LjN6JywgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpKTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJGluZGVudCA9ICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJHByZXNlbnQoJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkRGVmaW5pdGlvbnMkaW5kZW50KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRPbmx5RHluYW1pYyA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdPbmx5RHluYW1pYycsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3RhdGljUm9vdEFuZER5bmFtaWMgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnU3RhdGljUm9vdEFuZER5bmFtaWMnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEFsbG93SG92ZXIgPSB7JDogJ0FsbG93SG92ZXInfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRMYXlvdXQgPSB7JDogJ0xheW91dCd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZvY3VzRGVmYXVsdFN0eWxlID0gewoJYmFja2dyb3VuZENvbG9yOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywKCWJvcmRlckNvbG9yOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywKCXNoYWRvdzogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJewoJCQlibHVyOiAwLAoJCQljb2xvcjogQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFJnYmEsIDE1NSAvIDI1NSwgMjAzIC8gMjU1LCAxLCAxKSwKCQkJb2Zmc2V0OiBfVXRpbHNfVHVwbGUyKDAsIDApLAoJCQlzaXplOiAzCgkJfSkKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRvcHRpb25zVG9SZWNvcmQgPSBmdW5jdGlvbiAob3B0aW9ucykgewoJdmFyIGNvbWJpbmUgPSBGMigKCQlmdW5jdGlvbiAob3B0LCByZWNvcmQpIHsKCQkJc3dpdGNoIChvcHQuJCkgewoJCQkJY2FzZSAnSG92ZXJPcHRpb24nOgoJCQkJCXZhciBob3ZlcmFibGUgPSBvcHQuYTsKCQkJCQl2YXIgX3Y0ID0gcmVjb3JkLmhvdmVyOwoJCQkJCWlmIChfdjQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiBfVXRpbHNfdXBkYXRlKAoJCQkJCQkJcmVjb3JkLAoJCQkJCQkJewoJCQkJCQkJCWhvdmVyOiAkZWxtJGNvcmUkTWF5YmUkSnVzdChob3ZlcmFibGUpCgkJCQkJCQl9KTsKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gcmVjb3JkOwoJCQkJCX0KCQkJCWNhc2UgJ0ZvY3VzU3R5bGVPcHRpb24nOgoJCQkJCXZhciBmb2N1c1N0eWxlID0gb3B0LmE7CgkJCQkJdmFyIF92NSA9IHJlY29yZC5mb2N1czsKCQkJCQlpZiAoX3Y1LiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCXJlY29yZCwKCQkJCQkJCXsKCQkJCQkJCQlmb2N1czogJGVsbSRjb3JlJE1heWJlJEp1c3QoZm9jdXNTdHlsZSkKCQkJCQkJCX0pOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXJldHVybiByZWNvcmQ7CgkJCQkJfQoJCQkJZGVmYXVsdDoKCQkJCQl2YXIgcmVuZGVyTW9kZSA9IG9wdC5hOwoJCQkJCXZhciBfdjYgPSByZWNvcmQubW9kZTsKCQkJCQlpZiAoX3Y2LiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCXJlY29yZCwKCQkJCQkJCXsKCQkJCQkJCQltb2RlOiAkZWxtJGNvcmUkTWF5YmUkSnVzdChyZW5kZXJNb2RlKQoJCQkJCQkJfSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJcmV0dXJuIHJlY29yZDsKCQkJCQl9CgkJCX0KCQl9KTsKCXZhciBhbmRGaW5hbGx5ID0gZnVuY3Rpb24gKHJlY29yZCkgewoJCXJldHVybiB7CgkJCWZvY3VzOiBmdW5jdGlvbiAoKSB7CgkJCQl2YXIgX3YwID0gcmVjb3JkLmZvY3VzOwoJCQkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZvY3VzRGVmYXVsdFN0eWxlOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgZm9jdXNhYmxlID0gX3YwLmE7CgkJCQkJcmV0dXJuIGZvY3VzYWJsZTsKCQkJCX0KCQkJfSgpLAoJCQlob3ZlcjogZnVuY3Rpb24gKCkgewoJCQkJdmFyIF92MSA9IHJlY29yZC5ob3ZlcjsKCQkJCWlmIChfdjEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBbGxvd0hvdmVyOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgaG92ZXJhYmxlID0gX3YxLmE7CgkJCQkJcmV0dXJuIGhvdmVyYWJsZTsKCQkJCX0KCQkJfSgpLAoJCQltb2RlOiBmdW5jdGlvbiAoKSB7CgkJCQl2YXIgX3YyID0gcmVjb3JkLm1vZGU7CgkJCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTGF5b3V0OwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYWN0dWFsTW9kZSA9IF92Mi5hOwoJCQkJCXJldHVybiBhY3R1YWxNb2RlOwoJCQkJfQoJCQl9KCkKCQl9OwoJfTsKCXJldHVybiBhbmRGaW5hbGx5KAoJCUEzKAoJCQkkZWxtJGNvcmUkTGlzdCRmb2xkciwKCQkJY29tYmluZSwKCQkJe2ZvY3VzOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywgaG92ZXI6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLCBtb2RlOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZ30sCgkJCW9wdGlvbnMpKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCR0b0h0bWwgPSBGMigKCWZ1bmN0aW9uIChtb2RlLCBlbCkgewoJCXN3aXRjaCAoZWwuJCkgewoJCQljYXNlICdVbnN0eWxlZCc6CgkJCQl2YXIgaHRtbCA9IGVsLmE7CgkJCQlyZXR1cm4gaHRtbCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNFbCk7CgkJCWNhc2UgJ1N0eWxlZCc6CgkJCQl2YXIgc3R5bGVzID0gZWwuYS5zdHlsZXM7CgkJCQl2YXIgaHRtbCA9IGVsLmEuaHRtbDsKCQkJCXJldHVybiBBMigKCQkJCQlodG1sLAoJCQkJCW1vZGUoc3R5bGVzKSwKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNFbCk7CgkJCWNhc2UgJ1RleHQnOgoJCQkJdmFyIHRleHQgPSBlbC5hOwoJCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCR0ZXh0RWxlbWVudCh0ZXh0KTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdGV4dEVsZW1lbnQoJycpOwoJCX0KCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlclJvb3QgPSBGMygKCWZ1bmN0aW9uIChvcHRpb25MaXN0LCBhdHRyaWJ1dGVzLCBjaGlsZCkgewoJCXZhciBvcHRpb25zID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJG9wdGlvbnNUb1JlY29yZChvcHRpb25MaXN0KTsKCQl2YXIgZW1iZWRTdHlsZSA9IGZ1bmN0aW9uICgpIHsKCQkJdmFyIF92MCA9IG9wdGlvbnMubW9kZTsKCQkJaWYgKF92MC4kID09PSAnTm9TdGF0aWNTdHlsZVNoZWV0JykgewoJCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRPbmx5RHluYW1pYyhvcHRpb25zKTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3RhdGljUm9vdEFuZER5bmFtaWMob3B0aW9ucyk7CgkJCX0KCQl9KCk7CgkJcmV0dXJuIEEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdG9IdG1sLAoJCQllbWJlZFN0eWxlLAoJCQlBNCgKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbGVtZW50LAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFzRWwsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZGl2LAoJCQkJYXR0cmlidXRlcywKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRVbmtleWVkKAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJW2NoaWxkXSkpKSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRGb250U2l6ZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdGb250U2l6ZScsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFNhbnNTZXJpZiA9IHskOiAnU2Fuc1NlcmlmJ307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVHlwZWZhY2UgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVHlwZWZhY2UnLCBhOiBhfTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGZvbnRTaXplID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZmxhZyg0KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyb290U3R5bGUgPSBmdW5jdGlvbiAoKSB7Cgl2YXIgZmFtaWxpZXMgPSBfTGlzdF9mcm9tQXJyYXkoCgkJWwoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVHlwZWZhY2UoJ09wZW4gU2FucycpLAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVHlwZWZhY2UoJ0hlbHZldGljYScpLAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVHlwZWZhY2UoJ1ZlcmRhbmEnKSwKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFNhbnNTZXJpZgoJCV0pOwoJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCUEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGVDbGFzcywKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYmdDb2xvciwKCQkJQTMoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ29sb3JlZCwKCQkJCSdiZy0nICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZvcm1hdENvbG9yQ2xhc3MoCgkJCQkJQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFJnYmEsIDEsIDEsIDEsIDApKSwKCQkJCSdiYWNrZ3JvdW5kLWNvbG9yJywKCQkJCUE0KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRSZ2JhLCAxLCAxLCAxLCAwKSkpLAoJCQlBMigKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlQ2xhc3MsCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGZvbnRDb2xvciwKCQkJQTMoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ29sb3JlZCwKCQkJCSdmYy0nICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZvcm1hdENvbG9yQ2xhc3MoCgkJCQkJQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFJnYmEsIDAsIDAsIDAsIDEpKSwKCQkJCSdjb2xvcicsCgkJCQlBNCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUmdiYSwgMCwgMCwgMCwgMSkpKSwKCQkJQTIoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTdHlsZUNsYXNzLAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmb250U2l6ZSwKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEZvbnRTaXplKDIwKSksCgkJCUEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGVDbGFzcywKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZm9udEZhbWlseSwKCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkRm9udEZhbWlseSwKCQkJCUEzKCRlbG0kY29yZSRMaXN0JGZvbGRsLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcmVuZGVyRm9udENsYXNzTmFtZSwgJ2ZvbnQtJywgZmFtaWxpZXMpLAoJCQkJZmFtaWxpZXMpKQoJCV0pOwp9KCk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRsYXlvdXRXaXRoID0gRjMoCglmdW5jdGlvbiAoX3YwLCBhdHRycywgY2hpbGQpIHsKCQl2YXIgb3B0aW9ucyA9IF92MC5vcHRpb25zOwoJCXJldHVybiBBMygKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHJlbmRlclJvb3QsCgkJCW9wdGlvbnMsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRodG1sQ2xhc3MoCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJJyAnLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMucm9vdCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuYW55LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5zaW5nbGVdKSkpLAoJCQkJX1V0aWxzX2FwKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRyb290U3R5bGUsIGF0dHJzKSksCgkJCWNoaWxkKTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbGF5b3V0ID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbGF5b3V0V2l0aCgKCXtvcHRpb25zOiBfTGlzdF9OaWx9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGJvcmRlckNvbG9yID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZmxhZygyOCk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCb3JkZXIkY29sb3IgPSBmdW5jdGlvbiAoY2xyKSB7CglyZXR1cm4gQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlQ2xhc3MsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYm9yZGVyQ29sb3IsCgkJQTMoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRDb2xvcmVkLAoJCQknYmMtJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmb3JtYXRDb2xvckNsYXNzKGNsciksCgkJCSdib3JkZXItY29sb3InLAoJCQljbHIpKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJnYmEgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUmdiYTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRCb3JkZXJXaWR0aCA9IEY1KAoJZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGUpIHsKCQlyZXR1cm4geyQ6ICdCb3JkZXJXaWR0aCcsIGE6IGEsIGI6IGIsIGM6IGMsIGQ6IGQsIGU6IGV9OwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCb3JkZXIkd2lkdGggPSBmdW5jdGlvbiAodikgewoJcmV0dXJuIEEyKAoJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTdHlsZUNsYXNzLAoJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGJvcmRlcldpZHRoLAoJCUE1KAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQm9yZGVyV2lkdGgsCgkJCSdiLScgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQodiksCgkJCXYsCgkJCXYsCgkJCXYsCgkJCXYpKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJvcmRlciR3aWR0aFhZID0gRjIoCglmdW5jdGlvbiAoeCwgeSkgewoJCXJldHVybiBBMigKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlQ2xhc3MsCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGJvcmRlcldpZHRoLAoJCQlBNSgKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRCb3JkZXJXaWR0aCwKCQkJCSdiLScgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHgpICsgKCctJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludCh5KSkpLAoJCQkJeSwKCQkJCXgsCgkJCQl5LAoJCQkJeCkpOwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCb3JkZXIkd2lkdGhFYWNoID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIGJvdHRvbSA9IF92MC5ib3R0b207Cgl2YXIgdG9wID0gX3YwLnRvcDsKCXZhciBsZWZ0ID0gX3YwLmxlZnQ7Cgl2YXIgcmlnaHQgPSBfdjAucmlnaHQ7CglyZXR1cm4gKF9VdGlsc19lcSh0b3AsIGJvdHRvbSkgJiYgX1V0aWxzX2VxKGxlZnQsIHJpZ2h0KSkgPyAoX1V0aWxzX2VxKHRvcCwgcmlnaHQpID8gJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQm9yZGVyJHdpZHRoKHRvcCkgOiBBMigkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCb3JkZXIkd2lkdGhYWSwgbGVmdCwgdG9wKSkgOiBBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGVDbGFzcywKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRib3JkZXJXaWR0aCwKCQlBNSgKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEJvcmRlcldpZHRoLAoJCQknYi0nICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludCh0b3ApICsgKCctJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQocmlnaHQpICsgKCctJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoYm90dG9tKSArICgnLScgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQobGVmdCkpKSkpKSksCgkJCXRvcCwKCQkJcmlnaHQsCgkJCWJvdHRvbSwKCQkJbGVmdCkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZWxlbWVudExpbmtTdHlsZUF0dHJpYnV0ZXMgPSBfTGlzdF9mcm9tQXJyYXkoCglbCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcG9pbnRlciwKCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCb3JkZXIkd2lkdGhFYWNoKAoJCXtib3R0b206IDEsIGxlZnQ6IDAsIHJpZ2h0OiAwLCB0b3A6IDB9KSwKCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCb3JkZXIkY29sb3IoCgkJQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiYSwgMCwgMCwgMCwgMCkpLAoJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JG1vdXNlT3ZlcigKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJvcmRlciRjb2xvcigKCQkJCUE0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJnYmEsIDAuNywgMC43LCAxLCAwLjUpKQoJCQldKSkKCV0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbGlua0VsZW1lbnRGcm9tVXJsQW5kVGV4dExhYmVsID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIHVybCA9IF92MC51cmw7Cgl2YXIgbGFiZWxUZXh0ID0gX3YwLmxhYmVsVGV4dDsKCXJldHVybiBBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRsaW5rLAoJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGVsZW1lbnRMaW5rU3R5bGVBdHRyaWJ1dGVzLAoJCXsKCQkJbGFiZWw6ICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHQobGFiZWxUZXh0KSwKCQkJdXJsOiB1cmwKCQl9KTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JG1hcCA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRtYXA7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTWluID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ01pbicsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRtaW5pbXVtID0gRjIoCglmdW5jdGlvbiAoaSwgbCkgewoJCXJldHVybiBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTWluLCBpLCBsKTsKCX0pOwp2YXIgJGVsbSRodG1sJEh0bWwkaWZyYW1lID0gX1ZpcnR1YWxEb21fbm9kZSgnaWZyYW1lJyk7CnZhciAkYXV0aG9yJHByb2plY3QkTW9uYWNvSHRtbCRtb25hY29DZG5VUkxzID0gX0xpc3RfZnJvbUFycmF5KAoJWydodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL21vbmFjby1lZGl0b3JAMC40Ni4wL21pbicsICdodHRwczovL3VucGtnLmNvbS9tb25hY28tZWRpdG9yQDAuNDYuMC9taW4nXSk7CnZhciAkYXV0aG9yJHByb2plY3QkTW9uYWNvSHRtbCRtb25hY29IdG1sRG9jdW1lbnRGcm9tQ2RuVXJsID0gZnVuY3Rpb24gKGNkblVybFRvTWluKSB7CglyZXR1cm4gJ1xuPCFET0NUWVBFIGh0bWw+XG48aHRtbD5cbjxoZWFkPlxuICAgIDxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sO2NoYXJzZXQ9dXRmLTgiID5cbiAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSJtb25hcmNoLmpzIj48L3NjcmlwdD5cbjwvaGVhZD5cbjxib2R5IHN0eWxlPSJtYXJnaW46MDtoZWlnaHQ6OTN2aDsiPlxuXG48c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPVwiJyArIChjZG5VcmxUb01pbiArICgnL3ZzL2xvYWRlci5qcyI+PC9zY3JpcHQ+XG5cbjxzY3JpcHQ+XG5cbiAgICBnZXRDb21wbGV0aW9uSXRlbXNUaW1lb3V0TWlsbGlzZWNvbmRzID0gMjAwMDtcbiAgICBnZXRIb3ZlclRpbWVvdXRNaWxsaXNlY29uZHMgPSAxNTAwO1xuICAgIHByb3ZpZGVDb21wbGV0aW9uSXRlbXNFdmVudEZyb21FbG0gPSBmdW5jdGlvbigpe307XG4gICAgcHJvdmlkZUhvdmVyRXZlbnRGcm9tRWxtID0gZnVuY3Rpb24oKXt9O1xuICAgIHByb3ZpZGVEZWZpbml0aW9uRXZlbnRGcm9tRWxtID0gZnVuY3Rpb24oKXt9O1xuXG4gICAgZnVuY3Rpb24gZ2V0RWRpdG9yTW9kZWwoKSB7XG4gICAgICAgIGlmKHR5cGVvZiBtb25hY28gIT0gIm9iamVjdCIpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICByZXR1cm4gbW9uYWNvPy5lZGl0b3I/LmdldE1vZGVscygpWzBdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vbmFjb0VkaXRvck9wZW5Eb2N1bWVudChvcGVuRG9jdW1lbnQpIHtcblxuICAgICAgICBpZih0eXBlb2YgbW9uYWNvICE9ICJvYmplY3QiKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGVkaXRvciA9XG4gICAgICAgICAgICBtb25hY28uZWRpdG9yPy5nZXRFZGl0b3JzKClbMF07XG5cbiAgICAgICAgaWYodHlwZW9mIGVkaXRvciAhPSAib2JqZWN0Iikge1xuXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCJObyBlZGl0b3IgZm91bmQgdG8gb3BlbiBkb2N1bWVudC4iKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1vbmFjb1VyaSA9XG4gICAgICAgICAgICBtb25hY28uVXJpLnBhcnNlKG9wZW5Eb2N1bWVudC51cmkpXG5cbiAgICAgICAgdmFyIHRleHRNb2RlbCA9XG4gICAgICAgICAgICBtb25hY28uZWRpdG9yPy5nZXRNb2RlbChtb25hY29VcmkpO1xuXG4gICAgICAgIGNvbnN0IHJldXNlTW9kZWwgPVxuICAgICAgICAgICAgdGV4dE1vZGVsPy51cmkudG9TdHJpbmcoKSA9PT0gb3BlbkRvY3VtZW50LnVyaVxuXG4gICAgICAgIGlmKCFyZXVzZU1vZGVsKSB7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJDcmVhdGluZyBuZXcgbW9kZWwgZm9yICIgKyBtb25hY29VcmkpO1xuXG4gICAgICAgICAgICBjb25zdCBtb2RlbHNUb0Rpc3Bvc2UgPVxuICAgICAgICAgICAgICAgIG1vbmFjby5lZGl0b3I/LmdldE1vZGVscygpID8/IFtdO1xuXG4gICAgICAgICAgICBtb2RlbHNUb0Rpc3Bvc2UuZm9yRWFjaChtb2RlbCA9PiB7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiUHJldmlvdXMgbW9kZWwgdXJpOiAiICsgbW9kZWwudXJpKTtcblxuICAgICAgICAgICAgICAgIG1vZGVsLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0ZXh0TW9kZWwgPVxuICAgICAgICAgICAgICAgIG1vbmFjby5lZGl0b3I/LmNyZWF0ZU1vZGVsKG9wZW5Eb2N1bWVudC52YWx1ZSwgb3BlbkRvY3VtZW50Lmxhbmd1YWdlLCBtb25hY29VcmkpO1xuXG4gICAgICAgICAgICBlZGl0b3Iuc2V0TW9kZWwodGV4dE1vZGVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRleHRNb2RlbCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0TW9kZWwuc2V0VmFsdWUob3BlbkRvY3VtZW50LnZhbHVlKTtcbiAgICAgICAgbW9uYWNvLmVkaXRvcj8uc2V0TW9kZWxMYW5ndWFnZSh0ZXh0TW9kZWwsIG9wZW5Eb2N1bWVudC5sYW5ndWFnZSk7XG5cbiAgICAgICAgZWRpdG9yLnJldmVhbFBvc2l0aW9uSW5DZW50ZXIob3BlbkRvY3VtZW50LnBvc2l0aW9uKTtcbiAgICAgICAgZWRpdG9yLnNldFBvc2l0aW9uKG9wZW5Eb2N1bWVudC5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW9uYWNvRWRpdG9yU2V0TW9kZWxNYXJrZXJzKG1hcmtlcnMpIHtcblxuICAgICAgICBpZih0eXBlb2YgbW9uYWNvICE9ICJvYmplY3QiKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIG1vbmFjbz8uZWRpdG9yPy5zZXRNb2RlbE1hcmtlcnMoZ2V0RWRpdG9yTW9kZWwoKSwgIiIsIG1hcmtlcnMubWFwKG1vbmFjb01hcmtlckZyb21FbG1Nb25hY29NYXJrZXIpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb25hY29FZGl0b3JSZXZlYWxQb3NpdGlvbkluQ2VudGVyKHBvc2l0aW9uKSB7XG5cbiAgICAgICAgY29uc3QgZWRpdG9yID1cbiAgICAgICAgICAgIG1vbmFjby5lZGl0b3I/LmdldEVkaXRvcnMoKVswXTtcblxuICAgICAgICBpZih0eXBlb2YgZWRpdG9yICE9ICJvYmplY3QiKSB7XG5cbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIk5vIGVkaXRvciBmb3VuZC4iKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZWRpdG9yLnJldmVhbFBvc2l0aW9uSW5DZW50ZXIocG9zaXRpb24pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vbmFjb01hcmtlckZyb21FbG1Nb25hY29NYXJrZXIoZWxtTW9uYWNvTWFya2VyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXNzYWdlIDogZWxtTW9uYWNvTWFya2VyLm1lc3NhZ2UsXG4gICAgICAgICAgICBzdGFydExpbmVOdW1iZXIgOiBlbG1Nb25hY29NYXJrZXIuc3RhcnRMaW5lTnVtYmVyLFxuICAgICAgICAgICAgc3RhcnRDb2x1bW4gOiBlbG1Nb25hY29NYXJrZXIuc3RhcnRDb2x1bW4sXG4gICAgICAgICAgICBlbmRMaW5lTnVtYmVyIDogZWxtTW9uYWNvTWFya2VyLmVuZExpbmVOdW1iZXIsXG4gICAgICAgICAgICBlbmRDb2x1bW4gOiBlbG1Nb25hY29NYXJrZXIuZW5kQ29sdW1uLFxuICAgICAgICAgICAgc2V2ZXJpdHkgOiBtb25hY29NYXJrZXJTZXZlcml0eUZyb21FbG1Nb25hY29NYXJrZXJTZXZlcml0eShlbG1Nb25hY29NYXJrZXIuc2V2ZXJpdHkpLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vbmFjb01hcmtlclNldmVyaXR5RnJvbUVsbU1vbmFjb01hcmtlclNldmVyaXR5KGVsbU1vbmFjb01hcmtlclNldmVyaXR5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgbW9uYWNvID09PSBcJ3VuZGVmaW5lZFwnKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuXG4gICAgICAgIGlmIChlbG1Nb25hY29NYXJrZXJTZXZlcml0eS5FcnJvclNldmVyaXR5ICE9IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gbW9uYWNvPy5NYXJrZXJTZXZlcml0eS5FcnJvcjtcblxuICAgICAgICBpZiAoZWxtTW9uYWNvTWFya2VyU2V2ZXJpdHkuV2FybmluZ1NldmVyaXR5ICE9IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gbW9uYWNvPy5NYXJrZXJTZXZlcml0eS5XYXJuaW5nO1xuXG4gICAgICAgIGlmIChlbG1Nb25hY29NYXJrZXJTZXZlcml0eS5JbmZvU2V2ZXJpdHkgIT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBtb25hY28/Lk1hcmtlclNldmVyaXR5LkluZm87XG5cbiAgICAgICAgaWYgKGVsbU1vbmFjb01hcmtlclNldmVyaXR5LkhpbnRTZXZlcml0eSAhPSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIG1vbmFjbz8uTWFya2VyU2V2ZXJpdHkuSGludDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb25hY29Db21wbGV0aW9uSXRlbUZyb21FbG1Nb25hY29Db21wbGV0aW9uSXRlbShyYW5nZSwgY29tcGxldGlvbkl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogY29tcGxldGlvbkl0ZW0ubGFiZWwsXG4gICAgICAgICAgICAgICAga2luZDogbW9uYWNvQ29tcGxldGlvbkl0ZW1LaW5kRnJvbUVsbUNvbXBsZXRpb25JdGVtS2luZChjb21wbGV0aW9uSXRlbS5raW5kKSxcblxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvbW9uYWNvLWVkaXRvci9pc3N1ZXMvMTA3NCNpc3N1ZWNvbW1lbnQtNDIzOTU2OTc3XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRhdGlvbjogeyB2YWx1ZSA6IGNvbXBsZXRpb25JdGVtLmRvY3VtZW50YXRpb24gfSxcblxuICAgICAgICAgICAgICAgIGluc2VydFRleHQ6IGNvbXBsZXRpb25JdGVtLmluc2VydFRleHQsXG4gICAgICAgICAgICAgICAgcmFuZ2U6IHJhbmdlXG4gICAgICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vbmFjb0NvbXBsZXRpb25JdGVtS2luZEZyb21FbG1Db21wbGV0aW9uSXRlbUtpbmQoY29tcGxldGlvbkl0ZW1LaW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbW9uYWNvID09PSBcJ3VuZGVmaW5lZFwnKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuXG4gICAgICAgIGlmIChjb21wbGV0aW9uSXRlbUtpbmQuQ29uc3RydWN0b3JDb21wbGV0aW9uSXRlbUtpbmQgIT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBtb25hY28/Lmxhbmd1YWdlcy5Db21wbGV0aW9uSXRlbUtpbmQuQ29uc3RydWN0b3I7XG5cbiAgICAgICAgaWYgKGNvbXBsZXRpb25JdGVtS2luZC5FbnVtQ29tcGxldGlvbkl0ZW1LaW5kICE9IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gbW9uYWNvPy5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1LaW5kLkVudW07XG5cbiAgICAgICAgaWYgKGNvbXBsZXRpb25JdGVtS2luZC5FbnVtTWVtYmVyQ29tcGxldGlvbkl0ZW1LaW5kICE9IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gbW9uYWNvPy5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1LaW5kLkVudW1NZW1iZXI7XG5cbiAgICAgICAgaWYgKGNvbXBsZXRpb25JdGVtS2luZC5GdW5jdGlvbkNvbXBsZXRpb25JdGVtS2luZCAhPSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIG1vbmFjbz8ubGFuZ3VhZ2VzLkNvbXBsZXRpb25JdGVtS2luZC5GdW5jdGlvbjtcblxuICAgICAgICBpZiAoY29tcGxldGlvbkl0ZW1LaW5kLk1vZHVsZUNvbXBsZXRpb25JdGVtS2luZCAhPSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIG1vbmFjbz8ubGFuZ3VhZ2VzLkNvbXBsZXRpb25JdGVtS2luZC5Nb2R1bGU7XG5cbiAgICAgICAgaWYgKGNvbXBsZXRpb25JdGVtS2luZC5TdHJ1Y3RDb21wbGV0aW9uSXRlbUtpbmQgIT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBtb25hY28/Lmxhbmd1YWdlcy5Db21wbGV0aW9uSXRlbUtpbmQuU3RydWN0O1xuXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoIlVuZXhwZWN0ZWQgc2hhcGUgb2YgY29tcGxldGlvbkl0ZW1LaW5kOiAiICsgSlNPTi5zdHJpbmdpZnkoY29tcGxldGlvbkl0ZW1LaW5kKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzcGF0Y2hNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYobWVzc2FnZS5PcGVuRG9jdW1lbnRFdmVudCkge1xuXG4gICAgICAgICAgICBtb25hY29FZGl0b3JPcGVuRG9jdW1lbnQoXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5PcGVuRG9jdW1lbnRFdmVudFswXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihtZXNzYWdlLlNldE1vZGVsTWFya2VycylcbiAgICAgICAgICAgIG1vbmFjb0VkaXRvclNldE1vZGVsTWFya2VycyhtZXNzYWdlLlNldE1vZGVsTWFya2Vyc1swXSk7XG5cbiAgICAgICAgaWYobWVzc2FnZS5SZXZlYWxQb3NpdGlvbkluQ2VudGVyKVxuICAgICAgICAgICAgbW9uYWNvRWRpdG9yUmV2ZWFsUG9zaXRpb25JbkNlbnRlcihtZXNzYWdlLlJldmVhbFBvc2l0aW9uSW5DZW50ZXJbMF0pO1xuXG4gICAgICAgIGlmKG1lc3NhZ2UuUHJvdmlkZUNvbXBsZXRpb25JdGVtc0V2ZW50KVxuICAgICAgICAgICAgcHJvdmlkZUNvbXBsZXRpb25JdGVtc0V2ZW50RnJvbUVsbShtZXNzYWdlLlByb3ZpZGVDb21wbGV0aW9uSXRlbXNFdmVudFswXSk7XG5cbiAgICAgICAgaWYobWVzc2FnZS5Qcm92aWRlSG92ZXJFdmVudClcbiAgICAgICAgICAgIHByb3ZpZGVIb3ZlckV2ZW50RnJvbUVsbShtZXNzYWdlLlByb3ZpZGVIb3ZlckV2ZW50WzBdKTtcblxuICAgICAgICBpZihtZXNzYWdlLlByb3ZpZGVEZWZpbml0aW9uRXZlbnQpXG4gICAgICAgICAgICBwcm92aWRlRGVmaW5pdGlvbkV2ZW50RnJvbUVsbShtZXNzYWdlLlByb3ZpZGVEZWZpbml0aW9uRXZlbnRbMF0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVkaXRvckV2ZW50T25EaWRGb2N1c0VkaXRvcldpZGdldCgpIHtcbiAgICAgICAgcGFyZW50Py5tZXNzYWdlRnJvbU1vbmFjb0ZyYW1lPy4oeyBEaWRGb2N1c0VkaXRvcldpZGdldEV2ZW50OiBbXX0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVkaXRvckFjdGlvbkNsb3NlRWRpdG9yKCkge1xuICAgICAgICBwYXJlbnQ/Lm1lc3NhZ2VGcm9tTW9uYWNvRnJhbWU/Lih7IEVkaXRvckFjdGlvbkNsb3NlRWRpdG9yRXZlbnQ6W119KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlZGl0b3JBY3Rpb25Gb3JtYXREb2N1bWVudCgpIHtcbiAgICAgICAgcGFyZW50Py5tZXNzYWdlRnJvbU1vbmFjb0ZyYW1lPy4oeyBFZGl0b3JBY3Rpb25Gb3JtYXREb2N1bWVudEV2ZW50OiBbXX0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVkaXRvckFjdGlvbkNvbXBpbGUoKSB7XG4gICAgICAgIHBhcmVudD8ubWVzc2FnZUZyb21Nb25hY29GcmFtZT8uKHsgRWRpdG9yQWN0aW9uQ29tcGlsZUV2ZW50OiBbXX0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVkaXRvckFjdGlvbkluc3BlY3RTeW50YXgoKSB7XG4gICAgICAgIHBhcmVudD8ubWVzc2FnZUZyb21Nb25hY29GcmFtZT8uKHsgRWRpdG9yQWN0aW9uSW5zcGVjdFN5bnRheEV2ZW50OiBbXX0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVkaXRvclByb3ZpZGVDb21wbGV0aW9uSXRlbXNGcm9tUmFuZ2VBbmRMZWFkaW5nVGV4dCh1cmksIHJhbmdlLCB0ZXh0VW50aWxQb3NpdGlvbiwgY3Vyc29yTGluZU51bWJlciwgY3Vyc29yQ29sdW1uKSB7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblxuICAgICAgICAgICAgY29uc3QgdGltZW91dCA9XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAiRGlkIG5vdCBnZXQgY29tcGxldGlvbiBpdGVtcyBmcm9tIEVsbSB3aXRoaW4gIiArIGdldENvbXBsZXRpb25JdGVtc1RpbWVvdXRNaWxsaXNlY29uZHMgKyAiIG1pbGxpc2Vjb25kcy4iO1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZWplY3QobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSwgZ2V0Q29tcGxldGlvbkl0ZW1zVGltZW91dE1pbGxpc2Vjb25kcyk7XG5cbiAgICAgICAgICAgIHByb3ZpZGVDb21wbGV0aW9uSXRlbXNFdmVudEZyb21FbG0gPSBmdW5jdGlvbihjb21wbGV0aW9uSXRlbXNGcm9tRWxtKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25JdGVtc0Zvck1vbmFjbyA9XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25JdGVtc0Zyb21FbG0ubWFwKGl0ZW0gPT4gbW9uYWNvQ29tcGxldGlvbkl0ZW1Gcm9tRWxtTW9uYWNvQ29tcGxldGlvbkl0ZW0ocmFuZ2UsIGl0ZW0pKVxuXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh7IHN1Z2dlc3Rpb25zOiBjb21wbGV0aW9uSXRlbXNGb3JNb25hY28gPz8gW10gfSk7XG5cbiAgICAgICAgICAgICAgICBwcm92aWRlQ29tcGxldGlvbkl0ZW1zRXZlbnRGcm9tRWxtID0gZnVuY3Rpb24oKXt9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXJlbnQ/Lm1lc3NhZ2VGcm9tTW9uYWNvRnJhbWU/Lih7XG4gICAgICAgICAgICAgICAgUmVxdWVzdENvbXBsZXRpb25JdGVtc0V2ZW50OlxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIHsgdXJpOiB1cmlcbiAgICAgICAgICAgICAgICAgICAgLCB0ZXh0VW50aWxQb3NpdGlvbjogdGV4dFVudGlsUG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgLCBjdXJzb3JMaW5lTnVtYmVyOiBjdXJzb3JMaW5lTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICwgY3Vyc29yQ29sdW1uOiBjdXJzb3JDb2x1bW5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVkaXRvclByb3ZpZGVIb3ZlckZyb21Qb3NpdGlvbih1cmksIHBvc2l0aW9uLCBsaW5lVGV4dCwgd29yZCkge1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gIkRpZCBub3QgZ2V0IGhvdmVyIGZyb20gRWxtIHdpdGhpbiAiICsgZ2V0SG92ZXJUaW1lb3V0TWlsbGlzZWNvbmRzICsgIiBtaWxsaXNlY29uZHMuIjtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG1lc3NhZ2UpO1xuICAgICAgICAgICAgfSwgZ2V0SG92ZXJUaW1lb3V0TWlsbGlzZWNvbmRzKTtcblxuICAgICAgICAgICAgcHJvdmlkZUhvdmVyRXZlbnRGcm9tRWxtID0gZnVuY3Rpb24oaG92ZXJGcm9tRWxtKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRzID1cbiAgICAgICAgICAgICAgICAgICAgaG92ZXJGcm9tRWxtLm1hcChjb250ZW50ID0+ICh7IHZhbHVlOiBjb250ZW50IH0pKVxuXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh7IGNvbnRlbnRzOiBjb250ZW50cyA/PyBbXSB9KTtcblxuICAgICAgICAgICAgICAgIHByb3ZpZGVIb3ZlckV2ZW50RnJvbUVsbSA9IGZ1bmN0aW9uKCl7fTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGFyZW50Py5tZXNzYWdlRnJvbU1vbmFjb0ZyYW1lPy4oe1xuICAgICAgICAgICAgICAgIFJlcXVlc3RIb3ZlckV2ZW50OlxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIHsgdXJpOiB1cmlcbiAgICAgICAgICAgICAgICAgICAgLCBwb3NpdGlvbkxpbmVOdW1iZXI6IHBvc2l0aW9uLmxpbmVOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgLCBwb3NpdGlvbkNvbHVtbjogcG9zaXRpb24uY29sdW1uXG4gICAgICAgICAgICAgICAgICAgICwgbGluZVRleHQ6IGxpbmVUZXh0XG4gICAgICAgICAgICAgICAgICAgICwgd29yZDogd29yZC53b3JkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXX0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlZGl0b3JQcm92aWRlRGVmaW5pdGlvbkZyb21Qb3NpdGlvbih1cmksIHBvc2l0aW9uLCBsaW5lVGV4dCwgd29yZCkge1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gIkRpZCBub3QgZ2V0IGRlZmluaXRpb24gZnJvbSBFbG0gd2l0aGluICIgKyBnZXRIb3ZlclRpbWVvdXRNaWxsaXNlY29uZHMgKyAiIG1pbGxpc2Vjb25kcy4iO1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZWplY3QobWVzc2FnZSk7XG4gICAgICAgICAgICB9LCBnZXRIb3ZlclRpbWVvdXRNaWxsaXNlY29uZHMpO1xuXG4gICAgICAgICAgICBwcm92aWRlRGVmaW5pdGlvbkV2ZW50RnJvbUVsbSA9IGZ1bmN0aW9uKHJlc3BvbnNlRnJvbUVsbSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUZvclJlc29sdmUgPSByZXNwb25zZUZyb21FbG1cblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJyZXNwb25zZUZvclJlc29sdmUiLCByZXNwb25zZUZvclJlc29sdmUpO1xuXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZUZvclJlc29sdmUpO1xuXG4gICAgICAgICAgICAgICAgcHJvdmlkZURlZmluaXRpb25FdmVudEZyb21FbG0gPSBmdW5jdGlvbigpe307XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhcmVudD8ubWVzc2FnZUZyb21Nb25hY29GcmFtZT8uKHtcbiAgICAgICAgICAgICAgICBSZXF1ZXN0RGVmaW5pdGlvbkV2ZW50OlxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIHsgdXJpIDogdXJpXG4gICAgICAgICAgICAgICAgICAgICwgcG9zaXRpb25MaW5lTnVtYmVyOiBwb3NpdGlvbi5saW5lTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICwgcG9zaXRpb25Db2x1bW46IHBvc2l0aW9uLmNvbHVtblxuICAgICAgICAgICAgICAgICAgICAsIGxpbmVUZXh0OiBsaW5lVGV4dFxuICAgICAgICAgICAgICAgICAgICAsIHdvcmQ6IHdvcmQud29yZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF19KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cblxuPC9zY3JpcHQ+XG5cbjxzY3JpcHQ+XG4gIG1vbmFjb1N0b3JhZ2VTZXR0aW5nRXhwYW5kU3VnZ2VzdGlvbkRvY3MgPSB0cnVlO1xuXG4gIHJlcXVpcmUuY29uZmlnKHsgcGF0aHM6IHsgXCd2c1wnOiBcJycgKyAoY2RuVXJsVG9NaW4gKyAoJy92c1wnIH19KTtcblxuICAvLyBCZWZvcmUgbG9hZGluZyB2cy9lZGl0b3IvZWRpdG9yLm1haW4sIGRlZmluZSBhIGdsb2JhbCBNb25hY29FbnZpcm9ubWVudCB0aGF0IG92ZXJ3cml0ZXNcbiAgLy8gdGhlIGRlZmF1bHQgd29ya2VyIHVybCBsb2NhdGlvbiAodXNlZCB3aGVuIGNyZWF0aW5nIFdlYldvcmtlcnMpLiBUaGUgcHJvYmxlbSBoZXJlIGlzIHRoYXRcbiAgLy8gSFRNTDUgZG9lcyBub3QgYWxsb3cgY3Jvc3MtZG9tYWluIHdlYiB3b3JrZXJzLCBzbyB3ZSBuZWVkIHRvIHByb3h5IHRoZSBpbnN0YW50aWF0aW9uIG9mXG4gIC8vIGEgd2ViIHdvcmtlciB0aHJvdWdoIGEgc2FtZS1kb21haW4gc2NyaXB0XG4gIHdpbmRvdy5Nb25hY29FbnZpcm9ubWVudCA9IHtcbiAgICBnZXRXb3JrZXJVcmw6IGZ1bmN0aW9uKHdvcmtlcklkLCBsYWJlbCkge1xuICAgICAgcmV0dXJuIGBkYXRhOnRleHQvamF2YXNjcmlwdDtjaGFyc2V0PXV0Zi04LCR7ZW5jb2RlVVJJQ29tcG9uZW50KGBcbiAgICAgICAgc2VsZi5Nb25hY29FbnZpcm9ubWVudCA9IHtcbiAgICAgICAgICBiYXNlVXJsOiBcJycgKyAoY2RuVXJsVG9NaW4gKyAoJy9cJ1xuICAgICAgICB9O1xuICAgICAgICBpbXBvcnRTY3JpcHRzKFwnJyArIChjZG5VcmxUb01pbiArICcvdnMvYmFzZS93b3JrZXIvd29ya2VyTWFpbi5qc1wnKTtgXG4gICAgICApfWA7XG4gICAgfVxuICB9O1xuXG4gICAgcmVxdWlyZShbXCd2cy9lZGl0b3IvZWRpdG9yLm1haW5cJ10sIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIG1vbmFjby5sYW5ndWFnZXMucmVnaXN0ZXIoe1xuICAgICAgICAgICAgaWQ6IFwnRWxtXCcsXG4gICAgICAgICAgICBhbGlhc2VzOiBbImVsbSJdLFxuICAgICAgICAgICAgZXh0ZW5zaW9uczogWyIuZWxtIl1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG1vbmFjby5sYW5ndWFnZXMuc2V0TW9uYXJjaFRva2Vuc1Byb3ZpZGVyKFwnRWxtXCcsIHdpbmRvdy5lbG1fbW9uYXJjaCk7XG5cbiAgICAgICAgbW9uYWNvLmVkaXRvci5yZWdpc3RlckVkaXRvck9wZW5lcih7XG4gICAgICAgICAgICBvcGVuQ29kZUVkaXRvcjogZnVuY3Rpb24gKHNvdXJjZSwgcmVzb3VyY2UsIHNlbGVjdGlvbk9yUG9zaXRpb24pIHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHVyaSA9XG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcJ1Jlc291cmNlIHVyaTogXCcsIHVyaSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCdzZWxlY3Rpb25PclBvc2l0aW9uOiBcJywgc2VsZWN0aW9uT3JQb3NpdGlvbik7XG5cblxuICAgICAgICAgICAgICAgIFtsaW5lTnVtYmVyLCBjb2x1bW5dID1cbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0Lmhhc093bihzZWxlY3Rpb25PclBvc2l0aW9uLCBcJ3N0YXJ0TGluZU51bWJlclwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBbc2VsZWN0aW9uT3JQb3NpdGlvbi5zdGFydExpbmVOdW1iZXIsIHNlbGVjdGlvbk9yUG9zaXRpb24uc3RhcnRDb2x1bW5dXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFtzZWxlY3Rpb25PclBvc2l0aW9uLmxpbmVOdW1iZXIsIHNlbGVjdGlvbk9yUG9zaXRpb24uY29sdW1uXVxuXG4gICAgICAgICAgICAgICAgcGFyZW50Py5tZXNzYWdlRnJvbU1vbmFjb0ZyYW1lPy4oe1xuICAgICAgICAgICAgICAgICAgICBPcGVuQ29kZUVkaXRvckV2ZW50OlxuICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgeyB1cmk6IHVyaVxuICAgICAgICAgICAgICAgICAgICAgICAgLCBwb3NpdGlvbjogeyBsaW5lTnVtYmVyOiBsaW5lTnVtYmVyLCBjb2x1bW46IGNvbHVtbiB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbW9uYWNvLmxhbmd1YWdlcy5yZWdpc3RlckNvbXBsZXRpb25JdGVtUHJvdmlkZXIoXCdFbG1cJywge1xuICAgICAgICAgICAgcHJvdmlkZUNvbXBsZXRpb25JdGVtczogZnVuY3Rpb24obW9kZWwsIHBvc2l0aW9uKSB7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB1cmkgPVxuICAgICAgICAgICAgICAgICAgICBtb2RlbC51cmkudG9TdHJpbmcoKVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coInBvc2l0aW9uOiIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBvc2l0aW9uKTtcblxuICAgICAgICAgICAgICAgIC8vIGZpbmQgb3V0IGlmIHdlIGFyZSBjb21wbGV0aW5nIGEgcHJvcGVydHkgaW4gdGhlIFwnZGVwZW5kZW5jaWVzXCcgb2JqZWN0LlxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRVbnRpbFBvc2l0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuZ2V0VmFsdWVJblJhbmdlKHtzdGFydExpbmVOdW1iZXI6IDEsIHN0YXJ0Q29sdW1uOiAxLCBlbmRMaW5lTnVtYmVyOiBwb3NpdGlvbi5saW5lTnVtYmVyLCBlbmRDb2x1bW46IHBvc2l0aW9uLmNvbHVtbn0pXG5cbiAgICAgICAgICAgICAgICBjb25zdCB3b3JkID1cbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuZ2V0V29yZFVudGlsUG9zaXRpb24ocG9zaXRpb24pXG5cbiAgICAgICAgICAgICAgICBjb25zdCByYW5nZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRMaW5lTnVtYmVyOiBwb3NpdGlvbi5saW5lTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBlbmRMaW5lTnVtYmVyOiBwb3NpdGlvbi5saW5lTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBzdGFydENvbHVtbjogd29yZC5zdGFydENvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgZW5kQ29sdW1uOiB3b3JkLmVuZENvbHVtblxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZWRpdG9yUHJvdmlkZUNvbXBsZXRpb25JdGVtc0Zyb21SYW5nZUFuZExlYWRpbmdUZXh0KFxuICAgICAgICAgICAgICAgICAgICB1cmksXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0VW50aWxQb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24ubGluZU51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24uY29sdW1uKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHRyaWdnZXJDaGFyYWN0ZXJzOiBbIi4iLCAiICJdXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1vbmFjby5lZGl0b3Iub25EaWRDcmVhdGVNb2RlbChmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gZm9yd2FyZERpZENoYW5nZUNvbnRlbnQoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0TW9kZWxWYWx1ZSA9IG1vZGVsLmdldFZhbHVlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygib25EaWRDaGFuZ2VDb250ZW50OlxcbiIgKyB0ZXh0TW9kZWxWYWx1ZSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBldmVudFJlY29yZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dE1vZGVsVmFsdWUgOiB0ZXh0TW9kZWxWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdXJpIDogbW9kZWwudXJpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcGFyZW50Py5tZXNzYWdlRnJvbU1vbmFjb0ZyYW1lPy4oe1xuICAgICAgICAgICAgICAgICAgICBEaWRDaGFuZ2VDb250ZW50RXZlbnQgOiBbIGV2ZW50UmVjb3JkIF1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBudWxsO1xuICAgICAgICAgICAgbW9kZWwub25EaWRDaGFuZ2VDb250ZW50KCgpID0+IHtcbiAgICAgICAgICAgIC8vIGRlYm91bmNlXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoaGFuZGxlKTtcbiAgICAgICAgICAgIGhhbmRsZSA9IHNldFRpbWVvdXQoKCkgPT4gZm9yd2FyZERpZENoYW5nZUNvbnRlbnQoKSwgNDAwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwYXJlbnQ/Lm1lc3NhZ2VGcm9tTW9uYWNvRnJhbWU/Lih7Q29tcGxldGVkU2V0dXBFdmVudDogW119KTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBtb25hY28ubGFuZ3VhZ2VzLnJlZ2lzdGVySG92ZXJQcm92aWRlcihcJ0VsbVwnLCB7XG4gICAgICAgICAgICBwcm92aWRlSG92ZXI6IGZ1bmN0aW9uIChtb2RlbCwgcG9zaXRpb24pIHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHVyaSA9XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLnVyaS50b1N0cmluZygpXG5cbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0VW50aWxQb3NpdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLmdldFZhbHVlSW5SYW5nZSh7c3RhcnRMaW5lTnVtYmVyOiAxLCBzdGFydENvbHVtbjogMSwgZW5kTGluZU51bWJlcjogcG9zaXRpb24ubGluZU51bWJlciwgZW5kQ29sdW1uOiBwb3NpdGlvbi5jb2x1bW59KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVUZXh0ID1cbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuZ2V0TGluZUNvbnRlbnQocG9zaXRpb24ubGluZU51bWJlcik7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB3b3JkID1cbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuZ2V0V29yZEF0UG9zaXRpb24ocG9zaXRpb24pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVkaXRvclByb3ZpZGVIb3ZlckZyb21Qb3NpdGlvbih1cmksIHBvc2l0aW9uLCBsaW5lVGV4dCwgd29yZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1vbmFjby5sYW5ndWFnZXMucmVnaXN0ZXJEZWZpbml0aW9uUHJvdmlkZXIoXCdFbG1cJywge1xuICAgICAgICAgICAgcHJvdmlkZURlZmluaXRpb246IGZ1bmN0aW9uIChtb2RlbCwgcG9zaXRpb24pIHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHVyaSA9XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLnVyaS50b1N0cmluZygpXG5cbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0VW50aWxQb3NpdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLmdldFZhbHVlSW5SYW5nZSh7c3RhcnRMaW5lTnVtYmVyOiAxLCBzdGFydENvbHVtbjogMSwgZW5kTGluZU51bWJlcjogcG9zaXRpb24ubGluZU51bWJlciwgZW5kQ29sdW1uOiBwb3NpdGlvbi5jb2x1bW59KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVUZXh0ID1cbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuZ2V0TGluZUNvbnRlbnQocG9zaXRpb24ubGluZU51bWJlcilcblxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmQgPVxuICAgICAgICAgICAgICAgICAgICBtb2RlbC5nZXRXb3JkQXRQb3NpdGlvbihwb3NpdGlvbilcblxuICAgICAgICAgICAgICAgIHJldHVybiBlZGl0b3JQcm92aWRlRGVmaW5pdGlvbkZyb21Qb3NpdGlvbih1cmksIHBvc2l0aW9uLCBsaW5lVGV4dCwgd29yZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1vbmFjby5lZGl0b3IuZGVmaW5lVGhlbWUoXCdkYXJrLXBsdXNcJywge1xuICAgICAgICAgICAgYmFzZTogXCd2cy1kYXJrXCcsXG4gICAgICAgICAgICBpbmhlcml0OiB0cnVlLFxuICAgICAgICAgICAgcnVsZXM6IFtcbiAgICAgICAgICAgICAgICB7IHRva2VuOiBcJ2tleXdvcmRcJywgZm9yZWdyb3VuZDogXCcjQzU4NkMwXCcgfSxcbiAgICAgICAgICAgICAgICB7IHRva2VuOiBcJ3R5cGVcJywgZm9yZWdyb3VuZDogXCcjNTY5Q0Q2XCcgfSxcbiAgICAgICAgICAgICAgICB7IHRva2VuOiBcJ2Z1bmN0aW9uLm5hbWVcJywgZm9yZWdyb3VuZDogXCcjRENEQ0FBXCcgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBjb2xvcnM6IHt9LFxuICAgICAgICB9KTtcblxuICAgICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUoXG4gICAgICAgICAgICAiY29kZS12aWV3LW1vbmFjbyIsXG4gICAgICAgICAgICBjbGFzcyBDb2RlVmlld01vbmFjbyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAgICAgICAgICAgICBfbW9uYWNvRWRpdG9yO1xuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSBIVE1MRWxlbWVudCAqL1xuICAgICAgICAgICAgICAgIF9lZGl0b3I7XG5cbiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICBTZXR0aW5nIHVwIGluIHRoZSBjb25zdHJ1Y3RvciB3b3VsZCB3b3JrIHdoZW4gdXNpbmcgc2hhZG93IERPTSwgYnV0IHNpbmNlIHdlIGludGVncmF0ZSB3aXRob3V0IHNoYWRvdyBET00sIHNldHVwIGlzIGRvbmUgZnJvbSBjb25uZWN0ZWRDYWxsYmFjay5cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHVwTW9uYWNvKCk7XG4gICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cE1vbmFjbygpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNldHVwTW9uYWNvKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gLyoqIEB0eXBlIEhUTUxUZW1wbGF0ZUVsZW1lbnQgKi8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVkaXRvci10ZW1wbGF0ZSIpXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWRpdG9yTm9kZSA9IHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgIEF0IHRoZSBtb21lbnQsIHdlIGF2b2lkIGltcGxlbWVudGF0aW9ucyBwbGFjaW5nIE1vbmFjbyBpbiBhIHNoYWRvdyBET00gYmVjYXVzZSBvZiB0aGlzIGJ1ZyB0aGF0IGJyZWFrcyBob3ZlciBwcm92aWRlcnM6IDxodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L21vbmFjby1lZGl0b3IvaXNzdWVzLzM0MDk+XG4gICAgICAgICAgICAgICAgICAgIE90aGVyIGZlYXR1cmVzIGxpa2UgbWFya2VycyBhbmQgY29tcGxldGlvbiBzdWdnZXN0aW9ucyB3b3JrZWQgbm9ybWFsbHkgaW5zaWRlIHRoZSBzaGFkb3cgRE9NLCBidXQgdGhlIGhvdmVyIHBvcHVwcyBkaWQgbm90IHNob3cgdXAuXG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogIm9wZW4iIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENvcHkgb3ZlciBlZGl0b3Igc3R5bGVzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICAibGlua1tyZWw9XCdzdHlsZXNoZWV0XCddW2RhdGEtbmFtZV49XCd2cy9cJ10iXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzdHlsZSBvZiBzdHlsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQoc3R5bGUuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQoZWRpdG9yTm9kZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWRpdG9yID0gc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCIjbW9uYWNvLWNvbnRhaW5lciIpO1xuICAgICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQoZWRpdG9yTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VkaXRvciA9IHRoaXMucXVlcnlTZWxlY3RvcigiI21vbmFjby1jb250YWluZXIiKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb25hY29FZGl0b3IgPSBtb25hY28uZWRpdG9yLmNyZWF0ZSh0aGlzLl9lZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9tYXRpY0xheW91dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlOiBcJ0VsbVwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJJbml0aWFsaXphdGlvbiBvZiBlZGl0b3IgaXMgbm90IGNvbXBsZXRlIHlldCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxCZXlvbmRMYXN0TGluZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogImRhcmstcGx1cyIsXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvbW9uYWNvLWVkaXRvci9pc3N1ZXMvMjI0MSNpc3N1ZWNvbW1lbnQtNzY0Njk0NTIxXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81NDc5NTYwMy9hbHdheXMtc2hvdy10aGUtc2hvdy1tb3JlLXNlY3Rpb24taW4tbW9uYWNvLWVkaXRvci81OTA0MDE5OSM1OTA0MDE5OVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVNlcnZpY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJzdG9yYWdlU2VydmljZS5nZXQ6ICIgKyBrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKCkgeyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEJvb2xlYW4oa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJzdG9yYWdlU2VydmljZS5nZXRCb29sZWFuOiAiICsga2V5KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBcJ2V4cGFuZFN1Z2dlc3Rpb25Eb2NzXCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb25hY29TdG9yYWdlU2V0dGluZ0V4cGFuZFN1Z2dlc3Rpb25Eb2NzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXROdW1iZXIoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJzdG9yYWdlU2VydmljZS5nZXROdW1iZXI6ICIgKyBrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygic3RvcmFnZVNlcnZpY2Uuc3RvcmU6ICIgKyBrZXkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwnZXhwYW5kU3VnZ2VzdGlvbkRvY3NcJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbmFjb1N0b3JhZ2VTZXR0aW5nRXhwYW5kU3VnZ2VzdGlvbkRvY3MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coInN0b3JhZ2VTZXJ2aWNlLnNldDogIiArIGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbldpbGxTYXZlU3RhdGUoKSB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRpZENoYW5nZVN0b3JhZ2UoKSB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRpZENoYW5nZVZhbHVlKCkge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vbmFjb0VkaXRvci5vbkRpZEZvY3VzRWRpdG9yV2lkZ2V0KCgpID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yRXZlbnRPbkRpZEZvY3VzRWRpdG9yV2lkZ2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vbmFjb0VkaXRvci5hZGRBY3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwnY2xvc2UtZWRpdG9yLWFjdGlvblwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwnQ2xvc2UgRWRpdG9yXCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXliaW5kaW5nczogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVjb25kaXRpb246IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXliaW5kaW5nQ29udGV4dDogbnVsbCxcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dE1lbnVHcm91cElkOiBcJ3otb3RoZXJcJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRNZW51T3JkZXI6IDk5LFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBydW46IGZ1bmN0aW9uKGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yQWN0aW9uQ2xvc2VFZGl0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9uYWNvRWRpdG9yLmFkZEFjdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogXCdmb3JtYXQtZG9jdW1lbnQtYWN0aW9uXCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCdGb3JtYXQgRG9jdW1lbnRcJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleWJpbmRpbmdzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9uYWNvLktleU1vZC5TaGlmdCB8IG1vbmFjby5LZXlNb2QuQWx0IHwgbW9uYWNvLktleUNvZGUuS0VZX0ZcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVjb25kaXRpb246IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXliaW5kaW5nQ29udGV4dDogbnVsbCxcblxuICAgICAgICAgICAgICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvckFjdGlvbkZvcm1hdERvY3VtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vbmFjb0VkaXRvci5hZGRBY3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwnY29tcGlsZS1hY3Rpb25cJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcJ0NvbXBpbGVcJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleWJpbmRpbmdzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9uYWNvLktleU1vZC5TaGlmdCB8IG1vbmFjby5LZXlNb2QuQ3RybENtZCB8IG1vbmFjby5LZXlDb2RlLkVudGVyXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlY29uZGl0aW9uOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5YmluZGluZ0NvbnRleHQ6IG51bGwsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3JBY3Rpb25Db21waWxlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vbmFjb0VkaXRvci5hZGRBY3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwnaW5zcGVjdC1zeW50YXgtYWN0aW9uXCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCdJbnNwZWN0IFN5bnRheFwnLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5YmluZGluZ3M6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlY29uZGl0aW9uOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5YmluZGluZ0NvbnRleHQ6IG51bGwsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3JBY3Rpb25JbnNwZWN0U3ludGF4KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9KTtcbjwvc2NyaXB0PlxuXG48dGVtcGxhdGUgaWQ9ImVkaXRvci10ZW1wbGF0ZSI+XG5cdDxkaXZcblx0XHRpZD0ibW9uYWNvLWNvbnRhaW5lciJcblx0XHRzdHlsZT0ib3ZlcmZsb3c6IGhpZGRlbjsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgcG9zaXRpb246IGFic29sdXRlIlxuXHQ+PC9kaXY+XG48L3RlbXBsYXRlPlxuXG48Y29kZS12aWV3LW1vbmFjbz48L2NvZGUtdmlldy1tb25hY28+XG5cbjwvYm9keT5cbjwvaHRtbD5cbicpKSkpKSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JE1vbmFjb0h0bWwkbW9uYWNvSHRtbERvY3VtZW50ID0gJGF1dGhvciRwcm9qZWN0JE1vbmFjb0h0bWwkbW9uYWNvSHRtbERvY3VtZW50RnJvbUNkblVybCgKCUEyKAoJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQknTWlzc2luZyBVUkwgdG8gQ0ROJywKCQkkZWxtJGNvcmUkTGlzdCRoZWFkKCRhdXRob3IkcHJvamVjdCRNb25hY29IdG1sJG1vbmFjb0NkblVSTHMpKSk7CnZhciAkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHNyY2RvYyA9ICRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkc3RyaW5nUHJvcGVydHkoJ3NyY2RvYycpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbW9uYWNvRWRpdG9yRWxlbWVudCA9IGZ1bmN0aW9uIChfdjApIHsKCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sKAoJCUEyKAoJCQkkZWxtJGh0bWwkSHRtbCRpZnJhbWUsCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHNyY2RvYygkYXV0aG9yJHByb2plY3QkTW9uYWNvSHRtbCRtb25hY29IdG1sRG9jdW1lbnQpLAoJCQkJCSRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkaWQoJ21vbmFjby1pZnJhbWUnKSwKCQkJCQlBMigkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0eWxlLCAnd2lkdGgnLCAnMTAwJScpLAoJCQkJCUEyKCRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkc3R5bGUsICdoZWlnaHQnLCAnMTAwJScpLAoJCQkJCUEyKCRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkc3R5bGUsICdib3JkZXInLCAnMCcpCgkJCQldKSwKCQkJX0xpc3RfTmlsKSk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRub25lID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEVtcHR5Owp2YXIgJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJEN1c3RvbSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdDdXN0b20nLCBhOiBhfTsKfTsKdmFyICRlbG0kaHRtbCRIdG1sJEV2ZW50cyRjdXN0b20gPSBGMigKCWZ1bmN0aW9uIChldmVudCwgZGVjb2RlcikgewoJCXJldHVybiBBMigKCQkJJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJG9uLAoJCQlldmVudCwKCQkJJGVsbSR2aXJ0dWFsX2RvbSRWaXJ0dWFsRG9tJEN1c3RvbShkZWNvZGVyKSk7Cgl9KTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJERlZmluaXRpb25zJHhtYXJrID0gQTQoCgkkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRJY29uRGVmLAoJJ2ZhcycsCgkneG1hcmsnLAoJX1V0aWxzX1R1cGxlMigzODQsIDUxMiksCglfVXRpbHNfVHVwbGUyKCdNMzQyLjYgMTUwLjZjMTIuNS0xMi41IDEyLjUtMzIuOCAwLTQ1LjNzLTMyLjgtMTIuNS00NS4zIDBMMTkyIDIxMC43IDg2LjYgMTA1LjRjLTEyLjUtMTIuNS0zMi44LTEyLjUtNDUuMyAwcy0xMi41IDMyLjggMCA0NS4zTDE0Ni43IDI1NiA0MS40IDM2MS40Yy0xMi41IDEyLjUtMTIuNSAzMi44IDAgNDUuM3MzMi44IDEyLjUgNDUuMyAwTDE5MiAzMDEuMyAyOTcuNCA0MDYuNmMxMi41IDEyLjUgMzIuOCAxMi41IDQ1LjMgMHMxMi41LTMyLjggMC00NS4zTDIzNy4zIDI1NiAzNDIuNiAxNTAuNnonLCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZykpOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkeG1hcmsgPSAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRwcmVzZW50KCRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJERlZmluaXRpb25zJHhtYXJrKTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHBvcHVwV2luZG93RWxlbWVudEF0dHJpYnV0ZXNGcm9tQXR0cmlidXRlcyA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciB0aXRsZSA9IF92MC50aXRsZTsKCXZhciB0aXRsZUljb24gPSBfdjAudGl0bGVJY29uOwoJdmFyIGd1aWRlUGFyYWdyYXBoSXRlbXMgPSBfdjAuZ3VpZGVQYXJhZ3JhcGhJdGVtczsKCXZhciBjb250ZW50RWxlbWVudCA9IF92MC5jb250ZW50RWxlbWVudDsKCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJWwoJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRpbkZyb250KAoJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQmFja2dyb3VuZCRjb2xvcigKCQkJCQkJQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiYSwgMCwgMCwgMCwgMC4zKSksCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEV2ZW50cyRvbkNsaWNrKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dENsb3NlUG9wdXApLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sQXR0cmlidXRlKAoJCQkJCQlBMigkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0eWxlLCAnYmFja2Ryb3AtZmlsdGVyJywgJ2JsdXIoMXB4KScpKQoJCQkJCV0pLAoJCQkJQTIoCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwsCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCYWNrZ3JvdW5kJGNvbG9yKAoJCQkJCQkJQTMoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiLCAwLCAwLCAwKSksCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCb3JkZXIkY29sb3IoCgkJCQkJCQlBMygkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyZ2IsIDAuOCwgMC44LCAwLjgpKSwKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJvcmRlciR3aWR0aCgxKSwKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJvcmRlciRyb3VuZGVkKDgpLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRweCg4MDApKSwKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNlbnRlclgsCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjZW50ZXJZLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbEF0dHJpYnV0ZSgKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kaHRtbCRIdG1sJEV2ZW50cyRjdXN0b20sCgkJCQkJCQkJJ2NsaWNrJywKCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJe21lc3NhZ2U6ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJERpc2NhcmRFdmVudCwgcHJldmVudERlZmF1bHQ6IGZhbHNlLCBzdG9wUHJvcGFnYXRpb246IHRydWV9KSkpCgkJCQkJCV0pLAoJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjb2x1bW4sCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFkZGluZygkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUpLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpCgkJCQkJCQldKSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJvdywKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc3BhY2luZygkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUpLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGhlYWRpbmdBdHRyaWJ1dGVzKDMpKSksCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JG5vbmUsCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCQkJCQkkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSR2aWV3LAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sLAoJCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwoX0xpc3RfTmlsKSkpLAoJCQkJCQkJCQkJCXRpdGxlSWNvbikpLAoJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCh0aXRsZSksCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JGJ1dHRvbiwKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JG1vdXNlT3ZlcigKCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJhY2tncm91bmQkY29sb3IoCgkJCQkJCQkJCQkJCQkJQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiYSwgMSwgMSwgMSwgMC4yKSkKCQkJCQkJCQkJCQkJCV0pKSwKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFkZGluZygzKSwKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkYWxpZ25SaWdodCwKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbEF0dHJpYnV0ZSgKCQkJCQkJCQkJCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyR0aXRsZSgnQ2xvc2UnKSkKCQkJCQkJCQkJCQldKSwKCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQlsYWJlbDogQTIoCgkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJCQkJCQkJCQlfTGlzdF9OaWwsCgkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWwoCgkJCQkJCQkJCQkJCQkkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSR2aWV3KCRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJHhtYXJrKSkpLAoJCQkJCQkJCQkJCW9uUHJlc3M6ICRlbG0kY29yZSRNYXliZSRKdXN0KCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dENsb3NlUG9wdXApCgkJCQkJCQkJCQl9KQoJCQkJCQkJCQldKSksCgkJCQkJCQkJQTIoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFyYWdyYXBoLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWwoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZWxlbWVudEZvbnRTaXplUGVyY2VudCg4MCkKCQkJCQkJCQkJXSksCgkJCQkJCQkJZ3VpZGVQYXJhZ3JhcGhJdGVtcyksCgkJCQkJCQkJY29udGVudEVsZW1lbnQKCQkJCQkJCV0pKSkpKQoJCV0pOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcm9vdEZvbnRGYW1pbHkgPSBfTGlzdF9mcm9tQXJyYXkoCglbJ1NlZ29lIFVJJywgJ1RhaG9tYScsICdHZW5ldmEnLCAnVmVyZGFuYScsICdzYW5zLXNlcmlmJ10pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFNjYWxlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1NjYWxlJywgYTogYX07Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRzY2FsZSA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGZsYWcoMjMpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2NhbGUgPSBmdW5jdGlvbiAobikgewoJcmV0dXJuIEEyKAoJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRUcmFuc2Zvcm1Db21wb25lbnQsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckc2NhbGUsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFNjYWxlKAoJCQlfVXRpbHNfVHVwbGUzKG4sIG4sIDEpKSk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzY3JvbGxiYXJZID0gQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJENsYXNzLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRvdmVyZmxvdywgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc2Nyb2xsYmFyc1kpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2Nyb2xsYmFycyA9IEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRDbGFzcywgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckb3ZlcmZsb3csICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnNjcm9sbGJhcnMpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZm9udFdlaWdodCA9ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGZsYWcoMTMpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkRm9udCRzZW1pQm9sZCA9IEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRDbGFzcywgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZm9udFdlaWdodCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMudGV4dFNlbWlCb2xkKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEZvbnQkc2l6ZSA9IGZ1bmN0aW9uIChpKSB7CglyZXR1cm4gQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlQ2xhc3MsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckZm9udFNpemUsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEZvbnRTaXplKGkpKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRpc0Jsb2JOb2RlID0gZnVuY3Rpb24gKG5vZGUpIHsKCWlmIChub2RlLiQgPT09ICdCbG9iTm9kZScpIHsKCQlyZXR1cm4gdHJ1ZTsKCX0gZWxzZSB7CgkJcmV0dXJuIGZhbHNlOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kc29ydEZpbGVUcmVlRm9yRXhwbG9yZXJWaWV3ID0gZnVuY3Rpb24gKG5vZGUpIHsKCWlmIChub2RlLiQgPT09ICdCbG9iTm9kZScpIHsKCQlyZXR1cm4gbm9kZTsKCX0gZWxzZSB7CgkJdmFyIHRyZWUgPSBub2RlLmE7CgkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRUcmVlTm9kZSgKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRzb3J0QnksCgkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJdmFyIGNoaWxkID0gX3YxLmI7CgkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRpc0Jsb2JOb2RlKGNoaWxkKSA/IDAgOiAxOwoJCQkJfSwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkkZWxtJGNvcmUkVHVwbGUkbWFwU2Vjb25kKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHNvcnRGaWxlVHJlZUZvckV4cGxvcmVyVmlldyksCgkJCQkJdHJlZSkpKTsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dE1vdXNlT3ZlclRpdGxlQmFyTWVudSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdVc2VySW5wdXRNb3VzZU92ZXJUaXRsZUJhck1lbnUnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dFRvZ2dsZVRpdGxlQmFyTWVudSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdVc2VySW5wdXRUb2dnbGVUaXRsZUJhck1lbnUnLCBhOiBhfTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRCZWxvdyA9IHskOiAnQmVsb3cnfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGJlbG93ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsKCXJldHVybiBBMigkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjcmVhdGVOZWFyYnksICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRCZWxvdywgZWxlbWVudCk7Cn07CnZhciAkZWxtJGh0bWwkSHRtbCRFdmVudHMkb25Nb3VzZUVudGVyID0gZnVuY3Rpb24gKG1zZykgewoJcmV0dXJuIEEyKAoJCSRlbG0kaHRtbCRIdG1sJEV2ZW50cyRvbiwKCQknbW91c2VlbnRlcicsCgkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQobXNnKSk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRFdmVudHMkb25Nb3VzZUVudGVyID0gQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlTCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEF0dHIsICRlbG0kaHRtbCRIdG1sJEV2ZW50cyRvbk1vdXNlRW50ZXIpOwp2YXIgJGVsbSRodG1sJEh0bWwkRXZlbnRzJG9uTW91c2VMZWF2ZSA9IGZ1bmN0aW9uIChtc2cpIHsKCXJldHVybiBBMigKCQkkZWxtJGh0bWwkSHRtbCRFdmVudHMkb24sCgkJJ21vdXNlbGVhdmUnLAoJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKG1zZykpOwp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkRXZlbnRzJG9uTW91c2VMZWF2ZSA9IEEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZUwsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBdHRyLCAkZWxtJGh0bWwkSHRtbCRFdmVudHMkb25Nb3VzZUxlYXZlKTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJEltcG9ydEZyb21aaXBBcmNoaXZlT3BlbkRpYWxvZyA9IHskOiAnSW1wb3J0RnJvbVppcEFyY2hpdmVPcGVuRGlhbG9nJ307CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRFeHBvcnRXb3Jrc3BhY2VUb1ppcEFyY2hpdmUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVXNlcklucHV0RXhwb3J0V29ya3NwYWNlVG9aaXBBcmNoaXZlJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRHZXRMaW5rVG9Xb3Jrc3BhY2UgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVXNlcklucHV0R2V0TGlua1RvV29ya3NwYWNlJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRJbXBvcnRXb3Jrc3BhY2VGcm9tWmlwQXJjaGl2ZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdVc2VySW5wdXRJbXBvcnRXb3Jrc3BhY2VGcm9tWmlwQXJjaGl2ZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0TG9hZEZyb21HaXRPcGVuRGlhbG9nID0geyQ6ICdVc2VySW5wdXRMb2FkRnJvbUdpdE9wZW5EaWFsb2cnfTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJERlZmluaXRpb25zJGJvb2ttYXJrID0gQTQoCgkkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRJY29uRGVmLAoJJ2ZhcycsCgknYm9va21hcmsnLAoJX1V0aWxzX1R1cGxlMigzODQsIDUxMiksCglfVXRpbHNfVHVwbGUyKCdNMCA0OFY0ODcuN0MwIDUwMS4xIDEwLjkgNTEyIDI0LjMgNTEyYzUgMCA5LjktMS41IDE0LTQuNEwxOTIgNDAwIDM0NS43IDUwNy42YzQuMSAyLjkgOSA0LjQgMTQgNC40YzEzLjQgMCAyNC4zLTEwLjkgMjQuMy0yNC4zVjQ4YzAtMjYuNS0yMS41LTQ4LTQ4LTQ4SDQ4QzIxLjUgMCAwIDIxLjUgMCA0OHonLCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZykpOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkYm9va21hcmsgPSAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRwcmVzZW50KCRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJERlZmluaXRpb25zJGJvb2ttYXJrKTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJERlZmluaXRpb25zJGNsb3VkQXJyb3dEb3duID0gQTQoCgkkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRJY29uRGVmLAoJJ2ZhcycsCgknY2xvdWQtYXJyb3ctZG93bicsCglfVXRpbHNfVHVwbGUyKDY0MCwgNTEyKSwKCV9VdGlsc19UdXBsZTIoJ00xNDQgNDgwQzY0LjUgNDgwIDAgNDE1LjUgMCAzMzZjMC02Mi44IDQwLjItMTE2LjIgOTYuMi0xMzUuOWMtLjEtMi43LS4yLTUuNC0uMi04LjFjMC04OC40IDcxLjYtMTYwIDE2MC0xNjBjNTkuMyAwIDExMSAzMi4yIDEzOC43IDgwLjJDNDA5LjkgMTAyIDQyOC4zIDk2IDQ0OCA5NmM1MyAwIDk2IDQzIDk2IDk2YzAgMTIuMi0yLjMgMjMuOC02LjQgMzQuNkM1OTYgMjM4LjQgNjQwIDI5MC4xIDY0MCAzNTJjMCA3MC43LTU3LjMgMTI4LTEyOCAxMjhsLTM2OCAwem03OS0xNjdsODAgODBjOS40IDkuNCAyNC42IDkuNCAzMy45IDBsODAtODBjOS40LTkuNCA5LjQtMjQuNiAwLTMzLjlzLTI0LjYtOS40LTMzLjkgMGwtMzkgMzlMMzQ0IDE4NGMwLTEzLjMtMTAuNy0yNC0yNC0yNHMtMjQgMTAuNy0yNCAyNGwwIDEzNC4xLTM5LTM5Yy05LjQtOS40LTI0LjYtOS40LTMzLjkgMHMtOS40IDI0LjYgMCAzMy45eicsICRlbG0kY29yZSRNYXliZSROb3RoaW5nKSk7CnZhciAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRTb2xpZCRjbG91ZEFycm93RG93biA9ICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJHByZXNlbnQoJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkRGVmaW5pdGlvbnMkY2xvdWRBcnJvd0Rvd24pOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkY2xvdWREb3dubG9hZEFsdCA9ICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJGNsb3VkQXJyb3dEb3duOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkRGVmaW5pdGlvbnMkZmlsZUV4cG9ydCA9IEE0KAoJJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkSWNvbkRlZiwKCSdmYXMnLAoJJ2ZpbGUtZXhwb3J0JywKCV9VdGlsc19UdXBsZTIoNTc2LCA1MTIpLAoJX1V0aWxzX1R1cGxlMignTTAgNjRDMCAyOC43IDI4LjcgMCA2NCAwTDIyNCAwbDAgMTI4YzAgMTcuNyAxNC4zIDMyIDMyIDMybDEyOCAwIDAgMTI4LTE2OCAwYy0xMy4zIDAtMjQgMTAuNy0yNCAyNHMxMC43IDI0IDI0IDI0bDE2OCAwIDAgMTEyYzAgMzUuMy0yOC43IDY0LTY0IDY0TDY0IDUxMmMtMzUuMyAwLTY0LTI4LjctNjQtNjRMMCA2NHpNMzg0IDMzNmwwLTQ4IDExMC4xIDAtMzktMzljLTkuNC05LjQtOS40LTI0LjYgMC0zMy45czI0LjYtOS40IDMzLjkgMGw4MCA4MGM5LjQgOS40IDkuNCAyNC42IDAgMzMuOWwtODAgODBjLTkuNCA5LjQtMjQuNiA5LjQtMzMuOSAwcy05LjQtMjQuNiAwLTMzLjlsMzktMzlMMzg0IDMzNnptMC0yMDhsLTEyOCAwTDI1NiAwIDM4NCAxMjh6JywgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpKTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJGZpbGVFeHBvcnQgPSAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRwcmVzZW50KCRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJERlZmluaXRpb25zJGZpbGVFeHBvcnQpOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkRGVmaW5pdGlvbnMkZmlsZUltcG9ydCA9IEE0KAoJJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkSWNvbkRlZiwKCSdmYXMnLAoJJ2ZpbGUtaW1wb3J0JywKCV9VdGlsc19UdXBsZTIoNTEyLCA1MTIpLAoJX1V0aWxzX1R1cGxlMignTTEyOCA2NGMwLTM1LjMgMjguNy02NCA2NC02NEwzNTIgMGwwIDEyOGMwIDE3LjcgMTQuMyAzMiAzMiAzMmwxMjggMCAwIDI4OGMwIDM1LjMtMjguNyA2NC02NCA2NGwtMjU2IDBjLTM1LjMgMC02NC0yOC43LTY0LTY0bDAtMTEyIDE3NC4xIDAtMzkgMzljLTkuNCA5LjQtOS40IDI0LjYgMCAzMy45czI0LjYgOS40IDMzLjkgMGw4MC04MGM5LjQtOS40IDkuNC0yNC42IDAtMzMuOWwtODAtODBjLTkuNC05LjQtMjQuNi05LjQtMzMuOSAwcy05LjQgMjQuNiAwIDMzLjlsMzkgMzlMMTI4IDI4OGwwLTIyNHptMCAyMjRsMCA0OEwyNCAzMzZjLTEzLjMgMC0yNC0xMC43LTI0LTI0czEwLjctMjQgMjQtMjRsMTA0IDB6TTUxMiAxMjhsLTEyOCAwTDM4NCAwIDUxMiAxMjh6JywgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpKTsKdmFyICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJGZpbGVJbXBvcnQgPSAkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRwcmVzZW50KCRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJERlZmluaXRpb25zJGZpbGVJbXBvcnQpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYm9yZGVyU3R5bGUgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmbGFnKDExKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJvcmRlciRzb2xpZCA9IEEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRDbGFzcywgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckYm9yZGVyU3R5bGUsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmJvcmRlclNvbGlkKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJnYjI1NSA9IEYzKAoJZnVuY3Rpb24gKHJlZCwgZ3JlZW4sIGJsdWUpIHsKCQlyZXR1cm4gQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFJnYmEsIHJlZCAvIDI1NSwgZ3JlZW4gLyAyNTUsIGJsdWUgLyAyNTUsIDEpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR0aXRsZWJhck1lbnVFbnRyeSA9IEY0KAoJZnVuY3Rpb24gKG9uUHJlc3NFdmVudElmRW5hYmxlZCwgbWF5YmVJY29uLCBsYWJlbCwgaXNFbmFibGVkKSB7CgkJdmFyIG9wYWNpdHkgPSBpc0VuYWJsZWQgPyAxIDogMC41OwoJCXZhciBtb3VzZU92ZXJBdHRyaWJ1dGVzID0gaXNFbmFibGVkID8gX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRtb3VzZU92ZXIoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCYWNrZ3JvdW5kJGNvbG9yKAoJCQkJCQlBMygkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyZ2IyNTUsIDQsIDU3LCA5NCkpCgkJCQkJXSkpCgkJCV0pIDogX0xpc3RfTmlsOwoJCXZhciBjdXJzb3IgPSBpc0VuYWJsZWQgPyAncG9pbnRlcicgOiAnZGVmYXVsdCc7CgkJcmV0dXJuIEEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJvcmRlciRyb3VuZGVkKDQpLAoJCQkJCW1vdXNlT3ZlckF0dHJpYnV0ZXMpKSwKCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRidXR0b24sCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFkZGluZ1hZLCAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUsIDQpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sQXR0cmlidXRlKAoJCQkJCQlBMigkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0eWxlLCAnY3Vyc29yJywgY3Vyc29yKSkKCQkJCQldKSwKCQkJCXsKCQkJCQlsYWJlbDogQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJvdywKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSAvIDIpIHwgMCksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkYWxwaGEob3BhY2l0eSkKCQkJCQkJCV0pLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwsCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgKCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHB4KCgoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplICogNikgLyA1KSB8IDApKQoJCQkJCQkJCQldKSwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRub25lLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCQkJCSRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJHZpZXcsCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWwsCgkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsKAoJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCVskbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjZW50ZXJYXSkpKSksCgkJCQkJCQkJCQltYXliZUljb24pKSksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dChsYWJlbCkKCQkJCQkJCV0pKSwKCQkJCQlvblByZXNzOiBpc0VuYWJsZWQgPyAkZWxtJGNvcmUkTWF5YmUkSnVzdChvblByZXNzRXZlbnRJZkVuYWJsZWQpIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcKCQkJCX0pKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdGl0bGViYXJNZW51RW50cnlEcm9wZG93bkNvbnRlbnQgPSBGMigKCWZ1bmN0aW9uIChzdGF0ZSwgbWVudUVudHJ5KSB7CgkJdmFyIGNhblNhdmVXb3Jrc3BhY2UgPSBmdW5jdGlvbiAoKSB7CgkJCXZhciBfdjEgPSBzdGF0ZS53b3Jrc3BhY2U7CgkJCWlmIChfdjEuJCA9PT0gJ1dvcmtzcGFjZUFjdGl2ZScpIHsKCQkJCXJldHVybiB0cnVlOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJfSgpOwoJCXZhciBtZW51RW50cmllcyA9IF9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJQTQoCgkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR0aXRsZWJhck1lbnVFbnRyeSwKCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dExvYWRGcm9tR2l0T3BlbkRpYWxvZywKCQkJCSRlbG0kY29yZSRNYXliZSRKdXN0KCRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJGNsb3VkRG93bmxvYWRBbHQpLAoJCQkJJ0xvYWQgRnJvbSBHaXQgUmVwb3NpdG9yeScsCgkJCQl0cnVlKSwKCQkJCUE0KAoJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdGl0bGViYXJNZW51RW50cnksCgkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRJbXBvcnRXb3Jrc3BhY2VGcm9tWmlwQXJjaGl2ZSgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRJbXBvcnRGcm9tWmlwQXJjaGl2ZU9wZW5EaWFsb2cpLAoJCQkJJGVsbSRjb3JlJE1heWJlJEp1c3QoJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkZmlsZUltcG9ydCksCgkJCQknSW1wb3J0IEZyb20gWmlwIEFyY2hpdmUnLAoJCQkJdHJ1ZSksCgkJCQlBNCgKCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHRpdGxlYmFyTWVudUVudHJ5LAoJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0R2V0TGlua1RvV29ya3NwYWNlKAoJCQkJCXtjcmVhdGVEaWZmSWZCYXNlQXZhaWxhYmxlOiB0cnVlfSksCgkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdCgkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRTb2xpZCRib29rbWFyayksCgkJCQknR2V0IExpbmsgZm9yIEJvb2ttYXJraW5nIG9yIFNoYXJpbmcnLAoJCQkJY2FuU2F2ZVdvcmtzcGFjZSksCgkJCQlBNCgKCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHRpdGxlYmFyTWVudUVudHJ5LAoJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0RXhwb3J0V29ya3NwYWNlVG9aaXBBcmNoaXZlKAoJCQkJCXtzZW5kRG93bmxvYWRDbWQ6IGZhbHNlfSksCgkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdCgkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRTb2xpZCRmaWxlRXhwb3J0KSwKCQkJCSdFeHBvcnQgVG8gWmlwIEFyY2hpdmUnLAoJCQkJY2FuU2F2ZVdvcmtzcGFjZSkKCQkJXSk7CgkJcmV0dXJuIEEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJhY2tncm91bmQkY29sb3IoCgkJCQkJQTMoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiLCAwLjEzLCAwLjEzLCAwLjEzKSksCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQm9yZGVyJGNvbG9yKAoJCQkJCUEzKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJnYiwgMC4yNywgMC4yNywgMC4yNykpLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJvcmRlciRzb2xpZCwKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCb3JkZXIkd2lkdGgoMSksCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQm9yZGVyJHJvdW5kZWQoNikKCQkJCV0pLAoJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbiwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoMiksCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHBhZGRpbmdYWSwgNCwgNCksCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNocmluaykKCQkJCQldKSwKCQkJCW1lbnVFbnRyaWVzKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHRpdGxlYmFyTWVudUVudHJ5TGFiZWwgPSBmdW5jdGlvbiAobWVudUVudHJ5KSB7CglyZXR1cm4gJ1dvcmtzcGFjZSc7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR0aXRsZWJhck1lbnVFbnRyeUJ1dHRvbiA9IEYyKAoJZnVuY3Rpb24gKHN0YXRlLCBtZW51RW50cnkpIHsKCQl2YXIgaXNPcGVuID0gX1V0aWxzX2VxKAoJCQlzdGF0ZS5wb3B1cCwKCQkJJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQlBMigkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRUaXRsZWJhck1lbnUsIG1lbnVFbnRyeSwgdHJ1ZSkpKTsKCQl2YXIgaXNIaWdobGlnaHRlZCA9IF9VdGlsc19lcSgKCQkJc3RhdGUucG9wdXAsCgkJCSRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJQTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVGl0bGViYXJNZW51LCBtZW51RW50cnksIGZhbHNlKSkpIHx8IGlzT3BlbjsKCQl2YXIgZ3JleUZyb21MaWdodG5lc3MgPSBmdW5jdGlvbiAobCkgewoJCQlyZXR1cm4gQTMoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiLCBsLCBsLCBsKTsKCQl9OwoJCXZhciBoaWdobGlnaHRDb2xvciA9IGdyZXlGcm9tTGlnaHRuZXNzKDAuMTgpOwoJCXZhciBlbnRyeUJhY2tncm91bmRDb2xvciA9IGlzSGlnaGxpZ2h0ZWQgPyBoaWdobGlnaHRDb2xvciA6IEE0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJnYmEsIDAsIDAsIDAsIDApOwoJCXZhciBkcm9wZG93bkF0dHJpYnV0ZXMgPSBpc09wZW4gPyBfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGJlbG93KAoJCQkJQTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdGl0bGViYXJNZW51RW50cnlEcm9wZG93bkNvbnRlbnQsIHN0YXRlLCBtZW51RW50cnkpKQoJCQldKSA6IF9MaXN0X05pbDsKCQlyZXR1cm4gQTIoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQlkcm9wZG93bkF0dHJpYnV0ZXMsCgkJCUEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkYnV0dG9uLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQmFja2dyb3VuZCRjb2xvcihlbnRyeUJhY2tncm91bmRDb2xvciksCgkJCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHBhZGRpbmdYWSwgKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSAvIDIpIHwgMCwgNSksCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEV2ZW50cyRvbk1vdXNlRW50ZXIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dE1vdXNlT3ZlclRpdGxlQmFyTWVudSgKCQkJCQkJCSRlbG0kY29yZSRNYXliZSRKdXN0KG1lbnVFbnRyeSkpKSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkRXZlbnRzJG9uTW91c2VMZWF2ZSgKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0TW91c2VPdmVyVGl0bGVCYXJNZW51KCRlbG0kY29yZSRNYXliZSROb3RoaW5nKSksCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJvcmRlciRyb3VuZGVkKDQpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjZW50ZXJZLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRtb3VzZU92ZXIoCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCYWNrZ3JvdW5kJGNvbG9yKGhpZ2hsaWdodENvbG9yKQoJCQkJCQkJXSkpCgkJCQkJXSksCgkJCQl7CgkJCQkJbGFiZWw6ICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHQoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHRpdGxlYmFyTWVudUVudHJ5TGFiZWwobWVudUVudHJ5KSksCgkJCQkJb25QcmVzczogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dFRvZ2dsZVRpdGxlQmFyTWVudShtZW51RW50cnkpKQoJCQkJfSkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkVmlzdWFscyRHcm93QWN0aW9uSWNvbiA9IHskOiAnR3Jvd0FjdGlvbkljb24nfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRWaXN1YWxzJFNocmlua0FjdGlvbkljb24gPSB7JDogJ1Nocmlua0FjdGlvbkljb24nfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dFNldEVubGFyZ2VkUGFuZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdVc2VySW5wdXRTZXRFbmxhcmdlZFBhbmUnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHRvZ2dsZUVubGFyZ2VkUGFuZUJ1dHRvbiA9IEYyKAoJZnVuY3Rpb24gKHN0YXRlLCBwYW5lKSB7CgkJdmFyIHRpdGxlU3ViamVjdCA9IGZ1bmN0aW9uICgpIHsKCQkJaWYgKHBhbmUuJCA9PT0gJ0VkaXRvclBhbmUnKSB7CgkJCQlyZXR1cm4gJ0VkaXRvciBQYW5lJzsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiAnT3V0cHV0IFBhbmUnOwoJCQl9CgkJfSgpOwoJCXZhciBpY29uU2l6ZSA9IDIwOwoJCXZhciBfdjAgPSBfVXRpbHNfZXEoCgkJCXN0YXRlLnZpZXdFbmxhcmdlZFBhbmUsCgkJCSRlbG0kY29yZSRNYXliZSRKdXN0KHBhbmUpKSA/IF9VdGlsc19UdXBsZTMoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkU2hyaW5rQWN0aW9uSWNvbiwgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsICdTaHJpbmsnKSA6IChfVXRpbHNfZXEoc3RhdGUudmlld0VubGFyZ2VkUGFuZSwgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpID8gX1V0aWxzX1R1cGxlMygKCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkR3Jvd0FjdGlvbkljb24sCgkJCSRlbG0kY29yZSRNYXliZSRKdXN0KHBhbmUpLAoJCQknRW5sYXJnZScpIDogX1V0aWxzX1R1cGxlMygkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkVmlzdWFscyRHcm93QWN0aW9uSWNvbiwgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsICdFbmxhcmdlJykpOwoJCXZhciBpY29uID0gX3YwLmE7CgkJdmFyIG9uUHJlc3MgPSBfdjAuYjsKCQl2YXIgdGl0bGVWZXJiID0gX3YwLmM7CgkJdmFyIHRpdGxlID0gdGl0bGVWZXJiICsgKCcgJyArIHRpdGxlU3ViamVjdCk7CgkJcmV0dXJuIEEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWyRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGFsaWduUmlnaHRdKSwKCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRidXR0b24sCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCYWNrZ3JvdW5kJGNvbG9yKAoJCQkJCQlBMygkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyZ2IsIDAuMiwgMC4yLCAwLjIpKSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbW91c2VPdmVyKAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQmFja2dyb3VuZCRjb2xvcigKCQkJCQkJCQlBMygkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyZ2IsIDAuMywgMC4zLCAwLjMpKQoJCQkJCQkJXSkpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nKDQpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sQXR0cmlidXRlKAoJCQkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHRpdGxlKHRpdGxlKSkKCQkJCQldKSwKCQkJCXsKCQkJCQlsYWJlbDogQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcHgoaWNvblNpemUpKSwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRoZWlnaHQoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcHgoaWNvblNpemUpKQoJCQkJCQkJXSksCgkJCQkJCUEyKAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkaWNvblN2Z0VsZW1lbnRGcm9tSWNvbiwKCQkJCQkJCXtjb2xvcjogJ3JnYmEoMjU1LDI1NSwyNTUsMC43KSd9LAoJCQkJCQkJaWNvbikpLAoJCQkJCW9uUHJlc3M6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRTZXRFbmxhcmdlZFBhbmUob25QcmVzcykpCgkJCQl9KSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRyYW5zcGFyZW50ID0gZnVuY3Rpb24gKG9uKSB7CglyZXR1cm4gb24gPyBBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGVDbGFzcywKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR0cmFuc3BhcmVuY3ksCgkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFRyYW5zcGFyZW5jeSwgJ3RyYW5zcGFyZW50JywgMS4wKSkgOiBBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGVDbGFzcywKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyR0cmFuc3BhcmVuY3ksCgkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFRyYW5zcGFyZW5jeSwgJ3Zpc2libGUnLCAwLjApKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEZvbnQkdHlwZWZhY2UgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVHlwZWZhY2U7CnZhciAkZWxtJGNvcmUkTGlzdCRzdW0gPSBmdW5jdGlvbiAobnVtYmVycykgewoJcmV0dXJuIEEzKCRlbG0kY29yZSRMaXN0JGZvbGRsLCAkZWxtJGNvcmUkQmFzaWNzJGFkZCwgMCwgbnVtYmVycyk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQXNUZXh0Q29sdW1uID0geyQ6ICdBc1RleHRDb2x1bW4nfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhc1RleHRDb2x1bW4gPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQXNUZXh0Q29sdW1uOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE1heCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdNYXgnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbWF4aW11bSA9IEYyKAoJZnVuY3Rpb24gKGksIGwpIHsKCQlyZXR1cm4gQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE1heCwgaSwgbCk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHRDb2x1bW4gPSBGMigKCWZ1bmN0aW9uIChhdHRycywgY2hpbGRyZW4pIHsKCQlyZXR1cm4gQTQoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbGVtZW50LAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNUZXh0Q29sdW1uLAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZGl2LAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgKCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbWF4aW11bSwKCQkJCQkJNzUwLAoJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRtaW5pbXVtLCA1MDAsICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpKSksCgkJCQlhdHRycyksCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRVbmtleWVkKGNoaWxkcmVuKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHdvcmtzcGFjZVN1bW1hcnlFbGVtZW50Rm9yRGlhbG9nID0gZnVuY3Rpb24gKHdvcmtzcGFjZVN0YXRlKSB7Cgl2YXIgd29ya3NwYWNlU3RhdGVIYXNoQmFzZTE2ID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFdvcmtzcGFjZVN0YXRlSW5Vcmwkd29ya3NwYWNlU3RhdGVDb21wb3NpdGlvbkhhc2goCgkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlSW5Xb3Jrc3BhY2UkbWFwQmxvYnNUb0J5dGVzKHdvcmtzcGFjZVN0YXRlKSk7Cgl2YXIgd29ya3NwYWNlRmlsZXMgPSAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkZmxhdExpc3RPZkJsb2JzRnJvbUZpbGVUcmVlTm9kZSh3b3Jrc3BhY2VTdGF0ZSk7CglyZXR1cm4gQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dENvbHVtbiwKCQlfTGlzdF9OaWwsCgkJQTIoCgkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJJGVsbSRjb3JlJExpc3Qkc2luZ2xldG9uLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHBhcmFncmFwaChfTGlzdF9OaWwpKSksCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQknVGhlIGN1cnJlbnQgd29ya3NwYWNlIHN0YXRlIGhhcyB0aGUgaGFzaCBjb2RlICcgKyB3b3Jrc3BhY2VTdGF0ZUhhc2hCYXNlMTYsCgkJCQkJJ0l0IGNvbnRhaW5zICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KAoJCQkJCSRlbG0kY29yZSRMaXN0JGxlbmd0aCh3b3Jrc3BhY2VGaWxlcykpICsgKCcgZmlsZXMgd2l0aCBhbiBhZ2dyZWdhdGUgc2l6ZSBvZiAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludCgKCQkJCQkkZWxtJGNvcmUkTGlzdCRzdW0oCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkkZWxtJGNvcmUkVHVwbGUkc2Vjb25kLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJCQkJcmV0dXJuICQuYXNCeXRlczsKCQkJCQkJCQkJfSwKCQkJCQkJCQkJJGVsbSRieXRlcyRCeXRlcyR3aWR0aCkpLAoJCQkJCQkJd29ya3NwYWNlRmlsZXMpKSkgKyAnIGJ5dGVzLicpKSkKCQkJCV0pKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3RXhwb3J0VG9aaXBBcmNoaXZlRGlhbG9nID0gZnVuY3Rpb24gKHdvcmtzcGFjZVN0YXRlKSB7Cgl2YXIgYnV0dG9uRG93bmxvYWRBcmNoaXZlID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kYnV0dG9uRWxlbWVudCgKCQl7CgkJCWxhYmVsOiAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdEb3dubG9hZCBBcmNoaXZlJyksCgkJCW9uUHJlc3M6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0RXhwb3J0V29ya3NwYWNlVG9aaXBBcmNoaXZlKAoJCQkJCXtzZW5kRG93bmxvYWRDbWQ6IHRydWV9KSkKCQl9KTsKCXJldHVybiB7CgkJY29udGVudEVsZW1lbnQ6IEEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjb2x1bW4sCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSksCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCkKCQkJCV0pLAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kd29ya3NwYWNlU3VtbWFyeUVsZW1lbnRGb3JEaWFsb2cod29ya3NwYWNlU3RhdGUpLAoJCQkJCUEyKAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWyRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNlbnRlclhdKSwKCQkJCQlidXR0b25Eb3dubG9hZEFyY2hpdmUpCgkJCQldKSksCgkJZ3VpZGVQYXJhZ3JhcGhJdGVtczogX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdEb3dubG9hZCBhIHppcCBhcmNoaXZlIGNvbnRhaW5pbmcgYWxsIGZpbGVzIGluIHlvdXIgd29ya3NwYWNlLiBZb3UgY2FuIGFsc28gdXNlIHRoaXMgYXJjaGl2ZSB3aXRoIHRoZSBcJ0ltcG9ydCBmcm9tIFppcCBBcmNoaXZlXCcgZnVuY3Rpb24gdG8gbG9hZCB5b3VyIHdvcmtzcGFjZSBpbnRvIHRoZSBlZGl0b3IgYWdhaW4gbGF0ZXIuJykKCQkJXSksCgkJdGl0bGU6ICdFeHBvcnQgV29ya3NwYWNlIHRvIFppcCBBcmNoaXZlJywKCQl0aXRsZUljb246ICRlbG0kY29yZSRNYXliZSRKdXN0KCRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJGZpbGVFeHBvcnQpCgl9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkRGlyZWN0b3J5RXhwYW5kZWRJY29uID0geyQ6ICdEaXJlY3RvcnlFeHBhbmRlZEljb24nfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGJ1aWxkRmlsZVRyZWVWaWV3TGlzdCA9IEYzKAoJZnVuY3Rpb24gKGNvbmZpZ3VyYXRpb24sIHBhdGgsIF92MCkgewoJCXZhciBjdXJyZW50Tm9kZU5hbWUgPSBfdjAuYTsKCQl2YXIgY3VycmVudE5vZGVDb250ZW50ID0gX3YwLmI7CgkJdmFyIGljb24gPSBmdW5jdGlvbiAoKSB7CgkJCWlmIChjdXJyZW50Tm9kZUNvbnRlbnQuJCA9PT0gJ1RyZWVOb2RlJykgewoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCV9VdGlsc19UdXBsZTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkRGlyZWN0b3J5RXhwYW5kZWRJY29uLCAnd2hpdGUnKSk7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gY29uZmlndXJhdGlvbi5pY29uRnJvbUZpbGVOYW1lKGN1cnJlbnROb2RlTmFtZSk7CgkJCX0KCQl9KCk7CgkJdmFyIGN1cnJlbnRJdGVtID0gewoJCQlpY29uOiBpY29uLAoJCQlpbmRlbnRMZXZlbDogJGVsbSRjb3JlJExpc3QkbGVuZ3RoKHBhdGgpLAoJCQlsYWJlbDogY3VycmVudE5vZGVOYW1lLAoJCQlzZWxlY3RFdmVudDogQTIoCgkJCQljb25maWd1cmF0aW9uLnNlbGVjdEV2ZW50RnJvbU5vZGUsCgkJCQlwYXRoLAoJCQkJX1V0aWxzX1R1cGxlMihjdXJyZW50Tm9kZU5hbWUsIGN1cnJlbnROb2RlQ29udGVudCkpCgkJfTsKCQlpZiAoY3VycmVudE5vZGVDb250ZW50LiQgPT09ICdCbG9iTm9kZScpIHsKCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCVtjdXJyZW50SXRlbV0pOwoJCX0gZWxzZSB7CgkJCXZhciB0cmVlID0gY3VycmVudE5vZGVDb250ZW50LmE7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQljdXJyZW50SXRlbSwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJCQlBMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kYnVpbGRGaWxlVHJlZVZpZXdMaXN0LAoJCQkJCQljb25maWd1cmF0aW9uLAoJCQkJCQlfVXRpbHNfYXAoCgkJCQkJCQlwYXRoLAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVtjdXJyZW50Tm9kZU5hbWVdKSkpLAoJCQkJCXRyZWUpKTsKCQl9Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRwYWRkaW5nTmFtZSA9IEY0KAoJZnVuY3Rpb24gKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCkgewoJCXJldHVybiAncGFkLScgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHRvcCkgKyAoJy0nICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChyaWdodCkgKyAoJy0nICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChib3R0b20pICsgKCctJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludChsZWZ0KSkpKSkpKTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFkZGluZ0VhY2ggPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgdG9wID0gX3YwLnRvcDsKCXZhciByaWdodCA9IF92MC5yaWdodDsKCXZhciBib3R0b20gPSBfdjAuYm90dG9tOwoJdmFyIGxlZnQgPSBfdjAubGVmdDsKCWlmIChfVXRpbHNfZXEodG9wLCByaWdodCkgJiYgKF9VdGlsc19lcSh0b3AsIGJvdHRvbSkgJiYgX1V0aWxzX2VxKHRvcCwgbGVmdCkpKSB7CgkJdmFyIHRvcEZsb2F0ID0gdG9wOwoJCXJldHVybiBBMigKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlQ2xhc3MsCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHBhZGRpbmcsCgkJCUE1KAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFBhZGRpbmdTdHlsZSwKCQkJCSdwLScgKyAkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQodG9wKSwKCQkJCXRvcEZsb2F0LAoJCQkJdG9wRmxvYXQsCgkJCQl0b3BGbG9hdCwKCQkJCXRvcEZsb2F0KSk7Cgl9IGVsc2UgewoJCXJldHVybiBBMigKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFN0eWxlQ2xhc3MsCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHBhZGRpbmcsCgkJCUE1KAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFBhZGRpbmdTdHlsZSwKCQkJCUE0KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRwYWRkaW5nTmFtZSwgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KSwKCQkJCXRvcCwKCQkJCXJpZ2h0LAoJCQkJYm90dG9tLAoJCQkJbGVmdCkpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdmlld0ZpbGVUcmVlTGlzdCA9IEEyKAoJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCSRlbG0kY29yZSRMaXN0JG1hcCgKCQlmdW5jdGlvbiAoaXRlbSkgewoJCQl2YXIgaW50ZXJhY3Rpb25BdHRyaWJ1dGVzID0gQTIoCgkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCQlfTGlzdF9OaWwsCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCWZ1bmN0aW9uIChldmVudCkgewoJCQkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEV2ZW50cyRvbkNsaWNrKGV2ZW50KSwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRtb3VzZU92ZXIoCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCYWNrZ3JvdW5kJGNvbG9yKAoJCQkJCQkJCQkJQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiYSwgMSwgMSwgMSwgMC4xKSkKCQkJCQkJCQkJXSkpLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHBvaW50ZXIKCQkJCQkJCV0pOwoJCQkJCX0sCgkJCQkJaXRlbS5zZWxlY3RFdmVudCkpOwoJCQl2YXIgaWNvbkVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7CgkJCQl2YXIgX3YwID0gaXRlbS5pY29uOwoJCQkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbm9uZTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIF92MSA9IF92MC5hOwoJCQkJCXZhciBpY29uVHlwZSA9IF92MS5hOwoJCQkJCXZhciBpY29uQ29sb3IgPSBfdjEuYjsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRWaXN1YWxzJGljb25TdmdFbGVtZW50RnJvbUljb24sCgkJCQkJCXtjb2xvcjogaWNvbkNvbG9yfSwKCQkJCQkJaWNvblR5cGUpOwoJCQkJfQoJCQl9KCk7CgkJCXZhciBjdXJyZW50Tm9kZUVsZW1lbnQgPSBBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nRWFjaCgKCQkJCQkJe2JvdHRvbTogMCwgbGVmdDogaXRlbS5pbmRlbnRMZXZlbCAqICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSwgcmlnaHQ6IDAsIHRvcDogMH0pLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJaW50ZXJhY3Rpb25BdHRyaWJ1dGVzKSksCgkJCQlBMigKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyb3csCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUgLyAyKSB8IDApLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFkZGluZyg1KQoJCQkJCQldKSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCUEyKAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwsCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcHgoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKSkKCQkJCQkJCQldKSwKCQkJCQkJCWljb25FbGVtZW50KSwKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHQoaXRlbS5sYWJlbCkKCQkJCQkJXSkpKTsKCQkJcmV0dXJuIGN1cnJlbnROb2RlRWxlbWVudDsKCQl9KSwKCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbigKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpCgkJCV0pKSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3RmlsZVRyZWUgPSBGMigKCWZ1bmN0aW9uIChjb25maWd1cmF0aW9uLCByb290Tm9kZSkgewoJCWlmIChyb290Tm9kZS4kID09PSAnQmxvYk5vZGUnKSB7CgkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdFcnJvcjogUm9vdCBub2RlIGlzIGEgYmxvYiwgbm90IGEgdHJlZScpOwoJCX0gZWxzZSB7CgkJCXZhciB0cmVlSXRlbXMgPSByb290Tm9kZS5hOwoJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdmlld0ZpbGVUcmVlTGlzdCgKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJCQlBMigkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRidWlsZEZpbGVUcmVlVmlld0xpc3QsIGNvbmZpZ3VyYXRpb24sIF9MaXN0X05pbCksCgkJCQkJdHJlZUl0ZW1zKSk7CgkJfQoJfSk7CnZhciAkZWxtJGh0bWwkSHRtbCRhID0gX1ZpcnR1YWxEb21fbm9kZSgnYScpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbGlua0VsZW1lbnRXaXRoV3JhcHBlZExhYmVsID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIHVybCA9IF92MC51cmw7Cgl2YXIgbGFiZWxUZXh0ID0gX3YwLmxhYmVsVGV4dDsKCXJldHVybiBBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjb2x1bW4sCgkJX0xpc3RfTmlsLAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbCgKCQkJCUEzKAoJCQkJCSRlbG0kaHRtbCRIdG1sJG5vZGUsCgkJCQkJJ3N0eWxlJywKCQkJCQlfTGlzdF9OaWwsCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQkkZWxtJGh0bWwkSHRtbCR0ZXh0KCdcbmE6bGluayB7XG4gIGNvbG9yOiBpbmhlcml0O1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG59XG5cbmE6dmlzaXRlZCB7XG4gIGNvbG9yOiBpbmhlcml0O1xufVxuXG5hOmhvdmVyIHtcbiAgY29sb3I6IGluaGVyaXQ7XG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xufScpCgkJCQkJCV0pKSksCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sKAoJCQkJQTIoCgkJCQkJJGVsbSRodG1sJEh0bWwkYSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCSRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkaHJlZih1cmwpLAoJCQkJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwgJ292ZXJmbG93LXdyYXAnLCAnYW55d2hlcmUnKSwKCQkJCQkJCUEyKCRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkc3R5bGUsICd3aGl0ZS1zcGFjZScsICdwcmUtd3JhcCcpCgkJCQkJCV0pLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJJGVsbSRodG1sJEh0bWwkdGV4dChsYWJlbFRleHQpCgkJCQkJCV0pKSkKCQkJXSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdmlld0dldExpbmtUb1dvcmtzcGFjZURpYWxvZyA9IEYyKAoJZnVuY3Rpb24gKGRpYWxvZ1N0YXRlLCB3b3Jrc3BhY2VTdGF0ZSkgewoJCXZhciBsaW5rRWxlbWVudEZyb21VcmwgPSBmdW5jdGlvbiAodXJsVG9Xb3Jrc3BhY2UpIHsKCQkJdmFyIG1heWJlRGVwZW5kZW5jeVVybCA9IGZ1bmN0aW9uICgpIHsKCQkJCXZhciBfdjAgPSBBMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkYW5kVGhlbiwKCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkV29ya3NwYWNlU3RhdGVJblVybCR3b3Jrc3BhY2VTdGF0ZURlc2NyaXB0aW9uRnJvbVVybCwKCQkJCQkkZWxtJHVybCRVcmwkZnJvbVN0cmluZyh1cmxUb1dvcmtzcGFjZSkpOwoJCQkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9IGVsc2UgewoJCQkJCWlmIChfdjAuYS4kID09PSAnRXJyJykgewoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIHdvcmtzcGFjZURlc2NyaXB0aW9uID0gX3YwLmEuYTsKCQkJCQkJc3dpdGNoICh3b3Jrc3BhY2VEZXNjcmlwdGlvbi4kKSB7CgkJCQkJCQljYXNlICdMaXRlcmFsV29ya3NwYWNlU3RhdGUnOgoJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQkJCWNhc2UgJ0xpbmtXb3Jrc3BhY2VTdGF0ZSc6CgkJCQkJCQkJdmFyIGxpbmsgPSB3b3Jrc3BhY2VEZXNjcmlwdGlvbi5hOwoJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChsaW5rKTsKCQkJCQkJCWRlZmF1bHQ6CgkJCQkJCQkJdmFyIGRpZmZXb3Jrc3BhY2VTdGF0ZSA9IHdvcmtzcGFjZURlc2NyaXB0aW9uLmE7CgkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KGRpZmZXb3Jrc3BhY2VTdGF0ZS5iYXNlKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSgpOwoJCQl2YXIgZGVwZW5kZW5jaWVzRGVzY3JpcHRpb25MaW5lcyA9IEEyKAoJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkJX0xpc3RfTmlsLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJCQlmdW5jdGlvbiAoZGVwZW5kZW5jeVVybCkgewoJCQkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHBhcmFncmFwaCwKCQkJCQkJCQlfTGlzdF9OaWwsCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdUaGUgd29ya3NwYWNlIHN0YXRlIGluIHRoaXMgbGluayBkZXBlbmRzIG9uIGxvYWRpbmcgcmVsYXRlZCBkYXRhIGZyb20gdGhlIGZvbGxvd2luZyBVUkw6ICcpLAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbGlua0VsZW1lbnRGcm9tVXJsQW5kVGV4dExhYmVsKAoJCQkJCQkJCQkJe2xhYmVsVGV4dDogZGVwZW5kZW5jeVVybCwgdXJsOiBkZXBlbmRlbmN5VXJsfSkKCQkJCQkJCQkJXSkpCgkJCQkJCQldKTsKCQkJCQl9LAoJCQkJCW1heWJlRGVwZW5kZW5jeVVybCkpOwoJCQl2YXIgbGlua0Rlc2NyaXB0aW9uTGluZXMgPSBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQlBMigKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYXJhZ3JhcGgsCgkJCQkJX0xpc3RfTmlsLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCgKCQkJCQkJCSdMZW5ndGggb2YgdGhpcyBsaW5rOiAnICsgJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KAoJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckbGVuZ3RoKHVybFRvV29ya3NwYWNlKSkpCgkJCQkJCV0pKSwKCQkJCWRlcGVuZGVuY2llc0Rlc2NyaXB0aW9uTGluZXMpOwoJCQlyZXR1cm4gQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjb2x1bW4sCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSksCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpCgkJCQkJXSksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwsCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRoZWlnaHQoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcHgoMTAwKSksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2Nyb2xsYmFyWSwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRGb250JHNpemUoKCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUgKiA0KSAvIDUpIHwgMCkKCQkJCQkJCV0pLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRsaW5rRWxlbWVudFdpdGhXcmFwcGVkTGFiZWwoCgkJCQkJCQl7bGFiZWxUZXh0OiB1cmxUb1dvcmtzcGFjZSwgdXJsOiB1cmxUb1dvcmtzcGFjZX0pKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHRDb2x1bW4sCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRGb250JHNpemUoKCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUgKiA0KSAvIDUpIHwgMCksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFkZGluZygkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUpCgkJCQkJCQldKSwKCQkJCQkJbGlua0Rlc2NyaXB0aW9uTGluZXMpCgkJCQkJXSkpOwoJCX07CgkJdmFyIGJ1dHRvbkdlbmVyYXRlTGlua09yUmVzdWx0RWxlbWVudCA9IEEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjb2x1bW4sCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSkKCQkJCV0pLAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJQTIoCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFyYWdyYXBoLAoJCQkJCV9MaXN0X05pbCwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHQoJ1VzZSB0aGUgbGluayBiZWxvdyB0byBsb2FkIHlvdXIgd29ya3NwYWNlXCdzIGN1cnJlbnQgc3RhdGUgYWdhaW4gbGF0ZXIuIFRoaXMgbGluayBpcyBhIGZhc3Qgd2F5IHRvIHNoYXJlIHlvdXIgd29ya3NwYWNlIHdpdGggb3RoZXIgcGVvcGxlLicpCgkJCQkJCV0pKSwKCQkJCQlsaW5rRWxlbWVudEZyb21VcmwoZGlhbG9nU3RhdGUudXJsVG9Xb3Jrc3BhY2UpCgkJCQldKSk7CgkJcmV0dXJuIHsKCQkJY29udGVudEVsZW1lbnQ6IEEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY29sdW1uLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc3BhY2luZygkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKQoJCQkJCV0pLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kd29ya3NwYWNlU3VtbWFyeUVsZW1lbnRGb3JEaWFsb2cod29ya3NwYWNlU3RhdGUpLAoJCQkJCQlBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwsCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKQoJCQkJCQkJXSksCgkJCQkJCWJ1dHRvbkdlbmVyYXRlTGlua09yUmVzdWx0RWxlbWVudCkKCQkJCQldKSksCgkJCWd1aWRlUGFyYWdyYXBoSXRlbXM6IF9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdHZXQgYSBsaW5rIHRvIHNhdmUgb3Igc2hhcmUgeW91ciB3b3Jrc3BhY2VcJ3MgY3VycmVudCBzdGF0ZS4nKQoJCQkJXSksCgkJCXRpdGxlOiAnR2V0IExpbmsgdG8gV29ya3NwYWNlIGZvciBCb29rbWFya2luZyBvciBTaGFyaW5nJywKCQkJdGl0bGVJY29uOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRTb2xpZCRib29rbWFyaykKCQl9OwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRGcm9tWmlwQXJjaGl2ZVdvcmtzcGFjZVN0YXRlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0Zyb21aaXBBcmNoaXZlV29ya3NwYWNlU3RhdGUnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJEltcG9ydEZyb21aaXBBcmNoaXZlU2VsZWN0RmlsZSA9IHskOiAnSW1wb3J0RnJvbVppcEFyY2hpdmVTZWxlY3RGaWxlJ307CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRMb2FkT3JJbXBvcnRUYWtlV29ya3NwYWNlU3RhdGVFdmVudCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdVc2VySW5wdXRMb2FkT3JJbXBvcnRUYWtlV29ya3NwYWNlU3RhdGVFdmVudCcsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdmlld0xvYWRPckltcG9ydERpYWxvZ1Jlc3VsdEVsZW1lbnQgPSBGMygKCWZ1bmN0aW9uIChlbGVtZW50VG9EaXNwbGF5RnJvbUVycm9yLCBjb21taXRFdmVudCwgbG9hZENvbXBvc2l0aW9uUmVzdWx0KSB7CgkJaWYgKGxvYWRDb21wb3NpdGlvblJlc3VsdC4kID09PSAnRXJyJykgewoJCQl2YXIgbG9hZEVycm9yID0gbG9hZENvbXBvc2l0aW9uUmVzdWx0LmE7CgkJCXJldHVybiBlbGVtZW50VG9EaXNwbGF5RnJvbUVycm9yKGxvYWRFcnJvcik7CgkJfSBlbHNlIHsKCQkJdmFyIGxvYWRPayA9IGxvYWRDb21wb3NpdGlvblJlc3VsdC5hOwoJCQl2YXIgX3YxID0gZnVuY3Rpb24gKCkgewoJCQkJaWYgKGxvYWRPay4kID09PSAnRnJvbVppcEFyY2hpdmVXb3Jrc3BhY2VTdGF0ZScpIHsKCQkJCQl2YXIgZnJvbVppcCA9IGxvYWRPay5hOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKGZyb21aaXAuZmlsZVRyZWUsIGZyb21aaXAuY29tcG9zaXRpb25JZENhY2hlKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGZyb21HaXQgPSBsb2FkT2suYTsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihmcm9tR2l0LmZpbGVUcmVlLCBmcm9tR2l0LmNvbXBvc2l0aW9uSWRDYWNoZSk7CgkJCQl9CgkJCX0oKTsKCQkJdmFyIGZpbGVUcmVlID0gX3YxLmE7CgkJCXZhciBjb21wb3NpdGlvbklkQ2FjaGUgPSBfdjEuYjsKCQkJcmV0dXJuIEEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY29sdW1uLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc3BhY2luZygoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplIC8gMikgfCAwKQoJCQkJCV0pLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHBhcmFncmFwaCwKCQkJCQkJX0xpc3RfTmlsLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCgKCQkJCQkJCQknTG9hZGVkIGNvbXBvc2l0aW9uICcgKyAoY29tcG9zaXRpb25JZENhY2hlICsgKCcgY29udGFpbmluZyAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludCgKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkbGVuZ3RoKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJGZsYXRMaXN0T2ZCbG9ic0Zyb21GaWxlVHJlZU5vZGUoZmlsZVRyZWUpKSkgKyAnIGZpbGVzOicpKSkpCgkJCQkJCQldKSksCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNjcm9sbGJhcnMsCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHB4KDIwMCkpLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHBhZGRpbmcoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKSwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCb3JkZXIkd2lkdGgoMSksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQm9yZGVyJGNvbG9yKAoJCQkJCQkJCUE0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJnYmEsIDEsIDEsIDEsIDAuNSkpCgkJCQkJCQldKSwKCQkJCQkJQTIoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3RmlsZVRyZWUsCgkJCQkJCQl7CgkJCQkJCQkJaWNvbkZyb21GaWxlTmFtZTogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkaWNvbkZyb21GaWxlTmFtZSwKCQkJCQkJCQlzZWxlY3RFdmVudEZyb21Ob2RlOiAkZWxtJGNvcmUkQmFzaWNzJGFsd2F5cygKCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRhbHdheXMoJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpKQoJCQkJCQkJfSwKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHNvcnRGaWxlVHJlZUZvckV4cGxvcmVyVmlldyhmaWxlVHJlZSkpKSwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY2VudGVyWF0pLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRidXR0b25FbGVtZW50KAoJCQkJCQkJewoJCQkJCQkJCWxhYmVsOiAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdTZXQgdGhlc2UgZmlsZXMgYXMgd29ya3NwYWNlIHN0YXRlJyksCgkJCQkJCQkJb25QcmVzczogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCWNvbW1pdEV2ZW50KGxvYWRPaykpCgkJCQkJCQl9KSkKCQkJCQldKSk7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3SW1wb3J0RnJvbVppcEFyY2hpdmVEaWFsb2cgPSBmdW5jdGlvbiAoZGlhbG9nU3RhdGUpIHsKCXZhciBzZWxlY3RGaWxlQnV0dG9uID0gQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwsCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY2VudGVyWF0pLAoJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGJ1dHRvbkVsZW1lbnQoCgkJCXsKCQkJCWxhYmVsOiAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdTZWxlY3QgemlwIGFyY2hpdmUgZmlsZScpLAoJCQkJb25QcmVzczogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0SW1wb3J0V29ya3NwYWNlRnJvbVppcEFyY2hpdmUoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kSW1wb3J0RnJvbVppcEFyY2hpdmVTZWxlY3RGaWxlKSkKCQkJfSkpOwoJdmFyIHJlc3VsdEVsZW1lbnQgPSBBMigKCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbm9uZSwKCQlBMigKCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kRnJvbVppcEFyY2hpdmVXb3Jrc3BhY2VTdGF0ZSksCgkJCQlBMigkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3TG9hZE9ySW1wb3J0RGlhbG9nUmVzdWx0RWxlbWVudCwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGlhbG9nRXJyb3JFbGVtZW50RnJvbURlc2NyaXB0aW9uLCAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRMb2FkT3JJbXBvcnRUYWtlV29ya3NwYWNlU3RhdGVFdmVudCkpLAoJCQlkaWFsb2dTdGF0ZS5sb2FkQ29tcG9zaXRpb25SZXN1bHQpKTsKCXJldHVybiB7CgkJY29udGVudEVsZW1lbnQ6IEEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjb2x1bW4sCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSkKCQkJCV0pLAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbc2VsZWN0RmlsZUJ1dHRvbiwgcmVzdWx0RWxlbWVudF0pKSwKCQlndWlkZVBhcmFncmFwaEl0ZW1zOiBfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHQoJ0xvYWQgd29ya3NwYWNlIGZpbGVzIGZyb20gYSB6aXAgYXJjaGl2ZS4gSGVyZSB5b3UgY2FuIHNlbGVjdCBhIHppcCBhcmNoaXZlIGZpbGUgZnJvbSB5b3VyIHN5c3RlbSB0byBsb2FkIGFzIHRoZSB3b3Jrc3BhY2Ugc3RhdGUuJykKCQkJXSksCgkJdGl0bGU6ICdJbXBvcnQgV29ya3NwYWNlIGZyb20gWmlwIEFyY2hpdmUnLAoJCXRpdGxlSWNvbjogJGVsbSRjb3JlJE1heWJlJEp1c3QoJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkZmlsZUltcG9ydCkKCX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRGcm9tR2l0V29ya3NwYWNlU3RhdGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRnJvbUdpdFdvcmtzcGFjZVN0YXRlJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRMb2FkRnJvbUdpdEJlZ2luUmVxdWVzdEV2ZW50ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xvYWRGcm9tR2l0QmVnaW5SZXF1ZXN0RXZlbnQnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJExvYWRGcm9tR2l0RW50ZXJVcmxFdmVudCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdMb2FkRnJvbUdpdEVudGVyVXJsRXZlbnQnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dExvYWRGcm9tR2l0ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1VzZXJJbnB1dExvYWRGcm9tR2l0JywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlbGVtZW50VHJhbnNwYXJlbnQgPSBmdW5jdGlvbiAobWFrZVRyYW5zcGFyZW50KSB7CglyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbEF0dHJpYnV0ZSgKCQlBMigKCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwKCQkJJ3Zpc2liaWxpdHknLAoJCQltYWtlVHJhbnNwYXJlbnQgPyAnaGlkZGVuJyA6ICdpbmhlcml0JykpOwp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkQWJvdmUgPSB7JDogJ0Fib3ZlJ307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRMYWJlbCA9IEYzKAoJZnVuY3Rpb24gKGEsIGIsIGMpIHsKCQlyZXR1cm4geyQ6ICdMYWJlbCcsIGE6IGEsIGI6IGIsIGM6IGN9OwoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRsYWJlbEFib3ZlID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkTGFiZWwoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkQWJvdmUpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kb25LZXlEb3duRW50ZXIgPSBmdW5jdGlvbiAobXNnKSB7CglyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbEF0dHJpYnV0ZSgKCQlBMigKCQkJJGVsbSRodG1sJEh0bWwkRXZlbnRzJG9uLAoJCQkna2V5ZG93bicsCgkJCUEyKAoJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGFuZFRoZW4sCgkJCQlmdW5jdGlvbiAoa2V5KSB7CgkJCQkJcmV0dXJuIChrZXkgPT09ICdFbnRlcicpID8gJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQobXNnKSA6ICRlbG0kanNvbiRKc29uJERlY29kZSRmYWlsKCdOb3QgdGhlIGVudGVyIGtleScpOwoJCQkJfSwKCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgJ2tleScsICRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpKSkpOwp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkUGxhY2Vob2xkZXIgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnUGxhY2Vob2xkZXInLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkcGxhY2Vob2xkZXIgPSAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRQbGFjZWhvbGRlcjsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JFRleHRJbnB1dE5vZGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVGV4dElucHV0Tm9kZScsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkVGV4dEFyZWEgPSB7JDogJ1RleHRBcmVhJ307CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTGl2ZVBvbGl0ZSA9IHskOiAnTGl2ZVBvbGl0ZSd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkUmVnaW9uJGFubm91bmNlID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJERlc2NyaWJlKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRMaXZlUG9saXRlKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JGFwcGx5TGFiZWwgPSBGMygKCWZ1bmN0aW9uIChhdHRycywgbGFiZWwsIGlucHV0KSB7CgkJaWYgKGxhYmVsLiQgPT09ICdIaWRkZW5MYWJlbCcpIHsKCQkJdmFyIGxhYmVsVGV4dCA9IGxhYmVsLmE7CgkJCXJldHVybiBBNCgKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbGVtZW50LAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFzQ29sdW1uLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE5vZGVOYW1lKCdsYWJlbCcpLAoJCQkJYXR0cnMsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVW5rZXllZCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVtpbnB1dF0pKSk7CgkJfSBlbHNlIHsKCQkJdmFyIHBvc2l0aW9uID0gbGFiZWwuYTsKCQkJdmFyIGxhYmVsQXR0cnMgPSBsYWJlbC5iOwoJCQl2YXIgbGFiZWxDaGlsZCA9IGxhYmVsLmM7CgkJCXZhciBsYWJlbEVsZW1lbnQgPSBBNCgKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbGVtZW50LAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFzRWwsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZGl2LAoJCQkJbGFiZWxBdHRycywKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRVbmtleWVkKAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJW2xhYmVsQ2hpbGRdKSkpOwoJCQlzd2l0Y2ggKHBvc2l0aW9uLiQpIHsKCQkJCWNhc2UgJ0Fib3ZlJzoKCQkJCQlyZXR1cm4gQTQoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbGVtZW50LAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNDb2x1bW4sCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb2RlTmFtZSgnbGFiZWwnKSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGh0bWxDbGFzcygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5pbnB1dExhYmVsKSwKCQkJCQkJCWF0dHJzKSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVua2V5ZWQoCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJW2xhYmVsRWxlbWVudCwgaW5wdXRdKSkpOwoJCQkJY2FzZSAnQmVsb3cnOgoJCQkJCXJldHVybiBBNCgKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGVsZW1lbnQsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhc0NvbHVtbiwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE5vZGVOYW1lKCdsYWJlbCcpLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkaHRtbENsYXNzKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmlucHV0TGFiZWwpLAoJCQkJCQkJYXR0cnMpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVW5rZXllZCgKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbaW5wdXQsIGxhYmVsRWxlbWVudF0pKSk7CgkJCQljYXNlICdPblJpZ2h0JzoKCQkJCQlyZXR1cm4gQTQoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbGVtZW50LAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNSb3csCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb2RlTmFtZSgnbGFiZWwnKSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGh0bWxDbGFzcygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5pbnB1dExhYmVsKSwKCQkJCQkJCWF0dHJzKSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVua2V5ZWQoCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJW2lucHV0LCBsYWJlbEVsZW1lbnRdKSkpOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gQTQoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbGVtZW50LAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNSb3csCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb2RlTmFtZSgnbGFiZWwnKSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGh0bWxDbGFzcygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5pbnB1dExhYmVsKSwKCQkJCQkJCWF0dHJzKSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVua2V5ZWQoCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJW2xhYmVsRWxlbWVudCwgaW5wdXRdKSkpOwoJCQl9CgkJfQoJfSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRhdXRvZmlsbCA9IEEyKAoJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlTCwKCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBdHRyLAoJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRhdHRyaWJ1dGUoJ2F1dG9jb21wbGV0ZScpKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRCZWhpbmQgPSB7JDogJ0JlaGluZCd9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkYmVoaW5kQ29udGVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CglyZXR1cm4gQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY3JlYXRlTmVhcmJ5LCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQmVoaW5kLCBlbGVtZW50KTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRNb3ZlWSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdNb3ZlWScsIGE6IGF9Owp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckbW92ZVkgPSAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRmbGFnKDI2KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JG1vdmVVcCA9IGZ1bmN0aW9uICh5KSB7CglyZXR1cm4gQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFRyYW5zZm9ybUNvbXBvbmVudCwKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRtb3ZlWSwKCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTW92ZVkoLXkpKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JGNhbGNNb3ZlVG9Db21wZW5zYXRlRm9yUGFkZGluZyA9IGZ1bmN0aW9uIChhdHRycykgewoJdmFyIGdhdGhlclNwYWNpbmcgPSBGMigKCQlmdW5jdGlvbiAoYXR0ciwgZm91bmQpIHsKCQkJaWYgKChhdHRyLiQgPT09ICdTdHlsZUNsYXNzJykgJiYgKGF0dHIuYi4kID09PSAnU3BhY2luZ1N0eWxlJykpIHsKCQkJCXZhciBfdjIgPSBhdHRyLmI7CgkJCQl2YXIgeCA9IF92Mi5iOwoJCQkJdmFyIHkgPSBfdjIuYzsKCQkJCWlmIChmb3VuZC4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoeSk7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiBmb3VuZDsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXJldHVybiBmb3VuZDsKCQkJfQoJCX0pOwoJdmFyIF92MCA9IEEzKCRlbG0kY29yZSRMaXN0JGZvbGRyLCBnYXRoZXJTcGFjaW5nLCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywgYXR0cnMpOwoJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE5vQXR0cmlidXRlOwoJfSBlbHNlIHsKCQl2YXIgdlNwYWNlID0gX3YwLmE7CgkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JG1vdmVVcCgKCQkJJGVsbSRjb3JlJEJhc2ljcyRmbG9vcih2U3BhY2UgLyAyKSk7Cgl9Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRkYXJrR3JleSA9IEEzKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJnYiwgMTg2IC8gMjU1LCAxODkgLyAyNTUsIDE4MiAvIDI1NSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRkZWZhdWx0VGV4dFBhZGRpbmcgPSBBMigkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nWFksIDEyLCAxMik7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCR3aGl0ZSA9IEEzKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJnYiwgMSwgMSwgMSk7CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRkZWZhdWx0VGV4dEJveFN0eWxlID0gX0xpc3RfZnJvbUFycmF5KAoJWwoJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JGRlZmF1bHRUZXh0UGFkZGluZywKCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCb3JkZXIkcm91bmRlZCgzKSwKCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCb3JkZXIkY29sb3IoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkZGFya0dyZXkpLAoJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJhY2tncm91bmQkY29sb3IoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkd2hpdGUpLAoJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJvcmRlciR3aWR0aCgxKSwKCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKDUpLAoJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzaHJpbmspCgldKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JGdldEhlaWdodCA9IGZ1bmN0aW9uIChhdHRyKSB7CglpZiAoYXR0ci4kID09PSAnSGVpZ2h0JykgewoJCXZhciBoID0gYXR0ci5hOwoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChoKTsKCX0gZWxzZSB7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfQp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJExhYmVsID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xhYmVsJywgYTogYX07Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRoaWRkZW5MYWJlbEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChsYWJlbCkgewoJaWYgKGxhYmVsLiQgPT09ICdIaWRkZW5MYWJlbCcpIHsKCQl2YXIgdGV4dExhYmVsID0gbGFiZWwuYTsKCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJERlc2NyaWJlKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTGFiZWwodGV4dExhYmVsKSk7Cgl9IGVsc2UgewoJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTm9BdHRyaWJ1dGU7Cgl9Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRpc0NvbnN0cmFpbmVkID0gZnVuY3Rpb24gKGxlbikgewoJaXNDb25zdHJhaW5lZDoKCXdoaWxlICh0cnVlKSB7CgkJc3dpdGNoIChsZW4uJCkgewoJCQljYXNlICdDb250ZW50JzoKCQkJCXJldHVybiBmYWxzZTsKCQkJY2FzZSAnUHgnOgoJCQkJcmV0dXJuIHRydWU7CgkJCWNhc2UgJ0ZpbGwnOgoJCQkJcmV0dXJuIHRydWU7CgkJCWNhc2UgJ01pbic6CgkJCQl2YXIgbCA9IGxlbi5iOwoJCQkJdmFyICR0ZW1wJGxlbiA9IGw7CgkJCQlsZW4gPSAkdGVtcCRsZW47CgkJCQljb250aW51ZSBpc0NvbnN0cmFpbmVkOwoJCQlkZWZhdWx0OgoJCQkJdmFyIGwgPSBsZW4uYjsKCQkJCXJldHVybiB0cnVlOwoJCX0KCX0KfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JGlzSGlkZGVuTGFiZWwgPSBmdW5jdGlvbiAobGFiZWwpIHsKCWlmIChsYWJlbC4kID09PSAnSGlkZGVuTGFiZWwnKSB7CgkJcmV0dXJuIHRydWU7Cgl9IGVsc2UgewoJCXJldHVybiBmYWxzZTsKCX0KfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JGlzU3RhY2tlZCA9IGZ1bmN0aW9uIChsYWJlbCkgewoJaWYgKGxhYmVsLiQgPT09ICdMYWJlbCcpIHsKCQl2YXIgbG9jID0gbGFiZWwuYTsKCQlzd2l0Y2ggKGxvYy4kKSB7CgkJCWNhc2UgJ09uUmlnaHQnOgoJCQkJcmV0dXJuIGZhbHNlOwoJCQljYXNlICdPbkxlZnQnOgoJCQkJcmV0dXJuIGZhbHNlOwoJCQljYXNlICdBYm92ZSc6CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiB0cnVlOwoJCX0KCX0gZWxzZSB7CgkJcmV0dXJuIHRydWU7Cgl9Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRuZWdhdGVCb3ggPSBmdW5jdGlvbiAoYm94KSB7CglyZXR1cm4ge2JvdHRvbTogLWJveC5ib3R0b20sIGxlZnQ6IC1ib3gubGVmdCwgcmlnaHQ6IC1ib3gucmlnaHQsIHRvcDogLWJveC50b3B9Owp9Owp2YXIgJGVsbSRodG1sJEh0bWwkRXZlbnRzJGFsd2F5c1N0b3AgPSBmdW5jdGlvbiAoeCkgewoJcmV0dXJuIF9VdGlsc19UdXBsZTIoeCwgdHJ1ZSk7Cn07CnZhciAkZWxtJHZpcnR1YWxfZG9tJFZpcnR1YWxEb20kTWF5U3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ01heVN0b3BQcm9wYWdhdGlvbicsIGE6IGF9Owp9Owp2YXIgJGVsbSRodG1sJEh0bWwkRXZlbnRzJHN0b3BQcm9wYWdhdGlvbk9uID0gRjIoCglmdW5jdGlvbiAoZXZlbnQsIGRlY29kZXIpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRvbiwKCQkJZXZlbnQsCgkJCSRlbG0kdmlydHVhbF9kb20kVmlydHVhbERvbSRNYXlTdG9wUHJvcGFnYXRpb24oZGVjb2RlcikpOwoJfSk7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkYXQgPSBGMigKCWZ1bmN0aW9uIChmaWVsZHMsIGRlY29kZXIpIHsKCQlyZXR1cm4gQTMoJGVsbSRjb3JlJExpc3QkZm9sZHIsICRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwgZGVjb2RlciwgZmllbGRzKTsKCX0pOwp2YXIgJGVsbSRodG1sJEh0bWwkRXZlbnRzJHRhcmdldFZhbHVlID0gQTIoCgkkZWxtJGpzb24kSnNvbiREZWNvZGUkYXQsCglfTGlzdF9mcm9tQXJyYXkoCgkJWyd0YXJnZXQnLCAndmFsdWUnXSksCgkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKTsKdmFyICRlbG0kaHRtbCRIdG1sJEV2ZW50cyRvbklucHV0ID0gZnVuY3Rpb24gKHRhZ2dlcikgewoJcmV0dXJuIEEyKAoJCSRlbG0kaHRtbCRIdG1sJEV2ZW50cyRzdG9wUHJvcGFnYXRpb25PbiwKCQknaW5wdXQnLAoJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkkZWxtJGh0bWwkSHRtbCRFdmVudHMkYWx3YXlzU3RvcCwKCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwgdGFnZ2VyLCAkZWxtJGh0bWwkSHRtbCRFdmVudHMkdGFyZ2V0VmFsdWUpKSk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRpc0ZpbGwgPSBmdW5jdGlvbiAobGVuKSB7Cglpc0ZpbGw6Cgl3aGlsZSAodHJ1ZSkgewoJCXN3aXRjaCAobGVuLiQpIHsKCQkJY2FzZSAnRmlsbCc6CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJY2FzZSAnQ29udGVudCc6CgkJCQlyZXR1cm4gZmFsc2U7CgkJCWNhc2UgJ1B4JzoKCQkJCXJldHVybiBmYWxzZTsKCQkJY2FzZSAnTWluJzoKCQkJCXZhciBsID0gbGVuLmI7CgkJCQl2YXIgJHRlbXAkbGVuID0gbDsKCQkJCWxlbiA9ICR0ZW1wJGxlbjsKCQkJCWNvbnRpbnVlIGlzRmlsbDsKCQkJZGVmYXVsdDoKCQkJCXZhciBsID0gbGVuLmI7CgkJCQl2YXIgJHRlbXAkbGVuID0gbDsKCQkJCWxlbiA9ICR0ZW1wJGxlbjsKCQkJCWNvbnRpbnVlIGlzRmlsbDsKCQl9Cgl9Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRpc1BpeGVsID0gZnVuY3Rpb24gKGxlbikgewoJaXNQaXhlbDoKCXdoaWxlICh0cnVlKSB7CgkJc3dpdGNoIChsZW4uJCkgewoJCQljYXNlICdDb250ZW50JzoKCQkJCXJldHVybiBmYWxzZTsKCQkJY2FzZSAnUHgnOgoJCQkJcmV0dXJuIHRydWU7CgkJCWNhc2UgJ0ZpbGwnOgoJCQkJcmV0dXJuIGZhbHNlOwoJCQljYXNlICdNaW4nOgoJCQkJdmFyIGwgPSBsZW4uYjsKCQkJCXZhciAkdGVtcCRsZW4gPSBsOwoJCQkJbGVuID0gJHRlbXAkbGVuOwoJCQkJY29udGludWUgaXNQaXhlbDsKCQkJZGVmYXVsdDoKCQkJCXZhciBsID0gbGVuLmI7CgkJCQl2YXIgJHRlbXAkbGVuID0gbDsKCQkJCWxlbiA9ICR0ZW1wJGxlbjsKCQkJCWNvbnRpbnVlIGlzUGl4ZWw7CgkJfQoJfQp9Owp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJHBhZGRpbmdOYW1lRmxvYXQgPSBGNCgKCWZ1bmN0aW9uICh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpIHsKCQlyZXR1cm4gJ3BhZC0nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmbG9hdENsYXNzKHRvcCkgKyAoJy0nICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRmbG9hdENsYXNzKHJpZ2h0KSArICgnLScgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGZsb2F0Q2xhc3MoYm90dG9tKSArICgnLScgKyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZmxvYXRDbGFzcyhsZWZ0KSkpKSkpKTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkcmVkaXN0cmlidXRlT3ZlciA9IEY0KAoJZnVuY3Rpb24gKGlzTXVsdGlsaW5lLCBzdGFja2VkLCBhdHRyLCBlbHMpIHsKCQlzd2l0Y2ggKGF0dHIuJCkgewoJCQljYXNlICdOZWFyYnknOgoJCQkJcmV0dXJuIF9VdGlsc191cGRhdGUoCgkJCQkJZWxzLAoJCQkJCXsKCQkJCQkJcGFyZW50OiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBhdHRyLCBlbHMucGFyZW50KQoJCQkJCX0pOwoJCQljYXNlICdXaWR0aCc6CgkJCQl2YXIgd2lkdGggPSBhdHRyLmE7CgkJCQlyZXR1cm4gJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkaXNGaWxsKHdpZHRoKSA/IF9VdGlsc191cGRhdGUoCgkJCQkJZWxzLAoJCQkJCXsKCQkJCQkJZnVsbFBhcmVudDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLmZ1bGxQYXJlbnQpLAoJCQkJCQlpbnB1dDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLmlucHV0KSwKCQkJCQkJcGFyZW50OiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBhdHRyLCBlbHMucGFyZW50KQoJCQkJCX0pIDogKHN0YWNrZWQgPyBfVXRpbHNfdXBkYXRlKAoJCQkJCWVscywKCQkJCQl7CgkJCQkJCWZ1bGxQYXJlbnQ6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGF0dHIsIGVscy5mdWxsUGFyZW50KQoJCQkJCX0pIDogX1V0aWxzX3VwZGF0ZSgKCQkJCQllbHMsCgkJCQkJewoJCQkJCQlwYXJlbnQ6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGF0dHIsIGVscy5wYXJlbnQpCgkJCQkJfSkpOwoJCQljYXNlICdIZWlnaHQnOgoJCQkJdmFyIGhlaWdodCA9IGF0dHIuYTsKCQkJCXJldHVybiAoIXN0YWNrZWQpID8gX1V0aWxzX3VwZGF0ZSgKCQkJCQllbHMsCgkJCQkJewoJCQkJCQlmdWxsUGFyZW50OiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBhdHRyLCBlbHMuZnVsbFBhcmVudCksCgkJCQkJCXBhcmVudDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLnBhcmVudCkKCQkJCQl9KSA6ICgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRpc0ZpbGwoaGVpZ2h0KSA/IF9VdGlsc191cGRhdGUoCgkJCQkJZWxzLAoJCQkJCXsKCQkJCQkJZnVsbFBhcmVudDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLmZ1bGxQYXJlbnQpLAoJCQkJCQlwYXJlbnQ6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGF0dHIsIGVscy5wYXJlbnQpCgkJCQkJfSkgOiAoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkaXNQaXhlbChoZWlnaHQpID8gX1V0aWxzX3VwZGF0ZSgKCQkJCQllbHMsCgkJCQkJewoJCQkJCQlwYXJlbnQ6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGF0dHIsIGVscy5wYXJlbnQpCgkJCQkJfSkgOiBfVXRpbHNfdXBkYXRlKAoJCQkJCWVscywKCQkJCQl7CgkJCQkJCXBhcmVudDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLnBhcmVudCkKCQkJCQl9KSkpOwoJCQljYXNlICdBbGlnblgnOgoJCQkJcmV0dXJuIF9VdGlsc191cGRhdGUoCgkJCQkJZWxzLAoJCQkJCXsKCQkJCQkJZnVsbFBhcmVudDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLmZ1bGxQYXJlbnQpCgkJCQkJfSk7CgkJCWNhc2UgJ0FsaWduWSc6CgkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQllbHMsCgkJCQkJewoJCQkJCQlmdWxsUGFyZW50OiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBhdHRyLCBlbHMuZnVsbFBhcmVudCkKCQkJCQl9KTsKCQkJY2FzZSAnU3R5bGVDbGFzcyc6CgkJCQlzd2l0Y2ggKGF0dHIuYi4kKSB7CgkJCQkJY2FzZSAnU3BhY2luZ1N0eWxlJzoKCQkJCQkJdmFyIF92MSA9IGF0dHIuYjsKCQkJCQkJcmV0dXJuIF9VdGlsc191cGRhdGUoCgkJCQkJCQllbHMsCgkJCQkJCQl7CgkJCQkJCQkJZnVsbFBhcmVudDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLmZ1bGxQYXJlbnQpLAoJCQkJCQkJCWlucHV0OiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBhdHRyLCBlbHMuaW5wdXQpLAoJCQkJCQkJCXBhcmVudDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLnBhcmVudCksCgkJCQkJCQkJd3JhcHBlcjogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLndyYXBwZXIpCgkJCQkJCQl9KTsKCQkJCQljYXNlICdQYWRkaW5nU3R5bGUnOgoJCQkJCQl2YXIgY2xzID0gYXR0ci5hOwoJCQkJCQl2YXIgX3YyID0gYXR0ci5iOwoJCQkJCQl2YXIgcGFkID0gX3YyLmE7CgkJCQkJCXZhciB0ID0gX3YyLmI7CgkJCQkJCXZhciByID0gX3YyLmM7CgkJCQkJCXZhciBiID0gX3YyLmQ7CgkJCQkJCXZhciBsID0gX3YyLmU7CgkJCQkJCWlmIChpc011bHRpbGluZSkgewoJCQkJCQkJcmV0dXJuIF9VdGlsc191cGRhdGUoCgkJCQkJCQkJZWxzLAoJCQkJCQkJCXsKCQkJCQkJCQkJY292ZXI6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGF0dHIsIGVscy5jb3ZlciksCgkJCQkJCQkJCXBhcmVudDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLnBhcmVudCkKCQkJCQkJCQl9KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBuZXdUb3AgPSB0IC0gQTIoJGVsbSRjb3JlJEJhc2ljcyRtaW4sIHQsIGIpOwoJCQkJCQkJdmFyIG5ld0xpbmVIZWlnaHQgPSAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sQXR0cmlidXRlKAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0eWxlLAoJCQkJCQkJCQknbGluZS1oZWlnaHQnLAoJCQkJCQkJCQknY2FsYygxLjBlbSArICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQoCgkJCQkJCQkJCQkyICogQTIoJGVsbSRjb3JlJEJhc2ljcyRtaW4sIHQsIGIpKSArICdweCknKSkpOwoJCQkJCQkJdmFyIG5ld0hlaWdodCA9ICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWxBdHRyaWJ1dGUoCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkc3R5bGUsCgkJCQkJCQkJCSdoZWlnaHQnLAoJCQkJCQkJCQknY2FsYygxLjBlbSArICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQoCgkJCQkJCQkJCQkyICogQTIoJGVsbSRjb3JlJEJhc2ljcyRtaW4sIHQsIGIpKSArICdweCknKSkpOwoJCQkJCQkJdmFyIG5ld0JvdHRvbSA9IGIgLSBBMigkZWxtJGNvcmUkQmFzaWNzJG1pbiwgdCwgYik7CgkJCQkJCQl2YXIgcmVkdWNlZFZlcnRpY2FsUGFkZGluZyA9IEEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTdHlsZUNsYXNzLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJHBhZGRpbmcsCgkJCQkJCQkJQTUoCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQYWRkaW5nU3R5bGUsCgkJCQkJCQkJCUE0KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRwYWRkaW5nTmFtZUZsb2F0LCBuZXdUb3AsIHIsIG5ld0JvdHRvbSwgbCksCgkJCQkJCQkJCW5ld1RvcCwKCQkJCQkJCQkJciwKCQkJCQkJCQkJbmV3Qm90dG9tLAoJCQkJCQkJCQlsKSk7CgkJCQkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQkJCQllbHMsCgkJCQkJCQkJewoJCQkJCQkJCQljb3ZlcjogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLmNvdmVyKSwKCQkJCQkJCQkJaW5wdXQ6IEEyKAoJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCW5ld0hlaWdodCwKCQkJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIG5ld0xpbmVIZWlnaHQsIGVscy5pbnB1dCkpLAoJCQkJCQkJCQlwYXJlbnQ6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHJlZHVjZWRWZXJ0aWNhbFBhZGRpbmcsIGVscy5wYXJlbnQpCgkJCQkJCQkJfSk7CgkJCQkJCX0KCQkJCQljYXNlICdCb3JkZXJXaWR0aCc6CgkJCQkJCXZhciBfdjMgPSBhdHRyLmI7CgkJCQkJCXJldHVybiBfVXRpbHNfdXBkYXRlKAoJCQkJCQkJZWxzLAoJCQkJCQkJewoJCQkJCQkJCWNvdmVyOiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBhdHRyLCBlbHMuY292ZXIpLAoJCQkJCQkJCXBhcmVudDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLnBhcmVudCkKCQkJCQkJCX0pOwoJCQkJCWNhc2UgJ1RyYW5zZm9ybSc6CgkJCQkJCXJldHVybiBfVXRpbHNfdXBkYXRlKAoJCQkJCQkJZWxzLAoJCQkJCQkJewoJCQkJCQkJCWNvdmVyOiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBhdHRyLCBlbHMuY292ZXIpLAoJCQkJCQkJCXBhcmVudDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLnBhcmVudCkKCQkJCQkJCX0pOwoJCQkJCWNhc2UgJ0ZvbnRTaXplJzoKCQkJCQkJcmV0dXJuIF9VdGlsc191cGRhdGUoCgkJCQkJCQllbHMsCgkJCQkJCQl7CgkJCQkJCQkJZnVsbFBhcmVudDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLmZ1bGxQYXJlbnQpCgkJCQkJCQl9KTsKCQkJCQljYXNlICdGb250RmFtaWx5JzoKCQkJCQkJdmFyIF92NCA9IGF0dHIuYjsKCQkJCQkJcmV0dXJuIF9VdGlsc191cGRhdGUoCgkJCQkJCQllbHMsCgkJCQkJCQl7CgkJCQkJCQkJZnVsbFBhcmVudDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLmZ1bGxQYXJlbnQpCgkJCQkJCQl9KTsKCQkJCQlkZWZhdWx0OgoJCQkJCQl2YXIgZmxhZyA9IGF0dHIuYTsKCQkJCQkJdmFyIGNscyA9IGF0dHIuYjsKCQkJCQkJcmV0dXJuIF9VdGlsc191cGRhdGUoCgkJCQkJCQllbHMsCgkJCQkJCQl7CgkJCQkJCQkJcGFyZW50OiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBhdHRyLCBlbHMucGFyZW50KQoJCQkJCQkJfSk7CgkJCQl9CgkJCWNhc2UgJ05vQXR0cmlidXRlJzoKCQkJCXJldHVybiBlbHM7CgkJCWNhc2UgJ0F0dHInOgoJCQkJdmFyIGEgPSBhdHRyLmE7CgkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQllbHMsCgkJCQkJewoJCQkJCQlpbnB1dDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLmlucHV0KQoJCQkJCX0pOwoJCQljYXNlICdEZXNjcmliZSc6CgkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQllbHMsCgkJCQkJewoJCQkJCQlpbnB1dDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLmlucHV0KQoJCQkJCX0pOwoJCQljYXNlICdDbGFzcyc6CgkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQllbHMsCgkJCQkJewoJCQkJCQlwYXJlbnQ6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGF0dHIsIGVscy5wYXJlbnQpCgkJCQkJfSk7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gX1V0aWxzX3VwZGF0ZSgKCQkJCQllbHMsCgkJCQkJewoJCQkJCQlpbnB1dDogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgYXR0ciwgZWxzLmlucHV0KQoJCQkJCX0pOwoJCX0KCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkcmVkaXN0cmlidXRlID0gRjMoCglmdW5jdGlvbiAoaXNNdWx0aWxpbmUsIHN0YWNrZWQsIGF0dHJzKSB7CgkJcmV0dXJuIGZ1bmN0aW9uIChyZWRpc3QpIHsKCQkJcmV0dXJuIHsKCQkJCWNvdmVyOiAkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKHJlZGlzdC5jb3ZlciksCgkJCQlmdWxsUGFyZW50OiAkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKHJlZGlzdC5mdWxsUGFyZW50KSwKCQkJCWlucHV0OiAkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKHJlZGlzdC5pbnB1dCksCgkJCQlwYXJlbnQ6ICRlbG0kY29yZSRMaXN0JHJldmVyc2UocmVkaXN0LnBhcmVudCksCgkJCQl3cmFwcGVyOiAkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKHJlZGlzdC53cmFwcGVyKQoJCQl9OwoJCX0oCgkJCUEzKAoJCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRyZWRpc3RyaWJ1dGVPdmVyLCBpc011bHRpbGluZSwgc3RhY2tlZCksCgkJCQl7Y292ZXI6IF9MaXN0X05pbCwgZnVsbFBhcmVudDogX0xpc3RfTmlsLCBpbnB1dDogX0xpc3RfTmlsLCBwYXJlbnQ6IF9MaXN0X05pbCwgd3JhcHBlcjogX0xpc3RfTmlsfSwKCQkJCWF0dHJzKSk7Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JHJlbmRlckJveCA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciB0b3AgPSBfdjAudG9wOwoJdmFyIHJpZ2h0ID0gX3YwLnJpZ2h0OwoJdmFyIGJvdHRvbSA9IF92MC5ib3R0b207Cgl2YXIgbGVmdCA9IF92MC5sZWZ0OwoJcmV0dXJuICRlbG0kY29yZSRTdHJpbmckZnJvbUludCh0b3ApICsgKCdweCAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChyaWdodCkgKyAoJ3B4ICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KGJvdHRvbSkgKyAoJ3B4ICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KGxlZnQpICsgJ3B4JykpKSkpKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JGNoYXJjb2FsID0gQTMoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiLCAxMzYgLyAyNTUsIDEzOCAvIDI1NSwgMTMzIC8gMjU1KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JHJlbmRlclBsYWNlaG9sZGVyID0gRjMoCglmdW5jdGlvbiAoX3YwLCBmb3JQbGFjZWhvbGRlciwgb24pIHsKCQl2YXIgcGxhY2Vob2xkZXJBdHRycyA9IF92MC5hOwoJCXZhciBwbGFjZWhvbGRlckVsID0gX3YwLmI7CgkJcmV0dXJuIEEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJX1V0aWxzX2FwKAoJCQkJZm9yUGxhY2Vob2xkZXIsCgkJCQlfVXRpbHNfYXAoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRGb250JGNvbG9yKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JGNoYXJjb2FsKSwKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRodG1sQ2xhc3MoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMubm9UZXh0U2VsZWN0aW9uICsgKCcgJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLnBhc3NQb2ludGVyRXZlbnRzKSksCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjbGlwLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQm9yZGVyJGNvbG9yKAoJCQkJCQkJQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiYSwgMCwgMCwgMCwgMCkpLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQmFja2dyb3VuZCRjb2xvcigKCQkJCQkJCUE0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJnYmEsIDAsIDAsIDAsIDApKSwKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkYWxwaGEoCgkJCQkJCQlvbiA/IDEgOiAwKQoJCQkJCQldKSwKCQkJCQlwbGFjZWhvbGRlckF0dHJzKSksCgkJCXBsYWNlaG9sZGVyRWwpOwoJfSk7CnZhciAkZWxtJGh0bWwkSHRtbCRzcGFuID0gX1ZpcnR1YWxEb21fbm9kZSgnc3BhbicpOwp2YXIgJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzcGVsbGNoZWNrID0gJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRib29sUHJvcGVydHkoJ3NwZWxsY2hlY2snKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JHNwZWxsY2hlY2sgPSBBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VMLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQXR0ciwgJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzcGVsbGNoZWNrKTsKdmFyICRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkdHlwZV8gPSAkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0cmluZ1Byb3BlcnR5KCd0eXBlJyk7CnZhciAkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHZhbHVlID0gJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHJpbmdQcm9wZXJ0eSgndmFsdWUnKTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JHZhbHVlID0gQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlTCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEF0dHIsICRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkdmFsdWUpOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkdGV4dEhlbHBlciA9IEYzKAoJZnVuY3Rpb24gKHRleHRJbnB1dCwgYXR0cnMsIHRleHRPcHRpb25zKSB7CgkJdmFyIHdpdGhEZWZhdWx0cyA9IF9VdGlsc19hcCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRkZWZhdWx0VGV4dEJveFN0eWxlLCBhdHRycyk7CgkJdmFyIHJlZGlzdHJpYnV0ZWQgPSBBMygKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkcmVkaXN0cmlidXRlLAoJCQlfVXRpbHNfZXEodGV4dElucHV0LnR5cGVfLCAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRUZXh0QXJlYSksCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JGlzU3RhY2tlZCh0ZXh0T3B0aW9ucy5sYWJlbCksCgkJCXdpdGhEZWZhdWx0cyk7CgkJdmFyIG9ubHlTcGFjaW5nID0gZnVuY3Rpb24gKGF0dHIpIHsKCQkJaWYgKChhdHRyLiQgPT09ICdTdHlsZUNsYXNzJykgJiYgKGF0dHIuYi4kID09PSAnU3BhY2luZ1N0eWxlJykpIHsKCQkJCXZhciBfdjkgPSBhdHRyLmI7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCX07CgkJdmFyIGhlaWdodENvbnN0cmFpbmVkID0gZnVuY3Rpb24gKCkgewoJCQl2YXIgX3Y3ID0gdGV4dElucHV0LnR5cGVfOwoJCQlpZiAoX3Y3LiQgPT09ICdUZXh0SW5wdXROb2RlJykgewoJCQkJdmFyIGlucHV0VHlwZSA9IF92Ny5hOwoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCQlmYWxzZSwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkaXNDb25zdHJhaW5lZCwKCQkJCQkJJGVsbSRjb3JlJExpc3QkaGVhZCgKCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoCgkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLCAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRnZXRIZWlnaHQsIHdpdGhEZWZhdWx0cykpKSkpOwoJCQl9CgkJfSgpOwoJCXZhciBnZXRQYWRkaW5nID0gZnVuY3Rpb24gKGF0dHIpIHsKCQkJaWYgKChhdHRyLiQgPT09ICdTdHlsZUNsYXNzJykgJiYgKGF0dHIuYi4kID09PSAnUGFkZGluZ1N0eWxlJykpIHsKCQkJCXZhciBjbHMgPSBhdHRyLmE7CgkJCQl2YXIgX3Y2ID0gYXR0ci5iOwoJCQkJdmFyIHBhZCA9IF92Ni5hOwoJCQkJdmFyIHQgPSBfdjYuYjsKCQkJCXZhciByID0gX3Y2LmM7CgkJCQl2YXIgYiA9IF92Ni5kOwoJCQkJdmFyIGwgPSBfdjYuZTsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQl7CgkJCQkJCWJvdHRvbTogQTIoCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJG1heCwKCQkJCQkJCTAsCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGZsb29yKGIgLSAzKSksCgkJCQkJCWxlZnQ6IEEyKAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRtYXgsCgkJCQkJCQkwLAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRmbG9vcihsIC0gMykpLAoJCQkJCQlyaWdodDogQTIoCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJG1heCwKCQkJCQkJCTAsCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGZsb29yKHIgLSAzKSksCgkJCQkJCXRvcDogQTIoCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJG1heCwKCQkJCQkJCTAsCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGZsb29yKHQgLSAzKSkKCQkJCQl9KTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJfQoJCX07CgkJdmFyIHBhcmVudFBhZGRpbmcgPSBBMigKCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQl7Ym90dG9tOiAwLCBsZWZ0OiAwLCByaWdodDogMCwgdG9wOiAwfSwKCQkJJGVsbSRjb3JlJExpc3QkaGVhZCgKCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoCgkJCQkJQTIoJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLCBnZXRQYWRkaW5nLCB3aXRoRGVmYXVsdHMpKSkpOwoJCXZhciBpbnB1dEVsZW1lbnQgPSBBNCgKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGVsZW1lbnQsCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhc0VsLAoJCQlmdW5jdGlvbiAoKSB7CgkJCQl2YXIgX3YzID0gdGV4dElucHV0LnR5cGVfOwoJCQkJaWYgKF92My4kID09PSAnVGV4dElucHV0Tm9kZScpIHsKCQkJCQl2YXIgaW5wdXRUeXBlID0gX3YzLmE7CgkJCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb2RlTmFtZSgnaW5wdXQnKTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb2RlTmFtZSgndGV4dGFyZWEnKTsKCQkJCX0KCQkJfSgpLAoJCQlfVXRpbHNfYXAoCgkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJdmFyIF92NCA9IHRleHRJbnB1dC50eXBlXzsKCQkJCQlpZiAoX3Y0LiQgPT09ICdUZXh0SW5wdXROb2RlJykgewoJCQkJCQl2YXIgaW5wdXRUeXBlID0gX3Y0LmE7CgkJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEF0dHIoCgkJCQkJCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyR0eXBlXyhpbnB1dFR5cGUpKSwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkaHRtbENsYXNzKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmlucHV0VGV4dCkKCQkJCQkJCV0pOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY2xpcCwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRoZWlnaHQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGh0bWxDbGFzcygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5pbnB1dE11bHRpbGluZSksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkY2FsY01vdmVUb0NvbXBlbnNhdGVGb3JQYWRkaW5nKHdpdGhEZWZhdWx0cyksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFkZGluZ0VhY2gocGFyZW50UGFkZGluZyksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEF0dHIoCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkc3R5bGUsCgkJCQkJCQkJCSdtYXJnaW4nLAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRyZW5kZXJCb3goCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRuZWdhdGVCb3gocGFyZW50UGFkZGluZykpKSksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEF0dHIoCgkJCQkJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwgJ2JveC1zaXppbmcnLCAnY29udGVudC1ib3gnKSkKCQkJCQkJCV0pOwoJCQkJCX0KCQkJCX0oKSwKCQkJCV9VdGlsc19hcCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JHZhbHVlKHRleHRPcHRpb25zLnRleHQpLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEF0dHIoCgkJCQkJCQkkZWxtJGh0bWwkSHRtbCRFdmVudHMkb25JbnB1dCh0ZXh0T3B0aW9ucy5vbkNoYW5nZSkpLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkaGlkZGVuTGFiZWxBdHRyaWJ1dGUodGV4dE9wdGlvbnMubGFiZWwpLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkc3BlbGxjaGVjayh0ZXh0SW5wdXQuc3BlbGxjaGVja2VkKSwKCQkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJE5vQXR0cmlidXRlLAoJCQkJCQkJQTIoJGVsbSRjb3JlJE1heWJlJG1hcCwgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkYXV0b2ZpbGwsIHRleHRJbnB1dC5hdXRvZmlsbCkpCgkJCQkJCV0pLAoJCQkJCXJlZGlzdHJpYnV0ZWQuaW5wdXQpKSwKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVua2V5ZWQoX0xpc3RfTmlsKSk7CgkJdmFyIHdyYXBwZWRJbnB1dCA9IGZ1bmN0aW9uICgpIHsKCQkJdmFyIF92MCA9IHRleHRJbnB1dC50eXBlXzsKCQkJaWYgKF92MC4kID09PSAnVGV4dEFyZWEnKSB7CgkJCQlyZXR1cm4gQTQoCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGVsZW1lbnQsCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFzRWwsCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGRpdiwKCQkJCQlfVXRpbHNfYXAoCgkJCQkJCShoZWlnaHRDb25zdHJhaW5lZCA/ICRlbG0kY29yZSRMaXN0JGNvbnMoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2Nyb2xsYmFyWSkgOiAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5KSgKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRhbnksICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JGhhc0ZvY3VzU3R5bGUsIHdpdGhEZWZhdWx0cykgPyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTm9BdHRyaWJ1dGUgOiAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkaHRtbENsYXNzKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmZvY3VzZWRXaXRoaW4pLAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkaHRtbENsYXNzKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmlucHV0TXVsdGlsaW5lV3JhcHBlcikKCQkJCQkJCQldKSksCgkJCQkJCXJlZGlzdHJpYnV0ZWQucGFyZW50KSwKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkVW5rZXllZCgKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUE0KAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbGVtZW50LAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhc1BhcmFncmFwaCwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZGl2LAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRpbkZyb250KGlucHV0RWxlbWVudCksCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRodG1sQ2xhc3MoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuaW5wdXRNdWx0aWxpbmVQYXJlbnQpLAoJCQkJCQkJCQkJCQlyZWRpc3RyaWJ1dGVkLndyYXBwZXIpKSkpLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRVbmtleWVkKAoJCQkJCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJCQkJCQlpZiAodGV4dE9wdGlvbnMudGV4dCA9PT0gJycpIHsKCQkJCQkJCQkJCQl2YXIgX3YxID0gdGV4dE9wdGlvbnMucGxhY2Vob2xkZXI7CgkJCQkJCQkJCQkJaWYgKF92MS4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdcdTAwQTAnKQoJCQkJCQkJCQkJCQkJXSk7CgkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJdmFyIHBsYWNlID0gX3YxLmE7CgkJCQkJCQkJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJQTMoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkcmVuZGVyUGxhY2Vob2xkZXIsIHBsYWNlLCBfTGlzdF9OaWwsIHRleHRPcHRpb25zLnRleHQgPT09ICcnKQoJCQkJCQkJCQkJCQkJXSk7CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkdW5zdHlsZWQoCgkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCQkkZWxtJGh0bWwkSHRtbCRzcGFuLAoJCQkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRjbGFzcygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5pbnB1dE11bHRpbGluZUZpbGxlcikKCQkJCQkJCQkJCQkJCQkJXSksCgkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJCQkkZWxtJGh0bWwkSHRtbCR0ZXh0KHRleHRPcHRpb25zLnRleHQgKyAnXHUwMEEwJykKCQkJCQkJCQkJCQkJCQkJXSkpKQoJCQkJCQkJCQkJCQldKTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfSgpKSkKCQkJCQkJCV0pKSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgaW5wdXRUeXBlID0gX3YwLmE7CgkJCQlyZXR1cm4gQTQoCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGVsZW1lbnQsCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFzRWwsCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGRpdiwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGFueSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkaGFzRm9jdXNTdHlsZSwgd2l0aERlZmF1bHRzKSA/ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCROb0F0dHJpYnV0ZSA6ICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRodG1sQ2xhc3MoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuZm9jdXNlZFdpdGhpbiksCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQlyZWRpc3RyaWJ1dGVkLnBhcmVudCwKCQkJCQkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCQkJCXZhciBfdjIgPSB0ZXh0T3B0aW9ucy5wbGFjZWhvbGRlcjsKCQkJCQkJCQkJCWlmIChfdjIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJdmFyIHBsYWNlID0gX3YyLmE7CgkJCQkJCQkJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkYmVoaW5kQ29udGVudCgKCQkJCQkJCQkJCQkJCUEzKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JHJlbmRlclBsYWNlaG9sZGVyLCBwbGFjZSwgcmVkaXN0cmlidXRlZC5jb3ZlciwgdGV4dE9wdGlvbnMudGV4dCA9PT0gJycpKQoJCQkJCQkJCQkJCQldKTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfSgpCgkJCQkJCQkJCV0pKSkpLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRVbmtleWVkKAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbaW5wdXRFbGVtZW50XSkpKTsKCQkJfQoJCX0oKTsKCQlyZXR1cm4gQTMoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JGFwcGx5TGFiZWwsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCUEyKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRDbGFzcywgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJEZsYWckY3Vyc29yLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5jdXJzb3JUZXh0KSwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkaXNIaWRkZW5MYWJlbCh0ZXh0T3B0aW9ucy5sYWJlbCkgPyAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkTm9BdHRyaWJ1dGUgOiAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKDUpLAoJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JFJlZ2lvbiRhbm5vdW5jZSwgcmVkaXN0cmlidXRlZC5mdWxsUGFyZW50KSkpLAoJCQl0ZXh0T3B0aW9ucy5sYWJlbCwKCQkJd3JhcHBlZElucHV0KTsKCX0pOwp2YXIgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkdGV4dCA9ICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JHRleHRIZWxwZXIoCgl7CgkJYXV0b2ZpbGw6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLAoJCXNwZWxsY2hlY2tlZDogZmFsc2UsCgkJdHlwZV86ICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JFRleHRJbnB1dE5vZGUoJ3RleHQnKQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3TG9hZEZyb21HaXREaWFsb2cgPSBmdW5jdGlvbiAoZGlhbG9nU3RhdGUpIHsKCXZhciB1c2VySW5wdXRCZWdpbkxvYWRpbmdEaWFsb2dFdmVudCA9ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJExvYWRGcm9tR2l0QmVnaW5SZXF1ZXN0RXZlbnQoCgkJe3VybEludG9HaXRSZXBvc2l0b3J5OiBkaWFsb2dTdGF0ZS51cmxJbnRvR2l0UmVwb3NpdG9yeX0pOwoJdmFyIHVzZXJJbnB1dEJlZ2luTG9hZGluZ0V2ZW50ID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0TG9hZEZyb21HaXQodXNlcklucHV0QmVnaW5Mb2FkaW5nRGlhbG9nRXZlbnQpOwoJdmFyIHVzZXJJbnB1dEJlZ2luTG9hZGluZ0NvdWxkSGF2ZUVmZmVjdCA9ICFfVXRpbHNfZXEoCgkJQTMoCgkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHVwZGF0ZUZvclVzZXJJbnB1dExvYWRGcm9tR2l0LAoJCQl7CgkJCQl0aW1lOiAkZWxtJHRpbWUkVGltZSRtaWxsaXNUb1Bvc2l4KDApCgkJCX0sCgkJCXVzZXJJbnB1dEJlZ2luTG9hZGluZ0RpYWxvZ0V2ZW50LAoJCQlkaWFsb2dTdGF0ZSksCgkJX1V0aWxzX1R1cGxlMihkaWFsb2dTdGF0ZSwgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRub25lKSk7Cgl2YXIgdXJsSW5wdXRFbGVtZW50ID0gQTIoCgkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkdGV4dCwKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJhY2tncm91bmQkY29sb3IoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kYmFja2dyb3VuZENvbG9yKSwKCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJG9uS2V5RG93bkVudGVyKHVzZXJJbnB1dEJlZ2luTG9hZGluZ0V2ZW50KSwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWxBdHRyaWJ1dGUoCgkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJGlkKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGlucHV0VXJsRWxlbWVudElkKSkKCQkJXSksCgkJewoJCQlsYWJlbDogQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRJbnB1dCRsYWJlbEFib3ZlLAoJCQkJX0xpc3RfTmlsLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCgnVVJMIHRvIHRyZWUgaW4gZ2l0IHJlcG9zaXRvcnknKSksCgkJCW9uQ2hhbmdlOiBmdW5jdGlvbiAodXJsKSB7CgkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0TG9hZEZyb21HaXQoCgkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kTG9hZEZyb21HaXRFbnRlclVybEV2ZW50KAoJCQkJCQl7dXJsSW50b0dpdFJlcG9zaXRvcnk6IHVybH0pKTsKCQkJfSwKCQkJcGxhY2Vob2xkZXI6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJQTIoCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkSW5wdXQkcGxhY2Vob2xkZXIsCgkJCQkJX0xpc3RfTmlsLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHQoJ1VSTCB0byB0cmVlIGluIGdpdCByZXBvc2l0b3J5JykpKSwKCQkJdGV4dDogZGlhbG9nU3RhdGUudXJsSW50b0dpdFJlcG9zaXRvcnkKCQl9KTsKCXZhciBzZW5kUmVxdWVzdEJ1dHRvbiA9ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGJ1dHRvbkVsZW1lbnQoCgkJewoJCQlsYWJlbDogJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCgnQmVnaW4gTG9hZGluZycpLAoJCQlvblByZXNzOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCh1c2VySW5wdXRCZWdpbkxvYWRpbmdFdmVudCkKCQl9KTsKCXZhciByZXN1bHRFbGVtZW50ID0gQTIoCgkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JG5vbmUsCgkJQTIoCgkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCUEyKAoJCQkJCSRlbG1fY29tbXVuaXR5JHJlc3VsdF9leHRyYSRSZXN1bHQkRXh0cmEkdW5wYWNrLAoJCQkJCUEyKCRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlc2NyaWJlSHR0cEVycm9yLCAkZWxtJGNvcmUkUmVzdWx0JEVyciksCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSksCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCSRlbG0kY29yZSRSZXN1bHQkbWFwRXJyb3IoCgkJCQkJCSRlbG0kY29yZSRTdHJpbmckbGVmdCg1MDApKSwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJJGVsbSRjb3JlJFJlc3VsdCRtYXAoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kRnJvbUdpdFdvcmtzcGFjZVN0YXRlKSwKCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdmlld0xvYWRPckltcG9ydERpYWxvZ1Jlc3VsdEVsZW1lbnQsICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRpYWxvZ0Vycm9yRWxlbWVudEZyb21EZXNjcmlwdGlvbiwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0TG9hZE9ySW1wb3J0VGFrZVdvcmtzcGFjZVN0YXRlRXZlbnQpKSkpLAoJCQlkaWFsb2dTdGF0ZS5sb2FkQ29tcG9zaXRpb25SZXN1bHQpKTsKCXZhciBpbnB1dE9yUHJvZ3Jlc3NFbGVtZW50ID0gZnVuY3Rpb24gKCkgewoJCXZhciBfdjAgPSBkaWFsb2dTdGF0ZS5yZXF1ZXN0OwoJCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiBBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbiwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSkKCQkJCQldKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCXVybElucHV0RWxlbWVudCwKCQkJCQkJQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY2VudGVyWCwKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlbGVtZW50VHJhbnNwYXJlbnQoIXVzZXJJbnB1dEJlZ2luTG9hZGluZ0NvdWxkSGF2ZUVmZmVjdCkKCQkJCQkJCV0pLAoJCQkJCQlzZW5kUmVxdWVzdEJ1dHRvbikKCQkJCQldKSk7CgkJfSBlbHNlIHsKCQkJdmFyIHJlcXVlc3QgPSBfdjAuYTsKCQkJdmFyIGRlc2NyaWJlUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7CgkJCQl2YXIgX3YxID0gZGlhbG9nU3RhdGUubG9hZENvbXBvc2l0aW9uUmVzdWx0OwoJCQkJaWYgKF92MS4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gJ2luIHByb2dyZXNzLi4uJzsKCQkJCX0gZWxzZSB7CgkJCQkJaWYgKF92MS5hLiQgPT09ICdFcnInKSB7CgkJCQkJCXJldHVybiAnZmFpbGVkJzsKCQkJCQl9IGVsc2UgewoJCQkJCQlpZiAoX3YxLmEuYS4kID09PSAnRXJyJykgewoJCQkJCQkJcmV0dXJuICdmYWlsZWQnOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJcmV0dXJuICdjb21wbGV0ZWQnOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KCk7CgkJCXJldHVybiBBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHBhcmFncmFwaCwKCQkJCV9MaXN0X05pbCwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHQoJ0xvYWRpbmcgZnJvbSAnKSwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbGlua0VsZW1lbnRGcm9tVXJsQW5kVGV4dExhYmVsKAoJCQkJCQl7bGFiZWxUZXh0OiByZXF1ZXN0LnVybCwgdXJsOiByZXF1ZXN0LnVybH0pLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCcgJyArIGRlc2NyaWJlUHJvZ3Jlc3MpCgkJCQkJXSkpOwoJCX0KCX0oKTsKCXZhciBleGFtcGxlVXJsID0gJ2h0dHBzOi8vZ2l0aHViLmNvbS9vbmxpbmVnYW1lbWFrZXIvbWFraW5nLW9ubGluZS1nYW1lcy90cmVlLzY4MzhmNzEwMGRkODZjOGM4YWZjZmUzZWZkNTUzZjhmYTM5Yzc3YWUvZ2FtZXMtcHJvZ3JhbS1jb2Rlcy9zaW1wbGUtc25ha2UnOwoJcmV0dXJuIHsKCQljb250ZW50RWxlbWVudDogQTIoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbiwKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKQoJCQkJXSksCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVtpbnB1dE9yUHJvZ3Jlc3NFbGVtZW50LCByZXN1bHRFbGVtZW50XSkpLAoJCWd1aWRlUGFyYWdyYXBoSXRlbXM6IF9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCgnTG9hZCB3b3Jrc3BhY2UgZmlsZXMgZnJvbSBhIHB1YmxpYyBnaXQgcmVwb3NpdG9yeSBVUkwuIEhlcmUgaXMgYW4gZXhhbXBsZSBvZiBzdWNoIGEgVVJMOiAnKSwKCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGxpbmtFbGVtZW50RnJvbVVybEFuZFRleHRMYWJlbCgKCQkJCXtsYWJlbFRleHQ6IGV4YW1wbGVVcmwsIHVybDogZXhhbXBsZVVybH0pCgkJCV0pLAoJCXRpdGxlOiAnTG9hZCBXb3Jrc3BhY2UgZnJvbSBHaXQgUmVwb3NpdG9yeScsCgkJdGl0bGVJY29uOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRTb2xpZCRjbG91ZERvd25sb2FkQWx0KQoJfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGF0dHJpYnV0ZU1vbm9zcGFjZUZvbnQgPSBBMigkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0eWxlLCAnZm9udC1mYW1pbHknLCAnbW9ub3NwYWNlLCBtb25vc3BhY2UnKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JENvbW1lbnRzJGVuY29kZSA9ICRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmc7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREb2N1bWVudGF0aW9uJGVuY29kZSA9ICRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmc7CnZhciAkZWxtJGpzb24kSnNvbiRFbmNvZGUkZmxvYXQgPSBfSnNvbl93cmFwOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRlbmNvZGUgPSBmdW5jdGlvbiAocGF0dGVybikgewoJc3dpdGNoIChwYXR0ZXJuLiQpIHsKCQljYXNlICdBbGxQYXR0ZXJuJzoKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQknYWxsJywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoX0xpc3RfTmlsKSk7CgkJY2FzZSAnVW5pdFBhdHRlcm4nOgoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSd1bml0JywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoX0xpc3RfTmlsKSk7CgkJY2FzZSAnQ2hhclBhdHRlcm4nOgoJCQl2YXIgYyA9IHBhdHRlcm4uYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQknY2hhcicsCgkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCSd2YWx1ZScsCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKAoJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckZnJvbUNoYXIoYykpKQoJCQkJCQldKSkpOwoJCWNhc2UgJ1N0cmluZ1BhdHRlcm4nOgoJCQl2YXIgdiA9IHBhdHRlcm4uYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQknc3RyaW5nJywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ3ZhbHVlJywKCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodikpCgkJCQkJCV0pKSk7CgkJY2FzZSAnSGV4UGF0dGVybic6CgkJCXZhciBoID0gcGF0dGVybi5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSdoZXgnLAoJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkndmFsdWUnLAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludChoKSkKCQkJCQkJXSkpKTsKCQljYXNlICdJbnRQYXR0ZXJuJzoKCQkJdmFyIGkgPSBwYXR0ZXJuLmE7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ2ludCcsCgkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCSd2YWx1ZScsCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KGkpKQoJCQkJCQldKSkpOwoJCWNhc2UgJ0Zsb2F0UGF0dGVybic6CgkJCXZhciBmID0gcGF0dGVybi5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSdmbG9hdCcsCgkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCSd2YWx1ZScsCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkZmxvYXQoZikpCgkJCQkJCV0pKSk7CgkJY2FzZSAnVHVwbGVQYXR0ZXJuJzoKCQkJdmFyIHBhdHRlcm5zID0gcGF0dGVybi5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSd0dXBsZScsCgkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCSd2YWx1ZScsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJGVuY29kZSksCgkJCQkJCQkJcGF0dGVybnMpKQoJCQkJCQldKSkpOwoJCWNhc2UgJ1JlY29yZFBhdHRlcm4nOgoJCQl2YXIgcG9pbnRlcnMgPSBwYXR0ZXJuLmE7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ3JlY29yZCcsCgkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCSd2YWx1ZScsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSgkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKSwKCQkJCQkJCQlwb2ludGVycykpCgkJCQkJCV0pKSk7CgkJY2FzZSAnVW5Db25zUGF0dGVybic6CgkJCXZhciBwMSA9IHBhdHRlcm4uYTsKCQkJdmFyIHAyID0gcGF0dGVybi5iOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSd1bmNvbnMnLAoJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQknbGVmdCcsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRlbmNvZGUsIHAxKSksCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ3JpZ2h0JywKCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJGVuY29kZSwgcDIpKQoJCQkJCQldKSkpOwoJCWNhc2UgJ0xpc3RQYXR0ZXJuJzoKCQkJdmFyIHBhdHRlcm5zID0gcGF0dGVybi5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSdsaXN0JywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ3ZhbHVlJywKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kZW5jb2RlKSwKCQkJCQkJCQlwYXR0ZXJucykpCgkJCQkJCV0pKSk7CgkJY2FzZSAnVmFyUGF0dGVybic6CgkJCXZhciBuYW1lID0gcGF0dGVybi5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSd2YXInLAoJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkndmFsdWUnLAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyhuYW1lKSkKCQkJCQkJXSkpKTsKCQljYXNlICdOYW1lZFBhdHRlcm4nOgoJCQl2YXIgcXVhbGlmaWVkTmFtZVJlZiA9IHBhdHRlcm4uYTsKCQkJdmFyIHBhdHRlcm5zID0gcGF0dGVybi5iOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSduYW1lZCcsCgkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCSdxdWFsaWZpZWQnLAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQknbW9kdWxlTmFtZScsCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGVOYW1lJGVuY29kZShxdWFsaWZpZWROYW1lUmVmLm1vZHVsZU5hbWUpKSwKCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQknbmFtZScsCgkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHF1YWxpZmllZE5hbWVSZWYubmFtZSkpCgkJCQkJCQkJCV0pKSksCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ3BhdHRlcm5zJywKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kZW5jb2RlKSwKCQkJCQkJCQlwYXR0ZXJucykpCgkJCQkJCV0pKSk7CgkJY2FzZSAnQXNQYXR0ZXJuJzoKCQkJdmFyIGRlc3RydWN0dXJlZCA9IHBhdHRlcm4uYTsKCQkJdmFyIG5hbWUgPSBwYXR0ZXJuLmI7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ2FzJywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ25hbWUnLAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcsIG5hbWUpKSwKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkncGF0dGVybicsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRlbmNvZGUsIGRlc3RydWN0dXJlZCkpCgkJCQkJCV0pKSk7CgkJZGVmYXVsdDoKCQkJdmFyIHAxID0gcGF0dGVybi5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSdwYXJlbnRpc2l6ZWQnLAoJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkndmFsdWUnLAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kZW5jb2RlLCBwMSkpCgkJCQkJCV0pKSk7Cgl9Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRTaWduYXR1cmUkZW5jb2RlID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIG5hbWUgPSBfdjAubmFtZTsKCXZhciB0eXBlQW5ub3RhdGlvbiA9IF92MC50eXBlQW5ub3RhdGlvbjsKCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSduYW1lJywKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nLCBuYW1lKSksCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ3R5cGVBbm5vdGF0aW9uJywKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRlbmNvZGUsIHR5cGVBbm5vdGF0aW9uKSkKCQkJXSkpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkSW5maXgkZW5jb2RlRGlyZWN0aW9uID0gZnVuY3Rpb24gKGQpIHsKCXN3aXRjaCAoZC4kKSB7CgkJY2FzZSAnTGVmdCc6CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKCdsZWZ0Jyk7CgkJY2FzZSAnUmlnaHQnOgoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZygncmlnaHQnKTsKCQlkZWZhdWx0OgoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZygnbm9uJyk7Cgl9Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZSA9IGZ1bmN0aW9uIChleHByKSB7Cglzd2l0Y2ggKGV4cHIuJCkgewoJCWNhc2UgJ1VuaXRFeHByJzoKCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLCAndW5pdCcsICRlbG0kanNvbiRKc29uJEVuY29kZSRudWxsKTsKCQljYXNlICdBcHBsaWNhdGlvbic6CgkJCXZhciBsID0gZXhwci5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSdhcHBsaWNhdGlvbicsCgkJCQlBMigKCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZSksCgkJCQkJbCkpOwoJCWNhc2UgJ09wZXJhdG9yQXBwbGljYXRpb24nOgoJCQl2YXIgb3AgPSBleHByLmE7CgkJCXZhciBkaXIgPSBleHByLmI7CgkJCXZhciBsZWZ0ID0gZXhwci5jOwoJCQl2YXIgcmlnaHQgPSBleHByLmQ7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ29wZXJhdG9yYXBwbGljYXRpb24nLAoJCQkJQTQoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRlbmNvZGVPcGVyYXRvckFwcGxpY2F0aW9uLCBvcCwgZGlyLCBsZWZ0LCByaWdodCkpOwoJCWNhc2UgJ0Z1bmN0aW9uT3JWYWx1ZSc6CgkJCXZhciBtb2R1bGVOYW1lID0gZXhwci5hOwoJCQl2YXIgbmFtZSA9IGV4cHIuYjsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQknZnVuY3Rpb25PclZhbHVlJywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ21vZHVsZU5hbWUnLAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlTmFtZSRlbmNvZGUobW9kdWxlTmFtZSkpLAoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCSduYW1lJywKCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcobmFtZSkpCgkJCQkJCV0pKSk7CgkJY2FzZSAnSWZCbG9jayc6CgkJCXZhciBjID0gZXhwci5hOwoJCQl2YXIgdCA9IGV4cHIuYjsKCQkJdmFyIGUgPSBleHByLmM7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ2lmQmxvY2snLAoJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQknY2xhdXNlJywKCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZSwgYykpLAoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCSd0aGVuJywKCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZSwgdCkpLAoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCSdlbHNlJywKCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZSwgZSkpCgkJCQkJCV0pKSk7CgkJY2FzZSAnUHJlZml4T3BlcmF0b3InOgoJCQl2YXIgeCA9IGV4cHIuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQkncHJlZml4b3BlcmF0b3InLAoJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh4KSk7CgkJY2FzZSAnT3BlcmF0b3InOgoJCQl2YXIgeCA9IGV4cHIuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQknb3BlcmF0b3InLAoJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh4KSk7CgkJY2FzZSAnSGV4JzoKCQkJdmFyIGggPSBleHByLmE7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ2hleCcsCgkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KGgpKTsKCQljYXNlICdJbnRlZ2VyJzoKCQkJdmFyIHggPSBleHByLmE7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ2ludGVnZXInLAoJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludCh4KSk7CgkJY2FzZSAnRmxvYXRhYmxlJzoKCQkJdmFyIHggPSBleHByLmE7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ2Zsb2F0JywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRmbG9hdCh4KSk7CgkJY2FzZSAnTmVnYXRpb24nOgoJCQl2YXIgeCA9IGV4cHIuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQknbmVnYXRpb24nLAoJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlLCB4KSk7CgkJY2FzZSAnTGl0ZXJhbCc6CgkJCXZhciB4ID0gZXhwci5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSdsaXRlcmFsJywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcoeCkpOwoJCWNhc2UgJ0NoYXJMaXRlcmFsJzoKCQkJdmFyIGMgPSBleHByLmE7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ2NoYXJMaXRlcmFsJywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcoCgkJCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tQ2hhcihjKSkpOwoJCWNhc2UgJ1R1cGxlZEV4cHJlc3Npb24nOgoJCQl2YXIgeHMgPSBleHByLmE7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ3R1cGxlZCcsCgkJCQlBMigKCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZSksCgkJCQkJeHMpKTsKCQljYXNlICdMaXN0RXhwcic6CgkJCXZhciB4cyA9IGV4cHIuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQknbGlzdCcsCgkJCQlBMigKCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZSksCgkJCQkJeHMpKTsKCQljYXNlICdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbic6CgkJCXZhciB4ID0gZXhwci5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSdwYXJlbnRoZXNpemVkJywKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZSwgeCkpOwoJCWNhc2UgJ0xldEV4cHJlc3Npb24nOgoJCQl2YXIgeCA9IGV4cHIuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQknbGV0JywKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlTGV0QmxvY2soeCkpOwoJCWNhc2UgJ0Nhc2VFeHByZXNzaW9uJzoKCQkJdmFyIHggPSBleHByLmE7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ2Nhc2UnLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRlbmNvZGVDYXNlQmxvY2soeCkpOwoJCWNhc2UgJ0xhbWJkYUV4cHJlc3Npb24nOgoJCQl2YXIgeCA9IGV4cHIuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQknbGFtYmRhJywKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlTGFtYmRhKHgpKTsKCQljYXNlICdSZWNvcmRBY2Nlc3MnOgoJCQl2YXIgZXhwID0gZXhwci5hOwoJCQl2YXIgbmFtZSA9IGV4cHIuYjsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQkncmVjb3JkQWNjZXNzJywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ2V4cHJlc3Npb24nLAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlLCBleHApKSwKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQknbmFtZScsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZywgbmFtZSkpCgkJCQkJCV0pKSk7CgkJY2FzZSAnUmVjb3JkQWNjZXNzRnVuY3Rpb24nOgoJCQl2YXIgeCA9IGV4cHIuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQkncmVjb3JkQWNjZXNzRnVuY3Rpb24nLAoJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh4KSk7CgkJY2FzZSAnUmVjb3JkRXhwcic6CgkJCXZhciB4cyA9IGV4cHIuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQkncmVjb3JkJywKCQkJCUEyKAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlUmVjb3JkU2V0dGVyKSwKCQkJCQl4cykpOwoJCWNhc2UgJ1JlY29yZFVwZGF0ZUV4cHJlc3Npb24nOgoJCQl2YXIgbmFtZSA9IGV4cHIuYTsKCQkJdmFyIHVwZGF0ZXMgPSBleHByLmI7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ3JlY29yZFVwZGF0ZScsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZVJlY29yZFVwZGF0ZSwgbmFtZSwgdXBkYXRlcykpOwoJCWRlZmF1bHQ6CgkJCXZhciB4ID0gZXhwci5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSdnbHNsJywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcoeCkpOwoJfQp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRlbmNvZGVDYXNlID0gZnVuY3Rpb24gKF92NykgewoJdmFyIHBhdHRlcm4gPSBfdjcuYTsKCXZhciBleHByZXNzaW9uID0gX3Y3LmI7CglyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkncGF0dGVybicsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRlbmNvZGUsIHBhdHRlcm4pKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknZXhwcmVzc2lvbicsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRlbmNvZGUsIGV4cHJlc3Npb24pKQoJCQldKSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZUNhc2VCbG9jayA9IGZ1bmN0aW9uIChfdjYpIHsKCXZhciBleHByZXNzaW9uID0gX3Y2LmV4cHJlc3Npb247Cgl2YXIgY2FzZXMgPSBfdjYuY2FzZXM7CglyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknY2FzZXMnLAoJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlQ2FzZSwgY2FzZXMpKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknZXhwcmVzc2lvbicsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRlbmNvZGUsIGV4cHJlc3Npb24pKQoJCQldKSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZURlc3RydWN0dXJpbmcgPSBGMigKCWZ1bmN0aW9uIChwYXR0ZXJuLCBleHByZXNzaW9uKSB7CgkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCSdwYXR0ZXJuJywKCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRlbmNvZGUsIHBhdHRlcm4pKSwKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCSdleHByZXNzaW9uJywKCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRlbmNvZGUsIGV4cHJlc3Npb24pKQoJCQkJXSkpOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZUZ1bmN0aW9uID0gZnVuY3Rpb24gKF92NSkgewoJdmFyIGRvY3VtZW50YXRpb24gPSBfdjUuZG9jdW1lbnRhdGlvbjsKCXZhciBzaWduYXR1cmUgPSBfdjUuc2lnbmF0dXJlOwoJdmFyIGRlY2xhcmF0aW9uID0gX3Y1LmRlY2xhcmF0aW9uOwoJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ2RvY3VtZW50YXRpb24nLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRudWxsLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREb2N1bWVudGF0aW9uJGVuY29kZSksCgkJCQkJCWRvY3VtZW50YXRpb24pKSksCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ3NpZ25hdHVyZScsCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG51bGwsCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFNpZ25hdHVyZSRlbmNvZGUpLAoJCQkJCQlzaWduYXR1cmUpKSksCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ2RlY2xhcmF0aW9uJywKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZUZ1bmN0aW9uRGVjbGFyYXRpb24sIGRlY2xhcmF0aW9uKSkKCQkJXSkpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRlbmNvZGVGdW5jdGlvbkRlY2xhcmF0aW9uID0gZnVuY3Rpb24gKF92NCkgewoJdmFyIG5hbWUgPSBfdjQubmFtZTsKCXZhciBfYXJndW1lbnRzID0gX3Y0Ll9hcmd1bWVudHM7Cgl2YXIgZXhwcmVzc2lvbiA9IF92NC5leHByZXNzaW9uOwoJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ25hbWUnLAoJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcsIG5hbWUpKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknYXJndW1lbnRzJywKCQkJCUEyKAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kZW5jb2RlKSwKCQkJCQlfYXJndW1lbnRzKSksCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ2V4cHJlc3Npb24nLAoJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlLCBleHByZXNzaW9uKSkKCQkJXSkpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRlbmNvZGVMYW1iZGEgPSBmdW5jdGlvbiAoX3YzKSB7Cgl2YXIgYXJncyA9IF92My5hcmdzOwoJdmFyIGV4cHJlc3Npb24gPSBfdjMuZXhwcmVzc2lvbjsKCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdwYXR0ZXJucycsCgkJCQlBMigKCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJGVuY29kZSksCgkJCQkJYXJncykpLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdleHByZXNzaW9uJywKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZSwgZXhwcmVzc2lvbikpCgkJCV0pKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlTGV0QmxvY2sgPSBmdW5jdGlvbiAoX3YyKSB7Cgl2YXIgZGVjbGFyYXRpb25zID0gX3YyLmRlY2xhcmF0aW9uczsKCXZhciBleHByZXNzaW9uID0gX3YyLmV4cHJlc3Npb247CglyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknZGVjbGFyYXRpb25zJywKCQkJCUEyKAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlTGV0RGVjbGFyYXRpb24pLAoJCQkJCWRlY2xhcmF0aW9ucykpLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdleHByZXNzaW9uJywKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZSwgZXhwcmVzc2lvbikpCgkJCV0pKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlTGV0RGVjbGFyYXRpb24gPSBmdW5jdGlvbiAobGV0RGVjbGFyYXRpb24pIHsKCWlmIChsZXREZWNsYXJhdGlvbi4kID09PSAnTGV0RnVuY3Rpb24nKSB7CgkJdmFyIGYgPSBsZXREZWNsYXJhdGlvbi5hOwoJCXJldHVybiBBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCSdmdW5jdGlvbicsCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlRnVuY3Rpb24oZikpOwoJfSBlbHNlIHsKCQl2YXIgcGF0dGVybiA9IGxldERlY2xhcmF0aW9uLmE7CgkJdmFyIGV4cHJlc3Npb24gPSBsZXREZWNsYXJhdGlvbi5iOwoJCXJldHVybiBBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCSdkZXN0cnVjdHVyaW5nJywKCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRlbmNvZGVEZXN0cnVjdHVyaW5nLCBwYXR0ZXJuLCBleHByZXNzaW9uKSk7Cgl9Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZU9wZXJhdG9yQXBwbGljYXRpb24gPSBGNCgKCWZ1bmN0aW9uIChvcGVyYXRvciwgZGlyZWN0aW9uLCBsZWZ0LCByaWdodCkgewoJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQknb3BlcmF0b3InLAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcob3BlcmF0b3IpKSwKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCSdkaXJlY3Rpb24nLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEluZml4JGVuY29kZURpcmVjdGlvbihkaXJlY3Rpb24pKSwKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCSdsZWZ0JywKCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRlbmNvZGUsIGxlZnQpKSwKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCSdyaWdodCcsCgkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlLCByaWdodCkpCgkJCQldKSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlUmVjb3JkU2V0dGVyID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIGZpZWxkID0gX3YwLmE7Cgl2YXIgZXhwcmVzc2lvbiA9IF92MC5iOwoJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ2ZpZWxkJywKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nLCBmaWVsZCkpLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdleHByZXNzaW9uJywKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJGVuY29kZSwgZXhwcmVzc2lvbikpCgkJCV0pKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlUmVjb3JkVXBkYXRlID0gRjIoCglmdW5jdGlvbiAobmFtZSwgdXBkYXRlcykgewoJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQknbmFtZScsCgkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcsIG5hbWUpKSwKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCSd1cGRhdGVzJywKCQkJCQlBMigKCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlUmVjb3JkU2V0dGVyKSwKCQkJCQkJdXBkYXRlcykpCgkJCQldKSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEluZml4JGVuY29kZSA9IGZ1bmN0aW9uIChpbmYpIHsKCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdkaXJlY3Rpb24nLAoJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEluZml4JGVuY29kZURpcmVjdGlvbiwgaW5mLmRpcmVjdGlvbikpLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdwcmVjZWRlbmNlJywKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50LCBpbmYucHJlY2VkZW5jZSkpLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdvcGVyYXRvcicsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZywgaW5mLm9wZXJhdG9yKSksCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ2Z1bmN0aW9uJywKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nLCBpbmYuX2Z1bmN0aW9uKSkKCQkJXSkpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZSRlbmNvZGVWYWx1ZUNvbnN0cnVjdG9yID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIG5hbWUgPSBfdjAubmFtZTsKCXZhciBfYXJndW1lbnRzID0gX3YwLl9hcmd1bWVudHM7CglyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknbmFtZScsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZywgbmFtZSkpLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdhcmd1bWVudHMnLAoJCQkJQTIoCgkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kZW5jb2RlKSwKCQkJCQlfYXJndW1lbnRzKSkKCQkJXSkpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZSRlbmNvZGUgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgZG9jdW1lbnRhdGlvbiA9IF92MC5kb2N1bWVudGF0aW9uOwoJdmFyIG5hbWUgPSBfdjAubmFtZTsKCXZhciBnZW5lcmljcyA9IF92MC5nZW5lcmljczsKCXZhciBjb25zdHJ1Y3RvcnMgPSBfdjAuY29uc3RydWN0b3JzOwoJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ2RvY3VtZW50YXRpb24nLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRudWxsLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREb2N1bWVudGF0aW9uJGVuY29kZSksCgkJCQkJCWRvY3VtZW50YXRpb24pKSksCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ25hbWUnLAoJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcsIG5hbWUpKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknZ2VuZXJpY3MnLAoJCQkJQTIoCgkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUoJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyksCgkJCQkJZ2VuZXJpY3MpKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknY29uc3RydWN0b3JzJywKCQkJCUEyKAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGUkZW5jb2RlVmFsdWVDb25zdHJ1Y3RvciksCgkJCQkJY29uc3RydWN0b3JzKSkKCQkJXSkpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFsaWFzJGVuY29kZSA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBkb2N1bWVudGF0aW9uID0gX3YwLmRvY3VtZW50YXRpb247Cgl2YXIgbmFtZSA9IF92MC5uYW1lOwoJdmFyIGdlbmVyaWNzID0gX3YwLmdlbmVyaWNzOwoJdmFyIHR5cGVBbm5vdGF0aW9uID0gX3YwLnR5cGVBbm5vdGF0aW9uOwoJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ2RvY3VtZW50YXRpb24nLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRudWxsLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREb2N1bWVudGF0aW9uJGVuY29kZSksCgkJCQkJCWRvY3VtZW50YXRpb24pKSksCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ25hbWUnLAoJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcsIG5hbWUpKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknZ2VuZXJpY3MnLAoJCQkJQTIoCgkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUoJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyksCgkJCQkJZ2VuZXJpY3MpKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkndHlwZUFubm90YXRpb24nLAoJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJGVuY29kZSwgdHlwZUFubm90YXRpb24pKQoJCQldKSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREZWNsYXJhdGlvbiRlbmNvZGUgPSBmdW5jdGlvbiAoZGVjbCkgewoJc3dpdGNoIChkZWNsLiQpIHsKCQljYXNlICdGdW5jdGlvbkRlY2xhcmF0aW9uJzoKCQkJdmFyIF9mdW5jdGlvbiA9IGRlY2wuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQknZnVuY3Rpb24nLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRlbmNvZGVGdW5jdGlvbihfZnVuY3Rpb24pKTsKCQljYXNlICdBbGlhc0RlY2xhcmF0aW9uJzoKCQkJdmFyIHR5cGVBbGlhcyA9IGRlY2wuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQkndHlwZUFsaWFzJywKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbGlhcyRlbmNvZGUodHlwZUFsaWFzKSk7CgkJY2FzZSAnQ3VzdG9tVHlwZURlY2xhcmF0aW9uJzoKCQkJdmFyIHR5cGVEZWNsYXJhdGlvbiA9IGRlY2wuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQkndHlwZWRlY2wnLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZSRlbmNvZGUodHlwZURlY2xhcmF0aW9uKSk7CgkJY2FzZSAnUG9ydERlY2xhcmF0aW9uJzoKCQkJdmFyIHNpZyA9IGRlY2wuYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQkncG9ydCcsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRTaWduYXR1cmUkZW5jb2RlKHNpZykpOwoJCWNhc2UgJ0luZml4RGVjbGFyYXRpb24nOgoJCQl2YXIgaW5mID0gZGVjbC5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSdpbmZpeCcsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRJbmZpeCRlbmNvZGUoaW5mKSk7CgkJZGVmYXVsdDoKCQkJdmFyIHBhdHRlcm4gPSBkZWNsLmE7CgkJCXZhciBleHByZXNzaW9uID0gZGVjbC5iOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSdkZXN0cnVjdHVyaW5nJywKCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ3BhdHRlcm4nLAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kZW5jb2RlLCBwYXR0ZXJuKSksCgkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJJ2V4cHJlc3Npb24nLAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kZW5jb2RlLCBleHByZXNzaW9uKSkKCQkJCQkJXSkpKTsKCX0KfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cG9zaW5nJGVuY29kZUV4cG9zZWRUeXBlID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIG5hbWUgPSBfdjAubmFtZTsKCXZhciBvcGVuID0gX3YwLm9wZW47CglyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknbmFtZScsCgkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKG5hbWUpKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknb3BlbicsCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkd2l0aERlZmF1bHQsCgkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG51bGwsCgkJCQkJQTIoJGVsbSRjb3JlJE1heWJlJG1hcCwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUmFuZ2UkZW5jb2RlLCBvcGVuKSkpCgkJCV0pKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cG9zaW5nJGVuY29kZVRvcExldmVsRXhwb3NlID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUoCglmdW5jdGlvbiAoZXhwKSB7CgkJc3dpdGNoIChleHAuJCkgewoJCQljYXNlICdJbmZpeEV4cG9zZSc6CgkJCQl2YXIgeCA9IGV4cC5hOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJCSdpbmZpeCcsCgkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJJ25hbWUnLAoJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcoeCkpCgkJCQkJCQldKSkpOwoJCQljYXNlICdGdW5jdGlvbkV4cG9zZSc6CgkJCQl2YXIgeCA9IGV4cC5hOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJCSdmdW5jdGlvbicsCgkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJJ25hbWUnLAoJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcoeCkpCgkJCQkJCQldKSkpOwoJCQljYXNlICdUeXBlT3JBbGlhc0V4cG9zZSc6CgkJCQl2YXIgeCA9IGV4cC5hOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJCSd0eXBlT3JBbGlhcycsCgkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJJ25hbWUnLAoJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcoeCkpCgkJCQkJCQldKSkpOwoJCQlkZWZhdWx0OgoJCQkJdmFyIGV4cG9zZWRUeXBlID0gZXhwLmE7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQkJJ3R5cGVleHBvc2UnLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cG9zaW5nJGVuY29kZUV4cG9zZWRUeXBlKGV4cG9zZWRUeXBlKSk7CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHBvc2luZyRlbmNvZGUgPSBmdW5jdGlvbiAoZXhwKSB7CglpZiAoZXhwLiQgPT09ICdBbGwnKSB7CgkJdmFyIHIgPSBleHAuYTsKCQlyZXR1cm4gQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQknYWxsJywKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUmFuZ2UkZW5jb2RlKHIpKTsKCX0gZWxzZSB7CgkJdmFyIGwgPSBleHAuYTsKCQlyZXR1cm4gQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQknZXhwbGljaXQnLAoJCQlBMigkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwb3NpbmckZW5jb2RlVG9wTGV2ZWxFeHBvc2UsIGwpKTsKCX0KfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEltcG9ydCRlbmNvZGUgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgbW9kdWxlTmFtZSA9IF92MC5tb2R1bGVOYW1lOwoJdmFyIG1vZHVsZUFsaWFzID0gX3YwLm1vZHVsZUFsaWFzOwoJdmFyIGV4cG9zaW5nTGlzdCA9IF92MC5leHBvc2luZ0xpc3Q7CglyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknbW9kdWxlTmFtZScsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlTmFtZSRlbmNvZGUsIG1vZHVsZU5hbWUpKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknbW9kdWxlQWxpYXMnLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRudWxsLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGVOYW1lJGVuY29kZSksCgkJCQkJCW1vZHVsZUFsaWFzKSkpLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdleHBvc2luZ0xpc3QnLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRudWxsLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHBvc2luZyRlbmNvZGUpLAoJCQkJCQlleHBvc2luZ0xpc3QpKSkKCQkJXSkpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlJGVuY29kZURlZmF1bHRNb2R1bGVEYXRhID0gZnVuY3Rpb24gKG1vZHVsZURhdGEpIHsKCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdtb2R1bGVOYW1lJywKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGVOYW1lJGVuY29kZSwgbW9kdWxlRGF0YS5tb2R1bGVOYW1lKSksCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ2V4cG9zaW5nTGlzdCcsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwb3NpbmckZW5jb2RlLCBtb2R1bGVEYXRhLmV4cG9zaW5nTGlzdCkpCgkJCV0pKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE1vZHVsZSRlbmNvZGVFZmZlY3RNb2R1bGVEYXRhID0gZnVuY3Rpb24gKG1vZHVsZURhdGEpIHsKCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdtb2R1bGVOYW1lJywKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGVOYW1lJGVuY29kZSwgbW9kdWxlRGF0YS5tb2R1bGVOYW1lKSksCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ2V4cG9zaW5nTGlzdCcsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwb3NpbmckZW5jb2RlLCBtb2R1bGVEYXRhLmV4cG9zaW5nTGlzdCkpLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdjb21tYW5kJywKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbnVsbCwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUoJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyksCgkJCQkJCW1vZHVsZURhdGEuY29tbWFuZCkpKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknc3Vic2NyaXB0aW9uJywKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbnVsbCwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRlbmNvZGUoJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyksCgkJCQkJCW1vZHVsZURhdGEuc3Vic2NyaXB0aW9uKSkpCgkJCV0pKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE1vZHVsZSRlbmNvZGUgPSBmdW5jdGlvbiAobSkgewoJc3dpdGNoIChtLiQpIHsKCQljYXNlICdOb3JtYWxNb2R1bGUnOgoJCQl2YXIgZCA9IG0uYTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRKc29uJFV0aWwkZW5jb2RlVHlwZWQsCgkJCQknbm9ybWFsJywKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE1vZHVsZSRlbmNvZGVEZWZhdWx0TW9kdWxlRGF0YShkKSk7CgkJY2FzZSAnUG9ydE1vZHVsZSc6CgkJCXZhciBkID0gbS5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJEpzb24kVXRpbCRlbmNvZGVUeXBlZCwKCQkJCSdwb3J0JywKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE1vZHVsZSRlbmNvZGVEZWZhdWx0TW9kdWxlRGF0YShkKSk7CgkJZGVmYXVsdDoKCQkJdmFyIGQgPSBtLmE7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kSnNvbiRVdGlsJGVuY29kZVR5cGVkLAoJCQkJJ2VmZmVjdCcsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGUkZW5jb2RlRWZmZWN0TW9kdWxlRGF0YShkKSk7Cgl9Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRGaWxlJGVuY29kZSA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBtb2R1bGVEZWZpbml0aW9uID0gX3YwLm1vZHVsZURlZmluaXRpb247Cgl2YXIgaW1wb3J0cyA9IF92MC5pbXBvcnRzOwoJdmFyIGRlY2xhcmF0aW9ucyA9IF92MC5kZWNsYXJhdGlvbnM7Cgl2YXIgY29tbWVudHMgPSBfdjAuY29tbWVudHM7CglyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknbW9kdWxlRGVmaW5pdGlvbicsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGVuY29kZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlJGVuY29kZSwgbW9kdWxlRGVmaW5pdGlvbikpLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdpbXBvcnRzJywKCQkJCUEyKAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEltcG9ydCRlbmNvZGUpLAoJCQkJCWltcG9ydHMpKSwKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQknZGVjbGFyYXRpb25zJywKCQkJCUEyKAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJGVuY29kZSksCgkJCQkJZGVjbGFyYXRpb25zKSksCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ2NvbW1lbnRzJywKCQkJCUEyKAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkZW5jb2RlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JENvbW1lbnRzJGVuY29kZSksCgkJCQkJY29tbWVudHMpKQoJCQldKSk7Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzY3JvbGxiYXJYID0gQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJENsYXNzLCAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRvdmVyZmxvdywgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuc2Nyb2xsYmFyc1gpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0U2V0SW5zcGVjdGlvbk9uQ29tcGlsZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdVc2VySW5wdXRTZXRJbnNwZWN0aW9uT25Db21waWxlJywgYTogYX07Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRGb250JGJvbGQgPSBBMigkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkQ2xhc3MsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRGbGFnJGZvbnRXZWlnaHQsICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmJvbGQpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kY29tcGlsZUh0bWxEb2N1bWVudEZvckVtYmVkZGluZyA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBodG1sRnJvbUVsbU1ha2UgPSBfdjAuaHRtbEZyb21FbG1NYWtlOwoJdmFyIHNjcmlwdCA9ICdcbiAgICAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwnRE9NQ29udGVudExvYWRlZFwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCdjbGlja1wnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lID09PSBcJ0FcJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCdjbGlja2VkLWxpbmstaW4taWZyYW1lXCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwnaHJlZlwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgXCcqXCcpOyAvLyBCZSBtaW5kZnVsIG9mIHRoZSBzZWN1cml0eSBpbXBsaWNhdGlvbnMgb2YgXCcqXCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICAgICAnOwoJdmFyIGNsb3NpbmdCb2R5VGFnID0gJzwvYm9keT4nOwoJdmFyIG5ld0JvZHlUYWcgPSBBMigKCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJJ1xuJywKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVtzY3JpcHQsIGNsb3NpbmdCb2R5VGFnXSkpOwoJcmV0dXJuIEEzKCRlbG0kY29yZSRTdHJpbmckcmVwbGFjZSwgY2xvc2luZ0JvZHlUYWcsIG5ld0JvZHlUYWcsIGh0bWxGcm9tRWxtTWFrZSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRpbmRlbnRPbmVMZXZlbCA9ICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsKAoJX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFkZGluZ0VhY2goCgkJCXtib3R0b206IDAsIGxlZnQ6ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSwgcmlnaHQ6IDAsIHRvcDogMH0pCgkJXSkpOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkRGVmaW5pdGlvbnMkbWFnbmlmeWluZ0dsYXNzID0gQTQoCgkkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRJY29uRGVmLAoJJ2ZhcycsCgknbWFnbmlmeWluZy1nbGFzcycsCglfVXRpbHNfVHVwbGUyKDUxMiwgNTEyKSwKCV9VdGlsc19UdXBsZTIoJ000MTYgMjA4YzAgNDUuOS0xNC45IDg4LjMtNDAgMTIyLjdMNTAyLjYgNDU3LjRjMTIuNSAxMi41IDEyLjUgMzIuOCAwIDQ1LjNzLTMyLjggMTIuNS00NS4zIDBMMzMwLjcgMzc2Yy0zNC40IDI1LjItNzYuOCA0MC0xMjIuNyA0MEM5My4xIDQxNiAwIDMyMi45IDAgMjA4UzkzLjEgMCAyMDggMFM0MTYgOTMuMSA0MTYgMjA4ek0yMDggMzUyYTE0NCAxNDQgMCAxIDAgMC0yODggMTQ0IDE0NCAwIDEgMCAwIDI4OHonLCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZykpOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkbWFnbmlmeWluZ0dsYXNzID0gJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkcHJlc2VudCgkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRTb2xpZCREZWZpbml0aW9ucyRtYWduaWZ5aW5nR2xhc3MpOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkRGVmaW5pdGlvbnMkdHJpYW5nbGVFeGNsYW1hdGlvbiA9IEE0KAoJJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkSWNvbkRlZiwKCSdmYXMnLAoJJ3RyaWFuZ2xlLWV4Y2xhbWF0aW9uJywKCV9VdGlsc19UdXBsZTIoNTEyLCA1MTIpLAoJX1V0aWxzX1R1cGxlMignTTI1NiAzMmMxNC4yIDAgMjcuMyA3LjUgMzQuNSAxOS44bDIxNiAzNjhjNy4zIDEyLjQgNy4zIDI3LjcgLjIgNDAuMVM0ODYuMyA0ODAgNDcyIDQ4MEw0MCA0ODBjLTE0LjMgMC0yNy42LTcuNy0zNC43LTIwLjFzLTctMjcuOCAuMi00MC4xbDIxNi0zNjhDMjI4LjcgMzkuNSAyNDEuOCAzMiAyNTYgMzJ6bTAgMTI4Yy0xMy4zIDAtMjQgMTAuNy0yNCAyNGwwIDExMmMwIDEzLjMgMTAuNyAyNCAyNCAyNHMyNC0xMC43IDI0LTI0bDAtMTEyYzAtMTMuMy0xMC43LTI0LTI0LTI0em0zMiAyMjRhMzIgMzIgMCAxIDAgLTY0IDAgMzIgMzIgMCAxIDAgNjQgMHonLCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZykpOwp2YXIgJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkdHJpYW5nbGVFeGNsYW1hdGlvbiA9ICRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJHByZXNlbnQoJGxhdHR5d2FyZSRlbG1fZm9udGF3ZXNvbWUkRm9udEF3ZXNvbWUkU29saWQkRGVmaW5pdGlvbnMkdHJpYW5nbGVFeGNsYW1hdGlvbik7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRzdHlsZWRUZXh0RnJvbUVsbU1ha2VSZXBvcnRNZXNzYWdlTGlzdEl0ZW0gPSBmdW5jdGlvbiAoZWxtTWFrZVJlcG9ydE1lc3NhZ2VMaXN0SXRlbSkgewoJaWYgKGVsbU1ha2VSZXBvcnRNZXNzYWdlTGlzdEl0ZW0uJCA9PT0gJ0VsbU1ha2VSZXBvcnRNZXNzYWdlTGlzdEl0ZW1QbGFpbicpIHsKCQl2YXIgdGV4dCA9IGVsbU1ha2VSZXBvcnRNZXNzYWdlTGlzdEl0ZW0uYTsKCQlyZXR1cm4ge2JvbGQ6IGZhbHNlLCBjb2xvcjogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsIHN0cmluZzogdGV4dCwgdW5kZXJsaW5lOiBmYWxzZX07Cgl9IGVsc2UgewoJCXZhciBzdHlsZWQgPSBlbG1NYWtlUmVwb3J0TWVzc2FnZUxpc3RJdGVtLmE7CgkJcmV0dXJuIHN0eWxlZDsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHZpZXdFbGVtZW50RnJvbUVsbU1ha2VDb21waWxlRXJyb3JNZXNzYWdlID0gZnVuY3Rpb24gKCkgewoJdmFyIGVsZW1lbnRGcm9tU3R5bGVkVGV4dEVsZW1lbnQgPSBmdW5jdGlvbiAoc3R5bGVkVGV4dEVsZW1lbnQpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kaHRtbCRIdG1sJHNwYW4sCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQlBMigKCQkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0eWxlLAoJCQkJCSdmb250LXdlaWdodCcsCgkJCQkJc3R5bGVkVGV4dEVsZW1lbnQuYm9sZCA/ICdib2xkJyA6ICdpbmhlcml0JyksCgkJCQkJQTIoCgkJCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwKCQkJCQkndGV4dC1kZWNvcmF0aW9uJywKCQkJCQlzdHlsZWRUZXh0RWxlbWVudC51bmRlcmxpbmUgPyAndW5kZXJsaW5lJyA6ICdub25lJyksCgkJCQkJQTIoCgkJCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwKCQkJCQknY29sb3InLAoJCQkJCUEyKCRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwgJ2luaGVyaXQnLCBzdHlsZWRUZXh0RWxlbWVudC5jb2xvcikpCgkJCQldKSwKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCSRlbG0kaHRtbCRIdG1sJHRleHQoc3R5bGVkVGV4dEVsZW1lbnQuc3RyaW5nKQoJCQkJXSkpOwoJfTsKCXJldHVybiBBMigKCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCSRlbG0kY29yZSRMaXN0JG1hcCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRzdHlsZWRUZXh0RnJvbUVsbU1ha2VSZXBvcnRNZXNzYWdlTGlzdEl0ZW0pLAoJCUEyKAoJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkkZWxtJGNvcmUkTGlzdCRtYXAoZWxlbWVudEZyb21TdHlsZWRUZXh0RWxlbWVudCksCgkJCUEyKAoJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCSRlbG0kaHRtbCRIdG1sJHNwYW4oCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlBMigkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0eWxlLCAnZm9udC1zaXplJywgJzkwJScpLAoJCQkJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwgJ2ZpbHRlcicsICdjb250cmFzdCgwLjUpIGJyaWdodG5lc3MoMS4zKScpCgkJCQkJCV0pKSwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbCwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJJGVsbSRjb3JlJExpc3Qkc2luZ2xldG9uLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYXJhZ3JhcGgoCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sQXR0cmlidXRlKAoJCQkJCQkJCQlBMigkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0eWxlLCAnd2hpdGUtc3BhY2UnLCAncHJlLXdyYXAnKSksCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWxBdHRyaWJ1dGUoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kYXR0cmlidXRlTW9ub3NwYWNlRm9udCkKCQkJCQkJCQldKSkpKSkpKTsKfSgpOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0UmV2ZWFsUG9zaXRpb25JbkVkaXRvciA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdVc2VySW5wdXRSZXZlYWxQb3NpdGlvbkluRWRpdG9yJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3RWxtTWFrZUVycm9yTG9jYXRpb24gPSBGMigKCWZ1bmN0aW9uIChmaWxlTG9jYXRpb24sIHJlZ2lvbkluRmlsZSkgewoJCXZhciBfdjAgPSBmaWxlTG9jYXRpb247CgkJdmFyIGRpcmVjdG9yeVBhdGggPSBfdjAuYTsKCQl2YXIgZmlsZU5hbWUgPSBfdjAuYjsKCQl2YXIgZmlsZVBhdGggPSBfVXRpbHNfYXAoCgkJCWRpcmVjdG9yeVBhdGgsCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVtmaWxlTmFtZV0pKTsKCQlyZXR1cm4gQTIoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRFdmVudHMkb25DbGljaygKCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRSZXZlYWxQb3NpdGlvbkluRWRpdG9yKAoJCQkJCQl7Y29sdW1uOiByZWdpb25JbkZpbGUuc3RhcnQuY29sdW1uLCBmaWxlTG9jYXRpb246IGZpbGVMb2NhdGlvbiwgbGluZU51bWJlcjogcmVnaW9uSW5GaWxlLnN0YXJ0LmxpbmV9KSksCgkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlbGVtZW50TGlua1N0eWxlQXR0cmlidXRlcyksCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHQoCgkJCQlBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcvJywgZmlsZVBhdGgpICsgKCcgLSBMaW5lICcgKyAoJGVsbSRjb3JlJFN0cmluZyRmcm9tSW50KHJlZ2lvbkluRmlsZS5zdGFydC5saW5lKSArICgnLCBDb2x1bW4gJyArICRlbG0kY29yZSRTdHJpbmckZnJvbUludChyZWdpb25JbkZpbGUuc3RhcnQuY29sdW1uKSkpKSkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3RWxtTWFrZUNvbXBpbGVFcnJvciA9IEYyKAoJZnVuY3Rpb24gKGVsbU1ha2VSZXF1ZXN0LCBlbG1NYWtlRXJyb3IpIHsKCQlyZXR1cm4gQTIoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbiwKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKSwKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKQoJCQkJXSksCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJZnVuY3Rpb24gKGVsbU1ha2VQcm9ibGVtKSB7CgkJCQkJdmFyIGRpc3BsYXlQYXRoID0gQTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGZpbGVQYXRoRnJvbUV4aXN0aW5nUGF0aHNBbmRFbG1NYWtlUmVwb3J0UGF0aFN0cmluZywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJCXJldHVybiAkLnBhdGg7CgkJCQkJCQl9LAoJCQkJCQkJZWxtTWFrZVJlcXVlc3QuZmlsZXMpLAoJCQkJCQllbG1NYWtlRXJyb3IucGF0aCk7CgkJCQkJdmFyIGRpc3BsYXlQYXRoTG9jYXRpb24gPSBmdW5jdGlvbiAoKSB7CgkJCQkJCXZhciBfdjAgPSAkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKGRpc3BsYXlQYXRoKTsKCQkJCQkJaWYgKCFfdjAuYikgewoJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoX0xpc3RfTmlsLCAnZXJyb3IgcGFyc2luZyAtIGVtcHR5IHBhdGgnKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBmaWxlTmFtZSA9IF92MC5hOwoJCQkJCQkJdmFyIGRpcmVjdG9yeVBhdGhSZXZlcnNlZCA9IF92MC5iOwoJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShkaXJlY3RvcnlQYXRoUmV2ZXJzZWQpLAoJCQkJCQkJCWZpbGVOYW1lKTsKCQkJCQkJfQoJCQkJCX0oKTsKCQkJCQl2YXIgcHJvYmxlbUhlYWRpbmdFbGVtZW50ID0gQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbiwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSAvIDIpIHwgMCksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCkKCQkJCQkJCV0pLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwsCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkRm9udCRib2xkXSksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCgKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZWxtRWRpdG9yUHJvYmxlbURpc3BsYXlUaXRsZUZyb21SZXBvcnRUaXRsZShlbG1NYWtlUHJvYmxlbS50aXRsZSkpKSwKCQkJCQkJCQlBMigkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3RWxtTWFrZUVycm9yTG9jYXRpb24sIGRpc3BsYXlQYXRoTG9jYXRpb24sIGVsbU1ha2VQcm9ibGVtLnJlZ2lvbikKCQkJCQkJCV0pKTsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbiwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSAvIDIpIHwgMCksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCkKCQkJCQkJCV0pLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJcHJvYmxlbUhlYWRpbmdFbGVtZW50LAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGluZGVudE9uZUxldmVsKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHZpZXdFbGVtZW50RnJvbUVsbU1ha2VDb21waWxlRXJyb3JNZXNzYWdlKGVsbU1ha2VQcm9ibGVtLm1lc3NhZ2UpKQoJCQkJCQkJXSkpOwoJCQkJfSwKCQkJCWVsbU1ha2VFcnJvci5wcm9ibGVtcykpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3TG93ZXJpbmdDb21waWxlRXJyb3IgPSBmdW5jdGlvbiAobG9jYXRlZExvd2VyaW5nRXJyb3IpIHsKCXZhciBlcnJvckxvY2F0aW9uID0gbG9jYXRlZExvd2VyaW5nRXJyb3IuYTsKCXZhciBsb3dlcmluZ0Vycm9yID0gbG9jYXRlZExvd2VyaW5nRXJyb3IuYjsKCXZhciBfdjEgPSAkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKGVycm9yTG9jYXRpb24uZmlsZVBhdGgpOwoJaWYgKCFfdjEuYikgewoJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRub25lOwoJfSBlbHNlIHsKCQl2YXIgZmlsZU5hbWUgPSBfdjEuYTsKCQl2YXIgZGlyZWN0b3J5UGF0aFJldmVyc2VkID0gX3YxLmI7CgkJdmFyIGxvY2F0aW9uRWxlbWVudCA9IEEyKAoJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3RWxtTWFrZUVycm9yTG9jYXRpb24sCgkJCV9VdGlsc19UdXBsZTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKGRpcmVjdG9yeVBhdGhSZXZlcnNlZCksCgkJCQlmaWxlTmFtZSksCgkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGNvbXBpbGF0aW9uU3ludGF4UmFuZ2VBc0VsbU1ha2VSZXBvcnRSZWdpb24oZXJyb3JMb2NhdGlvbi5sb2NhdGlvbkluTW9kdWxlVGV4dCkpOwoJCXZhciBlcnJvckRlc2NyaXB0aW9uRWxlbWVudCA9IEEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYXJhZ3JhcGgsCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sQXR0cmlidXRlKAoJCQkJCUEyKCRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkc3R5bGUsICd3aGl0ZS1zcGFjZScsICdwcmUtd3JhcCcpKSwKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sQXR0cmlidXRlKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGF0dHJpYnV0ZU1vbm9zcGFjZUZvbnQpCgkJCQldKSwKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWwoCgkJCQkJJGVsbSRodG1sJEh0bWwkdGV4dCgKCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbG93ZXJpbmdDb21waWxhdGlvbkVycm9yRGlzcGxheVRleHQobG93ZXJpbmdFcnJvcikpKQoJCQkJXSkpOwoJCXJldHVybiBBMigKCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY29sdW1uLAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc3BhY2luZygoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplIC8gMikgfCAwKSwKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKQoJCQkJXSksCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVtsb2NhdGlvbkVsZW1lbnQsIGVycm9yRGVzY3JpcHRpb25FbGVtZW50XSkpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdmlld091dHB1dFBhbmVDb250ZW50RnJvbUNvbXBpbGF0aW9uQ29tcGxldGUgPSBGNCgKCWZ1bmN0aW9uICh3b3Jrc3BhY2UsIGNvbXBpbGF0aW9uLCBsb3dlcmluZ0NvbXBsZXRlLCBlbG1NYWtlUmVzdWx0KSB7CgkJdmFyIG91dHB1dEVsZW1lbnRGcm9tUGxhaW5UZXh0ID0gZnVuY3Rpb24gKG91dHB1dFRleHQpIHsKCQkJcmV0dXJuIEEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFyYWdyYXBoLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbEF0dHJpYnV0ZSgKCQkJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwgJ3doaXRlLXNwYWNlJywgJ3ByZS13cmFwJykpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sQXR0cmlidXRlKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGF0dHJpYnV0ZU1vbm9zcGFjZUZvbnQpCgkJCQkJXSksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sKAoJCQkJCQkkZWxtJGh0bWwkSHRtbCR0ZXh0KG91dHB1dFRleHQpKQoJCQkJCV0pKTsKCQl9OwoJCXZhciBvZmZlclRvZ2dsZUluc3BlY3Rpb24gPSBmdW5jdGlvbiAoKSB7CgkJCXZhciBfdjEzID0gbG93ZXJpbmdDb21wbGV0ZS5sb3dlcmluZ1Jlc3VsdDsKCQkJaWYgKF92MTMuJCA9PT0gJ0VycicpIHsKCQkJCXJldHVybiBmYWxzZTsKCQkJfSBlbHNlIHsKCQkJCWlmIChlbG1NYWtlUmVzdWx0LiQgPT09ICdFcnInKSB7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgZWxtTWFrZU9rID0gZWxtTWFrZVJlc3VsdC5hOwoJCQkJCXJldHVybiAhX1V0aWxzX2VxKGVsbU1ha2VPay5jb21waWxlZEh0bWxEb2N1bWVudCwgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpOwoJCQkJfQoJCQl9CgkJfSgpOwoJCXZhciBlbG1NYWtlUmVxdWVzdEZyb21DdXJyZW50U3RhdGUgPSAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRwcmVwYXJlQ29tcGlsZUZvckZpbGVPcGVuZWRJbkVkaXRvcih3b3Jrc3BhY2UpOwoJCXZhciBlbG1NYWtlUmVxdWVzdCA9IGNvbXBpbGF0aW9uLm9yaWdpbi5yZXF1ZXN0RnJvbVVzZXI7CgkJdmFyIGVsbU1ha2VSZXF1ZXN0RW50cnlQb2ludEZpbGVQYXRoQWJzID0gX1V0aWxzX2FwKGVsbU1ha2VSZXF1ZXN0LndvcmtpbmdEaXJlY3RvcnlQYXRoLCBlbG1NYWtlUmVxdWVzdC5lbnRyeVBvaW50RmlsZVBhdGhGcm9tV29ya2luZ0RpcmVjdG9yeSk7CgkJdmFyIGVsbU1ha2VFcnJvckVsZW1lbnQgPSBmdW5jdGlvbiAoZWxtTWFrZUVycm9yKSB7CgkJCXJldHVybiBBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHRDb2x1bW4sCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKDQpLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSkKCQkJCQldKSwKCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJJGVsbSRjb3JlJExpc3Qkc2luZ2xldG9uLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFyYWdyYXBoKF9MaXN0X05pbCkpKSwKCQkJCQlfVXRpbHNfYXAoCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsnRXJyb3I6J10pLAoJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGxpbmVzKAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVzY3JpYmVIdHRwRXJyb3IoZWxtTWFrZUVycm9yKSkpKSk7CgkJfTsKCQl2YXIgZWxtTWFrZVJlc3VsdEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7CgkJCWlmIChlbG1NYWtlUmVzdWx0LiQgPT09ICdFcnInKSB7CgkJCQl2YXIgZWxtTWFrZUVycm9yID0gZWxtTWFrZVJlc3VsdC5hOwoJCQkJcmV0dXJuIGVsbU1ha2VFcnJvckVsZW1lbnQoZWxtTWFrZUVycm9yKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBlbG1NYWtlT2sgPSBlbG1NYWtlUmVzdWx0LmE7CgkJCQl2YXIgY29udGludWVXaXRoUHJvY2Vzc091dHB1dCA9IGZ1bmN0aW9uIChfdjEyKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjb2x1bW4sCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSAqIDIpLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nKCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUgLyAyKSB8IDApCgkJCQkJCQldKSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQlmdW5jdGlvbiAoX3YxMSkgewoJCQkJCQkJCXZhciBjaGFubmVsID0gX3YxMS5hOwoJCQkJCQkJCXZhciBvdXRwdXRFbGVtZW50ID0gX3YxMS5iOwoJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY29sdW1uLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc3BhY2luZygoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplIC8gMikgfCAwKSwKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKQoJCQkJCQkJCQkJXSksCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRoZWFkaW5nQXR0cmlidXRlcygzKSwKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KGNoYW5uZWwpKSwKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRpbmRlbnRPbmVMZXZlbChvdXRwdXRFbGVtZW50KQoJCQkJCQkJCQkJXSkpOwoJCQkJCQkJfSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCSgoIWVsbU1ha2VPay5yZXNwb25zZS5yZXBvcnRKc29uUHJvY2Vzc091dHB1dC5leGl0Q29kZSkgJiYgJGVsbSRjb3JlJFN0cmluZyRpc0VtcHR5KAoJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJHRyaW0oZWxtTWFrZU9rLnJlc3BvbnNlLnJlcG9ydEpzb25Qcm9jZXNzT3V0cHV0LnN0YW5kYXJkRXJyb3IpKSkgPyBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkn4pyUIE5vIEVycm9ycycsCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFyYWdyYXBoLAoJCQkJCQkJCQkJX0xpc3RfTmlsLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCgKCQkJCQkJCQkJCQkJJ0ZvdW5kIG5vIGVycm9ycyBpbiBtb2R1bGUgXCcnICsgKEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy8nLCBlbG1NYWtlUmVxdWVzdEVudHJ5UG9pbnRGaWxlUGF0aEFicykgKyAnXCcnKSkKCQkJCQkJCQkJCQldKSkpIDogX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJJ0Vycm9ycycsCgkJCQkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCQkJCXZhciBfdjEwID0gZWxtTWFrZU9rLnJlcG9ydEZyb21Kc29uOwoJCQkJCQkJCQkJaWYgKF92MTAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJCQkJcmV0dXJuIG91dHB1dEVsZW1lbnRGcm9tUGxhaW5UZXh0KGVsbU1ha2VPay5yZXNwb25zZS5wcm9jZXNzT3V0cHV0LnN0YW5kYXJkRXJyb3IpOwoJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQlpZiAoX3YxMC5hLiQgPT09ICdFcnInKSB7CgkJCQkJCQkJCQkJCXZhciBkZWNvZGVFcnJvciA9IF92MTAuYS5hOwoJCQkJCQkJCQkJCQlyZXR1cm4gb3V0cHV0RWxlbWVudEZyb21QbGFpblRleHQoJ0ZhaWxlZCB0byBkZWNvZGUgSlNPTiByZXBvcnQ6ICcgKyBkZWNvZGVFcnJvcik7CgkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJaWYgKF92MTAuYS5hLiQgPT09ICdDb21waWxlRXJyb3JzUmVwb3J0JykgewoJCQkJCQkJCQkJCQkJdmFyIGNvbXBpbGVFcnJvcnMgPSBfdjEwLmEuYS5hOwoJCQkJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbiwKCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKSwKCQkJCQkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpCgkJCQkJCQkJCQkJCQkJCV0pLAoJCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHZpZXdFbG1NYWtlQ29tcGlsZUVycm9yKGVsbU1ha2VSZXF1ZXN0KSwKCQkJCQkJCQkJCQkJCQkJY29tcGlsZUVycm9ycykpOwoJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJdmFyIGVycm9yID0gX3YxMC5hLmEuYTsKCQkJCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjb2x1bW4sCgkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUgLyAyKSB8IDApLAoJCQkJCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCkKCQkJCQkJCQkJCQkJCQkJXSksCgkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQkJCVskbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRGb250JGJvbGRdKSwKCQkJCQkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHQoZXJyb3IudGl0bGUpKSwKCQkJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHZpZXdFbGVtZW50RnJvbUVsbU1ha2VDb21waWxlRXJyb3JNZXNzYWdlKGVycm9yLm1lc3NhZ2UpCgkJCQkJCQkJCQkJCQkJCV0pKTsKCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0KCQkJCQkJCQkJfSgpKSwKCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJJ0VsbSBtYWtlIHN0YW5kYXJkIG91dHB1dCcsCgkJCQkJCQkJCW91dHB1dEVsZW1lbnRGcm9tUGxhaW5UZXh0KGVsbU1ha2VPay5yZXNwb25zZS5wcm9jZXNzT3V0cHV0LnN0YW5kYXJkT3V0cHV0KSkKCQkJCQkJCQldKSkpOwoJCQkJfTsKCQkJCXZhciBfdjggPSBlbG1NYWtlT2suY29tcGlsZWRIdG1sRG9jdW1lbnQ7CgkJCQlpZiAoX3Y4LiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiBjb250aW51ZVdpdGhQcm9jZXNzT3V0cHV0KF9VdGlsc19UdXBsZTApOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgaHRtbERvY3VtZW50RnJvbUVsbU1ha2UgPSBfdjguYTsKCQkJCQl2YXIgaHRtbERvY3VtZW50Rm9yRW1iZWRkaW5nID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kY29tcGlsZUh0bWxEb2N1bWVudEZvckVtYmVkZGluZygKCQkJCQkJe2h0bWxGcm9tRWxtTWFrZTogaHRtbERvY3VtZW50RnJvbUVsbU1ha2V9KTsKCQkJCQl2YXIgX3Y5ID0gbG93ZXJpbmdDb21wbGV0ZS5sb3dlcmluZ1Jlc3VsdDsKCQkJCQlpZiAoX3Y5LiQgPT09ICdFcnInKSB7CgkJCQkJCXJldHVybiBjb250aW51ZVdpdGhQcm9jZXNzT3V0cHV0KF9VdGlsc19UdXBsZTApOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKQoJCQkJCQkJCV0pLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbCgKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRodG1sJEh0bWwkaWZyYW1lLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzcmNkb2MoaHRtbERvY3VtZW50Rm9yRW1iZWRkaW5nKSwKCQkJCQkJCQkJCQlBMigkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0eWxlLCAnaGVpZ2h0JywgJzk4JScpCgkJCQkJCQkJCQldKSwKCQkJCQkJCQkJX0xpc3RfTmlsKSkpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0oKTsKCQl2YXIgZWxlbWVudFdpdGhTY3JvbGxiYXJZID0gZnVuY3Rpb24gKGVsZW1lbnRzVG9TY3JvbGwpIHsKCQkJcmV0dXJuIEEyKAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcm93LAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY2xpcCwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbEF0dHJpYnV0ZSgKCQkJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwgJ2ZsZXgtc2hyaW5rJywgJzEnKSkKCQkJCQldKSwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCUEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzY3JvbGxiYXJZCgkJCQkJCQldKSwKCQkJCQkJZWxlbWVudHNUb1Njcm9sbCkKCQkJCQldKSk7CgkJfTsKCQl2YXIgY3VycmVudEZpbGVDb250ZW50SXNTdGlsbFNhbWUgPSBfVXRpbHNfZXEoCgkJCSRlbG0kY29yZSRNYXliZSRKdXN0KGVsbU1ha2VSZXF1ZXN0LmZpbGVzKSwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQlyZXR1cm4gJC5yZXF1ZXN0RnJvbVVzZXJJZGVudGl0eTsKCQkJCQl9LAoJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCXJldHVybiAkLmZpbGVzOwoJCQkJCX0pLAoJCQkJZWxtTWFrZVJlcXVlc3RGcm9tQ3VycmVudFN0YXRlKSk7CgkJdmFyIHdhcm5BYm91dE91dGRhdGVkQ29tcGlsYXRpb25UZXh0ID0gZnVuY3Rpb24gKCkgewoJCQl2YXIgX3Y1ID0gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZmlsZUxvY2F0aW9uT3BlbkluRWRpdG9yRnJvbVdvcmtzcGFjZSh3b3Jrc3BhY2UpOwoJCQlpZiAoX3Y1LiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQl9IGVsc2UgewoJCQkJdmFyIGVkaXRpbmcgPSBfdjUuYTsKCQkJCXZhciBfdjYgPSBlZGl0aW5nLmZpbGVMb2NhdGlvbjsKCQkJCXZhciBkaXJlY3RvcnlQYXRoID0gX3Y2LmE7CgkJCQl2YXIgZmlsZU5hbWUgPSBfdjYuYjsKCQkJCXZhciBmaWxlUGF0aE9wZW5lZEluRWRpdG9yID0gX1V0aWxzX2FwKAoJCQkJCWRpcmVjdG9yeVBhdGgsCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbZmlsZU5hbWVdKSk7CgkJCQlyZXR1cm4gKCFfVXRpbHNfZXEoZWxtTWFrZVJlcXVlc3RFbnRyeVBvaW50RmlsZVBhdGhBYnMsIGZpbGVQYXRoT3BlbmVkSW5FZGl0b3IpKSA/ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCSdMYXN0IGNvbXBpbGF0aW9uIHN0YXJ0ZWQgZm9yIGFub3RoZXIgZmlsZTogXCcnICsgKEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy8nLCBlbG1NYWtlUmVxdWVzdEVudHJ5UG9pbnRGaWxlUGF0aEFicykgKyAnXCcnKSkgOiAoY3VycmVudEZpbGVDb250ZW50SXNTdGlsbFNhbWUgPyAkZWxtJGNvcmUkTWF5YmUkTm90aGluZyA6ICRlbG0kY29yZSRNYXliZSRKdXN0KCdGaWxlIGNvbnRlbnRzIGNoYW5nZWQgc2luY2UgY29tcGlsaW5nJykpOwoJCQl9CgkJfSgpOwoJCXZhciBjb21waWxlUmVzdWx0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHsKCQkJdmFyIF92MyA9IGxvd2VyaW5nQ29tcGxldGUubG93ZXJpbmdSZXN1bHQ7CgkJCWlmIChfdjMuJCA9PT0gJ0VycicpIHsKCQkJCXZhciBsb3dlcmluZ0Vycm9yID0gX3YzLmE7CgkJCQl2YXIgbG93ZXJpbmdFcnJvckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7CgkJCQkJaWYgKGxvd2VyaW5nRXJyb3IuJCA9PT0gJ0xvd2VyaW5nRXJyb3InKSB7CgkJCQkJCXZhciBmYWlsZWRMb3dlcmluZyA9IGxvd2VyaW5nRXJyb3IuYTsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY29sdW1uLAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc3BhY2luZygkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUgKiAyKSwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKQoJCQkJCQkJCV0pLAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHBhcmFncmFwaCwKCQkJCQkJCQkJX0xpc3RfTmlsLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCgKCQkJCQkJCQkJCQknRmFpbGVkIHRvIGxvd2VyIHRoZSBwcm9ncmFtIGNvZGUgZmlsZXMgd2l0aCAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludCgKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkbGVuZ3RoKGZhaWxlZExvd2VyaW5nKSkgKyAnIGVycm9yczonKSkKCQkJCQkJCQkJCV0pKSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbiwKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKSwKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKQoJCQkJCQkJCQkJXSksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3TG93ZXJpbmdDb21waWxlRXJyb3IsCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JHNpbmdsZXRvbiwKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFyYWdyYXBoKF9MaXN0X05pbCkpKSwKCQkJCQkJCQkJCWZhaWxlZExvd2VyaW5nKSksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYXJhZ3JhcGgsCgkJCQkJCQkJCV9MaXN0X05pbCwKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHQoJ1Byb2JhYmx5IHRoZSByZXNwb25zZSBmcm9tIFwnZWxtIG1ha2VcJyBiZWxvdyBoYXMgbW9yZSBkZXRhaWxzIG9uIHRoZSBlcnJvcjonKQoJCQkJCQkJCQkJXSkpLAoJCQkJCQkJCQllbG1NYWtlUmVzdWx0RWxlbWVudAoJCQkJCQkJCV0pKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgZWxtTWFrZUVycm9yID0gbG93ZXJpbmdFcnJvci5hOwoJCQkJCQlyZXR1cm4gZWxtTWFrZUVycm9yRWxlbWVudChlbG1NYWtlRXJyb3IpOwoJCQkJCX0KCQkJCX0oKTsKCQkJCXJldHVybiBlbGVtZW50V2l0aFNjcm9sbGJhclkobG93ZXJpbmdFcnJvckVsZW1lbnQpOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIGVsZW1lbnRXaXRoU2Nyb2xsYmFyWShlbG1NYWtlUmVzdWx0RWxlbWVudCk7CgkJCX0KCQl9KCk7CgkJdmFyIF92MCA9IGVsbU1ha2VSZXF1ZXN0Lm1ha2VPcHRpb25EZWJ1ZyA/IF9VdGlsc19UdXBsZTIoCgkJCV9VdGlsc19UdXBsZTIoJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsICdEaXNhYmxlIEluc3BlY3Rpb24nKSwKCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0U2V0SW5zcGVjdGlvbk9uQ29tcGlsZShmYWxzZSkpIDogX1V0aWxzX1R1cGxlMigKCQkJX1V0aWxzX1R1cGxlMigKCQkJCSRlbG0kY29yZSRNYXliZSRKdXN0KCRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJG1hZ25pZnlpbmdHbGFzcyksCgkJCQknRW5hYmxlIEluc3BlY3Rpb24nKSwKCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0U2V0SW5zcGVjdGlvbk9uQ29tcGlsZSh0cnVlKSk7CgkJdmFyIF92MSA9IF92MC5hOwoJCXZhciB0b2dnbGVJbnNwZWN0aW9uTGFiZWxJY29uID0gX3YxLmE7CgkJdmFyIHRvZ2dsZUluc3BlY3Rpb25MYWJlbFRleHQgPSBfdjEuYjsKCQl2YXIgdG9nZ2xlSW5zcGVjdGlvbkV2ZW50ID0gX3YwLmI7CgkJdmFyIHdhcm5BYm91dE91dGRhdGVkT3JPZmZlck1vZGlmeUNvbXBpbGF0aW9uRWxlbWVudCA9IGZ1bmN0aW9uICgpIHsKCQkJaWYgKHdhcm5BYm91dE91dGRhdGVkQ29tcGlsYXRpb25UZXh0LiQgPT09ICdKdXN0JykgewoJCQkJdmFyIHdhcm5UZXh0ID0gd2FybkFib3V0T3V0ZGF0ZWRDb21waWxhdGlvblRleHQuYTsKCQkJCXJldHVybiBBMigKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYXJhZ3JhcGgsCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nKCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUgLyAyKSB8IDApLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQmFja2dyb3VuZCRjb2xvcigKCQkJCQkJCUEzKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJnYiwgMC40LCAwLjEsIDApKSwKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdHJhbnNwYXJlbnQoCgkJCQkJCQlfVXRpbHNfZXEod2FybkFib3V0T3V0ZGF0ZWRDb21waWxhdGlvblRleHQsICRlbG0kY29yZSRNYXliZSROb3RoaW5nKSksCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sQXR0cmlidXRlKAoJCQkJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwgJ3VzZXItc2VsZWN0JywgJ25vbmUnKSkKCQkJCQkJXSksCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlBMigKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJCQkJX0xpc3RfTmlsLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbCgKCQkJCQkJCQkkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSR2aWV3KCRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJHRyaWFuZ2xlRXhjbGFtYXRpb24pKSksCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCcgJyksCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KHdhcm5UZXh0KQoJCQkJCQldKSk7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gb2ZmZXJUb2dnbGVJbnNwZWN0aW9uID8gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kYnV0dG9uRWxlbWVudCgKCQkJCQl7CgkJCQkJCWxhYmVsOiBBMigKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJvdywKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKQoJCQkJCQkJCV0pLAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbm9uZSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkJCQkJCQkkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSR2aWV3LAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sLAoJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbChfTGlzdF9OaWwpKSksCgkJCQkJCQkJCQl0b2dnbGVJbnNwZWN0aW9uTGFiZWxJY29uKSksCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHQodG9nZ2xlSW5zcGVjdGlvbkxhYmVsVGV4dCkKCQkJCQkJCQldKSksCgkJCQkJCW9uUHJlc3M6ICRlbG0kY29yZSRNYXliZSRKdXN0KHRvZ2dsZUluc3BlY3Rpb25FdmVudCkKCQkJCQl9KSA6ICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JG5vbmU7CgkJCX0KCQl9KCk7CgkJcmV0dXJuIHtoZWFkZXI6IHdhcm5BYm91dE91dGRhdGVkT3JPZmZlck1vZGlmeUNvbXBpbGF0aW9uRWxlbWVudCwgbWFpbkNvbnRlbnQ6IGNvbXBpbGVSZXN1bHRFbGVtZW50fTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdmlld091dHB1dFBhbmVDb250ZW50ID0gZnVuY3Rpb24gKHN0YXRlKSB7Cgl2YXIgX3YwID0gc3RhdGUuc3ludGF4SW5zcGVjdGlvbjsKCWlmIChfdjAuJCA9PT0gJ0p1c3QnKSB7CgkJdmFyIHN5bnRheEluc3BlY3Rpb24gPSBfdjAuYTsKCQl2YXIgbW9ub3NwYWNlVGV4dFdpdGhTY3JvbGxiYXJzRWxlbWVudCA9IEEyKAoJCQkkZWxtJGNvcmUkQmFzaWNzJGNvbXBvc2VSLAoJCQkkZWxtJGh0bWwkSHRtbCR0ZXh0LAoJCQlBMigKCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sLAoJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCgKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWxBdHRyaWJ1dGUoCgkJCQkJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwgJ3doaXRlLXNwYWNlJywgJ3ByZScpKSwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sQXR0cmlidXRlKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGF0dHJpYnV0ZU1vbm9zcGFjZUZvbnQpLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWxBdHRyaWJ1dGUoCgkJCQkJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwgJ2xpbmUtaGVpZ2h0JywgJ25vcm1hbCcpKSwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nKCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUgLyAyKSB8IDApCgkJCQkJCQldKSksCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCSRlbG0kY29yZSRMaXN0JHNpbmdsZXRvbiwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY29sdW1uKAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2Nyb2xsYmFyWCwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2Nyb2xsYmFyWSwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQmFja2dyb3VuZCRjb2xvcigKCQkJCQkJCQkJQTMoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiLCAwLjIsIDAuMiwgMC4yKSkKCQkJCQkJCQldKSkpKSkpOwoJCXZhciBlcnJvckVsZW1lbnQgPSBmdW5jdGlvbiAoZXJyb3JUZXh0KSB7CgkJCXJldHVybiBBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbiwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkRm9udCRjb2xvcigkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlcnJvclRleHRDb2xvciksCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHBhZGRpbmcoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKSwKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKQoJCQkJCV0pLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCgnRXJyb3InKSwKCQkJCQkJbW9ub3NwYWNlVGV4dFdpdGhTY3JvbGxiYXJzRWxlbWVudChlcnJvclRleHQpCgkJCQkJXSkpOwoJCX07CgkJdmFyIG1haW5Db250ZW50ID0gZnVuY3Rpb24gKCkgewoJCQl2YXIgX3YxID0gc3ludGF4SW5zcGVjdGlvbi5wYXJzZUZpbGVSZXN1bHQ7CgkJCWlmIChfdjEuJCA9PT0gJ0VycicpIHsKCQkJCXZhciBlcnJvciA9IF92MS5hOwoJCQkJcmV0dXJuIGVycm9yRWxlbWVudChlcnJvcik7CgkJCX0gZWxzZSB7CgkJCQlpZiAoX3YxLmEuYi4kID09PSAnRXJyJykgewoJCQkJCXZhciBfdjIgPSBfdjEuYTsKCQkJCQl2YXIgZmlsZUNvbnRlbnRTdHJpbmcgPSBfdjIuYTsKCQkJCQl2YXIgcGFyc2VFcnJvcnMgPSBfdjIuYi5hOwoJCQkJCXJldHVybiBlcnJvckVsZW1lbnQoCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJJ1xuXG4nLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxlRWxtQXBwJHBhcnNlckRlYWRFbmRUb1N0cmluZyhmaWxlQ29udGVudFN0cmluZyksCgkJCQkJCQkJcGFyc2VFcnJvcnMpKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfdjMgPSBfdjEuYTsKCQkJCQl2YXIgcGFyc2VkRmlsZSA9IF92My5iLmE7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjb2x1bW4sCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpCgkJCQkJCQldKSwKCQkJCQkJJGVsbSRjb3JlJExpc3Qkc2luZ2xldG9uKAoJCQkJCQkJbW9ub3NwYWNlVGV4dFdpdGhTY3JvbGxiYXJzRWxlbWVudCgKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGVuY29kZSwKCQkJCQkJCQkJNCwKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRmlsZSRlbmNvZGUocGFyc2VkRmlsZSkpKSkpOwoJCQkJfQoJCQl9CgkJfSgpOwoJCXJldHVybiB7aGVhZGVyOiAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRub25lLCBtYWluQ29udGVudDogbWFpbkNvbnRlbnR9OwoJfSBlbHNlIHsKCQl2YXIgX3Y0ID0gc3RhdGUuY29tcGlsYXRpb247CgkJaWYgKF92NC4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIHsKCQkJCWhlYWRlcjogJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbm9uZSwKCQkJCW1haW5Db250ZW50OiBfVXRpbHNfZXEoCgkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZmlsZUxvY2F0aW9uT3BlbkluRWRpdG9yRnJvbVdvcmtzcGFjZShzdGF0ZSksCgkJCQkJJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpID8gJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbm9uZSA6IEEyKAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHBhcmFncmFwaCwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHBhZGRpbmcoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKQoJCQkJCQldKSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHQoJ05vIGNvbXBpbGF0aW9uIHN0YXJ0ZWQuIFlvdSBjYW4gdXNlIHRoZSBcJ0NvbXBpbGVcJyBidXR0b24gdG8gY2hlY2sgcHJvZ3JhbSB0ZXh0IGZvciBlcnJvcnMgYW5kIHNlZSB5b3VyIGFwcCBpbiBhY3Rpb24uJykKCQkJCQkJXSkpCgkJCX07CgkJfSBlbHNlIHsKCQkJdmFyIGNvbXBpbGF0aW9uID0gX3Y0LmE7CgkJCXZhciBjb250aW51ZVdpdGhJblByb2dyZXNzID0gZnVuY3Rpb24gKF92NykgewoJCQkJdmFyIGVsbU1ha2VSZXF1ZXN0RW50cnlQb2ludEZpbGVQYXRoQWJzID0gX1V0aWxzX2FwKGNvbXBpbGF0aW9uLm9yaWdpbi5yZXF1ZXN0RnJvbVVzZXIud29ya2luZ0RpcmVjdG9yeVBhdGgsIGNvbXBpbGF0aW9uLm9yaWdpbi5yZXF1ZXN0RnJvbVVzZXIuZW50cnlQb2ludEZpbGVQYXRoRnJvbVdvcmtpbmdEaXJlY3RvcnkpOwoJCQkJcmV0dXJuIHsKCQkJCQloZWFkZXI6ICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JG5vbmUsCgkJCQkJbWFpbkNvbnRlbnQ6IEEyKAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYXJhZ3JhcGgsCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSkKCQkJCQkJCV0pLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCgKCQkJCQkJCQknQ29tcGlsaW5nIG1vZHVsZSBcJycgKyAoQTIoJGVsbSRjb3JlJFN0cmluZyRqb2luLCAnLycsIGVsbU1ha2VSZXF1ZXN0RW50cnlQb2ludEZpbGVQYXRoQWJzKSArICgnXCcgd2l0aCBpbnNwZWN0aW9uICcgKyAoKGNvbXBpbGF0aW9uLm9yaWdpbi5yZXF1ZXN0RnJvbVVzZXIubWFrZU9wdGlvbkRlYnVnID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJykgKyAnIC4uLicpKSkpCgkJCQkJCQldKSkKCQkJCX07CgkJCX07CgkJCXZhciBfdjUgPSBjb21waWxhdGlvbi5sb3dlcmluZ0xhc3RJdGVyYXRpb247CgkJCWlmIChfdjUuJCA9PT0gJ0xvd2VyaW5nQ29tcGxldGUnKSB7CgkJCQl2YXIgbG93ZXJpbmdDb21wbGV0ZSA9IF92NS5hOwoJCQkJdmFyIF92NiA9IGxvd2VyaW5nQ29tcGxldGUuZWxtTWFrZVJlc3VsdDsKCQkJCWlmIChfdjYuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuIGNvbnRpbnVlV2l0aEluUHJvZ3Jlc3MoX1V0aWxzX1R1cGxlMCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBlbG1NYWtlUmVzdWx0ID0gX3Y2LmE7CgkJCQkJcmV0dXJuIEE0KCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHZpZXdPdXRwdXRQYW5lQ29udGVudEZyb21Db21waWxhdGlvbkNvbXBsZXRlLCBzdGF0ZSwgY29tcGlsYXRpb24sIGxvd2VyaW5nQ29tcGxldGUsIGVsbU1ha2VSZXN1bHQpOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIGNvbnRpbnVlV2l0aEluUHJvZ3Jlc3MoX1V0aWxzX1R1cGxlMCk7CgkJCX0KCQl9Cgl9Cn07CnZhciAkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUGFkZGluZyA9IEY1KAoJZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGUpIHsKCQlyZXR1cm4geyQ6ICdQYWRkaW5nJywgYTogYSwgYjogYiwgYzogYywgZDogZCwgZTogZX07Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTcGFjZWQgPSBGMygKCWZ1bmN0aW9uIChhLCBiLCBjKSB7CgkJcmV0dXJuIHskOiAnU3BhY2VkJywgYTogYSwgYjogYiwgYzogY307Cgl9KTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRleHRyYWN0U3BhY2luZ0FuZFBhZGRpbmcgPSBmdW5jdGlvbiAoYXR0cnMpIHsKCXJldHVybiBBMygKCQkkZWxtJGNvcmUkTGlzdCRmb2xkciwKCQlGMigKCQkJZnVuY3Rpb24gKGF0dHIsIF92MCkgewoJCQkJdmFyIHBhZCA9IF92MC5hOwoJCQkJdmFyIHNwYWNpbmcgPSBfdjAuYjsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJaWYgKHBhZC4kID09PSAnSnVzdCcpIHsKCQkJCQkJCXZhciB4ID0gcGFkLmE7CgkJCQkJCQlyZXR1cm4gcGFkOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJaWYgKChhdHRyLiQgPT09ICdTdHlsZUNsYXNzJykgJiYgKGF0dHIuYi4kID09PSAnUGFkZGluZ1N0eWxlJykpIHsKCQkJCQkJCQl2YXIgX3YzID0gYXR0ci5iOwoJCQkJCQkJCXZhciBuYW1lID0gX3YzLmE7CgkJCQkJCQkJdmFyIHQgPSBfdjMuYjsKCQkJCQkJCQl2YXIgciA9IF92My5jOwoJCQkJCQkJCXZhciBiID0gX3YzLmQ7CgkJCQkJCQkJdmFyIGwgPSBfdjMuZTsKCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCUE1KCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRQYWRkaW5nLCBuYW1lLCB0LCByLCBiLCBsKSk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0oKSwKCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJCWlmIChzcGFjaW5nLiQgPT09ICdKdXN0JykgewoJCQkJCQkJdmFyIHggPSBzcGFjaW5nLmE7CgkJCQkJCQlyZXR1cm4gc3BhY2luZzsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWlmICgoYXR0ci4kID09PSAnU3R5bGVDbGFzcycpICYmIChhdHRyLmIuJCA9PT0gJ1NwYWNpbmdTdHlsZScpKSB7CgkJCQkJCQkJdmFyIF92NiA9IGF0dHIuYjsKCQkJCQkJCQl2YXIgbmFtZSA9IF92Ni5hOwoJCQkJCQkJCXZhciB4ID0gX3Y2LmI7CgkJCQkJCQkJdmFyIHkgPSBfdjYuYzsKCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCUEzKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTcGFjZWQsIG5hbWUsIHgsIHkpKTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSgpKTsKCQkJfSksCgkJX1V0aWxzX1R1cGxlMigkZWxtJGNvcmUkTWF5YmUkTm90aGluZywgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpLAoJCWF0dHJzKTsKfTsKdmFyICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdyYXBwZWRSb3cgPSBGMigKCWZ1bmN0aW9uIChhdHRycywgY2hpbGRyZW4pIHsKCQl2YXIgX3YwID0gJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGV4dHJhY3RTcGFjaW5nQW5kUGFkZGluZyhhdHRycyk7CgkJdmFyIHBhZGRlZCA9IF92MC5hOwoJCXZhciBzcGFjZWQgPSBfdjAuYjsKCQlpZiAoc3BhY2VkLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gQTQoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZWxlbWVudCwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhc1JvdywKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRkaXYsCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRodG1sQ2xhc3MoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29udGVudExlZnQgKyAoJyAnICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmNvbnRlbnRDZW50ZXJZICsgKCcgJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLndyYXBwZWQpKSkpLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzaHJpbmspLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRoZWlnaHQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2hyaW5rKSwKCQkJCQkJCWF0dHJzKSkpLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVua2V5ZWQoY2hpbGRyZW4pKTsKCQl9IGVsc2UgewoJCQl2YXIgX3YyID0gc3BhY2VkLmE7CgkJCXZhciBzcGFjZU5hbWUgPSBfdjIuYTsKCQkJdmFyIHggPSBfdjIuYjsKCQkJdmFyIHkgPSBfdjIuYzsKCQkJdmFyIG5ld1BhZGRpbmcgPSBmdW5jdGlvbiAoKSB7CgkJCQlpZiAocGFkZGVkLiQgPT09ICdKdXN0JykgewoJCQkJCXZhciBfdjUgPSBwYWRkZWQuYTsKCQkJCQl2YXIgbmFtZSA9IF92NS5hOwoJCQkJCXZhciB0ID0gX3Y1LmI7CgkJCQkJdmFyIHIgPSBfdjUuYzsKCQkJCQl2YXIgYiA9IF92NS5kOwoJCQkJCXZhciBsID0gX3Y1LmU7CgkJCQkJaWYgKChfVXRpbHNfY21wKHIsIHggLyAyKSA+IC0xKSAmJiAoX1V0aWxzX2NtcChiLCB5IC8gMikgPiAtMSkpIHsKCQkJCQkJdmFyIG5ld1RvcCA9IHQgLSAoeSAvIDIpOwoJCQkJCQl2YXIgbmV3UmlnaHQgPSByIC0gKHggLyAyKTsKCQkJCQkJdmFyIG5ld0xlZnQgPSBsIC0gKHggLyAyKTsKCQkJCQkJdmFyIG5ld0JvdHRvbSA9IGIgLSAoeSAvIDIpOwoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQlBMigKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGVDbGFzcywKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRwYWRkaW5nLAoJCQkJCQkJCUE1KAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkUGFkZGluZ1N0eWxlLAoJCQkJCQkJCQlBNCgkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkcGFkZGluZ05hbWVGbG9hdCwgbmV3VG9wLCBuZXdSaWdodCwgbmV3Qm90dG9tLCBuZXdMZWZ0KSwKCQkJCQkJCQkJbmV3VG9wLAoJCQkJCQkJCQluZXdSaWdodCwKCQkJCQkJCQkJbmV3Qm90dG9tLAoJCQkJCQkJCQluZXdMZWZ0KSkpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCX0KCQkJfSgpOwoJCQlpZiAobmV3UGFkZGluZy4kID09PSAnSnVzdCcpIHsKCQkJCXZhciBwYWQgPSBuZXdQYWRkaW5nLmE7CgkJCQlyZXR1cm4gQTQoCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGVsZW1lbnQsCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGFzUm93LAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRkaXYsCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRodG1sQ2xhc3MoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29udGVudExlZnQgKyAoJyAnICsgKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLmNvbnRlbnRDZW50ZXJZICsgKCcgJyArICRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRTdHlsZSRjbGFzc2VzLndyYXBwZWQpKSkpLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzaHJpbmspLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRoZWlnaHQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2hyaW5rKSwKCQkJCQkJCQlfVXRpbHNfYXAoCgkJCQkJCQkJCWF0dHJzLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbcGFkXSkpKSkpLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRVbmtleWVkKGNoaWxkcmVuKSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgaGFsZlkgPSAtKHkgLyAyKTsKCQkJCXZhciBoYWxmWCA9IC0oeCAvIDIpOwoJCQkJcmV0dXJuIEE0KAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRlbGVtZW50LAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRhc0VsLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRkaXYsCgkJCQkJYXR0cnMsCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVua2V5ZWQoCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBNCgKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkZWxlbWVudCwKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkYXNSb3csCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGRpdiwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJGh0bWxDbGFzcygkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkU3R5bGUkY2xhc3Nlcy5jb250ZW50TGVmdCArICgnICcgKyAoJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMuY29udGVudENlbnRlclkgKyAoJyAnICsgJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJFN0eWxlJGNsYXNzZXMud3JhcHBlZCkpKSksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRBdHRyKAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0eWxlLAoJCQkJCQkJCQkJCQknbWFyZ2luJywKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRmcm9tRmxvYXQoaGFsZlkpICsgKCdweCcgKyAoJyAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUZsb2F0KGhhbGZYKSArICdweCcpKSkpKSwKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEF0dHIoCgkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwKCQkJCQkJCQkJCQkJCSd3aWR0aCcsCgkJCQkJCQkJCQkJCQknY2FsYygxMDAlICsgJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoeCkgKyAncHgpJykpKSwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJEF0dHIoCgkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCQkkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0eWxlLAoJCQkJCQkJCQkJCQkJCSdoZWlnaHQnLAoJCQkJCQkJCQkJCQkJCSdjYWxjKDEwMCUgKyAnICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludCh5KSArICdweCknKSkpLAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkTW9kZWwkU3R5bGVDbGFzcywKCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkSW50ZXJuYWwkRmxhZyRzcGFjaW5nLAoJCQkJCQkJCQkJCQkJCUEzKCRtZGdyaWZmaXRoJGVsbV91aSRJbnRlcm5hbCRNb2RlbCRTcGFjaW5nU3R5bGUsIHNwYWNlTmFtZSwgeCwgeSkpLAoJCQkJCQkJCQkJCQkJX0xpc3RfTmlsKSkpKSksCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEludGVybmFsJE1vZGVsJFVua2V5ZWQoY2hpbGRyZW4pKQoJCQkJCQkJXSkpKTsKCQkJfQoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdmlldyA9IGZ1bmN0aW9uIChzdGF0ZSkgewoJdmFyIHRpdGxlYmFyRW50cmllcyA9IEEyKAoJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR0aXRsZWJhck1lbnVFbnRyeUJ1dHRvbihzdGF0ZSksCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kV29ya3NwYWNlTWVudUVudHJ5XSkpOwoJdmFyIHBvcHVwV2luZG93QXR0cmlidXRlcyA9IGZ1bmN0aW9uICgpIHsKCQl2YXIgX3YxNCA9IHN0YXRlLnBvcHVwOwoJCWlmIChfdjE0LiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCX0gZWxzZSB7CgkJCWlmIChfdjE0LmEuJCA9PT0gJ1RpdGxlYmFyTWVudScpIHsKCQkJCXZhciBfdjE1ID0gX3YxNC5hOwoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJfSBlbHNlIHsKCQkJCXN3aXRjaCAoX3YxNC5hLmEuJCkgewoJCQkJCWNhc2UgJ0dldExpbmtUb1dvcmtzcGFjZURpYWxvZyc6CgkJCQkJCXZhciBkaWFsb2cgPSBfdjE0LmEuYS5hOwoJCQkJCQl2YXIgX3YxNiA9IHN0YXRlLndvcmtzcGFjZTsKCQkJCQkJaWYgKF92MTYuJCA9PT0gJ1dvcmtzcGFjZUFjdGl2ZScpIHsKCQkJCQkJCXZhciB3b3Jrc3BhY2VBY3RpdmUgPSBfdjE2LmE7CgkJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcG9wdXBXaW5kb3dFbGVtZW50QXR0cmlidXRlc0Zyb21BdHRyaWJ1dGVzKAoJCQkJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHZpZXdHZXRMaW5rVG9Xb3Jrc3BhY2VEaWFsb2csIGRpYWxvZywgd29ya3NwYWNlQWN0aXZlLmZpbGVUcmVlKSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQkJCQl9CgkJCQkJY2FzZSAnTG9hZEZyb21HaXREaWFsb2cnOgoJCQkJCQl2YXIgZGlhbG9nU3RhdGUgPSBfdjE0LmEuYS5hOwoJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kcG9wdXBXaW5kb3dFbGVtZW50QXR0cmlidXRlc0Zyb21BdHRyaWJ1dGVzKAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdmlld0xvYWRGcm9tR2l0RGlhbG9nKGRpYWxvZ1N0YXRlKSk7CgkJCQkJY2FzZSAnRXhwb3J0VG9aaXBBcmNoaXZlRGlhbG9nJzoKCQkJCQkJdmFyIF92MTcgPSBfdjE0LmEuYTsKCQkJCQkJdmFyIF92MTggPSBzdGF0ZS53b3Jrc3BhY2U7CgkJCQkJCWlmIChfdjE4LiQgPT09ICdXb3Jrc3BhY2VBY3RpdmUnKSB7CgkJCQkJCQl2YXIgd29ya3NwYWNlQWN0aXZlID0gX3YxOC5hOwoJCQkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHBvcHVwV2luZG93RWxlbWVudEF0dHJpYnV0ZXNGcm9tQXR0cmlidXRlcygKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3RXhwb3J0VG9aaXBBcmNoaXZlRGlhbG9nKHdvcmtzcGFjZUFjdGl2ZS5maWxlVHJlZSkpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCQkJfQoJCQkJCWRlZmF1bHQ6CgkJCQkJCXZhciBkaWFsb2dTdGF0ZSA9IF92MTQuYS5hLmE7CgkJCQkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRwb3B1cFdpbmRvd0VsZW1lbnRBdHRyaWJ1dGVzRnJvbUF0dHJpYnV0ZXMoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiR2aWV3SW1wb3J0RnJvbVppcEFyY2hpdmVEaWFsb2coZGlhbG9nU3RhdGUpKTsKCQkJCX0KCQkJfQoJCX0KCX0oKTsKCXZhciBtYWluQ29udGVudEZyb21Mb2FkaW5nRnJvbUxpbmsgPSBmdW5jdGlvbiAoX3YxMykgewoJCXZhciBsaW5rVXJsID0gX3YxMy5saW5rVXJsOwoJCXZhciBwcm9ncmVzc09yUmVzdWx0RWxlbWVudCA9IF92MTMucHJvZ3Jlc3NPclJlc3VsdEVsZW1lbnQ7CgkJdmFyIGV4cGVjdGVkQ29tcG9zaXRpb25IYXNoID0gX3YxMy5leHBlY3RlZENvbXBvc2l0aW9uSGFzaDsKCQlyZXR1cm4gQTIoCgkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbiwKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSAvIDIpIHwgMCksCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCkKCQkJCV0pLAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsKAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWyRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNlbnRlclhdKSksCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdMb2FkaW5nIHdvcmtzcGFjZSBmcm9tICcpLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRsaW5rRWxlbWVudEZyb21VcmxBbmRUZXh0TGFiZWwoCgkJCQkJCXtsYWJlbFRleHQ6IGxpbmtVcmwsIHVybDogbGlua1VybH0pLAoJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCQkJCScnLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGFwcGVuZCgnRXhwZWN0aW5nIGNvbXBvc2l0aW9uIHdpdGggaGFzaCAnKSwKCQkJCQkJCQlleHBlY3RlZENvbXBvc2l0aW9uSGFzaCkpKSwKCQkJCQkJcHJvZ3Jlc3NPclJlc3VsdEVsZW1lbnQKCQkJCQldKSkpOwoJfTsKCXZhciBtYWluQ29udGVudCA9IGZ1bmN0aW9uICgpIHsKCQl2YXIgX3YwID0gc3RhdGUud29ya3NwYWNlOwoJCXN3aXRjaCAoX3YwLiQpIHsKCQkJY2FzZSAnV29ya3NwYWNlTG9hZGluZ0Zyb21MaW5rJzoKCQkJCXZhciBsb2FkaW5nV29ya3NwYWNlU3RhdGVGcm9tTGluayA9IF92MC5hOwoJCQkJdmFyIGxvYWRSZXN1bHQgPSBBMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkYW5kVGhlbiwKCQkJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQkJCXZhciByZXF1ZXN0VXJsID0gX3YyLmE7CgkJCQkJCXZhciByZXN1bHQgPSBfdjIuYjsKCQkJCQkJcmV0dXJuIF9VdGlsc19lcShyZXF1ZXN0VXJsLCBsb2FkaW5nV29ya3NwYWNlU3RhdGVGcm9tTGluay53b3Jrc3BhY2VTdGF0ZURlc2NyaXB0aW9uLmJhc2UpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QocmVzdWx0KSA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCX0sCgkJCQkJc3RhdGUubGFzdEJhY2tlbmRMb2FkRnJvbUdpdFJlc3VsdCk7CgkJCQl2YXIgcHJvZ3Jlc3NPclJlc3VsdEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7CgkJCQkJaWYgKGxvYWRSZXN1bHQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdMb2FkaW5nIGluIHByb2dyZXNzIC4uLicpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWlmIChsb2FkUmVzdWx0LmEuJCA9PT0gJ0VycicpIHsKCQkJCQkJCXZhciBsb2FkRXJyb3IgPSBsb2FkUmVzdWx0LmEuYTsKCQkJCQkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRlbGVtZW50VG9EaXNwbGF5TG9hZEZyb21HaXRFcnJvcihsb2FkRXJyb3IpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJcmV0dXJuICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHRleHQoJ0NvbXBsZXRlZCcpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSgpOwoJCQkJdmFyIGV4cGVjdGVkQ29tcG9zaXRpb25IYXNoID0gX1V0aWxzX2VxKGxvYWRpbmdXb3Jrc3BhY2VTdGF0ZUZyb21MaW5rLndvcmtzcGFjZVN0YXRlRGVzY3JpcHRpb24uZGlmZmVyZW5jZUZyb21CYXNlLCAkYXV0aG9yJHByb2plY3QkV29ya3NwYWNlU3RhdGVfMjAyMV8wMSRub0RpZmZlcmVuY2UpID8gbG9hZGluZ1dvcmtzcGFjZVN0YXRlRnJvbUxpbmsuZXhwZWN0ZWRDb21wb3NpdGlvbkhhc2ggOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCXJldHVybiBtYWluQ29udGVudEZyb21Mb2FkaW5nRnJvbUxpbmsoCgkJCQkJe2V4cGVjdGVkQ29tcG9zaXRpb25IYXNoOiBleHBlY3RlZENvbXBvc2l0aW9uSGFzaCwgbGlua1VybDogbG9hZGluZ1dvcmtzcGFjZVN0YXRlRnJvbUxpbmsud29ya3NwYWNlU3RhdGVEZXNjcmlwdGlvbi5iYXNlLCBwcm9ncmVzc09yUmVzdWx0RWxlbWVudDogcHJvZ3Jlc3NPclJlc3VsdEVsZW1lbnR9KTsKCQkJY2FzZSAnV29ya3NwYWNlQWN0aXZlJzoKCQkJCXZhciB3b3Jrc3BhY2VBY3RpdmUgPSBfdjAuYTsKCQkJCXZhciB3b3Jrc3BhY2VWaWV3ID0gZnVuY3Rpb24gKCkgewoJCQkJCXZhciBfdjMgPSB3b3Jrc3BhY2VBY3RpdmUuZWRpdGluZzsKCQkJCQlpZiAoX3YzLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJZWRpdG9yUGFuZUNvbnRlbnQ6IGZ1bmN0aW9uICgpIHsKCQkJCQkJCQl2YXIgc2VsZWN0RXZlbnRGcm9tRmlsZVRyZWVOb2RlID0gRjIoCgkJCQkJCQkJCWZ1bmN0aW9uICh1cHBlclBhdGgsIF92NSkgewoJCQkJCQkJCQkJdmFyIG5vZGVOYW1lID0gX3Y1LmE7CgkJCQkJCQkJCQl2YXIgbm9kZUNvbnRlbnQgPSBfdjUuYjsKCQkJCQkJCQkJCWlmIChub2RlQ29udGVudC4kID09PSAnQmxvYk5vZGUnKSB7CgkJCQkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRVc2VySW5wdXRPcGVuRmlsZUluRWRpdG9yKAoJCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMih1cHBlclBhdGgsIG5vZGVOYW1lKSkpOwoJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0pOwoJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwsCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzY3JvbGxiYXJzLAoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSkKCQkJCQkJCQkJCV0pLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHZpZXdGaWxlVHJlZSwKCQkJCQkJCQkJCXtpY29uRnJvbUZpbGVOYW1lOiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkVmlzdWFscyRpY29uRnJvbUZpbGVOYW1lLCBzZWxlY3RFdmVudEZyb21Ob2RlOiBzZWxlY3RFdmVudEZyb21GaWxlVHJlZU5vZGV9LAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kc29ydEZpbGVUcmVlRm9yRXhwbG9yZXJWaWV3KHdvcmtzcGFjZUFjdGl2ZS5maWxlVHJlZSkpKTsKCQkJCQkJCX0oKSwKCQkJCQkJCWVkaXRvclBhbmVIZWFkZXI6IEEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHBhcmFncmFwaCwKCQkJCQkJCQlfTGlzdF9OaWwsCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdDaG9vc2UgYSBmaWxlIHRvIG9wZW4gaW4gdGhlIGVkaXRvcicpCgkJCQkJCQkJCV0pKQoJCQkJCQl9OwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBlZGl0aW5nID0gX3YzLmE7CgkJCQkJCXZhciBoZWFkZXJJY29uRWxlbWVudEZyb21UeXBlQW5kQ29sb3IgPSBmdW5jdGlvbiAobWF5YmVUeXBlQW5kQ29sb3IpIHsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKAoJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcHgoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKSkKCQkJCQkJCQkJXSksCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbm9uZSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkbWFwLAoJCQkJCQkJCQkJZnVuY3Rpb24gKF92MTIpIHsKCQkJCQkJCQkJCQl2YXIgaWNvblR5cGUgPSBfdjEyLmE7CgkJCQkJCQkJCQkJdmFyIGljb25Db2xvciA9IF92MTIuYjsKCQkJCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRWaXN1YWxzJGljb25TdmdFbGVtZW50RnJvbUljb24sCgkJCQkJCQkJCQkJCXtjb2xvcjogaWNvbkNvbG9yfSwKCQkJCQkJCQkJCQkJaWNvblR5cGUpOwoJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCW1heWJlVHlwZUFuZENvbG9yKSkpOwoJCQkJCQl9OwoJCQkJCQl2YXIgZWRpdG9yTW9kYWxPdmVybGF5ID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJdmFyIF92OSA9IHdvcmtzcGFjZUFjdGl2ZS5lbG1Gb3JtYXQ7CgkJCQkJCQlpZiAoX3Y5LiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIGVsbUZvcm1hdCA9IF92OS5hOwoJCQkJCQkJCXZhciBidXR0b25DYW5jZWxGb3JtYXQgPSAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRidXR0b25FbGVtZW50KAoJCQkJCQkJCQl7CgkJCQkJCQkJCQlsYWJlbDogJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCgnQ2FuY2VsIGZvcm1hdHRpbmcnKSwKCQkJCQkJCQkJCW9uUHJlc3M6ICRlbG0kY29yZSRNYXliZSRKdXN0KCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dENhbmNlbEZvcm1hdHRpbmcpCgkJCQkJCQkJCX0pOwoJCQkJCQkJCXZhciBjb250aW51ZVdpdGhIZWFkaW5nQW5kQ29udGVudCA9IGZ1bmN0aW9uIChjb25maWcpIHsKCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY29sdW1uLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc3BhY2luZygkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUpLAoJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpCgkJCQkJCQkJCQkJXSksCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwsCgkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGhlYWRpbmdBdHRyaWJ1dGVzKDMpLAoJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KGNvbmZpZy5oZWFkaW5nVGV4dCkpLAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwsCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSksCgkJCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2Nyb2xsYmFyWSwKCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRoZWlnaHQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCkKCQkJCQkJCQkJCQkJCV0pLAoJCQkJCQkJCQkJCQljb25maWcubWFpbkNvbnRlbnQpLAoJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwsCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVskbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRhbGlnbkJvdHRvbSwgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkYWxpZ25MZWZ0XSksCgkJCQkJCQkJCQkJCWJ1dHRvbkNhbmNlbEZvcm1hdCkKCQkJCQkJCQkJCQldKSk7CgkJCQkJCQkJfTsKCQkJCQkJCQl2YXIgY29udGludWVXaXRoRXJyb3JUZXh0ID0gZnVuY3Rpb24gKGVycm9yVGV4dCkgewoJCQkJCQkJCQlyZXR1cm4gY29udGludWVXaXRoSGVhZGluZ0FuZENvbnRlbnQoCgkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJaGVhZGluZ1RleHQ6ICdGb3JtYXR0aW5nIGZhaWxlZCcsCgkJCQkJCQkJCQkJbWFpbkNvbnRlbnQ6IEEyKAoJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjb2x1bW4sCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSksCgkJCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpCgkJCQkJCQkJCQkJCQldKSwKCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRpYWxvZ0Vycm9yRWxlbWVudEZyb21EZXNjcmlwdGlvbihlcnJvclRleHQpLAoJCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdyYXBwZWRSb3csCgkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSkKCQkJCQkJCQkJCQkJCQkJXSksCgkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdUbyBzZWUgc3ludGF4IGVycm9ycyBpbiB0aGUgY29kZSBlZGl0b3IsIHVzZSBcJ0NvbXBpbGVcJycpLAoJCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kYnV0dG9uQ29tcGlsZQoJCQkJCQkJCQkJCQkJCQldKSkKCQkJCQkJCQkJCQkJCV0pKQoJCQkJCQkJCQkJfSk7CgkJCQkJCQkJfTsKCQkJCQkJCQlpZiAoZWxtRm9ybWF0LiQgPT09ICdFbG1Gb3JtYXRJblByb2dyZXNzJykgewoJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCQljb250aW51ZVdpdGhIZWFkaW5nQW5kQ29udGVudCgKCQkJCQkJCQkJCQl7aGVhZGluZ1RleHQ6ICdGb3JtYXR0aW5nIC4uLicsIG1haW5Db250ZW50OiAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRub25lfSkpOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBmb3JtYXRSZXN1bHQgPSBlbG1Gb3JtYXQuYjsKCQkJCQkJCQkJaWYgKGZvcm1hdFJlc3VsdC4kID09PSAnRXJyJykgewoJCQkJCQkJCQkJdmFyIGh0dHBFcnJvciA9IGZvcm1hdFJlc3VsdC5hOwoJCQkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCQkJCWNvbnRpbnVlV2l0aEVycm9yVGV4dCgKCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQkJCQkJCQknXG4nLAoJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCQkJJ0hUVFAgRXJyb3I6JywKCQkJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVzY3JpYmVIdHRwRXJyb3IoaHR0cEVycm9yKQoJCQkJCQkJCQkJCQkJCV0pKSkpOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJaWYgKGZvcm1hdFJlc3VsdC5hLiQgPT09ICdFcnInKSB7CgkJCQkJCQkJCQkJdmFyIGVycm9yUmVzcG9uc2UgPSBmb3JtYXRSZXN1bHQuYS5hOwoJCQkJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQkJCQkJY29udGludWVXaXRoRXJyb3JUZXh0KAoJCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJCQkJCQkJCSdcbicsCgkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQlbJ2VsbS1mb3JtYXQgcmVwb3J0ZWQgYW4gZXJyb3I6JywgZXJyb3JSZXNwb25zZS5wcm9jZXNzT3V0cHV0LnN0YW5kYXJkRXJyb3IsIGVycm9yUmVzcG9uc2UucHJvY2Vzc091dHB1dC5zdGFuZGFyZE91dHB1dF0pKSkpOwoJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0oKTsKCQkJCQkJdmFyIGVkaXRvclBhbmVDb250ZW50ID0gQTIoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJCQkJCV9VdGlsc19hcCgKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGVsbSRjb3JlJE1heWJlJHdpdGhEZWZhdWx0LAoJCQkJCQkJCQlfTGlzdF9OaWwsCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkY29tcG9zZVIsCgkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwoCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSksCgkJCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpCgkJCQkJCQkJCQkJCQldKSksCgkJCQkJCQkJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRjb21wb3NlUiwgJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaW5Gcm9udCwgJGVsbSRjb3JlJExpc3Qkc2luZ2xldG9uKSksCgkJCQkJCQkJCQllZGl0b3JNb2RhbE92ZXJsYXkpKSwKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpCgkJCQkJCQkJCV0pKSwKCQkJCQkJCUEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWwoJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdHJhbnNwYXJlbnQoCgkJCQkJCQkJCQkhX1V0aWxzX2VxKGVkaXRvck1vZGFsT3ZlcmxheSwgJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpKSwKCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpCgkJCQkJCQkJCV0pLAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJG1vbmFjb0VkaXRvckVsZW1lbnQoc3RhdGUpKSk7CgkJCQkJCXZhciBjbG9zZUVkaXRvckVsZW1lbnQgPSBBMigKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JElucHV0JGJ1dHRvbiwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JG1vdXNlT3ZlcigKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEJhY2tncm91bmQkY29sb3IoCgkJCQkJCQkJCQkJQTQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiYSwgMSwgMSwgMSwgMC4yKSkKCQkJCQkJCQkJCV0pKSwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFkZGluZyg0KSwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc2NhbGUoMC44KSwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY2VudGVyWSwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbEF0dHJpYnV0ZSgKCQkJCQkJCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyR0aXRsZSgnQ2xvc2UnKSkKCQkJCQkJCQldKSwKCQkJCQkJCXsKCQkJCQkJCQlsYWJlbDogaGVhZGVySWNvbkVsZW1lbnRGcm9tVHlwZUFuZENvbG9yKAoJCQkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkQ2xvc2VFZGl0b3JJY29uLCAnd2hpdGUnKSkpLAoJCQkJCQkJCW9uUHJlc3M6ICRlbG0kY29yZSRNYXliZSRKdXN0KCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dENsb3NlRWRpdG9yKQoJCQkJCQkJfSk7CgkJCQkJCXZhciBfdjYgPSBlZGl0aW5nLmZpbGVMb2NhdGlvbjsKCQkJCQkJdmFyIGRpcmVjdG9yeVBhdGggPSBfdjYuYTsKCQkJCQkJdmFyIGZpbGVOYW1lID0gX3Y2LmI7CgkJCQkJCXZhciBmaWxlQ29udGVudFR5cGUgPSAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkRmlsZUVkaXRvciRmaWxlQ29udGVudFR5cGVGcm9tRmlsZU5hbWUoZmlsZU5hbWUpOwoJCQkJCQl2YXIgYnV0dG9uc0VsZW1lbnRzID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJaWYgKChmaWxlQ29udGVudFR5cGUuJCA9PT0gJ0p1c3QnKSAmJiAoZmlsZUNvbnRlbnRUeXBlLmEuJCA9PT0gJ0VsbUNvbnRlbnQnKSkgewoJCQkJCQkJCXZhciBfdjggPSBmaWxlQ29udGVudFR5cGUuYTsKCQkJCQkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRidXR0b25FbGVtZW50KAoJCQkJCQkJCQkJewoJCQkJCQkJCQkJCWxhYmVsOiBBMigKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcm93LAoJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc3BhY2luZygkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUpLAoJCQkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWxBdHRyaWJ1dGUoCgkJCQkJCQkJCQkJCQkJJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyR0aXRsZSgnRm9ybWF0JykpCgkJCQkJCQkJCQkJCQldKSwKCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJCQkJCQkJCQkJCV9MaXN0X05pbCwKCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sKAoJCQkJCQkJCQkJCQkJCQkkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSR2aWV3KCRsYXR0eXdhcmUkZWxtX2ZvbnRhd2Vzb21lJEZvbnRBd2Vzb21lJFNvbGlkJGluZGVudCkpKSwKCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KCdGb3JtYXQnKQoJCQkJCQkJCQkJCQkJXSkpLAoJCQkJCQkJCQkJCW9uUHJlc3M6ICRlbG0kY29yZSRNYXliZSRKdXN0KCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJFVzZXJJbnB1dEZvcm1hdCkKCQkJCQkJCQkJCX0pLAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kYnV0dG9uQ29tcGlsZQoJCQkJCQkJCQldKTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCQkJCX0KCQkJCQkJfSgpOwoJCQkJCQl2YXIgZmlsZVBhdGhFbGVtZW50ID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJdmFyIGZpbGVJY29uRWxlbWVudCA9IGhlYWRlckljb25FbGVtZW50RnJvbVR5cGVBbmRDb2xvcigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkVmlzdWFscyRpY29uRnJvbUZpbGVOYW1lKGZpbGVOYW1lKSk7CgkJCQkJCQl2YXIgZGlyZWN0b3J5U2VwYXJhdG9ySWNvbkVsZW1lbnQgPSBoZWFkZXJJY29uRWxlbWVudEZyb21UeXBlQW5kQ29sb3IoCgkJCQkJCQkJJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCV9VdGlsc19UdXBsZTIoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkRGlyZWN0b3J5Q29sbGFwc2VkSWNvbiwgJ3doaXRlJykpKTsKCQkJCQkJCXZhciBlbGVtZW50RnJvbVBhdGhTZWdtZW50VGV4dCA9IEYyKAoJCQkJCQkJCWZ1bmN0aW9uIChhcHBlbmREaXJlY3RvcnlTZXBhcmF0b3IsIHNlZ21lbnRUZXh0KSB7CgkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJvdywKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSAvIDIpIHwgMCksCgkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGFscGhhKDAuODMpCgkJCQkJCQkJCQkJXSksCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR0ZXh0KHNlZ21lbnRUZXh0KSwKCQkJCQkJCQkJCQkJYXBwZW5kRGlyZWN0b3J5U2VwYXJhdG9yID8gZGlyZWN0b3J5U2VwYXJhdG9ySWNvbkVsZW1lbnQgOiAkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRub25lCgkJCQkJCQkJCQkJXSkpOwoJCQkJCQkJCX0pOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJvdywKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSAvIDIpIHwgMCkKCQkJCQkJCQkJXSksCgkJCQkJCQkJX1V0aWxzX2FwKAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCQkJCWVsZW1lbnRGcm9tUGF0aFNlZ21lbnRUZXh0KHRydWUpLAoJCQkJCQkJCQkJZGlyZWN0b3J5UGF0aCksCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyb3csCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUgLyAyKSB8IDApCgkJCQkJCQkJCQkJCV0pLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJZmlsZUljb25FbGVtZW50LAoJCQkJCQkJCQkJCQkJQTIoZWxlbWVudEZyb21QYXRoU2VnbWVudFRleHQsIGZhbHNlLCBmaWxlTmFtZSkKCQkJCQkJCQkJCQkJXSkpCgkJCQkJCQkJCQldKSkpOwoJCQkJCQl9KCk7CgkJCQkJCXZhciBoZWFkZXJFbGVtZW50ID0gQTIoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3cmFwcGVkUm93LAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkc3BhY2luZygkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUpLAoJCQkJCQkJCQlBMigkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nWFksICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSwgMCksCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpCgkJCQkJCQkJXSksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQlBMigKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcm93LAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKSwKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRhbGlnbkxlZnQsCgkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbEF0dHJpYnV0ZSgKCQkJCQkJCQkJCQlBMigkZWxtJGh0bWwkSHRtbCRBdHRyaWJ1dGVzJHN0eWxlLCAndXNlci1zZWxlY3QnLCAnbm9uZScpKQoJCQkJCQkJCQkJXSksCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVtmaWxlUGF0aEVsZW1lbnQsIGNsb3NlRWRpdG9yRWxlbWVudF0pKSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJvdywKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKSwKCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKQoJCQkJCQkJCQkJXSksCgkJCQkJCQkJCWJ1dHRvbnNFbGVtZW50cykKCQkJCQkJCQldKSk7CgkJCQkJCXJldHVybiB7ZWRpdG9yUGFuZUNvbnRlbnQ6IGVkaXRvclBhbmVDb250ZW50LCBlZGl0b3JQYW5lSGVhZGVyOiBoZWFkZXJFbGVtZW50fTsKCQkJCQl9CgkJCQl9KCk7CgkJCQl2YXIgd29ya3NwYWNlUGFuZUxheW91dCA9IGZ1bmN0aW9uIChwYW5lUHJvcGVydGllcykgewoJCQkJCXZhciB3aWR0aEZpbGxQb3J0aW9uID0gX1V0aWxzX2VxKAoJCQkJCQl3b3Jrc3BhY2VBY3RpdmUudmlld0VubGFyZ2VkUGFuZSwKCQkJCQkJJGVsbSRjb3JlJE1heWJlJEp1c3QocGFuZVByb3BlcnRpZXMucGFuZSkpID8gNDAgOiA0OwoJCQkJCXJldHVybiBBMigKCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY29sdW1uLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JG1pbmltdW0sCgkJCQkJCQkJCTgwLAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsUG9ydGlvbih3aWR0aEZpbGxQb3J0aW9uKSkpLAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKQoJCQkJCQkJXSksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigKCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyb3csCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSksCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nKCgkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUgLyAyKSB8IDApLAoJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCkKCQkJCQkJCQkJXSksCgkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQlbCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkY2xpcCwKCQkJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbEF0dHJpYnV0ZSgKCQkJCQkJCQkJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwgJ2ZsZXgtc2hyaW5rJywgJzEnKSkKCQkJCQkJCQkJCQldKSwKCQkJCQkJCQkJCXBhbmVQcm9wZXJ0aWVzLmhlYWRlckVsZW1lbnQpLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkYWxpZ25Ub3AsICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGFsaWduUmlnaHRdKSwKCQkJCQkJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHRvZ2dsZUVubGFyZ2VkUGFuZUJ1dHRvbiwgd29ya3NwYWNlQWN0aXZlLCBwYW5lUHJvcGVydGllcy5wYW5lKSkKCQkJCQkJCQkJXSkpLAoJCQkJCQkJCXBhbmVQcm9wZXJ0aWVzLm1haW5Db250ZW50CgkJCQkJCQldKSk7CgkJCQl9OwoJCQkJdmFyIG91dHB1dFBhbmVFbGVtZW50cyA9ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHZpZXdPdXRwdXRQYW5lQ29udGVudCh3b3Jrc3BhY2VBY3RpdmUpOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGNvbHVtbiwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpCgkJCQkJCV0pLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJQTIoCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRtYXAsCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRXb3Jrc3BhY2VFdmVudCwKCQkJCQkJCUEyKAoJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJvdywKCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCVsKCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpCgkJCQkJCQkJCV0pLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWwoJCQkJCQkJCQkJd29ya3NwYWNlUGFuZUxheW91dCgKCQkJCQkJCQkJCXtoZWFkZXJFbGVtZW50OiB3b3Jrc3BhY2VWaWV3LmVkaXRvclBhbmVIZWFkZXIsIG1haW5Db250ZW50OiB3b3Jrc3BhY2VWaWV3LmVkaXRvclBhbmVDb250ZW50LCBwYW5lOiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRFZGl0b3JQYW5lfSksCgkJCQkJCQkJCQl3b3Jrc3BhY2VQYW5lTGF5b3V0KAoJCQkJCQkJCQkJewoJCQkJCQkJCQkJCWhlYWRlckVsZW1lbnQ6IG91dHB1dFBhbmVFbGVtZW50cy5oZWFkZXIsCgkJCQkJCQkJCQkJbWFpbkNvbnRlbnQ6IEEyKAoJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjbGlwLAoJCQkJCQkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWxBdHRyaWJ1dGUoCgkJCQkJCQkJCQkJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwgJ2ZsZXgtc2hyaW5rJywgJzEnKSkKCQkJCQkJCQkJCQkJCV0pLAoJCQkJCQkJCQkJCQlvdXRwdXRQYW5lRWxlbWVudHMubWFpbkNvbnRlbnQpLAoJCQkJCQkJCQkJCXBhbmU6ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJE91dHB1dFBhbmUKCQkJCQkJCQkJCX0pCgkJCQkJCQkJCV0pKSkKCQkJCQkJXSkpOwoJCQlkZWZhdWx0OgoJCQkJdmFyIHdvcmtzcGFjZVN0YXRlRXJyb3IgPSBfdjAuYTsKCQkJCXJldHVybiBBMigKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjb2x1bW4sCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKQoJCQkJCQldKSwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCUEyKAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZWwsCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRwYWRkaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSksCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRoZWlnaHQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCksCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNjcm9sbGJhclkKCQkJCQkJCQldKSwKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRpYWxvZ0Vycm9yRWxlbWVudEZyb21EZXNjcmlwdGlvbigKCQkJCQkJCQknRmFpbGVkIHRvIGxvYWQgd29ya3NwYWNlIHN0YXRlOiAnICsgQTIoJGVsbSRjb3JlJFN0cmluZyRsZWZ0LCAxMDAwLCB3b3Jrc3BhY2VTdGF0ZUVycm9yKSkpCgkJCQkJCV0pKTsKCQl9Cgl9KCk7Cgl2YXIgbG9nb0VsZW1lbnQgPSBBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyb3csCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSksCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRodG1sQXR0cmlidXRlKAoJCQkJQTIoJGVsbSRodG1sJEh0bWwkQXR0cmlidXRlcyRzdHlsZSwgJ2N1cnNvcicsICdkZWZhdWx0JykpLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbEF0dHJpYnV0ZSgKCQkJCUEyKCRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkc3R5bGUsICd1c2VyLXNlbGVjdCcsICdub25lJykpCgkJCV0pLAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJCV9MaXN0X05pbCwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWwoCgkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJFZpc3VhbHMkZWxtRWRpdG9ySWNvblN2ZygnMS40ZW0nKSkpLAoJCQkJQTIoCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkRm9udCRzZW1pQm9sZF0pLAoJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkdGV4dCgnRWxtIEVkaXRvcicpKQoJCQldKSk7Cgl2YXIgdGl0bGViYXIgPSBBMigKCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyb3csCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRzcGFjaW5nKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSksCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGhlaWdodCgKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHB4KDM0KSksCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCYWNrZ3JvdW5kJGNvbG9yKAoJCQkJQTMoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiLCAwLjA5LCAwLjA5LCAwLjA5KSksCgkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRGb250JGNvbG9yKAoJCQkJQTMoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcmdiLCAwLjg0LCAwLjg0LCAwLjg0KSkKCQkJXSksCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJQTIoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcGFkZGluZ1hZLCAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRkZWZhdWx0Rm9udFNpemUsIDApCgkJCQkJXSksCgkJCQlsb2dvRWxlbWVudCksCgkJCQlBMigKCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJvdywKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGh0bWxBdHRyaWJ1dGUoCgkJCQkJCSRlbG0kaHRtbCRIdG1sJEF0dHJpYnV0ZXMkaWQoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdGl0bGVCYXJNZW51YmFyRWxlbWVudElkKSksCgkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHNwYWNpbmcoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kZGVmYXVsdEZvbnRTaXplKQoJCQkJCV0pLAoJCQkJdGl0bGViYXJFbnRyaWVzKQoJCQldKSk7Cgl2YXIgYm9keSA9IEEyKAoJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGxheW91dCwKCQlfVXRpbHNfYXAoCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRGb250JGZhbWlseSgKCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JEZvbnQkdHlwZWZhY2UsICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHJvb3RGb250RmFtaWx5KSksCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkRm9udCRzaXplKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGRlZmF1bHRGb250U2l6ZSksCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkRm9udCRjb2xvcigKCQkJCQlBMygkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyZ2IsIDAuOTUsIDAuOTUsIDAuOTUpKSwKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCYWNrZ3JvdW5kJGNvbG9yKCRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJGJhY2tncm91bmRDb2xvciksCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCkKCQkJCV0pLAoJCQlwb3B1cFdpbmRvd0F0dHJpYnV0ZXMpLAoJCUEyKAoJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRjb2x1bW4sCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCR3aWR0aCgkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRmaWxsKSwKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRoZWlnaHQoJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkZmlsbCkKCQkJCV0pLAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbCgkbGF0dHl3YXJlJGVsbV9mb250YXdlc29tZSRGb250QXdlc29tZSRTdHlsZXMkY3NzKSwKCQkJCQl0aXRsZWJhciwKCQkJCQlBMigKCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRlbCwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkcHgoMSkpLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkQmFja2dyb3VuZCRjb2xvcigKCQkJCQkJCUEzKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJnYiwgMC4xNywgMC4xNywgMC4xNykpCgkJCQkJCV0pLAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JG5vbmUpLAoJCQkJCUEyKAoJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHJvdywKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHdpZHRoKCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaHRtbEF0dHJpYnV0ZSgKCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kaHRtbCRIdG1sJEV2ZW50cyRvbiwKCQkJCQkJCQknZm9jdXNpbicsCgkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXNlcklucHV0Rm9jdXNPdXRzaWRlVGl0bGViYXJNZW51KSkpCgkJCQkJCV0pLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kYWN0aXZpdHlCYXIsCgkJCQkJCQlBMigKCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGVsLAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkd2lkdGgoCgkJCQkJCQkJCSRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JHB4KDEpKSwKCQkJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkaGVpZ2h0KCRtZGdyaWZmaXRoJGVsbV91aSRFbGVtZW50JGZpbGwpLAoJCQkJCQkJCQkkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRCYWNrZ3JvdW5kJGNvbG9yKAoJCQkJCQkJCQlBMygkbWRncmlmZml0aCRlbG1fdWkkRWxlbWVudCRyZ2IsIDAuMTcsIDAuMTcsIDAuMTcpKQoJCQkJCQkJCV0pLAoJCQkJCQkJJG1kZ3JpZmZpdGgkZWxtX3VpJEVsZW1lbnQkbm9uZSksCgkJCQkJCQltYWluQ29udGVudAoJCQkJCQldKSkKCQkJCV0pKSk7CglyZXR1cm4gewoJCWJvZHk6IF9MaXN0X2Zyb21BcnJheSgKCQkJW2JvZHldKSwKCQl0aXRsZTogJ0VsbSBFZGl0b3InCgl9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbWFpbiA9ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRCcm93c2VyQXBwbGljYXRpb25Jbml0V2l0aFRpbWUkYXBwbGljYXRpb24oCgl7CgkJaW5pdDogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kaW5pdCwKCQlvblVybENoYW5nZTogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXJsQ2hhbmdlLAoJCW9uVXJsUmVxdWVzdDogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kVXJsUmVxdWVzdCwKCQlzdWJzY3JpcHRpb25zOiAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTWFpbiRzdWJzY3JpcHRpb25zLAoJCXVwZGF0ZTogJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kdXBkYXRlLAoJCXZpZXc6ICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNYWluJHZpZXcsCgkJdmlld1doaWxlV2FpdGluZ0ZvclRpbWU6IHsKCQkJYm9keTogX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCSRlbG0kaHRtbCRIdG1sJHRleHQoJ1dhaXRpbmcgZm9yIGZpcnN0IG1lYXN1cmVtZW50IG9mIHRpbWUuLi4nKQoJCQkJXSksCgkJCXRpdGxlOiAnRWxtIEVkaXRvciAtIEluaXRpYWxpemluZycKCQl9Cgl9KTsKX1BsYXRmb3JtX2V4cG9ydCh7J0Zyb250ZW5kJzp7J01haW4nOnsnaW5pdCc6JGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1haW4kbWFpbigKCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKF9VdGlsc19UdXBsZTApKSgwKX19fSk7fSh0aGlzKSk7" }

elm_make_output_src_LanguageServiceWorker_elm_javascript =
    { base64 = "KGZ1bmN0aW9uKHNjb3BlKXsKJ3VzZSBzdHJpY3QnOwoKZnVuY3Rpb24gRihhcml0eSwgZnVuLCB3cmFwcGVyKSB7CiAgd3JhcHBlci5hID0gYXJpdHk7CiAgd3JhcHBlci5mID0gZnVuOwogIHJldHVybiB3cmFwcGVyOwp9CgpmdW5jdGlvbiBGMihmdW4pIHsKICByZXR1cm4gRigyLCBmdW4sIGZ1bmN0aW9uKGEpIHsgcmV0dXJuIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGZ1bihhLGIpOyB9OyB9KQp9CmZ1bmN0aW9uIEYzKGZ1bikgewogIHJldHVybiBGKDMsIGZ1biwgZnVuY3Rpb24oYSkgewogICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGZ1bmN0aW9uKGMpIHsgcmV0dXJuIGZ1bihhLCBiLCBjKTsgfTsgfTsKICB9KTsKfQpmdW5jdGlvbiBGNChmdW4pIHsKICByZXR1cm4gRig0LCBmdW4sIGZ1bmN0aW9uKGEpIHsgcmV0dXJuIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGZ1bmN0aW9uKGMpIHsKICAgIHJldHVybiBmdW5jdGlvbihkKSB7IHJldHVybiBmdW4oYSwgYiwgYywgZCk7IH07IH07IH07CiAgfSk7Cn0KZnVuY3Rpb24gRjUoZnVuKSB7CiAgcmV0dXJuIEYoNSwgZnVuLCBmdW5jdGlvbihhKSB7IHJldHVybiBmdW5jdGlvbihiKSB7IHJldHVybiBmdW5jdGlvbihjKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oZCkgeyByZXR1cm4gZnVuY3Rpb24oZSkgeyByZXR1cm4gZnVuKGEsIGIsIGMsIGQsIGUpOyB9OyB9OyB9OyB9OwogIH0pOwp9CmZ1bmN0aW9uIEY2KGZ1bikgewogIHJldHVybiBGKDYsIGZ1biwgZnVuY3Rpb24oYSkgeyByZXR1cm4gZnVuY3Rpb24oYikgeyByZXR1cm4gZnVuY3Rpb24oYykgewogICAgcmV0dXJuIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGZ1bmN0aW9uKGUpIHsgcmV0dXJuIGZ1bmN0aW9uKGYpIHsKICAgIHJldHVybiBmdW4oYSwgYiwgYywgZCwgZSwgZik7IH07IH07IH07IH07IH07CiAgfSk7Cn0KZnVuY3Rpb24gRjcoZnVuKSB7CiAgcmV0dXJuIEYoNywgZnVuLCBmdW5jdGlvbihhKSB7IHJldHVybiBmdW5jdGlvbihiKSB7IHJldHVybiBmdW5jdGlvbihjKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oZCkgeyByZXR1cm4gZnVuY3Rpb24oZSkgeyByZXR1cm4gZnVuY3Rpb24oZikgewogICAgcmV0dXJuIGZ1bmN0aW9uKGcpIHsgcmV0dXJuIGZ1bihhLCBiLCBjLCBkLCBlLCBmLCBnKTsgfTsgfTsgfTsgfTsgfTsgfTsKICB9KTsKfQpmdW5jdGlvbiBGOChmdW4pIHsKICByZXR1cm4gRig4LCBmdW4sIGZ1bmN0aW9uKGEpIHsgcmV0dXJuIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGZ1bmN0aW9uKGMpIHsKICAgIHJldHVybiBmdW5jdGlvbihkKSB7IHJldHVybiBmdW5jdGlvbihlKSB7IHJldHVybiBmdW5jdGlvbihmKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oZykgeyByZXR1cm4gZnVuY3Rpb24oaCkgewogICAgcmV0dXJuIGZ1bihhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKTsgfTsgfTsgfTsgfTsgfTsgfTsgfTsKICB9KTsKfQpmdW5jdGlvbiBGOShmdW4pIHsKICByZXR1cm4gRig5LCBmdW4sIGZ1bmN0aW9uKGEpIHsgcmV0dXJuIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGZ1bmN0aW9uKGMpIHsKICAgIHJldHVybiBmdW5jdGlvbihkKSB7IHJldHVybiBmdW5jdGlvbihlKSB7IHJldHVybiBmdW5jdGlvbihmKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oZykgeyByZXR1cm4gZnVuY3Rpb24oaCkgeyByZXR1cm4gZnVuY3Rpb24oaSkgewogICAgcmV0dXJuIGZ1bihhLCBiLCBjLCBkLCBlLCBmLCBnLCBoLCBpKTsgfTsgfTsgfTsgfTsgfTsgfTsgfTsgfTsKICB9KTsKfQoKZnVuY3Rpb24gQTIoZnVuLCBhLCBiKSB7CiAgcmV0dXJuIGZ1bi5hID09PSAyID8gZnVuLmYoYSwgYikgOiBmdW4oYSkoYik7Cn0KZnVuY3Rpb24gQTMoZnVuLCBhLCBiLCBjKSB7CiAgcmV0dXJuIGZ1bi5hID09PSAzID8gZnVuLmYoYSwgYiwgYykgOiBmdW4oYSkoYikoYyk7Cn0KZnVuY3Rpb24gQTQoZnVuLCBhLCBiLCBjLCBkKSB7CiAgcmV0dXJuIGZ1bi5hID09PSA0ID8gZnVuLmYoYSwgYiwgYywgZCkgOiBmdW4oYSkoYikoYykoZCk7Cn0KZnVuY3Rpb24gQTUoZnVuLCBhLCBiLCBjLCBkLCBlKSB7CiAgcmV0dXJuIGZ1bi5hID09PSA1ID8gZnVuLmYoYSwgYiwgYywgZCwgZSkgOiBmdW4oYSkoYikoYykoZCkoZSk7Cn0KZnVuY3Rpb24gQTYoZnVuLCBhLCBiLCBjLCBkLCBlLCBmKSB7CiAgcmV0dXJuIGZ1bi5hID09PSA2ID8gZnVuLmYoYSwgYiwgYywgZCwgZSwgZikgOiBmdW4oYSkoYikoYykoZCkoZSkoZik7Cn0KZnVuY3Rpb24gQTcoZnVuLCBhLCBiLCBjLCBkLCBlLCBmLCBnKSB7CiAgcmV0dXJuIGZ1bi5hID09PSA3ID8gZnVuLmYoYSwgYiwgYywgZCwgZSwgZiwgZykgOiBmdW4oYSkoYikoYykoZCkoZSkoZikoZyk7Cn0KZnVuY3Rpb24gQTgoZnVuLCBhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7CiAgcmV0dXJuIGZ1bi5hID09PSA4ID8gZnVuLmYoYSwgYiwgYywgZCwgZSwgZiwgZywgaCkgOiBmdW4oYSkoYikoYykoZCkoZSkoZikoZykoaCk7Cn0KZnVuY3Rpb24gQTkoZnVuLCBhLCBiLCBjLCBkLCBlLCBmLCBnLCBoLCBpKSB7CiAgcmV0dXJuIGZ1bi5hID09PSA5ID8gZnVuLmYoYSwgYiwgYywgZCwgZSwgZiwgZywgaCwgaSkgOiBmdW4oYSkoYikoYykoZCkoZSkoZikoZykoaCkoaSk7Cn0KCmNvbnNvbGUud2FybignQ29tcGlsZWQgaW4gREVWIG1vZGUuIEZvbGxvdyB0aGUgYWR2aWNlIGF0IGh0dHBzOi8vZWxtLWxhbmcub3JnLzAuMTkuMS9vcHRpbWl6ZSBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlIGFuZCBzbWFsbGVyIGFzc2V0cy4nKTsKCgp2YXIgX0xpc3RfTmlsX1VOVVNFRCA9IHsgJDogMCB9Owp2YXIgX0xpc3RfTmlsID0geyAkOiAnW10nIH07CgpmdW5jdGlvbiBfTGlzdF9Db25zX1VOVVNFRChoZCwgdGwpIHsgcmV0dXJuIHsgJDogMSwgYTogaGQsIGI6IHRsIH07IH0KZnVuY3Rpb24gX0xpc3RfQ29ucyhoZCwgdGwpIHsgcmV0dXJuIHsgJDogJzo6JywgYTogaGQsIGI6IHRsIH07IH0KCgp2YXIgX0xpc3RfY29ucyA9IEYyKF9MaXN0X0NvbnMpOwoKZnVuY3Rpb24gX0xpc3RfZnJvbUFycmF5KGFycikKewoJdmFyIG91dCA9IF9MaXN0X05pbDsKCWZvciAodmFyIGkgPSBhcnIubGVuZ3RoOyBpLS07ICkKCXsKCQlvdXQgPSBfTGlzdF9Db25zKGFycltpXSwgb3V0KTsKCX0KCXJldHVybiBvdXQ7Cn0KCmZ1bmN0aW9uIF9MaXN0X3RvQXJyYXkoeHMpCnsKCWZvciAodmFyIG91dCA9IFtdOyB4cy5iOyB4cyA9IHhzLmIpIC8vIFdISUxFX0NPTlMKCXsKCQlvdXQucHVzaCh4cy5hKTsKCX0KCXJldHVybiBvdXQ7Cn0KCnZhciBfTGlzdF9tYXAyID0gRjMoZnVuY3Rpb24oZiwgeHMsIHlzKQp7Cglmb3IgKHZhciBhcnIgPSBbXTsgeHMuYiAmJiB5cy5iOyB4cyA9IHhzLmIsIHlzID0geXMuYikgLy8gV0hJTEVfQ09OU0VTCgl7CgkJYXJyLnB1c2goQTIoZiwgeHMuYSwgeXMuYSkpOwoJfQoJcmV0dXJuIF9MaXN0X2Zyb21BcnJheShhcnIpOwp9KTsKCnZhciBfTGlzdF9tYXAzID0gRjQoZnVuY3Rpb24oZiwgeHMsIHlzLCB6cykKewoJZm9yICh2YXIgYXJyID0gW107IHhzLmIgJiYgeXMuYiAmJiB6cy5iOyB4cyA9IHhzLmIsIHlzID0geXMuYiwgenMgPSB6cy5iKSAvLyBXSElMRV9DT05TRVMKCXsKCQlhcnIucHVzaChBMyhmLCB4cy5hLCB5cy5hLCB6cy5hKSk7Cgl9CglyZXR1cm4gX0xpc3RfZnJvbUFycmF5KGFycik7Cn0pOwoKdmFyIF9MaXN0X21hcDQgPSBGNShmdW5jdGlvbihmLCB3cywgeHMsIHlzLCB6cykKewoJZm9yICh2YXIgYXJyID0gW107IHdzLmIgJiYgeHMuYiAmJiB5cy5iICYmIHpzLmI7IHdzID0gd3MuYiwgeHMgPSB4cy5iLCB5cyA9IHlzLmIsIHpzID0genMuYikgLy8gV0hJTEVfQ09OU0VTCgl7CgkJYXJyLnB1c2goQTQoZiwgd3MuYSwgeHMuYSwgeXMuYSwgenMuYSkpOwoJfQoJcmV0dXJuIF9MaXN0X2Zyb21BcnJheShhcnIpOwp9KTsKCnZhciBfTGlzdF9tYXA1ID0gRjYoZnVuY3Rpb24oZiwgdnMsIHdzLCB4cywgeXMsIHpzKQp7Cglmb3IgKHZhciBhcnIgPSBbXTsgdnMuYiAmJiB3cy5iICYmIHhzLmIgJiYgeXMuYiAmJiB6cy5iOyB2cyA9IHZzLmIsIHdzID0gd3MuYiwgeHMgPSB4cy5iLCB5cyA9IHlzLmIsIHpzID0genMuYikgLy8gV0hJTEVfQ09OU0VTCgl7CgkJYXJyLnB1c2goQTUoZiwgdnMuYSwgd3MuYSwgeHMuYSwgeXMuYSwgenMuYSkpOwoJfQoJcmV0dXJuIF9MaXN0X2Zyb21BcnJheShhcnIpOwp9KTsKCnZhciBfTGlzdF9zb3J0QnkgPSBGMihmdW5jdGlvbihmLCB4cykKewoJcmV0dXJuIF9MaXN0X2Zyb21BcnJheShfTGlzdF90b0FycmF5KHhzKS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsKCQlyZXR1cm4gX1V0aWxzX2NtcChmKGEpLCBmKGIpKTsKCX0pKTsKfSk7Cgp2YXIgX0xpc3Rfc29ydFdpdGggPSBGMihmdW5jdGlvbihmLCB4cykKewoJcmV0dXJuIF9MaXN0X2Zyb21BcnJheShfTGlzdF90b0FycmF5KHhzKS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsKCQl2YXIgb3JkID0gQTIoZiwgYSwgYik7CgkJcmV0dXJuIG9yZCA9PT0gJGVsbSRjb3JlJEJhc2ljcyRFUSA/IDAgOiBvcmQgPT09ICRlbG0kY29yZSRCYXNpY3MkTFQgPyAtMSA6IDE7Cgl9KSk7Cn0pOwoKCgp2YXIgX0pzQXJyYXlfZW1wdHkgPSBbXTsKCmZ1bmN0aW9uIF9Kc0FycmF5X3NpbmdsZXRvbih2YWx1ZSkKewogICAgcmV0dXJuIFt2YWx1ZV07Cn0KCmZ1bmN0aW9uIF9Kc0FycmF5X2xlbmd0aChhcnJheSkKewogICAgcmV0dXJuIGFycmF5Lmxlbmd0aDsKfQoKdmFyIF9Kc0FycmF5X2luaXRpYWxpemUgPSBGMyhmdW5jdGlvbihzaXplLCBvZmZzZXQsIGZ1bmMpCnsKICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkoc2l6ZSk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspCiAgICB7CiAgICAgICAgcmVzdWx0W2ldID0gZnVuYyhvZmZzZXQgKyBpKTsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0Owp9KTsKCnZhciBfSnNBcnJheV9pbml0aWFsaXplRnJvbUxpc3QgPSBGMihmdW5jdGlvbiAobWF4LCBscykKewogICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShtYXgpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4ICYmIGxzLmI7IGkrKykKICAgIHsKICAgICAgICByZXN1bHRbaV0gPSBscy5hOwogICAgICAgIGxzID0gbHMuYjsKICAgIH0KCiAgICByZXN1bHQubGVuZ3RoID0gaTsKICAgIHJldHVybiBfVXRpbHNfVHVwbGUyKHJlc3VsdCwgbHMpOwp9KTsKCnZhciBfSnNBcnJheV91bnNhZmVHZXQgPSBGMihmdW5jdGlvbihpbmRleCwgYXJyYXkpCnsKICAgIHJldHVybiBhcnJheVtpbmRleF07Cn0pOwoKdmFyIF9Kc0FycmF5X3Vuc2FmZVNldCA9IEYzKGZ1bmN0aW9uKGluZGV4LCB2YWx1ZSwgYXJyYXkpCnsKICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7CiAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KGxlbmd0aCk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykKICAgIHsKICAgICAgICByZXN1bHRbaV0gPSBhcnJheVtpXTsKICAgIH0KCiAgICByZXN1bHRbaW5kZXhdID0gdmFsdWU7CiAgICByZXR1cm4gcmVzdWx0Owp9KTsKCnZhciBfSnNBcnJheV9wdXNoID0gRjIoZnVuY3Rpb24odmFsdWUsIGFycmF5KQp7CiAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwogICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShsZW5ndGggKyAxKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKQogICAgewogICAgICAgIHJlc3VsdFtpXSA9IGFycmF5W2ldOwogICAgfQoKICAgIHJlc3VsdFtsZW5ndGhdID0gdmFsdWU7CiAgICByZXR1cm4gcmVzdWx0Owp9KTsKCnZhciBfSnNBcnJheV9mb2xkbCA9IEYzKGZ1bmN0aW9uKGZ1bmMsIGFjYywgYXJyYXkpCnsKICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykKICAgIHsKICAgICAgICBhY2MgPSBBMihmdW5jLCBhcnJheVtpXSwgYWNjKTsKICAgIH0KCiAgICByZXR1cm4gYWNjOwp9KTsKCnZhciBfSnNBcnJheV9mb2xkciA9IEYzKGZ1bmN0aW9uKGZ1bmMsIGFjYywgYXJyYXkpCnsKICAgIGZvciAodmFyIGkgPSBhcnJheS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkKICAgIHsKICAgICAgICBhY2MgPSBBMihmdW5jLCBhcnJheVtpXSwgYWNjKTsKICAgIH0KCiAgICByZXR1cm4gYWNjOwp9KTsKCnZhciBfSnNBcnJheV9tYXAgPSBGMihmdW5jdGlvbihmdW5jLCBhcnJheSkKewogICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDsKICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkobGVuZ3RoKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKQogICAgewogICAgICAgIHJlc3VsdFtpXSA9IGZ1bmMoYXJyYXlbaV0pOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7Cn0pOwoKdmFyIF9Kc0FycmF5X2luZGV4ZWRNYXAgPSBGMyhmdW5jdGlvbihmdW5jLCBvZmZzZXQsIGFycmF5KQp7CiAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwogICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShsZW5ndGgpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspCiAgICB7CiAgICAgICAgcmVzdWx0W2ldID0gQTIoZnVuYywgb2Zmc2V0ICsgaSwgYXJyYXlbaV0pOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7Cn0pOwoKdmFyIF9Kc0FycmF5X3NsaWNlID0gRjMoZnVuY3Rpb24oZnJvbSwgdG8sIGFycmF5KQp7CiAgICByZXR1cm4gYXJyYXkuc2xpY2UoZnJvbSwgdG8pOwp9KTsKCnZhciBfSnNBcnJheV9hcHBlbmROID0gRjMoZnVuY3Rpb24obiwgZGVzdCwgc291cmNlKQp7CiAgICB2YXIgZGVzdExlbiA9IGRlc3QubGVuZ3RoOwogICAgdmFyIGl0ZW1zVG9Db3B5ID0gbiAtIGRlc3RMZW47CgogICAgaWYgKGl0ZW1zVG9Db3B5ID4gc291cmNlLmxlbmd0aCkKICAgIHsKICAgICAgICBpdGVtc1RvQ29weSA9IHNvdXJjZS5sZW5ndGg7CiAgICB9CgogICAgdmFyIHNpemUgPSBkZXN0TGVuICsgaXRlbXNUb0NvcHk7CiAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KHNpemUpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVzdExlbjsgaSsrKQogICAgewogICAgICAgIHJlc3VsdFtpXSA9IGRlc3RbaV07CiAgICB9CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtc1RvQ29weTsgaSsrKQogICAgewogICAgICAgIHJlc3VsdFtpICsgZGVzdExlbl0gPSBzb3VyY2VbaV07CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKfSk7CgoKCi8vIExPRwoKdmFyIF9EZWJ1Z19sb2dfVU5VU0VEID0gRjIoZnVuY3Rpb24odGFnLCB2YWx1ZSkKewoJcmV0dXJuIHZhbHVlOwp9KTsKCnZhciBfRGVidWdfbG9nID0gRjIoZnVuY3Rpb24odGFnLCB2YWx1ZSkKewoJY29uc29sZS5sb2codGFnICsgJzogJyArIF9EZWJ1Z190b1N0cmluZyh2YWx1ZSkpOwoJcmV0dXJuIHZhbHVlOwp9KTsKCgovLyBUT0RPUwoKZnVuY3Rpb24gX0RlYnVnX3RvZG8obW9kdWxlTmFtZSwgcmVnaW9uKQp7CglyZXR1cm4gZnVuY3Rpb24obWVzc2FnZSkgewoJCV9EZWJ1Z19jcmFzaCg4LCBtb2R1bGVOYW1lLCByZWdpb24sIG1lc3NhZ2UpOwoJfTsKfQoKZnVuY3Rpb24gX0RlYnVnX3RvZG9DYXNlKG1vZHVsZU5hbWUsIHJlZ2lvbiwgdmFsdWUpCnsKCXJldHVybiBmdW5jdGlvbihtZXNzYWdlKSB7CgkJX0RlYnVnX2NyYXNoKDksIG1vZHVsZU5hbWUsIHJlZ2lvbiwgdmFsdWUsIG1lc3NhZ2UpOwoJfTsKfQoKCi8vIFRPIFNUUklORwoKZnVuY3Rpb24gX0RlYnVnX3RvU3RyaW5nX1VOVVNFRCh2YWx1ZSkKewoJcmV0dXJuICc8aW50ZXJuYWxzPic7Cn0KCmZ1bmN0aW9uIF9EZWJ1Z190b1N0cmluZyh2YWx1ZSkKewoJcmV0dXJuIF9EZWJ1Z190b0Fuc2lTdHJpbmcoZmFsc2UsIHZhbHVlKTsKfQoKZnVuY3Rpb24gX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCB2YWx1ZSkKewoJaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykKCXsKCQlyZXR1cm4gX0RlYnVnX2ludGVybmFsQ29sb3IoYW5zaSwgJzxmdW5jdGlvbj4nKTsKCX0KCglpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpCgl7CgkJcmV0dXJuIF9EZWJ1Z19jdG9yQ29sb3IoYW5zaSwgdmFsdWUgPyAnVHJ1ZScgOiAnRmFsc2UnKTsKCX0KCglpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykKCXsKCQlyZXR1cm4gX0RlYnVnX251bWJlckNvbG9yKGFuc2ksIHZhbHVlICsgJycpOwoJfQoKCWlmICh2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZykKCXsKCQlyZXR1cm4gX0RlYnVnX2NoYXJDb2xvcihhbnNpLCAiJyIgKyBfRGVidWdfYWRkU2xhc2hlcyh2YWx1ZSwgdHJ1ZSkgKyAiJyIpOwoJfQoKCWlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKQoJewoJCXJldHVybiBfRGVidWdfc3RyaW5nQ29sb3IoYW5zaSwgJyInICsgX0RlYnVnX2FkZFNsYXNoZXModmFsdWUsIGZhbHNlKSArICciJyk7Cgl9CgoJaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgJyQnIGluIHZhbHVlKQoJewoJCXZhciB0YWcgPSB2YWx1ZS4kOwoKCQlpZiAodHlwZW9mIHRhZyA9PT0gJ251bWJlcicpCgkJewoJCQlyZXR1cm4gX0RlYnVnX2ludGVybmFsQ29sb3IoYW5zaSwgJzxpbnRlcm5hbHM+Jyk7CgkJfQoKCQlpZiAodGFnWzBdID09PSAnIycpCgkJewoJCQl2YXIgb3V0cHV0ID0gW107CgkJCWZvciAodmFyIGsgaW4gdmFsdWUpCgkJCXsKCQkJCWlmIChrID09PSAnJCcpIGNvbnRpbnVlOwoJCQkJb3V0cHV0LnB1c2goX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCB2YWx1ZVtrXSkpOwoJCQl9CgkJCXJldHVybiAnKCcgKyBvdXRwdXQuam9pbignLCcpICsgJyknOwoJCX0KCgkJaWYgKHRhZyA9PT0gJ1NldF9lbG1fYnVpbHRpbicpCgkJewoJCQlyZXR1cm4gX0RlYnVnX2N0b3JDb2xvcihhbnNpLCAnU2V0JykKCQkJCSsgX0RlYnVnX2ZhZGVDb2xvcihhbnNpLCAnLmZyb21MaXN0JykgKyAnICcKCQkJCSsgX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCAkZWxtJGNvcmUkU2V0JHRvTGlzdCh2YWx1ZSkpOwoJCX0KCgkJaWYgKHRhZyA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicgfHwgdGFnID09PSAnUkJFbXB0eV9lbG1fYnVpbHRpbicpCgkJewoJCQlyZXR1cm4gX0RlYnVnX2N0b3JDb2xvcihhbnNpLCAnRGljdCcpCgkJCQkrIF9EZWJ1Z19mYWRlQ29sb3IoYW5zaSwgJy5mcm9tTGlzdCcpICsgJyAnCgkJCQkrIF9EZWJ1Z190b0Fuc2lTdHJpbmcoYW5zaSwgJGVsbSRjb3JlJERpY3QkdG9MaXN0KHZhbHVlKSk7CgkJfQoKCQlpZiAodGFnID09PSAnQXJyYXlfZWxtX2J1aWx0aW4nKQoJCXsKCQkJcmV0dXJuIF9EZWJ1Z19jdG9yQ29sb3IoYW5zaSwgJ0FycmF5JykKCQkJCSsgX0RlYnVnX2ZhZGVDb2xvcihhbnNpLCAnLmZyb21MaXN0JykgKyAnICcKCQkJCSsgX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCAkZWxtJGNvcmUkQXJyYXkkdG9MaXN0KHZhbHVlKSk7CgkJfQoKCQlpZiAodGFnID09PSAnOjonIHx8IHRhZyA9PT0gJ1tdJykKCQl7CgkJCXZhciBvdXRwdXQgPSAnWyc7CgoJCQl2YWx1ZS5iICYmIChvdXRwdXQgKz0gX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCB2YWx1ZS5hKSwgdmFsdWUgPSB2YWx1ZS5iKQoKCQkJZm9yICg7IHZhbHVlLmI7IHZhbHVlID0gdmFsdWUuYikgLy8gV0hJTEVfQ09OUwoJCQl7CgkJCQlvdXRwdXQgKz0gJywnICsgX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCB2YWx1ZS5hKTsKCQkJfQoJCQlyZXR1cm4gb3V0cHV0ICsgJ10nOwoJCX0KCgkJdmFyIG91dHB1dCA9ICcnOwoJCWZvciAodmFyIGkgaW4gdmFsdWUpCgkJewoJCQlpZiAoaSA9PT0gJyQnKSBjb250aW51ZTsKCQkJdmFyIHN0ciA9IF9EZWJ1Z190b0Fuc2lTdHJpbmcoYW5zaSwgdmFsdWVbaV0pOwoJCQl2YXIgYzAgPSBzdHJbMF07CgkJCXZhciBwYXJlbmxlc3MgPSBjMCA9PT0gJ3snIHx8IGMwID09PSAnKCcgfHwgYzAgPT09ICdbJyB8fCBjMCA9PT0gJzwnIHx8IGMwID09PSAnIicgfHwgc3RyLmluZGV4T2YoJyAnKSA8IDA7CgkJCW91dHB1dCArPSAnICcgKyAocGFyZW5sZXNzID8gc3RyIDogJygnICsgc3RyICsgJyknKTsKCQl9CgkJcmV0dXJuIF9EZWJ1Z19jdG9yQ29sb3IoYW5zaSwgdGFnKSArIG91dHB1dDsKCX0KCglpZiAodHlwZW9mIERhdGFWaWV3ID09PSAnZnVuY3Rpb24nICYmIHZhbHVlIGluc3RhbmNlb2YgRGF0YVZpZXcpCgl7CgkJcmV0dXJuIF9EZWJ1Z19zdHJpbmdDb2xvcihhbnNpLCAnPCcgKyB2YWx1ZS5ieXRlTGVuZ3RoICsgJyBieXRlcz4nKTsKCX0KCglpZiAodHlwZW9mIEZpbGUgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlIGluc3RhbmNlb2YgRmlsZSkKCXsKCQlyZXR1cm4gX0RlYnVnX2ludGVybmFsQ29sb3IoYW5zaSwgJzwnICsgdmFsdWUubmFtZSArICc+Jyk7Cgl9CgoJaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpCgl7CgkJdmFyIG91dHB1dCA9IFtdOwoJCWZvciAodmFyIGtleSBpbiB2YWx1ZSkKCQl7CgkJCXZhciBmaWVsZCA9IGtleVswXSA9PT0gJ18nID8ga2V5LnNsaWNlKDEpIDoga2V5OwoJCQlvdXRwdXQucHVzaChfRGVidWdfZmFkZUNvbG9yKGFuc2ksIGZpZWxkKSArICcgPSAnICsgX0RlYnVnX3RvQW5zaVN0cmluZyhhbnNpLCB2YWx1ZVtrZXldKSk7CgkJfQoJCWlmIChvdXRwdXQubGVuZ3RoID09PSAwKQoJCXsKCQkJcmV0dXJuICd7fSc7CgkJfQoJCXJldHVybiAneyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnIH0nOwoJfQoKCXJldHVybiBfRGVidWdfaW50ZXJuYWxDb2xvcihhbnNpLCAnPGludGVybmFscz4nKTsKfQoKZnVuY3Rpb24gX0RlYnVnX2FkZFNsYXNoZXMoc3RyLCBpc0NoYXIpCnsKCXZhciBzID0gc3RyCgkJLnJlcGxhY2UoL1xcL2csICdcXFxcJykKCQkucmVwbGFjZSgvXG4vZywgJ1xcbicpCgkJLnJlcGxhY2UoL1x0L2csICdcXHQnKQoJCS5yZXBsYWNlKC9cci9nLCAnXFxyJykKCQkucmVwbGFjZSgvXHYvZywgJ1xcdicpCgkJLnJlcGxhY2UoL1wwL2csICdcXDAnKTsKCglpZiAoaXNDaGFyKQoJewoJCXJldHVybiBzLnJlcGxhY2UoL1wnL2csICdcXFwnJyk7Cgl9CgllbHNlCgl7CgkJcmV0dXJuIHMucmVwbGFjZSgvXCIvZywgJ1xcIicpOwoJfQp9CgpmdW5jdGlvbiBfRGVidWdfY3RvckNvbG9yKGFuc2ksIHN0cmluZykKewoJcmV0dXJuIGFuc2kgPyAnXHgxYls5Nm0nICsgc3RyaW5nICsgJ1x4MWJbMG0nIDogc3RyaW5nOwp9CgpmdW5jdGlvbiBfRGVidWdfbnVtYmVyQ29sb3IoYW5zaSwgc3RyaW5nKQp7CglyZXR1cm4gYW5zaSA/ICdceDFiWzk1bScgKyBzdHJpbmcgKyAnXHgxYlswbScgOiBzdHJpbmc7Cn0KCmZ1bmN0aW9uIF9EZWJ1Z19zdHJpbmdDb2xvcihhbnNpLCBzdHJpbmcpCnsKCXJldHVybiBhbnNpID8gJ1x4MWJbOTNtJyArIHN0cmluZyArICdceDFiWzBtJyA6IHN0cmluZzsKfQoKZnVuY3Rpb24gX0RlYnVnX2NoYXJDb2xvcihhbnNpLCBzdHJpbmcpCnsKCXJldHVybiBhbnNpID8gJ1x4MWJbOTJtJyArIHN0cmluZyArICdceDFiWzBtJyA6IHN0cmluZzsKfQoKZnVuY3Rpb24gX0RlYnVnX2ZhZGVDb2xvcihhbnNpLCBzdHJpbmcpCnsKCXJldHVybiBhbnNpID8gJ1x4MWJbMzdtJyArIHN0cmluZyArICdceDFiWzBtJyA6IHN0cmluZzsKfQoKZnVuY3Rpb24gX0RlYnVnX2ludGVybmFsQ29sb3IoYW5zaSwgc3RyaW5nKQp7CglyZXR1cm4gYW5zaSA/ICdceDFiWzM2bScgKyBzdHJpbmcgKyAnXHgxYlswbScgOiBzdHJpbmc7Cn0KCmZ1bmN0aW9uIF9EZWJ1Z190b0hleERpZ2l0KG4pCnsKCXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKG4gPCAxMCA/IDQ4ICsgbiA6IDU1ICsgbik7Cn0KCgovLyBDUkFTSAoKCmZ1bmN0aW9uIF9EZWJ1Z19jcmFzaF9VTlVTRUQoaWRlbnRpZmllcikKewoJdGhyb3cgbmV3IEVycm9yKCdodHRwczovL2dpdGh1Yi5jb20vZWxtL2NvcmUvYmxvYi8xLjAuMC9oaW50cy8nICsgaWRlbnRpZmllciArICcubWQnKTsKfQoKCmZ1bmN0aW9uIF9EZWJ1Z19jcmFzaChpZGVudGlmaWVyLCBmYWN0MSwgZmFjdDIsIGZhY3QzLCBmYWN0NCkKewoJc3dpdGNoKGlkZW50aWZpZXIpCgl7CgkJY2FzZSAwOgoJCQl0aHJvdyBuZXcgRXJyb3IoJ1doYXQgbm9kZSBzaG91bGQgSSB0YWtlIG92ZXI/IEluIEphdmFTY3JpcHQgSSBuZWVkIHNvbWV0aGluZyBsaWtlOlxuXG4gICAgRWxtLk1haW4uaW5pdCh7XG4gICAgICAgIG5vZGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlbG0tbm9kZSIpXG4gICAgfSlcblxuWW91IG5lZWQgdG8gZG8gdGhpcyB3aXRoIGFueSBCcm93c2VyLnNhbmRib3ggb3IgQnJvd3Nlci5lbGVtZW50IHByb2dyYW0uJyk7CgoJCWNhc2UgMToKCQkJdGhyb3cgbmV3IEVycm9yKCdCcm93c2VyLmFwcGxpY2F0aW9uIHByb2dyYW1zIGNhbm5vdCBoYW5kbGUgVVJMcyBsaWtlIHRoaXM6XG5cbiAgICAnICsgZG9jdW1lbnQubG9jYXRpb24uaHJlZiArICdcblxuV2hhdCBpcyB0aGUgcm9vdD8gVGhlIHJvb3Qgb2YgeW91ciBmaWxlIHN5c3RlbT8gVHJ5IGxvb2tpbmcgYXQgdGhpcyBwcm9ncmFtIHdpdGggYGVsbSByZWFjdG9yYCBvciBzb21lIG90aGVyIHNlcnZlci4nKTsKCgkJY2FzZSAyOgoJCQl2YXIganNvbkVycm9yU3RyaW5nID0gZmFjdDE7CgkJCXRocm93IG5ldyBFcnJvcignUHJvYmxlbSB3aXRoIHRoZSBmbGFncyBnaXZlbiB0byB5b3VyIEVsbSBwcm9ncmFtIG9uIGluaXRpYWxpemF0aW9uLlxuXG4nICsganNvbkVycm9yU3RyaW5nKTsKCgkJY2FzZSAzOgoJCQl2YXIgcG9ydE5hbWUgPSBmYWN0MTsKCQkJdGhyb3cgbmV3IEVycm9yKCdUaGVyZSBjYW4gb25seSBiZSBvbmUgcG9ydCBuYW1lZCBgJyArIHBvcnROYW1lICsgJ2AsIGJ1dCB5b3VyIHByb2dyYW0gaGFzIG11bHRpcGxlLicpOwoKCQljYXNlIDQ6CgkJCXZhciBwb3J0TmFtZSA9IGZhY3QxOwoJCQl2YXIgcHJvYmxlbSA9IGZhY3QyOwoJCQl0aHJvdyBuZXcgRXJyb3IoJ1RyeWluZyB0byBzZW5kIGFuIHVuZXhwZWN0ZWQgdHlwZSBvZiB2YWx1ZSB0aHJvdWdoIHBvcnQgYCcgKyBwb3J0TmFtZSArICdgOlxuJyArIHByb2JsZW0pOwoKCQljYXNlIDU6CgkJCXRocm93IG5ldyBFcnJvcignVHJ5aW5nIHRvIHVzZSBgKD09KWAgb24gZnVuY3Rpb25zLlxuVGhlcmUgaXMgbm8gd2F5IHRvIGtub3cgaWYgZnVuY3Rpb25zIGFyZSAidGhlIHNhbWUiIGluIHRoZSBFbG0gc2Vuc2UuXG5SZWFkIG1vcmUgYWJvdXQgdGhpcyBhdCBodHRwczovL3BhY2thZ2UuZWxtLWxhbmcub3JnL3BhY2thZ2VzL2VsbS9jb3JlL2xhdGVzdC9CYXNpY3MjPT0gd2hpY2ggZGVzY3JpYmVzIHdoeSBpdCBpcyB0aGlzIHdheSBhbmQgd2hhdCB0aGUgYmV0dGVyIHZlcnNpb24gd2lsbCBsb29rIGxpa2UuJyk7CgoJCWNhc2UgNjoKCQkJdmFyIG1vZHVsZU5hbWUgPSBmYWN0MTsKCQkJdGhyb3cgbmV3IEVycm9yKCdZb3VyIHBhZ2UgaXMgbG9hZGluZyBtdWx0aXBsZSBFbG0gc2NyaXB0cyB3aXRoIGEgbW9kdWxlIG5hbWVkICcgKyBtb2R1bGVOYW1lICsgJy4gTWF5YmUgYSBkdXBsaWNhdGUgc2NyaXB0IGlzIGdldHRpbmcgbG9hZGVkIGFjY2lkZW50YWxseT8gSWYgbm90LCByZW5hbWUgb25lIG9mIHRoZW0gc28gSSBrbm93IHdoaWNoIGlzIHdoaWNoIScpOwoKCQljYXNlIDg6CgkJCXZhciBtb2R1bGVOYW1lID0gZmFjdDE7CgkJCXZhciByZWdpb24gPSBmYWN0MjsKCQkJdmFyIG1lc3NhZ2UgPSBmYWN0MzsKCQkJdGhyb3cgbmV3IEVycm9yKCdUT0RPIGluIG1vZHVsZSBgJyArIG1vZHVsZU5hbWUgKyAnYCAnICsgX0RlYnVnX3JlZ2lvblRvU3RyaW5nKHJlZ2lvbikgKyAnXG5cbicgKyBtZXNzYWdlKTsKCgkJY2FzZSA5OgoJCQl2YXIgbW9kdWxlTmFtZSA9IGZhY3QxOwoJCQl2YXIgcmVnaW9uID0gZmFjdDI7CgkJCXZhciB2YWx1ZSA9IGZhY3QzOwoJCQl2YXIgbWVzc2FnZSA9IGZhY3Q0OwoJCQl0aHJvdyBuZXcgRXJyb3IoCgkJCQknVE9ETyBpbiBtb2R1bGUgYCcgKyBtb2R1bGVOYW1lICsgJ2AgZnJvbSB0aGUgYGNhc2VgIGV4cHJlc3Npb24gJwoJCQkJKyBfRGVidWdfcmVnaW9uVG9TdHJpbmcocmVnaW9uKSArICdcblxuSXQgcmVjZWl2ZWQgdGhlIGZvbGxvd2luZyB2YWx1ZTpcblxuICAgICcKCQkJCSsgX0RlYnVnX3RvU3RyaW5nKHZhbHVlKS5yZXBsYWNlKCdcbicsICdcbiAgICAnKQoJCQkJKyAnXG5cbkJ1dCB0aGUgYnJhbmNoIHRoYXQgaGFuZGxlcyBpdCBzYXlzOlxuXG4gICAgJyArIG1lc3NhZ2UucmVwbGFjZSgnXG4nLCAnXG4gICAgJykKCQkJKTsKCgkJY2FzZSAxMDoKCQkJdGhyb3cgbmV3IEVycm9yKCdCdWcgaW4gaHR0cHM6Ly9naXRodWIuY29tL2VsbS92aXJ0dWFsLWRvbS9pc3N1ZXMnKTsKCgkJY2FzZSAxMToKCQkJdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgcGVyZm9ybSBtb2QgMC4gRGl2aXNpb24gYnkgemVybyBlcnJvci4nKTsKCX0KfQoKZnVuY3Rpb24gX0RlYnVnX3JlZ2lvblRvU3RyaW5nKHJlZ2lvbikKewoJaWYgKHJlZ2lvbi5zdGFydC5saW5lID09PSByZWdpb24uZW5kLmxpbmUpCgl7CgkJcmV0dXJuICdvbiBsaW5lICcgKyByZWdpb24uc3RhcnQubGluZTsKCX0KCXJldHVybiAnb24gbGluZXMgJyArIHJlZ2lvbi5zdGFydC5saW5lICsgJyB0aHJvdWdoICcgKyByZWdpb24uZW5kLmxpbmU7Cn0KCgoKLy8gRVFVQUxJVFkKCmZ1bmN0aW9uIF9VdGlsc19lcSh4LCB5KQp7Cglmb3IgKAoJCXZhciBwYWlyLCBzdGFjayA9IFtdLCBpc0VxdWFsID0gX1V0aWxzX2VxSGVscCh4LCB5LCAwLCBzdGFjayk7CgkJaXNFcXVhbCAmJiAocGFpciA9IHN0YWNrLnBvcCgpKTsKCQlpc0VxdWFsID0gX1V0aWxzX2VxSGVscChwYWlyLmEsIHBhaXIuYiwgMCwgc3RhY2spCgkJKQoJe30KCglyZXR1cm4gaXNFcXVhbDsKfQoKZnVuY3Rpb24gX1V0aWxzX2VxSGVscCh4LCB5LCBkZXB0aCwgc3RhY2spCnsKCWlmICh4ID09PSB5KQoJewoJCXJldHVybiB0cnVlOwoJfQoKCWlmICh0eXBlb2YgeCAhPT0gJ29iamVjdCcgfHwgeCA9PT0gbnVsbCB8fCB5ID09PSBudWxsKQoJewoJCXR5cGVvZiB4ID09PSAnZnVuY3Rpb24nICYmIF9EZWJ1Z19jcmFzaCg1KTsKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJaWYgKGRlcHRoID4gMTAwKQoJewoJCXN0YWNrLnB1c2goX1V0aWxzX1R1cGxlMih4LHkpKTsKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvKiovCglpZiAoeC4kID09PSAnU2V0X2VsbV9idWlsdGluJykKCXsKCQl4ID0gJGVsbSRjb3JlJFNldCR0b0xpc3QoeCk7CgkJeSA9ICRlbG0kY29yZSRTZXQkdG9MaXN0KHkpOwoJfQoJaWYgKHguJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicgfHwgeC4kID09PSAnUkJFbXB0eV9lbG1fYnVpbHRpbicpCgl7CgkJeCA9ICRlbG0kY29yZSREaWN0JHRvTGlzdCh4KTsKCQl5ID0gJGVsbSRjb3JlJERpY3QkdG9MaXN0KHkpOwoJfQoJLy8qLwoKCS8qKl9VTlVTRUQvCglpZiAoeC4kIDwgMCkKCXsKCQl4ID0gJGVsbSRjb3JlJERpY3QkdG9MaXN0KHgpOwoJCXkgPSAkZWxtJGNvcmUkRGljdCR0b0xpc3QoeSk7Cgl9CgkvLyovCgoJZm9yICh2YXIga2V5IGluIHgpCgl7CgkJaWYgKCFfVXRpbHNfZXFIZWxwKHhba2V5XSwgeVtrZXldLCBkZXB0aCArIDEsIHN0YWNrKSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CglyZXR1cm4gdHJ1ZTsKfQoKdmFyIF9VdGlsc19lcXVhbCA9IEYyKF9VdGlsc19lcSk7CnZhciBfVXRpbHNfbm90RXF1YWwgPSBGMihmdW5jdGlvbihhLCBiKSB7IHJldHVybiAhX1V0aWxzX2VxKGEsYik7IH0pOwoKCgovLyBDT01QQVJJU09OUwoKLy8gQ29kZSBpbiBHZW5lcmF0ZS9KYXZhU2NyaXB0LmhzLCBCYXNpY3MuanMsIGFuZCBMaXN0LmpzIGRlcGVuZHMgb24KLy8gdGhlIHBhcnRpY3VsYXIgaW50ZWdlciB2YWx1ZXMgYXNzaWduZWQgdG8gTFQsIEVRLCBhbmQgR1QuCgpmdW5jdGlvbiBfVXRpbHNfY21wKHgsIHksIG9yZCkKewoJaWYgKHR5cGVvZiB4ICE9PSAnb2JqZWN0JykKCXsKCQlyZXR1cm4geCA9PT0geSA/IC8qRVEqLyAwIDogeCA8IHkgPyAvKkxUKi8gLTEgOiAvKkdUKi8gMTsKCX0KCgkvKiovCglpZiAoeCBpbnN0YW5jZW9mIFN0cmluZykKCXsKCQl2YXIgYSA9IHgudmFsdWVPZigpOwoJCXZhciBiID0geS52YWx1ZU9mKCk7CgkJcmV0dXJuIGEgPT09IGIgPyAwIDogYSA8IGIgPyAtMSA6IDE7Cgl9CgkvLyovCgoJLyoqX1VOVVNFRC8KCWlmICh0eXBlb2YgeC4kID09PSAndW5kZWZpbmVkJykKCS8vKi8KCS8qKi8KCWlmICh4LiRbMF0gPT09ICcjJykKCS8vKi8KCXsKCQlyZXR1cm4gKG9yZCA9IF9VdGlsc19jbXAoeC5hLCB5LmEpKQoJCQk/IG9yZAoJCQk6IChvcmQgPSBfVXRpbHNfY21wKHguYiwgeS5iKSkKCQkJCT8gb3JkCgkJCQk6IF9VdGlsc19jbXAoeC5jLCB5LmMpOwoJfQoKCS8vIHRyYXZlcnNlIGNvbnNlcyB1bnRpbCBlbmQgb2YgYSBsaXN0IG9yIGEgbWlzbWF0Y2gKCWZvciAoOyB4LmIgJiYgeS5iICYmICEob3JkID0gX1V0aWxzX2NtcCh4LmEsIHkuYSkpOyB4ID0geC5iLCB5ID0geS5iKSB7fSAvLyBXSElMRV9DT05TRVMKCXJldHVybiBvcmQgfHwgKHguYiA/IC8qR1QqLyAxIDogeS5iID8gLypMVCovIC0xIDogLypFUSovIDApOwp9Cgp2YXIgX1V0aWxzX2x0ID0gRjIoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gX1V0aWxzX2NtcChhLCBiKSA8IDA7IH0pOwp2YXIgX1V0aWxzX2xlID0gRjIoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gX1V0aWxzX2NtcChhLCBiKSA8IDE7IH0pOwp2YXIgX1V0aWxzX2d0ID0gRjIoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gX1V0aWxzX2NtcChhLCBiKSA+IDA7IH0pOwp2YXIgX1V0aWxzX2dlID0gRjIoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gX1V0aWxzX2NtcChhLCBiKSA+PSAwOyB9KTsKCnZhciBfVXRpbHNfY29tcGFyZSA9IEYyKGZ1bmN0aW9uKHgsIHkpCnsKCXZhciBuID0gX1V0aWxzX2NtcCh4LCB5KTsKCXJldHVybiBuIDwgMCA/ICRlbG0kY29yZSRCYXNpY3MkTFQgOiBuID8gJGVsbSRjb3JlJEJhc2ljcyRHVCA6ICRlbG0kY29yZSRCYXNpY3MkRVE7Cn0pOwoKCi8vIENPTU1PTiBWQUxVRVMKCnZhciBfVXRpbHNfVHVwbGUwX1VOVVNFRCA9IDA7CnZhciBfVXRpbHNfVHVwbGUwID0geyAkOiAnIzAnIH07CgpmdW5jdGlvbiBfVXRpbHNfVHVwbGUyX1VOVVNFRChhLCBiKSB7IHJldHVybiB7IGE6IGEsIGI6IGIgfTsgfQpmdW5jdGlvbiBfVXRpbHNfVHVwbGUyKGEsIGIpIHsgcmV0dXJuIHsgJDogJyMyJywgYTogYSwgYjogYiB9OyB9CgpmdW5jdGlvbiBfVXRpbHNfVHVwbGUzX1VOVVNFRChhLCBiLCBjKSB7IHJldHVybiB7IGE6IGEsIGI6IGIsIGM6IGMgfTsgfQpmdW5jdGlvbiBfVXRpbHNfVHVwbGUzKGEsIGIsIGMpIHsgcmV0dXJuIHsgJDogJyMzJywgYTogYSwgYjogYiwgYzogYyB9OyB9CgpmdW5jdGlvbiBfVXRpbHNfY2hyX1VOVVNFRChjKSB7IHJldHVybiBjOyB9CmZ1bmN0aW9uIF9VdGlsc19jaHIoYykgeyByZXR1cm4gbmV3IFN0cmluZyhjKTsgfQoKCi8vIFJFQ09SRFMKCmZ1bmN0aW9uIF9VdGlsc191cGRhdGUob2xkUmVjb3JkLCB1cGRhdGVkRmllbGRzKQp7Cgl2YXIgbmV3UmVjb3JkID0ge307CgoJZm9yICh2YXIga2V5IGluIG9sZFJlY29yZCkKCXsKCQluZXdSZWNvcmRba2V5XSA9IG9sZFJlY29yZFtrZXldOwoJfQoKCWZvciAodmFyIGtleSBpbiB1cGRhdGVkRmllbGRzKQoJewoJCW5ld1JlY29yZFtrZXldID0gdXBkYXRlZEZpZWxkc1trZXldOwoJfQoKCXJldHVybiBuZXdSZWNvcmQ7Cn0KCgovLyBBUFBFTkQKCnZhciBfVXRpbHNfYXBwZW5kID0gRjIoX1V0aWxzX2FwKTsKCmZ1bmN0aW9uIF9VdGlsc19hcCh4cywgeXMpCnsKCS8vIGFwcGVuZCBTdHJpbmdzCglpZiAodHlwZW9mIHhzID09PSAnc3RyaW5nJykKCXsKCQlyZXR1cm4geHMgKyB5czsKCX0KCgkvLyBhcHBlbmQgTGlzdHMKCWlmICgheHMuYikKCXsKCQlyZXR1cm4geXM7Cgl9Cgl2YXIgcm9vdCA9IF9MaXN0X0NvbnMoeHMuYSwgeXMpOwoJeHMgPSB4cy5iCglmb3IgKHZhciBjdXJyID0gcm9vdDsgeHMuYjsgeHMgPSB4cy5iKSAvLyBXSElMRV9DT05TCgl7CgkJY3VyciA9IGN1cnIuYiA9IF9MaXN0X0NvbnMoeHMuYSwgeXMpOwoJfQoJcmV0dXJuIHJvb3Q7Cn0KCgoKLy8gTUFUSAoKdmFyIF9CYXNpY3NfYWRkID0gRjIoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYSArIGI7IH0pOwp2YXIgX0Jhc2ljc19zdWIgPSBGMihmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7CnZhciBfQmFzaWNzX211bCA9IEYyKGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEgKiBiOyB9KTsKdmFyIF9CYXNpY3NfZmRpdiA9IEYyKGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEgLyBiOyB9KTsKdmFyIF9CYXNpY3NfaWRpdiA9IEYyKGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIChhIC8gYikgfCAwOyB9KTsKdmFyIF9CYXNpY3NfcG93ID0gRjIoTWF0aC5wb3cpOwoKdmFyIF9CYXNpY3NfcmVtYWluZGVyQnkgPSBGMihmdW5jdGlvbihiLCBhKSB7IHJldHVybiBhICUgYjsgfSk7CgovLyBodHRwczovL3d3dy5taWNyb3NvZnQuY29tL2VuLXVzL3Jlc2VhcmNoL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE2LzAyL2Rpdm1vZG5vdGUtbGV0dGVyLnBkZgp2YXIgX0Jhc2ljc19tb2RCeSA9IEYyKGZ1bmN0aW9uKG1vZHVsdXMsIHgpCnsKCXZhciBhbnN3ZXIgPSB4ICUgbW9kdWx1czsKCXJldHVybiBtb2R1bHVzID09PSAwCgkJPyBfRGVidWdfY3Jhc2goMTEpCgkJOgoJKChhbnN3ZXIgPiAwICYmIG1vZHVsdXMgPCAwKSB8fCAoYW5zd2VyIDwgMCAmJiBtb2R1bHVzID4gMCkpCgkJPyBhbnN3ZXIgKyBtb2R1bHVzCgkJOiBhbnN3ZXI7Cn0pOwoKCi8vIFRSSUdPTk9NRVRSWQoKdmFyIF9CYXNpY3NfcGkgPSBNYXRoLlBJOwp2YXIgX0Jhc2ljc19lID0gTWF0aC5FOwp2YXIgX0Jhc2ljc19jb3MgPSBNYXRoLmNvczsKdmFyIF9CYXNpY3Nfc2luID0gTWF0aC5zaW47CnZhciBfQmFzaWNzX3RhbiA9IE1hdGgudGFuOwp2YXIgX0Jhc2ljc19hY29zID0gTWF0aC5hY29zOwp2YXIgX0Jhc2ljc19hc2luID0gTWF0aC5hc2luOwp2YXIgX0Jhc2ljc19hdGFuID0gTWF0aC5hdGFuOwp2YXIgX0Jhc2ljc19hdGFuMiA9IEYyKE1hdGguYXRhbjIpOwoKCi8vIE1PUkUgTUFUSAoKZnVuY3Rpb24gX0Jhc2ljc190b0Zsb2F0KHgpIHsgcmV0dXJuIHg7IH0KZnVuY3Rpb24gX0Jhc2ljc190cnVuY2F0ZShuKSB7IHJldHVybiBuIHwgMDsgfQpmdW5jdGlvbiBfQmFzaWNzX2lzSW5maW5pdGUobikgeyByZXR1cm4gbiA9PT0gSW5maW5pdHkgfHwgbiA9PT0gLUluZmluaXR5OyB9Cgp2YXIgX0Jhc2ljc19jZWlsaW5nID0gTWF0aC5jZWlsOwp2YXIgX0Jhc2ljc19mbG9vciA9IE1hdGguZmxvb3I7CnZhciBfQmFzaWNzX3JvdW5kID0gTWF0aC5yb3VuZDsKdmFyIF9CYXNpY3Nfc3FydCA9IE1hdGguc3FydDsKdmFyIF9CYXNpY3NfbG9nID0gTWF0aC5sb2c7CnZhciBfQmFzaWNzX2lzTmFOID0gaXNOYU47CgoKLy8gQk9PTEVBTlMKCmZ1bmN0aW9uIF9CYXNpY3Nfbm90KGJvb2wpIHsgcmV0dXJuICFib29sOyB9CnZhciBfQmFzaWNzX2FuZCA9IEYyKGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEgJiYgYjsgfSk7CnZhciBfQmFzaWNzX29yICA9IEYyKGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEgfHwgYjsgfSk7CnZhciBfQmFzaWNzX3hvciA9IEYyKGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEgIT09IGI7IH0pOwoKCgp2YXIgX1N0cmluZ19jb25zID0gRjIoZnVuY3Rpb24oY2hyLCBzdHIpCnsKCXJldHVybiBjaHIgKyBzdHI7Cn0pOwoKZnVuY3Rpb24gX1N0cmluZ191bmNvbnMoc3RyaW5nKQp7Cgl2YXIgd29yZCA9IHN0cmluZy5jaGFyQ29kZUF0KDApOwoJcmV0dXJuICFpc05hTih3b3JkKQoJCT8gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCTB4RDgwMCA8PSB3b3JkICYmIHdvcmQgPD0gMHhEQkZGCgkJCQk/IF9VdGlsc19UdXBsZTIoX1V0aWxzX2NocihzdHJpbmdbMF0gKyBzdHJpbmdbMV0pLCBzdHJpbmcuc2xpY2UoMikpCgkJCQk6IF9VdGlsc19UdXBsZTIoX1V0aWxzX2NocihzdHJpbmdbMF0pLCBzdHJpbmcuc2xpY2UoMSkpCgkJKQoJCTogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7Cn0KCnZhciBfU3RyaW5nX2FwcGVuZCA9IEYyKGZ1bmN0aW9uKGEsIGIpCnsKCXJldHVybiBhICsgYjsKfSk7CgpmdW5jdGlvbiBfU3RyaW5nX2xlbmd0aChzdHIpCnsKCXJldHVybiBzdHIubGVuZ3RoOwp9Cgp2YXIgX1N0cmluZ19tYXAgPSBGMihmdW5jdGlvbihmdW5jLCBzdHJpbmcpCnsKCXZhciBsZW4gPSBzdHJpbmcubGVuZ3RoOwoJdmFyIGFycmF5ID0gbmV3IEFycmF5KGxlbik7Cgl2YXIgaSA9IDA7Cgl3aGlsZSAoaSA8IGxlbikKCXsKCQl2YXIgd29yZCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpOwoJCWlmICgweEQ4MDAgPD0gd29yZCAmJiB3b3JkIDw9IDB4REJGRikKCQl7CgkJCWFycmF5W2ldID0gZnVuYyhfVXRpbHNfY2hyKHN0cmluZ1tpXSArIHN0cmluZ1tpKzFdKSk7CgkJCWkgKz0gMjsKCQkJY29udGludWU7CgkJfQoJCWFycmF5W2ldID0gZnVuYyhfVXRpbHNfY2hyKHN0cmluZ1tpXSkpOwoJCWkrKzsKCX0KCXJldHVybiBhcnJheS5qb2luKCcnKTsKfSk7Cgp2YXIgX1N0cmluZ19maWx0ZXIgPSBGMihmdW5jdGlvbihpc0dvb2QsIHN0cikKewoJdmFyIGFyciA9IFtdOwoJdmFyIGxlbiA9IHN0ci5sZW5ndGg7Cgl2YXIgaSA9IDA7Cgl3aGlsZSAoaSA8IGxlbikKCXsKCQl2YXIgY2hhciA9IHN0cltpXTsKCQl2YXIgd29yZCA9IHN0ci5jaGFyQ29kZUF0KGkpOwoJCWkrKzsKCQlpZiAoMHhEODAwIDw9IHdvcmQgJiYgd29yZCA8PSAweERCRkYpCgkJewoJCQljaGFyICs9IHN0cltpXTsKCQkJaSsrOwoJCX0KCgkJaWYgKGlzR29vZChfVXRpbHNfY2hyKGNoYXIpKSkKCQl7CgkJCWFyci5wdXNoKGNoYXIpOwoJCX0KCX0KCXJldHVybiBhcnIuam9pbignJyk7Cn0pOwoKZnVuY3Rpb24gX1N0cmluZ19yZXZlcnNlKHN0cikKewoJdmFyIGxlbiA9IHN0ci5sZW5ndGg7Cgl2YXIgYXJyID0gbmV3IEFycmF5KGxlbik7Cgl2YXIgaSA9IDA7Cgl3aGlsZSAoaSA8IGxlbikKCXsKCQl2YXIgd29yZCA9IHN0ci5jaGFyQ29kZUF0KGkpOwoJCWlmICgweEQ4MDAgPD0gd29yZCAmJiB3b3JkIDw9IDB4REJGRikKCQl7CgkJCWFycltsZW4gLSBpXSA9IHN0cltpICsgMV07CgkJCWkrKzsKCQkJYXJyW2xlbiAtIGldID0gc3RyW2kgLSAxXTsKCQkJaSsrOwoJCX0KCQllbHNlCgkJewoJCQlhcnJbbGVuIC0gaV0gPSBzdHJbaV07CgkJCWkrKzsKCQl9Cgl9CglyZXR1cm4gYXJyLmpvaW4oJycpOwp9Cgp2YXIgX1N0cmluZ19mb2xkbCA9IEYzKGZ1bmN0aW9uKGZ1bmMsIHN0YXRlLCBzdHJpbmcpCnsKCXZhciBsZW4gPSBzdHJpbmcubGVuZ3RoOwoJdmFyIGkgPSAwOwoJd2hpbGUgKGkgPCBsZW4pCgl7CgkJdmFyIGNoYXIgPSBzdHJpbmdbaV07CgkJdmFyIHdvcmQgPSBzdHJpbmcuY2hhckNvZGVBdChpKTsKCQlpKys7CgkJaWYgKDB4RDgwMCA8PSB3b3JkICYmIHdvcmQgPD0gMHhEQkZGKQoJCXsKCQkJY2hhciArPSBzdHJpbmdbaV07CgkJCWkrKzsKCQl9CgkJc3RhdGUgPSBBMihmdW5jLCBfVXRpbHNfY2hyKGNoYXIpLCBzdGF0ZSk7Cgl9CglyZXR1cm4gc3RhdGU7Cn0pOwoKdmFyIF9TdHJpbmdfZm9sZHIgPSBGMyhmdW5jdGlvbihmdW5jLCBzdGF0ZSwgc3RyaW5nKQp7Cgl2YXIgaSA9IHN0cmluZy5sZW5ndGg7Cgl3aGlsZSAoaS0tKQoJewoJCXZhciBjaGFyID0gc3RyaW5nW2ldOwoJCXZhciB3b3JkID0gc3RyaW5nLmNoYXJDb2RlQXQoaSk7CgkJaWYgKDB4REMwMCA8PSB3b3JkICYmIHdvcmQgPD0gMHhERkZGKQoJCXsKCQkJaS0tOwoJCQljaGFyID0gc3RyaW5nW2ldICsgY2hhcjsKCQl9CgkJc3RhdGUgPSBBMihmdW5jLCBfVXRpbHNfY2hyKGNoYXIpLCBzdGF0ZSk7Cgl9CglyZXR1cm4gc3RhdGU7Cn0pOwoKdmFyIF9TdHJpbmdfc3BsaXQgPSBGMihmdW5jdGlvbihzZXAsIHN0cikKewoJcmV0dXJuIHN0ci5zcGxpdChzZXApOwp9KTsKCnZhciBfU3RyaW5nX2pvaW4gPSBGMihmdW5jdGlvbihzZXAsIHN0cnMpCnsKCXJldHVybiBzdHJzLmpvaW4oc2VwKTsKfSk7Cgp2YXIgX1N0cmluZ19zbGljZSA9IEYzKGZ1bmN0aW9uKHN0YXJ0LCBlbmQsIHN0cikgewoJcmV0dXJuIHN0ci5zbGljZShzdGFydCwgZW5kKTsKfSk7CgpmdW5jdGlvbiBfU3RyaW5nX3RyaW0oc3RyKQp7CglyZXR1cm4gc3RyLnRyaW0oKTsKfQoKZnVuY3Rpb24gX1N0cmluZ190cmltTGVmdChzdHIpCnsKCXJldHVybiBzdHIucmVwbGFjZSgvXlxzKy8sICcnKTsKfQoKZnVuY3Rpb24gX1N0cmluZ190cmltUmlnaHQoc3RyKQp7CglyZXR1cm4gc3RyLnJlcGxhY2UoL1xzKyQvLCAnJyk7Cn0KCmZ1bmN0aW9uIF9TdHJpbmdfd29yZHMoc3RyKQp7CglyZXR1cm4gX0xpc3RfZnJvbUFycmF5KHN0ci50cmltKCkuc3BsaXQoL1xzKy9nKSk7Cn0KCmZ1bmN0aW9uIF9TdHJpbmdfbGluZXMoc3RyKQp7CglyZXR1cm4gX0xpc3RfZnJvbUFycmF5KHN0ci5zcGxpdCgvXHJcbnxccnxcbi9nKSk7Cn0KCmZ1bmN0aW9uIF9TdHJpbmdfdG9VcHBlcihzdHIpCnsKCXJldHVybiBzdHIudG9VcHBlckNhc2UoKTsKfQoKZnVuY3Rpb24gX1N0cmluZ190b0xvd2VyKHN0cikKewoJcmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpOwp9Cgp2YXIgX1N0cmluZ19hbnkgPSBGMihmdW5jdGlvbihpc0dvb2QsIHN0cmluZykKewoJdmFyIGkgPSBzdHJpbmcubGVuZ3RoOwoJd2hpbGUgKGktLSkKCXsKCQl2YXIgY2hhciA9IHN0cmluZ1tpXTsKCQl2YXIgd29yZCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpOwoJCWlmICgweERDMDAgPD0gd29yZCAmJiB3b3JkIDw9IDB4REZGRikKCQl7CgkJCWktLTsKCQkJY2hhciA9IHN0cmluZ1tpXSArIGNoYXI7CgkJfQoJCWlmIChpc0dvb2QoX1V0aWxzX2NocihjaGFyKSkpCgkJewoJCQlyZXR1cm4gdHJ1ZTsKCQl9Cgl9CglyZXR1cm4gZmFsc2U7Cn0pOwoKdmFyIF9TdHJpbmdfYWxsID0gRjIoZnVuY3Rpb24oaXNHb29kLCBzdHJpbmcpCnsKCXZhciBpID0gc3RyaW5nLmxlbmd0aDsKCXdoaWxlIChpLS0pCgl7CgkJdmFyIGNoYXIgPSBzdHJpbmdbaV07CgkJdmFyIHdvcmQgPSBzdHJpbmcuY2hhckNvZGVBdChpKTsKCQlpZiAoMHhEQzAwIDw9IHdvcmQgJiYgd29yZCA8PSAweERGRkYpCgkJewoJCQlpLS07CgkJCWNoYXIgPSBzdHJpbmdbaV0gKyBjaGFyOwoJCX0KCQlpZiAoIWlzR29vZChfVXRpbHNfY2hyKGNoYXIpKSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CglyZXR1cm4gdHJ1ZTsKfSk7Cgp2YXIgX1N0cmluZ19jb250YWlucyA9IEYyKGZ1bmN0aW9uKHN1Yiwgc3RyKQp7CglyZXR1cm4gc3RyLmluZGV4T2Yoc3ViKSA+IC0xOwp9KTsKCnZhciBfU3RyaW5nX3N0YXJ0c1dpdGggPSBGMihmdW5jdGlvbihzdWIsIHN0cikKewoJcmV0dXJuIHN0ci5pbmRleE9mKHN1YikgPT09IDA7Cn0pOwoKdmFyIF9TdHJpbmdfZW5kc1dpdGggPSBGMihmdW5jdGlvbihzdWIsIHN0cikKewoJcmV0dXJuIHN0ci5sZW5ndGggPj0gc3ViLmxlbmd0aCAmJgoJCXN0ci5sYXN0SW5kZXhPZihzdWIpID09PSBzdHIubGVuZ3RoIC0gc3ViLmxlbmd0aDsKfSk7Cgp2YXIgX1N0cmluZ19pbmRleGVzID0gRjIoZnVuY3Rpb24oc3ViLCBzdHIpCnsKCXZhciBzdWJMZW4gPSBzdWIubGVuZ3RoOwoKCWlmIChzdWJMZW4gPCAxKQoJewoJCXJldHVybiBfTGlzdF9OaWw7Cgl9CgoJdmFyIGkgPSAwOwoJdmFyIGlzID0gW107CgoJd2hpbGUgKChpID0gc3RyLmluZGV4T2Yoc3ViLCBpKSkgPiAtMSkKCXsKCQlpcy5wdXNoKGkpOwoJCWkgPSBpICsgc3ViTGVuOwoJfQoKCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoaXMpOwp9KTsKCgovLyBUTyBTVFJJTkcKCmZ1bmN0aW9uIF9TdHJpbmdfZnJvbU51bWJlcihudW1iZXIpCnsKCXJldHVybiBudW1iZXIgKyAnJzsKfQoKCi8vIElOVCBDT05WRVJTSU9OUwoKZnVuY3Rpb24gX1N0cmluZ190b0ludChzdHIpCnsKCXZhciB0b3RhbCA9IDA7Cgl2YXIgY29kZTAgPSBzdHIuY2hhckNvZGVBdCgwKTsKCXZhciBzdGFydCA9IGNvZGUwID09IDB4MkIgLyogKyAqLyB8fCBjb2RlMCA9PSAweDJEIC8qIC0gKi8gPyAxIDogMDsKCglmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBzdHIubGVuZ3RoOyArK2kpCgl7CgkJdmFyIGNvZGUgPSBzdHIuY2hhckNvZGVBdChpKTsKCQlpZiAoY29kZSA8IDB4MzAgfHwgMHgzOSA8IGNvZGUpCgkJewoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJfQoJCXRvdGFsID0gMTAgKiB0b3RhbCArIGNvZGUgLSAweDMwOwoJfQoKCXJldHVybiBpID09IHN0YXJ0CgkJPyAkZWxtJGNvcmUkTWF5YmUkTm90aGluZwoJCTogJGVsbSRjb3JlJE1heWJlJEp1c3QoY29kZTAgPT0gMHgyRCA/IC10b3RhbCA6IHRvdGFsKTsKfQoKCi8vIEZMT0FUIENPTlZFUlNJT05TCgpmdW5jdGlvbiBfU3RyaW5nX3RvRmxvYXQocykKewoJLy8gY2hlY2sgaWYgaXQgaXMgYSBoZXgsIG9jdGFsLCBvciBiaW5hcnkgbnVtYmVyCglpZiAocy5sZW5ndGggPT09IDAgfHwgL1tcc3hib10vLnRlc3QocykpCgl7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfQoJdmFyIG4gPSArczsKCS8vIGZhc3RlciBpc05hTiBjaGVjawoJcmV0dXJuIG4gPT09IG4gPyAkZWxtJGNvcmUkTWF5YmUkSnVzdChuKSA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwp9CgpmdW5jdGlvbiBfU3RyaW5nX2Zyb21MaXN0KGNoYXJzKQp7CglyZXR1cm4gX0xpc3RfdG9BcnJheShjaGFycykuam9pbignJyk7Cn0KCgoKCmZ1bmN0aW9uIF9DaGFyX3RvQ29kZShjaGFyKQp7Cgl2YXIgY29kZSA9IGNoYXIuY2hhckNvZGVBdCgwKTsKCWlmICgweEQ4MDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4REJGRikKCXsKCQlyZXR1cm4gKGNvZGUgLSAweEQ4MDApICogMHg0MDAgKyBjaGFyLmNoYXJDb2RlQXQoMSkgLSAweERDMDAgKyAweDEwMDAwCgl9CglyZXR1cm4gY29kZTsKfQoKZnVuY3Rpb24gX0NoYXJfZnJvbUNvZGUoY29kZSkKewoJcmV0dXJuIF9VdGlsc19jaHIoCgkJKGNvZGUgPCAwIHx8IDB4MTBGRkZGIDwgY29kZSkKCQkJPyAnXHVGRkZEJwoJCQk6CgkJKGNvZGUgPD0gMHhGRkZGKQoJCQk/IFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSkKCQkJOgoJCShjb2RlIC09IDB4MTAwMDAsCgkJCVN0cmluZy5mcm9tQ2hhckNvZGUoTWF0aC5mbG9vcihjb2RlIC8gMHg0MDApICsgMHhEODAwLCBjb2RlICUgMHg0MDAgKyAweERDMDApCgkJKQoJKTsKfQoKZnVuY3Rpb24gX0NoYXJfdG9VcHBlcihjaGFyKQp7CglyZXR1cm4gX1V0aWxzX2NocihjaGFyLnRvVXBwZXJDYXNlKCkpOwp9CgpmdW5jdGlvbiBfQ2hhcl90b0xvd2VyKGNoYXIpCnsKCXJldHVybiBfVXRpbHNfY2hyKGNoYXIudG9Mb3dlckNhc2UoKSk7Cn0KCmZ1bmN0aW9uIF9DaGFyX3RvTG9jYWxlVXBwZXIoY2hhcikKewoJcmV0dXJuIF9VdGlsc19jaHIoY2hhci50b0xvY2FsZVVwcGVyQ2FzZSgpKTsKfQoKZnVuY3Rpb24gX0NoYXJfdG9Mb2NhbGVMb3dlcihjaGFyKQp7CglyZXR1cm4gX1V0aWxzX2NocihjaGFyLnRvTG9jYWxlTG93ZXJDYXNlKCkpOwp9CgoKCi8qKi8KZnVuY3Rpb24gX0pzb25fZXJyb3JUb1N0cmluZyhlcnJvcikKewoJcmV0dXJuICRlbG0kanNvbiRKc29uJERlY29kZSRlcnJvclRvU3RyaW5nKGVycm9yKTsKfQovLyovCgoKLy8gQ09SRSBERUNPREVSUwoKZnVuY3Rpb24gX0pzb25fc3VjY2VlZChtc2cpCnsKCXJldHVybiB7CgkJJDogMCwKCQlhOiBtc2cKCX07Cn0KCmZ1bmN0aW9uIF9Kc29uX2ZhaWwobXNnKQp7CglyZXR1cm4gewoJCSQ6IDEsCgkJYTogbXNnCgl9Owp9CgpmdW5jdGlvbiBfSnNvbl9kZWNvZGVQcmltKGRlY29kZXIpCnsKCXJldHVybiB7ICQ6IDIsIGI6IGRlY29kZXIgfTsKfQoKdmFyIF9Kc29uX2RlY29kZUludCA9IF9Kc29uX2RlY29kZVByaW0oZnVuY3Rpb24odmFsdWUpIHsKCXJldHVybiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykKCQk/IF9Kc29uX2V4cGVjdGluZygnYW4gSU5UJywgdmFsdWUpCgkJOgoJKC0yMTQ3NDgzNjQ3IDwgdmFsdWUgJiYgdmFsdWUgPCAyMTQ3NDgzNjQ3ICYmICh2YWx1ZSB8IDApID09PSB2YWx1ZSkKCQk/ICRlbG0kY29yZSRSZXN1bHQkT2sodmFsdWUpCgkJOgoJKGlzRmluaXRlKHZhbHVlKSAmJiAhKHZhbHVlICUgMSkpCgkJPyAkZWxtJGNvcmUkUmVzdWx0JE9rKHZhbHVlKQoJCTogX0pzb25fZXhwZWN0aW5nKCdhbiBJTlQnLCB2YWx1ZSk7Cn0pOwoKdmFyIF9Kc29uX2RlY29kZUJvb2wgPSBfSnNvbl9kZWNvZGVQcmltKGZ1bmN0aW9uKHZhbHVlKSB7CglyZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKQoJCT8gJGVsbSRjb3JlJFJlc3VsdCRPayh2YWx1ZSkKCQk6IF9Kc29uX2V4cGVjdGluZygnYSBCT09MJywgdmFsdWUpOwp9KTsKCnZhciBfSnNvbl9kZWNvZGVGbG9hdCA9IF9Kc29uX2RlY29kZVByaW0oZnVuY3Rpb24odmFsdWUpIHsKCXJldHVybiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykKCQk/ICRlbG0kY29yZSRSZXN1bHQkT2sodmFsdWUpCgkJOiBfSnNvbl9leHBlY3RpbmcoJ2EgRkxPQVQnLCB2YWx1ZSk7Cn0pOwoKdmFyIF9Kc29uX2RlY29kZVZhbHVlID0gX0pzb25fZGVjb2RlUHJpbShmdW5jdGlvbih2YWx1ZSkgewoJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soX0pzb25fd3JhcCh2YWx1ZSkpOwp9KTsKCnZhciBfSnNvbl9kZWNvZGVTdHJpbmcgPSBfSnNvbl9kZWNvZGVQcmltKGZ1bmN0aW9uKHZhbHVlKSB7CglyZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpCgkJPyAkZWxtJGNvcmUkUmVzdWx0JE9rKHZhbHVlKQoJCTogKHZhbHVlIGluc3RhbmNlb2YgU3RyaW5nKQoJCQk/ICRlbG0kY29yZSRSZXN1bHQkT2sodmFsdWUgKyAnJykKCQkJOiBfSnNvbl9leHBlY3RpbmcoJ2EgU1RSSU5HJywgdmFsdWUpOwp9KTsKCmZ1bmN0aW9uIF9Kc29uX2RlY29kZUxpc3QoZGVjb2RlcikgeyByZXR1cm4geyAkOiAzLCBiOiBkZWNvZGVyIH07IH0KZnVuY3Rpb24gX0pzb25fZGVjb2RlQXJyYXkoZGVjb2RlcikgeyByZXR1cm4geyAkOiA0LCBiOiBkZWNvZGVyIH07IH0KCmZ1bmN0aW9uIF9Kc29uX2RlY29kZU51bGwodmFsdWUpIHsgcmV0dXJuIHsgJDogNSwgYzogdmFsdWUgfTsgfQoKdmFyIF9Kc29uX2RlY29kZUZpZWxkID0gRjIoZnVuY3Rpb24oZmllbGQsIGRlY29kZXIpCnsKCXJldHVybiB7CgkJJDogNiwKCQlkOiBmaWVsZCwKCQliOiBkZWNvZGVyCgl9Owp9KTsKCnZhciBfSnNvbl9kZWNvZGVJbmRleCA9IEYyKGZ1bmN0aW9uKGluZGV4LCBkZWNvZGVyKQp7CglyZXR1cm4gewoJCSQ6IDcsCgkJZTogaW5kZXgsCgkJYjogZGVjb2RlcgoJfTsKfSk7CgpmdW5jdGlvbiBfSnNvbl9kZWNvZGVLZXlWYWx1ZVBhaXJzKGRlY29kZXIpCnsKCXJldHVybiB7CgkJJDogOCwKCQliOiBkZWNvZGVyCgl9Owp9CgpmdW5jdGlvbiBfSnNvbl9tYXBNYW55KGYsIGRlY29kZXJzKQp7CglyZXR1cm4gewoJCSQ6IDksCgkJZjogZiwKCQlnOiBkZWNvZGVycwoJfTsKfQoKdmFyIF9Kc29uX2FuZFRoZW4gPSBGMihmdW5jdGlvbihjYWxsYmFjaywgZGVjb2RlcikKewoJcmV0dXJuIHsKCQkkOiAxMCwKCQliOiBkZWNvZGVyLAoJCWg6IGNhbGxiYWNrCgl9Owp9KTsKCmZ1bmN0aW9uIF9Kc29uX29uZU9mKGRlY29kZXJzKQp7CglyZXR1cm4gewoJCSQ6IDExLAoJCWc6IGRlY29kZXJzCgl9Owp9CgoKLy8gREVDT0RJTkcgT0JKRUNUUwoKdmFyIF9Kc29uX21hcDEgPSBGMihmdW5jdGlvbihmLCBkMSkKewoJcmV0dXJuIF9Kc29uX21hcE1hbnkoZiwgW2QxXSk7Cn0pOwoKdmFyIF9Kc29uX21hcDIgPSBGMyhmdW5jdGlvbihmLCBkMSwgZDIpCnsKCXJldHVybiBfSnNvbl9tYXBNYW55KGYsIFtkMSwgZDJdKTsKfSk7Cgp2YXIgX0pzb25fbWFwMyA9IEY0KGZ1bmN0aW9uKGYsIGQxLCBkMiwgZDMpCnsKCXJldHVybiBfSnNvbl9tYXBNYW55KGYsIFtkMSwgZDIsIGQzXSk7Cn0pOwoKdmFyIF9Kc29uX21hcDQgPSBGNShmdW5jdGlvbihmLCBkMSwgZDIsIGQzLCBkNCkKewoJcmV0dXJuIF9Kc29uX21hcE1hbnkoZiwgW2QxLCBkMiwgZDMsIGQ0XSk7Cn0pOwoKdmFyIF9Kc29uX21hcDUgPSBGNihmdW5jdGlvbihmLCBkMSwgZDIsIGQzLCBkNCwgZDUpCnsKCXJldHVybiBfSnNvbl9tYXBNYW55KGYsIFtkMSwgZDIsIGQzLCBkNCwgZDVdKTsKfSk7Cgp2YXIgX0pzb25fbWFwNiA9IEY3KGZ1bmN0aW9uKGYsIGQxLCBkMiwgZDMsIGQ0LCBkNSwgZDYpCnsKCXJldHVybiBfSnNvbl9tYXBNYW55KGYsIFtkMSwgZDIsIGQzLCBkNCwgZDUsIGQ2XSk7Cn0pOwoKdmFyIF9Kc29uX21hcDcgPSBGOChmdW5jdGlvbihmLCBkMSwgZDIsIGQzLCBkNCwgZDUsIGQ2LCBkNykKewoJcmV0dXJuIF9Kc29uX21hcE1hbnkoZiwgW2QxLCBkMiwgZDMsIGQ0LCBkNSwgZDYsIGQ3XSk7Cn0pOwoKdmFyIF9Kc29uX21hcDggPSBGOShmdW5jdGlvbihmLCBkMSwgZDIsIGQzLCBkNCwgZDUsIGQ2LCBkNywgZDgpCnsKCXJldHVybiBfSnNvbl9tYXBNYW55KGYsIFtkMSwgZDIsIGQzLCBkNCwgZDUsIGQ2LCBkNywgZDhdKTsKfSk7CgoKLy8gREVDT0RFCgp2YXIgX0pzb25fcnVuT25TdHJpbmcgPSBGMihmdW5jdGlvbihkZWNvZGVyLCBzdHJpbmcpCnsKCXRyeQoJewoJCXZhciB2YWx1ZSA9IEpTT04ucGFyc2Uoc3RyaW5nKTsKCQlyZXR1cm4gX0pzb25fcnVuSGVscChkZWNvZGVyLCB2YWx1ZSk7Cgl9CgljYXRjaCAoZSkKCXsKCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRFcnIoQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJEZhaWx1cmUsICdUaGlzIGlzIG5vdCB2YWxpZCBKU09OISAnICsgZS5tZXNzYWdlLCBfSnNvbl93cmFwKHN0cmluZykpKTsKCX0KfSk7Cgp2YXIgX0pzb25fcnVuID0gRjIoZnVuY3Rpb24oZGVjb2RlciwgdmFsdWUpCnsKCXJldHVybiBfSnNvbl9ydW5IZWxwKGRlY29kZXIsIF9Kc29uX3Vud3JhcCh2YWx1ZSkpOwp9KTsKCmZ1bmN0aW9uIF9Kc29uX3J1bkhlbHAoZGVjb2RlciwgdmFsdWUpCnsKCXN3aXRjaCAoZGVjb2Rlci4kKQoJewoJCWNhc2UgMjoKCQkJcmV0dXJuIGRlY29kZXIuYih2YWx1ZSk7CgoJCWNhc2UgNToKCQkJcmV0dXJuICh2YWx1ZSA9PT0gbnVsbCkKCQkJCT8gJGVsbSRjb3JlJFJlc3VsdCRPayhkZWNvZGVyLmMpCgkJCQk6IF9Kc29uX2V4cGVjdGluZygnbnVsbCcsIHZhbHVlKTsKCgkJY2FzZSAzOgoJCQlpZiAoIV9Kc29uX2lzQXJyYXkodmFsdWUpKQoJCQl7CgkJCQlyZXR1cm4gX0pzb25fZXhwZWN0aW5nKCdhIExJU1QnLCB2YWx1ZSk7CgkJCX0KCQkJcmV0dXJuIF9Kc29uX3J1bkFycmF5RGVjb2RlcihkZWNvZGVyLmIsIHZhbHVlLCBfTGlzdF9mcm9tQXJyYXkpOwoKCQljYXNlIDQ6CgkJCWlmICghX0pzb25faXNBcnJheSh2YWx1ZSkpCgkJCXsKCQkJCXJldHVybiBfSnNvbl9leHBlY3RpbmcoJ2FuIEFSUkFZJywgdmFsdWUpOwoJCQl9CgkJCXJldHVybiBfSnNvbl9ydW5BcnJheURlY29kZXIoZGVjb2Rlci5iLCB2YWx1ZSwgX0pzb25fdG9FbG1BcnJheSk7CgoJCWNhc2UgNjoKCQkJdmFyIGZpZWxkID0gZGVjb2Rlci5kOwoJCQlpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCB8fCAhKGZpZWxkIGluIHZhbHVlKSkKCQkJewoJCQkJcmV0dXJuIF9Kc29uX2V4cGVjdGluZygnYW4gT0JKRUNUIHdpdGggYSBmaWVsZCBuYW1lZCBgJyArIGZpZWxkICsgJ2AnLCB2YWx1ZSk7CgkJCX0KCQkJdmFyIHJlc3VsdCA9IF9Kc29uX3J1bkhlbHAoZGVjb2Rlci5iLCB2YWx1ZVtmaWVsZF0pOwoJCQlyZXR1cm4gKCRlbG0kY29yZSRSZXN1bHQkaXNPayhyZXN1bHQpKSA/IHJlc3VsdCA6ICRlbG0kY29yZSRSZXN1bHQkRXJyKEEyKCRlbG0kanNvbiRKc29uJERlY29kZSRGaWVsZCwgZmllbGQsIHJlc3VsdC5hKSk7CgoJCWNhc2UgNzoKCQkJdmFyIGluZGV4ID0gZGVjb2Rlci5lOwoJCQlpZiAoIV9Kc29uX2lzQXJyYXkodmFsdWUpKQoJCQl7CgkJCQlyZXR1cm4gX0pzb25fZXhwZWN0aW5nKCdhbiBBUlJBWScsIHZhbHVlKTsKCQkJfQoJCQlpZiAoaW5kZXggPj0gdmFsdWUubGVuZ3RoKQoJCQl7CgkJCQlyZXR1cm4gX0pzb25fZXhwZWN0aW5nKCdhIExPTkdFUiBhcnJheS4gTmVlZCBpbmRleCAnICsgaW5kZXggKyAnIGJ1dCBvbmx5IHNlZSAnICsgdmFsdWUubGVuZ3RoICsgJyBlbnRyaWVzJywgdmFsdWUpOwoJCQl9CgkJCXZhciByZXN1bHQgPSBfSnNvbl9ydW5IZWxwKGRlY29kZXIuYiwgdmFsdWVbaW5kZXhdKTsKCQkJcmV0dXJuICgkZWxtJGNvcmUkUmVzdWx0JGlzT2socmVzdWx0KSkgPyByZXN1bHQgOiAkZWxtJGNvcmUkUmVzdWx0JEVycihBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkSW5kZXgsIGluZGV4LCByZXN1bHQuYSkpOwoKCQljYXNlIDg6CgkJCWlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IHZhbHVlID09PSBudWxsIHx8IF9Kc29uX2lzQXJyYXkodmFsdWUpKQoJCQl7CgkJCQlyZXR1cm4gX0pzb25fZXhwZWN0aW5nKCdhbiBPQkpFQ1QnLCB2YWx1ZSk7CgkJCX0KCgkJCXZhciBrZXlWYWx1ZVBhaXJzID0gX0xpc3RfTmlsOwoJCQkvLyBUT0RPIHRlc3QgcGVyZiBvZiBPYmplY3Qua2V5cyBhbmQgc3dpdGNoIHdoZW4gc3VwcG9ydCBpcyBnb29kIGVub3VnaAoJCQlmb3IgKHZhciBrZXkgaW4gdmFsdWUpCgkJCXsKCQkJCWlmICh2YWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKQoJCQkJewoJCQkJCXZhciByZXN1bHQgPSBfSnNvbl9ydW5IZWxwKGRlY29kZXIuYiwgdmFsdWVba2V5XSk7CgkJCQkJaWYgKCEkZWxtJGNvcmUkUmVzdWx0JGlzT2socmVzdWx0KSkKCQkJCQl7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkRmllbGQsIGtleSwgcmVzdWx0LmEpKTsKCQkJCQl9CgkJCQkJa2V5VmFsdWVQYWlycyA9IF9MaXN0X0NvbnMoX1V0aWxzX1R1cGxlMihrZXksIHJlc3VsdC5hKSwga2V5VmFsdWVQYWlycyk7CgkJCQl9CgkJCX0KCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShrZXlWYWx1ZVBhaXJzKSk7CgoJCWNhc2UgOToKCQkJdmFyIGFuc3dlciA9IGRlY29kZXIuZjsKCQkJdmFyIGRlY29kZXJzID0gZGVjb2Rlci5nOwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGRlY29kZXJzLmxlbmd0aDsgaSsrKQoJCQl7CgkJCQl2YXIgcmVzdWx0ID0gX0pzb25fcnVuSGVscChkZWNvZGVyc1tpXSwgdmFsdWUpOwoJCQkJaWYgKCEkZWxtJGNvcmUkUmVzdWx0JGlzT2socmVzdWx0KSkKCQkJCXsKCQkJCQlyZXR1cm4gcmVzdWx0OwoJCQkJfQoJCQkJYW5zd2VyID0gYW5zd2VyKHJlc3VsdC5hKTsKCQkJfQoJCQlyZXR1cm4gJGVsbSRjb3JlJFJlc3VsdCRPayhhbnN3ZXIpOwoKCQljYXNlIDEwOgoJCQl2YXIgcmVzdWx0ID0gX0pzb25fcnVuSGVscChkZWNvZGVyLmIsIHZhbHVlKTsKCQkJcmV0dXJuICghJGVsbSRjb3JlJFJlc3VsdCRpc09rKHJlc3VsdCkpCgkJCQk/IHJlc3VsdAoJCQkJOiBfSnNvbl9ydW5IZWxwKGRlY29kZXIuaChyZXN1bHQuYSksIHZhbHVlKTsKCgkJY2FzZSAxMToKCQkJdmFyIGVycm9ycyA9IF9MaXN0X05pbDsKCQkJZm9yICh2YXIgdGVtcCA9IGRlY29kZXIuZzsgdGVtcC5iOyB0ZW1wID0gdGVtcC5iKSAvLyBXSElMRV9DT05TCgkJCXsKCQkJCXZhciByZXN1bHQgPSBfSnNvbl9ydW5IZWxwKHRlbXAuYSwgdmFsdWUpOwoJCQkJaWYgKCRlbG0kY29yZSRSZXN1bHQkaXNPayhyZXN1bHQpKQoJCQkJewoJCQkJCXJldHVybiByZXN1bHQ7CgkJCQl9CgkJCQllcnJvcnMgPSBfTGlzdF9Db25zKHJlc3VsdC5hLCBlcnJvcnMpOwoJCQl9CgkJCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycigkZWxtJGpzb24kSnNvbiREZWNvZGUkT25lT2YoJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShlcnJvcnMpKSk7CgoJCWNhc2UgMToKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKEEyKCRlbG0kanNvbiRKc29uJERlY29kZSRGYWlsdXJlLCBkZWNvZGVyLmEsIF9Kc29uX3dyYXAodmFsdWUpKSk7CgoJCWNhc2UgMDoKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkT2soZGVjb2Rlci5hKTsKCX0KfQoKZnVuY3Rpb24gX0pzb25fcnVuQXJyYXlEZWNvZGVyKGRlY29kZXIsIHZhbHVlLCB0b0VsbVZhbHVlKQp7Cgl2YXIgbGVuID0gdmFsdWUubGVuZ3RoOwoJdmFyIGFycmF5ID0gbmV3IEFycmF5KGxlbik7Cglmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKQoJewoJCXZhciByZXN1bHQgPSBfSnNvbl9ydW5IZWxwKGRlY29kZXIsIHZhbHVlW2ldKTsKCQlpZiAoISRlbG0kY29yZSRSZXN1bHQkaXNPayhyZXN1bHQpKQoJCXsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKEEyKCRlbG0kanNvbiRKc29uJERlY29kZSRJbmRleCwgaSwgcmVzdWx0LmEpKTsKCQl9CgkJYXJyYXlbaV0gPSByZXN1bHQuYTsKCX0KCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JE9rKHRvRWxtVmFsdWUoYXJyYXkpKTsKfQoKZnVuY3Rpb24gX0pzb25faXNBcnJheSh2YWx1ZSkKewoJcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpIHx8ICh0eXBlb2YgRmlsZUxpc3QgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlIGluc3RhbmNlb2YgRmlsZUxpc3QpOwp9CgpmdW5jdGlvbiBfSnNvbl90b0VsbUFycmF5KGFycmF5KQp7CglyZXR1cm4gQTIoJGVsbSRjb3JlJEFycmF5JGluaXRpYWxpemUsIGFycmF5Lmxlbmd0aCwgZnVuY3Rpb24oaSkgeyByZXR1cm4gYXJyYXlbaV07IH0pOwp9CgpmdW5jdGlvbiBfSnNvbl9leHBlY3RpbmcodHlwZSwgdmFsdWUpCnsKCXJldHVybiAkZWxtJGNvcmUkUmVzdWx0JEVycihBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkRmFpbHVyZSwgJ0V4cGVjdGluZyAnICsgdHlwZSwgX0pzb25fd3JhcCh2YWx1ZSkpKTsKfQoKCi8vIEVRVUFMSVRZCgpmdW5jdGlvbiBfSnNvbl9lcXVhbGl0eSh4LCB5KQp7CglpZiAoeCA9PT0geSkKCXsKCQlyZXR1cm4gdHJ1ZTsKCX0KCglpZiAoeC4kICE9PSB5LiQpCgl7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCXN3aXRjaCAoeC4kKQoJewoJCWNhc2UgMDoKCQljYXNlIDE6CgkJCXJldHVybiB4LmEgPT09IHkuYTsKCgkJY2FzZSAyOgoJCQlyZXR1cm4geC5iID09PSB5LmI7CgoJCWNhc2UgNToKCQkJcmV0dXJuIHguYyA9PT0geS5jOwoKCQljYXNlIDM6CgkJY2FzZSA0OgoJCWNhc2UgODoKCQkJcmV0dXJuIF9Kc29uX2VxdWFsaXR5KHguYiwgeS5iKTsKCgkJY2FzZSA2OgoJCQlyZXR1cm4geC5kID09PSB5LmQgJiYgX0pzb25fZXF1YWxpdHkoeC5iLCB5LmIpOwoKCQljYXNlIDc6CgkJCXJldHVybiB4LmUgPT09IHkuZSAmJiBfSnNvbl9lcXVhbGl0eSh4LmIsIHkuYik7CgoJCWNhc2UgOToKCQkJcmV0dXJuIHguZiA9PT0geS5mICYmIF9Kc29uX2xpc3RFcXVhbGl0eSh4LmcsIHkuZyk7CgoJCWNhc2UgMTA6CgkJCXJldHVybiB4LmggPT09IHkuaCAmJiBfSnNvbl9lcXVhbGl0eSh4LmIsIHkuYik7CgoJCWNhc2UgMTE6CgkJCXJldHVybiBfSnNvbl9saXN0RXF1YWxpdHkoeC5nLCB5LmcpOwoJfQp9CgpmdW5jdGlvbiBfSnNvbl9saXN0RXF1YWxpdHkoYURlY29kZXJzLCBiRGVjb2RlcnMpCnsKCXZhciBsZW4gPSBhRGVjb2RlcnMubGVuZ3RoOwoJaWYgKGxlbiAhPT0gYkRlY29kZXJzLmxlbmd0aCkKCXsKCQlyZXR1cm4gZmFsc2U7Cgl9Cglmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKQoJewoJCWlmICghX0pzb25fZXF1YWxpdHkoYURlY29kZXJzW2ldLCBiRGVjb2RlcnNbaV0pKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCXJldHVybiB0cnVlOwp9CgoKLy8gRU5DT0RFCgp2YXIgX0pzb25fZW5jb2RlID0gRjIoZnVuY3Rpb24oaW5kZW50TGV2ZWwsIHZhbHVlKQp7CglyZXR1cm4gSlNPTi5zdHJpbmdpZnkoX0pzb25fdW53cmFwKHZhbHVlKSwgbnVsbCwgaW5kZW50TGV2ZWwpICsgJyc7Cn0pOwoKZnVuY3Rpb24gX0pzb25fd3JhcCh2YWx1ZSkgeyByZXR1cm4geyAkOiAwLCBhOiB2YWx1ZSB9OyB9CmZ1bmN0aW9uIF9Kc29uX3Vud3JhcCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUuYTsgfQoKZnVuY3Rpb24gX0pzb25fd3JhcF9VTlVTRUQodmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9CmZ1bmN0aW9uIF9Kc29uX3Vud3JhcF9VTlVTRUQodmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9CgpmdW5jdGlvbiBfSnNvbl9lbXB0eUFycmF5KCkgeyByZXR1cm4gW107IH0KZnVuY3Rpb24gX0pzb25fZW1wdHlPYmplY3QoKSB7IHJldHVybiB7fTsgfQoKdmFyIF9Kc29uX2FkZEZpZWxkID0gRjMoZnVuY3Rpb24oa2V5LCB2YWx1ZSwgb2JqZWN0KQp7CglvYmplY3Rba2V5XSA9IF9Kc29uX3Vud3JhcCh2YWx1ZSk7CglyZXR1cm4gb2JqZWN0Owp9KTsKCmZ1bmN0aW9uIF9Kc29uX2FkZEVudHJ5KGZ1bmMpCnsKCXJldHVybiBGMihmdW5jdGlvbihlbnRyeSwgYXJyYXkpCgl7CgkJYXJyYXkucHVzaChfSnNvbl91bndyYXAoZnVuYyhlbnRyeSkpKTsKCQlyZXR1cm4gYXJyYXk7Cgl9KTsKfQoKdmFyIF9Kc29uX2VuY29kZU51bGwgPSBfSnNvbl93cmFwKG51bGwpOwoKCgovLyBUQVNLUwoKZnVuY3Rpb24gX1NjaGVkdWxlcl9zdWNjZWVkKHZhbHVlKQp7CglyZXR1cm4gewoJCSQ6IDAsCgkJYTogdmFsdWUKCX07Cn0KCmZ1bmN0aW9uIF9TY2hlZHVsZXJfZmFpbChlcnJvcikKewoJcmV0dXJuIHsKCQkkOiAxLAoJCWE6IGVycm9yCgl9Owp9CgpmdW5jdGlvbiBfU2NoZWR1bGVyX2JpbmRpbmcoY2FsbGJhY2spCnsKCXJldHVybiB7CgkJJDogMiwKCQliOiBjYWxsYmFjaywKCQljOiBudWxsCgl9Owp9Cgp2YXIgX1NjaGVkdWxlcl9hbmRUaGVuID0gRjIoZnVuY3Rpb24oY2FsbGJhY2ssIHRhc2spCnsKCXJldHVybiB7CgkJJDogMywKCQliOiBjYWxsYmFjaywKCQlkOiB0YXNrCgl9Owp9KTsKCnZhciBfU2NoZWR1bGVyX29uRXJyb3IgPSBGMihmdW5jdGlvbihjYWxsYmFjaywgdGFzaykKewoJcmV0dXJuIHsKCQkkOiA0LAoJCWI6IGNhbGxiYWNrLAoJCWQ6IHRhc2sKCX07Cn0pOwoKZnVuY3Rpb24gX1NjaGVkdWxlcl9yZWNlaXZlKGNhbGxiYWNrKQp7CglyZXR1cm4gewoJCSQ6IDUsCgkJYjogY2FsbGJhY2sKCX07Cn0KCgovLyBQUk9DRVNTRVMKCnZhciBfU2NoZWR1bGVyX2d1aWQgPSAwOwoKZnVuY3Rpb24gX1NjaGVkdWxlcl9yYXdTcGF3bih0YXNrKQp7Cgl2YXIgcHJvYyA9IHsKCQkkOiAwLAoJCWU6IF9TY2hlZHVsZXJfZ3VpZCsrLAoJCWY6IHRhc2ssCgkJZzogbnVsbCwKCQloOiBbXQoJfTsKCglfU2NoZWR1bGVyX2VucXVldWUocHJvYyk7CgoJcmV0dXJuIHByb2M7Cn0KCmZ1bmN0aW9uIF9TY2hlZHVsZXJfc3Bhd24odGFzaykKewoJcmV0dXJuIF9TY2hlZHVsZXJfYmluZGluZyhmdW5jdGlvbihjYWxsYmFjaykgewoJCWNhbGxiYWNrKF9TY2hlZHVsZXJfc3VjY2VlZChfU2NoZWR1bGVyX3Jhd1NwYXduKHRhc2spKSk7Cgl9KTsKfQoKZnVuY3Rpb24gX1NjaGVkdWxlcl9yYXdTZW5kKHByb2MsIG1zZykKewoJcHJvYy5oLnB1c2gobXNnKTsKCV9TY2hlZHVsZXJfZW5xdWV1ZShwcm9jKTsKfQoKdmFyIF9TY2hlZHVsZXJfc2VuZCA9IEYyKGZ1bmN0aW9uKHByb2MsIG1zZykKewoJcmV0dXJuIF9TY2hlZHVsZXJfYmluZGluZyhmdW5jdGlvbihjYWxsYmFjaykgewoJCV9TY2hlZHVsZXJfcmF3U2VuZChwcm9jLCBtc2cpOwoJCWNhbGxiYWNrKF9TY2hlZHVsZXJfc3VjY2VlZChfVXRpbHNfVHVwbGUwKSk7Cgl9KTsKfSk7CgpmdW5jdGlvbiBfU2NoZWR1bGVyX2tpbGwocHJvYykKewoJcmV0dXJuIF9TY2hlZHVsZXJfYmluZGluZyhmdW5jdGlvbihjYWxsYmFjaykgewoJCXZhciB0YXNrID0gcHJvYy5mOwoJCWlmICh0YXNrLiQgPT09IDIgJiYgdGFzay5jKQoJCXsKCQkJdGFzay5jKCk7CgkJfQoKCQlwcm9jLmYgPSBudWxsOwoKCQljYWxsYmFjayhfU2NoZWR1bGVyX3N1Y2NlZWQoX1V0aWxzX1R1cGxlMCkpOwoJfSk7Cn0KCgovKiBTVEVQIFBST0NFU1NFUwoKdHlwZSBhbGlhcyBQcm9jZXNzID0KICB7ICQgOiB0YWcKICAsIGlkIDogdW5pcXVlX2lkCiAgLCByb290IDogVGFzawogICwgc3RhY2sgOiBudWxsIHwgeyAkOiBTVUNDRUVEIHwgRkFJTCwgYTogY2FsbGJhY2ssIGI6IHN0YWNrIH0KICAsIG1haWxib3ggOiBbbXNnXQogIH0KCiovCgoKdmFyIF9TY2hlZHVsZXJfd29ya2luZyA9IGZhbHNlOwp2YXIgX1NjaGVkdWxlcl9xdWV1ZSA9IFtdOwoKCmZ1bmN0aW9uIF9TY2hlZHVsZXJfZW5xdWV1ZShwcm9jKQp7CglfU2NoZWR1bGVyX3F1ZXVlLnB1c2gocHJvYyk7CglpZiAoX1NjaGVkdWxlcl93b3JraW5nKQoJewoJCXJldHVybjsKCX0KCV9TY2hlZHVsZXJfd29ya2luZyA9IHRydWU7Cgl3aGlsZSAocHJvYyA9IF9TY2hlZHVsZXJfcXVldWUuc2hpZnQoKSkKCXsKCQlfU2NoZWR1bGVyX3N0ZXAocHJvYyk7Cgl9CglfU2NoZWR1bGVyX3dvcmtpbmcgPSBmYWxzZTsKfQoKCmZ1bmN0aW9uIF9TY2hlZHVsZXJfc3RlcChwcm9jKQp7Cgl3aGlsZSAocHJvYy5mKQoJewoJCXZhciByb290VGFnID0gcHJvYy5mLiQ7CgkJaWYgKHJvb3RUYWcgPT09IDAgfHwgcm9vdFRhZyA9PT0gMSkKCQl7CgkJCXdoaWxlIChwcm9jLmcgJiYgcHJvYy5nLiQgIT09IHJvb3RUYWcpCgkJCXsKCQkJCXByb2MuZyA9IHByb2MuZy5pOwoJCQl9CgkJCWlmICghcHJvYy5nKQoJCQl7CgkJCQlyZXR1cm47CgkJCX0KCQkJcHJvYy5mID0gcHJvYy5nLmIocHJvYy5mLmEpOwoJCQlwcm9jLmcgPSBwcm9jLmcuaTsKCQl9CgkJZWxzZSBpZiAocm9vdFRhZyA9PT0gMikKCQl7CgkJCXByb2MuZi5jID0gcHJvYy5mLmIoZnVuY3Rpb24obmV3Um9vdCkgewoJCQkJcHJvYy5mID0gbmV3Um9vdDsKCQkJCV9TY2hlZHVsZXJfZW5xdWV1ZShwcm9jKTsKCQkJfSk7CgkJCXJldHVybjsKCQl9CgkJZWxzZSBpZiAocm9vdFRhZyA9PT0gNSkKCQl7CgkJCWlmIChwcm9jLmgubGVuZ3RoID09PSAwKQoJCQl7CgkJCQlyZXR1cm47CgkJCX0KCQkJcHJvYy5mID0gcHJvYy5mLmIocHJvYy5oLnNoaWZ0KCkpOwoJCX0KCQllbHNlIC8vIGlmIChyb290VGFnID09PSAzIHx8IHJvb3RUYWcgPT09IDQpCgkJewoJCQlwcm9jLmcgPSB7CgkJCQkkOiByb290VGFnID09PSAzID8gMCA6IDEsCgkJCQliOiBwcm9jLmYuYiwKCQkJCWk6IHByb2MuZwoJCQl9OwoJCQlwcm9jLmYgPSBwcm9jLmYuZDsKCQl9Cgl9Cn0KCgoKZnVuY3Rpb24gX1Byb2Nlc3Nfc2xlZXAodGltZSkKewoJcmV0dXJuIF9TY2hlZHVsZXJfYmluZGluZyhmdW5jdGlvbihjYWxsYmFjaykgewoJCXZhciBpZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCWNhbGxiYWNrKF9TY2hlZHVsZXJfc3VjY2VlZChfVXRpbHNfVHVwbGUwKSk7CgkJfSwgdGltZSk7CgoJCXJldHVybiBmdW5jdGlvbigpIHsgY2xlYXJUaW1lb3V0KGlkKTsgfTsKCX0pOwp9CgoKCgovLyBQUk9HUkFNUwoKCnZhciBfUGxhdGZvcm1fd29ya2VyID0gRjQoZnVuY3Rpb24oaW1wbCwgZmxhZ0RlY29kZXIsIGRlYnVnTWV0YWRhdGEsIGFyZ3MpCnsKCXJldHVybiBfUGxhdGZvcm1faW5pdGlhbGl6ZSgKCQlmbGFnRGVjb2RlciwKCQlhcmdzLAoJCWltcGwuaW5pdCwKCQlpbXBsLnVwZGF0ZSwKCQlpbXBsLnN1YnNjcmlwdGlvbnMsCgkJZnVuY3Rpb24oKSB7IHJldHVybiBmdW5jdGlvbigpIHt9IH0KCSk7Cn0pOwoKCgovLyBJTklUSUFMSVpFIEEgUFJPR1JBTQoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9pbml0aWFsaXplKGZsYWdEZWNvZGVyLCBhcmdzLCBpbml0LCB1cGRhdGUsIHN1YnNjcmlwdGlvbnMsIHN0ZXBwZXJCdWlsZGVyKQp7Cgl2YXIgcmVzdWx0ID0gQTIoX0pzb25fcnVuLCBmbGFnRGVjb2RlciwgX0pzb25fd3JhcChhcmdzID8gYXJnc1snZmxhZ3MnXSA6IHVuZGVmaW5lZCkpOwoJJGVsbSRjb3JlJFJlc3VsdCRpc09rKHJlc3VsdCkgfHwgX0RlYnVnX2NyYXNoKDIgLyoqLywgX0pzb25fZXJyb3JUb1N0cmluZyhyZXN1bHQuYSkgLyoqLyk7Cgl2YXIgbWFuYWdlcnMgPSB7fTsKCXZhciBpbml0UGFpciA9IGluaXQocmVzdWx0LmEpOwoJdmFyIG1vZGVsID0gaW5pdFBhaXIuYTsKCXZhciBzdGVwcGVyID0gc3RlcHBlckJ1aWxkZXIoc2VuZFRvQXBwLCBtb2RlbCk7Cgl2YXIgcG9ydHMgPSBfUGxhdGZvcm1fc2V0dXBFZmZlY3RzKG1hbmFnZXJzLCBzZW5kVG9BcHApOwoKCWZ1bmN0aW9uIHNlbmRUb0FwcChtc2csIHZpZXdNZXRhZGF0YSkKCXsKCQl2YXIgcGFpciA9IEEyKHVwZGF0ZSwgbXNnLCBtb2RlbCk7CgkJc3RlcHBlcihtb2RlbCA9IHBhaXIuYSwgdmlld01ldGFkYXRhKTsKCQlfUGxhdGZvcm1fZW5xdWV1ZUVmZmVjdHMobWFuYWdlcnMsIHBhaXIuYiwgc3Vic2NyaXB0aW9ucyhtb2RlbCkpOwoJfQoKCV9QbGF0Zm9ybV9lbnF1ZXVlRWZmZWN0cyhtYW5hZ2VycywgaW5pdFBhaXIuYiwgc3Vic2NyaXB0aW9ucyhtb2RlbCkpOwoKCXJldHVybiBwb3J0cyA/IHsgcG9ydHM6IHBvcnRzIH0gOiB7fTsKfQoKCgovLyBUUkFDSyBQUkVMT0FEUwovLwovLyBUaGlzIGlzIHVzZWQgYnkgY29kZSBpbiBlbG0vYnJvd3NlciBhbmQgZWxtL2h0dHAKLy8gdG8gcmVnaXN0ZXIgYW55IEhUVFAgcmVxdWVzdHMgdGhhdCBhcmUgdHJpZ2dlcmVkIGJ5IGluaXQuCi8vCgoKdmFyIF9QbGF0Zm9ybV9wcmVsb2FkOwoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9yZWdpc3RlclByZWxvYWQodXJsKQp7CglfUGxhdGZvcm1fcHJlbG9hZC5hZGQodXJsKTsKfQoKCgovLyBFRkZFQ1QgTUFOQUdFUlMKCgp2YXIgX1BsYXRmb3JtX2VmZmVjdE1hbmFnZXJzID0ge307CgoKZnVuY3Rpb24gX1BsYXRmb3JtX3NldHVwRWZmZWN0cyhtYW5hZ2Vycywgc2VuZFRvQXBwKQp7Cgl2YXIgcG9ydHM7CgoJLy8gc2V0dXAgYWxsIG5lY2Vzc2FyeSBlZmZlY3QgbWFuYWdlcnMKCWZvciAodmFyIGtleSBpbiBfUGxhdGZvcm1fZWZmZWN0TWFuYWdlcnMpCgl7CgkJdmFyIG1hbmFnZXIgPSBfUGxhdGZvcm1fZWZmZWN0TWFuYWdlcnNba2V5XTsKCgkJaWYgKG1hbmFnZXIuYSkKCQl7CgkJCXBvcnRzID0gcG9ydHMgfHwge307CgkJCXBvcnRzW2tleV0gPSBtYW5hZ2VyLmEoa2V5LCBzZW5kVG9BcHApOwoJCX0KCgkJbWFuYWdlcnNba2V5XSA9IF9QbGF0Zm9ybV9pbnN0YW50aWF0ZU1hbmFnZXIobWFuYWdlciwgc2VuZFRvQXBwKTsKCX0KCglyZXR1cm4gcG9ydHM7Cn0KCgpmdW5jdGlvbiBfUGxhdGZvcm1fY3JlYXRlTWFuYWdlcihpbml0LCBvbkVmZmVjdHMsIG9uU2VsZk1zZywgY21kTWFwLCBzdWJNYXApCnsKCXJldHVybiB7CgkJYjogaW5pdCwKCQljOiBvbkVmZmVjdHMsCgkJZDogb25TZWxmTXNnLAoJCWU6IGNtZE1hcCwKCQlmOiBzdWJNYXAKCX07Cn0KCgpmdW5jdGlvbiBfUGxhdGZvcm1faW5zdGFudGlhdGVNYW5hZ2VyKGluZm8sIHNlbmRUb0FwcCkKewoJdmFyIHJvdXRlciA9IHsKCQlnOiBzZW5kVG9BcHAsCgkJaDogdW5kZWZpbmVkCgl9OwoKCXZhciBvbkVmZmVjdHMgPSBpbmZvLmM7Cgl2YXIgb25TZWxmTXNnID0gaW5mby5kOwoJdmFyIGNtZE1hcCA9IGluZm8uZTsKCXZhciBzdWJNYXAgPSBpbmZvLmY7CgoJZnVuY3Rpb24gbG9vcChzdGF0ZSkKCXsKCQlyZXR1cm4gQTIoX1NjaGVkdWxlcl9hbmRUaGVuLCBsb29wLCBfU2NoZWR1bGVyX3JlY2VpdmUoZnVuY3Rpb24obXNnKQoJCXsKCQkJdmFyIHZhbHVlID0gbXNnLmE7CgoJCQlpZiAobXNnLiQgPT09IDApCgkJCXsKCQkJCXJldHVybiBBMyhvblNlbGZNc2csIHJvdXRlciwgdmFsdWUsIHN0YXRlKTsKCQkJfQoKCQkJcmV0dXJuIGNtZE1hcCAmJiBzdWJNYXAKCQkJCT8gQTQob25FZmZlY3RzLCByb3V0ZXIsIHZhbHVlLmksIHZhbHVlLmosIHN0YXRlKQoJCQkJOiBBMyhvbkVmZmVjdHMsIHJvdXRlciwgY21kTWFwID8gdmFsdWUuaSA6IHZhbHVlLmosIHN0YXRlKTsKCQl9KSk7Cgl9CgoJcmV0dXJuIHJvdXRlci5oID0gX1NjaGVkdWxlcl9yYXdTcGF3bihBMihfU2NoZWR1bGVyX2FuZFRoZW4sIGxvb3AsIGluZm8uYikpOwp9CgoKCi8vIFJPVVRJTkcKCgp2YXIgX1BsYXRmb3JtX3NlbmRUb0FwcCA9IEYyKGZ1bmN0aW9uKHJvdXRlciwgbXNnKQp7CglyZXR1cm4gX1NjaGVkdWxlcl9iaW5kaW5nKGZ1bmN0aW9uKGNhbGxiYWNrKQoJewoJCXJvdXRlci5nKG1zZyk7CgkJY2FsbGJhY2soX1NjaGVkdWxlcl9zdWNjZWVkKF9VdGlsc19UdXBsZTApKTsKCX0pOwp9KTsKCgp2YXIgX1BsYXRmb3JtX3NlbmRUb1NlbGYgPSBGMihmdW5jdGlvbihyb3V0ZXIsIG1zZykKewoJcmV0dXJuIEEyKF9TY2hlZHVsZXJfc2VuZCwgcm91dGVyLmgsIHsKCQkkOiAwLAoJCWE6IG1zZwoJfSk7Cn0pOwoKCgovLyBCQUdTCgoKZnVuY3Rpb24gX1BsYXRmb3JtX2xlYWYoaG9tZSkKewoJcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKQoJewoJCXJldHVybiB7CgkJCSQ6IDEsCgkJCWs6IGhvbWUsCgkJCWw6IHZhbHVlCgkJfTsKCX07Cn0KCgpmdW5jdGlvbiBfUGxhdGZvcm1fYmF0Y2gobGlzdCkKewoJcmV0dXJuIHsKCQkkOiAyLAoJCW06IGxpc3QKCX07Cn0KCgp2YXIgX1BsYXRmb3JtX21hcCA9IEYyKGZ1bmN0aW9uKHRhZ2dlciwgYmFnKQp7CglyZXR1cm4gewoJCSQ6IDMsCgkJbjogdGFnZ2VyLAoJCW86IGJhZwoJfQp9KTsKCgoKLy8gUElQRSBCQUdTIElOVE8gRUZGRUNUIE1BTkFHRVJTCi8vCi8vIEVmZmVjdHMgbXVzdCBiZSBxdWV1ZWQhCi8vCi8vIFNheSB5b3VyIGluaXQgY29udGFpbnMgYSBzeW5jaHJvbm91cyBjb21tYW5kLCBsaWtlIFRpbWUubm93IG9yIFRpbWUuaGVyZQovLwovLyAgIC0gVGhpcyB3aWxsIHByb2R1Y2UgYSBiYXRjaCBvZiBlZmZlY3RzIChGWF8xKQovLyAgIC0gVGhlIHN5bmNocm9ub3VzIHRhc2sgdHJpZ2dlcnMgdGhlIHN1YnNlcXVlbnQgYHVwZGF0ZWAgY2FsbAovLyAgIC0gVGhpcyB3aWxsIHByb2R1Y2UgYSBiYXRjaCBvZiBlZmZlY3RzIChGWF8yKQovLwovLyBJZiB3ZSBqdXN0IHN0YXJ0IGRpc3BhdGNoaW5nIEZYXzIsIHN1YnNjcmlwdGlvbnMgZnJvbSBGWF8yIGNhbiBiZSBwcm9jZXNzZWQKLy8gYmVmb3JlIHN1YnNjcmlwdGlvbnMgZnJvbSBGWF8xLiBObyBnb29kISBFYXJsaWVyIHZlcnNpb25zIG9mIHRoaXMgY29kZSBoYWQKLy8gdGhpcyBwcm9ibGVtLCBsZWFkaW5nIHRvIHRoZXNlIHJlcG9ydHM6Ci8vCi8vICAgaHR0cHM6Ly9naXRodWIuY29tL2VsbS9jb3JlL2lzc3Vlcy85ODAKLy8gICBodHRwczovL2dpdGh1Yi5jb20vZWxtL2NvcmUvcHVsbC85ODEKLy8gICBodHRwczovL2dpdGh1Yi5jb20vZWxtL2NvbXBpbGVyL2lzc3Vlcy8xNzc2Ci8vCi8vIFRoZSBxdWV1ZSBpcyBuZWNlc3NhcnkgdG8gYXZvaWQgb3JkZXJpbmcgaXNzdWVzIGZvciBzeW5jaHJvbm91cyBjb21tYW5kcy4KCgovLyBXaHkgdXNlIHRydWUvZmFsc2UgaGVyZT8gV2h5IG5vdCBqdXN0IGNoZWNrIHRoZSBsZW5ndGggb2YgdGhlIHF1ZXVlPwovLyBUaGUgZ29hbCBpcyB0byBkZXRlY3QgImFyZSB3ZSBjdXJyZW50bHkgZGlzcGF0Y2hpbmcgZWZmZWN0cz8iIElmIHdlCi8vIGFyZSwgd2UgbmVlZCB0byBiYWlsIGFuZCBsZXQgdGhlIG9uZ29pbmcgd2hpbGUgbG9vcCBoYW5kbGUgdGhpbmdzLgovLwovLyBOb3cgc2F5IHRoZSBxdWV1ZSBoYXMgMSBlbGVtZW50LiBXaGVuIHdlIGRlcXVldWUgdGhlIGZpbmFsIGVsZW1lbnQsCi8vIHRoZSBxdWV1ZSB3aWxsIGJlIGVtcHR5LCBidXQgd2UgYXJlIHN0aWxsIGFjdGl2ZWx5IGRpc3BhdGNoaW5nIGVmZmVjdHMuCi8vIFNvIHlvdSBjb3VsZCBnZXQgcXVldWUganVtcGluZyBpbiBhIHJlYWxseSB0cmlja3kgY2F0ZWdvcnkgb2YgY2FzZXMuCi8vCnZhciBfUGxhdGZvcm1fZWZmZWN0c1F1ZXVlID0gW107CnZhciBfUGxhdGZvcm1fZWZmZWN0c0FjdGl2ZSA9IGZhbHNlOwoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9lbnF1ZXVlRWZmZWN0cyhtYW5hZ2VycywgY21kQmFnLCBzdWJCYWcpCnsKCV9QbGF0Zm9ybV9lZmZlY3RzUXVldWUucHVzaCh7IHA6IG1hbmFnZXJzLCBxOiBjbWRCYWcsIHI6IHN1YkJhZyB9KTsKCglpZiAoX1BsYXRmb3JtX2VmZmVjdHNBY3RpdmUpIHJldHVybjsKCglfUGxhdGZvcm1fZWZmZWN0c0FjdGl2ZSA9IHRydWU7Cglmb3IgKHZhciBmeDsgZnggPSBfUGxhdGZvcm1fZWZmZWN0c1F1ZXVlLnNoaWZ0KCk7ICkKCXsKCQlfUGxhdGZvcm1fZGlzcGF0Y2hFZmZlY3RzKGZ4LnAsIGZ4LnEsIGZ4LnIpOwoJfQoJX1BsYXRmb3JtX2VmZmVjdHNBY3RpdmUgPSBmYWxzZTsKfQoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9kaXNwYXRjaEVmZmVjdHMobWFuYWdlcnMsIGNtZEJhZywgc3ViQmFnKQp7Cgl2YXIgZWZmZWN0c0RpY3QgPSB7fTsKCV9QbGF0Zm9ybV9nYXRoZXJFZmZlY3RzKHRydWUsIGNtZEJhZywgZWZmZWN0c0RpY3QsIG51bGwpOwoJX1BsYXRmb3JtX2dhdGhlckVmZmVjdHMoZmFsc2UsIHN1YkJhZywgZWZmZWN0c0RpY3QsIG51bGwpOwoKCWZvciAodmFyIGhvbWUgaW4gbWFuYWdlcnMpCgl7CgkJX1NjaGVkdWxlcl9yYXdTZW5kKG1hbmFnZXJzW2hvbWVdLCB7CgkJCSQ6ICdmeCcsCgkJCWE6IGVmZmVjdHNEaWN0W2hvbWVdIHx8IHsgaTogX0xpc3RfTmlsLCBqOiBfTGlzdF9OaWwgfQoJCX0pOwoJfQp9CgoKZnVuY3Rpb24gX1BsYXRmb3JtX2dhdGhlckVmZmVjdHMoaXNDbWQsIGJhZywgZWZmZWN0c0RpY3QsIHRhZ2dlcnMpCnsKCXN3aXRjaCAoYmFnLiQpCgl7CgkJY2FzZSAxOgoJCQl2YXIgaG9tZSA9IGJhZy5rOwoJCQl2YXIgZWZmZWN0ID0gX1BsYXRmb3JtX3RvRWZmZWN0KGlzQ21kLCBob21lLCB0YWdnZXJzLCBiYWcubCk7CgkJCWVmZmVjdHNEaWN0W2hvbWVdID0gX1BsYXRmb3JtX2luc2VydChpc0NtZCwgZWZmZWN0LCBlZmZlY3RzRGljdFtob21lXSk7CgkJCXJldHVybjsKCgkJY2FzZSAyOgoJCQlmb3IgKHZhciBsaXN0ID0gYmFnLm07IGxpc3QuYjsgbGlzdCA9IGxpc3QuYikgLy8gV0hJTEVfQ09OUwoJCQl7CgkJCQlfUGxhdGZvcm1fZ2F0aGVyRWZmZWN0cyhpc0NtZCwgbGlzdC5hLCBlZmZlY3RzRGljdCwgdGFnZ2Vycyk7CgkJCX0KCQkJcmV0dXJuOwoKCQljYXNlIDM6CgkJCV9QbGF0Zm9ybV9nYXRoZXJFZmZlY3RzKGlzQ21kLCBiYWcubywgZWZmZWN0c0RpY3QsIHsKCQkJCXM6IGJhZy5uLAoJCQkJdDogdGFnZ2VycwoJCQl9KTsKCQkJcmV0dXJuOwoJfQp9CgoKZnVuY3Rpb24gX1BsYXRmb3JtX3RvRWZmZWN0KGlzQ21kLCBob21lLCB0YWdnZXJzLCB2YWx1ZSkKewoJZnVuY3Rpb24gYXBwbHlUYWdnZXJzKHgpCgl7CgkJZm9yICh2YXIgdGVtcCA9IHRhZ2dlcnM7IHRlbXA7IHRlbXAgPSB0ZW1wLnQpCgkJewoJCQl4ID0gdGVtcC5zKHgpOwoJCX0KCQlyZXR1cm4geDsKCX0KCgl2YXIgbWFwID0gaXNDbWQKCQk/IF9QbGF0Zm9ybV9lZmZlY3RNYW5hZ2Vyc1tob21lXS5lCgkJOiBfUGxhdGZvcm1fZWZmZWN0TWFuYWdlcnNbaG9tZV0uZjsKCglyZXR1cm4gQTIobWFwLCBhcHBseVRhZ2dlcnMsIHZhbHVlKQp9CgoKZnVuY3Rpb24gX1BsYXRmb3JtX2luc2VydChpc0NtZCwgbmV3RWZmZWN0LCBlZmZlY3RzKQp7CgllZmZlY3RzID0gZWZmZWN0cyB8fCB7IGk6IF9MaXN0X05pbCwgajogX0xpc3RfTmlsIH07CgoJaXNDbWQKCQk/IChlZmZlY3RzLmkgPSBfTGlzdF9Db25zKG5ld0VmZmVjdCwgZWZmZWN0cy5pKSkKCQk6IChlZmZlY3RzLmogPSBfTGlzdF9Db25zKG5ld0VmZmVjdCwgZWZmZWN0cy5qKSk7CgoJcmV0dXJuIGVmZmVjdHM7Cn0KCgoKLy8gUE9SVFMKCgpmdW5jdGlvbiBfUGxhdGZvcm1fY2hlY2tQb3J0TmFtZShuYW1lKQp7CglpZiAoX1BsYXRmb3JtX2VmZmVjdE1hbmFnZXJzW25hbWVdKQoJewoJCV9EZWJ1Z19jcmFzaCgzLCBuYW1lKQoJfQp9CgoKCi8vIE9VVEdPSU5HIFBPUlRTCgoKZnVuY3Rpb24gX1BsYXRmb3JtX291dGdvaW5nUG9ydChuYW1lLCBjb252ZXJ0ZXIpCnsKCV9QbGF0Zm9ybV9jaGVja1BvcnROYW1lKG5hbWUpOwoJX1BsYXRmb3JtX2VmZmVjdE1hbmFnZXJzW25hbWVdID0gewoJCWU6IF9QbGF0Zm9ybV9vdXRnb2luZ1BvcnRNYXAsCgkJdTogY29udmVydGVyLAoJCWE6IF9QbGF0Zm9ybV9zZXR1cE91dGdvaW5nUG9ydAoJfTsKCXJldHVybiBfUGxhdGZvcm1fbGVhZihuYW1lKTsKfQoKCnZhciBfUGxhdGZvcm1fb3V0Z29pbmdQb3J0TWFwID0gRjIoZnVuY3Rpb24odGFnZ2VyLCB2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH0pOwoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9zZXR1cE91dGdvaW5nUG9ydChuYW1lKQp7Cgl2YXIgc3VicyA9IFtdOwoJdmFyIGNvbnZlcnRlciA9IF9QbGF0Zm9ybV9lZmZlY3RNYW5hZ2Vyc1tuYW1lXS51OwoKCS8vIENSRUFURSBNQU5BR0VSCgoJdmFyIGluaXQgPSBfUHJvY2Vzc19zbGVlcCgwKTsKCglfUGxhdGZvcm1fZWZmZWN0TWFuYWdlcnNbbmFtZV0uYiA9IGluaXQ7CglfUGxhdGZvcm1fZWZmZWN0TWFuYWdlcnNbbmFtZV0uYyA9IEYzKGZ1bmN0aW9uKHJvdXRlciwgY21kTGlzdCwgc3RhdGUpCgl7CgkJZm9yICggOyBjbWRMaXN0LmI7IGNtZExpc3QgPSBjbWRMaXN0LmIpIC8vIFdISUxFX0NPTlMKCQl7CgkJCS8vIGdyYWIgYSBzZXBhcmF0ZSByZWZlcmVuY2UgdG8gc3VicyBpbiBjYXNlIHVuc3Vic2NyaWJlIGlzIGNhbGxlZAoJCQl2YXIgY3VycmVudFN1YnMgPSBzdWJzOwoJCQl2YXIgdmFsdWUgPSBfSnNvbl91bndyYXAoY29udmVydGVyKGNtZExpc3QuYSkpOwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGN1cnJlbnRTdWJzLmxlbmd0aDsgaSsrKQoJCQl7CgkJCQljdXJyZW50U3Vic1tpXSh2YWx1ZSk7CgkJCX0KCQl9CgkJcmV0dXJuIGluaXQ7Cgl9KTsKCgkvLyBQVUJMSUMgQVBJCgoJZnVuY3Rpb24gc3Vic2NyaWJlKGNhbGxiYWNrKQoJewoJCXN1YnMucHVzaChjYWxsYmFjayk7Cgl9CgoJZnVuY3Rpb24gdW5zdWJzY3JpYmUoY2FsbGJhY2spCgl7CgkJLy8gY29weSBzdWJzIGludG8gYSBuZXcgYXJyYXkgaW4gY2FzZSB1bnN1YnNjcmliZSBpcyBjYWxsZWQgd2l0aGluIGEKCQkvLyBzdWJzY3JpYmVkIGNhbGxiYWNrCgkJc3VicyA9IHN1YnMuc2xpY2UoKTsKCQl2YXIgaW5kZXggPSBzdWJzLmluZGV4T2YoY2FsbGJhY2spOwoJCWlmIChpbmRleCA+PSAwKQoJCXsKCQkJc3Vicy5zcGxpY2UoaW5kZXgsIDEpOwoJCX0KCX0KCglyZXR1cm4gewoJCXN1YnNjcmliZTogc3Vic2NyaWJlLAoJCXVuc3Vic2NyaWJlOiB1bnN1YnNjcmliZQoJfTsKfQoKCgovLyBJTkNPTUlORyBQT1JUUwoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9pbmNvbWluZ1BvcnQobmFtZSwgY29udmVydGVyKQp7CglfUGxhdGZvcm1fY2hlY2tQb3J0TmFtZShuYW1lKTsKCV9QbGF0Zm9ybV9lZmZlY3RNYW5hZ2Vyc1tuYW1lXSA9IHsKCQlmOiBfUGxhdGZvcm1faW5jb21pbmdQb3J0TWFwLAoJCXU6IGNvbnZlcnRlciwKCQlhOiBfUGxhdGZvcm1fc2V0dXBJbmNvbWluZ1BvcnQKCX07CglyZXR1cm4gX1BsYXRmb3JtX2xlYWYobmFtZSk7Cn0KCgp2YXIgX1BsYXRmb3JtX2luY29taW5nUG9ydE1hcCA9IEYyKGZ1bmN0aW9uKHRhZ2dlciwgZmluYWxUYWdnZXIpCnsKCXJldHVybiBmdW5jdGlvbih2YWx1ZSkKCXsKCQlyZXR1cm4gdGFnZ2VyKGZpbmFsVGFnZ2VyKHZhbHVlKSk7Cgl9Owp9KTsKCgpmdW5jdGlvbiBfUGxhdGZvcm1fc2V0dXBJbmNvbWluZ1BvcnQobmFtZSwgc2VuZFRvQXBwKQp7Cgl2YXIgc3VicyA9IF9MaXN0X05pbDsKCXZhciBjb252ZXJ0ZXIgPSBfUGxhdGZvcm1fZWZmZWN0TWFuYWdlcnNbbmFtZV0udTsKCgkvLyBDUkVBVEUgTUFOQUdFUgoKCXZhciBpbml0ID0gX1NjaGVkdWxlcl9zdWNjZWVkKG51bGwpOwoKCV9QbGF0Zm9ybV9lZmZlY3RNYW5hZ2Vyc1tuYW1lXS5iID0gaW5pdDsKCV9QbGF0Zm9ybV9lZmZlY3RNYW5hZ2Vyc1tuYW1lXS5jID0gRjMoZnVuY3Rpb24ocm91dGVyLCBzdWJMaXN0LCBzdGF0ZSkKCXsKCQlzdWJzID0gc3ViTGlzdDsKCQlyZXR1cm4gaW5pdDsKCX0pOwoKCS8vIFBVQkxJQyBBUEkKCglmdW5jdGlvbiBzZW5kKGluY29taW5nVmFsdWUpCgl7CgkJdmFyIHJlc3VsdCA9IEEyKF9Kc29uX3J1biwgY29udmVydGVyLCBfSnNvbl93cmFwKGluY29taW5nVmFsdWUpKTsKCgkJJGVsbSRjb3JlJFJlc3VsdCRpc09rKHJlc3VsdCkgfHwgX0RlYnVnX2NyYXNoKDQsIG5hbWUsIHJlc3VsdC5hKTsKCgkJdmFyIHZhbHVlID0gcmVzdWx0LmE7CgkJZm9yICh2YXIgdGVtcCA9IHN1YnM7IHRlbXAuYjsgdGVtcCA9IHRlbXAuYikgLy8gV0hJTEVfQ09OUwoJCXsKCQkJc2VuZFRvQXBwKHRlbXAuYSh2YWx1ZSkpOwoJCX0KCX0KCglyZXR1cm4geyBzZW5kOiBzZW5kIH07Cn0KCgoKLy8gRVhQT1JUIEVMTSBNT0RVTEVTCi8vCi8vIEhhdmUgREVCVUcgYW5kIFBST0QgdmVyc2lvbnMgc28gdGhhdCB3ZSBjYW4gKDEpIGdpdmUgbmljZXIgZXJyb3JzIGluCi8vIGRlYnVnIG1vZGUgYW5kICgyKSBub3QgcGF5IGZvciB0aGUgYml0cyBuZWVkZWQgZm9yIHRoYXQgaW4gcHJvZCBtb2RlLgovLwoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9leHBvcnRfVU5VU0VEKGV4cG9ydHMpCnsKCXNjb3BlWydFbG0nXQoJCT8gX1BsYXRmb3JtX21lcmdlRXhwb3J0c1Byb2Qoc2NvcGVbJ0VsbSddLCBleHBvcnRzKQoJCTogc2NvcGVbJ0VsbSddID0gZXhwb3J0czsKfQoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9tZXJnZUV4cG9ydHNQcm9kKG9iaiwgZXhwb3J0cykKewoJZm9yICh2YXIgbmFtZSBpbiBleHBvcnRzKQoJewoJCShuYW1lIGluIG9iaikKCQkJPyAobmFtZSA9PSAnaW5pdCcpCgkJCQk/IF9EZWJ1Z19jcmFzaCg2KQoJCQkJOiBfUGxhdGZvcm1fbWVyZ2VFeHBvcnRzUHJvZChvYmpbbmFtZV0sIGV4cG9ydHNbbmFtZV0pCgkJCTogKG9ialtuYW1lXSA9IGV4cG9ydHNbbmFtZV0pOwoJfQp9CgoKZnVuY3Rpb24gX1BsYXRmb3JtX2V4cG9ydChleHBvcnRzKQp7CglzY29wZVsnRWxtJ10KCQk/IF9QbGF0Zm9ybV9tZXJnZUV4cG9ydHNEZWJ1ZygnRWxtJywgc2NvcGVbJ0VsbSddLCBleHBvcnRzKQoJCTogc2NvcGVbJ0VsbSddID0gZXhwb3J0czsKfQoKCmZ1bmN0aW9uIF9QbGF0Zm9ybV9tZXJnZUV4cG9ydHNEZWJ1Zyhtb2R1bGVOYW1lLCBvYmosIGV4cG9ydHMpCnsKCWZvciAodmFyIG5hbWUgaW4gZXhwb3J0cykKCXsKCQkobmFtZSBpbiBvYmopCgkJCT8gKG5hbWUgPT0gJ2luaXQnKQoJCQkJPyBfRGVidWdfY3Jhc2goNiwgbW9kdWxlTmFtZSkKCQkJCTogX1BsYXRmb3JtX21lcmdlRXhwb3J0c0RlYnVnKG1vZHVsZU5hbWUgKyAnLicgKyBuYW1lLCBvYmpbbmFtZV0sIGV4cG9ydHNbbmFtZV0pCgkJCTogKG9ialtuYW1lXSA9IGV4cG9ydHNbbmFtZV0pOwoJfQp9CnZhciAkZWxtJGNvcmUkQmFzaWNzJEVRID0geyQ6ICdFUSd9Owp2YXIgJGVsbSRjb3JlJEJhc2ljcyRMVCA9IHskOiAnTFQnfTsKdmFyICRlbG0kY29yZSRMaXN0JGNvbnMgPSBfTGlzdF9jb25zOwp2YXIgJGVsbSRjb3JlJEVsbSRKc0FycmF5JGZvbGRyID0gX0pzQXJyYXlfZm9sZHI7CnZhciAkZWxtJGNvcmUkQXJyYXkkZm9sZHIgPSBGMygKCWZ1bmN0aW9uIChmdW5jLCBiYXNlQ2FzZSwgX3YwKSB7CgkJdmFyIHRyZWUgPSBfdjAuYzsKCQl2YXIgdGFpbCA9IF92MC5kOwoJCXZhciBoZWxwZXIgPSBGMigKCQkJZnVuY3Rpb24gKG5vZGUsIGFjYykgewoJCQkJaWYgKG5vZGUuJCA9PT0gJ1N1YlRyZWUnKSB7CgkJCQkJdmFyIHN1YlRyZWUgPSBub2RlLmE7CgkJCQkJcmV0dXJuIEEzKCRlbG0kY29yZSRFbG0kSnNBcnJheSRmb2xkciwgaGVscGVyLCBhY2MsIHN1YlRyZWUpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgdmFsdWVzID0gbm9kZS5hOwoJCQkJCXJldHVybiBBMygkZWxtJGNvcmUkRWxtJEpzQXJyYXkkZm9sZHIsIGZ1bmMsIGFjYywgdmFsdWVzKTsKCQkJCX0KCQkJfSk7CgkJcmV0dXJuIEEzKAoJCQkkZWxtJGNvcmUkRWxtJEpzQXJyYXkkZm9sZHIsCgkJCWhlbHBlciwKCQkJQTMoJGVsbSRjb3JlJEVsbSRKc0FycmF5JGZvbGRyLCBmdW5jLCBiYXNlQ2FzZSwgdGFpbCksCgkJCXRyZWUpOwoJfSk7CnZhciAkZWxtJGNvcmUkQXJyYXkkdG9MaXN0ID0gZnVuY3Rpb24gKGFycmF5KSB7CglyZXR1cm4gQTMoJGVsbSRjb3JlJEFycmF5JGZvbGRyLCAkZWxtJGNvcmUkTGlzdCRjb25zLCBfTGlzdF9OaWwsIGFycmF5KTsKfTsKdmFyICRlbG0kY29yZSREaWN0JGZvbGRyID0gRjMoCglmdW5jdGlvbiAoZnVuYywgYWNjLCB0KSB7CgkJZm9sZHI6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKHQuJCA9PT0gJ1JCRW1wdHlfZWxtX2J1aWx0aW4nKSB7CgkJCQlyZXR1cm4gYWNjOwoJCQl9IGVsc2UgewoJCQkJdmFyIGtleSA9IHQuYjsKCQkJCXZhciB2YWx1ZSA9IHQuYzsKCQkJCXZhciBsZWZ0ID0gdC5kOwoJCQkJdmFyIHJpZ2h0ID0gdC5lOwoJCQkJdmFyICR0ZW1wJGZ1bmMgPSBmdW5jLAoJCQkJCSR0ZW1wJGFjYyA9IEEzKAoJCQkJCWZ1bmMsCgkJCQkJa2V5LAoJCQkJCXZhbHVlLAoJCQkJCUEzKCRlbG0kY29yZSREaWN0JGZvbGRyLCBmdW5jLCBhY2MsIHJpZ2h0KSksCgkJCQkJJHRlbXAkdCA9IGxlZnQ7CgkJCQlmdW5jID0gJHRlbXAkZnVuYzsKCQkJCWFjYyA9ICR0ZW1wJGFjYzsKCQkJCXQgPSAkdGVtcCR0OwoJCQkJY29udGludWUgZm9sZHI7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSREaWN0JHRvTGlzdCA9IGZ1bmN0aW9uIChkaWN0KSB7CglyZXR1cm4gQTMoCgkJJGVsbSRjb3JlJERpY3QkZm9sZHIsCgkJRjMoCgkJCWZ1bmN0aW9uIChrZXksIHZhbHVlLCBsaXN0KSB7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQlfVXRpbHNfVHVwbGUyKGtleSwgdmFsdWUpLAoJCQkJCWxpc3QpOwoJCQl9KSwKCQlfTGlzdF9OaWwsCgkJZGljdCk7Cn07CnZhciAkZWxtJGNvcmUkRGljdCRrZXlzID0gZnVuY3Rpb24gKGRpY3QpIHsKCXJldHVybiBBMygKCQkkZWxtJGNvcmUkRGljdCRmb2xkciwKCQlGMygKCQkJZnVuY3Rpb24gKGtleSwgdmFsdWUsIGtleUxpc3QpIHsKCQkJCXJldHVybiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBrZXksIGtleUxpc3QpOwoJCQl9KSwKCQlfTGlzdF9OaWwsCgkJZGljdCk7Cn07CnZhciAkZWxtJGNvcmUkU2V0JHRvTGlzdCA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBkaWN0ID0gX3YwLmE7CglyZXR1cm4gJGVsbSRjb3JlJERpY3Qka2V5cyhkaWN0KTsKfTsKdmFyICRlbG0kY29yZSRCYXNpY3MkR1QgPSB7JDogJ0dUJ307CnZhciAkZWxtJGNvcmUkQmFzaWNzJEZhbHNlID0geyQ6ICdGYWxzZSd9Owp2YXIgJGVsbSRjb3JlJEJhc2ljcyRUcnVlID0geyQ6ICdUcnVlJ307CnZhciAkZWxtJGNvcmUkQmFzaWNzJGFwUiA9IEYyKAoJZnVuY3Rpb24gKHgsIGYpIHsKCQlyZXR1cm4gZih4KTsKCX0pOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRhZGQgPSBfQmFzaWNzX2FkZDsKdmFyICRlbG0kY29yZSRMaXN0JGZvbGRsID0gRjMoCglmdW5jdGlvbiAoZnVuYywgYWNjLCBsaXN0KSB7CgkJZm9sZGw6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFsaXN0LmIpIHsKCQkJCXJldHVybiBhY2M7CgkJCX0gZWxzZSB7CgkJCQl2YXIgeCA9IGxpc3QuYTsKCQkJCXZhciB4cyA9IGxpc3QuYjsKCQkJCXZhciAkdGVtcCRmdW5jID0gZnVuYywKCQkJCQkkdGVtcCRhY2MgPSBBMihmdW5jLCB4LCBhY2MpLAoJCQkJCSR0ZW1wJGxpc3QgPSB4czsKCQkJCWZ1bmMgPSAkdGVtcCRmdW5jOwoJCQkJYWNjID0gJHRlbXAkYWNjOwoJCQkJbGlzdCA9ICR0ZW1wJGxpc3Q7CgkJCQljb250aW51ZSBmb2xkbDsKCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRndCA9IF9VdGlsc19ndDsKdmFyICRlbG0kY29yZSRMaXN0JHJldmVyc2UgPSBmdW5jdGlvbiAobGlzdCkgewoJcmV0dXJuIEEzKCRlbG0kY29yZSRMaXN0JGZvbGRsLCAkZWxtJGNvcmUkTGlzdCRjb25zLCBfTGlzdF9OaWwsIGxpc3QpOwp9Owp2YXIgJGVsbSRjb3JlJExpc3QkZm9sZHJIZWxwZXIgPSBGNCgKCWZ1bmN0aW9uIChmbiwgYWNjLCBjdHIsIGxzKSB7CgkJaWYgKCFscy5iKSB7CgkJCXJldHVybiBhY2M7CgkJfSBlbHNlIHsKCQkJdmFyIGEgPSBscy5hOwoJCQl2YXIgcjEgPSBscy5iOwoJCQlpZiAoIXIxLmIpIHsKCQkJCXJldHVybiBBMihmbiwgYSwgYWNjKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBiID0gcjEuYTsKCQkJCXZhciByMiA9IHIxLmI7CgkJCQlpZiAoIXIyLmIpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCWZuLAoJCQkJCQlhLAoJCQkJCQlBMihmbiwgYiwgYWNjKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBjID0gcjIuYTsKCQkJCQl2YXIgcjMgPSByMi5iOwoJCQkJCWlmICghcjMuYikgewoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQlmbiwKCQkJCQkJCWEsCgkJCQkJCQlBMigKCQkJCQkJCQlmbiwKCQkJCQkJCQliLAoJCQkJCQkJCUEyKGZuLCBjLCBhY2MpKSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGQgPSByMy5hOwoJCQkJCQl2YXIgcjQgPSByMy5iOwoJCQkJCQl2YXIgcmVzID0gKGN0ciA+IDUwMCkgPyBBMygKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkJCQkJZm4sCgkJCQkJCQlhY2MsCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKHI0KSkgOiBBNCgkZWxtJGNvcmUkTGlzdCRmb2xkckhlbHBlciwgZm4sIGFjYywgY3RyICsgMSwgcjQpOwoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQlmbiwKCQkJCQkJCWEsCgkJCQkJCQlBMigKCQkJCQkJCQlmbiwKCQkJCQkJCQliLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQlmbiwKCQkJCQkJCQkJYywKCQkJCQkJCQkJQTIoZm4sIGQsIHJlcykpKSk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCRmb2xkciA9IEYzKAoJZnVuY3Rpb24gKGZuLCBhY2MsIGxzKSB7CgkJcmV0dXJuIEE0KCRlbG0kY29yZSRMaXN0JGZvbGRySGVscGVyLCBmbiwgYWNjLCAwLCBscyk7Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JGFwcGVuZCA9IEYyKAoJZnVuY3Rpb24gKHhzLCB5cykgewoJCWlmICgheXMuYikgewoJCQlyZXR1cm4geHM7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIEEzKCRlbG0kY29yZSRMaXN0JGZvbGRyLCAkZWxtJGNvcmUkTGlzdCRjb25zLCB5cywgeHMpOwoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJExpc3QkY29uY2F0ID0gZnVuY3Rpb24gKGxpc3RzKSB7CglyZXR1cm4gQTMoJGVsbSRjb3JlJExpc3QkZm9sZHIsICRlbG0kY29yZSRMaXN0JGFwcGVuZCwgX0xpc3RfTmlsLCBsaXN0cyk7Cn07CnZhciAkZWxtJGNvcmUkTGlzdCRtYXAgPSBGMigKCWZ1bmN0aW9uIChmLCB4cykgewoJCXJldHVybiBBMygKCQkJJGVsbSRjb3JlJExpc3QkZm9sZHIsCgkJCUYyKAoJCQkJZnVuY3Rpb24gKHgsIGFjYykgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJZih4KSwKCQkJCQkJYWNjKTsKCQkJCX0pLAoJCQlfTGlzdF9OaWwsCgkJCXhzKTsKCX0pOwp2YXIgJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwID0gRjIoCglmdW5jdGlvbiAoZiwgbGlzdCkgewoJCXJldHVybiAkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCUEyKCRlbG0kY29yZSRMaXN0JG1hcCwgZiwgbGlzdCkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJEJsb2JOb2RlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0Jsb2JOb2RlJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJFRyZWVOb2RlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1RyZWVOb2RlJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJGZpbGVfdHJlZV9ub2RlX2VsbV9jb3JlX21vZHVsZXNfZXhwbGljaXRfaW1wb3J0ID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRUcmVlTm9kZSgKCV9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCV9VdGlsc19UdXBsZTIoCgkJCSdBcnJheS5lbG0nLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJEJsb2JOb2RlKAoJCQkJe3V0Zjg6ICdtb2R1bGUgQXJyYXlcbiAgICBleHBvc2luZ1xuICAgICAgICAoIEFycmF5XG4gICAgICAgICwgZW1wdHlcbiAgICAgICAgLCBpc0VtcHR5XG4gICAgICAgICwgbGVuZ3RoXG4gICAgICAgICwgaW5pdGlhbGl6ZVxuICAgICAgICAsIHJlcGVhdFxuICAgICAgICAsIGZyb21MaXN0XG4gICAgICAgICwgZ2V0XG4gICAgICAgICwgc2V0XG4gICAgICAgICwgcHVzaFxuICAgICAgICAsIHRvTGlzdFxuICAgICAgICAsIHRvSW5kZXhlZExpc3RcbiAgICAgICAgLCBmb2xkclxuICAgICAgICAsIGZvbGRsXG4gICAgICAgICwgZmlsdGVyXG4gICAgICAgICwgbWFwXG4gICAgICAgICwgaW5kZXhlZE1hcFxuICAgICAgICAsIGFwcGVuZFxuICAgICAgICAsIHNsaWNlXG4gICAgICAgIClcblxuey18IEZhc3QgaW1tdXRhYmxlIGFycmF5cy4gVGhlIGVsZW1lbnRzIGluIGFuIGFycmF5IG11c3QgaGF2ZSB0aGUgc2FtZSB0eXBlLlxuXG4jIEFycmF5c1xuQGRvY3MgQXJyYXlcblxuIyBDcmVhdGlvblxuQGRvY3MgZW1wdHksIGluaXRpYWxpemUsIHJlcGVhdCwgZnJvbUxpc3RcblxuIyBRdWVyeVxuQGRvY3MgaXNFbXB0eSwgbGVuZ3RoLCBnZXRcblxuIyBNYW5pcHVsYXRlXG5AZG9jcyBzZXQsIHB1c2gsIGFwcGVuZCwgc2xpY2VcblxuIyBMaXN0c1xuQGRvY3MgdG9MaXN0LCB0b0luZGV4ZWRMaXN0XG5cbiMgVHJhbnNmb3JtXG5AZG9jcyBtYXAsIGluZGV4ZWRNYXAsIGZvbGRsLCBmb2xkciwgZmlsdGVyXG4tfVxuXG5cbmltcG9ydCBCYXNpY3MgZXhwb3NpbmcgKC4uKVxuaW1wb3J0IEJpdHdpc2VcbmltcG9ydCBFbG0uSnNBcnJheSBhcyBKc0FycmF5IGV4cG9zaW5nIChKc0FycmF5KVxuaW1wb3J0IExpc3QgZXhwb3NpbmcgKCg6OikpXG5pbXBvcnQgTWF5YmUgZXhwb3NpbmcgKC4uKVxuaW1wb3J0IFR1cGxlXG5cblxuey18IFRoZSBhcnJheSBpbiB0aGlzIG1vZHVsZSBpcyBpbXBsZW1lbnRlZCBhcyBhIHRyZWUgd2l0aCBhIGhpZ2ggYnJhbmNoaW5nXG5mYWN0b3IgKG51bWJlciBvZiBlbGVtZW50cyBhdCBlYWNoIGxldmVsKS4gSW4gY29tcGFyaXNpb24sIHRoZSBgRGljdGAgaGFzXG5hIGJyYW5jaGluZyBmYWN0b3Igb2YgMiAobGVmdCBvciByaWdodCkuXG5cblRoZSBoaWdoZXIgdGhlIGJyYW5jaGluZyBmYWN0b3IsIHRoZSBtb3JlIGVsZW1lbnRzIGFyZSBzdG9yZWQgYXQgZWFjaCBsZXZlbC5cblRoaXMgbWFrZXMgd3JpdGVzIHNsb3dlciAobW9yZSB0byBjb3B5IHBlciBsZXZlbCksIGJ1dCByZWFkcyBmYXN0ZXJcbihmZXdlciB0cmF2ZXJzYWxzKS4gSW4gcHJhY3RpY2UsIDMyIGlzIGEgZ29vZCBjb21wcm9taXNlLlxuXG5UaGUgYnJhbmNoaW5nIGZhY3RvciBoYXMgdG8gYmUgYSBwb3dlciBvZiB0d28gKDgsIDE2LCAzMiwgNjQuLi4pLiBUaGlzIGlzXG5iZWNhdXNlIHdlIHVzZSB0aGUgaW5kZXggdG8gdGVsbCB1cyB3aGljaCBwYXRoIHRvIHRha2Ugd2hlbiBuYXZpZ2F0aW5nIHRoZVxudHJlZSwgYW5kIHdlIGRvIHRoaXMgYnkgZGl2aWRpbmcgaXQgaW50byBzZXZlcmFsIHNtYWxsZXIgbnVtYmVycyAoc2VlXG5gc2hpZnRTdGVwYCBkb2N1bWVudGF0aW9uKS4gQnkgZGl2aWRpbmcgdGhlIGluZGV4IGludG8gc21hbGxlciBudW1iZXJzLCB3ZVxud2lsbCBhbHdheXMgZ2V0IGEgcmFuZ2Ugd2hpY2ggaXMgYSBwb3dlciBvZiB0d28gKDIgYml0cyBnaXZlcyAwLTMsIDMgZ2l2ZXNcbjAtNywgNCBnaXZlcyAwLTE1Li4uKS5cbi19XG5icmFuY2hGYWN0b3IgOiBJbnRcbmJyYW5jaEZhY3RvciA9XG4gICAgMzJcblxuXG57LXwgQSBudW1iZXIgaXMgbWFkZSB1cCBvZiBzZXZlcmFsIGJpdHMuIEZvciBiaXR3aXNlIG9wZXJhdGlvbnMgaW4gamF2YXNjcmlwdCxcbm51bWJlcnMgYXJlIHRyZWF0ZWQgYXMgMzItYml0cyBpbnRlZ2Vycy4gVGhlIG51bWJlciAxIGlzIHJlcHJlc2VudGVkIGJ5IDMxXG56ZXJvcywgYW5kIGEgb25lLiBUaGUgaW1wb3J0YW50IHRoaW5nIHRvIHRha2UgZnJvbSB0aGlzLCBpcyB0aGF0IGEgMzItYml0XG5pbnRlZ2VyIGhhcyBlbm91Z2ggaW5mb3JtYXRpb24gdG8gcmVwcmVzZW50IHNldmVyYWwgc21hbGxlciBudW1iZXJzLlxuXG5Gb3IgYSBicmFuY2hpbmcgZmFjdG9yIG9mIDMyLCBhIDMyLWJpdCBpbmRleCBoYXMgZW5vdWdoIGluZm9ybWF0aW9uIHRvIHN0b3JlIDZcbmRpZmZlcmVudCBudW1iZXJzIGluIHRoZSByYW5nZSBvZiAwLTMxICg1IGJpdHMpLCBhbmQgb25lIG51bWJlciBpbiB0aGUgcmFuZ2Ugb2ZcbjAtMyAoMiBiaXRzKS4gVGhpcyBtZWFucyB0aGF0IHRoZSB0cmVlIG9mIGFuIGFycmF5IGNhbiBoYXZlLCBhdCBtb3N0LCBhIGRlcHRoXG5vZiA3LlxuXG5BbiBpbmRleCBlc3NlbnRpYWxseSBmdW5jdGlvbnMgYXMgYSBtYXAuIFRvIGZpZ3VyZSBvdXQgd2hpY2ggYnJhbmNoIHRvIHRha2UgYXRcbmFueSBnaXZlbiBsZXZlbCBvZiB0aGUgdHJlZSwgd2UgbmVlZCB0byBzaGlmdCAob3IgbW92ZSkgdGhlIGNvcnJlY3QgYW1vdW50IG9mXG5iaXRzIHNvIHRoYXQgdGhvc2UgYml0cyBhcmUgYXQgdGhlIGZyb250LiBXZSBjYW4gdGhlbiBwZXJmb3JtIGEgYml0d2lzZSBhbmQgdG9cbnJlYWQgd2hpY2ggb2YgdGhlIDMyIGJyYW5jaGVzIHRvIHRha2UuXG5cblRoZSBgc2hpZnRTdGVwYCBzcGVjaWZpY2VzIGhvdyBtYW55IGJpdHMgYXJlIHJlcXVpcmVkIHRvIHJlcHJlc2VudCB0aGUgYnJhbmNoaW5nXG5mYWN0b3IuXG4tfVxuc2hpZnRTdGVwIDogSW50XG5zaGlmdFN0ZXAgPVxuICAgIGNlaWxpbmcgKGxvZ0Jhc2UgMiAodG9GbG9hdCBicmFuY2hGYWN0b3IpKVxuXG5cbnstfCBBIG1hc2sgd2hpY2gsIHdoZW4gdXNlZCBpbiBhIGJpdHdpc2UgYW5kLCByZWFkcyB0aGUgZmlyc3QgYHNoaWZ0U3RlcGAgYml0c1xuaW4gYSBudW1iZXIgYXMgYSBudW1iZXIgb2YgaXRzIG93bi5cbi19XG5iaXRNYXNrIDogSW50XG5iaXRNYXNrID1cbiAgICBCaXR3aXNlLnNoaWZ0UmlnaHRaZkJ5ICgzMiAtIHNoaWZ0U3RlcCkgMHhGRkZGRkZGRlxuXG5cbnstfCBSZXByZXNlbnRhdGlvbiBvZiBmYXN0IGltbXV0YWJsZSBhcnJheXMuIFlvdSBjYW4gY3JlYXRlIGFycmF5cyBvZiBpbnRlZ2Vyc1xuKGBBcnJheSBJbnRgKSBvciBzdHJpbmdzIChgQXJyYXkgU3RyaW5nYCkgb3IgYW55IG90aGVyIHR5cGUgb2YgdmFsdWUgeW91IGNhblxuZHJlYW0gdXAuXG4tfVxudHlwZSBBcnJheSBhXG4gICAgPSB7LVxuICAgICAgICAgKiBsZW5ndGggOiBJbnQgPSBUaGUgbGVuZ3RoIG9mIHRoZSBhcnJheS5cbiAgICAgICAgICogc3RhcnRTaGlmdCA6IEludCA9IEhvdyBtYW55IGJpdHMgdG8gc2hpZnQgdGhlIGluZGV4IHRvIGdldCB0aGVcbiAgICAgICAgIHNsb3QgZm9yIHRoZSBmaXJzdCBsZXZlbCBvZiB0aGUgdHJlZS5cbiAgICAgICAgICogdHJlZSA6IFRyZWUgYSA9IFRoZSBhY3R1YWwgdHJlZS5cbiAgICAgICAgICogdGFpbCA6IEpzQXJyYXkgYSA9IFRoZSB0YWlsIG9mIHRoZSBhcnJheS4gSW5zZXJ0ZWQgaW50byB0cmVlIHdoZW5cbiAgICAgICAgIG51bWJlciBvZiBlbGVtZW50cyBpcyBlcXVhbCB0byB0aGUgYnJhbmNoaW5nIGZhY3Rvci4gVGhpcyBpcyBhblxuICAgICAgICAgb3B0aW1pemF0aW9uLiBJdCBtYWtlcyBvcGVyYXRpb25zIGF0IHRoZSBlbmQgKHB1c2gsIHBvcCwgcmVhZCwgd3JpdGUpXG4gICAgICAgICBmYXN0LlxuICAgICAgLX1cbiAgICAgIEFycmF5X2VsbV9idWlsdGluIEludCBJbnQgKFRyZWUgYSkgKEpzQXJyYXkgYSlcblxuXG57LXwgRWFjaCBsZXZlbCBpbiB0aGUgdHJlZSBpcyByZXByZXNlbnRlZCBieSBhIGBKc0FycmF5YCBvZiBgTm9kZWBzLlxuQSBgTm9kZWAgY2FuIGVpdGhlciBiZSBhIHN1YnRyZWUgKHRoZSBuZXh0IGxldmVsIG9mIHRoZSB0cmVlKSBvciwgaWZcbndlXCdyZSBhdCB0aGUgYm90dG9tLCBhIGBKc0FycmF5YCBvZiB2YWx1ZXMgKGFsc28ga25vd24gYXMgYSBsZWFmKS5cbi19XG50eXBlIE5vZGUgYVxuICAgID0gU3ViVHJlZSAoVHJlZSBhKVxuICAgIHwgTGVhZiAoSnNBcnJheSBhKVxuXG5cbnR5cGUgYWxpYXMgVHJlZSBhID1cbiAgICBKc0FycmF5IChOb2RlIGEpXG5cblxuey18IFJldHVybiBhbiBlbXB0eSBhcnJheS5cblxuICAgIGxlbmd0aCBlbXB0eSA9PSAwXG4tfVxuZW1wdHkgOiBBcnJheSBhXG5lbXB0eSA9XG4gICAgey1cbiAgICAgICBgc3RhcnRTaGlmdGAgaXMgb25seSB1c2VkIHdoZW4gdGhlcmUgaXMgYXQgbGVhc3Qgb25lIGBOb2RlYCBpbiB0aGVcbiAgICAgICBgdHJlZWAuIFRoZSBtaW5pbWFsIHZhbHVlIGlzIHRoZXJlZm9yZSBlcXVhbCB0byB0aGUgYHNoaWZ0U3RlcGAuXG4gICAgLX1cbiAgICBBcnJheV9lbG1fYnVpbHRpbiAwIHNoaWZ0U3RlcCBKc0FycmF5LmVtcHR5IEpzQXJyYXkuZW1wdHlcblxuXG57LXwgRGV0ZXJtaW5lIGlmIGFuIGFycmF5IGlzIGVtcHR5LlxuXG4gICAgaXNFbXB0eSBlbXB0eSA9PSBUcnVlXG4tfVxuaXNFbXB0eSA6IEFycmF5IGEgLT4gQm9vbFxuaXNFbXB0eSAoQXJyYXlfZWxtX2J1aWx0aW4gbGVuIF8gXyBfKSA9XG4gICAgbGVuID09IDBcblxuXG57LXwgUmV0dXJuIHRoZSBsZW5ndGggb2YgYW4gYXJyYXkuXG5cbiAgICBsZW5ndGggKGZyb21MaXN0IFsxLDIsM10pID09IDNcbi19XG5sZW5ndGggOiBBcnJheSBhIC0+IEludFxubGVuZ3RoIChBcnJheV9lbG1fYnVpbHRpbiBsZW4gXyBfIF8pID1cbiAgICBsZW5cblxuXG57LXwgSW5pdGlhbGl6ZSBhbiBhcnJheS4gYGluaXRpYWxpemUgbiBmYCBjcmVhdGVzIGFuIGFycmF5IG9mIGxlbmd0aCBgbmAgd2l0aFxudGhlIGVsZW1lbnQgYXQgaW5kZXggYGlgIGluaXRpYWxpemVkIHRvIHRoZSByZXN1bHQgb2YgYChmIGkpYC5cblxuICAgIGluaXRpYWxpemUgNCBpZGVudGl0eSAgICA9PSBmcm9tTGlzdCBbMCwxLDIsM11cbiAgICBpbml0aWFsaXplIDQgKFxcbiAtPiBuKm4pID09IGZyb21MaXN0IFswLDEsNCw5XVxuICAgIGluaXRpYWxpemUgNCAoYWx3YXlzIDApICA9PSBmcm9tTGlzdCBbMCwwLDAsMF1cbi19XG5pbml0aWFsaXplIDogSW50IC0+IChJbnQgLT4gYSkgLT4gQXJyYXkgYVxuaW5pdGlhbGl6ZSBsZW4gZm4gPVxuICAgIGlmIGxlbiA8PSAwIHRoZW5cbiAgICAgICAgZW1wdHlcbiAgICBlbHNlXG4gICAgICAgIGxldFxuICAgICAgICAgICAgdGFpbExlbiA9XG4gICAgICAgICAgICAgICAgcmVtYWluZGVyQnkgYnJhbmNoRmFjdG9yIGxlblxuXG4gICAgICAgICAgICB0YWlsID1cbiAgICAgICAgICAgICAgICBKc0FycmF5LmluaXRpYWxpemUgdGFpbExlbiAobGVuIC0gdGFpbExlbikgZm5cblxuICAgICAgICAgICAgaW5pdGlhbEZyb21JbmRleCA9XG4gICAgICAgICAgICAgICAgbGVuIC0gdGFpbExlbiAtIGJyYW5jaEZhY3RvclxuICAgICAgICBpblxuICAgICAgICAgICAgaW5pdGlhbGl6ZUhlbHAgZm4gaW5pdGlhbEZyb21JbmRleCBsZW4gW10gdGFpbFxuXG5cbmluaXRpYWxpemVIZWxwIDogKEludCAtPiBhKSAtPiBJbnQgLT4gSW50IC0+IExpc3QgKE5vZGUgYSkgLT4gSnNBcnJheSBhIC0+IEFycmF5IGFcbmluaXRpYWxpemVIZWxwIGZuIGZyb21JbmRleCBsZW4gbm9kZUxpc3QgdGFpbCA9XG4gICAgaWYgZnJvbUluZGV4IDwgMCB0aGVuXG4gICAgICAgIGJ1aWxkZXJUb0FycmF5IEZhbHNlXG4gICAgICAgICAgICB7IHRhaWwgPSB0YWlsXG4gICAgICAgICAgICAsIG5vZGVMaXN0ID0gbm9kZUxpc3RcbiAgICAgICAgICAgICwgbm9kZUxpc3RTaXplID0gbGVuIC8vIGJyYW5jaEZhY3RvclxuICAgICAgICAgICAgfVxuICAgIGVsc2VcbiAgICAgICAgbGV0XG4gICAgICAgICAgICBsZWFmID1cbiAgICAgICAgICAgICAgICBMZWFmIDx8IEpzQXJyYXkuaW5pdGlhbGl6ZSBicmFuY2hGYWN0b3IgZnJvbUluZGV4IGZuXG4gICAgICAgIGluXG4gICAgICAgICAgICBpbml0aWFsaXplSGVscFxuICAgICAgICAgICAgICAgIGZuXG4gICAgICAgICAgICAgICAgKGZyb21JbmRleCAtIGJyYW5jaEZhY3RvcilcbiAgICAgICAgICAgICAgICBsZW5cbiAgICAgICAgICAgICAgICAobGVhZiA6OiBub2RlTGlzdClcbiAgICAgICAgICAgICAgICB0YWlsXG5cblxuey18IENyZWF0ZXMgYW4gYXJyYXkgd2l0aCBhIGdpdmVuIGxlbmd0aCwgZmlsbGVkIHdpdGggYSBkZWZhdWx0IGVsZW1lbnQuXG5cbiAgICByZXBlYXQgNSAwICAgICA9PSBmcm9tTGlzdCBbMCwwLDAsMCwwXVxuICAgIHJlcGVhdCAzIFwiY2F0XCIgPT0gZnJvbUxpc3QgW1wiY2F0XCIsXCJjYXRcIixcImNhdFwiXVxuXG5Ob3RpY2UgdGhhdCBgcmVwZWF0IDMgeGAgaXMgdGhlIHNhbWUgYXMgYGluaXRpYWxpemUgMyAoYWx3YXlzIHgpYC5cbi19XG5yZXBlYXQgOiBJbnQgLT4gYSAtPiBBcnJheSBhXG5yZXBlYXQgbiBlID1cbiAgICBpbml0aWFsaXplIG4gKFxcXyAtPiBlKVxuXG5cbnstfCBDcmVhdGUgYW4gYXJyYXkgZnJvbSBhIGBMaXN0YC5cbi19XG5mcm9tTGlzdCA6IExpc3QgYSAtPiBBcnJheSBhXG5mcm9tTGlzdCBsaXN0ID1cbiAgICBjYXNlIGxpc3Qgb2ZcbiAgICAgICAgW10gLT5cbiAgICAgICAgICAgIGVtcHR5XG5cbiAgICAgICAgXyAtPlxuICAgICAgICAgICAgZnJvbUxpc3RIZWxwIGxpc3QgW10gMFxuXG5cbmZyb21MaXN0SGVscCA6IExpc3QgYSAtPiBMaXN0IChOb2RlIGEpIC0+IEludCAtPiBBcnJheSBhXG5mcm9tTGlzdEhlbHAgbGlzdCBub2RlTGlzdCBub2RlTGlzdFNpemUgPVxuICAgIGxldFxuICAgICAgICAoIGpzQXJyYXksIHJlbWFpbmluZ0l0ZW1zICkgPVxuICAgICAgICAgICAgSnNBcnJheS5pbml0aWFsaXplRnJvbUxpc3QgYnJhbmNoRmFjdG9yIGxpc3RcbiAgICBpblxuICAgICAgICBpZiBKc0FycmF5Lmxlbmd0aCBqc0FycmF5IDwgYnJhbmNoRmFjdG9yIHRoZW5cbiAgICAgICAgICAgIGJ1aWxkZXJUb0FycmF5IFRydWVcbiAgICAgICAgICAgICAgICB7IHRhaWwgPSBqc0FycmF5XG4gICAgICAgICAgICAgICAgLCBub2RlTGlzdCA9IG5vZGVMaXN0XG4gICAgICAgICAgICAgICAgLCBub2RlTGlzdFNpemUgPSBub2RlTGlzdFNpemVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGZyb21MaXN0SGVscFxuICAgICAgICAgICAgICAgIHJlbWFpbmluZ0l0ZW1zXG4gICAgICAgICAgICAgICAgKExlYWYganNBcnJheSA6OiBub2RlTGlzdClcbiAgICAgICAgICAgICAgICAobm9kZUxpc3RTaXplICsgMSlcblxuXG57LXwgUmV0dXJuIGBKdXN0YCB0aGUgZWxlbWVudCBhdCB0aGUgaW5kZXggb3IgYE5vdGhpbmdgIGlmIHRoZSBpbmRleCBpcyBvdXQgb2ZcbnJhbmdlLlxuXG4gICAgZ2V0ICAwIChmcm9tTGlzdCBbMCwxLDJdKSA9PSBKdXN0IDBcbiAgICBnZXQgIDIgKGZyb21MaXN0IFswLDEsMl0pID09IEp1c3QgMlxuICAgIGdldCAgNSAoZnJvbUxpc3QgWzAsMSwyXSkgPT0gTm90aGluZ1xuICAgIGdldCAtMSAoZnJvbUxpc3QgWzAsMSwyXSkgPT0gTm90aGluZ1xuLX1cbmdldCA6IEludCAtPiBBcnJheSBhIC0+IE1heWJlIGFcbmdldCBpbmRleCAoQXJyYXlfZWxtX2J1aWx0aW4gbGVuIHN0YXJ0U2hpZnQgdHJlZSB0YWlsKSA9XG4gICAgaWYgaW5kZXggPCAwIHx8IGluZGV4ID49IGxlbiB0aGVuXG4gICAgICAgIE5vdGhpbmdcbiAgICBlbHNlIGlmIGluZGV4ID49IHRhaWxJbmRleCBsZW4gdGhlblxuICAgICAgICBKdXN0IDx8IEpzQXJyYXkudW5zYWZlR2V0IChCaXR3aXNlLmFuZCBiaXRNYXNrIGluZGV4KSB0YWlsXG4gICAgZWxzZVxuICAgICAgICBKdXN0IDx8IGdldEhlbHAgc3RhcnRTaGlmdCBpbmRleCB0cmVlXG5cblxuZ2V0SGVscCA6IEludCAtPiBJbnQgLT4gVHJlZSBhIC0+IGFcbmdldEhlbHAgc2hpZnQgaW5kZXggdHJlZSA9XG4gICAgbGV0XG4gICAgICAgIHBvcyA9XG4gICAgICAgICAgICBCaXR3aXNlLmFuZCBiaXRNYXNrIDx8IEJpdHdpc2Uuc2hpZnRSaWdodFpmQnkgc2hpZnQgaW5kZXhcbiAgICBpblxuICAgICAgICBjYXNlIEpzQXJyYXkudW5zYWZlR2V0IHBvcyB0cmVlIG9mXG4gICAgICAgICAgICBTdWJUcmVlIHN1YlRyZWUgLT5cbiAgICAgICAgICAgICAgICBnZXRIZWxwIChzaGlmdCAtIHNoaWZ0U3RlcCkgaW5kZXggc3ViVHJlZVxuXG4gICAgICAgICAgICBMZWFmIHZhbHVlcyAtPlxuICAgICAgICAgICAgICAgIEpzQXJyYXkudW5zYWZlR2V0IChCaXR3aXNlLmFuZCBiaXRNYXNrIGluZGV4KSB2YWx1ZXNcblxuXG57LXwgR2l2ZW4gYW4gYXJyYXkgbGVuZ3RoLCByZXR1cm4gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSB0YWlsLlxuQ29tbW9ubHkgdXNlZCB0byBjaGVjayBpZiBhIGdpdmVuIGluZGV4IHJlZmVyZW5jZXMgc29tZXRoaW5nIGluIHRoZSB0YWlsLlxuLX1cbnRhaWxJbmRleCA6IEludCAtPiBJbnRcbnRhaWxJbmRleCBsZW4gPVxuICAgIGxlblxuICAgICAgICB8PiBCaXR3aXNlLnNoaWZ0UmlnaHRaZkJ5IDVcbiAgICAgICAgfD4gQml0d2lzZS5zaGlmdExlZnRCeSA1XG5cblxuey18IFNldCB0aGUgZWxlbWVudCBhdCBhIHBhcnRpY3VsYXIgaW5kZXguIFJldHVybnMgYW4gdXBkYXRlZCBhcnJheS5cbklmIHRoZSBpbmRleCBpcyBvdXQgb2YgcmFuZ2UsIHRoZSBhcnJheSBpcyB1bmFsdGVyZWQuXG5cbiAgICBzZXQgMSA3IChmcm9tTGlzdCBbMSwyLDNdKSA9PSBmcm9tTGlzdCBbMSw3LDNdXG4tfVxuc2V0IDogSW50IC0+IGEgLT4gQXJyYXkgYSAtPiBBcnJheSBhXG5zZXQgaW5kZXggdmFsdWUgKChBcnJheV9lbG1fYnVpbHRpbiBsZW4gc3RhcnRTaGlmdCB0cmVlIHRhaWwpIGFzIGFycmF5KSA9XG4gICAgaWYgaW5kZXggPCAwIHx8IGluZGV4ID49IGxlbiB0aGVuXG4gICAgICAgIGFycmF5XG4gICAgZWxzZSBpZiBpbmRleCA+PSB0YWlsSW5kZXggbGVuIHRoZW5cbiAgICAgICAgQXJyYXlfZWxtX2J1aWx0aW4gbGVuIHN0YXJ0U2hpZnQgdHJlZSA8fFxuICAgICAgICAgICAgSnNBcnJheS51bnNhZmVTZXQgKEJpdHdpc2UuYW5kIGJpdE1hc2sgaW5kZXgpIHZhbHVlIHRhaWxcbiAgICBlbHNlXG4gICAgICAgIEFycmF5X2VsbV9idWlsdGluXG4gICAgICAgICAgICBsZW5cbiAgICAgICAgICAgIHN0YXJ0U2hpZnRcbiAgICAgICAgICAgIChzZXRIZWxwIHN0YXJ0U2hpZnQgaW5kZXggdmFsdWUgdHJlZSlcbiAgICAgICAgICAgIHRhaWxcblxuXG5zZXRIZWxwIDogSW50IC0+IEludCAtPiBhIC0+IFRyZWUgYSAtPiBUcmVlIGFcbnNldEhlbHAgc2hpZnQgaW5kZXggdmFsdWUgdHJlZSA9XG4gICAgbGV0XG4gICAgICAgIHBvcyA9XG4gICAgICAgICAgICBCaXR3aXNlLmFuZCBiaXRNYXNrIDx8IEJpdHdpc2Uuc2hpZnRSaWdodFpmQnkgc2hpZnQgaW5kZXhcbiAgICBpblxuICAgICAgICBjYXNlIEpzQXJyYXkudW5zYWZlR2V0IHBvcyB0cmVlIG9mXG4gICAgICAgICAgICBTdWJUcmVlIHN1YlRyZWUgLT5cbiAgICAgICAgICAgICAgICBsZXRcbiAgICAgICAgICAgICAgICAgICAgbmV3U3ViID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEhlbHAgKHNoaWZ0IC0gc2hpZnRTdGVwKSBpbmRleCB2YWx1ZSBzdWJUcmVlXG4gICAgICAgICAgICAgICAgaW5cbiAgICAgICAgICAgICAgICAgICAgSnNBcnJheS51bnNhZmVTZXQgcG9zIChTdWJUcmVlIG5ld1N1YikgdHJlZVxuXG4gICAgICAgICAgICBMZWFmIHZhbHVlcyAtPlxuICAgICAgICAgICAgICAgIGxldFxuICAgICAgICAgICAgICAgICAgICBuZXdMZWFmID1cbiAgICAgICAgICAgICAgICAgICAgICAgIEpzQXJyYXkudW5zYWZlU2V0IChCaXR3aXNlLmFuZCBiaXRNYXNrIGluZGV4KSB2YWx1ZSB2YWx1ZXNcbiAgICAgICAgICAgICAgICBpblxuICAgICAgICAgICAgICAgICAgICBKc0FycmF5LnVuc2FmZVNldCBwb3MgKExlYWYgbmV3TGVhZikgdHJlZVxuXG5cbnstfCBQdXNoIGFuIGVsZW1lbnQgb250byB0aGUgZW5kIG9mIGFuIGFycmF5LlxuXG4gICAgcHVzaCAzIChmcm9tTGlzdCBbMSwyXSkgPT0gZnJvbUxpc3QgWzEsMiwzXVxuLX1cbnB1c2ggOiBhIC0+IEFycmF5IGEgLT4gQXJyYXkgYVxucHVzaCBhICgoQXJyYXlfZWxtX2J1aWx0aW4gXyBfIF8gdGFpbCkgYXMgYXJyYXkpID1cbiAgICB1bnNhZmVSZXBsYWNlVGFpbCAoSnNBcnJheS5wdXNoIGEgdGFpbCkgYXJyYXlcblxuXG57LXwgUmVwbGFjZXMgdGhlIHRhaWwgb2YgYW4gYXJyYXkuIElmIHRoZSBsZW5ndGggb2YgdGhlIHRhaWwgZXF1YWxzIHRoZVxuYGJyYW5jaEZhY3RvcmAsIGl0IGlzIGluc2VydGVkIGludG8gdGhlIHRyZWUsIGFuZCB0aGUgdGFpbCBjbGVhcmVkLlxuXG5XQVJOSU5HOiBGb3IgcGVyZm9ybWFuY2UgcmVhc29ucywgdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCBjaGVjayBpZiB0aGUgbmV3IHRhaWxcbmhhcyBhIGxlbmd0aCBlcXVhbCB0byBvciBiZW5lYXRoIHRoZSBgYnJhbmNoRmFjdG9yYC4gTWFrZSBzdXJlIHRoaXMgaXMgdGhlIGNhc2VcbmJlZm9yZSB1c2luZyB0aGlzIGZ1bmN0aW9uLlxuLX1cbnVuc2FmZVJlcGxhY2VUYWlsIDogSnNBcnJheSBhIC0+IEFycmF5IGEgLT4gQXJyYXkgYVxudW5zYWZlUmVwbGFjZVRhaWwgbmV3VGFpbCAoQXJyYXlfZWxtX2J1aWx0aW4gbGVuIHN0YXJ0U2hpZnQgdHJlZSB0YWlsKSA9XG4gICAgbGV0XG4gICAgICAgIG9yaWdpbmFsVGFpbExlbiA9XG4gICAgICAgICAgICBKc0FycmF5Lmxlbmd0aCB0YWlsXG5cbiAgICAgICAgbmV3VGFpbExlbiA9XG4gICAgICAgICAgICBKc0FycmF5Lmxlbmd0aCBuZXdUYWlsXG5cbiAgICAgICAgbmV3QXJyYXlMZW4gPVxuICAgICAgICAgICAgbGVuICsgKG5ld1RhaWxMZW4gLSBvcmlnaW5hbFRhaWxMZW4pXG4gICAgaW5cbiAgICAgICAgaWYgbmV3VGFpbExlbiA9PSBicmFuY2hGYWN0b3IgdGhlblxuICAgICAgICAgICAgbGV0XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3cgPVxuICAgICAgICAgICAgICAgICAgICBCaXR3aXNlLnNoaWZ0UmlnaHRaZkJ5IHNoaWZ0U3RlcCBuZXdBcnJheUxlbiA+IEJpdHdpc2Uuc2hpZnRMZWZ0Qnkgc3RhcnRTaGlmdCAxXG4gICAgICAgICAgICBpblxuICAgICAgICAgICAgICAgIGlmIG92ZXJmbG93IHRoZW5cbiAgICAgICAgICAgICAgICAgICAgbGV0XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTaGlmdCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRTaGlmdCArIHNoaWZ0U3RlcFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUcmVlID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBKc0FycmF5LnNpbmdsZXRvbiAoU3ViVHJlZSB0cmVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8PiBpbnNlcnRUYWlsSW5UcmVlIG5ld1NoaWZ0IGxlbiBuZXdUYWlsXG4gICAgICAgICAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheV9lbG1fYnVpbHRpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0FycmF5TGVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2hpZnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUcmVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSnNBcnJheS5lbXB0eVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgQXJyYXlfZWxtX2J1aWx0aW5cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0FycmF5TGVuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFNoaWZ0XG4gICAgICAgICAgICAgICAgICAgICAgICAoaW5zZXJ0VGFpbEluVHJlZSBzdGFydFNoaWZ0IGxlbiBuZXdUYWlsIHRyZWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBKc0FycmF5LmVtcHR5XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIEFycmF5X2VsbV9idWlsdGluXG4gICAgICAgICAgICAgICAgbmV3QXJyYXlMZW5cbiAgICAgICAgICAgICAgICBzdGFydFNoaWZ0XG4gICAgICAgICAgICAgICAgdHJlZVxuICAgICAgICAgICAgICAgIG5ld1RhaWxcblxuXG5pbnNlcnRUYWlsSW5UcmVlIDogSW50IC0+IEludCAtPiBKc0FycmF5IGEgLT4gVHJlZSBhIC0+IFRyZWUgYVxuaW5zZXJ0VGFpbEluVHJlZSBzaGlmdCBpbmRleCB0YWlsIHRyZWUgPVxuICAgIGxldFxuICAgICAgICBwb3MgPVxuICAgICAgICAgICAgQml0d2lzZS5hbmQgYml0TWFzayA8fCBCaXR3aXNlLnNoaWZ0UmlnaHRaZkJ5IHNoaWZ0IGluZGV4XG4gICAgaW5cbiAgICAgICAgaWYgcG9zID49IEpzQXJyYXkubGVuZ3RoIHRyZWUgdGhlblxuICAgICAgICAgICAgaWYgc2hpZnQgPT0gNSB0aGVuXG4gICAgICAgICAgICAgICAgSnNBcnJheS5wdXNoIChMZWFmIHRhaWwpIHRyZWVcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBsZXRcbiAgICAgICAgICAgICAgICAgICAgbmV3U3ViID1cbiAgICAgICAgICAgICAgICAgICAgICAgIEpzQXJyYXkuZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8PiBpbnNlcnRUYWlsSW5UcmVlIChzaGlmdCAtIHNoaWZ0U3RlcCkgaW5kZXggdGFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHw+IFN1YlRyZWVcbiAgICAgICAgICAgICAgICBpblxuICAgICAgICAgICAgICAgICAgICBKc0FycmF5LnB1c2ggbmV3U3ViIHRyZWVcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbGV0XG4gICAgICAgICAgICAgICAgdmFsdWUgPVxuICAgICAgICAgICAgICAgICAgICBKc0FycmF5LnVuc2FmZUdldCBwb3MgdHJlZVxuICAgICAgICAgICAgaW5cbiAgICAgICAgICAgICAgICBjYXNlIHZhbHVlIG9mXG4gICAgICAgICAgICAgICAgICAgIFN1YlRyZWUgc3ViVHJlZSAtPlxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3ViID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViVHJlZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfD4gaW5zZXJ0VGFpbEluVHJlZSAoc2hpZnQgLSBzaGlmdFN0ZXApIGluZGV4IHRhaWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHw+IFN1YlRyZWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSnNBcnJheS51bnNhZmVTZXQgcG9zIG5ld1N1YiB0cmVlXG5cbiAgICAgICAgICAgICAgICAgICAgTGVhZiBfIC0+XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdWIgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKc0FycmF5LnNpbmdsZXRvbiB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfD4gaW5zZXJ0VGFpbEluVHJlZSAoc2hpZnQgLSBzaGlmdFN0ZXApIGluZGV4IHRhaWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHw+IFN1YlRyZWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSnNBcnJheS51bnNhZmVTZXQgcG9zIG5ld1N1YiB0cmVlXG5cblxuey18IENyZWF0ZSBhIGxpc3Qgb2YgZWxlbWVudHMgZnJvbSBhbiBhcnJheS5cblxuICAgIHRvTGlzdCAoZnJvbUxpc3QgWzMsNSw4XSkgPT0gWzMsNSw4XVxuLX1cbnRvTGlzdCA6IEFycmF5IGEgLT4gTGlzdCBhXG50b0xpc3QgYXJyYXkgPVxuICAgIGZvbGRyICg6OikgW10gYXJyYXlcblxuXG57LXwgQ3JlYXRlIGFuIGluZGV4ZWQgbGlzdCBmcm9tIGFuIGFycmF5LiBFYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5IHdpbGwgYmVcbnBhaXJlZCB3aXRoIGl0cyBpbmRleC5cblxuICAgIHRvSW5kZXhlZExpc3QgKGZyb21MaXN0IFtcImNhdFwiLFwiZG9nXCJdKSA9PSBbKDAsXCJjYXRcIiksICgxLFwiZG9nXCIpXVxuLX1cbnRvSW5kZXhlZExpc3QgOiBBcnJheSBhIC0+IExpc3QgKCBJbnQsIGEgKVxudG9JbmRleGVkTGlzdCAoKEFycmF5X2VsbV9idWlsdGluIGxlbiBfIF8gXykgYXMgYXJyYXkpID1cbiAgICBsZXRcbiAgICAgICAgaGVscGVyIGVudHJ5ICggaW5kZXgsIGxpc3QgKSA9XG4gICAgICAgICAgICAoIGluZGV4IC0gMSwgKGluZGV4LGVudHJ5KSA6OiBsaXN0IClcbiAgICBpblxuICAgICAgICBUdXBsZS5zZWNvbmQgKGZvbGRyIGhlbHBlciAoIGxlbiAtIDEsIFtdICkgYXJyYXkpXG5cblxuey18IFJlZHVjZSBhbiBhcnJheSBmcm9tIHRoZSByaWdodC4gUmVhZCBgZm9sZHJgIGFzIGZvbGQgZnJvbSB0aGUgcmlnaHQuXG5cbiAgICBmb2xkciAoKykgMCAocmVwZWF0IDMgNSkgPT0gMTVcbi19XG5mb2xkciA6IChhIC0+IGIgLT4gYikgLT4gYiAtPiBBcnJheSBhIC0+IGJcbmZvbGRyIGZ1bmMgYmFzZUNhc2UgKEFycmF5X2VsbV9idWlsdGluIF8gXyB0cmVlIHRhaWwpID1cbiAgICBsZXRcbiAgICAgICAgaGVscGVyIG5vZGUgYWNjID1cbiAgICAgICAgICAgIGNhc2Ugbm9kZSBvZlxuICAgICAgICAgICAgICAgIFN1YlRyZWUgc3ViVHJlZSAtPlxuICAgICAgICAgICAgICAgICAgICBKc0FycmF5LmZvbGRyIGhlbHBlciBhY2Mgc3ViVHJlZVxuXG4gICAgICAgICAgICAgICAgTGVhZiB2YWx1ZXMgLT5cbiAgICAgICAgICAgICAgICAgICAgSnNBcnJheS5mb2xkciBmdW5jIGFjYyB2YWx1ZXNcbiAgICBpblxuICAgICAgICBKc0FycmF5LmZvbGRyIGhlbHBlciAoSnNBcnJheS5mb2xkciBmdW5jIGJhc2VDYXNlIHRhaWwpIHRyZWVcblxuXG57LXwgUmVkdWNlIGFuIGFycmF5IGZyb20gdGhlIGxlZnQuIFJlYWQgYGZvbGRsYCBhcyBmb2xkIGZyb20gdGhlIGxlZnQuXG5cbiAgICBmb2xkbCAoOjopIFtdIChmcm9tTGlzdCBbMSwyLDNdKSA9PSBbMywyLDFdXG4tfVxuZm9sZGwgOiAoYSAtPiBiIC0+IGIpIC0+IGIgLT4gQXJyYXkgYSAtPiBiXG5mb2xkbCBmdW5jIGJhc2VDYXNlIChBcnJheV9lbG1fYnVpbHRpbiBfIF8gdHJlZSB0YWlsKSA9XG4gICAgbGV0XG4gICAgICAgIGhlbHBlciBub2RlIGFjYyA9XG4gICAgICAgICAgICBjYXNlIG5vZGUgb2ZcbiAgICAgICAgICAgICAgICBTdWJUcmVlIHN1YlRyZWUgLT5cbiAgICAgICAgICAgICAgICAgICAgSnNBcnJheS5mb2xkbCBoZWxwZXIgYWNjIHN1YlRyZWVcblxuICAgICAgICAgICAgICAgIExlYWYgdmFsdWVzIC0+XG4gICAgICAgICAgICAgICAgICAgIEpzQXJyYXkuZm9sZGwgZnVuYyBhY2MgdmFsdWVzXG4gICAgaW5cbiAgICAgICAgSnNBcnJheS5mb2xkbCBmdW5jIChKc0FycmF5LmZvbGRsIGhlbHBlciBiYXNlQ2FzZSB0cmVlKSB0YWlsXG5cblxuey18IEtlZXAgZWxlbWVudHMgdGhhdCBwYXNzIHRoZSB0ZXN0LlxuXG4gICAgZmlsdGVyIGlzRXZlbiAoZnJvbUxpc3QgWzEsMiwzLDQsNSw2XSkgPT0gKGZyb21MaXN0IFsyLDQsNl0pXG4tfVxuZmlsdGVyIDogKGEgLT4gQm9vbCkgLT4gQXJyYXkgYSAtPiBBcnJheSBhXG5maWx0ZXIgaXNHb29kIGFycmF5ID1cbiAgICBmcm9tTGlzdCAoZm9sZHIgKFxceCB4cyAtPiBpZiBpc0dvb2QgeCB0aGVuIHggOjogeHMgZWxzZSB4cykgW10gYXJyYXkpXG5cblxuey18IEFwcGx5IGEgZnVuY3Rpb24gb24gZXZlcnkgZWxlbWVudCBpbiBhbiBhcnJheS5cblxuICAgIG1hcCBzcXJ0IChmcm9tTGlzdCBbMSw0LDldKSA9PSBmcm9tTGlzdCBbMSwyLDNdXG4tfVxubWFwIDogKGEgLT4gYikgLT4gQXJyYXkgYSAtPiBBcnJheSBiXG5tYXAgZnVuYyAoQXJyYXlfZWxtX2J1aWx0aW4gbGVuIHN0YXJ0U2hpZnQgdHJlZSB0YWlsKSA9XG4gICAgbGV0XG4gICAgICAgIGhlbHBlciBub2RlID1cbiAgICAgICAgICAgIGNhc2Ugbm9kZSBvZlxuICAgICAgICAgICAgICAgIFN1YlRyZWUgc3ViVHJlZSAtPlxuICAgICAgICAgICAgICAgICAgICBTdWJUcmVlIDx8IEpzQXJyYXkubWFwIGhlbHBlciBzdWJUcmVlXG5cbiAgICAgICAgICAgICAgICBMZWFmIHZhbHVlcyAtPlxuICAgICAgICAgICAgICAgICAgICBMZWFmIDx8IEpzQXJyYXkubWFwIGZ1bmMgdmFsdWVzXG4gICAgaW5cbiAgICAgICAgQXJyYXlfZWxtX2J1aWx0aW5cbiAgICAgICAgICAgIGxlblxuICAgICAgICAgICAgc3RhcnRTaGlmdFxuICAgICAgICAgICAgKEpzQXJyYXkubWFwIGhlbHBlciB0cmVlKVxuICAgICAgICAgICAgKEpzQXJyYXkubWFwIGZ1bmMgdGFpbClcblxuXG57LXwgQXBwbHkgYSBmdW5jdGlvbiBvbiBldmVyeSBlbGVtZW50IHdpdGggaXRzIGluZGV4IGFzIGZpcnN0IGFyZ3VtZW50LlxuXG4gICAgaW5kZXhlZE1hcCAoKikgKGZyb21MaXN0IFs1LDUsNV0pID09IGZyb21MaXN0IFswLDUsMTBdXG4tfVxuaW5kZXhlZE1hcCA6IChJbnQgLT4gYSAtPiBiKSAtPiBBcnJheSBhIC0+IEFycmF5IGJcbmluZGV4ZWRNYXAgZnVuYyAoQXJyYXlfZWxtX2J1aWx0aW4gbGVuIF8gdHJlZSB0YWlsKSA9XG4gICAgbGV0XG4gICAgICAgIGhlbHBlciBub2RlIGJ1aWxkZXIgPVxuICAgICAgICAgICAgY2FzZSBub2RlIG9mXG4gICAgICAgICAgICAgICAgU3ViVHJlZSBzdWJUcmVlIC0+XG4gICAgICAgICAgICAgICAgICAgIEpzQXJyYXkuZm9sZGwgaGVscGVyIGJ1aWxkZXIgc3ViVHJlZVxuXG4gICAgICAgICAgICAgICAgTGVhZiBsZWFmIC0+XG4gICAgICAgICAgICAgICAgICAgIGxldFxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLm5vZGVMaXN0U2l6ZSAqIGJyYW5jaEZhY3RvclxuXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBwZWRMZWFmID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMZWFmIDx8IEpzQXJyYXkuaW5kZXhlZE1hcCBmdW5jIG9mZnNldCBsZWFmXG4gICAgICAgICAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHRhaWwgPSBidWlsZGVyLnRhaWxcbiAgICAgICAgICAgICAgICAgICAgICAgICwgbm9kZUxpc3QgPSBtYXBwZWRMZWFmIDo6IGJ1aWxkZXIubm9kZUxpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICwgbm9kZUxpc3RTaXplID0gYnVpbGRlci5ub2RlTGlzdFNpemUgKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgaW5pdGlhbEJ1aWxkZXIgPVxuICAgICAgICAgICAgeyB0YWlsID0gSnNBcnJheS5pbmRleGVkTWFwIGZ1bmMgKHRhaWxJbmRleCBsZW4pIHRhaWxcbiAgICAgICAgICAgICwgbm9kZUxpc3QgPSBbXVxuICAgICAgICAgICAgLCBub2RlTGlzdFNpemUgPSAwXG4gICAgICAgICAgICB9XG4gICAgaW5cbiAgICAgICAgYnVpbGRlclRvQXJyYXkgVHJ1ZSAoSnNBcnJheS5mb2xkbCBoZWxwZXIgaW5pdGlhbEJ1aWxkZXIgdHJlZSlcblxuXG57LXwgQXBwZW5kIHR3byBhcnJheXMgdG8gYSBuZXcgb25lLlxuXG4gICAgYXBwZW5kIChyZXBlYXQgMiA0MikgKHJlcGVhdCAzIDgxKSA9PSBmcm9tTGlzdCBbNDIsNDIsODEsODEsODFdXG4tfVxuYXBwZW5kIDogQXJyYXkgYSAtPiBBcnJheSBhIC0+IEFycmF5IGFcbmFwcGVuZCAoKEFycmF5X2VsbV9idWlsdGluIF8gXyBfIGFUYWlsKSBhcyBhKSAoQXJyYXlfZWxtX2J1aWx0aW4gYkxlbiBfIGJUcmVlIGJUYWlsKSA9XG4gICAgLS0gVGhlIG1hZ2ljIG51bWJlciA0IGhhcyBiZWVuIGZvdW5kIHdpdGggYmVuY2htYXJrc1xuICAgIGlmIGJMZW4gPD0gKGJyYW5jaEZhY3RvciAqIDQpIHRoZW5cbiAgICAgICAgbGV0XG4gICAgICAgICAgICBmb2xkSGVscGVyIG5vZGUgYXJyYXkgPVxuICAgICAgICAgICAgICAgIGNhc2Ugbm9kZSBvZlxuICAgICAgICAgICAgICAgICAgICBTdWJUcmVlIHRyZWUgLT5cbiAgICAgICAgICAgICAgICAgICAgICAgIEpzQXJyYXkuZm9sZGwgZm9sZEhlbHBlciBhcnJheSB0cmVlXG5cbiAgICAgICAgICAgICAgICAgICAgTGVhZiBsZWFmIC0+XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRIZWxwVHJlZSBsZWFmIGFycmF5XG4gICAgICAgIGluXG4gICAgICAgICAgICBKc0FycmF5LmZvbGRsIGZvbGRIZWxwZXIgYSBiVHJlZVxuICAgICAgICAgICAgICAgIHw+IGFwcGVuZEhlbHBUcmVlIGJUYWlsXG4gICAgZWxzZVxuICAgICAgICBsZXRcbiAgICAgICAgICAgIGZvbGRIZWxwZXIgbm9kZSBidWlsZGVyID1cbiAgICAgICAgICAgICAgICBjYXNlIG5vZGUgb2ZcbiAgICAgICAgICAgICAgICAgICAgU3ViVHJlZSB0cmVlIC0+XG4gICAgICAgICAgICAgICAgICAgICAgICBKc0FycmF5LmZvbGRsIGZvbGRIZWxwZXIgYnVpbGRlciB0cmVlXG5cbiAgICAgICAgICAgICAgICAgICAgTGVhZiBsZWFmIC0+XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRIZWxwQnVpbGRlciBsZWFmIGJ1aWxkZXJcbiAgICAgICAgaW5cbiAgICAgICAgICAgIEpzQXJyYXkuZm9sZGwgZm9sZEhlbHBlciAoYnVpbGRlckZyb21BcnJheSBhKSBiVHJlZVxuICAgICAgICAgICAgICAgIHw+IGFwcGVuZEhlbHBCdWlsZGVyIGJUYWlsXG4gICAgICAgICAgICAgICAgfD4gYnVpbGRlclRvQXJyYXkgVHJ1ZVxuXG5cbmFwcGVuZEhlbHBUcmVlIDogSnNBcnJheSBhIC0+IEFycmF5IGEgLT4gQXJyYXkgYVxuYXBwZW5kSGVscFRyZWUgdG9BcHBlbmQgKChBcnJheV9lbG1fYnVpbHRpbiBsZW4gXyB0cmVlIHRhaWwpIGFzIGFycmF5KSA9XG4gICAgbGV0XG4gICAgICAgIGFwcGVuZGVkID1cbiAgICAgICAgICAgIEpzQXJyYXkuYXBwZW5kTiBicmFuY2hGYWN0b3IgdGFpbCB0b0FwcGVuZFxuXG4gICAgICAgIGl0ZW1zVG9BcHBlbmQgPVxuICAgICAgICAgICAgSnNBcnJheS5sZW5ndGggdG9BcHBlbmRcblxuICAgICAgICBub3RBcHBlbmRlZCA9XG4gICAgICAgICAgICBicmFuY2hGYWN0b3IgLSAoSnNBcnJheS5sZW5ndGggdGFpbCkgLSBpdGVtc1RvQXBwZW5kXG5cbiAgICAgICAgbmV3QXJyYXkgPVxuICAgICAgICAgICAgdW5zYWZlUmVwbGFjZVRhaWwgYXBwZW5kZWQgYXJyYXlcbiAgICBpblxuICAgICAgICBpZiBub3RBcHBlbmRlZCA8IDAgdGhlblxuICAgICAgICAgICAgbGV0XG4gICAgICAgICAgICAgICAgbmV4dFRhaWwgPVxuICAgICAgICAgICAgICAgICAgICBKc0FycmF5LnNsaWNlIG5vdEFwcGVuZGVkIGl0ZW1zVG9BcHBlbmQgdG9BcHBlbmRcbiAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgICAgdW5zYWZlUmVwbGFjZVRhaWwgbmV4dFRhaWwgbmV3QXJyYXlcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbmV3QXJyYXlcblxuXG5hcHBlbmRIZWxwQnVpbGRlciA6IEpzQXJyYXkgYSAtPiBCdWlsZGVyIGEgLT4gQnVpbGRlciBhXG5hcHBlbmRIZWxwQnVpbGRlciB0YWlsIGJ1aWxkZXIgPVxuICAgIGxldFxuICAgICAgICBhcHBlbmRlZCA9XG4gICAgICAgICAgICBKc0FycmF5LmFwcGVuZE4gYnJhbmNoRmFjdG9yIGJ1aWxkZXIudGFpbCB0YWlsXG5cbiAgICAgICAgdGFpbExlbiA9XG4gICAgICAgICAgICBKc0FycmF5Lmxlbmd0aCB0YWlsXG5cbiAgICAgICAgbm90QXBwZW5kZWQgPVxuICAgICAgICAgICAgYnJhbmNoRmFjdG9yIC0gKEpzQXJyYXkubGVuZ3RoIGJ1aWxkZXIudGFpbCkgLSB0YWlsTGVuXG4gICAgaW5cbiAgICAgICAgaWYgbm90QXBwZW5kZWQgPCAwIHRoZW5cbiAgICAgICAgICAgIHsgdGFpbCA9IEpzQXJyYXkuc2xpY2Ugbm90QXBwZW5kZWQgdGFpbExlbiB0YWlsXG4gICAgICAgICAgICAsIG5vZGVMaXN0ID0gTGVhZiBhcHBlbmRlZCA6OiBidWlsZGVyLm5vZGVMaXN0XG4gICAgICAgICAgICAsIG5vZGVMaXN0U2l6ZSA9IGJ1aWxkZXIubm9kZUxpc3RTaXplICsgMVxuICAgICAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIG5vdEFwcGVuZGVkID09IDAgdGhlblxuICAgICAgICAgICAgeyB0YWlsID0gSnNBcnJheS5lbXB0eVxuICAgICAgICAgICAgLCBub2RlTGlzdCA9IExlYWYgYXBwZW5kZWQgOjogYnVpbGRlci5ub2RlTGlzdFxuICAgICAgICAgICAgLCBub2RlTGlzdFNpemUgPSBidWlsZGVyLm5vZGVMaXN0U2l6ZSArIDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgeyB0YWlsID0gYXBwZW5kZWRcbiAgICAgICAgICAgICwgbm9kZUxpc3QgPSBidWlsZGVyLm5vZGVMaXN0XG4gICAgICAgICAgICAsIG5vZGVMaXN0U2l6ZSA9IGJ1aWxkZXIubm9kZUxpc3RTaXplXG4gICAgICAgICAgICB9XG5cblxuey18IEdldCBhIHN1Yi1zZWN0aW9uIG9mIGFuIGFycmF5OiBgKHNsaWNlIHN0YXJ0IGVuZCBhcnJheSlgLiBUaGUgYHN0YXJ0YCBpcyBhXG56ZXJvLWJhc2VkIGluZGV4IHdoZXJlIHdlIHdpbGwgc3RhcnQgb3VyIHNsaWNlLiBUaGUgYGVuZGAgaXMgYSB6ZXJvLWJhc2VkIGluZGV4XG50aGF0IGluZGljYXRlcyB0aGUgZW5kIG9mIHRoZSBzbGljZS4gVGhlIHNsaWNlIGV4dHJhY3RzIHVwIHRvIGJ1dCBub3QgaW5jbHVkaW5nXG5gZW5kYC5cblxuICAgIHNsaWNlICAwICAzIChmcm9tTGlzdCBbMCwxLDIsMyw0XSkgPT0gZnJvbUxpc3QgWzAsMSwyXVxuICAgIHNsaWNlICAxICA0IChmcm9tTGlzdCBbMCwxLDIsMyw0XSkgPT0gZnJvbUxpc3QgWzEsMiwzXVxuXG5Cb3RoIHRoZSBgc3RhcnRgIGFuZCBgZW5kYCBpbmRleGVzIGNhbiBiZSBuZWdhdGl2ZSwgaW5kaWNhdGluZyBhbiBvZmZzZXQgZnJvbVxudGhlIGVuZCBvZiB0aGUgYXJyYXkuXG5cbiAgICBzbGljZSAgMSAtMSAoZnJvbUxpc3QgWzAsMSwyLDMsNF0pID09IGZyb21MaXN0IFsxLDIsM11cbiAgICBzbGljZSAtMiAgNSAoZnJvbUxpc3QgWzAsMSwyLDMsNF0pID09IGZyb21MaXN0IFszLDRdXG5cblRoaXMgbWFrZXMgaXQgcHJldHR5IGVhc3kgdG8gYHBvcGAgdGhlIGxhc3QgZWxlbWVudCBvZmYgb2YgYW4gYXJyYXk6XG5gc2xpY2UgMCAtMSBhcnJheWBcbi19XG5zbGljZSA6IEludCAtPiBJbnQgLT4gQXJyYXkgYSAtPiBBcnJheSBhXG5zbGljZSBmcm9tIHRvIGFycmF5ID1cbiAgICBsZXRcbiAgICAgICAgY29ycmVjdEZyb20gPVxuICAgICAgICAgICAgdHJhbnNsYXRlSW5kZXggZnJvbSBhcnJheVxuXG4gICAgICAgIGNvcnJlY3RUbyA9XG4gICAgICAgICAgICB0cmFuc2xhdGVJbmRleCB0byBhcnJheVxuICAgIGluXG4gICAgICAgIGlmIGNvcnJlY3RGcm9tID4gY29ycmVjdFRvIHRoZW5cbiAgICAgICAgICAgIGVtcHR5XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGFycmF5XG4gICAgICAgICAgICAgICAgfD4gc2xpY2VSaWdodCBjb3JyZWN0VG9cbiAgICAgICAgICAgICAgICB8PiBzbGljZUxlZnQgY29ycmVjdEZyb21cblxuXG57LXwgR2l2ZW4gYSByZWxhdGl2ZSBhcnJheSBpbmRleCwgY29udmVydCBpdCBpbnRvIGFuIGFic29sdXRlIG9uZS5cblxuICAgIHRyYW5zbGF0ZUluZGV4IC0xIHNvbWVBcnJheSA9PSBzb21lQXJyYXkubGVuZ3RoIC0gMVxuICAgIHRyYW5zbGF0ZUluZGV4IC0xMCBzb21lQXJyYXkgPT0gc29tZUFycmF5Lmxlbmd0aCAtIDEwXG4gICAgdHJhbnNsYXRlSW5kZXggNSBzb21lQXJyYXkgPT0gNVxuLX1cbnRyYW5zbGF0ZUluZGV4IDogSW50IC0+IEFycmF5IGEgLT4gSW50XG50cmFuc2xhdGVJbmRleCBpbmRleCAoQXJyYXlfZWxtX2J1aWx0aW4gbGVuIF8gXyBfKSA9XG4gICAgbGV0XG4gICAgICAgIHBvc0luZGV4ID1cbiAgICAgICAgICAgIGlmIGluZGV4IDwgMCB0aGVuXG4gICAgICAgICAgICAgICAgbGVuICsgaW5kZXhcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBpbmRleFxuICAgIGluXG4gICAgICAgIGlmIHBvc0luZGV4IDwgMCB0aGVuXG4gICAgICAgICAgICAwXG4gICAgICAgIGVsc2UgaWYgcG9zSW5kZXggPiBsZW4gdGhlblxuICAgICAgICAgICAgbGVuXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHBvc0luZGV4XG5cblxuey18IFRoaXMgZnVuY3Rpb24gc2xpY2VzIHRoZSB0cmVlIGZyb20gdGhlIHJpZ2h0LlxuXG5GaXJzdCwgdHdvIHRoaW5ncyBhcmUgdGVzdGVkOlxuMS4gSWYgdGhlIGFycmF5IGRvZXMgbm90IG5lZWQgc2xpY2luZywgcmV0dXJuIHRoZSBvcmlnaW5hbCBhcnJheS5cbjIuIElmIHRoZSBhcnJheSBjYW4gYmUgc2xpY2VkIGJ5IG9ubHkgc2xpY2luZyB0aGUgdGFpbCwgc2xpY2UgdGhlIHRhaWwuXG5cbk90aGVyd2lzZSwgd2UgZG8gdGhlIGZvbGxvd2luZzpcbjEuIEZpbmQgdGhlIG5ldyB0YWlsIGluIHRoZSB0cmVlLCBwcm9tb3RlIGl0IHRvIHRoZSByb290IHRhaWwgcG9zaXRpb24gYW5kXG5zbGljZSBpdC5cbjIuIFNsaWNlIGV2ZXJ5IHN1YiB0cmVlLlxuMy4gUHJvbW90ZSBzdWJUcmVlcyB1bnRpbCB0aGUgdHJlZSBoYXMgdGhlIGNvcnJlY3QgaGVpZ2h0LlxuLX1cbnNsaWNlUmlnaHQgOiBJbnQgLT4gQXJyYXkgYSAtPiBBcnJheSBhXG5zbGljZVJpZ2h0IGVuZCAoKEFycmF5X2VsbV9idWlsdGluIGxlbiBzdGFydFNoaWZ0IHRyZWUgdGFpbCkgYXMgYXJyYXkpID1cbiAgICBpZiBlbmQgPT0gbGVuIHRoZW5cbiAgICAgICAgYXJyYXlcbiAgICBlbHNlIGlmIGVuZCA+PSB0YWlsSW5kZXggbGVuIHRoZW5cbiAgICAgICAgQXJyYXlfZWxtX2J1aWx0aW4gZW5kIHN0YXJ0U2hpZnQgdHJlZSA8fFxuICAgICAgICAgICAgSnNBcnJheS5zbGljZSAwIChCaXR3aXNlLmFuZCBiaXRNYXNrIGVuZCkgdGFpbFxuICAgIGVsc2VcbiAgICAgICAgbGV0XG4gICAgICAgICAgICBlbmRJZHggPVxuICAgICAgICAgICAgICAgIHRhaWxJbmRleCBlbmRcblxuICAgICAgICAgICAgZGVwdGggPVxuICAgICAgICAgICAgICAgIChlbmRJZHggLSAxKVxuICAgICAgICAgICAgICAgICAgICB8PiBtYXggMVxuICAgICAgICAgICAgICAgICAgICB8PiB0b0Zsb2F0XG4gICAgICAgICAgICAgICAgICAgIHw+IGxvZ0Jhc2UgKHRvRmxvYXQgYnJhbmNoRmFjdG9yKVxuICAgICAgICAgICAgICAgICAgICB8PiBmbG9vclxuXG4gICAgICAgICAgICBuZXdTaGlmdCA9XG4gICAgICAgICAgICAgICAgbWF4IDUgPHwgZGVwdGggKiBzaGlmdFN0ZXBcbiAgICAgICAgaW5cbiAgICAgICAgICAgIEFycmF5X2VsbV9idWlsdGluXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAgICAgbmV3U2hpZnRcbiAgICAgICAgICAgICAgICAodHJlZVxuICAgICAgICAgICAgICAgICAgICB8PiBzbGljZVRyZWUgc3RhcnRTaGlmdCBlbmRJZHhcbiAgICAgICAgICAgICAgICAgICAgfD4gaG9pc3RUcmVlIHN0YXJ0U2hpZnQgbmV3U2hpZnRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKGZldGNoTmV3VGFpbCBzdGFydFNoaWZ0IGVuZCBlbmRJZHggdHJlZSlcblxuXG57LXwgU2xpY2UgYW5kIHJldHVybiB0aGUgYExlYWZgIG5vZGUgYWZ0ZXIgd2hhdCBpcyB0byBiZSB0aGUgbGFzdCBub2RlXG5pbiB0aGUgc2xpY2VkIHRyZWUuXG4tfVxuZmV0Y2hOZXdUYWlsIDogSW50IC0+IEludCAtPiBJbnQgLT4gVHJlZSBhIC0+IEpzQXJyYXkgYVxuZmV0Y2hOZXdUYWlsIHNoaWZ0IGVuZCB0cmVlRW5kIHRyZWUgPVxuICAgIGxldFxuICAgICAgICBwb3MgPVxuICAgICAgICAgICAgQml0d2lzZS5hbmQgYml0TWFzayA8fCBCaXR3aXNlLnNoaWZ0UmlnaHRaZkJ5IHNoaWZ0IHRyZWVFbmRcbiAgICBpblxuICAgICAgICBjYXNlIEpzQXJyYXkudW5zYWZlR2V0IHBvcyB0cmVlIG9mXG4gICAgICAgICAgICBTdWJUcmVlIHN1YiAtPlxuICAgICAgICAgICAgICAgIGZldGNoTmV3VGFpbCAoc2hpZnQgLSBzaGlmdFN0ZXApIGVuZCB0cmVlRW5kIHN1YlxuXG4gICAgICAgICAgICBMZWFmIHZhbHVlcyAtPlxuICAgICAgICAgICAgICAgIEpzQXJyYXkuc2xpY2UgMCAoQml0d2lzZS5hbmQgYml0TWFzayBlbmQpIHZhbHVlc1xuXG5cbnstfCBTaG9ydGVuIHRoZSByb290IGBOb2RlYCBvZiB0aGUgdHJlZSBzbyBpdCBpcyBsb25nIGVub3VnaCB0byBjb250YWluXG50aGUgYE5vZGVgIGluZGljYXRlZCBieSBgZW5kSWR4YC4gVGhlbiByZWN1cnNpdmVseSBwZXJmb3JtIHRoZSBzYW1lIG9wZXJhdGlvblxudG8gdGhlIGxhc3Qgbm9kZSBvZiBlYWNoIGBTdWJUcmVlYC5cbi19XG5zbGljZVRyZWUgOiBJbnQgLT4gSW50IC0+IFRyZWUgYSAtPiBUcmVlIGFcbnNsaWNlVHJlZSBzaGlmdCBlbmRJZHggdHJlZSA9XG4gICAgbGV0XG4gICAgICAgIGxhc3RQb3MgPVxuICAgICAgICAgICAgQml0d2lzZS5hbmQgYml0TWFzayA8fCBCaXR3aXNlLnNoaWZ0UmlnaHRaZkJ5IHNoaWZ0IGVuZElkeFxuICAgIGluXG4gICAgICAgIGNhc2UgSnNBcnJheS51bnNhZmVHZXQgbGFzdFBvcyB0cmVlIG9mXG4gICAgICAgICAgICBTdWJUcmVlIHN1YiAtPlxuICAgICAgICAgICAgICAgIGxldFxuICAgICAgICAgICAgICAgICAgICBuZXdTdWIgPVxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpY2VUcmVlIChzaGlmdCAtIHNoaWZ0U3RlcCkgZW5kSWR4IHN1YlxuICAgICAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgICAgICAgIGlmIEpzQXJyYXkubGVuZ3RoIG5ld1N1YiA9PSAwIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIC0tIFRoZSBzdWIgaXMgZW1wdHksIHNsaWNlIGl0IGF3YXlcbiAgICAgICAgICAgICAgICAgICAgICAgIEpzQXJyYXkuc2xpY2UgMCBsYXN0UG9zIHRyZWVcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJlZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHw+IEpzQXJyYXkuc2xpY2UgMCAobGFzdFBvcyArIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfD4gSnNBcnJheS51bnNhZmVTZXQgbGFzdFBvcyAoU3ViVHJlZSBuZXdTdWIpXG5cbiAgICAgICAgICAgIC0tIFRoaXMgaXMgc3VwcG9zZWQgdG8gYmUgdGhlIG5ldyB0YWlsLiBGZXRjaGVkIGJ5IGBmZXRjaE5ld1RhaWxgLlxuICAgICAgICAgICAgLS0gU2xpY2UgdXAgdG8sIGJ1dCBub3QgaW5jbHVkaW5nLCB0aGlzIHBvaW50LlxuICAgICAgICAgICAgTGVhZiBfIC0+XG4gICAgICAgICAgICAgICAgSnNBcnJheS5zbGljZSAwIGxhc3RQb3MgdHJlZVxuXG5cbnstfCBUaGUgdHJlZSBpcyBzdXBwb3NlZCB0byBiZSBvZiBhIGNlcnRhaW4gZGVwdGguIFNpbmNlIHNsaWNpbmcgcmVtb3Zlc1xuZWxlbWVudHMsIGl0IGNvdWxkIGJlIHRoYXQgdGhlIHRyZWUgc2hvdWxkIGhhdmUgYSBzbWFsbGVyIGRlcHRoXG50aGFuIGl0IGhhZCBvcmlnaW5hbGx5LiBUaGlzIGZ1bmN0aW9uIHNob3J0ZW5zIHRoZSBoZWlnaHQgaWYgaXQgaXMgbmVjZXNzYXJ5XG50byBkbyBzby5cbi19XG5ob2lzdFRyZWUgOiBJbnQgLT4gSW50IC0+IFRyZWUgYSAtPiBUcmVlIGFcbmhvaXN0VHJlZSBvbGRTaGlmdCBuZXdTaGlmdCB0cmVlID1cbiAgICBpZiBvbGRTaGlmdCA8PSBuZXdTaGlmdCB8fCBKc0FycmF5Lmxlbmd0aCB0cmVlID09IDAgdGhlblxuICAgICAgICB0cmVlXG4gICAgZWxzZVxuICAgICAgICBjYXNlIEpzQXJyYXkudW5zYWZlR2V0IDAgdHJlZSBvZlxuICAgICAgICAgICAgU3ViVHJlZSBzdWIgLT5cbiAgICAgICAgICAgICAgICBob2lzdFRyZWUgKG9sZFNoaWZ0IC0gc2hpZnRTdGVwKSBuZXdTaGlmdCBzdWJcblxuICAgICAgICAgICAgTGVhZiBfIC0+XG4gICAgICAgICAgICAgICAgdHJlZVxuXG5cbnstfCBUaGlzIGZ1bmN0aW9uIHNsaWNlcyB0aGUgdHJlZSBmcm9tIHRoZSBsZWZ0LiBTdWNoIGFuIG9wZXJhdGlvbiB3aWxsIGNoYW5nZVxudGhlIGluZGV4IG9mIGV2ZXJ5IGVsZW1lbnQgYWZ0ZXIgdGhlIHNsaWNlLiBXaGljaCBtZWFucyB0aGF0IHdlIHdpbGwgaGF2ZSB0b1xucmVidWlsZCB0aGUgYXJyYXkuXG5cbkZpcnN0LCB0d28gdGhpbmdzIGFyZSB0ZXN0ZWQ6XG4xLiBJZiB0aGUgYXJyYXkgZG9lcyBub3QgbmVlZCBzbGljaW5nLCByZXR1cm4gdGhlIG9yaWdpbmFsIGFycmF5LlxuMi4gSWYgdGhlIHNsaWNlIHJlbW92ZXMgZXZlcnkgZWxlbWVudCBidXQgdGhvc2UgaW4gdGhlIHRhaWwsIHNsaWNlIHRoZSB0YWlsIGFuZFxuc2V0IHRoZSB0cmVlIHRvIHRoZSBlbXB0eSBhcnJheS5cblxuT3RoZXJ3aXNlLCB3ZSBkbyB0aGUgZm9sbG93aW5nOlxuMS4gQWRkIGV2ZXJ5IGxlYWYgbm9kZSBpbiB0aGUgdHJlZSB0byBhIGxpc3QuXG4yLiBEcm9wIHRoZSBub2RlcyB3aGljaCBhcmUgc3VwcG9zZWQgdG8gYmUgc2xpY2VkIGF3YXkuXG4zLiBTbGljZSB0aGUgaGVhZCBub2RlIG9mIHRoZSBsaXN0LCB3aGljaCByZXByZXNlbnRzIHRoZSBzdGFydCBvZiB0aGUgbmV3IGFycmF5LlxuNC4gQ3JlYXRlIGEgYnVpbGRlciB3aXRoIHRoZSB0YWlsIHNldCBhcyB0aGUgbm9kZSBmcm9tIHRoZSBwcmV2aW91cyBzdGVwLlxuNS4gQXBwZW5kIHRoZSByZW1haW5pbmcgbm9kZXMgaW50byB0aGlzIGJ1aWxkZXIsIGFuZCBjcmVhdGUgdGhlIGFycmF5LlxuLX1cbnNsaWNlTGVmdCA6IEludCAtPiBBcnJheSBhIC0+IEFycmF5IGFcbnNsaWNlTGVmdCBmcm9tICgoQXJyYXlfZWxtX2J1aWx0aW4gbGVuIF8gdHJlZSB0YWlsKSBhcyBhcnJheSkgPVxuICAgIGlmIGZyb20gPT0gMCB0aGVuXG4gICAgICAgIGFycmF5XG4gICAgZWxzZSBpZiBmcm9tID49IHRhaWxJbmRleCBsZW4gdGhlblxuICAgICAgICBBcnJheV9lbG1fYnVpbHRpbiAobGVuIC0gZnJvbSkgc2hpZnRTdGVwIEpzQXJyYXkuZW1wdHkgPHxcbiAgICAgICAgICAgIEpzQXJyYXkuc2xpY2UgKGZyb20gLSB0YWlsSW5kZXggbGVuKSAoSnNBcnJheS5sZW5ndGggdGFpbCkgdGFpbFxuICAgIGVsc2VcbiAgICAgICAgbGV0XG4gICAgICAgICAgICBoZWxwZXIgbm9kZSBhY2MgPVxuICAgICAgICAgICAgICAgIGNhc2Ugbm9kZSBvZlxuICAgICAgICAgICAgICAgICAgICBTdWJUcmVlIHN1YlRyZWUgLT5cbiAgICAgICAgICAgICAgICAgICAgICAgIEpzQXJyYXkuZm9sZHIgaGVscGVyIGFjYyBzdWJUcmVlXG5cbiAgICAgICAgICAgICAgICAgICAgTGVhZiBsZWFmIC0+XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWFmIDo6IGFjY1xuXG4gICAgICAgICAgICBsZWFmTm9kZXMgPVxuICAgICAgICAgICAgICAgIEpzQXJyYXkuZm9sZHIgaGVscGVyIFsgdGFpbCBdIHRyZWVcblxuICAgICAgICAgICAgc2tpcE5vZGVzID1cbiAgICAgICAgICAgICAgICBmcm9tIC8vIGJyYW5jaEZhY3RvclxuXG4gICAgICAgICAgICBub2Rlc1RvSW5zZXJ0ID1cbiAgICAgICAgICAgICAgICBMaXN0LmRyb3Agc2tpcE5vZGVzIGxlYWZOb2Rlc1xuICAgICAgICBpblxuICAgICAgICAgICAgY2FzZSBub2Rlc1RvSW5zZXJ0IG9mXG4gICAgICAgICAgICAgICAgW10gLT5cbiAgICAgICAgICAgICAgICAgICAgZW1wdHlcblxuICAgICAgICAgICAgICAgIGhlYWQgOjogcmVzdCAtPlxuICAgICAgICAgICAgICAgICAgICBsZXRcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0U2xpY2UgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gLSAoc2tpcE5vZGVzICogYnJhbmNoRmFjdG9yKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsQnVpbGRlciA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0YWlsID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSnNBcnJheS5zbGljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RTbGljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKEpzQXJyYXkubGVuZ3RoIGhlYWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBub2RlTGlzdCA9IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBub2RlTGlzdFNpemUgPSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpblxuICAgICAgICAgICAgICAgICAgICAgICAgTGlzdC5mb2xkbCBhcHBlbmRIZWxwQnVpbGRlciBpbml0aWFsQnVpbGRlciByZXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfD4gYnVpbGRlclRvQXJyYXkgVHJ1ZVxuXG5cbnstfCBBIGJ1aWxkZXIgY29udGFpbnMgYWxsIGluZm9ybWF0aW9uIG5lY2Vzc2FyeSB0byBidWlsZCBhbiBhcnJheS4gQWRkaW5nXG5pbmZvcm1hdGlvbiB0byB0aGUgYnVpbGRlciBpcyBmYXN0LiBBIGJ1aWxkZXIgaXMgdGhlcmVmb3JlIGEgc3VpdGFibGVcbmludGVybWVkaWFyeSBmb3IgY29uc3RydWN0aW5nIGFycmF5cy5cbi19XG50eXBlIGFsaWFzIEJ1aWxkZXIgYSA9XG4gICAgeyB0YWlsIDogSnNBcnJheSBhXG4gICAgLCBub2RlTGlzdCA6IExpc3QgKE5vZGUgYSlcbiAgICAsIG5vZGVMaXN0U2l6ZSA6IEludFxuICAgIH1cblxuXG57LXwgVGhlIGVtcHR5IGJ1aWxkZXIuXG4tfVxuZW1wdHlCdWlsZGVyIDogQnVpbGRlciBhXG5lbXB0eUJ1aWxkZXIgPVxuICAgIHsgdGFpbCA9IEpzQXJyYXkuZW1wdHlcbiAgICAsIG5vZGVMaXN0ID0gW11cbiAgICAsIG5vZGVMaXN0U2l6ZSA9IDBcbiAgICB9XG5cblxuey18IENvbnZlcnRzIGFuIGFycmF5IHRvIGEgYnVpbGRlci5cbi19XG5idWlsZGVyRnJvbUFycmF5IDogQXJyYXkgYSAtPiBCdWlsZGVyIGFcbmJ1aWxkZXJGcm9tQXJyYXkgKEFycmF5X2VsbV9idWlsdGluIGxlbiBfIHRyZWUgdGFpbCkgPVxuICAgIGxldFxuICAgICAgICBoZWxwZXIgbm9kZSBhY2MgPVxuICAgICAgICAgICAgY2FzZSBub2RlIG9mXG4gICAgICAgICAgICAgICAgU3ViVHJlZSBzdWJUcmVlIC0+XG4gICAgICAgICAgICAgICAgICAgIEpzQXJyYXkuZm9sZGwgaGVscGVyIGFjYyBzdWJUcmVlXG5cbiAgICAgICAgICAgICAgICBMZWFmIF8gLT5cbiAgICAgICAgICAgICAgICAgICAgbm9kZSA6OiBhY2NcbiAgICBpblxuICAgICAgICB7IHRhaWwgPSB0YWlsXG4gICAgICAgICwgbm9kZUxpc3QgPSBKc0FycmF5LmZvbGRsIGhlbHBlciBbXSB0cmVlXG4gICAgICAgICwgbm9kZUxpc3RTaXplID0gbGVuIC8vIGJyYW5jaEZhY3RvclxuICAgICAgICB9XG5cblxuey18IENvbnN0cnVjdCBhbiBhcnJheSB3aXRoIHRoZSBpbmZvcm1hdGlvbiBpbiBhIGdpdmVuIGJ1aWxkZXIuXG5cbkR1ZSB0byB0aGUgbmF0dXJlIG9mIGBMaXN0YCB0aGUgbGlzdCBvZiBub2RlcyBpbiBhIGJ1aWxkZXIgd2lsbCBvZnRlblxuYmUgaW4gcmV2ZXJzZSBvcmRlciAodGhhdCBpcywgdGhlIGZpcnN0IGxlYWYgb2YgdGhlIGFycmF5IGlzIHRoZSBsYXN0XG5ub2RlIGluIHRoZSBub2RlIGxpc3QpLiBUaGlzIGZ1bmN0aW9uIHRoZXJlZm9yZSBhbGxvd3MgdGhlIGNhbGxlciB0b1xuc3BlY2lmeSBpZiB0aGUgbm9kZSBsaXN0IHNob3VsZCBiZSByZXZlcnNlZCBiZWZvcmUgYnVpbGRpbmcgdGhlIGFycmF5LlxuLX1cbmJ1aWxkZXJUb0FycmF5IDogQm9vbCAtPiBCdWlsZGVyIGEgLT4gQXJyYXkgYVxuYnVpbGRlclRvQXJyYXkgcmV2ZXJzZU5vZGVMaXN0IGJ1aWxkZXIgPVxuICAgIGlmIGJ1aWxkZXIubm9kZUxpc3RTaXplID09IDAgdGhlblxuICAgICAgICBBcnJheV9lbG1fYnVpbHRpblxuICAgICAgICAgICAgKEpzQXJyYXkubGVuZ3RoIGJ1aWxkZXIudGFpbClcbiAgICAgICAgICAgIHNoaWZ0U3RlcFxuICAgICAgICAgICAgSnNBcnJheS5lbXB0eVxuICAgICAgICAgICAgYnVpbGRlci50YWlsXG4gICAgZWxzZVxuICAgICAgICBsZXRcbiAgICAgICAgICAgIHRyZWVMZW4gPVxuICAgICAgICAgICAgICAgIGJ1aWxkZXIubm9kZUxpc3RTaXplICogYnJhbmNoRmFjdG9yXG5cbiAgICAgICAgICAgIGRlcHRoID1cbiAgICAgICAgICAgICAgICAodHJlZUxlbiAtIDEpXG4gICAgICAgICAgICAgICAgICAgIHw+IHRvRmxvYXRcbiAgICAgICAgICAgICAgICAgICAgfD4gbG9nQmFzZSAodG9GbG9hdCBicmFuY2hGYWN0b3IpXG4gICAgICAgICAgICAgICAgICAgIHw+IGZsb29yXG5cbiAgICAgICAgICAgIGNvcnJlY3ROb2RlTGlzdCA9XG4gICAgICAgICAgICAgICAgaWYgcmV2ZXJzZU5vZGVMaXN0IHRoZW5cbiAgICAgICAgICAgICAgICAgICAgTGlzdC5yZXZlcnNlIGJ1aWxkZXIubm9kZUxpc3RcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIubm9kZUxpc3RcblxuICAgICAgICAgICAgdHJlZSA9XG4gICAgICAgICAgICAgICAgdHJlZUZyb21CdWlsZGVyIGNvcnJlY3ROb2RlTGlzdCBidWlsZGVyLm5vZGVMaXN0U2l6ZVxuICAgICAgICBpblxuICAgICAgICAgICAgQXJyYXlfZWxtX2J1aWx0aW5cbiAgICAgICAgICAgICAgICAoSnNBcnJheS5sZW5ndGggYnVpbGRlci50YWlsICsgdHJlZUxlbilcbiAgICAgICAgICAgICAgICAobWF4IDUgPHwgZGVwdGggKiBzaGlmdFN0ZXApXG4gICAgICAgICAgICAgICAgdHJlZVxuICAgICAgICAgICAgICAgIGJ1aWxkZXIudGFpbFxuXG5cbnstfCBUYWtlcyBhIGxpc3Qgb2YgbGVhdmVzIGFuZCBhbiBgSW50YCBzcGVjaWZ5aW5nIGhvdyBtYW55IGxlYXZlcyB0aGVyZSBhcmUsXG5hbmQgYnVpbGRzIGEgdHJlZSBzdHJ1Y3R1cmUgdG8gYmUgdXNlZCBpbiBhbiBgQXJyYXlgLlxuLX1cbnRyZWVGcm9tQnVpbGRlciA6IExpc3QgKE5vZGUgYSkgLT4gSW50IC0+IFRyZWUgYVxudHJlZUZyb21CdWlsZGVyIG5vZGVMaXN0IG5vZGVMaXN0U2l6ZSA9XG4gICAgbGV0XG4gICAgICAgIG5ld05vZGVTaXplID1cbiAgICAgICAgICAgICgodG9GbG9hdCBub2RlTGlzdFNpemUpIC8gKHRvRmxvYXQgYnJhbmNoRmFjdG9yKSlcbiAgICAgICAgICAgICAgICB8PiBjZWlsaW5nXG4gICAgaW5cbiAgICAgICAgaWYgbmV3Tm9kZVNpemUgPT0gMSB0aGVuXG4gICAgICAgICAgICBKc0FycmF5LmluaXRpYWxpemVGcm9tTGlzdCBicmFuY2hGYWN0b3Igbm9kZUxpc3RcbiAgICAgICAgICAgICAgICB8PiBUdXBsZS5maXJzdFxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0cmVlRnJvbUJ1aWxkZXJcbiAgICAgICAgICAgICAgICAoY29tcHJlc3NOb2RlcyBub2RlTGlzdCBbXSlcbiAgICAgICAgICAgICAgICBuZXdOb2RlU2l6ZVxuXG5cbnstfCBUYWtlcyBhIGxpc3Qgb2Ygbm9kZXMgYW5kIHJldHVybiBhIGxpc3Qgb2YgYFN1YlRyZWVgcyBjb250YWluaW5nIHRob3NlXG5ub2Rlcy5cbi19XG5jb21wcmVzc05vZGVzIDogTGlzdCAoTm9kZSBhKSAtPiBMaXN0IChOb2RlIGEpIC0+IExpc3QgKE5vZGUgYSlcbmNvbXByZXNzTm9kZXMgbm9kZXMgYWNjID1cbiAgICBsZXRcbiAgICAgICAgKCBub2RlLCByZW1haW5pbmdOb2RlcyApID1cbiAgICAgICAgICAgIEpzQXJyYXkuaW5pdGlhbGl6ZUZyb21MaXN0IGJyYW5jaEZhY3RvciBub2Rlc1xuXG4gICAgICAgIG5ld0FjYyA9XG4gICAgICAgICAgICAoU3ViVHJlZSBub2RlKSA6OiBhY2NcbiAgICBpblxuICAgICAgICBjYXNlIHJlbWFpbmluZ05vZGVzIG9mXG4gICAgICAgICAgICBbXSAtPlxuICAgICAgICAgICAgICAgIExpc3QucmV2ZXJzZSBuZXdBY2NcblxuICAgICAgICAgICAgXyAtPlxuICAgICAgICAgICAgICAgIGNvbXByZXNzTm9kZXMgcmVtYWluaW5nTm9kZXMgbmV3QWNjXG4nfSkpLAoJCQlfVXRpbHNfVHVwbGUyKAoJCQknQml0d2lzZS5lbG0nLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJEJsb2JOb2RlKAoJCQkJe3V0Zjg6ICdtb2R1bGUgQml0d2lzZSBleHBvc2luZ1xuICAoIGFuZCwgb3IsIHhvciwgY29tcGxlbWVudFxuICAsIHNoaWZ0TGVmdEJ5LCBzaGlmdFJpZ2h0QnksIHNoaWZ0UmlnaHRaZkJ5XG4gIClcblxuey18IExpYnJhcnkgZm9yIFtiaXR3aXNlIG9wZXJhdGlvbnNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0JpdHdpc2Vfb3BlcmF0aW9uKS5cblxuIyBCYXNpYyBPcGVyYXRpb25zXG5AZG9jcyBhbmQsIG9yLCB4b3IsIGNvbXBsZW1lbnRcblxuIyBCaXQgU2hpZnRzXG5AZG9jcyBzaGlmdExlZnRCeSwgc2hpZnRSaWdodEJ5LCBzaGlmdFJpZ2h0WmZCeVxuLX1cblxuXG5pbXBvcnQgQmFzaWNzIGV4cG9zaW5nIChJbnQpXG5pbXBvcnQgRWxtLktlcm5lbC5CaXR3aXNlXG5cblxuXG57LXwgQml0d2lzZSBBTkRcbi19XG5hbmQgOiBJbnQgLT4gSW50IC0+IEludFxuYW5kID1cbiAgRWxtLktlcm5lbC5CaXR3aXNlLmFuZFxuXG5cbnstfCBCaXR3aXNlIE9SXG4tfVxub3IgOiBJbnQgLT4gSW50IC0+IEludFxub3IgPVxuICBFbG0uS2VybmVsLkJpdHdpc2Uub3JcblxuXG57LXwgQml0d2lzZSBYT1Jcbi19XG54b3IgOiBJbnQgLT4gSW50IC0+IEludFxueG9yID1cbiAgRWxtLktlcm5lbC5CaXR3aXNlLnhvclxuXG5cbnstfCBGbGlwIGVhY2ggYml0IGluZGl2aWR1YWxseSwgb2Z0ZW4gY2FsbGVkIGJpdHdpc2UgTk9UXG4tfVxuY29tcGxlbWVudCA6IEludCAtPiBJbnRcbmNvbXBsZW1lbnQgPVxuICBFbG0uS2VybmVsLkJpdHdpc2UuY29tcGxlbWVudFxuXG5cbnstfCBTaGlmdCBiaXRzIHRvIHRoZSBsZWZ0IGJ5IGEgZ2l2ZW4gb2Zmc2V0LCBmaWxsaW5nIG5ldyBiaXRzIHdpdGggemVyb3MuXG5UaGlzIGNhbiBiZSB1c2VkIHRvIG11bHRpcGx5IG51bWJlcnMgYnkgcG93ZXJzIG9mIHR3by5cblxuICAgIHNoaWZ0TGVmdEJ5IDEgNSA9PSAxMFxuICAgIHNoaWZ0TGVmdEJ5IDUgMSA9PSAzMlxuLX1cbnNoaWZ0TGVmdEJ5IDogSW50IC0+IEludCAtPiBJbnRcbnNoaWZ0TGVmdEJ5ID1cbiAgRWxtLktlcm5lbC5CaXR3aXNlLnNoaWZ0TGVmdEJ5XG5cblxuey18IFNoaWZ0IGJpdHMgdG8gdGhlIHJpZ2h0IGJ5IGEgZ2l2ZW4gb2Zmc2V0LCBmaWxsaW5nIG5ldyBiaXRzIHdpdGhcbndoYXRldmVyIGlzIHRoZSB0b3Btb3N0IGJpdC4gVGhpcyBjYW4gYmUgdXNlZCB0byBkaXZpZGUgbnVtYmVycyBieSBwb3dlcnMgb2YgdHdvLlxuXG4gICAgc2hpZnRSaWdodEJ5IDEgIDMyID09IDE2XG4gICAgc2hpZnRSaWdodEJ5IDIgIDMyID09IDhcbiAgICBzaGlmdFJpZ2h0QnkgMSAtMzIgPT0gLTE2XG5cblRoaXMgaXMgY2FsbGVkIGFuIFthcml0aG1ldGljIHJpZ2h0IHNoaWZ0XVthcnNdLCBvZnRlbiB3cml0dGVuIGA+PmAsIGFuZFxuc29tZXRpbWVzIGNhbGxlZCBhIHNpZ24tcHJvcGFnYXRpbmcgcmlnaHQgc2hpZnQgYmVjYXVzZSBpdCBmaWxscyBlbXB0eSBzcG90c1xud2l0aCBjb3BpZXMgb2YgdGhlIGhpZ2hlc3QgYml0LlxuXG5bYXJzXTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQml0d2lzZV9vcGVyYXRpb24jQXJpdGhtZXRpY19zaGlmdFxuLX1cbnNoaWZ0UmlnaHRCeSA6IEludCAtPiBJbnQgLT4gSW50XG5zaGlmdFJpZ2h0QnkgPVxuICBFbG0uS2VybmVsLkJpdHdpc2Uuc2hpZnRSaWdodEJ5XG5cblxuey18IFNoaWZ0IGJpdHMgdG8gdGhlIHJpZ2h0IGJ5IGEgZ2l2ZW4gb2Zmc2V0LCBmaWxsaW5nIG5ldyBiaXRzIHdpdGggemVyb3MuXG5cbiAgICBzaGlmdFJpZ2h0WmZCeSAxICAzMiA9PSAxNlxuICAgIHNoaWZ0UmlnaHRaZkJ5IDIgIDMyID09IDhcbiAgICBzaGlmdFJpZ2h0WmZCeSAxIC0zMiA9PSAyMTQ3NDgzNjMyXG5cblRoaXMgaXMgY2FsbGVkIGFuIFtsb2dpY2FsIHJpZ2h0IHNoaWZ0XVtscnNdLCBvZnRlbiB3cml0dGVuIGA+Pj5gLCBhbmRcbnNvbWV0aW1lcyBjYWxsZWQgYSB6ZXJvLWZpbGwgcmlnaHQgc2hpZnQgYmVjYXVzZSBpdCBmaWxscyBlbXB0eSBzcG90cyB3aXRoXG56ZXJvcy5cblxuW2xyc106IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0JpdHdpc2Vfb3BlcmF0aW9uI0xvZ2ljYWxfc2hpZnRcbi19XG5zaGlmdFJpZ2h0WmZCeSA6IEludCAtPiBJbnQgLT4gSW50XG5zaGlmdFJpZ2h0WmZCeSA9XG4gIEVsbS5LZXJuZWwuQml0d2lzZS5zaGlmdFJpZ2h0WmZCeVxuXG4nfSkpLAoJCQlfVXRpbHNfVHVwbGUyKAoJCQknRGljdC5lbG0nLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJEJsb2JOb2RlKAoJCQkJe3V0Zjg6ICdtb2R1bGUgRGljdCBleHBvc2luZ1xuICAoIERpY3RcbiAgLCBlbXB0eSwgc2luZ2xldG9uLCBpbnNlcnQsIHVwZGF0ZSwgcmVtb3ZlXG4gICwgaXNFbXB0eSwgbWVtYmVyLCBnZXQsIHNpemVcbiAgLCBrZXlzLCB2YWx1ZXMsIHRvTGlzdCwgZnJvbUxpc3RcbiAgLCBtYXAsIGZvbGRsLCBmb2xkciwgZmlsdGVyLCBwYXJ0aXRpb25cbiAgLCB1bmlvbiwgaW50ZXJzZWN0LCBkaWZmLCBtZXJnZVxuICApXG5cbnstfCBBIGRpY3Rpb25hcnkgbWFwcGluZyB1bmlxdWUga2V5cyB0byB2YWx1ZXMuIFRoZSBrZXlzIGNhbiBiZSBhbnkgY29tcGFyYWJsZVxudHlwZS4gVGhpcyBpbmNsdWRlcyBgSW50YCwgYEZsb2F0YCwgYFRpbWVgLCBgQ2hhcmAsIGBTdHJpbmdgLCBhbmQgdHVwbGVzIG9yXG5saXN0cyBvZiBjb21wYXJhYmxlIHR5cGVzLlxuXG5JbnNlcnQsIHJlbW92ZSwgYW5kIHF1ZXJ5IG9wZXJhdGlvbnMgYWxsIHRha2UgKk8obG9nIG4pKiB0aW1lLlxuXG4jIERpY3Rpb25hcmllc1xuQGRvY3MgRGljdFxuXG4jIEJ1aWxkXG5AZG9jcyBlbXB0eSwgc2luZ2xldG9uLCBpbnNlcnQsIHVwZGF0ZSwgcmVtb3ZlXG5cbiMgUXVlcnlcbkBkb2NzIGlzRW1wdHksIG1lbWJlciwgZ2V0LCBzaXplXG5cbiMgTGlzdHNcbkBkb2NzIGtleXMsIHZhbHVlcywgdG9MaXN0LCBmcm9tTGlzdFxuXG4jIFRyYW5zZm9ybVxuQGRvY3MgbWFwLCBmb2xkbCwgZm9sZHIsIGZpbHRlciwgcGFydGl0aW9uXG5cbiMgQ29tYmluZVxuQGRvY3MgdW5pb24sIGludGVyc2VjdCwgZGlmZiwgbWVyZ2VcblxuLX1cblxuXG5pbXBvcnQgQmFzaWNzIGV4cG9zaW5nICguLilcbmltcG9ydCBNYXliZSBleHBvc2luZyAoLi4pXG5pbXBvcnQgTGlzdCBleHBvc2luZyAoLi4pXG5cblxuXG4tLSBESUNUSU9OQVJJRVNcblxuXG4tLSBUaGUgY29sb3Igb2YgYSBub2RlLiBMZWF2ZXMgYXJlIGNvbnNpZGVyZWQgQmxhY2suXG50eXBlIE5Db2xvclxuICAgID0gUmVkXG4gICAgfCBCbGFja1xuXG5cbnstfCBBIGRpY3Rpb25hcnkgb2Yga2V5cyBhbmQgdmFsdWVzLiBTbyBhIGBEaWN0IFN0cmluZyBVc2VyYCBpcyBhIGRpY3Rpb25hcnlcbnRoYXQgbGV0cyB5b3UgbG9vayB1cCBhIGBTdHJpbmdgIChzdWNoIGFzIHVzZXIgbmFtZXMpIGFuZCBmaW5kIHRoZSBhc3NvY2lhdGVkXG5gVXNlcmAuXG5cbiAgICBpbXBvcnQgRGljdCBleHBvc2luZyAoRGljdClcblxuICAgIHVzZXJzIDogRGljdCBTdHJpbmcgVXNlclxuICAgIHVzZXJzID1cbiAgICAgIERpY3QuZnJvbUxpc3RcbiAgICAgICAgWyAoXCJBbGljZVwiLCBVc2VyIFwiQWxpY2VcIiAyOCAxLjY1KVxuICAgICAgICAsIChcIkJvYlwiICAsIFVzZXIgXCJCb2JcIiAgIDE5IDEuODIpXG4gICAgICAgICwgKFwiQ2h1Y2tcIiwgVXNlciBcIkNodWNrXCIgMzMgMS43NSlcbiAgICAgICAgXVxuXG4gICAgdHlwZSBhbGlhcyBVc2VyID1cbiAgICAgIHsgbmFtZSA6IFN0cmluZ1xuICAgICAgLCBhZ2UgOiBJbnRcbiAgICAgICwgaGVpZ2h0IDogRmxvYXRcbiAgICAgIH1cbi19XG50eXBlIERpY3QgayB2XG4gICAgPSBSQk5vZGVfZWxtX2J1aWx0aW4gTkNvbG9yIGsgdiAoRGljdCBrIHYpIChEaWN0IGsgdilcbiAgICB8IFJCRW1wdHlfZWxtX2J1aWx0aW5cblxuXG57LXwgQ3JlYXRlIGFuIGVtcHR5IGRpY3Rpb25hcnkuIC19XG5lbXB0eSA6IERpY3QgayB2XG5lbXB0eSA9XG4gIFJCRW1wdHlfZWxtX2J1aWx0aW5cblxuXG57LXwgR2V0IHRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggYSBrZXkuIElmIHRoZSBrZXkgaXMgbm90IGZvdW5kLCByZXR1cm5cbmBOb3RoaW5nYC4gVGhpcyBpcyB1c2VmdWwgd2hlbiB5b3UgYXJlIG5vdCBzdXJlIGlmIGEga2V5IHdpbGwgYmUgaW4gdGhlXG5kaWN0aW9uYXJ5LlxuXG4gICAgYW5pbWFscyA9IGZyb21MaXN0IFsgKFwiVG9tXCIsIENhdCksIChcIkplcnJ5XCIsIE1vdXNlKSBdXG5cbiAgICBnZXQgXCJUb21cIiAgIGFuaW1hbHMgPT0gSnVzdCBDYXRcbiAgICBnZXQgXCJKZXJyeVwiIGFuaW1hbHMgPT0gSnVzdCBNb3VzZVxuICAgIGdldCBcIlNwaWtlXCIgYW5pbWFscyA9PSBOb3RoaW5nXG5cbi19XG5nZXQgOiBjb21wYXJhYmxlIC0+IERpY3QgY29tcGFyYWJsZSB2IC0+IE1heWJlIHZcbmdldCB0YXJnZXRLZXkgZGljdCA9XG4gIGNhc2UgZGljdCBvZlxuICAgIFJCRW1wdHlfZWxtX2J1aWx0aW4gLT5cbiAgICAgIE5vdGhpbmdcblxuICAgIFJCTm9kZV9lbG1fYnVpbHRpbiBfIGtleSB2YWx1ZSBsZWZ0IHJpZ2h0IC0+XG4gICAgICBjYXNlIGNvbXBhcmUgdGFyZ2V0S2V5IGtleSBvZlxuICAgICAgICBMVCAtPlxuICAgICAgICAgIGdldCB0YXJnZXRLZXkgbGVmdFxuXG4gICAgICAgIEVRIC0+XG4gICAgICAgICAgSnVzdCB2YWx1ZVxuXG4gICAgICAgIEdUIC0+XG4gICAgICAgICAgZ2V0IHRhcmdldEtleSByaWdodFxuXG5cbnstfCBEZXRlcm1pbmUgaWYgYSBrZXkgaXMgaW4gYSBkaWN0aW9uYXJ5LiAtfVxubWVtYmVyIDogY29tcGFyYWJsZSAtPiBEaWN0IGNvbXBhcmFibGUgdiAtPiBCb29sXG5tZW1iZXIga2V5IGRpY3QgPVxuICBjYXNlIGdldCBrZXkgZGljdCBvZlxuICAgIEp1c3QgXyAtPlxuICAgICAgVHJ1ZVxuXG4gICAgTm90aGluZyAtPlxuICAgICAgRmFsc2VcblxuXG57LXwgRGV0ZXJtaW5lIHRoZSBudW1iZXIgb2Yga2V5LXZhbHVlIHBhaXJzIGluIHRoZSBkaWN0aW9uYXJ5LiAtfVxuc2l6ZSA6IERpY3QgayB2IC0+IEludFxuc2l6ZSBkaWN0ID1cbiAgc2l6ZUhlbHAgMCBkaWN0XG5cblxuc2l6ZUhlbHAgOiBJbnQgLT4gRGljdCBrIHYgLT4gSW50XG5zaXplSGVscCBuIGRpY3QgPVxuICBjYXNlIGRpY3Qgb2ZcbiAgICBSQkVtcHR5X2VsbV9idWlsdGluIC0+XG4gICAgICBuXG5cbiAgICBSQk5vZGVfZWxtX2J1aWx0aW4gXyBfIF8gbGVmdCByaWdodCAtPlxuICAgICAgc2l6ZUhlbHAgKHNpemVIZWxwIChuKzEpIHJpZ2h0KSBsZWZ0XG5cblxuey18IERldGVybWluZSBpZiBhIGRpY3Rpb25hcnkgaXMgZW1wdHkuXG5cbiAgICBpc0VtcHR5IGVtcHR5ID09IFRydWVcbi19XG5pc0VtcHR5IDogRGljdCBrIHYgLT4gQm9vbFxuaXNFbXB0eSBkaWN0ID1cbiAgY2FzZSBkaWN0IG9mXG4gICAgUkJFbXB0eV9lbG1fYnVpbHRpbiAtPlxuICAgICAgVHJ1ZVxuXG4gICAgUkJOb2RlX2VsbV9idWlsdGluIF8gXyBfIF8gXyAtPlxuICAgICAgRmFsc2VcblxuXG57LXwgSW5zZXJ0IGEga2V5LXZhbHVlIHBhaXIgaW50byBhIGRpY3Rpb25hcnkuIFJlcGxhY2VzIHZhbHVlIHdoZW4gdGhlcmUgaXNcbmEgY29sbGlzaW9uLiAtfVxuaW5zZXJ0IDogY29tcGFyYWJsZSAtPiB2IC0+IERpY3QgY29tcGFyYWJsZSB2IC0+IERpY3QgY29tcGFyYWJsZSB2XG5pbnNlcnQga2V5IHZhbHVlIGRpY3QgPVxuICAtLSBSb290IG5vZGUgaXMgYWx3YXlzIEJsYWNrXG4gIGNhc2UgaW5zZXJ0SGVscCBrZXkgdmFsdWUgZGljdCBvZlxuICAgIFJCTm9kZV9lbG1fYnVpbHRpbiBSZWQgayB2IGwgciAtPlxuICAgICAgUkJOb2RlX2VsbV9idWlsdGluIEJsYWNrIGsgdiBsIHJcblxuICAgIHggLT5cbiAgICAgIHhcblxuXG5pbnNlcnRIZWxwIDogY29tcGFyYWJsZSAtPiB2IC0+IERpY3QgY29tcGFyYWJsZSB2IC0+IERpY3QgY29tcGFyYWJsZSB2XG5pbnNlcnRIZWxwIGtleSB2YWx1ZSBkaWN0ID1cbiAgY2FzZSBkaWN0IG9mXG4gICAgUkJFbXB0eV9lbG1fYnVpbHRpbiAtPlxuICAgICAgLS0gTmV3IG5vZGVzIGFyZSBhbHdheXMgcmVkLiBJZiBpdCB2aW9sYXRlcyB0aGUgcnVsZXMsIGl0IHdpbGwgYmUgZml4ZWRcbiAgICAgIC0tIHdoZW4gYmFsYW5jaW5nLlxuICAgICAgUkJOb2RlX2VsbV9idWlsdGluIFJlZCBrZXkgdmFsdWUgUkJFbXB0eV9lbG1fYnVpbHRpbiBSQkVtcHR5X2VsbV9idWlsdGluXG5cbiAgICBSQk5vZGVfZWxtX2J1aWx0aW4gbkNvbG9yIG5LZXkgblZhbHVlIG5MZWZ0IG5SaWdodCAtPlxuICAgICAgY2FzZSBjb21wYXJlIGtleSBuS2V5IG9mXG4gICAgICAgIExUIC0+XG4gICAgICAgICAgYmFsYW5jZSBuQ29sb3IgbktleSBuVmFsdWUgKGluc2VydEhlbHAga2V5IHZhbHVlIG5MZWZ0KSBuUmlnaHRcblxuICAgICAgICBFUSAtPlxuICAgICAgICAgIFJCTm9kZV9lbG1fYnVpbHRpbiBuQ29sb3IgbktleSB2YWx1ZSBuTGVmdCBuUmlnaHRcblxuICAgICAgICBHVCAtPlxuICAgICAgICAgIGJhbGFuY2UgbkNvbG9yIG5LZXkgblZhbHVlIG5MZWZ0IChpbnNlcnRIZWxwIGtleSB2YWx1ZSBuUmlnaHQpXG5cblxuYmFsYW5jZSA6IE5Db2xvciAtPiBrIC0+IHYgLT4gRGljdCBrIHYgLT4gRGljdCBrIHYgLT4gRGljdCBrIHZcbmJhbGFuY2UgY29sb3Iga2V5IHZhbHVlIGxlZnQgcmlnaHQgPVxuICBjYXNlIHJpZ2h0IG9mXG4gICAgUkJOb2RlX2VsbV9idWlsdGluIFJlZCBySyByViByTGVmdCByUmlnaHQgLT5cbiAgICAgIGNhc2UgbGVmdCBvZlxuICAgICAgICBSQk5vZGVfZWxtX2J1aWx0aW4gUmVkIGxLIGxWIGxMZWZ0IGxSaWdodCAtPlxuICAgICAgICAgIFJCTm9kZV9lbG1fYnVpbHRpblxuICAgICAgICAgICAgUmVkXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICAoUkJOb2RlX2VsbV9idWlsdGluIEJsYWNrIGxLIGxWIGxMZWZ0IGxSaWdodClcbiAgICAgICAgICAgIChSQk5vZGVfZWxtX2J1aWx0aW4gQmxhY2sgcksgclYgckxlZnQgclJpZ2h0KVxuXG4gICAgICAgIF8gLT5cbiAgICAgICAgICBSQk5vZGVfZWxtX2J1aWx0aW4gY29sb3IgcksgclYgKFJCTm9kZV9lbG1fYnVpbHRpbiBSZWQga2V5IHZhbHVlIGxlZnQgckxlZnQpIHJSaWdodFxuXG4gICAgXyAtPlxuICAgICAgY2FzZSBsZWZ0IG9mXG4gICAgICAgIFJCTm9kZV9lbG1fYnVpbHRpbiBSZWQgbEsgbFYgKFJCTm9kZV9lbG1fYnVpbHRpbiBSZWQgbGxLIGxsViBsbExlZnQgbGxSaWdodCkgbFJpZ2h0IC0+XG4gICAgICAgICAgUkJOb2RlX2VsbV9idWlsdGluXG4gICAgICAgICAgICBSZWRcbiAgICAgICAgICAgIGxLXG4gICAgICAgICAgICBsVlxuICAgICAgICAgICAgKFJCTm9kZV9lbG1fYnVpbHRpbiBCbGFjayBsbEsgbGxWIGxsTGVmdCBsbFJpZ2h0KVxuICAgICAgICAgICAgKFJCTm9kZV9lbG1fYnVpbHRpbiBCbGFjayBrZXkgdmFsdWUgbFJpZ2h0IHJpZ2h0KVxuXG4gICAgICAgIF8gLT5cbiAgICAgICAgICBSQk5vZGVfZWxtX2J1aWx0aW4gY29sb3Iga2V5IHZhbHVlIGxlZnQgcmlnaHRcblxuXG57LXwgUmVtb3ZlIGEga2V5LXZhbHVlIHBhaXIgZnJvbSBhIGRpY3Rpb25hcnkuIElmIHRoZSBrZXkgaXMgbm90IGZvdW5kLFxubm8gY2hhbmdlcyBhcmUgbWFkZS4gLX1cbnJlbW92ZSA6IGNvbXBhcmFibGUgLT4gRGljdCBjb21wYXJhYmxlIHYgLT4gRGljdCBjb21wYXJhYmxlIHZcbnJlbW92ZSBrZXkgZGljdCA9XG4gIC0tIFJvb3Qgbm9kZSBpcyBhbHdheXMgQmxhY2tcbiAgY2FzZSByZW1vdmVIZWxwIGtleSBkaWN0IG9mXG4gICAgUkJOb2RlX2VsbV9idWlsdGluIFJlZCBrIHYgbCByIC0+XG4gICAgICBSQk5vZGVfZWxtX2J1aWx0aW4gQmxhY2sgayB2IGwgclxuXG4gICAgeCAtPlxuICAgICAgeFxuXG5cbnstfCBUaGUgZWFzaWVzdCB0aGluZyB0byByZW1vdmUgZnJvbSB0aGUgdHJlZSwgaXMgYSByZWQgbm9kZS4gSG93ZXZlciwgd2hlbiBzZWFyY2hpbmcgZm9yIHRoZVxubm9kZSB0byByZW1vdmUsIHdlIGhhdmUgbm8gd2F5IG9mIGtub3dpbmcgaWYgaXQgd2lsbCBiZSByZWQgb3Igbm90LiBUaGlzIHJlbW92ZSBpbXBsZW1lbnRhdGlvblxubWFrZXMgc3VyZSB0aGF0IHRoZSBib3R0b20gbm9kZSBpcyByZWQgYnkgbW92aW5nIHJlZCBjb2xvcnMgZG93biB0aGUgdHJlZSB0aHJvdWdoIHJvdGF0aW9uXG5hbmQgY29sb3IgZmxpcHMuIEFueSB2aW9sYXRpb25zIHRoaXMgd2lsbCBjYXVzZSwgY2FuIGVhc2lseSBiZSBmaXhlZCBieSBiYWxhbmNpbmcgb24gdGhlIHdheVxudXAgYWdhaW4uXG4tfVxucmVtb3ZlSGVscCA6IGNvbXBhcmFibGUgLT4gRGljdCBjb21wYXJhYmxlIHYgLT4gRGljdCBjb21wYXJhYmxlIHZcbnJlbW92ZUhlbHAgdGFyZ2V0S2V5IGRpY3QgPVxuICBjYXNlIGRpY3Qgb2ZcbiAgICBSQkVtcHR5X2VsbV9idWlsdGluIC0+XG4gICAgICBSQkVtcHR5X2VsbV9idWlsdGluXG5cbiAgICBSQk5vZGVfZWxtX2J1aWx0aW4gY29sb3Iga2V5IHZhbHVlIGxlZnQgcmlnaHQgLT5cbiAgICAgIGlmIHRhcmdldEtleSA8IGtleSB0aGVuXG4gICAgICAgIGNhc2UgbGVmdCBvZlxuICAgICAgICAgIFJCTm9kZV9lbG1fYnVpbHRpbiBCbGFjayBfIF8gbExlZnQgXyAtPlxuICAgICAgICAgICAgY2FzZSBsTGVmdCBvZlxuICAgICAgICAgICAgICBSQk5vZGVfZWxtX2J1aWx0aW4gUmVkIF8gXyBfIF8gLT5cbiAgICAgICAgICAgICAgICBSQk5vZGVfZWxtX2J1aWx0aW4gY29sb3Iga2V5IHZhbHVlIChyZW1vdmVIZWxwIHRhcmdldEtleSBsZWZ0KSByaWdodFxuXG4gICAgICAgICAgICAgIF8gLT5cbiAgICAgICAgICAgICAgICBjYXNlIG1vdmVSZWRMZWZ0IGRpY3Qgb2ZcbiAgICAgICAgICAgICAgICAgIFJCTm9kZV9lbG1fYnVpbHRpbiBuQ29sb3IgbktleSBuVmFsdWUgbkxlZnQgblJpZ2h0IC0+XG4gICAgICAgICAgICAgICAgICAgIGJhbGFuY2UgbkNvbG9yIG5LZXkgblZhbHVlIChyZW1vdmVIZWxwIHRhcmdldEtleSBuTGVmdCkgblJpZ2h0XG5cbiAgICAgICAgICAgICAgICAgIFJCRW1wdHlfZWxtX2J1aWx0aW4gLT5cbiAgICAgICAgICAgICAgICAgICAgUkJFbXB0eV9lbG1fYnVpbHRpblxuXG4gICAgICAgICAgXyAtPlxuICAgICAgICAgICAgUkJOb2RlX2VsbV9idWlsdGluIGNvbG9yIGtleSB2YWx1ZSAocmVtb3ZlSGVscCB0YXJnZXRLZXkgbGVmdCkgcmlnaHRcbiAgICAgIGVsc2VcbiAgICAgICAgcmVtb3ZlSGVscEVRR1QgdGFyZ2V0S2V5IChyZW1vdmVIZWxwUHJlcEVRR1QgdGFyZ2V0S2V5IGRpY3QgY29sb3Iga2V5IHZhbHVlIGxlZnQgcmlnaHQpXG5cblxucmVtb3ZlSGVscFByZXBFUUdUIDogY29tcGFyYWJsZSAtPiBEaWN0IGNvbXBhcmFibGUgdiAtPiBOQ29sb3IgLT4gY29tcGFyYWJsZSAtPiB2IC0+IERpY3QgY29tcGFyYWJsZSB2IC0+IERpY3QgY29tcGFyYWJsZSB2IC0+IERpY3QgY29tcGFyYWJsZSB2XG5yZW1vdmVIZWxwUHJlcEVRR1QgdGFyZ2V0S2V5IGRpY3QgY29sb3Iga2V5IHZhbHVlIGxlZnQgcmlnaHQgPVxuICBjYXNlIGxlZnQgb2ZcbiAgICBSQk5vZGVfZWxtX2J1aWx0aW4gUmVkIGxLIGxWIGxMZWZ0IGxSaWdodCAtPlxuICAgICAgUkJOb2RlX2VsbV9idWlsdGluXG4gICAgICAgIGNvbG9yXG4gICAgICAgIGxLXG4gICAgICAgIGxWXG4gICAgICAgIGxMZWZ0XG4gICAgICAgIChSQk5vZGVfZWxtX2J1aWx0aW4gUmVkIGtleSB2YWx1ZSBsUmlnaHQgcmlnaHQpXG5cbiAgICBfIC0+XG4gICAgICBjYXNlIHJpZ2h0IG9mXG4gICAgICAgIFJCTm9kZV9lbG1fYnVpbHRpbiBCbGFjayBfIF8gKFJCTm9kZV9lbG1fYnVpbHRpbiBCbGFjayBfIF8gXyBfKSBfIC0+XG4gICAgICAgICAgbW92ZVJlZFJpZ2h0IGRpY3RcblxuICAgICAgICBSQk5vZGVfZWxtX2J1aWx0aW4gQmxhY2sgXyBfIFJCRW1wdHlfZWxtX2J1aWx0aW4gXyAtPlxuICAgICAgICAgIG1vdmVSZWRSaWdodCBkaWN0XG5cbiAgICAgICAgXyAtPlxuICAgICAgICAgIGRpY3RcblxuXG57LXwgV2hlbiB3ZSBmaW5kIHRoZSBub2RlIHdlIGFyZSBsb29raW5nIGZvciwgd2UgY2FuIHJlbW92ZSBieSByZXBsYWNpbmcgdGhlIGtleS12YWx1ZVxucGFpciB3aXRoIHRoZSBrZXktdmFsdWUgcGFpciBvZiB0aGUgbGVmdC1tb3N0IG5vZGUgb24gdGhlIHJpZ2h0IHNpZGUgKHRoZSBjbG9zZXN0IHBhaXIpLlxuLX1cbnJlbW92ZUhlbHBFUUdUIDogY29tcGFyYWJsZSAtPiBEaWN0IGNvbXBhcmFibGUgdiAtPiBEaWN0IGNvbXBhcmFibGUgdlxucmVtb3ZlSGVscEVRR1QgdGFyZ2V0S2V5IGRpY3QgPVxuICBjYXNlIGRpY3Qgb2ZcbiAgICBSQk5vZGVfZWxtX2J1aWx0aW4gY29sb3Iga2V5IHZhbHVlIGxlZnQgcmlnaHQgLT5cbiAgICAgIGlmIHRhcmdldEtleSA9PSBrZXkgdGhlblxuICAgICAgICBjYXNlIGdldE1pbiByaWdodCBvZlxuICAgICAgICAgIFJCTm9kZV9lbG1fYnVpbHRpbiBfIG1pbktleSBtaW5WYWx1ZSBfIF8gLT5cbiAgICAgICAgICAgIGJhbGFuY2UgY29sb3IgbWluS2V5IG1pblZhbHVlIGxlZnQgKHJlbW92ZU1pbiByaWdodClcblxuICAgICAgICAgIFJCRW1wdHlfZWxtX2J1aWx0aW4gLT5cbiAgICAgICAgICAgIFJCRW1wdHlfZWxtX2J1aWx0aW5cbiAgICAgIGVsc2VcbiAgICAgICAgYmFsYW5jZSBjb2xvciBrZXkgdmFsdWUgbGVmdCAocmVtb3ZlSGVscCB0YXJnZXRLZXkgcmlnaHQpXG5cbiAgICBSQkVtcHR5X2VsbV9idWlsdGluIC0+XG4gICAgICBSQkVtcHR5X2VsbV9idWlsdGluXG5cblxuZ2V0TWluIDogRGljdCBrIHYgLT4gRGljdCBrIHZcbmdldE1pbiBkaWN0ID1cbiAgY2FzZSBkaWN0IG9mXG4gICAgUkJOb2RlX2VsbV9idWlsdGluIF8gXyBfICgoUkJOb2RlX2VsbV9idWlsdGluIF8gXyBfIF8gXykgYXMgbGVmdCkgXyAtPlxuICAgICAgZ2V0TWluIGxlZnRcblxuICAgIF8gLT5cbiAgICAgIGRpY3RcblxuXG5yZW1vdmVNaW4gOiBEaWN0IGsgdiAtPiBEaWN0IGsgdlxucmVtb3ZlTWluIGRpY3QgPVxuICBjYXNlIGRpY3Qgb2ZcbiAgICBSQk5vZGVfZWxtX2J1aWx0aW4gY29sb3Iga2V5IHZhbHVlICgoUkJOb2RlX2VsbV9idWlsdGluIGxDb2xvciBfIF8gbExlZnQgXykgYXMgbGVmdCkgcmlnaHQgLT5cbiAgICAgIGNhc2UgbENvbG9yIG9mXG4gICAgICAgIEJsYWNrIC0+XG4gICAgICAgICAgY2FzZSBsTGVmdCBvZlxuICAgICAgICAgICAgUkJOb2RlX2VsbV9idWlsdGluIFJlZCBfIF8gXyBfIC0+XG4gICAgICAgICAgICAgIFJCTm9kZV9lbG1fYnVpbHRpbiBjb2xvciBrZXkgdmFsdWUgKHJlbW92ZU1pbiBsZWZ0KSByaWdodFxuXG4gICAgICAgICAgICBfIC0+XG4gICAgICAgICAgICAgIGNhc2UgbW92ZVJlZExlZnQgZGljdCBvZlxuICAgICAgICAgICAgICAgIFJCTm9kZV9lbG1fYnVpbHRpbiBuQ29sb3IgbktleSBuVmFsdWUgbkxlZnQgblJpZ2h0IC0+XG4gICAgICAgICAgICAgICAgICBiYWxhbmNlIG5Db2xvciBuS2V5IG5WYWx1ZSAocmVtb3ZlTWluIG5MZWZ0KSBuUmlnaHRcblxuICAgICAgICAgICAgICAgIFJCRW1wdHlfZWxtX2J1aWx0aW4gLT5cbiAgICAgICAgICAgICAgICAgIFJCRW1wdHlfZWxtX2J1aWx0aW5cblxuICAgICAgICBfIC0+XG4gICAgICAgICAgUkJOb2RlX2VsbV9idWlsdGluIGNvbG9yIGtleSB2YWx1ZSAocmVtb3ZlTWluIGxlZnQpIHJpZ2h0XG5cbiAgICBfIC0+XG4gICAgICBSQkVtcHR5X2VsbV9idWlsdGluXG5cblxubW92ZVJlZExlZnQgOiBEaWN0IGsgdiAtPiBEaWN0IGsgdlxubW92ZVJlZExlZnQgZGljdCA9XG4gIGNhc2UgZGljdCBvZlxuICAgIFJCTm9kZV9lbG1fYnVpbHRpbiBjbHIgayB2IChSQk5vZGVfZWxtX2J1aWx0aW4gbENsciBsSyBsViBsTGVmdCBsUmlnaHQpIChSQk5vZGVfZWxtX2J1aWx0aW4gckNsciBySyByViAoKFJCTm9kZV9lbG1fYnVpbHRpbiBSZWQgcmxLIHJsViBybEwgcmxSKSBhcyByTGVmdCkgclJpZ2h0KSAtPlxuICAgICAgUkJOb2RlX2VsbV9idWlsdGluXG4gICAgICAgIFJlZFxuICAgICAgICBybEtcbiAgICAgICAgcmxWXG4gICAgICAgIChSQk5vZGVfZWxtX2J1aWx0aW4gQmxhY2sgayB2IChSQk5vZGVfZWxtX2J1aWx0aW4gUmVkIGxLIGxWIGxMZWZ0IGxSaWdodCkgcmxMKVxuICAgICAgICAoUkJOb2RlX2VsbV9idWlsdGluIEJsYWNrIHJLIHJWIHJsUiByUmlnaHQpXG5cbiAgICBSQk5vZGVfZWxtX2J1aWx0aW4gY2xyIGsgdiAoUkJOb2RlX2VsbV9idWlsdGluIGxDbHIgbEsgbFYgbExlZnQgbFJpZ2h0KSAoUkJOb2RlX2VsbV9idWlsdGluIHJDbHIgcksgclYgckxlZnQgclJpZ2h0KSAtPlxuICAgICAgY2FzZSBjbHIgb2ZcbiAgICAgICAgQmxhY2sgLT5cbiAgICAgICAgICBSQk5vZGVfZWxtX2J1aWx0aW5cbiAgICAgICAgICAgIEJsYWNrXG4gICAgICAgICAgICBrXG4gICAgICAgICAgICB2XG4gICAgICAgICAgICAoUkJOb2RlX2VsbV9idWlsdGluIFJlZCBsSyBsViBsTGVmdCBsUmlnaHQpXG4gICAgICAgICAgICAoUkJOb2RlX2VsbV9idWlsdGluIFJlZCBySyByViByTGVmdCByUmlnaHQpXG5cbiAgICAgICAgUmVkIC0+XG4gICAgICAgICAgUkJOb2RlX2VsbV9idWlsdGluXG4gICAgICAgICAgICBCbGFja1xuICAgICAgICAgICAga1xuICAgICAgICAgICAgdlxuICAgICAgICAgICAgKFJCTm9kZV9lbG1fYnVpbHRpbiBSZWQgbEsgbFYgbExlZnQgbFJpZ2h0KVxuICAgICAgICAgICAgKFJCTm9kZV9lbG1fYnVpbHRpbiBSZWQgcksgclYgckxlZnQgclJpZ2h0KVxuXG4gICAgXyAtPlxuICAgICAgZGljdFxuXG5cbm1vdmVSZWRSaWdodCA6IERpY3QgayB2IC0+IERpY3QgayB2XG5tb3ZlUmVkUmlnaHQgZGljdCA9XG4gIGNhc2UgZGljdCBvZlxuICAgIFJCTm9kZV9lbG1fYnVpbHRpbiBjbHIgayB2IChSQk5vZGVfZWxtX2J1aWx0aW4gbENsciBsSyBsViAoUkJOb2RlX2VsbV9idWlsdGluIFJlZCBsbEsgbGxWIGxsTGVmdCBsbFJpZ2h0KSBsUmlnaHQpIChSQk5vZGVfZWxtX2J1aWx0aW4gckNsciBySyByViByTGVmdCByUmlnaHQpIC0+XG4gICAgICBSQk5vZGVfZWxtX2J1aWx0aW5cbiAgICAgICAgUmVkXG4gICAgICAgIGxLXG4gICAgICAgIGxWXG4gICAgICAgIChSQk5vZGVfZWxtX2J1aWx0aW4gQmxhY2sgbGxLIGxsViBsbExlZnQgbGxSaWdodClcbiAgICAgICAgKFJCTm9kZV9lbG1fYnVpbHRpbiBCbGFjayBrIHYgbFJpZ2h0IChSQk5vZGVfZWxtX2J1aWx0aW4gUmVkIHJLIHJWIHJMZWZ0IHJSaWdodCkpXG5cbiAgICBSQk5vZGVfZWxtX2J1aWx0aW4gY2xyIGsgdiAoUkJOb2RlX2VsbV9idWlsdGluIGxDbHIgbEsgbFYgbExlZnQgbFJpZ2h0KSAoUkJOb2RlX2VsbV9idWlsdGluIHJDbHIgcksgclYgckxlZnQgclJpZ2h0KSAtPlxuICAgICAgY2FzZSBjbHIgb2ZcbiAgICAgICAgQmxhY2sgLT5cbiAgICAgICAgICBSQk5vZGVfZWxtX2J1aWx0aW5cbiAgICAgICAgICAgIEJsYWNrXG4gICAgICAgICAgICBrXG4gICAgICAgICAgICB2XG4gICAgICAgICAgICAoUkJOb2RlX2VsbV9idWlsdGluIFJlZCBsSyBsViBsTGVmdCBsUmlnaHQpXG4gICAgICAgICAgICAoUkJOb2RlX2VsbV9idWlsdGluIFJlZCBySyByViByTGVmdCByUmlnaHQpXG5cbiAgICAgICAgUmVkIC0+XG4gICAgICAgICAgUkJOb2RlX2VsbV9idWlsdGluXG4gICAgICAgICAgICBCbGFja1xuICAgICAgICAgICAga1xuICAgICAgICAgICAgdlxuICAgICAgICAgICAgKFJCTm9kZV9lbG1fYnVpbHRpbiBSZWQgbEsgbFYgbExlZnQgbFJpZ2h0KVxuICAgICAgICAgICAgKFJCTm9kZV9lbG1fYnVpbHRpbiBSZWQgcksgclYgckxlZnQgclJpZ2h0KVxuXG4gICAgXyAtPlxuICAgICAgZGljdFxuXG5cbnstfCBVcGRhdGUgdGhlIHZhbHVlIG9mIGEgZGljdGlvbmFyeSBmb3IgYSBzcGVjaWZpYyBrZXkgd2l0aCBhIGdpdmVuIGZ1bmN0aW9uLiAtfVxudXBkYXRlIDogY29tcGFyYWJsZSAtPiAoTWF5YmUgdiAtPiBNYXliZSB2KSAtPiBEaWN0IGNvbXBhcmFibGUgdiAtPiBEaWN0IGNvbXBhcmFibGUgdlxudXBkYXRlIHRhcmdldEtleSBhbHRlciBkaWN0aW9uYXJ5ID1cbiAgY2FzZSBhbHRlciAoZ2V0IHRhcmdldEtleSBkaWN0aW9uYXJ5KSBvZlxuICAgIEp1c3QgdmFsdWUgLT5cbiAgICAgIGluc2VydCB0YXJnZXRLZXkgdmFsdWUgZGljdGlvbmFyeVxuXG4gICAgTm90aGluZyAtPlxuICAgICAgcmVtb3ZlIHRhcmdldEtleSBkaWN0aW9uYXJ5XG5cblxuey18IENyZWF0ZSBhIGRpY3Rpb25hcnkgd2l0aCBvbmUga2V5LXZhbHVlIHBhaXIuIC19XG5zaW5nbGV0b24gOiBjb21wYXJhYmxlIC0+IHYgLT4gRGljdCBjb21wYXJhYmxlIHZcbnNpbmdsZXRvbiBrZXkgdmFsdWUgPVxuICAtLSBSb290IG5vZGUgaXMgYWx3YXlzIEJsYWNrXG4gIFJCTm9kZV9lbG1fYnVpbHRpbiBCbGFjayBrZXkgdmFsdWUgUkJFbXB0eV9lbG1fYnVpbHRpbiBSQkVtcHR5X2VsbV9idWlsdGluXG5cblxuLS0gQ09NQklORVxuXG5cbnstfCBDb21iaW5lIHR3byBkaWN0aW9uYXJpZXMuIElmIHRoZXJlIGlzIGEgY29sbGlzaW9uLCBwcmVmZXJlbmNlIGlzIGdpdmVuXG50byB0aGUgZmlyc3QgZGljdGlvbmFyeS5cbi19XG51bmlvbiA6IERpY3QgY29tcGFyYWJsZSB2IC0+IERpY3QgY29tcGFyYWJsZSB2IC0+IERpY3QgY29tcGFyYWJsZSB2XG51bmlvbiB0MSB0MiA9XG4gIGZvbGRsIGluc2VydCB0MiB0MVxuXG5cbnstfCBLZWVwIGEga2V5LXZhbHVlIHBhaXIgd2hlbiBpdHMga2V5IGFwcGVhcnMgaW4gdGhlIHNlY29uZCBkaWN0aW9uYXJ5LlxuUHJlZmVyZW5jZSBpcyBnaXZlbiB0byB2YWx1ZXMgaW4gdGhlIGZpcnN0IGRpY3Rpb25hcnkuXG4tfVxuaW50ZXJzZWN0IDogRGljdCBjb21wYXJhYmxlIHYgLT4gRGljdCBjb21wYXJhYmxlIHYgLT4gRGljdCBjb21wYXJhYmxlIHZcbmludGVyc2VjdCB0MSB0MiA9XG4gIGZpbHRlciAoXFxrIF8gLT4gbWVtYmVyIGsgdDIpIHQxXG5cblxuey18IEtlZXAgYSBrZXktdmFsdWUgcGFpciB3aGVuIGl0cyBrZXkgZG9lcyBub3QgYXBwZWFyIGluIHRoZSBzZWNvbmQgZGljdGlvbmFyeS5cbi19XG5kaWZmIDogRGljdCBjb21wYXJhYmxlIGEgLT4gRGljdCBjb21wYXJhYmxlIGIgLT4gRGljdCBjb21wYXJhYmxlIGFcbmRpZmYgdDEgdDIgPVxuICBmb2xkbCAoXFxrIHYgdCAtPiByZW1vdmUgayB0KSB0MSB0MlxuXG5cbnstfCBUaGUgbW9zdCBnZW5lcmFsIHdheSBvZiBjb21iaW5pbmcgdHdvIGRpY3Rpb25hcmllcy4gWW91IHByb3ZpZGUgdGhyZWVcbmFjY3VtdWxhdG9ycyBmb3Igd2hlbiBhIGdpdmVuIGtleSBhcHBlYXJzOlxuXG4gIDEuIE9ubHkgaW4gdGhlIGxlZnQgZGljdGlvbmFyeS5cbiAgMi4gSW4gYm90aCBkaWN0aW9uYXJpZXMuXG4gIDMuIE9ubHkgaW4gdGhlIHJpZ2h0IGRpY3Rpb25hcnkuXG5cbllvdSB0aGVuIHRyYXZlcnNlIGFsbCB0aGUga2V5cyBmcm9tIGxvd2VzdCB0byBoaWdoZXN0LCBidWlsZGluZyB1cCB3aGF0ZXZlclxueW91IHdhbnQuXG4tfVxubWVyZ2VcbiAgOiAgKGNvbXBhcmFibGUgLT4gYSAtPiByZXN1bHQgLT4gcmVzdWx0KVxuICAtPiAoY29tcGFyYWJsZSAtPiBhIC0+IGIgLT4gcmVzdWx0IC0+IHJlc3VsdClcbiAgLT4gKGNvbXBhcmFibGUgLT4gYiAtPiByZXN1bHQgLT4gcmVzdWx0KVxuICAtPiBEaWN0IGNvbXBhcmFibGUgYVxuICAtPiBEaWN0IGNvbXBhcmFibGUgYlxuICAtPiByZXN1bHRcbiAgLT4gcmVzdWx0XG5tZXJnZSBsZWZ0U3RlcCBib3RoU3RlcCByaWdodFN0ZXAgbGVmdERpY3QgcmlnaHREaWN0IGluaXRpYWxSZXN1bHQgPVxuICBsZXRcbiAgICBzdGVwU3RhdGUgcktleSByVmFsdWUgKGxpc3QsIHJlc3VsdCkgPVxuICAgICAgY2FzZSBsaXN0IG9mXG4gICAgICAgIFtdIC0+XG4gICAgICAgICAgKGxpc3QsIHJpZ2h0U3RlcCByS2V5IHJWYWx1ZSByZXN1bHQpXG5cbiAgICAgICAgKGxLZXksIGxWYWx1ZSkgOjogcmVzdCAtPlxuICAgICAgICAgIGlmIGxLZXkgPCByS2V5IHRoZW5cbiAgICAgICAgICAgIHN0ZXBTdGF0ZSByS2V5IHJWYWx1ZSAocmVzdCwgbGVmdFN0ZXAgbEtleSBsVmFsdWUgcmVzdWx0KVxuXG4gICAgICAgICAgZWxzZSBpZiBsS2V5ID4gcktleSB0aGVuXG4gICAgICAgICAgICAobGlzdCwgcmlnaHRTdGVwIHJLZXkgclZhbHVlIHJlc3VsdClcblxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIChyZXN0LCBib3RoU3RlcCBsS2V5IGxWYWx1ZSByVmFsdWUgcmVzdWx0KVxuXG4gICAgKGxlZnRvdmVycywgaW50ZXJtZWRpYXRlUmVzdWx0KSA9XG4gICAgICBmb2xkbCBzdGVwU3RhdGUgKHRvTGlzdCBsZWZ0RGljdCwgaW5pdGlhbFJlc3VsdCkgcmlnaHREaWN0XG4gIGluXG4gICAgTGlzdC5mb2xkbCAoXFwoayx2KSByZXN1bHQgLT4gbGVmdFN0ZXAgayB2IHJlc3VsdCkgaW50ZXJtZWRpYXRlUmVzdWx0IGxlZnRvdmVyc1xuXG5cblxuLS0gVFJBTlNGT1JNXG5cblxuey18IEFwcGx5IGEgZnVuY3Rpb24gdG8gYWxsIHZhbHVlcyBpbiBhIGRpY3Rpb25hcnkuXG4tfVxubWFwIDogKGsgLT4gYSAtPiBiKSAtPiBEaWN0IGsgYSAtPiBEaWN0IGsgYlxubWFwIGZ1bmMgZGljdCA9XG4gIGNhc2UgZGljdCBvZlxuICAgIFJCRW1wdHlfZWxtX2J1aWx0aW4gLT5cbiAgICAgIFJCRW1wdHlfZWxtX2J1aWx0aW5cblxuICAgIFJCTm9kZV9lbG1fYnVpbHRpbiBjb2xvciBrZXkgdmFsdWUgbGVmdCByaWdodCAtPlxuICAgICAgUkJOb2RlX2VsbV9idWlsdGluIGNvbG9yIGtleSAoZnVuYyBrZXkgdmFsdWUpIChtYXAgZnVuYyBsZWZ0KSAobWFwIGZ1bmMgcmlnaHQpXG5cblxuey18IEZvbGQgb3ZlciB0aGUga2V5LXZhbHVlIHBhaXJzIGluIGEgZGljdGlvbmFyeSBmcm9tIGxvd2VzdCBrZXkgdG8gaGlnaGVzdCBrZXkuXG5cbiAgICBpbXBvcnQgRGljdCBleHBvc2luZyAoRGljdClcblxuICAgIGdldEFnZXMgOiBEaWN0IFN0cmluZyBVc2VyIC0+IExpc3QgU3RyaW5nXG4gICAgZ2V0QWdlcyB1c2VycyA9XG4gICAgICBEaWN0LmZvbGRsIGFkZEFnZSBbXSB1c2Vyc1xuXG4gICAgYWRkQWdlIDogU3RyaW5nIC0+IFVzZXIgLT4gTGlzdCBTdHJpbmcgLT4gTGlzdCBTdHJpbmdcbiAgICBhZGRBZ2UgXyB1c2VyIGFnZXMgPVxuICAgICAgdXNlci5hZ2UgOjogYWdlc1xuXG4gICAgLS0gZ2V0QWdlcyB1c2VycyA9PSBbMzMsMTksMjhdXG4tfVxuZm9sZGwgOiAoayAtPiB2IC0+IGIgLT4gYikgLT4gYiAtPiBEaWN0IGsgdiAtPiBiXG5mb2xkbCBmdW5jIGFjYyBkaWN0ID1cbiAgY2FzZSBkaWN0IG9mXG4gICAgUkJFbXB0eV9lbG1fYnVpbHRpbiAtPlxuICAgICAgYWNjXG5cbiAgICBSQk5vZGVfZWxtX2J1aWx0aW4gXyBrZXkgdmFsdWUgbGVmdCByaWdodCAtPlxuICAgICAgZm9sZGwgZnVuYyAoZnVuYyBrZXkgdmFsdWUgKGZvbGRsIGZ1bmMgYWNjIGxlZnQpKSByaWdodFxuXG5cbnstfCBGb2xkIG92ZXIgdGhlIGtleS12YWx1ZSBwYWlycyBpbiBhIGRpY3Rpb25hcnkgZnJvbSBoaWdoZXN0IGtleSB0byBsb3dlc3Qga2V5LlxuXG4gICAgaW1wb3J0IERpY3QgZXhwb3NpbmcgKERpY3QpXG5cbiAgICBnZXRBZ2VzIDogRGljdCBTdHJpbmcgVXNlciAtPiBMaXN0IFN0cmluZ1xuICAgIGdldEFnZXMgdXNlcnMgPVxuICAgICAgRGljdC5mb2xkciBhZGRBZ2UgW10gdXNlcnNcblxuICAgIGFkZEFnZSA6IFN0cmluZyAtPiBVc2VyIC0+IExpc3QgU3RyaW5nIC0+IExpc3QgU3RyaW5nXG4gICAgYWRkQWdlIF8gdXNlciBhZ2VzID1cbiAgICAgIHVzZXIuYWdlIDo6IGFnZXNcblxuICAgIC0tIGdldEFnZXMgdXNlcnMgPT0gWzI4LDE5LDMzXVxuLX1cbmZvbGRyIDogKGsgLT4gdiAtPiBiIC0+IGIpIC0+IGIgLT4gRGljdCBrIHYgLT4gYlxuZm9sZHIgZnVuYyBhY2MgdCA9XG4gIGNhc2UgdCBvZlxuICAgIFJCRW1wdHlfZWxtX2J1aWx0aW4gLT5cbiAgICAgIGFjY1xuXG4gICAgUkJOb2RlX2VsbV9idWlsdGluIF8ga2V5IHZhbHVlIGxlZnQgcmlnaHQgLT5cbiAgICAgIGZvbGRyIGZ1bmMgKGZ1bmMga2V5IHZhbHVlIChmb2xkciBmdW5jIGFjYyByaWdodCkpIGxlZnRcblxuXG57LXwgS2VlcCBvbmx5IHRoZSBrZXktdmFsdWUgcGFpcnMgdGhhdCBwYXNzIHRoZSBnaXZlbiB0ZXN0LiAtfVxuZmlsdGVyIDogKGNvbXBhcmFibGUgLT4gdiAtPiBCb29sKSAtPiBEaWN0IGNvbXBhcmFibGUgdiAtPiBEaWN0IGNvbXBhcmFibGUgdlxuZmlsdGVyIGlzR29vZCBkaWN0ID1cbiAgZm9sZGwgKFxcayB2IGQgLT4gaWYgaXNHb29kIGsgdiB0aGVuIGluc2VydCBrIHYgZCBlbHNlIGQpIGVtcHR5IGRpY3RcblxuXG57LXwgUGFydGl0aW9uIGEgZGljdGlvbmFyeSBhY2NvcmRpbmcgdG8gc29tZSB0ZXN0LiBUaGUgZmlyc3QgZGljdGlvbmFyeVxuY29udGFpbnMgYWxsIGtleS12YWx1ZSBwYWlycyB3aGljaCBwYXNzZWQgdGhlIHRlc3QsIGFuZCB0aGUgc2Vjb25kIGNvbnRhaW5zXG50aGUgcGFpcnMgdGhhdCBkaWQgbm90LlxuLX1cbnBhcnRpdGlvbiA6IChjb21wYXJhYmxlIC0+IHYgLT4gQm9vbCkgLT4gRGljdCBjb21wYXJhYmxlIHYgLT4gKERpY3QgY29tcGFyYWJsZSB2LCBEaWN0IGNvbXBhcmFibGUgdilcbnBhcnRpdGlvbiBpc0dvb2QgZGljdCA9XG4gIGxldFxuICAgIGFkZCBrZXkgdmFsdWUgKHQxLCB0MikgPVxuICAgICAgaWYgaXNHb29kIGtleSB2YWx1ZSB0aGVuXG4gICAgICAgIChpbnNlcnQga2V5IHZhbHVlIHQxLCB0MilcblxuICAgICAgZWxzZVxuICAgICAgICAodDEsIGluc2VydCBrZXkgdmFsdWUgdDIpXG4gIGluXG4gICAgZm9sZGwgYWRkIChlbXB0eSwgZW1wdHkpIGRpY3RcblxuXG4tLSBMSVNUU1xuXG5cbnstfCBHZXQgYWxsIG9mIHRoZSBrZXlzIGluIGEgZGljdGlvbmFyeSwgc29ydGVkIGZyb20gbG93ZXN0IHRvIGhpZ2hlc3QuXG5cbiAgICBrZXlzIChmcm9tTGlzdCBbKDAsXCJBbGljZVwiKSwoMSxcIkJvYlwiKV0pID09IFswLDFdXG4tfVxua2V5cyA6IERpY3QgayB2IC0+IExpc3Qga1xua2V5cyBkaWN0ID1cbiAgZm9sZHIgKFxca2V5IHZhbHVlIGtleUxpc3QgLT4ga2V5IDo6IGtleUxpc3QpIFtdIGRpY3RcblxuXG57LXwgR2V0IGFsbCBvZiB0aGUgdmFsdWVzIGluIGEgZGljdGlvbmFyeSwgaW4gdGhlIG9yZGVyIG9mIHRoZWlyIGtleXMuXG5cbiAgICB2YWx1ZXMgKGZyb21MaXN0IFsoMCxcIkFsaWNlXCIpLCgxLFwiQm9iXCIpXSkgPT0gW1wiQWxpY2VcIiwgXCJCb2JcIl1cbi19XG52YWx1ZXMgOiBEaWN0IGsgdiAtPiBMaXN0IHZcbnZhbHVlcyBkaWN0ID1cbiAgZm9sZHIgKFxca2V5IHZhbHVlIHZhbHVlTGlzdCAtPiB2YWx1ZSA6OiB2YWx1ZUxpc3QpIFtdIGRpY3RcblxuXG57LXwgQ29udmVydCBhIGRpY3Rpb25hcnkgaW50byBhbiBhc3NvY2lhdGlvbiBsaXN0IG9mIGtleS12YWx1ZSBwYWlycywgc29ydGVkIGJ5IGtleXMuIC19XG50b0xpc3QgOiBEaWN0IGsgdiAtPiBMaXN0IChrLHYpXG50b0xpc3QgZGljdCA9XG4gIGZvbGRyIChcXGtleSB2YWx1ZSBsaXN0IC0+IChrZXksdmFsdWUpIDo6IGxpc3QpIFtdIGRpY3RcblxuXG57LXwgQ29udmVydCBhbiBhc3NvY2lhdGlvbiBsaXN0IGludG8gYSBkaWN0aW9uYXJ5LiAtfVxuZnJvbUxpc3QgOiBMaXN0IChjb21wYXJhYmxlLHYpIC0+IERpY3QgY29tcGFyYWJsZSB2XG5mcm9tTGlzdCBhc3NvY3MgPVxuICBMaXN0LmZvbGRsIChcXChrZXksdmFsdWUpIGRpY3QgLT4gaW5zZXJ0IGtleSB2YWx1ZSBkaWN0KSBlbXB0eSBhc3NvY3Ncbid9KSksCgkJCV9VdGlsc19UdXBsZTIoCgkJCSdTZXQuZWxtJywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRCbG9iTm9kZSgKCQkJCXt1dGY4OiAnbW9kdWxlIFNldCBleHBvc2luZ1xuICAoIFNldFxuICAsIGVtcHR5LCBzaW5nbGV0b24sIGluc2VydCwgcmVtb3ZlXG4gICwgaXNFbXB0eSwgbWVtYmVyLCBzaXplXG4gICwgdW5pb24sIGludGVyc2VjdCwgZGlmZlxuICAsIHRvTGlzdCwgZnJvbUxpc3RcbiAgLCBtYXAsIGZvbGRsLCBmb2xkciwgZmlsdGVyLCBwYXJ0aXRpb25cbiAgKVxuXG57LXwgQSBzZXQgb2YgdW5pcXVlIHZhbHVlcy4gVGhlIHZhbHVlcyBjYW4gYmUgYW55IGNvbXBhcmFibGUgdHlwZS4gVGhpc1xuaW5jbHVkZXMgYEludGAsIGBGbG9hdGAsIGBUaW1lYCwgYENoYXJgLCBgU3RyaW5nYCwgYW5kIHR1cGxlcyBvciBsaXN0c1xub2YgY29tcGFyYWJsZSB0eXBlcy5cblxuSW5zZXJ0LCByZW1vdmUsIGFuZCBxdWVyeSBvcGVyYXRpb25zIGFsbCB0YWtlICpPKGxvZyBuKSogdGltZS5cblxuIyBTZXRzXG5AZG9jcyBTZXRcblxuIyBCdWlsZFxuQGRvY3MgZW1wdHksIHNpbmdsZXRvbiwgaW5zZXJ0LCByZW1vdmVcblxuIyBRdWVyeVxuQGRvY3MgaXNFbXB0eSwgbWVtYmVyLCBzaXplXG5cbiMgQ29tYmluZVxuQGRvY3MgdW5pb24sIGludGVyc2VjdCwgZGlmZlxuXG4jIExpc3RzXG5AZG9jcyB0b0xpc3QsIGZyb21MaXN0XG5cbiMgVHJhbnNmb3JtXG5AZG9jcyBtYXAsIGZvbGRsLCBmb2xkciwgZmlsdGVyLCBwYXJ0aXRpb25cblxuLX1cblxuaW1wb3J0IEJhc2ljcyBleHBvc2luZyAoQm9vbCwgSW50KVxuaW1wb3J0IERpY3RcbmltcG9ydCBMaXN0IGV4cG9zaW5nICgoOjopKVxuaW1wb3J0IE1heWJlIGV4cG9zaW5nIChNYXliZSguLikpXG5cblxuey18IFJlcHJlc2VudHMgYSBzZXQgb2YgdW5pcXVlIHZhbHVlcy4gU28gYChTZXQgSW50KWAgaXMgYSBzZXQgb2YgaW50ZWdlcnMgYW5kXG5gKFNldCBTdHJpbmcpYCBpcyBhIHNldCBvZiBzdHJpbmdzLlxuLX1cbnR5cGUgU2V0IHQgPVxuICBTZXRfZWxtX2J1aWx0aW4gKERpY3QuRGljdCB0ICgpKVxuXG5cbnstfCBDcmVhdGUgYW4gZW1wdHkgc2V0LlxuLX1cbmVtcHR5IDogU2V0IGFcbmVtcHR5ID1cbiAgU2V0X2VsbV9idWlsdGluIERpY3QuZW1wdHlcblxuXG57LXwgQ3JlYXRlIGEgc2V0IHdpdGggb25lIHZhbHVlLlxuLX1cbnNpbmdsZXRvbiA6IGNvbXBhcmFibGUgLT4gU2V0IGNvbXBhcmFibGVcbnNpbmdsZXRvbiBrZXkgPVxuICBTZXRfZWxtX2J1aWx0aW4gKERpY3Quc2luZ2xldG9uIGtleSAoKSlcblxuXG57LXwgSW5zZXJ0IGEgdmFsdWUgaW50byBhIHNldC5cbi19XG5pbnNlcnQgOiBjb21wYXJhYmxlIC0+IFNldCBjb21wYXJhYmxlIC0+IFNldCBjb21wYXJhYmxlXG5pbnNlcnQga2V5IChTZXRfZWxtX2J1aWx0aW4gZGljdCkgPVxuICBTZXRfZWxtX2J1aWx0aW4gKERpY3QuaW5zZXJ0IGtleSAoKSBkaWN0KVxuXG5cbnstfCBSZW1vdmUgYSB2YWx1ZSBmcm9tIGEgc2V0LiBJZiB0aGUgdmFsdWUgaXMgbm90IGZvdW5kLCBubyBjaGFuZ2VzIGFyZSBtYWRlLlxuLX1cbnJlbW92ZSA6IGNvbXBhcmFibGUgLT4gU2V0IGNvbXBhcmFibGUgLT4gU2V0IGNvbXBhcmFibGVcbnJlbW92ZSBrZXkgKFNldF9lbG1fYnVpbHRpbiBkaWN0KSA9XG4gIFNldF9lbG1fYnVpbHRpbiAoRGljdC5yZW1vdmUga2V5IGRpY3QpXG5cblxuey18IERldGVybWluZSBpZiBhIHNldCBpcyBlbXB0eS5cbi19XG5pc0VtcHR5IDogU2V0IGEgLT4gQm9vbFxuaXNFbXB0eSAoU2V0X2VsbV9idWlsdGluIGRpY3QpID1cbiAgRGljdC5pc0VtcHR5IGRpY3RcblxuXG57LXwgRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgaW4gYSBzZXQuXG4tfVxubWVtYmVyIDogY29tcGFyYWJsZSAtPiBTZXQgY29tcGFyYWJsZSAtPiBCb29sXG5tZW1iZXIga2V5IChTZXRfZWxtX2J1aWx0aW4gZGljdCkgPVxuICBEaWN0Lm1lbWJlciBrZXkgZGljdFxuXG5cbnstfCBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiBhIHNldC5cbi19XG5zaXplIDogU2V0IGEgLT4gSW50XG5zaXplIChTZXRfZWxtX2J1aWx0aW4gZGljdCkgPVxuICBEaWN0LnNpemUgZGljdFxuXG5cbnstfCBHZXQgdGhlIHVuaW9uIG9mIHR3byBzZXRzLiBLZWVwIGFsbCB2YWx1ZXMuXG4tfVxudW5pb24gOiBTZXQgY29tcGFyYWJsZSAtPiBTZXQgY29tcGFyYWJsZSAtPiBTZXQgY29tcGFyYWJsZVxudW5pb24gKFNldF9lbG1fYnVpbHRpbiBkaWN0MSkgKFNldF9lbG1fYnVpbHRpbiBkaWN0MikgPVxuICBTZXRfZWxtX2J1aWx0aW4gKERpY3QudW5pb24gZGljdDEgZGljdDIpXG5cblxuey18IEdldCB0aGUgaW50ZXJzZWN0aW9uIG9mIHR3byBzZXRzLiBLZWVwcyB2YWx1ZXMgdGhhdCBhcHBlYXIgaW4gYm90aCBzZXRzLlxuLX1cbmludGVyc2VjdCA6IFNldCBjb21wYXJhYmxlIC0+IFNldCBjb21wYXJhYmxlIC0+IFNldCBjb21wYXJhYmxlXG5pbnRlcnNlY3QgKFNldF9lbG1fYnVpbHRpbiBkaWN0MSkgKFNldF9lbG1fYnVpbHRpbiBkaWN0MikgPVxuICBTZXRfZWxtX2J1aWx0aW4gKERpY3QuaW50ZXJzZWN0IGRpY3QxIGRpY3QyKVxuXG5cbnstfCBHZXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgZmlyc3Qgc2V0IGFuZCB0aGUgc2Vjb25kLiBLZWVwcyB2YWx1ZXNcbnRoYXQgZG8gbm90IGFwcGVhciBpbiB0aGUgc2Vjb25kIHNldC5cbi19XG5kaWZmIDogU2V0IGNvbXBhcmFibGUgLT4gU2V0IGNvbXBhcmFibGUgLT4gU2V0IGNvbXBhcmFibGVcbmRpZmYgKFNldF9lbG1fYnVpbHRpbiBkaWN0MSkgKFNldF9lbG1fYnVpbHRpbiBkaWN0MikgPVxuICBTZXRfZWxtX2J1aWx0aW4gKERpY3QuZGlmZiBkaWN0MSBkaWN0MilcblxuXG57LXwgQ29udmVydCBhIHNldCBpbnRvIGEgbGlzdCwgc29ydGVkIGZyb20gbG93ZXN0IHRvIGhpZ2hlc3QuXG4tfVxudG9MaXN0IDogU2V0IGEgLT4gTGlzdCBhXG50b0xpc3QgKFNldF9lbG1fYnVpbHRpbiBkaWN0KSA9XG4gIERpY3Qua2V5cyBkaWN0XG5cblxuey18IENvbnZlcnQgYSBsaXN0IGludG8gYSBzZXQsIHJlbW92aW5nIGFueSBkdXBsaWNhdGVzLlxuLX1cbmZyb21MaXN0IDogTGlzdCBjb21wYXJhYmxlIC0+IFNldCBjb21wYXJhYmxlXG5mcm9tTGlzdCBsaXN0ID1cbiAgTGlzdC5mb2xkbCBpbnNlcnQgZW1wdHkgbGlzdFxuXG5cbnstfCBGb2xkIG92ZXIgdGhlIHZhbHVlcyBpbiBhIHNldCwgaW4gb3JkZXIgZnJvbSBsb3dlc3QgdG8gaGlnaGVzdC5cbi19XG5mb2xkbCA6IChhIC0+IGIgLT4gYikgLT4gYiAtPiBTZXQgYSAtPiBiXG5mb2xkbCBmdW5jIGluaXRpYWxTdGF0ZSAoU2V0X2VsbV9idWlsdGluIGRpY3QpID1cbiAgRGljdC5mb2xkbCAoXFxrZXkgXyBzdGF0ZSAtPiBmdW5jIGtleSBzdGF0ZSkgaW5pdGlhbFN0YXRlIGRpY3RcblxuXG57LXwgRm9sZCBvdmVyIHRoZSB2YWx1ZXMgaW4gYSBzZXQsIGluIG9yZGVyIGZyb20gaGlnaGVzdCB0byBsb3dlc3QuXG4tfVxuZm9sZHIgOiAoYSAtPiBiIC0+IGIpIC0+IGIgLT4gU2V0IGEgLT4gYlxuZm9sZHIgZnVuYyBpbml0aWFsU3RhdGUgKFNldF9lbG1fYnVpbHRpbiBkaWN0KSA9XG4gIERpY3QuZm9sZHIgKFxca2V5IF8gc3RhdGUgLT4gZnVuYyBrZXkgc3RhdGUpIGluaXRpYWxTdGF0ZSBkaWN0XG5cblxuey18IE1hcCBhIGZ1bmN0aW9uIG9udG8gYSBzZXQsIGNyZWF0aW5nIGEgbmV3IHNldCB3aXRoIG5vIGR1cGxpY2F0ZXMuXG4tfVxubWFwIDogKGNvbXBhcmFibGUgLT4gY29tcGFyYWJsZTIpIC0+IFNldCBjb21wYXJhYmxlIC0+IFNldCBjb21wYXJhYmxlMlxubWFwIGZ1bmMgc2V0ID1cbiAgZnJvbUxpc3QgKGZvbGRsIChcXHggeHMgLT4gZnVuYyB4IDo6IHhzKSBbXSBzZXQpXG5cblxuey18IE9ubHkga2VlcCBlbGVtZW50cyB0aGF0IHBhc3MgdGhlIGdpdmVuIHRlc3QuXG5cbiAgICBpbXBvcnQgU2V0IGV4cG9zaW5nIChTZXQpXG5cbiAgICBudW1iZXJzIDogU2V0IEludFxuICAgIG51bWJlcnMgPVxuICAgICAgU2V0LmZyb21MaXN0IFstMiwtMSwwLDEsMl1cblxuICAgIHBvc2l0aXZlcyA6IFNldCBJbnRcbiAgICBwb3NpdGl2ZXMgPVxuICAgICAgU2V0LmZpbHRlciAoXFx4IC0+IHggPiAwKSBudW1iZXJzXG5cbiAgICAtLSBwb3NpdGl2ZXMgPT0gU2V0LmZyb21MaXN0IFsxLDJdXG4tfVxuZmlsdGVyIDogKGNvbXBhcmFibGUgLT4gQm9vbCkgLT4gU2V0IGNvbXBhcmFibGUgLT4gU2V0IGNvbXBhcmFibGVcbmZpbHRlciBpc0dvb2QgKFNldF9lbG1fYnVpbHRpbiBkaWN0KSA9XG4gIFNldF9lbG1fYnVpbHRpbiAoRGljdC5maWx0ZXIgKFxca2V5IF8gLT4gaXNHb29kIGtleSkgZGljdClcblxuXG57LXwgQ3JlYXRlIHR3byBuZXcgc2V0cy4gVGhlIGZpcnN0IGNvbnRhaW5zIGFsbCB0aGUgZWxlbWVudHMgdGhhdCBwYXNzZWQgdGhlXG5naXZlbiB0ZXN0LCBhbmQgdGhlIHNlY29uZCBjb250YWlucyBhbGwgdGhlIGVsZW1lbnRzIHRoYXQgZGlkIG5vdC5cbi19XG5wYXJ0aXRpb24gOiAoY29tcGFyYWJsZSAtPiBCb29sKSAtPiBTZXQgY29tcGFyYWJsZSAtPiAoU2V0IGNvbXBhcmFibGUsIFNldCBjb21wYXJhYmxlKVxucGFydGl0aW9uIGlzR29vZCAoU2V0X2VsbV9idWlsdGluIGRpY3QpID1cbiAgbGV0XG4gICAgKGRpY3QxLCBkaWN0MikgPVxuICAgICAgRGljdC5wYXJ0aXRpb24gKFxca2V5IF8gLT4gaXNHb29kIGtleSkgZGljdFxuICBpblxuICAgIChTZXRfZWxtX2J1aWx0aW4gZGljdDEsIFNldF9lbG1fYnVpbHRpbiBkaWN0Milcbid9KSksCgkJCV9VdGlsc19UdXBsZTIoCgkJCSdUYXNrLmVsbScsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkQmxvYk5vZGUoCgkJCQl7dXRmODogJ2VmZmVjdCBtb2R1bGUgVGFzayB3aGVyZSB7IGNvbW1hbmQgPSBNeUNtZCB9IGV4cG9zaW5nXG4gICggVGFza1xuICAsIHN1Y2NlZWQsIGZhaWxcbiAgLCBtYXAsIG1hcDIsIG1hcDMsIG1hcDQsIG1hcDVcbiAgLCBzZXF1ZW5jZVxuICAsIGFuZFRoZW5cbiAgLCBvbkVycm9yLCBtYXBFcnJvclxuICAsIHBlcmZvcm0sIGF0dGVtcHRcbiAgKVxuXG57LXwgVGFza3MgbWFrZSBpdCBlYXN5IHRvIGRlc2NyaWJlIGFzeW5jaHJvbm91cyBvcGVyYXRpb25zIHRoYXQgbWF5IGZhaWwsIGxpa2VcbkhUVFAgcmVxdWVzdHMgb3Igd3JpdGluZyB0byBhIGRhdGFiYXNlLlxuXG4jIFRhc2tzXG5AZG9jcyBUYXNrLCBwZXJmb3JtLCBhdHRlbXB0XG5cbiMgQ2hhaW5zXG5AZG9jcyBhbmRUaGVuLCBzdWNjZWVkLCBmYWlsLCBzZXF1ZW5jZVxuXG4jIE1hcHNcbkBkb2NzIG1hcCwgbWFwMiwgbWFwMywgbWFwNCwgbWFwNVxuXG4jIEVycm9yc1xuQGRvY3Mgb25FcnJvciwgbWFwRXJyb3JcblxuLX1cblxuaW1wb3J0IEJhc2ljcyBleHBvc2luZyAoTmV2ZXIsICh8PiksICg8PCkpXG5pbXBvcnQgRWxtLktlcm5lbC5TY2hlZHVsZXJcbmltcG9ydCBMaXN0IGV4cG9zaW5nICgoOjopKVxuaW1wb3J0IE1heWJlIGV4cG9zaW5nIChNYXliZSguLikpXG5pbXBvcnQgUGxhdGZvcm1cbmltcG9ydCBQbGF0Zm9ybS5DbWQgZXhwb3NpbmcgKENtZClcbmltcG9ydCBSZXN1bHQgZXhwb3NpbmcgKFJlc3VsdCguLikpXG5cblxuXG57LXwgSGVyZSBhcmUgc29tZSBjb21tb24gdGFza3M6XG5cbi0gW2Bub3cgOiBUYXNrIHggUG9zaXhgXVtub3ddXG4tIFtgZm9jdXMgOiBTdHJpbmcgLT4gVGFzayBFcnJvciAoKWBdW2ZvY3VzXVxuLSBbYHNsZWVwIDogRmxvYXQgLT4gVGFzayB4ICgpYF1bc2xlZXBdXG5cbltub3ddOiAvcGFja2FnZXMvZWxtL3RpbWUvbGF0ZXN0L1RpbWUjbm93XG5bZm9jdXNdOiAvcGFja2FnZXMvZWxtL2Jyb3dzZXIvbGF0ZXN0L0Jyb3dzZXItRG9tI2ZvY3VzXG5bc2xlZXBdOiAvcGFja2FnZXMvZWxtL2NvcmUvbGF0ZXN0L1Byb2Nlc3Mjc2xlZXBcblxuSW4gZWFjaCBjYXNlIHdlIGhhdmUgYSBgVGFza2AgdGhhdCB3aWxsIHJlc29sdmUgc3VjY2Vzc2Z1bGx5IHdpdGggYW4gYGFgIHZhbHVlXG5vciB1bnN1Y2Nlc3NmdWxseSB3aXRoIGFuIGB4YCB2YWx1ZS4gU28gYEJyb3dzZXIuRG9tLmZvY3VzYCB3ZSBtYXkgZmFpbCB3aXRoIGFuXG5gRXJyb3JgIGlmIHRoZSBnaXZlbiBJRCBkb2VzIG5vdCBleGlzdC4gV2hlcmVhcyBgVGltZS5ub3dgIG5ldmVyIGZhaWxzIHNvXG5JIGNhbm5vdCBiZSBtb3JlIHNwZWNpZmljIHRoYW4gYHhgLiBObyBzdWNoIHZhbHVlIHdpbGwgZXZlciBleGlzdCEgSW5zdGVhZCBpdFxuYWx3YXlzIHN1Y2NlZWRzIHdpdGggdGhlIGN1cnJlbnQgUE9TSVggdGltZS5cblxuTW9yZSBnZW5lcmFsbHkgYSB0YXNrIGlzIGEgX2Rlc2NyaXB0aW9uXyBvZiB3aGF0IHlvdSBuZWVkIHRvIGRvLiBMaWtlIGEgdG9kb1xubGlzdC4gT3IgbGlrZSBhIGdyb2NlcnkgbGlzdC4gT3IgbGlrZSBHaXRIdWIgaXNzdWVzLiBTbyBzYXlpbmcgXCJ0aGUgdGFzayBpc1xudG8gdGVsbCBtZSB0aGUgY3VycmVudCBQT1NJWCB0aW1lXCIgZG9lcyBub3QgY29tcGxldGUgdGhlIHRhc2shIFlvdSBuZWVkXG5bYHBlcmZvcm1gXSgjcGVyZm9ybSkgdGFza3Mgb3IgW2BhdHRlbXB0YF0oI2F0dGVtcHQpIHRhc2tzLlxuLX1cbnR5cGUgYWxpYXMgVGFzayB4IGEgPVxuICBQbGF0Zm9ybS5UYXNrIHggYVxuXG5cblxuLS0gQkFTSUNTXG5cblxuey18IEEgdGFzayB0aGF0IHN1Y2NlZWRzIGltbWVkaWF0ZWx5IHdoZW4gcnVuLiBJdCBpcyB1c3VhbGx5IHVzZWQgd2l0aFxuW2BhbmRUaGVuYF0oI2FuZFRoZW4pLiBZb3UgY2FuIHVzZSBpdCBsaWtlIGBtYXBgIGlmIHlvdSB3YW50OlxuXG4gICAgaW1wb3J0IFRpbWUgLS0gZWxtIGluc3RhbGwgZWxtL3RpbWVcblxuICAgIHRpbWVJbk1pbGxpcyA6IFRhc2sgeCBJbnRcbiAgICB0aW1lSW5NaWxsaXMgPVxuICAgICAgVGltZS5ub3dcbiAgICAgICAgfD4gYW5kVGhlbiAoXFx0IC0+IHN1Y2NlZWQgKFRpbWUucG9zaXhUb01pbGxpcyB0KSlcblxuLX1cbnN1Y2NlZWQgOiBhIC0+IFRhc2sgeCBhXG5zdWNjZWVkID1cbiAgRWxtLktlcm5lbC5TY2hlZHVsZXIuc3VjY2VlZFxuXG5cbnstfCBBIHRhc2sgdGhhdCBmYWlscyBpbW1lZGlhdGVseSB3aGVuIHJ1bi4gTGlrZSB3aXRoIGBzdWNjZWVkYCwgdGhpcyBjYW4gYmVcbnVzZWQgd2l0aCBgYW5kVGhlbmAgdG8gY2hlY2sgb24gdGhlIG91dGNvbWUgb2YgYW5vdGhlciB0YXNrLlxuXG4gICAgdHlwZSBFcnJvciA9IE5vdEZvdW5kXG5cbiAgICBub3RGb3VuZCA6IFRhc2sgRXJyb3IgYVxuICAgIG5vdEZvdW5kID1cbiAgICAgIGZhaWwgTm90Rm91bmRcbi19XG5mYWlsIDogeCAtPiBUYXNrIHggYVxuZmFpbCA9XG4gIEVsbS5LZXJuZWwuU2NoZWR1bGVyLmZhaWxcblxuXG5cbi0tIE1BUFBJTkdcblxuXG57LXwgVHJhbnNmb3JtIGEgdGFzay4gTWF5YmUgeW91IHdhbnQgdG8gdXNlIFtgZWxtL3RpbWVgXVt0aW1lXSB0byBmaWd1cmVcbm91dCB3aGF0IHRpbWUgaXQgd2lsbCBiZSBpbiBvbmUgaG91cjpcblxuICAgIGltcG9ydCBUYXNrIGV4cG9zaW5nIChUYXNrKVxuICAgIGltcG9ydCBUaW1lIC0tIGVsbSBpbnN0YWxsIGVsbS90aW1lXG5cbiAgICB0aW1lSW5PbmVIb3VyIDogVGFzayB4IFRpbWUuUG9zaXhcbiAgICB0aW1lSW5PbmVIb3VyID1cbiAgICAgIFRhc2subWFwIGFkZEFuSG91ciBUaW1lLm5vd1xuXG4gICAgYWRkQW5Ib3VyIDogVGltZS5Qb3NpeCAtPiBUaW1lLlBvc2l4XG4gICAgYWRkQW5Ib3VyIHRpbWUgPVxuICAgICAgVGltZS5taWxsaXNUb1Bvc2l4IChUaW1lLnBvc2l4VG9NaWxsaXMgdGltZSArIDYwICogNjAgKiAxMDAwKVxuXG5bdGltZV06IC9wYWNrYWdlcy9lbG0vdGltZS9sYXRlc3QvXG4tfVxubWFwIDogKGEgLT4gYikgLT4gVGFzayB4IGEgLT4gVGFzayB4IGJcbm1hcCBmdW5jIHRhc2tBID1cbiAgdGFza0FcbiAgICB8PiBhbmRUaGVuIChcXGEgLT4gc3VjY2VlZCAoZnVuYyBhKSlcblxuXG57LXwgUHV0IHRoZSByZXN1bHRzIG9mIHR3byB0YXNrcyB0b2dldGhlci4gRm9yIGV4YW1wbGUsIGlmIHdlIHdhbnRlZCB0byBrbm93XG50aGUgY3VycmVudCBtb250aCwgd2UgY291bGQgdXNlIFtgZWxtL3RpbWVgXVt0aW1lXSB0byBhc2s6XG5cbiAgICBpbXBvcnQgVGFzayBleHBvc2luZyAoVGFzaylcbiAgICBpbXBvcnQgVGltZSAtLSBlbG0gaW5zdGFsbCBlbG0vdGltZVxuXG4gICAgZ2V0TW9udGggOiBUYXNrIHggSW50XG4gICAgZ2V0TW9udGggPVxuICAgICAgVGFzay5tYXAyIFRpbWUudG9Nb250aCBUaW1lLmhlcmUgVGltZS5ub3dcblxuKipOb3RlOioqIFNheSB3ZSB3ZXJlIGRvaW5nIEhUVFAgcmVxdWVzdHMgaW5zdGVhZC4gYG1hcDJgIGRvZXMgZWFjaCB0YXNrIGluXG5vcmRlciwgc28gaXQgd291bGQgdHJ5IHRoZSBmaXJzdCByZXF1ZXN0IGFuZCBvbmx5IGNvbnRpbnVlIGFmdGVyIGl0IHN1Y2NlZWRzLlxuSWYgaXQgZmFpbHMsIHRoZSB3aG9sZSB0aGluZyBmYWlscyFcblxuW3RpbWVdOiAvcGFja2FnZXMvZWxtL3RpbWUvbGF0ZXN0L1xuLX1cbm1hcDIgOiAoYSAtPiBiIC0+IHJlc3VsdCkgLT4gVGFzayB4IGEgLT4gVGFzayB4IGIgLT4gVGFzayB4IHJlc3VsdFxubWFwMiBmdW5jIHRhc2tBIHRhc2tCID1cbiAgdGFza0FcbiAgICB8PiBhbmRUaGVuIChcXGEgLT4gdGFza0JcbiAgICB8PiBhbmRUaGVuIChcXGIgLT4gc3VjY2VlZCAoZnVuYyBhIGIpKSlcblxuXG57LXwtfVxubWFwMyA6IChhIC0+IGIgLT4gYyAtPiByZXN1bHQpIC0+IFRhc2sgeCBhIC0+IFRhc2sgeCBiIC0+IFRhc2sgeCBjIC0+IFRhc2sgeCByZXN1bHRcbm1hcDMgZnVuYyB0YXNrQSB0YXNrQiB0YXNrQyA9XG4gIHRhc2tBXG4gICAgfD4gYW5kVGhlbiAoXFxhIC0+IHRhc2tCXG4gICAgfD4gYW5kVGhlbiAoXFxiIC0+IHRhc2tDXG4gICAgfD4gYW5kVGhlbiAoXFxjIC0+IHN1Y2NlZWQgKGZ1bmMgYSBiIGMpKSkpXG5cblxuey18LX1cbm1hcDQgOiAoYSAtPiBiIC0+IGMgLT4gZCAtPiByZXN1bHQpIC0+IFRhc2sgeCBhIC0+IFRhc2sgeCBiIC0+IFRhc2sgeCBjIC0+IFRhc2sgeCBkIC0+IFRhc2sgeCByZXN1bHRcbm1hcDQgZnVuYyB0YXNrQSB0YXNrQiB0YXNrQyB0YXNrRCA9XG4gIHRhc2tBXG4gICAgfD4gYW5kVGhlbiAoXFxhIC0+IHRhc2tCXG4gICAgfD4gYW5kVGhlbiAoXFxiIC0+IHRhc2tDXG4gICAgfD4gYW5kVGhlbiAoXFxjIC0+IHRhc2tEXG4gICAgfD4gYW5kVGhlbiAoXFxkIC0+IHN1Y2NlZWQgKGZ1bmMgYSBiIGMgZCkpKSkpXG5cblxuey18LX1cbm1hcDUgOiAoYSAtPiBiIC0+IGMgLT4gZCAtPiBlIC0+IHJlc3VsdCkgLT4gVGFzayB4IGEgLT4gVGFzayB4IGIgLT4gVGFzayB4IGMgLT4gVGFzayB4IGQgLT4gVGFzayB4IGUgLT4gVGFzayB4IHJlc3VsdFxubWFwNSBmdW5jIHRhc2tBIHRhc2tCIHRhc2tDIHRhc2tEIHRhc2tFID1cbiAgdGFza0FcbiAgICB8PiBhbmRUaGVuIChcXGEgLT4gdGFza0JcbiAgICB8PiBhbmRUaGVuIChcXGIgLT4gdGFza0NcbiAgICB8PiBhbmRUaGVuIChcXGMgLT4gdGFza0RcbiAgICB8PiBhbmRUaGVuIChcXGQgLT4gdGFza0VcbiAgICB8PiBhbmRUaGVuIChcXGUgLT4gc3VjY2VlZCAoZnVuYyBhIGIgYyBkIGUpKSkpKSlcblxuXG57LXwgU3RhcnQgd2l0aCBhIGxpc3Qgb2YgdGFza3MsIGFuZCB0dXJuIHRoZW0gaW50byBhIHNpbmdsZSB0YXNrIHRoYXQgcmV0dXJucyBhXG5saXN0LiBUaGUgdGFza3Mgd2lsbCBiZSBydW4gaW4gb3JkZXIgb25lLWJ5LW9uZSBhbmQgaWYgYW55IHRhc2sgZmFpbHMgdGhlIHdob2xlXG5zZXF1ZW5jZSBmYWlscy5cblxuICAgIHNlcXVlbmNlIFsgc3VjY2VlZCAxLCBzdWNjZWVkIDIgXSA9PSBzdWNjZWVkIFsgMSwgMiBdXG5cbi19XG5zZXF1ZW5jZSA6IExpc3QgKFRhc2sgeCBhKSAtPiBUYXNrIHggKExpc3QgYSlcbnNlcXVlbmNlIHRhc2tzID1cbiAgTGlzdC5mb2xkciAobWFwMiAoOjopKSAoc3VjY2VlZCBbXSkgdGFza3NcblxuXG5cbi0tIENIQUlOSU5HXG5cblxuey18IENoYWluIHRvZ2V0aGVyIGEgdGFzayBhbmQgYSBjYWxsYmFjay4gVGhlIGZpcnN0IHRhc2sgd2lsbCBydW4sIGFuZCBpZiBpdCBpc1xuc3VjY2Vzc2Z1bCwgeW91IGdpdmUgdGhlIHJlc3VsdCB0byB0aGUgY2FsbGJhY2sgcmVzdWx0aW5nIGluIGFub3RoZXIgdGFzay4gVGhpc1xudGFzayB0aGVuIGdldHMgcnVuLiBXZSBjb3VsZCB1c2UgdGhpcyB0byBtYWtlIGEgdGFzayB0aGF0IHJlc29sdmVzIGFuIGhvdXIgZnJvbVxubm93OlxuXG4gICAgaW1wb3J0IFRpbWUgLS0gZWxtIGluc3RhbGwgZWxtL3RpbWVcbiAgICBpbXBvcnQgUHJvY2Vzc1xuXG4gICAgdGltZUluT25lSG91ciA6IFRhc2sgeCBUaW1lLlBvc2l4XG4gICAgdGltZUluT25lSG91ciA9XG4gICAgICBQcm9jZXNzLnNsZWVwICg2MCAqIDYwICogMTAwMClcbiAgICAgICAgfD4gYW5kVGhlbiAoXFxfIC0+IFRpbWUubm93KVxuXG5GaXJzdCB0aGUgcHJvY2VzcyBzbGVlcHMgZm9yIGFuIGhvdXIgKiphbmQgdGhlbioqIGl0IHRlbGxzIHVzIHdoYXQgdGltZSBpdCBpcy5cbi19XG5hbmRUaGVuIDogKGEgLT4gVGFzayB4IGIpIC0+IFRhc2sgeCBhIC0+IFRhc2sgeCBiXG5hbmRUaGVuID1cbiAgRWxtLktlcm5lbC5TY2hlZHVsZXIuYW5kVGhlblxuXG5cblxuLS0gRVJST1JTXG5cblxuey18IFJlY292ZXIgZnJvbSBhIGZhaWx1cmUgaW4gYSB0YXNrLiBJZiB0aGUgZ2l2ZW4gdGFzayBmYWlscywgd2UgdXNlIHRoZVxuY2FsbGJhY2sgdG8gcmVjb3Zlci5cblxuICAgIGZhaWwgXCJmaWxlIG5vdCBmb3VuZFwiXG4gICAgICB8PiBvbkVycm9yIChcXG1zZyAtPiBzdWNjZWVkIDQyKVxuICAgICAgLS0gc3VjY2VlZCA0MlxuXG4gICAgc3VjY2VlZCA5XG4gICAgICB8PiBvbkVycm9yIChcXG1zZyAtPiBzdWNjZWVkIDQyKVxuICAgICAgLS0gc3VjY2VlZCA5XG4tfVxub25FcnJvciA6ICh4IC0+IFRhc2sgeSBhKSAtPiBUYXNrIHggYSAtPiBUYXNrIHkgYVxub25FcnJvciA9XG4gIEVsbS5LZXJuZWwuU2NoZWR1bGVyLm9uRXJyb3JcblxuXG57LXwgVHJhbnNmb3JtIHRoZSBlcnJvciB2YWx1ZS4gVGhpcyBjYW4gYmUgdXNlZnVsIGlmIHlvdSBuZWVkIGEgYnVuY2ggb2YgZXJyb3JcbnR5cGVzIHRvIG1hdGNoIHVwLlxuXG4gICAgdHlwZSBFcnJvclxuICAgICAgPSBIdHRwIEh0dHAuRXJyb3JcbiAgICAgIHwgV2ViR0wgV2ViR0wuRXJyb3JcblxuICAgIGdldFJlc291cmNlcyA6IFRhc2sgRXJyb3IgUmVzb3VyY2VcbiAgICBnZXRSZXNvdXJjZXMgPVxuICAgICAgc2VxdWVuY2VcbiAgICAgICAgWyBtYXBFcnJvciBIdHRwIHNlcnZlclRhc2tcbiAgICAgICAgLCBtYXBFcnJvciBXZWJHTCB0ZXh0dXJlVGFza1xuICAgICAgICBdXG4tfVxubWFwRXJyb3IgOiAoeCAtPiB5KSAtPiBUYXNrIHggYSAtPiBUYXNrIHkgYVxubWFwRXJyb3IgY29udmVydCB0YXNrID1cbiAgdGFza1xuICAgIHw+IG9uRXJyb3IgKGZhaWwgPDwgY29udmVydClcblxuXG5cbi0tIENPTU1BTkRTXG5cblxudHlwZSBNeUNtZCBtc2cgPVxuICBQZXJmb3JtIChUYXNrIE5ldmVyIG1zZylcblxuXG57LXwgTGlrZSBJIHdhcyBzYXlpbmcgaW4gdGhlIFtgVGFza2BdKCNUYXNrKSBkb2N1bWVudGF0aW9uLCBqdXN0IGhhdmluZyBhXG5gVGFza2AgZG9lcyBub3QgbWVhbiBpdCBpcyBkb25lLiBXZSBtdXN0IGNvbW1hbmQgRWxtIHRvIGBwZXJmb3JtYCB0aGUgdGFzazpcblxuICAgIGltcG9ydCBUaW1lICAtLSBlbG0gaW5zdGFsbCBlbG0vdGltZVxuICAgIGltcG9ydCBUYXNrXG5cbiAgICB0eXBlIE1zZ1xuICAgICAgPSBDbGlja1xuICAgICAgfCBTZWFyY2ggU3RyaW5nXG4gICAgICB8IE5ld1RpbWUgVGltZS5Qb3NpeFxuXG4gICAgZ2V0TmV3VGltZSA6IENtZCBNc2dcbiAgICBnZXROZXdUaW1lID1cbiAgICAgIFRhc2sucGVyZm9ybSBOZXdUaW1lIFRpbWUubm93XG5cbklmIHlvdSBoYXZlIHdvcmtlZCB0aHJvdWdoIFtgZ3VpZGUuZWxtLWxhbmcub3JnYF1bZ3VpZGVdIChoaWdobHkgcmVjb21tZW5kZWQhKVxueW91IHdpbGwgcmVjb2duaXplIGBDbWRgIGZyb20gdGhlIHNlY3Rpb24gb24gVGhlIEVsbSBBcmNoaXRlY3R1cmUuIFNvIHdlIGhhdmVcbmNoYW5nZWQgYSB0YXNrIGxpa2UgXCJtYWtlIGRlbGljaW91cyBsYXNhZ25hXCIgaW50byBhIGNvbW1hbmQgbGlrZSBcIkhleSBFbG0sIG1ha2VcbmRlbGljaW91cyBsYXNhZ25hIGFuZCBnaXZlIGl0IHRvIG15IGB1cGRhdGVgIGZ1bmN0aW9uIGFzIGEgYE1zZ2AgdmFsdWUuXCJcblxuW2d1aWRlXTogaHR0cHM6Ly9ndWlkZS5lbG0tbGFuZy5vcmcvXG4tfVxucGVyZm9ybSA6IChhIC0+IG1zZykgLT4gVGFzayBOZXZlciBhIC0+IENtZCBtc2dcbnBlcmZvcm0gdG9NZXNzYWdlIHRhc2sgPVxuICBjb21tYW5kIChQZXJmb3JtIChtYXAgdG9NZXNzYWdlIHRhc2spKVxuXG5cbnstfCBUaGlzIGlzIHZlcnkgc2ltaWxhciB0byBbYHBlcmZvcm1gXSgjcGVyZm9ybSkgZXhjZXB0IGl0IGNhbiBoYW5kbGUgZmFpbHVyZXMhXG5TbyB3ZSBjb3VsZCBfYXR0ZW1wdF8gdG8gZm9jdXMgb24gYSBjZXJ0YWluIERPTSBub2RlIGxpa2UgdGhpczpcblxuICAgIGltcG9ydCBCcm93c2VyLkRvbSAgLS0gZWxtIGluc3RhbGwgZWxtL2Jyb3dzZXJcbiAgICBpbXBvcnQgVGFza1xuXG4gICAgdHlwZSBNc2dcbiAgICAgID0gQ2xpY2tcbiAgICAgIHwgU2VhcmNoIFN0cmluZ1xuICAgICAgfCBGb2N1cyAoUmVzdWx0IEJyb3dzZXIuRG9tRXJyb3IgKCkpXG5cbiAgICBmb2N1cyA6IENtZCBNc2dcbiAgICBmb2N1cyA9XG4gICAgICBUYXNrLmF0dGVtcHQgRm9jdXMgKEJyb3dzZXIuRG9tLmZvY3VzIFwibXktYXBwLXNlYXJjaC1ib3hcIilcblxuU28gdGhlIHRhc2sgaXMgXCJmb2N1cyBvbiB0aGlzIERPTSBub2RlXCIgYW5kIHdlIGFyZSB0dXJuaW5nIGl0IGludG8gdGhlIGNvbW1hbmRcblwiSGV5IEVsbSwgYXR0ZW1wdCB0byBmb2N1cyBvbiB0aGlzIERPTSBub2RlIGFuZCBnaXZlIG1lIGEgYE1zZ2AgYWJvdXQgd2hldGhlclxueW91IHN1Y2NlZWRlZCBvciBmYWlsZWQuXCJcblxuKipOb3RlOioqIERlZmluaXRlbHkgd29yayB0aHJvdWdoIFtgZ3VpZGUuZWxtLWxhbmcub3JnYF1bZ3VpZGVdIHRvIGdldCBhXG5mZWVsaW5nIGZvciBob3cgY29tbWFuZHMgZml0IGludG8gVGhlIEVsbSBBcmNoaXRlY3R1cmUuXG5cbltndWlkZV06IGh0dHBzOi8vZ3VpZGUuZWxtLWxhbmcub3JnL1xuLX1cbmF0dGVtcHQgOiAoUmVzdWx0IHggYSAtPiBtc2cpIC0+IFRhc2sgeCBhIC0+IENtZCBtc2dcbmF0dGVtcHQgcmVzdWx0VG9NZXNzYWdlIHRhc2sgPVxuICBjb21tYW5kIChQZXJmb3JtIChcbiAgICB0YXNrXG4gICAgICB8PiBhbmRUaGVuIChzdWNjZWVkIDw8IHJlc3VsdFRvTWVzc2FnZSA8PCBPaylcbiAgICAgIHw+IG9uRXJyb3IgKHN1Y2NlZWQgPDwgcmVzdWx0VG9NZXNzYWdlIDw8IEVycilcbiAgKSlcblxuXG5jbWRNYXAgOiAoYSAtPiBiKSAtPiBNeUNtZCBhIC0+IE15Q21kIGJcbmNtZE1hcCB0YWdnZXIgKFBlcmZvcm0gdGFzaykgPVxuICBQZXJmb3JtIChtYXAgdGFnZ2VyIHRhc2spXG5cblxuXG4tLSBNQU5BR0VSXG5cblxuaW5pdCA6IFRhc2sgTmV2ZXIgKClcbmluaXQgPVxuICBzdWNjZWVkICgpXG5cblxub25FZmZlY3RzIDogUGxhdGZvcm0uUm91dGVyIG1zZyBOZXZlciAtPiBMaXN0IChNeUNtZCBtc2cpIC0+ICgpIC0+IFRhc2sgTmV2ZXIgKClcbm9uRWZmZWN0cyByb3V0ZXIgY29tbWFuZHMgc3RhdGUgPVxuICBtYXBcbiAgICAoXFxfIC0+ICgpKVxuICAgIChzZXF1ZW5jZSAoTGlzdC5tYXAgKHNwYXduQ21kIHJvdXRlcikgY29tbWFuZHMpKVxuXG5cbm9uU2VsZk1zZyA6IFBsYXRmb3JtLlJvdXRlciBtc2cgTmV2ZXIgLT4gTmV2ZXIgLT4gKCkgLT4gVGFzayBOZXZlciAoKVxub25TZWxmTXNnIF8gXyBfID1cbiAgc3VjY2VlZCAoKVxuXG5cbnNwYXduQ21kIDogUGxhdGZvcm0uUm91dGVyIG1zZyBOZXZlciAtPiBNeUNtZCBtc2cgLT4gVGFzayB4ICgpXG5zcGF3bkNtZCByb3V0ZXIgKFBlcmZvcm0gdGFzaykgPVxuICBFbG0uS2VybmVsLlNjaGVkdWxlci5zcGF3biAoXG4gICAgdGFza1xuICAgICAgfD4gYW5kVGhlbiAoUGxhdGZvcm0uc2VuZFRvQXBwIHJvdXRlcilcbiAgKVxuJ30pKQoJCV0pKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRCbG9iTm9kZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdCbG9iTm9kZScsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJFRyZWVOb2RlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1RyZWVOb2RlJywgYTogYX07Cn07CnZhciAkZWxtJGNvcmUkVHVwbGUkbWFwU2Vjb25kID0gRjIoCglmdW5jdGlvbiAoZnVuYywgX3YwKSB7CgkJdmFyIHggPSBfdjAuYTsKCQl2YXIgeSA9IF92MC5iOwoJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQl4LAoJCQlmdW5jKHkpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJG1hcEJsb2JzID0gRjIoCglmdW5jdGlvbiAobWFwQmxvYiwgbm9kZSkgewoJCWlmIChub2RlLiQgPT09ICdUcmVlTm9kZScpIHsKCQkJdmFyIHRyZWUgPSBub2RlLmE7CgkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkVHJlZU5vZGUoCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJJGVsbSRjb3JlJFR1cGxlJG1hcFNlY29uZCgKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJG1hcEJsb2JzKG1hcEJsb2IpKSwKCQkJCQl0cmVlKSk7CgkJfSBlbHNlIHsKCQkJdmFyIGJsb2IgPSBub2RlLmE7CgkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkQmxvYk5vZGUoCgkJCQltYXBCbG9iKGJsb2IpKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRtYXBGaWxlVHJlZU5vZGVGcm9tR2VuZXJhdGVkID0gZnVuY3Rpb24gKG5vZGUpIHsKCWlmIChub2RlLiQgPT09ICdCbG9iTm9kZScpIHsKCQl2YXIgYmxvYiA9IG5vZGUuYTsKCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEJsb2JOb2RlKGJsb2IpOwoJfSBlbHNlIHsKCQl2YXIgdHJlZSA9IG5vZGUuYTsKCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJFRyZWVOb2RlKAoJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCSRlbG0kY29yZSRUdXBsZSRtYXBTZWNvbmQoJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJG1hcEZpbGVUcmVlTm9kZUZyb21HZW5lcmF0ZWQpLAoJCQkJdHJlZSkpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJGZpbGVfdHJlZV9fX19lbG1fY29yZV9tb2R1bGVzX2V4cGxpY2l0X2ltcG9ydCA9IEEyKAoJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJG1hcEJsb2JzLAoJZnVuY3Rpb24gKGJsb2JWYWx1ZSkgewoJCXJldHVybiB7dXRmODogYmxvYlZhbHVlLnV0Zjh9OwoJfSwKCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRtYXBGaWxlVHJlZU5vZGVGcm9tR2VuZXJhdGVkKCRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkZmlsZV90cmVlX25vZGVfZWxtX2NvcmVfbW9kdWxlc19leHBsaWNpdF9pbXBvcnQpKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkZmlsZV90cmVlX25vZGVfZWxtX2NvcmVfbW9kdWxlc19pbXBsaWNpdF9pbXBvcnQgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJFRyZWVOb2RlKAoJX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJX1V0aWxzX1R1cGxlMigKCQkJJ0Jhc2ljcy5lbG0nLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJEJsb2JOb2RlKAoJCQkJe3V0Zjg6ICdtb2R1bGUgQmFzaWNzIGV4cG9zaW5nXG4gICggSW50LCBGbG9hdFxuICAsICgrKSwgKC0pLCAoKiksICgvKSwgKC8vKSwgKF4pXG4gICwgdG9GbG9hdCwgcm91bmQsIGZsb29yLCBjZWlsaW5nLCB0cnVuY2F0ZVxuICAsICg9PSksICgvPSlcbiAgLCAoPCksICg+KSwgKDw9KSwgKD49KSwgbWF4LCBtaW4sIGNvbXBhcmUsIE9yZGVyKC4uKVxuICAsIEJvb2woLi4pLCBub3QsICgmJiksICh8fCksIHhvclxuICAsICgrKylcbiAgLCBtb2RCeSwgcmVtYWluZGVyQnksIG5lZ2F0ZSwgYWJzLCBjbGFtcCwgc3FydCwgbG9nQmFzZSwgZVxuICAsIHBpLCBjb3MsIHNpbiwgdGFuLCBhY29zLCBhc2luLCBhdGFuLCBhdGFuMlxuICAsIGRlZ3JlZXMsIHJhZGlhbnMsIHR1cm5zXG4gICwgdG9Qb2xhciwgZnJvbVBvbGFyXG4gICwgaXNOYU4sIGlzSW5maW5pdGVcbiAgLCBpZGVudGl0eSwgYWx3YXlzLCAoPHwpLCAofD4pLCAoPDwpLCAoPj4pLCBOZXZlciwgbmV2ZXJcbiAgKVxuXG57LXwgVG9ucyBvZiB1c2VmdWwgZnVuY3Rpb25zIHRoYXQgZ2V0IGltcG9ydGVkIGJ5IGRlZmF1bHQuXG5cbiMgTWF0aFxuQGRvY3MgSW50LCBGbG9hdCwgKCspLCAoLSksICgqKSwgKC8pLCAoLy8pLCAoXilcblxuIyBJbnQgdG8gRmxvYXQgLyBGbG9hdCB0byBJbnRcbkBkb2NzIHRvRmxvYXQsIHJvdW5kLCBmbG9vciwgY2VpbGluZywgdHJ1bmNhdGVcblxuIyBFcXVhbGl0eVxuQGRvY3MgKD09KSwgKC89KVxuXG4jIENvbXBhcmlzb25cblxuVGhlc2UgZnVuY3Rpb25zIG9ubHkgd29yayBvbiBgY29tcGFyYWJsZWAgdHlwZXMuIFRoaXMgaW5jbHVkZXMgbnVtYmVycyxcbmNoYXJhY3RlcnMsIHN0cmluZ3MsIGxpc3RzIG9mIGNvbXBhcmFibGUgdGhpbmdzLCBhbmQgdHVwbGVzIG9mIGNvbXBhcmFibGVcbnRoaW5ncy5cblxuQGRvY3MgKDwpLCAoPiksICg8PSksICg+PSksIG1heCwgbWluLCBjb21wYXJlLCBPcmRlclxuXG4jIEJvb2xlYW5zXG5AZG9jcyBCb29sLCBub3QsICgmJiksICh8fCksIHhvclxuXG4jIEFwcGVuZCBTdHJpbmdzIGFuZCBMaXN0c1xuQGRvY3MgKCsrKVxuXG4jIEZhbmNpZXIgTWF0aFxuQGRvY3MgbW9kQnksIHJlbWFpbmRlckJ5LCBuZWdhdGUsIGFicywgY2xhbXAsIHNxcnQsIGxvZ0Jhc2UsIGVcblxuIyBBbmdsZXNcbkBkb2NzIGRlZ3JlZXMsIHJhZGlhbnMsIHR1cm5zXG5cbiMgVHJpZ29ub21ldHJ5XG5AZG9jcyBwaSwgY29zLCBzaW4sIHRhbiwgYWNvcywgYXNpbiwgYXRhbiwgYXRhbjJcblxuIyBQb2xhciBDb29yZGluYXRlc1xuQGRvY3MgdG9Qb2xhciwgZnJvbVBvbGFyXG5cbiMgRmxvYXRpbmcgUG9pbnQgQ2hlY2tzXG5AZG9jcyBpc05hTiwgaXNJbmZpbml0ZVxuXG4jIEZ1bmN0aW9uIEhlbHBlcnNcbkBkb2NzIGlkZW50aXR5LCBhbHdheXMsICg8fCksICh8PiksICg8PCksICg+PiksIE5ldmVyLCBuZXZlclxuXG4tfVxuXG5cbmltcG9ydCBFbG0uS2VybmVsLkJhc2ljc1xuaW1wb3J0IEVsbS5LZXJuZWwuVXRpbHNcblxuXG5cbi0tIElORklYIE9QRVJBVE9SU1xuXG5cbmluZml4IHJpZ2h0IDAgKDx8KSA9IGFwTFxuaW5maXggbGVmdCAgMCAofD4pID0gYXBSXG5pbmZpeCByaWdodCAyICh8fCkgPSBvclxuaW5maXggcmlnaHQgMyAoJiYpID0gYW5kXG5pbmZpeCBub24gICA0ICg9PSkgPSBlcVxuaW5maXggbm9uICAgNCAoLz0pID0gbmVxXG5pbmZpeCBub24gICA0ICg8KSAgPSBsdFxuaW5maXggbm9uICAgNCAoPikgID0gZ3RcbmluZml4IG5vbiAgIDQgKDw9KSA9IGxlXG5pbmZpeCBub24gICA0ICg+PSkgPSBnZVxuaW5maXggcmlnaHQgNSAoKyspID0gYXBwZW5kXG5pbmZpeCBsZWZ0ICA2ICgrKSAgPSBhZGRcbmluZml4IGxlZnQgIDYgKC0pICA9IHN1YlxuaW5maXggbGVmdCAgNyAoKikgID0gbXVsXG5pbmZpeCBsZWZ0ICA3ICgvKSAgPSBmZGl2XG5pbmZpeCBsZWZ0ICA3ICgvLykgPSBpZGl2XG5pbmZpeCByaWdodCA4ICheKSAgPSBwb3dcbmluZml4IGxlZnQgIDkgKDw8KSA9IGNvbXBvc2VMXG5pbmZpeCByaWdodCA5ICg+PikgPSBjb21wb3NlUlxuXG5cblxuLS0gTUFUSEVNQVRJQ1NcblxuXG57LXwgQW4gYEludGAgaXMgYSB3aG9sZSBudW1iZXIuIFZhbGlkIHN5bnRheCBmb3IgaW50ZWdlcnMgaW5jbHVkZXM6XG5cbiAgICAwXG4gICAgNDJcbiAgICA5MDAwXG4gICAgMHhGRiAgIC0tIDI1NSBpbiBoZXhhZGVjaW1hbFxuICAgIDB4MDAwQSAtLSAgMTAgaW4gaGV4YWRlY2ltYWxcblxuKipOb3RlOioqIGBJbnRgIG1hdGggaXMgd2VsbC1kZWZpbmVkIGluIHRoZSByYW5nZSBgLTJeMzFgIHRvIGAyXjMxIC0gMWAuIE91dHNpZGVcbm9mIHRoYXQgcmFuZ2UsIHRoZSBiZWhhdmlvciBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBjb21waWxhdGlvbiB0YXJnZXQuIFdoZW5cbmdlbmVyYXRpbmcgSmF2YVNjcmlwdCwgdGhlIHNhZmUgcmFuZ2UgZXhwYW5kcyB0byBgLSgyXjUzIC0gMSlgIHRvIGAyXjUzIC0gMWAgZm9yIHNvbWVcbm9wZXJhdGlvbnMsIGJ1dCBpZiB3ZSBnZW5lcmF0ZSBXZWJBc3NlbWJseSBzb21lIGRheSwgd2Ugd291bGQgZG8gdGhlIHRyYWRpdGlvbmFsXG5baW50ZWdlciBvdmVyZmxvd11baW9dLiBUaGlzIHF1aXJrIGlzIG5lY2Vzc2FyeSB0byBnZXQgZ29vZCBwZXJmb3JtYW5jZSBvblxucXVpcmt5IGNvbXBpbGF0aW9uIHRhcmdldHMuXG5cbioqSGlzdG9yaWNhbCBOb3RlOioqIFRoZSBuYW1lIGBJbnRgIGNvbWVzIGZyb20gdGhlIHRlcm0gW2ludGVnZXJdW10uIEl0IGFwcGVhcnNcbnRoYXQgdGhlIGBpbnRgIGFiYnJldmlhdGlvbiB3YXMgaW50cm9kdWNlZCBpbiBbQUxHT0wgNjhdWzY4XSwgc2hvcnRlbmluZyBpdFxuZnJvbSBgaW50ZWdlcmAgaW4gW0FMR09MIDYwXVs2MF0uIFRvZGF5LCBhbG1vc3QgYWxsIHByb2dyYW1taW5nIGxhbmd1YWdlcyB1c2VcbnRoaXMgYWJicmV2aWF0aW9uLlxuXG5baW9dOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JbnRlZ2VyX292ZXJmbG93XG5baW50ZWdlcl06IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0ludGVnZXJcbls2MF06IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FMR09MXzYwXG5bNjhdOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTEdPTF82OFxuLX1cbnR5cGUgSW50ID0gSW50IC0tIE5PVEU6IFRoZSBjb21waWxlciBwcm92aWRlcyB0aGUgcmVhbCBpbXBsZW1lbnRhdGlvbi5cblxuXG57LXwgQSBgRmxvYXRgIGlzIGEgW2Zsb2F0aW5nLXBvaW50IG51bWJlcl1bZnBdLiBWYWxpZCBzeW50YXggZm9yIGZsb2F0cyBpbmNsdWRlczpcblxuICAgIDBcbiAgICA0MlxuICAgIDMuMTRcbiAgICAwLjEyMzRcbiAgICA2LjAyMmUyMyAgIC0tID09ICg2LjAyMiAqIDEwXjIzKVxuICAgIDYuMDIyZSsyMyAgLS0gPT0gKDYuMDIyICogMTBeMjMpXG4gICAgMS42MDJl4oiSMTkgIC0tID09ICgxLjYwMiAqIDEwXi0xOSlcbiAgICAxZTMgICAgICAgIC0tID09ICgxICogMTBeMykgPT0gMTAwMFxuXG4qKkhpc3RvcmljYWwgTm90ZToqKiBUaGUgcGFydGljdWxhciBkZXRhaWxzIG9mIGZsb2F0cyAoZS5nLiBgTmFOYCkgYXJlXG5zcGVjaWZpZWQgYnkgW0lFRUUgNzU0XVtpZWVlXSB3aGljaCBpcyBsaXRlcmFsbHkgaGFyZC1jb2RlZCBpbnRvIGFsbW9zdCBhbGxcbkNQVXMgaW4gdGhlIHdvcmxkLiBUaGF0IG1lYW5zIGlmIHlvdSB0aGluayBgTmFOYCBpcyB3ZWlyZCwgeW91IG11c3RcbnN1Y2Nlc3NmdWxseSBvdmVydGFrZSBJbnRlbCBhbmQgQU1EIHdpdGggYSBjaGlwIHRoYXQgaXMgbm90IGJhY2t3YXJkc1xuY29tcGF0aWJsZSB3aXRoIGFueSB3aWRlbHktdXNlZCBhc3NlbWJseSBsYW5ndWFnZS5cblxuW2ZwXTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmxvYXRpbmctcG9pbnRfYXJpdGhtZXRpY1xuW2llZWVdOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JRUVFXzc1NFxuLX1cbnR5cGUgRmxvYXQgPSBGbG9hdCAtLSBOT1RFOiBUaGUgY29tcGlsZXIgcHJvdmlkZXMgdGhlIHJlYWwgaW1wbGVtZW50YXRpb24uXG5cblxuey18IEFkZCB0d28gbnVtYmVycy4gVGhlIGBudW1iZXJgIHR5cGUgdmFyaWFibGUgbWVhbnMgdGhpcyBvcGVyYXRpb24gY2FuIGJlXG5zcGVjaWFsaXplZCB0byBgSW50IC0+IEludCAtPiBJbnRgIG9yIHRvIGBGbG9hdCAtPiBGbG9hdCAtPiBGbG9hdGAuIFNvIHlvdVxuY2FuIGRvIHRoaW5ncyBsaWtlIHRoaXM6XG5cbiAgICAzMDAyICsgNDAwNCA9PSA3MDA2ICAtLSBhbGwgaW50c1xuICAgIDMuMTQgKyAzLjE0ID09IDYuMjggIC0tIGFsbCBmbG9hdHNcblxuWW91IF9jYW5ub3RfIGFkZCBhbiBgSW50YCBhbmQgYSBgRmxvYXRgIGRpcmVjdGx5IHRob3VnaC4gVXNlIGZ1bmN0aW9ucyBsaWtlXG5bdG9GbG9hdF0oI3RvRmxvYXQpIG9yIFtyb3VuZF0oI3JvdW5kKSB0byBjb252ZXJ0IGJvdGggdmFsdWVzIHRvIHRoZSBzYW1lIHR5cGUuXG5TbyBpZiB5b3UgbmVlZGVkIHRvIGFkZCBhIGxpc3QgbGVuZ3RoIHRvIGEgYEZsb2F0YCBmb3Igc29tZSByZWFzb24sIHlvdVxuY291bGQgc2F5IG9uZSBvZiB0aGVzZTpcblxuICAgIDMuMTQgKyB0b0Zsb2F0IChMaXN0Lmxlbmd0aCBbMSwyLDNdKSA9PSA2LjE0XG4gICAgcm91bmQgMy4xNCArIExpc3QubGVuZ3RoIFsxLDIsM10gICAgID09IDZcblxuKipOb3RlOioqIExhbmd1YWdlcyBsaWtlIEphdmEgYW5kIEphdmFTY3JpcHQgYXV0b21hdGljYWxseSBjb252ZXJ0IGBJbnRgIHZhbHVlc1xudG8gYEZsb2F0YCB2YWx1ZXMgd2hlbiB5b3UgbWl4IGFuZCBtYXRjaC4gVGhpcyBjYW4gbWFrZSBpdCBkaWZmaWN1bHQgdG8gYmUgc3VyZVxuZXhhY3RseSB3aGF0IHR5cGUgb2YgbnVtYmVyIHlvdSBhcmUgZGVhbGluZyB3aXRoLiBXaGVuIHlvdSB0cnkgdG8gX2luZmVyXyB0aGVzZVxuY29udmVyc2lvbnMgKGFzIFNjYWxhIGRvZXMpIGl0IGNhbiBiZSBldmVuIG1vcmUgY29uZnVzaW5nLiBFbG0gaGFzIG9wdGVkIGZvciBhXG5kZXNpZ24gdGhhdCBtYWtlcyBhbGwgY29udmVyc2lvbnMgZXhwbGljaXQuXG4tfVxuYWRkIDogbnVtYmVyIC0+IG51bWJlciAtPiBudW1iZXJcbmFkZCA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLmFkZFxuXG5cbnstfCBTdWJ0cmFjdCBudW1iZXJzIGxpa2UgYDQgLSAzID09IDFgLlxuXG5TZWUgW2AoKylgXSgjKykgZm9yIGRvY3Mgb24gdGhlIGBudW1iZXJgIHR5cGUgdmFyaWFibGUuXG4tfVxuc3ViIDogbnVtYmVyIC0+IG51bWJlciAtPiBudW1iZXJcbnN1YiA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLnN1YlxuXG5cbnstfCBNdWx0aXBseSBudW1iZXJzIGxpa2UgYDIgKiAzID09IDZgLlxuXG5TZWUgW2AoKylgXSgjKykgZm9yIGRvY3Mgb24gdGhlIGBudW1iZXJgIHR5cGUgdmFyaWFibGUuXG4tfVxubXVsIDogbnVtYmVyIC0+IG51bWJlciAtPiBudW1iZXJcbm11bCA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLm11bFxuXG5cbnstfCBGbG9hdGluZy1wb2ludCBkaXZpc2lvbjpcblxuICAgIDEwIC8gNCA9PSAyLjVcbiAgICAxMSAvIDQgPT0gMi43NVxuICAgIDEyIC8gNCA9PSAzXG4gICAgMTMgLyA0ID09IDMuMjVcbiAgICAxNCAvIDQgPT0gMy41XG5cbiAgICAtMSAvIDQgPT0gLTAuMjVcbiAgICAtNSAvIDQgPT0gLTEuMjVcblxuLX1cbmZkaXYgOiBGbG9hdCAtPiBGbG9hdCAtPiBGbG9hdFxuZmRpdiA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLmZkaXZcblxuXG57LXwgSW50ZWdlciBkaXZpc2lvbjpcblxuICAgIDEwIC8vIDQgPT0gMlxuICAgIDExIC8vIDQgPT0gMlxuICAgIDEyIC8vIDQgPT0gM1xuICAgIDEzIC8vIDQgPT0gM1xuICAgIDE0IC8vIDQgPT0gM1xuXG4gICAgLTEgLy8gNCA9PSAwXG4gICAgLTUgLy8gNCA9PSAtMVxuXG5Ob3RpY2UgdGhhdCB0aGUgcmVtYWluZGVyIGlzIGRpc2NhcmRlZCwgc28gYDMgLy8gNGAgaXMgZ2l2aW5nIG91dHB1dFxuc2ltaWxhciB0byBgdHJ1bmNhdGUgKDMgLyA0KWAuXG5cbkl0IG1heSBzb21ldGltZXMgYmUgdXNlZnVsIHRvIHBhaXIgdGhpcyB3aXRoIHRoZSBbYHJlbWFpbmRlckJ5YF0oI3JlbWFpbmRlckJ5KVxuZnVuY3Rpb24uXG4tfVxuaWRpdiA6IEludCAtPiBJbnQgLT4gSW50XG5pZGl2ID1cbiAgRWxtLktlcm5lbC5CYXNpY3MuaWRpdlxuXG5cbnstfCBFeHBvbmVudGlhdGlvblxuXG4gICAgM14yID09IDlcbiAgICAzXjMgPT0gMjdcbi19XG5wb3cgOiBudW1iZXIgLT4gbnVtYmVyIC0+IG51bWJlclxucG93ID1cbiAgRWxtLktlcm5lbC5CYXNpY3MucG93XG5cblxuXG4tLSBJTlQgVE8gRkxPQVQgLyBGTE9BVCBUTyBJTlRcblxuXG57LXwgQ29udmVydCBhbiBpbnRlZ2VyIGludG8gYSBmbG9hdC4gVXNlZnVsIHdoZW4gbWl4aW5nIGBJbnRgIGFuZCBgRmxvYXRgXG52YWx1ZXMgbGlrZSB0aGlzOlxuXG4gICAgaGFsZk9mIDogSW50IC0+IEZsb2F0XG4gICAgaGFsZk9mIG51bWJlciA9XG4gICAgICB0b0Zsb2F0IG51bWJlciAvIDJcblxuLX1cbnRvRmxvYXQgOiBJbnQgLT4gRmxvYXRcbnRvRmxvYXQgPVxuICBFbG0uS2VybmVsLkJhc2ljcy50b0Zsb2F0XG5cblxuey18IFJvdW5kIGEgbnVtYmVyIHRvIHRoZSBuZWFyZXN0IGludGVnZXIuXG5cbiAgICByb3VuZCAxLjAgPT0gMVxuICAgIHJvdW5kIDEuMiA9PSAxXG4gICAgcm91bmQgMS41ID09IDJcbiAgICByb3VuZCAxLjggPT0gMlxuXG4gICAgcm91bmQgLTEuMiA9PSAtMVxuICAgIHJvdW5kIC0xLjUgPT0gLTFcbiAgICByb3VuZCAtMS44ID09IC0yXG4tfVxucm91bmQgOiBGbG9hdCAtPiBJbnRcbnJvdW5kID1cbiAgRWxtLktlcm5lbC5CYXNpY3Mucm91bmRcblxuXG57LXwgRmxvb3IgZnVuY3Rpb24sIHJvdW5kaW5nIGRvd24uXG5cbiAgICBmbG9vciAxLjAgPT0gMVxuICAgIGZsb29yIDEuMiA9PSAxXG4gICAgZmxvb3IgMS41ID09IDFcbiAgICBmbG9vciAxLjggPT0gMVxuXG4gICAgZmxvb3IgLTEuMiA9PSAtMlxuICAgIGZsb29yIC0xLjUgPT0gLTJcbiAgICBmbG9vciAtMS44ID09IC0yXG4tfVxuZmxvb3IgOiBGbG9hdCAtPiBJbnRcbmZsb29yID1cbiAgRWxtLktlcm5lbC5CYXNpY3MuZmxvb3JcblxuXG57LXwgQ2VpbGluZyBmdW5jdGlvbiwgcm91bmRpbmcgdXAuXG5cbiAgICBjZWlsaW5nIDEuMCA9PSAxXG4gICAgY2VpbGluZyAxLjIgPT0gMlxuICAgIGNlaWxpbmcgMS41ID09IDJcbiAgICBjZWlsaW5nIDEuOCA9PSAyXG5cbiAgICBjZWlsaW5nIC0xLjIgPT0gLTFcbiAgICBjZWlsaW5nIC0xLjUgPT0gLTFcbiAgICBjZWlsaW5nIC0xLjggPT0gLTFcbi19XG5jZWlsaW5nIDogRmxvYXQgLT4gSW50XG5jZWlsaW5nID1cbiAgRWxtLktlcm5lbC5CYXNpY3MuY2VpbGluZ1xuXG5cbnstfCBUcnVuY2F0ZSBhIG51bWJlciwgcm91bmRpbmcgdG93YXJkcyB6ZXJvLlxuXG4gICAgdHJ1bmNhdGUgMS4wID09IDFcbiAgICB0cnVuY2F0ZSAxLjIgPT0gMVxuICAgIHRydW5jYXRlIDEuNSA9PSAxXG4gICAgdHJ1bmNhdGUgMS44ID09IDFcblxuICAgIHRydW5jYXRlIC0xLjIgPT0gLTFcbiAgICB0cnVuY2F0ZSAtMS41ID09IC0xXG4gICAgdHJ1bmNhdGUgLTEuOCA9PSAtMVxuLX1cbnRydW5jYXRlIDogRmxvYXQgLT4gSW50XG50cnVuY2F0ZSA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLnRydW5jYXRlXG5cblxuXG4tLSBFUVVBTElUWVxuXG5cbnstfCBDaGVjayBpZiB2YWx1ZXMgYXJlICZsZHF1bzt0aGUgc2FtZSZyZHF1bzsuXG5cbioqTm90ZToqKiBFbG0gdXNlcyBzdHJ1Y3R1cmFsIGVxdWFsaXR5IG9uIHR1cGxlcywgcmVjb3JkcywgYW5kIHVzZXItZGVmaW5lZFxudW5pb24gdHlwZXMuIFRoaXMgbWVhbnMgdGhlIHZhbHVlcyBgKDMsIDQpYCBhbmQgYCgzLCA0KWAgYXJlIGRlZmluaXRlbHkgZXF1YWwuXG5UaGlzIGlzIG5vdCB0cnVlIGluIGxhbmd1YWdlcyBsaWtlIEphdmFTY3JpcHQgdGhhdCB1c2UgcmVmZXJlbmNlIGVxdWFsaXR5IG9uXG5vYmplY3RzLlxuXG4qKk5vdGU6KiogRG8gbm90IHVzZSBgKD09KWAgd2l0aCBmdW5jdGlvbnMsIEpTT04gdmFsdWVzIGZyb20gYGVsbS9qc29uYCwgb3JcbnJlZ3VsYXIgZXhwcmVzc2lvbnMgZnJvbSBgZWxtL3JlZ2V4YC4gSXQgZG9lcyBub3Qgd29yay4gSXQgd2lsbCBjcmFzaCBpZlxucG9zc2libGUuIFdpdGggSlNPTiB2YWx1ZXMsIGRlY29kZSB0byBFbG0gdmFsdWVzIGJlZm9yZSBkb2luZyBhbnkgZXF1YWxpdHlcbmNoZWNrcyFcblxuV2h5IGlzIGl0IGxpa2UgdGhpcz8gRXF1YWxpdHkgaW4gdGhlIEVsbSBzZW5zZSBjYW4gYmUgZGlmZmljdWx0IG9yIGltcG9zc2libGVcbnRvIGNvbXB1dGUuIFByb3ZpbmcgdGhhdCBmdW5jdGlvbnMgYXJlIHRoZSBzYW1lIGlzIFt1bmRlY2lkYWJsZV1bXSwgYW5kIEpTT05cbnZhbHVlcyBjYW4gY29tZSBpbiB0aHJvdWdoIHBvcnRzIGFuZCBoYXZlIGZ1bmN0aW9ucywgY3ljbGVzLCBhbmQgbmV3IEpTIGRhdGFcbnR5cGVzIHRoYXQgaW50ZXJhY3Qgd2VpcmRseSB3aXRoIG91ciBlcXVhbGl0eSBpbXBsZW1lbnRhdGlvbi4gSW4gYSBmdXR1cmVcbnJlbGVhc2UsIHRoZSBjb21waWxlciB3aWxsIGRldGVjdCB3aGVuIGAoPT0pYCBpcyB1c2VkIHdpdGggcHJvYmxlbWF0aWMgdHlwZXNcbmFuZCBwcm92aWRlIGEgaGVscGZ1bCBlcnJvciBtZXNzYWdlIGF0IGNvbXBpbGUgdGltZS4gVGhpcyB3aWxsIHJlcXVpcmUgc29tZVxucHJldHR5IHNlcmlvdXMgaW5mcmFzdHJ1Y3R1cmUgd29yaywgc28gdGhlIHN0b3BnYXAgaXMgdG8gY3Jhc2ggYXMgcXVpY2tseSBhc1xucG9zc2libGUuXG5cblt1bmRlY2lkYWJsZV06IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VuZGVjaWRhYmxlX3Byb2JsZW1cbi19XG5lcSA6IGEgLT4gYSAtPiBCb29sXG5lcSA9XG4gIEVsbS5LZXJuZWwuVXRpbHMuZXF1YWxcblxuXG57LXwgQ2hlY2sgaWYgdmFsdWVzIGFyZSBub3QgJmxkcXVvO3RoZSBzYW1lJnJkcXVvOy5cblxuU28gYChhIC89IGIpYCBpcyB0aGUgc2FtZSBhcyBgKG5vdCAoYSA9PSBiKSlgLlxuLX1cbm5lcSA6IGEgLT4gYSAtPiBCb29sXG5uZXEgPVxuICBFbG0uS2VybmVsLlV0aWxzLm5vdEVxdWFsXG5cblxuXG4tLSBDT01QQVJJU09OU1xuXG5cbnstfC19XG5sdCA6IGNvbXBhcmFibGUgLT4gY29tcGFyYWJsZSAtPiBCb29sXG5sdCA9XG4gIEVsbS5LZXJuZWwuVXRpbHMubHRcblxuXG57LXwtfVxuZ3QgOiBjb21wYXJhYmxlIC0+IGNvbXBhcmFibGUgLT4gQm9vbFxuZ3QgPVxuICBFbG0uS2VybmVsLlV0aWxzLmd0XG5cblxuey18LX1cbmxlIDogY29tcGFyYWJsZSAtPiBjb21wYXJhYmxlIC0+IEJvb2xcbmxlID1cbiAgRWxtLktlcm5lbC5VdGlscy5sZVxuXG5cbnstfC19XG5nZSA6IGNvbXBhcmFibGUgLT4gY29tcGFyYWJsZSAtPiBCb29sXG5nZSA9XG4gIEVsbS5LZXJuZWwuVXRpbHMuZ2VcblxuXG57LXwgRmluZCB0aGUgc21hbGxlciBvZiB0d28gY29tcGFyYWJsZXMuXG5cbiAgICBtaW4gNDIgMTIzNDU2NzggPT0gNDJcbiAgICBtaW4gXCJhYmNcIiBcInh5elwiID09IFwiYWJjXCJcbi19XG5taW4gOiBjb21wYXJhYmxlIC0+IGNvbXBhcmFibGUgLT4gY29tcGFyYWJsZVxubWluIHggeSA9XG4gIGlmIGx0IHggeSB0aGVuIHggZWxzZSB5XG5cblxuey18IEZpbmQgdGhlIGxhcmdlciBvZiB0d28gY29tcGFyYWJsZXMuXG5cbiAgICBtYXggNDIgMTIzNDU2NzggPT0gMTIzNDU2NzhcbiAgICBtYXggXCJhYmNcIiBcInh5elwiID09IFwieHl6XCJcbi19XG5tYXggOiBjb21wYXJhYmxlIC0+IGNvbXBhcmFibGUgLT4gY29tcGFyYWJsZVxubWF4IHggeSA9XG4gIGlmIGd0IHggeSB0aGVuIHggZWxzZSB5XG5cblxuey18IENvbXBhcmUgYW55IHR3byBjb21wYXJhYmxlIHZhbHVlcy4gQ29tcGFyYWJsZSB2YWx1ZXMgaW5jbHVkZSBgU3RyaW5nYCxcbmBDaGFyYCwgYEludGAsIGBGbG9hdGAsIG9yIGEgbGlzdCBvciB0dXBsZSBjb250YWluaW5nIGNvbXBhcmFibGUgdmFsdWVzLiBUaGVzZVxuYXJlIGFsc28gdGhlIG9ubHkgdmFsdWVzIHRoYXQgd29yayBhcyBgRGljdGAga2V5cyBvciBgU2V0YCBtZW1iZXJzLlxuXG4gICAgY29tcGFyZSAzIDQgPT0gTFRcbiAgICBjb21wYXJlIDQgNCA9PSBFUVxuICAgIGNvbXBhcmUgNSA0ID09IEdUXG4tfVxuY29tcGFyZSA6IGNvbXBhcmFibGUgLT4gY29tcGFyYWJsZSAtPiBPcmRlclxuY29tcGFyZSA9XG4gIEVsbS5LZXJuZWwuVXRpbHMuY29tcGFyZVxuXG5cbnstfCBSZXByZXNlbnRzIHRoZSByZWxhdGl2ZSBvcmRlcmluZyBvZiB0d28gdGhpbmdzLlxuVGhlIHJlbGF0aW9ucyBhcmUgbGVzcyB0aGFuLCBlcXVhbCB0bywgYW5kIGdyZWF0ZXIgdGhhbi5cbi19XG50eXBlIE9yZGVyID0gTFQgfCBFUSB8IEdUXG5cblxuXG4tLSBCT09MRUFOU1xuXG5cbnstfCBBIOKAnEJvb2xlYW7igJ0gdmFsdWUuIEl0IGNhbiBlaXRoZXIgYmUgYFRydWVgIG9yIGBGYWxzZWAuXG5cbioqTm90ZToqKiBQcm9ncmFtbWVycyBjb21pbmcgZnJvbSBKYXZhU2NyaXB0LCBKYXZhLCBldGMuIHRlbmQgdG8gcmVhY2ggZm9yXG5ib29sZWFuIHZhbHVlcyB3YXkgdG9vIG9mdGVuIGluIEVsbS4gVXNpbmcgYSBbdW5pb24gdHlwZV1bdXRdIGlzIG9mdGVuIGNsZWFyZXJcbmFuZCBtb3JlIHJlbGlhYmxlLiBZb3UgY2FuIGxlYXJuIG1vcmUgYWJvdXQgdGhpcyBmcm9tIEplcmVteSBbaGVyZV1bamZdIG9yXG5mcm9tIFJpY2hhcmQgW2hlcmVdW3J0XS5cblxuW3V0XTogaHR0cHM6Ly9ndWlkZS5lbG0tbGFuZy5vcmcvdHlwZXMvdW5pb25fdHlwZXMuaHRtbFxuW2pmXTogaHR0cHM6Ly95b3V0dS5iZS82VERLSEd0QXhlZz90PTFtMjVzXG5bcnRdOiBodHRwczovL3lvdXR1LmJlL0ljZ21TUkpIdV84P3Q9MW0xNHNcbi19XG50eXBlIEJvb2wgPSBUcnVlIHwgRmFsc2VcblxuXG57LXwgTmVnYXRlIGEgYm9vbGVhbiB2YWx1ZS5cblxuICAgIG5vdCBUcnVlID09IEZhbHNlXG4gICAgbm90IEZhbHNlID09IFRydWVcbi19XG5ub3QgOiBCb29sIC0+IEJvb2xcbm5vdCA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLm5vdFxuXG5cbnstfCBUaGUgbG9naWNhbCBBTkQgb3BlcmF0b3IuIGBUcnVlYCBpZiBib3RoIGlucHV0cyBhcmUgYFRydWVgLlxuXG4gICAgVHJ1ZSAgJiYgVHJ1ZSAgPT0gVHJ1ZVxuICAgIFRydWUgICYmIEZhbHNlID09IEZhbHNlXG4gICAgRmFsc2UgJiYgVHJ1ZSAgPT0gRmFsc2VcbiAgICBGYWxzZSAmJiBGYWxzZSA9PSBGYWxzZVxuXG4qKk5vdGU6KiogV2hlbiB1c2VkIGluIHRoZSBpbmZpeCBwb3NpdGlvbiwgbGlrZSBgKGxlZnQgJiYgcmlnaHQpYCwgdGhlIG9wZXJhdG9yXG5zaG9ydC1jaXJjdWl0cy4gVGhpcyBtZWFucyBpZiBgbGVmdGAgaXMgYEZhbHNlYCB3ZSBkbyBub3QgYm90aGVyIGV2YWx1YXRpbmcgYHJpZ2h0YFxuYW5kIGp1c3QgcmV0dXJuIGBGYWxzZWAgb3ZlcmFsbC5cbi19XG5hbmQgOiBCb29sIC0+IEJvb2wgLT4gQm9vbFxuYW5kID1cbiAgRWxtLktlcm5lbC5CYXNpY3MuYW5kXG5cblxuey18IFRoZSBsb2dpY2FsIE9SIG9wZXJhdG9yLiBgVHJ1ZWAgaWYgb25lIG9yIGJvdGggaW5wdXRzIGFyZSBgVHJ1ZWAuXG5cbiAgICBUcnVlICB8fCBUcnVlICA9PSBUcnVlXG4gICAgVHJ1ZSAgfHwgRmFsc2UgPT0gVHJ1ZVxuICAgIEZhbHNlIHx8IFRydWUgID09IFRydWVcbiAgICBGYWxzZSB8fCBGYWxzZSA9PSBGYWxzZVxuXG4qKk5vdGU6KiogV2hlbiB1c2VkIGluIHRoZSBpbmZpeCBwb3NpdGlvbiwgbGlrZSBgKGxlZnQgfHwgcmlnaHQpYCwgdGhlIG9wZXJhdG9yXG5zaG9ydC1jaXJjdWl0cy4gVGhpcyBtZWFucyBpZiBgbGVmdGAgaXMgYFRydWVgIHdlIGRvIG5vdCBib3RoZXIgZXZhbHVhdGluZyBgcmlnaHRgXG5hbmQganVzdCByZXR1cm4gYFRydWVgIG92ZXJhbGwuXG4tfVxub3IgOiBCb29sIC0+IEJvb2wgLT4gQm9vbFxub3IgPVxuICBFbG0uS2VybmVsLkJhc2ljcy5vclxuXG5cbnstfCBUaGUgZXhjbHVzaXZlLW9yIG9wZXJhdG9yLiBgVHJ1ZWAgaWYgZXhhY3RseSBvbmUgaW5wdXQgaXMgYFRydWVgLlxuXG4gICAgeG9yIFRydWUgIFRydWUgID09IEZhbHNlXG4gICAgeG9yIFRydWUgIEZhbHNlID09IFRydWVcbiAgICB4b3IgRmFsc2UgVHJ1ZSAgPT0gVHJ1ZVxuICAgIHhvciBGYWxzZSBGYWxzZSA9PSBGYWxzZVxuLX1cbnhvciA6IEJvb2wgLT4gQm9vbCAtPiBCb29sXG54b3IgPVxuICBFbG0uS2VybmVsLkJhc2ljcy54b3JcblxuXG5cbi0tIEFQUEVORFxuXG5cbnstfCBQdXQgdHdvIGFwcGVuZGFibGUgdGhpbmdzIHRvZ2V0aGVyLiBUaGlzIGluY2x1ZGVzIHN0cmluZ3MgYW5kIGxpc3RzLlxuXG4gICAgXCJoZWxsb1wiICsrIFwid29ybGRcIiA9PSBcImhlbGxvd29ybGRcIlxuICAgIFsxLDEsMl0gKysgWzMsNSw4XSA9PSBbMSwxLDIsMyw1LDhdXG4tfVxuYXBwZW5kIDogYXBwZW5kYWJsZSAtPiBhcHBlbmRhYmxlIC0+IGFwcGVuZGFibGVcbmFwcGVuZCA9XG4gIEVsbS5LZXJuZWwuVXRpbHMuYXBwZW5kXG5cblxuXG4tLSBGQU5DSUVSIE1BVEhcblxuXG57LXwgUGVyZm9ybSBbbW9kdWxhciBhcml0aG1ldGljXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Nb2R1bGFyX2FyaXRobWV0aWMpLlxuQSBjb21tb24gdHJpY2sgaXMgdG8gdXNlIChuIG1vZCAyKSB0byBkZXRlY3QgZXZlbiBhbmQgb2RkIG51bWJlcnM6XG5cbiAgICBtb2RCeSAyIDAgPT0gMFxuICAgIG1vZEJ5IDIgMSA9PSAxXG4gICAgbW9kQnkgMiAyID09IDBcbiAgICBtb2RCeSAyIDMgPT0gMVxuXG5PdXIgYG1vZEJ5YCBmdW5jdGlvbiB3b3JrcyBpbiB0aGUgdHlwaWNhbCBtYXRoZW1hdGljYWwgd2F5IHdoZW4geW91IHJ1biBpbnRvXG5uZWdhdGl2ZSBudW1iZXJzOlxuXG4gICAgTGlzdC5tYXAgKG1vZEJ5IDQpIFsgLTUsIC00LCAtMywgLTIsIC0xLCAgMCwgIDEsICAyLCAgMywgIDQsICA1IF1cbiAgICAtLSAgICAgICAgICAgICAgICAgWyAgMywgIDAsICAxLCAgMiwgIDMsICAwLCAgMSwgIDIsICAzLCAgMCwgIDEgXVxuXG5Vc2UgW2ByZW1haW5kZXJCeWBdKCNyZW1haW5kZXJCeSkgZm9yIGEgZGlmZmVyZW50IHRyZWF0bWVudCBvZiBuZWdhdGl2ZSBudW1iZXJzLFxub3IgcmVhZCBEYWFuIExlaWplbuKAmXMgW0RpdmlzaW9uIGFuZCBNb2R1bHVzIGZvciBDb21wdXRlciBTY2llbnRpc3RzXVtkbV0gZm9yIG1vcmVcbmluZm9ybWF0aW9uLlxuXG5bZG1dOiBodHRwczovL3d3dy5taWNyb3NvZnQuY29tL2VuLXVzL3Jlc2VhcmNoL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE2LzAyL2Rpdm1vZG5vdGUtbGV0dGVyLnBkZlxuLX1cbm1vZEJ5IDogSW50IC0+IEludCAtPiBJbnRcbm1vZEJ5ID1cbiAgRWxtLktlcm5lbC5CYXNpY3MubW9kQnlcblxuXG57LXwgR2V0IHRoZSByZW1haW5kZXIgYWZ0ZXIgZGl2aXNpb24uIEhlcmUgYXJlIGJ1bmNoIG9mIGV4YW1wbGVzIG9mIGRpdmlkaW5nIGJ5IGZvdXI6XG5cbiAgICBMaXN0Lm1hcCAocmVtYWluZGVyQnkgNCkgWyAtNSwgLTQsIC0zLCAtMiwgLTEsICAwLCAgMSwgIDIsICAzLCAgNCwgIDUgXVxuICAgIC0tICAgICAgICAgICAgICAgICAgICAgICBbIC0xLCAgMCwgLTMsIC0yLCAtMSwgIDAsICAxLCAgMiwgIDMsICAwLCAgMSBdXG5cblVzZSBbYG1vZEJ5YF0oI21vZEJ5KSBmb3IgYSBkaWZmZXJlbnQgdHJlYXRtZW50IG9mIG5lZ2F0aXZlIG51bWJlcnMsXG5vciByZWFkIERhYW4gTGVpamVu4oCZcyBbRGl2aXNpb24gYW5kIE1vZHVsdXMgZm9yIENvbXB1dGVyIFNjaWVudGlzdHNdW2RtXSBmb3IgbW9yZVxuaW5mb3JtYXRpb24uXG5cbltkbV06IGh0dHBzOi8vd3d3Lm1pY3Jvc29mdC5jb20vZW4tdXMvcmVzZWFyY2gvd3AtY29udGVudC91cGxvYWRzLzIwMTYvMDIvZGl2bW9kbm90ZS1sZXR0ZXIucGRmXG4tfVxucmVtYWluZGVyQnkgOiBJbnQgLT4gSW50IC0+IEludFxucmVtYWluZGVyQnkgPVxuICBFbG0uS2VybmVsLkJhc2ljcy5yZW1haW5kZXJCeVxuXG5cbnstfCBOZWdhdGUgYSBudW1iZXIuXG5cbiAgICBuZWdhdGUgNDIgPT0gLTQyXG4gICAgbmVnYXRlIC00MiA9PSA0MlxuICAgIG5lZ2F0ZSAwID09IDBcbi19XG5uZWdhdGUgOiBudW1iZXIgLT4gbnVtYmVyXG5uZWdhdGUgbiA9XG4gIC1uXG5cblxuey18IEdldCB0aGUgW2Fic29sdXRlIHZhbHVlXVthYnNdIG9mIGEgbnVtYmVyLlxuXG4gICAgYWJzIDE2ICAgPT0gMTZcbiAgICBhYnMgLTQgICA9PSA0XG4gICAgYWJzIC04LjUgPT0gOC41XG4gICAgYWJzIDMuMTQgPT0gMy4xNFxuXG5bYWJzXTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQWJzb2x1dGVfdmFsdWVcbi19XG5hYnMgOiBudW1iZXIgLT4gbnVtYmVyXG5hYnMgbiA9XG4gIGlmIGx0IG4gMCB0aGVuIC1uIGVsc2UgblxuXG5cbnstfCBDbGFtcHMgYSBudW1iZXIgd2l0aGluIGEgZ2l2ZW4gcmFuZ2UuIFdpdGggdGhlIGV4cHJlc3Npb25cbmBjbGFtcCAxMDAgMjAwIHhgIHRoZSByZXN1bHRzIGFyZSBhcyBmb2xsb3dzOlxuXG4gICAgMTAwICAgICBpZiB4IDwgMTAwXG4gICAgIHggICAgICBpZiAxMDAgPD0geCA8IDIwMFxuICAgIDIwMCAgICAgaWYgMjAwIDw9IHhcbi19XG5jbGFtcCA6IG51bWJlciAtPiBudW1iZXIgLT4gbnVtYmVyIC0+IG51bWJlclxuY2xhbXAgbG93IGhpZ2ggbnVtYmVyID1cbiAgaWYgbHQgbnVtYmVyIGxvdyB0aGVuXG4gICAgbG93XG4gIGVsc2UgaWYgZ3QgbnVtYmVyIGhpZ2ggdGhlblxuICAgIGhpZ2hcbiAgZWxzZVxuICAgIG51bWJlclxuXG5cbnstfCBUYWtlIHRoZSBzcXVhcmUgcm9vdCBvZiBhIG51bWJlci5cblxuICAgIHNxcnQgIDQgPT0gMlxuICAgIHNxcnQgIDkgPT0gM1xuICAgIHNxcnQgMTYgPT0gNFxuICAgIHNxcnQgMjUgPT0gNVxuLX1cbnNxcnQgOiBGbG9hdCAtPiBGbG9hdFxuc3FydCA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLnNxcnRcblxuXG57LXwgQ2FsY3VsYXRlIHRoZSBsb2dhcml0aG0gb2YgYSBudW1iZXIgd2l0aCBhIGdpdmVuIGJhc2UuXG5cbiAgICBsb2dCYXNlIDEwIDEwMCA9PSAyXG4gICAgbG9nQmFzZSAyIDI1NiA9PSA4XG4tfVxubG9nQmFzZSA6IEZsb2F0IC0+IEZsb2F0IC0+IEZsb2F0XG5sb2dCYXNlIGJhc2UgbnVtYmVyID1cbiAgZmRpdlxuICAgIChFbG0uS2VybmVsLkJhc2ljcy5sb2cgbnVtYmVyKVxuICAgIChFbG0uS2VybmVsLkJhc2ljcy5sb2cgYmFzZSlcblxuXG57LXwgQW4gYXBwcm94aW1hdGlvbiBvZiBlLlxuLX1cbmUgOiBGbG9hdFxuZSA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLmVcblxuXG5cbi0tIEFOR0xFU1xuXG5cbnstfCBDb252ZXJ0IHJhZGlhbnMgdG8gc3RhbmRhcmQgRWxtIGFuZ2xlcyAocmFkaWFucykuXG5cbiAgICByYWRpYW5zIHBpID09IDMuMTQxNTkyNjUzNTg5NzkzXG4tfVxucmFkaWFucyA6IEZsb2F0IC0+IEZsb2F0XG5yYWRpYW5zIGFuZ2xlSW5SYWRpYW5zID1cbiAgYW5nbGVJblJhZGlhbnNcblxuXG57LXwgQ29udmVydCBkZWdyZWVzIHRvIHN0YW5kYXJkIEVsbSBhbmdsZXMgKHJhZGlhbnMpLlxuXG4gICAgZGVncmVlcyAxODAgPT0gMy4xNDE1OTI2NTM1ODk3OTNcbi19XG5kZWdyZWVzIDogRmxvYXQgLT4gRmxvYXRcbmRlZ3JlZXMgYW5nbGVJbkRlZ3JlZXMgPVxuICBmZGl2IChtdWwgYW5nbGVJbkRlZ3JlZXMgcGkpIDE4MFxuXG5cbnstfCBDb252ZXJ0IHR1cm5zIHRvIHN0YW5kYXJkIEVsbSBhbmdsZXMgKHJhZGlhbnMpLiBPbmUgdHVybiBpcyBlcXVhbCB0byAzNjDCsC5cblxuICAgIHR1cm5zICgxLzIpID09IDMuMTQxNTkyNjUzNTg5NzkzXG4tfVxudHVybnMgOiBGbG9hdCAtPiBGbG9hdFxudHVybnMgYW5nbGVJblR1cm5zID1cbiAgbXVsIChtdWwgMiBwaSkgYW5nbGVJblR1cm5zXG5cblxuXG4tLSBUUklHT05PTUVUUllcblxuXG57LXwgQW4gYXBwcm94aW1hdGlvbiBvZiBwaS5cbi19XG5waSA6IEZsb2F0XG5waSA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLnBpXG5cblxuey18IEZpZ3VyZSBvdXQgdGhlIGNvc2luZSBnaXZlbiBhbiBhbmdsZSBpbiByYWRpYW5zLlxuXG4gICAgY29zIChkZWdyZWVzIDYwKSAgICAgPT0gMC41MDAwMDAwMDAwMDAwMDAxXG4gICAgY29zICh0dXJucyAoMS82KSkgICAgPT0gMC41MDAwMDAwMDAwMDAwMDAxXG4gICAgY29zIChyYWRpYW5zIChwaS8zKSkgPT0gMC41MDAwMDAwMDAwMDAwMDAxXG4gICAgY29zIChwaS8zKSAgICAgICAgICAgPT0gMC41MDAwMDAwMDAwMDAwMDAxXG5cbi19XG5jb3MgOiBGbG9hdCAtPiBGbG9hdFxuY29zID1cbiAgRWxtLktlcm5lbC5CYXNpY3MuY29zXG5cblxuey18IEZpZ3VyZSBvdXQgdGhlIHNpbmUgZ2l2ZW4gYW4gYW5nbGUgaW4gcmFkaWFucy5cblxuICAgIHNpbiAoZGVncmVlcyAzMCkgICAgID09IDAuNDk5OTk5OTk5OTk5OTk5OTRcbiAgICBzaW4gKHR1cm5zICgxLzEyKSkgICA9PSAwLjQ5OTk5OTk5OTk5OTk5OTk0XG4gICAgc2luIChyYWRpYW5zIChwaS82KSkgPT0gMC40OTk5OTk5OTk5OTk5OTk5NFxuICAgIHNpbiAocGkvNikgICAgICAgICAgID09IDAuNDk5OTk5OTk5OTk5OTk5OTRcblxuLX1cbnNpbiA6IEZsb2F0IC0+IEZsb2F0XG5zaW4gPVxuICBFbG0uS2VybmVsLkJhc2ljcy5zaW5cblxuXG57LXwgRmlndXJlIG91dCB0aGUgdGFuZ2VudCBnaXZlbiBhbiBhbmdsZSBpbiByYWRpYW5zLlxuXG4gICAgdGFuIChkZWdyZWVzIDQ1KSAgICAgPT0gMC45OTk5OTk5OTk5OTk5OTk5XG4gICAgdGFuICh0dXJucyAoMS84KSkgICAgPT0gMC45OTk5OTk5OTk5OTk5OTk5XG4gICAgdGFuIChyYWRpYW5zIChwaS80KSkgPT0gMC45OTk5OTk5OTk5OTk5OTk5XG4gICAgdGFuIChwaS80KSAgICAgICAgICAgPT0gMC45OTk5OTk5OTk5OTk5OTk5XG4tfVxudGFuIDogRmxvYXQgLT4gRmxvYXRcbnRhbiA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLnRhblxuXG5cbnstfCBGaWd1cmUgb3V0IHRoZSBhcmNjb3NpbmUgZm9yIGBhZGphY2VudCAvIGh5cG90ZW51c2VgIGluIHJhZGlhbnM6XG5cbiAgICBhY29zICgxLzIpID09IDEuMDQ3MTk3NTUxMTk2NTk3OSAtLSA2MMKwIG9yIHBpLzMgcmFkaWFuc1xuXG4tfVxuYWNvcyA6IEZsb2F0IC0+IEZsb2F0XG5hY29zID1cbiAgRWxtLktlcm5lbC5CYXNpY3MuYWNvc1xuXG5cbnstfCBGaWd1cmUgb3V0IHRoZSBhcmNzaW5lIGZvciBgb3Bwb3NpdGUgLyBoeXBvdGVudXNlYCBpbiByYWRpYW5zOlxuXG4gICAgYXNpbiAoMS8yKSA9PSAwLjUyMzU5ODc3NTU5ODI5ODkgLS0gMzDCsCBvciBwaS82IHJhZGlhbnNcblxuLX1cbmFzaW4gOiBGbG9hdCAtPiBGbG9hdFxuYXNpbiA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLmFzaW5cblxuXG57LXwgVGhpcyBoZWxwcyB5b3UgZmluZCB0aGUgYW5nbGUgKGluIHJhZGlhbnMpIHRvIGFuIGAoeCx5KWAgY29vcmRpbmF0ZSwgYnV0XG5pbiBhIHdheSB0aGF0IGlzIHJhcmVseSB1c2VmdWwgaW4gcHJvZ3JhbW1pbmcuICoqWW91IHByb2JhYmx5IHdhbnRcbltgYXRhbjJgXSgjYXRhbjIpIGluc3RlYWQhKipcblxuVGhpcyB2ZXJzaW9uIHRha2VzIGB5L3hgIGFzIGl0cyBhcmd1bWVudCwgc28gdGhlcmUgaXMgbm8gd2F5IHRvIGtub3cgd2hldGhlclxudGhlIG5lZ2F0aXZlIHNpZ25zIGNvbWVzIGZyb20gdGhlIGB5YCBvciBgeGAgdmFsdWUuIFNvIGFzIHdlIGdvIGNvdW50ZXItY2xvY2t3aXNlXG5hcm91bmQgdGhlIG9yaWdpbiBmcm9tIHBvaW50IGAoMSwxKWAgdG8gYCgxLC0xKWAgdG8gYCgtMSwtMSlgIHRvIGAoLTEsMSlgIHdlIGRvXG5ub3QgZ2V0IGFuZ2xlcyB0aGF0IGdvIGluIHRoZSBmdWxsIGNpcmNsZTpcblxuICAgIGF0YW4gKCAgMSAvICAxICkgPT0gIDAuNzg1Mzk4MTYzMzk3NDQ4MyAtLSAgNDXCsCBvciAgIHBpLzQgcmFkaWFuc1xuICAgIGF0YW4gKCAgMSAvIC0xICkgPT0gLTAuNzg1Mzk4MTYzMzk3NDQ4MyAtLSAzMTXCsCBvciA3KnBpLzQgcmFkaWFuc1xuICAgIGF0YW4gKCAtMSAvIC0xICkgPT0gIDAuNzg1Mzk4MTYzMzk3NDQ4MyAtLSAgNDXCsCBvciAgIHBpLzQgcmFkaWFuc1xuICAgIGF0YW4gKCAtMSAvICAxICkgPT0gLTAuNzg1Mzk4MTYzMzk3NDQ4MyAtLSAzMTXCsCBvciA3KnBpLzQgcmFkaWFuc1xuXG5Ob3RpY2UgdGhhdCBldmVyeXRoaW5nIGlzIGJldHdlZW4gYHBpLzJgIGFuZCBgLXBpLzJgLiBUaGF0IGlzIHByZXR0eSB1c2VsZXNzXG5mb3IgZmlndXJpbmcgb3V0IGFuZ2xlcyBpbiBhbnkgc29ydCBvZiB2aXN1YWxpemF0aW9uLCBzbyBhZ2FpbiwgY2hlY2sgb3V0XG5bYGF0YW4yYF0oI2F0YW4yKSBpbnN0ZWFkIVxuLX1cbmF0YW4gOiBGbG9hdCAtPiBGbG9hdFxuYXRhbiA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLmF0YW5cblxuXG57LXwgVGhpcyBoZWxwcyB5b3UgZmluZCB0aGUgYW5nbGUgKGluIHJhZGlhbnMpIHRvIGFuIGAoeCx5KWAgY29vcmRpbmF0ZS5cblNvIHJhdGhlciB0aGFuIHNheWluZyBgYXRhbiAoeS94KWAgeW91IHNheSBgYXRhbjIgeSB4YCBhbmQgeW91IGNhbiBnZXQgYSBmdWxsXG5yYW5nZSBvZiBhbmdsZXM6XG5cbiAgICBhdGFuMiAgMSAgMSA9PSAgMC43ODUzOTgxNjMzOTc0NDgzIC0tICA0NcKwIG9yICAgcGkvNCByYWRpYW5zXG4gICAgYXRhbjIgIDEgLTEgPT0gIDIuMzU2MTk0NDkwMTkyMzQ1ICAtLSAxMzXCsCBvciAzKnBpLzQgcmFkaWFuc1xuICAgIGF0YW4yIC0xIC0xID09IC0yLjM1NjE5NDQ5MDE5MjM0NSAgLS0gMjI1wrAgb3IgNSpwaS80IHJhZGlhbnNcbiAgICBhdGFuMiAtMSAgMSA9PSAtMC43ODUzOTgxNjMzOTc0NDgzIC0tIDMxNcKwIG9yIDcqcGkvNCByYWRpYW5zXG5cbi19XG5hdGFuMiA6IEZsb2F0IC0+IEZsb2F0IC0+IEZsb2F0XG5hdGFuMiA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLmF0YW4yXG5cblxuXG4tLSBQT0xBUiBDT09SRElOQVRFU1xuXG5cbnstfCBDb252ZXJ0IHBvbGFyIGNvb3JkaW5hdGVzIChyLCZ0aGV0YTspIHRvIENhcnRlc2lhbiBjb29yZGluYXRlcyAoeCx5KS5cblxuICAgIGZyb21Qb2xhciAoc3FydCAyLCBkZWdyZWVzIDQ1KSA9PSAoMSwgMSlcbi19XG5mcm9tUG9sYXIgOiAoRmxvYXQsRmxvYXQpIC0+IChGbG9hdCxGbG9hdClcbmZyb21Qb2xhciAocmFkaXVzLCB0aGV0YSkgPVxuICAoIG11bCByYWRpdXMgKGNvcyB0aGV0YSlcbiAgLCBtdWwgcmFkaXVzIChzaW4gdGhldGEpXG4gIClcblxuXG57LXwgQ29udmVydCBDYXJ0ZXNpYW4gY29vcmRpbmF0ZXMgKHgseSkgdG8gcG9sYXIgY29vcmRpbmF0ZXMgKHIsJnRoZXRhOykuXG5cbiAgICB0b1BvbGFyICgzLCA0KSA9PSAoIDUsIDAuOTI3Mjk1MjE4MDAxNjEyMilcbiAgICB0b1BvbGFyICg1LDEyKSA9PSAoMTMsIDEuMTc2MDA1MjA3MDk1MTM1Milcbi19XG50b1BvbGFyIDogKEZsb2F0LEZsb2F0KSAtPiAoRmxvYXQsRmxvYXQpXG50b1BvbGFyICggeCwgeSApID1cbiAgKCBzcXJ0IChhZGQgKG11bCB4IHgpIChtdWwgeSB5KSlcbiAgLCBhdGFuMiB5IHhcbiAgKVxuXG5cblxuLS0gQ1JBWlkgRkxPQVRTXG5cblxuey18IERldGVybWluZSB3aGV0aGVyIGEgZmxvYXQgaXMgYW4gdW5kZWZpbmVkIG9yIHVucmVwcmVzZW50YWJsZSBudW1iZXIuXG5OYU4gc3RhbmRzIGZvciAqbm90IGEgbnVtYmVyKiBhbmQgaXQgaXMgW2Egc3RhbmRhcmRpemVkIHBhcnQgb2YgZmxvYXRpbmcgcG9pbnRcbm51bWJlcnNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL05hTikuXG5cbiAgICBpc05hTiAoMC8wKSAgICAgPT0gVHJ1ZVxuICAgIGlzTmFOIChzcXJ0IC0xKSA9PSBUcnVlXG4gICAgaXNOYU4gKDEvMCkgICAgID09IEZhbHNlICAtLSBpbmZpbml0eSBpcyBhIG51bWJlclxuICAgIGlzTmFOIDEgICAgICAgICA9PSBGYWxzZVxuLX1cbmlzTmFOIDogRmxvYXQgLT4gQm9vbFxuaXNOYU4gPVxuICBFbG0uS2VybmVsLkJhc2ljcy5pc05hTlxuXG5cbnstfCBEZXRlcm1pbmUgd2hldGhlciBhIGZsb2F0IGlzIHBvc2l0aXZlIG9yIG5lZ2F0aXZlIGluZmluaXR5LlxuXG4gICAgaXNJbmZpbml0ZSAoMC8wKSAgICAgPT0gRmFsc2VcbiAgICBpc0luZmluaXRlIChzcXJ0IC0xKSA9PSBGYWxzZVxuICAgIGlzSW5maW5pdGUgKDEvMCkgICAgID09IFRydWVcbiAgICBpc0luZmluaXRlIDEgICAgICAgICA9PSBGYWxzZVxuXG5Ob3RpY2UgdGhhdCBOYU4gaXMgbm90IGluZmluaXRlISBGb3IgZmxvYXQgYG5gIHRvIGJlIGZpbml0ZSBpbXBsaWVzIHRoYXRcbmBub3QgKGlzSW5maW5pdGUgbiB8fCBpc05hTiBuKWAgZXZhbHVhdGVzIHRvIGBUcnVlYC5cbi19XG5pc0luZmluaXRlIDogRmxvYXQgLT4gQm9vbFxuaXNJbmZpbml0ZSA9XG4gIEVsbS5LZXJuZWwuQmFzaWNzLmlzSW5maW5pdGVcblxuXG5cbi0tIEZVTkNUSU9OIEhFTFBFUlNcblxuXG57LXwgRnVuY3Rpb24gY29tcG9zaXRpb24sIHBhc3NpbmcgcmVzdWx0cyBhbG9uZyBpbiB0aGUgc3VnZ2VzdGVkIGRpcmVjdGlvbi4gRm9yXG5leGFtcGxlLCB0aGUgZm9sbG93aW5nIGNvZGUgY2hlY2tzIGlmIHRoZSBzcXVhcmUgcm9vdCBvZiBhIG51bWJlciBpcyBvZGQ6XG5cbiAgICBub3QgPDwgaXNFdmVuIDw8IHNxcnRcblxuWW91IGNhbiB0aGluayBvZiB0aGlzIG9wZXJhdG9yIGFzIGVxdWl2YWxlbnQgdG8gdGhlIGZvbGxvd2luZzpcblxuICAgIChnIDw8IGYpICA9PSAgKFxceCAtPiBnIChmIHgpKVxuXG5TbyBvdXIgZXhhbXBsZSBleHBhbmRzIG91dCB0byBzb21ldGhpbmcgbGlrZSB0aGlzOlxuXG4gICAgXFxuIC0+IG5vdCAoaXNFdmVuIChzcXJ0IG4pKVxuLX1cbmNvbXBvc2VMIDogKGIgLT4gYykgLT4gKGEgLT4gYikgLT4gKGEgLT4gYylcbmNvbXBvc2VMIGcgZiB4ID1cbiAgZyAoZiB4KVxuXG5cbnstfCBGdW5jdGlvbiBjb21wb3NpdGlvbiwgcGFzc2luZyByZXN1bHRzIGFsb25nIGluIHRoZSBzdWdnZXN0ZWQgZGlyZWN0aW9uLiBGb3JcbmV4YW1wbGUsIHRoZSBmb2xsb3dpbmcgY29kZSBjaGVja3MgaWYgdGhlIHNxdWFyZSByb290IG9mIGEgbnVtYmVyIGlzIG9kZDpcblxuICAgIHNxcnQgPj4gaXNFdmVuID4+IG5vdFxuXG4tfVxuY29tcG9zZVIgOiAoYSAtPiBiKSAtPiAoYiAtPiBjKSAtPiAoYSAtPiBjKVxuY29tcG9zZVIgZiBnIHggPVxuICBnIChmIHgpXG5cblxuey18IFNheWluZyBgeCB8PiBmYCBpcyBleGFjdGx5IHRoZSBzYW1lIGFzIGBmIHhgLlxuXG5JdCBpcyBjYWxsZWQgdGhlIOKAnHBpcGXigJ0gb3BlcmF0b3IgYmVjYXVzZSBpdCBsZXRzIHlvdSB3cml0ZSDigJxwaXBlbGluZWTigJ0gY29kZS5cbkZvciBleGFtcGxlLCBzYXkgd2UgaGF2ZSBhIGBzYW5pdGl6ZWAgZnVuY3Rpb24gZm9yIHR1cm5pbmcgdXNlciBpbnB1dCBpbnRvXG5pbnRlZ2VyczpcblxuICAgIC0tIEJFRk9SRVxuICAgIHNhbml0aXplIDogU3RyaW5nIC0+IE1heWJlIEludFxuICAgIHNhbml0aXplIGlucHV0ID1cbiAgICAgIFN0cmluZy50b0ludCAoU3RyaW5nLnRyaW0gaW5wdXQpXG5cbldlIGNhbiByZXdyaXRlIGl0IGxpa2UgdGhpczpcblxuICAgIC0tIEFGVEVSXG4gICAgc2FuaXRpemUgOiBTdHJpbmcgLT4gTWF5YmUgSW50XG4gICAgc2FuaXRpemUgaW5wdXQgPVxuICAgICAgaW5wdXRcbiAgICAgICAgfD4gU3RyaW5nLnRyaW1cbiAgICAgICAgfD4gU3RyaW5nLnRvSW50XG5cblRvdGFsbHkgZXF1aXZhbGVudCEgSSByZWNvbW1lbmQgdHJ5aW5nIHRvIHJld3JpdGUgY29kZSB0aGF0IHVzZXMgYHggfD4gZmBcbmludG8gY29kZSBsaWtlIGBmIHhgIHVudGlsIHRoZXJlIGFyZSBubyBwaXBlcyBsZWZ0LiBUaGF0IGNhbiBoZWxwIHlvdSBidWlsZFxueW91ciBpbnR1aXRpb24uXG5cbioqTm90ZToqKiBUaGlzIGNhbiBiZSBvdmVydXNlZCEgSSB0aGluayBmb2xrcyBmaW5kIGl0IHF1aXRlIG5lYXQsIGJ1dCB3aGVuIHlvdVxuaGF2ZSB0aHJlZSBvciBmb3VyIHN0ZXBzLCB0aGUgY29kZSBvZnRlbiBnZXRzIGNsZWFyZXIgaWYgeW91IGJyZWFrIG91dCBhXG50b3AtbGV2ZWwgaGVscGVyIGZ1bmN0aW9uLiBOb3cgdGhlIHRyYW5zZm9ybWF0aW9uIGhhcyBhIG5hbWUuIFRoZSBhcmd1bWVudHMgYXJlXG5uYW1lZC4gSXQgaGFzIGEgdHlwZSBhbm5vdGF0aW9uLiBJdCBpcyBtdWNoIG1vcmUgc2VsZi1kb2N1bWVudGluZyB0aGF0IHdheSFcblRlc3RpbmcgdGhlIGxvZ2ljIGdldHMgZWFzaWVyIHRvby4gTmljZSBzaWRlIGJlbmVmaXQhXG4tfVxuYXBSIDogYSAtPiAoYSAtPiBiKSAtPiBiXG5hcFIgeCBmID1cbiAgZiB4XG5cblxuey18IFNheWluZyBgZiA8fCB4YCBpcyBleGFjdGx5IHRoZSBzYW1lIGFzIGBmIHhgLlxuXG5JdCBjYW4gaGVscCB5b3UgYXZvaWQgcGFyZW50aGVzZXMsIHdoaWNoIGNhbiBiZSBuaWNlIHNvbWV0aW1lcy4gTWF5YmUgeW91IHdhbnRcbnRvIGFwcGx5IGEgZnVuY3Rpb24gdG8gYSBgY2FzZWAgZXhwcmVzc2lvbj8gVGhhdCBzb3J0IG9mIHRoaW5nLlxuLX1cbmFwTCA6IChhIC0+IGIpIC0+IGEgLT4gYlxuYXBMIGYgeCA9XG4gIGYgeFxuXG5cbnstfCBHaXZlbiBhIHZhbHVlLCByZXR1cm5zIGV4YWN0bHkgdGhlIHNhbWUgdmFsdWUuIFRoaXMgaXMgY2FsbGVkXG5bdGhlIGlkZW50aXR5IGZ1bmN0aW9uXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JZGVudGl0eV9mdW5jdGlvbikuXG4tfVxuaWRlbnRpdHkgOiBhIC0+IGFcbmlkZW50aXR5IHggPVxuICB4XG5cblxuey18IENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgKmFsd2F5cyogcmV0dXJucyB0aGUgc2FtZSB2YWx1ZS4gVXNlZnVsIHdpdGhcbmZ1bmN0aW9ucyBsaWtlIGBtYXBgOlxuXG4gICAgTGlzdC5tYXAgKGFsd2F5cyAwKSBbMSwyLDMsNCw1XSA9PSBbMCwwLDAsMCwwXVxuXG4gICAgLS0gTGlzdC5tYXAgKFxcXyAtPiAwKSBbMSwyLDMsNCw1XSA9PSBbMCwwLDAsMCwwXVxuICAgIC0tIGFsd2F5cyA9IChcXHggXyAtPiB4KVxuLX1cbmFsd2F5cyA6IGEgLT4gYiAtPiBhXG5hbHdheXMgYSBfID1cbiAgYVxuXG5cbnstfCBBIHZhbHVlIHRoYXQgY2FuIG5ldmVyIGhhcHBlbiEgRm9yIGNvbnRleHQ6XG5cbiAgLSBUaGUgYm9vbGVhbiB0eXBlIGBCb29sYCBoYXMgdHdvIHZhbHVlczogYFRydWVgIGFuZCBgRmFsc2VgXG4gIC0gVGhlIHVuaXQgdHlwZSBgKClgIGhhcyBvbmUgdmFsdWU6IGAoKWBcbiAgLSBUaGUgbmV2ZXIgdHlwZSBgTmV2ZXJgIGhhcyBubyB2YWx1ZXMhXG5cbllvdSBtYXkgc2VlIGl0IGluIHRoZSB3aWxkIGluIGBIdG1sIE5ldmVyYCB3aGljaCBtZWFucyB0aGlzIEhUTUwgd2lsbCBuZXZlclxucHJvZHVjZSBhbnkgbWVzc2FnZXMuIFlvdSB3b3VsZCBuZWVkIHRvIHdyaXRlIGFuIGV2ZW50IGhhbmRsZXIgbGlrZVxuYG9uQ2xpY2sgPz8/IDogQXR0cmlidXRlIE5ldmVyYCBidXQgaG93IGNhbiB3ZSBmaWxsIGluIHRoZSBxdWVzdGlvbiBtYXJrcz8hXG5TbyB0aGVyZSBjYW5ub3QgYmUgYW55IGV2ZW50IGhhbmRsZXJzIG9uIHRoYXQgSFRNTC5cblxuWW91IG1heSBhbHNvIHNlZSB0aGlzIHVzZWQgd2l0aCB0YXNrcyB0aGF0IG5ldmVyIGZhaWwsIGxpa2UgYFRhc2sgTmV2ZXIgKClgLlxuXG5UaGUgYE5ldmVyYCB0eXBlIGlzIHVzZWZ1bCBmb3IgcmVzdHJpY3RpbmcgKmFyZ3VtZW50cyogdG8gYSBmdW5jdGlvbi4gTWF5YmUgbXlcbkFQSSBjYW4gb25seSBhY2NlcHQgSFRNTCB3aXRob3V0IGV2ZW50IGhhbmRsZXJzLCBzbyBJIHJlcXVpcmUgYEh0bWwgTmV2ZXJgIGFuZFxudXNlcnMgY2FuIGdpdmUgYEh0bWwgbXNnYCBhbmQgZXZlcnl0aGluZyB3aWxsIGdvIGZpbmUuIEdlbmVyYWxseSBzcGVha2luZywgeW91XG5kbyBub3Qgd2FudCBgTmV2ZXJgIGluIHlvdXIgcmV0dXJuIHR5cGVzIHRob3VnaC5cbi19XG50eXBlIE5ldmVyID0gSnVzdE9uZU1vcmUgTmV2ZXJcblxuXG57LXwgQSBmdW5jdGlvbiB0aGF0IGNhbiBuZXZlciBiZSBjYWxsZWQuIFNlZW1zIGV4dHJlbWVseSBwb2ludGxlc3MsIGJ1dCBpdFxuKmNhbiogY29tZSBpbiBoYW5keS4gSW1hZ2luZSB5b3UgaGF2ZSBzb21lIEhUTUwgdGhhdCBzaG91bGQgbmV2ZXIgcHJvZHVjZSBhbnlcbm1lc3NhZ2VzLiBBbmQgc2F5IHlvdSB3YW50IHRvIHVzZSBpdCBpbiBzb21lIG90aGVyIEhUTUwgdGhhdCAqZG9lcyogcHJvZHVjZVxubWVzc2FnZXMuIFlvdSBjb3VsZCBzYXk6XG5cbiAgICBpbXBvcnQgSHRtbCBleHBvc2luZyAoLi4pXG5cbiAgICBlbWJlZEh0bWwgOiBIdG1sIE5ldmVyIC0+IEh0bWwgbXNnXG4gICAgZW1iZWRIdG1sIHN0YXRpY1N0dWZmID1cbiAgICAgIGRpdiBbXVxuICAgICAgICBbIHRleHQgXCJoZWxsb1wiXG4gICAgICAgICwgSHRtbC5tYXAgbmV2ZXIgc3RhdGljU3R1ZmZcbiAgICAgICAgXVxuXG5TbyB0aGUgYG5ldmVyYCBmdW5jdGlvbiBpcyBiYXNpY2FsbHkgdGVsbGluZyB0aGUgdHlwZSBzeXN0ZW0sIG1ha2Ugc3VyZSBubyBvbmVcbmV2ZXIgY2FsbHMgbWUhXG4tfVxubmV2ZXIgOiBOZXZlciAtPiBhXG5uZXZlciAoSnVzdE9uZU1vcmUgbnZyKSA9XG4gIG5ldmVyIG52clxuJ30pKSwKCQkJX1V0aWxzX1R1cGxlMigKCQkJJ0NoYXIuZWxtJywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRCbG9iTm9kZSgKCQkJCXt1dGY4OiAnbW9kdWxlIENoYXIgZXhwb3NpbmdcbiAgKCBDaGFyXG4gICwgaXNVcHBlciwgaXNMb3dlciwgaXNBbHBoYSwgaXNBbHBoYU51bVxuICAsIGlzRGlnaXQsIGlzT2N0RGlnaXQsIGlzSGV4RGlnaXRcbiAgLCB0b1VwcGVyLCB0b0xvd2VyLCB0b0xvY2FsZVVwcGVyLCB0b0xvY2FsZUxvd2VyXG4gICwgdG9Db2RlLCBmcm9tQ29kZVxuICApXG5cbnstfCBGdW5jdGlvbnMgZm9yIHdvcmtpbmcgd2l0aCBjaGFyYWN0ZXJzLiBDaGFyYWN0ZXIgbGl0ZXJhbHMgYXJlIGVuY2xvc2VkIGluXG5gXCdhXCdgIHBhaXIgb2Ygc2luZ2xlIHF1b3Rlcy5cblxuIyBDaGFyYWN0ZXJzXG5AZG9jcyBDaGFyXG5cbiMgQVNDSUkgTGV0dGVyc1xuQGRvY3MgaXNVcHBlciwgaXNMb3dlciwgaXNBbHBoYSwgaXNBbHBoYU51bVxuXG4jIERpZ2l0c1xuQGRvY3MgaXNEaWdpdCwgaXNPY3REaWdpdCwgaXNIZXhEaWdpdFxuXG4jIENvbnZlcnNpb25cbkBkb2NzIHRvVXBwZXIsIHRvTG93ZXIsIHRvTG9jYWxlVXBwZXIsIHRvTG9jYWxlTG93ZXJcblxuIyBVbmljb2RlIENvZGUgUG9pbnRzXG5AZG9jcyB0b0NvZGUsIGZyb21Db2RlXG4tfVxuXG5pbXBvcnQgQmFzaWNzIGV4cG9zaW5nIChCb29sLCBJbnQsICgmJiksICh8fCksICg+PSksICg8PSkpXG5pbXBvcnQgRWxtLktlcm5lbC5DaGFyXG5cblxuXG4tLSBDSEFSXG5cblxuey18IEEgYENoYXJgIGlzIGEgc2luZ2xlIFt1bmljb2RlXVt1XSBjaGFyYWN0ZXI6XG5cbiAgICBcJ2FcJ1xuICAgIFwnMFwnXG4gICAgXCdaXCdcbiAgICBcJz9cJ1xuICAgIFwnXCJcJ1xuICAgIFwnzqNcJ1xuICAgIFwn8J+ZiFwnXG5cbiAgICBcJ1xcdFwnXG4gICAgXCdcXFwiXCdcbiAgICBcJ1xcXCdcJ1xuICAgIFwnXFx1ezFGNjQ4fVwnIC0tIFwn8J+ZiFwnXG5cbioqTm90ZSAxOioqIFlvdSBfY2Fubm90XyB1c2Ugc2luZ2xlIHF1b3RlcyBhcm91bmQgbXVsdGlwbGUgY2hhcmFjdGVycyBsaWtlIGluXG5KYXZhU2NyaXB0LiBUaGlzIGlzIGhvdyB3ZSBkaXN0aW5ndWlzaCBbYFN0cmluZ2BdKFN0cmluZyNTdHJpbmcpIGFuZCBgQ2hhcmBcbnZhbHVlcyBpbiBzeW50YXguXG5cbioqTm90ZSAyOioqIFlvdSBjYW4gdXNlIHRoZSB1bmljb2RlIGVzY2FwZXMgZnJvbSBgXFx1ezAwMDB9YCB0byBgXFx1ezEwRkZGRn1gIHRvXG5yZXByZXNlbnQgY2hhcmFjdGVycyBieSB0aGVpciBjb2RlIHBvaW50LiBZb3UgY2FuIGFsc28gaW5jbHVkZSB0aGUgdW5pY29kZVxuY2hhcmFjdGVycyBkaXJlY3RseS4gVXNpbmcgdGhlIGVzY2FwZXMgY2FuIGJlIGJldHRlciBpZiB5b3UgbmVlZCBvbmUgb2YgdGhlXG5tYW55IHdoaXRlc3BhY2UgY2hhcmFjdGVycyB3aXRoIGRpZmZlcmVudCB3aWR0aHMuXG5cblt1XTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVW5pY29kZVxuLX1cbnR5cGUgQ2hhciA9IENoYXIgLS0gTk9URTogVGhlIGNvbXBpbGVyIHByb3ZpZGVzIHRoZSByZWFsIGltcGxlbWVudGF0aW9uLlxuXG5cblxuLS0gQ0xBU1NJRklDQVRJT05cblxuXG57LXwgRGV0ZWN0IHVwcGVyIGNhc2UgQVNDSUkgY2hhcmFjdGVycy5cblxuICAgIGlzVXBwZXIgXCdBXCcgPT0gVHJ1ZVxuICAgIGlzVXBwZXIgXCdCXCcgPT0gVHJ1ZVxuICAgIC4uLlxuICAgIGlzVXBwZXIgXCdaXCcgPT0gVHJ1ZVxuXG4gICAgaXNVcHBlciBcJzBcJyA9PSBGYWxzZVxuICAgIGlzVXBwZXIgXCdhXCcgPT0gRmFsc2VcbiAgICBpc1VwcGVyIFwnLVwnID09IEZhbHNlXG4gICAgaXNVcHBlciBcJ86jXCcgPT0gRmFsc2Vcbi19XG5pc1VwcGVyIDogQ2hhciAtPiBCb29sXG5pc1VwcGVyIGNoYXIgPVxuICBsZXRcbiAgICBjb2RlID1cbiAgICAgIHRvQ29kZSBjaGFyXG4gIGluXG4gICAgY29kZSA8PSAweDVBICYmIDB4NDEgPD0gY29kZVxuXG5cbnstfCBEZXRlY3QgbG93ZXIgY2FzZSBBU0NJSSBjaGFyYWN0ZXJzLlxuXG4gICAgaXNMb3dlciBcJ2FcJyA9PSBUcnVlXG4gICAgaXNMb3dlciBcJ2JcJyA9PSBUcnVlXG4gICAgLi4uXG4gICAgaXNMb3dlciBcJ3pcJyA9PSBUcnVlXG5cbiAgICBpc0xvd2VyIFwnMFwnID09IEZhbHNlXG4gICAgaXNMb3dlciBcJ0FcJyA9PSBGYWxzZVxuICAgIGlzTG93ZXIgXCctXCcgPT0gRmFsc2VcbiAgICBpc0xvd2VyIFwnz4BcJyA9PSBGYWxzZVxuLX1cbmlzTG93ZXIgOiBDaGFyIC0+IEJvb2xcbmlzTG93ZXIgY2hhciA9XG4gIGxldFxuICAgIGNvZGUgPVxuICAgICAgdG9Db2RlIGNoYXJcbiAgaW5cbiAgICAweDYxIDw9IGNvZGUgJiYgY29kZSA8PSAweDdBXG5cblxuey18IERldGVjdCB1cHBlciBjYXNlIGFuZCBsb3dlciBjYXNlIEFTQ0lJIGNoYXJhY3RlcnMuXG5cbiAgICBpc0FscGhhIFwnYVwnID09IFRydWVcbiAgICBpc0FscGhhIFwnYlwnID09IFRydWVcbiAgICBpc0FscGhhIFwnRVwnID09IFRydWVcbiAgICBpc0FscGhhIFwnWVwnID09IFRydWVcblxuICAgIGlzQWxwaGEgXCcwXCcgPT0gRmFsc2VcbiAgICBpc0FscGhhIFwnLVwnID09IEZhbHNlXG4gICAgaXNBbHBoYSBcJ8+AXCcgPT0gRmFsc2Vcbi19XG5pc0FscGhhIDogQ2hhciAtPiBCb29sXG5pc0FscGhhIGNoYXIgPVxuICBpc0xvd2VyIGNoYXIgfHwgaXNVcHBlciBjaGFyXG5cblxuey18IERldGVjdCB1cHBlciBjYXNlIGFuZCBsb3dlciBjYXNlIEFTQ0lJIGNoYXJhY3RlcnMuXG5cbiAgICBpc0FscGhhTnVtIFwnYVwnID09IFRydWVcbiAgICBpc0FscGhhTnVtIFwnYlwnID09IFRydWVcbiAgICBpc0FscGhhTnVtIFwnRVwnID09IFRydWVcbiAgICBpc0FscGhhTnVtIFwnWVwnID09IFRydWVcbiAgICBpc0FscGhhTnVtIFwnMFwnID09IFRydWVcbiAgICBpc0FscGhhTnVtIFwnN1wnID09IFRydWVcblxuICAgIGlzQWxwaGFOdW0gXCctXCcgPT0gRmFsc2VcbiAgICBpc0FscGhhTnVtIFwnz4BcJyA9PSBGYWxzZVxuLX1cbmlzQWxwaGFOdW0gOiBDaGFyIC0+IEJvb2xcbmlzQWxwaGFOdW0gY2hhciA9XG4gIGlzTG93ZXIgY2hhciB8fCBpc1VwcGVyIGNoYXIgfHwgaXNEaWdpdCBjaGFyXG5cblxuey18IERldGVjdCBkaWdpdHMgYDAxMjM0NTY3ODlgXG5cbiAgICBpc0RpZ2l0IFwnMFwnID09IFRydWVcbiAgICBpc0RpZ2l0IFwnMVwnID09IFRydWVcbiAgICAuLi5cbiAgICBpc0RpZ2l0IFwnOVwnID09IFRydWVcblxuICAgIGlzRGlnaXQgXCdhXCcgPT0gRmFsc2VcbiAgICBpc0RpZ2l0IFwnYlwnID09IEZhbHNlXG4gICAgaXNEaWdpdCBcJ0FcJyA9PSBGYWxzZVxuLX1cbmlzRGlnaXQgOiBDaGFyIC0+IEJvb2xcbmlzRGlnaXQgY2hhciA9XG4gIGxldFxuICAgIGNvZGUgPVxuICAgICAgdG9Db2RlIGNoYXJcbiAgaW5cbiAgICBjb2RlIDw9IDB4MzkgJiYgMHgzMCA8PSBjb2RlXG5cblxuey18IERldGVjdCBvY3RhbCBkaWdpdHMgYDAxMjM0NTY3YFxuXG4gICAgaXNPY3REaWdpdCBcJzBcJyA9PSBUcnVlXG4gICAgaXNPY3REaWdpdCBcJzFcJyA9PSBUcnVlXG4gICAgLi4uXG4gICAgaXNPY3REaWdpdCBcJzdcJyA9PSBUcnVlXG5cbiAgICBpc09jdERpZ2l0IFwnOFwnID09IEZhbHNlXG4gICAgaXNPY3REaWdpdCBcJ2FcJyA9PSBGYWxzZVxuICAgIGlzT2N0RGlnaXQgXCdBXCcgPT0gRmFsc2Vcbi19XG5pc09jdERpZ2l0IDogQ2hhciAtPiBCb29sXG5pc09jdERpZ2l0IGNoYXIgPVxuICBsZXRcbiAgICBjb2RlID1cbiAgICAgIHRvQ29kZSBjaGFyXG4gIGluXG4gICAgY29kZSA8PSAweDM3ICYmIDB4MzAgPD0gY29kZVxuXG5cbnstfCBEZXRlY3QgaGV4YWRlY2ltYWwgZGlnaXRzIGAwMTIzNDU2Nzg5YWJjZGVmQUJDREVGYFxuLX1cbmlzSGV4RGlnaXQgOiBDaGFyIC0+IEJvb2xcbmlzSGV4RGlnaXQgY2hhciA9XG4gIGxldFxuICAgIGNvZGUgPVxuICAgICAgdG9Db2RlIGNoYXJcbiAgaW5cbiAgICAoMHgzMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgzOSlcbiAgICB8fCAoMHg0MSA8PSBjb2RlICYmIGNvZGUgPD0gMHg0NilcbiAgICB8fCAoMHg2MSA8PSBjb2RlICYmIGNvZGUgPD0gMHg2NilcblxuXG5cbi0tIENPTlZFUlNJT05TXG5cblxuey18IENvbnZlcnQgdG8gdXBwZXIgY2FzZS4gLX1cbnRvVXBwZXIgOiBDaGFyIC0+IENoYXJcbnRvVXBwZXIgPVxuICBFbG0uS2VybmVsLkNoYXIudG9VcHBlclxuXG5cbnstfCBDb252ZXJ0IHRvIGxvd2VyIGNhc2UuIC19XG50b0xvd2VyIDogQ2hhciAtPiBDaGFyXG50b0xvd2VyID1cbiAgRWxtLktlcm5lbC5DaGFyLnRvTG93ZXJcblxuXG57LXwgQ29udmVydCB0byB1cHBlciBjYXNlLCBhY2NvcmRpbmcgdG8gYW55IGxvY2FsZS1zcGVjaWZpYyBjYXNlIG1hcHBpbmdzLiAtfVxudG9Mb2NhbGVVcHBlciA6IENoYXIgLT4gQ2hhclxudG9Mb2NhbGVVcHBlciA9XG4gIEVsbS5LZXJuZWwuQ2hhci50b0xvY2FsZVVwcGVyXG5cblxuey18IENvbnZlcnQgdG8gbG93ZXIgY2FzZSwgYWNjb3JkaW5nIHRvIGFueSBsb2NhbGUtc3BlY2lmaWMgY2FzZSBtYXBwaW5ncy4gLX1cbnRvTG9jYWxlTG93ZXIgOiBDaGFyIC0+IENoYXJcbnRvTG9jYWxlTG93ZXIgPVxuICBFbG0uS2VybmVsLkNoYXIudG9Mb2NhbGVMb3dlclxuXG5cbnstfCBDb252ZXJ0IHRvIHRoZSBjb3JyZXNwb25kaW5nIFVuaWNvZGUgW2NvZGUgcG9pbnRdW2NwXS5cblxuW2NwXTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29kZV9wb2ludFxuXG4gICAgdG9Db2RlIFwnQVwnID09IDY1XG4gICAgdG9Db2RlIFwnQlwnID09IDY2XG4gICAgdG9Db2RlIFwn5pyoXCcgPT0gMHg2NzI4XG4gICAgdG9Db2RlIFwn8J2MhlwnID09IDB4MUQzMDZcbiAgICB0b0NvZGUgXCfwn5iDXCcgPT0gMHgxRjYwM1xuLX1cbnRvQ29kZSA6IENoYXIgLT4gSW50XG50b0NvZGUgPVxuICBFbG0uS2VybmVsLkNoYXIudG9Db2RlXG5cblxuey18IENvbnZlcnQgYSBVbmljb2RlIFtjb2RlIHBvaW50XVtjcF0gdG8gYSBjaGFyYWN0ZXIuXG5cbiAgICBmcm9tQ29kZSA2NSAgICAgID09IFwnQVwnXG4gICAgZnJvbUNvZGUgNjYgICAgICA9PSBcJ0JcJ1xuICAgIGZyb21Db2RlIDB4NjcyOCAgPT0gXCfmnKhcJ1xuICAgIGZyb21Db2RlIDB4MUQzMDYgPT0gXCfwnYyGXCdcbiAgICBmcm9tQ29kZSAweDFGNjAzID09IFwn8J+Yg1wnXG4gICAgZnJvbUNvZGUgLTEgICAgICA9PSBcJ++/vVwnXG5cblRoZSBmdWxsIHJhbmdlIG9mIHVuaWNvZGUgaXMgZnJvbSBgMGAgdG8gYDB4MTBGRkZGYC4gV2l0aCBudW1iZXJzIG91dHNpZGUgdGhhdFxucmFuZ2UsIHlvdSBnZXQgW3RoZSByZXBsYWNlbWVudCBjaGFyYWN0ZXJdW2ZmZmRdLlxuXG5bY3BdOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db2RlX3BvaW50XG5bZmZmZF06IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NwZWNpYWxzXyhVbmljb2RlX2Jsb2NrKSNSZXBsYWNlbWVudF9jaGFyYWN0ZXJcbi19XG5mcm9tQ29kZSA6IEludCAtPiBDaGFyXG5mcm9tQ29kZSA9XG4gIEVsbS5LZXJuZWwuQ2hhci5mcm9tQ29kZVxuJ30pKSwKCQkJX1V0aWxzX1R1cGxlMigKCQkJJ0xpc3QuZWxtJywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRCbG9iTm9kZSgKCQkJCXt1dGY4OiAnbW9kdWxlIExpc3QgZXhwb3NpbmdcbiAgKCBzaW5nbGV0b24sIHJlcGVhdCwgcmFuZ2UsICg6OilcbiAgLCBtYXAsIGluZGV4ZWRNYXAsIGZvbGRsLCBmb2xkciwgZmlsdGVyLCBmaWx0ZXJNYXBcbiAgLCBsZW5ndGgsIHJldmVyc2UsIG1lbWJlciwgYWxsLCBhbnksIG1heGltdW0sIG1pbmltdW0sIHN1bSwgcHJvZHVjdFxuICAsIGFwcGVuZCwgY29uY2F0LCBjb25jYXRNYXAsIGludGVyc3BlcnNlLCBtYXAyLCBtYXAzLCBtYXA0LCBtYXA1XG4gICwgc29ydCwgc29ydEJ5LCBzb3J0V2l0aFxuICAsIGlzRW1wdHksIGhlYWQsIHRhaWwsIHRha2UsIGRyb3AsIHBhcnRpdGlvbiwgdW56aXBcbiAgKVxuXG57LXwgWW91IGNhbiBjcmVhdGUgYSBgTGlzdGAgaW4gRWxtIHdpdGggdGhlIGBbMSwyLDNdYCBzeW50YXgsIHNvIGxpc3RzIGFyZVxudXNlZCBhbGwgb3ZlciB0aGUgcGxhY2UuIFRoaXMgbW9kdWxlIGhhcyBhIGJ1bmNoIG9mIGZ1bmN0aW9ucyB0byBoZWxwIHlvdSB3b3JrXG53aXRoIHRoZW0hXG5cbiMgQ3JlYXRlXG5AZG9jcyBzaW5nbGV0b24sIHJlcGVhdCwgcmFuZ2UsICg6OilcblxuIyBUcmFuc2Zvcm1cbkBkb2NzIG1hcCwgaW5kZXhlZE1hcCwgZm9sZGwsIGZvbGRyLCBmaWx0ZXIsIGZpbHRlck1hcFxuXG4jIFV0aWxpdGllc1xuQGRvY3MgbGVuZ3RoLCByZXZlcnNlLCBtZW1iZXIsIGFsbCwgYW55LCBtYXhpbXVtLCBtaW5pbXVtLCBzdW0sIHByb2R1Y3RcblxuIyBDb21iaW5lXG5AZG9jcyBhcHBlbmQsIGNvbmNhdCwgY29uY2F0TWFwLCBpbnRlcnNwZXJzZSwgbWFwMiwgbWFwMywgbWFwNCwgbWFwNVxuXG4jIFNvcnRcbkBkb2NzIHNvcnQsIHNvcnRCeSwgc29ydFdpdGhcblxuIyBEZWNvbnN0cnVjdFxuQGRvY3MgaXNFbXB0eSwgaGVhZCwgdGFpbCwgdGFrZSwgZHJvcCwgcGFydGl0aW9uLCB1bnppcFxuXG4tfVxuXG5pbXBvcnQgQmFzaWNzIGV4cG9zaW5nICguLilcbmltcG9ydCBFbG0uS2VybmVsLkxpc3RcbmltcG9ydCBNYXliZSBleHBvc2luZyAoIE1heWJlKC4uKSApXG5cblxuXG5cbmluZml4IHJpZ2h0IDUgKDo6KSA9IGNvbnNcblxuXG5cbi0tIENSRUFURVxuXG5cblxuey18IENyZWF0ZSBhIGxpc3Qgd2l0aCBvbmx5IG9uZSBlbGVtZW50OlxuXG4gICAgc2luZ2xldG9uIDEyMzQgPT0gWzEyMzRdXG4gICAgc2luZ2xldG9uIFwiaGlcIiA9PSBbXCJoaVwiXVxuLX1cbnNpbmdsZXRvbiA6IGEgLT4gTGlzdCBhXG5zaW5nbGV0b24gdmFsdWUgPVxuICBbdmFsdWVdXG5cblxuey18IENyZWF0ZSBhIGxpc3Qgd2l0aCAqbiogY29waWVzIG9mIGEgdmFsdWU6XG5cbiAgICByZXBlYXQgMyAoMCwwKSA9PSBbKDAsMCksKDAsMCksKDAsMCldXG4tfVxucmVwZWF0IDogSW50IC0+IGEgLT4gTGlzdCBhXG5yZXBlYXQgbiB2YWx1ZSA9XG4gIHJlcGVhdEhlbHAgW10gbiB2YWx1ZVxuXG5cbnJlcGVhdEhlbHAgOiBMaXN0IGEgLT4gSW50IC0+IGEgLT4gTGlzdCBhXG5yZXBlYXRIZWxwIHJlc3VsdCBuIHZhbHVlID1cbiAgaWYgbiA8PSAwIHRoZW5cbiAgICByZXN1bHRcblxuICBlbHNlXG4gICAgcmVwZWF0SGVscCAoY29ucyB2YWx1ZSByZXN1bHQpIChuLTEpIHZhbHVlXG5cblxuey18IENyZWF0ZSBhIGxpc3Qgb2YgbnVtYmVycywgZXZlcnkgZWxlbWVudCBpbmNyZWFzaW5nIGJ5IG9uZS5cbllvdSBnaXZlIHRoZSBsb3dlc3QgYW5kIGhpZ2hlc3QgbnVtYmVyIHRoYXQgc2hvdWxkIGJlIGluIHRoZSBsaXN0LlxuXG4gICAgcmFuZ2UgMyA2ID09IFszLCA0LCA1LCA2XVxuICAgIHJhbmdlIDMgMyA9PSBbM11cbiAgICByYW5nZSA2IDMgPT0gW11cbi19XG5yYW5nZSA6IEludCAtPiBJbnQgLT4gTGlzdCBJbnRcbnJhbmdlIGxvIGhpID1cbiAgcmFuZ2VIZWxwIGxvIGhpIFtdXG5cblxucmFuZ2VIZWxwIDogSW50IC0+IEludCAtPiBMaXN0IEludCAtPiBMaXN0IEludFxucmFuZ2VIZWxwIGxvIGhpIGxpc3QgPVxuICBpZiBsbyA8PSBoaSB0aGVuXG4gICAgcmFuZ2VIZWxwIGxvIChoaSAtIDEpIChjb25zIGhpIGxpc3QpXG5cbiAgZWxzZVxuICAgIGxpc3RcblxuXG57LXwgQWRkIGFuIGVsZW1lbnQgdG8gdGhlIGZyb250IG9mIGEgbGlzdC5cblxuICAgIDEgOjogWzIsM10gPT0gWzEsMiwzXVxuICAgIDEgOjogW10gPT0gWzFdXG5cblRoaXMgb3BlcmF0b3IgaXMgcHJvbm91bmNlZCAqY29ucyogZm9yIGhpc3RvcmljYWwgcmVhc29ucywgYnV0IHlvdSBjYW4gdGhpbmtcbm9mIGl0IGxpa2UgcHVzaGluZyBhbiBlbnRyeSBvbnRvIGEgc3RhY2suXG4tfVxuY29ucyA6IGEgLT4gTGlzdCBhIC0+IExpc3QgYVxuY29ucyA9XG4gIEVsbS5LZXJuZWwuTGlzdC5jb25zXG5cblxuXG4tLSBUUkFOU0ZPUk1cblxuXG57LXwgQXBwbHkgYSBmdW5jdGlvbiB0byBldmVyeSBlbGVtZW50IG9mIGEgbGlzdC5cblxuICAgIG1hcCBzcXJ0IFsxLDQsOV0gPT0gWzEsMiwzXVxuXG4gICAgbWFwIG5vdCBbVHJ1ZSxGYWxzZSxUcnVlXSA9PSBbRmFsc2UsVHJ1ZSxGYWxzZV1cblxuU28gYG1hcCBmdW5jIFsgYSwgYiwgYyBdYCBpcyB0aGUgc2FtZSBhcyBgWyBmdW5jIGEsIGZ1bmMgYiwgZnVuYyBjIF1gXG4tfVxubWFwIDogKGEgLT4gYikgLT4gTGlzdCBhIC0+IExpc3QgYlxubWFwIGYgeHMgPVxuICBmb2xkciAoXFx4IGFjYyAtPiBjb25zIChmIHgpIGFjYykgW10geHNcblxuXG57LXwgU2FtZSBhcyBgbWFwYCBidXQgdGhlIGZ1bmN0aW9uIGlzIGFsc28gYXBwbGllZCB0byB0aGUgaW5kZXggb2YgZWFjaFxuZWxlbWVudCAoc3RhcnRpbmcgYXQgemVybykuXG5cbiAgICBpbmRleGVkTWFwIFR1cGxlLnBhaXIgW1wiVG9tXCIsXCJTdWVcIixcIkJvYlwiXSA9PSBbICgwLFwiVG9tXCIpLCAoMSxcIlN1ZVwiKSwgKDIsXCJCb2JcIikgXVxuLX1cbmluZGV4ZWRNYXAgOiAoSW50IC0+IGEgLT4gYikgLT4gTGlzdCBhIC0+IExpc3QgYlxuaW5kZXhlZE1hcCBmIHhzID1cbiAgbWFwMiBmIChyYW5nZSAwIChsZW5ndGggeHMgLSAxKSkgeHNcblxuXG57LXwgUmVkdWNlIGEgbGlzdCBmcm9tIHRoZSBsZWZ0LlxuXG4gICAgZm9sZGwgKCspICAwICBbMSwyLDNdID09IDZcbiAgICBmb2xkbCAoOjopIFtdIFsxLDIsM10gPT0gWzMsMiwxXVxuXG5TbyBgZm9sZGwgc3RlcCBzdGF0ZSBbMSwyLDNdYCBpcyBsaWtlIHNheWluZzpcblxuICAgIHN0YXRlXG4gICAgICB8PiBzdGVwIDFcbiAgICAgIHw+IHN0ZXAgMlxuICAgICAgfD4gc3RlcCAzXG4tfVxuZm9sZGwgOiAoYSAtPiBiIC0+IGIpIC0+IGIgLT4gTGlzdCBhIC0+IGJcbmZvbGRsIGZ1bmMgYWNjIGxpc3QgPVxuICBjYXNlIGxpc3Qgb2ZcbiAgICBbXSAtPlxuICAgICAgYWNjXG5cbiAgICB4IDo6IHhzIC0+XG4gICAgICBmb2xkbCBmdW5jIChmdW5jIHggYWNjKSB4c1xuXG5cbnstfCBSZWR1Y2UgYSBsaXN0IGZyb20gdGhlIHJpZ2h0LlxuXG4gICAgZm9sZHIgKCspICAwICBbMSwyLDNdID09IDZcbiAgICBmb2xkciAoOjopIFtdIFsxLDIsM10gPT0gWzEsMiwzXVxuXG5TbyBgZm9sZHIgc3RlcCBzdGF0ZSBbMSwyLDNdYCBpcyBsaWtlIHNheWluZzpcblxuICAgIHN0YXRlXG4gICAgICB8PiBzdGVwIDNcbiAgICAgIHw+IHN0ZXAgMlxuICAgICAgfD4gc3RlcCAxXG4tfVxuZm9sZHIgOiAoYSAtPiBiIC0+IGIpIC0+IGIgLT4gTGlzdCBhIC0+IGJcbmZvbGRyIGZuIGFjYyBscyA9XG4gICAgZm9sZHJIZWxwZXIgZm4gYWNjIDAgbHNcblxuXG5mb2xkckhlbHBlciA6IChhIC0+IGIgLT4gYikgLT4gYiAtPiBJbnQgLT4gTGlzdCBhIC0+IGJcbmZvbGRySGVscGVyIGZuIGFjYyBjdHIgbHMgPVxuICAgIGNhc2UgbHMgb2ZcbiAgICAgICAgW10gLT5cbiAgICAgICAgICAgIGFjY1xuXG4gICAgICAgIGEgOjogcjEgLT5cbiAgICAgICAgICAgIGNhc2UgcjEgb2ZcbiAgICAgICAgICAgICAgICBbXSAtPlxuICAgICAgICAgICAgICAgICAgICBmbiBhIGFjY1xuXG4gICAgICAgICAgICAgICAgYiA6OiByMiAtPlxuICAgICAgICAgICAgICAgICAgICBjYXNlIHIyIG9mXG4gICAgICAgICAgICAgICAgICAgICAgICBbXSAtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuIGEgKGZuIGIgYWNjKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjIDo6IHIzIC0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSByMyBvZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXSAtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4gYSAoZm4gYiAoZm4gYyBhY2MpKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgOjogcjQgLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN0ciA+IDUwMCB0aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2xkbCBmbiBhY2MgKHJldmVyc2UgcjQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRySGVscGVyIGZuIGFjYyAoY3RyICsgMSkgcjRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4gYSAoZm4gYiAoZm4gYyAoZm4gZCByZXMpKSlcblxuXG57LXwgS2VlcCBlbGVtZW50cyB0aGF0IHNhdGlzZnkgdGhlIHRlc3QuXG5cbiAgICBmaWx0ZXIgaXNFdmVuIFsxLDIsMyw0LDUsNl0gPT0gWzIsNCw2XVxuLX1cbmZpbHRlciA6IChhIC0+IEJvb2wpIC0+IExpc3QgYSAtPiBMaXN0IGFcbmZpbHRlciBpc0dvb2QgbGlzdCA9XG4gIGZvbGRyIChcXHggeHMgLT4gaWYgaXNHb29kIHggdGhlbiBjb25zIHggeHMgZWxzZSB4cykgW10gbGlzdFxuXG5cbnstfCBGaWx0ZXIgb3V0IGNlcnRhaW4gdmFsdWVzLiBGb3IgZXhhbXBsZSwgbWF5YmUgeW91IGhhdmUgYSBidW5jaCBvZiBzdHJpbmdzXG5mcm9tIGFuIHVudHJ1c3RlZCBzb3VyY2UgYW5kIHlvdSB3YW50IHRvIHR1cm4gdGhlbSBpbnRvIG51bWJlcnM6XG5cbiAgICBudW1iZXJzIDogTGlzdCBJbnRcbiAgICBudW1iZXJzID1cbiAgICAgIGZpbHRlck1hcCBTdHJpbmcudG9JbnQgW1wiM1wiLCBcImhpXCIsIFwiMTJcIiwgXCI0dGhcIiwgXCJNYXlcIl1cblxuICAgIC0tIG51bWJlcnMgPT0gWzMsIDEyXVxuXG4tfVxuZmlsdGVyTWFwIDogKGEgLT4gTWF5YmUgYikgLT4gTGlzdCBhIC0+IExpc3QgYlxuZmlsdGVyTWFwIGYgeHMgPVxuICBmb2xkciAobWF5YmVDb25zIGYpIFtdIHhzXG5cblxubWF5YmVDb25zIDogKGEgLT4gTWF5YmUgYikgLT4gYSAtPiBMaXN0IGIgLT4gTGlzdCBiXG5tYXliZUNvbnMgZiBteCB4cyA9XG4gIGNhc2UgZiBteCBvZlxuICAgIEp1c3QgeCAtPlxuICAgICAgY29ucyB4IHhzXG5cbiAgICBOb3RoaW5nIC0+XG4gICAgICB4c1xuXG5cbi0tIFVUSUxJVElFU1xuXG5cbnstfCBEZXRlcm1pbmUgdGhlIGxlbmd0aCBvZiBhIGxpc3QuXG5cbiAgICBsZW5ndGggWzEsMiwzXSA9PSAzXG4tfVxubGVuZ3RoIDogTGlzdCBhIC0+IEludFxubGVuZ3RoIHhzID1cbiAgZm9sZGwgKFxcXyBpIC0+IGkgKyAxKSAwIHhzXG5cblxuey18IFJldmVyc2UgYSBsaXN0LlxuXG4gICAgcmV2ZXJzZSBbMSwyLDMsNF0gPT0gWzQsMywyLDFdXG4tfVxucmV2ZXJzZSA6IExpc3QgYSAtPiBMaXN0IGFcbnJldmVyc2UgbGlzdCA9XG4gIGZvbGRsIGNvbnMgW10gbGlzdFxuXG5cbnstfCBGaWd1cmUgb3V0IHdoZXRoZXIgYSBsaXN0IGNvbnRhaW5zIGEgdmFsdWUuXG5cbiAgICBtZW1iZXIgOSBbMSwyLDMsNF0gPT0gRmFsc2VcbiAgICBtZW1iZXIgNCBbMSwyLDMsNF0gPT0gVHJ1ZVxuLX1cbm1lbWJlciA6IGEgLT4gTGlzdCBhIC0+IEJvb2xcbm1lbWJlciB4IHhzID1cbiAgYW55IChcXGEgLT4gYSA9PSB4KSB4c1xuXG5cbnstfCBEZXRlcm1pbmUgaWYgYWxsIGVsZW1lbnRzIHNhdGlzZnkgc29tZSB0ZXN0LlxuXG4gICAgYWxsIGlzRXZlbiBbMiw0XSA9PSBUcnVlXG4gICAgYWxsIGlzRXZlbiBbMiwzXSA9PSBGYWxzZVxuICAgIGFsbCBpc0V2ZW4gW10gPT0gVHJ1ZVxuLX1cbmFsbCA6IChhIC0+IEJvb2wpIC0+IExpc3QgYSAtPiBCb29sXG5hbGwgaXNPa2F5IGxpc3QgPVxuICBub3QgKGFueSAobm90IDw8IGlzT2theSkgbGlzdClcblxuXG57LXwgRGV0ZXJtaW5lIGlmIGFueSBlbGVtZW50cyBzYXRpc2Z5IHNvbWUgdGVzdC5cblxuICAgIGFueSBpc0V2ZW4gWzIsM10gPT0gVHJ1ZVxuICAgIGFueSBpc0V2ZW4gWzEsM10gPT0gRmFsc2VcbiAgICBhbnkgaXNFdmVuIFtdID09IEZhbHNlXG4tfVxuYW55IDogKGEgLT4gQm9vbCkgLT4gTGlzdCBhIC0+IEJvb2xcbmFueSBpc09rYXkgbGlzdCA9XG4gIGNhc2UgbGlzdCBvZlxuICAgIFtdIC0+XG4gICAgICBGYWxzZVxuXG4gICAgeCA6OiB4cyAtPlxuICAgICAgLS0gbm90ZTogKGlzT2theSB4IHx8IGFueSBpc09rYXkgeHMpIHdvdWxkIG5vdCBnZXQgVENPXG4gICAgICBpZiBpc09rYXkgeCB0aGVuXG4gICAgICAgIFRydWVcblxuICAgICAgZWxzZVxuICAgICAgICBhbnkgaXNPa2F5IHhzXG5cblxuey18IEZpbmQgdGhlIG1heGltdW0gZWxlbWVudCBpbiBhIG5vbi1lbXB0eSBsaXN0LlxuXG4gICAgbWF4aW11bSBbMSw0LDJdID09IEp1c3QgNFxuICAgIG1heGltdW0gW10gICAgICA9PSBOb3RoaW5nXG4tfVxubWF4aW11bSA6IExpc3QgY29tcGFyYWJsZSAtPiBNYXliZSBjb21wYXJhYmxlXG5tYXhpbXVtIGxpc3QgPVxuICBjYXNlIGxpc3Qgb2ZcbiAgICB4IDo6IHhzIC0+XG4gICAgICBKdXN0IChmb2xkbCBtYXggeCB4cylcblxuICAgIF8gLT5cbiAgICAgIE5vdGhpbmdcblxuXG57LXwgRmluZCB0aGUgbWluaW11bSBlbGVtZW50IGluIGEgbm9uLWVtcHR5IGxpc3QuXG5cbiAgICBtaW5pbXVtIFszLDIsMV0gPT0gSnVzdCAxXG4gICAgbWluaW11bSBbXSAgICAgID09IE5vdGhpbmdcbi19XG5taW5pbXVtIDogTGlzdCBjb21wYXJhYmxlIC0+IE1heWJlIGNvbXBhcmFibGVcbm1pbmltdW0gbGlzdCA9XG4gIGNhc2UgbGlzdCBvZlxuICAgIHggOjogeHMgLT5cbiAgICAgIEp1c3QgKGZvbGRsIG1pbiB4IHhzKVxuXG4gICAgXyAtPlxuICAgICAgTm90aGluZ1xuXG5cbnstfCBHZXQgdGhlIHN1bSBvZiB0aGUgbGlzdCBlbGVtZW50cy5cblxuICAgIHN1bSBbMSwyLDNdID09IDZcbiAgICBzdW0gWzEsMSwxXSA9PSAzXG4gICAgc3VtIFtdICAgICAgPT0gMFxuXG4tfVxuc3VtIDogTGlzdCBudW1iZXIgLT4gbnVtYmVyXG5zdW0gbnVtYmVycyA9XG4gIGZvbGRsICgrKSAwIG51bWJlcnNcblxuXG57LXwgR2V0IHRoZSBwcm9kdWN0IG9mIHRoZSBsaXN0IGVsZW1lbnRzLlxuXG4gICAgcHJvZHVjdCBbMiwyLDJdID09IDhcbiAgICBwcm9kdWN0IFszLDMsM10gPT0gMjdcbiAgICBwcm9kdWN0IFtdICAgICAgPT0gMVxuXG4tfVxucHJvZHVjdCA6IExpc3QgbnVtYmVyIC0+IG51bWJlclxucHJvZHVjdCBudW1iZXJzID1cbiAgZm9sZGwgKCopIDEgbnVtYmVyc1xuXG5cblxuLS0gQ09NQklORVxuXG5cbnstfCBQdXQgdHdvIGxpc3RzIHRvZ2V0aGVyLlxuXG4gICAgYXBwZW5kIFsxLDEsMl0gWzMsNSw4XSA9PSBbMSwxLDIsMyw1LDhdXG4gICAgYXBwZW5kIFtcJ2FcJyxcJ2JcJ10gW1wnY1wnXSA9PSBbXCdhXCcsXCdiXCcsXCdjXCddXG5cbllvdSBjYW4gYWxzbyB1c2UgW3RoZSBgKCsrKWAgb3BlcmF0b3JdKEJhc2ljcyMrKykgdG8gYXBwZW5kIGxpc3RzLlxuLX1cbmFwcGVuZCA6IExpc3QgYSAtPiBMaXN0IGEgLT4gTGlzdCBhXG5hcHBlbmQgeHMgeXMgPVxuICBjYXNlIHlzIG9mXG4gICAgW10gLT5cbiAgICAgIHhzXG5cbiAgICBfIC0+XG4gICAgICBmb2xkciBjb25zIHlzIHhzXG5cblxuey18IENvbmNhdGVuYXRlIGEgYnVuY2ggb2YgbGlzdHMgaW50byBhIHNpbmdsZSBsaXN0OlxuXG4gICAgY29uY2F0IFtbMSwyXSxbM10sWzQsNV1dID09IFsxLDIsMyw0LDVdXG4tfVxuY29uY2F0IDogTGlzdCAoTGlzdCBhKSAtPiBMaXN0IGFcbmNvbmNhdCBsaXN0cyA9XG4gIGZvbGRyIGFwcGVuZCBbXSBsaXN0c1xuXG5cbnstfCBNYXAgYSBnaXZlbiBmdW5jdGlvbiBvbnRvIGEgbGlzdCBhbmQgZmxhdHRlbiB0aGUgcmVzdWx0aW5nIGxpc3RzLlxuXG4gICAgY29uY2F0TWFwIGYgeHMgPT0gY29uY2F0IChtYXAgZiB4cylcbi19XG5jb25jYXRNYXAgOiAoYSAtPiBMaXN0IGIpIC0+IExpc3QgYSAtPiBMaXN0IGJcbmNvbmNhdE1hcCBmIGxpc3QgPVxuICBjb25jYXQgKG1hcCBmIGxpc3QpXG5cblxuey18IFBsYWNlcyB0aGUgZ2l2ZW4gdmFsdWUgYmV0d2VlbiBhbGwgbWVtYmVycyBvZiB0aGUgZ2l2ZW4gbGlzdC5cblxuICAgIGludGVyc3BlcnNlIFwib25cIiBbXCJ0dXJ0bGVzXCIsXCJ0dXJ0bGVzXCIsXCJ0dXJ0bGVzXCJdID09IFtcInR1cnRsZXNcIixcIm9uXCIsXCJ0dXJ0bGVzXCIsXCJvblwiLFwidHVydGxlc1wiXVxuLX1cbmludGVyc3BlcnNlIDogYSAtPiBMaXN0IGEgLT4gTGlzdCBhXG5pbnRlcnNwZXJzZSBzZXAgeHMgPVxuICBjYXNlIHhzIG9mXG4gICAgW10gLT5cbiAgICAgIFtdXG5cbiAgICBoZCA6OiB0bCAtPlxuICAgICAgbGV0XG4gICAgICAgIHN0ZXAgeCByZXN0ID1cbiAgICAgICAgICBjb25zIHNlcCAoY29ucyB4IHJlc3QpXG5cbiAgICAgICAgc3BlcnNlZCA9XG4gICAgICAgICAgZm9sZHIgc3RlcCBbXSB0bFxuICAgICAgaW5cbiAgICAgICAgY29ucyBoZCBzcGVyc2VkXG5cblxuey18IENvbWJpbmUgdHdvIGxpc3RzLCBjb21iaW5pbmcgdGhlbSB3aXRoIHRoZSBnaXZlbiBmdW5jdGlvbi5cbklmIG9uZSBsaXN0IGlzIGxvbmdlciwgdGhlIGV4dHJhIGVsZW1lbnRzIGFyZSBkcm9wcGVkLlxuXG4gICAgdG90YWxzIDogTGlzdCBJbnQgLT4gTGlzdCBJbnQgLT4gTGlzdCBJbnRcbiAgICB0b3RhbHMgeHMgeXMgPVxuICAgICAgTGlzdC5tYXAyICgrKSB4cyB5c1xuXG4gICAgLS0gdG90YWxzIFsxLDIsM10gWzQsNSw2XSA9PSBbNSw3LDldXG5cbiAgICBwYWlycyA6IExpc3QgYSAtPiBMaXN0IGIgLT4gTGlzdCAoYSxiKVxuICAgIHBhaXJzIHhzIHlzID1cbiAgICAgIExpc3QubWFwMiBUdXBsZS5wYWlyIHhzIHlzXG5cbiAgICAtLSBwYWlycyBbXCJhbGljZVwiLFwiYm9iXCIsXCJjaHVja1wiXSBbMiw1LDcsOF1cbiAgICAtLSAgID09IFsoXCJhbGljZVwiLDIpLChcImJvYlwiLDUpLChcImNodWNrXCIsNyldXG5cbi19XG5tYXAyIDogKGEgLT4gYiAtPiByZXN1bHQpIC0+IExpc3QgYSAtPiBMaXN0IGIgLT4gTGlzdCByZXN1bHRcbm1hcDIgPVxuICBFbG0uS2VybmVsLkxpc3QubWFwMlxuXG5cbnstfC19XG5tYXAzIDogKGEgLT4gYiAtPiBjIC0+IHJlc3VsdCkgLT4gTGlzdCBhIC0+IExpc3QgYiAtPiBMaXN0IGMgLT4gTGlzdCByZXN1bHRcbm1hcDMgPVxuICBFbG0uS2VybmVsLkxpc3QubWFwM1xuXG5cbnstfC19XG5tYXA0IDogKGEgLT4gYiAtPiBjIC0+IGQgLT4gcmVzdWx0KSAtPiBMaXN0IGEgLT4gTGlzdCBiIC0+IExpc3QgYyAtPiBMaXN0IGQgLT4gTGlzdCByZXN1bHRcbm1hcDQgPVxuICBFbG0uS2VybmVsLkxpc3QubWFwNFxuXG5cbnstfC19XG5tYXA1IDogKGEgLT4gYiAtPiBjIC0+IGQgLT4gZSAtPiByZXN1bHQpIC0+IExpc3QgYSAtPiBMaXN0IGIgLT4gTGlzdCBjIC0+IExpc3QgZCAtPiBMaXN0IGUgLT4gTGlzdCByZXN1bHRcbm1hcDUgPVxuICBFbG0uS2VybmVsLkxpc3QubWFwNVxuXG5cblxuLS0gU09SVFxuXG5cbnstfCBTb3J0IHZhbHVlcyBmcm9tIGxvd2VzdCB0byBoaWdoZXN0XG5cbiAgICBzb3J0IFszLDEsNV0gPT0gWzEsMyw1XVxuLX1cbnNvcnQgOiBMaXN0IGNvbXBhcmFibGUgLT4gTGlzdCBjb21wYXJhYmxlXG5zb3J0IHhzID1cbiAgc29ydEJ5IGlkZW50aXR5IHhzXG5cblxuey18IFNvcnQgdmFsdWVzIGJ5IGEgZGVyaXZlZCBwcm9wZXJ0eS5cblxuICAgIGFsaWNlID0geyBuYW1lPVwiQWxpY2VcIiwgaGVpZ2h0PTEuNjIgfVxuICAgIGJvYiAgID0geyBuYW1lPVwiQm9iXCIgICwgaGVpZ2h0PTEuODUgfVxuICAgIGNodWNrID0geyBuYW1lPVwiQ2h1Y2tcIiwgaGVpZ2h0PTEuNzYgfVxuXG4gICAgc29ydEJ5IC5uYW1lICAgW2NodWNrLGFsaWNlLGJvYl0gPT0gW2FsaWNlLGJvYixjaHVja11cbiAgICBzb3J0QnkgLmhlaWdodCBbY2h1Y2ssYWxpY2UsYm9iXSA9PSBbYWxpY2UsY2h1Y2ssYm9iXVxuXG4gICAgc29ydEJ5IFN0cmluZy5sZW5ndGggW1wibW91c2VcIixcImNhdFwiXSA9PSBbXCJjYXRcIixcIm1vdXNlXCJdXG4tfVxuc29ydEJ5IDogKGEgLT4gY29tcGFyYWJsZSkgLT4gTGlzdCBhIC0+IExpc3QgYVxuc29ydEJ5ID1cbiAgRWxtLktlcm5lbC5MaXN0LnNvcnRCeVxuXG5cbnstfCBTb3J0IHZhbHVlcyB3aXRoIGEgY3VzdG9tIGNvbXBhcmlzb24gZnVuY3Rpb24uXG5cbiAgICBzb3J0V2l0aCBmbGlwcGVkQ29tcGFyaXNvbiBbMSwyLDMsNCw1XSA9PSBbNSw0LDMsMiwxXVxuXG4gICAgZmxpcHBlZENvbXBhcmlzb24gYSBiID1cbiAgICAgICAgY2FzZSBjb21wYXJlIGEgYiBvZlxuICAgICAgICAgIExUIC0+IEdUXG4gICAgICAgICAgRVEgLT4gRVFcbiAgICAgICAgICBHVCAtPiBMVFxuXG5UaGlzIGlzIGFsc28gdGhlIG1vc3QgZ2VuZXJhbCBzb3J0IGZ1bmN0aW9uLCBhbGxvd2luZyB5b3VcbnRvIGRlZmluZSBhbnkgb3RoZXI6IGBzb3J0ID09IHNvcnRXaXRoIGNvbXBhcmVgXG4tfVxuc29ydFdpdGggOiAoYSAtPiBhIC0+IE9yZGVyKSAtPiBMaXN0IGEgLT4gTGlzdCBhXG5zb3J0V2l0aCA9XG4gIEVsbS5LZXJuZWwuTGlzdC5zb3J0V2l0aFxuXG5cblxuLS0gREVDT05TVFJVQ1RcblxuXG57LXwgRGV0ZXJtaW5lIGlmIGEgbGlzdCBpcyBlbXB0eS5cblxuICAgIGlzRW1wdHkgW10gPT0gVHJ1ZVxuXG4qKk5vdGU6KiogSXQgaXMgdXN1YWxseSBwcmVmZXJhYmxlIHRvIHVzZSBhIGBjYXNlYCB0byB0ZXN0IHRoaXMgc28geW91IGRvIG5vdFxuZm9yZ2V0IHRvIGhhbmRsZSB0aGUgYCh4IDo6IHhzKWAgY2FzZSBhcyB3ZWxsIVxuLX1cbmlzRW1wdHkgOiBMaXN0IGEgLT4gQm9vbFxuaXNFbXB0eSB4cyA9XG4gIGNhc2UgeHMgb2ZcbiAgICBbXSAtPlxuICAgICAgVHJ1ZVxuXG4gICAgXyAtPlxuICAgICAgRmFsc2VcblxuXG57LXwgRXh0cmFjdCB0aGUgZmlyc3QgZWxlbWVudCBvZiBhIGxpc3QuXG5cbiAgICBoZWFkIFsxLDIsM10gPT0gSnVzdCAxXG4gICAgaGVhZCBbXSA9PSBOb3RoaW5nXG5cbioqTm90ZToqKiBJdCBpcyB1c3VhbGx5IHByZWZlcmFibGUgdG8gdXNlIGEgYGNhc2VgIHRvIGRlY29uc3RydWN0IGEgYExpc3RgXG5iZWNhdXNlIGl0IGdpdmVzIHlvdSBgKHggOjogeHMpYCBhbmQgeW91IGNhbiB3b3JrIHdpdGggYm90aCBzdWJwYXJ0cy5cbi19XG5oZWFkIDogTGlzdCBhIC0+IE1heWJlIGFcbmhlYWQgbGlzdCA9XG4gIGNhc2UgbGlzdCBvZlxuICAgIHggOjogeHMgLT5cbiAgICAgIEp1c3QgeFxuXG4gICAgW10gLT5cbiAgICAgIE5vdGhpbmdcblxuXG57LXwgRXh0cmFjdCB0aGUgcmVzdCBvZiB0aGUgbGlzdC5cblxuICAgIHRhaWwgWzEsMiwzXSA9PSBKdXN0IFsyLDNdXG4gICAgdGFpbCBbXSA9PSBOb3RoaW5nXG5cbioqTm90ZToqKiBJdCBpcyB1c3VhbGx5IHByZWZlcmFibGUgdG8gdXNlIGEgYGNhc2VgIHRvIGRlY29uc3RydWN0IGEgYExpc3RgXG5iZWNhdXNlIGl0IGdpdmVzIHlvdSBgKHggOjogeHMpYCBhbmQgeW91IGNhbiB3b3JrIHdpdGggYm90aCBzdWJwYXJ0cy5cbi19XG50YWlsIDogTGlzdCBhIC0+IE1heWJlIChMaXN0IGEpXG50YWlsIGxpc3QgPVxuICBjYXNlIGxpc3Qgb2ZcbiAgICB4IDo6IHhzIC0+XG4gICAgICBKdXN0IHhzXG5cbiAgICBbXSAtPlxuICAgICAgTm90aGluZ1xuXG5cbnstfCBUYWtlIHRoZSBmaXJzdCAqbiogbWVtYmVycyBvZiBhIGxpc3QuXG5cbiAgICB0YWtlIDIgWzEsMiwzLDRdID09IFsxLDJdXG4tfVxudGFrZSA6IEludCAtPiBMaXN0IGEgLT4gTGlzdCBhXG50YWtlIG4gbGlzdCA9XG4gIHRha2VGYXN0IDAgbiBsaXN0XG5cblxudGFrZUZhc3QgOiBJbnQgLT4gSW50IC0+IExpc3QgYSAtPiBMaXN0IGFcbnRha2VGYXN0IGN0ciBuIGxpc3QgPVxuICBpZiBuIDw9IDAgdGhlblxuICAgIFtdXG4gIGVsc2VcbiAgICBjYXNlICggbiwgbGlzdCApIG9mXG4gICAgICAoIF8sIFtdICkgLT5cbiAgICAgICAgbGlzdFxuXG4gICAgICAoIDEsIHggOjogXyApIC0+XG4gICAgICAgIFsgeCBdXG5cbiAgICAgICggMiwgeCA6OiB5IDo6IF8gKSAtPlxuICAgICAgICBbIHgsIHkgXVxuXG4gICAgICAoIDMsIHggOjogeSA6OiB6IDo6IF8gKSAtPlxuICAgICAgICBbIHgsIHksIHogXVxuXG4gICAgICAoIF8sIHggOjogeSA6OiB6IDo6IHcgOjogdGwgKSAtPlxuICAgICAgICBpZiBjdHIgPiAxMDAwIHRoZW5cbiAgICAgICAgICBjb25zIHggKGNvbnMgeSAoY29ucyB6IChjb25zIHcgKHRha2VUYWlsUmVjIChuIC0gNCkgdGwpKSkpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICBjb25zIHggKGNvbnMgeSAoY29ucyB6IChjb25zIHcgKHRha2VGYXN0IChjdHIgKyAxKSAobiAtIDQpIHRsKSkpKVxuXG4gICAgICBfIC0+XG4gICAgICAgIGxpc3RcblxudGFrZVRhaWxSZWMgOiBJbnQgLT4gTGlzdCBhIC0+IExpc3QgYVxudGFrZVRhaWxSZWMgbiBsaXN0ID1cbiAgcmV2ZXJzZSAodGFrZVJldmVyc2UgbiBsaXN0IFtdKVxuXG5cbnRha2VSZXZlcnNlIDogSW50IC0+IExpc3QgYSAtPiBMaXN0IGEgLT4gTGlzdCBhXG50YWtlUmV2ZXJzZSBuIGxpc3Qga2VwdCA9XG4gIGlmIG4gPD0gMCB0aGVuXG4gICAga2VwdFxuICBlbHNlXG4gICAgY2FzZSBsaXN0IG9mXG4gICAgICBbXSAtPlxuICAgICAgICBrZXB0XG5cbiAgICAgIHggOjogeHMgLT5cbiAgICAgICAgdGFrZVJldmVyc2UgKG4gLSAxKSB4cyAoY29ucyB4IGtlcHQpXG5cblxuey18IERyb3AgdGhlIGZpcnN0ICpuKiBtZW1iZXJzIG9mIGEgbGlzdC5cblxuICAgIGRyb3AgMiBbMSwyLDMsNF0gPT0gWzMsNF1cbi19XG5kcm9wIDogSW50IC0+IExpc3QgYSAtPiBMaXN0IGFcbmRyb3AgbiBsaXN0ID1cbiAgaWYgbiA8PSAwIHRoZW5cbiAgICBsaXN0XG5cbiAgZWxzZVxuICAgIGNhc2UgbGlzdCBvZlxuICAgICAgW10gLT5cbiAgICAgICAgbGlzdFxuXG4gICAgICB4IDo6IHhzIC0+XG4gICAgICAgIGRyb3AgKG4tMSkgeHNcblxuXG57LXwgUGFydGl0aW9uIGEgbGlzdCBiYXNlZCBvbiBzb21lIHRlc3QuIFRoZSBmaXJzdCBsaXN0IGNvbnRhaW5zIGFsbCB2YWx1ZXNcbnRoYXQgc2F0aXNmeSB0aGUgdGVzdCwgYW5kIHRoZSBzZWNvbmQgbGlzdCBjb250YWlucyBhbGwgdGhlIHZhbHVlIHRoYXQgZG8gbm90LlxuXG4gICAgcGFydGl0aW9uIChcXHggLT4geCA8IDMpIFswLDEsMiwzLDQsNV0gPT0gKFswLDEsMl0sIFszLDQsNV0pXG4gICAgcGFydGl0aW9uIGlzRXZlbiAgICAgICAgWzAsMSwyLDMsNCw1XSA9PSAoWzAsMiw0XSwgWzEsMyw1XSlcbi19XG5wYXJ0aXRpb24gOiAoYSAtPiBCb29sKSAtPiBMaXN0IGEgLT4gKExpc3QgYSwgTGlzdCBhKVxucGFydGl0aW9uIHByZWQgbGlzdCA9XG4gIGxldFxuICAgIHN0ZXAgeCAodHJ1ZXMsIGZhbHNlcykgPVxuICAgICAgaWYgcHJlZCB4IHRoZW5cbiAgICAgICAgKGNvbnMgeCB0cnVlcywgZmFsc2VzKVxuXG4gICAgICBlbHNlXG4gICAgICAgICh0cnVlcywgY29ucyB4IGZhbHNlcylcbiAgaW5cbiAgICBmb2xkciBzdGVwIChbXSxbXSkgbGlzdFxuXG5cbnstfCBEZWNvbXBvc2UgYSBsaXN0IG9mIHR1cGxlcyBpbnRvIGEgdHVwbGUgb2YgbGlzdHMuXG5cbiAgICB1bnppcCBbKDAsIFRydWUpLCAoMTcsIEZhbHNlKSwgKDEzMzcsIFRydWUpXSA9PSAoWzAsMTcsMTMzN10sIFtUcnVlLEZhbHNlLFRydWVdKVxuLX1cbnVuemlwIDogTGlzdCAoYSxiKSAtPiAoTGlzdCBhLCBMaXN0IGIpXG51bnppcCBwYWlycyA9XG4gIGxldFxuICAgIHN0ZXAgKHgseSkgKHhzLHlzKSA9XG4gICAgICAoY29ucyB4IHhzLCBjb25zIHkgeXMpXG4gIGluXG4gICAgZm9sZHIgc3RlcCAoW10sIFtdKSBwYWlyc1xuJ30pKSwKCQkJX1V0aWxzX1R1cGxlMigKCQkJJ01heWJlLmVsbScsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkQmxvYk5vZGUoCgkJCQl7dXRmODogJ21vZHVsZSBNYXliZSBleHBvc2luZ1xuICAoIE1heWJlKC4uKVxuICAsIGFuZFRoZW5cbiAgLCBtYXAsIG1hcDIsIG1hcDMsIG1hcDQsIG1hcDVcbiAgLCB3aXRoRGVmYXVsdFxuICApXG5cbnstfCBUaGlzIGxpYnJhcnkgZmlsbHMgYSBidW5jaCBvZiBpbXBvcnRhbnQgbmljaGVzIGluIEVsbS4gQSBgTWF5YmVgIGNhbiBoZWxwXG55b3Ugd2l0aCBvcHRpb25hbCBhcmd1bWVudHMsIGVycm9yIGhhbmRsaW5nLCBhbmQgcmVjb3JkcyB3aXRoIG9wdGlvbmFsIGZpZWxkcy5cblxuIyBEZWZpbml0aW9uXG5AZG9jcyBNYXliZVxuXG4jIENvbW1vbiBIZWxwZXJzXG5AZG9jcyB3aXRoRGVmYXVsdCwgbWFwLCBtYXAyLCBtYXAzLCBtYXA0LCBtYXA1XG5cbiMgQ2hhaW5pbmcgTWF5YmVzXG5AZG9jcyBhbmRUaGVuXG4tfVxuXG5cbmltcG9ydCBCYXNpY3MgZXhwb3NpbmcgKEJvb2woLi4pKVxuXG5cblxuey18IFJlcHJlc2VudCB2YWx1ZXMgdGhhdCBtYXkgb3IgbWF5IG5vdCBleGlzdC4gSXQgY2FuIGJlIHVzZWZ1bCBpZiB5b3UgaGF2ZSBhXG5yZWNvcmQgZmllbGQgdGhhdCBpcyBvbmx5IGZpbGxlZCBpbiBzb21ldGltZXMuIE9yIGlmIGEgZnVuY3Rpb24gdGFrZXMgYSB2YWx1ZVxuc29tZXRpbWVzLCBidXQgZG9lcyBub3QgYWJzb2x1dGVseSBuZWVkIGl0LlxuXG4gICAgLS0gQSBwZXJzb24sIGJ1dCBtYXliZSB3ZSBkbyBub3Qga25vdyB0aGVpciBhZ2UuXG4gICAgdHlwZSBhbGlhcyBQZXJzb24gPVxuICAgICAgICB7IG5hbWUgOiBTdHJpbmdcbiAgICAgICAgLCBhZ2UgOiBNYXliZSBJbnRcbiAgICAgICAgfVxuXG4gICAgdG9tID0geyBuYW1lID0gXCJUb21cIiwgYWdlID0gSnVzdCA0MiB9XG4gICAgc3VlID0geyBuYW1lID0gXCJTdWVcIiwgYWdlID0gTm90aGluZyB9XG4tfVxudHlwZSBNYXliZSBhXG4gICAgPSBKdXN0IGFcbiAgICB8IE5vdGhpbmdcblxuXG57LXwgUHJvdmlkZSBhIGRlZmF1bHQgdmFsdWUsIHR1cm5pbmcgYW4gb3B0aW9uYWwgdmFsdWUgaW50byBhIG5vcm1hbFxudmFsdWUuICBUaGlzIGNvbWVzIGluIGhhbmR5IHdoZW4gcGFpcmVkIHdpdGggZnVuY3Rpb25zIGxpa2VcbltgRGljdC5nZXRgXShEaWN0I2dldCkgd2hpY2ggZ2l2ZXMgYmFjayBhIGBNYXliZWAuXG5cbiAgICB3aXRoRGVmYXVsdCAxMDAgKEp1c3QgNDIpICAgLS0gNDJcbiAgICB3aXRoRGVmYXVsdCAxMDAgTm90aGluZyAgICAgLS0gMTAwXG5cbiAgICB3aXRoRGVmYXVsdCBcInVua25vd25cIiAoRGljdC5nZXQgXCJUb21cIiBEaWN0LmVtcHR5KSAgIC0tIFwidW5rbm93blwiXG5cbioqTm90ZToqKiBUaGlzIGNhbiBiZSBvdmVydXNlZCEgTWFueSBjYXNlcyBhcmUgYmV0dGVyIGhhbmRsZWQgYnkgYSBgY2FzZWBcbmV4cHJlc3Npb24uIEFuZCBpZiB5b3UgZW5kIHVwIHVzaW5nIGB3aXRoRGVmYXVsdGAgYSBsb3QsIGl0IGNhbiBiZSBhIGdvb2Qgc2lnblxudGhhdCBhIFtjdXN0b20gdHlwZV1bY3RdIHdpbGwgY2xlYW4geW91ciBjb2RlIHVwIHF1aXRlIGEgYml0IVxuXG5bY3RdOiBodHRwczovL2d1aWRlLmVsbS1sYW5nLm9yZy90eXBlcy9jdXN0b21fdHlwZXMuaHRtbFxuLX1cbndpdGhEZWZhdWx0IDogYSAtPiBNYXliZSBhIC0+IGFcbndpdGhEZWZhdWx0IGRlZmF1bHQgbWF5YmUgPVxuICAgIGNhc2UgbWF5YmUgb2ZcbiAgICAgIEp1c3QgdmFsdWUgLT4gdmFsdWVcbiAgICAgIE5vdGhpbmcgLT4gZGVmYXVsdFxuXG5cbnstfCBUcmFuc2Zvcm0gYSBgTWF5YmVgIHZhbHVlIHdpdGggYSBnaXZlbiBmdW5jdGlvbjpcblxuICAgIG1hcCBzcXJ0IChKdXN0IDkpID09IEp1c3QgM1xuICAgIG1hcCBzcXJ0IE5vdGhpbmcgID09IE5vdGhpbmdcblxuICAgIG1hcCBzcXJ0IChTdHJpbmcudG9GbG9hdCBcIjlcIikgPT0gSnVzdCAzXG4gICAgbWFwIHNxcnQgKFN0cmluZy50b0Zsb2F0IFwieFwiKSA9PSBOb3RoaW5nXG5cbi19XG5tYXAgOiAoYSAtPiBiKSAtPiBNYXliZSBhIC0+IE1heWJlIGJcbm1hcCBmIG1heWJlID1cbiAgY2FzZSBtYXliZSBvZlxuICAgIEp1c3QgdmFsdWUgLT5cbiAgICAgIEp1c3QgKGYgdmFsdWUpXG5cbiAgICBOb3RoaW5nIC0+XG4gICAgICBOb3RoaW5nXG5cblxuey18IEFwcGx5IGEgZnVuY3Rpb24gaWYgYWxsIHRoZSBhcmd1bWVudHMgYXJlIGBKdXN0YCBhIHZhbHVlLlxuXG4gICAgbWFwMiAoKykgKEp1c3QgMykgKEp1c3QgNCkgPT0gSnVzdCA3XG4gICAgbWFwMiAoKykgKEp1c3QgMykgTm90aGluZyA9PSBOb3RoaW5nXG4gICAgbWFwMiAoKykgTm90aGluZyAoSnVzdCA0KSA9PSBOb3RoaW5nXG5cbiAgICBtYXAyICgrKSAoU3RyaW5nLnRvSW50IFwiMVwiKSAoU3RyaW5nLnRvSW50IFwiMTIzXCIpID09IEp1c3QgMTI0XG4gICAgbWFwMiAoKykgKFN0cmluZy50b0ludCBcInhcIikgKFN0cmluZy50b0ludCBcIjEyM1wiKSA9PSBOb3RoaW5nXG4gICAgbWFwMiAoKykgKFN0cmluZy50b0ludCBcIjFcIikgKFN0cmluZy50b0ludCBcIjEuM1wiKSA9PSBOb3RoaW5nXG4tfVxubWFwMiA6IChhIC0+IGIgLT4gdmFsdWUpIC0+IE1heWJlIGEgLT4gTWF5YmUgYiAtPiBNYXliZSB2YWx1ZVxubWFwMiBmdW5jIG1hIG1iID1cbiAgY2FzZSBtYSBvZlxuICAgIE5vdGhpbmcgLT5cbiAgICAgIE5vdGhpbmdcblxuICAgIEp1c3QgYSAtPlxuICAgICAgY2FzZSBtYiBvZlxuICAgICAgICBOb3RoaW5nIC0+XG4gICAgICAgICAgTm90aGluZ1xuXG4gICAgICAgIEp1c3QgYiAtPlxuICAgICAgICAgIEp1c3QgKGZ1bmMgYSBiKVxuXG5cbnstfC19XG5tYXAzIDogKGEgLT4gYiAtPiBjIC0+IHZhbHVlKSAtPiBNYXliZSBhIC0+IE1heWJlIGIgLT4gTWF5YmUgYyAtPiBNYXliZSB2YWx1ZVxubWFwMyBmdW5jIG1hIG1iIG1jID1cbiAgY2FzZSBtYSBvZlxuICAgIE5vdGhpbmcgLT5cbiAgICAgIE5vdGhpbmdcblxuICAgIEp1c3QgYSAtPlxuICAgICAgY2FzZSBtYiBvZlxuICAgICAgICBOb3RoaW5nIC0+XG4gICAgICAgICAgTm90aGluZ1xuXG4gICAgICAgIEp1c3QgYiAtPlxuICAgICAgICAgIGNhc2UgbWMgb2ZcbiAgICAgICAgICAgIE5vdGhpbmcgLT5cbiAgICAgICAgICAgICAgTm90aGluZ1xuXG4gICAgICAgICAgICBKdXN0IGMgLT5cbiAgICAgICAgICAgICAgSnVzdCAoZnVuYyBhIGIgYylcblxuXG57LXwtfVxubWFwNCA6IChhIC0+IGIgLT4gYyAtPiBkIC0+IHZhbHVlKSAtPiBNYXliZSBhIC0+IE1heWJlIGIgLT4gTWF5YmUgYyAtPiBNYXliZSBkIC0+IE1heWJlIHZhbHVlXG5tYXA0IGZ1bmMgbWEgbWIgbWMgbWQgPVxuICBjYXNlIG1hIG9mXG4gICAgTm90aGluZyAtPlxuICAgICAgTm90aGluZ1xuXG4gICAgSnVzdCBhIC0+XG4gICAgICBjYXNlIG1iIG9mXG4gICAgICAgIE5vdGhpbmcgLT5cbiAgICAgICAgICBOb3RoaW5nXG5cbiAgICAgICAgSnVzdCBiIC0+XG4gICAgICAgICAgY2FzZSBtYyBvZlxuICAgICAgICAgICAgTm90aGluZyAtPlxuICAgICAgICAgICAgICBOb3RoaW5nXG5cbiAgICAgICAgICAgIEp1c3QgYyAtPlxuICAgICAgICAgICAgICBjYXNlIG1kIG9mXG4gICAgICAgICAgICAgICAgTm90aGluZyAtPlxuICAgICAgICAgICAgICAgICAgTm90aGluZ1xuXG4gICAgICAgICAgICAgICAgSnVzdCBkIC0+XG4gICAgICAgICAgICAgICAgICBKdXN0IChmdW5jIGEgYiBjIGQpXG5cblxuey18LX1cbm1hcDUgOiAoYSAtPiBiIC0+IGMgLT4gZCAtPiBlIC0+IHZhbHVlKSAtPiBNYXliZSBhIC0+IE1heWJlIGIgLT4gTWF5YmUgYyAtPiBNYXliZSBkIC0+IE1heWJlIGUgLT4gTWF5YmUgdmFsdWVcbm1hcDUgZnVuYyBtYSBtYiBtYyBtZCBtZSA9XG4gIGNhc2UgbWEgb2ZcbiAgICBOb3RoaW5nIC0+XG4gICAgICBOb3RoaW5nXG5cbiAgICBKdXN0IGEgLT5cbiAgICAgIGNhc2UgbWIgb2ZcbiAgICAgICAgTm90aGluZyAtPlxuICAgICAgICAgIE5vdGhpbmdcblxuICAgICAgICBKdXN0IGIgLT5cbiAgICAgICAgICBjYXNlIG1jIG9mXG4gICAgICAgICAgICBOb3RoaW5nIC0+XG4gICAgICAgICAgICAgIE5vdGhpbmdcblxuICAgICAgICAgICAgSnVzdCBjIC0+XG4gICAgICAgICAgICAgIGNhc2UgbWQgb2ZcbiAgICAgICAgICAgICAgICBOb3RoaW5nIC0+XG4gICAgICAgICAgICAgICAgICBOb3RoaW5nXG5cbiAgICAgICAgICAgICAgICBKdXN0IGQgLT5cbiAgICAgICAgICAgICAgICAgIGNhc2UgbWUgb2ZcbiAgICAgICAgICAgICAgICAgICAgTm90aGluZyAtPlxuICAgICAgICAgICAgICAgICAgICAgIE5vdGhpbmdcblxuICAgICAgICAgICAgICAgICAgICBKdXN0IGUgLT5cbiAgICAgICAgICAgICAgICAgICAgICBKdXN0IChmdW5jIGEgYiBjIGQgZSlcblxuXG57LXwgQ2hhaW4gdG9nZXRoZXIgbWFueSBjb21wdXRhdGlvbnMgdGhhdCBtYXkgZmFpbC4gSXQgaXMgaGVscGZ1bCB0byBzZWUgaXRzXG5kZWZpbml0aW9uOlxuXG4gICAgYW5kVGhlbiA6IChhIC0+IE1heWJlIGIpIC0+IE1heWJlIGEgLT4gTWF5YmUgYlxuICAgIGFuZFRoZW4gY2FsbGJhY2sgbWF5YmUgPVxuICAgICAgICBjYXNlIG1heWJlIG9mXG4gICAgICAgICAgICBKdXN0IHZhbHVlIC0+XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgdmFsdWVcblxuICAgICAgICAgICAgTm90aGluZyAtPlxuICAgICAgICAgICAgICAgIE5vdGhpbmdcblxuVGhpcyBtZWFucyB3ZSBvbmx5IGNvbnRpbnVlIHdpdGggdGhlIGNhbGxiYWNrIGlmIHRoaW5ncyBhcmUgZ29pbmcgd2VsbC4gRm9yXG5leGFtcGxlLCBzYXkgeW91IG5lZWQgdG8gcGFyc2Ugc29tZSB1c2VyIGlucHV0IGFzIGEgbW9udGg6XG5cbiAgICBwYXJzZU1vbnRoIDogU3RyaW5nIC0+IE1heWJlIEludFxuICAgIHBhcnNlTW9udGggdXNlcklucHV0ID1cbiAgICAgICAgU3RyaW5nLnRvSW50IHVzZXJJbnB1dFxuICAgICAgICAgIHw+IGFuZFRoZW4gdG9WYWxpZE1vbnRoXG5cbiAgICB0b1ZhbGlkTW9udGggOiBJbnQgLT4gTWF5YmUgSW50XG4gICAgdG9WYWxpZE1vbnRoIG1vbnRoID1cbiAgICAgICAgaWYgMSA8PSBtb250aCAmJiBtb250aCA8PSAxMiB0aGVuXG4gICAgICAgICAgICBKdXN0IG1vbnRoXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIE5vdGhpbmdcblxuSW4gdGhlIGBwYXJzZU1vbnRoYCBmdW5jdGlvbiwgaWYgYFN0cmluZy50b0ludGAgcHJvZHVjZXMgYE5vdGhpbmdgIChiZWNhdXNlXG50aGUgYHVzZXJJbnB1dGAgd2FzIG5vdCBhbiBpbnRlZ2VyKSB0aGlzIGVudGlyZSBjaGFpbiBvZiBvcGVyYXRpb25zIHdpbGxcbnNob3J0LWNpcmN1aXQgYW5kIHJlc3VsdCBpbiBgTm90aGluZ2AuIElmIGB0b1ZhbGlkTW9udGhgIHJlc3VsdHMgaW4gYE5vdGhpbmdgLFxuYWdhaW4gdGhlIGNoYWluIG9mIGNvbXB1dGF0aW9ucyB3aWxsIHJlc3VsdCBpbiBgTm90aGluZ2AuXG4tfVxuYW5kVGhlbiA6IChhIC0+IE1heWJlIGIpIC0+IE1heWJlIGEgLT4gTWF5YmUgYlxuYW5kVGhlbiBjYWxsYmFjayBtYXliZVZhbHVlID1cbiAgICBjYXNlIG1heWJlVmFsdWUgb2ZcbiAgICAgICAgSnVzdCB2YWx1ZSAtPlxuICAgICAgICAgICAgY2FsbGJhY2sgdmFsdWVcblxuICAgICAgICBOb3RoaW5nIC0+XG4gICAgICAgICAgICBOb3RoaW5nXG5cblxuXG4tLSBGT1IgSU5URVJOQUwgVVNFIE9OTFlcbi0tXG4tLSBVc2UgYGNhc2VgIGV4cHJlc3Npb25zIGZvciB0aGlzIGluIEVsbSBjb2RlIVxuXG5cbmlzSnVzdCA6IE1heWJlIGEgLT4gQm9vbFxuaXNKdXN0IG1heWJlID1cbiAgY2FzZSBtYXliZSBvZlxuICAgIEp1c3QgXyAtPlxuICAgICAgVHJ1ZVxuXG4gICAgTm90aGluZyAtPlxuICAgICAgRmFsc2VcblxuXG5kZXN0cnVjdCA6IGIgLT4gKGEgLT4gYikgLT4gTWF5YmUgYSAtPiBiXG5kZXN0cnVjdCBkZWZhdWx0IGZ1bmMgbWF5YmUgPVxuICBjYXNlIG1heWJlIG9mXG4gICAgSnVzdCBhIC0+XG4gICAgICBmdW5jIGFcblxuICAgIE5vdGhpbmcgLT5cbiAgICAgIGRlZmF1bHRcbid9KSksCgkJCV9VdGlsc19UdXBsZTIoCgkJCSdSZXN1bHQuZWxtJywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRCbG9iTm9kZSgKCQkJCXt1dGY4OiAnbW9kdWxlIFJlc3VsdCBleHBvc2luZ1xuICAoIFJlc3VsdCguLilcbiAgLCB3aXRoRGVmYXVsdFxuICAsIG1hcCwgbWFwMiwgbWFwMywgbWFwNCwgbWFwNVxuICAsIGFuZFRoZW5cbiAgLCB0b01heWJlLCBmcm9tTWF5YmUsIG1hcEVycm9yXG4gIClcblxuey18IEEgYFJlc3VsdGAgaXMgdGhlIHJlc3VsdCBvZiBhIGNvbXB1dGF0aW9uIHRoYXQgbWF5IGZhaWwuIFRoaXMgaXMgYSBncmVhdFxud2F5IHRvIG1hbmFnZSBlcnJvcnMgaW4gRWxtLlxuXG4jIFR5cGUgYW5kIENvbnN0cnVjdG9yc1xuQGRvY3MgUmVzdWx0XG5cbiMgTWFwcGluZ1xuQGRvY3MgbWFwLCBtYXAyLCBtYXAzLCBtYXA0LCBtYXA1XG5cbiMgQ2hhaW5pbmdcbkBkb2NzIGFuZFRoZW5cblxuIyBIYW5kbGluZyBFcnJvcnNcbkBkb2NzIHdpdGhEZWZhdWx0LCB0b01heWJlLCBmcm9tTWF5YmUsIG1hcEVycm9yXG4tfVxuXG5pbXBvcnQgQmFzaWNzIGV4cG9zaW5nICggQm9vbCguLikgKVxuaW1wb3J0IE1heWJlIGV4cG9zaW5nICggTWF5YmUoLi4pIClcblxuXG57LXwgQSBgUmVzdWx0YCBpcyBlaXRoZXIgYE9rYCBtZWFuaW5nIHRoZSBjb21wdXRhdGlvbiBzdWNjZWVkZWQsIG9yIGl0IGlzIGFuXG5gRXJyYCBtZWFuaW5nIHRoYXQgdGhlcmUgd2FzIHNvbWUgZmFpbHVyZS5cbi19XG50eXBlIFJlc3VsdCBlcnJvciB2YWx1ZVxuICAgID0gT2sgdmFsdWVcbiAgICB8IEVyciBlcnJvclxuXG5cbnstfCBJZiB0aGUgcmVzdWx0IGlzIGBPa2AgcmV0dXJuIHRoZSB2YWx1ZSwgYnV0IGlmIHRoZSByZXN1bHQgaXMgYW4gYEVycmAgdGhlblxucmV0dXJuIGEgZ2l2ZW4gZGVmYXVsdCB2YWx1ZS4gVGhlIGZvbGxvd2luZyBleGFtcGxlcyB0cnkgdG8gcGFyc2UgaW50ZWdlcnMuXG5cbiAgICBSZXN1bHQud2l0aERlZmF1bHQgMCAoT2sgMTIzKSAgID09IDEyM1xuICAgIFJlc3VsdC53aXRoRGVmYXVsdCAwIChFcnIgXCJub1wiKSA9PSAwXG4tfVxud2l0aERlZmF1bHQgOiBhIC0+IFJlc3VsdCB4IGEgLT4gYVxud2l0aERlZmF1bHQgZGVmIHJlc3VsdCA9XG4gIGNhc2UgcmVzdWx0IG9mXG4gICAgT2sgYSAtPlxuICAgICAgICBhXG5cbiAgICBFcnIgXyAtPlxuICAgICAgICBkZWZcblxuXG57LXwgQXBwbHkgYSBmdW5jdGlvbiB0byBhIHJlc3VsdC4gSWYgdGhlIHJlc3VsdCBpcyBgT2tgLCBpdCB3aWxsIGJlIGNvbnZlcnRlZC5cbklmIHRoZSByZXN1bHQgaXMgYW4gYEVycmAsIHRoZSBzYW1lIGVycm9yIHZhbHVlIHdpbGwgcHJvcGFnYXRlIHRocm91Z2guXG5cbiAgICBtYXAgc3FydCAoT2sgNC4wKSAgICAgICAgICA9PSBPayAyLjBcbiAgICBtYXAgc3FydCAoRXJyIFwiYmFkIGlucHV0XCIpID09IEVyciBcImJhZCBpbnB1dFwiXG4tfVxubWFwIDogKGEgLT4gdmFsdWUpIC0+IFJlc3VsdCB4IGEgLT4gUmVzdWx0IHggdmFsdWVcbm1hcCBmdW5jIHJhID1cbiAgY2FzZSByYSBvZlxuICAgIE9rIGEgLT5cbiAgICAgIE9rIChmdW5jIGEpXG5cbiAgICBFcnIgZSAtPlxuICAgICAgRXJyIGVcblxuXG57LXwgQXBwbHkgYSBmdW5jdGlvbiBpZiBib3RoIHJlc3VsdHMgYXJlIGBPa2AuIElmIG5vdCwgdGhlIGZpcnN0IGBFcnJgIHdpbGxcbnByb3BhZ2F0ZSB0aHJvdWdoLlxuXG4gICAgbWFwMiBtYXggKE9rIDQyKSAgIChPayAxMykgICA9PSBPayA0MlxuICAgIG1hcDIgbWF4IChFcnIgXCJ4XCIpIChPayAxMykgICA9PSBFcnIgXCJ4XCJcbiAgICBtYXAyIG1heCAoT2sgNDIpICAgKEVyciBcInlcIikgPT0gRXJyIFwieVwiXG4gICAgbWFwMiBtYXggKEVyciBcInhcIikgKEVyciBcInlcIikgPT0gRXJyIFwieFwiXG5cblRoaXMgY2FuIGJlIHVzZWZ1bCBpZiB5b3UgaGF2ZSB0d28gY29tcHV0YXRpb25zIHRoYXQgbWF5IGZhaWwsIGFuZCB5b3Ugd2FudFxudG8gcHV0IHRoZW0gdG9nZXRoZXIgcXVpY2tseS5cbi19XG5tYXAyIDogKGEgLT4gYiAtPiB2YWx1ZSkgLT4gUmVzdWx0IHggYSAtPiBSZXN1bHQgeCBiIC0+IFJlc3VsdCB4IHZhbHVlXG5tYXAyIGZ1bmMgcmEgcmIgPVxuICBjYXNlIHJhIG9mXG4gICAgRXJyIHggLT5cbiAgICAgIEVyciB4XG5cbiAgICBPayBhIC0+XG4gICAgICBjYXNlIHJiIG9mXG4gICAgICAgIEVyciB4IC0+XG4gICAgICAgICAgRXJyIHhcblxuICAgICAgICBPayBiIC0+XG4gICAgICAgICAgT2sgKGZ1bmMgYSBiKVxuXG5cbnstfC19XG5tYXAzIDogKGEgLT4gYiAtPiBjIC0+IHZhbHVlKSAtPiBSZXN1bHQgeCBhIC0+IFJlc3VsdCB4IGIgLT4gUmVzdWx0IHggYyAtPiBSZXN1bHQgeCB2YWx1ZVxubWFwMyBmdW5jIHJhIHJiIHJjID1cbiAgY2FzZSByYSBvZlxuICAgIEVyciB4IC0+XG4gICAgICBFcnIgeFxuXG4gICAgT2sgYSAtPlxuICAgICAgY2FzZSByYiBvZlxuICAgICAgICBFcnIgeCAtPlxuICAgICAgICAgIEVyciB4XG5cbiAgICAgICAgT2sgYiAtPlxuICAgICAgICAgIGNhc2UgcmMgb2ZcbiAgICAgICAgICAgIEVyciB4IC0+XG4gICAgICAgICAgICAgIEVyciB4XG5cbiAgICAgICAgICAgIE9rIGMgLT5cbiAgICAgICAgICAgICAgT2sgKGZ1bmMgYSBiIGMpXG5cblxuey18LX1cbm1hcDQgOiAoYSAtPiBiIC0+IGMgLT4gZCAtPiB2YWx1ZSkgLT4gUmVzdWx0IHggYSAtPiBSZXN1bHQgeCBiIC0+IFJlc3VsdCB4IGMgLT4gUmVzdWx0IHggZCAtPiBSZXN1bHQgeCB2YWx1ZVxubWFwNCBmdW5jIHJhIHJiIHJjIHJkID1cbiAgY2FzZSByYSBvZlxuICAgIEVyciB4IC0+XG4gICAgICBFcnIgeFxuXG4gICAgT2sgYSAtPlxuICAgICAgY2FzZSByYiBvZlxuICAgICAgICBFcnIgeCAtPlxuICAgICAgICAgIEVyciB4XG5cbiAgICAgICAgT2sgYiAtPlxuICAgICAgICAgIGNhc2UgcmMgb2ZcbiAgICAgICAgICAgIEVyciB4IC0+XG4gICAgICAgICAgICAgIEVyciB4XG5cbiAgICAgICAgICAgIE9rIGMgLT5cbiAgICAgICAgICAgICAgY2FzZSByZCBvZlxuICAgICAgICAgICAgICAgIEVyciB4IC0+XG4gICAgICAgICAgICAgICAgICBFcnIgeFxuXG4gICAgICAgICAgICAgICAgT2sgZCAtPlxuICAgICAgICAgICAgICAgICAgT2sgKGZ1bmMgYSBiIGMgZClcblxuXG57LXwtfVxubWFwNSA6IChhIC0+IGIgLT4gYyAtPiBkIC0+IGUgLT4gdmFsdWUpIC0+IFJlc3VsdCB4IGEgLT4gUmVzdWx0IHggYiAtPiBSZXN1bHQgeCBjIC0+IFJlc3VsdCB4IGQgLT4gUmVzdWx0IHggZSAtPiBSZXN1bHQgeCB2YWx1ZVxubWFwNSBmdW5jIHJhIHJiIHJjIHJkIHJlID1cbiAgY2FzZSByYSBvZlxuICAgIEVyciB4IC0+XG4gICAgICBFcnIgeFxuXG4gICAgT2sgYSAtPlxuICAgICAgY2FzZSByYiBvZlxuICAgICAgICBFcnIgeCAtPlxuICAgICAgICAgIEVyciB4XG5cbiAgICAgICAgT2sgYiAtPlxuICAgICAgICAgIGNhc2UgcmMgb2ZcbiAgICAgICAgICAgIEVyciB4IC0+XG4gICAgICAgICAgICAgIEVyciB4XG5cbiAgICAgICAgICAgIE9rIGMgLT5cbiAgICAgICAgICAgICAgY2FzZSByZCBvZlxuICAgICAgICAgICAgICAgIEVyciB4IC0+XG4gICAgICAgICAgICAgICAgICBFcnIgeFxuXG4gICAgICAgICAgICAgICAgT2sgZCAtPlxuICAgICAgICAgICAgICAgICAgY2FzZSByZSBvZlxuICAgICAgICAgICAgICAgICAgICBFcnIgeCAtPlxuICAgICAgICAgICAgICAgICAgICAgIEVyciB4XG5cbiAgICAgICAgICAgICAgICAgICAgT2sgZSAtPlxuICAgICAgICAgICAgICAgICAgICAgIE9rIChmdW5jIGEgYiBjIGQgZSlcblxuXG57LXwgQ2hhaW4gdG9nZXRoZXIgYSBzZXF1ZW5jZSBvZiBjb21wdXRhdGlvbnMgdGhhdCBtYXkgZmFpbC4gSXQgaXMgaGVscGZ1bFxudG8gc2VlIGl0cyBkZWZpbml0aW9uOlxuXG4gICAgYW5kVGhlbiA6IChhIC0+IFJlc3VsdCBlIGIpIC0+IFJlc3VsdCBlIGEgLT4gUmVzdWx0IGUgYlxuICAgIGFuZFRoZW4gY2FsbGJhY2sgcmVzdWx0ID1cbiAgICAgICAgY2FzZSByZXN1bHQgb2ZcbiAgICAgICAgICBPayB2YWx1ZSAtPiBjYWxsYmFjayB2YWx1ZVxuICAgICAgICAgIEVyciBtc2cgLT4gRXJyIG1zZ1xuXG5UaGlzIG1lYW5zIHdlIG9ubHkgY29udGludWUgd2l0aCB0aGUgY2FsbGJhY2sgaWYgdGhpbmdzIGFyZSBnb2luZyB3ZWxsLiBGb3JcbmV4YW1wbGUsIHNheSB5b3UgbmVlZCB0byB1c2UgKGB0b0ludCA6IFN0cmluZyAtPiBSZXN1bHQgU3RyaW5nIEludGApIHRvIHBhcnNlXG5hIG1vbnRoIGFuZCBtYWtlIHN1cmUgaXQgaXMgYmV0d2VlbiAxIGFuZCAxMjpcblxuICAgIHRvVmFsaWRNb250aCA6IEludCAtPiBSZXN1bHQgU3RyaW5nIEludFxuICAgIHRvVmFsaWRNb250aCBtb250aCA9XG4gICAgICAgIGlmIG1vbnRoID49IDEgJiYgbW9udGggPD0gMTJcbiAgICAgICAgICAgIHRoZW4gT2sgbW9udGhcbiAgICAgICAgICAgIGVsc2UgRXJyIFwibW9udGhzIG11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMlwiXG5cbiAgICB0b01vbnRoIDogU3RyaW5nIC0+IFJlc3VsdCBTdHJpbmcgSW50XG4gICAgdG9Nb250aCByYXdTdHJpbmcgPVxuICAgICAgICB0b0ludCByYXdTdHJpbmdcbiAgICAgICAgICB8PiBhbmRUaGVuIHRvVmFsaWRNb250aFxuXG4gICAgLS0gdG9Nb250aCBcIjRcIiA9PSBPayA0XG4gICAgLS0gdG9Nb250aCBcIjlcIiA9PSBPayA5XG4gICAgLS0gdG9Nb250aCBcImFcIiA9PSBFcnIgXCJjYW5ub3QgcGFyc2UgdG8gYW4gSW50XCJcbiAgICAtLSB0b01vbnRoIFwiMFwiID09IEVyciBcIm1vbnRocyBtdXN0IGJlIGJldHdlZW4gMSBhbmQgMTJcIlxuXG5UaGlzIGFsbG93cyB1cyB0byBjb21lIG91dCBvZiBhIGNoYWluIG9mIG9wZXJhdGlvbnMgd2l0aCBxdWl0ZSBhIHNwZWNpZmljIGVycm9yXG5tZXNzYWdlLiBJdCBpcyBvZnRlbiBiZXN0IHRvIGNyZWF0ZSBhIGN1c3RvbSB0eXBlIHRoYXQgZXhwbGljaXRseSByZXByZXNlbnRzXG50aGUgZXhhY3Qgd2F5cyB5b3VyIGNvbXB1dGF0aW9uIG1heSBmYWlsLiBUaGlzIHdheSBpdCBpcyBlYXN5IHRvIGhhbmRsZSBpbiB5b3VyXG5jb2RlLlxuLX1cbmFuZFRoZW4gOiAoYSAtPiBSZXN1bHQgeCBiKSAtPiBSZXN1bHQgeCBhIC0+IFJlc3VsdCB4IGJcbmFuZFRoZW4gY2FsbGJhY2sgcmVzdWx0ID1cbiAgICBjYXNlIHJlc3VsdCBvZlxuICAgICAgT2sgdmFsdWUgLT5cbiAgICAgICAgY2FsbGJhY2sgdmFsdWVcblxuICAgICAgRXJyIG1zZyAtPlxuICAgICAgICBFcnIgbXNnXG5cblxuey18IFRyYW5zZm9ybSBhbiBgRXJyYCB2YWx1ZS4gRm9yIGV4YW1wbGUsIHNheSB0aGUgZXJyb3JzIHdlIGdldCBoYXZlIHRvbyBtdWNoXG5pbmZvcm1hdGlvbjpcblxuICAgIHBhcnNlSW50IDogU3RyaW5nIC0+IFJlc3VsdCBQYXJzZUVycm9yIEludFxuXG4gICAgdHlwZSBhbGlhcyBQYXJzZUVycm9yID1cbiAgICAgICAgeyBtZXNzYWdlIDogU3RyaW5nXG4gICAgICAgICwgY29kZSA6IEludFxuICAgICAgICAsIHBvc2l0aW9uIDogKEludCxJbnQpXG4gICAgICAgIH1cblxuICAgIG1hcEVycm9yIC5tZXNzYWdlIChwYXJzZUludCBcIjEyM1wiKSA9PSBPayAxMjNcbiAgICBtYXBFcnJvciAubWVzc2FnZSAocGFyc2VJbnQgXCJhYmNcIikgPT0gRXJyIFwiY2hhciBcJ2FcJyBpcyBub3QgYSBudW1iZXJcIlxuLX1cbm1hcEVycm9yIDogKHggLT4geSkgLT4gUmVzdWx0IHggYSAtPiBSZXN1bHQgeSBhXG5tYXBFcnJvciBmIHJlc3VsdCA9XG4gICAgY2FzZSByZXN1bHQgb2ZcbiAgICAgIE9rIHYgLT5cbiAgICAgICAgT2sgdlxuXG4gICAgICBFcnIgZSAtPlxuICAgICAgICBFcnIgKGYgZSlcblxuXG57LXwgQ29udmVydCB0byBhIHNpbXBsZXIgYE1heWJlYCBpZiB0aGUgYWN0dWFsIGVycm9yIG1lc3NhZ2UgaXMgbm90IG5lZWRlZCBvclxueW91IG5lZWQgdG8gaW50ZXJhY3Qgd2l0aCBzb21lIGNvZGUgdGhhdCBwcmltYXJpbHkgdXNlcyBtYXliZXMuXG5cbiAgICBwYXJzZUludCA6IFN0cmluZyAtPiBSZXN1bHQgUGFyc2VFcnJvciBJbnRcblxuICAgIG1heWJlUGFyc2VJbnQgOiBTdHJpbmcgLT4gTWF5YmUgSW50XG4gICAgbWF5YmVQYXJzZUludCBzdHJpbmcgPVxuICAgICAgICB0b01heWJlIChwYXJzZUludCBzdHJpbmcpXG4tfVxudG9NYXliZSA6IFJlc3VsdCB4IGEgLT4gTWF5YmUgYVxudG9NYXliZSByZXN1bHQgPVxuICAgIGNhc2UgcmVzdWx0IG9mXG4gICAgICBPayAgdiAtPiBKdXN0IHZcbiAgICAgIEVyciBfIC0+IE5vdGhpbmdcblxuXG57LXwgQ29udmVydCBmcm9tIGEgc2ltcGxlIGBNYXliZWAgdG8gaW50ZXJhY3Qgd2l0aCBzb21lIGNvZGUgdGhhdCBwcmltYXJpbHlcbnVzZXMgYFJlc3VsdHNgLlxuXG4gICAgcGFyc2VJbnQgOiBTdHJpbmcgLT4gTWF5YmUgSW50XG5cbiAgICByZXN1bHRQYXJzZUludCA6IFN0cmluZyAtPiBSZXN1bHQgU3RyaW5nIEludFxuICAgIHJlc3VsdFBhcnNlSW50IHN0cmluZyA9XG4gICAgICAgIGZyb21NYXliZSAoXCJlcnJvciBwYXJzaW5nIHN0cmluZzogXCIgKysgdG9TdHJpbmcgc3RyaW5nKSAocGFyc2VJbnQgc3RyaW5nKVxuLX1cbmZyb21NYXliZSA6IHggLT4gTWF5YmUgYSAtPiBSZXN1bHQgeCBhXG5mcm9tTWF5YmUgZXJyIG1heWJlID1cbiAgICBjYXNlIG1heWJlIG9mXG4gICAgICBKdXN0IHYgIC0+IE9rIHZcbiAgICAgIE5vdGhpbmcgLT4gRXJyIGVyclxuXG5cblxuLS0gRk9SIElOVEVSTkFMIFVTRSBPTkxZXG4tLVxuLS0gVXNlIGBjYXNlYCBleHByZXNzaW9ucyBmb3IgdGhpcyBpbiBFbG0gY29kZSFcblxuXG5pc09rIDogUmVzdWx0IHggYSAtPiBCb29sXG5pc09rIHJlc3VsdCA9XG4gIGNhc2UgcmVzdWx0IG9mXG4gICAgT2sgXyAtPlxuICAgICAgVHJ1ZVxuXG4gICAgRXJyIF8gLT5cbiAgICAgIEZhbHNlXG4nfSkpLAoJCQlfVXRpbHNfVHVwbGUyKAoJCQknU3RyaW5nLmVsbScsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkQmxvYk5vZGUoCgkJCQl7dXRmODogJ21vZHVsZSBTdHJpbmcgZXhwb3NpbmdcbiAgKCBTdHJpbmdcbiAgLCBpc0VtcHR5LCBsZW5ndGgsIHJldmVyc2UsIHJlcGVhdCwgcmVwbGFjZVxuICAsIGFwcGVuZCwgY29uY2F0LCBzcGxpdCwgam9pbiwgd29yZHMsIGxpbmVzXG4gICwgc2xpY2UsIGxlZnQsIHJpZ2h0LCBkcm9wTGVmdCwgZHJvcFJpZ2h0XG4gICwgY29udGFpbnMsIHN0YXJ0c1dpdGgsIGVuZHNXaXRoLCBpbmRleGVzLCBpbmRpY2VzXG4gICwgdG9JbnQsIGZyb21JbnRcbiAgLCB0b0Zsb2F0LCBmcm9tRmxvYXRcbiAgLCBmcm9tQ2hhciwgY29ucywgdW5jb25zXG4gICwgdG9MaXN0LCBmcm9tTGlzdFxuICAsIHRvVXBwZXIsIHRvTG93ZXIsIHBhZCwgcGFkTGVmdCwgcGFkUmlnaHQsIHRyaW0sIHRyaW1MZWZ0LCB0cmltUmlnaHRcbiAgLCBtYXAsIGZpbHRlciwgZm9sZGwsIGZvbGRyLCBhbnksIGFsbFxuICApXG5cbnstfCBBIGJ1aWx0LWluIHJlcHJlc2VudGF0aW9uIGZvciBlZmZpY2llbnQgc3RyaW5nIG1hbmlwdWxhdGlvbi4gU3RyaW5nIGxpdGVyYWxzXG5hcmUgZW5jbG9zZWQgaW4gYFwiZG91YmxlIHF1b3Rlc1wiYC4gU3RyaW5ncyBhcmUgKm5vdCogbGlzdHMgb2YgY2hhcmFjdGVycy5cblxuIyBTdHJpbmdzXG5AZG9jcyBTdHJpbmcsIGlzRW1wdHksIGxlbmd0aCwgcmV2ZXJzZSwgcmVwZWF0LCByZXBsYWNlXG5cbiMgQnVpbGRpbmcgYW5kIFNwbGl0dGluZ1xuQGRvY3MgYXBwZW5kLCBjb25jYXQsIHNwbGl0LCBqb2luLCB3b3JkcywgbGluZXNcblxuIyBHZXQgU3Vic3RyaW5nc1xuQGRvY3Mgc2xpY2UsIGxlZnQsIHJpZ2h0LCBkcm9wTGVmdCwgZHJvcFJpZ2h0XG5cbiMgQ2hlY2sgZm9yIFN1YnN0cmluZ3NcbkBkb2NzIGNvbnRhaW5zLCBzdGFydHNXaXRoLCBlbmRzV2l0aCwgaW5kZXhlcywgaW5kaWNlc1xuXG4jIEludCBDb252ZXJzaW9uc1xuQGRvY3MgdG9JbnQsIGZyb21JbnRcblxuIyBGbG9hdCBDb252ZXJzaW9uc1xuQGRvY3MgdG9GbG9hdCwgZnJvbUZsb2F0XG5cbiMgQ2hhciBDb252ZXJzaW9uc1xuQGRvY3MgZnJvbUNoYXIsIGNvbnMsIHVuY29uc1xuXG4jIExpc3QgQ29udmVyc2lvbnNcbkBkb2NzIHRvTGlzdCwgZnJvbUxpc3RcblxuIyBGb3JtYXR0aW5nXG5Db3NtZXRpYyBvcGVyYXRpb25zIHN1Y2ggYXMgcGFkZGluZyB3aXRoIGV4dHJhIGNoYXJhY3RlcnMgb3IgdHJpbW1pbmcgd2hpdGVzcGFjZS5cblxuQGRvY3MgdG9VcHBlciwgdG9Mb3dlciwgcGFkLCBwYWRMZWZ0LCBwYWRSaWdodCwgdHJpbSwgdHJpbUxlZnQsIHRyaW1SaWdodFxuXG4jIEhpZ2hlci1PcmRlciBGdW5jdGlvbnNcbkBkb2NzIG1hcCwgZmlsdGVyLCBmb2xkbCwgZm9sZHIsIGFueSwgYWxsXG4tfVxuXG5pbXBvcnQgQmFzaWNzIGV4cG9zaW5nICguLilcbmltcG9ydCBCaXR3aXNlXG5pbXBvcnQgQ2hhciBleHBvc2luZyAoQ2hhcilcbmltcG9ydCBFbG0uS2VybmVsLkxpc3RcbmltcG9ydCBFbG0uS2VybmVsLlN0cmluZ1xuaW1wb3J0IExpc3QgZXhwb3NpbmcgKCg6OikpXG5pbXBvcnQgTWF5YmUgZXhwb3NpbmcgKE1heWJlKVxuaW1wb3J0IFJlc3VsdCBleHBvc2luZyAoUmVzdWx0KVxuXG5cblxuLS0gU1RSSU5HU1xuXG5cbnstfCBBIGBTdHJpbmdgIGlzIGEgY2h1bmsgb2YgdGV4dDpcblxuICAgIFwiSGVsbG8hXCJcbiAgICBcIkhvdyBhcmUgeW91P1wiXG4gICAgXCLwn5mI8J+ZifCfmYpcIlxuXG4gICAgLS0gc3RyaW5ncyB3aXRoIGVzY2FwZSBjaGFyYWN0ZXJzXG4gICAgXCJ0aGlzXFxuXFx0XFxcInRoYXRcXFwiXCJcbiAgICBcIlxcdXsxRjY0OH1cXHV7MUY2NDl9XFx1ezFGNjRBfVwiIC0tIFwi8J+ZiPCfmYnwn5mKXCJcblxuICAgIC0tIG11bHRpbGluZSBzdHJpbmdzXG4gICAgXCJcIlwiVHJpcGxlIGRvdWJsZSBxdW90ZXMgbGV0IHlvdVxuICAgIGNyZWF0ZSBcIm11bHRpbGluZSBzdHJpbmdzXCIgd2hpY2hcbiAgICBjYW4gaGF2ZSB1bmVzY2FwZWQgcXVvdGVzIGFuZCBuZXdsaW5lcy5cbiAgICBcIlwiXCJcblxuQSBgU3RyaW5nYCBjYW4gcmVwcmVzZW50IGFueSBzZXF1ZW5jZSBvZiBbdW5pY29kZSBjaGFyYWN0ZXJzXVt1XS4gWW91IGNhbiB1c2VcbnRoZSB1bmljb2RlIGVzY2FwZXMgZnJvbSBgXFx1ezAwMDB9YCB0byBgXFx1ezEwRkZGRn1gIHRvIHJlcHJlc2VudCBjaGFyYWN0ZXJzXG5ieSB0aGVpciBjb2RlIHBvaW50LiBZb3UgY2FuIGFsc28gaW5jbHVkZSB0aGUgdW5pY29kZSBjaGFyYWN0ZXJzIGRpcmVjdGx5LlxuVXNpbmcgdGhlIGVzY2FwZXMgY2FuIGJlIGJldHRlciBpZiB5b3UgbmVlZCBvbmUgb2YgdGhlIG1hbnkgd2hpdGVzcGFjZVxuY2hhcmFjdGVycyB3aXRoIGRpZmZlcmVudCB3aWR0aHMuXG5cblt1XTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVW5pY29kZVxuXG4qKk5vdGU6KiogSmF2YVNjcmlwdCBsZXRzIHlvdSB1c2UgZG91YmxlIHF1b3RlcyBhbmQgc2luZ2xlIHF1b3RlcyBpbnRlcmNoYW5nYWJseS5cblRoaXMgaXMgbm90IHRydWUgaW4gRWxtLiBZb3UgbXVzdCB1c2UgZG91YmxlIHF1b3RlcyBmb3IgYSBgU3RyaW5nYCwgYW5kIHlvdSBtdXN0XG51c2Ugc2luZ2xlIHF1b3RlcyBmb3IgYSBbYENoYXJgXShDaGFyI0NoYXIpLlxuLX1cbnR5cGUgU3RyaW5nID0gU3RyaW5nIC0tIE5PVEU6IFRoZSBjb21waWxlciBwcm92aWRlcyB0aGUgcmVhbCBpbXBsZW1lbnRhdGlvbi5cblxuXG57LXwgRGV0ZXJtaW5lIGlmIGEgc3RyaW5nIGlzIGVtcHR5LlxuXG4gICAgaXNFbXB0eSBcIlwiID09IFRydWVcbiAgICBpc0VtcHR5IFwidGhlIHdvcmxkXCIgPT0gRmFsc2Vcbi19XG5pc0VtcHR5IDogU3RyaW5nIC0+IEJvb2xcbmlzRW1wdHkgc3RyaW5nID1cbiAgc3RyaW5nID09IFwiXCJcblxuXG57LXwgR2V0IHRoZSBsZW5ndGggb2YgYSBzdHJpbmcuXG5cbiAgICBsZW5ndGggXCJpbm51bWVyYWJsZVwiID09IDExXG4gICAgbGVuZ3RoIFwiXCIgPT0gMFxuXG4tfVxubGVuZ3RoIDogU3RyaW5nIC0+IEludFxubGVuZ3RoID1cbiAgRWxtLktlcm5lbC5TdHJpbmcubGVuZ3RoXG5cblxuey18IFJldmVyc2UgYSBzdHJpbmcuXG5cbiAgICByZXZlcnNlIFwic3RyZXNzZWRcIiA9PSBcImRlc3NlcnRzXCJcbi19XG5yZXZlcnNlIDogU3RyaW5nIC0+IFN0cmluZ1xucmV2ZXJzZSA9XG4gIEVsbS5LZXJuZWwuU3RyaW5nLnJldmVyc2VcblxuXG57LXwgUmVwZWF0IGEgc3RyaW5nICpuKiB0aW1lcy5cblxuICAgIHJlcGVhdCAzIFwiaGFcIiA9PSBcImhhaGFoYVwiXG4tfVxucmVwZWF0IDogSW50IC0+IFN0cmluZyAtPiBTdHJpbmdcbnJlcGVhdCBuIGNodW5rID1cbiAgcmVwZWF0SGVscCBuIGNodW5rIFwiXCJcblxuXG5yZXBlYXRIZWxwIDogSW50IC0+IFN0cmluZyAtPiBTdHJpbmcgLT4gU3RyaW5nXG5yZXBlYXRIZWxwIG4gY2h1bmsgcmVzdWx0ID1cbiAgaWYgbiA8PSAwIHRoZW5cbiAgICByZXN1bHRcbiAgZWxzZVxuICAgIHJlcGVhdEhlbHAgKEJpdHdpc2Uuc2hpZnRSaWdodEJ5IDEgbikgKGNodW5rICsrIGNodW5rKSA8fFxuICAgICAgaWYgQml0d2lzZS5hbmQgbiAxID09IDAgdGhlbiByZXN1bHQgZWxzZSByZXN1bHQgKysgY2h1bmtcblxuXG57LXwgUmVwbGFjZSBhbGwgb2NjdXJyZW5jZXMgb2Ygc29tZSBzdWJzdHJpbmcuXG5cbiAgICByZXBsYWNlIFwiLlwiIFwiLVwiIFwiSnNvbi5EZWNvZGUuc3VjY2VlZFwiID09IFwiSnNvbi1EZWNvZGUtc3VjY2VlZFwiXG4gICAgcmVwbGFjZSBcIixcIiBcIi9cIiBcImEsYixjLGQsZVwiICAgICAgICAgICA9PSBcImEvYi9jL2QvZVwiXG5cbioqTm90ZToqKiBJZiB5b3UgbmVlZCBtb3JlIGFkdmFuY2VkIHJlcGxhY2VtZW50cywgY2hlY2sgb3V0IHRoZVxuW2BlbG0vcGFyc2VyYF1bcGFyc2VyXSBvciBbYGVsbS9yZWdleGBdW3JlZ2V4XSBwYWNrYWdlLlxuXG5bcGFyc2VyXTogL3BhY2thZ2VzL2VsbS9wYXJzZXIvbGF0ZXN0XG5bcmVnZXhdOiAvcGFja2FnZXMvZWxtL3JlZ2V4L2xhdGVzdFxuLX1cbnJlcGxhY2UgOiBTdHJpbmcgLT4gU3RyaW5nIC0+IFN0cmluZyAtPiBTdHJpbmdcbnJlcGxhY2UgYmVmb3JlIGFmdGVyIHN0cmluZyA9XG4gIGpvaW4gYWZ0ZXIgKHNwbGl0IGJlZm9yZSBzdHJpbmcpXG5cblxuXG4tLSBCVUlMRElORyBBTkQgU1BMSVRUSU5HXG5cblxuey18IEFwcGVuZCB0d28gc3RyaW5ncy4gWW91IGNhbiBhbHNvIHVzZSBbdGhlIGAoKyspYCBvcGVyYXRvcl0oQmFzaWNzIysrKVxudG8gZG8gdGhpcy5cblxuICAgIGFwcGVuZCBcImJ1dHRlclwiIFwiZmx5XCIgPT0gXCJidXR0ZXJmbHlcIlxuLX1cbmFwcGVuZCA6IFN0cmluZyAtPiBTdHJpbmcgLT4gU3RyaW5nXG5hcHBlbmQgPVxuICBFbG0uS2VybmVsLlN0cmluZy5hcHBlbmRcblxuXG57LXwgQ29uY2F0ZW5hdGUgbWFueSBzdHJpbmdzIGludG8gb25lLlxuXG4gICAgY29uY2F0IFtcIm5ldmVyXCIsXCJ0aGVcIixcImxlc3NcIl0gPT0gXCJuZXZlcnRoZWxlc3NcIlxuLX1cbmNvbmNhdCA6IExpc3QgU3RyaW5nIC0+IFN0cmluZ1xuY29uY2F0IHN0cmluZ3MgPVxuICBqb2luIFwiXCIgc3RyaW5nc1xuXG5cbnstfCBTcGxpdCBhIHN0cmluZyB1c2luZyBhIGdpdmVuIHNlcGFyYXRvci5cblxuICAgIHNwbGl0IFwiLFwiIFwiY2F0LGRvZyxjb3dcIiAgICAgICAgPT0gW1wiY2F0XCIsXCJkb2dcIixcImNvd1wiXVxuICAgIHNwbGl0IFwiL1wiIFwiaG9tZS9ldmFuL0Rlc2t0b3AvXCIgPT0gW1wiaG9tZVwiLFwiZXZhblwiLFwiRGVza3RvcFwiLCBcIlwiXVxuXG4tfVxuc3BsaXQgOiBTdHJpbmcgLT4gU3RyaW5nIC0+IExpc3QgU3RyaW5nXG5zcGxpdCBzZXAgc3RyaW5nID1cbiAgRWxtLktlcm5lbC5MaXN0LmZyb21BcnJheSAoRWxtLktlcm5lbC5TdHJpbmcuc3BsaXQgc2VwIHN0cmluZylcblxuXG57LXwgUHV0IG1hbnkgc3RyaW5ncyB0b2dldGhlciB3aXRoIGEgZ2l2ZW4gc2VwYXJhdG9yLlxuXG4gICAgam9pbiBcImFcIiBbXCJIXCIsXCJ3XCIsXCJpaVwiLFwiblwiXSAgICAgICAgPT0gXCJIYXdhaWlhblwiXG4gICAgam9pbiBcIiBcIiBbXCJjYXRcIixcImRvZ1wiLFwiY293XCJdICAgICAgID09IFwiY2F0IGRvZyBjb3dcIlxuICAgIGpvaW4gXCIvXCIgW1wiaG9tZVwiLFwiZXZhblwiLFwiRGVza3RvcFwiXSA9PSBcImhvbWUvZXZhbi9EZXNrdG9wXCJcbi19XG5qb2luIDogU3RyaW5nIC0+IExpc3QgU3RyaW5nIC0+IFN0cmluZ1xuam9pbiBzZXAgY2h1bmtzID1cbiAgRWxtLktlcm5lbC5TdHJpbmcuam9pbiBzZXAgKEVsbS5LZXJuZWwuTGlzdC50b0FycmF5IGNodW5rcylcblxuXG57LXwgQnJlYWsgYSBzdHJpbmcgaW50byB3b3Jkcywgc3BsaXR0aW5nIG9uIGNodW5rcyBvZiB3aGl0ZXNwYWNlLlxuXG4gICAgd29yZHMgXCJIb3cgYXJlIFxcdCB5b3U/IFxcbiBHb29kP1wiID09IFtcIkhvd1wiLFwiYXJlXCIsXCJ5b3U/XCIsXCJHb29kP1wiXVxuLX1cbndvcmRzIDogU3RyaW5nIC0+IExpc3QgU3RyaW5nXG53b3JkcyA9XG4gIEVsbS5LZXJuZWwuU3RyaW5nLndvcmRzXG5cblxuey18IEJyZWFrIGEgc3RyaW5nIGludG8gbGluZXMsIHNwbGl0dGluZyBvbiBuZXdsaW5lcy5cblxuICAgIGxpbmVzIFwiSG93IGFyZSB5b3U/XFxuR29vZD9cIiA9PSBbXCJIb3cgYXJlIHlvdT9cIiwgXCJHb29kP1wiXVxuLX1cbmxpbmVzIDogU3RyaW5nIC0+IExpc3QgU3RyaW5nXG5saW5lcyA9XG4gIEVsbS5LZXJuZWwuU3RyaW5nLmxpbmVzXG5cblxuXG4tLSBTVUJTVFJJTkdTXG5cblxuey18IFRha2UgYSBzdWJzdHJpbmcgZ2l2ZW4gYSBzdGFydCBhbmQgZW5kIGluZGV4LiBOZWdhdGl2ZSBpbmRleGVzXG5hcmUgdGFrZW4gc3RhcnRpbmcgZnJvbSB0aGUgKmVuZCogb2YgdGhlIGxpc3QuXG5cbiAgICBzbGljZSAgNyAgOSBcInNuYWtlcyBvbiBhIHBsYW5lIVwiID09IFwib25cIlxuICAgIHNsaWNlICAwICA2IFwic25ha2VzIG9uIGEgcGxhbmUhXCIgPT0gXCJzbmFrZXNcIlxuICAgIHNsaWNlICAwIC03IFwic25ha2VzIG9uIGEgcGxhbmUhXCIgPT0gXCJzbmFrZXMgb24gYVwiXG4gICAgc2xpY2UgLTYgLTEgXCJzbmFrZXMgb24gYSBwbGFuZSFcIiA9PSBcInBsYW5lXCJcbi19XG5zbGljZSA6IEludCAtPiBJbnQgLT4gU3RyaW5nIC0+IFN0cmluZ1xuc2xpY2UgPVxuICBFbG0uS2VybmVsLlN0cmluZy5zbGljZVxuXG5cbnstfCBUYWtlICpuKiBjaGFyYWN0ZXJzIGZyb20gdGhlIGxlZnQgc2lkZSBvZiBhIHN0cmluZy5cblxuICAgIGxlZnQgMiBcIk11bGRlclwiID09IFwiTXVcIlxuLX1cbmxlZnQgOiBJbnQgLT4gU3RyaW5nIC0+IFN0cmluZ1xubGVmdCBuIHN0cmluZyA9XG4gIGlmIG4gPCAxIHRoZW5cbiAgICBcIlwiXG4gIGVsc2VcbiAgICBzbGljZSAwIG4gc3RyaW5nXG5cblxuey18IFRha2UgKm4qIGNoYXJhY3RlcnMgZnJvbSB0aGUgcmlnaHQgc2lkZSBvZiBhIHN0cmluZy5cblxuICAgIHJpZ2h0IDIgXCJTY3VsbHlcIiA9PSBcImx5XCJcbi19XG5yaWdodCA6IEludCAtPiBTdHJpbmcgLT4gU3RyaW5nXG5yaWdodCBuIHN0cmluZyA9XG4gIGlmIG4gPCAxIHRoZW5cbiAgICBcIlwiXG4gIGVsc2VcbiAgICBzbGljZSAtbiAobGVuZ3RoIHN0cmluZykgc3RyaW5nXG5cblxuey18IERyb3AgKm4qIGNoYXJhY3RlcnMgZnJvbSB0aGUgbGVmdCBzaWRlIG9mIGEgc3RyaW5nLlxuXG4gICAgZHJvcExlZnQgMiBcIlRoZSBMb25lIEd1bm1lblwiID09IFwiZSBMb25lIEd1bm1lblwiXG4tfVxuZHJvcExlZnQgOiBJbnQgLT4gU3RyaW5nIC0+IFN0cmluZ1xuZHJvcExlZnQgbiBzdHJpbmcgPVxuICBpZiBuIDwgMSB0aGVuXG4gICAgc3RyaW5nXG4gIGVsc2VcbiAgICBzbGljZSBuIChsZW5ndGggc3RyaW5nKSBzdHJpbmdcblxuXG57LXwgRHJvcCAqbiogY2hhcmFjdGVycyBmcm9tIHRoZSByaWdodCBzaWRlIG9mIGEgc3RyaW5nLlxuXG4gICAgZHJvcFJpZ2h0IDIgXCJDaWdhcmV0dGUgU21va2luZyBNYW5cIiA9PSBcIkNpZ2FyZXR0ZSBTbW9raW5nIE1cIlxuLX1cbmRyb3BSaWdodCA6IEludCAtPiBTdHJpbmcgLT4gU3RyaW5nXG5kcm9wUmlnaHQgbiBzdHJpbmcgPVxuICBpZiBuIDwgMSB0aGVuXG4gICAgc3RyaW5nXG4gIGVsc2VcbiAgICBzbGljZSAwIC1uIHN0cmluZ1xuXG5cblxuLS0gREVURUNUIFNVQlNUUklOR1NcblxuXG57LXwgU2VlIGlmIHRoZSBzZWNvbmQgc3RyaW5nIGNvbnRhaW5zIHRoZSBmaXJzdCBvbmUuXG5cbiAgICBjb250YWlucyBcInRoZVwiIFwidGhlb3J5XCIgPT0gVHJ1ZVxuICAgIGNvbnRhaW5zIFwiaGF0XCIgXCJ0aGVvcnlcIiA9PSBGYWxzZVxuICAgIGNvbnRhaW5zIFwiVEhFXCIgXCJ0aGVvcnlcIiA9PSBGYWxzZVxuXG4tfVxuY29udGFpbnMgOiBTdHJpbmcgLT4gU3RyaW5nIC0+IEJvb2xcbmNvbnRhaW5zID1cbiAgRWxtLktlcm5lbC5TdHJpbmcuY29udGFpbnNcblxuXG57LXwgU2VlIGlmIHRoZSBzZWNvbmQgc3RyaW5nIHN0YXJ0cyB3aXRoIHRoZSBmaXJzdCBvbmUuXG5cbiAgICBzdGFydHNXaXRoIFwidGhlXCIgXCJ0aGVvcnlcIiA9PSBUcnVlXG4gICAgc3RhcnRzV2l0aCBcIm9yeVwiIFwidGhlb3J5XCIgPT0gRmFsc2Vcbi19XG5zdGFydHNXaXRoIDogU3RyaW5nIC0+IFN0cmluZyAtPiBCb29sXG5zdGFydHNXaXRoID1cbiAgRWxtLktlcm5lbC5TdHJpbmcuc3RhcnRzV2l0aFxuXG5cbnstfCBTZWUgaWYgdGhlIHNlY29uZCBzdHJpbmcgZW5kcyB3aXRoIHRoZSBmaXJzdCBvbmUuXG5cbiAgICBlbmRzV2l0aCBcInRoZVwiIFwidGhlb3J5XCIgPT0gRmFsc2VcbiAgICBlbmRzV2l0aCBcIm9yeVwiIFwidGhlb3J5XCIgPT0gVHJ1ZVxuLX1cbmVuZHNXaXRoIDogU3RyaW5nIC0+IFN0cmluZyAtPiBCb29sXG5lbmRzV2l0aCA9XG4gIEVsbS5LZXJuZWwuU3RyaW5nLmVuZHNXaXRoXG5cblxuey18IEdldCBhbGwgb2YgdGhlIGluZGV4ZXMgZm9yIGEgc3Vic3RyaW5nIGluIGFub3RoZXIgc3RyaW5nLlxuXG4gICAgaW5kZXhlcyBcImlcIiBcIk1pc3Npc3NpcHBpXCIgICA9PSBbMSw0LDcsMTBdXG4gICAgaW5kZXhlcyBcInNzXCIgXCJNaXNzaXNzaXBwaVwiICA9PSBbMiw1XVxuICAgIGluZGV4ZXMgXCJuZWVkbGVcIiBcImhheXN0YWNrXCIgPT0gW11cbi19XG5pbmRleGVzIDogU3RyaW5nIC0+IFN0cmluZyAtPiBMaXN0IEludFxuaW5kZXhlcyA9XG4gIEVsbS5LZXJuZWwuU3RyaW5nLmluZGV4ZXNcblxuXG57LXwgQWxpYXMgZm9yIGBpbmRleGVzYC4gLX1cbmluZGljZXMgOiBTdHJpbmcgLT4gU3RyaW5nIC0+IExpc3QgSW50XG5pbmRpY2VzID1cbiAgRWxtLktlcm5lbC5TdHJpbmcuaW5kZXhlc1xuXG5cblxuLS0gRk9STUFUVElOR1xuXG5cbnstfCBDb252ZXJ0IGEgc3RyaW5nIHRvIGFsbCB1cHBlciBjYXNlLiBVc2VmdWwgZm9yIGNhc2UtaW5zZW5zaXRpdmUgY29tcGFyaXNvbnNcbmFuZCBWSVJUVUFMIFlFTExJTkcuXG5cbiAgICB0b1VwcGVyIFwic2tpbm5lclwiID09IFwiU0tJTk5FUlwiXG4tfVxudG9VcHBlciA6IFN0cmluZyAtPiBTdHJpbmdcbnRvVXBwZXIgPVxuICBFbG0uS2VybmVsLlN0cmluZy50b1VwcGVyXG5cblxuey18IENvbnZlcnQgYSBzdHJpbmcgdG8gYWxsIGxvd2VyIGNhc2UuIFVzZWZ1bCBmb3IgY2FzZS1pbnNlbnNpdGl2ZSBjb21wYXJpc29ucy5cblxuICAgIHRvTG93ZXIgXCJYLUZJTEVTXCIgPT0gXCJ4LWZpbGVzXCJcbi19XG50b0xvd2VyIDogU3RyaW5nIC0+IFN0cmluZ1xudG9Mb3dlciA9XG4gIEVsbS5LZXJuZWwuU3RyaW5nLnRvTG93ZXJcblxuXG57LXwgUGFkIGEgc3RyaW5nIG9uIGJvdGggc2lkZXMgdW50aWwgaXQgaGFzIGEgZ2l2ZW4gbGVuZ3RoLlxuXG4gICAgcGFkIDUgXCcgXCcgXCIxXCIgICA9PSBcIiAgMSAgXCJcbiAgICBwYWQgNSBcJyBcJyBcIjExXCIgID09IFwiICAxMSBcIlxuICAgIHBhZCA1IFwnIFwnIFwiMTIxXCIgPT0gXCIgMTIxIFwiXG4tfVxucGFkIDogSW50IC0+IENoYXIgLT4gU3RyaW5nIC0+IFN0cmluZ1xucGFkIG4gY2hhciBzdHJpbmcgPVxuICBsZXRcbiAgICBoYWxmID1cbiAgICAgIEJhc2ljcy50b0Zsb2F0IChuIC0gbGVuZ3RoIHN0cmluZykgLyAyXG4gIGluXG4gICAgcmVwZWF0IChjZWlsaW5nIGhhbGYpIChmcm9tQ2hhciBjaGFyKSArKyBzdHJpbmcgKysgcmVwZWF0IChmbG9vciBoYWxmKSAoZnJvbUNoYXIgY2hhcilcblxuXG57LXwgUGFkIGEgc3RyaW5nIG9uIHRoZSBsZWZ0IHVudGlsIGl0IGhhcyBhIGdpdmVuIGxlbmd0aC5cblxuICAgIHBhZExlZnQgNSBcJy5cJyBcIjFcIiAgID09IFwiLi4uLjFcIlxuICAgIHBhZExlZnQgNSBcJy5cJyBcIjExXCIgID09IFwiLi4uMTFcIlxuICAgIHBhZExlZnQgNSBcJy5cJyBcIjEyMVwiID09IFwiLi4xMjFcIlxuLX1cbnBhZExlZnQgOiBJbnQgLT4gQ2hhciAtPiBTdHJpbmcgLT4gU3RyaW5nXG5wYWRMZWZ0IG4gY2hhciBzdHJpbmcgPVxuICByZXBlYXQgKG4gLSBsZW5ndGggc3RyaW5nKSAoZnJvbUNoYXIgY2hhcikgKysgc3RyaW5nXG5cblxuey18IFBhZCBhIHN0cmluZyBvbiB0aGUgcmlnaHQgdW50aWwgaXQgaGFzIGEgZ2l2ZW4gbGVuZ3RoLlxuXG4gICAgcGFkUmlnaHQgNSBcJy5cJyBcIjFcIiAgID09IFwiMS4uLi5cIlxuICAgIHBhZFJpZ2h0IDUgXCcuXCcgXCIxMVwiICA9PSBcIjExLi4uXCJcbiAgICBwYWRSaWdodCA1IFwnLlwnIFwiMTIxXCIgPT0gXCIxMjEuLlwiXG4tfVxucGFkUmlnaHQgOiBJbnQgLT4gQ2hhciAtPiBTdHJpbmcgLT4gU3RyaW5nXG5wYWRSaWdodCBuIGNoYXIgc3RyaW5nID1cbiAgc3RyaW5nICsrIHJlcGVhdCAobiAtIGxlbmd0aCBzdHJpbmcpIChmcm9tQ2hhciBjaGFyKVxuXG5cbnstfCBHZXQgcmlkIG9mIHdoaXRlc3BhY2Ugb24gYm90aCBzaWRlcyBvZiBhIHN0cmluZy5cblxuICAgIHRyaW0gXCIgIGhhdHMgIFxcblwiID09IFwiaGF0c1wiXG4tfVxudHJpbSA6IFN0cmluZyAtPiBTdHJpbmdcbnRyaW0gPVxuICBFbG0uS2VybmVsLlN0cmluZy50cmltXG5cblxuey18IEdldCByaWQgb2Ygd2hpdGVzcGFjZSBvbiB0aGUgbGVmdCBvZiBhIHN0cmluZy5cblxuICAgIHRyaW1MZWZ0IFwiICBoYXRzICBcXG5cIiA9PSBcImhhdHMgIFxcblwiXG4tfVxudHJpbUxlZnQgOiBTdHJpbmcgLT4gU3RyaW5nXG50cmltTGVmdCA9XG4gIEVsbS5LZXJuZWwuU3RyaW5nLnRyaW1MZWZ0XG5cblxuey18IEdldCByaWQgb2Ygd2hpdGVzcGFjZSBvbiB0aGUgcmlnaHQgb2YgYSBzdHJpbmcuXG5cbiAgICB0cmltUmlnaHQgXCIgIGhhdHMgIFxcblwiID09IFwiICBoYXRzXCJcbi19XG50cmltUmlnaHQgOiBTdHJpbmcgLT4gU3RyaW5nXG50cmltUmlnaHQgPVxuICBFbG0uS2VybmVsLlN0cmluZy50cmltUmlnaHRcblxuXG5cbi0tIElOVCBDT05WRVJTSU9OU1xuXG5cbnstfCBUcnkgdG8gY29udmVydCBhIHN0cmluZyBpbnRvIGFuIGludCwgZmFpbGluZyBvbiBpbXByb3Blcmx5IGZvcm1hdHRlZCBzdHJpbmdzLlxuXG4gICAgU3RyaW5nLnRvSW50IFwiMTIzXCIgPT0gSnVzdCAxMjNcbiAgICBTdHJpbmcudG9JbnQgXCItNDJcIiA9PSBKdXN0IC00MlxuICAgIFN0cmluZy50b0ludCBcIjMuMVwiID09IE5vdGhpbmdcbiAgICBTdHJpbmcudG9JbnQgXCIzMWFcIiA9PSBOb3RoaW5nXG5cbklmIHlvdSBhcmUgZXh0cmFjdGluZyBhIG51bWJlciBmcm9tIHNvbWUgcmF3IHVzZXIgaW5wdXQsIHlvdSB3aWxsIHR5cGljYWxseVxud2FudCB0byB1c2UgW2BNYXliZS53aXRoRGVmYXVsdGBdKE1heWJlI3dpdGhEZWZhdWx0KSB0byBoYW5kbGUgYmFkIGRhdGE6XG5cbiAgICBNYXliZS53aXRoRGVmYXVsdCAwIChTdHJpbmcudG9JbnQgXCI0MlwiKSA9PSA0MlxuICAgIE1heWJlLndpdGhEZWZhdWx0IDAgKFN0cmluZy50b0ludCBcImFiXCIpID09IDBcbi19XG50b0ludCA6IFN0cmluZyAtPiBNYXliZSBJbnRcbnRvSW50ID1cbiAgRWxtLktlcm5lbC5TdHJpbmcudG9JbnRcblxuXG57LXwgQ29udmVydCBhbiBgSW50YCB0byBhIGBTdHJpbmdgLlxuXG4gICAgU3RyaW5nLmZyb21JbnQgMTIzID09IFwiMTIzXCJcbiAgICBTdHJpbmcuZnJvbUludCAtNDIgPT0gXCItNDJcIlxuXG5DaGVjayBvdXQgW2BEZWJ1Zy50b1N0cmluZ2BdKERlYnVnI3RvU3RyaW5nKSB0byBjb252ZXJ0ICphbnkqIHZhbHVlIHRvIGEgc3RyaW5nXG5mb3IgZGVidWdnaW5nIHB1cnBvc2VzLlxuLX1cbmZyb21JbnQgOiBJbnQgLT4gU3RyaW5nXG5mcm9tSW50ID1cbiAgRWxtLktlcm5lbC5TdHJpbmcuZnJvbU51bWJlclxuXG5cblxuLS0gRkxPQVQgQ09OVkVSU0lPTlNcblxuXG57LXwgVHJ5IHRvIGNvbnZlcnQgYSBzdHJpbmcgaW50byBhIGZsb2F0LCBmYWlsaW5nIG9uIGltcHJvcGVybHkgZm9ybWF0dGVkIHN0cmluZ3MuXG5cbiAgICBTdHJpbmcudG9GbG9hdCBcIjEyM1wiID09IEp1c3QgMTIzLjBcbiAgICBTdHJpbmcudG9GbG9hdCBcIi00MlwiID09IEp1c3QgLTQyLjBcbiAgICBTdHJpbmcudG9GbG9hdCBcIjMuMVwiID09IEp1c3QgMy4xXG4gICAgU3RyaW5nLnRvRmxvYXQgXCIzMWFcIiA9PSBOb3RoaW5nXG5cbklmIHlvdSBhcmUgZXh0cmFjdGluZyBhIG51bWJlciBmcm9tIHNvbWUgcmF3IHVzZXIgaW5wdXQsIHlvdSB3aWxsIHR5cGljYWxseVxud2FudCB0byB1c2UgW2BNYXliZS53aXRoRGVmYXVsdGBdKE1heWJlI3dpdGhEZWZhdWx0KSB0byBoYW5kbGUgYmFkIGRhdGE6XG5cbiAgICBNYXliZS53aXRoRGVmYXVsdCAwIChTdHJpbmcudG9GbG9hdCBcIjQyLjVcIikgPT0gNDIuNVxuICAgIE1heWJlLndpdGhEZWZhdWx0IDAgKFN0cmluZy50b0Zsb2F0IFwiY2F0c1wiKSA9PSAwXG4tfVxudG9GbG9hdCA6IFN0cmluZyAtPiBNYXliZSBGbG9hdFxudG9GbG9hdCA9XG4gIEVsbS5LZXJuZWwuU3RyaW5nLnRvRmxvYXRcblxuXG57LXwgQ29udmVydCBhIGBGbG9hdGAgdG8gYSBgU3RyaW5nYC5cblxuICAgIFN0cmluZy5mcm9tRmxvYXQgMTIzID09IFwiMTIzXCJcbiAgICBTdHJpbmcuZnJvbUZsb2F0IC00MiA9PSBcIi00MlwiXG4gICAgU3RyaW5nLmZyb21GbG9hdCAzLjkgPT0gXCIzLjlcIlxuXG5DaGVjayBvdXQgW2BEZWJ1Zy50b1N0cmluZ2BdKERlYnVnI3RvU3RyaW5nKSB0byBjb252ZXJ0ICphbnkqIHZhbHVlIHRvIGEgc3RyaW5nXG5mb3IgZGVidWdnaW5nIHB1cnBvc2VzLlxuLX1cbmZyb21GbG9hdCA6IEZsb2F0IC0+IFN0cmluZ1xuZnJvbUZsb2F0ID1cbiAgRWxtLktlcm5lbC5TdHJpbmcuZnJvbU51bWJlclxuXG5cblxuLS0gTElTVCBDT05WRVJTSU9OU1xuXG5cbnstfCBDb252ZXJ0IGEgc3RyaW5nIHRvIGEgbGlzdCBvZiBjaGFyYWN0ZXJzLlxuXG4gICAgdG9MaXN0IFwiYWJjXCIgPT0gW1wnYVwnLFwnYlwnLFwnY1wnXVxuICAgIHRvTGlzdCBcIvCfmYjwn5mJ8J+ZilwiID09IFtcJ/CfmYhcJyxcJ/CfmYlcJyxcJ/CfmYpcJ11cbi19XG50b0xpc3QgOiBTdHJpbmcgLT4gTGlzdCBDaGFyXG50b0xpc3Qgc3RyaW5nID1cbiAgZm9sZHIgKDo6KSBbXSBzdHJpbmdcblxuXG57LXwgQ29udmVydCBhIGxpc3Qgb2YgY2hhcmFjdGVycyBpbnRvIGEgU3RyaW5nLiBDYW4gYmUgdXNlZnVsIGlmIHlvdVxud2FudCB0byBjcmVhdGUgYSBzdHJpbmcgcHJpbWFyaWx5IGJ5IGNvbnNpbmcsIHBlcmhhcHMgZm9yIGRlY29kaW5nXG5zb21ldGhpbmcuXG5cbiAgICBmcm9tTGlzdCBbXCdhXCcsXCdiXCcsXCdjXCddID09IFwiYWJjXCJcbiAgICBmcm9tTGlzdCBbXCfwn5mIXCcsXCfwn5mJXCcsXCfwn5mKXCddID09IFwi8J+ZiPCfmYnwn5mKXCJcbi19XG5mcm9tTGlzdCA6IExpc3QgQ2hhciAtPiBTdHJpbmdcbmZyb21MaXN0ID1cbiAgRWxtLktlcm5lbC5TdHJpbmcuZnJvbUxpc3RcblxuXG5cbi0tIENIQVIgQ09OVkVSU0lPTlNcblxuXG57LXwgQ3JlYXRlIGEgc3RyaW5nIGZyb20gYSBnaXZlbiBjaGFyYWN0ZXIuXG5cbiAgICBmcm9tQ2hhciBcJ2FcJyA9PSBcImFcIlxuLX1cbmZyb21DaGFyIDogQ2hhciAtPiBTdHJpbmdcbmZyb21DaGFyIGNoYXIgPVxuICBjb25zIGNoYXIgXCJcIlxuXG5cbnstfCBBZGQgYSBjaGFyYWN0ZXIgdG8gdGhlIGJlZ2lubmluZyBvZiBhIHN0cmluZy5cblxuICAgIGNvbnMgXCdUXCcgXCJoZSB0cnV0aCBpcyBvdXQgdGhlcmVcIiA9PSBcIlRoZSB0cnV0aCBpcyBvdXQgdGhlcmVcIlxuLX1cbmNvbnMgOiBDaGFyIC0+IFN0cmluZyAtPiBTdHJpbmdcbmNvbnMgPVxuICBFbG0uS2VybmVsLlN0cmluZy5jb25zXG5cblxuey18IFNwbGl0IGEgbm9uLWVtcHR5IHN0cmluZyBpbnRvIGl0cyBoZWFkIGFuZCB0YWlsLiBUaGlzIGxldHMgeW91XG5wYXR0ZXJuIG1hdGNoIG9uIHN0cmluZ3MgZXhhY3RseSBhcyB5b3Ugd291bGQgd2l0aCBsaXN0cy5cblxuICAgIHVuY29ucyBcImFiY1wiID09IEp1c3QgKFwnYVwnLFwiYmNcIilcbiAgICB1bmNvbnMgXCJcIiAgICA9PSBOb3RoaW5nXG4tfVxudW5jb25zIDogU3RyaW5nIC0+IE1heWJlIChDaGFyLCBTdHJpbmcpXG51bmNvbnMgPVxuICBFbG0uS2VybmVsLlN0cmluZy51bmNvbnNcblxuXG5cbi0tIEhJR0hFUi1PUkRFUiBGVU5DVElPTlNcblxuXG57LXwgVHJhbnNmb3JtIGV2ZXJ5IGNoYXJhY3RlciBpbiBhIHN0cmluZ1xuXG4gICAgbWFwIChcXGMgLT4gaWYgYyA9PSBcJy9cJyB0aGVuIFwnLlwnIGVsc2UgYykgXCJhL2IvY1wiID09IFwiYS5iLmNcIlxuLX1cbm1hcCA6IChDaGFyIC0+IENoYXIpIC0+IFN0cmluZyAtPiBTdHJpbmdcbm1hcCA9XG4gIEVsbS5LZXJuZWwuU3RyaW5nLm1hcFxuXG5cbnstfCBLZWVwIG9ubHkgdGhlIGNoYXJhY3RlcnMgdGhhdCBwYXNzIHRoZSB0ZXN0LlxuXG4gICAgZmlsdGVyIGlzRGlnaXQgXCJSMi1EMlwiID09IFwiMjJcIlxuLX1cbmZpbHRlciA6IChDaGFyIC0+IEJvb2wpIC0+IFN0cmluZyAtPiBTdHJpbmdcbmZpbHRlciA9XG4gIEVsbS5LZXJuZWwuU3RyaW5nLmZpbHRlclxuXG5cbnstfCBSZWR1Y2UgYSBzdHJpbmcgZnJvbSB0aGUgbGVmdC5cblxuICAgIGZvbGRsIGNvbnMgXCJcIiBcInRpbWVcIiA9PSBcImVtaXRcIlxuLX1cbmZvbGRsIDogKENoYXIgLT4gYiAtPiBiKSAtPiBiIC0+IFN0cmluZyAtPiBiXG5mb2xkbCA9XG4gIEVsbS5LZXJuZWwuU3RyaW5nLmZvbGRsXG5cblxuey18IFJlZHVjZSBhIHN0cmluZyBmcm9tIHRoZSByaWdodC5cblxuICAgIGZvbGRyIGNvbnMgXCJcIiBcInRpbWVcIiA9PSBcInRpbWVcIlxuLX1cbmZvbGRyIDogKENoYXIgLT4gYiAtPiBiKSAtPiBiIC0+IFN0cmluZyAtPiBiXG5mb2xkciA9XG4gIEVsbS5LZXJuZWwuU3RyaW5nLmZvbGRyXG5cblxuey18IERldGVybWluZSB3aGV0aGVyICphbnkqIGNoYXJhY3RlcnMgcGFzcyB0aGUgdGVzdC5cblxuICAgIGFueSBpc0RpZ2l0IFwiOTAyMTBcIiA9PSBUcnVlXG4gICAgYW55IGlzRGlnaXQgXCJSMi1EMlwiID09IFRydWVcbiAgICBhbnkgaXNEaWdpdCBcImhlYXJ0XCIgPT0gRmFsc2Vcbi19XG5hbnkgOiAoQ2hhciAtPiBCb29sKSAtPiBTdHJpbmcgLT4gQm9vbFxuYW55ID1cbiAgRWxtLktlcm5lbC5TdHJpbmcuYW55XG5cblxuey18IERldGVybWluZSB3aGV0aGVyICphbGwqIGNoYXJhY3RlcnMgcGFzcyB0aGUgdGVzdC5cblxuICAgIGFsbCBpc0RpZ2l0IFwiOTAyMTBcIiA9PSBUcnVlXG4gICAgYWxsIGlzRGlnaXQgXCJSMi1EMlwiID09IEZhbHNlXG4gICAgYWxsIGlzRGlnaXQgXCJoZWFydFwiID09IEZhbHNlXG4tfVxuYWxsIDogKENoYXIgLT4gQm9vbCkgLT4gU3RyaW5nIC0+IEJvb2xcbmFsbCA9XG4gIEVsbS5LZXJuZWwuU3RyaW5nLmFsbFxuJ30pKSwKCQkJX1V0aWxzX1R1cGxlMigKCQkJJ1R1cGxlLmVsbScsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkQmxvYk5vZGUoCgkJCQl7dXRmODogJ21vZHVsZSBUdXBsZSBleHBvc2luZ1xuICAoIHBhaXJcbiAgLCBmaXJzdCwgc2Vjb25kXG4gICwgbWFwRmlyc3QsIG1hcFNlY29uZCwgbWFwQm90aFxuICApXG5cbnstfCBFbG0gaGFzIGJ1aWx0LWluIHN5bnRheCBmb3IgdHVwbGVzLCBzbyB5b3UgY2FuIGRlZmluZSAyRCBwb2ludHMgbGlrZSB0aGlzOlxuXG4gICAgb3JpZ2luIDogKEZsb2F0LCBGbG9hdClcbiAgICBvcmlnaW4gPVxuICAgICAgKDAsIDApXG5cbiAgICBwb3NpdGlvbiA6IChGbG9hdCwgRmxvYXQpXG4gICAgcG9zaXRpb24gPVxuICAgICAgKDMsIDQpXG5cblRoaXMgbW9kdWxlIGlzIGEgYnVuY2ggb2YgaGVscGVycyBmb3Igd29ya2luZyB3aXRoIDItdHVwbGVzLlxuXG4qKk5vdGUgMToqKiBGb3IgbW9yZSBjb21wbGV4IGRhdGEsIGl0IGlzIGJlc3QgdG8gc3dpdGNoIHRvIHJlY29yZHMuIFNvIGluc3RlYWRcbm9mIHJlcHJlc2VudGluZyBhIDNEIHBvaW50IGFzIGAoMyw0LDUpYCBhbmQgbm90IGhhdmluZyBhbnkgaGVscGVyIGZ1bmN0aW9ucyxcbnJlcHJlc2VudCBpdCBhcyBgeyB4ID0gMywgeSA9IDQsIHogPSA1IH1gIGFuZCB1c2UgYWxsIHRoZSBidWlsdC1pbiByZWNvcmRcbnN5bnRheCFcblxuKipOb3RlIDI6KiogSWYgeW91ciByZWNvcmQgY29udGFpbnMgYSBidW5jaCBvZiBgQm9vbGAgYW5kIGBNYXliZWAgdmFsdWVzLFxueW91IG1heSB3YW50IHRvIHVwZ3JhZGUgdG8gdW5pb24gdHlwZXMuIENoZWNrIG91dCBbSm/Dq2zigJlzIHBvc3RdW3V0XSBmb3IgbW9yZVxuaW5mbyBvbiB0aGlzLiAoUGlja2luZyBhcHByb3ByaWF0ZSBkYXRhIHN0cnVjdHVyZXMgaXMgc3VwZXIgaW1wb3J0YW50IGluIEVsbSEpXG5cblt1dF06IGh0dHBzOi8vcm9ib3RzLnRob3VnaHRib3QuY29tL21vZGVsaW5nLXdpdGgtdW5pb24tdHlwZXNcblxuIyBDcmVhdGVcbkBkb2NzIHBhaXJcblxuIyBBY2Nlc3NcbkBkb2NzIGZpcnN0LCBzZWNvbmRcblxuIyBNYXBcbkBkb2NzIG1hcEZpcnN0LCBtYXBTZWNvbmQsIG1hcEJvdGhcblxuLX1cblxuXG5cbi0tIENSRUFURVxuXG5cbnstfCBDcmVhdGUgYSAyLXR1cGxlLlxuXG4gICAgLS0gcGFpciAzIDQgPT0gKDMsIDQpXG5cbiAgICB6aXAgOiBMaXN0IGEgLT4gTGlzdCBiIC0+IExpc3QgKGEsIGIpXG4gICAgemlwIHhzIHlzID1cbiAgICAgIExpc3QubWFwMiBUdXBsZS5wYWlyIHhzIHlzXG4tfVxucGFpciA6IGEgLT4gYiAtPiAoYSwgYilcbnBhaXIgYSBiID1cbiAgKGEsIGIpXG5cblxuXG4tLSBBQ0NFU1NcblxuXG57LXwgRXh0cmFjdCB0aGUgZmlyc3QgdmFsdWUgZnJvbSBhIHR1cGxlLlxuXG4gICAgZmlyc3QgKDMsIDQpID09IDNcbiAgICBmaXJzdCAoXCJqb2huXCIsIFwiZG9lXCIpID09IFwiam9oblwiXG4tfVxuZmlyc3QgOiAoYSwgYikgLT4gYVxuZmlyc3QgKHgsXykgPVxuICB4XG5cblxuey18IEV4dHJhY3QgdGhlIHNlY29uZCB2YWx1ZSBmcm9tIGEgdHVwbGUuXG5cbiAgICBzZWNvbmQgKDMsIDQpID09IDRcbiAgICBzZWNvbmQgKFwiam9oblwiLCBcImRvZVwiKSA9PSBcImRvZVwiXG4tfVxuc2Vjb25kIDogKGEsIGIpIC0+IGJcbnNlY29uZCAoXyx5KSA9XG4gIHlcblxuXG5cbi0tIE1BUFxuXG5cbnstfCBUcmFuc2Zvcm0gdGhlIGZpcnN0IHZhbHVlIGluIGEgdHVwbGUuXG5cbiAgICBpbXBvcnQgU3RyaW5nXG5cbiAgICBtYXBGaXJzdCBTdHJpbmcucmV2ZXJzZSAoXCJzdHJlc3NlZFwiLCAxNikgPT0gKFwiZGVzc2VydHNcIiwgMTYpXG4gICAgbWFwRmlyc3QgU3RyaW5nLmxlbmd0aCAgKFwic3RyZXNzZWRcIiwgMTYpID09ICg4LCAxNilcbi19XG5tYXBGaXJzdCA6IChhIC0+IHgpIC0+IChhLCBiKSAtPiAoeCwgYilcbm1hcEZpcnN0IGZ1bmMgKHgseSkgPVxuICAoZnVuYyB4LCB5KVxuXG5cbnstfCBUcmFuc2Zvcm0gdGhlIHNlY29uZCB2YWx1ZSBpbiBhIHR1cGxlLlxuXG4gICAgbWFwU2Vjb25kIHNxcnQgICAoXCJzdHJlc3NlZFwiLCAxNikgPT0gKFwic3RyZXNzZWRcIiwgNClcbiAgICBtYXBTZWNvbmQgbmVnYXRlIChcInN0cmVzc2VkXCIsIDE2KSA9PSAoXCJzdHJlc3NlZFwiLCAtMTYpXG4tfVxubWFwU2Vjb25kIDogKGIgLT4geSkgLT4gKGEsIGIpIC0+IChhLCB5KVxubWFwU2Vjb25kIGZ1bmMgKHgseSkgPVxuICAoeCwgZnVuYyB5KVxuXG5cbnstfCBUcmFuc2Zvcm0gYm90aCBwYXJ0cyBvZiBhIHR1cGxlLlxuXG4gICAgaW1wb3J0IFN0cmluZ1xuXG4gICAgbWFwQm90aCBTdHJpbmcucmV2ZXJzZSBzcXJ0ICAoXCJzdHJlc3NlZFwiLCAxNikgPT0gKFwiZGVzc2VydHNcIiwgNClcbiAgICBtYXBCb3RoIFN0cmluZy5sZW5ndGggbmVnYXRlIChcInN0cmVzc2VkXCIsIDE2KSA9PSAoOCwgLTE2KVxuLX1cbm1hcEJvdGggOiAoYSAtPiB4KSAtPiAoYiAtPiB5KSAtPiAoYSwgYikgLT4gKHgsIHkpXG5tYXBCb3RoIGZ1bmNBIGZ1bmNCICh4LHkpID1cbiAgKCBmdW5jQSB4LCBmdW5jQiB5IClcbid9KSkKCQldKSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkZmlsZV90cmVlX19fX2VsbV9jb3JlX21vZHVsZXNfaW1wbGljaXRfaW1wb3J0ID0gQTIoCgkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkbWFwQmxvYnMsCglmdW5jdGlvbiAoYmxvYlZhbHVlKSB7CgkJcmV0dXJuIHt1dGY4OiBibG9iVmFsdWUudXRmOH07Cgl9LAoJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJG1hcEZpbGVUcmVlTm9kZUZyb21HZW5lcmF0ZWQoJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRmaWxlX3RyZWVfbm9kZV9lbG1fY29yZV9tb2R1bGVzX2ltcGxpY2l0X2ltcG9ydCkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRmaWxlX3RyZWVfbm9kZV9lbG1fa2VybmVsX21vZHVsZXNfYnJvd3Nlcl9zcmMgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJFRyZWVOb2RlKAoJX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJX1V0aWxzX1R1cGxlMigKCQkJJ0Jyb3dzZXInLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJFRyZWVOb2RlKAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ0FuaW1hdGlvbk1hbmFnZXIuZWxtJywKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRCbG9iTm9kZSgKCQkJCQkJCXt1dGY4OiAnZWZmZWN0IG1vZHVsZSBCcm93c2VyLkFuaW1hdGlvbk1hbmFnZXIgd2hlcmUgeyBzdWJzY3JpcHRpb24gPSBNeVN1YiB9IGV4cG9zaW5nXG4gICAgKCBvbkFuaW1hdGlvbkZyYW1lXG4gICAgLCBvbkFuaW1hdGlvbkZyYW1lRGVsdGFcbiAgICApXG5cbmltcG9ydCBFbG0uS2VybmVsLkJyb3dzZXJcbmltcG9ydCBQcm9jZXNzXG5pbXBvcnQgVGFzayBleHBvc2luZyAoVGFzaylcbmltcG9ydCBUaW1lXG5cblxuXG4tLSBQVUJMSUMgU1RVRkZcblxuXG5vbkFuaW1hdGlvbkZyYW1lIDogKFRpbWUuUG9zaXggLT4gbXNnKSAtPiBTdWIgbXNnXG5vbkFuaW1hdGlvbkZyYW1lIHRhZ2dlciA9XG4gICAgc3Vic2NyaXB0aW9uIChUaW1lIHRhZ2dlcilcblxuXG5vbkFuaW1hdGlvbkZyYW1lRGVsdGEgOiAoRmxvYXQgLT4gbXNnKSAtPiBTdWIgbXNnXG5vbkFuaW1hdGlvbkZyYW1lRGVsdGEgdGFnZ2VyID1cbiAgICBzdWJzY3JpcHRpb24gKERlbHRhIHRhZ2dlcilcblxuXG5cbi0tIFNVQlNDUklQVElPTlNcblxuXG50eXBlIE15U3ViIG1zZ1xuICAgID0gVGltZSAoVGltZS5Qb3NpeCAtPiBtc2cpXG4gICAgfCBEZWx0YSAoRmxvYXQgLT4gbXNnKVxuXG5cbnN1Yk1hcCA6IChhIC0+IGIpIC0+IE15U3ViIGEgLT4gTXlTdWIgYlxuc3ViTWFwIGZ1bmMgc3ViID1cbiAgICBjYXNlIHN1YiBvZlxuICAgICAgICBUaW1lIHRhZ2dlciAtPlxuICAgICAgICAgICAgVGltZSAoZnVuYyA8PCB0YWdnZXIpXG5cbiAgICAgICAgRGVsdGEgdGFnZ2VyIC0+XG4gICAgICAgICAgICBEZWx0YSAoZnVuYyA8PCB0YWdnZXIpXG5cblxuXG4tLSBFRkZFQ1QgTUFOQUdFUlxuXG5cbnR5cGUgYWxpYXMgU3RhdGUgbXNnID1cbiAgICB7IHN1YnMgOiBMaXN0IChNeVN1YiBtc2cpXG4gICAgLCByZXF1ZXN0IDogTWF5YmUgUHJvY2Vzcy5JZFxuICAgICwgb2xkVGltZSA6IEludFxuICAgIH1cblxuXG5cbi0tIE5PVEU6IHVzZWQgaW4gb25FZmZlY3RzXG4tLVxuXG5cbmluaXQgOiBUYXNrIE5ldmVyIChTdGF0ZSBtc2cpXG5pbml0ID1cbiAgICBUYXNrLnN1Y2NlZWQgKFN0YXRlIFtdIE5vdGhpbmcgMClcblxuXG5vbkVmZmVjdHMgOiBQbGF0Zm9ybS5Sb3V0ZXIgbXNnIEludCAtPiBMaXN0IChNeVN1YiBtc2cpIC0+IFN0YXRlIG1zZyAtPiBUYXNrIE5ldmVyIChTdGF0ZSBtc2cpXG5vbkVmZmVjdHMgcm91dGVyIHN1YnMgeyByZXF1ZXN0LCBvbGRUaW1lIH0gPVxuICAgIGNhc2UgKCByZXF1ZXN0LCBzdWJzICkgb2ZcbiAgICAgICAgKCBOb3RoaW5nLCBbXSApIC0+XG4gICAgICAgICAgICBpbml0XG5cbiAgICAgICAgKCBKdXN0IHBpZCwgW10gKSAtPlxuICAgICAgICAgICAgUHJvY2Vzcy5raWxsIHBpZFxuICAgICAgICAgICAgICAgIHw+IFRhc2suYW5kVGhlbiAoXFxfIC0+IGluaXQpXG5cbiAgICAgICAgKCBOb3RoaW5nLCBfICkgLT5cbiAgICAgICAgICAgIFByb2Nlc3Muc3Bhd24gKFRhc2suYW5kVGhlbiAoUGxhdGZvcm0uc2VuZFRvU2VsZiByb3V0ZXIpIHJBRilcbiAgICAgICAgICAgICAgICB8PiBUYXNrLmFuZFRoZW5cbiAgICAgICAgICAgICAgICAgICAgKFxccGlkIC0+XG4gICAgICAgICAgICAgICAgICAgICAgICBub3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8PiBUYXNrLmFuZFRoZW4gKFxcdGltZSAtPiBUYXNrLnN1Y2NlZWQgKFN0YXRlIHN1YnMgKEp1c3QgcGlkKSB0aW1lKSlcbiAgICAgICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICggSnVzdCBfLCBfICkgLT5cbiAgICAgICAgICAgIFRhc2suc3VjY2VlZCAoU3RhdGUgc3VicyByZXF1ZXN0IG9sZFRpbWUpXG5cblxub25TZWxmTXNnIDogUGxhdGZvcm0uUm91dGVyIG1zZyBJbnQgLT4gSW50IC0+IFN0YXRlIG1zZyAtPiBUYXNrIE5ldmVyIChTdGF0ZSBtc2cpXG5vblNlbGZNc2cgcm91dGVyIG5ld1RpbWUgeyBzdWJzLCBvbGRUaW1lIH0gPVxuICAgIGxldFxuICAgICAgICBzZW5kIHN1YiA9XG4gICAgICAgICAgICBjYXNlIHN1YiBvZlxuICAgICAgICAgICAgICAgIFRpbWUgdGFnZ2VyIC0+XG4gICAgICAgICAgICAgICAgICAgIFBsYXRmb3JtLnNlbmRUb0FwcCByb3V0ZXIgKHRhZ2dlciAoVGltZS5taWxsaXNUb1Bvc2l4IG5ld1RpbWUpKVxuXG4gICAgICAgICAgICAgICAgRGVsdGEgdGFnZ2VyIC0+XG4gICAgICAgICAgICAgICAgICAgIFBsYXRmb3JtLnNlbmRUb0FwcCByb3V0ZXIgKHRhZ2dlciAodG9GbG9hdCAobmV3VGltZSAtIG9sZFRpbWUpKSlcbiAgICBpblxuICAgIFByb2Nlc3Muc3Bhd24gKFRhc2suYW5kVGhlbiAoUGxhdGZvcm0uc2VuZFRvU2VsZiByb3V0ZXIpIHJBRilcbiAgICAgICAgfD4gVGFzay5hbmRUaGVuXG4gICAgICAgICAgICAoXFxwaWQgLT5cbiAgICAgICAgICAgICAgICBUYXNrLnNlcXVlbmNlIChMaXN0Lm1hcCBzZW5kIHN1YnMpXG4gICAgICAgICAgICAgICAgICAgIHw+IFRhc2suYW5kVGhlbiAoXFxfIC0+IFRhc2suc3VjY2VlZCAoU3RhdGUgc3VicyAoSnVzdCBwaWQpIG5ld1RpbWUpKVxuICAgICAgICAgICAgKVxuXG5cbnJBRiA6IFRhc2sgeCBJbnRcbnJBRiA9XG4gICAgRWxtLktlcm5lbC5Ccm93c2VyLnJBRiAoKVxuXG5cbm5vdyA6IFRhc2sgeCBJbnRcbm5vdyA9XG4gICAgRWxtLktlcm5lbC5Ccm93c2VyLm5vdyAoKVxuJ30pKSwKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ0RvbS5lbG0nLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJEJsb2JOb2RlKAoJCQkJCQkJe3V0Zjg6ICdtb2R1bGUgQnJvd3Nlci5Eb20gZXhwb3NpbmdcbiAgICAoIGZvY3VzLCBibHVyLCBFcnJvciguLilcbiAgICAsIGdldFZpZXdwb3J0LCBWaWV3cG9ydCwgZ2V0Vmlld3BvcnRPZlxuICAgICwgc2V0Vmlld3BvcnQsIHNldFZpZXdwb3J0T2ZcbiAgICAsIGdldEVsZW1lbnQsIEVsZW1lbnRcbiAgICApXG5cbnstfCBUaGlzIG1vZHVsZSBhbGxvd3MgeW91IHRvIG1hbmlwdWxhdGUgdGhlIERPTSBpbiB2YXJpb3VzIHdheXMuIEl0IGNvdmVyczpcblxuICAtIEZvY3VzIGFuZCBibHVyIGlucHV0IGVsZW1lbnRzLlxuICAtIEdldCB0aGUgYHdpZHRoYCBhbmQgYGhlaWdodGAgb2YgZWxlbWVudHMuXG4gIC0gR2V0IHRoZSBgeGAgYW5kIGB5YCBjb29yZGluYXRlcyBvZiBlbGVtZW50cy5cbiAgLSBGaWd1cmUgb3V0IHRoZSBzY3JvbGwgcG9zaXRpb24uXG4gIC0gQ2hhbmdlIHRoZSBzY3JvbGwgcG9zaXRpb24hXG5cbldlIHVzZSBkaWZmZXJlbnQgdGVybWlub2xvZ3kgdGhhbiBKYXZhU2NyaXB0IHRob3VnaC4uLlxuXG5cbiMgVGVybWlub2xvZ3lcblxuSGF2ZSB5b3UgZXZlciB0aG91Z2h0IGFib3V0IGhvdyAmbGRxdW87c2Nyb2xsaW5nJnJkcXVvOyBpcyBhIG1ldGFwaG9yIGFib3V0XG5zY3JvbGxzPyBMaWtlIGhhbmdpbmcgc2Nyb2xscyBvZiBjYWxpZ3JhcGh5IG1hZGUgZHVyaW5nIHRoZSBIYW4gRHluYXN0eVxuaW4gQ2hpbmE/XG5cblRoaXMgbWV0YXBob3IgZmFsbHMgYXBhcnQgYWxtb3N0IGltbWVkaWF0ZWx5IHRob3VnaC4gRm9yIGV4YW1wbGUsIG1hbnkgc2Nyb2xsc1xucmVhZCBob3Jpem9udGFsbHkhIExpa2UgYSBbU2VmZXIgVG9yYWhdW3RvcmFoXSBvciBbQ2hpbmVzZSBIYW5kc2Nyb2xsc11baGFuZF0uXG5UaGUgdHdvIHNpZGVzIG1vdmUgaW5kZXBlbmRlbnRseSwgc29tZXRpbWVzIGtlcHQgaW4gcGxhY2Ugd2l0aCBzdG9uZXMuIFdoYXQgaXNcbmEgc2Nyb2xsIGJhciBpbiB0aGlzIHdvcmxkPyBBbmQgW2hhbmdpbmcgc2Nyb2xsc11baGFuZ10gKHdoaWNoIF9hcmVfIGRpc3BsYXllZFxudmVydGljYWxseSkgZG8gbm90ICZsZHF1bztzY3JvbGwmcmRxdW87IGF0IGFsbCEgVGhleSBoYW5nIVxuXG5TbyBpbiBKYXZhU2NyaXB0LCB3ZSBzdGFydCB3aXRoIGEgYmFkbHkgc3RyZXRjaGVkIG1ldGFwaG9yIGFuZCBhZGQgYSBidW5jaCBvZlxuRE9NIGRldGFpbHMgbGlrZSBwYWRkaW5nLCBib3JkZXJzLCBhbmQgbWFyZ2lucy4gSG93IGRvIHRob3NlIHJlbGF0ZSB0byBzY3JvbGxzP1xuRm9yIGV4YW1wbGUsIEphdmFTY3JpcHQgaGFzIGBjbGllbnRXaWR0aGAuIENsaWVudCBsaWtlIGEgZmV1ZGFsIHN0YXRlIHRoYXQgcGF5c1xudHJpYnV0ZSB0byB0aGUgZW1wZXJvcj8gQW5kIGBvZmZzZXRIZWlnaHRgLiBDYW4gYW4gb2Zmc2V0IGV2ZW4gaGF2ZSBoZWlnaHQ/IEFuZFxud2hhdCBoYXMgdGhhdCBnb3QgdG8gZG8gd2l0aCBzY3JvbGxzP1xuXG5TbyBpbnN0ZWFkIG9mIGluaGVyaXRpbmcgdGhpcyBtZXRhcGhvcmljYWwgaG9kZ2UtcG9kZ2UsIHdlIHVzZSB0ZXJtaW5vbG9neSBmcm9tXG4zRCBncmFwaGljcy4gWW91IGhhdmUgYSAqKnNjZW5lKiogY29udGFpbmluZyBhbGwgeW91ciBlbGVtZW50cyBhbmQgYSAqKnZpZXdwb3J0KipcbmludG8gdGhlIHNjZW5lLiBJIHRoaW5rIGl0IGVuZHMgdXAgYmVpbmcgYSBsb3QgY2xlYXJlciwgYnV0IHlvdSBjYW4gZXZhbHVhdGVcbmZvciB5b3Vyc2VsZiB3aGVuIHlvdSBzZWUgdGhlIGRpYWdyYW1zIGxhdGVyIVxuXG4qKk5vdGU6KiogRm9yIG1vcmUgc2Nyb2xsIGZhY3RzLCBJIHJlY29tbWVuZCBbQSBEYXkgb24gdGhlIEdyYW5kIENhbmFsIHdpdGhcbnRoZSBFbXBlcm9yIG9mIENoaW5hIG9yOiBTdXJmYWNlIElzIElsbHVzaW9uIEJ1dCBTbyBJcyBEZXB0aF1bZG9jXSB3aGVyZSBEYXZpZFxuSG9ja25leSBleHBsb3JlcyB0aGUgaGlzdG9yeSBvZiBfcGVyc3BlY3RpdmVfIGluIGFydC4gUmVhbGx5IGludGVyZXN0aW5nIVxuXG5bdG9yYWhdOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TZWZlcl9Ub3JhaFxuW2hhbmRdOiBodHRwczovL3d3dy5tZXRtdXNldW0ub3JnL3RvYWgvaGQvY2hocy9oZF9jaGhzLmh0bVxuW2hhbmddOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IYW5naW5nX3Njcm9sbFxuW2RvY106IGh0dHBzOi8vd3d3LmltZGIuY29tL3RpdGxlL3R0MDE2NDUyNS9cblxuXG4jIEZvY3VzXG5cbkBkb2NzIGZvY3VzLCBibHVyLCBFcnJvclxuXG5cbiMgR2V0IFZpZXdwb3J0XG5cbkBkb2NzIGdldFZpZXdwb3J0LCBWaWV3cG9ydCwgZ2V0Vmlld3BvcnRPZlxuXG5cbiMgU2V0IFZpZXdwb3J0XG5cbkBkb2NzIHNldFZpZXdwb3J0LCBzZXRWaWV3cG9ydE9mXG5cblxuIyBQb3NpdGlvblxuXG5AZG9jcyBnZXRFbGVtZW50LCBFbGVtZW50XG5cbi19XG5cbmltcG9ydCBFbG0uS2VybmVsLkJyb3dzZXJcbmltcG9ydCBUYXNrIGV4cG9zaW5nIChUYXNrKVxuXG5cblxuLS0gRk9DVVNcblxuXG57LXwgRmluZCBhIERPTSBub2RlIGJ5IGBpZGAgYW5kIGZvY3VzIG9uIGl0LiBTbyBpZiB5b3Ugd2FudGVkIHRvIGZvY3VzIGEgbm9kZVxubGlrZSBgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJzZWFyY2gtYm94XCI+YCB5b3UgY291bGQgc2F5OlxuXG4gICAgaW1wb3J0IEJyb3dzZXIuRG9tIGFzIERvbVxuICAgIGltcG9ydCBUYXNrXG5cbiAgICB0eXBlIE1zZ1xuICAgICAgICA9IE5vT3BcblxuICAgIGZvY3VzU2VhcmNoQm94IDogQ21kIE1zZ1xuICAgIGZvY3VzU2VhcmNoQm94ID1cbiAgICAgICAgVGFzay5hdHRlbXB0IChcXF8gLT4gTm9PcCkgKERvbS5mb2N1cyBcInNlYXJjaC1ib3hcIilcblxuTm90aWNlIHRoYXQgdGhpcyBjb2RlIGlnbm9yZXMgdGhlIHBvc3NpYmlsaXR5IHRoYXQgYHNlYXJjaC1ib3hgIGlzIG5vdCB1c2VkXG5hcyBhbiBgaWRgIGJ5IGFueSBub2RlLCBmYWlsaW5nIHNpbGVudGx5IGluIHRoYXQgY2FzZS4gSXQgd291bGQgYmUgYmV0dGVyIHRvXG5sb2cgdGhlIGZhaWx1cmUgd2l0aCB3aGF0ZXZlciBlcnJvciByZXBvcnRpbmcgc3lzdGVtIHlvdSB1c2UuXG5cbi19XG5mb2N1cyA6IFN0cmluZyAtPiBUYXNrIEVycm9yICgpXG5mb2N1cyA9XG4gICAgRWxtLktlcm5lbC5Ccm93c2VyLmNhbGwgXCJmb2N1c1wiXG5cblxuey18IEZpbmQgYSBET00gbm9kZSBieSBgaWRgIGFuZCBtYWtlIGl0IGxvc2UgZm9jdXMuIFNvIGlmIHlvdSB3YW50ZWQgYSBub2RlXG5saWtlIGA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInNlYXJjaC1ib3hcIj5gIHRvIGxvc2UgZm9jdXMgeW91IGNvdWxkIHNheTpcblxuICAgIGltcG9ydCBCcm93c2VyLkRvbSBhcyBEb21cbiAgICBpbXBvcnQgVGFza1xuXG4gICAgdHlwZSBNc2dcbiAgICAgICAgPSBOb09wXG5cbiAgICB1bmZvY3VzU2VhcmNoQm94IDogQ21kIE1zZ1xuICAgIHVuZm9jdXNTZWFyY2hCb3ggPVxuICAgICAgICBUYXNrLmF0dGVtcHQgKFxcXyAtPiBOb09wKSAoRG9tLmJsdXIgXCJzZWFyY2gtYm94XCIpXG5cbk5vdGljZSB0aGF0IHRoaXMgY29kZSBpZ25vcmVzIHRoZSBwb3NzaWJpbGl0eSB0aGF0IGBzZWFyY2gtYm94YCBpcyBub3QgdXNlZFxuYXMgYW4gYGlkYCBieSBhbnkgbm9kZSwgZmFpbGluZyBzaWxlbnRseSBpbiB0aGF0IGNhc2UuIEl0IHdvdWxkIGJlIGJldHRlciB0b1xubG9nIHRoZSBmYWlsdXJlIHdpdGggd2hhdGV2ZXIgZXJyb3IgcmVwb3J0aW5nIHN5c3RlbSB5b3UgdXNlLlxuXG4tfVxuYmx1ciA6IFN0cmluZyAtPiBUYXNrIEVycm9yICgpXG5ibHVyID1cbiAgICBFbG0uS2VybmVsLkJyb3dzZXIuY2FsbCBcImJsdXJcIlxuXG5cblxuLS0gRVJST1JcblxuXG57LXwgTWFueSBmdW5jdGlvbnMgaW4gdGhpcyBtb2R1bGUgbG9vayB1cCBET00gbm9kZXMgdXAgYnkgdGhlaXIgYGlkYC4gSWYgeW91XG5hc2sgZm9yIGFuIGBpZGAgdGhhdCBpcyBub3QgaW4gdGhlIERPTSwgeW91IHdpbGwgZ2V0IHRoaXMgZXJyb3IuXG4tfVxudHlwZSBFcnJvclxuICAgID0gTm90Rm91bmQgU3RyaW5nXG5cblxuXG4tLSBWSUVXUE9SVFxuXG5cbnstfCBHZXQgaW5mb3JtYXRpb24gb24gdGhlIGN1cnJlbnQgdmlld3BvcnQgb2YgdGhlIGJyb3dzZXIuXG5cbiFbZ2V0Vmlld3BvcnRdKGh0dHBzOi8vZWxtLmdpdGh1Yi5pby9icm93c2VyL3YxL2dldFZpZXdwb3J0LnN2ZylcblxuSWYgeW91IHdhbnQgdG8gbW92ZSB0aGUgdmlld3BvcnQgYXJvdW5kIChpLmUuIGNoYW5nZSB0aGUgc2Nyb2xsIHBvc2l0aW9uKSB5b3VcbmNhbiB1c2UgW2BzZXRWaWV3cG9ydGBdKCNzZXRWaWV3cG9ydCkgd2hpY2ggY2hhbmdlIHRoZSBgeGAgYW5kIGB5YCBvZiB0aGVcbnZpZXdwb3J0LlxuXG4tfVxuZ2V0Vmlld3BvcnQgOiBUYXNrIHggVmlld3BvcnRcbmdldFZpZXdwb3J0ID1cbiAgICBFbG0uS2VybmVsLkJyb3dzZXIud2l0aFdpbmRvdyBFbG0uS2VybmVsLkJyb3dzZXIuZ2V0Vmlld3BvcnRcblxuXG57LXwgQWxsIHRoZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY3VycmVudCB2aWV3cG9ydC5cblxuIVtnZXRWaWV3cG9ydF0oaHR0cHM6Ly9lbG0uZ2l0aHViLmlvL2Jyb3dzZXIvdjEvZ2V0Vmlld3BvcnQuc3ZnKVxuXG4tfVxudHlwZSBhbGlhcyBWaWV3cG9ydCA9XG4gICAgeyBzY2VuZSA6XG4gICAgICAgIHsgd2lkdGggOiBGbG9hdFxuICAgICAgICAsIGhlaWdodCA6IEZsb2F0XG4gICAgICAgIH1cbiAgICAsIHZpZXdwb3J0IDpcbiAgICAgICAgeyB4IDogRmxvYXRcbiAgICAgICAgLCB5IDogRmxvYXRcbiAgICAgICAgLCB3aWR0aCA6IEZsb2F0XG4gICAgICAgICwgaGVpZ2h0IDogRmxvYXRcbiAgICAgICAgfVxuICAgIH1cblxuXG57LXwgSnVzdCBsaWtlIGBnZXRWaWV3cG9ydGAsIGJ1dCBmb3IgYW55IHNjcm9sbGFibGUgRE9NIG5vZGUuIFNheSB3ZSBoYXZlIGFuXG5hcHBsaWNhdGlvbiB3aXRoIGEgY2hhdCBib3ggaW4gdGhlIGJvdHRvdyByaWdodCBjb3JuZXIgbGlrZSB0aGlzOlxuXG4hW2NoYXRdKGh0dHBzOi8vZWxtLmdpdGh1Yi5pby9icm93c2VyL3YxL2NoYXQuc3ZnKVxuXG5UaGVyZSBhcmUgcHJvYmFibHkgYSB3aG9sZSBidW5jaCBvZiBtZXNzYWdlcyB0aGF0IGFyZSBub3QgYmVpbmcgc2hvd24uIFlvdVxuY291bGQgc2Nyb2xsIHVwIHRvIHNlZSB0aGVtIGFsbC4gV2VsbCwgd2UgY2FuIHRoaW5rIG9mIHRoYXQgY2hhdCBib3ggaXMgYVxudmlld3BvcnQgaW50byBhIHNjZW5lIVxuXG4hW2dldFZpZXdwb3J0T2ZdKGh0dHBzOi8vZWxtLmdpdGh1Yi5pby9icm93c2VyL3YxL2dldFZpZXdwb3J0T2Yuc3ZnKVxuXG5UaGlzIGNhbiBiZSB1c2VmdWwgd2l0aCBbYHNldFZpZXdwb3J0T2ZgXSgjc2V0Vmlld3BvcnRPZikgdG8gbWFrZSBzdXJlIG5ld1xubWVzc2FnZXMgYWx3YXlzIGFwcGVhciBvbiB0aGUgYm90dG9tLlxuXG5UaGUgdmlld3BvcnQgc2l6ZSBfZG9lcyBub3RfIGluY2x1ZGUgdGhlIGJvcmRlciBvciBtYXJnaW5zLlxuXG4qKk5vdGU6KiogVGhpcyBkYXRhIGlzIGNvbGxlY3RlZCBmcm9tIHNwZWNpZmljIGZpZWxkcyBpbiBKYXZhU2NyaXB0LCBzbyBpdFxubWF5IGJlIGhlbHBmdWwgdG8ga25vdyB0aGF0OlxuXG4gIC0gYHNjZW5lLndpZHRoYCA9IFtgc2Nyb2xsV2lkdGhgXVtzd11cbiAgLSBgc2NlbmUuaGVpZ2h0YCA9IFtgc2Nyb2xsSGVpZ2h0YF1bc2hdXG4gIC0gYHZpZXdwb3J0LnhgID0gW2BzY3JvbGxMZWZ0YF1bc2xdXG4gIC0gYHZpZXdwb3J0LnlgID0gW2BzY3JvbGxUb3BgXVtzdF1cbiAgLSBgdmlld3BvcnQud2lkdGhgID0gW2BjbGllbnRXaWR0aGBdW2N3XVxuICAtIGB2aWV3cG9ydC5oZWlnaHRgID0gW2BjbGllbnRIZWlnaHRgXVtjaF1cblxuTmVpdGhlciBbYG9mZnNldFdpZHRoYF1bb3ddIG5vciBbYG9mZnNldEhlaWdodGBdW29oXSBhcmUgYXZhaWxhYmxlLiBUaGUgdGhlb3J5XG5pcyB0aGF0ICgxKSB0aGUgaW5mb3JtYXRpb24gY2FuIGFsd2F5cyBiZSBvYnRhaW5lZCBieSB1c2luZyBgZ2V0RWxlbWVudGAgb24gYVxubm9kZSB3aXRob3V0IG1hcmdpbnMsICgyKSBubyBjYXNlcyBjYW1lIHRvIG1pbmQgd2hlcmUgeW91IGFjdHVhbGx5IGNhcmUgaW4gdGhlXG5maXJzdCBwbGFjZSwgYW5kICgzKSBpdCBpcyBhdmFpbGFibGUgdGhyb3VnaCBwb3J0cyBpZiBpdCBpcyByZWFsbHkgbmVlZGVkLlxuSWYgeW91IGhhdmUgYSBjYXNlIHRoYXQgcmVhbGx5IG5lZWRzIGl0IHRob3VnaCwgcGxlYXNlIHNoYXJlIHlvdXIgc3BlY2lmaWNcbnNjZW5hcmlvIGluIGFuIGlzc3VlISBOaWNlbHkgcHJlc2VudGVkIGNhc2Ugc3R1ZGllcyBhcmUgdGhlIHJhdyBpbmdyZWRpZW50cyBmb3JcbkFQSSBpbXByb3ZlbWVudHMhXG5cbltzd106IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L3Njcm9sbFdpZHRoXG5bc2hdOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRWxlbWVudC9zY3JvbGxIZWlnaHRcbltzdF06IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L3Njcm9sbFRvcFxuW3NsXTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQvc2Nyb2xsTGVmdFxuW2N3XTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQvY2xpZW50V2lkdGhcbltjaF06IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L2NsaWVudEhlaWdodFxuW293XTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0hUTUxFbGVtZW50L29mZnNldFdpZHRoXG5bb2hdOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSFRNTEVsZW1lbnQvb2Zmc2V0SGVpZ2h0XG5cbi19XG5nZXRWaWV3cG9ydE9mIDogU3RyaW5nIC0+IFRhc2sgRXJyb3IgVmlld3BvcnRcbmdldFZpZXdwb3J0T2YgPVxuICAgIEVsbS5LZXJuZWwuQnJvd3Nlci5nZXRWaWV3cG9ydE9mXG5cblxuXG4tLSBTRVQgVklFV1BPUlRcblxuXG57LXwgQ2hhbmdlIHRoZSBgeGAgYW5kIGB5YCBvZmZzZXQgb2YgdGhlIGJyb3dzZXIgdmlld3BvcnQgaW1tZWRpYXRlbHkuIEZvclxuZXhhbXBsZSwgeW91IGNvdWxkIG1ha2UgYSBjb21tYW5kIHRvIGp1bXAgdG8gdGhlIHRvcCBvZiB0aGUgcGFnZTpcblxuICAgIGltcG9ydCBCcm93c2VyLkRvbSBhcyBEb21cbiAgICBpbXBvcnQgVGFza1xuXG4gICAgdHlwZSBNc2dcbiAgICAgICAgPSBOb09wXG5cbiAgICByZXNldFZpZXdwb3J0IDogQ21kIE1zZ1xuICAgIHJlc2V0Vmlld3BvcnQgPVxuICAgICAgICBUYXNrLnBlcmZvcm0gKFxcXyAtPiBOb09wKSAoRG9tLnNldFZpZXdwb3J0IDAgMClcblxuVGhpcyBzZXRzIHRoZSB2aWV3cG9ydCBvZmZzZXQgdG8gemVyby5cblxuVGhpcyBjb3VsZCBiZSB1c2VmdWwgd2l0aCBgQnJvd3Nlci5hcHBsaWNhdGlvbmAgd2hlcmUgeW91IG1heSB3YW50IHRvIHJlc2V0XG50aGUgdmlld3BvcnQgd2hlbiB0aGUgVVJMIGNoYW5nZXMuIE1heWJlIHlvdSBnbyB0byBhICZsZHF1bztuZXcgcGFnZSZyZHF1bztcbmFuZCB3YW50IHBlb3BsZSB0byBzdGFydCBhdCB0aGUgdG9wIVxuXG4tfVxuc2V0Vmlld3BvcnQgOiBGbG9hdCAtPiBGbG9hdCAtPiBUYXNrIHggKClcbnNldFZpZXdwb3J0ID1cbiAgICBFbG0uS2VybmVsLkJyb3dzZXIuc2V0Vmlld3BvcnRcblxuXG57LXwgQ2hhbmdlIHRoZSBgeGAgYW5kIGB5YCBvZmZzZXQgb2YgYSBET00gbm9kZSZyc3F1bztzIHZpZXdwb3J0IGJ5IElELiBUaGlzXG5pcyBjb21tb24gaW4gdGV4dCBtZXNzYWdpbmcgYW5kIGNoYXQgcm9vbXMsIHdoZXJlIG9uY2UgdGhlIG1lc3NhZ2VzIGZpbGwgdGhlXG5zY3JlZW4sIHlvdSB3YW50IHRvIGFsd2F5cyBiZSBhdCB0aGUgdmVyeSBib3R0b20gb2YgdGhlIG1lc3NhZ2UgY2hhaW4uIFRoaXNcbndheSB0aGUgbGF0ZXN0IG1lc3NhZ2UgaXMgYWx3YXlzIG9uIHNjcmVlbiEgWW91IGNvdWxkIGRvIHRoaXM6XG5cbiAgICBpbXBvcnQgQnJvd3Nlci5Eb20gYXMgRG9tXG4gICAgaW1wb3J0IFRhc2tcblxuICAgIHR5cGUgTXNnXG4gICAgICAgID0gTm9PcFxuXG4gICAganVtcFRvQm90dG9tIDogU3RyaW5nIC0+IENtZCBNc2dcbiAgICBqdW1wVG9Cb3R0b20gaWQgPVxuICAgICAgICBEb20uZ2V0Vmlld3BvcnRPZiBpZFxuICAgICAgICAgICAgfD4gVGFzay5hbmRUaGVuIChcXGluZm8gLT4gRG9tLnNldFZpZXdwb3J0T2YgaWQgMCBpbmZvLnNjZW5lLmhlaWdodClcbiAgICAgICAgICAgIHw+IFRhc2suYXR0ZW1wdCAoXFxfIC0+IE5vT3ApXG5cblNvIHlvdSBjb3VsZCBjYWxsIGBqdW1wVG9Cb3R0b20gXCJjaGF0LWJveFwiYCB3aGVuZXZlciB5b3UgYWRkIGEgbmV3IG1lc3NhZ2UuXG5cbioqTm90ZSAxOioqIFdoYXQgaGFwcGVucyBpZiB0aGUgdmlld3BvcnQgaXMgcGxhY2VkIG91dCBvZiBib3VuZHM/IFdoZXJlIHRoZXJlXG5pcyBubyBgc2NlbmVgIHRvIHNob3c/IFRvIGF2b2lkIHRoaXMgcXVlc3Rpb24sIHRoZSBgeGAgYW5kIGB5YCBvZmZzZXRzIGFyZVxuY2xhbXBlZCBzdWNoIHRoYXQgdGhlIHZpZXdwb3J0IGlzIGFsd2F5cyBmdWxseSB3aXRoaW4gdGhlIGBzY2VuZWAuIFNvIHdoZW5cbmBqdW1wVG9Cb3R0b21gIHNldHMgdGhlIGB5YCBvZmZzZXQgb2YgdGhlIHZpZXdwb3J0IHRvIHRoZSBgaGVpZ2h0YCBvZiB0aGVcbmBzY2VuZWAgKGkuZS4gdG9vIGZhciEpIGl0IHJlbGllcyBvbiB0aGlzIGNsYW1waW5nIGJlaGF2aW9yIHRvIHB1dCB0aGUgdmlld3BvcnRcbmJhY2sgaW4gYm91bmRzLlxuXG4qKk5vdGUgMjoqKiBUaGUgZXhhbXBsZSBpZ25vcmVzIHdoZW4gdGhlIGVsZW1lbnQgSUQgaXMgbm90IGZvdW5kLCBidXQgaXQgd291bGRcbmJlIGdyZWF0IHRvIGxvZyB0aGF0IGluZm9ybWF0aW9uLiBJdCBtZWFucyB0aGVyZSBtYXkgYmUgYSBidWcgb3IgYSBkZWFkIGxpbmtcbnNvbWV3aGVyZSFcblxuLX1cbnNldFZpZXdwb3J0T2YgOiBTdHJpbmcgLT4gRmxvYXQgLT4gRmxvYXQgLT4gVGFzayBFcnJvciAoKVxuc2V0Vmlld3BvcnRPZiA9XG4gICAgRWxtLktlcm5lbC5Ccm93c2VyLnNldFZpZXdwb3J0T2ZcblxuXG5cbnstLVNMSURFIFZJRVdQT1JUXG5cblxuey18IENoYW5nZSB0aGUgYHhgIGFuZCBgeWAgb2Zmc2V0IG9mIHRoZSB2aWV3cG9ydCB3aXRoIGFuIGFuaW1hdGlvbi4gSW4gSlMsXG50aGlzIGNvcnJlc3BvbmRzIHRvIHNldHRpbmcgW2BzY3JvbGwtYmVoYXZpb3JgXVtzYl0gdG8gYHNtb290aGAuXG5cblRoaXMgY2FuIGRlZmluaXRlbHkgYmUgb3ZlcnVzZWQsIHNvIHRyeSB0byB1c2UgaXQgc3BlY2lmaWNhbGx5IHdoZW4geW91IHdhbnRcbnRoZSB1c2VyIHRvIGJlIHNwYXRpYWxseSBzaXR1YXRlZCBpbiBhIHNjZW5lLiBGb3IgZXhhbXBsZSwgYSAmbGRxdW87YmFjayB0b1xudG9wJnJkcXVvOyBidXR0b24gbWlnaHQgdXNlIGl0OlxuXG4gICAgaW1wb3J0IEJyb3dzZXIuRG9tIGFzIERvbVxuICAgIGltcG9ydCBUYXNrXG5cbiAgICB0eXBlIE1zZyA9IE5vT3BcblxuICAgIGJhY2tUb1RvcCA6IENtZCBNc2dcbiAgICBiYWNrVG9Ub3AgPVxuICAgICAgVGFzay5wZXJmb3JtIChcXF8gLT4gTm9PcCkgKERvbS5zbGlkZVZpZXdwb3J0IDAgMClcblxuQmUgY2FyZWZ1bCB3aGVuIHBhcmluZyB0aGlzIHdpdGggYEJyb3dzZXIuYXBwbGljYXRpb25gLiBXaGVuIHRoZSBVUkwgY2hhbmdlc1xuYW5kIGEgd2hvbGUgbmV3IHNjZW5lIGlzIGdvaW5nIHRvIGJlIHJlbmRlcmVkLCB1c2luZyBgc2V0Vmlld3BvcnRgIGlzIHByb2JhYmx5XG5iZXN0LiBJZiB5b3UgYXJlIG1vdmluZyB3aXRoaW4gYSBzY2VuZSwgeW91IG1heSBiZW5lZml0IGZyb20gYSBtaXggb2ZcbmBzZXRWaWV3cG9ydGAgYW5kIGBzbGlkZVZpZXdwb3J0YC4gU2xpZGluZyB0byB0aGUgdG9wIGlzIG5pY2UsIGJ1dCBzbGlkaW5nXG5hcm91bmQgZXZlcnl3aGVyZSBpcyBwcm9iYWJseSBhbm5veWluZy5cblxuW3NiXTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3Njcm9sbC1iZWhhdmlvclxuLX1cbnNsaWRlVmlld3BvcnQgOiBGbG9hdCAtPiBGbG9hdCAtPiBUYXNrIHggKClcbnNsaWRlVmlld3BvcnQgPVxuICBEZWJ1Zy50b2RvIFwic2xpZGVWaWV3cG9ydFwiXG5cblxuc2xpZGVWaWV3cG9ydE9mIDogU3RyaW5nIC0+IEZsb2F0IC0+IEZsb2F0IC0+IFRhc2sgRXJyb3IgKClcbnNsaWRlVmlld3BvcnRPZiA9XG4gIERlYnVnLnRvZG8gXCJzbGlkZVZpZXdwb3J0T2ZcIlxuXG4tLX1cbi0tIEVMRU1FTlRcblxuXG57LXwgR2V0IHBvc2l0aW9uIGluZm9ybWF0aW9uIGFib3V0IHNwZWNpZmljIGVsZW1lbnRzLiBTYXkgd2UgcHV0XG5gaWQgXCJqZXN0aW5nLWFzaWRlXCJgIG9uIHRoZSBzZXZlbnRoIHBhcmFncmFwaCBvZiB0aGUgdGV4dC4gV2hlbiB3ZSBjYWxsXG5gZ2V0RWxlbWVudCBcImplc3RpbmctYXNpZGVcImAgd2Ugd291bGQgZ2V0IHRoZSBmb2xsb3dpbmcgaW5mb3JtYXRpb246XG5cbiFbZ2V0RWxlbWVudF0oaHR0cHM6Ly9lbG0uZ2l0aHViLmlvL2Jyb3dzZXIvdjEvZ2V0RWxlbWVudC5zdmcpXG5cblRoaXMgY2FuIGJlIHVzZWZ1bCBmb3I6XG5cbiAgLSAqKlNjcm9sbGluZyoqICZtZGFzaDsgUGFpciB0aGlzIGluZm9ybWF0aW9uIHdpdGggYHNldFZpZXdwb3J0YCB0byBzY3JvbGxcbiAgICBzcGVjaWZpYyBlbGVtZW50cyBpbnRvIHZpZXcuIFRoaXMgZ2l2ZXMgeW91IGEgbG90IG9mIGNvbnRyb2wgb3ZlciB3aGVyZSBleGFjdGx5XG4gICAgdGhlIGVsZW1lbnQgd291bGQgYmUgYWZ0ZXIgdGhlIHZpZXdwb3J0IG1vdmVkLlxuXG4gIC0gKipEcmFnIGFuZCBEcm9wKiogJm1kYXNoOyBBcyBvZiB0aGlzIHdyaXRpbmcsIGB0b3VjaG1vdmVgIGV2ZW50cyBkbyBub3QgdGVsbFxuICAgIHlvdSB3aGljaCBlbGVtZW50IHlvdSBhcmUgY3VycmVudGx5IGFib3ZlLiBUbyBmaWd1cmUgb3V0IGlmIHlvdSBoYXZlIGRyYWdnZWRcbiAgICBzb21ldGhpbmcgb3ZlciB0aGUgdGFyZ2V0LCB5b3UgY291bGQgc2VlIGlmIHRoZSBgcGFnZVhgIGFuZCBgcGFnZVlgIG9mIHRoZVxuICAgIHRvdWNoIGFyZSBpbnNpZGUgdGhlIGB4YCwgYHlgLCBgd2lkdGhgLCBhbmQgYGhlaWdodGAgb2YgdGhlIHRhcmdldCBlbGVtZW50LlxuXG4qKk5vdGU6KiogVGhpcyBjb3JyZXNwb25kcyB0byBKYXZhU2NyaXB0JnJzcXVvO3MgW2BnZXRCb3VuZGluZ0NsaWVudFJlY3RgXVtnYmNyXSxcbnNvICoqdGhlIGVsZW1lbnQmcnNxdW87cyBtYXJnaW5zIGFyZSBpbmNsdWRlZCBpbiBpdHMgYHdpZHRoYCBhbmQgYGhlaWdodGAqKi5cbldpdGggc2Nyb2xsaW5nLCBtYXliZSB5b3Ugd2FudCB0byBpbmNsdWRlIHRoZSBtYXJnaW5zLiBXaXRoIGRyYWctYW5kLWRyb3AsIHlvdVxucHJvYmFibHkgZG8gbm90LCBzbyBzb21lIGZvbGtzIHNldCB0aGUgbWFyZ2lucyB0byB6ZXJvIGFuZCBwdXQgdGhlIHRhcmdldFxuZWxlbWVudCBpbiBhIGA8ZGl2PmAgdGhhdCBhZGRzIHRoZSBzcGFjaW5nLiBKdXN0IHNvbWV0aGluZyB0byBiZSBhd2FyZSBvZiFcblxuW2diY3JdOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRWxlbWVudC9nZXRCb3VuZGluZ0NsaWVudFJlY3RcblxuLX1cbmdldEVsZW1lbnQgOiBTdHJpbmcgLT4gVGFzayBFcnJvciBFbGVtZW50XG5nZXRFbGVtZW50ID1cbiAgICBFbG0uS2VybmVsLkJyb3dzZXIuZ2V0RWxlbWVudFxuXG5cbnstfCBBIGJ1bmNoIG9mIGluZm9ybWF0aW9uIGFib3V0IHRoZSBwb3NpdGlvbiBhbmQgc2l6ZSBvZiBhbiBlbGVtZW50IHJlbGF0aXZlXG50byB0aGUgb3ZlcmFsbCBzY2VuZS5cblxuIVtnZXRFbGVtZW50XShodHRwczovL2VsbS5naXRodWIuaW8vYnJvd3Nlci92MS9nZXRFbGVtZW50LnN2ZylcblxuLX1cbnR5cGUgYWxpYXMgRWxlbWVudCA9XG4gICAgeyBzY2VuZSA6XG4gICAgICAgIHsgd2lkdGggOiBGbG9hdFxuICAgICAgICAsIGhlaWdodCA6IEZsb2F0XG4gICAgICAgIH1cbiAgICAsIHZpZXdwb3J0IDpcbiAgICAgICAgeyB4IDogRmxvYXRcbiAgICAgICAgLCB5IDogRmxvYXRcbiAgICAgICAgLCB3aWR0aCA6IEZsb2F0XG4gICAgICAgICwgaGVpZ2h0IDogRmxvYXRcbiAgICAgICAgfVxuICAgICwgZWxlbWVudCA6XG4gICAgICAgIHsgeCA6IEZsb2F0XG4gICAgICAgICwgeSA6IEZsb2F0XG4gICAgICAgICwgd2lkdGggOiBGbG9hdFxuICAgICAgICAsIGhlaWdodCA6IEZsb2F0XG4gICAgICAgIH1cbiAgICB9XG4nfSkpLAoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknRXZlbnRzLmVsbScsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkQmxvYk5vZGUoCgkJCQkJCQl7dXRmODogJ2VmZmVjdCBtb2R1bGUgQnJvd3Nlci5FdmVudHMgd2hlcmUgeyBzdWJzY3JpcHRpb24gPSBNeVN1YiB9IGV4cG9zaW5nXG4gICggb25BbmltYXRpb25GcmFtZSwgb25BbmltYXRpb25GcmFtZURlbHRhXG4gICwgb25LZXlQcmVzcywgb25LZXlEb3duLCBvbktleVVwXG4gICwgb25DbGljaywgb25Nb3VzZU1vdmUsIG9uTW91c2VEb3duLCBvbk1vdXNlVXBcbiAgLCBvblJlc2l6ZSwgb25WaXNpYmlsaXR5Q2hhbmdlLCBWaXNpYmlsaXR5KC4uKVxuICApXG5cbnstfCBJbiBKYXZhU2NyaXB0LCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcm9vdCBvZiBhbiBIVE1MIGRvY3VtZW50IGlzIGhlbGQgaW5cbnRoZSBgZG9jdW1lbnRgIGFuZCBgd2luZG93YCBvYmplY3RzLiBUaGlzIG1vZHVsZSBsZXRzIHlvdSBjcmVhdGUgZXZlbnRcbmxpc3RlbmVycyBvbiB0aG9zZSBvYmplY3RzIGZvciB0aGUgZm9sbG93aW5nIHRvcGljczogW2FuaW1hdGlvbl0oI2FuaW1hdGlvbiksXG5ba2V5Ym9hcmRdKCNrZXlib2FyZCksIFttb3VzZV0oI21vdXNlKSwgYW5kIFt3aW5kb3ddKCN3aW5kb3cpLlxuXG5JZiB0aGVyZSBpcyBzb21ldGhpbmcgZWxzZSB5b3UgbmVlZCwgdXNlIFtwb3J0c10gdG8gZG8gaXQgaW4gSmF2YVNjcmlwdCFcblxuW3BvcnRzXTogaHR0cHM6Ly9ndWlkZS5lbG0tbGFuZy5vcmcvaW50ZXJvcC9wb3J0cy5odG1sXG5cblxuIyBBbmltYXRpb25cblxuQGRvY3Mgb25BbmltYXRpb25GcmFtZSwgb25BbmltYXRpb25GcmFtZURlbHRhXG5cblxuIyBLZXlib2FyZFxuXG5AZG9jcyBvbktleVByZXNzLCBvbktleURvd24sIG9uS2V5VXBcblxuXG4jIE1vdXNlXG5cbkBkb2NzIG9uQ2xpY2ssIG9uTW91c2VNb3ZlLCBvbk1vdXNlRG93biwgb25Nb3VzZVVwXG5cblxuIyBXaW5kb3dcblxuQGRvY3Mgb25SZXNpemUsIG9uVmlzaWJpbGl0eUNoYW5nZSwgVmlzaWJpbGl0eVxuXG4tfVxuXG5pbXBvcnQgQnJvd3Nlci5BbmltYXRpb25NYW5hZ2VyIGFzIEFNXG5pbXBvcnQgRGljdFxuaW1wb3J0IEVsbS5LZXJuZWwuQnJvd3NlclxuaW1wb3J0IEpzb24uRGVjb2RlIGFzIERlY29kZVxuaW1wb3J0IFByb2Nlc3NcbmltcG9ydCBUYXNrIGV4cG9zaW5nIChUYXNrKVxuaW1wb3J0IFRpbWVcblxuXG5cbi0tIEFOSU1BVElPTlxuXG5cbnstfCBBbiBhbmltYXRpb24gZnJhbWUgdHJpZ2dlcnMgYWJvdXQgNjAgdGltZXMgcGVyIHNlY29uZC4gR2V0IHRoZSBQT1NJWCB0aW1lXG5vbiBlYWNoIGZyYW1lLiAoU2VlIFtgZWxtL3RpbWVgXSgvcGFja2FnZXMvZWxtL3RpbWUvbGF0ZXN0KSBmb3IgbW9yZSBpbmZvIG9uXG5QT1NJWCB0aW1lcy4pXG5cbioqTm90ZToqKiBCcm93c2VycyBoYXZlIHRoZWlyIG93biByZW5kZXIgbG9vcCwgcmVwYWludGluZyB0aGluZ3MgYXMgZmFzdCBhc1xucG9zc2libGUuIElmIHlvdSB3YW50IHNtb290aCBhbmltYXRpb25zIGluIHlvdXIgYXBwbGljYXRpb24sIGl0IGlzIGhlbHBmdWwgdG9cbnN5bmMgdXAgd2l0aCB0aGUgYnJvd3NlcnMgbmF0dXJhbCByZWZyZXNoIHJhdGUuIFRoaXMgaG9va3MgaW50byBKYXZhU2NyaXB0XCdzXG5gcmVxdWVzdEFuaW1hdGlvbkZyYW1lYCBmdW5jdGlvbi5cblxuLX1cbm9uQW5pbWF0aW9uRnJhbWUgOiAoVGltZS5Qb3NpeCAtPiBtc2cpIC0+IFN1YiBtc2dcbm9uQW5pbWF0aW9uRnJhbWUgPVxuICBBTS5vbkFuaW1hdGlvbkZyYW1lXG5cblxuey18IEp1c3QgbGlrZSBgb25BbmltYXRpb25GcmFtZWAsIGV4Y2VwdCBtZXNzYWdlIGlzIHRoZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xuc2luY2UgdGhlIHByZXZpb3VzIGZyYW1lLiBTbyB5b3Ugc2hvdWxkIGdldCBhIHNlcXVlbmNlIG9mIHZhbHVlcyBhbGwgYXJvdW5kXG5gMTAwMCAvIDYwYCB3aGljaCBpcyBuaWNlIGZvciBzdGVwcGluZyBhbmltYXRpb25zIGJ5IGEgdGltZSBkZWx0YS5cbi19XG5vbkFuaW1hdGlvbkZyYW1lRGVsdGEgOiAoRmxvYXQgLT4gbXNnKSAtPiBTdWIgbXNnXG5vbkFuaW1hdGlvbkZyYW1lRGVsdGEgPVxuICBBTS5vbkFuaW1hdGlvbkZyYW1lRGVsdGFcblxuXG5cbi0tIEtFWUJPQVJEXG5cblxuey18IFN1YnNjcmliZSB0byBrZXkgcHJlc3NlcyB0aGF0IG5vcm1hbGx5IHByb2R1Y2UgY2hhcmFjdGVycy4gU28geW91IHNob3VsZFxubm90IHJlbHkgb24gdGhpcyBmb3IgYXJyb3cga2V5cy5cblxuKipOb3RlOioqIENoZWNrIG91dCBbdGhpcyBhZHZpY2VdW25vdGVdIHRvIGxlYXJuIG1vcmUgYWJvdXQgZGVjb2Rpbmcga2V5IGNvZGVzLlxuSXQgaXMgbW9yZSBjb21wbGljYXRlZCB0aGFuIGl0IHNob3VsZCBiZS5cblxuW25vdGVdOiBodHRwczovL2dpdGh1Yi5jb20vZWxtL2Jyb3dzZXIvYmxvYi8xLjAuMi9ub3Rlcy9rZXlib2FyZC5tZFxuXG4tfVxub25LZXlQcmVzcyA6IERlY29kZS5EZWNvZGVyIG1zZyAtPiBTdWIgbXNnXG5vbktleVByZXNzID1cbiAgb24gRG9jdW1lbnQgXCJrZXlwcmVzc1wiXG5cblxuey18IFN1YnNjcmliZSB0byBnZXQgY29kZXMgd2hlbmV2ZXIgYSBrZXkgZ29lcyBkb3duLiBUaGlzIGNhbiBiZSB1c2VmdWwgZm9yXG5jcmVhdGluZyBnYW1lcy4gTWF5YmUgeW91IHdhbnQgdG8ga25vdyBpZiBwZW9wbGUgYXJlIHByZXNzaW5nIGB3YCwgYGFgLCBgc2AsXG5vciBgZGAgYXQgYW55IGdpdmVuIHRpbWUuXG5cbioqTm90ZToqKiBDaGVjayBvdXQgW3RoaXMgYWR2aWNlXVtub3RlXSB0byBsZWFybiBtb3JlIGFib3V0IGRlY29kaW5nIGtleSBjb2Rlcy5cbkl0IGlzIG1vcmUgY29tcGxpY2F0ZWQgdGhhbiBpdCBzaG91bGQgYmUuXG5cbltub3RlXTogaHR0cHM6Ly9naXRodWIuY29tL2VsbS9icm93c2VyL2Jsb2IvMS4wLjIvbm90ZXMva2V5Ym9hcmQubWRcblxuLX1cbm9uS2V5RG93biA6IERlY29kZS5EZWNvZGVyIG1zZyAtPiBTdWIgbXNnXG5vbktleURvd24gPVxuICBvbiBEb2N1bWVudCBcImtleWRvd25cIlxuXG5cbnstfCBTdWJzY3JpYmUgdG8gZ2V0IGNvZGVzIHdoZW5ldmVyIGEga2V5IGdvZXMgdXAuIE9mdGVuIHVzZWQgaW4gY29tYmluYXRpb25cbndpdGggW2BvblZpc2liaWxpdHlDaGFuZ2VgXSgjb25WaXNpYmlsaXR5Q2hhbmdlKSB0byBiZSBzdXJlIGtleXMgZG8gbm90IGFwcGVhclxudG8gZG93biBhbmQgbmV2ZXIgY29tZSBiYWNrIHVwLlxuLX1cbm9uS2V5VXAgOiBEZWNvZGUuRGVjb2RlciBtc2cgLT4gU3ViIG1zZ1xub25LZXlVcCA9XG4gIG9uIERvY3VtZW50IFwia2V5dXBcIlxuXG5cblxuLS0gTU9VU0VcblxuXG57LXwgU3Vic2NyaWJlIHRvIG1vdXNlIGNsaWNrcyBhbnl3aGVyZSBvbiBzY3JlZW4uIE1heWJlIHlvdSBuZWVkIHRvIGNyZWF0ZSBhXG5jdXN0b20gZHJvcCBkb3duLiBZb3UgY291bGQgbGlzdGVuIGZvciBjbGlja3Mgd2hlbiBpdCBpcyBvcGVuLCBsZXR0aW5nIHlvdSBrbm93XG5pZiBzb21lb25lIGNsaWNrZWQgb3V0IG9mIGl0OlxuXG4gICAgaW1wb3J0IEJyb3dzZXIuRXZlbnRzIGFzIEV2ZW50c1xuICAgIGltcG9ydCBKc29uLkRlY29kZSBhcyBEXG5cbiAgICB0eXBlIE1zZ1xuICAgICAgID0gQ2xpY2tPdXRcblxuICAgIHN1YnNjcmlwdGlvbnMgOiBNb2RlbCAtPiBTdWIgTXNnXG4gICAgc3Vic2NyaXB0aW9ucyBtb2RlbCA9XG4gICAgICBjYXNlIG1vZGVsLmRyb3BEb3duIG9mXG4gICAgICAgIENsb3NlZCBfIC0+XG4gICAgICAgICAgU3ViLm5vbmVcblxuICAgICAgICBPcGVuIF8gLT5cbiAgICAgICAgICBFdmVudHMub25DbGljayAoRC5zdWNjZWVkIENsaWNrT3V0KVxuXG4tfVxub25DbGljayA6IERlY29kZS5EZWNvZGVyIG1zZyAtPiBTdWIgbXNnXG5vbkNsaWNrID1cbiAgb24gRG9jdW1lbnQgXCJjbGlja1wiXG5cblxuey18IFN1YnNjcmliZSB0byBtb3VzZSBtb3ZlcyBhbnl3aGVyZSBvbiBzY3JlZW4uXG5cbllvdSBjb3VsZCB1c2UgdGhpcyB0byBpbXBsZW1lbnQgcmVzaXphYmxlIHBhbmVscyBsaWtlIGluIEVsbVwncyBvbmxpbmUgY29kZVxuZWRpdG9yLiBDaGVjayBvdXQgdGhlIGV4YW1wbGUgaW1wcmVtZW50YXRpb24gW2hlcmVdW2RyYWddLlxuXG5bZHJhZ106IGh0dHBzOi8vZ2l0aHViLmNvbS9lbG0vYnJvd3Nlci9ibG9iLzEuMC4yL2V4YW1wbGVzL3NyYy9EcmFnLmVsbVxuXG4qKk5vdGU6KiogVW5zdWJzY3JpYmUgaWYgeW91IGRvIG5vdCBuZWVkIHRoZXNlIGV2ZW50cyEgUnVubmluZyBjb2RlIG9uIGV2ZXJ5XG5zaW5nbGUgbW91c2UgbW92ZW1lbnQgY2FuIGJlIHZlcnkgY29zdGx5LCBhbmQgaXQgaXMgcmVjb21tZW5kZWQgdG8gb25seVxuc3Vic2NyaWJlIHdoZW4gYWJzb2x1dGVseSBuZWNlc3NhcnkuXG5cbi19XG5vbk1vdXNlTW92ZSA6IERlY29kZS5EZWNvZGVyIG1zZyAtPiBTdWIgbXNnXG5vbk1vdXNlTW92ZSA9XG4gIG9uIERvY3VtZW50IFwibW91c2Vtb3ZlXCJcblxuXG57LXwgU3Vic2NyaWJlIHRvIGdldCBtb3VzZSBpbmZvcm1hdGlvbiB3aGVuZXZlciB0aGUgbW91c2UgYnV0dG9uIGdvZXMgZG93bi5cbi19XG5vbk1vdXNlRG93biA6IERlY29kZS5EZWNvZGVyIG1zZyAtPiBTdWIgbXNnXG5vbk1vdXNlRG93biA9XG4gIG9uIERvY3VtZW50IFwibW91c2Vkb3duXCJcblxuXG57LXwgU3Vic2NyaWJlIHRvIGdldCBtb3VzZSBpbmZvcm1hdGlvbiB3aGVuZXZlciB0aGUgbW91c2UgYnV0dG9uIGdvZXMgdXAuXG5PZnRlbiB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggW2BvblZpc2liaWxpdHlDaGFuZ2VgXSgjb25WaXNpYmlsaXR5Q2hhbmdlKVxudG8gYmUgc3VyZSBrZXlzIGRvIG5vdCBhcHBlYXIgdG8gZG93biBhbmQgbmV2ZXIgY29tZSBiYWNrIHVwLlxuLX1cbm9uTW91c2VVcCA6IERlY29kZS5EZWNvZGVyIG1zZyAtPiBTdWIgbXNnXG5vbk1vdXNlVXAgPVxuICBvbiBEb2N1bWVudCBcIm1vdXNldXBcIlxuXG5cblxuLS0gV0lORE9XXG5cblxuey18IFN1YnNjcmliZSB0byBhbnkgY2hhbmdlcyBpbiB3aW5kb3cgc2l6ZS5cblxuRm9yIGV4YW1wbGUsIHlvdSBjb3VsZCB0cmFjayB0aGUgY3VycmVudCB3aWR0aCBieSBzYXlpbmc6XG5cbiAgICBpbXBvcnQgQnJvd3Nlci5FdmVudHMgYXMgRVxuXG4gICAgdHlwZSBNc2dcbiAgICAgID0gR290TmV3V2lkdGggSW50XG5cbiAgICBzdWJzY3JpcHRpb25zIDogbW9kZWwgLT4gQ21kIE1zZ1xuICAgIHN1YnNjcmlwdGlvbnMgXyA9XG4gICAgICBFLm9uUmVzaXplIChcXHcgaCAtPiBHb3ROZXdXaWR0aCB3KVxuXG4qKk5vdGU6KiogVGhpcyBpcyBlcXVpdmFsZW50IHRvIGdldHRpbmcgZXZlbnRzIGZyb20gW2B3aW5kb3cub25yZXNpemVgXVtyZXNpemVdLlxuXG5bcmVzaXplXTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0dsb2JhbEV2ZW50SGFuZGxlcnMvb25yZXNpemVcblxuLX1cbm9uUmVzaXplIDogKEludCAtPiBJbnQgLT4gbXNnKSAtPiBTdWIgbXNnXG5vblJlc2l6ZSBmdW5jID1cbiAgb24gV2luZG93IFwicmVzaXplXCIgPHxcbiAgICBEZWNvZGUuZmllbGQgXCJ0YXJnZXRcIiA8fFxuICAgICAgRGVjb2RlLm1hcDIgZnVuY1xuICAgICAgICAoRGVjb2RlLmZpZWxkIFwiaW5uZXJXaWR0aFwiIERlY29kZS5pbnQpXG4gICAgICAgIChEZWNvZGUuZmllbGQgXCJpbm5lckhlaWdodFwiIERlY29kZS5pbnQpXG5cblxuey18IFN1YnNjcmliZSB0byBhbnkgdmlzaWJpbGl0eSBjaGFuZ2VzLCBsaWtlIGlmIHRoZSB1c2VyIHN3aXRjaGVzIHRvIGFcbmRpZmZlcmVudCB0YWIgb3Igd2luZG93LiBXaGVuIHRoZSB1c2VyIGxvb2tzIGF3YXksIHlvdSBtYXkgd2FudCB0bzpcblxuLSBQYXVzZSBhIHRpbWVyLlxuLSBQYXVzZSBhbiBhbmltYXRpb24uXG4tIFBhdXNlIHZpZGVvIG9yIGF1ZGlvLlxuLSBQYXVzZSBhbiBpbWFnZSBjYXJvdXNlbC5cbi0gU3RvcCBwb2xsaW5nIGEgc2VydmVyIGZvciBuZXcgaW5mb3JtYXRpb24uXG4tIFN0b3Agd2FpdGluZyBmb3IgYW4gW2BvbktleVVwYF0oI29uS2V5VXApIGV2ZW50LlxuXG4tfVxub25WaXNpYmlsaXR5Q2hhbmdlIDogKFZpc2liaWxpdHkgLT4gbXNnKSAtPiBTdWIgbXNnXG5vblZpc2liaWxpdHlDaGFuZ2UgZnVuYyA9XG4gIGxldFxuICAgIGluZm8gPSBFbG0uS2VybmVsLkJyb3dzZXIudmlzaWJpbGl0eUluZm8gKClcbiAgaW5cbiAgb24gRG9jdW1lbnQgaW5mby5jaGFuZ2UgPHxcbiAgICBEZWNvZGUubWFwICh3aXRoSGlkZGVuIGZ1bmMpIDx8XG4gICAgICBEZWNvZGUuZmllbGQgXCJ0YXJnZXRcIiA8fFxuICAgICAgICBEZWNvZGUuZmllbGQgaW5mby5oaWRkZW4gRGVjb2RlLmJvb2xcblxuXG53aXRoSGlkZGVuIDogKFZpc2liaWxpdHkgLT4gbXNnKSAtPiBCb29sIC0+IG1zZ1xud2l0aEhpZGRlbiBmdW5jIGlzSGlkZGVuID1cbiAgZnVuYyAoaWYgaXNIaWRkZW4gdGhlbiBIaWRkZW4gZWxzZSBWaXNpYmxlKVxuXG5cbnstfCBWYWx1ZSBkZXNjcmliaW5nIHdoZXRoZXIgdGhlIHBhZ2UgaXMgaGlkZGVuIG9yIHZpc2libGUuXG4tfVxudHlwZSBWaXNpYmlsaXR5XG4gID0gVmlzaWJsZVxuICB8IEhpZGRlblxuXG5cblxuLS0gU1VCU0NSSVBUSU9OU1xuXG5cbnR5cGUgTm9kZVxuICA9IERvY3VtZW50XG4gIHwgV2luZG93XG5cblxub24gOiBOb2RlIC0+IFN0cmluZyAtPiBEZWNvZGUuRGVjb2RlciBtc2cgLT4gU3ViIG1zZ1xub24gbm9kZSBuYW1lIGRlY29kZXIgPVxuICBzdWJzY3JpcHRpb24gKE15U3ViIG5vZGUgbmFtZSBkZWNvZGVyKVxuXG5cbnR5cGUgTXlTdWIgbXNnXG4gID0gTXlTdWIgTm9kZSBTdHJpbmcgKERlY29kZS5EZWNvZGVyIG1zZylcblxuXG5zdWJNYXAgOiAoYSAtPiBiKSAtPiBNeVN1YiBhIC0+IE15U3ViIGJcbnN1Yk1hcCBmdW5jIChNeVN1YiBub2RlIG5hbWUgZGVjb2RlcikgPVxuICBNeVN1YiBub2RlIG5hbWUgKERlY29kZS5tYXAgZnVuYyBkZWNvZGVyKVxuXG5cblxuLS0gRUZGRUNUIE1BTkFHRVJcblxuXG50eXBlIGFsaWFzIFN0YXRlIG1zZyA9XG4gIHsgc3VicyA6IExpc3QgKCBTdHJpbmcsIE15U3ViIG1zZyApXG4gICwgcGlkcyA6IERpY3QuRGljdCBTdHJpbmcgUHJvY2Vzcy5JZFxuICB9XG5cblxuaW5pdCA6IFRhc2sgTmV2ZXIgKFN0YXRlIG1zZylcbmluaXQgPVxuICBUYXNrLnN1Y2NlZWQgKFN0YXRlIFtdIERpY3QuZW1wdHkpXG5cblxudHlwZSBhbGlhcyBFdmVudCA9XG4gIHsga2V5IDogU3RyaW5nXG4gICwgZXZlbnQgOiBEZWNvZGUuVmFsdWVcbiAgfVxuXG5cbm9uU2VsZk1zZyA6IFBsYXRmb3JtLlJvdXRlciBtc2cgRXZlbnQgLT4gRXZlbnQgLT4gU3RhdGUgbXNnIC0+IFRhc2sgTmV2ZXIgKFN0YXRlIG1zZylcbm9uU2VsZk1zZyByb3V0ZXIgeyBrZXksIGV2ZW50IH0gc3RhdGUgPVxuICBsZXRcbiAgICB0b01lc3NhZ2UgKCBzdWJLZXksIE15U3ViIG5vZGUgbmFtZSBkZWNvZGVyICkgPVxuICAgICAgaWYgc3ViS2V5ID09IGtleSB0aGVuXG4gICAgICAgIEVsbS5LZXJuZWwuQnJvd3Nlci5kZWNvZGVFdmVudCBkZWNvZGVyIGV2ZW50XG4gICAgICBlbHNlXG4gICAgICAgIE5vdGhpbmdcblxuICAgIG1lc3NhZ2VzID0gTGlzdC5maWx0ZXJNYXAgdG9NZXNzYWdlIHN0YXRlLnN1YnNcbiAgaW5cbiAgVGFzay5zZXF1ZW5jZSAoTGlzdC5tYXAgKFBsYXRmb3JtLnNlbmRUb0FwcCByb3V0ZXIpIG1lc3NhZ2VzKVxuICAgIHw+IFRhc2suYW5kVGhlbiAoXFxfIC0+IFRhc2suc3VjY2VlZCBzdGF0ZSlcblxuXG5vbkVmZmVjdHMgOiBQbGF0Zm9ybS5Sb3V0ZXIgbXNnIEV2ZW50IC0+IExpc3QgKE15U3ViIG1zZykgLT4gU3RhdGUgbXNnIC0+IFRhc2sgTmV2ZXIgKFN0YXRlIG1zZylcbm9uRWZmZWN0cyByb3V0ZXIgc3VicyBzdGF0ZSA9XG4gIGxldFxuICAgIG5ld1N1YnMgPSBMaXN0Lm1hcCBhZGRLZXkgc3Vic1xuXG4gICAgc3RlcExlZnQgXyBwaWQgKGRlYWRzLCBsaXZlcywgbmV3cykgPVxuICAgICAgKHBpZCA6OiBkZWFkcywgbGl2ZXMsIG5ld3MpXG5cbiAgICBzdGVwQm90aCBrZXkgcGlkIF8gKGRlYWRzLCBsaXZlcywgbmV3cykgPVxuICAgICAgKGRlYWRzLCBEaWN0Lmluc2VydCBrZXkgcGlkIGxpdmVzLCBuZXdzKVxuXG4gICAgc3RlcFJpZ2h0IGtleSBzdWIgKGRlYWRzLCBsaXZlcywgbmV3cykgPVxuICAgICAgKGRlYWRzLCBsaXZlcywgc3Bhd24gcm91dGVyIGtleSBzdWIgOjogbmV3cylcblxuICAgIChkZWFkUGlkcywgbGl2ZVBpZHMsIG1ha2VOZXdQaWRzKSA9XG4gICAgICBEaWN0Lm1lcmdlIHN0ZXBMZWZ0IHN0ZXBCb3RoIHN0ZXBSaWdodCBzdGF0ZS5waWRzIChEaWN0LmZyb21MaXN0IG5ld1N1YnMpIChbXSwgRGljdC5lbXB0eSwgW10pXG4gIGluXG4gIFRhc2suc2VxdWVuY2UgKExpc3QubWFwIFByb2Nlc3Mua2lsbCBkZWFkUGlkcylcbiAgICB8PiBUYXNrLmFuZFRoZW4gKFxcXyAtPiBUYXNrLnNlcXVlbmNlIG1ha2VOZXdQaWRzKVxuICAgIHw+IFRhc2suYW5kVGhlbiAoXFxwaWRzIC0+IFRhc2suc3VjY2VlZCAoU3RhdGUgbmV3U3VicyAoRGljdC51bmlvbiBsaXZlUGlkcyAoRGljdC5mcm9tTGlzdCBwaWRzKSkpKVxuXG5cblxuLS0gVE8gS0VZXG5cblxuYWRkS2V5IDogTXlTdWIgbXNnIC0+ICggU3RyaW5nLCBNeVN1YiBtc2cgKVxuYWRkS2V5ICgoTXlTdWIgbm9kZSBuYW1lIF8pIGFzIHN1YikgPVxuICAobm9kZVRvS2V5IG5vZGUgKysgbmFtZSwgc3ViKVxuXG5cbm5vZGVUb0tleSA6IE5vZGUgLT4gU3RyaW5nXG5ub2RlVG9LZXkgbm9kZSA9XG4gIGNhc2Ugbm9kZSBvZlxuICAgIERvY3VtZW50IC0+IFwiZF9cIlxuICAgIFdpbmRvdyAgIC0+IFwid19cIlxuXG5cblxuLS0gU1BBV05cblxuXG5zcGF3biA6IFBsYXRmb3JtLlJvdXRlciBtc2cgRXZlbnQgLT4gU3RyaW5nIC0+IE15U3ViIG1zZyAtPiBUYXNrIE5ldmVyICggU3RyaW5nLCBQcm9jZXNzLklkIClcbnNwYXduIHJvdXRlciBrZXkgKE15U3ViIG5vZGUgbmFtZSBfKSA9XG4gIGxldFxuICAgIGFjdHVhbE5vZGUgPVxuICAgICAgY2FzZSBub2RlIG9mXG4gICAgICAgIERvY3VtZW50IC0+IEVsbS5LZXJuZWwuQnJvd3Nlci5kb2NcbiAgICAgICAgV2luZG93IC0+IEVsbS5LZXJuZWwuQnJvd3Nlci53aW5kb3dcbiAgaW5cbiAgVGFzay5tYXAgKFxcdmFsdWUgLT4gKCBrZXksIHZhbHVlICkpIDx8XG4gICAgRWxtLktlcm5lbC5Ccm93c2VyLm9uIGFjdHVhbE5vZGUgbmFtZSA8fFxuICAgICAgXFxldmVudCAtPiBQbGF0Zm9ybS5zZW5kVG9TZWxmIHJvdXRlciAoRXZlbnQga2V5IGV2ZW50KVxuJ30pKSwKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ05hdmlnYXRpb24uZWxtJywKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRCbG9iTm9kZSgKCQkJCQkJCXt1dGY4OiAnbW9kdWxlIEJyb3dzZXIuTmF2aWdhdGlvbiBleHBvc2luZ1xuICAgICggS2V5LCBwdXNoVXJsLCByZXBsYWNlVXJsLCBiYWNrLCBmb3J3YXJkXG4gICAgLCBsb2FkLCByZWxvYWQsIHJlbG9hZEFuZFNraXBDYWNoZVxuICAgIClcblxuey18IFRoaXMgbW9kdWxlIGhlbHBzIHlvdSBtYW5hZ2UgdGhlIGJyb3dzZXLigJlzIFVSTCB5b3Vyc2VsZi4gVGhpcyBpcyB0aGVcbmNydWNpYWwgdHJpY2sgd2hlbiB1c2luZyBbYEJyb3dzZXIuYXBwbGljYXRpb25gXShCcm93c2VyI2FwcGxpY2F0aW9uKS5cblxuVGhlIG1vc3QgaW1wb3J0YW50IGZ1bmN0aW9uIGlzIFtgcHVzaFVybGBdKCNwdXNoVXJsKSB3aGljaCBjaGFuZ2VzIHRoZVxuYWRkcmVzcyBiYXIgX3dpdGhvdXRfIHN0YXJ0aW5nIGEgcGFnZSBsb2FkLlxuXG5cbiMjIFdoYXQgaXMgYSBwYWdlIGxvYWQ/XG5cbjEuICBSZXF1ZXN0IGEgbmV3IEhUTUwgZG9jdW1lbnQuIFRoZSBwYWdlIGdvZXMgYmxhbmsuXG4yLiAgQXMgdGhlIEhUTUwgbG9hZHMsIHJlcXVlc3QgYW55IGA8c2NyaXB0PmAgb3IgYDxsaW5rPmAgcmVzb3VyY2VzLlxuMy4gIEEgYDxzY3JpcHQ+YCBtYXkgbXV0YXRlIHRoZSBkb2N1bWVudCwgc28gdGhlc2UgdGFncyBibG9jayByZW5kZXJpbmcuXG40LiAgV2hlbiBfYWxsXyBvZiB0aGUgYXNzZXRzIGFyZSBsb2FkZWQsIGFjdHVhbGx5IHJlbmRlciB0aGUgcGFnZS5cblxuVGhhdCBtZWFucyB0aGUgcGFnZSB3aWxsIGdvIGJsYW5rIGZvciBhdCBsZWFzdCB0d28gcm91bmQtdHJpcHMgdG8gdGhlIHNlcnZlcnMhXG5Zb3UgbWF5IGhhdmUgOTAlIG9mIHRoZSBkYXRhIHlvdSBuZWVkIGFuZCBiZSBibG9ja2VkIG9uIGEgZm9udCB0aGF0IGlzIHRha2luZ1xuYSBsb25nIHRpbWUuIFN0aWxsIGJsYW5rIVxuXG5cbiMjIEhvdyBkb2VzIGBwdXNoVXJsYCBoZWxwP1xuXG5UaGUgYHB1c2hVcmxgIGZ1bmN0aW9uIGNoYW5nZXMgdGhlIFVSTCwgYnV0IGxldHMgeW91IGtlZXAgdGhlIGN1cnJlbnQgSFRNTC5cblRoaXMgbWVhbnMgdGhlIHBhZ2UgX25ldmVyXyBnb2VzIGJsYW5rLiBJbnN0ZWFkIG9mIG1ha2luZyB0d28gcm91bmQtdHJpcHMgdG9cbnRoZSBzZXJ2ZXIsIHlvdSBsb2FkIHdoYXRldmVyIGFzc2V0cyB5b3Ugd2FudCBmcm9tIHdpdGhpbiBFbG0uIE1heWJlIHlvdSBkb1xubm90IG5lZWQgYW55IHJvdW5kLXRyaXBzISBNZWFud2hpbGUsIHlvdSByZXRhaW4gZnVsbCBjb250cm9sIG92ZXIgdGhlIFVJLCBzb1xueW91IGNhbiBzaG93IGEgbG9hZGluZyBiYXIsIHNob3cgaW5mb3JtYXRpb24gYXMgaXQgbG9hZHMsIGV0Yy4gV2hhdGV2ZXIgeW91XG53YW50IVxuXG5cbiMgTmF2aWdhdGUgd2l0aGluIFBhZ2VcblxuQGRvY3MgS2V5LCBwdXNoVXJsLCByZXBsYWNlVXJsLCBiYWNrLCBmb3J3YXJkXG5cblxuIyBOYXZpZ2F0ZSB0byBvdGhlciBQYWdlc1xuXG5AZG9jcyBsb2FkLCByZWxvYWQsIHJlbG9hZEFuZFNraXBDYWNoZVxuXG4tfVxuXG5pbXBvcnQgRWxtLktlcm5lbC5Ccm93c2VyXG5pbXBvcnQgVGFzayBleHBvc2luZyAoVGFzaylcblxuXG5cbi0tIFdJVEhJTiBQQUdFXG5cblxuey18IEEgbmF2aWdhdGlvbiBgS2V5YCBpcyBuZWVkZWQgdG8gY3JlYXRlIG5hdmlnYXRpb24gY29tbWFuZHMgdGhhdCBjaGFuZ2UgdGhlXG5VUkwuIFRoYXQgaW5jbHVkZXMgW2BwdXNoVXJsYF0oI3B1c2hVcmwpLCBbYHJlcGxhY2VVcmxgXSgjcmVwbGFjZVVybCksXG5bYGJhY2tgXSgjYmFjayksIGFuZCBbYGZvcndhcmRgXSgjZm9yd2FyZCkuXG5cbllvdSBvbmx5IGdldCBhY2Nlc3MgdG8gYSBgS2V5YCB3aGVuIHlvdSBjcmVhdGUgeW91ciBwcm9ncmFtIHdpdGhcbltgQnJvd3Nlci5hcHBsaWNhdGlvbmBdKEJyb3dzZXIjYXBwbGljYXRpb24pLCBndWFyYW50ZWVpbmcgdGhhdCB5b3VyIHByb2dyYW0gaXNcbmVxdWlwcGVkIHRvIGRldGVjdCB0aGVzZSBVUkwgY2hhbmdlcy4gSWYgYEtleWAgdmFsdWVzIHdlcmUgYXZhaWxhYmxlIGluIG90aGVyXG5raW5kcyBvZiBwcm9ncmFtcywgdW5zdXNwZWN0aW5nIHByb2dyYW1tZXJzIHdvdWxkIGJlIHN1cmUgdG8gcnVuIGludG8gc29tZVxuW2Fubm95aW5nIGJ1Z3NdW2J1Z3NdIGFuZCBsZWFybiBhIGJ1bmNoIG9mIHRlY2huaXF1ZXMgdGhlIGhhcmQgd2F5IVxuXG5bYnVnc106IGh0dHBzOi8vZ2l0aHViLmNvbS9lbG0vYnJvd3Nlci9ibG9iLzEuMC4yL25vdGVzL25hdmlnYXRpb24taW4tZWxlbWVudHMubWRcblxuLX1cbnR5cGUgS2V5XG4gICAgPSBLZXlcblxuXG57LXwgQ2hhbmdlIHRoZSBVUkwsIGJ1dCBkbyBub3QgdHJpZ2dlciBhIHBhZ2UgbG9hZC5cblxuVGhpcyB3aWxsIGFkZCBhIG5ldyBlbnRyeSB0byB0aGUgYnJvd3NlciBoaXN0b3J5LlxuXG5DaGVjayBvdXQgdGhlIFtgZWxtL3VybGBdW3VybF0gcGFja2FnZSBmb3IgaGVscCBidWlsZGluZyBVUkxzLiBUaGVcbltgVXJsLkJ1aWxkZXIuYWJzb2x1dGVgXVthYnNdIGFuZCBbYFVybC5CdWlsZGVyLnJlbGF0aXZlYF1bcmVsXSBmdW5jdGlvbnMgY2FuXG5iZSBwYXJ0aWN1bGFybHkgaGFuZHkhXG5cblt1cmxdOiAvcGFja2FnZXMvZWxtL3VybC9sYXRlc3RcblthYnNdOiAvcGFja2FnZXMvZWxtL3VybC9sYXRlc3QvVXJsLUJ1aWxkZXIjYWJzb2x1dGVcbltyZWxdOiAvcGFja2FnZXMvZWxtL3VybC9sYXRlc3QvVXJsLUJ1aWxkZXIjcmVsYXRpdmVcblxuKipOb3RlOioqIElmIHRoZSB1c2VyIGhhcyBnb25lIGBiYWNrYCBhIGZldyBwYWdlcywgdGhlcmUgd2lsbCBiZSAmbGRxdW87ZnV0dXJlXG5wYWdlcyZyZHF1bzsgdGhhdCB0aGUgdXNlciBjYW4gZ28gYGZvcndhcmRgIHRvLiBBZGRpbmcgYSBuZXcgVVJMIGluIHRoYXRcbnNjZW5hcmlvIHdpbGwgY2xlYXIgb3V0IGFueSBmdXR1cmUgcGFnZXMuIEl0IGlzIGxpa2UgZ29pbmcgYmFjayBpbiB0aW1lIGFuZFxubWFraW5nIGEgZGlmZmVyZW50IGNob2ljZS5cblxuLX1cbnB1c2hVcmwgOiBLZXkgLT4gU3RyaW5nIC0+IENtZCBtc2dcbnB1c2hVcmwgPVxuICAgIEVsbS5LZXJuZWwuQnJvd3Nlci5wdXNoVXJsXG5cblxuey18IENoYW5nZSB0aGUgVVJMLCBidXQgZG8gbm90IHRyaWdnZXIgYSBwYWdlIGxvYWQuXG5cblRoaXMgX3dpbGwgbm90XyBhZGQgYSBuZXcgZW50cnkgdG8gdGhlIGJyb3dzZXIgaGlzdG9yeS5cblxuVGhpcyBjYW4gYmUgdXNlZnVsIGlmIHlvdSBoYXZlIHNlYXJjaCBib3ggYW5kIHlvdSB3YW50IHRoZSBgP3NlYXJjaD1oYXRzYCBpblxudGhlIFVSTCB0byBtYXRjaCB3aXRob3V0IGFkZGluZyBhIGhpc3RvcnkgZW50cnkgZm9yIGV2ZXJ5IHNpbmdsZSBrZXkgc3Ryb2tlLlxuSW1hZ2luZSBob3cgYW5ub3lpbmcgaXQgd291bGQgYmUgdG8gY2xpY2sgYGJhY2tgIHRoaXJ0eSB0aW1lcyBhbmQgc3RpbGwgYmUgb25cbnRoZSBzYW1lIHBhZ2UhXG5cbioqTm90ZToqKiBCcm93c2VycyBtYXkgcmF0ZS1saW1pdCB0aGlzIGZ1bmN0aW9uIGJ5IHRocm93aW5nIGFuIGV4Y2VwdGlvbi4gVGhlXG5kaXNjdXNzaW9uIFtoZXJlXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTU2MTE1KSBzdWdnZXN0c1xudGhhdCB0aGUgbGltaXQgaXMgMTAwIGNhbGxzIHBlciAzMCBzZWNvbmQgaW50ZXJ2YWwgaW4gU2FmYXJpIGluIDIwMTYuIEl0IGFsc29cbnN1Z2dlc3RzIHRlY2huaXF1ZXMgZm9yIHBlb3BsZSBjaGFuZ2luZyB0aGUgVVJMIGJhc2VkIG9uIHNjcm9sbCBwb3NpdGlvbi5cblxuLX1cbnJlcGxhY2VVcmwgOiBLZXkgLT4gU3RyaW5nIC0+IENtZCBtc2dcbnJlcGxhY2VVcmwgPVxuICAgIEVsbS5LZXJuZWwuQnJvd3Nlci5yZXBsYWNlVXJsXG5cblxuey18IEdvIGJhY2sgc29tZSBudW1iZXIgb2YgcGFnZXMuIFNvIGBiYWNrIDFgIGdvZXMgYmFjayBvbmUgcGFnZSwgYW5kIGBiYWNrIDJgXG5nb2VzIGJhY2sgdHdvIHBhZ2VzLlxuXG4qKk5vdGU6KiogWW91IG9ubHkgbWFuYWdlIHRoZSBicm93c2VyIGhpc3RvcnkgdGhhdCBfeW91XyBjcmVhdGVkLiBUaGluayBvZiB0aGlzXG5saWJyYXJ5IGFzIGxldHRpbmcgeW91IGhhdmUgYWNjZXNzIHRvIGEgc21hbGwgcGFydCBvZiB0aGUgb3ZlcmFsbCBoaXN0b3J5LiBTb1xuaWYgeW91IGdvIGJhY2sgZmFydGhlciB0aGFuIHRoZSBoaXN0b3J5IHlvdSBvd24sIHlvdSB3aWxsIGp1c3QgZ28gYmFjayB0byBzb21lXG5vdGhlciB3ZWJzaXRlIVxuXG4tfVxuYmFjayA6IEtleSAtPiBJbnQgLT4gQ21kIG1zZ1xuYmFjayBrZXkgbiA9XG4gICAgRWxtLktlcm5lbC5Ccm93c2VyLmdvIGtleSAtblxuXG5cbnstfCBHbyBmb3J3YXJkIHNvbWUgbnVtYmVyIG9mIHBhZ2VzLiBTbyBgZm9yd2FyZCAxYCBnb2VzIGZvcndhcmQgb25lIHBhZ2UsIGFuZFxuYGZvcndhcmQgMmAgZ29lcyBmb3J3YXJkIHR3byBwYWdlcy4gSWYgdGhlcmUgYXJlIG5vIG1vcmUgcGFnZXMgaW4gdGhlIGZ1dHVyZSxcbnRoaXMgd2lsbCBkbyBub3RoaW5nLlxuXG4qKk5vdGU6KiogWW91IG9ubHkgbWFuYWdlIHRoZSBicm93c2VyIGhpc3RvcnkgdGhhdCBfeW91XyBjcmVhdGVkLiBUaGluayBvZiB0aGlzXG5saWJyYXJ5IGFzIGxldHRpbmcgeW91IGhhdmUgYWNjZXNzIHRvIGEgc21hbGwgcGFydCBvZiB0aGUgb3ZlcmFsbCBoaXN0b3J5LiBTb1xuaWYgeW91IGdvIGZvcndhcmQgZmFydGhlciB0aGFuIHRoZSBoaXN0b3J5IHlvdSBvd24sIHRoZSB1c2VyIHdpbGwgZW5kIHVwIG9uXG53aGF0ZXZlciB3ZWJzaXRlIHRoZXkgdmlzaXRlZCBuZXh0IVxuXG4tfVxuZm9yd2FyZCA6IEtleSAtPiBJbnQgLT4gQ21kIG1zZ1xuZm9yd2FyZCA9XG4gICAgRWxtLktlcm5lbC5Ccm93c2VyLmdvXG5cblxuXG4tLSBFWFRFUk5BTCBQQUdFU1xuXG5cbnstfCBMZWF2ZSB0aGUgY3VycmVudCBwYWdlIGFuZCBsb2FkIHRoZSBnaXZlbiBVUkwuICoqVGhpcyBhbHdheXMgcmVzdWx0cyBpbiBhXG5wYWdlIGxvYWQqKiwgZXZlbiBpZiB0aGUgcHJvdmlkZWQgVVJMIGlzIHRoZSBzYW1lIGFzIHRoZSBjdXJyZW50IG9uZS5cblxuICAgIGdvdG9FbG1XZWJzaXRlIDogQ21kIG1zZ1xuICAgIGdvdG9FbG1XZWJzaXRlID1cbiAgICAgICAgbG9hZCBcImh0dHBzOi8vZWxtLWxhbmcub3JnXCJcblxuQ2hlY2sgb3V0IHRoZSBbYGVsbS91cmxgXVt1cmxdIHBhY2thZ2UgZm9yIGhlbHAgYnVpbGRpbmcgVVJMcy4gVGhlXG5bYFVybC5hYnNvbHV0ZWBdW2Fic10gYW5kIFtgVXJsLnJlbGF0aXZlYF1bcmVsXSBmdW5jdGlvbnMgY2FuIGJlIHBhcnRpY3VsYXJseVxuaGFuZHkhXG5cblt1cmxdOiAvcGFja2FnZXMvZWxtL3VybC9sYXRlc3RcblthYnNdOiAvcGFja2FnZXMvZWxtL3VybC9sYXRlc3QvVXJsI2Fic29sdXRlXG5bcmVsXTogL3BhY2thZ2VzL2VsbS91cmwvbGF0ZXN0L1VybCNyZWxhdGl2ZVxuXG4tfVxubG9hZCA6IFN0cmluZyAtPiBDbWQgbXNnXG5sb2FkID1cbiAgICBFbG0uS2VybmVsLkJyb3dzZXIubG9hZFxuXG5cbnstfCBSZWxvYWQgdGhlIGN1cnJlbnQgcGFnZS4gKipUaGlzIGFsd2F5cyByZXN1bHRzIGluIGEgcGFnZSBsb2FkISoqXG5UaGlzIG1heSBncmFiIHJlc291cmNlcyBmcm9tIHRoZSBicm93c2VyIGNhY2hlLCBzbyB1c2VcbltgcmVsb2FkQW5kU2tpcENhY2hlYF0oI3JlbG9hZEFuZFNraXBDYWNoZSlcbmlmIHlvdSB3YW50IHRvIGJlIHN1cmUgdGhhdCB5b3UgYXJlIG5vdCBsb2FkaW5nIGFueSBjYWNoZWQgcmVzb3VyY2VzLlxuLX1cbnJlbG9hZCA6IENtZCBtc2dcbnJlbG9hZCA9XG4gICAgRWxtLktlcm5lbC5Ccm93c2VyLnJlbG9hZCBGYWxzZVxuXG5cbnstfCBSZWxvYWQgdGhlIGN1cnJlbnQgcGFnZSB3aXRob3V0IHVzaW5nIHRoZSBicm93c2VyIGNhY2hlLiAqKlRoaXMgYWx3YXlzXG5yZXN1bHRzIGluIGEgcGFnZSBsb2FkISoqIEl0IGlzIG1vcmUgY29tbW9uIHRvIHdhbnQgW2ByZWxvYWRgXSgjcmVsb2FkKS5cbi19XG5yZWxvYWRBbmRTa2lwQ2FjaGUgOiBDbWQgbXNnXG5yZWxvYWRBbmRTa2lwQ2FjaGUgPVxuICAgIEVsbS5LZXJuZWwuQnJvd3Nlci5yZWxvYWQgVHJ1ZVxuJ30pKQoJCQkJCV0pKSksCgkJCV9VdGlsc19UdXBsZTIoCgkJCSdCcm93c2VyLmVsbScsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkQmxvYk5vZGUoCgkJCQl7dXRmODogJ21vZHVsZSBCcm93c2VyIGV4cG9zaW5nXG4gICAgKCBzYW5kYm94XG4gICAgLCBlbGVtZW50XG4gICAgLCBkb2N1bWVudCwgRG9jdW1lbnRcbiAgICAsIGFwcGxpY2F0aW9uLCBVcmxSZXF1ZXN0KC4uKVxuICAgIClcblxuey18IFRoaXMgbW9kdWxlIGhlbHBzIHlvdSBzZXQgdXAgYW4gRWxtIGBQcm9ncmFtYCB3aXRoIGZ1bmN0aW9ucyBsaWtlXG5bYHNhbmRib3hgXSgjc2FuZGJveCkgYW5kIFtgZG9jdW1lbnRgXSgjZG9jdW1lbnQpLlxuXG5cbiMgU2FuZGJveGVzXG5cbkBkb2NzIHNhbmRib3hcblxuXG4jIEVsZW1lbnRzXG5cbkBkb2NzIGVsZW1lbnRcblxuXG4jIERvY3VtZW50c1xuXG5AZG9jcyBkb2N1bWVudCwgRG9jdW1lbnRcblxuXG4jIEFwcGxpY2F0aW9uc1xuXG5AZG9jcyBhcHBsaWNhdGlvbiwgVXJsUmVxdWVzdFxuXG4tfVxuXG5pbXBvcnQgQnJvd3Nlci5OYXZpZ2F0aW9uIGFzIE5hdmlnYXRpb25cbmltcG9ydCBEZWJ1Z2dlci5NYWluXG5pbXBvcnQgRGljdFxuaW1wb3J0IEVsbS5LZXJuZWwuQnJvd3NlclxuaW1wb3J0IEh0bWwgZXhwb3NpbmcgKEh0bWwpXG5pbXBvcnQgVXJsXG5cblxuXG4tLSBTQU5EQk9YXG5cblxuey18IENyZWF0ZSBhIOKAnHNhbmRib3hlZOKAnSBwcm9ncmFtIHRoYXQgY2Fubm90IGNvbW11bmljYXRlIHdpdGggdGhlIG91dHNpZGVcbndvcmxkLlxuXG5UaGlzIGlzIGdyZWF0IGZvciBsZWFybmluZyB0aGUgYmFzaWNzIG9mIFtUaGUgRWxtIEFyY2hpdGVjdHVyZV1bdGVhXS4gWW91IGNhblxuc2VlIHNhbmRib3hlcyBpbiBhY3Rpb24gaW4gdGhlIGZvbGxvd2luZyBleGFtcGxlczpcblxuICAtIFtCdXR0b25zXShodHRwczovL2d1aWRlLmVsbS1sYW5nLm9yZy9hcmNoaXRlY3R1cmUvYnV0dG9ucy5odG1sKVxuICAtIFtUZXh0IEZpZWxkc10oaHR0cHM6Ly9ndWlkZS5lbG0tbGFuZy5vcmcvYXJjaGl0ZWN0dXJlL3RleHRfZmllbGRzLmh0bWwpXG4gIC0gW0Zvcm1zXShodHRwczovL2d1aWRlLmVsbS1sYW5nLm9yZy9hcmNoaXRlY3R1cmUvZm9ybXMuaHRtbClcblxuVGhvc2UgYXJlIG5pY2UsIGJ1dCAqKkkgdmVyeSBoaWdobHkgcmVjb21tZW5kIHJlYWRpbmcgW3RoaXMgZ3VpZGVdW2d1aWRlXVxuc3RyYWlnaHQgdGhyb3VnaCoqIHRvIHJlYWxseSBsZWFybiBob3cgRWxtIHdvcmtzLiBVbmRlcnN0YW5kaW5nIHRoZVxuZnVuZGFtZW50YWxzIGFjdHVhbGx5IHBheXMgb2ZmIGluIHRoaXMgbGFuZ3VhZ2UhXG5cblt0ZWFdOiBodHRwczovL2d1aWRlLmVsbS1sYW5nLm9yZy9hcmNoaXRlY3R1cmUvXG5bZ3VpZGVdOiBodHRwczovL2d1aWRlLmVsbS1sYW5nLm9yZy9cblxuLX1cbnNhbmRib3ggOlxuICAgIHsgaW5pdCA6IG1vZGVsXG4gICAgLCB2aWV3IDogbW9kZWwgLT4gSHRtbCBtc2dcbiAgICAsIHVwZGF0ZSA6IG1zZyAtPiBtb2RlbCAtPiBtb2RlbFxuICAgIH1cbiAgICAtPiBQcm9ncmFtICgpIG1vZGVsIG1zZ1xuc2FuZGJveCBpbXBsID1cbiAgICBFbG0uS2VybmVsLkJyb3dzZXIuZWxlbWVudFxuICAgICAgICB7IGluaXQgPSBcXCgpIC0+ICggaW1wbC5pbml0LCBDbWQubm9uZSApXG4gICAgICAgICwgdmlldyA9IGltcGwudmlld1xuICAgICAgICAsIHVwZGF0ZSA9IFxcbXNnIG1vZGVsIC0+ICggaW1wbC51cGRhdGUgbXNnIG1vZGVsLCBDbWQubm9uZSApXG4gICAgICAgICwgc3Vic2NyaXB0aW9ucyA9IFxcXyAtPiBTdWIubm9uZVxuICAgICAgICB9XG5cblxuXG4tLSBFTEVNRU5UXG5cblxuey18IENyZWF0ZSBhbiBIVE1MIGVsZW1lbnQgbWFuYWdlZCBieSBFbG0uIFRoZSByZXN1bHRpbmcgZWxlbWVudHMgYXJlIGVhc3kgdG9cbmVtYmVkIGluIGxhcmdlciBKYXZhU2NyaXB0IHByb2plY3RzLCBhbmQgbG90cyBvZiBjb21wYW5pZXMgdGhhdCB1c2UgRWxtXG5zdGFydGVkIHdpdGggdGhpcyBhcHByb2FjaCEgVHJ5IGl0IG91dCBvbiBzb21ldGhpbmcgc21hbGwuIElmIGl0IHdvcmtzLCBncmVhdCxcbmRvIG1vcmUhIElmIG5vdCwgcmV2ZXJ0LCBubyBiaWcgZGVhbC5cblxuVW5saWtlIGEgW2BzYW5kYm94YF0oI3NhbmRib3gpLCBhbiBgZWxlbWVudGAgY2FuIHRhbGsgdG8gdGhlIG91dHNpZGUgd29ybGQgaW5cbmEgY291cGxlIHdheXM6XG5cbiAgLSBgQ21kYCAmbWRhc2g7IHlvdSBjYW4g4oCcY29tbWFuZOKAnSB0aGUgRWxtIHJ1bnRpbWUgdG8gZG8gc3R1ZmYsIGxpa2UgSFRUUC5cbiAgLSBgU3ViYCAmbWRhc2g7IHlvdSBjYW4g4oCcc3Vic2NyaWJl4oCdIHRvIGV2ZW50IHNvdXJjZXMsIGxpa2UgY2xvY2sgdGlja3MuXG4gIC0gYGZsYWdzYCAmbWRhc2g7IEphdmFTY3JpcHQgY2FuIHBhc3MgaW4gZGF0YSB3aGVuIHN0YXJ0aW5nIHRoZSBFbG0gcHJvZ3JhbVxuICAtIGBwb3J0c2AgJm1kYXNoOyBzZXQgdXAgYSBjbGllbnQtc2VydmVyIHJlbGF0aW9uc2hpcCB3aXRoIEphdmFTY3JpcHRcblxuQXMgeW91IHJlYWQgW3RoZSBndWlkZV1bZ3VpZGVdIHlvdSB3aWxsIHJ1biBpbnRvIGEgYnVuY2ggb2YgZXhhbXBsZXMgb2YgYGVsZW1lbnRgXG5pbiBbdGhpcyBzZWN0aW9uXVtmeF0uIFlvdSBjYW4gbGVhcm4gbW9yZSBhYm91dCBmbGFncyBhbmQgcG9ydHMgaW4gW3RoZSBpbnRlcm9wXG5zZWN0aW9uXVtpbnRlcm9wXS5cblxuW2d1aWRlXTogaHR0cHM6Ly9ndWlkZS5lbG0tbGFuZy5vcmcvXG5bZnhdOiBodHRwczovL2d1aWRlLmVsbS1sYW5nLm9yZy9lZmZlY3RzL1xuW2ludGVyb3BdOiBodHRwczovL2d1aWRlLmVsbS1sYW5nLm9yZy9pbnRlcm9wL1xuXG4tfVxuZWxlbWVudCA6XG4gICAgeyBpbml0IDogZmxhZ3MgLT4gKCBtb2RlbCwgQ21kIG1zZyApXG4gICAgLCB2aWV3IDogbW9kZWwgLT4gSHRtbCBtc2dcbiAgICAsIHVwZGF0ZSA6IG1zZyAtPiBtb2RlbCAtPiAoIG1vZGVsLCBDbWQgbXNnIClcbiAgICAsIHN1YnNjcmlwdGlvbnMgOiBtb2RlbCAtPiBTdWIgbXNnXG4gICAgfVxuICAgIC0+IFByb2dyYW0gZmxhZ3MgbW9kZWwgbXNnXG5lbGVtZW50ID1cbiAgICBFbG0uS2VybmVsLkJyb3dzZXIuZWxlbWVudFxuXG5cblxuLS0gRE9DVU1FTlRcblxuXG57LXwgQ3JlYXRlIGFuIEhUTUwgZG9jdW1lbnQgbWFuYWdlZCBieSBFbG0uIFRoaXMgZXhwYW5kcyB1cG9uIHdoYXQgYGVsZW1lbnRgXG5jYW4gZG8gaW4gdGhhdCBgdmlld2Agbm93IGdpdmVzIHlvdSBjb250cm9sIG92ZXIgdGhlIGA8dGl0bGU+YCBhbmQgYDxib2R5PmAuXG4tfVxuZG9jdW1lbnQgOlxuICAgIHsgaW5pdCA6IGZsYWdzIC0+ICggbW9kZWwsIENtZCBtc2cgKVxuICAgICwgdmlldyA6IG1vZGVsIC0+IERvY3VtZW50IG1zZ1xuICAgICwgdXBkYXRlIDogbXNnIC0+IG1vZGVsIC0+ICggbW9kZWwsIENtZCBtc2cgKVxuICAgICwgc3Vic2NyaXB0aW9ucyA6IG1vZGVsIC0+IFN1YiBtc2dcbiAgICB9XG4gICAgLT4gUHJvZ3JhbSBmbGFncyBtb2RlbCBtc2dcbmRvY3VtZW50ID1cbiAgICBFbG0uS2VybmVsLkJyb3dzZXIuZG9jdW1lbnRcblxuXG57LXwgVGhpcyBkYXRhIHNwZWNpZmllcyB0aGUgYDx0aXRsZT5gIGFuZCBhbGwgb2YgdGhlIG5vZGVzIHRoYXQgc2hvdWxkIGdvIGluXG50aGUgYDxib2R5PmAuIFRoaXMgbWVhbnMgeW91IGNhbiB1cGRhdGUgdGhlIHRpdGxlIGFzIHlvdXIgYXBwbGljYXRpb24gY2hhbmdlcy5cbk1heWJlIHlvdXIgXCJzaW5nbGUtcGFnZSBhcHBcIiBuYXZpZ2F0ZXMgdG8gYSBcImRpZmZlcmVudCBwYWdlXCIsIG1heWJlIGEgY2FsZW5kYXJcbmFwcCBzaG93cyBhbiBhY2N1cmF0ZSBkYXRlIGluIHRoZSB0aXRsZSwgZXRjLlxuXG4+ICoqTm90ZSBhYm91dCBDU1M6KiogVGhpcyBsb29rcyBzaW1pbGFyIHRvIGFuIGA8aHRtbD5gIGRvY3VtZW50LCBidXQgdGhpcyBpc1xuPiBub3QgdGhlIHBsYWNlIHRvIG1hbmFnZSBDU1MgYXNzZXRzLiBJZiB5b3Ugd2FudCB0byB3b3JrIHdpdGggQ1NTLCB0aGVyZSBhcmVcbj4gYSBjb3VwbGUgd2F5czpcbj5cbj4gMS4gIFBhY2thZ2VzIGxpa2UgW2BydGZlbGRtYW4vZWxtLWNzc2BdW2VsbS1jc3NdIGdpdmUgYWxsIG9mIHRoZSBmZWF0dXJlc1xuPiAgICAgb2YgQ1NTIHdpdGhvdXQgYW55IENTUyBmaWxlcy4gWW91IGNhbiBhZGQgYWxsIHRoZSBzdHlsZXMgeW91IG5lZWQgaW4geW91clxuPiAgICAgYHZpZXdgIGZ1bmN0aW9uLCBhbmQgdGhlcmUgaXMgbm8gbmVlZCB0byB3b3JyeSBhYm91dCBjbGFzcyBuYW1lcyBtYXRjaGluZy5cbj5cbj4gMi4gIENvbXBpbGUgeW91ciBFbG0gY29kZSB0byBKYXZhU2NyaXB0IHdpdGggYGVsbSBtYWtlIC0tb3V0cHV0PWVsbS5qc2AgYW5kXG4+ICAgICB0aGVuIG1ha2UgeW91ciBvd24gSFRNTCBmaWxlIHRoYXQgbG9hZHMgYGVsbS5qc2AgYW5kIHRoZSBDU1MgZmlsZSB5b3Ugd2FudC5cbj4gICAgIFdpdGggdGhpcyBhcHByb2FjaCwgaXQgZG9lcyBub3QgbWF0dGVyIHdoZXJlIHRoZSBDU1MgY29tZXMgZnJvbS4gV3JpdGUgaXRcbj4gICAgIGJ5IGhhbmQuIEdlbmVyYXRlIGl0LiBXaGF0ZXZlciB5b3Ugd2FudCB0byBkby5cbj5cbj4gMy4gIElmIHlvdSBuZWVkIHRvIGNoYW5nZSBgPGxpbms+YCB0YWdzIGR5bmFtaWNhbGx5LCB5b3UgY2FuIHNlbmQgbWVzc2FnZXNcbj4gICAgIG91dCBhIHBvcnQgdG8gZG8gaXQgaW4gSmF2YVNjcmlwdC5cbj5cbj4gVGhlIGJpZ2dlciBwb2ludCBoZXJlIGlzIHRoYXQgbG9hZGluZyBhc3NldHMgaW52b2x2ZXMgdG91Y2hpbmcgdGhlIGA8aGVhZD5gXG4+IGFzIGFuIGltcGxlbWVudGF0aW9uIGRldGFpbCBvZiBicm93c2VycywgYnV0IHRoYXQgZG9lcyBub3QgbWVhbiBpdCBzaG91bGQgYmVcbj4gdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBgdmlld2AgZnVuY3Rpb24gaW4gRWxtLiBTbyB3ZSBkbyBpdCBkaWZmZXJlbnRseSFcblxuW2VsbS1jc3NdOiAvcGFja2FnZXMvcnRmZWxkbWFuL2VsbS1jc3MvbGF0ZXN0L1xuXG4tfVxudHlwZSBhbGlhcyBEb2N1bWVudCBtc2cgPVxuICAgIHsgdGl0bGUgOiBTdHJpbmdcbiAgICAsIGJvZHkgOiBMaXN0IChIdG1sIG1zZylcbiAgICB9XG5cblxuXG4tLSBBUFBMSUNBVElPTlxuXG5cbnstfCBDcmVhdGUgYW4gYXBwbGljYXRpb24gdGhhdCBtYW5hZ2VzIFtgVXJsYF1bdXJsXSBjaGFuZ2VzLlxuXG4qKldoZW4gdGhlIGFwcGxpY2F0aW9uIHN0YXJ0cyoqLCBgaW5pdGAgZ2V0cyB0aGUgaW5pdGlhbCBgVXJsYC4gWW91IGNhbiBzaG93XG5kaWZmZXJlbnQgdGhpbmdzIGRlcGVuZGluZyBvbiB0aGUgYFVybGAhXG5cbioqV2hlbiBzb21lb25lIGNsaWNrcyBhIGxpbmsqKiwgbGlrZSBgPGEgaHJlZj1cIi9ob21lXCI+SG9tZTwvYT5gLCBpdCBhbHdheXMgZ29lc1xudGhyb3VnaCBgb25VcmxSZXF1ZXN0YC4gVGhlIHJlc3VsdGluZyBtZXNzYWdlIGdvZXMgdG8geW91ciBgdXBkYXRlYCBmdW5jdGlvbixcbmdpdmluZyB5b3UgYSBjaGFuY2UgdG8gc2F2ZSBzY3JvbGwgcG9zaXRpb24gb3IgcGVyc2lzdCBkYXRhIGJlZm9yZSBjaGFuZ2luZ1xudGhlIFVSTCB5b3Vyc2VsZiB3aXRoIFtgcHVzaFVybGBdW2JucF0gb3IgW2Bsb2FkYF1bYm5sXS4gTW9yZSBpbmZvIG9uIHRoaXMgaW5cbnRoZSBbYFVybFJlcXVlc3RgXSgjVXJsUmVxdWVzdCkgZG9jcyFcblxuKipXaGVuIHRoZSBVUkwgY2hhbmdlcyoqLCB0aGUgbmV3IGBVcmxgIGdvZXMgdGhyb3VnaCBgb25VcmxDaGFuZ2VgLiBUaGVcbnJlc3VsdGluZyBtZXNzYWdlIGdvZXMgdG8gYHVwZGF0ZWAgd2hlcmUgeW91IGNhbiBkZWNpZGUgd2hhdCB0byBzaG93IG5leHQuXG5cbkFwcGxpY2F0aW9ucyBhbHdheXMgdXNlIHRoZSBbYEJyb3dzZXIuTmF2aWdhdGlvbmBdW2JuXSBtb2R1bGUgZm9yIHByZWNpc2VcbmNvbnRyb2wgb3ZlciBgVXJsYCBjaGFuZ2VzLlxuXG4qKk1vcmUgSW5mbzoqKiBIZXJlIGFyZSBzb21lIGV4YW1wbGUgdXNhZ2VzIG9mIGBhcHBsaWNhdGlvbmAgcHJvZ3JhbXM6XG5cbiAgLSBbUmVhbFdvcmxkIGV4YW1wbGUgYXBwXShodHRwczovL2dpdGh1Yi5jb20vcnRmZWxkbWFuL2VsbS1zcGEtZXhhbXBsZSlcbiAgLSBbRWxt4oCZcyBwYWNrYWdlIHdlYnNpdGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9lbG0vcGFja2FnZS5lbG0tbGFuZy5vcmcpXG5cblRoZXNlIGFyZSBxdWl0ZSBhZHZhbmNlZCBFbG0gcHJvZ3JhbXMsIHNvIGJlIHN1cmUgdG8gZ28gdGhyb3VnaCBbdGhlIGd1aWRlXVtnXVxuZmlyc3QgdG8gZ2V0IGEgc29saWQgY29uY2VwdHVhbCBmb3VuZGF0aW9uIGJlZm9yZSBkaXZpbmcgaW4hIElmIHlvdSBzdGFydFxucmVhZGluZyBhIGNhbGN1bHVzIGJvb2sgZnJvbSBwYWdlIDMxNCwgaXQgbWlnaHQgc2VlbSBjb25mdXNpbmcuIFNhbWUgaGVyZSFcblxuKipOb3RlOioqIENhbiBhbiBbYGVsZW1lbnRgXSgjZWxlbWVudCkgbWFuYWdlIHRoZSBVUkwgdG9vPyBSZWFkIFt0aGlzXSFcblxuW2ddOiBodHRwczovL2d1aWRlLmVsbS1sYW5nLm9yZy9cbltibl06IEJyb3dzZXItTmF2aWdhdGlvblxuW2JucF06IEJyb3dzZXItTmF2aWdhdGlvbiNwdXNoVXJsXG5bYm5sXTogQnJvd3Nlci1OYXZpZ2F0aW9uI2xvYWRcblt1cmxdOiAvcGFja2FnZXMvZWxtL3VybC9sYXRlc3QvVXJsI1VybFxuW3RoaXNdOiBodHRwczovL2dpdGh1Yi5jb20vZWxtL2Jyb3dzZXIvYmxvYi8xLjAuMi9ub3Rlcy9uYXZpZ2F0aW9uLWluLWVsZW1lbnRzLm1kXG5cbi19XG5hcHBsaWNhdGlvbiA6XG4gICAgeyBpbml0IDogZmxhZ3MgLT4gVXJsLlVybCAtPiBOYXZpZ2F0aW9uLktleSAtPiAoIG1vZGVsLCBDbWQgbXNnIClcbiAgICAsIHZpZXcgOiBtb2RlbCAtPiBEb2N1bWVudCBtc2dcbiAgICAsIHVwZGF0ZSA6IG1zZyAtPiBtb2RlbCAtPiAoIG1vZGVsLCBDbWQgbXNnIClcbiAgICAsIHN1YnNjcmlwdGlvbnMgOiBtb2RlbCAtPiBTdWIgbXNnXG4gICAgLCBvblVybFJlcXVlc3QgOiBVcmxSZXF1ZXN0IC0+IG1zZ1xuICAgICwgb25VcmxDaGFuZ2UgOiBVcmwuVXJsIC0+IG1zZ1xuICAgIH1cbiAgICAtPiBQcm9ncmFtIGZsYWdzIG1vZGVsIG1zZ1xuYXBwbGljYXRpb24gPVxuICAgIEVsbS5LZXJuZWwuQnJvd3Nlci5hcHBsaWNhdGlvblxuXG5cbnstfCBBbGwgbGlua3MgaW4gYW4gW2BhcHBsaWNhdGlvbmBdKCNhcHBsaWNhdGlvbikgY3JlYXRlIGEgYFVybFJlcXVlc3RgLiBTb1xud2hlbiB5b3UgY2xpY2sgYDxhIGhyZWY9XCIvaG9tZVwiPkhvbWU8L2E+YCwgaXQgZG9lcyBub3QganVzdCBuYXZpZ2F0ZSEgSXRcbm5vdGlmaWVzIGBvblVybFJlcXVlc3RgIHRoYXQgdGhlIHVzZXIgd2FudHMgdG8gY2hhbmdlIHRoZSBgVXJsYC5cblxuXG4jIyMgYEludGVybmFsYCB2cyBgRXh0ZXJuYWxgXG5cbkltYWdpbmUgd2UgYXJlIGJyb3dzaW5nIGBodHRwczovL2V4YW1wbGUuY29tYC4gQW4gYEludGVybmFsYCBsaW5rIHdvdWxkIGJlXG5saWtlOlxuXG4gIC0gYHNldHRpbmdzI3ByaXZhY3lgXG4gIC0gYC9ob21lYFxuICAtIGBodHRwczovL2V4YW1wbGUuY29tL2hvbWVgXG4gIC0gYC8vZXhhbXBsZS5jb20vaG9tZWBcblxuQWxsIG9mIHRoZXNlIGxpbmtzIGV4aXN0IHVuZGVyIHRoZSBgaHR0cHM6Ly9leGFtcGxlLmNvbWAgZG9tYWluLiBBbiBgRXh0ZXJuYWxgXG5saW5rIHdvdWxkIGJlIGxpa2U6XG5cbiAgLSBgaHR0cHM6Ly9lbG0tbGFuZy5vcmcvZXhhbXBsZXNgXG4gIC0gYGh0dHBzOi8vb3RoZXIuZXhhbXBsZS5jb20vaG9tZWBcbiAgLSBgaHR0cDovL2V4YW1wbGUuY29tL2hvbWVgXG5cbkFueXRoaW5nIHRoYXQgY2hhbmdlcyB0aGUgZG9tYWluLiBOb3RpY2UgdGhhdCBjaGFuZ2luZyB0aGUgcHJvdG9jb2wgZnJvbVxuYGh0dHBzYCB0byBgaHR0cGAgaXMgY29uc2lkZXJlZCBhIGRpZmZlcmVudCBkb21haW4hIChBbmQgdmljZSB2ZXJzYSEpXG5cblxuIyMjIFB1cnBvc2VcblxuSGF2aW5nIGEgYFVybFJlcXVlc3RgIHJlcXVpcmVzIGEgY2FzZSBpbiB5b3VyIGB1cGRhdGVgIGxpa2UgdGhpczpcblxuICAgIGltcG9ydCBCcm93c2VyIGV4cG9zaW5nICguLilcbiAgICBpbXBvcnQgQnJvd3Nlci5OYXZpZ2F0aW9uIGFzIE5hdlxuICAgIGltcG9ydCBVcmxcblxuICAgIHR5cGUgTXNnXG4gICAgICAgID0gQ2xpY2tlZExpbmsgVXJsUmVxdWVzdFxuXG4gICAgdXBkYXRlIDogTXNnIC0+IE1vZGVsIC0+ICggTW9kZWwsIENtZCBtc2cgKVxuICAgIHVwZGF0ZSBtc2cgbW9kZWwgPVxuICAgICAgICBjYXNlIG1zZyBvZlxuICAgICAgICAgICAgQ2xpY2tlZExpbmsgdXJsUmVxdWVzdCAtPlxuICAgICAgICAgICAgICAgIGNhc2UgdXJsUmVxdWVzdCBvZlxuICAgICAgICAgICAgICAgICAgICBJbnRlcm5hbCB1cmwgLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICggbW9kZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICwgTmF2LnB1c2hVcmwgbW9kZWwua2V5IChVcmwudG9TdHJpbmcgdXJsKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgICAgIEV4dGVybmFsIHVybCAtPlxuICAgICAgICAgICAgICAgICAgICAgICAgKCBtb2RlbFxuICAgICAgICAgICAgICAgICAgICAgICAgLCBOYXYubG9hZCB1cmxcbiAgICAgICAgICAgICAgICAgICAgICAgIClcblxuVGhpcyBpcyB1c2VmdWwgYmVjYXVzZSBpdCBnaXZlcyB5b3UgYSBjaGFuY2UgdG8gY3VzdG9taXplIHRoZSBiZWhhdmlvciBpbiBlYWNoXG5jYXNlLiBNYXliZSBvbiBzb21lIGBJbnRlcm5hbGAgbGlua3MgeW91IHNhdmUgdGhlIHNjcm9sbCBwb3NpdGlvbiB3aXRoXG5bYEJyb3dzZXIuRG9tLmdldFZpZXdwb3J0YF0oQnJvd3Nlci1Eb20jZ2V0Vmlld3BvcnQpIHNvIHlvdSBjYW4gcmVzdG9yZSBpdFxubGF0ZXIuIE1heWJlIG9uIGBFeHRlcm5hbGAgbGlua3MgeW91IHBlcnNpc3QgcGFydHMgb2YgdGhlIGBNb2RlbGAgb24geW91clxuc2VydmVycyBiZWZvcmUgbGVhdmluZy4gV2hhdGV2ZXIgeW91IG5lZWQgdG8gZG8hXG5cbioqTm90ZToqKiBLbm93aW5nIHRoZSBzY3JvbGwgcG9zaXRpb24gaXMgbm90IGVub3VnaCB0byByZXN0b3JlIGl0ISBXaGF0IGlmIHRoZVxuYnJvd3NlciBkaW1lbnNpb25zIGNoYW5nZT8gVGhlIHNjcm9sbCBwb3NpdGlvbiB3aWxsIG5vdCBjb3JyZWxhdGUgd2l0aFxuJmxkcXVvO3doYXQgd2FzIG9uIHNjcmVlbiZyZHF1bzsgYW55bW9yZS4gU28gaXQgbWF5IGJlIGJldHRlciB0byByZW1lbWJlclxuJmxkcXVvO3doYXQgd2FzIG9uIHNjcmVlbiZyZHF1bzsgYW5kIHJlY3JlYXRlIHRoZSBwb3NpdGlvbiBiYXNlZCBvbiB0aGF0LiBGb3JcbmV4YW1wbGUsIGluIGEgV2lraXBlZGlhIGFydGljbGUsIHJlbWVtYmVyIHRoZSBoZWFkZXIgdGhhdCB0aGV5IHdlcmUgbG9va2luZyBhdFxubW9zdCByZWNlbnRseS4gW2BCcm93c2VyLkRvbS5nZXRFbGVtZW50YF0oQnJvd3Nlci1Eb20jZ2V0RWxlbWVudCkgaXMgZGVzaWduZWRcbmZvciBmaWd1cmluZyB0aGF0IG91dCFcblxuLX1cbnR5cGUgVXJsUmVxdWVzdFxuICAgID0gSW50ZXJuYWwgVXJsLlVybFxuICAgIHwgRXh0ZXJuYWwgU3RyaW5nXG4nfSkpCgkJXSkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJGZpbGVfdHJlZV9fX19lbG1fa2VybmVsX21vZHVsZXNfYnJvd3Nlcl9zcmMgPSBBMigKCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRtYXBCbG9icywKCWZ1bmN0aW9uIChibG9iVmFsdWUpIHsKCQlyZXR1cm4ge3V0Zjg6IGJsb2JWYWx1ZS51dGY4fTsKCX0sCgkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkbWFwRmlsZVRyZWVOb2RlRnJvbUdlbmVyYXRlZCgkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJGZpbGVfdHJlZV9ub2RlX2VsbV9rZXJuZWxfbW9kdWxlc19icm93c2VyX3NyYykpOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRmaWxlX3RyZWVfbm9kZV9lbG1fa2VybmVsX21vZHVsZXNfaHRtbF9zcmMgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJFRyZWVOb2RlKAoJX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJX1V0aWxzX1R1cGxlMigKCQkJJ0h0bWwnLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJFRyZWVOb2RlKAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ0F0dHJpYnV0ZXMuZWxtJywKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRCbG9iTm9kZSgKCQkJCQkJCXt1dGY4OiAnbW9kdWxlIEh0bWwuQXR0cmlidXRlcyBleHBvc2luZ1xuICAoIHN0eWxlLCBwcm9wZXJ0eSwgYXR0cmlidXRlLCBtYXBcbiAgLCBjbGFzcywgY2xhc3NMaXN0LCBpZCwgdGl0bGUsIGhpZGRlblxuICAsIHR5cGVfLCB2YWx1ZSwgY2hlY2tlZCwgcGxhY2Vob2xkZXIsIHNlbGVjdGVkXG4gICwgYWNjZXB0LCBhY2NlcHRDaGFyc2V0LCBhY3Rpb24sIGF1dG9jb21wbGV0ZSwgYXV0b2ZvY3VzXG4gICwgZGlzYWJsZWQsIGVuY3R5cGUsIGxpc3QsIG1heGxlbmd0aCwgbWlubGVuZ3RoLCBtZXRob2QsIG11bHRpcGxlXG4gICwgbmFtZSwgbm92YWxpZGF0ZSwgcGF0dGVybiwgcmVhZG9ubHksIHJlcXVpcmVkLCBzaXplLCBmb3IsIGZvcm1cbiAgLCBtYXgsIG1pbiwgc3RlcFxuICAsIGNvbHMsIHJvd3MsIHdyYXBcbiAgLCBocmVmLCB0YXJnZXQsIGRvd25sb2FkLCBocmVmbGFuZywgbWVkaWEsIHBpbmcsIHJlbFxuICAsIGlzbWFwLCB1c2VtYXAsIHNoYXBlLCBjb29yZHNcbiAgLCBzcmMsIGhlaWdodCwgd2lkdGgsIGFsdFxuICAsIGF1dG9wbGF5LCBjb250cm9scywgbG9vcCwgcHJlbG9hZCwgcG9zdGVyLCBkZWZhdWx0LCBraW5kLCBzcmNsYW5nXG4gICwgc2FuZGJveCwgc3JjZG9jXG4gICwgcmV2ZXJzZWQsIHN0YXJ0XG4gICwgYWxpZ24sIGNvbHNwYW4sIHJvd3NwYW4sIGhlYWRlcnMsIHNjb3BlXG4gICwgYWNjZXNza2V5LCBjb250ZW50ZWRpdGFibGUsIGNvbnRleHRtZW51LCBkaXIsIGRyYWdnYWJsZSwgZHJvcHpvbmVcbiAgLCBpdGVtcHJvcCwgbGFuZywgc3BlbGxjaGVjaywgdGFiaW5kZXhcbiAgLCBjaXRlLCBkYXRldGltZSwgcHViZGF0ZSwgbWFuaWZlc3RcbiAgKVxuXG57LXwgSGVscGVyIGZ1bmN0aW9ucyBmb3IgSFRNTCBhdHRyaWJ1dGVzLiBUaGV5IGFyZSBvcmdhbml6ZWQgcm91Z2hseSBieVxuY2F0ZWdvcnkuIEVhY2ggYXR0cmlidXRlIGlzIGxhYmVsZWQgd2l0aCB0aGUgSFRNTCB0YWdzIGl0IGNhbiBiZSB1c2VkIHdpdGgsIHNvXG5qdXN0IHNlYXJjaCB0aGUgcGFnZSBmb3IgYHZpZGVvYCBpZiB5b3Ugd2FudCB2aWRlbyBzdHVmZi5cblxuIyBQcmltaXRpdmVzXG5AZG9jcyBzdHlsZSwgcHJvcGVydHksIGF0dHJpYnV0ZSwgbWFwXG5cbiMgU3VwZXIgQ29tbW9uIEF0dHJpYnV0ZXNcbkBkb2NzIGNsYXNzLCBjbGFzc0xpc3QsIGlkLCB0aXRsZSwgaGlkZGVuXG5cbiMgSW5wdXRzXG5AZG9jcyB0eXBlXywgdmFsdWUsIGNoZWNrZWQsIHBsYWNlaG9sZGVyLCBzZWxlY3RlZFxuXG4jIyBJbnB1dCBIZWxwZXJzXG5AZG9jcyBhY2NlcHQsIGFjY2VwdENoYXJzZXQsIGFjdGlvbiwgYXV0b2NvbXBsZXRlLCBhdXRvZm9jdXMsXG4gICAgZGlzYWJsZWQsIGVuY3R5cGUsIGxpc3QsIG1heGxlbmd0aCwgbWlubGVuZ3RoLCBtZXRob2QsIG11bHRpcGxlLFxuICAgIG5hbWUsIG5vdmFsaWRhdGUsIHBhdHRlcm4sIHJlYWRvbmx5LCByZXF1aXJlZCwgc2l6ZSwgZm9yLCBmb3JtXG5cbiMjIElucHV0IFJhbmdlc1xuQGRvY3MgbWF4LCBtaW4sIHN0ZXBcblxuIyMgSW5wdXQgVGV4dCBBcmVhc1xuQGRvY3MgY29scywgcm93cywgd3JhcFxuXG5cbiMgTGlua3MgYW5kIEFyZWFzXG5AZG9jcyBocmVmLCB0YXJnZXQsIGRvd25sb2FkLCBocmVmbGFuZywgbWVkaWEsIHBpbmcsIHJlbFxuXG4jIyBNYXBzXG5AZG9jcyBpc21hcCwgdXNlbWFwLCBzaGFwZSwgY29vcmRzXG5cblxuIyBFbWJlZGRlZCBDb250ZW50XG5AZG9jcyBzcmMsIGhlaWdodCwgd2lkdGgsIGFsdFxuXG4jIyBBdWRpbyBhbmQgVmlkZW9cbkBkb2NzIGF1dG9wbGF5LCBjb250cm9scywgbG9vcCwgcHJlbG9hZCwgcG9zdGVyLCBkZWZhdWx0LCBraW5kLCBzcmNsYW5nXG5cbiMjIGlmcmFtZXNcbkBkb2NzIHNhbmRib3gsIHNyY2RvY1xuXG4jIE9yZGVyZWQgTGlzdHNcbkBkb2NzIHJldmVyc2VkLCBzdGFydFxuXG4jIFRhYmxlc1xuQGRvY3MgYWxpZ24sIGNvbHNwYW4sIHJvd3NwYW4sIGhlYWRlcnMsIHNjb3BlXG5cbiMgTGVzcyBDb21tb24gR2xvYmFsIEF0dHJpYnV0ZXNcbkF0dHJpYnV0ZXMgdGhhdCBjYW4gYmUgYXR0YWNoZWQgdG8gYW55IEhUTUwgdGFnIGJ1dCBhcmUgbGVzcyBjb21tb25seSB1c2VkLlxuQGRvY3MgYWNjZXNza2V5LCBjb250ZW50ZWRpdGFibGUsIGNvbnRleHRtZW51LCBkaXIsIGRyYWdnYWJsZSwgZHJvcHpvbmUsXG4gICAgICBpdGVtcHJvcCwgbGFuZywgc3BlbGxjaGVjaywgdGFiaW5kZXhcblxuIyBNaXNjZWxsYW5lb3VzXG5AZG9jcyBjaXRlLCBkYXRldGltZSwgcHViZGF0ZSwgbWFuaWZlc3RcblxuLX1cblxuXG5pbXBvcnQgRWxtLktlcm5lbC5WaXJ0dWFsRG9tXG5pbXBvcnQgSHRtbCBleHBvc2luZyAoQXR0cmlidXRlKVxuaW1wb3J0IEpzb24uRW5jb2RlIGFzIEpzb25cbmltcG9ydCBWaXJ0dWFsRG9tXG5cblxuLS0gVGhpcyBsaWJyYXJ5IGRvZXMgbm90IGluY2x1ZGUgbG93LCBoaWdoLCBvciBvcHRpbXVtIGJlY2F1c2UgdGhlIGlkZWEgb2YgYVxuLS0gYG1ldGVyYCBpcyBqdXN0IHRvbyBjcmF6eS5cblxuXG5cbi0tIFBSSU1JVElWRVNcblxuXG57LXwgU3BlY2lmeSBhIHN0eWxlLlxuXG4gICAgZ3JlZXRpbmcgOiBOb2RlIG1zZ1xuICAgIGdyZWV0aW5nID1cbiAgICAgIGRpdlxuICAgICAgICBbIHN0eWxlIFwiYmFja2dyb3VuZC1jb2xvclwiIFwicmVkXCJcbiAgICAgICAgLCBzdHlsZSBcImhlaWdodFwiIFwiOTBweFwiXG4gICAgICAgICwgc3R5bGUgXCJ3aWR0aFwiIFwiMTAwJVwiXG4gICAgICAgIF1cbiAgICAgICAgWyB0ZXh0IFwiSGVsbG8hXCJcbiAgICAgICAgXVxuXG5UaGVyZSBpcyBubyBgSHRtbC5TdHlsZXNgIG1vZHVsZSBiZWNhdXNlIGJlc3QgcHJhY3RpY2VzIGZvciB3b3JraW5nIHdpdGggSFRNTFxuc3VnZ2VzdCB0aGF0IHRoaXMgc2hvdWxkIHByaW1hcmlseSBiZSBzcGVjaWZpZWQgaW4gQ1NTIGZpbGVzLiBTbyB0aGUgZ2VuZXJhbFxucmVjb21tZW5kYXRpb24gaXMgdG8gdXNlIHRoaXMgZnVuY3Rpb24gbGlnaHRseS5cbi19XG5zdHlsZSA6IFN0cmluZyAtPiBTdHJpbmcgLT4gQXR0cmlidXRlIG1zZ1xuc3R5bGUgPVxuICBWaXJ0dWFsRG9tLnN0eWxlXG5cblxuey18IFRoaXMgZnVuY3Rpb24gbWFrZXMgaXQgZWFzaWVyIHRvIGJ1aWxkIGEgc3BhY2Utc2VwYXJhdGVkIGNsYXNzIGF0dHJpYnV0ZS5cbkVhY2ggY2xhc3MgY2FuIGVhc2lseSBiZSBhZGRlZCBhbmQgcmVtb3ZlZCBkZXBlbmRpbmcgb24gdGhlIGJvb2xlYW4gdmFsdWUgaXRcbmlzIHBhaXJlZCB3aXRoLiBGb3IgZXhhbXBsZSwgbWF5YmUgd2Ugd2FudCBhIHdheSB0byB2aWV3IG5vdGljZXM6XG5cbiAgICB2aWV3Tm90aWNlIDogTm90aWNlIC0+IEh0bWwgbXNnXG4gICAgdmlld05vdGljZSBub3RpY2UgPVxuICAgICAgZGl2XG4gICAgICAgIFsgY2xhc3NMaXN0XG4gICAgICAgICAgICBbIChcIm5vdGljZVwiLCBUcnVlKVxuICAgICAgICAgICAgLCAoXCJub3RpY2UtaW1wb3J0YW50XCIsIG5vdGljZS5pc0ltcG9ydGFudClcbiAgICAgICAgICAgICwgKFwibm90aWNlLXNlZW5cIiwgbm90aWNlLmlzU2VlbilcbiAgICAgICAgICAgIF1cbiAgICAgICAgXVxuICAgICAgICBbIHRleHQgbm90aWNlLmNvbnRlbnQgXVxuXG4qKk5vdGU6KiogWW91IGNhbiBoYXZlIGFzIG1hbnkgYGNsYXNzYCBhbmQgYGNsYXNzTGlzdGAgYXR0cmlidXRlcyBhcyB5b3Ugd2FudC5cblRoZXkgYWxsIGdldCBhcHBsaWVkLCBzbyBpZiB5b3Ugc2F5IGBbIGNsYXNzIFwibm90aWNlXCIsIGNsYXNzIFwibm90aWNlLXNlZW5cIiBdYFxueW91IHdpbGwgZ2V0IGJvdGggY2xhc3NlcyFcbi19XG5jbGFzc0xpc3QgOiBMaXN0IChTdHJpbmcsIEJvb2wpIC0+IEF0dHJpYnV0ZSBtc2dcbmNsYXNzTGlzdCBjbGFzc2VzID1cbiAgY2xhc3MgPHwgU3RyaW5nLmpvaW4gXCIgXCIgPHwgTGlzdC5tYXAgVHVwbGUuZmlyc3QgPHxcbiAgICBMaXN0LmZpbHRlciBUdXBsZS5zZWNvbmQgY2xhc3Nlc1xuXG5cblxuLS0gQ1VTVE9NIEFUVFJJQlVURVNcblxuXG57LXwgQ3JlYXRlICpwcm9wZXJ0aWVzKiwgbGlrZSBzYXlpbmcgYGRvbU5vZGUuY2xhc3NOYW1lID0gXCdncmVldGluZ1wnYCBpblxuSmF2YVNjcmlwdC5cblxuICAgIGltcG9ydCBKc29uLkVuY29kZSBhcyBFbmNvZGVcblxuICAgIGNsYXNzIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbiAgICBjbGFzcyBuYW1lID1cbiAgICAgIHByb3BlcnR5IFwiY2xhc3NOYW1lXCIgKEVuY29kZS5zdHJpbmcgbmFtZSlcblxuUmVhZCBtb3JlIGFib3V0IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcyBbaGVyZV1bXS5cblxuW2hlcmVdOiBodHRwczovL2dpdGh1Yi5jb20vZWxtL2h0bWwvYmxvYi9tYXN0ZXIvcHJvcGVydGllcy12cy1hdHRyaWJ1dGVzLm1kXG4tfVxucHJvcGVydHkgOiBTdHJpbmcgLT4gSnNvbi5WYWx1ZSAtPiBBdHRyaWJ1dGUgbXNnXG5wcm9wZXJ0eSA9XG4gIFZpcnR1YWxEb20ucHJvcGVydHlcblxuXG5zdHJpbmdQcm9wZXJ0eSA6IFN0cmluZyAtPiBTdHJpbmcgLT4gQXR0cmlidXRlIG1zZ1xuc3RyaW5nUHJvcGVydHkga2V5IHN0cmluZyA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5wcm9wZXJ0eSBrZXkgKEpzb24uc3RyaW5nIHN0cmluZylcblxuXG5ib29sUHJvcGVydHkgOiBTdHJpbmcgLT4gQm9vbCAtPiBBdHRyaWJ1dGUgbXNnXG5ib29sUHJvcGVydHkga2V5IGJvb2wgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ucHJvcGVydHkga2V5IChKc29uLmJvb2wgYm9vbClcblxuXG57LXwgQ3JlYXRlICphdHRyaWJ1dGVzKiwgbGlrZSBzYXlpbmcgYGRvbU5vZGUuc2V0QXR0cmlidXRlKFwnY2xhc3NcJywgXCdncmVldGluZ1wnKWBcbmluIEphdmFTY3JpcHQuXG5cbiAgICBjbGFzcyA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG4gICAgY2xhc3MgbmFtZSA9XG4gICAgICBhdHRyaWJ1dGUgXCJjbGFzc1wiIG5hbWVcblxuUmVhZCBtb3JlIGFib3V0IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcyBbaGVyZV1bXS5cblxuW2hlcmVdOiBodHRwczovL2dpdGh1Yi5jb20vZWxtL2h0bWwvYmxvYi9tYXN0ZXIvcHJvcGVydGllcy12cy1hdHRyaWJ1dGVzLm1kXG4tfVxuYXR0cmlidXRlIDogU3RyaW5nIC0+IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5hdHRyaWJ1dGUgPVxuICBWaXJ0dWFsRG9tLmF0dHJpYnV0ZVxuXG5cbnstfCBUcmFuc2Zvcm0gdGhlIG1lc3NhZ2VzIHByb2R1Y2VkIGJ5IGFuIGBBdHRyaWJ1dGVgLlxuLX1cbm1hcCA6IChhIC0+IG1zZykgLT4gQXR0cmlidXRlIGEgLT4gQXR0cmlidXRlIG1zZ1xubWFwID1cbiAgVmlydHVhbERvbS5tYXBBdHRyaWJ1dGVcblxuXG5cbi0tIEdMT0JBTCBBVFRSSUJVVEVTXG5cblxuey18IE9mdGVuIHVzZWQgd2l0aCBDU1MgdG8gc3R5bGUgZWxlbWVudHMgd2l0aCBjb21tb24gcHJvcGVydGllcy5cblxuKipOb3RlOioqIFlvdSBjYW4gaGF2ZSBhcyBtYW55IGBjbGFzc2AgYW5kIGBjbGFzc0xpc3RgIGF0dHJpYnV0ZXMgYXMgeW91IHdhbnQuXG5UaGV5IGFsbCBnZXQgYXBwbGllZCwgc28gaWYgeW91IHNheSBgWyBjbGFzcyBcIm5vdGljZVwiLCBjbGFzcyBcIm5vdGljZS1zZWVuXCIgXWBcbnlvdSB3aWxsIGdldCBib3RoIGNsYXNzZXMhXG4tfVxuY2xhc3MgOiBTdHJpbmcgLT4gQXR0cmlidXRlIG1zZ1xuY2xhc3MgPVxuICBzdHJpbmdQcm9wZXJ0eSBcImNsYXNzTmFtZVwiXG5cblxuey18IEluZGljYXRlcyB0aGUgcmVsZXZhbmNlIG9mIGFuIGVsZW1lbnQuIC19XG5oaWRkZW4gOiBCb29sIC0+IEF0dHJpYnV0ZSBtc2dcbmhpZGRlbiA9XG4gIGJvb2xQcm9wZXJ0eSBcImhpZGRlblwiXG5cblxuey18IE9mdGVuIHVzZWQgd2l0aCBDU1MgdG8gc3R5bGUgYSBzcGVjaWZpYyBlbGVtZW50LiBUaGUgdmFsdWUgb2YgdGhpc1xuYXR0cmlidXRlIG11c3QgYmUgdW5pcXVlLlxuLX1cbmlkIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbmlkID1cbiAgc3RyaW5nUHJvcGVydHkgXCJpZFwiXG5cblxuey18IFRleHQgdG8gYmUgZGlzcGxheWVkIGluIGEgdG9vbHRpcCB3aGVuIGhvdmVyaW5nIG92ZXIgdGhlIGVsZW1lbnQuIC19XG50aXRsZSA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG50aXRsZSA9XG4gIHN0cmluZ1Byb3BlcnR5IFwidGl0bGVcIlxuXG5cblxuLS0gTEVTUyBDT01NT04gR0xPQkFMIEFUVFJJQlVURVNcblxuXG57LXwgRGVmaW5lcyBhIGtleWJvYXJkIHNob3J0Y3V0IHRvIGFjdGl2YXRlIG9yIGFkZCBmb2N1cyB0byB0aGUgZWxlbWVudC4gLX1cbmFjY2Vzc2tleSA6IENoYXIgLT4gQXR0cmlidXRlIG1zZ1xuYWNjZXNza2V5IGNoYXIgPVxuICBzdHJpbmdQcm9wZXJ0eSBcImFjY2Vzc0tleVwiIChTdHJpbmcuZnJvbUNoYXIgY2hhcilcblxuXG57LXwgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGVsZW1lbnRcJ3MgY29udGVudCBpcyBlZGl0YWJsZS4gLX1cbmNvbnRlbnRlZGl0YWJsZSA6IEJvb2wgLT4gQXR0cmlidXRlIG1zZ1xuY29udGVudGVkaXRhYmxlID1cbiAgYm9vbFByb3BlcnR5IFwiY29udGVudEVkaXRhYmxlXCJcblxuXG57LXwgRGVmaW5lcyB0aGUgSUQgb2YgYSBgbWVudWAgZWxlbWVudCB3aGljaCB3aWxsIHNlcnZlIGFzIHRoZSBlbGVtZW50XCdzXG5jb250ZXh0IG1lbnUuXG4tfVxuY29udGV4dG1lbnUgOiBTdHJpbmcgLT4gQXR0cmlidXRlIG1zZ1xuY29udGV4dG1lbnUgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20uYXR0cmlidXRlIFwiY29udGV4dG1lbnVcIlxuXG5cbnstfCBEZWZpbmVzIHRoZSB0ZXh0IGRpcmVjdGlvbi4gQWxsb3dlZCB2YWx1ZXMgYXJlIGx0ciAoTGVmdC1Uby1SaWdodCkgb3IgcnRsXG4oUmlnaHQtVG8tTGVmdCkuXG4tfVxuZGlyIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbmRpciA9XG4gIHN0cmluZ1Byb3BlcnR5IFwiZGlyXCJcblxuXG57LXwgRGVmaW5lcyB3aGV0aGVyIHRoZSBlbGVtZW50IGNhbiBiZSBkcmFnZ2VkLiAtfVxuZHJhZ2dhYmxlIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbmRyYWdnYWJsZSA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5hdHRyaWJ1dGUgXCJkcmFnZ2FibGVcIlxuXG5cbnstfCBJbmRpY2F0ZXMgdGhhdCB0aGUgZWxlbWVudCBhY2NlcHQgdGhlIGRyb3BwaW5nIG9mIGNvbnRlbnQgb24gaXQuIC19XG5kcm9wem9uZSA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5kcm9wem9uZSA9XG4gIHN0cmluZ1Byb3BlcnR5IFwiZHJvcHpvbmVcIlxuXG5cbnstfC19XG5pdGVtcHJvcCA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5pdGVtcHJvcCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5hdHRyaWJ1dGUgXCJpdGVtcHJvcFwiXG5cblxuey18IERlZmluZXMgdGhlIGxhbmd1YWdlIHVzZWQgaW4gdGhlIGVsZW1lbnQuIC19XG5sYW5nIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbmxhbmcgPVxuICBzdHJpbmdQcm9wZXJ0eSBcImxhbmdcIlxuXG5cbnstfCBJbmRpY2F0ZXMgd2hldGhlciBzcGVsbCBjaGVja2luZyBpcyBhbGxvd2VkIGZvciB0aGUgZWxlbWVudC4gLX1cbnNwZWxsY2hlY2sgOiBCb29sIC0+IEF0dHJpYnV0ZSBtc2dcbnNwZWxsY2hlY2sgPVxuICBib29sUHJvcGVydHkgXCJzcGVsbGNoZWNrXCJcblxuXG57LXwgT3ZlcnJpZGVzIHRoZSBicm93c2VyXCdzIGRlZmF1bHQgdGFiIG9yZGVyIGFuZCBmb2xsb3dzIHRoZSBvbmUgc3BlY2lmaWVkXG5pbnN0ZWFkLlxuLX1cbnRhYmluZGV4IDogSW50IC0+IEF0dHJpYnV0ZSBtc2dcbnRhYmluZGV4IG4gPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20uYXR0cmlidXRlIFwidGFiSW5kZXhcIiAoU3RyaW5nLmZyb21JbnQgbilcblxuXG5cbi0tIEVNQkVEREVEIENPTlRFTlRcblxuXG57LXwgVGhlIFVSTCBvZiB0aGUgZW1iZWRkYWJsZSBjb250ZW50LiBGb3IgYGF1ZGlvYCwgYGVtYmVkYCwgYGlmcmFtZWAsIGBpbWdgLFxuYGlucHV0YCwgYHNjcmlwdGAsIGBzb3VyY2VgLCBgdHJhY2tgLCBhbmQgYHZpZGVvYC5cbi19XG5zcmMgOiBTdHJpbmcgLT4gQXR0cmlidXRlIG1zZ1xuc3JjIHVybCA9XG4gIHN0cmluZ1Byb3BlcnR5IFwic3JjXCIgKEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub0phdmFTY3JpcHRPckh0bWxVcmkgdXJsKVxuXG5cbnstfCBEZWNsYXJlIHRoZSBoZWlnaHQgb2YgYSBgY2FudmFzYCwgYGVtYmVkYCwgYGlmcmFtZWAsIGBpbWdgLCBgaW5wdXRgLFxuYG9iamVjdGAsIG9yIGB2aWRlb2AuXG4tfVxuaGVpZ2h0IDogSW50IC0+IEF0dHJpYnV0ZSBtc2dcbmhlaWdodCBuID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLmF0dHJpYnV0ZSBcImhlaWdodFwiIChTdHJpbmcuZnJvbUludCBuKVxuXG5cbnstfCBEZWNsYXJlIHRoZSB3aWR0aCBvZiBhIGBjYW52YXNgLCBgZW1iZWRgLCBgaWZyYW1lYCwgYGltZ2AsIGBpbnB1dGAsXG5gb2JqZWN0YCwgb3IgYHZpZGVvYC5cbi19XG53aWR0aCA6IEludCAtPiBBdHRyaWJ1dGUgbXNnXG53aWR0aCBuID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLmF0dHJpYnV0ZSBcIndpZHRoXCIgKFN0cmluZy5mcm9tSW50IG4pXG5cblxuey18IEFsdGVybmF0aXZlIHRleHQgaW4gY2FzZSBhbiBpbWFnZSBjYW5cJ3QgYmUgZGlzcGxheWVkLiBXb3JrcyB3aXRoIGBpbWdgLFxuYGFyZWFgLCBhbmQgYGlucHV0YC5cbi19XG5hbHQgOiBTdHJpbmcgLT4gQXR0cmlidXRlIG1zZ1xuYWx0ID1cbiAgc3RyaW5nUHJvcGVydHkgXCJhbHRcIlxuXG5cblxuLS0gQVVESU8gYW5kIFZJREVPXG5cblxuey18IFRoZSBgYXVkaW9gIG9yIGB2aWRlb2Agc2hvdWxkIHBsYXkgYXMgc29vbiBhcyBwb3NzaWJsZS4gLX1cbmF1dG9wbGF5IDogQm9vbCAtPiBBdHRyaWJ1dGUgbXNnXG5hdXRvcGxheSA9XG4gIGJvb2xQcm9wZXJ0eSBcImF1dG9wbGF5XCJcblxuXG57LXwgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGJyb3dzZXIgc2hvdWxkIHNob3cgcGxheWJhY2sgY29udHJvbHMgZm9yIHRoZSBgYXVkaW9gXG5vciBgdmlkZW9gLlxuLX1cbmNvbnRyb2xzIDogQm9vbCAtPiBBdHRyaWJ1dGUgbXNnXG5jb250cm9scyA9XG4gIGJvb2xQcm9wZXJ0eSBcImNvbnRyb2xzXCJcblxuXG57LXwgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGBhdWRpb2Agb3IgYHZpZGVvYCBzaG91bGQgc3RhcnQgcGxheWluZyBmcm9tIHRoZVxuc3RhcnQgd2hlbiBpdFwncyBmaW5pc2hlZC5cbi19XG5sb29wIDogQm9vbCAtPiBBdHRyaWJ1dGUgbXNnXG5sb29wID1cbiAgYm9vbFByb3BlcnR5IFwibG9vcFwiXG5cblxuey18IENvbnRyb2wgaG93IG11Y2ggb2YgYW4gYGF1ZGlvYCBvciBgdmlkZW9gIHJlc291cmNlIHNob3VsZCBiZSBwcmVsb2FkZWQuIC19XG5wcmVsb2FkIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbnByZWxvYWQgPVxuICBzdHJpbmdQcm9wZXJ0eSBcInByZWxvYWRcIlxuXG5cbnstfCBBIFVSTCBpbmRpY2F0aW5nIGEgcG9zdGVyIGZyYW1lIHRvIHNob3cgdW50aWwgdGhlIHVzZXIgcGxheXMgb3Igc2Vla3MgdGhlXG5gdmlkZW9gLlxuLX1cbnBvc3RlciA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5wb3N0ZXIgPVxuICBzdHJpbmdQcm9wZXJ0eSBcInBvc3RlclwiXG5cblxuey18IEluZGljYXRlcyB0aGF0IHRoZSBgdHJhY2tgIHNob3VsZCBiZSBlbmFibGVkIHVubGVzcyB0aGUgdXNlclwncyBwcmVmZXJlbmNlc1xuaW5kaWNhdGUgc29tZXRoaW5nIGRpZmZlcmVudC5cbi19XG5kZWZhdWx0IDogQm9vbCAtPiBBdHRyaWJ1dGUgbXNnXG5kZWZhdWx0ID1cbiAgYm9vbFByb3BlcnR5IFwiZGVmYXVsdFwiXG5cblxuey18IFNwZWNpZmllcyB0aGUga2luZCBvZiB0ZXh0IGB0cmFja2AuIC19XG5raW5kIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbmtpbmQgPVxuICBzdHJpbmdQcm9wZXJ0eSBcImtpbmRcIlxuXG5cbnstLSBUT0RPOiBtYXliZSByZWludHJvZHVjZSBvbmNlIHRoZXJlXCdzIGEgYmV0dGVyIHdheSB0byBkaXNhbWJpZ3VhdGUgaW1wb3J0c1xuey18IFNwZWNpZmllcyBhIHVzZXItcmVhZGFibGUgdGl0bGUgb2YgdGhlIHRleHQgYHRyYWNrYC4gLX1cbmxhYmVsIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbmxhYmVsID1cbiAgc3RyaW5nUHJvcGVydHkgXCJsYWJlbFwiXG4tLX1cblxuey18IEEgdHdvIGxldHRlciBsYW5ndWFnZSBjb2RlIGluZGljYXRpbmcgdGhlIGxhbmd1YWdlIG9mIHRoZSBgdHJhY2tgIHRleHQgZGF0YS5cbi19XG5zcmNsYW5nIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbnNyY2xhbmcgPVxuICBzdHJpbmdQcm9wZXJ0eSBcInNyY2xhbmdcIlxuXG5cblxuLS0gSUZSQU1FU1xuXG5cbnstfCBBIHNwYWNlIHNlcGFyYXRlZCBsaXN0IG9mIHNlY3VyaXR5IHJlc3RyaWN0aW9ucyB5b3VcJ2QgbGlrZSB0byBsaWZ0IGZvciBhblxuYGlmcmFtZWAuXG4tfVxuc2FuZGJveCA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5zYW5kYm94ID1cbiAgc3RyaW5nUHJvcGVydHkgXCJzYW5kYm94XCJcblxuXG57LXwgQW4gSFRNTCBkb2N1bWVudCB0aGF0IHdpbGwgYmUgZGlzcGxheWVkIGFzIHRoZSBib2R5IG9mIGFuIGBpZnJhbWVgLiBJdCB3aWxsXG5vdmVycmlkZSB0aGUgY29udGVudCBvZiB0aGUgYHNyY2AgYXR0cmlidXRlIGlmIGl0IGhhcyBiZWVuIHNwZWNpZmllZC5cbi19XG5zcmNkb2MgOiBTdHJpbmcgLT4gQXR0cmlidXRlIG1zZ1xuc3JjZG9jID1cbiAgc3RyaW5nUHJvcGVydHkgXCJzcmNkb2NcIlxuXG5cblxuLS0gSU5QVVRcblxuXG57LXwgRGVmaW5lcyB0aGUgdHlwZSBvZiBhIGBidXR0b25gLCBgY2hlY2tib3hgLCBgaW5wdXRgLCBgZW1iZWRgLCBgbWVudWAsXG5gb2JqZWN0YCwgYHNjcmlwdGAsIGBzb3VyY2VgLCBvciBgc3R5bGVgLlxuLX1cbnR5cGVfIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbnR5cGVfID1cbiAgc3RyaW5nUHJvcGVydHkgXCJ0eXBlXCJcblxuXG57LXwgRGVmaW5lcyBhIGRlZmF1bHQgdmFsdWUgd2hpY2ggd2lsbCBiZSBkaXNwbGF5ZWQgaW4gYSBgYnV0dG9uYCwgYG9wdGlvbmAsXG5gaW5wdXRgLCBgbGlgLCBgbWV0ZXJgLCBgcHJvZ3Jlc3NgLCBvciBgcGFyYW1gLlxuLX1cbnZhbHVlIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbnZhbHVlID1cbiAgc3RyaW5nUHJvcGVydHkgXCJ2YWx1ZVwiXG5cblxuey18IEluZGljYXRlcyB3aGV0aGVyIGFuIGBpbnB1dGAgb2YgdHlwZSBjaGVja2JveCBpcyBjaGVja2VkLiAtfVxuY2hlY2tlZCA6IEJvb2wgLT4gQXR0cmlidXRlIG1zZ1xuY2hlY2tlZCA9XG4gIGJvb2xQcm9wZXJ0eSBcImNoZWNrZWRcIlxuXG5cbnstfCBQcm92aWRlcyBhIGhpbnQgdG8gdGhlIHVzZXIgb2Ygd2hhdCBjYW4gYmUgZW50ZXJlZCBpbnRvIGFuIGBpbnB1dGAgb3JcbmB0ZXh0YXJlYWAuXG4tfVxucGxhY2Vob2xkZXIgOiBTdHJpbmcgLT4gQXR0cmlidXRlIG1zZ1xucGxhY2Vob2xkZXIgPVxuICBzdHJpbmdQcm9wZXJ0eSBcInBsYWNlaG9sZGVyXCJcblxuXG57LXwgRGVmaW5lcyB3aGljaCBgb3B0aW9uYCB3aWxsIGJlIHNlbGVjdGVkIG9uIHBhZ2UgbG9hZC4gLX1cbnNlbGVjdGVkIDogQm9vbCAtPiBBdHRyaWJ1dGUgbXNnXG5zZWxlY3RlZCA9XG4gIGJvb2xQcm9wZXJ0eSBcInNlbGVjdGVkXCJcblxuXG5cbi0tIElOUFVUIEhFTFBFUlNcblxuXG57LXwgTGlzdCBvZiB0eXBlcyB0aGUgc2VydmVyIGFjY2VwdHMsIHR5cGljYWxseSBhIGZpbGUgdHlwZS5cbkZvciBgZm9ybWAgYW5kIGBpbnB1dGAuXG4tfVxuYWNjZXB0IDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbmFjY2VwdCA9XG4gIHN0cmluZ1Byb3BlcnR5IFwiYWNjZXB0XCJcblxuXG57LXwgTGlzdCBvZiBzdXBwb3J0ZWQgY2hhcnNldHMgaW4gYSBgZm9ybWAuXG4tfVxuYWNjZXB0Q2hhcnNldCA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5hY2NlcHRDaGFyc2V0ID1cbiAgc3RyaW5nUHJvcGVydHkgXCJhY2NlcHRDaGFyc2V0XCJcblxuXG57LXwgVGhlIFVSSSBvZiBhIHByb2dyYW0gdGhhdCBwcm9jZXNzZXMgdGhlIGluZm9ybWF0aW9uIHN1Ym1pdHRlZCB2aWEgYSBgZm9ybWAuXG4tfVxuYWN0aW9uIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbmFjdGlvbiB1cmkgPVxuICBzdHJpbmdQcm9wZXJ0eSBcImFjdGlvblwiIChFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9KYXZhU2NyaXB0VXJpIHVyaSlcblxuXG57LXwgSW5kaWNhdGVzIHdoZXRoZXIgYSBgZm9ybWAgb3IgYW4gYGlucHV0YCBjYW4gaGF2ZSB0aGVpciB2YWx1ZXMgYXV0b21hdGljYWxseVxuY29tcGxldGVkIGJ5IHRoZSBicm93c2VyLlxuLX1cbmF1dG9jb21wbGV0ZSA6IEJvb2wgLT4gQXR0cmlidXRlIG1zZ1xuYXV0b2NvbXBsZXRlIGJvb2wgPVxuICBzdHJpbmdQcm9wZXJ0eSBcImF1dG9jb21wbGV0ZVwiIChpZiBib29sIHRoZW4gXCJvblwiIGVsc2UgXCJvZmZcIilcblxuXG57LXwgVGhlIGVsZW1lbnQgc2hvdWxkIGJlIGF1dG9tYXRpY2FsbHkgZm9jdXNlZCBhZnRlciB0aGUgcGFnZSBsb2FkZWQuXG5Gb3IgYGJ1dHRvbmAsIGBpbnB1dGAsIGBzZWxlY3RgLCBhbmQgYHRleHRhcmVhYC5cbi19XG5hdXRvZm9jdXMgOiBCb29sIC0+IEF0dHJpYnV0ZSBtc2dcbmF1dG9mb2N1cyA9XG4gIGJvb2xQcm9wZXJ0eSBcImF1dG9mb2N1c1wiXG5cblxuey18IEluZGljYXRlcyB3aGV0aGVyIHRoZSB1c2VyIGNhbiBpbnRlcmFjdCB3aXRoIGEgYGJ1dHRvbmAsIGBmaWVsZHNldGAsXG5gaW5wdXRgLCBgb3B0Z3JvdXBgLCBgb3B0aW9uYCwgYHNlbGVjdGAgb3IgYHRleHRhcmVhYC5cbi19XG5kaXNhYmxlZCA6IEJvb2wgLT4gQXR0cmlidXRlIG1zZ1xuZGlzYWJsZWQgPVxuICBib29sUHJvcGVydHkgXCJkaXNhYmxlZFwiXG5cblxuey18IEhvdyBgZm9ybWAgZGF0YSBzaG91bGQgYmUgZW5jb2RlZCB3aGVuIHN1Ym1pdHRlZCB3aXRoIHRoZSBQT1NUIG1ldGhvZC5cbk9wdGlvbnMgaW5jbHVkZTogYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkLCBtdWx0aXBhcnQvZm9ybS1kYXRhLCBhbmRcbnRleHQvcGxhaW4uXG4tfVxuZW5jdHlwZSA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5lbmN0eXBlID1cbiAgc3RyaW5nUHJvcGVydHkgXCJlbmN0eXBlXCJcblxuXG57LXwgQXNzb2NpYXRlcyBhbiBgaW5wdXRgIHdpdGggYSBgZGF0YWxpc3RgIHRhZy4gVGhlIGRhdGFsaXN0IGdpdmVzIHNvbWVcbnByZS1kZWZpbmVkIG9wdGlvbnMgdG8gc3VnZ2VzdCB0byB0aGUgdXNlciBhcyB0aGV5IGludGVyYWN0IHdpdGggYW4gaW5wdXQuXG5UaGUgdmFsdWUgb2YgdGhlIGxpc3QgYXR0cmlidXRlIG11c3QgbWF0Y2ggdGhlIGlkIG9mIGEgYGRhdGFsaXN0YCBub2RlLlxuRm9yIGBpbnB1dGAuXG4tfVxubGlzdCA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5saXN0ID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLmF0dHJpYnV0ZSBcImxpc3RcIlxuXG5cbnstfCBEZWZpbmVzIHRoZSBtaW5pbXVtIG51bWJlciBvZiBjaGFyYWN0ZXJzIGFsbG93ZWQgaW4gYW4gYGlucHV0YCBvclxuYHRleHRhcmVhYC5cbi19XG5taW5sZW5ndGggOiBJbnQgLT4gQXR0cmlidXRlIG1zZ1xubWlubGVuZ3RoIG4gPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20uYXR0cmlidXRlIFwibWluTGVuZ3RoXCIgKFN0cmluZy5mcm9tSW50IG4pXG5cblxuey18IERlZmluZXMgdGhlIG1heGltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgYWxsb3dlZCBpbiBhbiBgaW5wdXRgIG9yXG5gdGV4dGFyZWFgLlxuLX1cbm1heGxlbmd0aCA6IEludCAtPiBBdHRyaWJ1dGUgbXNnXG5tYXhsZW5ndGggbiA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5hdHRyaWJ1dGUgXCJtYXhsZW5ndGhcIiAoU3RyaW5nLmZyb21JbnQgbilcblxuXG57LXwgRGVmaW5lcyB3aGljaCBIVFRQIG1ldGhvZCB0byB1c2Ugd2hlbiBzdWJtaXR0aW5nIGEgYGZvcm1gLiBDYW4gYmUgR0VUXG4oZGVmYXVsdCkgb3IgUE9TVC5cbi19XG5tZXRob2QgOiBTdHJpbmcgLT4gQXR0cmlidXRlIG1zZ1xubWV0aG9kID1cbiAgc3RyaW5nUHJvcGVydHkgXCJtZXRob2RcIlxuXG5cbnstfCBJbmRpY2F0ZXMgd2hldGhlciBtdWx0aXBsZSB2YWx1ZXMgY2FuIGJlIGVudGVyZWQgaW4gYW4gYGlucHV0YCBvZiB0eXBlXG5lbWFpbCBvciBmaWxlLiBDYW4gYWxzbyBpbmRpY2F0ZSB0aGF0IHlvdSBjYW4gYHNlbGVjdGAgbWFueSBvcHRpb25zLlxuLX1cbm11bHRpcGxlIDogQm9vbCAtPiBBdHRyaWJ1dGUgbXNnXG5tdWx0aXBsZSA9XG4gIGJvb2xQcm9wZXJ0eSBcIm11bHRpcGxlXCJcblxuXG57LXwgTmFtZSBvZiB0aGUgZWxlbWVudC4gRm9yIGV4YW1wbGUgdXNlZCBieSB0aGUgc2VydmVyIHRvIGlkZW50aWZ5IHRoZSBmaWVsZHNcbmluIGZvcm0gc3VibWl0cy4gRm9yIGBidXR0b25gLCBgZm9ybWAsIGBmaWVsZHNldGAsIGBpZnJhbWVgLCBgaW5wdXRgLFxuYG9iamVjdGAsIGBvdXRwdXRgLCBgc2VsZWN0YCwgYHRleHRhcmVhYCwgYG1hcGAsIGBtZXRhYCwgYW5kIGBwYXJhbWAuXG4tfVxubmFtZSA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5uYW1lID1cbiAgc3RyaW5nUHJvcGVydHkgXCJuYW1lXCJcblxuXG57LXwgVGhpcyBhdHRyaWJ1dGUgaW5kaWNhdGVzIHRoYXQgYSBgZm9ybWAgc2hvdWxkblwndCBiZSB2YWxpZGF0ZWQgd2hlblxuc3VibWl0dGVkLlxuLX1cbm5vdmFsaWRhdGUgOiBCb29sIC0+IEF0dHJpYnV0ZSBtc2dcbm5vdmFsaWRhdGUgPVxuICBib29sUHJvcGVydHkgXCJub1ZhbGlkYXRlXCJcblxuXG57LXwgRGVmaW5lcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB3aGljaCBhbiBgaW5wdXRgXCdzIHZhbHVlIHdpbGwgYmUgdmFsaWRhdGVkXG5hZ2FpbnN0LlxuLX1cbnBhdHRlcm4gOiBTdHJpbmcgLT4gQXR0cmlidXRlIG1zZ1xucGF0dGVybiA9XG4gIHN0cmluZ1Byb3BlcnR5IFwicGF0dGVyblwiXG5cblxuey18IEluZGljYXRlcyB3aGV0aGVyIGFuIGBpbnB1dGAgb3IgYHRleHRhcmVhYCBjYW4gYmUgZWRpdGVkLiAtfVxucmVhZG9ubHkgOiBCb29sIC0+IEF0dHJpYnV0ZSBtc2dcbnJlYWRvbmx5ID1cbiAgYm9vbFByb3BlcnR5IFwicmVhZE9ubHlcIlxuXG5cbnstfCBJbmRpY2F0ZXMgd2hldGhlciB0aGlzIGVsZW1lbnQgaXMgcmVxdWlyZWQgdG8gZmlsbCBvdXQgb3Igbm90LlxuRm9yIGBpbnB1dGAsIGBzZWxlY3RgLCBhbmQgYHRleHRhcmVhYC5cbi19XG5yZXF1aXJlZCA6IEJvb2wgLT4gQXR0cmlidXRlIG1zZ1xucmVxdWlyZWQgPVxuICBib29sUHJvcGVydHkgXCJyZXF1aXJlZFwiXG5cblxuey18IEZvciBgaW5wdXRgIHNwZWNpZmllcyB0aGUgd2lkdGggb2YgYW4gaW5wdXQgaW4gY2hhcmFjdGVycy5cblxuRm9yIGBzZWxlY3RgIHNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIHZpc2libGUgb3B0aW9ucyBpbiBhIGRyb3AtZG93biBsaXN0LlxuLX1cbnNpemUgOiBJbnQgLT4gQXR0cmlidXRlIG1zZ1xuc2l6ZSBuID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLmF0dHJpYnV0ZSBcInNpemVcIiAoU3RyaW5nLmZyb21JbnQgbilcblxuXG57LXwgVGhlIGVsZW1lbnQgSUQgZGVzY3JpYmVkIGJ5IHRoaXMgYGxhYmVsYCBvciB0aGUgZWxlbWVudCBJRHMgdGhhdCBhcmUgdXNlZFxuZm9yIGFuIGBvdXRwdXRgLlxuLX1cbmZvciA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5mb3IgPVxuICBzdHJpbmdQcm9wZXJ0eSBcImh0bWxGb3JcIlxuXG5cbnstfCBJbmRpY2F0ZXMgdGhlIGVsZW1lbnQgSUQgb2YgdGhlIGBmb3JtYCB0aGF0IG93bnMgdGhpcyBwYXJ0aWN1bGFyIGBidXR0b25gLFxuYGZpZWxkc2V0YCwgYGlucHV0YCwgYGxhYmVsYCwgYG1ldGVyYCwgYG9iamVjdGAsIGBvdXRwdXRgLCBgcHJvZ3Jlc3NgLFxuYHNlbGVjdGAsIG9yIGB0ZXh0YXJlYWAuXG4tfVxuZm9ybSA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5mb3JtID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLmF0dHJpYnV0ZSBcImZvcm1cIlxuXG5cblxuLS0gUkFOR0VTXG5cblxuey18IEluZGljYXRlcyB0aGUgbWF4aW11bSB2YWx1ZSBhbGxvd2VkLiBXaGVuIHVzaW5nIGFuIGlucHV0IG9mIHR5cGUgbnVtYmVyIG9yXG5kYXRlLCB0aGUgbWF4IHZhbHVlIG11c3QgYmUgYSBudW1iZXIgb3IgZGF0ZS4gRm9yIGBpbnB1dGAsIGBtZXRlcmAsIGFuZCBgcHJvZ3Jlc3NgLlxuLX1cbm1heCA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5tYXggPVxuICBzdHJpbmdQcm9wZXJ0eSBcIm1heFwiXG5cblxuey18IEluZGljYXRlcyB0aGUgbWluaW11bSB2YWx1ZSBhbGxvd2VkLiBXaGVuIHVzaW5nIGFuIGlucHV0IG9mIHR5cGUgbnVtYmVyIG9yXG5kYXRlLCB0aGUgbWluIHZhbHVlIG11c3QgYmUgYSBudW1iZXIgb3IgZGF0ZS4gRm9yIGBpbnB1dGAgYW5kIGBtZXRlcmAuXG4tfVxubWluIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbm1pbiA9XG4gIHN0cmluZ1Byb3BlcnR5IFwibWluXCJcblxuXG57LXwgQWRkIGEgc3RlcCBzaXplIHRvIGFuIGBpbnB1dGAuIFVzZSBgc3RlcCBcImFueVwiYCB0byBhbGxvdyBhbnkgZmxvYXRpbmctcG9pbnRcbm51bWJlciB0byBiZSB1c2VkIGluIHRoZSBpbnB1dC5cbi19XG5zdGVwIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbnN0ZXAgbiA9XG4gIHN0cmluZ1Byb3BlcnR5IFwic3RlcFwiIG5cblxuXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbnstfCBEZWZpbmVzIHRoZSBudW1iZXIgb2YgY29sdW1ucyBpbiBhIGB0ZXh0YXJlYWAuIC19XG5jb2xzIDogSW50IC0+IEF0dHJpYnV0ZSBtc2dcbmNvbHMgbiA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5hdHRyaWJ1dGUgXCJjb2xzXCIgKFN0cmluZy5mcm9tSW50IG4pXG5cblxuey18IERlZmluZXMgdGhlIG51bWJlciBvZiByb3dzIGluIGEgYHRleHRhcmVhYC4gLX1cbnJvd3MgOiBJbnQgLT4gQXR0cmlidXRlIG1zZ1xucm93cyBuID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLmF0dHJpYnV0ZSBcInJvd3NcIiAoU3RyaW5nLmZyb21JbnQgbilcblxuXG57LXwgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHRleHQgc2hvdWxkIGJlIHdyYXBwZWQgaW4gYSBgdGV4dGFyZWFgLiBQb3NzaWJsZVxudmFsdWVzIGFyZSBcImhhcmRcIiBhbmQgXCJzb2Z0XCIuXG4tfVxud3JhcCA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG53cmFwID1cbiAgc3RyaW5nUHJvcGVydHkgXCJ3cmFwXCJcblxuXG5cbi0tIE1BUFNcblxuXG57LXwgV2hlbiBhbiBgaW1nYCBpcyBhIGRlc2NlbmRhbnQgb2YgYW4gYGFgIHRhZywgdGhlIGBpc21hcGAgYXR0cmlidXRlXG5pbmRpY2F0ZXMgdGhhdCB0aGUgY2xpY2sgbG9jYXRpb24gc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSBwYXJlbnQgYGFgXCdzIGhyZWYgYXNcbmEgcXVlcnkgc3RyaW5nLlxuLX1cbmlzbWFwIDogQm9vbCAtPiBBdHRyaWJ1dGUgbXNnXG5pc21hcCA9XG4gIGJvb2xQcm9wZXJ0eSBcImlzTWFwXCJcblxuXG57LXwgU3BlY2lmeSB0aGUgaGFzaCBuYW1lIHJlZmVyZW5jZSBvZiBhIGBtYXBgIHRoYXQgc2hvdWxkIGJlIHVzZWQgZm9yIGFuIGBpbWdgXG5vciBgb2JqZWN0YC4gQSBoYXNoIG5hbWUgcmVmZXJlbmNlIGlzIGEgaGFzaCBzeW1ib2wgZm9sbG93ZWQgYnkgdGhlIGVsZW1lbnRcJ3MgbmFtZSBvciBpZC5cbkUuZy4gYFwiI3BsYW5ldC1tYXBcImAuXG4tfVxudXNlbWFwIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbnVzZW1hcCA9XG4gIHN0cmluZ1Byb3BlcnR5IFwidXNlTWFwXCJcblxuXG57LXwgRGVjbGFyZSB0aGUgc2hhcGUgb2YgdGhlIGNsaWNrYWJsZSBhcmVhIGluIGFuIGBhYCBvciBgYXJlYWAuIFZhbGlkIHZhbHVlc1xuaW5jbHVkZTogZGVmYXVsdCwgcmVjdCwgY2lyY2xlLCBwb2x5LiBUaGlzIGF0dHJpYnV0ZSBjYW4gYmUgcGFpcmVkIHdpdGhcbmBjb29yZHNgIHRvIGNyZWF0ZSBtb3JlIHBhcnRpY3VsYXIgc2hhcGVzLlxuLX1cbnNoYXBlIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbnNoYXBlID1cbiAgc3RyaW5nUHJvcGVydHkgXCJzaGFwZVwiXG5cblxuey18IEEgc2V0IG9mIHZhbHVlcyBzcGVjaWZ5aW5nIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgaG90LXNwb3QgcmVnaW9uIGluIGFuXG5gYXJlYWAuIE5lZWRzIHRvIGJlIHBhaXJlZCB3aXRoIGEgYHNoYXBlYCBhdHRyaWJ1dGUgdG8gYmUgbWVhbmluZ2Z1bC5cbi19XG5jb29yZHMgOiBTdHJpbmcgLT4gQXR0cmlidXRlIG1zZ1xuY29vcmRzID1cbiAgc3RyaW5nUHJvcGVydHkgXCJjb29yZHNcIlxuXG5cblxuLS0gUkVBTCBTVFVGRlxuXG5cbnstfCBTcGVjaWZpZXMgdGhlIGhvcml6b250YWwgYWxpZ25tZW50IG9mIGEgYGNhcHRpb25gLCBgY29sYCwgYGNvbGdyb3VwYCxcbmBocmAsIGBpZnJhbWVgLCBgaW1nYCwgYHRhYmxlYCwgYHRib2R5YCwgIGB0ZGAsICBgdGZvb3RgLCBgdGhgLCBgdGhlYWRgLCBvclxuYHRyYC5cbi19XG5hbGlnbiA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5hbGlnbiA9XG4gIHN0cmluZ1Byb3BlcnR5IFwiYWxpZ25cIlxuXG5cbnstfCBDb250YWlucyBhIFVSSSB3aGljaCBwb2ludHMgdG8gdGhlIHNvdXJjZSBvZiB0aGUgcXVvdGUgb3IgY2hhbmdlIGluIGFcbmBibG9ja3F1b3RlYCwgYGRlbGAsIGBpbnNgLCBvciBgcWAuXG4tfVxuY2l0ZSA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5jaXRlID1cbiAgc3RyaW5nUHJvcGVydHkgXCJjaXRlXCJcblxuXG5cblxuLS0gTElOS1MgQU5EIEFSRUFTXG5cblxuey18IFRoZSBVUkwgb2YgYSBsaW5rZWQgcmVzb3VyY2UsIHN1Y2ggYXMgYGFgLCBgYXJlYWAsIGBiYXNlYCwgb3IgYGxpbmtgLiAtfVxuaHJlZiA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5ocmVmIHVybCA9XG4gIHN0cmluZ1Byb3BlcnR5IFwiaHJlZlwiIChFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9KYXZhU2NyaXB0VXJpIHVybClcblxuXG57LXwgU3BlY2lmeSB3aGVyZSB0aGUgcmVzdWx0cyBvZiBjbGlja2luZyBhbiBgYWAsIGBhcmVhYCwgYGJhc2VgLCBvciBgZm9ybWBcbnNob3VsZCBhcHBlYXIuIFBvc3NpYmxlIHNwZWNpYWwgdmFsdWVzIGluY2x1ZGU6XG5cbiAgKiBfYmxhbmsgJm1kYXNoOyBhIG5ldyB3aW5kb3cgb3IgdGFiXG4gICogX3NlbGYgJm1kYXNoOyB0aGUgc2FtZSBmcmFtZSAodGhpcyBpcyBkZWZhdWx0KVxuICAqIF9wYXJlbnQgJm1kYXNoOyB0aGUgcGFyZW50IGZyYW1lXG4gICogX3RvcCAmbWRhc2g7IHRoZSBmdWxsIGJvZHkgb2YgdGhlIHdpbmRvd1xuXG5Zb3UgY2FuIGFsc28gZ2l2ZSB0aGUgbmFtZSBvZiBhbnkgYGZyYW1lYCB5b3UgaGF2ZSBjcmVhdGVkLlxuLX1cbnRhcmdldCA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG50YXJnZXQgPVxuICBzdHJpbmdQcm9wZXJ0eSBcInRhcmdldFwiXG5cblxuey18IEluZGljYXRlcyB0aGF0IGNsaWNraW5nIGFuIGBhYCBhbmQgYGFyZWFgIHdpbGwgZG93bmxvYWQgdGhlIHJlc291cmNlXG5kaXJlY3RseS4gVGhlIGBTdHJpbmdgIGFyZ3VtZW50IGRldGVybWlucyB0aGUgbmFtZSBvZiB0aGUgZG93bmxvYWRlZCBmaWxlLlxuU2F5IHRoZSBmaWxlIHlvdSBhcmUgc2VydmluZyBpcyBuYW1lZCBgaGF0cy5qc29uYC5cblxuICAgIGRvd25sb2FkIFwiXCIgICAgICAgICAgICAgICAtLSBoYXRzLmpzb25cbiAgICBkb3dubG9hZCBcIm15LWhhdHMuanNvblwiICAgLS0gbXktaGF0cy5qc29uXG4gICAgZG93bmxvYWQgXCJzbmFrZXMuanNvblwiICAgIC0tIHNuYWtlcy5qc29uXG5cblRoZSBlbXB0eSBgU3RyaW5nYCBzYXlzIHRvIGp1c3QgbmFtZSBpdCB3aGF0ZXZlciBpdCB3YXMgY2FsbGVkIG9uIHRoZSBzZXJ2ZXIuXG4tfVxuZG93bmxvYWQgOiBTdHJpbmcgLT4gQXR0cmlidXRlIG1zZ1xuZG93bmxvYWQgZmlsZU5hbWUgPVxuICBzdHJpbmdQcm9wZXJ0eSBcImRvd25sb2FkXCIgZmlsZU5hbWVcblxuXG57LXwgSW5kaWNhdGVzIHRoYXQgY2xpY2tpbmcgYW4gYGFgIGFuZCBgYXJlYWAgd2lsbCBkb3dubG9hZCB0aGUgcmVzb3VyY2VcbmRpcmVjdGx5LCBhbmQgdGhhdCB0aGUgZG93bmxvYWRlZCByZXNvdXJjZSB3aXRoIGhhdmUgdGhlIGdpdmVuIGZpbGVuYW1lLlxuU28gYGRvd25sb2FkQXMgXCJoYXRzLmpzb25cImAgbWVhbnMgdGhlIHBlcnNvbiBnZXRzIGEgZmlsZSBuYW1lZCBgaGF0cy5qc29uYC5cbi19XG5kb3dubG9hZEFzIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbmRvd25sb2FkQXMgPVxuICBzdHJpbmdQcm9wZXJ0eSBcImRvd25sb2FkXCJcblxuXG57LXwgVHdvLWxldHRlciBsYW5ndWFnZSBjb2RlIG9mIHRoZSBsaW5rZWQgcmVzb3VyY2Ugb2YgYW4gYGFgLCBgYXJlYWAsIG9yIGBsaW5rYC5cbi19XG5ocmVmbGFuZyA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5ocmVmbGFuZyA9XG4gIHN0cmluZ1Byb3BlcnR5IFwiaHJlZmxhbmdcIlxuXG5cbnstfCBTcGVjaWZpZXMgYSBoaW50IG9mIHRoZSB0YXJnZXQgbWVkaWEgb2YgYSBgYWAsIGBhcmVhYCwgYGxpbmtgLCBgc291cmNlYCxcbm9yIGBzdHlsZWAuXG4tfVxubWVkaWEgOiBTdHJpbmcgLT4gQXR0cmlidXRlIG1zZ1xubWVkaWEgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20uYXR0cmlidXRlIFwibWVkaWFcIlxuXG5cbnstfCBTcGVjaWZ5IGEgVVJMIHRvIHNlbmQgYSBzaG9ydCBQT1NUIHJlcXVlc3QgdG8gd2hlbiB0aGUgdXNlciBjbGlja3Mgb24gYW5cbmBhYCBvciBgYXJlYWAuIFVzZWZ1bCBmb3IgbW9uaXRvcmluZyBhbmQgdHJhY2tpbmcuXG4tfVxucGluZyA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5waW5nID1cbiAgc3RyaW5nUHJvcGVydHkgXCJwaW5nXCJcblxuXG57LXwgU3BlY2lmaWVzIHRoZSByZWxhdGlvbnNoaXAgb2YgdGhlIHRhcmdldCBvYmplY3QgdG8gdGhlIGxpbmsgb2JqZWN0LlxuRm9yIGBhYCwgYGFyZWFgLCBgbGlua2AuXG4tfVxucmVsIDogU3RyaW5nIC0+IEF0dHJpYnV0ZSBtc2dcbnJlbCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5hdHRyaWJ1dGUgXCJyZWxcIlxuXG5cblxuLS0gQ1JBWlkgU1RVRkZcblxuXG57LXwgSW5kaWNhdGVzIHRoZSBkYXRlIGFuZCB0aW1lIGFzc29jaWF0ZWQgd2l0aCB0aGUgZWxlbWVudC5cbkZvciBgZGVsYCwgYGluc2AsIGB0aW1lYC5cbi19XG5kYXRldGltZSA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5kYXRldGltZSA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5hdHRyaWJ1dGUgXCJkYXRldGltZVwiXG5cblxuey18IEluZGljYXRlcyB3aGV0aGVyIHRoaXMgZGF0ZSBhbmQgdGltZSBpcyB0aGUgZGF0ZSBvZiB0aGUgbmVhcmVzdCBgYXJ0aWNsZWBcbmFuY2VzdG9yIGVsZW1lbnQuIEZvciBgdGltZWAuXG4tfVxucHViZGF0ZSA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5wdWJkYXRlID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLmF0dHJpYnV0ZSBcInB1YmRhdGVcIlxuXG5cblxuLS0gT1JERVJFRCBMSVNUU1xuXG5cbnstfCBJbmRpY2F0ZXMgd2hldGhlciBhbiBvcmRlcmVkIGxpc3QgYG9sYCBzaG91bGQgYmUgZGlzcGxheWVkIGluIGEgZGVzY2VuZGluZ1xub3JkZXIgaW5zdGVhZCBvZiBhIGFzY2VuZGluZy5cbi19XG5yZXZlcnNlZCA6IEJvb2wgLT4gQXR0cmlidXRlIG1zZ1xucmV2ZXJzZWQgPVxuICBib29sUHJvcGVydHkgXCJyZXZlcnNlZFwiXG5cblxuey18IERlZmluZXMgdGhlIGZpcnN0IG51bWJlciBvZiBhbiBvcmRlcmVkIGxpc3QgaWYgeW91IHdhbnQgaXQgdG8gYmUgc29tZXRoaW5nXG5iZXNpZGVzIDEuXG4tfVxuc3RhcnQgOiBJbnQgLT4gQXR0cmlidXRlIG1zZ1xuc3RhcnQgbiA9XG4gIHN0cmluZ1Byb3BlcnR5IFwic3RhcnRcIiAoU3RyaW5nLmZyb21JbnQgbilcblxuXG5cbi0tIFRBQkxFU1xuXG5cbnstfCBUaGUgY29sc3BhbiBhdHRyaWJ1dGUgZGVmaW5lcyB0aGUgbnVtYmVyIG9mIGNvbHVtbnMgYSBjZWxsIHNob3VsZCBzcGFuLlxuRm9yIGB0ZGAgYW5kIGB0aGAuXG4tfVxuY29sc3BhbiA6IEludCAtPiBBdHRyaWJ1dGUgbXNnXG5jb2xzcGFuIG4gPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20uYXR0cmlidXRlIFwiY29sc3BhblwiIChTdHJpbmcuZnJvbUludCBuKVxuXG5cbnstfCBBIHNwYWNlIHNlcGFyYXRlZCBsaXN0IG9mIGVsZW1lbnQgSURzIGluZGljYXRpbmcgd2hpY2ggYHRoYCBlbGVtZW50cyBhcmVcbmhlYWRlcnMgZm9yIHRoaXMgY2VsbC4gRm9yIGB0ZGAgYW5kIGB0aGAuXG4tfVxuaGVhZGVycyA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5oZWFkZXJzID1cbiAgc3RyaW5nUHJvcGVydHkgXCJoZWFkZXJzXCJcblxuXG57LXwgRGVmaW5lcyB0aGUgbnVtYmVyIG9mIHJvd3MgYSB0YWJsZSBjZWxsIHNob3VsZCBzcGFuIG92ZXIuXG5Gb3IgYHRkYCBhbmQgYHRoYC5cbi19XG5yb3dzcGFuIDogSW50IC0+IEF0dHJpYnV0ZSBtc2dcbnJvd3NwYW4gbiA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5hdHRyaWJ1dGUgXCJyb3dzcGFuXCIgKFN0cmluZy5mcm9tSW50IG4pXG5cblxuey18IFNwZWNpZmllcyB0aGUgc2NvcGUgb2YgYSBoZWFkZXIgY2VsbCBgdGhgLiBQb3NzaWJsZSB2YWx1ZXMgYXJlOiBjb2wsIHJvdyxcbmNvbGdyb3VwLCByb3dncm91cC5cbi19XG5zY29wZSA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5zY29wZSA9XG4gIHN0cmluZ1Byb3BlcnR5IFwic2NvcGVcIlxuXG5cbnstfCBTcGVjaWZpZXMgdGhlIFVSTCBvZiB0aGUgY2FjaGUgbWFuaWZlc3QgZm9yIGFuIGBodG1sYCB0YWcuIC19XG5tYW5pZmVzdCA6IFN0cmluZyAtPiBBdHRyaWJ1dGUgbXNnXG5tYW5pZmVzdCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5hdHRyaWJ1dGUgXCJtYW5pZmVzdFwiXG5cblxuey0tIFRPRE86IG1heWJlIHJlaW50cm9kdWNlIG9uY2UgdGhlcmVcJ3MgYSBiZXR0ZXIgd2F5IHRvIGRpc2FtYmlndWF0ZSBpbXBvcnRzXG57LXwgVGhlIG51bWJlciBvZiBjb2x1bW5zIGEgYGNvbGAgb3IgYGNvbGdyb3VwYCBzaG91bGQgc3Bhbi4gLX1cbnNwYW4gOiBJbnQgLT4gQXR0cmlidXRlIG1zZ1xuc3BhbiBuID1cbiAgICBzdHJpbmdQcm9wZXJ0eSBcInNwYW5cIiAoU3RyaW5nLmZyb21JbnQgbilcbi0tfVxuJ30pKSwKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ0V2ZW50cy5lbG0nLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJEJsb2JOb2RlKAoJCQkJCQkJe3V0Zjg6ICdtb2R1bGUgSHRtbC5FdmVudHMgZXhwb3NpbmdcbiAgKCBvbkNsaWNrLCBvbkRvdWJsZUNsaWNrXG4gICwgb25Nb3VzZURvd24sIG9uTW91c2VVcFxuICAsIG9uTW91c2VFbnRlciwgb25Nb3VzZUxlYXZlXG4gICwgb25Nb3VzZU92ZXIsIG9uTW91c2VPdXRcbiAgLCBvbklucHV0LCBvbkNoZWNrLCBvblN1Ym1pdFxuICAsIG9uQmx1ciwgb25Gb2N1c1xuICAsIG9uLCBzdG9wUHJvcGFnYXRpb25PbiwgcHJldmVudERlZmF1bHRPbiwgY3VzdG9tXG4gICwgdGFyZ2V0VmFsdWUsIHRhcmdldENoZWNrZWQsIGtleUNvZGVcbiAgKVxuXG57LXxcbkl0IGlzIG9mdGVuIGhlbHBmdWwgdG8gY3JlYXRlIGFuIFtDdXN0b20gVHlwZV1bXSBzbyB5b3UgY2FuIGhhdmUgbWFueSBkaWZmZXJlbnQga2luZHNcbm9mIGV2ZW50cyBhcyBzZWVuIGluIHRoZSBbVG9kb01WQ11bXSBleGFtcGxlLlxuXG5bQ3VzdG9tIFR5cGVdOiBodHRwczovL2d1aWRlLmVsbS1sYW5nLm9yZy90eXBlcy9jdXN0b21fdHlwZXMuaHRtbFxuW1RvZG9NVkNdOiBodHRwczovL2dpdGh1Yi5jb20vZXZhbmN6L2VsbS10b2RvbXZjL2Jsb2IvbWFzdGVyL1RvZG8uZWxtXG5cbiMgTW91c2VcbkBkb2NzIG9uQ2xpY2ssIG9uRG91YmxlQ2xpY2ssXG4gICAgICBvbk1vdXNlRG93biwgb25Nb3VzZVVwLFxuICAgICAgb25Nb3VzZUVudGVyLCBvbk1vdXNlTGVhdmUsXG4gICAgICBvbk1vdXNlT3Zlciwgb25Nb3VzZU91dFxuXG4jIEZvcm1zXG5AZG9jcyBvbklucHV0LCBvbkNoZWNrLCBvblN1Ym1pdFxuXG4jIEZvY3VzXG5AZG9jcyBvbkJsdXIsIG9uRm9jdXNcblxuIyBDdXN0b21cbkBkb2NzIG9uLCBzdG9wUHJvcGFnYXRpb25PbiwgcHJldmVudERlZmF1bHRPbiwgY3VzdG9tXG5cbiMjIEN1c3RvbSBEZWNvZGVyc1xuQGRvY3MgdGFyZ2V0VmFsdWUsIHRhcmdldENoZWNrZWQsIGtleUNvZGVcbi19XG5cbmltcG9ydCBIdG1sIGV4cG9zaW5nIChBdHRyaWJ1dGUpXG5pbXBvcnQgSnNvbi5EZWNvZGUgYXMgSnNvblxuaW1wb3J0IFZpcnR1YWxEb21cblxuXG5cbi0tIE1PVVNFIEVWRU5UU1xuXG5cbnstfC19XG5vbkNsaWNrIDogbXNnIC0+IEF0dHJpYnV0ZSBtc2dcbm9uQ2xpY2sgbXNnID1cbiAgb24gXCJjbGlja1wiIChKc29uLnN1Y2NlZWQgbXNnKVxuXG5cbnstfC19XG5vbkRvdWJsZUNsaWNrIDogbXNnIC0+IEF0dHJpYnV0ZSBtc2dcbm9uRG91YmxlQ2xpY2sgbXNnID1cbiAgb24gXCJkYmxjbGlja1wiIChKc29uLnN1Y2NlZWQgbXNnKVxuXG5cbnstfC19XG5vbk1vdXNlRG93biA6IG1zZyAtPiBBdHRyaWJ1dGUgbXNnXG5vbk1vdXNlRG93biBtc2cgPVxuICBvbiBcIm1vdXNlZG93blwiIChKc29uLnN1Y2NlZWQgbXNnKVxuXG5cbnstfC19XG5vbk1vdXNlVXAgOiBtc2cgLT4gQXR0cmlidXRlIG1zZ1xub25Nb3VzZVVwIG1zZyA9XG4gIG9uIFwibW91c2V1cFwiIChKc29uLnN1Y2NlZWQgbXNnKVxuXG5cbnstfC19XG5vbk1vdXNlRW50ZXIgOiBtc2cgLT4gQXR0cmlidXRlIG1zZ1xub25Nb3VzZUVudGVyIG1zZyA9XG4gIG9uIFwibW91c2VlbnRlclwiIChKc29uLnN1Y2NlZWQgbXNnKVxuXG5cbnstfC19XG5vbk1vdXNlTGVhdmUgOiBtc2cgLT4gQXR0cmlidXRlIG1zZ1xub25Nb3VzZUxlYXZlIG1zZyA9XG4gIG9uIFwibW91c2VsZWF2ZVwiIChKc29uLnN1Y2NlZWQgbXNnKVxuXG5cbnstfC19XG5vbk1vdXNlT3ZlciA6IG1zZyAtPiBBdHRyaWJ1dGUgbXNnXG5vbk1vdXNlT3ZlciBtc2cgPVxuICBvbiBcIm1vdXNlb3ZlclwiIChKc29uLnN1Y2NlZWQgbXNnKVxuXG5cbnstfC19XG5vbk1vdXNlT3V0IDogbXNnIC0+IEF0dHJpYnV0ZSBtc2dcbm9uTW91c2VPdXQgbXNnID1cbiAgb24gXCJtb3VzZW91dFwiIChKc29uLnN1Y2NlZWQgbXNnKVxuXG5cblxuLS0gRk9STSBFVkVOVFNcblxuXG57LXwgRGV0ZWN0IFtpbnB1dF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvRXZlbnRzL2lucHV0KVxuZXZlbnRzIGZvciB0aGluZ3MgbGlrZSB0ZXh0IGZpZWxkcyBvciB0ZXh0IGFyZWFzLlxuXG5Gb3IgbW9yZSBkZXRhaWxzIG9uIGhvdyBgb25JbnB1dGAgd29ya3MsIGNoZWNrIG91dCBbYHRhcmdldFZhbHVlYF0oI3RhcmdldFZhbHVlKS5cblxuKipOb3RlIDE6KiogSXQgZ3JhYnMgdGhlICoqc3RyaW5nKiogdmFsdWUgYXQgYGV2ZW50LnRhcmdldC52YWx1ZWAsIHNvIGl0IHdpbGxcbm5vdCB3b3JrIGlmIHlvdSBuZWVkIHNvbWUgb3RoZXIgaW5mb3JtYXRpb24uIEZvciBleGFtcGxlLCBpZiB5b3Ugd2FudCB0byB0cmFja1xuaW5wdXRzIG9uIGEgcmFuZ2Ugc2xpZGVyLCBtYWtlIGEgY3VzdG9tIGhhbmRsZXIgd2l0aCBbYG9uYF0oI29uKS5cblxuKipOb3RlIDI6KiogSXQgdXNlcyBgc3RvcFByb3BhZ2F0aW9uT25gIGludGVybmFsbHkgdG8gYWx3YXlzIHN0b3AgcHJvcGFnYXRpb25cbm9mIHRoZSBldmVudC4gVGhpcyBpcyBpbXBvcnRhbnQgZm9yIGNvbXBsaWNhdGVkIHJlYXNvbnMgZXhwbGFpbmVkIFtoZXJlXVsxXSBhbmRcbltoZXJlXVsyXS5cblxuWzFdOiAvcGFja2FnZXMvZWxtL3ZpcnR1YWwtZG9tL2xhdGVzdC9WaXJ0dWFsRG9tI0hhbmRsZXJcblsyXTogaHR0cHM6Ly9naXRodWIuY29tL2VsbS92aXJ0dWFsLWRvbS9pc3N1ZXMvMTI1XG4tfVxub25JbnB1dCA6IChTdHJpbmcgLT4gbXNnKSAtPiBBdHRyaWJ1dGUgbXNnXG5vbklucHV0IHRhZ2dlciA9XG4gIHN0b3BQcm9wYWdhdGlvbk9uIFwiaW5wdXRcIiAoSnNvbi5tYXAgYWx3YXlzU3RvcCAoSnNvbi5tYXAgdGFnZ2VyIHRhcmdldFZhbHVlKSlcblxuXG5hbHdheXNTdG9wIDogYSAtPiAoYSwgQm9vbClcbmFsd2F5c1N0b3AgeCA9XG4gICh4LCBUcnVlKVxuXG5cbnstfCBEZXRlY3QgW2NoYW5nZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvRXZlbnRzL2NoYW5nZSlcbmV2ZW50cyBvbiBjaGVja2JveGVzLiBJdCB3aWxsIGdyYWIgdGhlIGJvb2xlYW4gdmFsdWUgZnJvbSBgZXZlbnQudGFyZ2V0LmNoZWNrZWRgXG5vbiBhbnkgaW5wdXQgZXZlbnQuXG5cbkNoZWNrIG91dCBbYHRhcmdldENoZWNrZWRgXSgjdGFyZ2V0Q2hlY2tlZCkgZm9yIG1vcmUgZGV0YWlscyBvbiBob3cgdGhpcyB3b3Jrcy5cbi19XG5vbkNoZWNrIDogKEJvb2wgLT4gbXNnKSAtPiBBdHRyaWJ1dGUgbXNnXG5vbkNoZWNrIHRhZ2dlciA9XG4gIG9uIFwiY2hhbmdlXCIgKEpzb24ubWFwIHRhZ2dlciB0YXJnZXRDaGVja2VkKVxuXG5cbnstfCBEZXRlY3QgYSBbc3VibWl0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9FdmVudHMvc3VibWl0KVxuZXZlbnQgd2l0aCBbYHByZXZlbnREZWZhdWx0YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0V2ZW50L3ByZXZlbnREZWZhdWx0KVxuaW4gb3JkZXIgdG8gcHJldmVudCB0aGUgZm9ybSBmcm9tIGNoYW5naW5nIHRoZSBwYWdl4oCZcyBsb2NhdGlvbi4gSWYgeW91IG5lZWRcbmRpZmZlcmVudCBiZWhhdmlvciwgY3JlYXRlIGEgY3VzdG9tIGV2ZW50IGhhbmRsZXIuXG4tfVxub25TdWJtaXQgOiBtc2cgLT4gQXR0cmlidXRlIG1zZ1xub25TdWJtaXQgbXNnID1cbiAgcHJldmVudERlZmF1bHRPbiBcInN1Ym1pdFwiIChKc29uLm1hcCBhbHdheXNQcmV2ZW50RGVmYXVsdCAoSnNvbi5zdWNjZWVkIG1zZykpXG5cblxuYWx3YXlzUHJldmVudERlZmF1bHQgOiBtc2cgLT4gKCBtc2csIEJvb2wgKVxuYWx3YXlzUHJldmVudERlZmF1bHQgbXNnID1cbiAgKCBtc2csIFRydWUgKVxuXG5cblxuLS0gRk9DVVMgRVZFTlRTXG5cblxuey18LX1cbm9uQmx1ciA6IG1zZyAtPiBBdHRyaWJ1dGUgbXNnXG5vbkJsdXIgbXNnID1cbiAgb24gXCJibHVyXCIgKEpzb24uc3VjY2VlZCBtc2cpXG5cblxuey18LX1cbm9uRm9jdXMgOiBtc2cgLT4gQXR0cmlidXRlIG1zZ1xub25Gb2N1cyBtc2cgPVxuICBvbiBcImZvY3VzXCIgKEpzb24uc3VjY2VlZCBtc2cpXG5cblxuXG4tLSBDVVNUT00gRVZFTlRTXG5cblxuey18IENyZWF0ZSBhIGN1c3RvbSBldmVudCBsaXN0ZW5lci4gTm9ybWFsbHkgdGhpcyB3aWxsIG5vdCBiZSBuZWNlc3NhcnksIGJ1dFxueW91IGhhdmUgdGhlIHBvd2VyISBIZXJlIGlzIGhvdyBgb25DbGlja2AgaXMgZGVmaW5lZCBmb3IgZXhhbXBsZTpcblxuICAgIGltcG9ydCBKc29uLkRlY29kZSBhcyBEZWNvZGVcblxuICAgIG9uQ2xpY2sgOiBtc2cgLT4gQXR0cmlidXRlIG1zZ1xuICAgIG9uQ2xpY2sgbWVzc2FnZSA9XG4gICAgICBvbiBcImNsaWNrXCIgKERlY29kZS5zdWNjZWVkIG1lc3NhZ2UpXG5cblRoZSBmaXJzdCBhcmd1bWVudCBpcyB0aGUgZXZlbnQgbmFtZSBpbiB0aGUgc2FtZSBmb3JtYXQgYXMgd2l0aCBKYXZhU2NyaXB0XCdzXG5bYGFkZEV2ZW50TGlzdGVuZXJgXVthRUxdIGZ1bmN0aW9uLlxuXG5UaGUgc2Vjb25kIGFyZ3VtZW50IGlzIGEgSlNPTiBkZWNvZGVyLiBSZWFkIG1vcmUgYWJvdXQgdGhlc2UgW2hlcmVdW2RlY29kZXJdLlxuV2hlbiBhbiBldmVudCBvY2N1cnMsIHRoZSBkZWNvZGVyIHRyaWVzIHRvIHR1cm4gdGhlIGV2ZW50IG9iamVjdCBpbnRvIGFuIEVsbVxudmFsdWUuIElmIHN1Y2Nlc3NmdWwsIHRoZSB2YWx1ZSBpcyByb3V0ZWQgdG8geW91ciBgdXBkYXRlYCBmdW5jdGlvbi4gSW4gdGhlXG5jYXNlIG9mIGBvbkNsaWNrYCB3ZSBhbHdheXMganVzdCBzdWNjZWVkIHdpdGggdGhlIGdpdmVuIGBtZXNzYWdlYC5cblxuSWYgdGhpcyBpcyBjb25mdXNpbmcsIHdvcmsgdGhyb3VnaCB0aGUgW0VsbSBBcmNoaXRlY3R1cmUgVHV0b3JpYWxdW3R1dG9yaWFsXS5cbkl0IHJlYWxseSBoZWxwcyFcblxuW2FFTF06IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FdmVudFRhcmdldC9hZGRFdmVudExpc3RlbmVyXG5bZGVjb2Rlcl06IC9wYWNrYWdlcy9lbG0vanNvbi9sYXRlc3QvSnNvbi1EZWNvZGVcblt0dXRvcmlhbF06IGh0dHBzOi8vZ2l0aHViLmNvbS9ldmFuY3ovZWxtLWFyY2hpdGVjdHVyZS10dXRvcmlhbC9cblxuKipOb3RlOioqIFRoaXMgY3JlYXRlcyBhIFtwYXNzaXZlXVtdIGV2ZW50IGxpc3RlbmVyLCBlbmFibGluZyBvcHRpbWl6YXRpb25zIGZvclxudG91Y2gsIHNjcm9sbCwgYW5kIHdoZWVsIGV2ZW50cyBpbiBzb21lIGJyb3dzZXJzLlxuXG5bcGFzc2l2ZV06IGh0dHBzOi8vZ2l0aHViLmNvbS9XSUNHL0V2ZW50TGlzdGVuZXJPcHRpb25zL2Jsb2IvZ2gtcGFnZXMvZXhwbGFpbmVyLm1kXG4tfVxub24gOiBTdHJpbmcgLT4gSnNvbi5EZWNvZGVyIG1zZyAtPiBBdHRyaWJ1dGUgbXNnXG5vbiBldmVudCBkZWNvZGVyID1cbiAgVmlydHVhbERvbS5vbiBldmVudCAoVmlydHVhbERvbS5Ob3JtYWwgZGVjb2RlcilcblxuXG57LXwgQ3JlYXRlIGFuIGV2ZW50IGxpc3RlbmVyIHRoYXQgbWF5IFtgc3RvcFByb3BhZ2F0aW9uYF1bc3RvcF0uIFlvdXIgZGVjb2RlclxubXVzdCBwcm9kdWNlIGEgbWVzc2FnZSBhbmQgYSBgQm9vbGAgdGhhdCBkZWNpZGVzIGlmIGBzdG9wUHJvcGFnYXRpb25gIHNob3VsZFxuYmUgY2FsbGVkLlxuXG5bc3RvcF06IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FdmVudC9zdG9wUHJvcGFnYXRpb25cblxuKipOb3RlOioqIFRoaXMgY3JlYXRlcyBhIFtwYXNzaXZlXVtdIGV2ZW50IGxpc3RlbmVyLCBlbmFibGluZyBvcHRpbWl6YXRpb25zIGZvclxudG91Y2gsIHNjcm9sbCwgYW5kIHdoZWVsIGV2ZW50cyBpbiBzb21lIGJyb3dzZXJzLlxuXG5bcGFzc2l2ZV06IGh0dHBzOi8vZ2l0aHViLmNvbS9XSUNHL0V2ZW50TGlzdGVuZXJPcHRpb25zL2Jsb2IvZ2gtcGFnZXMvZXhwbGFpbmVyLm1kXG4tfVxuc3RvcFByb3BhZ2F0aW9uT24gOiBTdHJpbmcgLT4gSnNvbi5EZWNvZGVyIChtc2csIEJvb2wpIC0+IEF0dHJpYnV0ZSBtc2dcbnN0b3BQcm9wYWdhdGlvbk9uIGV2ZW50IGRlY29kZXIgPVxuICBWaXJ0dWFsRG9tLm9uIGV2ZW50IChWaXJ0dWFsRG9tLk1heVN0b3BQcm9wYWdhdGlvbiBkZWNvZGVyKVxuXG5cbnstfCBDcmVhdGUgYW4gZXZlbnQgbGlzdGVuZXIgdGhhdCBtYXkgW2BwcmV2ZW50RGVmYXVsdGBdW3ByZXZlbnRdLiBZb3VyIGRlY29kZXJcbm11c3QgcHJvZHVjZSBhIG1lc3NhZ2UgYW5kIGEgYEJvb2xgIHRoYXQgZGVjaWRlcyBpZiBgcHJldmVudERlZmF1bHRgIHNob3VsZFxuYmUgY2FsbGVkLlxuXG5Gb3IgZXhhbXBsZSwgdGhlIGBvblN1Ym1pdGAgZnVuY3Rpb24gaW4gdGhpcyBsaWJyYXJ5ICphbHdheXMqIHByZXZlbnRzIHRoZVxuZGVmYXVsdCBiZWhhdmlvcjpcblxuW3ByZXZlbnRdOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRXZlbnQvcHJldmVudERlZmF1bHRcblxuICAgIG9uU3VibWl0IDogbXNnIC0+IEF0dHJpYnV0ZSBtc2dcbiAgICBvblN1Ym1pdCBtc2cgPVxuICAgICAgcHJldmVudERlZmF1bHRPbiBcInN1Ym1pdFwiIChKc29uLm1hcCBhbHdheXNQcmV2ZW50RGVmYXVsdCAoSnNvbi5zdWNjZWVkIG1zZykpXG5cbiAgICBhbHdheXNQcmV2ZW50RGVmYXVsdCA6IG1zZyAtPiAoIG1zZywgQm9vbCApXG4gICAgYWx3YXlzUHJldmVudERlZmF1bHQgbXNnID1cbiAgICAgICggbXNnLCBUcnVlIClcbi19XG5wcmV2ZW50RGVmYXVsdE9uIDogU3RyaW5nIC0+IEpzb24uRGVjb2RlciAobXNnLCBCb29sKSAtPiBBdHRyaWJ1dGUgbXNnXG5wcmV2ZW50RGVmYXVsdE9uIGV2ZW50IGRlY29kZXIgPVxuICBWaXJ0dWFsRG9tLm9uIGV2ZW50IChWaXJ0dWFsRG9tLk1heVByZXZlbnREZWZhdWx0IGRlY29kZXIpXG5cblxuey18IENyZWF0ZSBhbiBldmVudCBsaXN0ZW5lciB0aGF0IG1heSBbYHN0b3BQcm9wYWdhdGlvbmBdW3N0b3BdIG9yXG5bYHByZXZlbnREZWZhdWx0YF1bcHJldmVudF0uXG5cbltzdG9wXTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0V2ZW50L3N0b3BQcm9wYWdhdGlvblxuW3ByZXZlbnRdOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRXZlbnQvcHJldmVudERlZmF1bHRcbltoYW5kbGVyXTogaHR0cHM6Ly9wYWNrYWdlLmVsbS1sYW5nLm9yZy9wYWNrYWdlcy9lbG0vdmlydHVhbC1kb20vbGF0ZXN0L1ZpcnR1YWxEb20jSGFuZGxlclxuXG4qKk5vdGU6KiogQ2hlY2sgb3V0IHRoZSBsb3dlci1sZXZlbCBldmVudCBBUEkgaW4gYGVsbS92aXJ0dWFsLWRvbWAgZm9yIG1vcmVcbmluZm9ybWF0aW9uIG9uIGV4YWN0bHkgaG93IGV2ZW50cyB3b3JrLCBlc3BlY2lhbGx5IHRoZSBbYEhhbmRsZXJgXVtoYW5kbGVyXVxuZG9jcy5cbi19XG5jdXN0b20gOiBTdHJpbmcgLT4gSnNvbi5EZWNvZGVyIHsgbWVzc2FnZSA6IG1zZywgc3RvcFByb3BhZ2F0aW9uIDogQm9vbCwgcHJldmVudERlZmF1bHQgOiBCb29sIH0gLT4gQXR0cmlidXRlIG1zZ1xuY3VzdG9tIGV2ZW50IGRlY29kZXIgPVxuICBWaXJ0dWFsRG9tLm9uIGV2ZW50IChWaXJ0dWFsRG9tLkN1c3RvbSBkZWNvZGVyKVxuXG5cblxuLS0gQ09NTU9OIERFQ09ERVJTXG5cblxuey18IEEgYEpzb24uRGVjb2RlcmAgZm9yIGdyYWJiaW5nIGBldmVudC50YXJnZXQudmFsdWVgLiBXZSB1c2UgdGhpcyB0byBkZWZpbmVcbmBvbklucHV0YCBhcyBmb2xsb3dzOlxuXG4gICAgaW1wb3J0IEpzb24uRGVjb2RlIGFzIEpzb25cblxuICAgIG9uSW5wdXQgOiAoU3RyaW5nIC0+IG1zZykgLT4gQXR0cmlidXRlIG1zZ1xuICAgIG9uSW5wdXQgdGFnZ2VyID1cbiAgICAgIHN0b3BQcm9wYWdhdGlvbk9uIFwiaW5wdXRcIiA8fFxuICAgICAgICBKc29uLm1hcCBhbHdheXNTdG9wIChKc29uLm1hcCB0YWdnZXIgdGFyZ2V0VmFsdWUpXG5cbiAgICBhbHdheXNTdG9wIDogYSAtPiAoYSwgQm9vbClcbiAgICBhbHdheXNTdG9wIHggPVxuICAgICAgKHgsIFRydWUpXG5cbllvdSBwcm9iYWJseSB3aWxsIG5ldmVyIG5lZWQgdGhpcywgYnV0IGhvcGVmdWxseSBpdCBnaXZlcyBzb21lIGluc2lnaHRzIGludG9cbmhvdyB0byBtYWtlIGN1c3RvbSBldmVudCBoYW5kbGVycy5cbi19XG50YXJnZXRWYWx1ZSA6IEpzb24uRGVjb2RlciBTdHJpbmdcbnRhcmdldFZhbHVlID1cbiAgSnNvbi5hdCBbXCJ0YXJnZXRcIiwgXCJ2YWx1ZVwiXSBKc29uLnN0cmluZ1xuXG5cbnstfCBBIGBKc29uLkRlY29kZXJgIGZvciBncmFiYmluZyBgZXZlbnQudGFyZ2V0LmNoZWNrZWRgLiBXZSB1c2UgdGhpcyB0byBkZWZpbmVcbmBvbkNoZWNrYCBhcyBmb2xsb3dzOlxuXG4gICAgaW1wb3J0IEpzb24uRGVjb2RlIGFzIEpzb25cblxuICAgIG9uQ2hlY2sgOiAoQm9vbCAtPiBtc2cpIC0+IEF0dHJpYnV0ZSBtc2dcbiAgICBvbkNoZWNrIHRhZ2dlciA9XG4gICAgICBvbiBcImlucHV0XCIgKEpzb24ubWFwIHRhZ2dlciB0YXJnZXRDaGVja2VkKVxuLX1cbnRhcmdldENoZWNrZWQgOiBKc29uLkRlY29kZXIgQm9vbFxudGFyZ2V0Q2hlY2tlZCA9XG4gIEpzb24uYXQgW1widGFyZ2V0XCIsIFwiY2hlY2tlZFwiXSBKc29uLmJvb2xcblxuXG57LXwgQSBgSnNvbi5EZWNvZGVyYCBmb3IgZ3JhYmJpbmcgYGV2ZW50LmtleUNvZGVgLiBUaGlzIGhlbHBzIHlvdSBkZWZpbmVcbmtleWJvYXJkIGxpc3RlbmVycyBsaWtlIHRoaXM6XG5cbiAgICBpbXBvcnQgSnNvbi5EZWNvZGUgYXMgSnNvblxuXG4gICAgb25LZXlVcCA6IChJbnQgLT4gbXNnKSAtPiBBdHRyaWJ1dGUgbXNnXG4gICAgb25LZXlVcCB0YWdnZXIgPVxuICAgICAgb24gXCJrZXl1cFwiIChKc29uLm1hcCB0YWdnZXIga2V5Q29kZSlcblxuKipOb3RlOioqIEl0IGxvb2tzIGxpa2UgdGhlIHNwZWMgaXMgbW92aW5nIGF3YXkgZnJvbSBgZXZlbnQua2V5Q29kZWAgYW5kXG50b3dhcmRzIGBldmVudC5rZXlgLiBPbmNlIHRoaXMgaXMgc3VwcG9ydGVkIGluIG1vcmUgYnJvd3NlcnMsIHdlIG1heSBhZGRcbmhlbHBlcnMgaGVyZSBmb3IgYG9uS2V5VXBgLCBgb25LZXlEb3duYCwgYG9uS2V5UHJlc3NgLCBldGMuXG4tfVxua2V5Q29kZSA6IEpzb24uRGVjb2RlciBJbnRcbmtleUNvZGUgPVxuICBKc29uLmZpZWxkIFwia2V5Q29kZVwiIEpzb24uaW50XG4nfSkpLAoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknS2V5ZWQuZWxtJywKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRCbG9iTm9kZSgKCQkJCQkJCXt1dGY4OiAnbW9kdWxlIEh0bWwuS2V5ZWQgZXhwb3NpbmdcbiAgKCBub2RlXG4gICwgb2xcbiAgLCB1bFxuICApXG57LXwgQSBrZXllZCBub2RlIGhlbHBzIG9wdGltaXplIGNhc2VzIHdoZXJlIGNoaWxkcmVuIGFyZSBnZXR0aW5nIGFkZGVkLCBtb3ZlZCxcbnJlbW92ZWQsIGV0Yy4gQ29tbW9uIGV4YW1wbGVzIGluY2x1ZGU6XG5cbiAgLSBUaGUgdXNlciBjYW4gZGVsZXRlIGl0ZW1zIGZyb20gYSBsaXN0LlxuICAtIFRoZSB1c2VyIGNhbiBjcmVhdGUgbmV3IGl0ZW1zIGluIGEgbGlzdC5cbiAgLSBZb3UgY2FuIHNvcnQgYSBsaXN0IGJhc2VkIG9uIG5hbWUgb3IgZGF0ZSBvciB3aGF0ZXZlci5cblxuV2hlbiB5b3UgdXNlIGEga2V5ZWQgbm9kZSwgZXZlcnkgY2hpbGQgaXMgcGFpcmVkIHdpdGggYSBzdHJpbmcgaWRlbnRpZmllci4gVGhpc1xubWFrZXMgaXQgcG9zc2libGUgZm9yIHRoZSB1bmRlcmx5aW5nIGRpZmZpbmcgYWxnb3JpdGhtIHRvIHJldXNlIG5vZGVzIG1vcmVcbmVmZmljaWVudGx5LlxuXG4jIEtleWVkIE5vZGVzXG5AZG9jcyBub2RlXG5cbiMgQ29tbW9ubHkgS2V5ZWQgTm9kZXNcbkBkb2NzIG9sLCB1bFxuLX1cblxuXG5pbXBvcnQgSHRtbCBleHBvc2luZyAoQXR0cmlidXRlLCBIdG1sKVxuaW1wb3J0IFZpcnR1YWxEb21cblxuXG57LXwgV29ya3MganVzdCBsaWtlIGBIdG1sLm5vZGVgLCBidXQgeW91IGFkZCBhIHVuaXF1ZSBpZGVudGlmaWVyIHRvIGVhY2ggY2hpbGRcbm5vZGUuIFlvdSB3YW50IHRoaXMgd2hlbiB5b3UgaGF2ZSBhIGxpc3Qgb2Ygbm9kZXMgdGhhdCBpcyBjaGFuZ2luZzogYWRkaW5nXG5ub2RlcywgcmVtb3Zpbmcgbm9kZXMsIGV0Yy4gSW4gdGhlc2UgY2FzZXMsIHRoZSB1bmlxdWUgaWRlbnRpZmllcnMgaGVscCBtYWtlXG50aGUgRE9NIG1vZGlmaWNhdGlvbnMgbW9yZSBlZmZpY2llbnQuXG4tfVxubm9kZSA6IFN0cmluZyAtPiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0ICggU3RyaW5nLCBIdG1sIG1zZyApIC0+IEh0bWwgbXNnXG5ub2RlID1cbiAgVmlydHVhbERvbS5rZXllZE5vZGVcblxuXG57LXwtfVxub2wgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0ICggU3RyaW5nLCBIdG1sIG1zZyApIC0+IEh0bWwgbXNnXG5vbCA9XG4gIG5vZGUgXCJvbFwiXG5cblxuey18LX1cbnVsIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoIFN0cmluZywgSHRtbCBtc2cgKSAtPiBIdG1sIG1zZ1xudWwgPVxuICBub2RlIFwidWxcIlxuJ30pKSwKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ0xhenkuZWxtJywKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRCbG9iTm9kZSgKCQkJCQkJCXt1dGY4OiAnbW9kdWxlIEh0bWwuTGF6eSBleHBvc2luZ1xuICAoIGxhenksIGxhenkyLCBsYXp5MywgbGF6eTQsIGxhenk1LCBsYXp5NiwgbGF6eTcsIGxhenk4XG4gIClcblxuey18IFNpbmNlIGFsbCBFbG0gZnVuY3Rpb25zIGFyZSBwdXJlIHdlIGhhdmUgYSBndWFyYW50ZWUgdGhhdCB0aGUgc2FtZSBpbnB1dFxud2lsbCBhbHdheXMgcmVzdWx0IGluIHRoZSBzYW1lIG91dHB1dC4gVGhpcyBtb2R1bGUgZ2l2ZXMgdXMgdG9vbHMgdG8gYmUgbGF6eVxuYWJvdXQgYnVpbGRpbmcgYEh0bWxgIHRoYXQgdXRpbGl6ZSB0aGlzIGZhY3QuXG5cblJhdGhlciB0aGFuIGltbWVkaWF0ZWx5IGFwcGx5aW5nIGZ1bmN0aW9ucyB0byB0aGVpciBhcmd1bWVudHMsIHRoZSBgbGF6eWBcbmZ1bmN0aW9ucyBqdXN0IGJ1bmRsZSB0aGUgZnVuY3Rpb24gYW5kIGFyZ3VtZW50cyB1cCBmb3IgbGF0ZXIuIFdoZW4gZGlmZmluZ1xudGhlIG9sZCBhbmQgbmV3IHZpcnR1YWwgRE9NLCBpdCBjaGVja3MgdG8gc2VlIGlmIGFsbCB0aGUgYXJndW1lbnRzIGFyZSBlcXVhbFxuYnkgcmVmZXJlbmNlLiBJZiBzbywgaXQgc2tpcHMgY2FsbGluZyB0aGUgZnVuY3Rpb24hXG5cblRoaXMgaXMgYSByZWFsbHkgY2hlYXAgdGVzdCBhbmQgb2Z0ZW4gbWFrZXMgdGhpbmdzIGEgbG90IGZhc3RlciwgYnV0IGRlZmluaXRlbHlcbmJlbmNobWFyayB0byBiZSBzdXJlIVxuXG5AZG9jcyBsYXp5LCBsYXp5MiwgbGF6eTMsIGxhenk0LCBsYXp5NSwgbGF6eTYsIGxhenk3LCBsYXp5OFxuXG4tfVxuXG5pbXBvcnQgSHRtbCBleHBvc2luZyAoSHRtbClcbmltcG9ydCBWaXJ0dWFsRG9tXG5cblxuey18IEEgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uIHRoYXQgZGVsYXlzIHRoZSBidWlsZGluZyBvZiB2aXJ0dWFsIERPTSBub2Rlcy5cblxuQ2FsbGluZyBgKHZpZXcgbW9kZWwpYCB3aWxsIGRlZmluaXRlbHkgYnVpbGQgc29tZSB2aXJ0dWFsIERPTSwgcGVyaGFwcyBhIGxvdCBvZlxuaXQuIENhbGxpbmcgYChsYXp5IHZpZXcgbW9kZWwpYCBkZWxheXMgdGhlIGNhbGwgdW50aWwgbGF0ZXIuIER1cmluZyBkaWZmaW5nLCB3ZVxuY2FuIGNoZWNrIHRvIHNlZSBpZiBgbW9kZWxgIGlzIHJlZmVyZW50aWFsbHkgZXF1YWwgdG8gdGhlIHByZXZpb3VzIHZhbHVlIHVzZWQsXG5hbmQgaWYgc28sIHdlIGp1c3Qgc3RvcC4gTm8gbmVlZCB0byBidWlsZCB1cCB0aGUgdHJlZSBzdHJ1Y3R1cmUgYW5kIGRpZmYgaXQsXG53ZSBrbm93IGlmIHRoZSBpbnB1dCB0byBgdmlld2AgaXMgdGhlIHNhbWUsIHRoZSBvdXRwdXQgbXVzdCBiZSB0aGUgc2FtZSFcbi19XG5sYXp5IDogKGEgLT4gSHRtbCBtc2cpIC0+IGEgLT4gSHRtbCBtc2dcbmxhenkgPVxuICBWaXJ0dWFsRG9tLmxhenlcblxuXG57LXwgU2FtZSBhcyBgbGF6eWAgYnV0IGNoZWNrcyBvbiB0d28gYXJndW1lbnRzLlxuLX1cbmxhenkyIDogKGEgLT4gYiAtPiBIdG1sIG1zZykgLT4gYSAtPiBiIC0+IEh0bWwgbXNnXG5sYXp5MiA9XG4gIFZpcnR1YWxEb20ubGF6eTJcblxuXG57LXwgU2FtZSBhcyBgbGF6eWAgYnV0IGNoZWNrcyBvbiB0aHJlZSBhcmd1bWVudHMuXG4tfVxubGF6eTMgOiAoYSAtPiBiIC0+IGMgLT4gSHRtbCBtc2cpIC0+IGEgLT4gYiAtPiBjIC0+IEh0bWwgbXNnXG5sYXp5MyA9XG4gIFZpcnR1YWxEb20ubGF6eTNcblxuXG57LXwgU2FtZSBhcyBgbGF6eWAgYnV0IGNoZWNrcyBvbiBmb3VyIGFyZ3VtZW50cy5cbi19XG5sYXp5NCA6IChhIC0+IGIgLT4gYyAtPiBkIC0+IEh0bWwgbXNnKSAtPiBhIC0+IGIgLT4gYyAtPiBkIC0+IEh0bWwgbXNnXG5sYXp5NCA9XG4gIFZpcnR1YWxEb20ubGF6eTRcblxuXG57LXwgU2FtZSBhcyBgbGF6eWAgYnV0IGNoZWNrcyBvbiBmaXZlIGFyZ3VtZW50cy5cbi19XG5sYXp5NSA6IChhIC0+IGIgLT4gYyAtPiBkIC0+IGUgLT4gSHRtbCBtc2cpIC0+IGEgLT4gYiAtPiBjIC0+IGQgLT4gZSAtPiBIdG1sIG1zZ1xubGF6eTUgPVxuICBWaXJ0dWFsRG9tLmxhenk1XG5cblxuey18IFNhbWUgYXMgYGxhenlgIGJ1dCBjaGVja3Mgb24gc2l4IGFyZ3VtZW50cy5cbi19XG5sYXp5NiA6IChhIC0+IGIgLT4gYyAtPiBkIC0+IGUgLT4gZiAtPiBIdG1sIG1zZykgLT4gYSAtPiBiIC0+IGMgLT4gZCAtPiBlIC0+IGYgLT4gSHRtbCBtc2dcbmxhenk2ID1cbiAgVmlydHVhbERvbS5sYXp5NlxuXG5cbnstfCBTYW1lIGFzIGBsYXp5YCBidXQgY2hlY2tzIG9uIHNldmVuIGFyZ3VtZW50cy5cbi19XG5sYXp5NyA6IChhIC0+IGIgLT4gYyAtPiBkIC0+IGUgLT4gZiAtPiBnIC0+IEh0bWwgbXNnKSAtPiBhIC0+IGIgLT4gYyAtPiBkIC0+IGUgLT4gZiAtPiBnIC0+IEh0bWwgbXNnXG5sYXp5NyA9XG4gIFZpcnR1YWxEb20ubGF6eTdcblxuXG57LXwgU2FtZSBhcyBgbGF6eWAgYnV0IGNoZWNrcyBvbiBlaWdodCBhcmd1bWVudHMuXG4tfVxubGF6eTggOiAoYSAtPiBiIC0+IGMgLT4gZCAtPiBlIC0+IGYgLT4gZyAtPiBoIC0+IEh0bWwgbXNnKSAtPiBhIC0+IGIgLT4gYyAtPiBkIC0+IGUgLT4gZiAtPiBnIC0+IGggLT4gSHRtbCBtc2dcbmxhenk4ID1cbiAgVmlydHVhbERvbS5sYXp5OFxuJ30pKQoJCQkJCV0pKSksCgkJCV9VdGlsc19UdXBsZTIoCgkJCSdIdG1sLmVsbScsCgkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkQmxvYk5vZGUoCgkJCQl7dXRmODogJ21vZHVsZSBIdG1sIGV4cG9zaW5nXG4gICggSHRtbCwgQXR0cmlidXRlXG4gICwgdGV4dCwgbm9kZSwgbWFwXG4gICwgaDEsIGgyLCBoMywgaDQsIGg1LCBoNlxuICAsIGRpdiwgcCwgaHIsIHByZSwgYmxvY2txdW90ZVxuICAsIHNwYW4sIGEsIGNvZGUsIGVtLCBzdHJvbmcsIGksIGIsIHUsIHN1Yiwgc3VwLCBiclxuICAsIG9sLCB1bCwgbGksIGRsLCBkdCwgZGRcbiAgLCBpbWcsIGlmcmFtZSwgY2FudmFzLCBtYXRoXG4gICwgZm9ybSwgaW5wdXQsIHRleHRhcmVhLCBidXR0b24sIHNlbGVjdCwgb3B0aW9uXG4gICwgc2VjdGlvbiwgbmF2LCBhcnRpY2xlLCBhc2lkZSwgaGVhZGVyLCBmb290ZXIsIGFkZHJlc3MsIG1haW5fXG4gICwgZmlndXJlLCBmaWdjYXB0aW9uXG4gICwgdGFibGUsIGNhcHRpb24sIGNvbGdyb3VwLCBjb2wsIHRib2R5LCB0aGVhZCwgdGZvb3QsIHRyLCB0ZCwgdGhcbiAgLCBmaWVsZHNldCwgbGVnZW5kLCBsYWJlbCwgZGF0YWxpc3QsIG9wdGdyb3VwLCBvdXRwdXQsIHByb2dyZXNzLCBtZXRlclxuICAsIGF1ZGlvLCB2aWRlbywgc291cmNlLCB0cmFja1xuICAsIGVtYmVkLCBvYmplY3QsIHBhcmFtXG4gICwgaW5zLCBkZWxcbiAgLCBzbWFsbCwgY2l0ZSwgZGZuLCBhYmJyLCB0aW1lLCB2YXIsIHNhbXAsIGtiZCwgcywgcVxuICAsIG1hcmssIHJ1YnksIHJ0LCBycCwgYmRpLCBiZG8sIHdiclxuICAsIGRldGFpbHMsIHN1bW1hcnksIG1lbnVpdGVtLCBtZW51XG4gIClcblxuey18IFRoaXMgZmlsZSBpcyBvcmdhbml6ZWQgcm91Z2hseSBpbiBvcmRlciBvZiBwb3B1bGFyaXR5LiBUaGUgdGFncyB3aGljaCB5b3VcJ2RcbmV4cGVjdCB0byB1c2UgZnJlcXVlbnRseSB3aWxsIGJlIGNsb3NlciB0byB0aGUgdG9wLlxuXG4jIFByaW1pdGl2ZXNcbkBkb2NzIEh0bWwsIEF0dHJpYnV0ZSwgdGV4dCwgbm9kZSwgbWFwXG5cbiMgVGFnc1xuXG4jIyBIZWFkZXJzXG5AZG9jcyBoMSwgaDIsIGgzLCBoNCwgaDUsIGg2XG5cbiMjIEdyb3VwaW5nIENvbnRlbnRcbkBkb2NzIGRpdiwgcCwgaHIsIHByZSwgYmxvY2txdW90ZVxuXG4jIyBUZXh0XG5AZG9jcyBzcGFuLCBhLCBjb2RlLCBlbSwgc3Ryb25nLCBpLCBiLCB1LCBzdWIsIHN1cCwgYnJcblxuIyMgTGlzdHNcbkBkb2NzIG9sLCB1bCwgbGksIGRsLCBkdCwgZGRcblxuIyMgRW1iZWRkZWQgQ29udGVudFxuQGRvY3MgaW1nLCBpZnJhbWUsIGNhbnZhcywgbWF0aFxuXG4jIyBJbnB1dHNcbkBkb2NzIGZvcm0sIGlucHV0LCB0ZXh0YXJlYSwgYnV0dG9uLCBzZWxlY3QsIG9wdGlvblxuXG4jIyBTZWN0aW9uc1xuQGRvY3Mgc2VjdGlvbiwgbmF2LCBhcnRpY2xlLCBhc2lkZSwgaGVhZGVyLCBmb290ZXIsIGFkZHJlc3MsIG1haW5fXG5cbiMjIEZpZ3VyZXNcbkBkb2NzIGZpZ3VyZSwgZmlnY2FwdGlvblxuXG4jIyBUYWJsZXNcbkBkb2NzIHRhYmxlLCBjYXB0aW9uLCBjb2xncm91cCwgY29sLCB0Ym9keSwgdGhlYWQsIHRmb290LCB0ciwgdGQsIHRoXG5cblxuIyMgTGVzcyBDb21tb24gRWxlbWVudHNcblxuIyMjIExlc3MgQ29tbW9uIElucHV0c1xuQGRvY3MgZmllbGRzZXQsIGxlZ2VuZCwgbGFiZWwsIGRhdGFsaXN0LCBvcHRncm91cCwgb3V0cHV0LCBwcm9ncmVzcywgbWV0ZXJcblxuIyMjIEF1ZGlvIGFuZCBWaWRlb1xuQGRvY3MgYXVkaW8sIHZpZGVvLCBzb3VyY2UsIHRyYWNrXG5cbiMjIyBFbWJlZGRlZCBPYmplY3RzXG5AZG9jcyBlbWJlZCwgb2JqZWN0LCBwYXJhbVxuXG4jIyMgVGV4dCBFZGl0c1xuQGRvY3MgaW5zLCBkZWxcblxuIyMjIFNlbWFudGljIFRleHRcbkBkb2NzIHNtYWxsLCBjaXRlLCBkZm4sIGFiYnIsIHRpbWUsIHZhciwgc2FtcCwga2JkLCBzLCBxXG5cbiMjIyBMZXNzIENvbW1vbiBUZXh0IFRhZ3NcbkBkb2NzIG1hcmssIHJ1YnksIHJ0LCBycCwgYmRpLCBiZG8sIHdiclxuXG4jIyBJbnRlcmFjdGl2ZSBFbGVtZW50c1xuQGRvY3MgZGV0YWlscywgc3VtbWFyeSwgbWVudWl0ZW0sIG1lbnVcblxuLX1cblxuXG5pbXBvcnQgRWxtLktlcm5lbC5WaXJ0dWFsRG9tXG5pbXBvcnQgVmlydHVhbERvbVxuXG5cblxuLS0gQ09SRSBUWVBFU1xuXG5cbnstfCBUaGUgY29yZSBidWlsZGluZyBibG9jayB1c2VkIHRvIGJ1aWxkIHVwIEhUTUwuIEhlcmUgd2UgY3JlYXRlIGFuIGBIdG1sYFxudmFsdWUgd2l0aCBubyBhdHRyaWJ1dGVzIGFuZCBvbmUgY2hpbGQ6XG5cbiAgICBoZWxsbyA6IEh0bWwgbXNnXG4gICAgaGVsbG8gPVxuICAgICAgZGl2IFtdIFsgdGV4dCBcIkhlbGxvIVwiIF1cbi19XG50eXBlIGFsaWFzIEh0bWwgbXNnID0gVmlydHVhbERvbS5Ob2RlIG1zZ1xuXG5cbnstfCBTZXQgYXR0cmlidXRlcyBvbiB5b3VyIGBIdG1sYC4gTGVhcm4gbW9yZSBpbiB0aGVcbltgSHRtbC5BdHRyaWJ1dGVzYF0oSHRtbC1BdHRyaWJ1dGVzKSBtb2R1bGUuXG4tfVxudHlwZSBhbGlhcyBBdHRyaWJ1dGUgbXNnID0gVmlydHVhbERvbS5BdHRyaWJ1dGUgbXNnXG5cblxuXG4tLSBQUklNSVRJVkVTXG5cblxuey18IEdlbmVyYWwgd2F5IHRvIGNyZWF0ZSBIVE1MIG5vZGVzLiBJdCBpcyB1c2VkIHRvIGRlZmluZSBhbGwgb2YgdGhlIGhlbHBlclxuZnVuY3Rpb25zIGluIHRoaXMgbGlicmFyeS5cblxuICAgIGRpdiA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuICAgIGRpdiBhdHRyaWJ1dGVzIGNoaWxkcmVuID1cbiAgICAgICAgbm9kZSBcImRpdlwiIGF0dHJpYnV0ZXMgY2hpbGRyZW5cblxuWW91IGNhbiB1c2UgdGhpcyB0byBjcmVhdGUgY3VzdG9tIG5vZGVzIGlmIHlvdSBuZWVkIHRvIGNyZWF0ZSBzb21ldGhpbmcgdGhhdFxuaXMgbm90IGNvdmVyZWQgYnkgdGhlIGhlbHBlciBmdW5jdGlvbnMgaW4gdGhpcyBsaWJyYXJ5LlxuLX1cbm5vZGUgOiBTdHJpbmcgLT4gTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5ub2RlID1cbiAgVmlydHVhbERvbS5ub2RlXG5cblxuey18IEp1c3QgcHV0IHBsYWluIHRleHQgaW4gdGhlIERPTS4gSXQgd2lsbCBlc2NhcGUgdGhlIHN0cmluZyBzbyB0aGF0IGl0IGFwcGVhcnNcbmV4YWN0bHkgYXMgeW91IHNwZWNpZnkuXG5cbiAgICB0ZXh0IFwiSGVsbG8gV29ybGQhXCJcbi19XG50ZXh0IDogU3RyaW5nIC0+IEh0bWwgbXNnXG50ZXh0ID1cbiAgVmlydHVhbERvbS50ZXh0XG5cblxuXG4tLSBORVNUSU5HIFZJRVdTXG5cblxuey18IFRyYW5zZm9ybSB0aGUgbWVzc2FnZXMgcHJvZHVjZWQgYnkgc29tZSBgSHRtbGAuIEluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZSxcbndlIGhhdmUgYHZpZXdCdXR0b25gIHRoYXQgcHJvZHVjZXMgYCgpYCBtZXNzYWdlcywgYW5kIHdlIHRyYW5zZm9ybSB0aG9zZSB2YWx1ZXNcbmludG8gYE1zZ2AgdmFsdWVzIGluIGB2aWV3YC5cblxuICAgIHR5cGUgTXNnID0gTGVmdCB8IFJpZ2h0XG5cbiAgICB2aWV3IDogbW9kZWwgLT4gSHRtbCBNc2dcbiAgICB2aWV3IG1vZGVsID1cbiAgICAgIGRpdiBbXVxuICAgICAgICBbIG1hcCAoXFxfIC0+IExlZnQpICh2aWV3QnV0dG9uIFwiTGVmdFwiKVxuICAgICAgICAsIG1hcCAoXFxfIC0+IFJpZ2h0KSAodmlld0J1dHRvbiBcIlJpZ2h0XCIpXG4gICAgICAgIF1cblxuICAgIHZpZXdCdXR0b24gOiBTdHJpbmcgLT4gSHRtbCAoKVxuICAgIHZpZXdCdXR0b24gbmFtZSA9XG4gICAgICBidXR0b24gWyBvbkNsaWNrICgpIF0gWyB0ZXh0IG5hbWUgXVxuXG5JZiB5b3UgYXJlIGdyb3dpbmcgeW91ciBwcm9qZWN0IGFzIHJlY29tbWVuZGVkIGluIFt0aGUgb2ZmaWNpYWxcbmd1aWRlXShodHRwczovL2d1aWRlLmVsbS1sYW5nLm9yZy8pLCB0aGlzIHNob3VsZCBub3QgY29tZSBpbiBoYW5keSBpbiBtb3N0XG5wcm9qZWN0cy4gVXN1YWxseSBpdCBpcyBlYXNpZXIgdG8ganVzdCBwYXNzIHRoaW5ncyBpbiBhcyBhcmd1bWVudHMuXG5cbioqTm90ZToqKiBTb21lIGZvbGtzIGhhdmUgdHJpZWQgdG8gdXNlIHRoaXMgdG8gbWFrZSDigJxjb21wb25lbnRz4oCdIGluIHRoZWlyXG5wcm9qZWN0cywgYnV0IHRoZXkgcnVuIGludG8gdGhlIGZhY3QgdGhhdCBjb21wb25lbnRzIGFyZSBvYmplY3RzLiBCb3RoIGFyZVxubG9jYWwgbXV0YWJsZSBzdGF0ZSB3aXRoIG1ldGhvZHMuIEVsbSBpcyBub3QgYW4gb2JqZWN0LW9yaWVudGVkIGxhbmd1YWdlLCBzb1xueW91IHJ1biBpbnRvIGFsbCBzb3J0cyBvZiBmcmljdGlvbiBpZiB5b3UgdHJ5IHRvIHVzZSBpdCBsaWtlIG9uZS4gSSBkZWZpbml0ZWx5XG5yZWNvbW1lbmQgYWdhaW5zdCBnb2luZyBkb3duIHRoYXQgcGF0aCEgSW5zdGVhZCwgbWFrZSB0aGUgc2ltcGxlc3QgZnVuY3Rpb25cbnBvc3NpYmxlIGFuZCByZXBlYXQuXG4tfVxubWFwIDogKGEgLT4gbXNnKSAtPiBIdG1sIGEgLT4gSHRtbCBtc2dcbm1hcCA9XG4gIFZpcnR1YWxEb20ubWFwXG5cblxuXG4tLSBTRUNUSU9OU1xuXG5cbnstfCBEZWZpbmVzIGEgc2VjdGlvbiBpbiBhIGRvY3VtZW50LlxuLX1cbnNlY3Rpb24gOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbnNlY3Rpb24gPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcInNlY3Rpb25cIlxuXG5cbnstfCBEZWZpbmVzIGEgc2VjdGlvbiB0aGF0IGNvbnRhaW5zIG9ubHkgbmF2aWdhdGlvbiBsaW5rcy5cbi19XG5uYXYgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbm5hdiA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwibmF2XCJcblxuXG57LXwgRGVmaW5lcyBzZWxmLWNvbnRhaW5lZCBjb250ZW50IHRoYXQgY291bGQgZXhpc3QgaW5kZXBlbmRlbnRseSBvZiB0aGUgcmVzdFxub2YgdGhlIGNvbnRlbnQuXG4tfVxuYXJ0aWNsZSA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuYXJ0aWNsZSA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiYXJ0aWNsZVwiXG5cblxuey18IERlZmluZXMgc29tZSBjb250ZW50IGxvb3NlbHkgcmVsYXRlZCB0byB0aGUgcGFnZSBjb250ZW50LiBJZiBpdCBpcyByZW1vdmVkLFxudGhlIHJlbWFpbmluZyBjb250ZW50IHN0aWxsIG1ha2VzIHNlbnNlLlxuLX1cbmFzaWRlIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5hc2lkZSA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiYXNpZGVcIlxuXG5cbnstfC19XG5oMSA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuaDEgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImgxXCJcblxuXG57LXwtfVxuaDIgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmgyID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJoMlwiXG5cblxuey18LX1cbmgzIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5oMyA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiaDNcIlxuXG5cbnstfC19XG5oNCA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuaDQgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImg0XCJcblxuXG57LXwtfVxuaDUgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmg1ID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJoNVwiXG5cblxuey18LX1cbmg2IDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5oNiA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiaDZcIlxuXG5cbnstfCBEZWZpbmVzIHRoZSBoZWFkZXIgb2YgYSBwYWdlIG9yIHNlY3Rpb24uIEl0IG9mdGVuIGNvbnRhaW5zIGEgbG9nbywgdGhlXG50aXRsZSBvZiB0aGUgd2ViIHNpdGUsIGFuZCBhIG5hdmlnYXRpb25hbCB0YWJsZSBvZiBjb250ZW50LlxuLX1cbmhlYWRlciA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuaGVhZGVyID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJoZWFkZXJcIlxuXG5cbnstfCBEZWZpbmVzIHRoZSBmb290ZXIgZm9yIGEgcGFnZSBvciBzZWN0aW9uLiBJdCBvZnRlbiBjb250YWlucyBhIGNvcHlyaWdodFxubm90aWNlLCBzb21lIGxpbmtzIHRvIGxlZ2FsIGluZm9ybWF0aW9uLCBvciBhZGRyZXNzZXMgdG8gZ2l2ZSBmZWVkYmFjay5cbi19XG5mb290ZXIgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmZvb3RlciA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiZm9vdGVyXCJcblxuXG57LXwgRGVmaW5lcyBhIHNlY3Rpb24gY29udGFpbmluZyBjb250YWN0IGluZm9ybWF0aW9uLiAtfVxuYWRkcmVzcyA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuYWRkcmVzcyA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiYWRkcmVzc1wiXG5cblxuey18IERlZmluZXMgdGhlIG1haW4gb3IgaW1wb3J0YW50IGNvbnRlbnQgaW4gdGhlIGRvY3VtZW50LiBUaGVyZSBpcyBvbmx5IG9uZVxuYG1haW5gIGVsZW1lbnQgaW4gdGhlIGRvY3VtZW50LlxuLX1cbm1haW5fIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5tYWluXyA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwibWFpblwiXG5cblxuLS0gR1JPVVBJTkcgQ09OVEVOVFxuXG57LXwgRGVmaW5lcyBhIHBvcnRpb24gdGhhdCBzaG91bGQgYmUgZGlzcGxheWVkIGFzIGEgcGFyYWdyYXBoLiAtfVxucCA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xucCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwicFwiXG5cblxuey18IFJlcHJlc2VudHMgYSB0aGVtYXRpYyBicmVhayBiZXR3ZWVuIHBhcmFncmFwaHMgb2YgYSBzZWN0aW9uIG9yIGFydGljbGUgb3JcbmFueSBsb25nZXIgY29udGVudC5cbi19XG5ociA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuaHIgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImhyXCJcblxuXG57LXwgSW5kaWNhdGVzIHRoYXQgaXRzIGNvbnRlbnQgaXMgcHJlZm9ybWF0dGVkIGFuZCB0aGF0IHRoaXMgZm9ybWF0IG11c3QgYmVcbnByZXNlcnZlZC5cbi19XG5wcmUgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbnByZSA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwicHJlXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIGNvbnRlbnQgdGhhdCBpcyBxdW90ZWQgZnJvbSBhbm90aGVyIHNvdXJjZS4gLX1cbmJsb2NrcXVvdGUgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmJsb2NrcXVvdGUgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImJsb2NrcXVvdGVcIlxuXG5cbnstfCBEZWZpbmVzIGFuIG9yZGVyZWQgbGlzdCBvZiBpdGVtcy4gLX1cbm9sIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5vbCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwib2xcIlxuXG5cbnstfCBEZWZpbmVzIGFuIHVub3JkZXJlZCBsaXN0IG9mIGl0ZW1zLiAtfVxudWwgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbnVsID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJ1bFwiXG5cblxuey18IERlZmluZXMgYSBpdGVtIG9mIGFuIGVudW1lcmF0aW9uIGxpc3QuIC19XG5saSA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xubGkgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImxpXCJcblxuXG57LXwgRGVmaW5lcyBhIGRlZmluaXRpb24gbGlzdCwgdGhhdCBpcywgYSBsaXN0IG9mIHRlcm1zIGFuZCB0aGVpciBhc3NvY2lhdGVkXG5kZWZpbml0aW9ucy5cbi19XG5kbCA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuZGwgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImRsXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIHRlcm0gZGVmaW5lZCBieSB0aGUgbmV4dCBgZGRgLiAtfVxuZHQgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmR0ID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJkdFwiXG5cblxuey18IFJlcHJlc2VudHMgdGhlIGRlZmluaXRpb24gb2YgdGhlIHRlcm1zIGltbWVkaWF0ZWx5IGxpc3RlZCBiZWZvcmUgaXQuIC19XG5kZCA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuZGQgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImRkXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIGZpZ3VyZSBpbGx1c3RyYXRlZCBhcyBwYXJ0IG9mIHRoZSBkb2N1bWVudC4gLX1cbmZpZ3VyZSA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuZmlndXJlID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJmaWd1cmVcIlxuXG5cbnstfCBSZXByZXNlbnRzIHRoZSBsZWdlbmQgb2YgYSBmaWd1cmUuIC19XG5maWdjYXB0aW9uIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5maWdjYXB0aW9uID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJmaWdjYXB0aW9uXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIGdlbmVyaWMgY29udGFpbmVyIHdpdGggbm8gc3BlY2lhbCBtZWFuaW5nLiAtfVxuZGl2IDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5kaXYgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImRpdlwiXG5cblxuLS0gVEVYVCBMRVZFTCBTRU1BTlRJQ1xuXG57LXwgUmVwcmVzZW50cyBhIGh5cGVybGluaywgbGlua2luZyB0byBhbm90aGVyIHJlc291cmNlLiAtfVxuYSA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuYSA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiYVwiXG5cblxuey18IFJlcHJlc2VudHMgZW1waGFzaXplZCB0ZXh0LCBsaWtlIGEgc3RyZXNzIGFjY2VudC4gLX1cbmVtIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5lbSA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiZW1cIlxuXG5cbnstfCBSZXByZXNlbnRzIGVzcGVjaWFsbHkgaW1wb3J0YW50IHRleHQuIC19XG5zdHJvbmcgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbnN0cm9uZyA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwic3Ryb25nXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIHNpZGUgY29tbWVudCwgdGhhdCBpcywgdGV4dCBsaWtlIGEgZGlzY2xhaW1lciBvciBhXG5jb3B5cmlnaHQsIHdoaWNoIGlzIG5vdCBlc3NlbnRpYWwgdG8gdGhlIGNvbXByZWhlbnNpb24gb2YgdGhlIGRvY3VtZW50LlxuLX1cbnNtYWxsIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5zbWFsbCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwic21hbGxcIlxuXG5cbnstfCBSZXByZXNlbnRzIGNvbnRlbnQgdGhhdCBpcyBubyBsb25nZXIgYWNjdXJhdGUgb3IgcmVsZXZhbnQuIC19XG5zIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5zID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJzXCJcblxuXG57LXwgUmVwcmVzZW50cyB0aGUgdGl0bGUgb2YgYSB3b3JrLiAtfVxuY2l0ZSA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuY2l0ZSA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiY2l0ZVwiXG5cblxuey18IFJlcHJlc2VudHMgYW4gaW5saW5lIHF1b3RhdGlvbi4gLX1cbnEgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbnEgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcInFcIlxuXG5cbnstfCBSZXByZXNlbnRzIGEgdGVybSB3aG9zZSBkZWZpbml0aW9uIGlzIGNvbnRhaW5lZCBpbiBpdHMgbmVhcmVzdCBhbmNlc3RvclxuY29udGVudC5cbi19XG5kZm4gOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmRmbiA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiZGZuXCJcblxuXG57LXwgUmVwcmVzZW50cyBhbiBhYmJyZXZpYXRpb24gb3IgYW4gYWNyb255bTsgdGhlIGV4cGFuc2lvbiBvZiB0aGVcbmFiYnJldmlhdGlvbiBjYW4gYmUgcmVwcmVzZW50ZWQgaW4gdGhlIHRpdGxlIGF0dHJpYnV0ZS5cbi19XG5hYmJyIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5hYmJyID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJhYmJyXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIGRhdGUgYW5kIHRpbWUgdmFsdWU7IHRoZSBtYWNoaW5lLXJlYWRhYmxlIGVxdWl2YWxlbnQgY2FuIGJlXG5yZXByZXNlbnRlZCBpbiB0aGUgZGF0ZXRpbWUgYXR0cmlidXRlLlxuLX1cbnRpbWUgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbnRpbWUgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcInRpbWVcIlxuXG5cbnstfCBSZXByZXNlbnRzIGNvbXB1dGVyIGNvZGUuIC19XG5jb2RlIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5jb2RlID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJjb2RlXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIHZhcmlhYmxlLiBTcGVjaWZpYyBjYXNlcyB3aGVyZSBpdCBzaG91bGQgYmUgdXNlZCBpbmNsdWRlIGFuXG5hY3R1YWwgbWF0aGVtYXRpY2FsIGV4cHJlc3Npb24gb3IgcHJvZ3JhbW1pbmcgY29udGV4dCwgYW4gaWRlbnRpZmllclxucmVwcmVzZW50aW5nIGEgY29uc3RhbnQsIGEgc3ltYm9sIGlkZW50aWZ5aW5nIGEgcGh5c2ljYWwgcXVhbnRpdHksIGEgZnVuY3Rpb25cbnBhcmFtZXRlciwgb3IgYSBtZXJlIHBsYWNlaG9sZGVyIGluIHByb3NlLlxuLX1cbnZhciA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xudmFyID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJ2YXJcIlxuXG5cbnstfCBSZXByZXNlbnRzIHRoZSBvdXRwdXQgb2YgYSBwcm9ncmFtIG9yIGEgY29tcHV0ZXIuIC19XG5zYW1wIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5zYW1wID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJzYW1wXCJcblxuXG57LXwgUmVwcmVzZW50cyB1c2VyIGlucHV0LCBvZnRlbiBmcm9tIHRoZSBrZXlib2FyZCwgYnV0IG5vdCBuZWNlc3NhcmlseTsgaXRcbm1heSByZXByZXNlbnQgb3RoZXIgaW5wdXQsIGxpa2UgdHJhbnNjcmliZWQgdm9pY2UgY29tbWFuZHMuXG4tfVxua2JkIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5rYmQgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImtiZFwiXG5cblxuey18IFJlcHJlc2VudCBhIHN1YnNjcmlwdC4gLX1cbnN1YiA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuc3ViID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJzdWJcIlxuXG5cbnstfCBSZXByZXNlbnQgYSBzdXBlcnNjcmlwdC4gLX1cbnN1cCA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuc3VwID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJzdXBcIlxuXG5cbnstfCBSZXByZXNlbnRzIHNvbWUgdGV4dCBpbiBhbiBhbHRlcm5hdGUgdm9pY2Ugb3IgbW9vZCwgb3IgYXQgbGVhc3Qgb2ZcbmRpZmZlcmVudCBxdWFsaXR5LCBzdWNoIGFzIGEgdGF4b25vbWljIGRlc2lnbmF0aW9uLCBhIHRlY2huaWNhbCB0ZXJtLCBhblxuaWRpb21hdGljIHBocmFzZSwgYSB0aG91Z2h0LCBvciBhIHNoaXAgbmFtZS5cbi19XG5pIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5pID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJpXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIHRleHQgd2hpY2ggdG8gd2hpY2ggYXR0ZW50aW9uIGlzIGRyYXduIGZvciB1dGlsaXRhcmlhblxucHVycG9zZXMuIEl0IGRvZXNuXCd0IGNvbnZleSBleHRyYSBpbXBvcnRhbmNlIGFuZCBkb2VzblwndCBpbXBseSBhbiBhbHRlcm5hdGVcbnZvaWNlLlxuLX1cbmIgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmIgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImJcIlxuXG5cbnstfCBSZXByZXNlbnRzIGEgbm9uLXRleHR1YWwgYW5ub3RhdGlvbiBmb3Igd2hpY2ggdGhlIGNvbnZlbnRpb25hbFxucHJlc2VudGF0aW9uIGlzIHVuZGVybGluaW5nLCBzdWNoIGxhYmVsaW5nIHRoZSB0ZXh0IGFzIGJlaW5nIG1pc3NwZWx0IG9yXG5sYWJlbGluZyBhIHByb3BlciBuYW1lIGluIENoaW5lc2UgdGV4dC5cbi19XG51IDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG51ID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJ1XCJcblxuXG57LXwgUmVwcmVzZW50cyB0ZXh0IGhpZ2hsaWdodGVkIGZvciByZWZlcmVuY2UgcHVycG9zZXMsIHRoYXQgaXMgZm9yIGl0c1xucmVsZXZhbmNlIGluIGFub3RoZXIgY29udGV4dC5cbi19XG5tYXJrIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5tYXJrID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJtYXJrXCJcblxuXG57LXwgUmVwcmVzZW50cyBjb250ZW50IHRvIGJlIG1hcmtlZCB3aXRoIHJ1YnkgYW5ub3RhdGlvbnMsIHNob3J0IHJ1bnMgb2YgdGV4dFxucHJlc2VudGVkIGFsb25nc2lkZSB0aGUgdGV4dC4gVGhpcyBpcyBvZnRlbiB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggRWFzdCBBc2lhblxubGFuZ3VhZ2Ugd2hlcmUgdGhlIGFubm90YXRpb25zIGFjdCBhcyBhIGd1aWRlIGZvciBwcm9udW5jaWF0aW9uLCBsaWtlIHRoZVxuSmFwYW5lc2UgZnVyaWdhbmEuXG4tfVxucnVieSA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xucnVieSA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwicnVieVwiXG5cblxuey18IFJlcHJlc2VudHMgdGhlIHRleHQgb2YgYSBydWJ5IGFubm90YXRpb24uIC19XG5ydCA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xucnQgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcInJ0XCJcblxuXG57LXwgUmVwcmVzZW50cyBwYXJlbnRoZXNpcyBhcm91bmQgYSBydWJ5IGFubm90YXRpb24sIHVzZWQgdG8gZGlzcGxheSB0aGVcbmFubm90YXRpb24gaW4gYW4gYWx0ZXJuYXRlIHdheSBieSBicm93c2VycyBub3Qgc3VwcG9ydGluZyB0aGUgc3RhbmRhcmQgZGlzcGxheVxuZm9yIGFubm90YXRpb25zLlxuLX1cbnJwIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5ycCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwicnBcIlxuXG5cbnstfCBSZXByZXNlbnRzIHRleHQgdGhhdCBtdXN0IGJlIGlzb2xhdGVkIGZyb20gaXRzIHN1cnJvdW5kaW5nIGZvclxuYmlkaXJlY3Rpb25hbCB0ZXh0IGZvcm1hdHRpbmcuIEl0IGFsbG93cyBlbWJlZGRpbmcgYSBzcGFuIG9mIHRleHQgd2l0aCBhXG5kaWZmZXJlbnQsIG9yIHVua25vd24sIGRpcmVjdGlvbmFsaXR5LlxuLX1cbmJkaSA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuYmRpID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJiZGlcIlxuXG5cbnstfCBSZXByZXNlbnRzIHRoZSBkaXJlY3Rpb25hbGl0eSBvZiBpdHMgY2hpbGRyZW4sIGluIG9yZGVyIHRvIGV4cGxpY2l0bHlcbm92ZXJyaWRlIHRoZSBVbmljb2RlIGJpZGlyZWN0aW9uYWwgYWxnb3JpdGhtLlxuLX1cbmJkbyA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuYmRvID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJiZG9cIlxuXG5cbnstfCBSZXByZXNlbnRzIHRleHQgd2l0aCBubyBzcGVjaWZpYyBtZWFuaW5nLiBUaGlzIGhhcyB0byBiZSB1c2VkIHdoZW4gbm8gb3RoZXJcbnRleHQtc2VtYW50aWMgZWxlbWVudCBjb252ZXlzIGFuIGFkZXF1YXRlIG1lYW5pbmcsIHdoaWNoLCBpbiB0aGlzIGNhc2UsIGlzXG5vZnRlbiBicm91Z2h0IGJ5IGdsb2JhbCBhdHRyaWJ1dGVzIGxpa2UgYGNsYXNzYCwgYGxhbmdgLCBvciBgZGlyYC5cbi19XG5zcGFuIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5zcGFuID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJzcGFuXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIGxpbmUgYnJlYWsuIC19XG5iciA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuYnIgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImJyXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIGxpbmUgYnJlYWsgb3Bwb3J0dW5pdHksIHRoYXQgaXMgYSBzdWdnZXN0ZWQgcG9pbnQgZm9yXG53cmFwcGluZyB0ZXh0IGluIG9yZGVyIHRvIGltcHJvdmUgcmVhZGFiaWxpdHkgb2YgdGV4dCBzcGxpdCBvbiBzZXZlcmFsIGxpbmVzLlxuLX1cbndiciA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xud2JyID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJ3YnJcIlxuXG5cbi0tIEVESVRTXG5cbnstfCBEZWZpbmVzIGFuIGFkZGl0aW9uIHRvIHRoZSBkb2N1bWVudC4gLX1cbmlucyA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuaW5zID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJpbnNcIlxuXG5cbnstfCBEZWZpbmVzIGEgcmVtb3ZhbCBmcm9tIHRoZSBkb2N1bWVudC4gLX1cbmRlbCA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuZGVsID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJkZWxcIlxuXG5cbi0tIEVNQkVEREVEIENPTlRFTlRcblxuey18IFJlcHJlc2VudHMgYW4gaW1hZ2UuIC19XG5pbWcgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmltZyA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiaW1nXCJcblxuXG57LXwgRW1iZWRkZWQgYW4gSFRNTCBkb2N1bWVudC4gLX1cbmlmcmFtZSA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuaWZyYW1lID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJpZnJhbWVcIlxuXG5cbnstfCBSZXByZXNlbnRzIGEgaW50ZWdyYXRpb24gcG9pbnQgZm9yIGFuIGV4dGVybmFsLCBvZnRlbiBub24tSFRNTCxcbmFwcGxpY2F0aW9uIG9yIGludGVyYWN0aXZlIGNvbnRlbnQuXG4tfVxuZW1iZWQgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmVtYmVkID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJlbWJlZFwiXG5cblxuey18IFJlcHJlc2VudHMgYW4gZXh0ZXJuYWwgcmVzb3VyY2UsIHdoaWNoIGlzIHRyZWF0ZWQgYXMgYW4gaW1hZ2UsIGFuIEhUTUxcbnN1Yi1kb2N1bWVudCwgb3IgYW4gZXh0ZXJuYWwgcmVzb3VyY2UgdG8gYmUgcHJvY2Vzc2VkIGJ5IGEgcGx1Zy1pbi5cbi19XG5vYmplY3QgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbm9iamVjdCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwib2JqZWN0XCJcblxuXG57LXwgRGVmaW5lcyBwYXJhbWV0ZXJzIGZvciB1c2UgYnkgcGx1Zy1pbnMgaW52b2tlZCBieSBgb2JqZWN0YCBlbGVtZW50cy4gLX1cbnBhcmFtIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5wYXJhbSA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwicGFyYW1cIlxuXG5cbnstfCBSZXByZXNlbnRzIGEgdmlkZW8sIHRoZSBhc3NvY2lhdGVkIGF1ZGlvIGFuZCBjYXB0aW9ucywgYW5kIGNvbnRyb2xzLiAtfVxudmlkZW8gOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbnZpZGVvID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJ2aWRlb1wiXG5cblxuey18IFJlcHJlc2VudHMgYSBzb3VuZCBvciBhdWRpbyBzdHJlYW0uIC19XG5hdWRpbyA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xuYXVkaW8gPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImF1ZGlvXCJcblxuXG57LXwgQWxsb3dzIGF1dGhvcnMgdG8gc3BlY2lmeSBhbHRlcm5hdGl2ZSBtZWRpYSByZXNvdXJjZXMgZm9yIG1lZGlhIGVsZW1lbnRzXG5saWtlIGB2aWRlb2Agb3IgYGF1ZGlvYC5cbi19XG5zb3VyY2UgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbnNvdXJjZSA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwic291cmNlXCJcblxuXG57LXwgQWxsb3dzIGF1dGhvcnMgdG8gc3BlY2lmeSB0aW1lZCB0ZXh0IHRyYWNrIGZvciBtZWRpYSBlbGVtZW50cyBsaWtlIGB2aWRlb2Bcbm9yIGBhdWRpb2AuXG4tfVxudHJhY2sgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbnRyYWNrID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJ0cmFja1wiXG5cblxuey18IFJlcHJlc2VudHMgYSBiaXRtYXAgYXJlYSBmb3IgZ3JhcGhpY3MgcmVuZGVyaW5nLiAtfVxuY2FudmFzIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5jYW52YXMgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImNhbnZhc1wiXG5cblxuey18IERlZmluZXMgYSBtYXRoZW1hdGljYWwgZm9ybXVsYS4gLX1cbm1hdGggOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbm1hdGggPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcIm1hdGhcIlxuXG5cbi0tIFRBQlVMQVIgREFUQVxuXG57LXwgUmVwcmVzZW50cyBkYXRhIHdpdGggbW9yZSB0aGFuIG9uZSBkaW1lbnNpb24uIC19XG50YWJsZSA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xudGFibGUgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcInRhYmxlXCJcblxuXG57LXwgUmVwcmVzZW50cyB0aGUgdGl0bGUgb2YgYSB0YWJsZS4gLX1cbmNhcHRpb24gOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmNhcHRpb24gPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcImNhcHRpb25cIlxuXG5cbnstfCBSZXByZXNlbnRzIGEgc2V0IG9mIG9uZSBvciBtb3JlIGNvbHVtbnMgb2YgYSB0YWJsZS4gLX1cbmNvbGdyb3VwIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5jb2xncm91cCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiY29sZ3JvdXBcIlxuXG5cbnstfCBSZXByZXNlbnRzIGEgY29sdW1uIG9mIGEgdGFibGUuIC19XG5jb2wgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmNvbCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiY29sXCJcblxuXG57LXwgUmVwcmVzZW50cyB0aGUgYmxvY2sgb2Ygcm93cyB0aGF0IGRlc2NyaWJlcyB0aGUgY29uY3JldGUgZGF0YSBvZiBhIHRhYmxlLlxuLX1cbnRib2R5IDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG50Ym9keSA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwidGJvZHlcIlxuXG5cbnstfCBSZXByZXNlbnRzIHRoZSBibG9jayBvZiByb3dzIHRoYXQgZGVzY3JpYmVzIHRoZSBjb2x1bW4gbGFiZWxzIG9mIGEgdGFibGUuXG4tfVxudGhlYWQgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbnRoZWFkID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJ0aGVhZFwiXG5cblxuey18IFJlcHJlc2VudHMgdGhlIGJsb2NrIG9mIHJvd3MgdGhhdCBkZXNjcmliZXMgdGhlIGNvbHVtbiBzdW1tYXJpZXMgb2YgYSB0YWJsZS5cbi19XG50Zm9vdCA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xudGZvb3QgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcInRmb290XCJcblxuXG57LXwgUmVwcmVzZW50cyBhIHJvdyBvZiBjZWxscyBpbiBhIHRhYmxlLiAtfVxudHIgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbnRyID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJ0clwiXG5cblxuey18IFJlcHJlc2VudHMgYSBkYXRhIGNlbGwgaW4gYSB0YWJsZS4gLX1cbnRkIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG50ZCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwidGRcIlxuXG5cbnstfCBSZXByZXNlbnRzIGEgaGVhZGVyIGNlbGwgaW4gYSB0YWJsZS4gLX1cbnRoIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG50aCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwidGhcIlxuXG5cbi0tIEZPUk1TXG5cbnstfCBSZXByZXNlbnRzIGEgZm9ybSwgY29uc2lzdGluZyBvZiBjb250cm9scywgdGhhdCBjYW4gYmUgc3VibWl0dGVkIHRvIGFcbnNlcnZlciBmb3IgcHJvY2Vzc2luZy5cbi19XG5mb3JtIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5mb3JtID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJmb3JtXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIHNldCBvZiBjb250cm9scy4gLX1cbmZpZWxkc2V0IDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5maWVsZHNldCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiZmllbGRzZXRcIlxuXG5cbnstfCBSZXByZXNlbnRzIHRoZSBjYXB0aW9uIGZvciBhIGBmaWVsZHNldGAuIC19XG5sZWdlbmQgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmxlZ2VuZCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwibGVnZW5kXCJcblxuXG57LXwgUmVwcmVzZW50cyB0aGUgY2FwdGlvbiBvZiBhIGZvcm0gY29udHJvbC4gLX1cbmxhYmVsIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5sYWJlbCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwibGFiZWxcIlxuXG5cbnstfCBSZXByZXNlbnRzIGEgdHlwZWQgZGF0YSBmaWVsZCBhbGxvd2luZyB0aGUgdXNlciB0byBlZGl0IHRoZSBkYXRhLiAtfVxuaW5wdXQgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmlucHV0ID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJpbnB1dFwiXG5cblxuey18IFJlcHJlc2VudHMgYSBidXR0b24uIC19XG5idXR0b24gOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmJ1dHRvbiA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwiYnV0dG9uXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIGNvbnRyb2wgYWxsb3dpbmcgc2VsZWN0aW9uIGFtb25nIGEgc2V0IG9mIG9wdGlvbnMuIC19XG5zZWxlY3QgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbnNlbGVjdCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwic2VsZWN0XCJcblxuXG57LXwgUmVwcmVzZW50cyBhIHNldCBvZiBwcmVkZWZpbmVkIG9wdGlvbnMgZm9yIG90aGVyIGNvbnRyb2xzLiAtfVxuZGF0YWxpc3QgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbmRhdGFsaXN0ID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJkYXRhbGlzdFwiXG5cblxuey18IFJlcHJlc2VudHMgYSBzZXQgb2Ygb3B0aW9ucywgbG9naWNhbGx5IGdyb3VwZWQuIC19XG5vcHRncm91cCA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xub3B0Z3JvdXAgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcIm9wdGdyb3VwXCJcblxuXG57LXwgUmVwcmVzZW50cyBhbiBvcHRpb24gaW4gYSBgc2VsZWN0YCBlbGVtZW50IG9yIGEgc3VnZ2VzdGlvbiBvZiBhIGBkYXRhbGlzdGBcbmVsZW1lbnQuXG4tfVxub3B0aW9uIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5vcHRpb24gPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcIm9wdGlvblwiXG5cblxuey18IFJlcHJlc2VudHMgYSBtdWx0aWxpbmUgdGV4dCBlZGl0IGNvbnRyb2wuIC19XG50ZXh0YXJlYSA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xudGV4dGFyZWEgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcInRleHRhcmVhXCJcblxuXG57LXwgUmVwcmVzZW50cyB0aGUgcmVzdWx0IG9mIGEgY2FsY3VsYXRpb24uIC19XG5vdXRwdXQgOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbm91dHB1dCA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwib3V0cHV0XCJcblxuXG57LXwgUmVwcmVzZW50cyB0aGUgY29tcGxldGlvbiBwcm9ncmVzcyBvZiBhIHRhc2suIC19XG5wcm9ncmVzcyA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xucHJvZ3Jlc3MgPVxuICBFbG0uS2VybmVsLlZpcnR1YWxEb20ubm9kZSBcInByb2dyZXNzXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIHNjYWxhciBtZWFzdXJlbWVudCAob3IgYSBmcmFjdGlvbmFsIHZhbHVlKSwgd2l0aGluIGEga25vd25cbnJhbmdlLlxuLX1cbm1ldGVyIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5tZXRlciA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwibWV0ZXJcIlxuXG5cbi0tIElOVEVSQUNUSVZFIEVMRU1FTlRTXG5cbnstfCBSZXByZXNlbnRzIGEgd2lkZ2V0IGZyb20gd2hpY2ggdGhlIHVzZXIgY2FuIG9idGFpbiBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG5vciBjb250cm9scy5cbi19XG5kZXRhaWxzIDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5kZXRhaWxzID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJkZXRhaWxzXCJcblxuXG57LXwgUmVwcmVzZW50cyBhIHN1bW1hcnksIGNhcHRpb24sIG9yIGxlZ2VuZCBmb3IgYSBnaXZlbiBgZGV0YWlsc2AuIC19XG5zdW1tYXJ5IDogTGlzdCAoQXR0cmlidXRlIG1zZykgLT4gTGlzdCAoSHRtbCBtc2cpIC0+IEh0bWwgbXNnXG5zdW1tYXJ5ID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJzdW1tYXJ5XCJcblxuXG57LXwgUmVwcmVzZW50cyBhIGNvbW1hbmQgdGhhdCB0aGUgdXNlciBjYW4gaW52b2tlLiAtfVxubWVudWl0ZW0gOiBMaXN0IChBdHRyaWJ1dGUgbXNnKSAtPiBMaXN0IChIdG1sIG1zZykgLT4gSHRtbCBtc2dcbm1lbnVpdGVtID1cbiAgRWxtLktlcm5lbC5WaXJ0dWFsRG9tLm5vZGUgXCJtZW51aXRlbVwiXG5cblxuey18IFJlcHJlc2VudHMgYSBsaXN0IG9mIGNvbW1hbmRzLiAtfVxubWVudSA6IExpc3QgKEF0dHJpYnV0ZSBtc2cpIC0+IExpc3QgKEh0bWwgbXNnKSAtPiBIdG1sIG1zZ1xubWVudSA9XG4gIEVsbS5LZXJuZWwuVmlydHVhbERvbS5ub2RlIFwibWVudVwiXG5cbid9KSkKCQldKSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkZmlsZV90cmVlX19fX2VsbV9rZXJuZWxfbW9kdWxlc19odG1sX3NyYyA9IEEyKAoJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJG1hcEJsb2JzLAoJZnVuY3Rpb24gKGJsb2JWYWx1ZSkgewoJCXJldHVybiB7dXRmODogYmxvYlZhbHVlLnV0Zjh9OwoJfSwKCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRtYXBGaWxlVHJlZU5vZGVGcm9tR2VuZXJhdGVkKCRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkZmlsZV90cmVlX25vZGVfZWxtX2tlcm5lbF9tb2R1bGVzX2h0bWxfc3JjKSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJGZpbGVfdHJlZV9ub2RlX2VsbV9rZXJuZWxfbW9kdWxlc19odHRwX3NyYyA9ICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkVHJlZU5vZGUoCglfTGlzdF9mcm9tQXJyYXkoCgkJWwoJCQlfVXRpbHNfVHVwbGUyKAoJCQknSHR0cC5lbG0nLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJEJsb2JOb2RlKAoJCQkJe3V0Zjg6ICdlZmZlY3QgbW9kdWxlIEh0dHAgd2hlcmUgeyBjb21tYW5kID0gTXlDbWQsIHN1YnNjcmlwdGlvbiA9IE15U3ViIH0gZXhwb3NpbmdcbiAgKCBnZXQsIHBvc3QsIHJlcXVlc3RcbiAgLCBIZWFkZXIsIGhlYWRlclxuICAsIEJvZHksIGVtcHR5Qm9keSwgc3RyaW5nQm9keSwganNvbkJvZHksIGZpbGVCb2R5LCBieXRlc0JvZHlcbiAgLCBtdWx0aXBhcnRCb2R5LCBQYXJ0LCBzdHJpbmdQYXJ0LCBmaWxlUGFydCwgYnl0ZXNQYXJ0XG4gICwgRXhwZWN0LCBleHBlY3RTdHJpbmcsIGV4cGVjdEpzb24sIGV4cGVjdEJ5dGVzLCBleHBlY3RXaGF0ZXZlciwgRXJyb3IoLi4pXG4gICwgdHJhY2ssIFByb2dyZXNzKC4uKSwgZnJhY3Rpb25TZW50LCBmcmFjdGlvblJlY2VpdmVkXG4gICwgY2FuY2VsXG4gICwgcmlza3lSZXF1ZXN0XG4gICwgZXhwZWN0U3RyaW5nUmVzcG9uc2UsIGV4cGVjdEJ5dGVzUmVzcG9uc2UsIFJlc3BvbnNlKC4uKSwgTWV0YWRhdGFcbiAgLCB0YXNrLCBSZXNvbHZlciwgc3RyaW5nUmVzb2x2ZXIsIGJ5dGVzUmVzb2x2ZXIsIHJpc2t5VGFza1xuICApXG5cbnstfCBTZW5kIEhUVFAgcmVxdWVzdHMuXG5cbiMgUmVxdWVzdHNcbkBkb2NzIGdldCwgcG9zdCwgcmVxdWVzdFxuXG4jIEhlYWRlclxuQGRvY3MgSGVhZGVyLCBoZWFkZXJcblxuIyBCb2R5XG5AZG9jcyBCb2R5LCBlbXB0eUJvZHksIHN0cmluZ0JvZHksIGpzb25Cb2R5LCBmaWxlQm9keSwgYnl0ZXNCb2R5XG5cbiMgQm9keSBQYXJ0c1xuQGRvY3MgbXVsdGlwYXJ0Qm9keSwgUGFydCwgc3RyaW5nUGFydCwgZmlsZVBhcnQsIGJ5dGVzUGFydFxuXG4jIEV4cGVjdFxuQGRvY3MgRXhwZWN0LCBleHBlY3RTdHJpbmcsIGV4cGVjdEpzb24sIGV4cGVjdEJ5dGVzLCBleHBlY3RXaGF0ZXZlciwgRXJyb3JcblxuIyBQcm9ncmVzc1xuQGRvY3MgdHJhY2ssIFByb2dyZXNzLCBmcmFjdGlvblNlbnQsIGZyYWN0aW9uUmVjZWl2ZWRcblxuIyBDYW5jZWxcbkBkb2NzIGNhbmNlbFxuXG4jIFJpc2t5IFJlcXVlc3RzXG5AZG9jcyByaXNreVJlcXVlc3RcblxuIyBFbGFib3JhdGUgRXhwZWN0YXRpb25zXG5AZG9jcyBleHBlY3RTdHJpbmdSZXNwb25zZSwgZXhwZWN0Qnl0ZXNSZXNwb25zZSwgUmVzcG9uc2UsIE1ldGFkYXRhXG5cbiMgVGFza3NcbkBkb2NzIHRhc2ssIFJlc29sdmVyLCBzdHJpbmdSZXNvbHZlciwgYnl0ZXNSZXNvbHZlciwgcmlza3lUYXNrXG4tfVxuXG5cbmltcG9ydCBCeXRlcyBleHBvc2luZyAoQnl0ZXMpXG5pbXBvcnQgQnl0ZXMuRGVjb2RlIGFzIEJ5dGVzXG5pbXBvcnQgRGljdCBleHBvc2luZyAoRGljdClcbmltcG9ydCBFbG0uS2VybmVsLkh0dHBcbmltcG9ydCBGaWxlIGV4cG9zaW5nIChGaWxlKVxuaW1wb3J0IEpzb24uRGVjb2RlIGFzIERlY29kZVxuaW1wb3J0IEpzb24uRW5jb2RlIGFzIEVuY29kZVxuaW1wb3J0IFByb2Nlc3NcbmltcG9ydCBUYXNrIGV4cG9zaW5nIChUYXNrKVxuXG5cblxuLS0gUkVRVUVTVFNcblxuXG57LXwgQ3JlYXRlIGEgYEdFVGAgcmVxdWVzdC5cblxuICAgIGltcG9ydCBIdHRwXG5cbiAgICB0eXBlIE1zZ1xuICAgICAgPSBHb3RUZXh0IChSZXN1bHQgSHR0cC5FcnJvciBTdHJpbmcpXG5cbiAgICBnZXRQdWJsaWNPcGluaW9uIDogQ21kIE1zZ1xuICAgIGdldFB1YmxpY09waW5pb24gPVxuICAgICAgSHR0cC5nZXRcbiAgICAgICAgeyB1cmwgPSBcImh0dHBzOi8vZWxtLWxhbmcub3JnL2Fzc2V0cy9wdWJsaWMtb3Bpbmlvbi50eHRcIlxuICAgICAgICAsIGV4cGVjdCA9IEh0dHAuZXhwZWN0U3RyaW5nIEdvdFRleHRcbiAgICAgICAgfVxuXG5Zb3UgY2FuIHVzZSBmdW5jdGlvbnMgbGlrZSBbYGV4cGVjdFN0cmluZ2BdKCNleHBlY3RTdHJpbmcpIGFuZFxuW2BleHBlY3RKc29uYF0oI2V4cGVjdEpzb24pIHRvIGludGVycHJldCB0aGUgcmVzcG9uc2UgaW4gZGlmZmVyZW50IHdheXMuIEluXG50aGlzIGV4YW1wbGUsIHdlIGFyZSBleHBlY3RpbmcgdGhlIHJlc3BvbnNlIGJvZHkgdG8gYmUgYSBgU3RyaW5nYCBjb250YWluaW5nXG50aGUgZnVsbCB0ZXh0IG9mIF9QdWJsaWMgT3Bpbmlvbl/CoGJ5IFdhbHRlciBMaXBwbWFubi5cblxuKipOb3RlOioqIFVzZSBbYGVsbS91cmxgXSgvcGFja2FnZXMvZWxtL3VybC9sYXRlc3QpIHRvIGJ1aWxkIHJlbGlhYmxlIFVSTHMuXG4tfVxuZ2V0XG4gIDogeyB1cmwgOiBTdHJpbmdcbiAgICAsIGV4cGVjdCA6IEV4cGVjdCBtc2dcbiAgICB9XG4gIC0+IENtZCBtc2dcbmdldCByID1cbiAgcmVxdWVzdFxuICAgIHsgbWV0aG9kID0gXCJHRVRcIlxuICAgICwgaGVhZGVycyA9IFtdXG4gICAgLCB1cmwgPSByLnVybFxuICAgICwgYm9keSA9IGVtcHR5Qm9keVxuICAgICwgZXhwZWN0ID0gci5leHBlY3RcbiAgICAsIHRpbWVvdXQgPSBOb3RoaW5nXG4gICAgLCB0cmFja2VyID0gTm90aGluZ1xuICAgIH1cblxuXG57LXwgQ3JlYXRlIGEgYFBPU1RgIHJlcXVlc3QuIFNvIGltYWdpbmUgd2Ugd2FudCB0byBzZW5kIGEgUE9TVCByZXF1ZXN0IGZvclxuc29tZSBKU09OIGRhdGEuIEl0IG1pZ2h0IGxvb2sgbGlrZSB0aGlzOlxuXG4gICAgaW1wb3J0IEh0dHBcbiAgICBpbXBvcnQgSnNvbi5EZWNvZGUgZXhwb3NpbmcgKGxpc3QsIHN0cmluZylcblxuICAgIHR5cGUgTXNnXG4gICAgICA9IEdvdEJvb2tzIChSZXN1bHQgSHR0cC5FcnJvciAoTGlzdCBTdHJpbmcpKVxuXG4gICAgcG9zdEJvb2tzIDogQ21kIE1zZ1xuICAgIHBvc3RCb29rcyA9XG4gICAgICBIdHRwLnBvc3RcbiAgICAgICAgeyB1cmwgPSBcImh0dHBzOi8vZXhhbXBsZS5jb20vYm9va3NcIlxuICAgICAgICAsIGJvZHkgPSBIdHRwLmVtcHR5Qm9keVxuICAgICAgICAsIGV4cGVjdCA9IEh0dHAuZXhwZWN0SnNvbiBHb3RCb29rcyAobGlzdCBzdHJpbmcpXG4gICAgICAgIH1cblxuTm90aWNlIHRoYXQgd2UgYXJlIHVzaW5nIFtgZXhwZWN0SnNvbmBdKCNleHBlY3RKc29uKSB0byBpbnRlcnByZXQgdGhlIHJlc3BvbnNlXG5hcyBKU09OLiBZb3UgY2FuIGxlYXJuIG1vcmUgYWJvdXQgaG93IEpTT04gZGVjb2RlcnMgd29yayBbaGVyZV1bXSBpbiB0aGUgZ3VpZGUuXG5cbldlIGRpZCBub3QgcHV0IGFueXRoaW5nIGluIHRoZSBib2R5IG9mIG91ciByZXF1ZXN0LCBidXQgeW91IGNhbiB1c2UgZnVuY3Rpb25zXG5saWtlIFtgc3RyaW5nQm9keWBdKCNzdHJpbmdCb2R5KSBhbmQgW2Bqc29uQm9keWBdKCNqc29uQm9keSkgaWYgeW91IG5lZWQgdG9cbnNlbmQgaW5mb3JtYXRpb24gdG8gdGhlIHNlcnZlci5cblxuW2hlcmVdOiBodHRwczovL2d1aWRlLmVsbS1sYW5nLm9yZy9pbnRlcm9wL2pzb24uaHRtbFxuLX1cbnBvc3RcbiAgOiB7IHVybCA6IFN0cmluZ1xuICAgICwgYm9keSA6IEJvZHlcbiAgICAsIGV4cGVjdCA6IEV4cGVjdCBtc2dcbiAgICB9XG4gIC0+IENtZCBtc2dcbnBvc3QgciA9XG4gIHJlcXVlc3RcbiAgICB7IG1ldGhvZCA9IFwiUE9TVFwiXG4gICAgLCBoZWFkZXJzID0gW11cbiAgICAsIHVybCA9IHIudXJsXG4gICAgLCBib2R5ID0gci5ib2R5XG4gICAgLCBleHBlY3QgPSByLmV4cGVjdFxuICAgICwgdGltZW91dCA9IE5vdGhpbmdcbiAgICAsIHRyYWNrZXIgPSBOb3RoaW5nXG4gICAgfVxuXG5cbnstfCBDcmVhdGUgYSBjdXN0b20gcmVxdWVzdC4gRm9yIGV4YW1wbGUsIGEgUFVUIGZvciBmaWxlcyBtaWdodCBsb29rIGxpa2UgdGhpczpcblxuICAgIGltcG9ydCBGaWxlXG4gICAgaW1wb3J0IEh0dHBcblxuICAgIHR5cGUgTXNnID0gVXBsb2FkZWQgKFJlc3VsdCBIdHRwLkVycm9yICgpKVxuXG4gICAgdXBsb2FkIDogRmlsZS5GaWxlIC0+IENtZCBNc2dcbiAgICB1cGxvYWQgZmlsZSA9XG4gICAgICBIdHRwLnJlcXVlc3RcbiAgICAgICAgeyBtZXRob2QgPSBcIlBVVFwiXG4gICAgICAgICwgaGVhZGVycyA9IFtdXG4gICAgICAgICwgdXJsID0gXCJodHRwczovL2V4YW1wbGUuY29tL3B1Ymxpc2hcIlxuICAgICAgICAsIGJvZHkgPSBIdHRwLmZpbGVCb2R5IGZpbGVcbiAgICAgICAgLCBleHBlY3QgPSBIdHRwLmV4cGVjdFdoYXRldmVyIFVwbG9hZGVkXG4gICAgICAgICwgdGltZW91dCA9IE5vdGhpbmdcbiAgICAgICAgLCB0cmFja2VyID0gTm90aGluZ1xuICAgICAgICB9XG5cbkl0IGxldHMgeW91IHNldCBjdXN0b20gYGhlYWRlcnNgIGFzIG5lZWRlZC4gVGhlIGB0aW1lb3V0YCBpcyB0aGUgbnVtYmVyIG9mXG5taWxsaXNlY29uZHMgeW91IGFyZSB3aWxsaW5nIHRvIHdhaXQgYmVmb3JlIGdpdmluZyB1cC4gVGhlIGB0cmFja2VyYCBsZXRzIHlvdVxuW2BjYW5jZWxgXSgjY2FuY2VsKSBhbmQgW2B0cmFja2BdKCN0cmFjaykgcmVxdWVzdHMuXG4tfVxucmVxdWVzdFxuICA6IHsgbWV0aG9kIDogU3RyaW5nXG4gICAgLCBoZWFkZXJzIDogTGlzdCBIZWFkZXJcbiAgICAsIHVybCA6IFN0cmluZ1xuICAgICwgYm9keSA6IEJvZHlcbiAgICAsIGV4cGVjdCA6IEV4cGVjdCBtc2dcbiAgICAsIHRpbWVvdXQgOiBNYXliZSBGbG9hdFxuICAgICwgdHJhY2tlciA6IE1heWJlIFN0cmluZ1xuICAgIH1cbiAgLT4gQ21kIG1zZ1xucmVxdWVzdCByID1cbiAgY29tbWFuZCA8fCBSZXF1ZXN0IDx8XG4gICAgeyBtZXRob2QgPSByLm1ldGhvZFxuICAgICwgaGVhZGVycyA9IHIuaGVhZGVyc1xuICAgICwgdXJsID0gci51cmxcbiAgICAsIGJvZHkgPSByLmJvZHlcbiAgICAsIGV4cGVjdCA9IHIuZXhwZWN0XG4gICAgLCB0aW1lb3V0ID0gci50aW1lb3V0XG4gICAgLCB0cmFja2VyID0gci50cmFja2VyXG4gICAgLCBhbGxvd0Nvb2tpZXNGcm9tT3RoZXJEb21haW5zID0gRmFsc2VcbiAgICB9XG5cblxuXG4tLSBIRUFERVJTXG5cblxuey18IEFuIEhUVFAgaGVhZGVyIGZvciBjb25maWd1cmluZyByZXF1ZXN0cy4gU2VlIGEgYnVuY2ggb2YgY29tbW9uIGhlYWRlcnNcbltoZXJlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX0hUVFBfaGVhZGVyX2ZpZWxkcykuXG4tfVxudHlwZSBIZWFkZXIgPSBIZWFkZXIgU3RyaW5nIFN0cmluZ1xuXG5cbnstfCBDcmVhdGUgYSBgSGVhZGVyYC5cblxuICAgIGhlYWRlciBcIklmLU1vZGlmaWVkLVNpbmNlXCIgXCJTYXQgMjkgT2N0IDE5OTQgMTk6NDM6MzEgR01UXCJcbiAgICBoZWFkZXIgXCJNYXgtRm9yd2FyZHNcIiBcIjEwXCJcbiAgICBoZWFkZXIgXCJYLVJlcXVlc3RlZC1XaXRoXCIgXCJYTUxIdHRwUmVxdWVzdFwiXG4tfVxuaGVhZGVyIDogU3RyaW5nIC0+IFN0cmluZyAtPiBIZWFkZXJcbmhlYWRlciA9XG4gIEhlYWRlclxuXG5cblxuLS0gQk9EWVxuXG5cbnstfCBSZXByZXNlbnRzIHRoZSBib2R5IG9mIGEgYFJlcXVlc3RgLlxuLX1cbnR5cGUgQm9keSA9IEJvZHlcblxuXG57LXwgQ3JlYXRlIGFuIGVtcHR5IGJvZHkgZm9yIHlvdXIgYFJlcXVlc3RgLiBUaGlzIGlzIHVzZWZ1bCBmb3IgR0VUIHJlcXVlc3RzXG5hbmQgUE9TVCByZXF1ZXN0cyB3aGVyZSB5b3UgYXJlIG5vdCBzZW5kaW5nIGFueSBkYXRhLlxuLX1cbmVtcHR5Qm9keSA6IEJvZHlcbmVtcHR5Qm9keSA9XG4gIEVsbS5LZXJuZWwuSHR0cC5lbXB0eUJvZHlcblxuXG57LXwgUHV0IHNvbWUgSlNPTiB2YWx1ZSBpbiB0aGUgYm9keSBvZiB5b3VyIGBSZXF1ZXN0YC5cblxuTWF5YmUgeW91IHdhbnQgdG8gc2VhcmNoIGZvciAxMCBib29rcyByZWxldmFudCB0byBhIGNlcnRhaW4gdG9waWM6XG5cbiAgICBpbXBvcnQgSHR0cFxuICAgIGltcG9ydCBKc29uLkVuY29kZSBhcyBFXG5cbiAgICBzZWFyY2hGb3JCb29rcyA6IFN0cmluZyAtPiBDbWQgTXNnXG4gICAgc2VhcmNoRm9yQm9va3MgdG9waWMgPVxuICAgICAgSHR0cC5wb3N0XG4gICAgICAgIHsgdXJsID0gXCJodHRwczovL2FwaS5leGFtcGxlLmNvbS9ib29rc1wiXG4gICAgICAgICwgYm9keSA9XG4gICAgICAgICAgICBIdHRwLmpzb25Cb2R5IDx8XG4gICAgICAgICAgICAgIEUub2JqZWN0XG4gICAgICAgICAgICAgICAgWyAoIFwidG9waWNcIiwgRS5zdHJpbmcgdG9waWMgKVxuICAgICAgICAgICAgICAgICwgKCBcImxpbWl0XCIsIEUuaW50IDEwIClcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICwgZXhwZWN0ID1cbiAgICAgICAgICAgIEh0dHAuZXhwZWN0SnNvbiBHb3RCb29rcyBib29rc0RlY29kZXJcbiAgICAgICAgfVxuXG4qKk5vdGU6KiogVGhpcyB3aWxsIGF1dG9tYXRpY2FsbHkgYWRkIHRoZSBgQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uYCBoZWFkZXIuXG4tfVxuanNvbkJvZHkgOiBFbmNvZGUuVmFsdWUgLT4gQm9keVxuanNvbkJvZHkgdmFsdWUgPVxuICBFbG0uS2VybmVsLkh0dHAucGFpciBcImFwcGxpY2F0aW9uL2pzb25cIiAoRW5jb2RlLmVuY29kZSAwIHZhbHVlKVxuXG5cbnstfCBQdXQgc29tZSBzdHJpbmcgaW4gdGhlIGJvZHkgb2YgeW91ciBgUmVxdWVzdGAuIERlZmluaW5nIGBqc29uQm9keWAgbG9va3Ncbmxpa2UgdGhpczpcblxuICAgIGltcG9ydCBKc29uLkVuY29kZSBhcyBFbmNvZGVcblxuICAgIGpzb25Cb2R5IDogRW5jb2RlLlZhbHVlIC0+IEJvZHlcbiAgICBqc29uQm9keSB2YWx1ZSA9XG4gICAgICBzdHJpbmdCb2R5IFwiYXBwbGljYXRpb24vanNvblwiIChFbmNvZGUuZW5jb2RlIDAgdmFsdWUpXG5cblRoZSBmaXJzdCBhcmd1bWVudCBpcyBhIFtNSU1FIHR5cGVdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01lZGlhX3R5cGUpXG5vZiB0aGUgYm9keS4gU29tZSBzZXJ2ZXJzIGFyZSBzdHJpY3QgYWJvdXQgdGhpcyFcbi19XG5zdHJpbmdCb2R5IDogU3RyaW5nIC0+IFN0cmluZyAtPiBCb2R5XG5zdHJpbmdCb2R5ID1cbiAgRWxtLktlcm5lbC5IdHRwLnBhaXJcblxuXG57LXwgUHV0IHNvbWUgYEJ5dGVzYCBpbiB0aGUgYm9keSBvZiB5b3VyIGBSZXF1ZXN0YC4gVGhpcyBhbGxvd3MgeW91IHRvIHVzZVxuW2BlbG0vYnl0ZXNgXSgvcGFja2FnZXMvZWxtL2J5dGVzL2xhdGVzdCkgdG8gaGF2ZSBmdWxsIGNvbnRyb2wgb3ZlciB0aGUgYmluYXJ5XG5yZXByZXNlbnRhdGlvbiBvZiB0aGUgZGF0YSB5b3UgYXJlIHNlbmRpbmcuIEZvciBleGFtcGxlLCB5b3UgY291bGQgY3JlYXRlIGFuXG5gYXJjaGl2ZS56aXBgIGZpbGUgYW5kIHNlbmQgaXQgYWxvbmcgbGlrZSB0aGlzOlxuXG4gICAgaW1wb3J0IEJ5dGVzIGV4cG9zaW5nIChCeXRlcylcblxuICAgIHppcEJvZHkgOiBCeXRlcyAtPiBCb2R5XG4gICAgemlwQm9keSBieXRlcyA9XG4gICAgICBieXRlc0JvZHkgXCJhcHBsaWNhdGlvbi96aXBcIiBieXRlc1xuXG5UaGUgZmlyc3QgYXJndW1lbnQgaXMgYSBbTUlNRSB0eXBlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NZWRpYV90eXBlKVxub2YgdGhlIGJvZHkuIEluIG90aGVyIHNjZW5hcmlvcyB5b3UgbWF5IHdhbnQgdG8gdXNlIE1JTUUgdHlwZXMgbGlrZSBgaW1hZ2UvcG5nYFxub3IgYGltYWdlL2pwZWdgIGluc3RlYWQuXG5cbioqTm90ZToqKiBVc2UgW2B0cmFja2BdKCN0cmFjaykgdG8gdHJhY2sgdXBsb2FkIHByb2dyZXNzLlxuLX1cbmJ5dGVzQm9keSA6IFN0cmluZyAtPiBCeXRlcyAtPiBCb2R5XG5ieXRlc0JvZHkgPVxuICBFbG0uS2VybmVsLkh0dHAucGFpclxuXG5cbnstfCBVc2UgYSBmaWxlIGFzIHRoZSBib2R5IG9mIHlvdXIgYFJlcXVlc3RgLiBXaGVuIHNvbWVvbmUgdXBsb2FkcyBhbiBpbWFnZVxuaW50byB0aGUgYnJvd3NlciB3aXRoIFtgZWxtL2ZpbGVgXSgvcGFja2FnZXMvZWxtL2ZpbGUvbGF0ZXN0KSB5b3UgY2FuIGZvcndhcmRcbml0IHRvIGEgc2VydmVyLlxuXG5UaGlzIHdpbGwgYXV0b21hdGljYWxseSBzZXQgdGhlIGBDb250ZW50LVR5cGVgIHRvIHRoZSBNSU1FIHR5cGUgb2YgdGhlIGZpbGUuXG5cbioqTm90ZToqKiBVc2UgW2B0cmFja2BdKCN0cmFjaykgdG8gdHJhY2sgdXBsb2FkIHByb2dyZXNzLlxuLX1cbmZpbGVCb2R5IDogRmlsZSAtPiBCb2R5XG5maWxlQm9keSA9XG4gIEVsbS5LZXJuZWwuSHR0cC5wYWlyIFwiXCJcblxuXG5cbi0tIFBBUlRTXG5cblxuey18IFdoZW4gc29tZW9uZSBjbGlja3Mgc3VibWl0IG9uIHRoZSBgPGZvcm0+YCwgYnJvd3NlcnMgc2VuZCBhIHNwZWNpYWwgSFRUUFxucmVxdWVzdCB3aXRoIGFsbCB0aGUgZm9ybSBkYXRhLiBTb21ldGhpbmcgbGlrZSB0aGlzOlxuXG5gYGBcblBPU1QgL3Rlc3QuaHRtbCBIVFRQLzEuMVxuSG9zdDogZXhhbXBsZS5vcmdcbkNvbnRlbnQtVHlwZTogbXVsdGlwYXJ0L2Zvcm0tZGF0YTtib3VuZGFyeT1cIjdNQTRZV3hrVHJadTBnV1wiXG5cbi0tN01BNFlXeGtUclp1MGdXXG5Db250ZW50LURpc3Bvc2l0aW9uOiBmb3JtLWRhdGE7IG5hbWU9XCJ0aXRsZVwiXG5cblRyaXAgdG8gTG9uZG9uXG4tLTdNQTRZV3hrVHJadTBnV1xuQ29udGVudC1EaXNwb3NpdGlvbjogZm9ybS1kYXRhOyBuYW1lPVwiYWxidW1bXVwiOyBmaWxlbmFtZT1cInBhcmxpbWVudC5qcGdcIlxuXG4uLi5SQVcuLi5JTUFHRS4uLkJJVFMuLi5cbi0tN01BNFlXeGtUclp1MGdXLS1cbmBgYFxuXG5UaGlzIHdhcyB0aGUgb25seSB3YXkgdG8gc2VuZCBmaWxlcyBmb3IgYSBsb25nIHRpbWUsIHNvIG1hbnkgc2VydmVycyBleHBlY3RcbmRhdGEgaW4gdGhpcyBmb3JtYXQuICoqVGhlIGBtdWx0aXBhcnRCb2R5YCBmdW5jdGlvbiBsZXRzIHlvdSBjcmVhdGUgdGhlc2VcbnJlcXVlc3RzLioqIEZvciBleGFtcGxlLCB0byB1cGxvYWQgYSBwaG90byBhbGJ1bSBhbGwgYXQgb25jZSwgeW91IGNvdWxkIGNyZWF0ZVxuYSBib2R5IGxpa2UgdGhpczpcblxuICAgIG11bHRpcGFydEJvZHlcbiAgICAgIFsgc3RyaW5nUGFydCBcInRpdGxlXCIgXCJUcmlwIHRvIExvbmRvblwiXG4gICAgICAsIGZpbGVQYXJ0IFwiYWxidW1bXVwiIGZpbGUxXG4gICAgICAsIGZpbGVQYXJ0IFwiYWxidW1bXVwiIGZpbGUyXG4gICAgICAsIGZpbGVQYXJ0IFwiYWxidW1bXVwiIGZpbGUzXG4gICAgICBdXG5cbkFsbCBvZiB0aGUgYm9keSBwYXJ0cyBuZWVkIHRvIGhhdmUgYSBuYW1lLiBOYW1lcyBjYW4gYmUgcmVwZWF0ZWQuIEFkZGluZyB0aGVcbmBbXWAgb24gcmVwZWF0ZWQgbmFtZXMgaXMgYSBjb252ZW50aW9uIGZyb20gUEhQLiBJdCBzZWVtcyB3ZWlyZCwgYnV0IEkgc2VlIGl0XG5lbm91Z2ggdG8gbWVudGlvbiBpdC4gWW91IGRvIG5vdCBoYXZlIHRvIGRvIGl0IHRoYXQgd2F5LCBlc3BlY2lhbGx5IGlmIHlvdXJcbnNlcnZlciB1c2VzIHNvbWUgb3RoZXIgY29udmVudGlvbiFcblxuVGhlIGBDb250ZW50LVR5cGU6IG11bHRpcGFydC9mb3JtLWRhdGFgIGhlYWRlciBpcyBhdXRvbWF0aWNhbGx5IHNldCB3aGVuXG5jcmVhdGluZyBhIGJvZHkgdGhpcyB3YXkuXG5cbioqTm90ZToqKiBVc2UgW2B0cmFja2BdKCN0cmFjaykgdG8gdHJhY2sgdXBsb2FkIHByb2dyZXNzLlxuLX1cbm11bHRpcGFydEJvZHkgOiBMaXN0IFBhcnQgLT4gQm9keVxubXVsdGlwYXJ0Qm9keSBwYXJ0cyA9XG4gIEVsbS5LZXJuZWwuSHR0cC5wYWlyIFwiXCIgKEVsbS5LZXJuZWwuSHR0cC50b0Zvcm1EYXRhIHBhcnRzKVxuXG5cbnstfCBPbmUgcGFydCBvZiBhIGBtdWx0aXBhcnRCb2R5YC5cbi19XG50eXBlIFBhcnQgPSBQYXJ0XG5cblxuey18IEEgcGFydCB0aGF0IGNvbnRhaW5zIGBTdHJpbmdgIGRhdGEuXG5cbiAgICBtdWx0aXBhcnRCb2R5XG4gICAgICBbIHN0cmluZ1BhcnQgXCJ0aXRsZVwiIFwiVG9tXCJcbiAgICAgICwgZmlsZVBhcnQgXCJwaG90b1wiIHRvbVBuZ1xuICAgICAgXVxuLX1cbnN0cmluZ1BhcnQgOiBTdHJpbmcgLT4gU3RyaW5nIC0+IFBhcnRcbnN0cmluZ1BhcnQgPVxuICBFbG0uS2VybmVsLkh0dHAucGFpclxuXG5cbnstfCBBIHBhcnQgdGhhdCBjb250YWlucyBhIGZpbGUuIFlvdSBjYW4gdXNlXG5bYGVsbS9maWxlYF0oL3BhY2thZ2VzL2VsbS9maWxlL2xhdGVzdCkgdG8gZ2V0IGZpbGVzIGxvYWRlZCBpbnRvIHRoZVxuYnJvd3Nlci4gRnJvbSB0aGVyZSwgeW91IGNhbiBzZW5kIGl0IGFsb25nIHRvIGEgc2VydmVyIGxpa2UgdGhpczpcblxuICAgIG11bHRpcGFydEJvZHlcbiAgICAgIFsgc3RyaW5nUGFydCBcInByb2R1Y3RcIiBcIklrZWEgQmVrYW50XCJcbiAgICAgICwgc3RyaW5nUGFydCBcImRlc2NyaXB0aW9uXCIgXCJHcmVhdCBkZXNrIGZvciBob21lIG9mZmljZS5cIlxuICAgICAgLCBmaWxlUGFydCBcImltYWdlW11cIiBmaWxlMVxuICAgICAgLCBmaWxlUGFydCBcImltYWdlW11cIiBmaWxlMlxuICAgICAgLCBmaWxlUGFydCBcImltYWdlW11cIiBmaWxlM1xuICAgICAgXVxuLX1cbmZpbGVQYXJ0IDogU3RyaW5nIC0+IEZpbGUgLT4gUGFydFxuZmlsZVBhcnQgPVxuICBFbG0uS2VybmVsLkh0dHAucGFpclxuXG5cbnstfCBBIHBhcnQgdGhhdCBjb250YWlucyBieXRlcywgYWxsb3dpbmcgeW91IHRvIHVzZVxuW2BlbG0vYnl0ZXNgXSgvcGFja2FnZXMvZWxtL2J5dGVzL2xhdGVzdCkgdG8gZW5jb2RlIGRhdGEgZXhhY3RseSBpbiB0aGUgZm9ybWF0XG55b3UgbmVlZC5cblxuICAgIG11bHRpcGFydEJvZHlcbiAgICAgIFsgc3RyaW5nUGFydCBcInRpdGxlXCIgXCJUb21cIlxuICAgICAgLCBieXRlc1BhcnQgXCJwaG90b1wiIFwiaW1hZ2UvcG5nXCIgYnl0ZXNcbiAgICAgIF1cblxuKipOb3RlOioqIFlvdSBtdXN0IHByb3ZpZGUgYSBNSU1FIHR5cGUgc28gdGhhdCB0aGUgcmVjZWl2ZXIgaGFzIGNsdWVzIGFib3V0XG5ob3cgdG8gaW50ZXJwcmV0IHRoZSBieXRlcy5cbi19XG5ieXRlc1BhcnQgOiBTdHJpbmcgLT4gU3RyaW5nIC0+IEJ5dGVzIC0+IFBhcnRcbmJ5dGVzUGFydCBrZXkgbWltZSBieXRlcyA9XG4gIEVsbS5LZXJuZWwuSHR0cC5wYWlyIGtleSAoRWxtLktlcm5lbC5IdHRwLmJ5dGVzVG9CbG9iIG1pbWUgYnl0ZXMpXG5cblxuXG4tLSBFWFBFQ1RcblxuXG57LXwgTG9naWMgZm9yIGludGVycHJldGluZyBhIHJlc3BvbnNlIGJvZHkuXG4tfVxudHlwZSBFeHBlY3QgbXNnID0gRXhwZWN0XG5cblxuey18IEV4cGVjdCB0aGUgcmVzcG9uc2UgYm9keSB0byBiZSBhIGBTdHJpbmdgLiBMaWtlIHdoZW4gZ2V0dGluZyB0aGUgZnVsbCB0ZXh0XG5vZiBhIGJvb2s6XG5cbiAgICBpbXBvcnQgSHR0cFxuXG4gICAgdHlwZSBNc2dcbiAgICAgID0gR290VGV4dCAoUmVzdWx0IEh0dHAuRXJyb3IgU3RyaW5nKVxuXG4gICAgZ2V0UHVibGljT3BpbmlvbiA6IENtZCBNc2dcbiAgICBnZXRQdWJsaWNPcGluaW9uID1cbiAgICAgIEh0dHAuZ2V0XG4gICAgICAgIHsgdXJsID0gXCJodHRwczovL2VsbS1sYW5nLm9yZy9hc3NldHMvcHVibGljLW9waW5pb24udHh0XCJcbiAgICAgICAgLCBleHBlY3QgPSBIdHRwLmV4cGVjdFN0cmluZyBHb3RUZXh0XG4gICAgICAgIH1cblxuVGhlIHJlc3BvbnNlIGJvZHkgaXMgYWx3YXlzIHNvbWUgc2VxdWVuY2Ugb2YgYnl0ZXMsIGJ1dCBpbiB0aGlzIGNhc2UsIHdlXG5leHBlY3QgaXQgdG8gYmUgVVRGLTggZW5jb2RlZCB0ZXh0IHRoYXQgY2FuIGJlIHR1cm5lZCBpbnRvIGEgYFN0cmluZ2AuXG4tfVxuZXhwZWN0U3RyaW5nIDogKFJlc3VsdCBFcnJvciBTdHJpbmcgLT4gbXNnKSAtPiBFeHBlY3QgbXNnXG5leHBlY3RTdHJpbmcgdG9Nc2cgPVxuICBleHBlY3RTdHJpbmdSZXNwb25zZSB0b01zZyAocmVzb2x2ZSBPaylcblxuXG57LXwgRXhwZWN0IHRoZSByZXNwb25zZSBib2R5IHRvIGJlIEpTT04uIExpa2UgaWYgeW91IHdhbnQgdG8gZ2V0IGEgcmFuZG9tIGNhdFxuR0lGIHlvdSBtaWdodCBzYXk6XG5cbiAgICBpbXBvcnQgSHR0cFxuICAgIGltcG9ydCBKc29uLkRlY29kZSBleHBvc2luZyAoRGVjb2RlciwgZmllbGQsIHN0cmluZylcblxuICAgIHR5cGUgTXNnXG4gICAgICA9IEdvdEdpZiAoUmVzdWx0IEh0dHAuRXJyb3IgU3RyaW5nKVxuXG4gICAgZ2V0UmFuZG9tQ2F0R2lmIDogQ21kIE1zZ1xuICAgIGdldFJhbmRvbUNhdEdpZiA9XG4gICAgICBIdHRwLmdldFxuICAgICAgICB7IHVybCA9IFwiaHR0cHM6Ly9hcGkuZ2lwaHkuY29tL3YxL2dpZnMvcmFuZG9tP2FwaV9rZXk9ZGM2emFUT3hGSm16QyZ0YWc9Y2F0XCJcbiAgICAgICAgLCBleHBlY3QgPSBIdHRwLmV4cGVjdEpzb24gR290R2lmIGdpZkRlY29kZXJcbiAgICAgICAgfVxuXG4gICAgZ2lmRGVjb2RlciA6IERlY29kZXIgU3RyaW5nXG4gICAgZ2lmRGVjb2RlciA9XG4gICAgICBmaWVsZCBcImRhdGFcIiAoZmllbGQgXCJpbWFnZV91cmxcIiBzdHJpbmcpXG5cblRoZSBvZmZpY2lhbCBndWlkZSBnb2VzIHRocm91Z2ggdGhpcyBwYXJ0aWN1bGFyIGV4YW1wbGUgW2hlcmVdW10uIFRoYXQgcGFnZVxuYWxzbyBpbnRyb2R1Y2VzIFtgZWxtL2pzb25gXVtqc29uXSB0byBoZWxwIHlvdSBnZXQgc3RhcnRlZCB0dXJuaW5nIEpTT04gaW50b1xuRWxtIHZhbHVlcyBpbiBvdGhlciBzaXR1YXRpb25zLlxuXG5baGVyZV06IGh0dHBzOi8vZ3VpZGUuZWxtLWxhbmcub3JnL2ludGVyb3AvanNvbi5odG1sXG5banNvbl06IC9wYWNrYWdlcy9lbG0vanNvbi9sYXRlc3QvXG5cbklmIHRoZSBKU09OIGRlY29kZXIgZmFpbHMsIHlvdSBnZXQgYSBgQmFkQm9keWAgZXJyb3IgdGhhdCB0cmllcyB0byBleHBsYWluXG53aGF0IHdlbnQgd3JvbmcuXG4tfVxuZXhwZWN0SnNvbiA6IChSZXN1bHQgRXJyb3IgYSAtPiBtc2cpIC0+IERlY29kZS5EZWNvZGVyIGEgLT4gRXhwZWN0IG1zZ1xuZXhwZWN0SnNvbiB0b01zZyBkZWNvZGVyID1cbiAgZXhwZWN0U3RyaW5nUmVzcG9uc2UgdG9Nc2cgPHwgcmVzb2x2ZSA8fFxuICAgIFxcc3RyaW5nIC0+XG4gICAgICBSZXN1bHQubWFwRXJyb3IgRGVjb2RlLmVycm9yVG9TdHJpbmcgKERlY29kZS5kZWNvZGVTdHJpbmcgZGVjb2RlciBzdHJpbmcpXG5cblxuey18IEV4cGVjdCB0aGUgcmVzcG9uc2UgYm9keSB0byBiZSBiaW5hcnkgZGF0YS4gRm9yIGV4YW1wbGUsIG1heWJlIHlvdSBhcmVcbnRhbGtpbmcgdG8gYW4gZW5kcG9pbnQgdGhhdCBnaXZlcyBiYWNrIFByb3RvQnVmIGRhdGE6XG5cbiAgICBpbXBvcnQgQnl0ZXMuRGVjb2RlIGFzIEJ5dGVzXG4gICAgaW1wb3J0IEh0dHBcblxuICAgIHR5cGUgTXNnXG4gICAgICA9IEdvdERhdGEgKFJlc3VsdCBIdHRwLkVycm9yIERhdGEpXG5cbiAgICBnZXREYXRhIDogQ21kIE1zZ1xuICAgIGdldERhdGEgPVxuICAgICAgSHR0cC5nZXRcbiAgICAgICAgeyB1cmwgPSBcIi9kYXRhXCJcbiAgICAgICAgLCBleHBlY3QgPSBIdHRwLmV4cGVjdEJ5dGVzIEdvdERhdGEgZGF0YURlY29kZXJcbiAgICAgICAgfVxuXG4gICAgLS0gZGF0YURlY29kZXIgOiBCeXRlcy5EZWNvZGVyIERhdGFcblxuWW91IHdvdWxkIHVzZSBbYGVsbS9ieXRlc2BdKC9wYWNrYWdlcy9lbG0vYnl0ZXMvbGF0ZXN0LykgdG8gZGVjb2RlIHRoZSBiaW5hcnlcbmRhdGEgYWNjb3JkaW5nIHRvIGEgcHJvdG8gZGVmaW5pdGlvbiBmaWxlIGxpa2UgYGV4YW1wbGUucHJvdG9gLlxuXG5JZiB0aGUgZGVjb2RlciBmYWlscywgeW91IGdldCBhIGBCYWRCb2R5YCBlcnJvciB0aGF0IGp1c3QgaW5kaWNhdGVzIHRoYXRcbl9zb21ldGhpbmdfIHdlbnQgd3JvbmcuIEl0IHByb2JhYmx5IG1ha2VzIHNlbnNlIHRvIGRlYnVnIGJ5IHBlZWtpbmcgYXQgdGhlXG5ieXRlcyB5b3UgYXJlIGdldHRpbmcgaW4gdGhlIGJyb3dzZXIgZGV2ZWxvcGVyIHRvb2xzIG9yIHNvbWV0aGluZy5cbi19XG5leHBlY3RCeXRlcyA6IChSZXN1bHQgRXJyb3IgYSAtPiBtc2cpIC0+IEJ5dGVzLkRlY29kZXIgYSAtPiBFeHBlY3QgbXNnXG5leHBlY3RCeXRlcyB0b01zZyBkZWNvZGVyID1cbiAgZXhwZWN0Qnl0ZXNSZXNwb25zZSB0b01zZyA8fCByZXNvbHZlIDx8XG4gICAgXFxieXRlcyAtPlxuICAgICAgUmVzdWx0LmZyb21NYXliZSBcInVuZXhwZWN0ZWQgYnl0ZXNcIiAoQnl0ZXMuZGVjb2RlIGRlY29kZXIgYnl0ZXMpXG5cblxuey18IEV4cGVjdCB0aGUgcmVzcG9uc2UgYm9keSB0byBiZSB3aGF0ZXZlci4gSXQgZG9lcyBub3QgbWF0dGVyLiBJZ25vcmUgaXQhXG5Gb3IgZXhhbXBsZSwgeW91IG1pZ2h0IHdhbnQgdGhpcyB3aGVuIHVwbG9hZGluZyBmaWxlczpcblxuICAgIGltcG9ydCBIdHRwXG5cbiAgICB0eXBlIE1zZ1xuICAgICAgPSBVcGxvYWRlZCAoUmVzdWx0IEh0dHAuRXJyb3IgKCkpXG5cbiAgICB1cGxvYWQgOiBGaWxlIC0+IENtZCBNc2dcbiAgICB1cGxvYWQgZmlsZSA9XG4gICAgICBIdHRwLnBvc3RcbiAgICAgICAgeyB1cmwgPSBcIi91cGxvYWRcIlxuICAgICAgICAsIGJvZHkgPSBIdHRwLmZpbGVCb2R5IGZpbGVcbiAgICAgICAgLCBleHBlY3QgPSBIdHRwLmV4cGVjdFdoYXRldmVyIFVwbG9hZGVkXG4gICAgICAgIH1cblxuVGhlIHNlcnZlciBtYXkgYmUgZ2l2aW5nIGJhY2sgYSByZXNwb25zZSBib2R5LCBidXQgd2UgZG8gbm90IGNhcmUgYWJvdXQgaXQuXG4tfVxuZXhwZWN0V2hhdGV2ZXIgOiAoUmVzdWx0IEVycm9yICgpIC0+IG1zZykgLT4gRXhwZWN0IG1zZ1xuZXhwZWN0V2hhdGV2ZXIgdG9Nc2cgPVxuICBleHBlY3RCeXRlc1Jlc3BvbnNlIHRvTXNnIChyZXNvbHZlIChcXF8gLT4gT2sgKCkpKVxuXG5cbnJlc29sdmUgOiAoYm9keSAtPiBSZXN1bHQgU3RyaW5nIGEpIC0+IFJlc3BvbnNlIGJvZHkgLT4gUmVzdWx0IEVycm9yIGFcbnJlc29sdmUgdG9SZXN1bHQgcmVzcG9uc2UgPVxuICBjYXNlIHJlc3BvbnNlIG9mXG4gICAgQmFkVXJsXyB1cmwgLT4gRXJyIChCYWRVcmwgdXJsKVxuICAgIFRpbWVvdXRfIC0+IEVyciBUaW1lb3V0XG4gICAgTmV0d29ya0Vycm9yXyAtPiBFcnIgTmV0d29ya0Vycm9yXG4gICAgQmFkU3RhdHVzXyBtZXRhZGF0YSBfIC0+IEVyciAoQmFkU3RhdHVzIG1ldGFkYXRhLnN0YXR1c0NvZGUpXG4gICAgR29vZFN0YXR1c18gXyBib2R5IC0+IFJlc3VsdC5tYXBFcnJvciBCYWRCb2R5ICh0b1Jlc3VsdCBib2R5KVxuXG5cbnstfCBBIGBSZXF1ZXN0YCBjYW4gZmFpbCBpbiBhIGNvdXBsZSB3YXlzOlxuXG4tIGBCYWRVcmxgIG1lYW5zIHlvdSBkaWQgbm90IHByb3ZpZGUgYSB2YWxpZCBVUkwuXG4tIGBUaW1lb3V0YCBtZWFucyBpdCB0b29rIHRvbyBsb25nIHRvIGdldCBhIHJlc3BvbnNlLlxuLSBgTmV0d29ya0Vycm9yYCBtZWFucyB0aGUgdXNlciB0dXJuZWQgb2ZmIHRoZWlyIHdpZmksIHdlbnQgaW4gYSBjYXZlLCBldGMuXG4tIGBCYWRTdGF0dXNgIG1lYW5zIHlvdSBnb3QgYSByZXNwb25zZSBiYWNrLCBidXQgdGhlIHN0YXR1cyBjb2RlIGluZGljYXRlcyBmYWlsdXJlLlxuLSBgQmFkQm9keWAgbWVhbnMgeW91IGdvdCBhIHJlc3BvbnNlIGJhY2sgd2l0aCBhIG5pY2Ugc3RhdHVzIGNvZGUsIGJ1dCB0aGUgYm9keVxub2YgdGhlIHJlc3BvbnNlIHdhcyBzb21ldGhpbmcgdW5leHBlY3RlZC4gVGhlIGBTdHJpbmdgIGluIHRoaXMgY2FzZSBpcyBhXG5kZWJ1Z2dpbmcgbWVzc2FnZSB0aGF0IGV4cGxhaW5zIHdoYXQgd2VudCB3cm9uZyB3aXRoIHlvdXIgSlNPTiBkZWNvZGVyIG9yXG53aGF0ZXZlci5cblxuKipOb3RlOioqIFlvdSBjYW4gdXNlIFtgZXhwZWN0U3RyaW5nUmVzcG9uc2VgXSgjZXhwZWN0U3RyaW5nUmVzcG9uc2UpIGFuZFxuW2BleHBlY3RCeXRlc1Jlc3BvbnNlYF0oI2V4cGVjdEJ5dGVzUmVzcG9uc2UpIHRvIGdldCBtb3JlIGZsZXhpYmlsaXR5IG9uIHRoaXMuXG4tfVxudHlwZSBFcnJvclxuICA9IEJhZFVybCBTdHJpbmdcbiAgfCBUaW1lb3V0XG4gIHwgTmV0d29ya0Vycm9yXG4gIHwgQmFkU3RhdHVzIEludFxuICB8IEJhZEJvZHkgU3RyaW5nXG5cblxuXG4tLSBFTEFCT1JBVEUgRVhQRUNUQVRJT05TXG5cblxuey18IEV4cGVjdCBhIFtgUmVzcG9uc2VgXSgjUmVzcG9uc2UpIHdpdGggYSBgU3RyaW5nYCBib2R5LiBTbyB5b3UgY291bGQgZGVmaW5lXG55b3VyIG93biBbYGV4cGVjdEpzb25gXSgjZXhwZWN0SnNvbikgbGlrZSB0aGlzOlxuXG4gICAgaW1wb3J0IEh0dHBcbiAgICBpbXBvcnQgSnNvbi5EZWNvZGUgYXMgRFxuXG4gICAgZXhwZWN0SnNvbiA6IChSZXN1bHQgSHR0cC5FcnJvciBhIC0+IG1zZykgLT4gRC5EZWNvZGVyIGEgLT4gRXhwZWN0IG1zZ1xuICAgIGV4cGVjdEpzb24gdG9Nc2cgZGVjb2RlciA9XG4gICAgICBleHBlY3RTdHJpbmdSZXNwb25zZSB0b01zZyA8fFxuICAgICAgICBcXHJlc3BvbnNlIC0+XG4gICAgICAgICAgY2FzZSByZXNwb25zZSBvZlxuICAgICAgICAgICAgSHR0cC5CYWRVcmxfIHVybCAtPlxuICAgICAgICAgICAgICBFcnIgKEh0dHAuQmFkVXJsIHVybClcblxuICAgICAgICAgICAgSHR0cC5UaW1lb3V0XyAtPlxuICAgICAgICAgICAgICBFcnIgSHR0cC5UaW1lb3V0XG5cbiAgICAgICAgICAgIEh0dHAuTmV0d29ya0Vycm9yXyAtPlxuICAgICAgICAgICAgICBFcnIgSHR0cC5OZXR3b3JrRXJyb3JcblxuICAgICAgICAgICAgSHR0cC5CYWRTdGF0dXNfIG1ldGFkYXRhIGJvZHkgLT5cbiAgICAgICAgICAgICAgRXJyIChIdHRwLkJhZFN0YXR1cyBtZXRhZGF0YS5zdGF0dXNDb2RlKVxuXG4gICAgICAgICAgICBIdHRwLkdvb2RTdGF0dXNfIG1ldGFkYXRhIGJvZHkgLT5cbiAgICAgICAgICAgICAgY2FzZSBELmRlY29kZVN0cmluZyBkZWNvZGVyIGJvZHkgb2ZcbiAgICAgICAgICAgICAgICBPayB2YWx1ZSAtPlxuICAgICAgICAgICAgICAgICAgT2sgdmFsdWVcblxuICAgICAgICAgICAgICAgIEVyciBlcnIgLT5cbiAgICAgICAgICAgICAgICAgIEVyciAoSHR0cC5CYWRCb2R5IChELmVycm9yVG9TdHJpbmcgZXJyKSlcblxuVGhpcyBmdW5jdGlvbiBpcyBncmVhdCBmb3IgZmFuY2llciBlcnJvciBoYW5kbGluZyBhbmQgZ2V0dGluZyByZXNwb25zZSBoZWFkZXJzLlxuRm9yIGV4YW1wbGUsIG1heWJlIHdoZW4geW91ciBzZXZlciBnaXZlcyBhIDQwNCBzdGF0dXMgY29kZSAobm90IGZvdW5kKSBpdCBhbHNvXG5wcm92aWRlcyBhIGhlbHBmdWwgSlNPTiBtZXNzYWdlIGluIHRoZSByZXNwb25zZSBib2R5LiBUaGlzIGZ1bmN0aW9uIGxldHMgeW91XG5hZGQgbG9naWMgdG8gdGhlIGBCYWRTdGF0dXNfYCBicmFuY2ggc28geW91IGNhbiBwYXJzZSB0aGF0IEpTT04gYW5kIGdpdmUgdXNlcnNcbmEgbW9yZSBoZWxwZnVsIG1lc3NhZ2UhIE9yIG1ha2UgeW91ciBvd24gY3VzdG9tIGVycm9yIHR5cGUgZm9yIHlvdXIgcGFydGljdWxhclxuYXBwbGljYXRpb24hXG4tfVxuZXhwZWN0U3RyaW5nUmVzcG9uc2UgOiAoUmVzdWx0IHggYSAtPiBtc2cpIC0+IChSZXNwb25zZSBTdHJpbmcgLT4gUmVzdWx0IHggYSkgLT4gRXhwZWN0IG1zZ1xuZXhwZWN0U3RyaW5nUmVzcG9uc2UgdG9Nc2cgdG9SZXN1bHQgPVxuICBFbG0uS2VybmVsLkh0dHAuZXhwZWN0IFwiXCIgaWRlbnRpdHkgKHRvUmVzdWx0ID4+IHRvTXNnKVxuXG5cbnstfCBFeHBlY3QgYSBbYFJlc3BvbnNlYF0oI1Jlc3BvbnNlKSB3aXRoIGEgYEJ5dGVzYCBib2R5LlxuXG5JdCB3b3JrcyBqdXN0IGxpa2UgW2BleHBlY3RTdHJpbmdSZXNwb25zZWBdKCNleHBlY3RTdHJpbmdSZXNwb25zZSksIGdpdmluZyB5b3Vcbm1vcmUgYWNjZXNzIHRvIGhlYWRlcnMgYW5kIG1vcmUgbGVld2F5IGluIGRlZmluaW5nIHlvdXIgb3duIGVycm9ycy5cbi19XG5leHBlY3RCeXRlc1Jlc3BvbnNlIDogKFJlc3VsdCB4IGEgLT4gbXNnKSAtPiAoUmVzcG9uc2UgQnl0ZXMgLT4gUmVzdWx0IHggYSkgLT4gRXhwZWN0IG1zZ1xuZXhwZWN0Qnl0ZXNSZXNwb25zZSB0b01zZyB0b1Jlc3VsdCA9XG4gIEVsbS5LZXJuZWwuSHR0cC5leHBlY3QgXCJhcnJheWJ1ZmZlclwiIEVsbS5LZXJuZWwuSHR0cC50b0RhdGFWaWV3ICh0b1Jlc3VsdCA+PiB0b01zZylcblxuXG57LXwgQSBgUmVzcG9uc2VgIGNhbiBjb21lIGJhY2sgYSBjb3VwbGUgZGlmZmVyZW50IHdheXM6XG5cbi0gYEJhZFVybF9gICZtZGFzaDsgeW91IGRpZCBub3QgcHJvdmlkZSBhIHZhbGlkIFVSTC5cbi0gYFRpbWVvdXRfYCAmbWRhc2g7IGl0IHRvb2sgdG9vIGxvbmcgdG8gZ2V0IGEgcmVzcG9uc2UuXG4tIGBOZXR3b3JrRXJyb3JfYCAmbWRhc2g7IHRoZSB1c2VyIHR1cm5lZCBvZmYgdGhlaXIgd2lmaSwgd2VudCBpbiBhIGNhdmUsIGV0Yy5cbi0gYEJhZFN0YXR1c19gICZtZGFzaDsgYSByZXNwb25zZSBhcnJpdmVkLCBidXQgdGhlIHN0YXR1cyBjb2RlIGluZGljYXRlcyBmYWlsdXJlLlxuLSBgR29vZFN0YXR1c19gICZtZGFzaDsgYSByZXNwb25zZSBhcnJpdmVkIHdpdGggYSBuaWNlIHN0YXR1cyBjb2RlIVxuXG5UaGUgdHlwZSBvZiB0aGUgYGJvZHlgIGRlcGVuZHMgb24gd2hldGhlciB5b3UgdXNlXG5bYGV4cGVjdFN0cmluZ1Jlc3BvbnNlYF0oI2V4cGVjdFN0cmluZ1Jlc3BvbnNlKVxub3IgW2BleHBlY3RCeXRlc1Jlc3BvbnNlYF0oI2V4cGVjdEJ5dGVzUmVzcG9uc2UpLlxuLX1cbnR5cGUgUmVzcG9uc2UgYm9keVxuICA9IEJhZFVybF8gU3RyaW5nXG4gIHwgVGltZW91dF9cbiAgfCBOZXR3b3JrRXJyb3JfXG4gIHwgQmFkU3RhdHVzXyBNZXRhZGF0YSBib2R5XG4gIHwgR29vZFN0YXR1c18gTWV0YWRhdGEgYm9keVxuXG5cbnstfCBFeHRyYSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVzcG9uc2U6XG5cbi0gYHVybGAgb2YgdGhlIHNlcnZlciB0aGF0IGFjdHVhbGx5IHJlc3BvbmRlZCAoc28geW91IGNhbiBkZXRlY3QgcmVkaXJlY3RzKVxuLSBgc3RhdHVzQ29kZWAgbGlrZSBgMjAwYCBvciBgNDA0YFxuLSBgc3RhdHVzVGV4dGAgZGVzY3JpYmluZyB3aGF0IHRoZSBgc3RhdHVzQ29kZWAgbWVhbnMgYSBsaXR0bGVcbi0gYGhlYWRlcnNgIGxpa2UgYENvbnRlbnQtTGVuZ3RoYCBhbmQgYEV4cGlyZXNgXG5cbioqTm90ZToqKiBJdCBpcyBwb3NzaWJsZSBmb3IgYSByZXNwb25zZSB0byBoYXZlIHRoZSBzYW1lIGhlYWRlciBtdWx0aXBsZSB0aW1lcy5cbkluIHRoYXQgY2FzZSwgYWxsIHRoZSB2YWx1ZXMgZW5kIHVwIGluIGEgc2luZ2xlIGVudHJ5IGluIHRoZSBgaGVhZGVyc2BcbmRpY3Rpb25hcnkuIFRoZSB2YWx1ZXMgYXJlIHNlcGFyYXRlZCBieSBjb21tYXMsIGZvbGxvd2luZyB0aGUgcnVsZXMgb3V0bGluZWRcbltoZXJlXShodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80MzcxMzI4L2FyZS1kdXBsaWNhdGUtaHR0cC1yZXNwb25zZS1oZWFkZXJzLWFjY2VwdGFibGUpLlxuLX1cbnR5cGUgYWxpYXMgTWV0YWRhdGEgPVxuICB7IHVybCA6IFN0cmluZ1xuICAsIHN0YXR1c0NvZGUgOiBJbnRcbiAgLCBzdGF0dXNUZXh0IDogU3RyaW5nXG4gICwgaGVhZGVycyA6IERpY3QgU3RyaW5nIFN0cmluZ1xuICB9XG5cblxuXG4tLSBDQU5DRUxcblxuXG57LXwgVHJ5IHRvIGNhbmNlbCBhbiBvbmdvaW5nIHJlcXVlc3QgYmFzZWQgb24gYSBgdHJhY2tlcmAuXG4tfVxuY2FuY2VsIDogU3RyaW5nIC0+IENtZCBtc2dcbmNhbmNlbCB0cmFja2VyID1cbiAgY29tbWFuZCAoQ2FuY2VsIHRyYWNrZXIpXG5cblxuXG4tLSBQUk9HUkVTU1xuXG5cbnstfCBUcmFjayB0aGUgcHJvZ3Jlc3Mgb2YgYSByZXF1ZXN0LiBDcmVhdGUgYSBbYHJlcXVlc3RgXSgjcmVxdWVzdCkgd2hlcmVcbmB0cmFja2VyID0gSnVzdCBcImZvcm0ucGRmXCJgIGFuZCB5b3UgY2FuIHRyYWNrIGl0IHdpdGggYSBzdWJzY3JpcHRpb24gbGlrZVxuYHRyYWNrIFwiZm9ybS5wZGZcIiBHb3RQcm9ncmVzc2AuXG4tfVxudHJhY2sgOiBTdHJpbmcgLT4gKFByb2dyZXNzIC0+IG1zZykgLT4gU3ViIG1zZ1xudHJhY2sgdHJhY2tlciB0b01zZyA9XG4gIHN1YnNjcmlwdGlvbiAoTXlTdWIgdHJhY2tlciB0b01zZylcblxuXG57LXwgVGhlcmUgYXJlIHR3byBwaGFzZXMgdG8gSFRUUCByZXF1ZXN0cy4gRmlyc3QgeW91ICoqc2VuZCoqIGEgYnVuY2ggb2YgZGF0YSxcbnRoZW4geW91ICoqcmVjZWl2ZSoqIGEgYnVuY2ggb2YgZGF0YS4gRm9yIGV4YW1wbGUsIHNheSB5b3UgdXNlIGBmaWxlQm9keWAgdG9cbnVwbG9hZCBhIGZpbGUgb2YgMjYyMTQ0IGJ5dGVzLiBGcm9tIHRoZXJlLCBwcm9ncmVzcyB3aWxsIGdvIGxpa2UgdGhpczpcblxuYGBgXG5TZW5kaW5nICAgeyBzZW50ID0gICAgICAwLCBzaXplID0gMjYyMTQ0IH0gIC0tIDAuMFxuU2VuZGluZyAgIHsgc2VudCA9ICA2NTUzNiwgc2l6ZSA9IDI2MjE0NCB9ICAtLSAwLjI1XG5TZW5kaW5nICAgeyBzZW50ID0gMTMxMDcyLCBzaXplID0gMjYyMTQ0IH0gIC0tIDAuNVxuU2VuZGluZyAgIHsgc2VudCA9IDE5NjYwOCwgc2l6ZSA9IDI2MjE0NCB9ICAtLSAwLjc1XG5TZW5kaW5nICAgeyBzZW50ID0gMjYyMTQ0LCBzaXplID0gMjYyMTQ0IH0gIC0tIDEuMFxuUmVjZWl2aW5nIHsgcmVjZWl2ZWQgPSAgMCwgc2l6ZSA9IEp1c3QgMTYgfSAtLSAwLjBcblJlY2VpdmluZyB7IHJlY2VpdmVkID0gMTYsIHNpemUgPSBKdXN0IDE2IH0gLS0gMS4wXG5gYGBcblxuV2l0aCBmaWxlIHVwbG9hZHMsIHRoZSAqKnNlbmQqKiBwaGFzZSBpcyBleHBlbnNpdmUuIFRoYXQgaXMgd2hhdCB3ZSBzYXcgaW4gb3VyXG5leGFtcGxlLiBCdXQgd2l0aCBmaWxlIGRvd25sb2FkcywgdGhlICoqcmVjZWl2ZSoqIHBoYXNlIGlzIGV4cGVuc2l2ZS5cblxuVXNlIFtgZnJhY3Rpb25TZW50YF0oI2ZyYWN0aW9uU2VudCkgYW5kIFtgZnJhY3Rpb25SZWNlaXZlZGBdKCNmcmFjdGlvblJlY2VpdmVkKVxudG8gdHVybiB0aGlzIHByb2dyZXNzIGluZm9ybWF0aW9uIGludG8gc3BlY2lmaWMgZnJhY3Rpb25zIVxuXG4qKk5vdGU6KiogVGhlIGBzaXplYCBvZiB0aGUgcmVzcG9uc2UgaXMgYmFzZWQgb24gdGhlIFtgQ29udGVudC1MZW5ndGhgXVtjbF1cbmhlYWRlciwgYW5kIGluIHJhcmUgYW5kIGFubm95aW5nIGNhc2VzLCBhIHNlcnZlciBtYXkgbm90IGluY2x1ZGUgdGhhdCBoZWFkZXIuXG5UaGF0IGlzIHdoeSB0aGUgYHNpemVgIGlzIGEgYE1heWJlIEludGAgaW4gYFJlY2VpdmluZ2AuXG5cbltjbF06IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvSGVhZGVycy9Db250ZW50LUxlbmd0aFxuLX1cbnR5cGUgUHJvZ3Jlc3NcbiAgPSBTZW5kaW5nIHsgc2VudCA6IEludCwgc2l6ZSA6IEludCB9XG4gIHwgUmVjZWl2aW5nIHsgcmVjZWl2ZWQgOiBJbnQsIHNpemUgOiBNYXliZSBJbnQgfVxuXG5cbnstfCBUdXJuIGBTZW5kaW5nYCBwcm9ncmVzcyBpbnRvIGEgdXNlZnVsIGZyYWN0aW9uLlxuXG4gICAgZnJhY3Rpb25TZW50IHsgc2VudCA9ICAgMCwgc2l6ZSA9IDEwMjQgfSA9PSAwLjBcbiAgICBmcmFjdGlvblNlbnQgeyBzZW50ID0gMjU2LCBzaXplID0gMTAyNCB9ID09IDAuMjVcbiAgICBmcmFjdGlvblNlbnQgeyBzZW50ID0gNTEyLCBzaXplID0gMTAyNCB9ID09IDAuNVxuXG4gICAgLS0gZnJhY3Rpb25TZW50IHsgc2VudCA9IDAsIHNpemUgPSAwIH0gPT0gMS4wXG5cblRoZSByZXN1bHQgaXMgYWx3YXlzIGJldHdlZW4gYDAuMGAgYW5kIGAxLjBgLCBlbnN1cmluZyB0aGF0IGFueSBwcm9ncmVzcyBiYXJcbmFuaW1hdGlvbnMgbmV2ZXIgZ28gb3V0IG9mIGJvdW5kcy5cblxuQW5kIG5vdGljZSB0aGF0IGBzaXplYCBjYW4gYmUgemVyby4gVGhhdCBtZWFucyB5b3UgYXJlIHNlbmRpbmcgYSByZXF1ZXN0IHdpdGhcbmFuIGVtcHR5IGJvZHkuIFZlcnkgY29tbW9uISBXaGVuIGBzaXplYCBpcyB6ZXJvLCB0aGUgcmVzdWx0IGlzIGFsd2F5cyBgMS4wYC5cblxuKipOb3RlOioqIElmIHlvdSBjcmVhdGUgeW91ciBvd24gZnVuY3Rpb24gdG8gY29tcHV0ZSB0aGlzIGZyYWN0aW9uLCB3YXRjaCBvdXRcbmZvciBkaXZpZGUtYnktemVybyBlcnJvcnMhXG4tfVxuZnJhY3Rpb25TZW50IDogeyBzZW50IDogSW50LCBzaXplIDogSW50IH0gLT4gRmxvYXRcbmZyYWN0aW9uU2VudCBwID1cbiAgaWYgcC5zaXplID09IDAgdGhlblxuICAgIDFcbiAgZWxzZVxuICAgIGNsYW1wIDAgMSAodG9GbG9hdCBwLnNlbnQgLyB0b0Zsb2F0IHAuc2l6ZSlcblxuXG57LXwgVHVybiBgUmVjZWl2aW5nYCBwcm9ncmVzcyBpbnRvIGEgdXNlZnVsIGZyYWN0aW9uIGZvciBwcm9ncmVzcyBiYXJzLlxuXG4gICAgZnJhY3Rpb25SZWNlaXZlZCB7IHJlY2VpdmVkID0gICAwLCBzaXplID0gSnVzdCAxMDI0IH0gPT0gMC4wXG4gICAgZnJhY3Rpb25SZWNlaXZlZCB7IHJlY2VpdmVkID0gMjU2LCBzaXplID0gSnVzdCAxMDI0IH0gPT0gMC4yNVxuICAgIGZyYWN0aW9uUmVjZWl2ZWQgeyByZWNlaXZlZCA9IDUxMiwgc2l6ZSA9IEp1c3QgMTAyNCB9ID09IDAuNVxuXG4gICAgLS0gZnJhY3Rpb25SZWNlaXZlZCB7IHJlY2VpdmVkID0gICAwLCBzaXplID0gTm90aGluZyB9ID09IDAuMFxuICAgIC0tIGZyYWN0aW9uUmVjZWl2ZWQgeyByZWNlaXZlZCA9IDI1Niwgc2l6ZSA9IE5vdGhpbmcgfSA9PSAwLjBcbiAgICAtLSBmcmFjdGlvblJlY2VpdmVkIHsgcmVjZWl2ZWQgPSA1MTIsIHNpemUgPSBOb3RoaW5nIH0gPT0gMC4wXG5cblRoZSBgc2l6ZWAgaGVyZSBpcyBiYXNlZCBvbiB0aGUgW2BDb250ZW50LUxlbmd0aGBdW2NsXSBoZWFkZXIgd2hpY2ggbWF5IGJlXG5taXNzaW5nIGluIHNvbWUgY2FzZXMuIEEgc2VydmVyIG1heSBiZSBtaXNjb25maWd1cmVkIG9yIGl0IG1heSBiZSBzdHJlYW1pbmdcbmRhdGEgYW5kIG5vdCBhY3R1YWxseSBrbm93IHRoZSBmaW5hbCBzaXplLiBXaGF0ZXZlciB0aGUgY2FzZSwgdGhpcyBmdW5jdGlvblxud2lsbCBhbHdheXMgZ2l2ZSBgMC4wYCB3aGVuIHRoZSBmaW5hbCBzaXplIGlzIHVua25vd24uXG5cbkZ1cnRoZXJtb3JlLCB0aGUgYENvbnRlbnQtTGVuZ3RoYCBoZWFkZXIgbWF5IGJlIGluY29ycmVjdCEgVGhlIGltcGxlbWVudGF0aW9uXG5jbGFtcHMgdGhlIGZyYWN0aW9uIGJldHdlZW4gYDAuMGAgYW5kIGAxLjBgLCBzbyB5b3Ugd2lsbCBqdXN0IGdldCBgMS4wYCBpZlxueW91IGV2ZXIgcmVjZWl2ZSBtb3JlIGJ5dGVzIHRoYW4gcHJvbWlzZWQuXG5cbioqTm90ZToqKiBJZiB5b3UgYXJlIHN0cmVhbWluZyBzb21ldGhpbmcsIHlvdSBjYW4gd3JpdGUgYSBjdXN0b20gdmVyc2lvbiBvZlxudGhpcyBmdW5jdGlvbiB0aGF0IGp1c3QgdHJhY2tzIGJ5dGVzIHJlY2VpdmVkLiBNYXliZSB5b3Ugc2hvdyB0aGF0IDIya2Igb3IgODNrYlxuaGF2ZSBiZWVuIGRvd25sb2FkZWQsIHdpdGhvdXQgYSBzcGVjaWZpYyBmcmFjdGlvbi4gSWYgeW91IGRvIHRoaXMsIGJlIHdhcnkgb2ZcbmRpdmlkZS1ieS16ZXJvIGVycm9ycyBiZWNhdXNlIGBzaXplYCBjYW4gYWx3YXlzIGJlIHplcm8hXG5cbltjbF06IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvSGVhZGVycy9Db250ZW50LUxlbmd0aFxuLX1cbmZyYWN0aW9uUmVjZWl2ZWQgOiB7IHJlY2VpdmVkIDogSW50LCBzaXplIDogTWF5YmUgSW50IH0gLT4gRmxvYXRcbmZyYWN0aW9uUmVjZWl2ZWQgcCA9XG4gIGNhc2UgcC5zaXplIG9mXG4gICAgTm90aGluZyAtPlxuICAgICAgMFxuXG4gICAgSnVzdCBuIC0+XG4gICAgICBpZiBuID09IDAgdGhlblxuICAgICAgICAxXG4gICAgICBlbHNlXG4gICAgICAgIGNsYW1wIDAgMSAodG9GbG9hdCBwLnJlY2VpdmVkIC8gdG9GbG9hdCBuKVxuXG5cblxuLS0gQ1VTVE9NIFJFUVVFU1RTXG5cblxuey18IENyZWF0ZSBhIHJlcXVlc3Qgd2l0aCBhIHJpc2t5IHNlY3VyaXR5IHBvbGljeS4gVGhpbmdzIGxpa2U6XG5cbi0gQWxsb3cgcmVzcG9uc2VzIGZyb20gb3RoZXIgZG9tYWlucyB0byBzZXQgY29va2llcy5cbi0gSW5jbHVkZSBjb29raWVzIGluIHJlcXVlc3RzIHRvIG90aGVyIGRvbWFpbnMuXG5cblRoaXMgaXMgY2FsbGVkIFtgd2l0aENyZWRlbnRpYWxzYF1bd2NdIGluIEphdmFTY3JpcHQsIGFuZCBpdCBhbGxvd3MgYSBjb3VwbGVcbm90aGVyIHJpc2t5IHRoaW5ncyBhcyB3ZWxsLiBJdCBjYW4gYmUgdXNlZnVsIGlmIGB3d3cuZXhhbXBsZS5jb21gIG5lZWRzIHRvXG50YWxrIHRvIGB1cGxvYWRzLmV4YW1wbGUuY29tYCwgYnV0IGl0IHNob3VsZCBiZSB1c2VkIHZlcnkgY2FyZWZ1bGx5IVxuXG5Gb3IgZXhhbXBsZSwgZXZlcnkgSFRUUCByZXF1ZXN0IGluY2x1ZGVzIGEgYE9yaWdpbmAgaGVhZGVyIHJldmVhbGluZyB0aGUgZG9tYWluLFxuc28gYW55IHJlcXVlc3QgdG8gYGZhY2Vib29rLmNvbWAgcmV2ZWFscyB0aGUgd2Vic2l0ZSB0aGF0IHNlbnQgaXQuIEZyb20gdGhlcmUsXG5jb29raWVzIGNhbiBiZSB1c2VkIHRvIGNvcnJlbGF0ZSBicm93c2luZyBoYWJpdHMgd2l0aCBzcGVjaWZpYyB1c2Vycy4g4oCcT2gsIGl0XG5sb29rcyBsaWtlIHRoZXkgdmlzaXRlZCBgZXhhbXBsZS5jb21gLiBNYXliZSB0aGV5IHdhbnQgYWRzIGFib3V0IGV4YW1wbGVzIeKAnVxuVGhpcyBpcyB3aHkgeW91IGNhbiBnZXQgc2hvZSBhZHMgZm9yIG1vbnRocyB3aXRob3V0IHNheWluZyBhbnl0aGluZyBhYm91dCBpdFxub24gYW55IHNvY2lhbCBuZXR3b3Jrcy4gKipUaGlzIHJpc2sgZXhpc3RzIGV2ZW4gZm9yIHBlb3BsZSB3aG8gZG8gbm90IGhhdmUgYW5cbmFjY291bnQuKiogU2VydmVycyBjYW4gc2V0IGEgbmV3IGNvb2tpZSB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgYnJvd3NlciBhbmRcbmJ1aWxkIGEgcHJvZmlsZSBhcm91bmQgdGhhdC4gU2FtZSBraW5kIG9mIHRyaWNrcyBmb3IgbG9nZ2VkIG91dCB1c2Vycy5cblxuKipDb250ZXh0OioqIEEgc2lnbmlmaWNhbnRseSB3b3JzZSB2ZXJzaW9uIG9mIHRoaXMgY2FuIGhhcHBlbiB3aGVuIHRyeWluZyB0b1xuYWRkIGludGVncmF0aW9ucyB3aXRoIEdvb2dsZSwgRmFjZWJvb2ssIFBpbnRlcmVzdCwgVHdpdHRlciwgZXRjLiDigJxBZGQgb3VyIHNoYXJlXG5idXR0b24uIEl0IGlzIHN1cGVyIGVhc3kuIEp1c3QgYWRkIHRoaXMgYDxzY3JpcHQ+YCB0YWch4oCdIEJ1dCB0aGUgZ29hbCBoZXJlIGlzXG50byBnZXQgX2FyYml0cmFyeV8gYWNjZXNzIHRvIHRoZSBleGVjdXRpbmcgY29udGV4dC4gTm93IHRoZXkgY2FuIHRyYWNrIGNsaWNrcyxcbnJlYWQgcGFnZSBjb250ZW50LCB1c2UgdGltZSB6b25lcyB0byBhcHByb3hpbWF0ZSBsb2NhdGlvbiwgZXRjLiBBcyBvZiB0aGlzXG53cml0aW5nLCBzdWdnZXN0aW5nIHRoYXQgZGV2ZWxvcGVycyBqdXN0IGVtYmVkIGA8c2NyaXB0PmAgdGFncyBpcyB0aGUgZGVmYXVsdFxuZm9yIEdvb2dsZSBBbmFseXRpY3MsIEZhY2Vib29rIExpa2UgQnV0dG9ucywgVHdpdHRlciBGb2xsb3cgQnV0dG9ucywgUGludGVyZXN0XG5TYXZlIEJ1dHRvbnMsIGFuZCBJbnN0YWdyYW0gRW1iZWRzLlxuXG5bYWhdOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0hlYWRlcnMvQXV0aG9yaXphdGlvblxuW3djXTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1hNTEh0dHBSZXF1ZXN0L3dpdGhDcmVkZW50aWFsc1xuLX1cbnJpc2t5UmVxdWVzdFxuICA6IHsgbWV0aG9kIDogU3RyaW5nXG4gICAgLCBoZWFkZXJzIDogTGlzdCBIZWFkZXJcbiAgICAsIHVybCA6IFN0cmluZ1xuICAgICwgYm9keSA6IEJvZHlcbiAgICAsIGV4cGVjdCA6IEV4cGVjdCBtc2dcbiAgICAsIHRpbWVvdXQgOiBNYXliZSBGbG9hdFxuICAgICwgdHJhY2tlciA6IE1heWJlIFN0cmluZ1xuICAgIH1cbiAgLT4gQ21kIG1zZ1xucmlza3lSZXF1ZXN0IHIgPVxuICBjb21tYW5kIDx8IFJlcXVlc3QgPHxcbiAgICB7IG1ldGhvZCA9IHIubWV0aG9kXG4gICAgLCBoZWFkZXJzID0gci5oZWFkZXJzXG4gICAgLCB1cmwgPSByLnVybFxuICAgICwgYm9keSA9IHIuYm9keVxuICAgICwgZXhwZWN0ID0gci5leHBlY3RcbiAgICAsIHRpbWVvdXQgPSByLnRpbWVvdXRcbiAgICAsIHRyYWNrZXIgPSByLnRyYWNrZXJcbiAgICAsIGFsbG93Q29va2llc0Zyb21PdGhlckRvbWFpbnMgPSBUcnVlXG4gICAgfVxuXG5cblxuLS0gVEFTS1NcblxuXG57LXwgSnVzdCBsaWtlIFtgcmVxdWVzdGBdKCNyZXF1ZXN0KSwgYnV0IGl0IGNyZWF0ZXMgYSBgVGFza2AuIFRoaXMgbWFrZXMgaXRcbnBvc3NpYmxlIHRvIHBhaXIgeW91ciBIVFRQIHJlcXVlc3Qgd2l0aCBgVGltZS5ub3dgIGlmIHlvdSBuZWVkIHRpbWVzdGFtcHMgZm9yXG5zb21lIHJlYXNvbi4gKipUaGlzIHNob3VsZCBiZSBxdWl0ZSByYXJlLioqXG4tfVxudGFza1xuICA6IHsgbWV0aG9kIDogU3RyaW5nXG4gICAgLCBoZWFkZXJzIDogTGlzdCBIZWFkZXJcbiAgICAsIHVybCA6IFN0cmluZ1xuICAgICwgYm9keSA6IEJvZHlcbiAgICAsIHJlc29sdmVyIDogUmVzb2x2ZXIgeCBhXG4gICAgLCB0aW1lb3V0IDogTWF5YmUgRmxvYXRcbiAgICB9XG4gIC0+IFRhc2sgeCBhXG50YXNrIHIgPVxuICBFbG0uS2VybmVsLkh0dHAudG9UYXNrICgpIHJlc3VsdFRvVGFza1xuICAgIHsgbWV0aG9kID0gci5tZXRob2RcbiAgICAsIGhlYWRlcnMgPSByLmhlYWRlcnNcbiAgICAsIHVybCA9IHIudXJsXG4gICAgLCBib2R5ID0gci5ib2R5XG4gICAgLCBleHBlY3QgPSByLnJlc29sdmVyXG4gICAgLCB0aW1lb3V0ID0gci50aW1lb3V0XG4gICAgLCB0cmFja2VyID0gTm90aGluZ1xuICAgICwgYWxsb3dDb29raWVzRnJvbU90aGVyRG9tYWlucyA9IEZhbHNlXG4gICAgfVxuXG5cbnstfCBEZXNjcmliZXMgaG93IHRvIHJlc29sdmUgYW4gSFRUUCB0YXNrLiBZb3UgY2FuIGNyZWF0ZSBhIHJlc29sdmVyIHdpdGhcbltgc3RyaW5nUmVzb2x2ZXJgXSgjc3RyaW5nUmVzb2x2ZXIpIGFuZCBbYGJ5dGVzUmVzb2x2ZXJgXSgjYnl0ZXNSZXNvbHZlcikuXG4tfVxudHlwZSBSZXNvbHZlciB4IGEgPSBSZXNvbHZlclxuXG5cbnstfCBUdXJuIGEgcmVzcG9uc2Ugd2l0aCBhIGBTdHJpbmdgIGJvZHkgaW50byBhIHJlc3VsdC5cblNpbWlsYXIgdG8gW2BleHBlY3RTdHJpbmdSZXNwb25zZWBdKCNleHBlY3RTdHJpbmdSZXNwb25zZSkuXG4tfVxuc3RyaW5nUmVzb2x2ZXIgOiAoUmVzcG9uc2UgU3RyaW5nIC0+IFJlc3VsdCB4IGEpIC0+IFJlc29sdmVyIHggYVxuc3RyaW5nUmVzb2x2ZXIgPVxuICBFbG0uS2VybmVsLkh0dHAuZXhwZWN0IFwiXCIgaWRlbnRpdHlcblxuXG57LXwgVHVybiBhIHJlc3BvbnNlIHdpdGggYSBgQnl0ZXNgIGJvZHkgaW50byBhIHJlc3VsdC5cblNpbWlsYXIgdG8gW2BleHBlY3RCeXRlc1Jlc3BvbnNlYF0oI2V4cGVjdEJ5dGVzUmVzcG9uc2UpLlxuLX1cbmJ5dGVzUmVzb2x2ZXIgOiAoUmVzcG9uc2UgQnl0ZXMgLT4gUmVzdWx0IHggYSkgLT4gUmVzb2x2ZXIgeCBhXG5ieXRlc1Jlc29sdmVyID1cbiAgRWxtLktlcm5lbC5IdHRwLmV4cGVjdCBcImFycmF5YnVmZmVyXCIgRWxtLktlcm5lbC5IdHRwLnRvRGF0YVZpZXdcblxuXG57LXwgSnVzdCBsaWtlIFtgcmlza3lSZXF1ZXN0YF0oI3Jpc2t5UmVxdWVzdCksIGJ1dCBpdCBjcmVhdGVzIGEgYFRhc2tgLiAqKlVzZVxud2l0aCBjYXV0aW9uISoqIFRoaXMgaGFzIGFsbCB0aGUgc2FtZSBzZWN1cml0eSBjb25jZXJucyBhcyBgcmlza3lSZXF1ZXN0YC5cbi19XG5yaXNreVRhc2tcbiAgOiB7IG1ldGhvZCA6IFN0cmluZ1xuICAgICwgaGVhZGVycyA6IExpc3QgSGVhZGVyXG4gICAgLCB1cmwgOiBTdHJpbmdcbiAgICAsIGJvZHkgOiBCb2R5XG4gICAgLCByZXNvbHZlciA6IFJlc29sdmVyIHggYVxuICAgICwgdGltZW91dCA6IE1heWJlIEZsb2F0XG4gICAgfVxuICAtPiBUYXNrIHggYVxucmlza3lUYXNrIHIgPVxuICBFbG0uS2VybmVsLkh0dHAudG9UYXNrICgpIHJlc3VsdFRvVGFza1xuICAgIHsgbWV0aG9kID0gci5tZXRob2RcbiAgICAsIGhlYWRlcnMgPSByLmhlYWRlcnNcbiAgICAsIHVybCA9IHIudXJsXG4gICAgLCBib2R5ID0gci5ib2R5XG4gICAgLCBleHBlY3QgPSByLnJlc29sdmVyXG4gICAgLCB0aW1lb3V0ID0gci50aW1lb3V0XG4gICAgLCB0cmFja2VyID0gTm90aGluZ1xuICAgICwgYWxsb3dDb29raWVzRnJvbU90aGVyRG9tYWlucyA9IFRydWVcbiAgICB9XG5cblxucmVzdWx0VG9UYXNrIDogUmVzdWx0IHggYSAtPiBUYXNrIHggYVxucmVzdWx0VG9UYXNrIHJlc3VsdCA9XG4gIGNhc2UgcmVzdWx0IG9mXG4gICAgT2sgYSAtPiBUYXNrLnN1Y2NlZWQgYVxuICAgIEVyciB4IC0+IFRhc2suZmFpbCB4XG5cblxuXG4tLSBDT01NQU5EUyBhbmQgU1VCU0NSSVBUSU9OU1xuXG5cbnR5cGUgTXlDbWQgbXNnXG4gID0gQ2FuY2VsIFN0cmluZ1xuICB8IFJlcXVlc3RcbiAgICAgIHsgbWV0aG9kIDogU3RyaW5nXG4gICAgICAsIGhlYWRlcnMgOiBMaXN0IEhlYWRlclxuICAgICAgLCB1cmwgOiBTdHJpbmdcbiAgICAgICwgYm9keSA6IEJvZHlcbiAgICAgICwgZXhwZWN0IDogRXhwZWN0IG1zZ1xuICAgICAgLCB0aW1lb3V0IDogTWF5YmUgRmxvYXRcbiAgICAgICwgdHJhY2tlciA6IE1heWJlIFN0cmluZ1xuICAgICAgLCBhbGxvd0Nvb2tpZXNGcm9tT3RoZXJEb21haW5zIDogQm9vbFxuICAgICAgfVxuXG5cbmNtZE1hcCA6IChhIC0+IGIpIC0+IE15Q21kIGEgLT4gTXlDbWQgYlxuY21kTWFwIGZ1bmMgY21kID1cbiAgY2FzZSBjbWQgb2ZcbiAgICBDYW5jZWwgdHJhY2tlciAtPlxuICAgICAgQ2FuY2VsIHRyYWNrZXJcblxuICAgIFJlcXVlc3QgciAtPlxuICAgICAgUmVxdWVzdFxuICAgICAgICB7IG1ldGhvZCA9IHIubWV0aG9kXG4gICAgICAgICwgaGVhZGVycyA9IHIuaGVhZGVyc1xuICAgICAgICAsIHVybCA9IHIudXJsXG4gICAgICAgICwgYm9keSA9IHIuYm9keVxuICAgICAgICAsIGV4cGVjdCA9IEVsbS5LZXJuZWwuSHR0cC5tYXBFeHBlY3QgZnVuYyByLmV4cGVjdFxuICAgICAgICAsIHRpbWVvdXQgPSByLnRpbWVvdXRcbiAgICAgICAgLCB0cmFja2VyID0gci50cmFja2VyXG4gICAgICAgICwgYWxsb3dDb29raWVzRnJvbU90aGVyRG9tYWlucyA9IHIuYWxsb3dDb29raWVzRnJvbU90aGVyRG9tYWluc1xuICAgICAgICB9XG5cblxudHlwZSBNeVN1YiBtc2cgPVxuICBNeVN1YiBTdHJpbmcgKFByb2dyZXNzIC0+IG1zZylcblxuXG5zdWJNYXAgOiAoYSAtPiBiKSAtPiBNeVN1YiBhIC0+IE15U3ViIGJcbnN1Yk1hcCBmdW5jIChNeVN1YiB0cmFja2VyIHRvTXNnKSA9XG4gIE15U3ViIHRyYWNrZXIgKHRvTXNnID4+IGZ1bmMpXG5cblxuXG4tLSBFRkZFQ1QgTUFOQUdFUlxuXG5cbnR5cGUgYWxpYXMgU3RhdGUgbXNnID1cbiAgeyByZXFzIDogRGljdCBTdHJpbmcgUHJvY2Vzcy5JZFxuICAsIHN1YnMgOiBMaXN0IChNeVN1YiBtc2cpXG4gIH1cblxuXG5pbml0IDogVGFzayBOZXZlciAoU3RhdGUgbXNnKVxuaW5pdCA9XG4gIFRhc2suc3VjY2VlZCAoU3RhdGUgRGljdC5lbXB0eSBbXSlcblxuXG50eXBlIGFsaWFzIE15Um91dGVyIG1zZyA9XG4gIFBsYXRmb3JtLlJvdXRlciBtc2cgU2VsZk1zZ1xuXG5cblxuLS0gQVBQIE1FU1NBR0VTXG5cblxub25FZmZlY3RzIDogTXlSb3V0ZXIgbXNnIC0+IExpc3QgKE15Q21kIG1zZykgLT4gTGlzdCAoTXlTdWIgbXNnKSAtPiBTdGF0ZSBtc2cgLT4gVGFzayBOZXZlciAoU3RhdGUgbXNnKVxub25FZmZlY3RzIHJvdXRlciBjbWRzIHN1YnMgc3RhdGUgPVxuICB1cGRhdGVSZXFzIHJvdXRlciBjbWRzIHN0YXRlLnJlcXNcbiAgICB8PiBUYXNrLmFuZFRoZW4gKFxccmVxcyAtPiBUYXNrLnN1Y2NlZWQgKFN0YXRlIHJlcXMgc3VicykpXG5cblxudXBkYXRlUmVxcyA6IE15Um91dGVyIG1zZyAtPiBMaXN0IChNeUNtZCBtc2cpIC0+IERpY3QgU3RyaW5nIFByb2Nlc3MuSWQgLT4gVGFzayB4IChEaWN0IFN0cmluZyBQcm9jZXNzLklkKVxudXBkYXRlUmVxcyByb3V0ZXIgY21kcyByZXFzID1cbiAgY2FzZSBjbWRzIG9mXG4gICAgW10gLT5cbiAgICAgIFRhc2suc3VjY2VlZCByZXFzXG5cbiAgICBjbWQgOjogb3RoZXJDbWRzIC0+XG4gICAgICBjYXNlIGNtZCBvZlxuICAgICAgICBDYW5jZWwgdHJhY2tlciAtPlxuICAgICAgICAgIGNhc2UgRGljdC5nZXQgdHJhY2tlciByZXFzIG9mXG4gICAgICAgICAgICBOb3RoaW5nIC0+XG4gICAgICAgICAgICAgIHVwZGF0ZVJlcXMgcm91dGVyIG90aGVyQ21kcyByZXFzXG5cbiAgICAgICAgICAgIEp1c3QgcGlkIC0+XG4gICAgICAgICAgICAgIFByb2Nlc3Mua2lsbCBwaWRcbiAgICAgICAgICAgICAgICB8PiBUYXNrLmFuZFRoZW4gKFxcXyAtPiB1cGRhdGVSZXFzIHJvdXRlciBvdGhlckNtZHMgKERpY3QucmVtb3ZlIHRyYWNrZXIgcmVxcykpXG5cbiAgICAgICAgUmVxdWVzdCByZXEgLT5cbiAgICAgICAgICBQcm9jZXNzLnNwYXduIChFbG0uS2VybmVsLkh0dHAudG9UYXNrIHJvdXRlciAoUGxhdGZvcm0uc2VuZFRvQXBwIHJvdXRlcikgcmVxKVxuICAgICAgICAgICAgfD4gVGFzay5hbmRUaGVuIChcXHBpZCAtPlxuICAgICAgICAgICAgICAgICAgY2FzZSByZXEudHJhY2tlciBvZlxuICAgICAgICAgICAgICAgICAgICBOb3RoaW5nIC0+XG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmVxcyByb3V0ZXIgb3RoZXJDbWRzIHJlcXNcblxuICAgICAgICAgICAgICAgICAgICBKdXN0IHRyYWNrZXIgLT5cbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVSZXFzIHJvdXRlciBvdGhlckNtZHMgKERpY3QuaW5zZXJ0IHRyYWNrZXIgcGlkIHJlcXMpXG4gICAgICAgICAgICAgIClcblxuXG5cbi0tIFNFTEYgTUVTU0FHRVNcblxuXG50eXBlIGFsaWFzIFNlbGZNc2cgPVxuICAoU3RyaW5nLCBQcm9ncmVzcylcblxuXG5vblNlbGZNc2cgOiBNeVJvdXRlciBtc2cgLT4gU2VsZk1zZyAtPiBTdGF0ZSBtc2cgLT4gVGFzayBOZXZlciAoU3RhdGUgbXNnKVxub25TZWxmTXNnIHJvdXRlciAodHJhY2tlciwgcHJvZ3Jlc3MpIHN0YXRlID1cbiAgVGFzay5zZXF1ZW5jZSAoTGlzdC5maWx0ZXJNYXAgKG1heWJlU2VuZCByb3V0ZXIgdHJhY2tlciBwcm9ncmVzcykgc3RhdGUuc3VicylcbiAgICB8PiBUYXNrLmFuZFRoZW4gKFxcXyAtPiBUYXNrLnN1Y2NlZWQgc3RhdGUpXG5cblxubWF5YmVTZW5kIDogTXlSb3V0ZXIgbXNnIC0+IFN0cmluZyAtPiBQcm9ncmVzcyAtPiBNeVN1YiBtc2cgLT4gTWF5YmUgKFRhc2sgeCAoKSlcbm1heWJlU2VuZCByb3V0ZXIgZGVzaXJlZFRyYWNrZXIgcHJvZ3Jlc3MgKE15U3ViIGFjdHVhbFRyYWNrZXIgdG9Nc2cpID1cbiAgaWYgZGVzaXJlZFRyYWNrZXIgPT0gYWN0dWFsVHJhY2tlciB0aGVuXG4gICAgSnVzdCAoUGxhdGZvcm0uc2VuZFRvQXBwIHJvdXRlciAodG9Nc2cgcHJvZ3Jlc3MpKVxuICBlbHNlXG4gICAgTm90aGluZ1xuJ30pKQoJCV0pKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRmaWxlX3RyZWVfX19fZWxtX2tlcm5lbF9tb2R1bGVzX2h0dHBfc3JjID0gQTIoCgkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkbWFwQmxvYnMsCglmdW5jdGlvbiAoYmxvYlZhbHVlKSB7CgkJcmV0dXJuIHt1dGY4OiBibG9iVmFsdWUudXRmOH07Cgl9LAoJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJG1hcEZpbGVUcmVlTm9kZUZyb21HZW5lcmF0ZWQoJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRmaWxlX3RyZWVfbm9kZV9lbG1fa2VybmVsX21vZHVsZXNfaHR0cF9zcmMpKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkZmlsZV90cmVlX25vZGVfZWxtX2tlcm5lbF9tb2R1bGVzX2pzb25fc3JjID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRUcmVlTm9kZSgKCV9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCV9VdGlsc19UdXBsZTIoCgkJCSdKc29uJywKCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRUcmVlTm9kZSgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdEZWNvZGUuZWxtJywKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJEdlbmVyYXRlZF9Tb3VyY2VGaWxlcyRCbG9iTm9kZSgKCQkJCQkJCXt1dGY4OiAnbW9kdWxlIEpzb24uRGVjb2RlIGV4cG9zaW5nXG4gICggRGVjb2Rlciwgc3RyaW5nLCBib29sLCBpbnQsIGZsb2F0XG4gICwgbnVsbGFibGUsIGxpc3QsIGFycmF5LCBkaWN0LCBrZXlWYWx1ZVBhaXJzLCBvbmVPck1vcmVcbiAgLCBmaWVsZCwgYXQsIGluZGV4XG4gICwgbWF5YmUsIG9uZU9mXG4gICwgZGVjb2RlU3RyaW5nLCBkZWNvZGVWYWx1ZSwgVmFsdWUsIEVycm9yKC4uKSwgZXJyb3JUb1N0cmluZ1xuICAsIG1hcCwgbWFwMiwgbWFwMywgbWFwNCwgbWFwNSwgbWFwNiwgbWFwNywgbWFwOFxuICAsIGxhenksIHZhbHVlLCBudWxsLCBzdWNjZWVkLCBmYWlsLCBhbmRUaGVuXG4gIClcblxuey18IFR1cm4gSlNPTiB2YWx1ZXMgaW50byBFbG0gdmFsdWVzLiBEZWZpbml0ZWx5IGNoZWNrIG91dCB0aGlzIFtpbnRybyB0b1xuSlNPTiBkZWNvZGVyc11bZ3VpZGVdIHRvIGdldCBhIGZlZWwgZm9yIGhvdyB0aGlzIGxpYnJhcnkgd29ya3MhXG5cbltndWlkZV06IGh0dHBzOi8vZ3VpZGUuZWxtLWxhbmcub3JnL2VmZmVjdHMvanNvbi5odG1sXG5cbiMgUHJpbWl0aXZlc1xuQGRvY3MgRGVjb2Rlciwgc3RyaW5nLCBib29sLCBpbnQsIGZsb2F0XG5cbiMgRGF0YSBTdHJ1Y3R1cmVzXG5AZG9jcyBudWxsYWJsZSwgbGlzdCwgYXJyYXksIGRpY3QsIGtleVZhbHVlUGFpcnMsIG9uZU9yTW9yZVxuXG4jIE9iamVjdCBQcmltaXRpdmVzXG5AZG9jcyBmaWVsZCwgYXQsIGluZGV4XG5cbiMgSW5jb25zaXN0ZW50IFN0cnVjdHVyZVxuQGRvY3MgbWF5YmUsIG9uZU9mXG5cbiMgUnVuIERlY29kZXJzXG5AZG9jcyBkZWNvZGVTdHJpbmcsIGRlY29kZVZhbHVlLCBWYWx1ZSwgRXJyb3IsIGVycm9yVG9TdHJpbmdcblxuIyBNYXBwaW5nXG5cbioqTm90ZToqKiBJZiB5b3UgcnVuIG91dCBvZiBtYXAgZnVuY3Rpb25zLCB0YWtlIGEgbG9vayBhdCBbZWxtLWpzb24tZGVjb2RlLXBpcGVsaW5lXVtwaXBlXVxud2hpY2ggbWFrZXMgaXQgZWFzaWVyIHRvIGhhbmRsZSBsYXJnZSBvYmplY3RzLCBidXQgcHJvZHVjZXMgbG93ZXIgcXVhbGl0eSB0eXBlXG5lcnJvcnMuXG5cbltwaXBlXTogL3BhY2thZ2VzL05vUmVkSW5rL2VsbS1qc29uLWRlY29kZS1waXBlbGluZS9sYXRlc3RcblxuQGRvY3MgbWFwLCBtYXAyLCBtYXAzLCBtYXA0LCBtYXA1LCBtYXA2LCBtYXA3LCBtYXA4XG5cbiMgRmFuY3kgRGVjb2RpbmdcbkBkb2NzIGxhenksIHZhbHVlLCBudWxsLCBzdWNjZWVkLCBmYWlsLCBhbmRUaGVuXG4tfVxuXG5cbmltcG9ydCBBcnJheSBleHBvc2luZyAoQXJyYXkpXG5pbXBvcnQgRGljdCBleHBvc2luZyAoRGljdClcbmltcG9ydCBKc29uLkVuY29kZVxuaW1wb3J0IEVsbS5LZXJuZWwuSnNvblxuXG5cblxuLS0gUFJJTUlUSVZFU1xuXG5cbnstfCBBIHZhbHVlIHRoYXQga25vd3MgaG93IHRvIGRlY29kZSBKU09OIHZhbHVlcy5cblxuVGhlcmUgaXMgYSB3aG9sZSBzZWN0aW9uIGluIGBndWlkZS5lbG0tbGFuZy5vcmdgIGFib3V0IGRlY29kZXJzLCBzbyBbY2hlY2sgaXRcbm91dF0oaHR0cHM6Ly9ndWlkZS5lbG0tbGFuZy5vcmcvaW50ZXJvcC9qc29uLmh0bWwpIGZvciBhIG1vcmUgY29tcHJlaGVuc2l2ZVxuaW50cm9kdWN0aW9uIVxuLX1cbnR5cGUgRGVjb2RlciBhID0gRGVjb2RlclxuXG5cbnstfCBEZWNvZGUgYSBKU09OIHN0cmluZyBpbnRvIGFuIEVsbSBgU3RyaW5nYC5cblxuICAgIGRlY29kZVN0cmluZyBzdHJpbmcgXCJ0cnVlXCIgICAgICAgICAgICAgID09IEVyciAuLi5cbiAgICBkZWNvZGVTdHJpbmcgc3RyaW5nIFwiNDJcIiAgICAgICAgICAgICAgICA9PSBFcnIgLi4uXG4gICAgZGVjb2RlU3RyaW5nIHN0cmluZyBcIjMuMTRcIiAgICAgICAgICAgICAgPT0gRXJyIC4uLlxuICAgIGRlY29kZVN0cmluZyBzdHJpbmcgXCJcXFwiaGVsbG9cXFwiXCIgICAgICAgICA9PSBPayBcImhlbGxvXCJcbiAgICBkZWNvZGVTdHJpbmcgc3RyaW5nIFwieyBcXFwiaGVsbG9cXFwiOiA0MiB9XCIgPT0gRXJyIC4uLlxuLX1cbnN0cmluZyA6IERlY29kZXIgU3RyaW5nXG5zdHJpbmcgPVxuICBFbG0uS2VybmVsLkpzb24uZGVjb2RlU3RyaW5nXG5cblxuey18IERlY29kZSBhIEpTT04gYm9vbGVhbiBpbnRvIGFuIEVsbSBgQm9vbGAuXG5cbiAgICBkZWNvZGVTdHJpbmcgYm9vbCBcInRydWVcIiAgICAgICAgICAgICAgPT0gT2sgVHJ1ZVxuICAgIGRlY29kZVN0cmluZyBib29sIFwiNDJcIiAgICAgICAgICAgICAgICA9PSBFcnIgLi4uXG4gICAgZGVjb2RlU3RyaW5nIGJvb2wgXCIzLjE0XCIgICAgICAgICAgICAgID09IEVyciAuLi5cbiAgICBkZWNvZGVTdHJpbmcgYm9vbCBcIlxcXCJoZWxsb1xcXCJcIiAgICAgICAgID09IEVyciAuLi5cbiAgICBkZWNvZGVTdHJpbmcgYm9vbCBcInsgXFxcImhlbGxvXFxcIjogNDIgfVwiID09IEVyciAuLi5cbi19XG5ib29sIDogRGVjb2RlciBCb29sXG5ib29sID1cbiAgRWxtLktlcm5lbC5Kc29uLmRlY29kZUJvb2xcblxuXG57LXwgRGVjb2RlIGEgSlNPTiBudW1iZXIgaW50byBhbiBFbG0gYEludGAuXG5cbiAgICBkZWNvZGVTdHJpbmcgaW50IFwidHJ1ZVwiICAgICAgICAgICAgICA9PSBFcnIgLi4uXG4gICAgZGVjb2RlU3RyaW5nIGludCBcIjQyXCIgICAgICAgICAgICAgICAgPT0gT2sgNDJcbiAgICBkZWNvZGVTdHJpbmcgaW50IFwiMy4xNFwiICAgICAgICAgICAgICA9PSBFcnIgLi4uXG4gICAgZGVjb2RlU3RyaW5nIGludCBcIlxcXCJoZWxsb1xcXCJcIiAgICAgICAgID09IEVyciAuLi5cbiAgICBkZWNvZGVTdHJpbmcgaW50IFwieyBcXFwiaGVsbG9cXFwiOiA0MiB9XCIgPT0gRXJyIC4uLlxuLX1cbmludCA6IERlY29kZXIgSW50XG5pbnQgPVxuICBFbG0uS2VybmVsLkpzb24uZGVjb2RlSW50XG5cblxuey18IERlY29kZSBhIEpTT04gbnVtYmVyIGludG8gYW4gRWxtIGBGbG9hdGAuXG5cbiAgICBkZWNvZGVTdHJpbmcgZmxvYXQgXCJ0cnVlXCIgICAgICAgICAgICAgID09IEVyciAuLlxuICAgIGRlY29kZVN0cmluZyBmbG9hdCBcIjQyXCIgICAgICAgICAgICAgICAgPT0gT2sgNDJcbiAgICBkZWNvZGVTdHJpbmcgZmxvYXQgXCIzLjE0XCIgICAgICAgICAgICAgID09IE9rIDMuMTRcbiAgICBkZWNvZGVTdHJpbmcgZmxvYXQgXCJcXFwiaGVsbG9cXFwiXCIgICAgICAgICA9PSBFcnIgLi4uXG4gICAgZGVjb2RlU3RyaW5nIGZsb2F0IFwieyBcXFwiaGVsbG9cXFwiOiA0MiB9XCIgPT0gRXJyIC4uLlxuLX1cbmZsb2F0IDogRGVjb2RlciBGbG9hdFxuZmxvYXQgPVxuICBFbG0uS2VybmVsLkpzb24uZGVjb2RlRmxvYXRcblxuXG5cbi0tIERBVEEgU1RSVUNUVVJFU1xuXG5cbnstfCBEZWNvZGUgYSBudWxsYWJsZSBKU09OIHZhbHVlIGludG8gYW4gRWxtIHZhbHVlLlxuXG4gICAgZGVjb2RlU3RyaW5nIChudWxsYWJsZSBpbnQpIFwiMTNcIiAgICA9PSBPayAoSnVzdCAxMylcbiAgICBkZWNvZGVTdHJpbmcgKG51bGxhYmxlIGludCkgXCI0MlwiICAgID09IE9rIChKdXN0IDQyKVxuICAgIGRlY29kZVN0cmluZyAobnVsbGFibGUgaW50KSBcIm51bGxcIiAgPT0gT2sgTm90aGluZ1xuICAgIGRlY29kZVN0cmluZyAobnVsbGFibGUgaW50KSBcInRydWVcIiAgPT0gRXJyIC4uXG4tfVxubnVsbGFibGUgOiBEZWNvZGVyIGEgLT4gRGVjb2RlciAoTWF5YmUgYSlcbm51bGxhYmxlIGRlY29kZXIgPVxuICBvbmVPZlxuICAgIFsgbnVsbCBOb3RoaW5nXG4gICAgLCBtYXAgSnVzdCBkZWNvZGVyXG4gICAgXVxuXG5cbnstfCBEZWNvZGUgYSBKU09OIGFycmF5IGludG8gYW4gRWxtIGBMaXN0YC5cblxuICAgIGRlY29kZVN0cmluZyAobGlzdCBpbnQpIFwiWzEsMiwzXVwiICAgICAgID09IE9rIFsxLDIsM11cbiAgICBkZWNvZGVTdHJpbmcgKGxpc3QgYm9vbCkgXCJbdHJ1ZSxmYWxzZV1cIiA9PSBPayBbVHJ1ZSxGYWxzZV1cbi19XG5saXN0IDogRGVjb2RlciBhIC0+IERlY29kZXIgKExpc3QgYSlcbmxpc3QgPVxuICBFbG0uS2VybmVsLkpzb24uZGVjb2RlTGlzdFxuXG5cbnstfCBEZWNvZGUgYSBKU09OIGFycmF5IGludG8gYW4gRWxtIGBBcnJheWAuXG5cbiAgICBkZWNvZGVTdHJpbmcgKGFycmF5IGludCkgXCJbMSwyLDNdXCIgICAgICAgPT0gT2sgKEFycmF5LmZyb21MaXN0IFsxLDIsM10pXG4gICAgZGVjb2RlU3RyaW5nIChhcnJheSBib29sKSBcIlt0cnVlLGZhbHNlXVwiID09IE9rIChBcnJheS5mcm9tTGlzdCBbVHJ1ZSxGYWxzZV0pXG4tfVxuYXJyYXkgOiBEZWNvZGVyIGEgLT4gRGVjb2RlciAoQXJyYXkgYSlcbmFycmF5ID1cbiAgRWxtLktlcm5lbC5Kc29uLmRlY29kZUFycmF5XG5cblxuey18IERlY29kZSBhIEpTT04gb2JqZWN0IGludG8gYW4gRWxtIGBEaWN0YC5cblxuICAgIGRlY29kZVN0cmluZyAoZGljdCBpbnQpIFwieyBcXFwiYWxpY2VcXFwiOiA0MiwgXFxcImJvYlxcXCI6IDk5IH1cIlxuICAgICAgPT0gT2sgKERpY3QuZnJvbUxpc3QgWyhcImFsaWNlXCIsIDQyKSwgKFwiYm9iXCIsIDk5KV0pXG5cbklmIHlvdSBuZWVkIHRoZSBrZXlzIChsaWtlIGBcImFsaWNlXCJgIGFuZCBgXCJib2JcImApIGF2YWlsYWJsZSBpbiB0aGUgYERpY3RgXG52YWx1ZXMgYXMgd2VsbCwgSSByZWNvbW1lbmQgdXNpbmcgYSAocHJpdmF0ZSkgaW50ZXJtZWRpYXRlIGRhdGEgc3RydWN0dXJlIGxpa2VcbmBJbmZvYCBpbiB0aGlzIGV4YW1wbGU6XG5cbiAgICBtb2R1bGUgVXNlciBleHBvc2luZyAoVXNlciwgZGVjb2RlcilcblxuICAgIGltcG9ydCBEaWN0XG4gICAgaW1wb3J0IEpzb24uRGVjb2RlIGV4cG9zaW5nICguLilcblxuICAgIHR5cGUgYWxpYXMgVXNlciA9XG4gICAgICB7IG5hbWUgOiBTdHJpbmdcbiAgICAgICwgaGVpZ2h0IDogRmxvYXRcbiAgICAgICwgYWdlIDogSW50XG4gICAgICB9XG5cbiAgICBkZWNvZGVyIDogRGVjb2RlciAoRGljdC5EaWN0IFN0cmluZyBVc2VyKVxuICAgIGRlY29kZXIgPVxuICAgICAgbWFwIChEaWN0Lm1hcCBpbmZvVG9Vc2VyKSAoZGljdCBpbmZvRGVjb2RlcilcblxuICAgIHR5cGUgYWxpYXMgSW5mbyA9XG4gICAgICB7IGhlaWdodCA6IEZsb2F0XG4gICAgICAsIGFnZSA6IEludFxuICAgICAgfVxuXG4gICAgaW5mb0RlY29kZXIgOiBEZWNvZGVyIEluZm9cbiAgICBpbmZvRGVjb2RlciA9XG4gICAgICBtYXAyIEluZm9cbiAgICAgICAgKGZpZWxkIFwiaGVpZ2h0XCIgZmxvYXQpXG4gICAgICAgIChmaWVsZCBcImFnZVwiIGludClcblxuICAgIGluZm9Ub1VzZXIgOiBTdHJpbmcgLT4gSW5mbyAtPiBVc2VyXG4gICAgaW5mb1RvVXNlciBuYW1lIHsgaGVpZ2h0LCBhZ2UgfSA9XG4gICAgICBVc2VyIG5hbWUgaGVpZ2h0IGFnZVxuXG5TbyBub3cgSlNPTiBsaWtlIGB7IFwiYWxpY2VcIjogeyBoZWlnaHQ6IDEuNiwgYWdlOiAzMyB9fWAgYXJlIHR1cm5lZCBpbnRvXG5kaWN0aW9uYXJ5IHZhbHVlcyBsaWtlIGBEaWN0LnNpbmdsZXRvbiBcImFsaWNlXCIgKFVzZXIgXCJhbGljZVwiIDEuNiAzMylgIGlmXG55b3UgbmVlZCB0aGF0LlxuLX1cbmRpY3QgOiBEZWNvZGVyIGEgLT4gRGVjb2RlciAoRGljdCBTdHJpbmcgYSlcbmRpY3QgZGVjb2RlciA9XG4gIG1hcCBEaWN0LmZyb21MaXN0IChrZXlWYWx1ZVBhaXJzIGRlY29kZXIpXG5cblxuey18IERlY29kZSBhIEpTT04gb2JqZWN0IGludG8gYW4gRWxtIGBMaXN0YCBvZiBwYWlycy5cblxuICAgIGRlY29kZVN0cmluZyAoa2V5VmFsdWVQYWlycyBpbnQpIFwieyBcXFwiYWxpY2VcXFwiOiA0MiwgXFxcImJvYlxcXCI6IDk5IH1cIlxuICAgICAgPT0gT2sgWyhcImFsaWNlXCIsIDQyKSwgKFwiYm9iXCIsIDk5KV1cbi19XG5rZXlWYWx1ZVBhaXJzIDogRGVjb2RlciBhIC0+IERlY29kZXIgKExpc3QgKFN0cmluZywgYSkpXG5rZXlWYWx1ZVBhaXJzID1cbiAgRWxtLktlcm5lbC5Kc29uLmRlY29kZUtleVZhbHVlUGFpcnNcblxuXG57LXwgRGVjb2RlIGEgSlNPTiBhcnJheSB0aGF0IGhhcyBvbmUgb3IgbW9yZSBlbGVtZW50cy4gVGhpcyBjb21lcyB1cCBpZiB5b3VcbndhbnQgdG8gZW5hYmxlIGRyYWctYW5kLWRyb3Agb2YgZmlsZXMgaW50byB5b3VyIGFwcGxpY2F0aW9uLiBZb3Ugd291bGQgcGFpclxudGhpcyBmdW5jdGlvbiB3aXRoIFtgZWxtL2ZpbGVgXSgpIHRvIHdyaXRlIGEgYGRyb3BEZWNvZGVyYCBsaWtlIHRoaXM6XG5cbiAgICBpbXBvcnQgRmlsZSBleHBvc2luZyAoRmlsZSlcbiAgICBpbXBvcnQgSnNvbi5EZWNvZGVyIGFzIERcblxuICAgIHR5cGUgTXNnXG4gICAgICA9IEdvdEZpbGVzIEZpbGUgKExpc3QgRmlsZXMpXG5cbiAgICBpbnB1dERlY29kZXIgOiBELkRlY29kZXIgTXNnXG4gICAgaW5wdXREZWNvZGVyID1cbiAgICAgIEQuYXQgW1wiZGF0YVRyYW5zZmVyXCIsXCJmaWxlc1wiXSAoRC5vbmVPck1vcmUgR290RmlsZXMgRmlsZS5kZWNvZGVyKVxuXG5UaGlzIGNhcHR1cmVzIHRoZSBmYWN0IHRoYXQgeW91IGNhbiBuZXZlciBkcmFnLWFuZC1kcm9wIHplcm8gZmlsZXMuXG4tfVxub25lT3JNb3JlIDogKGEgLT4gTGlzdCBhIC0+IHZhbHVlKSAtPiBEZWNvZGVyIGEgLT4gRGVjb2RlciB2YWx1ZVxub25lT3JNb3JlIHRvVmFsdWUgZGVjb2RlciA9XG4gIGxpc3QgZGVjb2RlclxuICAgIHw+IGFuZFRoZW4gKG9uZU9yTW9yZUhlbHAgdG9WYWx1ZSlcblxuXG5vbmVPck1vcmVIZWxwIDogKGEgLT4gTGlzdCBhIC0+IHZhbHVlKSAtPiBMaXN0IGEgLT4gRGVjb2RlciB2YWx1ZVxub25lT3JNb3JlSGVscCB0b1ZhbHVlIHhzID1cbiAgY2FzZSB4cyBvZlxuICAgIFtdIC0+XG4gICAgICBmYWlsIFwiYSBBUlJBWSB3aXRoIGF0IGxlYXN0IE9ORSBlbGVtZW50XCJcblxuICAgIHkgOjogeXMgLT5cbiAgICAgIHN1Y2NlZWQgKHRvVmFsdWUgeSB5cylcblxuXG5cbi0tIE9CSkVDVCBQUklNSVRJVkVTXG5cblxuey18IERlY29kZSBhIEpTT04gb2JqZWN0LCByZXF1aXJpbmcgYSBwYXJ0aWN1bGFyIGZpZWxkLlxuXG4gICAgZGVjb2RlU3RyaW5nIChmaWVsZCBcInhcIiBpbnQpIFwieyBcXFwieFxcXCI6IDMgfVwiICAgICAgICAgICAgPT0gT2sgM1xuICAgIGRlY29kZVN0cmluZyAoZmllbGQgXCJ4XCIgaW50KSBcInsgXFxcInhcXFwiOiAzLCBcXFwieVxcXCI6IDQgfVwiICA9PSBPayAzXG4gICAgZGVjb2RlU3RyaW5nIChmaWVsZCBcInhcIiBpbnQpIFwieyBcXFwieFxcXCI6IHRydWUgfVwiICAgICAgICAgPT0gRXJyIC4uLlxuICAgIGRlY29kZVN0cmluZyAoZmllbGQgXCJ4XCIgaW50KSBcInsgXFxcInlcXFwiOiA0IH1cIiAgICAgICAgICAgID09IEVyciAuLi5cblxuICAgIGRlY29kZVN0cmluZyAoZmllbGQgXCJuYW1lXCIgc3RyaW5nKSBcInsgXFxcIm5hbWVcXFwiOiBcXFwidG9tXFxcIiB9XCIgPT0gT2sgXCJ0b21cIlxuXG5UaGUgb2JqZWN0ICpjYW4qIGhhdmUgb3RoZXIgZmllbGRzLiBMb3RzIG9mIHRoZW0hIFRoZSBvbmx5IHRoaW5nIHRoaXMgZGVjb2RlclxuY2FyZXMgYWJvdXQgaXMgaWYgYHhgIGlzIHByZXNlbnQgYW5kIHRoYXQgdGhlIHZhbHVlIHRoZXJlIGlzIGFuIGBJbnRgLlxuXG5DaGVjayBvdXQgW2BtYXAyYF0oI21hcDIpIHRvIHNlZSBob3cgdG8gZGVjb2RlIG11bHRpcGxlIGZpZWxkcyFcbi19XG5maWVsZCA6IFN0cmluZyAtPiBEZWNvZGVyIGEgLT4gRGVjb2RlciBhXG5maWVsZCA9XG4gICAgRWxtLktlcm5lbC5Kc29uLmRlY29kZUZpZWxkXG5cblxuey18IERlY29kZSBhIG5lc3RlZCBKU09OIG9iamVjdCwgcmVxdWlyaW5nIGNlcnRhaW4gZmllbGRzLlxuXG4gICAganNvbiA9IFwiXCJcInsgXCJwZXJzb25cIjogeyBcIm5hbWVcIjogXCJ0b21cIiwgXCJhZ2VcIjogNDIgfSB9XCJcIlwiXG5cbiAgICBkZWNvZGVTdHJpbmcgKGF0IFtcInBlcnNvblwiLCBcIm5hbWVcIl0gc3RyaW5nKSBqc29uICA9PSBPayBcInRvbVwiXG4gICAgZGVjb2RlU3RyaW5nIChhdCBbXCJwZXJzb25cIiwgXCJhZ2VcIiBdIGludCAgICkganNvbiAgPT0gT2sgNDJcblxuVGhpcyBpcyByZWFsbHkganVzdCBhIHNob3J0aGFuZCBmb3Igc2F5aW5nIHRoaW5ncyBsaWtlOlxuXG4gICAgZmllbGQgXCJwZXJzb25cIiAoZmllbGQgXCJuYW1lXCIgc3RyaW5nKSA9PSBhdCBbXCJwZXJzb25cIixcIm5hbWVcIl0gc3RyaW5nXG4tfVxuYXQgOiBMaXN0IFN0cmluZyAtPiBEZWNvZGVyIGEgLT4gRGVjb2RlciBhXG5hdCBmaWVsZHMgZGVjb2RlciA9XG4gICAgTGlzdC5mb2xkciBmaWVsZCBkZWNvZGVyIGZpZWxkc1xuXG5cbnstfCBEZWNvZGUgYSBKU09OIGFycmF5LCByZXF1aXJpbmcgYSBwYXJ0aWN1bGFyIGluZGV4LlxuXG4gICAganNvbiA9IFwiXCJcIlsgXCJhbGljZVwiLCBcImJvYlwiLCBcImNodWNrXCIgXVwiXCJcIlxuXG4gICAgZGVjb2RlU3RyaW5nIChpbmRleCAwIHN0cmluZykganNvbiAgPT0gT2sgXCJhbGljZVwiXG4gICAgZGVjb2RlU3RyaW5nIChpbmRleCAxIHN0cmluZykganNvbiAgPT0gT2sgXCJib2JcIlxuICAgIGRlY29kZVN0cmluZyAoaW5kZXggMiBzdHJpbmcpIGpzb24gID09IE9rIFwiY2h1Y2tcIlxuICAgIGRlY29kZVN0cmluZyAoaW5kZXggMyBzdHJpbmcpIGpzb24gID09IEVyciAuLi5cbi19XG5pbmRleCA6IEludCAtPiBEZWNvZGVyIGEgLT4gRGVjb2RlciBhXG5pbmRleCA9XG4gICAgRWxtLktlcm5lbC5Kc29uLmRlY29kZUluZGV4XG5cblxuXG4tLSBXRUlSRCBTVFJVQ1RVUkVcblxuXG57LXwgSGVscGZ1bCBmb3IgZGVhbGluZyB3aXRoIG9wdGlvbmFsIGZpZWxkcy4gSGVyZSBhcmUgYSBmZXcgc2xpZ2h0bHkgZGlmZmVyZW50XG5leGFtcGxlczpcblxuICAgIGpzb24gPSBcIlwiXCJ7IFwibmFtZVwiOiBcInRvbVwiLCBcImFnZVwiOiA0MiB9XCJcIlwiXG5cbiAgICBkZWNvZGVTdHJpbmcgKG1heWJlIChmaWVsZCBcImFnZVwiICAgIGludCAgKSkganNvbiA9PSBPayAoSnVzdCA0MilcbiAgICBkZWNvZGVTdHJpbmcgKG1heWJlIChmaWVsZCBcIm5hbWVcIiAgIGludCAgKSkganNvbiA9PSBPayBOb3RoaW5nXG4gICAgZGVjb2RlU3RyaW5nIChtYXliZSAoZmllbGQgXCJoZWlnaHRcIiBmbG9hdCkpIGpzb24gPT0gT2sgTm90aGluZ1xuXG4gICAgZGVjb2RlU3RyaW5nIChmaWVsZCBcImFnZVwiICAgIChtYXliZSBpbnQgICkpIGpzb24gPT0gT2sgKEp1c3QgNDIpXG4gICAgZGVjb2RlU3RyaW5nIChmaWVsZCBcIm5hbWVcIiAgIChtYXliZSBpbnQgICkpIGpzb24gPT0gT2sgTm90aGluZ1xuICAgIGRlY29kZVN0cmluZyAoZmllbGQgXCJoZWlnaHRcIiAobWF5YmUgZmxvYXQpKSBqc29uID09IEVyciAuLi5cblxuTm90aWNlIHRoZSBsYXN0IGV4YW1wbGUhIEl0IGlzIHNheWluZyB3ZSAqbXVzdCogaGF2ZSBhIGZpZWxkIG5hbWVkIGBoZWlnaHRgIGFuZFxudGhlIGNvbnRlbnQgKm1heSogYmUgYSBmbG9hdC4gVGhlcmUgaXMgbm8gYGhlaWdodGAgZmllbGQsIHNvIHRoZSBkZWNvZGVyIGZhaWxzLlxuXG5Qb2ludCBpcywgYG1heWJlYCB3aWxsIG1ha2UgZXhhY3RseSB3aGF0IGl0IGNvbnRhaW5zIGNvbmRpdGlvbmFsLiBGb3Igb3B0aW9uYWxcbmZpZWxkcywgdGhpcyBtZWFucyB5b3UgcHJvYmFibHkgd2FudCBpdCAqb3V0c2lkZSogYSB1c2Ugb2YgYGZpZWxkYCBvciBgYXRgLlxuLX1cbm1heWJlIDogRGVjb2RlciBhIC0+IERlY29kZXIgKE1heWJlIGEpXG5tYXliZSBkZWNvZGVyID1cbiAgb25lT2ZcbiAgICBbIG1hcCBKdXN0IGRlY29kZXJcbiAgICAsIHN1Y2NlZWQgTm90aGluZ1xuICAgIF1cblxuXG57LXwgVHJ5IGEgYnVuY2ggb2YgZGlmZmVyZW50IGRlY29kZXJzLiBUaGlzIGNhbiBiZSB1c2VmdWwgaWYgdGhlIEpTT04gbWF5IGNvbWVcbmluIGEgY291cGxlIGRpZmZlcmVudCBmb3JtYXRzLiBGb3IgZXhhbXBsZSwgc2F5IHlvdSB3YW50IHRvIHJlYWQgYW4gYXJyYXkgb2Zcbm51bWJlcnMsIGJ1dCBzb21lIG9mIHRoZW0gYXJlIGBudWxsYC5cblxuICAgIGltcG9ydCBTdHJpbmdcblxuICAgIGJhZEludCA6IERlY29kZXIgSW50XG4gICAgYmFkSW50ID1cbiAgICAgIG9uZU9mIFsgaW50LCBudWxsIDAgXVxuXG4gICAgLS0gZGVjb2RlU3RyaW5nIChsaXN0IGJhZEludCkgXCJbMSwyLG51bGwsNF1cIiA9PSBPayBbMSwyLDAsNF1cblxuV2h5IHdvdWxkIHNvbWVvbmUgZ2VuZXJhdGUgSlNPTiBsaWtlIHRoaXM/IFF1ZXN0aW9ucyBsaWtlIHRoaXMgYXJlIG5vdCBnb29kXG5mb3IgeW91ciBoZWFsdGguIFRoZSBwb2ludCBpcyB0aGF0IHlvdSBjYW4gdXNlIGBvbmVPZmAgdG8gaGFuZGxlIHNpdHVhdGlvbnNcbmxpa2UgdGhpcyFcblxuWW91IGNvdWxkIGFsc28gdXNlIGBvbmVPZmAgdG8gaGVscCB2ZXJzaW9uIHlvdXIgZGF0YS4gVHJ5IHRoZSBsYXRlc3QgZm9ybWF0LFxudGhlbiBhIGZldyBvbGRlciBvbmVzIHRoYXQgeW91IHN0aWxsIHN1cHBvcnQuIFlvdSBjb3VsZCB1c2UgYGFuZFRoZW5gIHRvIGJlXG5ldmVuIG1vcmUgcGFydGljdWxhciBpZiB5b3Ugd2FudGVkLlxuLX1cbm9uZU9mIDogTGlzdCAoRGVjb2RlciBhKSAtPiBEZWNvZGVyIGFcbm9uZU9mID1cbiAgICBFbG0uS2VybmVsLkpzb24ub25lT2ZcblxuXG5cbi0tIE1BUFBJTkdcblxuXG57LXwgVHJhbnNmb3JtIGEgZGVjb2Rlci4gTWF5YmUgeW91IGp1c3Qgd2FudCB0byBrbm93IHRoZSBsZW5ndGggb2YgYSBzdHJpbmc6XG5cbiAgICBpbXBvcnQgU3RyaW5nXG5cbiAgICBzdHJpbmdMZW5ndGggOiBEZWNvZGVyIEludFxuICAgIHN0cmluZ0xlbmd0aCA9XG4gICAgICBtYXAgU3RyaW5nLmxlbmd0aCBzdHJpbmdcblxuSXQgaXMgb2Z0ZW4gaGVscGZ1bCB0byB1c2UgYG1hcGAgd2l0aCBgb25lT2ZgLCBsaWtlIHdoZW4gZGVmaW5pbmcgYG51bGxhYmxlYDpcblxuICAgIG51bGxhYmxlIDogRGVjb2RlciBhIC0+IERlY29kZXIgKE1heWJlIGEpXG4gICAgbnVsbGFibGUgZGVjb2RlciA9XG4gICAgICBvbmVPZlxuICAgICAgICBbIG51bGwgTm90aGluZ1xuICAgICAgICAsIG1hcCBKdXN0IGRlY29kZXJcbiAgICAgICAgXVxuLX1cbm1hcCA6IChhIC0+IHZhbHVlKSAtPiBEZWNvZGVyIGEgLT4gRGVjb2RlciB2YWx1ZVxubWFwID1cbiAgICBFbG0uS2VybmVsLkpzb24ubWFwMVxuXG5cbnstfCBUcnkgdHdvIGRlY29kZXJzIGFuZCB0aGVuIGNvbWJpbmUgdGhlIHJlc3VsdC4gV2UgY2FuIHVzZSB0aGlzIHRvIGRlY29kZVxub2JqZWN0cyB3aXRoIG1hbnkgZmllbGRzOlxuXG4gICAgdHlwZSBhbGlhcyBQb2ludCA9IHsgeCA6IEZsb2F0LCB5IDogRmxvYXQgfVxuXG4gICAgcG9pbnQgOiBEZWNvZGVyIFBvaW50XG4gICAgcG9pbnQgPVxuICAgICAgbWFwMiBQb2ludFxuICAgICAgICAoZmllbGQgXCJ4XCIgZmxvYXQpXG4gICAgICAgIChmaWVsZCBcInlcIiBmbG9hdClcblxuICAgIC0tIGRlY29kZVN0cmluZyBwb2ludCBcIlwiXCJ7IFwieFwiOiAzLCBcInlcIjogNCB9XCJcIlwiID09IE9rIHsgeCA9IDMsIHkgPSA0IH1cblxuSXQgdHJpZXMgZWFjaCBpbmRpdmlkdWFsIGRlY29kZXIgYW5kIHB1dHMgdGhlIHJlc3VsdCB0b2dldGhlciB3aXRoIHRoZSBgUG9pbnRgXG5jb25zdHJ1Y3Rvci5cbi19XG5tYXAyIDogKGEgLT4gYiAtPiB2YWx1ZSkgLT4gRGVjb2RlciBhIC0+IERlY29kZXIgYiAtPiBEZWNvZGVyIHZhbHVlXG5tYXAyID1cbiAgICBFbG0uS2VybmVsLkpzb24ubWFwMlxuXG5cbnstfCBUcnkgdGhyZWUgZGVjb2RlcnMgYW5kIHRoZW4gY29tYmluZSB0aGUgcmVzdWx0LiBXZSBjYW4gdXNlIHRoaXMgdG8gZGVjb2RlXG5vYmplY3RzIHdpdGggbWFueSBmaWVsZHM6XG5cbiAgICB0eXBlIGFsaWFzIFBlcnNvbiA9IHsgbmFtZSA6IFN0cmluZywgYWdlIDogSW50LCBoZWlnaHQgOiBGbG9hdCB9XG5cbiAgICBwZXJzb24gOiBEZWNvZGVyIFBlcnNvblxuICAgIHBlcnNvbiA9XG4gICAgICBtYXAzIFBlcnNvblxuICAgICAgICAoYXQgW1wibmFtZVwiXSBzdHJpbmcpXG4gICAgICAgIChhdCBbXCJpbmZvXCIsXCJhZ2VcIl0gaW50KVxuICAgICAgICAoYXQgW1wiaW5mb1wiLFwiaGVpZ2h0XCJdIGZsb2F0KVxuXG4gICAgLS0ganNvbiA9IFwiXCJcInsgXCJuYW1lXCI6IFwidG9tXCIsIFwiaW5mb1wiOiB7IFwiYWdlXCI6IDQyLCBcImhlaWdodFwiOiAxLjggfSB9XCJcIlwiXG4gICAgLS0gZGVjb2RlU3RyaW5nIHBlcnNvbiBqc29uID09IE9rIHsgbmFtZSA9IFwidG9tXCIsIGFnZSA9IDQyLCBoZWlnaHQgPSAxLjggfVxuXG5MaWtlIGBtYXAyYCBpdCB0cmllcyBlYWNoIGRlY29kZXIgaW4gb3JkZXIgYW5kIHRoZW4gZ2l2ZSB0aGUgcmVzdWx0cyB0byB0aGVcbmBQZXJzb25gIGNvbnN0cnVjdG9yLiBUaGF0IGNhbiBiZSBhbnkgZnVuY3Rpb24gdGhvdWdoIVxuLX1cbm1hcDMgOiAoYSAtPiBiIC0+IGMgLT4gdmFsdWUpIC0+IERlY29kZXIgYSAtPiBEZWNvZGVyIGIgLT4gRGVjb2RlciBjIC0+IERlY29kZXIgdmFsdWVcbm1hcDMgPVxuICAgIEVsbS5LZXJuZWwuSnNvbi5tYXAzXG5cblxuey18LX1cbm1hcDQgOiAoYSAtPiBiIC0+IGMgLT4gZCAtPiB2YWx1ZSkgLT4gRGVjb2RlciBhIC0+IERlY29kZXIgYiAtPiBEZWNvZGVyIGMgLT4gRGVjb2RlciBkIC0+IERlY29kZXIgdmFsdWVcbm1hcDQgPVxuICAgIEVsbS5LZXJuZWwuSnNvbi5tYXA0XG5cblxuey18LX1cbm1hcDUgOiAoYSAtPiBiIC0+IGMgLT4gZCAtPiBlIC0+IHZhbHVlKSAtPiBEZWNvZGVyIGEgLT4gRGVjb2RlciBiIC0+IERlY29kZXIgYyAtPiBEZWNvZGVyIGQgLT4gRGVjb2RlciBlIC0+IERlY29kZXIgdmFsdWVcbm1hcDUgPVxuICAgIEVsbS5LZXJuZWwuSnNvbi5tYXA1XG5cblxuey18LX1cbm1hcDYgOiAoYSAtPiBiIC0+IGMgLT4gZCAtPiBlIC0+IGYgLT4gdmFsdWUpIC0+IERlY29kZXIgYSAtPiBEZWNvZGVyIGIgLT4gRGVjb2RlciBjIC0+IERlY29kZXIgZCAtPiBEZWNvZGVyIGUgLT4gRGVjb2RlciBmIC0+IERlY29kZXIgdmFsdWVcbm1hcDYgPVxuICAgIEVsbS5LZXJuZWwuSnNvbi5tYXA2XG5cblxuey18LX1cbm1hcDcgOiAoYSAtPiBiIC0+IGMgLT4gZCAtPiBlIC0+IGYgLT4gZyAtPiB2YWx1ZSkgLT4gRGVjb2RlciBhIC0+IERlY29kZXIgYiAtPiBEZWNvZGVyIGMgLT4gRGVjb2RlciBkIC0+IERlY29kZXIgZSAtPiBEZWNvZGVyIGYgLT4gRGVjb2RlciBnIC0+IERlY29kZXIgdmFsdWVcbm1hcDcgPVxuICAgIEVsbS5LZXJuZWwuSnNvbi5tYXA3XG5cblxuey18LX1cbm1hcDggOiAoYSAtPiBiIC0+IGMgLT4gZCAtPiBlIC0+IGYgLT4gZyAtPiBoIC0+IHZhbHVlKSAtPiBEZWNvZGVyIGEgLT4gRGVjb2RlciBiIC0+IERlY29kZXIgYyAtPiBEZWNvZGVyIGQgLT4gRGVjb2RlciBlIC0+IERlY29kZXIgZiAtPiBEZWNvZGVyIGcgLT4gRGVjb2RlciBoIC0+IERlY29kZXIgdmFsdWVcbm1hcDggPVxuICAgIEVsbS5LZXJuZWwuSnNvbi5tYXA4XG5cblxuXG4tLSBSVU4gREVDT0RFUlNcblxuXG57LXwgUGFyc2UgdGhlIGdpdmVuIHN0cmluZyBpbnRvIGEgSlNPTiB2YWx1ZSBhbmQgdGhlbiBydW4gdGhlIGBEZWNvZGVyYCBvbiBpdC5cblRoaXMgd2lsbCBmYWlsIGlmIHRoZSBzdHJpbmcgaXMgbm90IHdlbGwtZm9ybWVkIEpTT04gb3IgaWYgdGhlIGBEZWNvZGVyYFxuZmFpbHMgZm9yIHNvbWUgcmVhc29uLlxuXG4gICAgZGVjb2RlU3RyaW5nIGludCBcIjRcIiAgICAgPT0gT2sgNFxuICAgIGRlY29kZVN0cmluZyBpbnQgXCIxICsgMlwiID09IEVyciAuLi5cbi19XG5kZWNvZGVTdHJpbmcgOiBEZWNvZGVyIGEgLT4gU3RyaW5nIC0+IFJlc3VsdCBFcnJvciBhXG5kZWNvZGVTdHJpbmcgPVxuICBFbG0uS2VybmVsLkpzb24ucnVuT25TdHJpbmdcblxuXG57LXwgUnVuIGEgYERlY29kZXJgIG9uIHNvbWUgSlNPTiBgVmFsdWVgLiBZb3UgY2FuIHNlbmQgdGhlc2UgSlNPTiB2YWx1ZXNcbnRocm91Z2ggcG9ydHMsIHNvIHRoYXQgaXMgcHJvYmFibHkgdGhlIG1haW4gdGltZSB5b3Ugd291bGQgdXNlIHRoaXMgZnVuY3Rpb24uXG4tfVxuZGVjb2RlVmFsdWUgOiBEZWNvZGVyIGEgLT4gVmFsdWUgLT4gUmVzdWx0IEVycm9yIGFcbmRlY29kZVZhbHVlID1cbiAgRWxtLktlcm5lbC5Kc29uLnJ1blxuXG5cbnstfCBSZXByZXNlbnRzIGEgSmF2YVNjcmlwdCB2YWx1ZS5cbi19XG50eXBlIGFsaWFzIFZhbHVlID0gSnNvbi5FbmNvZGUuVmFsdWVcblxuXG57LXwgQSBzdHJ1Y3R1cmVkIGVycm9yIGRlc2NyaWJpbmcgZXhhY3RseSBob3cgdGhlIGRlY29kZXIgZmFpbGVkLiBZb3UgY2FuIHVzZVxudGhpcyB0byBjcmVhdGUgbW9yZSBlbGFib3JhdGUgdmlzdWFsaXphdGlvbnMgb2YgYSBkZWNvZGVyIHByb2JsZW0uIEZvciBleGFtcGxlLFxueW91IGNvdWxkIHNob3cgdGhlIGVudGlyZSBKU09OIG9iamVjdCBhbmQgc2hvdyB0aGUgcGFydCBjYXVzaW5nIHRoZSBmYWlsdXJlIGluXG5yZWQuXG4tfVxudHlwZSBFcnJvclxuICA9IEZpZWxkIFN0cmluZyBFcnJvclxuICB8IEluZGV4IEludCBFcnJvclxuICB8IE9uZU9mIChMaXN0IEVycm9yKVxuICB8IEZhaWx1cmUgU3RyaW5nIFZhbHVlXG5cblxuey18IENvbnZlcnQgYSBkZWNvZGluZyBlcnJvciBpbnRvIGEgYFN0cmluZ2AgdGhhdCBpcyBuaWNlIGZvciBkZWJ1Z2dpbmcuXG5cbkl0IHByb2R1Y2VzIG11bHRpcGxlIGxpbmVzIG9mIG91dHB1dCwgc28geW91IG1heSB3YW50IHRvIHBlZWsgYXQgaXQgd2l0aFxuc29tZXRoaW5nIGxpa2UgdGhpczpcblxuICAgIGltcG9ydCBIdG1sXG4gICAgaW1wb3J0IEpzb24uRGVjb2RlIGFzIERlY29kZVxuXG4gICAgZXJyb3JUb0h0bWwgOiBEZWNvZGUuRXJyb3IgLT4gSHRtbC5IdG1sIG1zZ1xuICAgIGVycm9yVG9IdG1sIGVycm9yID1cbiAgICAgIEh0bWwucHJlIFtdIFsgSHRtbC50ZXh0IChEZWNvZGUuZXJyb3JUb1N0cmluZyBlcnJvcikgXVxuXG4qKk5vdGU6KiogSXQgd291bGQgYmUgY29vbCB0byBkbyBuaWNlciBjb2xvcmluZyBhbmQgZmFuY2llciBIVE1MLCBidXQgSSB3YW50ZWRcbnRvIGF2b2lkIGhhdmluZyBhbiBgZWxtL2h0bWxgIGRlcGVuZGVuY3kgZm9yIG5vdy4gSXQgaXMgdG90YWxseSBwb3NzaWJsZSB0b1xuY3Jhd2wgdGhlIGBFcnJvcmAgc3RydWN0dXJlIGFuZCBjcmVhdGUgdGhpcyBzZXBhcmF0ZWx5IHRob3VnaCFcbi19XG5lcnJvclRvU3RyaW5nIDogRXJyb3IgLT4gU3RyaW5nXG5lcnJvclRvU3RyaW5nIGVycm9yID1cbiAgZXJyb3JUb1N0cmluZ0hlbHAgZXJyb3IgW11cblxuXG5lcnJvclRvU3RyaW5nSGVscCA6IEVycm9yIC0+IExpc3QgU3RyaW5nIC0+IFN0cmluZ1xuZXJyb3JUb1N0cmluZ0hlbHAgZXJyb3IgY29udGV4dCA9XG4gIGNhc2UgZXJyb3Igb2ZcbiAgICBGaWVsZCBmIGVyciAtPlxuICAgICAgbGV0XG4gICAgICAgIGlzU2ltcGxlID1cbiAgICAgICAgICBjYXNlIFN0cmluZy51bmNvbnMgZiBvZlxuICAgICAgICAgICAgTm90aGluZyAtPlxuICAgICAgICAgICAgICBGYWxzZVxuXG4gICAgICAgICAgICBKdXN0IChjaGFyLCByZXN0KSAtPlxuICAgICAgICAgICAgICBDaGFyLmlzQWxwaGEgY2hhciAmJiBTdHJpbmcuYWxsIENoYXIuaXNBbHBoYU51bSByZXN0XG5cbiAgICAgICAgZmllbGROYW1lID1cbiAgICAgICAgICBpZiBpc1NpbXBsZSB0aGVuIFwiLlwiICsrIGYgZWxzZSBcIltcJ1wiICsrIGYgKysgXCJcJ11cIlxuICAgICAgaW5cbiAgICAgICAgZXJyb3JUb1N0cmluZ0hlbHAgZXJyIChmaWVsZE5hbWUgOjogY29udGV4dClcblxuICAgIEluZGV4IGkgZXJyIC0+XG4gICAgICBsZXRcbiAgICAgICAgaW5kZXhOYW1lID1cbiAgICAgICAgICBcIltcIiArKyBTdHJpbmcuZnJvbUludCBpICsrIFwiXVwiXG4gICAgICBpblxuICAgICAgICBlcnJvclRvU3RyaW5nSGVscCBlcnIgKGluZGV4TmFtZSA6OiBjb250ZXh0KVxuXG4gICAgT25lT2YgZXJyb3JzIC0+XG4gICAgICBjYXNlIGVycm9ycyBvZlxuICAgICAgICBbXSAtPlxuICAgICAgICAgIFwiUmFuIGludG8gYSBKc29uLkRlY29kZS5vbmVPZiB3aXRoIG5vIHBvc3NpYmlsaXRpZXNcIiArK1xuICAgICAgICAgICAgY2FzZSBjb250ZXh0IG9mXG4gICAgICAgICAgICAgIFtdIC0+XG4gICAgICAgICAgICAgICAgXCIhXCJcbiAgICAgICAgICAgICAgXyAtPlxuICAgICAgICAgICAgICAgIFwiIGF0IGpzb25cIiArKyBTdHJpbmcuam9pbiBcIlwiIChMaXN0LnJldmVyc2UgY29udGV4dClcblxuICAgICAgICBbZXJyXSAtPlxuICAgICAgICAgIGVycm9yVG9TdHJpbmdIZWxwIGVyciBjb250ZXh0XG5cbiAgICAgICAgXyAtPlxuICAgICAgICAgIGxldFxuICAgICAgICAgICAgc3RhcnRlciA9XG4gICAgICAgICAgICAgIGNhc2UgY29udGV4dCBvZlxuICAgICAgICAgICAgICAgIFtdIC0+XG4gICAgICAgICAgICAgICAgICBcIkpzb24uRGVjb2RlLm9uZU9mXCJcbiAgICAgICAgICAgICAgICBfIC0+XG4gICAgICAgICAgICAgICAgICBcIlRoZSBKc29uLkRlY29kZS5vbmVPZiBhdCBqc29uXCIgKysgU3RyaW5nLmpvaW4gXCJcIiAoTGlzdC5yZXZlcnNlIGNvbnRleHQpXG5cbiAgICAgICAgICAgIGludHJvZHVjdGlvbiA9XG4gICAgICAgICAgICAgIHN0YXJ0ZXIgKysgXCIgZmFpbGVkIGluIHRoZSBmb2xsb3dpbmcgXCIgKysgU3RyaW5nLmZyb21JbnQgKExpc3QubGVuZ3RoIGVycm9ycykgKysgXCIgd2F5czpcIlxuICAgICAgICAgIGluXG4gICAgICAgICAgICBTdHJpbmcuam9pbiBcIlxcblxcblwiIChpbnRyb2R1Y3Rpb24gOjogTGlzdC5pbmRleGVkTWFwIGVycm9yT25lT2YgZXJyb3JzKVxuXG4gICAgRmFpbHVyZSBtc2cganNvbiAtPlxuICAgICAgbGV0XG4gICAgICAgIGludHJvZHVjdGlvbiA9XG4gICAgICAgICAgY2FzZSBjb250ZXh0IG9mXG4gICAgICAgICAgICBbXSAtPlxuICAgICAgICAgICAgICBcIlByb2JsZW0gd2l0aCB0aGUgZ2l2ZW4gdmFsdWU6XFxuXFxuXCJcbiAgICAgICAgICAgIF8gLT5cbiAgICAgICAgICAgICAgXCJQcm9ibGVtIHdpdGggdGhlIHZhbHVlIGF0IGpzb25cIiArKyBTdHJpbmcuam9pbiBcIlwiIChMaXN0LnJldmVyc2UgY29udGV4dCkgKysgXCI6XFxuXFxuICAgIFwiXG4gICAgICBpblxuICAgICAgICBpbnRyb2R1Y3Rpb24gKysgaW5kZW50IChKc29uLkVuY29kZS5lbmNvZGUgNCBqc29uKSArKyBcIlxcblxcblwiICsrIG1zZ1xuXG5cbmVycm9yT25lT2YgOiBJbnQgLT4gRXJyb3IgLT4gU3RyaW5nXG5lcnJvck9uZU9mIGkgZXJyb3IgPVxuICBcIlxcblxcbihcIiArKyBTdHJpbmcuZnJvbUludCAoaSArIDEpICsrIFwiKSBcIiArKyBpbmRlbnQgKGVycm9yVG9TdHJpbmcgZXJyb3IpXG5cblxuaW5kZW50IDogU3RyaW5nIC0+IFN0cmluZ1xuaW5kZW50IHN0ciA9XG4gIFN0cmluZy5qb2luIFwiXFxuICAgIFwiIChTdHJpbmcuc3BsaXQgXCJcXG5cIiBzdHIpXG5cblxuXG4tLSBGQU5DWSBQUklNSVRJVkVTXG5cblxuey18IElnbm9yZSB0aGUgSlNPTiBhbmQgcHJvZHVjZSBhIGNlcnRhaW4gRWxtIHZhbHVlLlxuXG4gICAgZGVjb2RlU3RyaW5nIChzdWNjZWVkIDQyKSBcInRydWVcIiAgICA9PSBPayA0MlxuICAgIGRlY29kZVN0cmluZyAoc3VjY2VlZCA0MikgXCJbMSwyLDNdXCIgPT0gT2sgNDJcbiAgICBkZWNvZGVTdHJpbmcgKHN1Y2NlZWQgNDIpIFwiaGVsbG9cIiAgID09IEVyciAuLi4gLS0gdGhpcyBpcyBub3QgYSB2YWxpZCBKU09OIHN0cmluZ1xuXG5UaGlzIGlzIGhhbmR5IHdoZW4gdXNlZCB3aXRoIGBvbmVPZmAgb3IgYGFuZFRoZW5gLlxuLX1cbnN1Y2NlZWQgOiBhIC0+IERlY29kZXIgYVxuc3VjY2VlZCA9XG4gIEVsbS5LZXJuZWwuSnNvbi5zdWNjZWVkXG5cblxuey18IElnbm9yZSB0aGUgSlNPTiBhbmQgbWFrZSB0aGUgZGVjb2RlciBmYWlsLiBUaGlzIGlzIGhhbmR5IHdoZW4gdXNlZCB3aXRoXG5gb25lT2ZgIG9yIGBhbmRUaGVuYCB3aGVyZSB5b3Ugd2FudCB0byBnaXZlIGEgY3VzdG9tIGVycm9yIG1lc3NhZ2UgaW4gc29tZVxuY2FzZS5cblxuU2VlIHRoZSBbYGFuZFRoZW5gXSgjYW5kVGhlbikgZG9jcyBmb3IgYW4gZXhhbXBsZS5cbi19XG5mYWlsIDogU3RyaW5nIC0+IERlY29kZXIgYVxuZmFpbCA9XG4gIEVsbS5LZXJuZWwuSnNvbi5mYWlsXG5cblxuey18IENyZWF0ZSBkZWNvZGVycyB0aGF0IGRlcGVuZCBvbiBwcmV2aW91cyByZXN1bHRzLiBJZiB5b3UgYXJlIGNyZWF0aW5nXG52ZXJzaW9uZWQgZGF0YSwgeW91IG1pZ2h0IGRvIHNvbWV0aGluZyBsaWtlIHRoaXM6XG5cbiAgICBpbmZvIDogRGVjb2RlciBJbmZvXG4gICAgaW5mbyA9XG4gICAgICBmaWVsZCBcInZlcnNpb25cIiBpbnRcbiAgICAgICAgfD4gYW5kVGhlbiBpbmZvSGVscFxuXG4gICAgaW5mb0hlbHAgOiBJbnQgLT4gRGVjb2RlciBJbmZvXG4gICAgaW5mb0hlbHAgdmVyc2lvbiA9XG4gICAgICBjYXNlIHZlcnNpb24gb2ZcbiAgICAgICAgNCAtPlxuICAgICAgICAgIGluZm9EZWNvZGVyNFxuXG4gICAgICAgIDMgLT5cbiAgICAgICAgICBpbmZvRGVjb2RlcjNcblxuICAgICAgICBfIC0+XG4gICAgICAgICAgZmFpbCA8fFxuICAgICAgICAgICAgXCJUcnlpbmcgdG8gZGVjb2RlIGluZm8sIGJ1dCB2ZXJzaW9uIFwiXG4gICAgICAgICAgICArKyB0b1N0cmluZyB2ZXJzaW9uICsrIFwiIGlzIG5vdCBzdXBwb3J0ZWQuXCJcblxuICAgIC0tIGluZm9EZWNvZGVyNCA6IERlY29kZXIgSW5mb1xuICAgIC0tIGluZm9EZWNvZGVyMyA6IERlY29kZXIgSW5mb1xuLX1cbmFuZFRoZW4gOiAoYSAtPiBEZWNvZGVyIGIpIC0+IERlY29kZXIgYSAtPiBEZWNvZGVyIGJcbmFuZFRoZW4gPVxuICBFbG0uS2VybmVsLkpzb24uYW5kVGhlblxuXG5cbnstfCBTb21ldGltZXMgeW91IGhhdmUgSlNPTiB3aXRoIHJlY3Vyc2l2ZSBzdHJ1Y3R1cmUsIGxpa2UgbmVzdGVkIGNvbW1lbnRzLlxuWW91IGNhbiB1c2UgYGxhenlgIHRvIG1ha2Ugc3VyZSB5b3VyIGRlY29kZXIgdW5yb2xscyBsYXppbHkuXG5cbiAgICB0eXBlIGFsaWFzIENvbW1lbnQgPVxuICAgICAgeyBtZXNzYWdlIDogU3RyaW5nXG4gICAgICAsIHJlc3BvbnNlcyA6IFJlc3BvbnNlc1xuICAgICAgfVxuXG4gICAgdHlwZSBSZXNwb25zZXMgPSBSZXNwb25zZXMgKExpc3QgQ29tbWVudClcblxuICAgIGNvbW1lbnQgOiBEZWNvZGVyIENvbW1lbnRcbiAgICBjb21tZW50ID1cbiAgICAgIG1hcDIgQ29tbWVudFxuICAgICAgICAoZmllbGQgXCJtZXNzYWdlXCIgc3RyaW5nKVxuICAgICAgICAoZmllbGQgXCJyZXNwb25zZXNcIiAobWFwIFJlc3BvbnNlcyAobGlzdCAobGF6eSAoXFxfIC0+IGNvbW1lbnQpKSkpKVxuXG5JZiB3ZSBoYWQgc2FpZCBgbGlzdCBjb21tZW50YCBpbnN0ZWFkLCB3ZSB3b3VsZCBzdGFydCBleHBhbmRpbmcgdGhlIHZhbHVlXG5pbmZpbml0ZWx5LiBXaGF0IGlzIGEgYGNvbW1lbnRgPyBJdCBpcyBhIGRlY29kZXIgZm9yIG9iamVjdHMgd2hlcmUgdGhlXG5gcmVzcG9uc2VzYCBmaWVsZCBjb250YWlucyBjb21tZW50cy4gV2hhdCBpcyBhIGBjb21tZW50YCB0aG91Z2g/IEV0Yy5cblxuQnkgdXNpbmcgYGxpc3QgKGxhenkgKFxcXyAtPiBjb21tZW50KSlgIHdlIG1ha2Ugc3VyZSB0aGUgZGVjb2RlciBvbmx5IGV4cGFuZHNcbnRvIGJlIGFzIGRlZXAgYXMgdGhlIEpTT04gd2UgYXJlIGdpdmVuLiBZb3UgY2FuIHJlYWQgbW9yZSBhYm91dCByZWN1cnNpdmUgZGF0YVxuc3RydWN0dXJlcyBbaGVyZV1bXS5cblxuW2hlcmVdOiBodHRwczovL2dpdGh1Yi5jb20vZWxtL2NvbXBpbGVyL2Jsb2IvbWFzdGVyL2hpbnRzL3JlY3Vyc2l2ZS1hbGlhcy5tZFxuLX1cbmxhenkgOiAoKCkgLT4gRGVjb2RlciBhKSAtPiBEZWNvZGVyIGFcbmxhenkgdGh1bmsgPVxuICBhbmRUaGVuIHRodW5rIChzdWNjZWVkICgpKVxuXG5cbnstfCBEbyBub3QgZG8gYW55dGhpbmcgd2l0aCBhIEpTT04gdmFsdWUsIGp1c3QgYnJpbmcgaXQgaW50byBFbG0gYXMgYSBgVmFsdWVgLlxuVGhpcyBjYW4gYmUgdXNlZnVsIGlmIHlvdSBoYXZlIHBhcnRpY3VsYXJseSBjb21wbGV4IGRhdGEgdGhhdCB5b3Ugd291bGQgbGlrZSB0b1xuZGVhbCB3aXRoIGxhdGVyLiBPciBpZiB5b3UgYXJlIGdvaW5nIHRvIHNlbmQgaXQgb3V0IGEgcG9ydCBhbmQgZG8gbm90IGNhcmVcbmFib3V0IGl0cyBzdHJ1Y3R1cmUuXG4tfVxudmFsdWUgOiBEZWNvZGVyIFZhbHVlXG52YWx1ZSA9XG4gIEVsbS5LZXJuZWwuSnNvbi5kZWNvZGVWYWx1ZVxuXG5cbnstfCBEZWNvZGUgYSBgbnVsbGAgdmFsdWUgaW50byBzb21lIEVsbSB2YWx1ZS5cblxuICAgIGRlY29kZVN0cmluZyAobnVsbCBGYWxzZSkgXCJudWxsXCIgPT0gT2sgRmFsc2VcbiAgICBkZWNvZGVTdHJpbmcgKG51bGwgNDIpIFwibnVsbFwiICAgID09IE9rIDQyXG4gICAgZGVjb2RlU3RyaW5nIChudWxsIDQyKSBcIjQyXCIgICAgICA9PSBFcnIgLi5cbiAgICBkZWNvZGVTdHJpbmcgKG51bGwgNDIpIFwiZmFsc2VcIiAgID09IEVyciAuLlxuXG5TbyBpZiB5b3UgZXZlciBzZWUgYSBgbnVsbGAsIHRoaXMgd2lsbCByZXR1cm4gd2hhdGV2ZXIgdmFsdWUgeW91IHNwZWNpZmllZC5cbi19XG5udWxsIDogYSAtPiBEZWNvZGVyIGFcbm51bGwgPVxuICBFbG0uS2VybmVsLkpzb24uZGVjb2RlTnVsbFxuJ30pKSwKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ0VuY29kZS5lbG0nLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJEJsb2JOb2RlKAoJCQkJCQkJe3V0Zjg6ICdtb2R1bGUgSnNvbi5FbmNvZGUgZXhwb3NpbmdcbiAgKCBWYWx1ZVxuICAsIGVuY29kZVxuICAsIHN0cmluZywgaW50LCBmbG9hdCwgYm9vbCwgbnVsbFxuICAsIGxpc3QsIGFycmF5LCBzZXRcbiAgLCBvYmplY3QsIGRpY3RcbiAgKVxuXG57LXwgTGlicmFyeSBmb3IgdHVybmluZyBFbG0gdmFsdWVzIGludG8gSnNvbiB2YWx1ZXMuXG5cbiMgRW5jb2RpbmdcbkBkb2NzIGVuY29kZSwgVmFsdWVcblxuIyBQcmltaXRpdmVzXG5AZG9jcyBzdHJpbmcsIGludCwgZmxvYXQsIGJvb2wsIG51bGxcblxuIyBBcnJheXNcbkBkb2NzIGxpc3QsIGFycmF5LCBzZXRcblxuIyBPYmplY3RzXG5AZG9jcyBvYmplY3QsIGRpY3Rcbi19XG5cblxuaW1wb3J0IEFycmF5IGV4cG9zaW5nIChBcnJheSlcbmltcG9ydCBEaWN0IGV4cG9zaW5nIChEaWN0KVxuaW1wb3J0IFNldCBleHBvc2luZyAoU2V0KVxuaW1wb3J0IEVsbS5LZXJuZWwuSnNvblxuXG5cblxuLS0gRU5DT0RFXG5cblxuey18IFJlcHJlc2VudHMgYSBKYXZhU2NyaXB0IHZhbHVlLlxuLX1cbnR5cGUgVmFsdWUgPSBWYWx1ZVxuXG5cbnstfCBDb252ZXJ0IGEgYFZhbHVlYCBpbnRvIGEgcHJldHRpZmllZCBzdHJpbmcuIFRoZSBmaXJzdCBhcmd1bWVudCBzcGVjaWZpZXNcbnRoZSBhbW91bnQgb2YgaW5kZW50YXRpb24gaW4gdGhlIHJlc3VsdGluZyBzdHJpbmcuXG5cbiAgICBpbXBvcnQgSnNvbi5FbmNvZGUgYXMgRW5jb2RlXG5cbiAgICB0b20gOiBFbmNvZGUuVmFsdWVcbiAgICB0b20gPVxuICAgICAgICBFbmNvZGUub2JqZWN0XG4gICAgICAgICAgICBbICggXCJuYW1lXCIsIEVuY29kZS5zdHJpbmcgXCJUb21cIiApXG4gICAgICAgICAgICAsICggXCJhZ2VcIiwgRW5jb2RlLmludCA0MiApXG4gICAgICAgICAgICBdXG5cbiAgICBjb21wYWN0ID0gRW5jb2RlLmVuY29kZSAwIHRvbVxuICAgIC0tIHtcIm5hbWVcIjpcIlRvbVwiLFwiYWdlXCI6NDJ9XG5cbiAgICByZWFkYWJsZSA9IEVuY29kZS5lbmNvZGUgNCB0b21cbiAgICAtLSB7XG4gICAgLS0gICAgIFwibmFtZVwiOiBcIlRvbVwiLFxuICAgIC0tICAgICBcImFnZVwiOiA0MlxuICAgIC0tIH1cbi19XG5lbmNvZGUgOiBJbnQgLT4gVmFsdWUgLT4gU3RyaW5nXG5lbmNvZGUgPVxuICAgIEVsbS5LZXJuZWwuSnNvbi5lbmNvZGVcblxuXG5cbi0tIFBSSU1JVElWRVNcblxuXG57LXwgVHVybiBhIGBTdHJpbmdgIGludG8gYSBKU09OIHN0cmluZy5cblxuICAgIGltcG9ydCBKc29uLkVuY29kZSBleHBvc2luZyAoZW5jb2RlLCBzdHJpbmcpXG5cbiAgICAtLSBlbmNvZGUgMCAoc3RyaW5nIFwiXCIpICAgICAgPT0gXCJcXFwiXFxcIlwiXG4gICAgLS0gZW5jb2RlIDAgKHN0cmluZyBcImFiY1wiKSAgID09IFwiXFxcImFiY1xcXCJcIlxuICAgIC0tIGVuY29kZSAwIChzdHJpbmcgXCJoZWxsb1wiKSA9PSBcIlxcXCJoZWxsb1xcXCJcIlxuLX1cbnN0cmluZyA6IFN0cmluZyAtPiBWYWx1ZVxuc3RyaW5nID1cbiAgICBFbG0uS2VybmVsLkpzb24ud3JhcFxuXG5cbnstfCBUdXJuIGFuIGBJbnRgIGludG8gYSBKU09OIG51bWJlci5cblxuICAgIGltcG9ydCBKc29uLkVuY29kZSBleHBvc2luZyAoZW5jb2RlLCBpbnQpXG5cbiAgICAtLSBlbmNvZGUgMCAoaW50IDQyKSA9PSBcIjQyXCJcbiAgICAtLSBlbmNvZGUgMCAoaW50IC03KSA9PSBcIi03XCJcbiAgICAtLSBlbmNvZGUgMCAoaW50IDApICA9PSBcIjBcIlxuLX1cbmludCA6IEludCAtPiBWYWx1ZVxuaW50ID1cbiAgICBFbG0uS2VybmVsLkpzb24ud3JhcFxuXG5cbnstfCBUdXJuIGEgYEZsb2F0YCBpbnRvIGEgSlNPTiBudW1iZXIuXG5cbiAgICBpbXBvcnQgSnNvbi5FbmNvZGUgZXhwb3NpbmcgKGVuY29kZSwgZmxvYXQpXG5cbiAgICAtLSBlbmNvZGUgMCAoZmxvYXQgMy4xNCkgICAgID09IFwiMy4xNFwiXG4gICAgLS0gZW5jb2RlIDAgKGZsb2F0IDEuNjE4KSAgICA9PSBcIjEuNjE4XCJcbiAgICAtLSBlbmNvZGUgMCAoZmxvYXQgLTQyKSAgICAgID09IFwiLTQyXCJcbiAgICAtLSBlbmNvZGUgMCAoZmxvYXQgTmFOKSAgICAgID09IFwibnVsbFwiXG4gICAgLS0gZW5jb2RlIDAgKGZsb2F0IEluZmluaXR5KSA9PSBcIm51bGxcIlxuXG4qKk5vdGU6KiogRmxvYXRpbmcgcG9pbnQgbnVtYmVycyBhcmUgZGVmaW5lZCBpbiB0aGUgW0lFRUUgNzU0IHN0YW5kYXJkXVtpZWVlXVxud2hpY2ggaXMgaGFyZGNvZGVkIGludG8gYWxtb3N0IGFsbCBDUFVzLiBUaGlzIHN0YW5kYXJkIGFsbG93cyBgSW5maW5pdHlgIGFuZFxuYE5hTmAuIFtUaGUgSlNPTiBzcGVjXVtqc29uXSBkb2VzIG5vdCBpbmNsdWRlIHRoZXNlIHZhbHVlcywgc28gd2UgZW5jb2RlIHRoZW1cbmJvdGggYXMgYG51bGxgLlxuXG5baWVlZV06IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lFRUVfNzU0XG5banNvbl06IGh0dHBzOi8vd3d3Lmpzb24ub3JnL1xuLX1cbmZsb2F0IDogRmxvYXQgLT4gVmFsdWVcbmZsb2F0ID1cbiAgICBFbG0uS2VybmVsLkpzb24ud3JhcFxuXG5cbnstfCBUdXJuIGEgYEJvb2xgIGludG8gYSBKU09OIGJvb2xlYW4uXG5cbiAgICBpbXBvcnQgSnNvbi5FbmNvZGUgZXhwb3NpbmcgKGVuY29kZSwgYm9vbClcblxuICAgIC0tIGVuY29kZSAwIChib29sIFRydWUpICA9PSBcInRydWVcIlxuICAgIC0tIGVuY29kZSAwIChib29sIEZhbHNlKSA9PSBcImZhbHNlXCJcbi19XG5ib29sIDogQm9vbCAtPiBWYWx1ZVxuYm9vbCA9XG4gICAgRWxtLktlcm5lbC5Kc29uLndyYXBcblxuXG5cbi0tIE5VTExTXG5cblxuey18IENyZWF0ZSBhIEpTT04gYG51bGxgIHZhbHVlLlxuXG4gICAgaW1wb3J0IEpzb24uRW5jb2RlIGV4cG9zaW5nIChlbmNvZGUsIG51bGwpXG5cbiAgICAtLSBlbmNvZGUgMCBudWxsID09IFwibnVsbFwiXG4tfVxubnVsbCA6IFZhbHVlXG5udWxsID1cbiAgICBFbG0uS2VybmVsLkpzb24uZW5jb2RlTnVsbFxuXG5cblxuLS0gQVJSQVlTXG5cblxuey18IFR1cm4gYSBgTGlzdGAgaW50byBhIEpTT04gYXJyYXkuXG5cbiAgICBpbXBvcnQgSnNvbi5FbmNvZGUgYXMgRW5jb2RlIGV4cG9zaW5nIChib29sLCBlbmNvZGUsIGludCwgbGlzdCwgc3RyaW5nKVxuXG4gICAgLS0gZW5jb2RlIDAgKGxpc3QgaW50IFsxLDMsNF0pICAgICAgID09IFwiWzEsMyw0XVwiXG4gICAgLS0gZW5jb2RlIDAgKGxpc3QgYm9vbCBbVHJ1ZSxGYWxzZV0pID09IFwiW3RydWUsZmFsc2VdXCJcbiAgICAtLSBlbmNvZGUgMCAobGlzdCBzdHJpbmcgW1wiYVwiLFwiYlwiXSkgID09IFwiXCJcIltcImFcIixcImJcIl1cIlwiXCJcblxuLX1cbmxpc3QgOiAoYSAtPiBWYWx1ZSkgLT4gTGlzdCBhIC0+IFZhbHVlXG5saXN0IGZ1bmMgZW50cmllcyA9XG4gICAgRWxtLktlcm5lbC5Kc29uLndyYXBcbiAgICAgICAgKExpc3QuZm9sZGwgKEVsbS5LZXJuZWwuSnNvbi5hZGRFbnRyeSBmdW5jKSAoRWxtLktlcm5lbC5Kc29uLmVtcHR5QXJyYXkgKCkpIGVudHJpZXMpXG5cblxuey18IFR1cm4gYW4gYEFycmF5YCBpbnRvIGEgSlNPTiBhcnJheS5cbi19XG5hcnJheSA6IChhIC0+IFZhbHVlKSAtPiBBcnJheSBhIC0+IFZhbHVlXG5hcnJheSBmdW5jIGVudHJpZXMgPVxuICAgIEVsbS5LZXJuZWwuSnNvbi53cmFwXG4gICAgICAgIChBcnJheS5mb2xkbCAoRWxtLktlcm5lbC5Kc29uLmFkZEVudHJ5IGZ1bmMpIChFbG0uS2VybmVsLkpzb24uZW1wdHlBcnJheSAoKSkgZW50cmllcylcblxuXG57LXwgVHVybiBhbiBgU2V0YCBpbnRvIGEgSlNPTiBhcnJheS5cbi19XG5zZXQgOiAoYSAtPiBWYWx1ZSkgLT4gU2V0IGEgLT4gVmFsdWVcbnNldCBmdW5jIGVudHJpZXMgPVxuICAgIEVsbS5LZXJuZWwuSnNvbi53cmFwXG4gICAgICAgIChTZXQuZm9sZGwgKEVsbS5LZXJuZWwuSnNvbi5hZGRFbnRyeSBmdW5jKSAoRWxtLktlcm5lbC5Kc29uLmVtcHR5QXJyYXkgKCkpIGVudHJpZXMpXG5cblxuXG4tLSBPQkpFQ1RTXG5cblxuey18IENyZWF0ZSBhIEpTT04gb2JqZWN0LlxuXG4gICAgaW1wb3J0IEpzb24uRW5jb2RlIGFzIEVuY29kZVxuXG4gICAgdG9tIDogRW5jb2RlLlZhbHVlXG4gICAgdG9tID1cbiAgICAgICAgRW5jb2RlLm9iamVjdFxuICAgICAgICAgICAgWyAoIFwibmFtZVwiLCBFbmNvZGUuc3RyaW5nIFwiVG9tXCIgKVxuICAgICAgICAgICAgLCAoIFwiYWdlXCIsIEVuY29kZS5pbnQgNDIgKVxuICAgICAgICAgICAgXVxuXG4gICAgLS0gRW5jb2RlLmVuY29kZSAwIHRvbSA9PSBcIlwiXCJ7XCJuYW1lXCI6XCJUb21cIixcImFnZVwiOjQyfVwiXCJcIlxuLX1cbm9iamVjdCA6IExpc3QgKFN0cmluZywgVmFsdWUpIC0+IFZhbHVlXG5vYmplY3QgcGFpcnMgPVxuICAgIEVsbS5LZXJuZWwuSnNvbi53cmFwIChcbiAgICAgICAgTGlzdC5mb2xkbFxuICAgICAgICAgICAgKFxcKGssdikgb2JqIC0+IEVsbS5LZXJuZWwuSnNvbi5hZGRGaWVsZCBrIHYgb2JqKVxuICAgICAgICAgICAgKEVsbS5LZXJuZWwuSnNvbi5lbXB0eU9iamVjdCAoKSlcbiAgICAgICAgICAgIHBhaXJzXG4gICAgKVxuXG5cbnstfCBUdXJuIGEgYERpY3RgIGludG8gYSBKU09OIG9iamVjdC5cblxuICAgIGltcG9ydCBEaWN0IGV4cG9zaW5nIChEaWN0KVxuICAgIGltcG9ydCBKc29uLkVuY29kZSBhcyBFbmNvZGVcblxuICAgIHBlb3BsZSA6IERpY3QgU3RyaW5nIEludFxuICAgIHBlb3BsZSA9XG4gICAgICBEaWN0LmZyb21MaXN0IFsgKFwiVG9tXCIsNDIpLCAoXCJTdWVcIiwgMzgpIF1cblxuICAgIC0tIEVuY29kZS5lbmNvZGUgMCAoRW5jb2RlLmRpY3QgaWRlbnRpdHkgRW5jb2RlLmludCBwZW9wbGUpXG4gICAgLS0gICA9PSBcIlwiXCJ7XCJUb21cIjo0MixcIlN1ZVwiOjM4fVwiXCJcIlxuLX1cbmRpY3QgOiAoayAtPiBTdHJpbmcpIC0+ICh2IC0+IFZhbHVlKSAtPiBEaWN0IGsgdiAtPiBWYWx1ZVxuZGljdCB0b0tleSB0b1ZhbHVlIGRpY3Rpb25hcnkgPVxuICAgIEVsbS5LZXJuZWwuSnNvbi53cmFwIChcbiAgICAgICAgRGljdC5mb2xkbFxuICAgICAgICAgICAgKFxca2V5IHZhbHVlIG9iaiAtPiBFbG0uS2VybmVsLkpzb24uYWRkRmllbGQgKHRvS2V5IGtleSkgKHRvVmFsdWUgdmFsdWUpIG9iailcbiAgICAgICAgICAgIChFbG0uS2VybmVsLkpzb24uZW1wdHlPYmplY3QgKCkpXG4gICAgICAgICAgICBkaWN0aW9uYXJ5XG4gICAgKVxuJ30pKQoJCQkJCV0pKSkKCQldKSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkZmlsZV90cmVlX19fX2VsbV9rZXJuZWxfbW9kdWxlc19qc29uX3NyYyA9IEEyKAoJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJG1hcEJsb2JzLAoJZnVuY3Rpb24gKGJsb2JWYWx1ZSkgewoJCXJldHVybiB7dXRmODogYmxvYlZhbHVlLnV0Zjh9OwoJfSwKCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRtYXBGaWxlVHJlZU5vZGVGcm9tR2VuZXJhdGVkKCRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkZmlsZV90cmVlX25vZGVfZWxtX2tlcm5lbF9tb2R1bGVzX2pzb25fc3JjKSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJGZpbGVfdHJlZV9ub2RlX2VsbV9rZXJuZWxfbW9kdWxlc190aW1lX3NyYyA9ICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkVHJlZU5vZGUoCglfTGlzdF9mcm9tQXJyYXkoCgkJWwoJCQlfVXRpbHNfVHVwbGUyKAoJCQknVGltZS5lbG0nLAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkR2VuZXJhdGVkX1NvdXJjZUZpbGVzJEJsb2JOb2RlKAoJCQkJe3V0Zjg6ICdlZmZlY3QgbW9kdWxlIFRpbWUgd2hlcmUgeyBzdWJzY3JpcHRpb24gPSBNeVN1YiB9IGV4cG9zaW5nXG4gICggUG9zaXhcbiAgLCBub3dcbiAgLCBldmVyeVxuICAsIHBvc2l4VG9NaWxsaXNcbiAgLCBtaWxsaXNUb1Bvc2l4XG4gICwgWm9uZVxuICAsIHV0Y1xuICAsIGhlcmVcbiAgLCB0b1llYXJcbiAgLCB0b01vbnRoXG4gICwgdG9EYXlcbiAgLCB0b1dlZWtkYXlcbiAgLCB0b0hvdXJcbiAgLCB0b01pbnV0ZVxuICAsIHRvU2Vjb25kXG4gICwgdG9NaWxsaXNcbiAgLCBNb250aCguLilcbiAgLCBXZWVrZGF5KC4uKVxuICAsIGN1c3RvbVpvbmVcbiAgLCBnZXRab25lTmFtZVxuICAsIFpvbmVOYW1lKC4uKVxuICApXG5cblxuey18IExpYnJhcnkgZm9yIHdvcmtpbmcgd2l0aCB0aW1lIGFuZCB0aW1lIHpvbmVzLlxuXG4jIFRpbWVcbkBkb2NzIFBvc2l4LCBub3csIGV2ZXJ5LCBwb3NpeFRvTWlsbGlzLCBtaWxsaXNUb1Bvc2l4XG5cbiMgVGltZSBab25lc1xuQGRvY3MgWm9uZSwgdXRjLCBoZXJlXG5cbiMgSHVtYW4gVGltZXNcbkBkb2NzIHRvWWVhciwgdG9Nb250aCwgdG9EYXksIHRvV2Vla2RheSwgdG9Ib3VyLCB0b01pbnV0ZSwgdG9TZWNvbmQsIHRvTWlsbGlzXG5cbiMgV2Vla3MgYW5kIE1vbnRoc1xuQGRvY3MgV2Vla2RheSwgTW9udGhcblxuIyBGb3IgUGFja2FnZSBBdXRob3JzXG5AZG9jcyBjdXN0b21ab25lLCBnZXRab25lTmFtZSwgWm9uZU5hbWVcblxuLX1cblxuXG5pbXBvcnQgQmFzaWNzIGV4cG9zaW5nICguLilcbmltcG9ydCBEaWN0XG5pbXBvcnQgRWxtLktlcm5lbC5UaW1lXG5pbXBvcnQgTGlzdCBleHBvc2luZyAoKDo6KSlcbmltcG9ydCBNYXliZSBleHBvc2luZyAoTWF5YmUoLi4pKVxuaW1wb3J0IFBsYXRmb3JtXG5pbXBvcnQgUGxhdGZvcm0uU3ViIGV4cG9zaW5nIChTdWIpXG5pbXBvcnQgUHJvY2Vzc1xuaW1wb3J0IFN0cmluZyBleHBvc2luZyAoU3RyaW5nKVxuaW1wb3J0IFRhc2sgZXhwb3NpbmcgKFRhc2spXG5cblxuXG4tLSBQT1NJWFxuXG5cbnstfCBBIGNvbXB1dGVyIHJlcHJlc2VudGF0aW9uIG9mIHRpbWUuIEl0IGlzIHRoZSBzYW1lIGFsbCBvdmVyIEVhcnRoLCBzbyBpZiB3ZVxuaGF2ZSBhIHBob25lIGNhbGwgb3IgbWVldGluZyBhdCBhIGNlcnRhaW4gUE9TSVggdGltZSwgdGhlcmUgaXMgbm8gYW1iaWd1aXR5LlxuXG5JdCBpcyB2ZXJ5IGhhcmQgZm9yIGh1bWFucyB0byBfcmVhZF8gYSBQT1NJWCB0aW1lIHRob3VnaCwgc28gd2UgdXNlIGZ1bmN0aW9uc1xubGlrZSBbYHRvSG91cmBdKCN0b0hvdXIpIGFuZCBbYHRvTWludXRlYF0oI3RvTWludXRlKSB0byBgdmlld2AgdGhlbS5cbi19XG50eXBlIFBvc2l4ID0gUG9zaXggSW50XG5cblxuey18IEdldCB0aGUgUE9TSVggdGltZSBhdCB0aGUgbW9tZW50IHdoZW4gdGhpcyB0YXNrIGlzIHJ1bi5cbi19XG5ub3cgOiBUYXNrIHggUG9zaXhcbm5vdyA9XG4gIEVsbS5LZXJuZWwuVGltZS5ub3cgbWlsbGlzVG9Qb3NpeFxuXG5cbnstfCBUdXJuIGEgYFBvc2l4YCB0aW1lIGludG8gdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgMTk3MCBKYW51YXJ5IDFcbmF0IDAwOjAwOjAwIFVUQy4gSXQgd2FzIGEgVGh1cnNkYXkuXG4tfVxucG9zaXhUb01pbGxpcyA6IFBvc2l4IC0+IEludFxucG9zaXhUb01pbGxpcyAoUG9zaXggbWlsbGlzKSA9XG4gIG1pbGxpc1xuXG5cbnstfCBUdXJuIG1pbGxpc2Vjb25kcyBpbnRvIGEgYFBvc2l4YCB0aW1lLlxuLX1cbm1pbGxpc1RvUG9zaXggOiBJbnQgLT4gUG9zaXhcbm1pbGxpc1RvUG9zaXggPVxuICBQb3NpeFxuXG5cblxuLS0gVElNRSBaT05FU1xuXG5cbnstfCBJbmZvcm1hdGlvbiBhYm91dCBhIHBhcnRpY3VsYXIgdGltZSB6b25lLlxuXG5UaGUgW0lBTkEgVGltZSBab25lIERhdGFiYXNlXVtpYW5hXSB0cmFja3MgdGhpbmdzIGxpa2UgVVRDIG9mZnNldHMgYW5kXG5kYXlsaWdodC1zYXZpbmcgcnVsZXMgc28gdGhhdCB5b3UgY2FuIHR1cm4gYSBgUG9zaXhgIHRpbWUgaW50byBsb2NhbCB0aW1lc1xud2l0aGluIGEgdGltZSB6b25lLlxuXG5TZWUgW2B1dGNgXSgjdXRjKSwgW2BoZXJlYF0oI2hlcmUpLCBhbmQgW2BCcm93c2VyLkVudmBdW2Vudl0gdG8gbGVhcm4gaG93IHRvXG5vYnRhaW4gYFpvbmVgIHZhbHVlcy5cblxuW2lhbmFdOiBodHRwczovL3d3dy5pYW5hLm9yZy90aW1lLXpvbmVzXG5bZW52XTogL3BhY2thZ2VzL2VsbS9icm93c2VyL2xhdGVzdC9Ccm93c2VyI0VudlxuLX1cbnR5cGUgWm9uZSA9XG4gIFpvbmUgSW50IChMaXN0IEVyYSlcblxuXG4tLSBUT0RPOiBhZGQgdGhpcyBub3RlIGJhY2sgdG8gYFpvbmVgIGRvY3Mgd2hlbiBpdCBpcyB0cnVlXG4tLVxuLS0gRGlkIHlvdSBrbm93IHRoYXQgaW4gQ2FsaWZvcm5pYSB0aGUgdGltZXMgY2hhbmdlIGZyb20gM3BtIFBTVCB0byAzcG0gUERUIHRvXG4tLSBjYXB0dXJlIHdoZXRoZXIgaXQgaXMgZGF5bGlnaHQtc2F2aW5nIHRpbWU/IFRoZSBkYXRhYmFzZSB0cmFja3MgdGhvc2Vcbi0tIGFiYnJldmlhdGlvbiBjaGFuZ2VzIHRvby4gKFRvbnMgb2YgdGltZSB6b25lcyBkbyB0aGF0IGFjdHVhbGx5Lilcbi0tXG5cblxuey18IEN1cnJlbnRseSB0aGUgcHVibGljIEFQSSBvbmx5IG5lZWRzOlxuXG4tIGBzdGFydGAgaXMgdGhlIGJlZ2lubmluZyBvZiB0aGlzIGBFcmFgIGluIFwibWludXRlcyBzaW5jZSB0aGUgVW5peCBFcG9jaFwiXG4tIGBvZmZzZXRgIGlzIHRoZSBVVEMgb2Zmc2V0IG9mIHRoaXMgYEVyYWAgaW4gbWludXRlc1xuXG5CdXQgZXZlbnR1YWxseSwgaXQgd2lsbCBtYWtlIHNlbnNlIHRvIGhhdmUgYGFiYnIgOiBTdHJpbmdgIGZvciBgUFNUYCB2cyBgUERUYFxuLX1cbnR5cGUgYWxpYXMgRXJhID1cbiAgeyBzdGFydCA6IEludFxuICAsIG9mZnNldCA6IEludFxuICB9XG5cblxuey18IFRoZSB0aW1lIHpvbmUgZm9yIENvb3JkaW5hdGVkIFVuaXZlcnNhbCBUaW1lIChbVVRDXVtdKVxuXG5UaGUgYHV0Y2Agem9uZSBoYXMgbm8gdGltZSBhZGp1c3RtZW50cy4gSXQgbmV2ZXIgb2JzZXJ2ZXMgZGF5bGlnaHQtc2F2aW5nXG50aW1lIGFuZCBpdCBuZXZlciBzaGlmdHMgYXJvdW5kIGJhc2VkIG9uIHBvbGl0aWNhbCByZXN0cnVjdHVyaW5nLlxuXG5bVVRDXTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29vcmRpbmF0ZWRfVW5pdmVyc2FsX1RpbWVcbi19XG51dGMgOiBab25lXG51dGMgPVxuICBab25lIDAgW11cblxuXG57LXwgUHJvZHVjZSBhIGBab25lYCBiYXNlZCBvbiB0aGUgY3VycmVudCBVVEMgb2Zmc2V0LiBZb3UgY2FuIHVzZSB0aGlzIHRvIGZpZ3VyZVxub3V0IHdoYXQgZGF5IGl0IGlzIHdoZXJlIHlvdSBhcmU6XG5cbiAgICBpbXBvcnQgVGFzayBleHBvc2luZyAoVGFzaylcbiAgICBpbXBvcnQgVGltZVxuXG4gICAgd2hhdERheUlzSXQgOiBUYXNrIHggSW50XG4gICAgd2hhdERheUlzSXQgPVxuICAgICAgVGFzay5tYXAyIFRpbWUudG9EYXkgVGltZS5oZXJlIFRpbWUubm93XG5cbioqQWNjdXJhY3kgTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGNhbiBvbmx5IGdpdmUgdGltZSB6b25lcyBsaWtlIGBFdGMvR01UKzlgIG9yXG5gRXRjL0dNVC02YC4gSXQgY2Fubm90IGdpdmUgeW91IGBFdXJvcGUvU3RvY2tob2xtYCwgYEFzaWEvVG9reW9gLCBvciBhbnkgb3RoZXJcbm5vcm1hbCB0aW1lIHpvbmUgZnJvbSB0aGUgW2Z1bGwgbGlzdF1bdHpdIGR1ZSB0byBsaW1pdGF0aW9ucyBpbiBKYXZhU2NyaXB0LlxuRm9yIGV4YW1wbGUsIGlmIHlvdSBydW4gYGhlcmVgIGluIE5ldyBZb3JrIENpdHksIHRoZSByZXN1bHRpbmcgYFpvbmVgIHdpbGxcbm5ldmVyIGJlIGBBbWVyaWNhL05ld19Zb3JrYC4gSW5zdGVhZCB5b3UgZ2V0IGBFdGMvR01ULTVgIG9yIGBFdGMvR01ULTRgXG5kZXBlbmRpbmcgb24gRGF5bGlnaHQgU2F2aW5nIFRpbWUuIFNvIGV2ZW4gdGhvdWdoIGJyb3dzZXJzIG11c3QgaGF2ZSBpbnRlcm5hbFxuYWNjZXNzIHRvIGBBbWVyaWNhL05ld19Zb3JrYCB0byBmaWd1cmUgb3V0IHRoYXQgb2Zmc2V0LCB0aGVyZSBpcyBubyBwdWJsaWMgQVBJXG50byBnZXQgdGhlIGZ1bGwgaW5mb3JtYXRpb24uIFRoaXMgbWVhbnMgdGhlIGBab25lYCB5b3UgZ2V0IGZyb20gdGhpcyBmdW5jdGlvblxud2lsbCBhY3Qgd2VpcmQgaWYgKDEpIGFuIGFwcGxpY2F0aW9uIHN0YXlzIG9wZW4gYWNyb3NzIGEgRGF5bGlnaHQgU2F2aW5nIFRpbWVcbmJvdW5kYXJ5IG9yICgyKSB5b3UgdHJ5IHRvIHVzZSBpdCBvbiBoaXN0b3JpY2FsIGRhdGEuXG5cbioqRnV0dXJlIE5vdGU6KiogV2UgY2FuIGltcHJvdmUgYGhlcmVgIHdoZW4gdGhlcmUgaXMgZ29vZCBicm93c2VyIHN1cHBvcnQgZm9yXG5KYXZhU2NyaXB0IGZ1bmN0aW9ucyB0aGF0ICgxKSBleHBvc2UgdGhlIElBTkEgdGltZSB6b25lIGRhdGFiYXNlIGFuZCAoMikgbGV0XG55b3UgYXNrIHRoZSB0aW1lIHpvbmUgb2YgdGhlIGNvbXB1dGVyLiBUaGUgY29tbWl0dGVlIHRoYXQgcmV2aWV3cyBhZGRpdGlvbnMgdG9cbkphdmFTY3JpcHQgaXMgY2FsbGVkIFRDMzksIGFuZCBJIGVuY291cmFnZSB5b3UgdG8gcHVzaCBmb3IgdGhlc2UgY2FwYWJpbGl0aWVzISBJXG5jYW5ub3QgZG8gaXQgbXlzZWxmIHVuZm9ydHVuYXRlbHkuXG5cbioqQWx0ZXJuYXRpdmVzOioqIFNlZSB0aGUgYGN1c3RvbVpvbmVgIGRvY3MgdG8gbGVhcm4gaG93IHRvIGltcGxlbWVudCBzdG9wZ2Fwcy5cblxuW3R6XTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl90el9kYXRhYmFzZV90aW1lX3pvbmVzXG4tfVxuaGVyZSA6IFRhc2sgeCBab25lXG5oZXJlID1cbiAgRWxtLktlcm5lbC5UaW1lLmhlcmUgKClcblxuXG5cbi0tIERBVEVTXG5cblxuey18IFdoYXQgeWVhciBpcyBpdD8hXG5cbiAgICBpbXBvcnQgVGltZSBleHBvc2luZyAodG9ZZWFyLCB1dGMsIG1pbGxpc1RvUG9zaXgpXG5cbiAgICB0b1llYXIgdXRjIChtaWxsaXNUb1Bvc2l4IDApID09IDE5NzBcbiAgICB0b1llYXIgbnljIChtaWxsaXNUb1Bvc2l4IDApID09IDE5NjlcblxuICAgIC0tIHByZXRlbmQgYG55Y2AgaXMgdGhlIGBab25lYCBmb3IgQW1lcmljYS9OZXdfWW9yay5cbi19XG50b1llYXIgOiBab25lIC0+IFBvc2l4IC0+IEludFxudG9ZZWFyIHpvbmUgdGltZSA9XG4gICh0b0NpdmlsICh0b0FkanVzdGVkTWludXRlcyB6b25lIHRpbWUpKS55ZWFyXG5cblxuey18IFdoYXQgbW9udGggaXMgaXQ/IVxuXG4gICAgaW1wb3J0IFRpbWUgZXhwb3NpbmcgKHRvTW9udGgsIHV0YywgbWlsbGlzVG9Qb3NpeClcblxuICAgIHRvTW9udGggdXRjIChtaWxsaXNUb1Bvc2l4IDApID09IEphblxuICAgIHRvTW9udGggbnljIChtaWxsaXNUb1Bvc2l4IDApID09IERlY1xuXG4gICAgLS0gcHJldGVuZCBgbnljYCBpcyB0aGUgYFpvbmVgIGZvciBBbWVyaWNhL05ld19Zb3JrLlxuLX1cbnRvTW9udGggOiBab25lIC0+IFBvc2l4IC0+IE1vbnRoXG50b01vbnRoIHpvbmUgdGltZSA9XG4gIGNhc2UgKHRvQ2l2aWwgKHRvQWRqdXN0ZWRNaW51dGVzIHpvbmUgdGltZSkpLm1vbnRoIG9mXG4gICAgMSAgLT4gSmFuXG4gICAgMiAgLT4gRmViXG4gICAgMyAgLT4gTWFyXG4gICAgNCAgLT4gQXByXG4gICAgNSAgLT4gTWF5XG4gICAgNiAgLT4gSnVuXG4gICAgNyAgLT4gSnVsXG4gICAgOCAgLT4gQXVnXG4gICAgOSAgLT4gU2VwXG4gICAgMTAgLT4gT2N0XG4gICAgMTEgLT4gTm92XG4gICAgXyAgLT4gRGVjXG5cblxuey18IFdoYXQgZGF5IGlzIGl0PyEgKERheXMgZ28gZnJvbSAxIHRvIDMxKVxuXG4gICAgaW1wb3J0IFRpbWUgZXhwb3NpbmcgKHRvRGF5LCB1dGMsIG1pbGxpc1RvUG9zaXgpXG5cbiAgICB0b0RheSB1dGMgKG1pbGxpc1RvUG9zaXggMCkgPT0gMVxuICAgIHRvRGF5IG55YyAobWlsbGlzVG9Qb3NpeCAwKSA9PSAzMVxuXG4gICAgLS0gcHJldGVuZCBgbnljYCBpcyB0aGUgYFpvbmVgIGZvciBBbWVyaWNhL05ld19Zb3JrLlxuXG4tfVxudG9EYXkgOiBab25lIC0+IFBvc2l4IC0+IEludFxudG9EYXkgem9uZSB0aW1lID1cbiAgKHRvQ2l2aWwgKHRvQWRqdXN0ZWRNaW51dGVzIHpvbmUgdGltZSkpLmRheVxuXG5cbnstfCBXaGF0IGRheSBvZiB0aGUgd2VlayBpcyBpdD9cblxuICAgIGltcG9ydCBUaW1lIGV4cG9zaW5nICh0b1dlZWtkYXksIHV0YywgbWlsbGlzVG9Qb3NpeClcblxuICAgIHRvV2Vla2RheSB1dGMgKG1pbGxpc1RvUG9zaXggMCkgPT0gVGh1XG4gICAgdG9XZWVrZGF5IG55YyAobWlsbGlzVG9Qb3NpeCAwKSA9PSBXZWRcblxuICAgIC0tIHByZXRlbmQgYG55Y2AgaXMgdGhlIGBab25lYCBmb3IgQW1lcmljYS9OZXdfWW9yay5cbi19XG50b1dlZWtkYXkgOiBab25lIC0+IFBvc2l4IC0+IFdlZWtkYXlcbnRvV2Vla2RheSB6b25lIHRpbWUgPVxuICBjYXNlIG1vZEJ5IDcgKGZsb29yZWREaXYgKHRvQWRqdXN0ZWRNaW51dGVzIHpvbmUgdGltZSkgKDYwICogMjQpKSBvZlxuICAgIDAgLT4gVGh1XG4gICAgMSAtPiBGcmlcbiAgICAyIC0+IFNhdFxuICAgIDMgLT4gU3VuXG4gICAgNCAtPiBNb25cbiAgICA1IC0+IFR1ZVxuICAgIF8gLT4gV2VkXG5cblxuey18IFdoYXQgaG91ciBpcyBpdD8gKEZyb20gMCB0byAyMylcblxuICAgIGltcG9ydCBUaW1lIGV4cG9zaW5nICh0b0hvdXIsIHV0YywgbWlsbGlzVG9Qb3NpeClcblxuICAgIHRvSG91ciB1dGMgKG1pbGxpc1RvUG9zaXggMCkgPT0gMCAgLS0gMTJhbVxuICAgIHRvSG91ciBueWMgKG1pbGxpc1RvUG9zaXggMCkgPT0gMTkgLS0gN3BtXG5cbiAgICAtLSBwcmV0ZW5kIGBueWNgIGlzIHRoZSBgWm9uZWAgZm9yIEFtZXJpY2EvTmV3X1lvcmsuXG4tfVxudG9Ib3VyIDogWm9uZSAtPiBQb3NpeCAtPiBJbnRcbnRvSG91ciB6b25lIHRpbWUgPVxuICBtb2RCeSAyNCAoZmxvb3JlZERpdiAodG9BZGp1c3RlZE1pbnV0ZXMgem9uZSB0aW1lKSA2MClcblxuXG57LXwgV2hhdCBtaW51dGUgaXMgaXQ/IChGcm9tIDAgdG8gNTkpXG5cbiAgICBpbXBvcnQgVGltZSBleHBvc2luZyAodG9NaW51dGUsIHV0YywgbWlsbGlzVG9Qb3NpeClcblxuICAgIHRvTWludXRlIHV0YyAobWlsbGlzVG9Qb3NpeCAwKSA9PSAwXG5cblRoaXMgY2FuIGJlIGRpZmZlcmVudCBpbiBkaWZmZXJlbnQgdGltZSB6b25lcy4gU29tZSB0aW1lIHpvbmVzIGFyZSBvZmZzZXRcbmJ5IDMwIG9yIDQ1IG1pbnV0ZXMhXG4tfVxudG9NaW51dGUgOiBab25lIC0+IFBvc2l4IC0+IEludFxudG9NaW51dGUgem9uZSB0aW1lID1cbiAgbW9kQnkgNjAgKHRvQWRqdXN0ZWRNaW51dGVzIHpvbmUgdGltZSlcblxuXG57LXwgV2hhdCBzZWNvbmQgaXMgaXQ/XG5cbiAgICBpbXBvcnQgVGltZSBleHBvc2luZyAodG9TZWNvbmQsIHV0YywgbWlsbGlzVG9Qb3NpeClcblxuICAgIHRvU2Vjb25kIHV0YyAobWlsbGlzVG9Qb3NpeCAgICAwKSA9PSAwXG4gICAgdG9TZWNvbmQgdXRjIChtaWxsaXNUb1Bvc2l4IDEyMzQpID09IDFcbiAgICB0b1NlY29uZCB1dGMgKG1pbGxpc1RvUG9zaXggNTY3OCkgPT0gNVxuLX1cbnRvU2Vjb25kIDogWm9uZSAtPiBQb3NpeCAtPiBJbnRcbnRvU2Vjb25kIF8gdGltZSA9XG4gIG1vZEJ5IDYwIChmbG9vcmVkRGl2IChwb3NpeFRvTWlsbGlzIHRpbWUpIDEwMDApXG5cblxuey18XG4gICAgaW1wb3J0IFRpbWUgZXhwb3NpbmcgKHRvTWlsbGlzLCB1dGMsIG1pbGxpc1RvUG9zaXgpXG5cbiAgICB0b01pbGxpcyB1dGMgKG1pbGxpc1RvUG9zaXggICAgMCkgPT0gMFxuICAgIHRvTWlsbGlzIHV0YyAobWlsbGlzVG9Qb3NpeCAxMjM0KSA9PSAyMzRcbiAgICB0b01pbGxpcyB1dGMgKG1pbGxpc1RvUG9zaXggNTY3OCkgPT0gNjc4XG4tfVxudG9NaWxsaXMgOiBab25lIC0+IFBvc2l4IC0+IEludFxudG9NaWxsaXMgXyB0aW1lID1cbiAgbW9kQnkgMTAwMCAocG9zaXhUb01pbGxpcyB0aW1lKVxuXG5cblxuLS0gREFURSBIRUxQRVJTXG5cblxudG9BZGp1c3RlZE1pbnV0ZXMgOiBab25lIC0+IFBvc2l4IC0+IEludFxudG9BZGp1c3RlZE1pbnV0ZXMgKFpvbmUgZGVmYXVsdE9mZnNldCBlcmFzKSB0aW1lID1cbiAgdG9BZGp1c3RlZE1pbnV0ZXNIZWxwIGRlZmF1bHRPZmZzZXQgKGZsb29yZWREaXYgKHBvc2l4VG9NaWxsaXMgdGltZSkgNjAwMDApIGVyYXNcblxuXG50b0FkanVzdGVkTWludXRlc0hlbHAgOiBJbnQgLT4gSW50IC0+IExpc3QgRXJhIC0+IEludFxudG9BZGp1c3RlZE1pbnV0ZXNIZWxwIGRlZmF1bHRPZmZzZXQgcG9zaXhNaW51dGVzIGVyYXMgPVxuICBjYXNlIGVyYXMgb2ZcbiAgICBbXSAtPlxuICAgICAgcG9zaXhNaW51dGVzICsgZGVmYXVsdE9mZnNldFxuXG4gICAgZXJhIDo6IG9sZGVyRXJhcyAtPlxuICAgICAgaWYgZXJhLnN0YXJ0IDwgcG9zaXhNaW51dGVzIHRoZW5cbiAgICAgICAgcG9zaXhNaW51dGVzICsgZXJhLm9mZnNldFxuICAgICAgZWxzZVxuICAgICAgICB0b0FkanVzdGVkTWludXRlc0hlbHAgZGVmYXVsdE9mZnNldCBwb3NpeE1pbnV0ZXMgb2xkZXJFcmFzXG5cblxudG9DaXZpbCA6IEludCAtPiB7IHllYXIgOiBJbnQsIG1vbnRoIDogSW50LCBkYXkgOiBJbnQgfVxudG9DaXZpbCBtaW51dGVzID1cbiAgbGV0XG4gICAgcmF3RGF5ICAgID0gZmxvb3JlZERpdiBtaW51dGVzICg2MCAqIDI0KSArIDcxOTQ2OFxuICAgIGVyYSAgICAgICA9IChpZiByYXdEYXkgPj0gMCB0aGVuIHJhd0RheSBlbHNlIHJhd0RheSAtIDE0NjA5NikgLy8gMTQ2MDk3XG4gICAgZGF5T2ZFcmEgID0gcmF3RGF5IC0gZXJhICogMTQ2MDk3IC0tIFswLCAxNDYwOTZdXG4gICAgeWVhck9mRXJhID0gKGRheU9mRXJhIC0gZGF5T2ZFcmEgLy8gMTQ2MCArIGRheU9mRXJhIC8vIDM2NTI0IC0gZGF5T2ZFcmEgLy8gMTQ2MDk2KSAvLyAzNjUgLS0gWzAsIDM5OV1cbiAgICB5ZWFyICAgICAgPSB5ZWFyT2ZFcmEgKyBlcmEgKiA0MDBcbiAgICBkYXlPZlllYXIgPSBkYXlPZkVyYSAtICgzNjUgKiB5ZWFyT2ZFcmEgKyB5ZWFyT2ZFcmEgLy8gNCAtIHllYXJPZkVyYSAvLyAxMDApIC0tIFswLCAzNjVdXG4gICAgbXAgICAgICAgID0gKDUgKiBkYXlPZlllYXIgKyAyKSAvLyAxNTMgLS0gWzAsIDExXVxuICAgIG1vbnRoICAgICA9IG1wICsgKGlmIG1wIDwgMTAgdGhlbiAzIGVsc2UgLTkpIC0tIFsxLCAxMl1cbiAgaW5cbiAgeyB5ZWFyID0geWVhciArIChpZiBtb250aCA8PSAyIHRoZW4gMSBlbHNlIDApXG4gICwgbW9udGggPSBtb250aFxuICAsIGRheSA9IGRheU9mWWVhciAtICgxNTMgKiBtcCArIDIpIC8vIDUgKyAxIC0tIFsxLCAzMV1cbiAgfVxuXG5cbmZsb29yZWREaXYgOiBJbnQgLT4gRmxvYXQgLT4gSW50XG5mbG9vcmVkRGl2IG51bWVyYXRvciBkZW5vbWluYXRvciA9XG4gIGZsb29yICh0b0Zsb2F0IG51bWVyYXRvciAvIGRlbm9taW5hdG9yKVxuXG5cblxuLS0gV0VFS0RBWVMgQU5EIE1PTlRIU1xuXG5cbnstfCBSZXByZXNlbnRzIGEgYFdlZWtkYXlgIHNvIHRoYXQgeW91IGNhbiBjb252ZXJ0IGl0IHRvIGEgYFN0cmluZ2Agb3IgYEludGBcbmhvd2V2ZXIgeW91IHBsZWFzZS4gRm9yIGV4YW1wbGUsIGlmIHlvdSBuZWVkIHRoZSBKYXBhbmVzZSByZXByZXNlbnRhdGlvbiwgeW91XG5jYW4gc2F5OlxuXG4gICAgdG9KYXBhbmVzZVdlZWtkYXkgOiBXZWVrZGF5IC0+IFN0cmluZ1xuICAgIHRvSmFwYW5lc2VXZWVrZGF5IHdlZWtkYXkgPVxuICAgICAgY2FzZSB3ZWVrZGF5IG9mXG4gICAgICAgIE1vbiAtPiBcIuaciFwiXG4gICAgICAgIFR1ZSAtPiBcIueBq1wiXG4gICAgICAgIFdlZCAtPiBcIuawtFwiXG4gICAgICAgIFRodSAtPiBcIuacqFwiXG4gICAgICAgIEZyaSAtPiBcIumHkVwiXG4gICAgICAgIFNhdCAtPiBcIuWcn1wiXG4gICAgICAgIFN1biAtPiBcIuaXpVwiXG4tfVxudHlwZSBXZWVrZGF5ID0gTW9uIHwgVHVlIHwgV2VkIHwgVGh1IHwgRnJpIHwgU2F0IHwgU3VuXG5cblxuey18IFJlcHJlc2VudHMgYSBgTW9udGhgIHNvIHRoYXQgeW91IGNhbiBjb252ZXJ0IGl0IHRvIGEgYFN0cmluZ2Agb3IgYEludGBcbmhvd2V2ZXIgeW91IHBsZWFzZS4gRm9yIGV4YW1wbGUsIGlmIHlvdSBuZWVkIHRoZSBEYW5pc2ggcmVwcmVzZW50YXRpb24sIHlvdVxuY2FuIHNheTpcblxuICAgIHRvRGFuaXNoTW9udGggOiBNb250aCAtPiBTdHJpbmdcbiAgICB0b0RhbmlzaE1vbnRoIG1vbnRoID1cbiAgICAgIGNhc2UgbW9udGggb2ZcbiAgICAgICAgSmFuIC0+IFwiamFudWFyXCJcbiAgICAgICAgRmViIC0+IFwiZmVicnVhclwiXG4gICAgICAgIE1hciAtPiBcIm1hcnRzXCJcbiAgICAgICAgQXByIC0+IFwiYXByaWxcIlxuICAgICAgICBNYXkgLT4gXCJtYWpcIlxuICAgICAgICBKdW4gLT4gXCJqdW5pXCJcbiAgICAgICAgSnVsIC0+IFwianVsaVwiXG4gICAgICAgIEF1ZyAtPiBcImF1Z3VzdFwiXG4gICAgICAgIFNlcCAtPiBcInNlcHRlbWJlclwiXG4gICAgICAgIE9jdCAtPiBcIm9rdG9iZXJcIlxuICAgICAgICBOb3YgLT4gXCJub3ZlbWJlclwiXG4gICAgICAgIERlYyAtPiBcImRlY2VtYmVyXCJcbi19XG50eXBlIE1vbnRoID0gSmFuIHwgRmViIHwgTWFyIHwgQXByIHwgTWF5IHwgSnVuIHwgSnVsIHwgQXVnIHwgU2VwIHwgT2N0IHwgTm92IHwgRGVjXG5cblxuXG4tLSBTVUJTQ1JJUFRJT05TXG5cblxuey18IEdldCB0aGUgY3VycmVudCB0aW1lIHBlcmlvZGljYWxseS4gSG93IG9mdGVuIHRob3VnaD8gV2VsbCwgeW91IHByb3ZpZGUgYW5cbmludGVydmFsIGluIG1pbGxpc2Vjb25kcyAobGlrZSBgMTAwMGAgZm9yIGEgc2Vjb25kIG9yIGA2MCAqIDEwMDBgIGZvciBhIG1pbnV0ZVxub3IgYDYwICogNjAgKiAxMDAwYCBmb3IgYW4gaG91cikgYW5kIHRoYXQgaXMgaG93IG9mdGVuIHlvdSBnZXQgYSBuZXcgdGltZSFcblxuQ2hlY2sgb3V0IFt0aGlzIGV4YW1wbGVdKGh0dHBzOi8vZWxtLWxhbmcub3JnL2V4YW1wbGVzL3RpbWUpIHRvIHNlZSBob3cgdG8gdXNlXG5pdCBpbiBhbiBhcHBsaWNhdGlvbi5cblxuKipUaGlzIGZ1bmN0aW9uIGlzIG5vdCBmb3IgYW5pbWF0aW9uLioqIFVzZSB0aGUgW2BlbG0vYW5pbWF0aW9uLWZyYW1lYF1bYWZdXG5wYWNrYWdlIGZvciB0aGF0IHNvcnQgb2YgdGhpbmchIEl0IHN5bmNzIHVwIHdpdGggcmVwYWludHMgYW5kIHdpbGwgZW5kIHVwXG5iZWluZyBtdWNoIHNtb290aGVyIGZvciBhbnkgbW92aW5nIHZpc3VhbHMuXG5cblthZl06IC9wYWNrYWdlcy9lbG0vYW5pbWF0aW9uLWZyYW1lL2xhdGVzdFxuLX1cbmV2ZXJ5IDogRmxvYXQgLT4gKFBvc2l4IC0+IG1zZykgLT4gU3ViIG1zZ1xuZXZlcnkgaW50ZXJ2YWwgdGFnZ2VyID1cbiAgc3Vic2NyaXB0aW9uIChFdmVyeSBpbnRlcnZhbCB0YWdnZXIpXG5cblxudHlwZSBNeVN1YiBtc2cgPVxuICBFdmVyeSBGbG9hdCAoUG9zaXggLT4gbXNnKVxuXG5cbnN1Yk1hcCA6IChhIC0+IGIpIC0+IE15U3ViIGEgLT4gTXlTdWIgYlxuc3ViTWFwIGYgKEV2ZXJ5IGludGVydmFsIHRhZ2dlcikgPVxuICBFdmVyeSBpbnRlcnZhbCAoZiA8PCB0YWdnZXIpXG5cblxuXG4tLSBFRkZFQ1QgTUFOQUdFUlxuXG5cbnR5cGUgYWxpYXMgU3RhdGUgbXNnID1cbiAgeyB0YWdnZXJzIDogVGFnZ2VycyBtc2dcbiAgLCBwcm9jZXNzZXMgOiBQcm9jZXNzZXNcbiAgfVxuXG5cbnR5cGUgYWxpYXMgUHJvY2Vzc2VzID1cbiAgRGljdC5EaWN0IEZsb2F0IFBsYXRmb3JtLlByb2Nlc3NJZFxuXG5cbnR5cGUgYWxpYXMgVGFnZ2VycyBtc2cgPVxuICBEaWN0LkRpY3QgRmxvYXQgKExpc3QgKFBvc2l4IC0+IG1zZykpXG5cblxuaW5pdCA6IFRhc2sgTmV2ZXIgKFN0YXRlIG1zZylcbmluaXQgPVxuICBUYXNrLnN1Y2NlZWQgKFN0YXRlIERpY3QuZW1wdHkgRGljdC5lbXB0eSlcblxuXG5vbkVmZmVjdHMgOiBQbGF0Zm9ybS5Sb3V0ZXIgbXNnIEZsb2F0IC0+IExpc3QgKE15U3ViIG1zZykgLT4gU3RhdGUgbXNnIC0+IFRhc2sgTmV2ZXIgKFN0YXRlIG1zZylcbm9uRWZmZWN0cyByb3V0ZXIgc3VicyB7cHJvY2Vzc2VzfSA9XG4gIGxldFxuICAgIG5ld1RhZ2dlcnMgPVxuICAgICAgTGlzdC5mb2xkbCBhZGRNeVN1YiBEaWN0LmVtcHR5IHN1YnNcblxuICAgIGxlZnRTdGVwIGludGVydmFsIHRhZ2dlcnMgKHNwYXducywgZXhpc3RpbmcsIGtpbGxzKSA9XG4gICAgICAoIGludGVydmFsIDo6IHNwYXducywgZXhpc3RpbmcsIGtpbGxzIClcblxuICAgIGJvdGhTdGVwIGludGVydmFsIHRhZ2dlcnMgaWQgKHNwYXducywgZXhpc3RpbmcsIGtpbGxzKSA9XG4gICAgICAoIHNwYXducywgRGljdC5pbnNlcnQgaW50ZXJ2YWwgaWQgZXhpc3RpbmcsIGtpbGxzIClcblxuICAgIHJpZ2h0U3RlcCBfIGlkIChzcGF3bnMsIGV4aXN0aW5nLCBraWxscykgPVxuICAgICAgKCBzcGF3bnMsIGV4aXN0aW5nLCBUYXNrLmFuZFRoZW4gKFxcXyAtPiBraWxscykgKFByb2Nlc3Mua2lsbCBpZCkgKVxuXG4gICAgKHNwYXduTGlzdCwgZXhpc3RpbmdEaWN0LCBraWxsVGFzaykgPVxuICAgICAgRGljdC5tZXJnZVxuICAgICAgICBsZWZ0U3RlcFxuICAgICAgICBib3RoU3RlcFxuICAgICAgICByaWdodFN0ZXBcbiAgICAgICAgbmV3VGFnZ2Vyc1xuICAgICAgICBwcm9jZXNzZXNcbiAgICAgICAgKFtdLCBEaWN0LmVtcHR5LCBUYXNrLnN1Y2NlZWQgKCkpXG4gIGluXG4gICAga2lsbFRhc2tcbiAgICAgIHw+IFRhc2suYW5kVGhlbiAoXFxfIC0+IHNwYXduSGVscCByb3V0ZXIgc3Bhd25MaXN0IGV4aXN0aW5nRGljdClcbiAgICAgIHw+IFRhc2suYW5kVGhlbiAoXFxuZXdQcm9jZXNzZXMgLT4gVGFzay5zdWNjZWVkIChTdGF0ZSBuZXdUYWdnZXJzIG5ld1Byb2Nlc3NlcykpXG5cblxuYWRkTXlTdWIgOiBNeVN1YiBtc2cgLT4gVGFnZ2VycyBtc2cgLT4gVGFnZ2VycyBtc2dcbmFkZE15U3ViIChFdmVyeSBpbnRlcnZhbCB0YWdnZXIpIHN0YXRlID1cbiAgY2FzZSBEaWN0LmdldCBpbnRlcnZhbCBzdGF0ZSBvZlxuICAgIE5vdGhpbmcgLT5cbiAgICAgIERpY3QuaW5zZXJ0IGludGVydmFsIFt0YWdnZXJdIHN0YXRlXG5cbiAgICBKdXN0IHRhZ2dlcnMgLT5cbiAgICAgIERpY3QuaW5zZXJ0IGludGVydmFsICh0YWdnZXIgOjogdGFnZ2Vycykgc3RhdGVcblxuXG5zcGF3bkhlbHAgOiBQbGF0Zm9ybS5Sb3V0ZXIgbXNnIEZsb2F0IC0+IExpc3QgRmxvYXQgLT4gUHJvY2Vzc2VzIC0+IFRhc2suVGFzayB4IFByb2Nlc3Nlc1xuc3Bhd25IZWxwIHJvdXRlciBpbnRlcnZhbHMgcHJvY2Vzc2VzID1cbiAgY2FzZSBpbnRlcnZhbHMgb2ZcbiAgICBbXSAtPlxuICAgICAgVGFzay5zdWNjZWVkIHByb2Nlc3Nlc1xuXG4gICAgaW50ZXJ2YWwgOjogcmVzdCAtPlxuICAgICAgbGV0XG4gICAgICAgIHNwYXduVGltZXIgPVxuICAgICAgICAgIFByb2Nlc3Muc3Bhd24gKHNldEludGVydmFsIGludGVydmFsIChQbGF0Zm9ybS5zZW5kVG9TZWxmIHJvdXRlciBpbnRlcnZhbCkpXG5cbiAgICAgICAgc3Bhd25SZXN0IGlkID1cbiAgICAgICAgICBzcGF3bkhlbHAgcm91dGVyIHJlc3QgKERpY3QuaW5zZXJ0IGludGVydmFsIGlkIHByb2Nlc3NlcylcbiAgICAgIGluXG4gICAgICAgIHNwYXduVGltZXJcbiAgICAgICAgICB8PiBUYXNrLmFuZFRoZW4gc3Bhd25SZXN0XG5cblxub25TZWxmTXNnIDogUGxhdGZvcm0uUm91dGVyIG1zZyBGbG9hdCAtPiBGbG9hdCAtPiBTdGF0ZSBtc2cgLT4gVGFzayBOZXZlciAoU3RhdGUgbXNnKVxub25TZWxmTXNnIHJvdXRlciBpbnRlcnZhbCBzdGF0ZSA9XG4gIGNhc2UgRGljdC5nZXQgaW50ZXJ2YWwgc3RhdGUudGFnZ2VycyBvZlxuICAgIE5vdGhpbmcgLT5cbiAgICAgIFRhc2suc3VjY2VlZCBzdGF0ZVxuXG4gICAgSnVzdCB0YWdnZXJzIC0+XG4gICAgICBsZXRcbiAgICAgICAgdGVsbFRhZ2dlcnMgdGltZSA9XG4gICAgICAgICAgVGFzay5zZXF1ZW5jZSAoTGlzdC5tYXAgKFxcdGFnZ2VyIC0+IFBsYXRmb3JtLnNlbmRUb0FwcCByb3V0ZXIgKHRhZ2dlciB0aW1lKSkgdGFnZ2VycylcbiAgICAgIGluXG4gICAgICAgIG5vd1xuICAgICAgICAgIHw+IFRhc2suYW5kVGhlbiB0ZWxsVGFnZ2Vyc1xuICAgICAgICAgIHw+IFRhc2suYW5kVGhlbiAoXFxfIC0+IFRhc2suc3VjY2VlZCBzdGF0ZSlcblxuXG5zZXRJbnRlcnZhbCA6IEZsb2F0IC0+IFRhc2sgTmV2ZXIgKCkgLT4gVGFzayB4IE5ldmVyXG5zZXRJbnRlcnZhbCA9XG4gIEVsbS5LZXJuZWwuVGltZS5zZXRJbnRlcnZhbFxuXG5cblxuLS0gRk9SIFBBQ0tBR0UgQVVUSE9SU1xuXG5cblxuey18ICoqSW50ZW5kZWQgZm9yIHBhY2thZ2UgYXV0aG9ycy4qKlxuXG5UaGUgZG9jdW1lbnRhdGlvbiBvZiBbYGhlcmVgXSgjaGVyZSkgZXhwbGFpbnMgdGhhdCBpdCBoYXMgY2VydGFpbiBhY2N1cmFjeVxubGltaXRhdGlvbnMgdGhhdCBibG9jayBvbiBhZGRpbmcgbmV3IEFQSXMgdG8gSmF2YVNjcmlwdC4gVGhlIGBjdXN0b21ab25lYFxuZnVuY3Rpb24gaXMgYSBzdG9wZ2FwIHRoYXQgdGFrZXM6XG5cbjEuIEEgZGVmYXVsdCBvZmZzZXQgaW4gbWludXRlcy4gU28gYEV0Yy9HTVQtNWAgaXMgYGN1c3RvbVpvbmUgKC01ICogNjApIFtdYFxuYW5kIGBFdGMvR01UKzlgIGlzIGBjdXN0b21ab25lICg5ICogNjApIFtdYC5cbjIuIEEgbGlzdCBvZiBleGNlcHRpb25zIGNvbnRhaW5pbmcgdGhlaXIgYHN0YXJ0YCB0aW1lIGluIFwibWludXRlcyBzaW5jZSB0aGUgVW5peFxuZXBvY2hcIiBhbmQgdGhlaXIgYG9mZnNldGAgaW4gXCJtaW51dGVzIGZyb20gVVRDXCJcblxuSHVtYW4gdGltZXMgd2lsbCBiZSBiYXNlZCBvbiB0aGUgbmVhcmVzdCBgc3RhcnRgLCBmYWxsaW5nIGJhY2sgb24gdGhlIGRlZmF1bHRcbm9mZnNldCBpZiB0aGUgdGltZSBpcyBvbGRlciB0aGFuIGFsbCBvZiB0aGUgZXhjZXB0aW9ucy5cblxuV2hlbiBwYWlyZWQgd2l0aCBgZ2V0Wm9uZU5hbWVgLCB0aGlzIGFsbG93cyB5b3UgdG8gbG9hZCB0aGUgcmVhbCBJQU5BIHRpbWUgem9uZVxuZGF0YWJhc2UgaG93ZXZlciB5b3Ugd2FudDogSFRUUCwgY2FjaGUsIGhhcmRjb2RlLCBldGMuXG5cbioqTm90ZToqKiBJZiB5b3UgdXNlIHRoaXMsIHBsZWFzZSBzaGFyZSB5b3VyIHdvcmsgaW4gYW4gRWxtIGNvbW11bml0eSBmb3J1bSFcbkkgYW0gc3VyZSBvdGhlcnMgd291bGQgbGlrZSB0byBoZWFyIGFib3V0IGl0LCBhbmQgbW9yZSBleHBlcmllbmNlIHJlcG9ydHMgd2lsbFxuaGVscCBtZSBhbmQgdGhlIGFueSBwb3RlbnRpYWwgVEMzOSBwcm9wb3NhbC5cbi19XG5jdXN0b21ab25lIDogSW50IC0+IExpc3QgeyBzdGFydCA6IEludCwgb2Zmc2V0IDogSW50IH0gLT4gWm9uZVxuY3VzdG9tWm9uZSA9XG4gIFpvbmVcblxuXG57LXwgKipJbnRlbmRlZCBmb3IgcGFja2FnZSBhdXRob3JzLioqXG5cblVzZSBgSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lYCB0byB0cnkgdG8gZ2V0IG5hbWVzXG5saWtlIGBFdXJvcGUvTW9zY293YCBvciBgQW1lcmljYS9IYXZhbmFgLiBGcm9tIHRoZXJlIHlvdSBjYW4gbG9vayBpdCB1cCBpbiBhbnlcbklBTkEgZGF0YSB5b3UgbG9hZGVkIHlvdXJzZWxmLlxuLX1cbmdldFpvbmVOYW1lIDogVGFzayB4IFpvbmVOYW1lXG5nZXRab25lTmFtZSA9XG4gIEVsbS5LZXJuZWwuVGltZS5nZXRab25lTmFtZSAoKVxuXG5cbnstfCAqKkludGVuZGVkIGZvciBwYWNrYWdlIGF1dGhvcnMuKipcblxuVGhlIGBnZXRab25lTmFtZWAgZnVuY3Rpb24gcmVsaWVzIG9uIGEgSmF2YVNjcmlwdCBBUEkgdGhhdCBpcyBub3Qgc3VwcG9ydGVkXG5pbiBhbGwgYnJvd3NlcnMgeWV0LCBzbyBpdCBjYW4gcmV0dXJuIHRoZSBmb2xsb3dpbmc6XG5cbiAgICAtLSBpbiBtb3JlIHJlY2VudCBicm93c2Vyc1xuICAgIE5hbWUgXCJFdXJvcGUvTW9zY293XCJcbiAgICBOYW1lIFwiQW1lcmljYS9IYXZhbmFcIlxuXG4gICAgLS0gaW4gb2xkZXIgYnJvd3NlcnNcbiAgICBPZmZzZXQgMTgwXG4gICAgT2Zmc2V0IC0zMDBcblxuU28gaWYgdGhlIHJlYWwgaW5mbyBpcyBub3QgYXZhaWxhYmxlLCBpdCB3aWxsIHRlbGwgeW91IHRoZSBjdXJyZW50IFVUQyBvZmZzZXRcbmluIG1pbnV0ZXMsIGp1c3QgbGlrZSB3aGF0IGBoZXJlYCB1c2VzIHRvIG1ha2Ugem9uZXMgbGlrZSBgY3VzdG9tWm9uZSAtNjAgW11gLlxuLX1cbnR5cGUgWm9uZU5hbWVcbiAgPSBOYW1lIFN0cmluZ1xuICB8IE9mZnNldCBJbnRcbid9KSkKCQldKSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkZmlsZV90cmVlX19fX2VsbV9rZXJuZWxfbW9kdWxlc190aW1lX3NyYyA9IEEyKAoJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJG1hcEJsb2JzLAoJZnVuY3Rpb24gKGJsb2JWYWx1ZSkgewoJCXJldHVybiB7dXRmODogYmxvYlZhbHVlLnV0Zjh9OwoJfSwKCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRtYXBGaWxlVHJlZU5vZGVGcm9tR2VuZXJhdGVkKCRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRHZW5lcmF0ZWRfU291cmNlRmlsZXMkZmlsZV90cmVlX25vZGVfZWxtX2tlcm5lbF9tb2R1bGVzX3RpbWVfc3JjKSk7CnZhciAkZWxtJGNvcmUkVHVwbGUkbWFwRmlyc3QgPSBGMigKCWZ1bmN0aW9uIChmdW5jLCBfdjApIHsKCQl2YXIgeCA9IF92MC5hOwoJCXZhciB5ID0gX3YwLmI7CgkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCWZ1bmMoeCksCgkJCXkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlV29ya2VyJGxpc3RBbGxGaWxlc0Zyb21Tb3VyY2VGaWxlVHJlZU5vZGUgPSBmdW5jdGlvbiAobm9kZSkgewoJaWYgKG5vZGUuJCA9PT0gJ0Jsb2JOb2RlJykgewoJCXZhciBibG9iID0gbm9kZS5hOwoJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCV9VdGlsc19UdXBsZTIoX0xpc3RfTmlsLCBibG9iKQoJCQldKTsKCX0gZWxzZSB7CgkJdmFyIHRyZWUgPSBub2RlLmE7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsCgkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCXZhciBlbnRyeU5hbWUgPSBfdjEuYTsKCQkJCXZhciBlbnRyeU5vZGUgPSBfdjEuYjsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJJGVsbSRjb3JlJFR1cGxlJG1hcEZpcnN0KAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zKGVudHJ5TmFtZSkpLAoJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VXb3JrZXIkbGlzdEFsbEZpbGVzRnJvbVNvdXJjZUZpbGVUcmVlTm9kZShlbnRyeU5vZGUpKTsKCQkJfSwKCQkJdHJlZSk7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlV29ya2VyJGVsbUNvcmVNb2R1bGVzID0gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJX0xpc3RfZnJvbUFycmF5KAoJCVsKCQkJQTIoCgkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJdmFyIGZpbGVDb250ZW50ID0gX3YwLmI7CgkJCQlyZXR1cm4ge2ltcGxpY2l0SW1wb3J0OiB0cnVlLCBtb2R1bGVUZXh0OiBmaWxlQ29udGVudC51dGY4fTsKCQkJfSwKCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZVdvcmtlciRsaXN0QWxsRmlsZXNGcm9tU291cmNlRmlsZVRyZWVOb2RlKCRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRmaWxlX3RyZWVfX19fZWxtX2NvcmVfbW9kdWxlc19pbXBsaWNpdF9pbXBvcnQpKSwKCQkJQTIoCgkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJZnVuY3Rpb24gKF92MSkgewoJCQkJdmFyIGZpbGVDb250ZW50ID0gX3YxLmI7CgkJCQlyZXR1cm4ge2ltcGxpY2l0SW1wb3J0OiBmYWxzZSwgbW9kdWxlVGV4dDogZmlsZUNvbnRlbnQudXRmOH07CgkJCX0sCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZVdvcmtlciRsaXN0QWxsRmlsZXNGcm9tU291cmNlRmlsZVRyZWVOb2RlLAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVskYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkZmlsZV90cmVlX19fX2VsbV9jb3JlX21vZHVsZXNfZXhwbGljaXRfaW1wb3J0LCAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkZmlsZV90cmVlX19fX2VsbV9rZXJuZWxfbW9kdWxlc19qc29uX3NyYywgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJGZpbGVfdHJlZV9fX19lbG1fa2VybmVsX21vZHVsZXNfaHR0cF9zcmMsICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRTb3VyY2VGaWxlcyRmaWxlX3RyZWVfX19fZWxtX2tlcm5lbF9tb2R1bGVzX3RpbWVfc3JjLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkU291cmNlRmlsZXMkZmlsZV90cmVlX19fX2VsbV9rZXJuZWxfbW9kdWxlc19odG1sX3NyYywgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJFNvdXJjZUZpbGVzJGZpbGVfdHJlZV9fX19lbG1fa2VybmVsX21vZHVsZXNfYnJvd3Nlcl9zcmNdKSkpCgkJXSkpOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSA9IGZ1bmN0aW9uICh4KSB7CglyZXR1cm4geDsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkU291cmNlQ29udGVudEZvckNvb2tpbmcgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnU291cmNlQ29udGVudEZvckNvb2tpbmcnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkQ29tcGxldGlvbkl0ZW0gPSBGNCgKCWZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7CgkJcmV0dXJuIHskOiAnQ29tcGxldGlvbkl0ZW0nLCBhOiBhLCBiOiBiLCBjOiBjLCBkOiBkfTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRFbnVtQ29tcGxldGlvbkl0ZW1LaW5kID0geyQ6ICdFbnVtQ29tcGxldGlvbkl0ZW1LaW5kJ307CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJEVudW1NZW1iZXJDb21wbGV0aW9uSXRlbUtpbmQgPSB7JDogJ0VudW1NZW1iZXJDb21wbGV0aW9uSXRlbUtpbmQnfTsKdmFyICRhdXRob3IkcHJvamVjdCRGcm9udGVuZCRNb25hY29FZGl0b3IkRnVuY3Rpb25Db21wbGV0aW9uSXRlbUtpbmQgPSB7JDogJ0Z1bmN0aW9uQ29tcGxldGlvbkl0ZW1LaW5kJ307CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJFN0cnVjdENvbXBsZXRpb25JdGVtS2luZCA9IHskOiAnU3RydWN0Q29tcGxldGlvbkl0ZW1LaW5kJ307CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGNvbXBsZXRpb25JdGVtc0Zyb21QYXJzZWREZWNsYXJhdGlvbiA9IEYyKAoJZnVuY3Rpb24gKGRlY2xOYW1lLCBkZWNsYXJhdGlvbk9yUmVmZXJlbmNlKSB7CgkJc3dpdGNoIChkZWNsYXJhdGlvbk9yUmVmZXJlbmNlLiQpIHsKCQkJY2FzZSAnRnVuY3Rpb25PclZhbHVlRGVjbGFyYXRpb24nOgoJCQkJdmFyIF92MSA9IGRlY2xhcmF0aW9uT3JSZWZlcmVuY2UuYTsKCQkJCXZhciB0b3BMZXZlbFJhbmdlID0gX3YxLmE7CgkJCQl2YXIgbWFya2Rvd24gPSBfdjEuYi5hOwoJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCUE0KCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkQ29tcGxldGlvbkl0ZW0sIGRlY2xOYW1lLCBkZWNsTmFtZSwgJGF1dGhvciRwcm9qZWN0JEZyb250ZW5kJE1vbmFjb0VkaXRvciRGdW5jdGlvbkNvbXBsZXRpb25JdGVtS2luZCwgbWFya2Rvd24pLAoJCQkJCQl0b3BMZXZlbFJhbmdlKQoJCQkJCV0pOwoJCQljYXNlICdUeXBlQWxpYXNEZWNsYXJhdGlvbic6CgkJCQl2YXIgX3YyID0gZGVjbGFyYXRpb25PclJlZmVyZW5jZS5hOwoJCQkJdmFyIHRvcExldmVsUmFuZ2UgPSBfdjIuYTsKCQkJCXZhciBtYXJrZG93biA9IF92Mi5iLmE7CgkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJQTQoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRDb21wbGV0aW9uSXRlbSwgZGVjbE5hbWUsIGRlY2xOYW1lLCAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJFN0cnVjdENvbXBsZXRpb25JdGVtS2luZCwgbWFya2Rvd24pLAoJCQkJCQl0b3BMZXZlbFJhbmdlKQoJCQkJCV0pOwoJCQlkZWZhdWx0OgoJCQkJdmFyIF92MyA9IGRlY2xhcmF0aW9uT3JSZWZlcmVuY2UuYTsKCQkJCXZhciB0b3BMZXZlbFJhbmdlID0gX3YzLmE7CgkJCQl2YXIgY2hvaWNlVHlwZU1hcmtkb3duID0gX3YzLmIuYTsKCQkJCXZhciB0YWdzID0gZGVjbGFyYXRpb25PclJlZmVyZW5jZS5iOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJQTQoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRDb21wbGV0aW9uSXRlbSwgZGVjbE5hbWUsIGRlY2xOYW1lLCAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJEVudW1Db21wbGV0aW9uSXRlbUtpbmQsIGNob2ljZVR5cGVNYXJrZG93biksCgkJCQkJCXRvcExldmVsUmFuZ2UpLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCWZ1bmN0aW9uIChfdjQpIHsKCQkJCQkJCXZhciB0YWdOYW1lID0gX3Y0LmE7CgkJCQkJCQl2YXIgX3Y1ID0gX3Y0LmI7CgkJCQkJCQl2YXIgdGFnUmFuZ2UgPSBfdjUuYTsKCQkJCQkJCXZhciB0YWdNYXJrZG93biA9IF92NS5iLmE7CgkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJCQlBNCgkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJENvbXBsZXRpb25JdGVtLCB0YWdOYW1lLCB0YWdOYW1lLCAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJEVudW1NZW1iZXJDb21wbGV0aW9uSXRlbUtpbmQsIHRhZ01hcmtkb3duKSwKCQkJCQkJCQl0YWdSYW5nZSk7CgkJCQkJCX0sCgkJCQkJCXRhZ3MpKTsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JGFueSA9IEYyKAoJZnVuY3Rpb24gKGlzT2theSwgbGlzdCkgewoJCWFueToKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIWxpc3QuYikgewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9IGVsc2UgewoJCQkJdmFyIHggPSBsaXN0LmE7CgkJCQl2YXIgeHMgPSBsaXN0LmI7CgkJCQlpZiAoaXNPa2F5KHgpKSB7CgkJCQkJcmV0dXJuIHRydWU7CgkJCQl9IGVsc2UgewoJCQkJCXZhciAkdGVtcCRpc09rYXkgPSBpc09rYXksCgkJCQkJCSR0ZW1wJGxpc3QgPSB4czsKCQkJCQlpc09rYXkgPSAkdGVtcCRpc09rYXk7CgkJCQkJbGlzdCA9ICR0ZW1wJGxpc3Q7CgkJCQkJY29udGludWUgYW55OwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkQmFzaWNzJGVxID0gX1V0aWxzX2VxdWFsOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwb3NpbmckZXhwb3Nlc0Z1bmN0aW9uID0gRjIoCglmdW5jdGlvbiAocywgZXhwb3N1cmUpIHsKCQlpZiAoZXhwb3N1cmUuJCA9PT0gJ0FsbCcpIHsKCQkJcmV0dXJuIHRydWU7CgkJfSBlbHNlIHsKCQkJdmFyIGwgPSBleHBvc3VyZS5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRhbnksCgkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJdmFyIHZhbHVlID0gX3YxLmI7CgkJCQkJaWYgKHZhbHVlLiQgPT09ICdGdW5jdGlvbkV4cG9zZScpIHsKCQkJCQkJdmFyIGZ1biA9IHZhbHVlLmE7CgkJCQkJCXJldHVybiBfVXRpbHNfZXEoZnVuLCBzKTsKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfQoJCQkJfSwKCQkJCWwpOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRleHBvc2luZ0xpc3RFeHBvc2VzVHlwZU9yQWxpYXMgPSBGMigKCWZ1bmN0aW9uIChuYW1lLCBleHBvc2luZ0xpc3QpIHsKCQlpZiAoZXhwb3NpbmdMaXN0LiQgPT09ICdBbGwnKSB7CgkJCXJldHVybiB0cnVlOwoJCX0gZWxzZSB7CgkJCXZhciB0b3BMZXZlbEV4cG9zaW5ncyA9IGV4cG9zaW5nTGlzdC5hOwoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRhbnksCgkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJdmFyIHRvcExldmVsRXhwb3NlID0gX3YxLmI7CgkJCQkJc3dpdGNoICh0b3BMZXZlbEV4cG9zZS4kKSB7CgkJCQkJCWNhc2UgJ1R5cGVPckFsaWFzRXhwb3NlJzoKCQkJCQkJCXZhciBleHBvc2VkTmFtZSA9IHRvcExldmVsRXhwb3NlLmE7CgkJCQkJCQlyZXR1cm4gX1V0aWxzX2VxKGV4cG9zZWROYW1lLCBuYW1lKTsKCQkJCQkJY2FzZSAnVHlwZUV4cG9zZSc6CgkJCQkJCQl2YXIgdHlwZUV4cG9zZSA9IHRvcExldmVsRXhwb3NlLmE7CgkJCQkJCQlyZXR1cm4gX1V0aWxzX2VxKHR5cGVFeHBvc2UubmFtZSwgbmFtZSk7CgkJCQkJCWNhc2UgJ0luZml4RXhwb3NlJzoKCQkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQkJZGVmYXVsdDoKCQkJCQkJCXZhciBmdW5jdGlvbk5hbWUgPSB0b3BMZXZlbEV4cG9zZS5hOwoJCQkJCQkJcmV0dXJuIF9VdGlsc19lcShuYW1lLCBmdW5jdGlvbk5hbWUpOwoJCQkJCX0KCQkJCX0sCgkJCQl0b3BMZXZlbEV4cG9zaW5ncyk7CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkTWF5YmUkSnVzdCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdKdXN0JywgYTogYX07Cn07CnZhciAkZWxtJGNvcmUkTWF5YmUkTm90aGluZyA9IHskOiAnTm90aGluZyd9Owp2YXIgJGVsbSRjb3JlJFN0cmluZyRsaW5lcyA9IF9TdHJpbmdfbGluZXM7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJENvb2tlZERvY3VtZW50YXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnQ29va2VkRG9jdW1lbnRhdGlvbicsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSREZWNsYXJhdGlvblJhbmdlID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0RlY2xhcmF0aW9uUmFuZ2UnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRSYW5nZSA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdSYW5nZScsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJFRvcExldmVsU2NvcGUgPSB7JDogJ1RvcExldmVsU2NvcGUnfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkVHlwZUFsaWFzRGVjbGFyYXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVHlwZUFsaWFzRGVjbGFyYXRpb24nLCBhOiBhfTsKfTsKdmFyICRlbG0kY29yZSRTdHJpbmckam9pbiA9IEYyKAoJZnVuY3Rpb24gKHNlcCwgY2h1bmtzKSB7CgkJcmV0dXJuIEEyKAoJCQlfU3RyaW5nX2pvaW4sCgkJCXNlcCwKCQkJX0xpc3RfdG9BcnJheShjaHVua3MpKTsKCX0pOwp2YXIgJGVsbSRjb3JlJFN0cmluZyRjb25jYXQgPSBmdW5jdGlvbiAoc3RyaW5ncykgewoJcmV0dXJuIEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJycsIHN0cmluZ3MpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRtYXJrZG93bkVsbUNvZGVCbG9ja0Zyb21Db2RlTGluZXMgPSBmdW5jdGlvbiAoY29kZUxpbmVzKSB7CglyZXR1cm4gJGVsbSRjb3JlJFN0cmluZyRjb25jYXQoCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQknICAgICcsCgkJCQlBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICdcbiAgICAnLCBjb2RlTGluZXMpCgkJCV0pKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkZG9jdW1lbnRhdGlvbk1hcmtkb3duRnJvbUNvZGVMaW5lc0FuZERvY3VtZW50YXRpb24gPSBGMigKCWZ1bmN0aW9uIChjb2RlTGluZXMsIG1heWJlRG9jdW1lbnRhdGlvbikgewoJCXZhciBsZXNzRG9jdW1lbnRhdGlvbiA9ICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbWFya2Rvd25FbG1Db2RlQmxvY2tGcm9tQ29kZUxpbmVzKGNvZGVMaW5lcyk7CgkJaWYgKG1heWJlRG9jdW1lbnRhdGlvbi4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIGxlc3NEb2N1bWVudGF0aW9uOwoJCX0gZWxzZSB7CgkJCXZhciBkb2N1bWVudGF0aW9uID0gbWF5YmVEb2N1bWVudGF0aW9uLmE7CgkJCXJldHVybiAkZWxtJGNvcmUkU3RyaW5nJGNvbmNhdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbbGVzc0RvY3VtZW50YXRpb24sICdcblxuJywgZG9jdW1lbnRhdGlvbl0pKTsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkZXhwYW5kUmFuZ2VUb0xpbmVTdGFydCA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBfdjEgPSBfdjAuYTsKCXZhciBzdGFydFJvdyA9IF92MS5hOwoJdmFyIGVuZCA9IF92MC5iOwoJcmV0dXJuIEEyKAoJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkUmFuZ2UsCgkJX1V0aWxzX1R1cGxlMihzdGFydFJvdywgMSksCgkJZW5kKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmFuZ2VGcm9tUmVjb3JkUmFuZ2UgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgc3RhcnQgPSBfdjAuc3RhcnQ7Cgl2YXIgZW5kID0gX3YwLmVuZDsKCXJldHVybiBBMigKCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJFJhbmdlLAoJCV9VdGlsc19UdXBsZTIoc3RhcnQucm93LCBzdGFydC5jb2x1bW4pLAoJCV9VdGlsc19UdXBsZTIoZW5kLnJvdywgZW5kLmNvbHVtbikpOwp9Owp2YXIgJGVsbSRjb3JlJFN0cmluZyRsZW5ndGggPSBfU3RyaW5nX2xlbmd0aDsKdmFyICRlbG0kY29yZSRCYXNpY3MkbHQgPSBfVXRpbHNfbHQ7CnZhciAkZWxtJGNvcmUkU3RyaW5nJHNsaWNlID0gX1N0cmluZ19zbGljZTsKdmFyICRlbG0kY29yZSRTdHJpbmckZHJvcExlZnQgPSBGMigKCWZ1bmN0aW9uIChuLCBzdHJpbmcpIHsKCQlyZXR1cm4gKG4gPCAxKSA/IHN0cmluZyA6IEEzKAoJCQkkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLAoJCQluLAoJCQkkZWxtJGNvcmUkU3RyaW5nJGxlbmd0aChzdHJpbmcpLAoJCQlzdHJpbmcpOwoJfSk7CnZhciAkZWxtJGNvcmUkQmFzaWNzJG5lZ2F0ZSA9IGZ1bmN0aW9uIChuKSB7CglyZXR1cm4gLW47Cn07CnZhciAkZWxtJGNvcmUkU3RyaW5nJGRyb3BSaWdodCA9IEYyKAoJZnVuY3Rpb24gKG4sIHN0cmluZykgewoJCXJldHVybiAobiA8IDEpID8gc3RyaW5nIDogQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgMCwgLW4sIHN0cmluZyk7Cgl9KTsKdmFyICRlbG0kY29yZSRTdHJpbmckZW5kc1dpdGggPSBfU3RyaW5nX2VuZHNXaXRoOwp2YXIgJGVsbSRjb3JlJFN0cmluZyRzdGFydHNXaXRoID0gX1N0cmluZ19zdGFydHNXaXRoOwp2YXIgJGVsbSRjb3JlJFN0cmluZyR0cmltID0gX1N0cmluZ190cmltOwp2YXIgJGVsbSRjb3JlJFN0cmluZyR0cmltTGVmdCA9IF9TdHJpbmdfdHJpbUxlZnQ7CnZhciAkZWxtJGNvcmUkU3RyaW5nJHRyaW1SaWdodCA9IF9TdHJpbmdfdHJpbVJpZ2h0Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRyZW1vdmVXcmFwcGluZ0Zyb21NdWx0aWxpbmVDb21tZW50ID0gZnVuY3Rpb24gKHdpdGhXcmFwcGluZykgewoJdmFyIHRyaW1tZWQgPSAkZWxtJGNvcmUkU3RyaW5nJHRyaW0od2l0aFdyYXBwaW5nKTsKCXZhciBsZXNzUHJlZml4ID0gJGVsbSRjb3JlJFN0cmluZyR0cmltTGVmdCgKCQlBMigkZWxtJGNvcmUkU3RyaW5nJHN0YXJ0c1dpdGgsICd7LXwnLCB0cmltbWVkKSA/IEEyKCRlbG0kY29yZSRTdHJpbmckZHJvcExlZnQsIDMsIHRyaW1tZWQpIDogKEEyKCRlbG0kY29yZSRTdHJpbmckc3RhcnRzV2l0aCwgJ3stJywgdHJpbW1lZCkgPyBBMigkZWxtJGNvcmUkU3RyaW5nJGRyb3BMZWZ0LCAyLCB0cmltbWVkKSA6IHRyaW1tZWQpKTsKCXJldHVybiAkZWxtJGNvcmUkU3RyaW5nJHRyaW1SaWdodCgKCQlBMigkZWxtJGNvcmUkU3RyaW5nJGVuZHNXaXRoLCAnLX0nLCBsZXNzUHJlZml4KSA/IEEyKCRlbG0kY29yZSRTdHJpbmckZHJvcFJpZ2h0LCAyLCBsZXNzUHJlZml4KSA6IGxlc3NQcmVmaXgpOwp9Owp2YXIgJGVsbSRjb3JlJEJhc2ljcyRsZSA9IF9VdGlsc19sZTsKdmFyICRlbG0kY29yZSRCYXNpY3Mkc3ViID0gX0Jhc2ljc19zdWI7CnZhciAkZWxtJGNvcmUkTGlzdCRkcm9wID0gRjIoCglmdW5jdGlvbiAobiwgbGlzdCkgewoJCWRyb3A6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKG4gPD0gMCkgewoJCQkJcmV0dXJuIGxpc3Q7CgkJCX0gZWxzZSB7CgkJCQlpZiAoIWxpc3QuYikgewoJCQkJCXJldHVybiBsaXN0OwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgeCA9IGxpc3QuYTsKCQkJCQl2YXIgeHMgPSBsaXN0LmI7CgkJCQkJdmFyICR0ZW1wJG4gPSBuIC0gMSwKCQkJCQkJJHRlbXAkbGlzdCA9IHhzOwoJCQkJCW4gPSAkdGVtcCRuOwoJCQkJCWxpc3QgPSAkdGVtcCRsaXN0OwoJCQkJCWNvbnRpbnVlIGRyb3A7CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRTdHJpbmckbGVmdCA9IEYyKAoJZnVuY3Rpb24gKG4sIHN0cmluZykgewoJCXJldHVybiAobiA8IDEpID8gJycgOiBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCAwLCBuLCBzdHJpbmcpOwoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCR0YWtlUmV2ZXJzZSA9IEYzKAoJZnVuY3Rpb24gKG4sIGxpc3QsIGtlcHQpIHsKCQl0YWtlUmV2ZXJzZToKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAobiA8PSAwKSB7CgkJCQlyZXR1cm4ga2VwdDsKCQkJfSBlbHNlIHsKCQkJCWlmICghbGlzdC5iKSB7CgkJCQkJcmV0dXJuIGtlcHQ7CgkJCQl9IGVsc2UgewoJCQkJCXZhciB4ID0gbGlzdC5hOwoJCQkJCXZhciB4cyA9IGxpc3QuYjsKCQkJCQl2YXIgJHRlbXAkbiA9IG4gLSAxLAoJCQkJCQkkdGVtcCRsaXN0ID0geHMsCgkJCQkJCSR0ZW1wJGtlcHQgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCB4LCBrZXB0KTsKCQkJCQluID0gJHRlbXAkbjsKCQkJCQlsaXN0ID0gJHRlbXAkbGlzdDsKCQkJCQlrZXB0ID0gJHRlbXAka2VwdDsKCQkJCQljb250aW51ZSB0YWtlUmV2ZXJzZTsKCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJExpc3QkdGFrZVRhaWxSZWMgPSBGMigKCWZ1bmN0aW9uIChuLCBsaXN0KSB7CgkJcmV0dXJuICRlbG0kY29yZSRMaXN0JHJldmVyc2UoCgkJCUEzKCRlbG0kY29yZSRMaXN0JHRha2VSZXZlcnNlLCBuLCBsaXN0LCBfTGlzdF9OaWwpKTsKCX0pOwp2YXIgJGVsbSRjb3JlJExpc3QkdGFrZUZhc3QgPSBGMygKCWZ1bmN0aW9uIChjdHIsIG4sIGxpc3QpIHsKCQlpZiAobiA8PSAwKSB7CgkJCXJldHVybiBfTGlzdF9OaWw7CgkJfSBlbHNlIHsKCQkJdmFyIF92MCA9IF9VdGlsc19UdXBsZTIobiwgbGlzdCk7CgkJCV92MCQxOgoJCQl3aGlsZSAodHJ1ZSkgewoJCQkJX3YwJDU6CgkJCQl3aGlsZSAodHJ1ZSkgewoJCQkJCWlmICghX3YwLmIuYikgewoJCQkJCQlyZXR1cm4gbGlzdDsKCQkJCQl9IGVsc2UgewoJCQkJCQlpZiAoX3YwLmIuYi5iKSB7CgkJCQkJCQlzd2l0Y2ggKF92MC5hKSB7CgkJCQkJCQkJY2FzZSAxOgoJCQkJCQkJCQlicmVhayBfdjAkMTsKCQkJCQkJCQljYXNlIDI6CgkJCQkJCQkJCXZhciBfdjIgPSBfdjAuYjsKCQkJCQkJCQkJdmFyIHggPSBfdjIuYTsKCQkJCQkJCQkJdmFyIF92MyA9IF92Mi5iOwoJCQkJCQkJCQl2YXIgeSA9IF92My5hOwoJCQkJCQkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJW3gsIHldKTsKCQkJCQkJCQljYXNlIDM6CgkJCQkJCQkJCWlmIChfdjAuYi5iLmIuYikgewoJCQkJCQkJCQkJdmFyIF92NCA9IF92MC5iOwoJCQkJCQkJCQkJdmFyIHggPSBfdjQuYTsKCQkJCQkJCQkJCXZhciBfdjUgPSBfdjQuYjsKCQkJCQkJCQkJCXZhciB5ID0gX3Y1LmE7CgkJCQkJCQkJCQl2YXIgX3Y2ID0gX3Y1LmI7CgkJCQkJCQkJCQl2YXIgeiA9IF92Ni5hOwoJCQkJCQkJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbeCwgeSwgel0pOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJYnJlYWsgX3YwJDU7CgkJCQkJCQkJCX0KCQkJCQkJCQlkZWZhdWx0OgoJCQkJCQkJCQlpZiAoX3YwLmIuYi5iLmIgJiYgX3YwLmIuYi5iLmIuYikgewoJCQkJCQkJCQkJdmFyIF92NyA9IF92MC5iOwoJCQkJCQkJCQkJdmFyIHggPSBfdjcuYTsKCQkJCQkJCQkJCXZhciBfdjggPSBfdjcuYjsKCQkJCQkJCQkJCXZhciB5ID0gX3Y4LmE7CgkJCQkJCQkJCQl2YXIgX3Y5ID0gX3Y4LmI7CgkJCQkJCQkJCQl2YXIgeiA9IF92OS5hOwoJCQkJCQkJCQkJdmFyIF92MTAgPSBfdjkuYjsKCQkJCQkJCQkJCXZhciB3ID0gX3YxMC5hOwoJCQkJCQkJCQkJdmFyIHRsID0gX3YxMC5iOwoJCQkJCQkJCQkJcmV0dXJuIChjdHIgPiAxMDAwKSA/IEEyKAoJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkJeCwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCQkJeSwKCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkJCQkJeiwKCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkJCQkJdywKCQkJCQkJCQkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCR0YWtlVGFpbFJlYywgbiAtIDQsIHRsKSkpKSkgOiBBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkJCXgsCgkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQkJCXksCgkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCQkJCXosCgkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkJCQkJCXcsCgkJCQkJCQkJCQkJCQkJQTMoJGVsbSRjb3JlJExpc3QkdGFrZUZhc3QsIGN0ciArIDEsIG4gLSA0LCB0bCkpKSkpOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJYnJlYWsgX3YwJDU7CgkJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWlmIChfdjAuYSA9PT0gMSkgewoJCQkJCQkJCWJyZWFrIF92MCQxOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQlicmVhayBfdjAkNTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiBsaXN0OwoJCQl9CgkJCXZhciBfdjEgPSBfdjAuYjsKCQkJdmFyIHggPSBfdjEuYTsKCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCVt4XSk7CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCR0YWtlID0gRjIoCglmdW5jdGlvbiAobiwgbGlzdCkgewoJCXJldHVybiBBMygkZWxtJGNvcmUkTGlzdCR0YWtlRmFzdCwgMCwgbiwgbGlzdCk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2Ukc2xpY2VSYW5nZUZyb21UZXh0TGluZXMgPSBGMigKCWZ1bmN0aW9uICh0ZXh0TGluZXMsIF92MCkgewoJCXZhciBfdjEgPSBfdjAuYTsKCQl2YXIgc3RhcnRSb3cgPSBfdjEuYTsKCQl2YXIgc3RhcnRDb2x1bW4gPSBfdjEuYjsKCQl2YXIgX3YyID0gX3YwLmI7CgkJdmFyIGVuZFJvdyA9IF92Mi5hOwoJCXZhciBlbmRDb2x1bW4gPSBfdjIuYjsKCQl2YXIgc3RhcnRSb3dJbnQgPSBzdGFydFJvdyAtIDE7CgkJdmFyIHN0YXJ0Q29sdW1uSW50ID0gc3RhcnRDb2x1bW4gLSAxOwoJCXZhciBsaW5lc0Zyb21TdGFydCA9IEEyKCRlbG0kY29yZSRMaXN0JGRyb3AsIHN0YXJ0Um93SW50LCB0ZXh0TGluZXMpOwoJCXZhciBlbmRSb3dJbnQgPSBlbmRSb3cgLSAxOwoJCXZhciByYW5nZVJvd0NvdW50ID0gZW5kUm93SW50IC0gc3RhcnRSb3dJbnQ7CgkJdmFyIGVuZENvbHVtbkludCA9IGVuZENvbHVtbiAtIDE7CgkJaWYgKCFyYW5nZVJvd0NvdW50KSB7CgkJCWlmICghbGluZXNGcm9tU3RhcnQuYikgewoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJfSBlbHNlIHsKCQkJCXZhciBsaW5lID0gbGluZXNGcm9tU3RhcnQuYTsKCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzdGFydENvbHVtbkludCwgZW5kQ29sdW1uSW50LCBsaW5lKQoJCQkJCV0pOwoJCQl9CgkJfSBlbHNlIHsKCQkJdmFyIG1pZGRsZUxpbmVzID0gQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCR0YWtlLAoJCQkJcmFuZ2VSb3dDb3VudCAtIDEsCgkJCQlBMigkZWxtJGNvcmUkTGlzdCRkcm9wLCAxLCBsaW5lc0Zyb21TdGFydCkpOwoJCQl2YXIgbGFzdExpbmUgPSBmdW5jdGlvbiAoKSB7CgkJCQl2YXIgX3Y1ID0gQTIoJGVsbSRjb3JlJExpc3QkZHJvcCwgcmFuZ2VSb3dDb3VudCwgbGluZXNGcm9tU3RhcnQpOwoJCQkJaWYgKCFfdjUuYikgewoJCQkJCXJldHVybiAnJzsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGxpbmUgPSBfdjUuYTsKCQkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJFN0cmluZyRsZWZ0LCBlbmRDb2x1bW5JbnQsIGxpbmUpOwoJCQkJfQoJCQl9KCk7CgkJCXZhciBmaXJzdExpbmUgPSBmdW5jdGlvbiAoKSB7CgkJCQlpZiAoIWxpbmVzRnJvbVN0YXJ0LmIpIHsKCQkJCQlyZXR1cm4gJyc7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBsaW5lID0gbGluZXNGcm9tU3RhcnQuYTsKCQkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJFN0cmluZyRkcm9wTGVmdCwgc3RhcnRDb2x1bW5JbnQsIGxpbmUpOwoJCQkJfQoJCQl9KCk7CgkJCXJldHVybiAkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVtmaXJzdExpbmVdKSwKCQkJCQkJbWlkZGxlTGluZXMsCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJW2xhc3RMaW5lXSkKCQkJCQldKSk7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGRlY2xhcmF0aW9uc0ZvckFsaWFzRGVjbGFyYXRpb24gPSBGMygKCWZ1bmN0aW9uIChfdjAsIGRlY2xhcmF0aW9uUmFuZ2VSZWNvcmQsIGFsaWFzRGVjbGFyYXRpb24pIHsKCQl2YXIgdGV4dExpbmVzID0gX3YwLmE7CgkJdmFyIGRlY2xhcmF0aW9uUmFuZ2UgPSAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHJhbmdlRnJvbVJlY29yZFJhbmdlKGRlY2xhcmF0aW9uUmFuZ2VSZWNvcmQpOwoJCXZhciBfdjEgPSBkZWNsYXJhdGlvblJhbmdlOwoJCXZhciBkZWNsYXJhdGlvblJhbmdlRW5kID0gX3YxLmI7CgkJdmFyIF92MiA9IGZ1bmN0aW9uICgpIHsKCQkJdmFyIF92MyA9IGFsaWFzRGVjbGFyYXRpb24uZG9jdW1lbnRhdGlvbjsKCQkJaWYgKF92My4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKCRlbG0kY29yZSRNYXliZSROb3RoaW5nLCBkZWNsYXJhdGlvblJhbmdlKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBfdjQgPSBfdjMuYTsKCQkJCXZhciBjb21tZW50UmFuZ2VSZWNvcmQgPSBfdjQuYTsKCQkJCXZhciBjb21tZW50ID0gX3Y0LmI7CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRyZW1vdmVXcmFwcGluZ0Zyb21NdWx0aWxpbmVDb21tZW50KGNvbW1lbnQpKSwKCQkJCQlBMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRSYW5nZSwKCQkJCQkJX1V0aWxzX1R1cGxlMihjb21tZW50UmFuZ2VSZWNvcmQuZW5kLnJvdyArIDEsIDEpLAoJCQkJCQlkZWNsYXJhdGlvblJhbmdlRW5kKSk7CgkJCX0KCQl9KCk7CgkJdmFyIGRvY3VtZW50YXRpb25TdHJpbmdGcm9tU3ludGF4ID0gX3YyLmE7CgkJdmFyIHJhbmdlTGVzc0RvY3VtZW50YXRpb24gPSBfdjIuYjsKCQl2YXIgY29kZVJhbmdlID0gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRleHBhbmRSYW5nZVRvTGluZVN0YXJ0KHJhbmdlTGVzc0RvY3VtZW50YXRpb24pOwoJCXZhciBjb2RlTGluZXMgPSBBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHNsaWNlUmFuZ2VGcm9tVGV4dExpbmVzLCB0ZXh0TGluZXMsIGNvZGVSYW5nZSk7CgkJdmFyIF92NSA9IGFsaWFzRGVjbGFyYXRpb24ubmFtZTsKCQl2YXIgYWxpYXNOYW1lUmFuZ2VSZWNvcmQgPSBfdjUuYTsKCQl2YXIgYWxpYXNOYW1lID0gX3Y1LmI7CgkJdmFyIGFsaWFzTmFtZVJhbmdlID0gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRyYW5nZUZyb21SZWNvcmRSYW5nZShhbGlhc05hbWVSYW5nZVJlY29yZCk7CgkJdmFyIGFsaWFzRGVjbCA9ICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkVHlwZUFsaWFzRGVjbGFyYXRpb24oCgkJCV9VdGlsc19UdXBsZTIoCgkJCQlBMigKCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJERlY2xhcmF0aW9uUmFuZ2UsCgkJCQkJY29kZVJhbmdlLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJW2FsaWFzTmFtZVJhbmdlXSkpLAoJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRDb29rZWREb2N1bWVudGF0aW9uKAoJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkZG9jdW1lbnRhdGlvbk1hcmtkb3duRnJvbUNvZGVMaW5lc0FuZERvY3VtZW50YXRpb24sIGNvZGVMaW5lcywgZG9jdW1lbnRhdGlvblN0cmluZ0Zyb21TeW50YXgpKSkpOwoJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQlhbGlhc05hbWUsCgkJCQlfVXRpbHNfVHVwbGUyKGFsaWFzRGVjbCwgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRUb3BMZXZlbFNjb3BlKSkKCQkJXSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkRnVuY3Rpb25PclZhbHVlRGVjbGFyYXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRnVuY3Rpb25PclZhbHVlRGVjbGFyYXRpb24nLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkTG9jYWxTY29wZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdMb2NhbFNjb3BlJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGdldFR5cGVBbm5vdGF0aW9uRnJvbUZ1bmN0aW9uQXJndW1lbnRJbmRleCA9IEYyKAoJZnVuY3Rpb24gKGFyZ3VtZW50SW5kZXgsIHR5cGVBbm5vdGF0aW9uTm9kZSkgewoJCWdldFR5cGVBbm5vdGF0aW9uRnJvbUZ1bmN0aW9uQXJndW1lbnRJbmRleDoKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgdHlwZUFubm90YXRpb24gPSB0eXBlQW5ub3RhdGlvbk5vZGUuYjsKCQkJaWYgKHR5cGVBbm5vdGF0aW9uLiQgPT09ICdGdW5jdGlvblR5cGVBbm5vdGF0aW9uJykgewoJCQkJdmFyIGFyZ3VtZW50VHlwZSA9IHR5cGVBbm5vdGF0aW9uLmE7CgkJCQl2YXIgcmV0dXJuVHlwZSA9IHR5cGVBbm5vdGF0aW9uLmI7CgkJCQlpZiAoYXJndW1lbnRJbmRleCA8IDEpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoYXJndW1lbnRUeXBlKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyICR0ZW1wJGFyZ3VtZW50SW5kZXggPSBhcmd1bWVudEluZGV4IC0gMSwKCQkJCQkJJHRlbXAkdHlwZUFubm90YXRpb25Ob2RlID0gcmV0dXJuVHlwZTsKCQkJCQlhcmd1bWVudEluZGV4ID0gJHRlbXAkYXJndW1lbnRJbmRleDsKCQkJCQl0eXBlQW5ub3RhdGlvbk5vZGUgPSAkdGVtcCR0eXBlQW5ub3RhdGlvbk5vZGU7CgkJCQkJY29udGludWUgZ2V0VHlwZUFubm90YXRpb25Gcm9tRnVuY3Rpb25Bcmd1bWVudEluZGV4OwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIChhcmd1bWVudEluZGV4IDwgMSkgPyAkZWxtJGNvcmUkTWF5YmUkSnVzdCh0eXBlQW5ub3RhdGlvbk5vZGUpIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JGxlbmd0aCA9IGZ1bmN0aW9uICh4cykgewoJcmV0dXJuIEEzKAoJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCUYyKAoJCQlmdW5jdGlvbiAoX3YwLCBpKSB7CgkJCQlyZXR1cm4gaSArIDE7CgkJCX0pLAoJCTAsCgkJeHMpOwp9Owp2YXIgJGVsbSRjb3JlJExpc3QkbWFwMiA9IF9MaXN0X21hcDI7CnZhciAkZWxtJGNvcmUkTGlzdCRyYW5nZUhlbHAgPSBGMygKCWZ1bmN0aW9uIChsbywgaGksIGxpc3QpIHsKCQlyYW5nZUhlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKF9VdGlsc19jbXAobG8sIGhpKSA8IDEpIHsKCQkJCXZhciAkdGVtcCRsbyA9IGxvLAoJCQkJCSR0ZW1wJGhpID0gaGkgLSAxLAoJCQkJCSR0ZW1wJGxpc3QgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBoaSwgbGlzdCk7CgkJCQlsbyA9ICR0ZW1wJGxvOwoJCQkJaGkgPSAkdGVtcCRoaTsKCQkJCWxpc3QgPSAkdGVtcCRsaXN0OwoJCQkJY29udGludWUgcmFuZ2VIZWxwOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIGxpc3Q7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JHJhbmdlID0gRjIoCglmdW5jdGlvbiAobG8sIGhpKSB7CgkJcmV0dXJuIEEzKCRlbG0kY29yZSRMaXN0JHJhbmdlSGVscCwgbG8sIGhpLCBfTGlzdF9OaWwpOwoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCRpbmRleGVkTWFwID0gRjIoCglmdW5jdGlvbiAoZiwgeHMpIHsKCQlyZXR1cm4gQTMoCgkJCSRlbG0kY29yZSRMaXN0JG1hcDIsCgkJCWYsCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkcmFuZ2UsCgkJCQkwLAoJCQkJJGVsbSRjb3JlJExpc3QkbGVuZ3RoKHhzKSAtIDEpLAoJCQl4cyk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0Zyb21QYXR0ZXJuID0gRjMoCglmdW5jdGlvbiAoc291cmNlQ29udGVudCwgY29uZmlnLCBfdjApIHsKCQlsaXN0RGVjbGFyYXRpb25zRnJvbVBhdHRlcm46CgkJd2hpbGUgKHRydWUpIHsKCQkJdmFyIHRleHRMaW5lcyA9IHNvdXJjZUNvbnRlbnQuYTsKCQkJdmFyIHBhdHRlcm5SYW5nZVJlY29yZCA9IF92MC5hOwoJCQl2YXIgcGF0dGVybiA9IF92MC5iOwoJCQlzd2l0Y2ggKHBhdHRlcm4uJCkgewoJCQkJY2FzZSAnVHVwbGVQYXR0ZXJuJzoKCQkJCQl2YXIgdHVwbGVQYXR0ZXJuID0gcGF0dGVybi5hOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCQlBMigKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0Zyb21QYXR0ZXJuLAoJCQkJCQkJc291cmNlQ29udGVudCwKCQkJCQkJCXt0eXBlQW5ub3RhdGlvbjogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSwKCQkJCQkJdHVwbGVQYXR0ZXJuKTsKCQkJCWNhc2UgJ1VuQ29uc1BhdHRlcm4nOgoJCQkJCXZhciBoZWFkID0gcGF0dGVybi5hOwoJCQkJCXZhciB0YWlsID0gcGF0dGVybi5iOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCQlBMigKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0Zyb21QYXR0ZXJuLAoJCQkJCQkJc291cmNlQ29udGVudCwKCQkJCQkJCXt0eXBlQW5ub3RhdGlvbjogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJW2hlYWQsIHRhaWxdKSk7CgkJCQljYXNlICdMaXN0UGF0dGVybic6CgkJCQkJdmFyIGxpc3RQYXR0ZXJuID0gcGF0dGVybi5hOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCQlBMigKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0Zyb21QYXR0ZXJuLAoJCQkJCQkJc291cmNlQ29udGVudCwKCQkJCQkJCXt0eXBlQW5ub3RhdGlvbjogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSwKCQkJCQkJbGlzdFBhdHRlcm4pOwoJCQkJY2FzZSAnVmFyUGF0dGVybic6CgkJCQkJdmFyIG5hbWUgPSBwYXR0ZXJuLmE7CgkJCQkJdmFyIHBhdHRlcm5SYW5nZSA9ICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmFuZ2VGcm9tUmVjb3JkUmFuZ2UocGF0dGVyblJhbmdlUmVjb3JkKTsKCQkJCQl2YXIgbWF5YmVUeXBlQW5ub3RhdGlvblRleHQgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCXZhciBfdjMgPSBjb25maWcudHlwZUFubm90YXRpb247CgkJCQkJCWlmIChfdjMuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgX3Y0ID0gX3YzLmE7CgkJCQkJCQl2YXIgdHlwZUFubm90YXRpb25SYW5nZSA9IF92NC5hOwoJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQkJCScgJywKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHNsaWNlUmFuZ2VGcm9tVGV4dExpbmVzLAoJCQkJCQkJCQkJdGV4dExpbmVzLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRSYW5nZSwKCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKHR5cGVBbm5vdGF0aW9uUmFuZ2Uuc3RhcnQucm93LCB0eXBlQW5ub3RhdGlvblJhbmdlLnN0YXJ0LmNvbHVtbiksCgkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMih0eXBlQW5ub3RhdGlvblJhbmdlLmVuZC5yb3csIHR5cGVBbm5vdGF0aW9uUmFuZ2UuZW5kLmNvbHVtbikpKSkpOwoJCQkJCQl9CgkJCQkJfSgpOwoJCQkJCXZhciBjb2RlTGluZXMgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCWlmIChtYXliZVR5cGVBbm5vdGF0aW9uVGV4dC4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJW25hbWVdKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciB0eXBlQW5ub3RhdGlvblRleHQgPSBtYXliZVR5cGVBbm5vdGF0aW9uVGV4dC5hOwoJCQkJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckY29uY2F0KAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbbmFtZSwgJyA6ICcsIHR5cGVBbm5vdGF0aW9uVGV4dF0pKQoJCQkJCQkJCV0pOwoJCQkJCQl9CgkJCQkJfSgpOwoJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQluYW1lLAoJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJEZ1bmN0aW9uT3JWYWx1ZURlY2xhcmF0aW9uKAoJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSREZWNsYXJhdGlvblJhbmdlLAoJCQkJCQkJCQkJCXBhdHRlcm5SYW5nZSwKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVtwYXR0ZXJuUmFuZ2VdKSksCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJENvb2tlZERvY3VtZW50YXRpb24oCgkJCQkJCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRkb2N1bWVudGF0aW9uTWFya2Rvd25Gcm9tQ29kZUxpbmVzQW5kRG9jdW1lbnRhdGlvbiwgY29kZUxpbmVzLCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZykpKSksCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRUb3BMZXZlbFNjb3BlKSkKCQkJCQkJXSk7CgkJCQljYXNlICdOYW1lZFBhdHRlcm4nOgoJCQkJCXZhciBfYXJndW1lbnRzID0gcGF0dGVybi5iOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCQlBMigKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0Zyb21QYXR0ZXJuLAoJCQkJCQkJc291cmNlQ29udGVudCwKCQkJCQkJCXt0eXBlQW5ub3RhdGlvbjogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSwKCQkJCQkJX2FyZ3VtZW50cyk7CgkJCQljYXNlICdQYXJlbnRoZXNpemVkUGF0dGVybic6CgkJCQkJdmFyIHBhcmVudGhlc2l6ZWQgPSBwYXR0ZXJuLmE7CgkJCQkJdmFyICR0ZW1wJHNvdXJjZUNvbnRlbnQgPSBzb3VyY2VDb250ZW50LAoJCQkJCQkkdGVtcCRjb25maWcgPSB7dHlwZUFubm90YXRpb246ICRlbG0kY29yZSRNYXliZSROb3RoaW5nfSwKCQkJCQkJJHRlbXAkX3YwID0gcGFyZW50aGVzaXplZDsKCQkJCQlzb3VyY2VDb250ZW50ID0gJHRlbXAkc291cmNlQ29udGVudDsKCQkJCQljb25maWcgPSAkdGVtcCRjb25maWc7CgkJCQkJX3YwID0gJHRlbXAkX3YwOwoJCQkJCWNvbnRpbnVlIGxpc3REZWNsYXJhdGlvbnNGcm9tUGF0dGVybjsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJfQoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0RGVjbGFyYXRpb25zRm9yRnVuY3Rpb24gPSBGMygKCWZ1bmN0aW9uIChzb3VyY2VDb250ZW50LCBkZWNsUmFuZ2UsIF9mdW5jdGlvbikgewoJCXZhciB0ZXh0TGluZXMgPSBzb3VyY2VDb250ZW50LmE7CgkJdmFyIGdldFR5cGVBbm5vdGF0aW9uRnJvbUFyZ3VtZW50SW5kZXggPSBmdW5jdGlvbiAoYXJndW1lbnRJbmRleCkgewoJCQl2YXIgX3YyMiA9IF9mdW5jdGlvbi5zaWduYXR1cmU7CgkJCWlmIChfdjIyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQl9IGVsc2UgewoJCQkJdmFyIF92MjMgPSBfdjIyLmE7CgkJCQl2YXIgc2lnbmF0dXJlID0gX3YyMy5iOwoJCQkJcmV0dXJuIEEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkZ2V0VHlwZUFubm90YXRpb25Gcm9tRnVuY3Rpb25Bcmd1bWVudEluZGV4LCBhcmd1bWVudEluZGV4LCBzaWduYXR1cmUudHlwZUFubm90YXRpb24pOwoJCQl9CgkJfTsKCQl2YXIgZG9jdW1lbnRhdGlvblN0cmluZ0Zyb21TeW50YXggPSBmdW5jdGlvbiAoKSB7CgkJCXZhciBfdjIwID0gX2Z1bmN0aW9uLmRvY3VtZW50YXRpb247CgkJCWlmIChfdjIwLiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQl9IGVsc2UgewoJCQkJdmFyIF92MjEgPSBfdjIwLmE7CgkJCQl2YXIgY29tbWVudCA9IF92MjEuYjsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHJlbW92ZVdyYXBwaW5nRnJvbU11bHRpbGluZUNvbW1lbnQoY29tbWVudCkpOwoJCQl9CgkJfSgpOwoJCXZhciBfdjEyID0gZnVuY3Rpb24gKCkgewoJCQl2YXIgX3YxMyA9IF9mdW5jdGlvbi5zaWduYXR1cmU7CgkJCWlmIChfdjEzLiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsIF9MaXN0X05pbCk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgX3YxNCA9IF92MTMuYTsKCQkJCXZhciBzaWduYXR1cmUgPSBfdjE0LmI7CgkJCQl2YXIgX3YxNSA9IHNpZ25hdHVyZS50eXBlQW5ub3RhdGlvbjsKCQkJCXZhciB0eXBlQW5ub3RhdGlvblJhbmdlID0gX3YxNS5hOwoJCQkJdmFyIF92MTYgPSBzaWduYXR1cmUubmFtZTsKCQkJCXZhciBuYW1lUmFuZ2VSZWNvcmQgPSBfdjE2LmE7CgkJCQl2YXIgbmFtZVJhbmdlID0gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRyYW5nZUZyb21SZWNvcmRSYW5nZShuYW1lUmFuZ2VSZWNvcmQpOwoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCQkJCQkJJyAnLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRzbGljZVJhbmdlRnJvbVRleHRMaW5lcywKCQkJCQkJCQl0ZXh0TGluZXMsCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkUmFuZ2UsCgkJCQkJCQkJCV9VdGlsc19UdXBsZTIodHlwZUFubm90YXRpb25SYW5nZS5zdGFydC5yb3csIHR5cGVBbm5vdGF0aW9uUmFuZ2Uuc3RhcnQuY29sdW1uKSwKCQkJCQkJCQkJX1V0aWxzX1R1cGxlMih0eXBlQW5ub3RhdGlvblJhbmdlLmVuZC5yb3csIHR5cGVBbm5vdGF0aW9uUmFuZ2UuZW5kLmNvbHVtbikpKSkpLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJW25hbWVSYW5nZV0pKTsKCQkJfQoJCX0oKTsKCQl2YXIgbWF5YmVUeXBlQW5ub3RhdGlvblRleHQgPSBfdjEyLmE7CgkJdmFyIHNpZ25hdHVyZU5hbWVSYW5nZXMgPSBfdjEyLmI7CgkJdmFyIF92MTcgPSBfZnVuY3Rpb24uZGVjbGFyYXRpb247CgkJdmFyIGZ1bmN0aW9uRGVjbGFyYXRpb24gPSBfdjE3LmI7CgkJdmFyIF92MTggPSBmdW5jdGlvbkRlY2xhcmF0aW9uLm5hbWU7CgkJdmFyIGZ1bmN0aW9uTmFtZVJhbmdlUmVjb3JkID0gX3YxOC5hOwoJCXZhciBmdW5jdGlvbk5hbWUgPSBfdjE4LmI7CgkJdmFyIGNvZGVMaW5lcyA9IGZ1bmN0aW9uICgpIHsKCQkJaWYgKG1heWJlVHlwZUFubm90YXRpb25UZXh0LiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbZnVuY3Rpb25OYW1lXSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgdHlwZUFubm90YXRpb25UZXh0ID0gbWF5YmVUeXBlQW5ub3RhdGlvblRleHQuYTsKCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGNvbmNhdCgKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJW2Z1bmN0aW9uTmFtZSwgJyA6ICcsIHR5cGVBbm5vdGF0aW9uVGV4dF0pKQoJCQkJCV0pOwoJCQl9CgkJfSgpOwoJCXZhciBmdW5jdGlvbk5hbWVSYW5nZSA9ICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmFuZ2VGcm9tUmVjb3JkUmFuZ2UoZnVuY3Rpb25OYW1lUmFuZ2VSZWNvcmQpOwoJCXZhciBmdW5jdGlvbkl0ZW0gPSAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJEZ1bmN0aW9uT3JWYWx1ZURlY2xhcmF0aW9uKAoJCQlfVXRpbHNfVHVwbGUyKAoJCQkJQTIoCgkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSREZWNsYXJhdGlvblJhbmdlLAoJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmFuZ2VGcm9tUmVjb3JkUmFuZ2UoZGVjbFJhbmdlKSwKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlzaWduYXR1cmVOYW1lUmFuZ2VzLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbZnVuY3Rpb25OYW1lUmFuZ2VdKQoJCQkJCQkJXSkpKSwKCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkQ29va2VkRG9jdW1lbnRhdGlvbigKCQkJCQlBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGRvY3VtZW50YXRpb25NYXJrZG93bkZyb21Db2RlTGluZXNBbmREb2N1bWVudGF0aW9uLCBjb2RlTGluZXMsIGRvY3VtZW50YXRpb25TdHJpbmdGcm9tU3ludGF4KSkpKTsKCQl2YXIgX2FyZ3VtZW50cyA9ICRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRpbmRleGVkTWFwLAoJCQkJRjIoCgkJCQkJZnVuY3Rpb24gKGFyZ3VtZW50SW5kZXgsIGFyZ3VtZW50KSB7CgkJCQkJCXJldHVybiBBMygKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0Zyb21QYXR0ZXJuLAoJCQkJCQkJc291cmNlQ29udGVudCwKCQkJCQkJCXsKCQkJCQkJCQl0eXBlQW5ub3RhdGlvbjogZ2V0VHlwZUFubm90YXRpb25Gcm9tQXJndW1lbnRJbmRleChhcmd1bWVudEluZGV4KQoJCQkJCQkJfSwKCQkJCQkJCWFyZ3VtZW50KTsKCQkJCQl9KSwKCQkJCWZ1bmN0aW9uRGVjbGFyYXRpb24uX2FyZ3VtZW50cykpOwoJCXZhciBleHByZXNzaW9uTm9kZSA9IGZ1bmN0aW9uRGVjbGFyYXRpb24uZXhwcmVzc2lvbjsKCQlyZXR1cm4gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJZnVuY3Rpb25OYW1lLAoJCQkJCQlfVXRpbHNfVHVwbGUyKGZ1bmN0aW9uSXRlbSwgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRUb3BMZXZlbFNjb3BlKSkKCQkJCQldKSwKCQkJCQlfYXJndW1lbnRzLAoJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0luRXhwcmVzc2lvbiwgc291cmNlQ29udGVudCwgZXhwcmVzc2lvbk5vZGUpCgkJCQldKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0luRXhwcmVzc2lvbiA9IEYyKAoJZnVuY3Rpb24gKHNvdXJjZUNvbnRlbnQsIF92MikgewoJCWxpc3REZWNsYXJhdGlvbnNJbkV4cHJlc3Npb246CgkJd2hpbGUgKHRydWUpIHsKCQkJdmFyIHJhbmdlUmVjb3JkID0gX3YyLmE7CgkJCXZhciBleHByZXNzaW9uID0gX3YyLmI7CgkJCXN3aXRjaCAoZXhwcmVzc2lvbi4kKSB7CgkJCQljYXNlICdVbml0RXhwcic6CgkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCWNhc2UgJ0FwcGxpY2F0aW9uJzoKCQkJCQl2YXIgYXBwbGljYXRpb24gPSBleHByZXNzaW9uLmE7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0luRXhwcmVzc2lvbihzb3VyY2VDb250ZW50KSwKCQkJCQkJYXBwbGljYXRpb24pOwoJCQkJY2FzZSAnT3BlcmF0b3JBcHBsaWNhdGlvbic6CgkJCQkJdmFyIGxlZnRFeHByID0gZXhwcmVzc2lvbi5jOwoJCQkJCXZhciByaWdodEV4cHIgPSBleHByZXNzaW9uLmQ7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0luRXhwcmVzc2lvbihzb3VyY2VDb250ZW50KSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJW2xlZnRFeHByLCByaWdodEV4cHJdKSk7CgkJCQljYXNlICdGdW5jdGlvbk9yVmFsdWUnOgoJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQljYXNlICdJZkJsb2NrJzoKCQkJCQl2YXIgaWZFeHByID0gZXhwcmVzc2lvbi5hOwoJCQkJCXZhciB0aGVuRXhwciA9IGV4cHJlc3Npb24uYjsKCQkJCQl2YXIgZWxzZUV4cHIgPSBleHByZXNzaW9uLmM7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0luRXhwcmVzc2lvbihzb3VyY2VDb250ZW50KSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJW2lmRXhwciwgdGhlbkV4cHIsIGVsc2VFeHByXSkpOwoJCQkJY2FzZSAnUHJlZml4T3BlcmF0b3InOgoJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQljYXNlICdPcGVyYXRvcic6CgkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCWNhc2UgJ0ludGVnZXInOgoJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQljYXNlICdIZXgnOgoJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQljYXNlICdGbG9hdGFibGUnOgoJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQljYXNlICdOZWdhdGlvbic6CgkJCQkJdmFyIG5lZ2F0aW9uID0gZXhwcmVzc2lvbi5hOwoJCQkJCXZhciAkdGVtcCRzb3VyY2VDb250ZW50ID0gc291cmNlQ29udGVudCwKCQkJCQkJJHRlbXAkX3YyID0gbmVnYXRpb247CgkJCQkJc291cmNlQ29udGVudCA9ICR0ZW1wJHNvdXJjZUNvbnRlbnQ7CgkJCQkJX3YyID0gJHRlbXAkX3YyOwoJCQkJCWNvbnRpbnVlIGxpc3REZWNsYXJhdGlvbnNJbkV4cHJlc3Npb247CgkJCQljYXNlICdMaXRlcmFsJzoKCQkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQkJY2FzZSAnQ2hhckxpdGVyYWwnOgoJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQljYXNlICdUdXBsZWRFeHByZXNzaW9uJzoKCQkJCQl2YXIgdHVwbGVkID0gZXhwcmVzc2lvbi5hOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3REZWNsYXJhdGlvbnNJbkV4cHJlc3Npb24oc291cmNlQ29udGVudCksCgkJCQkJCXR1cGxlZCk7CgkJCQljYXNlICdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbic6CgkJCQkJdmFyIHBhcmVudGhlc2l6ZWQgPSBleHByZXNzaW9uLmE7CgkJCQkJdmFyICR0ZW1wJHNvdXJjZUNvbnRlbnQgPSBzb3VyY2VDb250ZW50LAoJCQkJCQkkdGVtcCRfdjIgPSBwYXJlbnRoZXNpemVkOwoJCQkJCXNvdXJjZUNvbnRlbnQgPSAkdGVtcCRzb3VyY2VDb250ZW50OwoJCQkJCV92MiA9ICR0ZW1wJF92MjsKCQkJCQljb250aW51ZSBsaXN0RGVjbGFyYXRpb25zSW5FeHByZXNzaW9uOwoJCQkJY2FzZSAnTGV0RXhwcmVzc2lvbic6CgkJCQkJdmFyIGxldEJsb2NrID0gZXhwcmVzc2lvbi5hOwoJCQkJCXZhciBibG9ja1JhbmdlID0gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRyYW5nZUZyb21SZWNvcmRSYW5nZShyYW5nZVJlY29yZCk7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCWZ1bmN0aW9uIChfdjQpIHsKCQkJCQkJCXZhciBuYW1lID0gX3Y0LmE7CgkJCQkJCQl2YXIgX3Y1ID0gX3Y0LmI7CgkJCQkJCQl2YXIgZGVjbGFyYXRpb24gPSBfdjUuYTsKCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCW5hbWUsCgkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJZGVjbGFyYXRpb24sCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkTG9jYWxTY29wZShibG9ja1JhbmdlKSkpOwoJCQkJCQl9LAoJCQkJCQlBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3REZWNsYXJhdGlvbnNJbkxldEJsb2NrLCBzb3VyY2VDb250ZW50LCBsZXRCbG9jaykpOwoJCQkJY2FzZSAnQ2FzZUV4cHJlc3Npb24nOgoJCQkJCXZhciBjYXNlQmxvY2sgPSBleHByZXNzaW9uLmE7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0luRXhwcmVzc2lvbiwgc291cmNlQ29udGVudCwgY2FzZUJsb2NrLmV4cHJlc3Npb24pLAoJCQkJCQkJCUEyKAoJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJCQkJCQlmdW5jdGlvbiAoX3Y2KSB7CgkJCQkJCQkJCXZhciBjYXNlQnJhbmNoID0gX3Y2LmI7CgkJCQkJCQkJCXJldHVybiBBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3REZWNsYXJhdGlvbnNJbkV4cHJlc3Npb24sIHNvdXJjZUNvbnRlbnQsIGNhc2VCcmFuY2gpOwoJCQkJCQkJCX0sCgkJCQkJCQkJY2FzZUJsb2NrLmNhc2VzKQoJCQkJCQkJXSkpOwoJCQkJY2FzZSAnTGFtYmRhRXhwcmVzc2lvbic6CgkJCQkJdmFyIGxhbWJkYSA9IGV4cHJlc3Npb24uYTsKCQkJCQl2YXIgJHRlbXAkc291cmNlQ29udGVudCA9IHNvdXJjZUNvbnRlbnQsCgkJCQkJCSR0ZW1wJF92MiA9IGxhbWJkYS5leHByZXNzaW9uOwoJCQkJCXNvdXJjZUNvbnRlbnQgPSAkdGVtcCRzb3VyY2VDb250ZW50OwoJCQkJCV92MiA9ICR0ZW1wJF92MjsKCQkJCQljb250aW51ZSBsaXN0RGVjbGFyYXRpb25zSW5FeHByZXNzaW9uOwoJCQkJY2FzZSAnUmVjb3JkRXhwcic6CgkJCQkJdmFyIHJlY29yZEV4cHIgPSBleHByZXNzaW9uLmE7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsCgkJCQkJCWZ1bmN0aW9uIChfdjcpIHsKCQkJCQkJCXZhciBfdjggPSBfdjcuYjsKCQkJCQkJCXZhciByZWNvcmRGaWVsZCA9IF92OC5iOwoJCQkJCQkJcmV0dXJuIEEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0luRXhwcmVzc2lvbiwgc291cmNlQ29udGVudCwgcmVjb3JkRmllbGQpOwoJCQkJCQl9LAoJCQkJCQlyZWNvcmRFeHByKTsKCQkJCWNhc2UgJ0xpc3RFeHByJzoKCQkJCQl2YXIgbGlzdEV4cHIgPSBleHByZXNzaW9uLmE7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0luRXhwcmVzc2lvbihzb3VyY2VDb250ZW50KSwKCQkJCQkJbGlzdEV4cHIpOwoJCQkJY2FzZSAnUmVjb3JkQWNjZXNzJzoKCQkJCQl2YXIgcmVjb3JkQWNjZXNzID0gZXhwcmVzc2lvbi5hOwoJCQkJCXZhciAkdGVtcCRzb3VyY2VDb250ZW50ID0gc291cmNlQ29udGVudCwKCQkJCQkJJHRlbXAkX3YyID0gcmVjb3JkQWNjZXNzOwoJCQkJCXNvdXJjZUNvbnRlbnQgPSAkdGVtcCRzb3VyY2VDb250ZW50OwoJCQkJCV92MiA9ICR0ZW1wJF92MjsKCQkJCQljb250aW51ZSBsaXN0RGVjbGFyYXRpb25zSW5FeHByZXNzaW9uOwoJCQkJY2FzZSAnUmVjb3JkQWNjZXNzRnVuY3Rpb24nOgoJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQljYXNlICdSZWNvcmRVcGRhdGVFeHByZXNzaW9uJzoKCQkJCQl2YXIgX3Y5ID0gZXhwcmVzc2lvbi5hOwoJCQkJCXZhciByZWNvcmRVcGRhdGVFeHByZXNzaW9uID0gZXhwcmVzc2lvbi5iOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCQlmdW5jdGlvbiAoX3YxMCkgewoJCQkJCQkJdmFyIF92MTEgPSBfdjEwLmI7CgkJCQkJCQl2YXIgcmVjb3JkRmllbGQgPSBfdjExLmI7CgkJCQkJCQlyZXR1cm4gQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0RGVjbGFyYXRpb25zSW5FeHByZXNzaW9uLCBzb3VyY2VDb250ZW50LCByZWNvcmRGaWVsZCk7CgkJCQkJCX0sCgkJCQkJCXJlY29yZFVwZGF0ZUV4cHJlc3Npb24pOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQl9CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3REZWNsYXJhdGlvbnNJbkxldEJsb2NrID0gRjIoCglmdW5jdGlvbiAoc291cmNlQ29udGVudCwgbGV0QmxvY2spIHsKCQlyZXR1cm4gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbCgkJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0luTGV0RGVjbGFyYXRpb24oc291cmNlQ29udGVudCksCgkJCQkJbGV0QmxvY2suZGVjbGFyYXRpb25zKSwKCQkJCQlBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3REZWNsYXJhdGlvbnNJbkV4cHJlc3Npb24sIHNvdXJjZUNvbnRlbnQsIGxldEJsb2NrLmV4cHJlc3Npb24pCgkJCQldKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0luTGV0RGVjbGFyYXRpb24gPSBGMigKCWZ1bmN0aW9uIChzb3VyY2VDb250ZW50LCBkZWNsYXJhdGlvbk5vZGUpIHsKCQl2YXIgX3YwID0gZGVjbGFyYXRpb25Ob2RlOwoJCXZhciBkZWNsYXJhdGlvblJhbmdlID0gX3YwLmE7CgkJdmFyIGRlY2xhcmF0aW9uID0gX3YwLmI7CgkJaWYgKGRlY2xhcmF0aW9uLiQgPT09ICdMZXRGdW5jdGlvbicpIHsKCQkJdmFyIF9mdW5jdGlvbiA9IGRlY2xhcmF0aW9uLmE7CgkJCXJldHVybiBBMygkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3REZWNsYXJhdGlvbnNGb3JGdW5jdGlvbiwgc291cmNlQ29udGVudCwgZGVjbGFyYXRpb25SYW5nZSwgX2Z1bmN0aW9uKTsKCQl9IGVsc2UgewoJCQl2YXIgbGV0RGVzdHJ1Y3R1cmluZyA9IGRlY2xhcmF0aW9uLmI7CgkJCXJldHVybiBBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3REZWNsYXJhdGlvbnNJbkV4cHJlc3Npb24sIHNvdXJjZUNvbnRlbnQsIGxldERlc3RydWN0dXJpbmcpOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRDaG9pY2VUeXBlRGVjbGFyYXRpb24gPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnQ2hvaWNlVHlwZURlY2xhcmF0aW9uJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRlbG0kY29yZSRCYXNpY3MkYXBwZW5kID0gX1V0aWxzX2FwcGVuZDsKdmFyICRlbG1fY29tbXVuaXR5JGxpc3RfZXh0cmEkTGlzdCRFeHRyYSRkcm9wV2hpbGUgPSBGMigKCWZ1bmN0aW9uIChwcmVkaWNhdGUsIGxpc3QpIHsKCQlkcm9wV2hpbGU6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFsaXN0LmIpIHsKCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCX0gZWxzZSB7CgkJCQl2YXIgeCA9IGxpc3QuYTsKCQkJCXZhciB4cyA9IGxpc3QuYjsKCQkJCWlmIChwcmVkaWNhdGUoeCkpIHsKCQkJCQl2YXIgJHRlbXAkcHJlZGljYXRlID0gcHJlZGljYXRlLAoJCQkJCQkkdGVtcCRsaXN0ID0geHM7CgkJCQkJcHJlZGljYXRlID0gJHRlbXAkcHJlZGljYXRlOwoJCQkJCWxpc3QgPSAkdGVtcCRsaXN0OwoJCQkJCWNvbnRpbnVlIGRyb3BXaGlsZTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIGxpc3Q7CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRTdHJpbmckaXNFbXB0eSA9IGZ1bmN0aW9uIChzdHJpbmcpIHsKCXJldHVybiBzdHJpbmcgPT09ICcnOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0RGVjbGFyYXRpb25zRnJvbVR5cGVEZWNsYXJhdGlvbiA9IEYzKAoJZnVuY3Rpb24gKF92MCwgZGVjbGFyYXRpb25SYW5nZVJlY29yZCwgY2hvaWNlVHlwZURlY2xhcmF0aW9uKSB7CgkJdmFyIHRleHRMaW5lcyA9IF92MC5hOwoJCXZhciBkZWNsYXJhdGlvblJhbmdlID0gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRyYW5nZUZyb21SZWNvcmRSYW5nZShkZWNsYXJhdGlvblJhbmdlUmVjb3JkKTsKCQl2YXIgX3YxID0gZGVjbGFyYXRpb25SYW5nZTsKCQl2YXIgZGVjbGFyYXRpb25SYW5nZUVuZCA9IF92MS5iOwoJCXZhciBfdjIgPSBmdW5jdGlvbiAoKSB7CgkJCXZhciBfdjMgPSBjaG9pY2VUeXBlRGVjbGFyYXRpb24uZG9jdW1lbnRhdGlvbjsKCQkJaWYgKF92My4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKCRlbG0kY29yZSRNYXliZSROb3RoaW5nLCBkZWNsYXJhdGlvblJhbmdlKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBfdjQgPSBfdjMuYTsKCQkJCXZhciBjb21tZW50UmFuZ2VSZWNvcmQgPSBfdjQuYTsKCQkJCXZhciBjb21tZW50ID0gX3Y0LmI7CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRyZW1vdmVXcmFwcGluZ0Zyb21NdWx0aWxpbmVDb21tZW50KGNvbW1lbnQpKSwKCQkJCQlBMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRSYW5nZSwKCQkJCQkJX1V0aWxzX1R1cGxlMihjb21tZW50UmFuZ2VSZWNvcmQuZW5kLnJvdyArIDEsIDEpLAoJCQkJCQlkZWNsYXJhdGlvblJhbmdlRW5kKSk7CgkJCX0KCQl9KCk7CgkJdmFyIGRvY3VtZW50YXRpb25TdHJpbmdGcm9tU3ludGF4ID0gX3YyLmE7CgkJdmFyIHJhbmdlTGVzc0RvY3VtZW50YXRpb24gPSBfdjIuYjsKCQl2YXIgY29kZVJhbmdlID0gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRleHBhbmRSYW5nZVRvTGluZVN0YXJ0KHJhbmdlTGVzc0RvY3VtZW50YXRpb24pOwoJCXZhciBjaG9pY2VUeXBlQ29kZUxpbmVzID0gQTIoCgkJCSRlbG1fY29tbXVuaXR5JGxpc3RfZXh0cmEkTGlzdCRFeHRyYSRkcm9wV2hpbGUsCgkJCSRlbG0kY29yZSRTdHJpbmckaXNFbXB0eSwKCQkJQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRzbGljZVJhbmdlRnJvbVRleHRMaW5lcywgdGV4dExpbmVzLCBjb2RlUmFuZ2UpKTsKCQl2YXIgX3Y1ID0gY2hvaWNlVHlwZURlY2xhcmF0aW9uLm5hbWU7CgkJdmFyIG5hbWVSYW5nZVJlY29yZCA9IF92NS5hOwoJCXZhciBjaG9pY2VUeXBlTmFtZSA9IF92NS5iOwoJCXZhciB0YWdzRGVjbGFyYXRpb25zID0gQTIoCgkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJZnVuY3Rpb24gKF92NikgewoJCQkJdmFyIGNvbnN0cnVjdG9yUmFuZ2VSZWNvcmQgPSBfdjYuYTsKCQkJCXZhciBjb25zdHJ1Y3RvciA9IF92Ni5iOwoJCQkJdmFyIHdob2xlQ29uc3RydWN0b3JSYW5nZSA9ICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmFuZ2VGcm9tUmVjb3JkUmFuZ2UoY29uc3RydWN0b3JSYW5nZVJlY29yZCk7CgkJCQl2YXIgX3Y3ID0gY29uc3RydWN0b3IubmFtZTsKCQkJCXZhciB0YWdOYW1lUmVjb3JkUmFuZ2UgPSBfdjcuYTsKCQkJCXZhciB0YWdOYW1lID0gX3Y3LmI7CgkJCQl2YXIgdGFnTmFtZVJhbmdlID0gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRyYW5nZUZyb21SZWNvcmRSYW5nZSh0YWdOYW1lUmVjb3JkUmFuZ2UpOwoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJdGFnTmFtZSwKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQlBMigKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkRGVjbGFyYXRpb25SYW5nZSwKCQkJCQkJCXdob2xlQ29uc3RydWN0b3JSYW5nZSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbdGFnTmFtZVJhbmdlXSkpLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJENvb2tlZERvY3VtZW50YXRpb24oCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQkJJ1xuXG4nLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJWwoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRtYXJrZG93bkVsbUNvZGVCbG9ja0Zyb21Db2RlTGluZXMoCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJW3RhZ05hbWVdKSksCgkJCQkJCQkJCQknQSB2YXJpYW50IG9mIHRoZSBjaG9pY2UgdHlwZSBgJyArIChjaG9pY2VUeXBlTmFtZSArICdgJyksCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJG1hcmtkb3duRWxtQ29kZUJsb2NrRnJvbUNvZGVMaW5lcyhjaG9pY2VUeXBlQ29kZUxpbmVzKQoJCQkJCQkJCQldKSkpKSk7CgkJCX0sCgkJCWNob2ljZVR5cGVEZWNsYXJhdGlvbi5jb25zdHJ1Y3RvcnMpOwoJCXZhciBuYW1lUmFuZ2UgPSAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHJhbmdlRnJvbVJlY29yZFJhbmdlKG5hbWVSYW5nZVJlY29yZCk7CgkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCWNob2ljZVR5cGVOYW1lLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQlBMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRDaG9pY2VUeXBlRGVjbGFyYXRpb24sCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQlBMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJERlY2xhcmF0aW9uUmFuZ2UsCgkJCQkJCQkJY29kZVJhbmdlLAoJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJW25hbWVSYW5nZV0pKSwKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkQ29va2VkRG9jdW1lbnRhdGlvbigKCQkJCQkJCQlBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGRvY3VtZW50YXRpb25NYXJrZG93bkZyb21Db2RlTGluZXNBbmREb2N1bWVudGF0aW9uLCBjaG9pY2VUeXBlQ29kZUxpbmVzLCBkb2N1bWVudGF0aW9uU3RyaW5nRnJvbVN5bnRheCkpKSwKCQkJCQkJdGFnc0RlY2xhcmF0aW9ucyksCgkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRUb3BMZXZlbFNjb3BlKSkKCQkJXSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0luRGVjbGFyYXRpb24gPSBGMigKCWZ1bmN0aW9uIChzb3VyY2VDb250ZW50LCBfdjApIHsKCQl2YXIgZGVjbGFyYXRpb25SYW5nZSA9IF92MC5hOwoJCXZhciBkZWNsYXJhdGlvbiA9IF92MC5iOwoJCXN3aXRjaCAoZGVjbGFyYXRpb24uJCkgewoJCQljYXNlICdGdW5jdGlvbkRlY2xhcmF0aW9uJzoKCQkJCXZhciBfZnVuY3Rpb24gPSBkZWNsYXJhdGlvbi5hOwoJCQkJcmV0dXJuIEEzKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0ZvckZ1bmN0aW9uLCBzb3VyY2VDb250ZW50LCBkZWNsYXJhdGlvblJhbmdlLCBfZnVuY3Rpb24pOwoJCQljYXNlICdBbGlhc0RlY2xhcmF0aW9uJzoKCQkJCXZhciBhbGlhc0RlY2xhcmF0aW9uID0gZGVjbGFyYXRpb24uYTsKCQkJCXJldHVybiBBMygkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGRlY2xhcmF0aW9uc0ZvckFsaWFzRGVjbGFyYXRpb24sIHNvdXJjZUNvbnRlbnQsIGRlY2xhcmF0aW9uUmFuZ2UsIGFsaWFzRGVjbGFyYXRpb24pOwoJCQljYXNlICdDdXN0b21UeXBlRGVjbGFyYXRpb24nOgoJCQkJdmFyIGNob2ljZVR5cGVEZWNsYXJhdGlvbiA9IGRlY2xhcmF0aW9uLmE7CgkJCQlyZXR1cm4gQTMoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0RGVjbGFyYXRpb25zRnJvbVR5cGVEZWNsYXJhdGlvbiwgc291cmNlQ29udGVudCwgZGVjbGFyYXRpb25SYW5nZSwgY2hvaWNlVHlwZURlY2xhcmF0aW9uKTsKCQkJY2FzZSAnUG9ydERlY2xhcmF0aW9uJzoKCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCWNhc2UgJ0luZml4RGVjbGFyYXRpb24nOgoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3REZWNsYXJhdGlvbnNJbkZpbGUgPSBGMigKCWZ1bmN0aW9uIChmaWxlU3ludGF4LCBzb3VyY2VDb250ZW50KSB7CgkJcmV0dXJuIEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsCgkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdERlY2xhcmF0aW9uc0luRGVjbGFyYXRpb24oc291cmNlQ29udGVudCksCgkJCWZpbGVTeW50YXguZGVjbGFyYXRpb25zKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRjb21wbGV0aW9uSXRlbXNGcm9tTW9kdWxlID0gZnVuY3Rpb24gKG1vZHVsZUNhY2hlKSB7Cgl2YXIgdGV4dExpbmVzID0gJGVsbSRjb3JlJFN0cmluZyRsaW5lcyhtb2R1bGVDYWNoZS50ZXh0KTsKCXZhciBjb29rZWREZWNsYXJhdGlvbnMgPSBBMigKCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3REZWNsYXJhdGlvbnNJbkZpbGUsCgkJbW9kdWxlQ2FjaGUuc3ludGF4LAoJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkU291cmNlQ29udGVudEZvckNvb2tpbmcodGV4dExpbmVzKSk7Cgl2YXIgZnJvbUxvY2FscyA9IEEyKAoJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQlmdW5jdGlvbiAoX3Y4KSB7CgkJCXZhciBkZWNsTmFtZSA9IF92OC5hOwoJCQl2YXIgX3Y5ID0gX3Y4LmI7CgkJCXZhciBkZWNsT3JSZWYgPSBfdjkuYTsKCQkJdmFyIHNjb3BlID0gX3Y5LmI7CgkJCWlmIChzY29wZS4kID09PSAnVG9wTGV2ZWxTY29wZScpIHsKCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCX0gZWxzZSB7CgkJCQl2YXIgc2NvcGVSYW5nZSA9IHNjb3BlLmE7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCWZ1bmN0aW9uIChfdjExKSB7CgkJCQkJCXZhciBjb21wbGV0aW9uSXRlbSA9IF92MTEuYTsKCQkJCQkJdmFyIGRlY2xSYW5nZUlubmVyID0gX3YxMS5iOwoJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMyhjb21wbGV0aW9uSXRlbSwgZGVjbFJhbmdlSW5uZXIsIHNjb3BlUmFuZ2UpOwoJCQkJCX0sCgkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRjb21wbGV0aW9uSXRlbXNGcm9tUGFyc2VkRGVjbGFyYXRpb24sIGRlY2xOYW1lLCBkZWNsT3JSZWYpKTsKCQkJfQoJCX0sCgkJY29va2VkRGVjbGFyYXRpb25zKTsKCXZhciBfdjAgPSBtb2R1bGVDYWNoZS5zeW50YXgubW9kdWxlRGVmaW5pdGlvbjsKCXZhciBtb2R1bGVEZWZpbml0aW9uID0gX3YwLmI7Cgl2YXIgZXhwb3NpbmdMaXN0Tm9kZSA9IGZ1bmN0aW9uICgpIHsKCQlzd2l0Y2ggKG1vZHVsZURlZmluaXRpb24uJCkgewoJCQljYXNlICdFZmZlY3RNb2R1bGUnOgoJCQkJdmFyIGVmZmVjdE1vZHVsZSA9IG1vZHVsZURlZmluaXRpb24uYTsKCQkJCXJldHVybiBlZmZlY3RNb2R1bGUuZXhwb3NpbmdMaXN0OwoJCQljYXNlICdOb3JtYWxNb2R1bGUnOgoJCQkJdmFyIG5vcm1hbE1vZHVsZSA9IG1vZHVsZURlZmluaXRpb24uYTsKCQkJCXJldHVybiBub3JtYWxNb2R1bGUuZXhwb3NpbmdMaXN0OwoJCQlkZWZhdWx0OgoJCQkJdmFyIHBvcnRNb2R1bGUgPSBtb2R1bGVEZWZpbml0aW9uLmE7CgkJCQlyZXR1cm4gcG9ydE1vZHVsZS5leHBvc2luZ0xpc3Q7CgkJfQoJfSgpOwoJdmFyIF92MSA9IGV4cG9zaW5nTGlzdE5vZGU7Cgl2YXIgZXhwb3NpbmdMaXN0ID0gX3YxLmI7Cgl2YXIgZnJvbVRvcExldmVsID0gQTIoCgkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCWZ1bmN0aW9uIChfdjIpIHsKCQkJdmFyIGRlY2xOYW1lID0gX3YyLmE7CgkJCXZhciBfdjMgPSBfdjIuYjsKCQkJdmFyIGRlY2xPclJlZiA9IF92My5hOwoJCQl2YXIgc2NvcGUgPSBfdjMuYjsKCQkJaWYgKHNjb3BlLiQgPT09ICdUb3BMZXZlbFNjb3BlJykgewoJCQkJdmFyIGlzRXhwb3NlZCA9IGZ1bmN0aW9uICgpIHsKCQkJCQlzd2l0Y2ggKGRlY2xPclJlZi4kKSB7CgkJCQkJCWNhc2UgJ0Z1bmN0aW9uT3JWYWx1ZURlY2xhcmF0aW9uJzoKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHBvc2luZyRleHBvc2VzRnVuY3Rpb24sIGRlY2xOYW1lLCBleHBvc2luZ0xpc3QpOwoJCQkJCQljYXNlICdUeXBlQWxpYXNEZWNsYXJhdGlvbic6CgkJCQkJCQlyZXR1cm4gQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRleHBvc2luZ0xpc3RFeHBvc2VzVHlwZU9yQWxpYXMsIGRlY2xOYW1lLCBleHBvc2luZ0xpc3QpOwoJCQkJCQlkZWZhdWx0OgoJCQkJCQkJcmV0dXJuIEEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkZXhwb3NpbmdMaXN0RXhwb3Nlc1R5cGVPckFsaWFzLCBkZWNsTmFtZSwgZXhwb3NpbmdMaXN0KTsKCQkJCQl9CgkJCQl9KCk7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCWZ1bmN0aW9uIChfdjUpIHsKCQkJCQkJdmFyIGNvbXBsZXRpb25JdGVtID0gX3Y1LmE7CgkJCQkJCXZhciBkZWNsUmFuZ2VJbm5lciA9IF92NS5iOwoJCQkJCQlyZXR1cm4ge2NvbXBsZXRpb25JdGVtOiBjb21wbGV0aW9uSXRlbSwgaXNFeHBvc2VkOiBpc0V4cG9zZWQsIHJhbmdlOiBkZWNsUmFuZ2VJbm5lcn07CgkJCQkJfSwKCQkJCQlBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGNvbXBsZXRpb25JdGVtc0Zyb21QYXJzZWREZWNsYXJhdGlvbiwgZGVjbE5hbWUsIGRlY2xPclJlZikpOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJfQoJCX0sCgkJY29va2VkRGVjbGFyYXRpb25zKTsKCXJldHVybiB7ZnJvbUxvY2FsczogZnJvbUxvY2FscywgZnJvbVRvcExldmVsOiBmcm9tVG9wTGV2ZWx9Owp9Owp2YXIgJGVsbSRjb3JlJERpY3QkUkJFbXB0eV9lbG1fYnVpbHRpbiA9IHskOiAnUkJFbXB0eV9lbG1fYnVpbHRpbid9Owp2YXIgJGVsbSRjb3JlJERpY3QkZW1wdHkgPSAkZWxtJGNvcmUkRGljdCRSQkVtcHR5X2VsbV9idWlsdGluOwp2YXIgJGVsbSRjb3JlJExpc3QkbWF5YmVDb25zID0gRjMoCglmdW5jdGlvbiAoZiwgbXgsIHhzKSB7CgkJdmFyIF92MCA9IGYobXgpOwoJCWlmIChfdjAuJCA9PT0gJ0p1c3QnKSB7CgkJCXZhciB4ID0gX3YwLmE7CgkJCXJldHVybiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCB4LCB4cyk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIHhzOwoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwID0gRjIoCglmdW5jdGlvbiAoZiwgeHMpIHsKCQlyZXR1cm4gQTMoCgkJCSRlbG0kY29yZSRMaXN0JGZvbGRyLAoJCQkkZWxtJGNvcmUkTGlzdCRtYXliZUNvbnMoZiksCgkJCV9MaXN0X05pbCwKCQkJeHMpOwoJfSk7CnZhciAkZWxtJGNvcmUkTWF5YmUkbWFwID0gRjIoCglmdW5jdGlvbiAoZiwgbWF5YmUpIHsKCQlpZiAobWF5YmUuJCA9PT0gJ0p1c3QnKSB7CgkJCXZhciB2YWx1ZSA9IG1heWJlLmE7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCWYodmFsdWUpKTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSA9ICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRGVjbGFyYXRpb24kQWxpYXNEZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdBbGlhc0RlY2xhcmF0aW9uJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREZWNsYXJhdGlvbiRDdXN0b21UeXBlRGVjbGFyYXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnQ3VzdG9tVHlwZURlY2xhcmF0aW9uJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREZWNsYXJhdGlvbiRGdW5jdGlvbkRlY2xhcmF0aW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0Z1bmN0aW9uRGVjbGFyYXRpb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdOb2RlJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJFBvcnREZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQb3J0RGVjbGFyYXRpb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFNpZ25hdHVyZSRTaWduYXR1cmUgPSBGMigKCWZ1bmN0aW9uIChuYW1lLCB0eXBlQW5ub3RhdGlvbikgewoJCXJldHVybiB7bmFtZTogbmFtZSwgdHlwZUFubm90YXRpb246IHR5cGVBbm5vdGF0aW9ufTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRjb21iaW5lID0gRjMoCglmdW5jdGlvbiAoZiwgYSwgYikgewoJCXZhciBzdGFydCA9IGEuYS5zdGFydDsKCQl2YXIgZW5kID0gYi5hLmVuZDsKCQlyZXR1cm4gQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJe2VuZDogZW5kLCBzdGFydDogc3RhcnR9LAoJCQlBMihmLCBhLCBiKSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JERvbmUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRG9uZScsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkTG9vcCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdMb29wJywgYTogYX07Cn07CnZhciAkZWxtJGNvcmUkQmFzaWNzJGFuZCA9IF9CYXNpY3NfYW5kOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0JhZCcsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdBbnlDaGFyID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0V4cGVjdGluZ0FueUNoYXInLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdHb29kJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlciA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQYXJzZXInLCBhOiBhfTsKfTsKdmFyICRlbG0kY29yZSRTdHJpbmckYW55ID0gX1N0cmluZ19hbnk7CnZhciAkZWxtJGNvcmUkQmFzaWNzJGlzTmFOID0gX0Jhc2ljc19pc05hTjsKdmFyICRlbG0kY29yZSRDaGFyJHRvQ29kZSA9IF9DaGFyX3RvQ29kZTsKdmFyICRlbG0kY29yZSRCYXNpY3MkdG9GbG9hdCA9IF9CYXNpY3NfdG9GbG9hdDsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGlzVXRmMTZTdXJyb2dhdGUgPSBmdW5jdGlvbiAoYykgewoJcmV0dXJuICRlbG0kY29yZSRCYXNpY3MkaXNOYU4oCgkJJGVsbSRjb3JlJENoYXIkdG9Db2RlKGMpKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNoYXJTdHJpbmdJc1V0ZjE2SGlnaFN1cnJvZ2F0ZSA9IGZ1bmN0aW9uIChjaGFyU3RyaW5nKSB7CglyZXR1cm4gQTIoJGVsbSRjb3JlJFN0cmluZyRhbnksICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGlzVXRmMTZTdXJyb2dhdGUsIGNoYXJTdHJpbmcpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY2hhck9yRW5kID0gRjIoCglmdW5jdGlvbiAob2Zmc2V0LCBzdHJpbmcpIHsKCQl2YXIgYWN0dWFsQ2hhciA9IEEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMSwgc3RyaW5nKTsKCQlzd2l0Y2ggKGFjdHVhbENoYXIpIHsKCQkJY2FzZSAnXG4nOgoJCQkJcmV0dXJuIC0yOwoJCQljYXNlICcnOgoJCQkJcmV0dXJuIC0xOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNoYXJTdHJpbmdJc1V0ZjE2SGlnaFN1cnJvZ2F0ZShhY3R1YWxDaGFyKSA/IChvZmZzZXQgKyAyKSA6IChvZmZzZXQgKyAxKTsKCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZUhlbHAgPSBGNigKCWZ1bmN0aW9uIChpc0dvb2QsIG9mZnNldCwgcm93LCBjb2wsIHNyYywgaW5kZW50KSB7CgkJc2tpcFdoaWxlSGVscDoKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgYWN0dWFsQ2hhciA9IEEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJaWYgKEEyKCRlbG0kY29yZSRTdHJpbmckYW55LCBpc0dvb2QsIGFjdHVhbENoYXIpKSB7CgkJCQlpZiAoYWN0dWFsQ2hhciA9PT0gJ1xuJykgewoJCQkJCXZhciAkdGVtcCRpc0dvb2QgPSBpc0dvb2QsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHJvdyA9IHJvdyArIDEsCgkJCQkJCSR0ZW1wJGNvbCA9IDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYywKCQkJCQkJJHRlbXAkaW5kZW50ID0gaW5kZW50OwoJCQkJCWlzR29vZCA9ICR0ZW1wJGlzR29vZDsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJcm93ID0gJHRlbXAkcm93OwoJCQkJCWNvbCA9ICR0ZW1wJGNvbDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJaW5kZW50ID0gJHRlbXAkaW5kZW50OwoJCQkJCWNvbnRpbnVlIHNraXBXaGlsZUhlbHA7CgkJCQl9IGVsc2UgewoJCQkJCXZhciAkdGVtcCRpc0dvb2QgPSBpc0dvb2QsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHJvdyA9IHJvdywKCQkJCQkJJHRlbXAkY29sID0gY29sICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjLAoJCQkJCQkkdGVtcCRpbmRlbnQgPSBpbmRlbnQ7CgkJCQkJaXNHb29kID0gJHRlbXAkaXNHb29kOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlyb3cgPSAkdGVtcCRyb3c7CgkJCQkJY29sID0gJHRlbXAkY29sOwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQlpbmRlbnQgPSAkdGVtcCRpbmRlbnQ7CgkJCQkJY29udGludWUgc2tpcFdoaWxlSGVscDsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWlmICgkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjaGFyU3RyaW5nSXNVdGYxNkhpZ2hTdXJyb2dhdGUoYWN0dWFsQ2hhcikgJiYgQTIoCgkJCQkJJGVsbSRjb3JlJFN0cmluZyRhbnksCgkJCQkJaXNHb29kLAoJCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMiwgc3JjKSkpIHsKCQkJCQl2YXIgJHRlbXAkaXNHb29kID0gaXNHb29kLAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAyLAoJCQkJCQkkdGVtcCRyb3cgPSByb3csCgkJCQkJCSR0ZW1wJGNvbCA9IGNvbCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYywKCQkJCQkJJHRlbXAkaW5kZW50ID0gaW5kZW50OwoJCQkJCWlzR29vZCA9ICR0ZW1wJGlzR29vZDsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJcm93ID0gJHRlbXAkcm93OwoJCQkJCWNvbCA9ICR0ZW1wJGNvbDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJaW5kZW50ID0gJHRlbXAkaW5kZW50OwoJCQkJCWNvbnRpbnVlIHNraXBXaGlsZUhlbHA7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiB7Y29sOiBjb2wsIGluZGVudDogaW5kZW50LCBvZmZzZXQ6IG9mZnNldCwgcm93OiByb3csIHNyYzogc3JjfTsKCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkYW55Q2hhckZvbGxvd2VkQnlXaGlsZU1hcCA9IEYyKAoJZnVuY3Rpb24gKGNvbnN1bWVkU3RyaW5nVG9SZXMsIGFmdGVyRmlyc3RJc09rYXkpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIGZpcnN0T2Zmc2V0ID0gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY2hhck9yRW5kLCBzLm9mZnNldCwgcy5zcmMpOwoJCQkJaWYgKF9VdGlsc19lcShmaXJzdE9mZnNldCwgLTEpKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCWZhbHNlLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdBbnlDaGFyLCBzLnJvdywgcy5jb2wpKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHMxID0gX1V0aWxzX2VxKGZpcnN0T2Zmc2V0LCAtMikgPyBBNigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwV2hpbGVIZWxwLCBhZnRlckZpcnN0SXNPa2F5LCBzLm9mZnNldCArIDEsIHMucm93ICsgMSwgMSwgcy5zcmMsIHMuaW5kZW50KSA6IEE2KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZUhlbHAsIGFmdGVyRmlyc3RJc09rYXksIGZpcnN0T2Zmc2V0LCBzLnJvdywgcy5jb2wgKyAxLCBzLnNyYywgcy5pbmRlbnQpOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJY29uc3VtZWRTdHJpbmdUb1JlcygKCQkJCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIHMub2Zmc2V0LCBzMS5vZmZzZXQsIHMuc3JjKSksCgkJCQkJCXMxKTsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRlbG0kY29yZSRTdHJpbmckY29ucyA9IF9TdHJpbmdfY29uczsKdmFyICRlbG0kY29yZSRCYXNpY3Mkb3IgPSBfQmFzaWNzX29yOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcEhlbHAgPSBGNSgKCWZ1bmN0aW9uIChjb21taXR0ZWRTb0Zhciwgc3RhdGUsIGVsZW1lbnQsIHJlZHVjZSwgczApIHsKCQlsb29wSGVscDoKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgcGFyc2VFbGVtZW50ID0gZWxlbWVudC5hOwoJCQl2YXIgX3YwID0gcGFyc2VFbGVtZW50KHMwKTsKCQkJaWYgKF92MC4kID09PSAnR29vZCcpIHsKCQkJCXZhciBzdGVwID0gX3YwLmE7CgkJCQl2YXIgczEgPSBfdjAuYjsKCQkJCXZhciBfdjEgPSBBMihyZWR1Y2UsIHN0ZXAsIHN0YXRlKTsKCQkJCWlmIChfdjEuJCA9PT0gJ0xvb3AnKSB7CgkJCQkJdmFyIG5ld1N0YXRlID0gX3YxLmE7CgkJCQkJdmFyICR0ZW1wJGNvbW1pdHRlZFNvRmFyID0gdHJ1ZSwKCQkJCQkJJHRlbXAkc3RhdGUgPSBuZXdTdGF0ZSwKCQkJCQkJJHRlbXAkZWxlbWVudCA9IGVsZW1lbnQsCgkJCQkJCSR0ZW1wJHJlZHVjZSA9IHJlZHVjZSwKCQkJCQkJJHRlbXAkczAgPSBzMTsKCQkJCQljb21taXR0ZWRTb0ZhciA9ICR0ZW1wJGNvbW1pdHRlZFNvRmFyOwoJCQkJCXN0YXRlID0gJHRlbXAkc3RhdGU7CgkJCQkJZWxlbWVudCA9ICR0ZW1wJGVsZW1lbnQ7CgkJCQkJcmVkdWNlID0gJHRlbXAkcmVkdWNlOwoJCQkJCXMwID0gJHRlbXAkczA7CgkJCQkJY29udGludWUgbG9vcEhlbHA7CgkJCQl9IGVsc2UgewoJCQkJCXZhciByZXN1bHQgPSBfdjEuYTsKCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwgcmVzdWx0LCBzMSk7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQl2YXIgZWxlbWVudENvbW1pdHRlZCA9IF92MC5hOwoJCQkJdmFyIHggPSBfdjAuYjsKCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZFNvRmFyIHx8IGVsZW1lbnRDb21taXR0ZWQsIHgpOwoJCQl9CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wID0gRjMoCglmdW5jdGlvbiAoc3RhdGUsIGVsZW1lbnQsIHJlZHVjZSkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQlyZXR1cm4gQTUoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcEhlbHAsIGZhbHNlLCBzdGF0ZSwgZWxlbWVudCwgcmVkdWNlLCBzKTsKCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJXaXRoUmFuZ2UgPSBGMygKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSkgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgX3YyID0gcGFyc2VBKHMwKTsKCQkJCWlmIChfdjIuJCA9PT0gJ0JhZCcpIHsKCQkJCQl2YXIgY29tbWl0dGVkID0gX3YyLmE7CgkJCQkJdmFyIHggPSBfdjIuYjsKCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBjb21taXR0ZWQsIHgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYSA9IF92Mi5hOwoJCQkJCXZhciBzMSA9IF92Mi5iOwoJCQkJCXZhciBfdjMgPSBwYXJzZUIoczEpOwoJCQkJCWlmIChfdjMuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJdmFyIHggPSBfdjMuYjsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGIgPSBfdjMuYTsKCQkJCQkJdmFyIHMyID0gX3YzLmI7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQlBMygKCQkJCQkJCQlmdW5jLAoJCQkJCQkJCXsKCQkJCQkJCQkJZW5kOiB7Y29sdW1uOiBzMi5jb2wsIHJvdzogczIucm93fSwKCQkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJCQkJfSwKCQkJCQkJCQlhLAoJCQkJCQkJCWIpLAoJCQkJCQkJczIpOwoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRlbG0kY29yZSRCYXNpY3MkbmVxID0gX1V0aWxzX25vdEVxdWFsOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRub3QgPSBfQmFzaWNzX25vdDsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ09uZU9mID0gRjMoCglmdW5jdGlvbiAoYSwgYiwgYykgewoJCXJldHVybiB7JDogJ0V4cGVjdGluZ09uZU9mJywgYTogYSwgYjogYiwgYzogY307Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiA9IEYyKAoJZnVuY3Rpb24gKF92MCwgX3YxKSB7CgkJdmFyIGF0dGVtcHRGaXJzdCA9IF92MC5hOwoJCXZhciBhdHRlbXB0U2Vjb25kID0gX3YxLmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBfdjIgPSBhdHRlbXB0Rmlyc3Qocyk7CgkJCQlpZiAoX3YyLiQgPT09ICdHb29kJykgewoJCQkJCXZhciBmaXJzdEdvb2QgPSBfdjI7CgkJCQkJcmV0dXJuIGZpcnN0R29vZDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGZpcnN0QmFkID0gX3YyOwoJCQkJCXZhciBmaXJzdENvbW1pdHRlZCA9IGZpcnN0QmFkLmE7CgkJCQkJdmFyIGZpcnN0WCA9IGZpcnN0QmFkLmI7CgkJCQkJaWYgKGZpcnN0Q29tbWl0dGVkKSB7CgkJCQkJCXJldHVybiBmaXJzdEJhZDsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgX3YzID0gYXR0ZW1wdFNlY29uZChzKTsKCQkJCQkJaWYgKF92My4kID09PSAnR29vZCcpIHsKCQkJCQkJCXZhciBzZWNvbmRHb29kID0gX3YzOwoJCQkJCQkJcmV0dXJuIHNlY29uZEdvb2Q7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgc2Vjb25kQmFkID0gX3YzOwoJCQkJCQkJdmFyIHNlY29uZENvbW1pdHRlZCA9IHNlY29uZEJhZC5hOwoJCQkJCQkJdmFyIHNlY29uZFggPSBzZWNvbmRCYWQuYjsKCQkJCQkJCXJldHVybiBzZWNvbmRDb21taXR0ZWQgPyBzZWNvbmRCYWQgOiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCQkJZmFsc2UsCgkJCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nT25lT2YsIGZpcnN0WCwgc2Vjb25kWCwgX0xpc3RfTmlsKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjMgPSBGMygKCWZ1bmN0aW9uIChfdjAsIF92MSwgX3YyKSB7CgkJdmFyIGF0dGVtcHRGaXJzdCA9IF92MC5hOwoJCXZhciBhdHRlbXB0U2Vjb25kID0gX3YxLmE7CgkJdmFyIGF0dGVtcHRUaGlyZCA9IF92Mi5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQl2YXIgX3YzID0gYXR0ZW1wdEZpcnN0KHMpOwoJCQkJaWYgKF92My4kID09PSAnR29vZCcpIHsKCQkJCQl2YXIgZmlyc3RHb29kID0gX3YzOwoJCQkJCXJldHVybiBmaXJzdEdvb2Q7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBmaXJzdEJhZCA9IF92MzsKCQkJCQl2YXIgZmlyc3RDb21taXR0ZWQgPSBmaXJzdEJhZC5hOwoJCQkJCXZhciBmaXJzdFggPSBmaXJzdEJhZC5iOwoJCQkJCWlmIChmaXJzdENvbW1pdHRlZCkgewoJCQkJCQlyZXR1cm4gZmlyc3RCYWQ7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIF92NCA9IGF0dGVtcHRTZWNvbmQocyk7CgkJCQkJCWlmIChfdjQuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQl2YXIgc2Vjb25kR29vZCA9IF92NDsKCQkJCQkJCXJldHVybiBzZWNvbmRHb29kOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIHNlY29uZEJhZCA9IF92NDsKCQkJCQkJCXZhciBzZWNvbmRDb21taXR0ZWQgPSBzZWNvbmRCYWQuYTsKCQkJCQkJCXZhciBzZWNvbmRYID0gc2Vjb25kQmFkLmI7CgkJCQkJCQlpZiAoc2Vjb25kQ29tbWl0dGVkKSB7CgkJCQkJCQkJcmV0dXJuIHNlY29uZEJhZDsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIF92NSA9IGF0dGVtcHRUaGlyZChzKTsKCQkJCQkJCQlpZiAoX3Y1LiQgPT09ICdHb29kJykgewoJCQkJCQkJCQl2YXIgdGhpcmRHb29kID0gX3Y1OwoJCQkJCQkJCQlyZXR1cm4gdGhpcmRHb29kOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciB0aGlyZEJhZCA9IF92NTsKCQkJCQkJCQkJdmFyIHRoaXJkQ29tbWl0dGVkID0gdGhpcmRCYWQuYTsKCQkJCQkJCQkJdmFyIHRoaXJkWCA9IHRoaXJkQmFkLmI7CgkJCQkJCQkJCXJldHVybiB0aGlyZENvbW1pdHRlZCA/IHRoaXJkQmFkIDogQTIoCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCQkJCQlmYWxzZSwKCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ09uZU9mLAoJCQkJCQkJCQkJCWZpcnN0WCwKCQkJCQkJCQkJCQlzZWNvbmRYLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJW3RoaXJkWF0pKSk7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nU3ltYm9sID0gRjMoCglmdW5jdGlvbiAoYSwgYiwgYykgewoJCXJldHVybiB7JDogJ0V4cGVjdGluZ1N5bWJvbCcsIGE6IGEsIGI6IGIsIGM6IGN9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wgPSBGMigKCWZ1bmN0aW9uIChzdHIsIHJlcykgewoJCXZhciBzdHJMZW5ndGggPSAkZWxtJGNvcmUkU3RyaW5nJGxlbmd0aChzdHIpOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQl2YXIgbmV3T2Zmc2V0ID0gcy5vZmZzZXQgKyBzdHJMZW5ndGg7CgkJCQlyZXR1cm4gX1V0aWxzX2VxKAoJCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIHMub2Zmc2V0LCBuZXdPZmZzZXQsIHMuc3JjKSwKCQkJCQlzdHIgKyAnJykgPyBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCXJlcywKCQkJCQl7Y29sOiBzLmNvbCArIHN0ckxlbmd0aCwgaW5kZW50OiBzLmluZGVudCwgb2Zmc2V0OiBuZXdPZmZzZXQsIHJvdzogcy5yb3csIHNyYzogcy5zcmN9KSA6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQlmYWxzZSwKCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdTeW1ib2wsIHMucm93LCBzLmNvbCwgc3RyKSk7CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRwU3RlcENvbW1pdCA9IGZ1bmN0aW9uIChwU3RlcCkgewoJaWYgKHBTdGVwLiQgPT09ICdHb29kJykgewoJCXZhciBnb29kID0gcFN0ZXA7CgkJcmV0dXJuIGdvb2Q7Cgl9IGVsc2UgewoJCXZhciB4ID0gcFN0ZXAuYjsKCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCX0KfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnkgPSBGMigKCWZ1bmN0aW9uIChzdHIsIF92MCkgewoJCXZhciBwYXJzZU5leHQgPSBfdjAuYTsKCQl2YXIgc3RyTGVuZ3RoID0gJGVsbSRjb3JlJFN0cmluZyRsZW5ndGgoc3RyKTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIG5ld09mZnNldCA9IHMub2Zmc2V0ICsgc3RyTGVuZ3RoOwoJCQkJcmV0dXJuIF9VdGlsc19lcSgKCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzLm9mZnNldCwgbmV3T2Zmc2V0LCBzLnNyYyksCgkJCQkJc3RyICsgJycpID8gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkcFN0ZXBDb21taXQoCgkJCQkJcGFyc2VOZXh0KAoJCQkJCQl7Y29sOiBzLmNvbCArIHN0ckxlbmd0aCwgaW5kZW50OiBzLmluZGVudCwgb2Zmc2V0OiBuZXdPZmZzZXQsIHJvdzogcy5yb3csIHNyYzogcy5zcmN9KSkgOiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJZmFsc2UsCgkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nU3ltYm9sLCBzLnJvdywgcy5jb2wsIHN0cikpOwoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkd2hpbGUgPSBmdW5jdGlvbiAoaXNHb29kKSB7CglyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCWZ1bmN0aW9uIChzMCkgewoJCQl2YXIgczEgPSBBNigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwV2hpbGVIZWxwLCBpc0dvb2QsIHMwLm9mZnNldCwgczAucm93LCBzMC5jb2wsIHMwLnNyYywgczAuaW5kZW50KTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIHMwLm9mZnNldCwgczEub2Zmc2V0LCBzMC5zcmMpLAoJCQkJczEpOwoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbmVzdGFibGVNdWx0aUNvbW1lbnRNYXBXaXRoUmFuZ2UgPSBGMygKCWZ1bmN0aW9uIChyYW5nZUNvbnRlbnRUb1JlcywgX3YwLCBfdjEpIHsKCQl2YXIgb3BlbkNoYXIgPSBfdjAuYTsKCQl2YXIgb3BlblRhaWwgPSBfdjAuYjsKCQl2YXIgY2xvc2VDaGFyID0gX3YxLmE7CgkJdmFyIGNsb3NlVGFpbCA9IF92MS5iOwoJCXZhciBvcGVuID0gQTIoJGVsbSRjb3JlJFN0cmluZyRjb25zLCBvcGVuQ2hhciwgb3BlblRhaWwpOwoJCXZhciBpc05vdFJlbGV2YW50ID0gZnVuY3Rpb24gKF9jaGFyKSB7CgkJCXJldHVybiAoIV9VdGlsc19lcShfY2hhciwgb3BlbkNoYXIpKSAmJiAoKCFfVXRpbHNfZXEoX2NoYXIsIGNsb3NlQ2hhcikpICYmICghJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkaXNVdGYxNlN1cnJvZ2F0ZShfY2hhcikpKTsKCQl9OwoJCXZhciBjbG9zZSA9IEEyKCRlbG0kY29yZSRTdHJpbmckY29ucywgY2xvc2VDaGFyLCBjbG9zZVRhaWwpOwoJCXJldHVybiBBMygKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhSYW5nZSwKCQkJRjMoCgkJCQlmdW5jdGlvbiAocmFuZ2UsIGFmdGVyT3BlbiwgY29udGVudEFmdGVyQWZ0ZXJPcGVuKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQlyYW5nZUNvbnRlbnRUb1JlcywKCQkJCQkJcmFuZ2UsCgkJCQkJCV9VdGlsc19hcCgKCQkJCQkJCW9wZW4sCgkJCQkJCQlfVXRpbHNfYXAoCgkJCQkJCQkJYWZ0ZXJPcGVuLAoJCQkJCQkJCV9VdGlsc19hcChjb250ZW50QWZ0ZXJBZnRlck9wZW4sIGNsb3NlKSkpKTsKCQkJCX0pLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQlvcGVuLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkd2hpbGUoaXNOb3RSZWxldmFudCkpLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwgY2xvc2UsICcnKSwKCQkJCUEzKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxvb3AsCgkJCQkJX1V0aWxzX1R1cGxlMignJywgMSksCgkJCQkJQTMoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMywKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wsCgkJCQkJCQljbG9zZSwKCQkJCQkJCV9VdGlsc19UdXBsZTIoY2xvc2UsIC0xKSksCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQkJCQkJb3BlbiwKCQkJCQkJCV9VdGlsc19UdXBsZTIob3BlbiwgMSkpLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGFueUNoYXJGb2xsb3dlZEJ5V2hpbGVNYXAsCgkJCQkJCQlmdW5jdGlvbiAoY29uc3VtZWQpIHsKCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihjb25zdW1lZCwgMCk7CgkJCQkJCQl9LAoJCQkJCQkJaXNOb3RSZWxldmFudCkpLAoJCQkJCUYyKAoJCQkJCQlmdW5jdGlvbiAoX3YyLCBfdjMpIHsKCQkJCQkJCXZhciB0b0FwcGVuZCA9IF92Mi5hOwoJCQkJCQkJdmFyIG5lc3RpbmdDaGFuZ2UgPSBfdjIuYjsKCQkJCQkJCXZhciBzb0ZhckNvbnRlbnQgPSBfdjMuYTsKCQkJCQkJCXZhciBzb0Zhck5lc3RpbmcgPSBfdjMuYjsKCQkJCQkJCXZhciBuZXdOZXN0aW5nID0gc29GYXJOZXN0aW5nICsgbmVzdGluZ0NoYW5nZTsKCQkJCQkJCXJldHVybiAoIW5ld05lc3RpbmcpID8gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRG9uZShzb0ZhckNvbnRlbnQpIDogJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkTG9vcCgKCQkJCQkJCQlfVXRpbHNfVHVwbGUyKHNvRmFyQ29udGVudCArICh0b0FwcGVuZCArICcnKSwgbmV3TmVzdGluZykpOwoJCQkJCQl9KSkpKTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQ29tbWVudHMkbXVsdGlMaW5lQ29tbWVudE5vQ2hlY2sgPSBBMygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG5lc3RhYmxlTXVsdGlDb21tZW50TWFwV2l0aFJhbmdlLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJX1V0aWxzX1R1cGxlMigKCQlfVXRpbHNfY2hyKCd7JyksCgkJJy0nKSwKCV9VdGlsc19UdXBsZTIoCgkJX1V0aWxzX2NocignLScpLAoJCSd9JykpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQ29tbWVudHMkZGVjbGFyYXRpb25Eb2N1bWVudGF0aW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQ29tbWVudHMkbXVsdGlMaW5lQ29tbWVudE5vQ2hlY2s7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRCcmFuY2gyID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0JyYW5jaDInLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZmlsbGVkUHJlcGVuZFRvID0gRjIoCglmdW5jdGlvbiAocmlnaHQsIGxlZnRMaWtlbHlGaWxsZWQpIHsKCQlpZiAocmlnaHQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChsZWZ0TGlrZWx5RmlsbGVkKTsKCQl9IGVsc2UgewoJCQl2YXIgcmlnaHRMaWtlbHlGaWxsZWQgPSByaWdodC5hOwoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRCcmFuY2gyLCBsZWZ0TGlrZWx5RmlsbGVkLCByaWdodExpa2VseUZpbGxlZCkpOwoJCX0KCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJEZ1bmN0aW9uRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRnVuY3Rpb25EZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRBcHBsaWNhdGlvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdBcHBsaWNhdGlvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRDYXNlRXhwcmVzc2lvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdDYXNlRXhwcmVzc2lvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRFeHRlbmRSaWdodEJ5T3BlcmF0aW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0V4dGVuZFJpZ2h0QnlPcGVyYXRpb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kRmllbGRzRmlyc3RWYWx1ZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdGaWVsZHNGaXJzdFZhbHVlJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJElmQmxvY2sgPSBGMygKCWZ1bmN0aW9uIChhLCBiLCBjKSB7CgkJcmV0dXJuIHskOiAnSWZCbG9jaycsIGE6IGEsIGI6IGIsIGM6IGN9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJExhbWJkYUV4cHJlc3Npb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnTGFtYmRhRXhwcmVzc2lvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkSW5maXgkTGVmdCA9IHskOiAnTGVmdCd9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRMZXREZXN0cnVjdHVyaW5nID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0xldERlc3RydWN0dXJpbmcnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRMZXRFeHByZXNzaW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xldEV4cHJlc3Npb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kTGV0RnVuY3Rpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnTGV0RnVuY3Rpb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kTGlzdEV4cHIgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnTGlzdEV4cHInLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kTmVnYXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnTmVnYXRpb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEluZml4JE5vbiA9IHskOiAnTm9uJ307CnZhciAkZWxtJGNvcmUkUmVzdWx0JE9rID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ09rJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJFJlY29yZEFjY2VzcyA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdSZWNvcmRBY2Nlc3MnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRSZWNvcmRFeHByID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1JlY29yZEV4cHInLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kUmVjb3JkVXBkYXRlRXhwcmVzc2lvbiA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdSZWNvcmRVcGRhdGVFeHByZXNzaW9uJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kUmVjb3JkVXBkYXRlRmlyc3RTZXR0ZXIgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUmVjb3JkVXBkYXRlRmlyc3RTZXR0ZXInLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEluZml4JFJpZ2h0ID0geyQ6ICdSaWdodCd9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRUdXBsZWRFeHByZXNzaW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1R1cGxlZEV4cHJlc3Npb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kVHVwbGVkUGFyZW50aGVzaXplZEZvbGxvd2VkQnlSZWNvcmRBY2Nlc3NlcyA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUdXBsZWRQYXJlbnRoZXNpemVkRm9sbG93ZWRCeVJlY29yZEFjY2Vzc2VzJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJFR1cGxlZFR3b09yVGhyZWUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVHVwbGVkVHdvT3JUaHJlZScsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRVbml0RXhwciA9IHskOiAnVW5pdEV4cHInfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kUHJlZml4T3BlcmF0b3IgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUHJlZml4T3BlcmF0b3InLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRpc0FsbG93ZWRPcGVyYXRvclRva2VuID0gZnVuY3Rpb24gKG9wZXJhdG9yQ2FuZGlkYXRlVG9WYWxpZGF0ZSkgewoJc3dpdGNoIChvcGVyYXRvckNhbmRpZGF0ZVRvVmFsaWRhdGUpIHsKCQljYXNlICc9PSc6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJy89JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnOjonOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICcrKyc6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJysnOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICcqJzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnPHwnOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICd8Pic6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJ3x8JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnPD0nOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICc+PSc6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJ3w9JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnfC4nOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICcvLyc6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJzwvPic6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJzw/Pic6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJ14nOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICc8PCc6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJz4+JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnPCc6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJz4nOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICcvJzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnJiYnOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICctJzoKCQkJcmV0dXJuIHRydWU7CgkJZGVmYXVsdDoKCQkJcmV0dXJuIGZhbHNlOwoJfQp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGlzT3BlcmF0b3JTeW1ib2xDaGFyID0gZnVuY3Rpb24gKGMpIHsKCXN3aXRjaCAoYy52YWx1ZU9mKCkpIHsKCQljYXNlICcrJzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnLSc6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJy8nOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICcqJzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnPSc6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJy4nOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICc8JzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnPic6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJzonOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICcmJzoKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSAnfCc6CgkJCXJldHVybiB0cnVlOwoJCWNhc2UgJ14nOgoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlICc/JzoKCQkJcmV0dXJuIHRydWU7CgkJZGVmYXVsdDoKCQkJcmV0dXJuIGZhbHNlOwoJfQp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nU3RyaW5nU2F0aXNmeWluZ1ByZWRpY2F0ZSA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdFeHBlY3RpbmdTdHJpbmdTYXRpc2Z5aW5nUHJlZGljYXRlJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtBbmQyUGFydFV0ZjE2SGVscCA9IEYzKAoJZnVuY3Rpb24gKGlzR29vZCwgb2Zmc2V0LCBzcmMpIHsKCQlza2lwV2hpbGVXaXRob3V0TGluZWJyZWFrQW5kMlBhcnRVdGYxNkhlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKEEyKAoJCQkJJGVsbSRjb3JlJFN0cmluZyRhbnksCgkJCQlpc0dvb2QsCgkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDEsIHNyYykpKSB7CgkJCQl2YXIgJHRlbXAkaXNHb29kID0gaXNHb29kLAoJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJaXNHb29kID0gJHRlbXAkaXNHb29kOwoJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJY29udGludWUgc2tpcFdoaWxlV2l0aG91dExpbmVicmVha0FuZDJQYXJ0VXRmMTZIZWxwOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIG9mZnNldDsKCQkJfQoJCX0KCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkd2hpbGVXaXRob3V0TGluZWJyZWFrQW5kMlBhcnRVdGYxNlZhbGlkYXRlTWFwV2l0aFJhbmdlQmFja3RyYWNrYWJsZUZvbGxvd2VkQnlTeW1ib2wgPSBGNCgKCWZ1bmN0aW9uICh3aGlsZVJhbmdlQW5kQ29udGVudFRvUmVzLCB3aGlsZUNoYXJJc09rYXksIHdoaWxlUmVzdWx0SXNPa2F5LCBtYW5kYXRvcnlGaW5hbFN5bWJvbCkgewoJCXZhciBtYW5kYXRvcnlGaW5hbFN5bWJvbExlbmd0aCA9ICRlbG0kY29yZSRTdHJpbmckbGVuZ3RoKG1hbmRhdG9yeUZpbmFsU3ltYm9sKTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBzMU9mZnNldCA9IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtBbmQyUGFydFV0ZjE2SGVscCwgd2hpbGVDaGFySXNPa2F5LCBzMC5vZmZzZXQsIHMwLnNyYyk7CgkJCQl2YXIgd2hpbGVDb250ZW50ID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgczAub2Zmc2V0LCBzMU9mZnNldCwgczAuc3JjKTsKCQkJCWlmIChfVXRpbHNfZXEoCgkJCQkJQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgczFPZmZzZXQsIHMxT2Zmc2V0ICsgbWFuZGF0b3J5RmluYWxTeW1ib2xMZW5ndGgsIHMwLnNyYyksCgkJCQkJbWFuZGF0b3J5RmluYWxTeW1ib2wgKyAnJykgJiYgd2hpbGVSZXN1bHRJc09rYXkod2hpbGVDb250ZW50KSkgewoJCQkJCXZhciBzMUNvbHVtbiA9IHMwLmNvbCArIChzMU9mZnNldCAtIHMwLm9mZnNldCk7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQlBMigKCQkJCQkJCXdoaWxlUmFuZ2VBbmRDb250ZW50VG9SZXMsCgkJCQkJCQl7CgkJCQkJCQkJZW5kOiB7Y29sdW1uOiBzMUNvbHVtbiwgcm93OiBzMC5yb3d9LAoJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzMC5jb2wsIHJvdzogczAucm93fQoJCQkJCQkJfSwKCQkJCQkJCXdoaWxlQ29udGVudCksCgkJCQkJCXtjb2w6IHMxQ29sdW1uICsgbWFuZGF0b3J5RmluYWxTeW1ib2xMZW5ndGgsIGluZGVudDogczAuaW5kZW50LCBvZmZzZXQ6IHMxT2Zmc2V0ICsgbWFuZGF0b3J5RmluYWxTeW1ib2xMZW5ndGgsIHJvdzogczAucm93LCBzcmM6IHMwLnNyY30pOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJZmFsc2UsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ1N0cmluZ1NhdGlzZnlpbmdQcmVkaWNhdGUsIHMwLnJvdywgczAuY29sICsgMSkpOwoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRhbGxvd2VkUHJlZml4T3BlcmF0b3JGb2xsb3dlZEJ5Q2xvc2luZ1BhcmVuc09uZU9mID0gQTQoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aGlsZVdpdGhvdXRMaW5lYnJlYWtBbmQyUGFydFV0ZjE2VmFsaWRhdGVNYXBXaXRoUmFuZ2VCYWNrdHJhY2thYmxlRm9sbG93ZWRCeVN5bWJvbCwKCUYyKAoJCWZ1bmN0aW9uIChvcGVyYXRvclJhbmdlLCBvcGVyYXRvcikgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJewoJCQkJCQllbmQ6IHtjb2x1bW46IG9wZXJhdG9yUmFuZ2UuZW5kLmNvbHVtbiArIDEsIHJvdzogb3BlcmF0b3JSYW5nZS5lbmQucm93fSwKCQkJCQkJc3RhcnQ6IHtjb2x1bW46IG9wZXJhdG9yUmFuZ2Uuc3RhcnQuY29sdW1uIC0gMSwgcm93OiBvcGVyYXRvclJhbmdlLnN0YXJ0LnJvd30KCQkJCQl9LAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kUHJlZml4T3BlcmF0b3Iob3BlcmF0b3IpKQoJCQl9OwoJCX0pLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGlzT3BlcmF0b3JTeW1ib2xDaGFyLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGlzQWxsb3dlZE9wZXJhdG9yVG9rZW4sCgknKScpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRPcGVyYXRvckFwcGxpY2F0aW9uID0gRjQoCglmdW5jdGlvbiAoYSwgYiwgYywgZCkgewoJCXJldHVybiB7JDogJ09wZXJhdG9yQXBwbGljYXRpb24nLCBhOiBhLCBiOiBiLCBjOiBjLCBkOiBkfTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRhcHBseUV4dGVuc2lvblJpZ2h0ID0gRjIoCglmdW5jdGlvbiAoX3YwLCBsZWZ0Tm9kZSkgewoJCXZhciBvcGVyYXRpb24gPSBfdjAuYTsKCQl2YXIgbGVmdFJhbmdlID0gbGVmdE5vZGUuYTsKCQl2YXIgcmlnaHRFeHByZXNzaW9uTm9kZSA9IG9wZXJhdGlvbi5leHByZXNzaW9uOwoJCXZhciByaWdodEV4cHJlc3Npb25SYW5nZSA9IHJpZ2h0RXhwcmVzc2lvbk5vZGUuYTsKCQlyZXR1cm4gQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJe2VuZDogcmlnaHRFeHByZXNzaW9uUmFuZ2UuZW5kLCBzdGFydDogbGVmdFJhbmdlLnN0YXJ0fSwKCQkJQTQoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRPcGVyYXRvckFwcGxpY2F0aW9uLCBvcGVyYXRpb24uc3ltYm9sLCBvcGVyYXRpb24uZGlyZWN0aW9uLCBsZWZ0Tm9kZSwgcmlnaHRFeHByZXNzaW9uTm9kZSkpOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJENoYXJMaXRlcmFsID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0NoYXJMaXRlcmFsJywgYTogYX07Cn07CnZhciAkZWxtJGNvcmUkU3RyaW5nJGZvbGRyID0gX1N0cmluZ19mb2xkcjsKdmFyICRlbG0kY29yZSRTdHJpbmckdG9MaXN0ID0gZnVuY3Rpb24gKHN0cmluZykgewoJcmV0dXJuIEEzKCRlbG0kY29yZSRTdHJpbmckZm9sZHIsICRlbG0kY29yZSRMaXN0JGNvbnMsIF9MaXN0X05pbCwgc3RyaW5nKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGFueUNoYXIgPSAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCglmdW5jdGlvbiAocykgewoJCXZhciBuZXdPZmZzZXQgPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjaGFyT3JFbmQsIHMub2Zmc2V0LCBzLnNyYyk7CgkJaWYgKF9VdGlsc19lcShuZXdPZmZzZXQsIC0xKSkgewoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQlmYWxzZSwKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0FueUNoYXIsIHMucm93LCBzLmNvbCkpOwoJCX0gZWxzZSB7CgkJCWlmIChfVXRpbHNfZXEobmV3T2Zmc2V0LCAtMikpIHsKCQkJCXJldHVybiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCV9VdGlsc19jaHIoJ1xuJyksCgkJCQkJe2NvbDogMSwgaW5kZW50OiBzLmluZGVudCwgb2Zmc2V0OiBzLm9mZnNldCArIDEsIHJvdzogcy5yb3cgKyAxLCBzcmM6IHMuc3JjfSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgX3YwID0gJGVsbSRjb3JlJFN0cmluZyR0b0xpc3QoCgkJCQkJQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgcy5vZmZzZXQsIG5ld09mZnNldCwgcy5zcmMpKTsKCQkJCWlmICghX3YwLmIpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJZmFsc2UsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0FueUNoYXIsIHMucm93LCBzLmNvbCkpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYyA9IF92MC5hOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJYywKCQkJCQkJe2NvbDogcy5jb2wgKyAxLCBpbmRlbnQ6IHMuaW5kZW50LCBvZmZzZXQ6IG5ld09mZnNldCwgcm93OiBzLnJvdywgc3JjOiBzLnNyY30pOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U3ltYm9sID0gRjIoCglmdW5jdGlvbiAoc3RyLCBfdjApIHsKCQl2YXIgcGFyc2VQcmV2aW91cyA9IF92MC5hOwoJCXZhciBzdHJMZW5ndGggPSAkZWxtJGNvcmUkU3RyaW5nJGxlbmd0aChzdHIpOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92MSA9IHBhcnNlUHJldmlvdXMoczApOwoJCQkJaWYgKF92MS4kID09PSAnR29vZCcpIHsKCQkJCQl2YXIgcmVzID0gX3YxLmE7CgkJCQkJdmFyIHMxID0gX3YxLmI7CgkJCQkJdmFyIG5ld09mZnNldCA9IHMxLm9mZnNldCArIHN0ckxlbmd0aDsKCQkJCQlyZXR1cm4gX1V0aWxzX2VxKAoJCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzMS5vZmZzZXQsIG5ld09mZnNldCwgczEuc3JjKSwKCQkJCQkJc3RyICsgJycpID8gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCXJlcywKCQkJCQkJe2NvbDogczEuY29sICsgc3RyTGVuZ3RoLCBpbmRlbnQ6IHMxLmluZGVudCwgb2Zmc2V0OiBuZXdPZmZzZXQsIHJvdzogczEucm93LCBzcmM6IHMxLnNyY30pIDogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJdHJ1ZSwKCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nU3ltYm9sLCBzMS5yb3csIHMxLmNvbCwgc3RyKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBiYWQgPSBfdjE7CgkJCQkJcmV0dXJuIGJhZDsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRlbG0kY29yZSRDaGFyJGZyb21Db2RlID0gX0NoYXJfZnJvbUNvZGU7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkY2hhclRvSGV4ID0gZnVuY3Rpb24gKGMpIHsKCXN3aXRjaCAoYy52YWx1ZU9mKCkpIHsKCQljYXNlICcwJzoKCQkJcmV0dXJuIDA7CgkJY2FzZSAnMSc6CgkJCXJldHVybiAxOwoJCWNhc2UgJzInOgoJCQlyZXR1cm4gMjsKCQljYXNlICczJzoKCQkJcmV0dXJuIDM7CgkJY2FzZSAnNCc6CgkJCXJldHVybiA0OwoJCWNhc2UgJzUnOgoJCQlyZXR1cm4gNTsKCQljYXNlICc2JzoKCQkJcmV0dXJuIDY7CgkJY2FzZSAnNyc6CgkJCXJldHVybiA3OwoJCWNhc2UgJzgnOgoJCQlyZXR1cm4gODsKCQljYXNlICc5JzoKCQkJcmV0dXJuIDk7CgkJY2FzZSAnYSc6CgkJCXJldHVybiAxMDsKCQljYXNlICdiJzoKCQkJcmV0dXJuIDExOwoJCWNhc2UgJ2MnOgoJCQlyZXR1cm4gMTI7CgkJY2FzZSAnZCc6CgkJCXJldHVybiAxMzsKCQljYXNlICdlJzoKCQkJcmV0dXJuIDE0OwoJCWNhc2UgJ2YnOgoJCQlyZXR1cm4gMTU7CgkJY2FzZSAnQSc6CgkJCXJldHVybiAxMDsKCQljYXNlICdCJzoKCQkJcmV0dXJuIDExOwoJCWNhc2UgJ0MnOgoJCQlyZXR1cm4gMTI7CgkJY2FzZSAnRCc6CgkJCXJldHVybiAxMzsKCQljYXNlICdFJzoKCQkJcmV0dXJuIDE0OwoJCWRlZmF1bHQ6CgkJCXJldHVybiAxNTsKCX0KfTsKdmFyICRlbG0kY29yZSRCYXNpY3MkbXVsID0gX0Jhc2ljc19tdWw7CnZhciAkZWxtJGNvcmUkQmFzaWNzJHBvdyA9IF9CYXNpY3NfcG93Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGhleFN0cmluZ1RvSW50ID0gZnVuY3Rpb24gKHN0cmluZykgewoJcmV0dXJuIEEzKAoJCSRlbG0kY29yZSRTdHJpbmckZm9sZHIsCgkJRjIoCgkJCWZ1bmN0aW9uIChjLCBzb0ZhcikgewoJCQkJcmV0dXJuIHsKCQkJCQlleHBvbmVudDogc29GYXIuZXhwb25lbnQgKyAxLAoJCQkJCXJlc3VsdDogc29GYXIucmVzdWx0ICsgKEEyKCRlbG0kY29yZSRCYXNpY3MkcG93LCAxNiwgc29GYXIuZXhwb25lbnQpICogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGNoYXJUb0hleChjKSkKCQkJCX07CgkJCX0pLAoJCXtleHBvbmVudDogMCwgcmVzdWx0OiAwfSwKCQlzdHJpbmcpLnJlc3VsdDsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0NoYXJTYXRpc2Z5aW5nUHJlZGljYXRlID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0V4cGVjdGluZ0NoYXJTYXRpc2Z5aW5nUHJlZGljYXRlJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGlzU3ViQ2hhcldpdGhvdXRMaW5lYnJlYWsgPSBGMygKCWZ1bmN0aW9uIChwcmVkaWNhdGUsIG9mZnNldCwgc3RyaW5nKSB7CgkJdmFyIGFjdHVhbENoYXIgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDEsIHN0cmluZyk7CgkJcmV0dXJuIEEyKCRlbG0kY29yZSRTdHJpbmckYW55LCBwcmVkaWNhdGUsIGFjdHVhbENoYXIpID8gKG9mZnNldCArIDEpIDogKCgkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjaGFyU3RyaW5nSXNVdGYxNkhpZ2hTdXJyb2dhdGUoYWN0dWFsQ2hhcikgJiYgQTIoCgkJCSRlbG0kY29yZSRTdHJpbmckYW55LAoJCQlwcmVkaWNhdGUsCgkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMiwgc3RyaW5nKSkpID8gKG9mZnNldCArIDIpIDogKC0xKSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtIZWxwID0gRjYoCglmdW5jdGlvbiAoaXNHb29kLCBvZmZzZXQsIHJvdywgY29sLCBzcmMsIGluZGVudCkgewoJCXNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtIZWxwOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBhY3R1YWxDaGFyID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQlpZiAoQTIoJGVsbSRjb3JlJFN0cmluZyRhbnksIGlzR29vZCwgYWN0dWFsQ2hhcikpIHsKCQkJCXZhciAkdGVtcCRpc0dvb2QgPSBpc0dvb2QsCgkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkkdGVtcCRyb3cgPSByb3csCgkJCQkJJHRlbXAkY29sID0gY29sICsgMSwKCQkJCQkkdGVtcCRzcmMgPSBzcmMsCgkJCQkJJHRlbXAkaW5kZW50ID0gaW5kZW50OwoJCQkJaXNHb29kID0gJHRlbXAkaXNHb29kOwoJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJcm93ID0gJHRlbXAkcm93OwoJCQkJY29sID0gJHRlbXAkY29sOwoJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJaW5kZW50ID0gJHRlbXAkaW5kZW50OwoJCQkJY29udGludWUgc2tpcFdoaWxlV2l0aG91dExpbmVicmVha0hlbHA7CgkJCX0gZWxzZSB7CgkJCQlpZiAoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY2hhclN0cmluZ0lzVXRmMTZIaWdoU3Vycm9nYXRlKGFjdHVhbENoYXIpICYmIEEyKAoJCQkJCSRlbG0kY29yZSRTdHJpbmckYW55LAoJCQkJCWlzR29vZCwKCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDIsIHNyYykpKSB7CgkJCQkJdmFyICR0ZW1wJGlzR29vZCA9IGlzR29vZCwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMiwKCQkJCQkJJHRlbXAkcm93ID0gcm93LAoJCQkJCQkkdGVtcCRjb2wgPSBjb2wgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmMsCgkJCQkJCSR0ZW1wJGluZGVudCA9IGluZGVudDsKCQkJCQlpc0dvb2QgPSAkdGVtcCRpc0dvb2Q7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXJvdyA9ICR0ZW1wJHJvdzsKCQkJCQljb2wgPSAkdGVtcCRjb2w7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWluZGVudCA9ICR0ZW1wJGluZGVudDsKCQkJCQljb250aW51ZSBza2lwV2hpbGVXaXRob3V0TGluZWJyZWFrSGVscDsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIHtjb2w6IGNvbCwgaW5kZW50OiBpbmRlbnQsIG9mZnNldDogb2Zmc2V0LCByb3c6IHJvdywgc3JjOiBzcmN9OwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZU1hcFdpdGhvdXRMaW5lYnJlYWsgPSBGMygKCWZ1bmN0aW9uIChjb25zdW1lZFN0cmluZ1RvUmVzLCBmaXJzdElzT2theSwgYWZ0ZXJGaXJzdElzT2theSkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIGZpcnN0T2Zmc2V0ID0gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaXNTdWJDaGFyV2l0aG91dExpbmVicmVhaywgZmlyc3RJc09rYXksIHMwLm9mZnNldCwgczAuc3JjKTsKCQkJCWlmIChfVXRpbHNfZXEoZmlyc3RPZmZzZXQsIC0xKSkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQlmYWxzZSwKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nQ2hhclNhdGlzZnlpbmdQcmVkaWNhdGUsIHMwLnJvdywgczAuY29sKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBzMSA9IEE2KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtIZWxwLCBhZnRlckZpcnN0SXNPa2F5LCBmaXJzdE9mZnNldCwgczAucm93LCBzMC5jb2wgKyAxLCBzMC5zcmMsIHMwLmluZGVudCk7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQljb25zdW1lZFN0cmluZ1RvUmVzKAoJCQkJCQkJQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgczAub2Zmc2V0LCBzMS5vZmZzZXQsIHMwLnNyYykpLAoJCQkJCQlzMSk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkZWxtJGNvcmUkQ2hhciRpc0hleERpZ2l0ID0gZnVuY3Rpb24gKF9jaGFyKSB7Cgl2YXIgY29kZSA9ICRlbG0kY29yZSRDaGFyJHRvQ29kZShfY2hhcik7CglyZXR1cm4gKCg0OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA1NykpIHx8ICgoKDY1IDw9IGNvZGUpICYmIChjb2RlIDw9IDcwKSkgfHwgKCg5NyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMDIpKSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjcgPSBGNygKCWZ1bmN0aW9uIChfdjAsIF92MSwgX3YyLCBfdjMsIF92NCwgX3Y1LCBfdjYpIHsKCQl2YXIgYXR0ZW1wdDAgPSBfdjAuYTsKCQl2YXIgYXR0ZW1wdDEgPSBfdjEuYTsKCQl2YXIgYXR0ZW1wdDIgPSBfdjIuYTsKCQl2YXIgYXR0ZW1wdDMgPSBfdjMuYTsKCQl2YXIgYXR0ZW1wdDQgPSBfdjQuYTsKCQl2YXIgYXR0ZW1wdDUgPSBfdjUuYTsKCQl2YXIgYXR0ZW1wdDYgPSBfdjYuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIF92NyA9IGF0dGVtcHQwKHMpOwoJCQkJaWYgKF92Ny4kID09PSAnR29vZCcpIHsKCQkJCQl2YXIgZ29vZCA9IF92NzsKCQkJCQlyZXR1cm4gZ29vZDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGJhZDAgPSBfdjc7CgkJCQkJdmFyIGNvbW1pdHRlZDAgPSBiYWQwLmE7CgkJCQkJdmFyIHgwID0gYmFkMC5iOwoJCQkJCWlmIChjb21taXR0ZWQwKSB7CgkJCQkJCXJldHVybiBiYWQwOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjggPSBhdHRlbXB0MShzKTsKCQkJCQkJaWYgKF92OC4kID09PSAnR29vZCcpIHsKCQkJCQkJCXZhciBnb29kID0gX3Y4OwoJCQkJCQkJcmV0dXJuIGdvb2Q7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYmFkMSA9IF92ODsKCQkJCQkJCXZhciBjb21taXR0ZWQxID0gYmFkMS5hOwoJCQkJCQkJdmFyIHgxID0gYmFkMS5iOwoJCQkJCQkJaWYgKGNvbW1pdHRlZDEpIHsKCQkJCQkJCQlyZXR1cm4gYmFkMTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIF92OSA9IGF0dGVtcHQyKHMpOwoJCQkJCQkJCWlmIChfdjkuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQkJCXZhciBnb29kID0gX3Y5OwoJCQkJCQkJCQlyZXR1cm4gZ29vZDsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgYmFkMiA9IF92OTsKCQkJCQkJCQkJdmFyIGNvbW1pdHRlZDIgPSBiYWQyLmE7CgkJCQkJCQkJCXZhciB4MiA9IGJhZDIuYjsKCQkJCQkJCQkJaWYgKGNvbW1pdHRlZDIpIHsKCQkJCQkJCQkJCXJldHVybiBiYWQyOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJdmFyIF92MTAgPSBhdHRlbXB0MyhzKTsKCQkJCQkJCQkJCWlmIChfdjEwLiQgPT09ICdHb29kJykgewoJCQkJCQkJCQkJCXZhciBnb29kID0gX3YxMDsKCQkJCQkJCQkJCQlyZXR1cm4gZ29vZDsKCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJdmFyIGJhZDMgPSBfdjEwOwoJCQkJCQkJCQkJCXZhciBjb21taXR0ZWQzID0gYmFkMy5hOwoJCQkJCQkJCQkJCXZhciB4MyA9IGJhZDMuYjsKCQkJCQkJCQkJCQlpZiAoY29tbWl0dGVkMykgewoJCQkJCQkJCQkJCQlyZXR1cm4gYmFkMzsKCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQl2YXIgX3YxMSA9IGF0dGVtcHQ0KHMpOwoJCQkJCQkJCQkJCQlpZiAoX3YxMS4kID09PSAnR29vZCcpIHsKCQkJCQkJCQkJCQkJCXZhciBnb29kID0gX3YxMTsKCQkJCQkJCQkJCQkJCXJldHVybiBnb29kOwoJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJdmFyIGJhZDQgPSBfdjExOwoJCQkJCQkJCQkJCQkJdmFyIGNvbW1pdHRlZDQgPSBiYWQ0LmE7CgkJCQkJCQkJCQkJCQl2YXIgeDQgPSBiYWQ0LmI7CgkJCQkJCQkJCQkJCQlpZiAoY29tbWl0dGVkNCkgewoJCQkJCQkJCQkJCQkJCXJldHVybiBiYWQ0OwoJCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCQl2YXIgX3YxMiA9IGF0dGVtcHQ1KHMpOwoJCQkJCQkJCQkJCQkJCWlmIChfdjEyLiQgPT09ICdHb29kJykgewoJCQkJCQkJCQkJCQkJCQl2YXIgZ29vZCA9IF92MTI7CgkJCQkJCQkJCQkJCQkJCXJldHVybiBnb29kOwoJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCXZhciBiYWQ1ID0gX3YxMjsKCQkJCQkJCQkJCQkJCQkJdmFyIGNvbW1pdHRlZDUgPSBiYWQ1LmE7CgkJCQkJCQkJCQkJCQkJCXZhciB4NSA9IGJhZDUuYjsKCQkJCQkJCQkJCQkJCQkJaWYgKGNvbW1pdHRlZDUpIHsKCQkJCQkJCQkJCQkJCQkJCXJldHVybiBiYWQ1OwoJCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQkJdmFyIF92MTMgPSBhdHRlbXB0NihzKTsKCQkJCQkJCQkJCQkJCQkJCWlmIChfdjEzLiQgPT09ICdHb29kJykgewoJCQkJCQkJCQkJCQkJCQkJCXZhciBnb29kID0gX3YxMzsKCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gZ29vZDsKCQkJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIGJhZDYgPSBfdjEzOwoJCQkJCQkJCQkJCQkJCQkJCXZhciBjb21taXR0ZWQ2ID0gYmFkNi5hOwoJCQkJCQkJCQkJCQkJCQkJCXZhciB4NiA9IGJhZDYuYjsKCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gY29tbWl0dGVkNiA/IGJhZDYgOiBBMigKCQkJCQkJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQkJCQkJCQkJCQkJCQlmYWxzZSwKCQkJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdPbmVPZiwKCQkJCQkJCQkJCQkJCQkJCQkJCXgwLAoJCQkJCQkJCQkJCQkJCQkJCQkJeDEsCgkJCQkJCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCQkJCQkJW3gyLCB4MywgeDQsIHg1LCB4Nl0pKSk7CgkJCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZXNjYXBlZENoYXJWYWx1ZU1hcCA9IGZ1bmN0aW9uIChjaGFyVG9SZXMpIHsKCXJldHVybiBBNygKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjcsCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwKCQkJJ1wnJywKCQkJY2hhclRvUmVzKAoJCQkJX1V0aWxzX2NocignXCcnKSkpLAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wsCgkJCSdcIicsCgkJCWNoYXJUb1JlcygKCQkJCV9VdGlsc19jaHIoJ1wiJykpKSwKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQknbicsCgkJCWNoYXJUb1JlcygKCQkJCV9VdGlsc19jaHIoJ1xuJykpKSwKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQkndCcsCgkJCWNoYXJUb1JlcygKCQkJCV9VdGlsc19jaHIoJ1x0JykpKSwKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQkncicsCgkJCWNoYXJUb1JlcygKCQkJCV9VdGlsc19jaHIoJ1x1MDAwRCcpKSksCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwKCQkJJ1xcJywKCQkJY2hhclRvUmVzKAoJCQkJX1V0aWxzX2NocignXFwnKSkpLAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkndXsnLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGZvbGxvd2VkQnlTeW1ib2wsCgkJCQknfScsCgkJCQlBMygKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZU1hcFdpdGhvdXRMaW5lYnJlYWssCgkJCQkJZnVuY3Rpb24gKGhleCkgewoJCQkJCQlyZXR1cm4gY2hhclRvUmVzKAoJCQkJCQkJJGVsbSRjb3JlJENoYXIkZnJvbUNvZGUoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGhleFN0cmluZ1RvSW50KGhleCkpKTsKCQkJCQl9LAoJCQkJCSRlbG0kY29yZSRDaGFyJGlzSGV4RGlnaXQsCgkJCQkJJGVsbSRjb3JlJENoYXIkaXNIZXhEaWdpdCkpKSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjJNYXBXaXRoU3RhcnRSb3dDb2x1bW5BbmRFbmRSb3dDb2x1bW4gPSBGNCgKCWZ1bmN0aW9uIChmaXJzdFRvQ2hvaWNlLCBfdjAsIHNlY29uZFRvQ2hvaWNlLCBfdjEpIHsKCQl2YXIgYXR0ZW1wdEZpcnN0ID0gX3YwLmE7CgkJdmFyIGF0dGVtcHRTZWNvbmQgPSBfdjEuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIF92MiA9IGF0dGVtcHRGaXJzdChzKTsKCQkJCWlmIChfdjIuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJdmFyIGZpcnN0ID0gX3YyLmE7CgkJCQkJdmFyIHMxID0gX3YyLmI7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQlBNShmaXJzdFRvQ2hvaWNlLCBzLnJvdywgcy5jb2wsIGZpcnN0LCBzMS5yb3csIHMxLmNvbCksCgkJCQkJCXMxKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGZpcnN0Q29tbWl0dGVkID0gX3YyLmE7CgkJCQkJdmFyIGZpcnN0WCA9IF92Mi5iOwoJCQkJCWlmIChmaXJzdENvbW1pdHRlZCkgewoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBmaXJzdENvbW1pdHRlZCwgZmlyc3RYKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgX3YzID0gYXR0ZW1wdFNlY29uZChzKTsKCQkJCQkJaWYgKF92My4kID09PSAnR29vZCcpIHsKCQkJCQkJCXZhciBzZWNvbmQgPSBfdjMuYTsKCQkJCQkJCXZhciBzMSA9IF92My5iOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJQTUoc2Vjb25kVG9DaG9pY2UsIHMucm93LCBzLmNvbCwgc2Vjb25kLCBzMS5yb3csIHMxLmNvbCksCgkJCQkJCQkJczEpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIHNlY29uZENvbW1pdHRlZCA9IF92My5hOwoJCQkJCQkJdmFyIHNlY29uZFggPSBfdjMuYjsKCQkJCQkJCXJldHVybiBzZWNvbmRDb21taXR0ZWQgPyBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHNlY29uZENvbW1pdHRlZCwgc2Vjb25kWCkgOiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCQkJZmFsc2UsCgkJCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nT25lT2YsIGZpcnN0WCwgc2Vjb25kWCwgX0xpc3RfTmlsKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkY2hhcmFjdGVyTGl0ZXJhbE1hcFdpdGhSYW5nZSA9IGZ1bmN0aW9uIChyYW5nZUFuZENoYXJUb1JlcykgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJJ1wnJywKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZm9sbG93ZWRCeVN5bWJvbCwKCQkJJ1wnJywKCQkJQTQoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjJNYXBXaXRoU3RhcnRSb3dDb2x1bW5BbmRFbmRSb3dDb2x1bW4sCgkJCQlGNSgKCQkJCQlmdW5jdGlvbiAoc3RhcnRSb3csIHN0YXJ0Q29sdW1uLCBfY2hhciwgZW5kUm93LCBlbmRDb2x1bW4pIHsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJcmFuZ2VBbmRDaGFyVG9SZXMsCgkJCQkJCQl7CgkJCQkJCQkJZW5kOiB7Y29sdW1uOiBlbmRDb2x1bW4gKyAxLCByb3c6IGVuZFJvd30sCgkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHN0YXJ0Q29sdW1uIC0gMSwgcm93OiBzdGFydFJvd30KCQkJCQkJCX0sCgkJCQkJCQlfY2hhcik7CgkJCQkJfSksCgkJCQlBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCSdcXCcsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGVzY2FwZWRDaGFyVmFsdWVNYXAoJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSkpLAoJCQkJRjUoCgkJCQkJZnVuY3Rpb24gKHN0YXJ0Um93LCBzdGFydENvbHVtbiwgX2NoYXIsIGVuZFJvdywgZW5kQ29sdW1uKSB7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCXJhbmdlQW5kQ2hhclRvUmVzLAoJCQkJCQkJewoJCQkJCQkJCWVuZDoge2NvbHVtbjogZW5kQ29sdW1uICsgMSwgcm93OiBlbmRSb3d9LAoJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzdGFydENvbHVtbiAtIDEsIHJvdzogc3RhcnRSb3d9CgkJCQkJCQl9LAoJCQkJCQkJX2NoYXIpOwoJCQkJCX0pLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkYW55Q2hhcikpKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY2hhckxpdGVyYWxFeHByZXNzaW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGNoYXJhY3RlckxpdGVyYWxNYXBXaXRoUmFuZ2UoCglGMigKCQlmdW5jdGlvbiAocmFuZ2UsIF9jaGFyKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJENoYXJMaXRlcmFsKF9jaGFyKSkKCQkJfTsKCQl9KSk7CnZhciAkZWxtJGNvcmUkUmVzdWx0JEVyciA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdFcnInLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kZXJyVW5rbm93bkluZml4T3BlcmF0b3IgPSAkZWxtJGNvcmUkUmVzdWx0JEVycigndW5rbm93biBpbmZpeCBvcGVyYXRvcicpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaWZGb2xsb3dlZEJ5V2hpbGVWYWxpZGF0ZU1hcFdpdGhSYW5nZVdpdGhvdXRMaW5lYnJlYWsgPSBGNCgKCWZ1bmN0aW9uICh0b1Jlc3VsdCwgZmlyc3RJc09rYXksIGFmdGVyRmlyc3RJc09rYXksIHJlc3VsdElzT2theSkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIGZpcnN0T2Zmc2V0ID0gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaXNTdWJDaGFyV2l0aG91dExpbmVicmVhaywgZmlyc3RJc09rYXksIHMwLm9mZnNldCwgczAuc3JjKTsKCQkJCWlmIChfVXRpbHNfZXEoZmlyc3RPZmZzZXQsIC0xKSkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQlmYWxzZSwKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nQ2hhclNhdGlzZnlpbmdQcmVkaWNhdGUsIHMwLnJvdywgczAuY29sKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBzMSA9IEE2KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtIZWxwLCBhZnRlckZpcnN0SXNPa2F5LCBmaXJzdE9mZnNldCwgczAucm93LCBzMC5jb2wgKyAxLCBzMC5zcmMsIHMwLmluZGVudCk7CgkJCQkJdmFyIG5hbWUgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzMC5vZmZzZXQsIHMxLm9mZnNldCwgczAuc3JjKTsKCQkJCQlyZXR1cm4gcmVzdWx0SXNPa2F5KG5hbWUpID8gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCUEyKAoJCQkJCQkJdG9SZXN1bHQsCgkJCQkJCQl7CgkJCQkJCQkJZW5kOiB7Y29sdW1uOiBzMS5jb2wsIHJvdzogczEucm93fSwKCQkJCQkJCQlzdGFydDoge2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30KCQkJCQkJCX0sCgkJCQkJCQluYW1lKSwKCQkJCQkJczEpIDogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJZmFsc2UsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ1N0cmluZ1NhdGlzZnlpbmdQcmVkaWNhdGUsIHMwLnJvdywgczAuY29sICsgMSkpOwoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGlzTm90UmVzZXJ2ZWQgPSBmdW5jdGlvbiAobmFtZSkgewoJc3dpdGNoIChuYW1lKSB7CgkJY2FzZSAnbW9kdWxlJzoKCQkJcmV0dXJuIGZhbHNlOwoJCWNhc2UgJ2V4cG9zaW5nJzoKCQkJcmV0dXJuIGZhbHNlOwoJCWNhc2UgJ2ltcG9ydCc6CgkJCXJldHVybiBmYWxzZTsKCQljYXNlICdhcyc6CgkJCXJldHVybiBmYWxzZTsKCQljYXNlICdpZic6CgkJCXJldHVybiBmYWxzZTsKCQljYXNlICd0aGVuJzoKCQkJcmV0dXJuIGZhbHNlOwoJCWNhc2UgJ2Vsc2UnOgoJCQlyZXR1cm4gZmFsc2U7CgkJY2FzZSAnbGV0JzoKCQkJcmV0dXJuIGZhbHNlOwoJCWNhc2UgJ2luJzoKCQkJcmV0dXJuIGZhbHNlOwoJCWNhc2UgJ2Nhc2UnOgoJCQlyZXR1cm4gZmFsc2U7CgkJY2FzZSAnb2YnOgoJCQlyZXR1cm4gZmFsc2U7CgkJY2FzZSAncG9ydCc6CgkJCXJldHVybiBmYWxzZTsKCQljYXNlICd0eXBlJzoKCQkJcmV0dXJuIGZhbHNlOwoJCWNhc2UgJ3doZXJlJzoKCQkJcmV0dXJuIGZhbHNlOwoJCWRlZmF1bHQ6CgkJCXJldHVybiB0cnVlOwoJfQp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkY2hhckNvZGVJc0RpZ2l0ID0gZnVuY3Rpb24gKGNvZGUpIHsKCXJldHVybiAoY29kZSA8PSA1NykgJiYgKDQ4IDw9IGNvZGUpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkY2hhckNvZGVJc0xvd2VyID0gZnVuY3Rpb24gKGNvZGUpIHsKCXJldHVybiAoOTcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIyKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGNoYXJDb2RlSXNVcHBlciA9IGZ1bmN0aW9uIChjb2RlKSB7CglyZXR1cm4gKGNvZGUgPD0gOTApICYmICg2NSA8PSBjb2RlKTsKfTsKdmFyICRlbG0kY29yZSRCYXNpY3MkbW9kQnkgPSBfQmFzaWNzX21vZEJ5Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkdW5pY29kZUlzQWxwaGFOdW1PclVuZGVyc2NvcmVGYXN0ID0gZnVuY3Rpb24gKGMpIHsKCXZhciBjb2RlID0gJGVsbSRjb3JlJENoYXIkdG9Db2RlKGMpOwoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGNoYXJDb2RlSXNMb3dlcihjb2RlKSB8fCAoJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkY2hhckNvZGVJc1VwcGVyKGNvZGUpIHx8ICgkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRjaGFyQ29kZUlzRGlnaXQoY29kZSkgfHwgKChjb2RlID09PSA5NSkgfHwgKCgoY29kZSAhPT0gMzIpICYmIChjb2RlICE9PSAxMCkpICYmICgoY29kZSA8IDI1NikgPyAoKCg0OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA1NykpIHx8ICgoKDY1IDw9IGNvZGUpICYmIChjb2RlIDw9IDkwKSkgfHwgKCgoOTcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIyKSkgfHwgKChjb2RlID09PSAxNzApIHx8ICgoKDE3OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxNzkpKSB8fCAoKGNvZGUgPT09IDE4MSkgfHwgKCgoMTg1IDw9IGNvZGUpICYmIChjb2RlIDw9IDE4NikpIHx8ICgoKDE4OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxOTApKSB8fCAoKCgxOTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjE0KSkgfHwgKCgoMjE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDI0NikpIHx8ICgoMjQ4IDw9IGNvZGUpICYmIChjb2RlIDw9IDI1NSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDQzNzAwKSA/ICgoY29kZSA8IDQzNDcpID8gKChjb2RlIDwgMjg2OCkgPyAoKGNvZGUgPCAyMzY0KSA/ICgoY29kZSA8IDE2NDgpID8gKChjb2RlIDwgOTMwKSA/ICgoKDI1NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDUpKSB8fCAoKCg3MTAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzIxKSkgfHwgKCgoNzM2IDw9IGNvZGUpICYmIChjb2RlIDw9IDc0MCkpIHx8ICgoKDg4MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4ODQpKSB8fCAoKCg4ODYgPD0gY29kZSkgJiYgKGNvZGUgPD0gODg3KSkgfHwgKCgoODkwIDw9IGNvZGUpICYmIChjb2RlIDw9IDg5MykpIHx8ICgoY29kZSA9PT0gODk1KSB8fCAoKGNvZGUgPT09IDkwMikgfHwgKCgoOTA0IDw9IGNvZGUpICYmIChjb2RlIDw9IDkwNikpIHx8ICgoY29kZSA9PT0gOTA4KSB8fCAoKCg5MTAgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTI5KSkgfHwgKCghQTIoJGVsbSRjb3JlJEJhc2ljcyRtb2RCeSwgMiwgY29kZSkpICYmICgoNzQ4IDw9IGNvZGUpICYmIChjb2RlIDw9IDc1MCkpKSkpKSkpKSkpKSkpIDogKCgoOTMxIDw9IGNvZGUpICYmIChjb2RlIDw9IDEwMTMpKSB8fCAoKCgxMDE1IDw9IGNvZGUpICYmIChjb2RlIDw9IDExNTMpKSB8fCAoKCgxMTYyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEzMjcpKSB8fCAoKCgxMzI5IDw9IGNvZGUpICYmIChjb2RlIDw9IDEzNjYpKSB8fCAoKGNvZGUgPT09IDEzNjkpIHx8ICgoKDEzNzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTQxNikpIHx8ICgoKDE0ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTUxNCkpIHx8ICgoKDE1MTkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTUyMikpIHx8ICgoKDE1NjggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTYxMCkpIHx8ICgoKDE2MzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTY0MSkpIHx8ICgoMTY0NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxNjQ3KSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDIwNDEpID8gKCgoMTY0OSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxNzQ3KSkgfHwgKChjb2RlID09PSAxNzQ5KSB8fCAoKCgxNzY1IDw9IGNvZGUpICYmIChjb2RlIDw9IDE3NjYpKSB8fCAoKCgxNzc0IDw9IGNvZGUpICYmIChjb2RlIDw9IDE3ODgpKSB8fCAoKGNvZGUgPT09IDE3OTEpIHx8ICgoY29kZSA9PT0gMTgwOCkgfHwgKCgoMTgxMCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxODM5KSkgfHwgKCgoMTg2OSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxOTU3KSkgfHwgKChjb2RlID09PSAxOTY5KSB8fCAoKCgxOTg0IDw9IGNvZGUpICYmIChjb2RlIDw9IDIwMjYpKSB8fCAoKDIwMzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjAzNykpKSkpKSkpKSkpKSA6ICgoY29kZSA9PT0gMjA0MikgfHwgKCgoMjA0OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyMDY5KSkgfHwgKChjb2RlID09PSAyMDc0KSB8fCAoKGNvZGUgPT09IDIwODQpIHx8ICgoY29kZSA9PT0gMjA4OCkgfHwgKCgoMjExMiA8PSBjb2RlKSAmJiAoY29kZSA8PSAyMTM2KSkgfHwgKCgoMjE0NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyMTU0KSkgfHwgKCgoMjE2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyMTgzKSkgfHwgKCgoMjE4NSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyMTkwKSkgfHwgKCgoMjIwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyMjQ5KSkgfHwgKCgyMzA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDIzNjEpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDI2MDkpID8gKChjb2RlIDwgMjQ5MikgPyAoKGNvZGUgPT09IDIzNjUpIHx8ICgoY29kZSA9PT0gMjM4NCkgfHwgKCgoMjM5MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNDAxKSkgfHwgKCgoMjQwNiA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNDE1KSkgfHwgKCgoMjQxNyA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNDMyKSkgfHwgKCgoMjQzNyA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNDQ0KSkgfHwgKCgoMjQ0NyA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNDQ4KSkgfHwgKCgoMjQ1MSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNDcyKSkgfHwgKCgoMjQ3NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNDgwKSkgfHwgKChjb2RlID09PSAyNDgyKSB8fCAoKDI0ODYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjQ4OSkpKSkpKSkpKSkpKSA6ICgoY29kZSA9PT0gMjQ5MykgfHwgKChjb2RlID09PSAyNTEwKSB8fCAoKCgyNTI0IDw9IGNvZGUpICYmIChjb2RlIDw9IDI1MjUpKSB8fCAoKCgyNTI3IDw9IGNvZGUpICYmIChjb2RlIDw9IDI1MjkpKSB8fCAoKCgyNTM0IDw9IGNvZGUpICYmIChjb2RlIDw9IDI1NDUpKSB8fCAoKCgyNTQ4IDw9IGNvZGUpICYmIChjb2RlIDw9IDI1NTMpKSB8fCAoKGNvZGUgPT09IDI1NTYpIHx8ICgoKDI1NjUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjU3MCkpIHx8ICgoKDI1NzUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjU3NikpIHx8ICgoKDI1NzkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjYwMCkpIHx8ICgoMjYwMiA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNjA4KSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDI3MzcpID8gKCgoMjYxMCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNjExKSkgfHwgKCgoMjYxMyA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNjE0KSkgfHwgKCgoMjYxNiA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNjE3KSkgfHwgKCgoMjY0OSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyNjUyKSkgfHwgKChjb2RlID09PSAyNjU0KSB8fCAoKCgyNjYyIDw9IGNvZGUpICYmIChjb2RlIDw9IDI2NzEpKSB8fCAoKCgyNjc0IDw9IGNvZGUpICYmIChjb2RlIDw9IDI2NzYpKSB8fCAoKCgyNjkzIDw9IGNvZGUpICYmIChjb2RlIDw9IDI3MDEpKSB8fCAoKCgyNzAzIDw9IGNvZGUpICYmIChjb2RlIDw9IDI3MDUpKSB8fCAoKCgyNzA3IDw9IGNvZGUpICYmIChjb2RlIDw9IDI3MjgpKSB8fCAoKDI3MzAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjczNikpKSkpKSkpKSkpKSA6ICgoKDI3MzggPD0gY29kZSkgJiYgKGNvZGUgPD0gMjczOSkpIHx8ICgoKDI3NDEgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjc0NSkpIHx8ICgoY29kZSA9PT0gMjc0OSkgfHwgKChjb2RlID09PSAyNzY4KSB8fCAoKCgyNzg0IDw9IGNvZGUpICYmIChjb2RlIDw9IDI3ODUpKSB8fCAoKCgyNzkwIDw9IGNvZGUpICYmIChjb2RlIDw9IDI3OTkpKSB8fCAoKGNvZGUgPT09IDI4MDkpIHx8ICgoKDI4MjEgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjgyOCkpIHx8ICgoKDI4MzEgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjgzMikpIHx8ICgoKDI4MzUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjg1NikpIHx8ICgoKDI4NTggPD0gY29kZSkgJiYgKGNvZGUgPD0gMjg2NCkpIHx8ICgoMjg2NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAyODY3KSkpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDM0MTEpID8gKChjb2RlIDwgMzEzMikgPyAoKGNvZGUgPCAyOTcxKSA/ICgoKDI4NjkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjg3MykpIHx8ICgoY29kZSA9PT0gMjg3NykgfHwgKCgoMjkwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyOTA5KSkgfHwgKCgoMjkxMSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyOTEzKSkgfHwgKCgoMjkxOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyOTI3KSkgfHwgKCgoMjkyOSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyOTM1KSkgfHwgKChjb2RlID09PSAyOTQ3KSB8fCAoKCgyOTQ5IDw9IGNvZGUpICYmIChjb2RlIDw9IDI5NTQpKSB8fCAoKCgyOTU4IDw9IGNvZGUpICYmIChjb2RlIDw9IDI5NjApKSB8fCAoKCgyOTYyIDw9IGNvZGUpICYmIChjb2RlIDw9IDI5NjUpKSB8fCAoKDI5NjkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjk3MCkpKSkpKSkpKSkpKSA6ICgoY29kZSA9PT0gMjk3MikgfHwgKCgoMjk3NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyOTc1KSkgfHwgKCgoMjk3OSA8PSBjb2RlKSAmJiAoY29kZSA8PSAyOTgwKSkgfHwgKCgoMjk4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAyOTg2KSkgfHwgKCgoMjk5MCA8PSBjb2RlKSAmJiAoY29kZSA8PSAzMDAxKSkgfHwgKChjb2RlID09PSAzMDI0KSB8fCAoKCgzMDQ2IDw9IGNvZGUpICYmIChjb2RlIDw9IDMwNTgpKSB8fCAoKCgzMDc3IDw9IGNvZGUpICYmIChjb2RlIDw9IDMwODQpKSB8fCAoKCgzMDg2IDw9IGNvZGUpICYmIChjb2RlIDw9IDMwODgpKSB8fCAoKCgzMDkwIDw9IGNvZGUpICYmIChjb2RlIDw9IDMxMTIpKSB8fCAoKDMxMTQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzEyOSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCAzMjUyKSA/ICgoY29kZSA9PT0gMzEzMykgfHwgKCgoMzE2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSAzMTYyKSkgfHwgKChjb2RlID09PSAzMTY1KSB8fCAoKCgzMTY4IDw9IGNvZGUpICYmIChjb2RlIDw9IDMxNjkpKSB8fCAoKCgzMTc0IDw9IGNvZGUpICYmIChjb2RlIDw9IDMxODMpKSB8fCAoKCgzMTkyIDw9IGNvZGUpICYmIChjb2RlIDw9IDMxOTgpKSB8fCAoKGNvZGUgPT09IDMyMDApIHx8ICgoKDMyMDUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzIxMikpIHx8ICgoKDMyMTQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzIxNikpIHx8ICgoKDMyMTggPD0gY29kZSkgJiYgKGNvZGUgPD0gMzI0MCkpIHx8ICgoMzI0MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAzMjUxKSkpKSkpKSkpKSkpIDogKCgoMzI1MyA8PSBjb2RlKSAmJiAoY29kZSA8PSAzMjU3KSkgfHwgKChjb2RlID09PSAzMjYxKSB8fCAoKCgzMjkzIDw9IGNvZGUpICYmIChjb2RlIDw9IDMyOTQpKSB8fCAoKCgzMjk2IDw9IGNvZGUpICYmIChjb2RlIDw9IDMyOTcpKSB8fCAoKCgzMzAyIDw9IGNvZGUpICYmIChjb2RlIDw9IDMzMTEpKSB8fCAoKCgzMzEzIDw9IGNvZGUpICYmIChjb2RlIDw9IDMzMTQpKSB8fCAoKCgzMzMyIDw9IGNvZGUpICYmIChjb2RlIDw9IDMzNDApKSB8fCAoKCgzMzQyIDw9IGNvZGUpICYmIChjb2RlIDw9IDMzNDQpKSB8fCAoKCgzMzQ2IDw9IGNvZGUpICYmIChjb2RlIDw9IDMzODYpKSB8fCAoKGNvZGUgPT09IDMzODkpIHx8IChjb2RlID09PSAzNDA2KSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDM3NzUpID8gKChjb2RlIDwgMzYzMykgPyAoKCgzNDEyIDw9IGNvZGUpICYmIChjb2RlIDw9IDM0MTQpKSB8fCAoKCgzNDE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDM0MjUpKSB8fCAoKCgzNDMwIDw9IGNvZGUpICYmIChjb2RlIDw9IDM0NDgpKSB8fCAoKCgzNDUwIDw9IGNvZGUpICYmIChjb2RlIDw9IDM0NTUpKSB8fCAoKCgzNDYxIDw9IGNvZGUpICYmIChjb2RlIDw9IDM0NzgpKSB8fCAoKCgzNDgyIDw9IGNvZGUpICYmIChjb2RlIDw9IDM1MDUpKSB8fCAoKCgzNTA3IDw9IGNvZGUpICYmIChjb2RlIDw9IDM1MTUpKSB8fCAoKGNvZGUgPT09IDM1MTcpIHx8ICgoKDM1MjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzUyNikpIHx8ICgoKDM1NTggPD0gY29kZSkgJiYgKGNvZGUgPD0gMzU2NykpIHx8ICgoMzU4NSA8PSBjb2RlKSAmJiAoY29kZSA8PSAzNjMyKSkpKSkpKSkpKSkpIDogKCgoMzYzNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAzNjM1KSkgfHwgKCgoMzY0OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAzNjU0KSkgfHwgKCgoMzY2NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAzNjczKSkgfHwgKCgoMzcxMyA8PSBjb2RlKSAmJiAoY29kZSA8PSAzNzE0KSkgfHwgKChjb2RlID09PSAzNzE2KSB8fCAoKCgzNzE4IDw9IGNvZGUpICYmIChjb2RlIDw9IDM3MjIpKSB8fCAoKCgzNzI0IDw9IGNvZGUpICYmIChjb2RlIDw9IDM3NDcpKSB8fCAoKGNvZGUgPT09IDM3NDkpIHx8ICgoKDM3NTEgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzc2MCkpIHx8ICgoKDM3NjIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzc2MykpIHx8IChjb2RlID09PSAzNzczKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgNDE3NSkgPyAoKCgzNzc2IDw9IGNvZGUpICYmIChjb2RlIDw9IDM3ODApKSB8fCAoKGNvZGUgPT09IDM3ODIpIHx8ICgoKDM3OTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzgwMSkpIHx8ICgoKDM4MDQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMzgwNykpIHx8ICgoY29kZSA9PT0gMzg0MCkgfHwgKCgoMzg3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAzODkxKSkgfHwgKCgoMzkwNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAzOTExKSkgfHwgKCgoMzkxMyA8PSBjb2RlKSAmJiAoY29kZSA8PSAzOTQ4KSkgfHwgKCgoMzk3NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAzOTgwKSkgfHwgKCgoNDA5NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MTM4KSkgfHwgKCg0MTU5IDw9IGNvZGUpICYmIChjb2RlIDw9IDQxNjkpKSkpKSkpKSkpKSkgOiAoKCg0MTc2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQxODEpKSB8fCAoKCg0MTg2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQxODkpKSB8fCAoKGNvZGUgPT09IDQxOTMpIHx8ICgoKDQxOTcgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDE5OCkpIHx8ICgoKDQyMDYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDIwOCkpIHx8ICgoKDQyMTMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDIyNSkpIHx8ICgoY29kZSA9PT0gNDIzOCkgfHwgKCgoNDI0MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MjQ5KSkgfHwgKCgoNDI1NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MjkzKSkgfHwgKChjb2RlID09PSA0Mjk1KSB8fCAoKGNvZGUgPT09IDQzMDEpIHx8ICgoNDMwNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzQ2KSkpKSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA4NDU0KSA/ICgoY29kZSA8IDY1MjcpID8gKChjb2RlIDwgNTc2MCkgPyAoKGNvZGUgPCA0ODAxKSA/ICgoKDQzNDggPD0gY29kZSkgJiYgKGNvZGUgPD0gNDY4MCkpIHx8ICgoKDQ2ODIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDY4NSkpIHx8ICgoKDQ2ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gNDY5NCkpIHx8ICgoY29kZSA9PT0gNDY5NikgfHwgKCgoNDY5OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0NzAxKSkgfHwgKCgoNDcwNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0NzQ0KSkgfHwgKCgoNDc0NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0NzQ5KSkgfHwgKCgoNDc1MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Nzg0KSkgfHwgKCgoNDc4NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Nzg5KSkgfHwgKCgoNDc5MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Nzk4KSkgfHwgKGNvZGUgPT09IDQ4MDApKSkpKSkpKSkpKSA6ICgoKDQ4MDIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDgwNSkpIHx8ICgoKDQ4MDggPD0gY29kZSkgJiYgKGNvZGUgPD0gNDgyMikpIHx8ICgoKDQ4MjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDg4MCkpIHx8ICgoKDQ4ODIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDg4NSkpIHx8ICgoKDQ4ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gNDk1NCkpIHx8ICgoKDQ5NjkgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDk4OCkpIHx8ICgoKDQ5OTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNTAwNykpIHx8ICgoKDUwMjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNTEwOSkpIHx8ICgoKDUxMTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNTExNykpIHx8ICgoKDUxMjEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNTc0MCkpIHx8ICgoNTc0MyA8PSBjb2RlKSAmJiAoY29kZSA8PSA1NzU5KSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDYxMTEpID8gKCgoNTc2MSA8PSBjb2RlKSAmJiAoY29kZSA8PSA1Nzg2KSkgfHwgKCgoNTc5MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA1ODY2KSkgfHwgKCgoNTg3MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA1ODgwKSkgfHwgKCgoNTg4OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA1OTA1KSkgfHwgKCgoNTkxOSA8PSBjb2RlKSAmJiAoY29kZSA8PSA1OTM3KSkgfHwgKCgoNTk1MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA1OTY5KSkgfHwgKCgoNTk4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA1OTk2KSkgfHwgKCgoNTk5OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2MDAwKSkgfHwgKCgoNjAxNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2MDY3KSkgfHwgKChjb2RlID09PSA2MTAzKSB8fCAoY29kZSA9PT0gNjEwOCkpKSkpKSkpKSkpIDogKCgoNjExMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2MTIxKSkgfHwgKCgoNjEyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2MTM3KSkgfHwgKCgoNjE2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2MTY5KSkgfHwgKCgoNjE3NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2MjY0KSkgfHwgKCgoNjI3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2Mjc2KSkgfHwgKCgoNjI3OSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2MzEyKSkgfHwgKChjb2RlID09PSA2MzE0KSB8fCAoKCg2MzIwIDw9IGNvZGUpICYmIChjb2RlIDw9IDYzODkpKSB8fCAoKCg2NDAwIDw9IGNvZGUpICYmIChjb2RlIDw9IDY0MzApKSB8fCAoKCg2NDcwIDw9IGNvZGUpICYmIChjb2RlIDw9IDY1MDkpKSB8fCAoKDY1MTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjUxNikpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgNzQxNykgPyAoKGNvZGUgPCA3MDQyKSA/ICgoKDY1MjggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjU3MSkpIHx8ICgoKDY1NzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjYwMSkpIHx8ICgoKDY2MDggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjYxOCkpIHx8ICgoKDY2NTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjY3OCkpIHx8ICgoKDY2ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjc0MCkpIHx8ICgoKDY3ODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjc5MykpIHx8ICgoKDY4MDAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjgwOSkpIHx8ICgoY29kZSA9PT0gNjgyMykgfHwgKCgoNjkxNyA8PSBjb2RlKSAmJiAoY29kZSA8PSA2OTYzKSkgfHwgKCgoNjk4MSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2OTg4KSkgfHwgKCg2OTkyIDw9IGNvZGUpICYmIChjb2RlIDw9IDcwMDEpKSkpKSkpKSkpKSkgOiAoKCg3MDQzIDw9IGNvZGUpICYmIChjb2RlIDw9IDcwNzIpKSB8fCAoKCg3MDg2IDw9IGNvZGUpICYmIChjb2RlIDw9IDcxNDEpKSB8fCAoKCg3MTY4IDw9IGNvZGUpICYmIChjb2RlIDw9IDcyMDMpKSB8fCAoKCg3MjMyIDw9IGNvZGUpICYmIChjb2RlIDw9IDcyNDEpKSB8fCAoKCg3MjQ1IDw9IGNvZGUpICYmIChjb2RlIDw9IDcyOTMpKSB8fCAoKCg3Mjk2IDw9IGNvZGUpICYmIChjb2RlIDw9IDczMDQpKSB8fCAoKCg3MzEyIDw9IGNvZGUpICYmIChjb2RlIDw9IDczNTQpKSB8fCAoKCg3MzU3IDw9IGNvZGUpICYmIChjb2RlIDw9IDczNTkpKSB8fCAoKCg3NDAxIDw9IGNvZGUpICYmIChjb2RlIDw9IDc0MDQpKSB8fCAoKCg3NDA2IDw9IGNvZGUpICYmIChjb2RlIDw9IDc0MTEpKSB8fCAoKDc0MTMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzQxNCkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA4MTI5KSA/ICgoY29kZSA9PT0gNzQxOCkgfHwgKCgoNzQyNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3NjE1KSkgfHwgKCgoNzY4MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3OTU3KSkgfHwgKCgoNzk2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3OTY1KSkgfHwgKCgoNzk2OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MDA1KSkgfHwgKCgoODAwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MDEzKSkgfHwgKCgoODAxNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MDIzKSkgfHwgKCgoODAzMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MDYxKSkgfHwgKCgoODA2NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MTE2KSkgfHwgKCgoODExOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MTI0KSkgfHwgKChjb2RlID09PSA4MTI2KSB8fCAoKEEyKCRlbG0kY29yZSRCYXNpY3MkbW9kQnksIDIsIGNvZGUpID09PSAxKSAmJiAoKDgwMjUgPD0gY29kZSkgJiYgKGNvZGUgPD0gODAzMSkpKSkpKSkpKSkpKSkpIDogKCgoODEzMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MTMyKSkgfHwgKCgoODEzNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MTQwKSkgfHwgKCgoODE0NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MTQ3KSkgfHwgKCgoODE1MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MTU1KSkgfHwgKCgoODE2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MTcyKSkgfHwgKCgoODE3OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MTgwKSkgfHwgKCgoODE4MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MTg4KSkgfHwgKCgoODMwNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MzA1KSkgfHwgKCgoODMwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MzEzKSkgfHwgKCgoODMxOSA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MzI5KSkgfHwgKCgoODMzNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA4MzQ4KSkgfHwgKGNvZGUgPT09IDg0NTApKSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCAxMjc4MykgPyAoKGNvZGUgPCAxMTY0NykgPyAoKGNvZGUgPCA5NDQ5KSA/ICgoY29kZSA9PT0gODQ1NSkgfHwgKCgoODQ1OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4NDY3KSkgfHwgKChjb2RlID09PSA4NDY5KSB8fCAoKCg4NDczIDw9IGNvZGUpICYmIChjb2RlIDw9IDg0NzcpKSB8fCAoKCg4NDkwIDw9IGNvZGUpICYmIChjb2RlIDw9IDg0OTMpKSB8fCAoKCg4NDk1IDw9IGNvZGUpICYmIChjb2RlIDw9IDg1MDUpKSB8fCAoKCg4NTA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDg1MTEpKSB8fCAoKCg4NTE3IDw9IGNvZGUpICYmIChjb2RlIDw9IDg1MjEpKSB8fCAoKGNvZGUgPT09IDg1MjYpIHx8ICgoKDg1MjggPD0gY29kZSkgJiYgKGNvZGUgPD0gODU4NSkpIHx8ICgoKDkzMTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTM3MSkpIHx8ICgoIUEyKCRlbG0kY29yZSRCYXNpY3MkbW9kQnksIDIsIGNvZGUpKSAmJiAoKDg0ODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gODQ4OCkpKSkpKSkpKSkpKSkpIDogKCgoOTQ1MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA5NDcxKSkgfHwgKCgoMTAxMDIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTAxMzEpKSB8fCAoKCgxMTI2NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTQ5MikpIHx8ICgoKDExNDk5IDw9IGNvZGUpICYmIChjb2RlIDw9IDExNTAyKSkgfHwgKCgoMTE1MDYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE1MDcpKSB8fCAoKGNvZGUgPT09IDExNTE3KSB8fCAoKCgxMTUyMCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTU1NykpIHx8ICgoY29kZSA9PT0gMTE1NTkpIHx8ICgoY29kZSA9PT0gMTE1NjUpIHx8ICgoKDExNTY4IDw9IGNvZGUpICYmIChjb2RlIDw9IDExNjIzKSkgfHwgKGNvZGUgPT09IDExNjMxKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgMTIzMjApID8gKCgoMTE2NDggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE2NzApKSB8fCAoKCgxMTY4MCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTY4NikpIHx8ICgoKDExNjg4IDw9IGNvZGUpICYmIChjb2RlIDw9IDExNjk0KSkgfHwgKCgoMTE2OTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE3MDIpKSB8fCAoKCgxMTcwNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTcxMCkpIHx8ICgoKDExNzEyIDw9IGNvZGUpICYmIChjb2RlIDw9IDExNzE4KSkgfHwgKCgoMTE3MjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE3MjYpKSB8fCAoKCgxMTcyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTczNCkpIHx8ICgoKDExNzM2IDw9IGNvZGUpICYmIChjb2RlIDw9IDExNzQyKSkgfHwgKChjb2RlID09PSAxMTgyMykgfHwgKCgxMjI5MyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjI5NSkpKSkpKSkpKSkpKSA6ICgoKDEyMzIxIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMzI5KSkgfHwgKCgoMTIzMzcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIzNDEpKSB8fCAoKCgxMjM0NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjM0OCkpIHx8ICgoKDEyMzUzIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNDM4KSkgfHwgKCgoMTI0NDUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI0NDcpKSB8fCAoKCgxMjQ0OSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjUzOCkpIHx8ICgoKDEyNTQwIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNTQzKSkgfHwgKCgoMTI1NDkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI1OTEpKSB8fCAoKCgxMjU5MyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY4NikpIHx8ICgoKDEyNjkwIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjkzKSkgfHwgKCgxMjcwNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjczNSkpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgNDMwMTkpID8gKChjb2RlIDwgNDI1NTkpID8gKCgoMTI3ODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI3OTkpKSB8fCAoKCgxMjgzMiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjg0MSkpIHx8ICgoKDEyODcyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyODc5KSkgfHwgKCgoMTI4ODEgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI4OTUpKSB8fCAoKCgxMjkyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjkzNykpIHx8ICgoKDEyOTc3IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyOTkxKSkgfHwgKCgoMTMzMTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTk5MDMpKSB8fCAoKCgxOTk2OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MjEyNCkpIHx8ICgoKDQyMTkyIDw9IGNvZGUpICYmIChjb2RlIDw9IDQyMjM3KSkgfHwgKCgoNDIyNDAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDI1MDgpKSB8fCAoKDQyNTEyIDw9IGNvZGUpICYmIChjb2RlIDw9IDQyNTM5KSkpKSkpKSkpKSkpIDogKCgoNDI1NjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDI2MDYpKSB8fCAoKCg0MjYyMyA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MjY1MykpIHx8ICgoKDQyNjU2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQyNzM1KSkgfHwgKCgoNDI3NzUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDI3ODMpKSB8fCAoKCg0Mjc4NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mjg4OCkpIHx8ICgoKDQyODkxIDw9IGNvZGUpICYmIChjb2RlIDw9IDQyOTU0KSkgfHwgKCgoNDI5NjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDI5NjEpKSB8fCAoKCg0Mjk2NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mjk2OSkpIHx8ICgoKDQyOTk0IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzMDA5KSkgfHwgKCgoNDMwMTEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDMwMTMpKSB8fCAoKCg0MzAxNSA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzAxOCkpIHx8ICgoQTIoJGVsbSRjb3JlJEJhc2ljcyRtb2RCeSwgMiwgY29kZSkgPT09IDEpICYmICgoNDI5NjMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDI5NjUpKSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA0MzM5NSkgPyAoKCg0MzAyMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzA0MikpIHx8ICgoKDQzMDU2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzMDYxKSkgfHwgKCgoNDMwNzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDMxMjMpKSB8fCAoKCg0MzEzOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzE4NykpIHx8ICgoKDQzMjE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzMjI1KSkgfHwgKCgoNDMyNTAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDMyNTUpKSB8fCAoKGNvZGUgPT09IDQzMjU5KSB8fCAoKCg0MzI2MSA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzI2MikpIHx8ICgoKDQzMjY0IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzMzAxKSkgfHwgKCgoNDMzMTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDMzMzQpKSB8fCAoKDQzMzYwIDw9IGNvZGUpICYmIChjb2RlIDw9IDQzMzg4KSkpKSkpKSkpKSkpIDogKCgoNDMzOTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM0NDIpKSB8fCAoKCg0MzQ3MSA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzQ4MSkpIHx8ICgoKDQzNDg4IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzNDkyKSkgfHwgKCgoNDM0OTQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM1MTgpKSB8fCAoKCg0MzUyMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzU2MCkpIHx8ICgoKDQzNTg0IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzNTg2KSkgfHwgKCgoNDM1ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM1OTUpKSB8fCAoKCg0MzYwMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzYwOSkpIHx8ICgoKDQzNjE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzNjM4KSkgfHwgKChjb2RlID09PSA0MzY0MikgfHwgKCgoNDM2NDYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM2OTUpKSB8fCAoY29kZSA9PT0gNDM2OTcpKSkpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDcxMzUxKSA/ICgoY29kZSA8IDY3NjcxKSA/ICgoY29kZSA8IDY1NTQ4KSA/ICgoY29kZSA8IDY0Mjg2KSA/ICgoY29kZSA8IDQzODY3KSA/ICgoKDQzNzAxIDw9IGNvZGUpICYmIChjb2RlIDw9IDQzNzAyKSkgfHwgKCgoNDM3MDUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM3MDkpKSB8fCAoKCg0MzczOSA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mzc0MSkpIHx8ICgoKDQzNzQ0IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzNzU0KSkgfHwgKCgoNDM3NjIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM3NjQpKSB8fCAoKCg0Mzc3NyA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mzc4MikpIHx8ICgoKDQzNzg1IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzNzkwKSkgfHwgKCgoNDM3OTMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM3OTgpKSB8fCAoKCg0MzgwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzgxNCkpIHx8ICgoKDQzODE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQzODIyKSkgfHwgKCgoNDM4MjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM4NjYpKSB8fCAoKCFBMigkZWxtJGNvcmUkQmFzaWNzJG1vZEJ5LCAyLCBjb2RlKSkgJiYgKCg0MzcxMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA0MzcxNCkpKSkpKSkpKSkpKSkpIDogKCgoNDM4NjggPD0gY29kZSkgJiYgKGNvZGUgPD0gNDM4ODEpKSB8fCAoKCg0Mzg4OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0NDAwMikpIHx8ICgoKDQ0MDE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQ0MDI1KSkgfHwgKCgoNDQwMzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNTUyMDMpKSB8fCAoKCg1NTIxNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA1NTIzOCkpIHx8ICgoKDU1MjQzIDw9IGNvZGUpICYmIChjb2RlIDw9IDU1MjkxKSkgfHwgKCgoNjM3NDQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjQxMDkpKSB8fCAoKCg2NDExMiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NDIxNykpIHx8ICgoKDY0MjU2IDw9IGNvZGUpICYmIChjb2RlIDw9IDY0MjYyKSkgfHwgKCgoNjQyNzUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjQyNzkpKSB8fCAoY29kZSA9PT0gNjQyODUpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA2NTEzNSkgPyAoKCg2NDI4NyA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NDI5NikpIHx8ICgoKDY0Mjk4IDw9IGNvZGUpICYmIChjb2RlIDw9IDY0MzEwKSkgfHwgKCgoNjQzMTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjQzMTYpKSB8fCAoKGNvZGUgPT09IDY0MzE4KSB8fCAoKCg2NDMyMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NDMyMSkpIHx8ICgoKDY0MzIzIDw9IGNvZGUpICYmIChjb2RlIDw9IDY0MzI0KSkgfHwgKCgoNjQzMjYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjQ0MzMpKSB8fCAoKCg2NDQ2NyA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NDgyOSkpIHx8ICgoKDY0ODQ4IDw9IGNvZGUpICYmIChjb2RlIDw9IDY0OTExKSkgfHwgKCgoNjQ5MTQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjQ5NjcpKSB8fCAoKDY1MDA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDY1MDE5KSkpKSkpKSkpKSkpIDogKCgoNjUxMzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjUxNDApKSB8fCAoKCg2NTE0MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTI3NikpIHx8ICgoKDY1Mjk2IDw9IGNvZGUpICYmIChjb2RlIDw9IDY1MzA1KSkgfHwgKCgoNjUzMTMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjUzMzgpKSB8fCAoKCg2NTM0NSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTM3MCkpIHx8ICgoKDY1MzgyIDw9IGNvZGUpICYmIChjb2RlIDw9IDY1NDcwKSkgfHwgKCgoNjU0NzQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjU0NzkpKSB8fCAoKCg2NTQ4MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTQ4NykpIHx8ICgoKDY1NDkwIDw9IGNvZGUpICYmIChjb2RlIDw9IDY1NDk1KSkgfHwgKCgoNjU0OTggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjU1MDApKSB8fCAoKDY1NTM2IDw9IGNvZGUpICYmIChjb2RlIDw9IDY1NTQ3KSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA2Njc3NSkgPyAoKGNvZGUgPCA2NjI3MikgPyAoKCg2NTU0OSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTU3NCkpIHx8ICgoKDY1NTc2IDw9IGNvZGUpICYmIChjb2RlIDw9IDY1NTk0KSkgfHwgKCgoNjU1OTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjU1OTcpKSB8fCAoKCg2NTU5OSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTYxMykpIHx8ICgoKDY1NjE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDY1NjI5KSkgfHwgKCgoNjU2NjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjU3ODYpKSB8fCAoKCg2NTc5OSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTg0MykpIHx8ICgoKDY1ODU2IDw9IGNvZGUpICYmIChjb2RlIDw9IDY1OTEyKSkgfHwgKCgoNjU5MzAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjU5MzEpKSB8fCAoKCg2NjE3NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NjIwNCkpIHx8ICgoNjYyMDggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjYyNTYpKSkpKSkpKSkpKSkgOiAoKCg2NjI3MyA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NjI5OSkpIHx8ICgoKDY2MzA0IDw9IGNvZGUpICYmIChjb2RlIDw9IDY2MzM5KSkgfHwgKCgoNjYzNDkgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjYzNzgpKSB8fCAoKCg2NjM4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NjQyMSkpIHx8ICgoKDY2NDMyIDw9IGNvZGUpICYmIChjb2RlIDw9IDY2NDYxKSkgfHwgKCgoNjY0NjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjY0OTkpKSB8fCAoKCg2NjUwNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NjUxMSkpIHx8ICgoKDY2NTEzIDw9IGNvZGUpICYmIChjb2RlIDw9IDY2NTE3KSkgfHwgKCgoNjY1NjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjY3MTcpKSB8fCAoKCg2NjcyMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NjcyOSkpIHx8ICgoNjY3MzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjY3NzEpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgNjcwNzEpID8gKCgoNjY3NzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjY4MTEpKSB8fCAoKCg2NjgxNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2Njg1NSkpIHx8ICgoKDY2ODY0IDw9IGNvZGUpICYmIChjb2RlIDw9IDY2OTE1KSkgfHwgKCgoNjY5MjggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjY5MzgpKSB8fCAoKCg2Njk0MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2Njk1NCkpIHx8ICgoKDY2OTU2IDw9IGNvZGUpICYmIChjb2RlIDw9IDY2OTYyKSkgfHwgKCgoNjY5NjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjY5NjUpKSB8fCAoKCg2Njk2NyA8PSBjb2RlKSAmJiAoY29kZSA8PSA2Njk3NykpIHx8ICgoKDY2OTc5IDw9IGNvZGUpICYmIChjb2RlIDw9IDY2OTkzKSkgfHwgKCgoNjY5OTUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjcwMDEpKSB8fCAoKDY3MDAzIDw9IGNvZGUpICYmIChjb2RlIDw9IDY3MDA0KSkpKSkpKSkpKSkpIDogKCgoNjcwNzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjczODIpKSB8fCAoKCg2NzM5MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NzQxMykpIHx8ICgoKDY3NDI0IDw9IGNvZGUpICYmIChjb2RlIDw9IDY3NDMxKSkgfHwgKCgoNjc0NTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjc0NjEpKSB8fCAoKCg2NzQ2MyA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NzUwNCkpIHx8ICgoKDY3NTA2IDw9IGNvZGUpICYmIChjb2RlIDw9IDY3NTE0KSkgfHwgKCgoNjc1ODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjc1ODkpKSB8fCAoKGNvZGUgPT09IDY3NTkyKSB8fCAoKCg2NzU5NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NzYzNykpIHx8ICgoKDY3NjM5IDw9IGNvZGUpICYmIChjb2RlIDw9IDY3NjQwKSkgfHwgKChjb2RlID09PSA2NzY0NCkgfHwgKCg2NzY0NyA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NzY2OSkpKSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA2OTg3MSkgPyAoKGNvZGUgPCA2ODQ3MSkgPyAoKGNvZGUgPCA2ODExNikgPyAoKCg2NzY3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NzcwMikpIHx8ICgoKDY3NzA1IDw9IGNvZGUpICYmIChjb2RlIDw9IDY3NzQyKSkgfHwgKCgoNjc3NTEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjc3NTkpKSB8fCAoKCg2NzgwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NzgyNikpIHx8ICgoKDY3ODI4IDw9IGNvZGUpICYmIChjb2RlIDw9IDY3ODI5KSkgfHwgKCgoNjc4MzUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjc4NjcpKSB8fCAoKCg2Nzg3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2Nzg5NykpIHx8ICgoKDY3OTY4IDw9IGNvZGUpICYmIChjb2RlIDw9IDY4MDIzKSkgfHwgKCgoNjgwMjggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjgwNDcpKSB8fCAoKCg2ODA1MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODA5NikpIHx8ICgoNjgxMTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjgxMTUpKSkpKSkpKSkpKSkgOiAoKCg2ODExNyA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODExOSkpIHx8ICgoKDY4MTIxIDw9IGNvZGUpICYmIChjb2RlIDw9IDY4MTQ5KSkgfHwgKCgoNjgxNjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjgxNjgpKSB8fCAoKCg2ODE5MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODIyMikpIHx8ICgoKDY4MjI0IDw9IGNvZGUpICYmIChjb2RlIDw9IDY4MjU1KSkgfHwgKCgoNjgyODggPD0gY29kZSkgJiYgKGNvZGUgPD0gNjgyOTUpKSB8fCAoKCg2ODI5NyA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODMyNCkpIHx8ICgoKDY4MzMxIDw9IGNvZGUpICYmIChjb2RlIDw9IDY4MzM1KSkgfHwgKCgoNjgzNTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjg0MDUpKSB8fCAoKCg2ODQxNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODQzNykpIHx8ICgoNjg0NDAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjg0NjYpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgNjk0MjMpID8gKCgoNjg0NzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjg0OTcpKSB8fCAoKCg2ODUyMSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODUyNykpIHx8ICgoKDY4NjA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDY4NjgwKSkgfHwgKCgoNjg3MzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjg3ODYpKSB8fCAoKCg2ODgwMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2ODg1MCkpIHx8ICgoKDY4ODU4IDw9IGNvZGUpICYmIChjb2RlIDw9IDY4ODk5KSkgfHwgKCgoNjg5MTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjg5MjEpKSB8fCAoKCg2OTIxNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA2OTI0NikpIHx8ICgoKDY5MjQ4IDw9IGNvZGUpICYmIChjb2RlIDw9IDY5Mjg5KSkgfHwgKCgoNjkyOTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjkyOTcpKSB8fCAoKDY5Mzc2IDw9IGNvZGUpICYmIChjb2RlIDw9IDY5NDE1KSkpKSkpKSkpKSkpIDogKCgoNjk0MjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjk0NDUpKSB8fCAoKCg2OTQ1NyA8PSBjb2RlKSAmJiAoY29kZSA8PSA2OTQ2MCkpIHx8ICgoKDY5NDg4IDw9IGNvZGUpICYmIChjb2RlIDw9IDY5NTA1KSkgfHwgKCgoNjk1NTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjk1NzkpKSB8fCAoKCg2OTYwMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2OTYyMikpIHx8ICgoKDY5NjM1IDw9IGNvZGUpICYmIChjb2RlIDw9IDY5Njg3KSkgfHwgKCgoNjk3MTQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjk3NDMpKSB8fCAoKCg2OTc0NSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2OTc0NikpIHx8ICgoY29kZSA9PT0gNjk3NDkpIHx8ICgoKDY5NzYzIDw9IGNvZGUpICYmIChjb2RlIDw9IDY5ODA3KSkgfHwgKCg2OTg0MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA2OTg2NCkpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgNzA0MDQpID8gKChjb2RlIDwgNzAxMTIpID8gKCgoNjk4NzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjk4ODEpKSB8fCAoKCg2OTg5MSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2OTkyNikpIHx8ICgoKDY5OTQyIDw9IGNvZGUpICYmIChjb2RlIDw9IDY5OTUxKSkgfHwgKChjb2RlID09PSA2OTk1NikgfHwgKChjb2RlID09PSA2OTk1OSkgfHwgKCgoNjk5NjggPD0gY29kZSkgJiYgKGNvZGUgPD0gNzAwMDIpKSB8fCAoKGNvZGUgPT09IDcwMDA2KSB8fCAoKCg3MDAxOSA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDA2NikpIHx8ICgoKDcwMDgxIDw9IGNvZGUpICYmIChjb2RlIDw9IDcwMDg0KSkgfHwgKCgoNzAwOTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzAxMDYpKSB8fCAoY29kZSA9PT0gNzAxMDgpKSkpKSkpKSkpKSA6ICgoKDcwMTEzIDw9IGNvZGUpICYmIChjb2RlIDw9IDcwMTMyKSkgfHwgKCgoNzAxNDQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzAxNjEpKSB8fCAoKCg3MDE2MyA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDE4NykpIHx8ICgoKDcwMjA3IDw9IGNvZGUpICYmIChjb2RlIDw9IDcwMjA4KSkgfHwgKCgoNzAyNzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzAyNzgpKSB8fCAoKGNvZGUgPT09IDcwMjgwKSB8fCAoKCg3MDI4MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDI4NSkpIHx8ICgoKDcwMjg3IDw9IGNvZGUpICYmIChjb2RlIDw9IDcwMzAxKSkgfHwgKCgoNzAzMDMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzAzMTIpKSB8fCAoKCg3MDMyMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDM2NikpIHx8ICgoNzAzODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzAzOTMpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgNzA3MzUpID8gKCgoNzA0MDUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzA0MTIpKSB8fCAoKCg3MDQxNSA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDQxNikpIHx8ICgoKDcwNDE5IDw9IGNvZGUpICYmIChjb2RlIDw9IDcwNDQwKSkgfHwgKCgoNzA0NDIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzA0NDgpKSB8fCAoKCg3MDQ1MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDQ1MSkpIHx8ICgoKDcwNDUzIDw9IGNvZGUpICYmIChjb2RlIDw9IDcwNDU3KSkgfHwgKChjb2RlID09PSA3MDQ2MSkgfHwgKChjb2RlID09PSA3MDQ4MCkgfHwgKCgoNzA0OTMgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzA0OTcpKSB8fCAoKCg3MDY1NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDcwOCkpIHx8ICgoNzA3MjcgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzA3MzApKSkpKSkpKSkpKSkgOiAoKCg3MDczNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDc0NSkpIHx8ICgoKDcwNzUxIDw9IGNvZGUpICYmIChjb2RlIDw9IDcwNzUzKSkgfHwgKCgoNzA3ODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzA4MzEpKSB8fCAoKCg3MDg1MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MDg1MykpIHx8ICgoY29kZSA9PT0gNzA4NTUpIHx8ICgoKDcwODY0IDw9IGNvZGUpICYmIChjb2RlIDw9IDcwODczKSkgfHwgKCgoNzEwNDAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzEwODYpKSB8fCAoKCg3MTEyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MTEzMSkpIHx8ICgoKDcxMTY4IDw9IGNvZGUpICYmIChjb2RlIDw9IDcxMjE1KSkgfHwgKChjb2RlID09PSA3MTIzNikgfHwgKCgoNzEyNDggPD0gY29kZSkgJiYgKGNvZGUgPD0gNzEyNTcpKSB8fCAoKDcxMjk2IDw9IGNvZGUpICYmIChjb2RlIDw9IDcxMzM4KSkpKSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCAxMTk4OTMpID8gKChjb2RlIDwgNzM3MjcpID8gKChjb2RlIDwgNzI3MDMpID8gKChjb2RlIDwgNzE5NTkpID8gKChjb2RlID09PSA3MTM1MikgfHwgKCgoNzEzNjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzEzNjkpKSB8fCAoKCg3MTQyNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MTQ1MCkpIHx8ICgoKDcxNDcyIDw9IGNvZGUpICYmIChjb2RlIDw9IDcxNDgzKSkgfHwgKCgoNzE0ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gNzE0OTQpKSB8fCAoKCg3MTY4MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MTcyMykpIHx8ICgoKDcxODQwIDw9IGNvZGUpICYmIChjb2RlIDw9IDcxOTIyKSkgfHwgKCgoNzE5MzUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzE5NDIpKSB8fCAoKGNvZGUgPT09IDcxOTQ1KSB8fCAoKCg3MTk0OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MTk1NSkpIHx8ICgoNzE5NTcgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzE5NTgpKSkpKSkpKSkpKSkgOiAoKCg3MTk2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MTk4MykpIHx8ICgoKDcyMDE2IDw9IGNvZGUpICYmIChjb2RlIDw9IDcyMDI1KSkgfHwgKCgoNzIwOTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzIxMDMpKSB8fCAoKCg3MjEwNiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MjE0NCkpIHx8ICgoY29kZSA9PT0gNzIxOTIpIHx8ICgoKDcyMjAzIDw9IGNvZGUpICYmIChjb2RlIDw9IDcyMjQyKSkgfHwgKChjb2RlID09PSA3MjI1MCkgfHwgKChjb2RlID09PSA3MjI3MikgfHwgKCgoNzIyODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzIzMjkpKSB8fCAoKGNvZGUgPT09IDcyMzQ5KSB8fCAoKCg3MjM2OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MjQ0MCkpIHx8ICgoQTIoJGVsbSRjb3JlJEJhc2ljcyRtb2RCeSwgMiwgY29kZSkgPT09IDEpICYmICgoKDcxOTk5IDw9IGNvZGUpICYmIChjb2RlIDw9IDcyMDAxKSkgfHwgKCg3MjE2MSA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MjE2MykpKSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCA3MzA2MikgPyAoKCg3MjcwNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MjcxMikpIHx8ICgoKDcyNzE0IDw9IGNvZGUpICYmIChjb2RlIDw9IDcyNzUwKSkgfHwgKChjb2RlID09PSA3Mjc2OCkgfHwgKCgoNzI3ODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzI4MTIpKSB8fCAoKCg3MjgxOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3Mjg0NykpIHx8ICgoKDcyOTYwIDw9IGNvZGUpICYmIChjb2RlIDw9IDcyOTY2KSkgfHwgKCgoNzI5NjggPD0gY29kZSkgJiYgKGNvZGUgPD0gNzI5NjkpKSB8fCAoKCg3Mjk3MSA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MzAwOCkpIHx8ICgoY29kZSA9PT0gNzMwMzApIHx8ICgoKDczMDQwIDw9IGNvZGUpICYmIChjb2RlIDw9IDczMDQ5KSkgfHwgKCg3MzA1NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MzA2MSkpKSkpKSkpKSkpKSA6ICgoKDczMDYzIDw9IGNvZGUpICYmIChjb2RlIDw9IDczMDY0KSkgfHwgKCgoNzMwNjYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzMwOTcpKSB8fCAoKGNvZGUgPT09IDczMTEyKSB8fCAoKCg3MzEyMCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MzEyOSkpIHx8ICgoKDczNDQwIDw9IGNvZGUpICYmIChjb2RlIDw9IDczNDU4KSkgfHwgKChjb2RlID09PSA3MzQ3NCkgfHwgKCgoNzM0NzYgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzM0ODgpKSB8fCAoKCg3MzQ5MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MzUyMykpIHx8ICgoKDczNTUyIDw9IGNvZGUpICYmIChjb2RlIDw9IDczNTYxKSkgfHwgKChjb2RlID09PSA3MzY0OCkgfHwgKCg3MzY2NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3MzY4NCkpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgOTQwOTgpID8gKChjb2RlIDwgOTI4NjMpID8gKCgoNzM3MjggPD0gY29kZSkgJiYgKGNvZGUgPD0gNzQ2NDkpKSB8fCAoKCg3NDc1MiA8PSBjb2RlKSAmJiAoY29kZSA8PSA3NDg2MikpIHx8ICgoKDc0ODgwIDw9IGNvZGUpICYmIChjb2RlIDw9IDc1MDc1KSkgfHwgKCgoNzc3MTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gNzc4MDgpKSB8fCAoKCg3NzgyNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3ODg5NSkpIHx8ICgoKDc4OTEzIDw9IGNvZGUpICYmIChjb2RlIDw9IDc4OTE4KSkgfHwgKCgoODI5NDQgPD0gY29kZSkgJiYgKGNvZGUgPD0gODM1MjYpKSB8fCAoKCg5MjE2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA5MjcyOCkpIHx8ICgoKDkyNzM2IDw9IGNvZGUpICYmIChjb2RlIDw9IDkyNzY2KSkgfHwgKCgoOTI3NjggPD0gY29kZSkgJiYgKGNvZGUgPD0gOTI3NzcpKSB8fCAoKDkyNzg0IDw9IGNvZGUpICYmIChjb2RlIDw9IDkyODYyKSkpKSkpKSkpKSkpIDogKCgoOTI4NjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTI4NzMpKSB8fCAoKCg5Mjg4MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA5MjkwOSkpIHx8ICgoKDkyOTI4IDw9IGNvZGUpICYmIChjb2RlIDw9IDkyOTc1KSkgfHwgKCgoOTI5OTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTI5OTUpKSB8fCAoKCg5MzAwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA5MzAxNykpIHx8ICgoKDkzMDE5IDw9IGNvZGUpICYmIChjb2RlIDw9IDkzMDI1KSkgfHwgKCgoOTMwMjcgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTMwNDcpKSB8fCAoKCg5MzA1MyA8PSBjb2RlKSAmJiAoY29kZSA8PSA5MzA3MSkpIHx8ICgoKDkzNzYwIDw9IGNvZGUpICYmIChjb2RlIDw9IDkzODQ2KSkgfHwgKCgoOTM5NTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTQwMjYpKSB8fCAoY29kZSA9PT0gOTQwMzIpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCAxMTA5MjcpID8gKCgoOTQwOTkgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTQxMTEpKSB8fCAoKCg5NDE3NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA5NDE3NykpIHx8ICgoY29kZSA9PT0gOTQxNzkpIHx8ICgoKDk0MjA4IDw9IGNvZGUpICYmIChjb2RlIDw9IDEwMDM0MykpIHx8ICgoKDEwMDM1MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMDE1ODkpKSB8fCAoKCgxMDE2MzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTAxNjQwKSkgfHwgKCgoMTEwNTc2IDw9IGNvZGUpICYmIChjb2RlIDw9IDExMDU3OSkpIHx8ICgoKDExMDU4MSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTA1ODcpKSB8fCAoKCgxMTA1ODkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTEwNTkwKSkgfHwgKCgoMTEwNTkyIDw9IGNvZGUpICYmIChjb2RlIDw9IDExMDg4MikpIHx8IChjb2RlID09PSAxMTA4OTgpKSkpKSkpKSkpKSA6ICgoKDExMDkyOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTA5MzApKSB8fCAoKGNvZGUgPT09IDExMDkzMykgfHwgKCgoMTEwOTQ4IDw9IGNvZGUpICYmIChjb2RlIDw9IDExMDk1MSkpIHx8ICgoKDExMDk2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTEzNTUpKSB8fCAoKCgxMTM2NjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTEzNzcwKSkgfHwgKCgoMTEzNzc2IDw9IGNvZGUpICYmIChjb2RlIDw9IDExMzc4OCkpIHx8ICgoKDExMzc5MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTM4MDApKSB8fCAoKCgxMTM4MDggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTEzODE3KSkgfHwgKCgoMTE5NDg4IDw9IGNvZGUpICYmIChjb2RlIDw9IDExOTUwNykpIHx8ICgoKDExOTUyMCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk1MzkpKSB8fCAoKCgxMTk2NDggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE5NjcyKSkgfHwgKCgxMTk4MDggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE5ODkyKSkpKSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDEyNDkxMSkgPyAoKGNvZGUgPCAxMjA1OTcpID8gKChjb2RlIDwgMTIwMDg1KSA/ICgoKDExOTg5NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk5NjQpKSB8fCAoKCgxMTk5NjYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE5OTY3KSkgfHwgKChjb2RlID09PSAxMTk5NzApIHx8ICgoKDExOTk3MyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk5NzQpKSB8fCAoKCgxMTk5NzcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE5OTgwKSkgfHwgKCgoMTE5OTgyIDw9IGNvZGUpICYmIChjb2RlIDw9IDExOTk5MykpIHx8ICgoY29kZSA9PT0gMTE5OTk1KSB8fCAoKCgxMTk5OTcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMDAzKSkgfHwgKCgoMTIwMDA1IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDA2OSkpIHx8ICgoKDEyMDA3MSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAwNzQpKSB8fCAoKDEyMDA3NyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAwODQpKSkpKSkpKSkpKSkgOiAoKCgxMjAwODYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMDkyKSkgfHwgKCgoMTIwMDk0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDEyMSkpIHx8ICgoKDEyMDEyMyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAxMjYpKSB8fCAoKCgxMjAxMjggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMTMyKSkgfHwgKChjb2RlID09PSAxMjAxMzQpIHx8ICgoKDEyMDEzOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAxNDQpKSB8fCAoKCgxMjAxNDYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNDg1KSkgfHwgKCgoMTIwNDg4IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDUxMikpIHx8ICgoKDEyMDUxNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA1MzgpKSB8fCAoKCgxMjA1NDAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNTcwKSkgfHwgKCgxMjA1NzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNTk2KSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDEyMzEzNSkgPyAoKCgxMjA1OTggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNjI4KSkgfHwgKCgoMTIwNjMwIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDY1NCkpIHx8ICgoKDEyMDY1NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA2ODYpKSB8fCAoKCgxMjA2ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNzEyKSkgfHwgKCgoMTIwNzE0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDc0NCkpIHx8ICgoKDEyMDc0NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA3NzApKSB8fCAoKCgxMjA3NzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNzc5KSkgfHwgKCgoMTIwNzgyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDgzMSkpIHx8ICgoKDEyMjYyNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjI2NTQpKSB8fCAoKCgxMjI2NjEgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIyNjY2KSkgfHwgKCgxMjI5MjggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIyOTg5KSkpKSkpKSkpKSkpIDogKCgoMTIzMTM2IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMzE4MCkpIHx8ICgoKDEyMzE5MSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjMxOTcpKSB8fCAoKCgxMjMyMDAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIzMjA5KSkgfHwgKChjb2RlID09PSAxMjMyMTQpIHx8ICgoKDEyMzUzNiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjM1NjUpKSB8fCAoKCgxMjM1ODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIzNjI3KSkgfHwgKCgoMTIzNjMyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMzY0MSkpIHx8ICgoKDEyNDExMiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjQxMzkpKSB8fCAoKCgxMjQxNDQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI0MTUzKSkgfHwgKCgoMTI0ODk2IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNDkwMikpIHx8ICgoKDEyNDkwNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjQ5MDcpKSB8fCAoKDEyNDkwOSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjQ5MTApKSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCAxMjY1NjApID8gKChjb2RlIDwgMTI2NDYzKSA/ICgoKDEyNDkxMiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjQ5MjYpKSB8fCAoKCgxMjQ5MjggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI1MTI0KSkgfHwgKCgoMTI1MTI3IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNTEzNSkpIHx8ICgoKDEyNTE4NCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjUyNTEpKSB8fCAoKGNvZGUgPT09IDEyNTI1OSkgfHwgKCgoMTI1MjY0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNTI3MykpIHx8ICgoKDEyNjA2NSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjYxMjMpKSB8fCAoKCgxMjYxMjUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2MTI3KSkgfHwgKCgoMTI2MTI5IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjEzMikpIHx8ICgoKDEyNjIwOSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjYyNTMpKSB8fCAoKDEyNjI1NSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjYyNjkpKSkpKSkpKSkpKSkgOiAoKCgxMjY0NjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2NDY3KSkgfHwgKCgoMTI2NDY5IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjQ5NSkpIHx8ICgoKDEyNjQ5NyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY0OTgpKSB8fCAoKGNvZGUgPT09IDEyNjUwMCkgfHwgKChjb2RlID09PSAxMjY1MDMpIHx8ICgoKDEyNjUwNSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY1MTQpKSB8fCAoKCgxMjY1MTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2NTE5KSkgfHwgKChjb2RlID09PSAxMjY1MzApIHx8ICgoKDEyNjU0MSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY1NDMpKSB8fCAoKCgxMjY1NDUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2NTQ2KSkgfHwgKChjb2RlID09PSAxMjY1NDgpIHx8ICgoQTIoJGVsbSRjb3JlJEJhc2ljcyRtb2RCeSwgMiwgY29kZSkgPT09IDEpICYmICgoKDEyNjUyMSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY1MjMpKSB8fCAoKCgxMjY1MzUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2NTM5KSkgfHwgKCgxMjY1NTEgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2NTU5KSkpKSkpKSkpKSkpKSkpKSkgOiAoKGNvZGUgPCAxMjY2MzQpID8gKCgoMTI2NTYxIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjU2MikpIHx8ICgoY29kZSA9PT0gMTI2NTY0KSB8fCAoKCgxMjY1NjcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2NTcwKSkgfHwgKCgoMTI2NTcyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjU3OCkpIHx8ICgoKDEyNjU4MCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY1ODMpKSB8fCAoKCgxMjY1ODUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2NTg4KSkgfHwgKChjb2RlID09PSAxMjY1OTApIHx8ICgoKDEyNjU5MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY2MDEpKSB8fCAoKCgxMjY2MDMgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI2NjE5KSkgfHwgKCgoMTI2NjI1IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjYyNykpIHx8ICgoMTI2NjI5IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyNjYzMykpKSkpKSkpKSkpKSA6ICgoKDEyNjYzNSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjY2NTEpKSB8fCAoKCgxMjcyMzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTI3MjQ0KSkgfHwgKCgoMTMwMDMyIDw9IGNvZGUpICYmIChjb2RlIDw9IDEzMDA0MSkpIHx8ICgoKDEzMTA3MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxNzM3OTEpKSB8fCAoKCgxNzM4MjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTc3OTc3KSkgfHwgKCgoMTc3OTg0IDw9IGNvZGUpICYmIChjb2RlIDw9IDE3ODIwNSkpIHx8ICgoKDE3ODIwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxODM5NjkpKSB8fCAoKCgxODM5ODQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTkxNDU2KSkgfHwgKCgoMTkxNDcyIDw9IGNvZGUpICYmIChjb2RlIDw9IDE5MjA5MykpIHx8ICgoKDE5NDU2MCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxOTUxMDEpKSB8fCAoKCgxOTY2MDggPD0gY29kZSkgJiYgKGNvZGUgPD0gMjAxNTQ2KSkgfHwgKCgyMDE1NTIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMjA1NzQzKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpOwp9Owp2YXIgJGVsbSRjb3JlJFN0cmluZyRmcm9tQ2hhciA9IGZ1bmN0aW9uIChfY2hhcikgewoJcmV0dXJuIEEyKCRlbG0kY29yZSRTdHJpbmckY29ucywgX2NoYXIsICcnKTsKfTsKdmFyICRlbG0kY29yZSRTdHJpbmckdG9Mb3dlciA9IF9TdHJpbmdfdG9Mb3dlcjsKdmFyICRlbG0kY29yZSRTdHJpbmckdG9VcHBlciA9IF9TdHJpbmdfdG9VcHBlcjsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJHVuaWNvZGVJc0xvd2VyRmFzdCA9IGZ1bmN0aW9uIChjKSB7Cgl2YXIgY29kZSA9ICRlbG0kY29yZSRDaGFyJHRvQ29kZShjKTsKCXZhciBjU3RyaW5nID0gJGVsbSRjb3JlJFN0cmluZyRmcm9tQ2hhcihjKTsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRjaGFyQ29kZUlzTG93ZXIoY29kZSkgfHwgKChfVXRpbHNfZXEoCgkJJGVsbSRjb3JlJFN0cmluZyR0b0xvd2VyKGNTdHJpbmcpLAoJCWNTdHJpbmcgKyAnJykgJiYgKCFfVXRpbHNfZXEoCgkJJGVsbSRjb3JlJFN0cmluZyR0b1VwcGVyKGNTdHJpbmcpLAoJCWNTdHJpbmcgKyAnJykpKSA/ICgoY29kZSA8PSA4MzYpIHx8ICgoKDgzOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4NTU5KSkgfHwgKCgoODU3NiA8PSBjb2RlKSAmJiAoY29kZSA8PSA5NDIzKSkgfHwgKCg5NDUwIDw9IGNvZGUpICYmIChjb2RlIDw9IDk4MzA0MCkpKSkpIDogKChjb2RlIDwgNDMwMDEpID8gKChjb2RlIDwgODQ1NykgPyAoKGNvZGUgPCA1OTApID8gKCgoMzExIDw9IGNvZGUpICYmIChjb2RlIDw9IDMxMikpIHx8ICgoKDM5NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAzOTcpKSB8fCAoKCg0MDkgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDExKSkgfHwgKCgoNDI2IDw9IGNvZGUpICYmIChjb2RlIDw9IDQyNykpIHx8ICgoKDQ0MSA8PSBjb2RlKSAmJiAoY29kZSA8PSA0NDIpKSB8fCAoKCg0NDUgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDQ3KSkgfHwgKChjb2RlID09PSA1NDUpIHx8ICgoNTYzIDw9IGNvZGUpICYmIChjb2RlIDw9IDU2OSkpKSkpKSkpKSA6ICgoKDU5MSA8PSBjb2RlKSAmJiAoY29kZSA8PSA2NTkpKSB8fCAoKCg2NjEgPD0gY29kZSkgJiYgKGNvZGUgPD0gNjg3KSkgfHwgKCgoMTAxOSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMDIwKSkgfHwgKCgoMTM3NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxNDE2KSkgfHwgKCgoNzQyNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA3NDY3KSkgfHwgKCgoNzUzMSA8PSBjb2RlKSAmJiAoY29kZSA8PSA3NTQzKSkgfHwgKCgoNzU0NSA8PSBjb2RlKSAmJiAoY29kZSA8PSA3NTc4KSkgfHwgKCgoNzgyOSA8PSBjb2RlKSAmJiAoY29kZSA8PSA3ODM3KSkgfHwgKGNvZGUgPT09IDc4MzkpKSkpKSkpKSkpIDogKChjb2RlIDwgMTEzNzYpID8gKChjb2RlID09PSA4NDU4KSB8fCAoKCg4NDYyIDw9IGNvZGUpICYmIChjb2RlIDw9IDg0NjMpKSB8fCAoKGNvZGUgPT09IDg0NjcpIHx8ICgoY29kZSA9PT0gODQ5NSkgfHwgKChjb2RlID09PSA4NTAwKSB8fCAoKGNvZGUgPT09IDg1MDUpIHx8ICgoKDg1MDggPD0gY29kZSkgJiYgKGNvZGUgPD0gODUwOSkpIHx8ICgoODUxOCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4NTIxKSkpKSkpKSkpIDogKChjb2RlID09PSAxMTM3NykgfHwgKCgoMTEzNzkgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTEzODApKSB8fCAoKCgxMTM4MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTM4NykpIHx8ICgoKDExNDkxIDw9IGNvZGUpICYmIChjb2RlIDw9IDExNDkyKSkgfHwgKCgoNDI3OTkgPD0gY29kZSkgJiYgKGNvZGUgPD0gNDI4MDEpKSB8fCAoKCg0Mjg2NSA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mjg3MikpIHx8ICgoY29kZSA9PT0gNDI4OTQpIHx8ICgoKDQyODk5IDw9IGNvZGUpICYmIChjb2RlIDw9IDQyOTAxKSkgfHwgKChjb2RlID09PSA0MjkyNykgfHwgKChBMigkZWxtJGNvcmUkQmFzaWNzJG1vZEJ5LCAyLCBjb2RlKSA9PT0gMSkgJiYgKCg0Mjk2MyA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mjk2NSkpKSkpKSkpKSkpKSkpIDogKChjb2RlIDwgMTIwMzUzKSA/ICgoY29kZSA8IDExOTk5NCkgPyAoKGNvZGUgPT09IDQzMDAyKSB8fCAoKCg0MzgyNCA8PSBjb2RlKSAmJiAoY29kZSA8PSA0Mzg2NikpIHx8ICgoKDQzODcyIDw9IGNvZGUpICYmIChjb2RlIDw9IDQzODgwKSkgfHwgKCgoMTE5ODM0IDw9IGNvZGUpICYmIChjb2RlIDw9IDExOTg1OSkpIHx8ICgoKDExOTg4NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk4OTIpKSB8fCAoKCgxMTk4OTQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE5OTExKSkgfHwgKCgoMTE5OTM4IDw9IGNvZGUpICYmIChjb2RlIDw9IDExOTk2MykpIHx8ICgoMTE5OTkwIDw9IGNvZGUpICYmIChjb2RlIDw9IDExOTk5MykpKSkpKSkpKSA6ICgoY29kZSA9PT0gMTE5OTk1KSB8fCAoKCgxMTk5OTcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMDAzKSkgfHwgKCgoMTIwMDA1IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDAxNSkpIHx8ICgoKDEyMDA0MiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAwNjcpKSB8fCAoKCgxMjAwOTQgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMTE5KSkgfHwgKCgoMTIwMTQ2IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDE3MSkpIHx8ICgoKDEyMDE5OCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAyMjMpKSB8fCAoKCgxMjAyNTAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMjc1KSkgfHwgKCgxMjAzMDIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMzI3KSkpKSkpKSkpKSkgOiAoKGNvZGUgPCAxMjA2NTUpID8gKCgoMTIwMzU0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDM3OSkpIHx8ICgoKDEyMDQwNiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA0MzEpKSB8fCAoKCgxMjA0NTggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNDg1KSkgfHwgKCgoMTIwNTE0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDUzOCkpIHx8ICgoKDEyMDU0MCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA1NDUpKSB8fCAoKCgxMjA1NzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNTk2KSkgfHwgKCgoMTIwNTk4IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDYwMykpIHx8ICgoMTIwNjMwIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDY1NCkpKSkpKSkpKSA6ICgoKDEyMDY1NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA2NjEpKSB8fCAoKCgxMjA2ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNzEyKSkgfHwgKCgoMTIwNzE0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDcxOSkpIHx8ICgoKDEyMDc0NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA3NzApKSB8fCAoKCgxMjA3NzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNzc3KSkgfHwgKChjb2RlID09PSAxMjA3NzkpIHx8ICgoKDEyMjYyNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjI2MzMpKSB8fCAoKCgxMjI2MzUgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIyNjU0KSkgfHwgKCgxMjI2NjEgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIyNjY2KSkpKSkpKSkpKSkpKSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lTm9kZSA9IEE0KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGlmRm9sbG93ZWRCeVdoaWxlVmFsaWRhdGVNYXBXaXRoUmFuZ2VXaXRob3V0TGluZWJyZWFrLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJHVuaWNvZGVJc0xvd2VyRmFzdCwgJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkdW5pY29kZUlzQWxwaGFOdW1PclVuZGVyc2NvcmVGYXN0LCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkaXNOb3RSZXNlcnZlZCk7CnZhciAkZWxtJGNvcmUkQmFzaWNzJGdlID0gX1V0aWxzX2dlOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRHTFNMRXhwcmVzc2lvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdHTFNMRXhwcmVzc2lvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFVudGlsSGVscCA9IEY3KAoJZnVuY3Rpb24gKGNvbW1pdHRlZFNvRmFyLCBlbmRQYXJzZXIsIGVsZW1lbnQsIHNvRmFyLCByZWR1Y2UsIGZvbGRlZFRvUmVzLCBzMCkgewoJCWxvb3BVbnRpbEhlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJdmFyIHBhcnNlRW5kID0gZW5kUGFyc2VyLmE7CgkJCXZhciBwYXJzZUVsZW1lbnQgPSBlbGVtZW50LmE7CgkJCXZhciBfdjAgPSBwYXJzZUVuZChzMCk7CgkJCWlmIChfdjAuJCA9PT0gJ0dvb2QnKSB7CgkJCQl2YXIgczEgPSBfdjAuYjsKCQkJCXJldHVybiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCWZvbGRlZFRvUmVzKHNvRmFyKSwKCQkJCQlzMSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgZW5kQ29tbWl0dGVkID0gX3YwLmE7CgkJCQl2YXIgZW5kWCA9IF92MC5iOwoJCQkJaWYgKGVuZENvbW1pdHRlZCkgewoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIGVuZFgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YxID0gcGFyc2VFbGVtZW50KHMwKTsKCQkJCQlpZiAoX3YxLiQgPT09ICdHb29kJykgewoJCQkJCQl2YXIgZWxlbWVudFJlc3VsdCA9IF92MS5hOwoJCQkJCQl2YXIgczEgPSBfdjEuYjsKCQkJCQkJdmFyICR0ZW1wJGNvbW1pdHRlZFNvRmFyID0gdHJ1ZSwKCQkJCQkJCSR0ZW1wJGVuZFBhcnNlciA9IGVuZFBhcnNlciwKCQkJCQkJCSR0ZW1wJGVsZW1lbnQgPSBlbGVtZW50LAoJCQkJCQkJJHRlbXAkc29GYXIgPSBBMihyZWR1Y2UsIGVsZW1lbnRSZXN1bHQsIHNvRmFyKSwKCQkJCQkJCSR0ZW1wJHJlZHVjZSA9IHJlZHVjZSwKCQkJCQkJCSR0ZW1wJGZvbGRlZFRvUmVzID0gZm9sZGVkVG9SZXMsCgkJCQkJCQkkdGVtcCRzMCA9IHMxOwoJCQkJCQljb21taXR0ZWRTb0ZhciA9ICR0ZW1wJGNvbW1pdHRlZFNvRmFyOwoJCQkJCQllbmRQYXJzZXIgPSAkdGVtcCRlbmRQYXJzZXI7CgkJCQkJCWVsZW1lbnQgPSAkdGVtcCRlbGVtZW50OwoJCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCQlyZWR1Y2UgPSAkdGVtcCRyZWR1Y2U7CgkJCQkJCWZvbGRlZFRvUmVzID0gJHRlbXAkZm9sZGVkVG9SZXM7CgkJCQkJCXMwID0gJHRlbXAkczA7CgkJCQkJCWNvbnRpbnVlIGxvb3BVbnRpbEhlbHA7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGVsZW1lbnRDb21taXR0ZWQgPSBfdjEuYTsKCQkJCQkJdmFyIHggPSBfdjEuYjsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkU29GYXIgfHwgZWxlbWVudENvbW1pdHRlZCwgeCk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wVW50aWwgPSBGNSgKCWZ1bmN0aW9uIChlbmRQYXJzZXIsIGVsZW1lbnQsIGluaXRpYWxGb2xkZWQsIHJlZHVjZSwgZm9sZGVkVG9SZXMpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJcmV0dXJuIEE3KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxvb3BVbnRpbEhlbHAsIGZhbHNlLCBlbmRQYXJzZXIsIGVsZW1lbnQsIGluaXRpYWxGb2xkZWQsIHJlZHVjZSwgZm9sZGVkVG9SZXMsIHMpOwoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwV2l0aFJhbmdlID0gRjIoCglmdW5jdGlvbiAoY29tYmluZVN0YXJ0QW5kUmVzdWx0LCBfdjApIHsKCQl2YXIgcGFyc2UgPSBfdjAuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjEgPSBwYXJzZShzMCk7CgkJCQlpZiAoX3YxLiQgPT09ICdHb29kJykgewoJCQkJCXZhciBhID0gX3YxLmE7CgkJCQkJdmFyIHMxID0gX3YxLmI7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQlBMigKCQkJCQkJCWNvbWJpbmVTdGFydEFuZFJlc3VsdCwKCQkJCQkJCXsKCQkJCQkJCQllbmQ6IHtjb2x1bW46IHMxLmNvbCwgcm93OiBzMS5yb3d9LAoJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzMC5jb2wsIHJvdzogczAucm93fQoJCQkJCQkJfSwKCQkJCQkJCWEpLAoJCQkJCQlzMSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjEuYTsKCQkJCQl2YXIgeCA9IF92MS5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGdsc2xFeHByZXNzaW9uQWZ0ZXJPcGVuaW5nU3F1YXJlQnJhY2tldCA9IEEyKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCSdnbHNsfCcsCglBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXBXaXRoUmFuZ2UsCgkJRjIoCgkJCWZ1bmN0aW9uIChyYW5nZSwgcykgewoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQkJc3ludGF4OiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQl7CgkJCQkJCQllbmQ6IHtjb2x1bW46IHJhbmdlLmVuZC5jb2x1bW4gKyAyLCByb3c6IHJhbmdlLmVuZC5yb3d9LAoJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHJhbmdlLnN0YXJ0LmNvbHVtbiAtIDYsIHJvdzogcmFuZ2Uuc3RhcnQucm93fQoJCQkJCQl9LAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJEdMU0xFeHByZXNzaW9uKHMpKQoJCQkJfTsKCQkJfSksCgkJQTUoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxvb3BVbnRpbCwKCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLCAnfF0nLCBfVXRpbHNfVHVwbGUwKSwKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wsICd8JywgJ3wnKSwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHdoaWxlKAoJCQkJCWZ1bmN0aW9uIChjKSB7CgkJCQkJCXJldHVybiAhX1V0aWxzX2VxKAoJCQkJCQkJYywKCQkJCQkJCV9VdGlsc19jaHIoJ3wnKSk7CgkJCQkJfSkpLAoJCQknJywKCQkJRjIoCgkJCQlmdW5jdGlvbiAoZXh0ZW5zaW9uLCBzb0ZhcikgewoJCQkJCXJldHVybiBzb0ZhciArIChleHRlbnNpb24gKyAnJyk7CgkJCQl9KSwKCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSkpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0tleXdvcmQgPSBGMygKCWZ1bmN0aW9uIChhLCBiLCBjKSB7CgkJcmV0dXJuIHskOiAnRXhwZWN0aW5nS2V5d29yZCcsIGE6IGEsIGI6IGIsIGM6IGN9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRpc0xhdGluQWxwaGFOdW1PclVuZGVyc2NvcmVGYXN0ID0gZnVuY3Rpb24gKGMpIHsKCXZhciBjb2RlID0gJGVsbSRjb3JlJENoYXIkdG9Db2RlKGMpOwoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGNoYXJDb2RlSXNMb3dlcihjb2RlKSB8fCAoJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkY2hhckNvZGVJc1VwcGVyKGNvZGUpIHx8ICgkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRjaGFyQ29kZUlzRGlnaXQoY29kZSkgfHwgKGNvZGUgPT09IDk1KSkpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaXNTdWJDaGFyQWxwaGFOdW1PclVuZGVyc2NvcmUgPSBGMigKCWZ1bmN0aW9uIChvZmZzZXQsIHN0cmluZykgewoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJFN0cmluZyRhbnksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGlzTGF0aW5BbHBoYU51bU9yVW5kZXJzY29yZUZhc3QsCgkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMSwgc3RyaW5nKSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmQgPSBGMigKCWZ1bmN0aW9uIChrd2QsIHJlcykgewoJCXZhciBrd2RMZW5ndGggPSAkZWxtJGNvcmUkU3RyaW5nJGxlbmd0aChrd2QpOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQl2YXIgbmV3T2Zmc2V0ID0gcy5vZmZzZXQgKyBrd2RMZW5ndGg7CgkJCQlyZXR1cm4gKF9VdGlsc19lcSgKCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzLm9mZnNldCwgbmV3T2Zmc2V0LCBzLnNyYyksCgkJCQkJa3dkICsgJycpICYmICghQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaXNTdWJDaGFyQWxwaGFOdW1PclVuZGVyc2NvcmUsIG5ld09mZnNldCwgcy5zcmMpKSkgPyBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCXJlcywKCQkJCQl7Y29sOiBzLmNvbCArIGt3ZExlbmd0aCwgaW5kZW50OiBzLmluZGVudCwgb2Zmc2V0OiBuZXdPZmZzZXQsIHJvdzogcy5yb3csIHNyYzogcy5zcmN9KSA6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQlmYWxzZSwKCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdLZXl3b3JkLCBzLnJvdywgcy5jb2wsIGt3ZCkpOwoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGluVG9rZW4gPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkLCAnaW4nLCBfVXRpbHNfVHVwbGUwKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5ID0gRjIoCglmdW5jdGlvbiAoa3dkLCBfdjApIHsKCQl2YXIgcGFyc2VOZXh0ID0gX3YwLmE7CgkJdmFyIGt3ZExlbmd0aCA9ICRlbG0kY29yZSRTdHJpbmckbGVuZ3RoKGt3ZCk7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBuZXdPZmZzZXQgPSBzLm9mZnNldCArIGt3ZExlbmd0aDsKCQkJCXJldHVybiAoX1V0aWxzX2VxKAoJCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIHMub2Zmc2V0LCBuZXdPZmZzZXQsIHMuc3JjKSwKCQkJCQlrd2QgKyAnJykgJiYgKCFBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpc1N1YkNoYXJBbHBoYU51bU9yVW5kZXJzY29yZSwgbmV3T2Zmc2V0LCBzLnNyYykpKSA/ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHBTdGVwQ29tbWl0KAoJCQkJCXBhcnNlTmV4dCgKCQkJCQkJe2NvbDogcy5jb2wgKyBrd2RMZW5ndGgsIGluZGVudDogcy5pbmRlbnQsIG9mZnNldDogbmV3T2Zmc2V0LCByb3c6IHMucm93LCBzcmM6IHMuc3JjfSkpIDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCWZhbHNlLAoJCQkJCUEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0tleXdvcmQsIHMucm93LCBzLmNvbCwga3dkKSk7CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyID0gRjMoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEpIHsKCQl2YXIgcGFyc2VBID0gX3YwLmE7CgkJdmFyIHBhcnNlQiA9IF92MS5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92MiA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3YyLiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92Mi5hOwoJCQkJCXZhciB4ID0gX3YyLmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjIuYTsKCQkJCQl2YXIgczEgPSBfdjIuYjsKCQkJCQl2YXIgX3YzID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3YzLiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3YzLmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3YzLmE7CgkJCQkJCXZhciBzMiA9IF92My5iOwoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJQTIoZnVuYywgYSwgYiksCgkJCQkJCQlzMik7CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29sdW1uSW5kZW50QW5kVGhlbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQlmdW5jdGlvbiAocykgewoJCQl2YXIgX3YwID0gQTIoY2FsbGJhY2ssIHMuY29sLCBzLmluZGVudCk7CgkJCXZhciBwYXJzZSA9IF92MC5hOwoJCQlyZXR1cm4gcGFyc2Uocyk7CgkJfSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdDdXN0b20gPSBGMygKCWZ1bmN0aW9uIChhLCBiLCBjKSB7CgkJcmV0dXJuIHskOiAnRXhwZWN0aW5nQ3VzdG9tJywgYTogYSwgYjogYiwgYzogY307Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHByb2JsZW0gPSBmdW5jdGlvbiAobXNnKSB7CglyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCWZ1bmN0aW9uIChzKSB7CgkJCXJldHVybiBBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCWZhbHNlLAoJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nQ3VzdG9tLCBzLnJvdywgcy5jb2wsIG1zZykpOwoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHByb2JsZW1Ub3BJbmRlbnRhdGlvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHByb2JsZW0oJ211c3QgYmUgb24gdG9wIGluZGVudGF0aW9uJyk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb25Ub3BJbmRlbnRhdGlvbkZvbGxvd2VkQnkgPSBmdW5jdGlvbiAobmV4dFBhcnNlcikgewoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbHVtbkluZGVudEFuZFRoZW4oCgkJRjIoCgkJCWZ1bmN0aW9uIChjb2x1bW4sIGluZGVudCkgewoJCQkJcmV0dXJuICghKGNvbHVtbiAtIGluZGVudCkpID8gbmV4dFBhcnNlciA6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRwcm9ibGVtVG9wSW5kZW50YXRpb247CgkJCX0pKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdoaXRlc3BhY2VIZWxwID0gRjUoCglmdW5jdGlvbiAob2Zmc2V0LCByb3csIGNvbCwgc3JjLCBpbmRlbnQpIHsKCQlza2lwV2hpbGVXaGl0ZXNwYWNlSGVscDoKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgX3YwID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQlzd2l0Y2ggKF92MCkgewoJCQkJY2FzZSAnICc6CgkJCQkJdmFyICR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHJvdyA9IHJvdywKCQkJCQkJJHRlbXAkY29sID0gY29sICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjLAoJCQkJCQkkdGVtcCRpbmRlbnQgPSBpbmRlbnQ7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXJvdyA9ICR0ZW1wJHJvdzsKCQkJCQljb2wgPSAkdGVtcCRjb2w7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWluZGVudCA9ICR0ZW1wJGluZGVudDsKCQkJCQljb250aW51ZSBza2lwV2hpbGVXaGl0ZXNwYWNlSGVscDsKCQkJCWNhc2UgJ1xuJzoKCQkJCQl2YXIgJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkcm93ID0gcm93ICsgMSwKCQkJCQkJJHRlbXAkY29sID0gMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjLAoJCQkJCQkkdGVtcCRpbmRlbnQgPSBpbmRlbnQ7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXJvdyA9ICR0ZW1wJHJvdzsKCQkJCQljb2wgPSAkdGVtcCRjb2w7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWluZGVudCA9ICR0ZW1wJGluZGVudDsKCQkJCQljb250aW51ZSBza2lwV2hpbGVXaGl0ZXNwYWNlSGVscDsKCQkJCWNhc2UgJ1x1MDAwRCc6CgkJCQkJdmFyICR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHJvdyA9IHJvdywKCQkJCQkJJHRlbXAkY29sID0gY29sICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjLAoJCQkJCQkkdGVtcCRpbmRlbnQgPSBpbmRlbnQ7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXJvdyA9ICR0ZW1wJHJvdzsKCQkJCQljb2wgPSAkdGVtcCRjb2w7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWluZGVudCA9ICR0ZW1wJGluZGVudDsKCQkJCQljb250aW51ZSBza2lwV2hpbGVXaGl0ZXNwYWNlSGVscDsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIHtjb2w6IGNvbCwgaW5kZW50OiBpbmRlbnQsIG9mZnNldDogb2Zmc2V0LCByb3c6IHJvdywgc3JjOiBzcmN9OwoJCQl9CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U2tpcFdoaWxlV2hpdGVzcGFjZSA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBwYXJzZUJlZm9yZSA9IF92MC5hOwoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQlmdW5jdGlvbiAoczApIHsKCQkJdmFyIF92MSA9IHBhcnNlQmVmb3JlKHMwKTsKCQkJaWYgKF92MS4kID09PSAnR29vZCcpIHsKCQkJCXZhciByZXMgPSBfdjEuYTsKCQkJCXZhciBzMSA9IF92MS5iOwoJCQkJdmFyIHMyID0gQTUoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcFdoaWxlV2hpdGVzcGFjZUhlbHAsIHMxLm9mZnNldCwgczEucm93LCBzMS5jb2wsIHMxLnNyYywgczEuaW5kZW50KTsKCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLCByZXMsIHMyKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBiYWQgPSBfdjE7CgkJCQlyZXR1cm4gYmFkOwoJCQl9CgkJfSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyT3JTdWNjZWVkID0gRjQoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIGZhbGxiYWNrKSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjIgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92Mi4kID09PSAnQmFkJykgewoJCQkJCXZhciBjMSA9IF92Mi5hOwoJCQkJCXZhciB4ID0gX3YyLmI7CgkJCQkJcmV0dXJuIGMxID8gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KSA6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsIGZhbGxiYWNrLCBzMCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3YyLmE7CgkJCQkJdmFyIHMxID0gX3YyLmI7CgkJCQkJdmFyIF92MyA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92My4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92My5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92My5hOwoJCQkJCQl2YXIgczIgPSBfdjMuYjsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCUEyKGZ1bmMsIGEsIGIpLAoJCQkJCQkJczIpOwoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9mZnNldFNvdXJjZUFuZFRoZW4gPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJZnVuY3Rpb24gKHMpIHsKCQkJdmFyIF92MCA9IEEyKGNhbGxiYWNrLCBzLm9mZnNldCwgcy5zcmMpOwoJCQl2YXIgcGFyc2UgPSBfdjAuYTsKCQkJcmV0dXJuIHBhcnNlKHMpOwoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQ29tbWVudHMkcHJvYmxlbVVuZXhwZWN0ZWREb2N1bWVudGF0aW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkcHJvYmxlbSgndW5leHBlY3RlZCBkb2N1bWVudGF0aW9uIGNvbW1lbnQnKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJENvbW1lbnRzJG11bHRpbGluZUNvbW1lbnQgPSAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvZmZzZXRTb3VyY2VBbmRUaGVuKAoJRjIoCgkJZnVuY3Rpb24gKG9mZnNldCwgc291cmNlKSB7CgkJCXZhciBfdjAgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQgKyAyLCBvZmZzZXQgKyAzLCBzb3VyY2UpOwoJCQlpZiAoX3YwID09PSAnfCcpIHsKCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRDb21tZW50cyRwcm9ibGVtVW5leHBlY3RlZERvY3VtZW50YXRpb247CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQ29tbWVudHMkbXVsdGlMaW5lQ29tbWVudE5vQ2hlY2s7CgkJCX0KCQl9KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRMZWFmID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0xlYWYnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkb25lID0gZnVuY3Rpb24gKG9ubHlFbGVtZW50KSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkTGVhZiwgb25seUVsZW1lbnQsIF9VdGlsc19UdXBsZTApOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFdoaWxlU3VjY2VlZHNIZWxwID0gRjUoCglmdW5jdGlvbiAoZWxlbWVudCwgc29GYXIsIHJlZHVjZSwgZm9sZGVkVG9SZXMsIHMwKSB7CgkJbG9vcFdoaWxlU3VjY2VlZHNIZWxwOgoJCXdoaWxlICh0cnVlKSB7CgkJCXZhciBwYXJzZUVsZW1lbnQgPSBlbGVtZW50LmE7CgkJCXZhciBfdjAgPSBwYXJzZUVsZW1lbnQoczApOwoJCQlpZiAoX3YwLiQgPT09ICdHb29kJykgewoJCQkJdmFyIGVsZW1lbnRSZXN1bHQgPSBfdjAuYTsKCQkJCXZhciBzMSA9IF92MC5iOwoJCQkJdmFyICR0ZW1wJGVsZW1lbnQgPSBlbGVtZW50LAoJCQkJCSR0ZW1wJHNvRmFyID0gQTIocmVkdWNlLCBlbGVtZW50UmVzdWx0LCBzb0ZhciksCgkJCQkJJHRlbXAkcmVkdWNlID0gcmVkdWNlLAoJCQkJCSR0ZW1wJGZvbGRlZFRvUmVzID0gZm9sZGVkVG9SZXMsCgkJCQkJJHRlbXAkczAgPSBzMTsKCQkJCWVsZW1lbnQgPSAkdGVtcCRlbGVtZW50OwoJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCXJlZHVjZSA9ICR0ZW1wJHJlZHVjZTsKCQkJCWZvbGRlZFRvUmVzID0gJHRlbXAkZm9sZGVkVG9SZXM7CgkJCQlzMCA9ICR0ZW1wJHMwOwoJCQkJY29udGludWUgbG9vcFdoaWxlU3VjY2VlZHNIZWxwOwoJCQl9IGVsc2UgewoJCQkJdmFyIGVsZW1lbnRDb21taXR0ZWQgPSBfdjAuYTsKCQkJCXZhciB4ID0gX3YwLmI7CgkJCQlyZXR1cm4gZWxlbWVudENvbW1pdHRlZCA/IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCkgOiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCWZvbGRlZFRvUmVzKHNvRmFyKSwKCQkJCQlzMCk7CgkJCX0KCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxvb3BXaGlsZVN1Y2NlZWRzID0gRjQoCglmdW5jdGlvbiAoZWxlbWVudCwgaW5pdGlhbEZvbGRlZCwgcmVkdWNlLCBmb2xkZWRUb1JlcykgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQlyZXR1cm4gQTUoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFdoaWxlU3VjY2VlZHNIZWxwLCBlbGVtZW50LCBpbml0aWFsRm9sZGVkLCByZWR1Y2UsIGZvbGRlZFRvUmVzLCBzKTsKCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUb0ZpbGxlZCA9IEYyKAoJZnVuY3Rpb24gKHJpZ2h0TGlrZWx5RmlsbGVkLCBsZWZ0KSB7CgkJaWYgKGxlZnQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChyaWdodExpa2VseUZpbGxlZCk7CgkJfSBlbHNlIHsKCQkJdmFyIGxlZnRMaWtlbHlGaWxsZWQgPSBsZWZ0LmE7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJEJyYW5jaDIsIGxlZnRMaWtlbHlGaWxsZWQsIHJpZ2h0TGlrZWx5RmlsbGVkKSk7CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aGlsZU1hcFdpdGhSYW5nZSA9IEYyKAoJZnVuY3Rpb24gKGlzR29vZCwgcmFuZ2VBbmRDb25zdW1lZFN0cmluZ1RvUmVzKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgczEgPSBBNigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwV2hpbGVIZWxwLCBpc0dvb2QsIHMwLm9mZnNldCwgczAucm93LCBzMC5jb2wsIHMwLnNyYywgczAuaW5kZW50KTsKCQkJCXJldHVybiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCUEyKAoJCQkJCQlyYW5nZUFuZENvbnN1bWVkU3RyaW5nVG9SZXMsCgkJCQkJCXsKCQkJCQkJCWVuZDoge2NvbHVtbjogczEuY29sLCByb3c6IHMxLnJvd30sCgkJCQkJCQlzdGFydDoge2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30KCQkJCQkJfSwKCQkJCQkJQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgczAub2Zmc2V0LCBzMS5vZmZzZXQsIHMwLnNyYykpLAoJCQkJCXMxKTsKCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJENvbW1lbnRzJHNpbmdsZUxpbmVDb21tZW50ID0gQTIoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJJy0tJywKCUEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHdoaWxlTWFwV2l0aFJhbmdlLAoJCWZ1bmN0aW9uIChjKSB7CgkJCXN3aXRjaCAoYy52YWx1ZU9mKCkpIHsKCQkJCWNhc2UgJ1x1MDAwRCc6CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJY2FzZSAnXG4nOgoJCQkJCXJldHVybiBmYWxzZTsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICEkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRpc1V0ZjE2U3Vycm9nYXRlKGMpOwoJCQl9CgkJfSwKCQlGMigKCQkJZnVuY3Rpb24gKHJhbmdlLCBjb250ZW50KSB7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXsKCQkJCQkJZW5kOiB7Y29sdW1uOiByYW5nZS5lbmQuY29sdW1uLCByb3c6IHJhbmdlLnN0YXJ0LnJvd30sCgkJCQkJCXN0YXJ0OiB7Y29sdW1uOiByYW5nZS5zdGFydC5jb2x1bW4gLSAyLCByb3c6IHJhbmdlLnN0YXJ0LnJvd30KCQkJCQl9LAoJCQkJCSctLScgKyBjb250ZW50KTsKCQkJfSkpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCR3aGl0ZXNwYWNlQW5kQ29tbWVudHNPckVtcHR5TG9vcCA9IEE0KAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFdoaWxlU3VjY2VlZHMsCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U2tpcFdoaWxlV2hpdGVzcGFjZSgKCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJENvbW1lbnRzJHNpbmdsZUxpbmVDb21tZW50LCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRDb21tZW50cyRtdWx0aWxpbmVDb21tZW50KSksCgkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCUYyKAoJCWZ1bmN0aW9uIChyaWdodCwgc29GYXIpIHsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvRmlsbGVkLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkb25lKHJpZ2h0KSwKCQkJCXNvRmFyKTsKCQl9KSwKCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGZyb21NdWx0aWxpbmVDb21tZW50Tm9kZU9yRW1wdHlPblByb2JsZW0gPSBBNCgKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJPclN1Y2NlZWQsCglGMigKCQlmdW5jdGlvbiAoY29tbWVudCwgY29tbWVudHNBZnRlcikgewoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRmaWxsZWRQcmVwZW5kVG8sCgkJCQljb21tZW50c0FmdGVyLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkb25lKGNvbW1lbnQpKTsKCQl9KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGZvbGxvd2VkQnlTa2lwV2hpbGVXaGl0ZXNwYWNlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJENvbW1lbnRzJG11bHRpbGluZUNvbW1lbnQpLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHdoaXRlc3BhY2VBbmRDb21tZW50c09yRW1wdHlMb29wLAoJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGZyb21TaW5nbGVMaW5lQ29tbWVudE5vZGUgPSBBMygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCglGMigKCQlmdW5jdGlvbiAoY29udGVudCwgY29tbWVudHNBZnRlcikgewoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRmaWxsZWRQcmVwZW5kVG8sCgkJCQljb21tZW50c0FmdGVyLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkb25lKGNvbnRlbnQpKTsKCQl9KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGZvbGxvd2VkQnlTa2lwV2hpbGVXaGl0ZXNwYWNlKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJENvbW1lbnRzJHNpbmdsZUxpbmVDb21tZW50KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCR3aGl0ZXNwYWNlQW5kQ29tbWVudHNPckVtcHR5TG9vcCk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvZmZzZXRTb3VyY2VBbmRUaGVuT3JTdWNjZWVkID0gRjIoCglmdW5jdGlvbiAoY2FsbGJhY2ssIGZhbGxiYWNrKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBfdjAgPSBBMihjYWxsYmFjaywgcy5vZmZzZXQsIHMuc3JjKTsKCQkJCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsIGZhbGxiYWNrLCBzKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHBhcnNlID0gX3YwLmEuYTsKCQkJCQlyZXR1cm4gcGFyc2Uocyk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwV2hpbGVXaGl0ZXNwYWNlRm9sbG93ZWRCeSA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciBwYXJzZU5leHQgPSBfdjAuYTsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJZnVuY3Rpb24gKHMwKSB7CgkJCXZhciBzMSA9IEE1KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdoaXRlc3BhY2VIZWxwLCBzMC5vZmZzZXQsIHMwLnJvdywgczAuY29sLCBzMC5zcmMsIHMwLmluZGVudCk7CgkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRwU3RlcENvbW1pdCgKCQkJCXBhcnNlTmV4dChzMSkpOwoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHdoaXRlc3BhY2VBbmRDb21tZW50c09yRW1wdHkgPSAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwV2hpbGVXaGl0ZXNwYWNlRm9sbG93ZWRCeSgKCUEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9mZnNldFNvdXJjZUFuZFRoZW5PclN1Y2NlZWQsCgkJRjIoCgkJCWZ1bmN0aW9uIChvZmZzZXQsIHNvdXJjZSkgewoJCQkJdmFyIF92MCA9IEEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMiwgc291cmNlKTsKCQkJCXN3aXRjaCAoX3YwKSB7CgkJCQkJY2FzZSAnLS0nOgoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGZyb21TaW5nbGVMaW5lQ29tbWVudE5vZGUpOwoJCQkJCWNhc2UgJ3stJzoKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRmcm9tTXVsdGlsaW5lQ29tbWVudE5vZGVPckVtcHR5T25Qcm9ibGVtKTsKCQkJCQlkZWZhdWx0OgoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCR3aGl0ZXNwYWNlQW5kQ29tbWVudHNPckVtcHR5Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGxheW91dFN0cmljdEZvbGxvd2VkQnkgPSBmdW5jdGlvbiAobmV4dFBhcnNlcikgewoJcmV0dXJuIEEzKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJRjIoCgkJCWZ1bmN0aW9uIChjb21tZW50c0JlZm9yZSwgYWZ0ZXIpIHsKCQkJCXJldHVybiB7Y29tbWVudHM6IGNvbW1lbnRzQmVmb3JlLCBzeW50YXg6IGFmdGVyfTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9uVG9wSW5kZW50YXRpb25Gb2xsb3dlZEJ5KG5leHRQYXJzZXIpKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxhenkgPSBmdW5jdGlvbiAodGh1bmspIHsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJZnVuY3Rpb24gKHMpIHsKCQkJdmFyIF92MCA9IHRodW5rKF9VdGlsc19UdXBsZTApOwoJCQl2YXIgcGFyc2UgPSBfdjAuYTsKCQkJcmV0dXJuIHBhcnNlKHMpOwoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRMaXRlcmFsID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0xpdGVyYWwnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHdoaWxlV2l0aG91dExpbmVicmVhayA9IGZ1bmN0aW9uIChpc0dvb2QpIHsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJZnVuY3Rpb24gKHMwKSB7CgkJCXZhciBzMSA9IEE2KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtIZWxwLCBpc0dvb2QsIHMwLm9mZnNldCwgczAucm93LCBzMC5jb2wsIHMwLnNyYywgczAuaW5kZW50KTsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIHMwLm9mZnNldCwgczEub2Zmc2V0LCBzMC5zcmMpLAoJCQkJczEpOwoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHNpbmdsZVF1b3RlZFN0cmluZ0xpdGVyYWxBZnRlckRvdWJsZVF1b3RlID0gQTUoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wVW50aWwsCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wsICdcIicsIF9VdGlsc19UdXBsZTApLAoJQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQknXFwnLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZXNjYXBlZENoYXJWYWx1ZU1hcCgkZWxtJGNvcmUkU3RyaW5nJGZyb21DaGFyKSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkd2hpbGVXaXRob3V0TGluZWJyZWFrKAoJCQlmdW5jdGlvbiAoYykgewoJCQkJc3dpdGNoIChjLnZhbHVlT2YoKSkgewoJCQkJCWNhc2UgJ1wiJzoKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCWNhc2UgJ1xcJzoKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXJldHVybiAhJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkaXNVdGYxNlN1cnJvZ2F0ZShjKTsKCQkJCX0KCQkJfSkpLAoJJycsCglGMigKCQlmdW5jdGlvbiAoZXh0ZW5zaW9uLCBzb0ZhcikgewoJCQlyZXR1cm4gc29GYXIgKyAoZXh0ZW5zaW9uICsgJycpOwoJCX0pLAoJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHJpcGxlUXVvdGVkU3RyaW5nTGl0ZXJhbE9mdGVyVHJpcGxlRG91YmxlUXVvdGUgPSBBNSgKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxvb3BVbnRpbCwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwgJ1wiXCJcIicsIF9VdGlsc19UdXBsZTApLAoJQTMoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YzLAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwgJ1wiJywgJ1wiJyksCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCSdcXCcsCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRlc2NhcGVkQ2hhclZhbHVlTWFwKCRlbG0kY29yZSRTdHJpbmckZnJvbUNoYXIpKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aGlsZSgKCQkJZnVuY3Rpb24gKGMpIHsKCQkJCXN3aXRjaCAoYy52YWx1ZU9mKCkpIHsKCQkJCQljYXNlICdcIic6CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQljYXNlICdcXCc6CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQlkZWZhdWx0OgoJCQkJCQlyZXR1cm4gISRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJGlzVXRmMTZTdXJyb2dhdGUoYyk7CgkJCQl9CgkJCX0pKSwKCScnLAoJRjIoCgkJZnVuY3Rpb24gKGV4dGVuc2lvbiwgc29GYXIpIHsKCQkJcmV0dXJuIHNvRmFyICsgKGV4dGVuc2lvbiArICcnKTsKCQl9KSwKCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHNpbmdsZU9yVHJpcGxlUXVvdGVkU3RyaW5nTGl0ZXJhbE1hcFdpdGhSYW5nZSA9IGZ1bmN0aW9uIChyYW5nZUFuZFN0cmluZ1RvUmVzKSB7CglyZXR1cm4gQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQknXCInLAoJCUE0KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjJNYXBXaXRoU3RhcnRSb3dDb2x1bW5BbmRFbmRSb3dDb2x1bW4sCgkJCUY1KAoJCQkJZnVuY3Rpb24gKHN0YXJ0Um93LCBzdGFydENvbHVtbiwgc3RyaW5nLCBlbmRSb3csIGVuZENvbHVtbikgewoJCQkJCXJldHVybiBBMigKCQkJCQkJcmFuZ2VBbmRTdHJpbmdUb1JlcywKCQkJCQkJewoJCQkJCQkJZW5kOiB7Y29sdW1uOiBlbmRDb2x1bW4sIHJvdzogZW5kUm93fSwKCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzdGFydENvbHVtbiAtIDEsIHJvdzogc3RhcnRSb3d9CgkJCQkJCX0sCgkJCQkJCXN0cmluZyk7CgkJCQl9KSwKCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJ1wiXCInLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHJpcGxlUXVvdGVkU3RyaW5nTGl0ZXJhbE9mdGVyVHJpcGxlRG91YmxlUXVvdGUpLAoJCQlGNSgKCQkJCWZ1bmN0aW9uIChzdGFydFJvdywgc3RhcnRDb2x1bW4sIHN0cmluZywgZW5kUm93LCBlbmRDb2x1bW4pIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCXJhbmdlQW5kU3RyaW5nVG9SZXMsCgkJCQkJCXsKCQkJCQkJCWVuZDoge2NvbHVtbjogZW5kQ29sdW1uLCByb3c6IGVuZFJvd30sCgkJCQkJCQlzdGFydDoge2NvbHVtbjogc3RhcnRDb2x1bW4gLSAxLCByb3c6IHN0YXJ0Um93fQoJCQkJCQl9LAoJCQkJCQlzdHJpbmcpOwoJCQkJfSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRzaW5nbGVRdW90ZWRTdHJpbmdMaXRlcmFsQWZ0ZXJEb3VibGVRdW90ZSkpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRsaXRlcmFsRXhwcmVzc2lvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRzaW5nbGVPclRyaXBsZVF1b3RlZFN0cmluZ0xpdGVyYWxNYXBXaXRoUmFuZ2UoCglGMigKCQlmdW5jdGlvbiAocmFuZ2UsIHN0cmluZykgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJcmFuZ2UsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRMaXRlcmFsKHN0cmluZykpCgkJCX07CgkJfSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFdoaWxlU3VjY2VlZHNPbnRvUmVzdWx0RnJvbVBhcnNlciA9IEY0KAoJZnVuY3Rpb24gKGVsZW1lbnQsIF92MCwgcmVkdWNlLCBmb2xkZWRUb1JlcykgewoJCXZhciBwYXJzZUluaXRpYWxGb2xkZWQgPSBfdjAuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjEgPSBwYXJzZUluaXRpYWxGb2xkZWQoczApOwoJCQkJaWYgKF92MS4kID09PSAnR29vZCcpIHsKCQkJCQl2YXIgaW5pdGlhbEZvbGRlZCA9IF92MS5hOwoJCQkJCXZhciBzMSA9IF92MS5iOwoJCQkJCXJldHVybiBBNSgkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wV2hpbGVTdWNjZWVkc0hlbHAsIGVsZW1lbnQsIGluaXRpYWxGb2xkZWQsIHJlZHVjZSwgZm9sZGVkVG9SZXMsIHMxKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92MS5hOwoJCQkJCXZhciB4ID0gX3YxLmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbyA9IEYyKAoJZnVuY3Rpb24gKHJpZ2h0LCBsZWZ0KSB7CgkJaWYgKGxlZnQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiByaWdodDsKCQl9IGVsc2UgewoJCQl2YXIgbGVmdExpa2VseUZpbGxlZCA9IGxlZnQuYTsKCQkJaWYgKHJpZ2h0LiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuIGxlZnQ7CgkJCX0gZWxzZSB7CgkJCQl2YXIgcmlnaHRMaWtlbHlGaWxsZWQgPSByaWdodC5hOwoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJEJyYW5jaDIsIGxlZnRMaWtlbHlGaWxsZWQsIHJpZ2h0TGlrZWx5RmlsbGVkKSk7CgkJCX0KCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkbWFueSA9IGZ1bmN0aW9uIChwKSB7CglyZXR1cm4gQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFdoaWxlU3VjY2VlZHMsCgkJcCwKCQlfVXRpbHNfVHVwbGUyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LCBfTGlzdF9OaWwpLAoJCUYyKAoJCQlmdW5jdGlvbiAocFJlc3VsdCwgX3YwKSB7CgkJCQl2YXIgY29tbWVudHNTb0ZhciA9IF92MC5hOwoJCQkJdmFyIGl0ZW1zU29GYXIgPSBfdjAuYjsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgcFJlc3VsdC5jb21tZW50cywgY29tbWVudHNTb0ZhciksCgkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgcFJlc3VsdC5zeW50YXgsIGl0ZW1zU29GYXIpKTsKCQkJfSksCgkJZnVuY3Rpb24gKF92MSkgewoJCQl2YXIgY29tbWVudHNTb0ZhciA9IF92MS5hOwoJCQl2YXIgaXRlbXNTb0ZhciA9IF92MS5iOwoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6IGNvbW1lbnRzU29GYXIsCgkJCQlzeW50YXg6ICRlbG0kY29yZSRMaXN0JHJldmVyc2UoaXRlbXNTb0ZhcikKCQkJfTsKCQl9KTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkbWFueVdpdGhvdXRSZXZlcnNlID0gZnVuY3Rpb24gKHApIHsKCXJldHVybiBBNCgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wV2hpbGVTdWNjZWVkcywKCQlwLAoJCV9VdGlsc19UdXBsZTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksIF9MaXN0X05pbCksCgkJRjIoCgkJCWZ1bmN0aW9uIChwUmVzdWx0LCBfdjApIHsKCQkJCXZhciBjb21tZW50c1NvRmFyID0gX3YwLmE7CgkJCQl2YXIgaXRlbXNTb0ZhciA9IF92MC5iOwoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBwUmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c1NvRmFyKSwKCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBwUmVzdWx0LnN5bnRheCwgaXRlbXNTb0ZhcikpOwoJCQl9KSwKCQlmdW5jdGlvbiAoX3YxKSB7CgkJCXZhciBjb21tZW50c1NvRmFyID0gX3YxLmE7CgkJCXZhciBpdGVtc1NvRmFyID0gX3YxLmI7CgkJCXJldHVybiB7Y29tbWVudHM6IGNvbW1lbnRzU29GYXIsIHN5bnRheDogaXRlbXNTb0Zhcn07CgkJfSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAgPSBGMigKCWZ1bmN0aW9uIChmdW5jLCBfdjApIHsKCQl2YXIgcGFyc2UgPSBfdjAuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjEgPSBwYXJzZShzMCk7CgkJCQlpZiAoX3YxLiQgPT09ICdHb29kJykgewoJCQkJCXZhciBhID0gX3YxLmE7CgkJCQkJdmFyIHMxID0gX3YxLmI7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQlmdW5jKGEpLAoJCQkJCQlzMSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjEuYTsKCQkJCQl2YXIgeCA9IF92MS5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzID0gRjQoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIF92MikgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92MyA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3YzLiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92My5hOwoJCQkJCXZhciB4ID0gX3YzLmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjMuYTsKCQkJCQl2YXIgczEgPSBfdjMuYjsKCQkJCQl2YXIgX3Y0ID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3Y0LiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3Y0LmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3Y0LmE7CgkJCQkJCXZhciBzMiA9IF92NC5iOwoJCQkJCQl2YXIgX3Y1ID0gcGFyc2VDKHMyKTsKCQkJCQkJaWYgKF92NS4kID09PSAnQmFkJykgewoJCQkJCQkJdmFyIHggPSBfdjUuYjsKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIGMgPSBfdjUuYTsKCQkJCQkJCXZhciBzMyA9IF92NS5iOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJQTMoZnVuYywgYSwgYiwgYyksCgkJCQkJCQkJczMpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwM1dpdGhTdGFydExvY2F0aW9uID0gRjQoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIF92MikgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92MyA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3YzLiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92My5hOwoJCQkJCXZhciB4ID0gX3YzLmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjMuYTsKCQkJCQl2YXIgczEgPSBfdjMuYjsKCQkJCQl2YXIgX3Y0ID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3Y0LiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3Y0LmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3Y0LmE7CgkJCQkJCXZhciBzMiA9IF92NC5iOwoJCQkJCQl2YXIgX3Y1ID0gcGFyc2VDKHMyKTsKCQkJCQkJaWYgKF92NS4kID09PSAnQmFkJykgewoJCQkJCQkJdmFyIHggPSBfdjUuYjsKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIGMgPSBfdjUuYTsKCQkJCQkJCXZhciBzMyA9IF92NS5iOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJQTQoCgkJCQkJCQkJCWZ1bmMsCgkJCQkJCQkJCXtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9LAoJCQkJCQkJCQlhLAoJCQkJCQkJCQliLAoJCQkJCQkJCQljKSwKCQkJCQkJCQlzMyk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0ID0gRjUoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIF92MiwgX3YzKSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQl2YXIgcGFyc2VDID0gX3YyLmE7CgkJdmFyIHBhcnNlRCA9IF92My5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92NCA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3Y0LiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92NC5hOwoJCQkJCXZhciB4ID0gX3Y0LmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjQuYTsKCQkJCQl2YXIgczEgPSBfdjQuYjsKCQkJCQl2YXIgX3Y1ID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3Y1LiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3Y1LmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3Y1LmE7CgkJCQkJCXZhciBzMiA9IF92NS5iOwoJCQkJCQl2YXIgX3Y2ID0gcGFyc2VDKHMyKTsKCQkJCQkJaWYgKF92Ni4kID09PSAnQmFkJykgewoJCQkJCQkJdmFyIHggPSBfdjYuYjsKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIGMgPSBfdjYuYTsKCQkJCQkJCXZhciBzMyA9IF92Ni5iOwoJCQkJCQkJdmFyIF92NyA9IHBhcnNlRChzMyk7CgkJCQkJCQlpZiAoX3Y3LiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJdmFyIHggPSBfdjcuYjsKCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIGQgPSBfdjcuYTsKCQkJCQkJCQl2YXIgczQgPSBfdjcuYjsKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJCUE0KGZ1bmMsIGEsIGIsIGMsIGQpLAoJCQkJCQkJCQlzNCk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0T3JTdWNjZWVkID0gRjYoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIF92MiwgX3YzLCBmYWxsYmFjaykgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXZhciBwYXJzZUQgPSBfdjMuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjQgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92NC4kID09PSAnQmFkJykgewoJCQkJCXZhciBjMSA9IF92NC5hOwoJCQkJCXZhciB4ID0gX3Y0LmI7CgkJCQkJcmV0dXJuIGMxID8gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KSA6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsIGZhbGxiYWNrLCBzMCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3Y0LmE7CgkJCQkJdmFyIHMxID0gX3Y0LmI7CgkJCQkJdmFyIF92NSA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92NS4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92NS5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92NS5hOwoJCQkJCQl2YXIgczIgPSBfdjUuYjsKCQkJCQkJdmFyIF92NiA9IHBhcnNlQyhzMik7CgkJCQkJCWlmIChfdjYuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCXZhciB4ID0gX3Y2LmI7CgkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBjID0gX3Y2LmE7CgkJCQkJCQl2YXIgczMgPSBfdjYuYjsKCQkJCQkJCXZhciBfdjcgPSBwYXJzZUQoczMpOwoJCQkJCQkJaWYgKF92Ny4kID09PSAnQmFkJykgewoJCQkJCQkJCXZhciB4ID0gX3Y3LmI7CgkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBkID0gX3Y3LmE7CgkJCQkJCQkJdmFyIHM0ID0gX3Y3LmI7CgkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJCQlBNChmdW5jLCBhLCBiLCBjLCBkKSwKCQkJCQkJCQkJczQpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNFdpdGhSYW5nZSA9IEY1KAoJZnVuY3Rpb24gKGZ1bmMsIF92MCwgX3YxLCBfdjIsIF92MykgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXZhciBwYXJzZUQgPSBfdjMuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjQgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92NC4kID09PSAnQmFkJykgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjQuYTsKCQkJCQl2YXIgeCA9IF92NC5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3Y0LmE7CgkJCQkJdmFyIHMxID0gX3Y0LmI7CgkJCQkJdmFyIF92NSA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92NS4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92NS5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92NS5hOwoJCQkJCQl2YXIgczIgPSBfdjUuYjsKCQkJCQkJdmFyIF92NiA9IHBhcnNlQyhzMik7CgkJCQkJCWlmIChfdjYuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCXZhciB4ID0gX3Y2LmI7CgkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBjID0gX3Y2LmE7CgkJCQkJCQl2YXIgczMgPSBfdjYuYjsKCQkJCQkJCXZhciBfdjcgPSBwYXJzZUQoczMpOwoJCQkJCQkJaWYgKF92Ny4kID09PSAnQmFkJykgewoJCQkJCQkJCXZhciB4ID0gX3Y3LmI7CgkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBkID0gX3Y3LmE7CgkJCQkJCQkJdmFyIHM0ID0gX3Y3LmI7CgkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJCQlBNSgKCQkJCQkJCQkJCWZ1bmMsCgkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJZW5kOiB7Y29sdW1uOiBzNC5jb2wsIHJvdzogczQucm93fSwKCQkJCQkJCQkJCQlzdGFydDoge2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30KCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQlhLAoJCQkJCQkJCQkJYiwKCQkJCQkJCQkJCWMsCgkJCQkJCQkJCQlkKSwKCQkJCQkJCQkJczQpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNSA9IEY2KAoJZnVuY3Rpb24gKGZ1bmMsIF92MCwgX3YxLCBfdjIsIF92MywgX3Y0KSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQl2YXIgcGFyc2VDID0gX3YyLmE7CgkJdmFyIHBhcnNlRCA9IF92My5hOwoJCXZhciBwYXJzZUUgPSBfdjQuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjUgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92NS4kID09PSAnQmFkJykgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjUuYTsKCQkJCQl2YXIgeCA9IF92NS5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3Y1LmE7CgkJCQkJdmFyIHMxID0gX3Y1LmI7CgkJCQkJdmFyIF92NiA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92Ni4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92Ni5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92Ni5hOwoJCQkJCQl2YXIgczIgPSBfdjYuYjsKCQkJCQkJdmFyIF92NyA9IHBhcnNlQyhzMik7CgkJCQkJCWlmIChfdjcuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCXZhciB4ID0gX3Y3LmI7CgkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBjID0gX3Y3LmE7CgkJCQkJCQl2YXIgczMgPSBfdjcuYjsKCQkJCQkJCXZhciBfdjggPSBwYXJzZUQoczMpOwoJCQkJCQkJaWYgKF92OC4kID09PSAnQmFkJykgewoJCQkJCQkJCXZhciB4ID0gX3Y4LmI7CgkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBkID0gX3Y4LmE7CgkJCQkJCQkJdmFyIHM0ID0gX3Y4LmI7CgkJCQkJCQkJdmFyIF92OSA9IHBhcnNlRShzNCk7CgkJCQkJCQkJaWYgKF92OS4kID09PSAnQmFkJykgewoJCQkJCQkJCQl2YXIgeCA9IF92OS5iOwoJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgZSA9IF92OS5hOwoJCQkJCQkJCQl2YXIgczUgPSBfdjkuYjsKCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCQkJCUE1KGZ1bmMsIGEsIGIsIGMsIGQsIGUpLAoJCQkJCQkJCQkJczUpOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDVXaXRoUmFuZ2UgPSBGNigKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSwgX3YyLCBfdjMsIF92NCkgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXZhciBwYXJzZUQgPSBfdjMuYTsKCQl2YXIgcGFyc2VFID0gX3Y0LmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgX3Y1ID0gcGFyc2VBKHMwKTsKCQkJCWlmIChfdjUuJCA9PT0gJ0JhZCcpIHsKCQkJCQl2YXIgY29tbWl0dGVkID0gX3Y1LmE7CgkJCQkJdmFyIHggPSBfdjUuYjsKCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBjb21taXR0ZWQsIHgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYSA9IF92NS5hOwoJCQkJCXZhciBzMSA9IF92NS5iOwoJCQkJCXZhciBfdjYgPSBwYXJzZUIoczEpOwoJCQkJCWlmIChfdjYuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJdmFyIHggPSBfdjYuYjsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGIgPSBfdjYuYTsKCQkJCQkJdmFyIHMyID0gX3Y2LmI7CgkJCQkJCXZhciBfdjcgPSBwYXJzZUMoczIpOwoJCQkJCQlpZiAoX3Y3LiQgPT09ICdCYWQnKSB7CgkJCQkJCQl2YXIgeCA9IF92Ny5iOwoJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYyA9IF92Ny5hOwoJCQkJCQkJdmFyIHMzID0gX3Y3LmI7CgkJCQkJCQl2YXIgX3Y4ID0gcGFyc2VEKHMzKTsKCQkJCQkJCWlmIChfdjguJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQl2YXIgeCA9IF92OC5iOwoJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgZCA9IF92OC5hOwoJCQkJCQkJCXZhciBzNCA9IF92OC5iOwoJCQkJCQkJCXZhciBfdjkgPSBwYXJzZUUoczQpOwoJCQkJCQkJCWlmIChfdjkuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJdmFyIHggPSBfdjkuYjsKCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJdmFyIGUgPSBfdjkuYTsKCQkJCQkJCQkJdmFyIHM1ID0gX3Y5LmI7CgkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJCQlBNigKCQkJCQkJCQkJCQlmdW5jLAoJCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkJZW5kOiB7Y29sdW1uOiBzNS5jb2wsIHJvdzogczUucm93fSwKCQkJCQkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQlhLAoJCQkJCQkJCQkJCWIsCgkJCQkJCQkJCQkJYywKCQkJCQkJCQkJCQlkLAoJCQkJCQkJCQkJCWUpLAoJCQkJCQkJCQkJczUpOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDVXaXRoU3RhcnRMb2NhdGlvbiA9IEY2KAoJZnVuY3Rpb24gKGZ1bmMsIF92MCwgX3YxLCBfdjIsIF92MywgX3Y0KSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQl2YXIgcGFyc2VDID0gX3YyLmE7CgkJdmFyIHBhcnNlRCA9IF92My5hOwoJCXZhciBwYXJzZUUgPSBfdjQuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjUgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92NS4kID09PSAnQmFkJykgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjUuYTsKCQkJCQl2YXIgeCA9IF92NS5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3Y1LmE7CgkJCQkJdmFyIHMxID0gX3Y1LmI7CgkJCQkJdmFyIF92NiA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92Ni4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92Ni5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92Ni5hOwoJCQkJCQl2YXIgczIgPSBfdjYuYjsKCQkJCQkJdmFyIF92NyA9IHBhcnNlQyhzMik7CgkJCQkJCWlmIChfdjcuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCXZhciB4ID0gX3Y3LmI7CgkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBjID0gX3Y3LmE7CgkJCQkJCQl2YXIgczMgPSBfdjcuYjsKCQkJCQkJCXZhciBfdjggPSBwYXJzZUQoczMpOwoJCQkJCQkJaWYgKF92OC4kID09PSAnQmFkJykgewoJCQkJCQkJCXZhciB4ID0gX3Y4LmI7CgkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBkID0gX3Y4LmE7CgkJCQkJCQkJdmFyIHM0ID0gX3Y4LmI7CgkJCQkJCQkJdmFyIF92OSA9IHBhcnNlRShzNCk7CgkJCQkJCQkJaWYgKF92OS4kID09PSAnQmFkJykgewoJCQkJCQkJCQl2YXIgeCA9IF92OS5iOwoJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgZSA9IF92OS5hOwoJCQkJCQkJCQl2YXIgczUgPSBfdjkuYjsKCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCQkJCUE2KAoJCQkJCQkJCQkJCWZ1bmMsCgkJCQkJCQkJCQkJe2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30sCgkJCQkJCQkJCQkJYSwKCQkJCQkJCQkJCQliLAoJCQkJCQkJCQkJCWMsCgkJCQkJCQkJCQkJZCwKCQkJCQkJCQkJCQllKSwKCQkJCQkJCQkJCXM1KTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA2V2l0aFN0YXJ0TG9jYXRpb24gPSBGNygKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSwgX3YyLCBfdjMsIF92NCwgX3Y1KSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQl2YXIgcGFyc2VDID0gX3YyLmE7CgkJdmFyIHBhcnNlRCA9IF92My5hOwoJCXZhciBwYXJzZUUgPSBfdjQuYTsKCQl2YXIgcGFyc2VGID0gX3Y1LmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgX3Y2ID0gcGFyc2VBKHMwKTsKCQkJCWlmIChfdjYuJCA9PT0gJ0JhZCcpIHsKCQkJCQl2YXIgY29tbWl0dGVkID0gX3Y2LmE7CgkJCQkJdmFyIHggPSBfdjYuYjsKCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBjb21taXR0ZWQsIHgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYSA9IF92Ni5hOwoJCQkJCXZhciBzMSA9IF92Ni5iOwoJCQkJCXZhciBfdjcgPSBwYXJzZUIoczEpOwoJCQkJCWlmIChfdjcuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJdmFyIHggPSBfdjcuYjsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGIgPSBfdjcuYTsKCQkJCQkJdmFyIHMyID0gX3Y3LmI7CgkJCQkJCXZhciBfdjggPSBwYXJzZUMoczIpOwoJCQkJCQlpZiAoX3Y4LiQgPT09ICdCYWQnKSB7CgkJCQkJCQl2YXIgeCA9IF92OC5iOwoJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYyA9IF92OC5hOwoJCQkJCQkJdmFyIHMzID0gX3Y4LmI7CgkJCQkJCQl2YXIgX3Y5ID0gcGFyc2VEKHMzKTsKCQkJCQkJCWlmIChfdjkuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQl2YXIgeCA9IF92OS5iOwoJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgZCA9IF92OS5hOwoJCQkJCQkJCXZhciBzNCA9IF92OS5iOwoJCQkJCQkJCXZhciBfdjEwID0gcGFyc2VFKHM0KTsKCQkJCQkJCQlpZiAoX3YxMC4kID09PSAnQmFkJykgewoJCQkJCQkJCQl2YXIgeCA9IF92MTAuYjsKCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJdmFyIGUgPSBfdjEwLmE7CgkJCQkJCQkJCXZhciBzNSA9IF92MTAuYjsKCQkJCQkJCQkJdmFyIF92MTEgPSBwYXJzZUYoczUpOwoJCQkJCQkJCQlpZiAoX3YxMS4kID09PSAnQmFkJykgewoJCQkJCQkJCQkJdmFyIHggPSBfdjExLmI7CgkJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXZhciBmID0gX3YxMS5hOwoJCQkJCQkJCQkJdmFyIHM2ID0gX3YxMS5iOwoJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJCQkJQTcoCgkJCQkJCQkJCQkJCWZ1bmMsCgkJCQkJCQkJCQkJCXtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9LAoJCQkJCQkJCQkJCQlhLAoJCQkJCQkJCQkJCQliLAoJCQkJCQkJCQkJCQljLAoJCQkJCQkJCQkJCQlkLAoJCQkJCQkJCQkJCQllLAoJCQkJCQkJCQkJCQlmKSwKCQkJCQkJCQkJCQlzNik7CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA4V2l0aFN0YXJ0TG9jYXRpb24gPSBGOSgKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSwgX3YyLCBfdjMsIF92NCwgX3Y1LCBfdjYsIF92NykgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXZhciBwYXJzZUQgPSBfdjMuYTsKCQl2YXIgcGFyc2VFID0gX3Y0LmE7CgkJdmFyIHBhcnNlRiA9IF92NS5hOwoJCXZhciBwYXJzZUcgPSBfdjYuYTsKCQl2YXIgcGFyc2VIID0gX3Y3LmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgX3Y4ID0gcGFyc2VBKHMwKTsKCQkJCWlmIChfdjguJCA9PT0gJ0JhZCcpIHsKCQkJCQl2YXIgY29tbWl0dGVkID0gX3Y4LmE7CgkJCQkJdmFyIHggPSBfdjguYjsKCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBjb21taXR0ZWQsIHgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYSA9IF92OC5hOwoJCQkJCXZhciBzMSA9IF92OC5iOwoJCQkJCXZhciBfdjkgPSBwYXJzZUIoczEpOwoJCQkJCWlmIChfdjkuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJdmFyIHggPSBfdjkuYjsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGIgPSBfdjkuYTsKCQkJCQkJdmFyIHMyID0gX3Y5LmI7CgkJCQkJCXZhciBfdjEwID0gcGFyc2VDKHMyKTsKCQkJCQkJaWYgKF92MTAuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCXZhciB4ID0gX3YxMC5iOwoJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYyA9IF92MTAuYTsKCQkJCQkJCXZhciBzMyA9IF92MTAuYjsKCQkJCQkJCXZhciBfdjExID0gcGFyc2VEKHMzKTsKCQkJCQkJCWlmIChfdjExLiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJdmFyIHggPSBfdjExLmI7CgkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBkID0gX3YxMS5hOwoJCQkJCQkJCXZhciBzNCA9IF92MTEuYjsKCQkJCQkJCQl2YXIgX3YxMiA9IHBhcnNlRShzNCk7CgkJCQkJCQkJaWYgKF92MTIuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJdmFyIHggPSBfdjEyLmI7CgkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBlID0gX3YxMi5hOwoJCQkJCQkJCQl2YXIgczUgPSBfdjEyLmI7CgkJCQkJCQkJCXZhciBfdjEzID0gcGFyc2VGKHM1KTsKCQkJCQkJCQkJaWYgKF92MTMuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJCXZhciB4ID0gX3YxMy5iOwoJCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQl2YXIgZiA9IF92MTMuYTsKCQkJCQkJCQkJCXZhciBzNiA9IF92MTMuYjsKCQkJCQkJCQkJCXZhciBfdjE0ID0gcGFyc2VHKHM2KTsKCQkJCQkJCQkJCWlmIChfdjE0LiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCQkJdmFyIHggPSBfdjE0LmI7CgkJCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCXZhciBnID0gX3YxNC5hOwoJCQkJCQkJCQkJCXZhciBzNyA9IF92MTQuYjsKCQkJCQkJCQkJCQl2YXIgX3YxNSA9IHBhcnNlSChzNyk7CgkJCQkJCQkJCQkJaWYgKF92MTUuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJCQkJdmFyIHggPSBfdjE1LmI7CgkJCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCXZhciBoID0gX3YxNS5hOwoJCQkJCQkJCQkJCQl2YXIgczggPSBfdjE1LmI7CgkJCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJCQkJCQlBOSgKCQkJCQkJCQkJCQkJCQlmdW5jLAoJCQkJCQkJCQkJCQkJCXtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9LAoJCQkJCQkJCQkJCQkJCWEsCgkJCQkJCQkJCQkJCQkJYiwKCQkJCQkJCQkJCQkJCQljLAoJCQkJCQkJCQkJCQkJCWQsCgkJCQkJCQkJCQkJCQkJZSwKCQkJCQkJCQkJCQkJCQlmLAoJCQkJCQkJCQkJCQkJCWcsCgkJCQkJCQkJCQkJCQkJaCksCgkJCQkJCQkJCQkJCQlzOCk7CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkdmFsaWRhdGVFbmRDb2x1bW5JbmRlbnRhdGlvbiA9IEYzKAoJZnVuY3Rpb24gKGlzT2theSwgcHJvYmxlbU9uSXNOb3RPa2F5LCBfdjApIHsKCQl2YXIgcGFyc2UgPSBfdjAuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjEgPSBwYXJzZShzMCk7CgkJCQlpZiAoX3YxLiQgPT09ICdHb29kJykgewoJCQkJCXZhciBnb29kID0gX3YxOwoJCQkJCXZhciBzMSA9IGdvb2QuYjsKCQkJCQlyZXR1cm4gQTIoaXNPa2F5LCBzMS5jb2wsIHMxLmluZGVudCkgPyBnb29kIDogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJdHJ1ZSwKCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nQ3VzdG9tLCBzMS5yb3csIHMxLmNvbCwgcHJvYmxlbU9uSXNOb3RPa2F5KSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBiYWQgPSBfdjE7CgkJCQkJcmV0dXJuIGJhZDsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRlbmRzUG9zaXRpdmVseUluZGVudGVkID0gZnVuY3Rpb24gKHBhcnNlcikgewoJcmV0dXJuIEEzKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHZhbGlkYXRlRW5kQ29sdW1uSW5kZW50YXRpb24sCgkJRjIoCgkJCWZ1bmN0aW9uIChjb2x1bW4sIGluZGVudCkgewoJCQkJcmV0dXJuIF9VdGlsc19jbXAoY29sdW1uLCBpbmRlbnQpID4gMDsKCQkJfSksCgkJJ211c3QgYmUgcG9zaXRpdmVseSBpbmRlbnRlZCcsCgkJcGFyc2VyKTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRlbmRzUG9zaXRpdmVseUluZGVudGVkKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCR3aGl0ZXNwYWNlQW5kQ29tbWVudHNPckVtcHR5KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUFyb3VuZEJvdGhTaWRlcyA9IGZ1bmN0aW9uICh4KSB7CglyZXR1cm4gQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQlGMygKCQkJZnVuY3Rpb24gKGJlZm9yZSwgdiwgYWZ0ZXIpIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCWFmdGVyLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHYuY29tbWVudHMsIGJlZm9yZSkpLAoJCQkJCXN5bnRheDogdi5zeW50YXgKCQkJCX07CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQl4LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG11bHRpUmVjb3JkQWNjZXNzID0gQTQoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsb29wV2hpbGVTdWNjZWVkcywKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICcuJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUpLAoJX0xpc3RfTmlsLAoJJGVsbSRjb3JlJExpc3QkY29ucywKCSRlbG0kY29yZSRMaXN0JHJldmVyc2UpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRtdWx0aVJlY29yZEFjY2Vzc01hcCA9IGZ1bmN0aW9uIChmaWVsZHNUb1JlcykgewoJcmV0dXJuIEE0KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxvb3BXaGlsZVN1Y2NlZWRzLAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICcuJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUpLAoJCV9MaXN0X05pbCwKCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCWZ1bmN0aW9uIChyZXZlcnNlZCkgewoJCQlyZXR1cm4gZmllbGRzVG9SZXMoCgkJCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKHJldmVyc2VkKSk7CgkJfSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG5lZ2F0aW9uV2hpdGVzcGFjZVByb2JsZW0gPSAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRwcm9ibGVtKCdpZiBhIG5lZ2F0aW9uIHNpZ24gaXMgbm90IHByZWNlZGVkIGJ5IHdoaXRlc3BhY2UsIGl0XCdzIGNvbnNpZGVyZWQgc3VidHJhY3Rpb24nKTsKdmFyICRlbG0kY29yZSRUdXBsZSRwYWlyID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiBfVXRpbHNfVHVwbGUyKGEsIGIpOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZXF1YWwgPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2wsICc9JywgX1V0aWxzX1R1cGxlMCk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJEFzUGF0dGVybiA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdBc1BhdHRlcm4nLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRMaXN0UGF0dGVybiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdMaXN0UGF0dGVybicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiROYW1lZFBhdHRlcm4gPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnTmFtZWRQYXR0ZXJuJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kUGFyZW50aGVzaXplZFBhdHRlcm4gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUGFyZW50aGVzaXplZFBhdHRlcm4nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJFBhdHRlcm5Db21wb3NlZFdpdGhBcyA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQYXR0ZXJuQ29tcG9zZWRXaXRoQXMnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJFBhdHRlcm5Db21wb3NlZFdpdGhDb25zID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1BhdHRlcm5Db21wb3NlZFdpdGhDb25zJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRQYXR0ZXJuQ29tcG9zZWRXaXRoTm90aGluZyA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQYXR0ZXJuQ29tcG9zZWRXaXRoTm90aGluZycsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRUdXBsZVBhdHRlcm4gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVHVwbGVQYXR0ZXJuJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJFVuQ29uc1BhdHRlcm4gPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnVW5Db25zUGF0dGVybicsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJFVuaXRQYXR0ZXJuID0geyQ6ICdVbml0UGF0dGVybid9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRBbGxQYXR0ZXJuID0geyQ6ICdBbGxQYXR0ZXJuJ307CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xXaXRoUmFuZ2UgPSBGMigKCWZ1bmN0aW9uIChzdHIsIHN0YXJ0QW5kRW5kTG9jYXRpb25Ub1JlcykgewoJCXZhciBzdHJMZW5ndGggPSAkZWxtJGNvcmUkU3RyaW5nJGxlbmd0aChzdHIpOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQl2YXIgbmV3T2Zmc2V0ID0gcy5vZmZzZXQgKyBzdHJMZW5ndGg7CgkJCQlpZiAoX1V0aWxzX2VxKAoJCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIHMub2Zmc2V0LCBuZXdPZmZzZXQsIHMuc3JjKSwKCQkJCQlzdHIgKyAnJykpIHsKCQkJCQl2YXIgbmV3Q29sID0gcy5jb2wgKyBzdHJMZW5ndGg7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQlzdGFydEFuZEVuZExvY2F0aW9uVG9SZXMoCgkJCQkJCQl7CgkJCQkJCQkJZW5kOiB7Y29sdW1uOiBuZXdDb2wsIHJvdzogcy5yb3d9LAoJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzLmNvbCwgcm93OiBzLnJvd30KCQkJCQkJCX0pLAoJCQkJCQl7Y29sOiBuZXdDb2wsIGluZGVudDogcy5pbmRlbnQsIG9mZnNldDogbmV3T2Zmc2V0LCByb3c6IHMucm93LCBzcmM6IHMuc3JjfSk7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQlmYWxzZSwKCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nU3ltYm9sLCBzLnJvdywgcy5jb2wsIHN0cikpOwoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkYWxsUGF0dGVybiA9IEEyKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sV2l0aFJhbmdlLAoJJ18nLAoJZnVuY3Rpb24gKHJhbmdlKSB7CgkJcmV0dXJuIHsKCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQlzeW50YXg6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwgcmFuZ2UsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kQWxsUGF0dGVybikKCQl9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJENoYXJQYXR0ZXJuID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0NoYXJQYXR0ZXJuJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjaGFyUGF0dGVybiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRjaGFyYWN0ZXJMaXRlcmFsTWFwV2l0aFJhbmdlKAoJRjIoCgkJZnVuY3Rpb24gKHJhbmdlLCBfY2hhcikgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJcmFuZ2UsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRDaGFyUGF0dGVybihfY2hhcikpCgkJCX07CgkJfSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRIZXhQYXR0ZXJuID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0hleFBhdHRlcm4nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kSW50UGF0dGVybiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdJbnRQYXR0ZXJuJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdOdW1iZXIgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnRXhwZWN0aW5nTnVtYmVyJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JERlY2ltYWwgPSB7JDogJ0RlY2ltYWwnfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEhleGFkZWNpbWFsID0geyQ6ICdIZXhhZGVjaW1hbCd9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cyA9IEYzKAoJZnVuY3Rpb24gKHNvRmFyLCBvZmZzZXQsIHNyYykgewoJCWNvbnZlcnQwT3JNb3JlMFRvOXM6CgkJd2hpbGUgKHRydWUpIHsKCQkJdmFyIF92MCA9IEEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJc3dpdGNoIChfdjApIHsKCQkJCWNhc2UgJzAnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IHNvRmFyICogMTAsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmUwVG85czsKCQkJCWNhc2UgJzEnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDEwKSArIDEsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmUwVG85czsKCQkJCWNhc2UgJzInOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDEwKSArIDIsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmUwVG85czsKCQkJCWNhc2UgJzMnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDEwKSArIDMsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmUwVG85czsKCQkJCWNhc2UgJzQnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDEwKSArIDQsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmUwVG85czsKCQkJCWNhc2UgJzUnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDEwKSArIDUsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmUwVG85czsKCQkJCWNhc2UgJzYnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDEwKSArIDYsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmUwVG85czsKCQkJCWNhc2UgJzcnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDEwKSArIDcsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmUwVG85czsKCQkJCWNhc2UgJzgnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDEwKSArIDgsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmUwVG85czsKCQkJCWNhc2UgJzknOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDEwKSArIDksCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmUwVG85czsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIHtfaW50OiBzb0Zhciwgb2Zmc2V0OiBvZmZzZXR9OwoJCQl9CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsID0gRjMoCglmdW5jdGlvbiAoc29GYXIsIG9mZnNldCwgc3JjKSB7CgkJY29udmVydDBPck1vcmVIZXhhZGVjaW1hbDoKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgX3YwID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQlzd2l0Y2ggKF92MCkgewoJCQkJY2FzZSAnMCc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gc29GYXIgKiAxNiwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnMSc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgMSwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnMic6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgMiwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnMyc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgMywKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnNCc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgNCwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnNSc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgNSwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnNic6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgNiwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnNyc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgNywKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnOCc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgOCwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnOSc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgOSwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnYSc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgMTAsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmVIZXhhZGVjaW1hbDsKCQkJCWNhc2UgJ0EnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDE2KSArIDEwLAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICdiJzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyAxMSwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnQic6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgMTEsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmVIZXhhZGVjaW1hbDsKCQkJCWNhc2UgJ2MnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDE2KSArIDEyLAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICdDJzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyAxMiwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnZCc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgMTMsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmVIZXhhZGVjaW1hbDsKCQkJCWNhc2UgJ0QnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDE2KSArIDEzLAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICdlJzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyAxNCwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJY2FzZSAnRSc6CgkJCQkJdmFyICR0ZW1wJHNvRmFyID0gKHNvRmFyICogMTYpICsgMTQsCgkJCQkJCSR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlzb0ZhciA9ICR0ZW1wJHNvRmFyOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgY29udmVydDBPck1vcmVIZXhhZGVjaW1hbDsKCQkJCWNhc2UgJ2YnOgoJCQkJCXZhciAkdGVtcCRzb0ZhciA9IChzb0ZhciAqIDE2KSArIDE1LAoJCQkJCQkkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJc29GYXIgPSAkdGVtcCRzb0ZhcjsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWw7CgkJCQljYXNlICdGJzoKCQkJCQl2YXIgJHRlbXAkc29GYXIgPSAoc29GYXIgKiAxNikgKyAxNSwKCQkJCQkJJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCXNvRmFyID0gJHRlbXAkc29GYXI7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4ge19pbnQ6IHNvRmFyLCBvZmZzZXQ6IG9mZnNldH07CgkJCX0KCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQxT3JNb3JlSGV4YWRlY2ltYWwgPSBGMigKCWZ1bmN0aW9uIChvZmZzZXQsIHNyYykgewoJCXZhciBfdjAgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDEsIHNyYyk7CgkJc3dpdGNoIChfdjApIHsKCQkJY2FzZSAnMCc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgMCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnMSc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgMSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnMic6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgMiwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnMyc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgMywgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnNCc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgNCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnNSc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgNSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnNic6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgNiwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnNyc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgNywgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnOCc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgOCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnOSc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgOSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnYSc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgMTAsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJ0EnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWwsIDEwLCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICdiJzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCAxMSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnQic6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgMTEsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJ2MnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWwsIDEyLCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICdDJzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCAxMiwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnZCc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgMTMsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJ0QnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWwsIDEzLCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICdlJzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCAxNCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnRSc6CgkJCQlyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmVIZXhhZGVjaW1hbCwgMTQsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJ2YnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlSGV4YWRlY2ltYWwsIDE1LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICdGJzoKCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZUhleGFkZWNpbWFsLCAxNSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiB7X2ludDogMCwgb2Zmc2V0OiAtMX07CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRlcnJvckFzQmFzZU9mZnNldEFuZEludCA9IHsKCWJhc2U6ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JERlY2ltYWwsCglvZmZzZXRBbmRJbnQ6IHtfaW50OiAwLCBvZmZzZXQ6IC0xfQp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydEludGVnZXJEZWNpbWFsT3JIZXhhZGVjaW1hbCA9IEYyKAoJZnVuY3Rpb24gKG9mZnNldCwgc3JjKSB7CgkJdmFyIF92MCA9IEEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQlzd2l0Y2ggKF92MCkgewoJCQljYXNlICcwJzoKCQkJCXZhciBfdjEgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQgKyAxLCBvZmZzZXQgKyAyLCBzcmMpOwoJCQkJaWYgKF92MSA9PT0gJ3gnKSB7CgkJCQkJdmFyIGhleCA9IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQxT3JNb3JlSGV4YWRlY2ltYWwsIG9mZnNldCArIDIsIHNyYyk7CgkJCQkJcmV0dXJuIHsKCQkJCQkJYmFzZTogJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkSGV4YWRlY2ltYWwsCgkJCQkJCW9mZnNldEFuZEludDoge19pbnQ6IGhleC5faW50LCBvZmZzZXQ6IGhleC5vZmZzZXR9CgkJCQkJfTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJYmFzZTogJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRGVjaW1hbCwKCQkJCQkJb2Zmc2V0QW5kSW50OiB7X2ludDogMCwgb2Zmc2V0OiBvZmZzZXQgKyAxfQoJCQkJCX07CgkJCQl9CgkJCWNhc2UgJzEnOgoJCQkJcmV0dXJuIHsKCQkJCQliYXNlOiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCREZWNpbWFsLAoJCQkJCW9mZnNldEFuZEludDogQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgMSwgb2Zmc2V0ICsgMSwgc3JjKQoJCQkJfTsKCQkJY2FzZSAnMic6CgkJCQlyZXR1cm4gewoJCQkJCWJhc2U6ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JERlY2ltYWwsCgkJCQkJb2Zmc2V0QW5kSW50OiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZTBUbzlzLCAyLCBvZmZzZXQgKyAxLCBzcmMpCgkJCQl9OwoJCQljYXNlICczJzoKCQkJCXJldHVybiB7CgkJCQkJYmFzZTogJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRGVjaW1hbCwKCQkJCQlvZmZzZXRBbmRJbnQ6IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDMsIG9mZnNldCArIDEsIHNyYykKCQkJCX07CgkJCWNhc2UgJzQnOgoJCQkJcmV0dXJuIHsKCQkJCQliYXNlOiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCREZWNpbWFsLAoJCQkJCW9mZnNldEFuZEludDogQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgNCwgb2Zmc2V0ICsgMSwgc3JjKQoJCQkJfTsKCQkJY2FzZSAnNSc6CgkJCQlyZXR1cm4gewoJCQkJCWJhc2U6ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JERlY2ltYWwsCgkJCQkJb2Zmc2V0QW5kSW50OiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZTBUbzlzLCA1LCBvZmZzZXQgKyAxLCBzcmMpCgkJCQl9OwoJCQljYXNlICc2JzoKCQkJCXJldHVybiB7CgkJCQkJYmFzZTogJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRGVjaW1hbCwKCQkJCQlvZmZzZXRBbmRJbnQ6IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDYsIG9mZnNldCArIDEsIHNyYykKCQkJCX07CgkJCWNhc2UgJzcnOgoJCQkJcmV0dXJuIHsKCQkJCQliYXNlOiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCREZWNpbWFsLAoJCQkJCW9mZnNldEFuZEludDogQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY29udmVydDBPck1vcmUwVG85cywgNywgb2Zmc2V0ICsgMSwgc3JjKQoJCQkJfTsKCQkJY2FzZSAnOCc6CgkJCQlyZXR1cm4gewoJCQkJCWJhc2U6ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JERlY2ltYWwsCgkJCQkJb2Zmc2V0QW5kSW50OiBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0ME9yTW9yZTBUbzlzLCA4LCBvZmZzZXQgKyAxLCBzcmMpCgkJCQl9OwoJCQljYXNlICc5JzoKCQkJCXJldHVybiB7CgkJCQkJYmFzZTogJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRGVjaW1hbCwKCQkJCQlvZmZzZXRBbmRJbnQ6IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDksIG9mZnNldCArIDEsIHNyYykKCQkJCX07CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZXJyb3JBc0Jhc2VPZmZzZXRBbmRJbnQ7CgkJfQoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpbnRlZ2VyRGVjaW1hbE9ySGV4YWRlY2ltYWxNYXBXaXRoUmFuZ2UgPSBGMigKCWZ1bmN0aW9uIChyYW5nZUFuZEludERlY2ltYWxUb1JlcywgcmFuZ2VBbmRJbnRIZXhhZGVjaW1hbFRvUmVzKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgczEgPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0SW50ZWdlckRlY2ltYWxPckhleGFkZWNpbWFsLCBzMC5vZmZzZXQsIHMwLnNyYyk7CgkJCQlpZiAoX1V0aWxzX2VxKHMxLm9mZnNldEFuZEludC5vZmZzZXQsIC0xKSkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQlmYWxzZSwKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nTnVtYmVyLCBzMC5yb3csIHMwLmNvbCkpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgbmV3Q29sdW1uID0gczAuY29sICsgKHMxLm9mZnNldEFuZEludC5vZmZzZXQgLSBzMC5vZmZzZXQpOwoJCQkJCXZhciByYW5nZSA9IHsKCQkJCQkJZW5kOiB7Y29sdW1uOiBuZXdDb2x1bW4sIHJvdzogczAucm93fSwKCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJfTsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCXZhciBfdjAgPSBzMS5iYXNlOwoJCQkJCQkJaWYgKF92MC4kID09PSAnRGVjaW1hbCcpIHsKCQkJCQkJCQlyZXR1cm4gQTIocmFuZ2VBbmRJbnREZWNpbWFsVG9SZXMsIHJhbmdlLCBzMS5vZmZzZXRBbmRJbnQuX2ludCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXJldHVybiBBMihyYW5nZUFuZEludEhleGFkZWNpbWFsVG9SZXMsIHJhbmdlLCBzMS5vZmZzZXRBbmRJbnQuX2ludCk7CgkJCQkJCQl9CgkJCQkJCX0oKSwKCQkJCQkJe2NvbDogbmV3Q29sdW1uLCBpbmRlbnQ6IHMwLmluZGVudCwgb2Zmc2V0OiBzMS5vZmZzZXRBbmRJbnQub2Zmc2V0LCByb3c6IHMwLnJvdywgc3JjOiBzMC5zcmN9KTsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJG51bWJlclBhcnQgPSBBMigKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGludGVnZXJEZWNpbWFsT3JIZXhhZGVjaW1hbE1hcFdpdGhSYW5nZSwKCUYyKAoJCWZ1bmN0aW9uIChyYW5nZSwgbikgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJcmFuZ2UsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRJbnRQYXR0ZXJuKG4pKQoJCQl9OwoJCX0pLAoJRjIoCgkJZnVuY3Rpb24gKHJhbmdlLCBuKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJEhleFBhdHRlcm4obikpCgkJCX07CgkJfSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyT3JTdWNjZWVkID0gRjMoCglmdW5jdGlvbiAoX3YwLCBfdjEsIHRoaXJkUmVzKSB7CgkJdmFyIGF0dGVtcHRGaXJzdCA9IF92MC5hOwoJCXZhciBhdHRlbXB0U2Vjb25kID0gX3YxLmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBfdjIgPSBhdHRlbXB0Rmlyc3Qocyk7CgkJCQlpZiAoX3YyLiQgPT09ICdHb29kJykgewoJCQkJCXZhciBmaXJzdEdvb2QgPSBfdjI7CgkJCQkJcmV0dXJuIGZpcnN0R29vZDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGZpcnN0QmFkID0gX3YyOwoJCQkJCXZhciBmaXJzdENvbW1pdHRlZCA9IGZpcnN0QmFkLmE7CgkJCQkJaWYgKGZpcnN0Q29tbWl0dGVkKSB7CgkJCQkJCXJldHVybiBmaXJzdEJhZDsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgX3YzID0gYXR0ZW1wdFNlY29uZChzKTsKCQkJCQkJaWYgKF92My4kID09PSAnR29vZCcpIHsKCQkJCQkJCXZhciBzZWNvbmRHb29kID0gX3YzOwoJCQkJCQkJcmV0dXJuIHNlY29uZEdvb2Q7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgc2Vjb25kQmFkID0gX3YzOwoJCQkJCQkJdmFyIHNlY29uZENvbW1pdHRlZCA9IHNlY29uZEJhZC5hOwoJCQkJCQkJcmV0dXJuIHNlY29uZENvbW1pdHRlZCA/IHNlY29uZEJhZCA6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsIHRoaXJkUmVzLCBzKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mOSA9IEY5KAoJZnVuY3Rpb24gKF92MCwgX3YxLCBfdjIsIF92MywgX3Y0LCBfdjUsIF92NiwgX3Y3LCBfdjgpIHsKCQl2YXIgYXR0ZW1wdDAgPSBfdjAuYTsKCQl2YXIgYXR0ZW1wdDEgPSBfdjEuYTsKCQl2YXIgYXR0ZW1wdDIgPSBfdjIuYTsKCQl2YXIgYXR0ZW1wdDMgPSBfdjMuYTsKCQl2YXIgYXR0ZW1wdDQgPSBfdjQuYTsKCQl2YXIgYXR0ZW1wdDUgPSBfdjUuYTsKCQl2YXIgYXR0ZW1wdDYgPSBfdjYuYTsKCQl2YXIgYXR0ZW1wdDcgPSBfdjcuYTsKCQl2YXIgYXR0ZW1wdDggPSBfdjguYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIF92OSA9IGF0dGVtcHQwKHMpOwoJCQkJaWYgKF92OS4kID09PSAnR29vZCcpIHsKCQkJCQl2YXIgZ29vZCA9IF92OTsKCQkJCQlyZXR1cm4gZ29vZDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGJhZDAgPSBfdjk7CgkJCQkJdmFyIGNvbW1pdHRlZDAgPSBiYWQwLmE7CgkJCQkJdmFyIHgwID0gYmFkMC5iOwoJCQkJCWlmIChjb21taXR0ZWQwKSB7CgkJCQkJCXJldHVybiBiYWQwOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjEwID0gYXR0ZW1wdDEocyk7CgkJCQkJCWlmIChfdjEwLiQgPT09ICdHb29kJykgewoJCQkJCQkJdmFyIGdvb2QgPSBfdjEwOwoJCQkJCQkJcmV0dXJuIGdvb2Q7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYmFkMSA9IF92MTA7CgkJCQkJCQl2YXIgY29tbWl0dGVkMSA9IGJhZDEuYTsKCQkJCQkJCXZhciB4MSA9IGJhZDEuYjsKCQkJCQkJCWlmIChjb21taXR0ZWQxKSB7CgkJCQkJCQkJcmV0dXJuIGJhZDE7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBfdjExID0gYXR0ZW1wdDIocyk7CgkJCQkJCQkJaWYgKF92MTEuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQkJCXZhciBnb29kID0gX3YxMTsKCQkJCQkJCQkJcmV0dXJuIGdvb2Q7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJdmFyIGJhZDIgPSBfdjExOwoJCQkJCQkJCQl2YXIgY29tbWl0dGVkMiA9IGJhZDIuYTsKCQkJCQkJCQkJdmFyIHgyID0gYmFkMi5iOwoJCQkJCQkJCQlpZiAoY29tbWl0dGVkMikgewoJCQkJCQkJCQkJcmV0dXJuIGJhZDI7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQl2YXIgX3YxMiA9IGF0dGVtcHQzKHMpOwoJCQkJCQkJCQkJaWYgKF92MTIuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQkJCQkJdmFyIGdvb2QgPSBfdjEyOwoJCQkJCQkJCQkJCXJldHVybiBnb29kOwoJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQl2YXIgYmFkMyA9IF92MTI7CgkJCQkJCQkJCQkJdmFyIGNvbW1pdHRlZDMgPSBiYWQzLmE7CgkJCQkJCQkJCQkJdmFyIHgzID0gYmFkMy5iOwoJCQkJCQkJCQkJCWlmIChjb21taXR0ZWQzKSB7CgkJCQkJCQkJCQkJCXJldHVybiBiYWQzOwoJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCXZhciBfdjEzID0gYXR0ZW1wdDQocyk7CgkJCQkJCQkJCQkJCWlmIChfdjEzLiQgPT09ICdHb29kJykgewoJCQkJCQkJCQkJCQkJdmFyIGdvb2QgPSBfdjEzOwoJCQkJCQkJCQkJCQkJcmV0dXJuIGdvb2Q7CgkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQl2YXIgYmFkNCA9IF92MTM7CgkJCQkJCQkJCQkJCQl2YXIgY29tbWl0dGVkNCA9IGJhZDQuYTsKCQkJCQkJCQkJCQkJCXZhciB4NCA9IGJhZDQuYjsKCQkJCQkJCQkJCQkJCWlmIChjb21taXR0ZWQ0KSB7CgkJCQkJCQkJCQkJCQkJcmV0dXJuIGJhZDQ7CgkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCXZhciBfdjE0ID0gYXR0ZW1wdDUocyk7CgkJCQkJCQkJCQkJCQkJaWYgKF92MTQuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQkJCQkJCQkJCXZhciBnb29kID0gX3YxNDsKCQkJCQkJCQkJCQkJCQkJcmV0dXJuIGdvb2Q7CgkJCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCQkJdmFyIGJhZDUgPSBfdjE0OwoJCQkJCQkJCQkJCQkJCQl2YXIgY29tbWl0dGVkNSA9IGJhZDUuYTsKCQkJCQkJCQkJCQkJCQkJdmFyIHg1ID0gYmFkNS5iOwoJCQkJCQkJCQkJCQkJCQlpZiAoY29tbWl0dGVkNSkgewoJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIGJhZDU7CgkJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCQl2YXIgX3YxNSA9IGF0dGVtcHQ2KHMpOwoJCQkJCQkJCQkJCQkJCQkJaWYgKF92MTUuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIGdvb2QgPSBfdjE1OwoJCQkJCQkJCQkJCQkJCQkJCXJldHVybiBnb29kOwoJCQkJCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgYmFkNiA9IF92MTU7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIGNvbW1pdHRlZDYgPSBiYWQ2LmE7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIHg2ID0gYmFkNi5iOwoJCQkJCQkJCQkJCQkJCQkJCWlmIChjb21taXR0ZWQ2KSB7CgkJCQkJCQkJCQkJCQkJCQkJCXJldHVybiBiYWQ2OwoJCQkJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCQkJCXZhciBfdjE2ID0gYXR0ZW1wdDcocyk7CgkJCQkJCQkJCQkJCQkJCQkJCWlmIChfdjE2LiQgPT09ICdHb29kJykgewoJCQkJCQkJCQkJCQkJCQkJCQkJdmFyIGdvb2QgPSBfdjE2OwoJCQkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIGdvb2Q7CgkJCQkJCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgYmFkNyA9IF92MTY7CgkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgY29tbWl0dGVkNyA9IGJhZDcuYTsKCQkJCQkJCQkJCQkJCQkJCQkJCXZhciB4NyA9IGJhZDcuYjsKCQkJCQkJCQkJCQkJCQkJCQkJCWlmIChjb21taXR0ZWQ3KSB7CgkJCQkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIGJhZDc7CgkJCQkJCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQkJCQkJCXZhciBfdjE3ID0gYXR0ZW1wdDgocyk7CgkJCQkJCQkJCQkJCQkJCQkJCQkJaWYgKF92MTcuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQkJCQkJCQkJCQkJCQkJCXZhciBnb29kID0gX3YxNzsKCQkJCQkJCQkJCQkJCQkJCQkJCQkJcmV0dXJuIGdvb2Q7CgkJCQkJCQkJCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCQkJCQkJCQkJdmFyIGJhZDggPSBfdjE3OwoJCQkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgY29tbWl0dGVkOCA9IGJhZDguYTsKCQkJCQkJCQkJCQkJCQkJCQkJCQkJdmFyIHg4ID0gYmFkOC5iOwoJCQkJCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gY29tbWl0dGVkOCA/IGJhZDggOiBBMigKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCWZhbHNlLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nT25lT2YsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJeDAsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJeDEsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQlbeDIsIHgzLCB4NCwgeDUsIHg2LCB4NywgeDhdKSkpOwoJCQkJCQkJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHBhdHRlcm5MaXN0RW1wdHkgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJExpc3RQYXR0ZXJuKF9MaXN0X05pbCk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkcHJvYmxlbVBvc2l0aXZlbHlJbmRlbnRlZCA9ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHByb2JsZW0oJ211c3QgYmUgcG9zaXRpdmVseSBpbmRlbnRlZCcpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHBvc2l0aXZlbHlJbmRlbnRlZEZvbGxvd2VkQnkgPSBmdW5jdGlvbiAobmV4dFBhcnNlcikgewoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbHVtbkluZGVudEFuZFRoZW4oCgkJRjIoCgkJCWZ1bmN0aW9uIChjb2x1bW4sIGluZGVudCkgewoJCQkJcmV0dXJuIChfVXRpbHNfY21wKGNvbHVtbiwgaW5kZW50KSA+IDApID8gbmV4dFBhcnNlciA6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRwcm9ibGVtUG9zaXRpdmVseUluZGVudGVkOwoJCQl9KSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZVdpdGhvdXRMaW5lYnJlYWsgPSBGMigKCWZ1bmN0aW9uIChmaXJzdElzT2theSwgYWZ0ZXJGaXJzdElzT2theSkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQl2YXIgZmlyc3RPZmZzZXQgPSBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpc1N1YkNoYXJXaXRob3V0TGluZWJyZWFrLCBmaXJzdElzT2theSwgcy5vZmZzZXQsIHMuc3JjKTsKCQkJCWlmIChfVXRpbHNfZXEoZmlyc3RPZmZzZXQsIC0xKSkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQlmYWxzZSwKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nQ2hhclNhdGlzZnlpbmdQcmVkaWNhdGUsIHMucm93LCBzLmNvbCkpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgczEgPSBBNigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwV2hpbGVXaXRob3V0TGluZWJyZWFrSGVscCwgYWZ0ZXJGaXJzdElzT2theSwgZmlyc3RPZmZzZXQsIHMucm93LCBzLmNvbCArIDEsIHMuc3JjLCBzLmluZGVudCk7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzLm9mZnNldCwgczEub2Zmc2V0LCBzLnNyYyksCgkJCQkJCXMxKTsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJHVuaWNvZGVJc1VwcGVyRmFzdCA9IGZ1bmN0aW9uIChjKSB7Cgl2YXIgY29kZSA9ICRlbG0kY29yZSRDaGFyJHRvQ29kZShjKTsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSRjaGFyQ29kZUlzVXBwZXIoY29kZSkgfHwgZnVuY3Rpb24gKCkgewoJCXZhciBjU3RyaW5nID0gJGVsbSRjb3JlJFN0cmluZyRmcm9tQ2hhcihjKTsKCQlyZXR1cm4gKF9VdGlsc19lcSgKCQkJJGVsbSRjb3JlJFN0cmluZyR0b1VwcGVyKGNTdHJpbmcpLAoJCQljU3RyaW5nICsgJycpICYmICghX1V0aWxzX2VxKAoJCQkkZWxtJGNvcmUkU3RyaW5nJHRvTG93ZXIoY1N0cmluZyksCgkJCWNTdHJpbmcgKyAnJykpKSA/ICgoY29kZSA8PSA4NTQzKSB8fCAoKCg4NTYwIDw9IGNvZGUpICYmIChjb2RlIDw9IDkzOTcpKSB8fCAoKDk0MjQgPD0gY29kZSkgJiYgKGNvZGUgPD0gOTgzMDQwKSkpKSA6ICgoY29kZSA8IDEyMDAxNSkgPyAoKGNvZGUgPCA4NTA5KSA/ICgoKDk3OCA8PSBjb2RlKSAmJiAoY29kZSA8PSA5ODApKSB8fCAoKGNvZGUgPT09IDg0NTApIHx8ICgoY29kZSA9PT0gODQ1NSkgfHwgKCgoODQ1OSA8PSBjb2RlKSAmJiAoY29kZSA8PSA4NDYxKSkgfHwgKCgoODQ2NCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4NDY2KSkgfHwgKChjb2RlID09PSA4NDY5KSB8fCAoKCg4NDczIDw9IGNvZGUpICYmIChjb2RlIDw9IDg0NzcpKSB8fCAoKGNvZGUgPT09IDg0ODQpIHx8ICgoY29kZSA9PT0gODQ4OCkgfHwgKCgoODQ5MCA8PSBjb2RlKSAmJiAoY29kZSA8PSA4NDkzKSkgfHwgKCg4NDk2IDw9IGNvZGUpICYmIChjb2RlIDw9IDg0OTkpKSkpKSkpKSkpKSkgOiAoKCg4NTEwIDw9IGNvZGUpICYmIChjb2RlIDw9IDg1MTEpKSB8fCAoKGNvZGUgPT09IDg1MTcpIHx8ICgoKDExOTgwOCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk4MzMpKSB8fCAoKCgxMTk4NjAgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE5ODg1KSkgfHwgKCgoMTE5OTEyIDw9IGNvZGUpICYmIChjb2RlIDw9IDExOTkzNykpIHx8ICgoY29kZSA9PT0gMTE5OTY0KSB8fCAoKCgxMTk5NjYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE5OTY3KSkgfHwgKChjb2RlID09PSAxMTk5NzApIHx8ICgoKDExOTk3MyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMTk5NzQpKSB8fCAoKCgxMTk5NzcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE5OTgwKSkgfHwgKCgxMTk5ODIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTE5OTg5KSkpKSkpKSkpKSkpKSA6ICgoY29kZSA8IDEyMDIyMykgPyAoKCgxMjAwMTYgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMDQxKSkgfHwgKCgoMTIwMDY4IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDA2OSkpIHx8ICgoKDEyMDA3MSA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAwNzQpKSB8fCAoKCgxMjAwNzcgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMDg0KSkgfHwgKCgoMTIwMDg2IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDA5MikpIHx8ICgoKDEyMDEyMCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAxMjEpKSB8fCAoKCgxMjAxMjMgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMTI2KSkgfHwgKCgoMTIwMTI4IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDEzMikpIHx8ICgoY29kZSA9PT0gMTIwMTM0KSB8fCAoKCgxMjAxMzggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMTQ0KSkgfHwgKCgxMjAxNzIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMTk3KSkpKSkpKSkpKSkpIDogKCgoMTIwMjI0IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDI0OSkpIHx8ICgoKDEyMDI3NiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjAzMDEpKSB8fCAoKCgxMjAzMjggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwMzUzKSkgfHwgKCgoMTIwMzgwIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDQwNSkpIHx8ICgoKDEyMDQzMiA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA0NTcpKSB8fCAoKCgxMjA0ODggPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNTEyKSkgfHwgKCgoMTIwNTQ2IDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDU3MCkpIHx8ICgoKDEyMDYwNCA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjA2MjgpKSB8fCAoKCgxMjA2NjIgPD0gY29kZSkgJiYgKGNvZGUgPD0gMTIwNjg2KSkgfHwgKCgoMTIwNzIwIDw9IGNvZGUpICYmIChjb2RlIDw9IDEyMDc0NCkpIHx8IChjb2RlID09PSAxMjA3NzgpKSkpKSkpKSkpKSkpOwoJfSgpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lID0gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaWZGb2xsb3dlZEJ5V2hpbGVXaXRob3V0TGluZWJyZWFrLCAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSR1bmljb2RlSXNVcHBlckZhc3QsICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJHVuaWNvZGVJc0FscGhhTnVtT3JVbmRlcnNjb3JlRmFzdCk7CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRtYXliZURvdFR5cGVOYW1lc1R1cGxlKCkgewoJcmV0dXJuIEE0KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJPclN1Y2NlZWQsCgkJRjIoCgkJCWZ1bmN0aW9uIChzdGFydE5hbWUsIGFmdGVyU3RhcnROYW1lKSB7CgkJCQlpZiAoYWZ0ZXJTdGFydE5hbWUuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQlfVXRpbHNfVHVwbGUyKF9MaXN0X05pbCwgc3RhcnROYW1lKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfdjEgPSBhZnRlclN0YXJ0TmFtZS5hOwoJCQkJCXZhciBxdWFsaWZpY2F0aW9uQWZ0ZXIgPSBfdjEuYTsKCQkJCQl2YXIgdW5xdWFsaWZpZWQgPSBfdjEuYjsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBzdGFydE5hbWUsIHF1YWxpZmljYXRpb25BZnRlciksCgkJCQkJCQl1bnF1YWxpZmllZCkpOwoJCQkJfQoJCQl9KSwKCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAnLicsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyR0eXBlTmFtZSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbGF6eSgKCQkJZnVuY3Rpb24gKF92MikgewoJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRtYXliZURvdFR5cGVOYW1lc1R1cGxlKCk7CgkJCX0pLAoJCSRlbG0kY29yZSRNYXliZSROb3RoaW5nKTsKfQp0cnkgewoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJG1heWJlRG90VHlwZU5hbWVzVHVwbGUgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkbWF5YmVEb3RUeXBlTmFtZXNUdXBsZSgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJG1heWJlRG90VHlwZU5hbWVzVHVwbGUgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJG1heWJlRG90VHlwZU5hbWVzVHVwbGU7Cgl9Owp9IGNhdGNoICgkKSB7Cgl0aHJvdyAnU29tZSB0b3AtbGV2ZWwgZGVmaW5pdGlvbnMgZnJvbSBgRWxtLlBhcnNlci5QYXR0ZXJuc2AgYXJlIGNhdXNpbmcgaW5maW5pdGUgcmVjdXJzaW9uOlxuXG4gIOKUjOKUgOKUgOKUgOKUgOKUgOKUkFxuICDilIIgICAgbWF5YmVEb3RUeXBlTmFtZXNUdXBsZVxuICDilJTilIDilIDilIDilIDilIDilJhcblxuVGhlc2UgZXJyb3JzIGFyZSB2ZXJ5IHRyaWNreSwgc28gcmVhZCBodHRwczovL2VsbS1sYW5nLm9yZy8wLjE5LjEvYmFkLXJlY3Vyc2lvbiB0byBsZWFybiBob3cgdG8gZml4IGl0ISc7fQp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcXVhbGlmaWVkTmFtZVJlZk5vZGUgPSBBMygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJXaXRoUmFuZ2UsCglGMygKCQlmdW5jdGlvbiAocmFuZ2UsIGZpcnN0TmFtZSwgYWZ0ZXIpIHsKCQkJcmV0dXJuIEEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJcmFuZ2UsCgkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJaWYgKGFmdGVyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQlyZXR1cm4ge21vZHVsZU5hbWU6IF9MaXN0X05pbCwgbmFtZTogZmlyc3ROYW1lfTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgX3YxID0gYWZ0ZXIuYTsKCQkJCQkJdmFyIHF1YWxpZmljYXRpb25BZnRlciA9IF92MS5hOwoJCQkJCQl2YXIgdW5xdWFsaWZpZWQgPSBfdjEuYjsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW1vZHVsZU5hbWU6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGZpcnN0TmFtZSwgcXVhbGlmaWNhdGlvbkFmdGVyKSwKCQkJCQkJCW5hbWU6IHVucXVhbGlmaWVkCgkJCQkJCX07CgkJCQkJfQoJCQkJfSgpKTsKCQl9KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyR0eXBlTmFtZSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJG1heWJlRG90VHlwZU5hbWVzVHVwbGUpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcXVhbGlmaWVkUGF0dGVybldpdGhvdXRDb25zdW1lQXJncyA9IEEzKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhSYW5nZSwKCUYzKAoJCWZ1bmN0aW9uIChyYW5nZSwgZmlyc3ROYW1lLCBhZnRlcikgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJcmFuZ2UsCgkJCQkJQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kTmFtZWRQYXR0ZXJuLAoJCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJCQlpZiAoYWZ0ZXIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJcmV0dXJuIHttb2R1bGVOYW1lOiBfTGlzdF9OaWwsIG5hbWU6IGZpcnN0TmFtZX07CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBfdjEgPSBhZnRlci5hOwoJCQkJCQkJCXZhciBxdWFsaWZpY2F0aW9uQWZ0ZXIgPSBfdjEuYTsKCQkJCQkJCQl2YXIgdW5xdWFsaWZpZWQgPSBfdjEuYjsKCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQltb2R1bGVOYW1lOiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBmaXJzdE5hbWUsIHF1YWxpZmljYXRpb25BZnRlciksCgkJCQkJCQkJCW5hbWU6IHVucXVhbGlmaWVkCgkJCQkJCQkJfTsKCQkJCQkJCX0KCQkJCQkJfSgpLAoJCQkJCQlfTGlzdF9OaWwpKQoJCQl9OwoJCX0pLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkbWF5YmVEb3RUeXBlTmFtZXNUdXBsZSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJFJlY29yZFBhdHRlcm4gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUmVjb3JkUGF0dGVybicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcmVjb3JkUGF0dGVybiA9IEEzKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhSYW5nZSwKCUYzKAoJCWZ1bmN0aW9uIChyYW5nZSwgY29tbWVudHNCZWZvcmVFbGVtZW50cywgZWxlbWVudHMpIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGVsZW1lbnRzLmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZUVsZW1lbnRzKSwKCQkJCXN5bnRheDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXJhbmdlLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kUmVjb3JkUGF0dGVybihlbGVtZW50cy5zeW50YXgpKQoJCQl9OwoJCX0pLAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJ3snLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U3ltYm9sLAoJCQknfScsCgkJCUE0KAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQkJCUYzKAoJCQkJCWZ1bmN0aW9uIChoZWFkLCBjb21tZW50c0FmdGVySGVhZCwgdGFpbCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgdGFpbC5jb21tZW50cywgY29tbWVudHNBZnRlckhlYWQpLAoJCQkJCQkJc3ludGF4OiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBoZWFkLCB0YWlsLnN5bnRheCkKCQkJCQkJfTsKCQkJCQl9KSwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVOb2RlLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyRtYW55KAoJCQkJCUEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCQknLCcsCgkJCQkJCUE0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQkJCQkJCUYzKAoJCQkJCQkJCWZ1bmN0aW9uIChiZWZvcmVOYW1lLCBuYW1lLCBhZnRlck5hbWUpIHsKCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGFmdGVyTmFtZSwgYmVmb3JlTmFtZSksCgkJCQkJCQkJCQlzeW50YXg6IG5hbWUKCQkJCQkJCQkJfTsKCQkJCQkJCQl9KSwKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVOb2RlLAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSkpKSksCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwKCQkJJ30nLAoJCQl7Y29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LCBzeW50YXg6IF9MaXN0X05pbH0pKSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJFN0cmluZ1BhdHRlcm4gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnU3RyaW5nUGF0dGVybicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkc3RyaW5nUGF0dGVybiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRzaW5nbGVPclRyaXBsZVF1b3RlZFN0cmluZ0xpdGVyYWxNYXBXaXRoUmFuZ2UoCglGMigKCQlmdW5jdGlvbiAocmFuZ2UsIHN0cmluZykgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJcmFuZ2UsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRTdHJpbmdQYXR0ZXJuKHN0cmluZykpCgkJCX07CgkJfSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRWYXJQYXR0ZXJuID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1ZhclBhdHRlcm4nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVNYXBXaXRoUmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2VBbmROYW1lVG9SZXN1bHQpIHsKCXJldHVybiBBNCgkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZVZhbGlkYXRlTWFwV2l0aFJhbmdlV2l0aG91dExpbmVicmVhaywgcmFuZ2VBbmROYW1lVG9SZXN1bHQsICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJHVuaWNvZGVJc0xvd2VyRmFzdCwgJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkdW5pY29kZUlzQWxwaGFOdW1PclVuZGVyc2NvcmVGYXN0LCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkaXNOb3RSZXNlcnZlZCk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyR2YXJQYXR0ZXJuID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU1hcFdpdGhSYW5nZSgKCUYyKAoJCWZ1bmN0aW9uIChyYW5nZSwgX3ZhcikgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJcmFuZ2UsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRWYXJQYXR0ZXJuKF92YXIpKQoJCQl9OwoJCX0pKTsKZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJGNvbXBvc2FibGVQYXR0ZXJuVHJ5VG9Db21wb3NlKCkgewoJcmV0dXJuIEE0KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDMsCgkJRjMoCgkJCWZ1bmN0aW9uICh4LCBjb21tZW50c0FmdGVyTGVmdCwgbWF5YmVDb21wb3NlZFdpdGhSZXN1bHQpIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCW1heWJlQ29tcG9zZWRXaXRoUmVzdWx0LmNvbW1lbnRzLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJMZWZ0LCB4LmNvbW1lbnRzKSksCgkJCQkJc3ludGF4OiBmdW5jdGlvbiAoKSB7CgkJCQkJCXZhciBfdjcgPSBtYXliZUNvbXBvc2VkV2l0aFJlc3VsdC5zeW50YXg7CgkJCQkJCXN3aXRjaCAoX3Y3LiQpIHsKCQkJCQkJCWNhc2UgJ1BhdHRlcm5Db21wb3NlZFdpdGhOb3RoaW5nJzoKCQkJCQkJCQlyZXR1cm4geC5zeW50YXg7CgkJCQkJCQljYXNlICdQYXR0ZXJuQ29tcG9zZWRXaXRoQXMnOgoJCQkJCQkJCXZhciBhbm90aGVyTmFtZSA9IF92Ny5hOwoJCQkJCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGNvbWJpbmUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kQXNQYXR0ZXJuLCB4LnN5bnRheCwgYW5vdGhlck5hbWUpOwoJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQl2YXIgeSA9IF92Ny5hOwoJCQkJCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGNvbWJpbmUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kVW5Db25zUGF0dGVybiwgeC5zeW50YXgsIHkpOwoJCQkJCQl9CgkJCQkJfSgpCgkJCQl9OwoJCQl9KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkY29tcG9zYWJsZVBhdHRlcm4oKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJG1heWJlQ29tcG9zZWRXaXRoKCkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRjb21wb3NhYmxlUGF0dGVybigpIHsKCXJldHVybiBBOSgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkdmFyUGF0dGVybiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcXVhbGlmaWVkUGF0dGVybldpdGhDb25zdW1lQXJncygpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGFsbFBhdHRlcm4sCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhcmVuc1BhdHRlcm4oKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRyZWNvcmRQYXR0ZXJuLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHN0cmluZ1BhdHRlcm4sCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJGxpc3RQYXR0ZXJuKCksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkbnVtYmVyUGFydCwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjaGFyUGF0dGVybik7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHF1YWxpZmllZFBhdHRlcm5XaXRoQ29uc3VtZUFyZ3MoKSB7CglyZXR1cm4gQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQlGMygKCQkJZnVuY3Rpb24gKF92NCwgYWZ0ZXJTdGFydE5hbWUsIGFyZ3NSZXZlcnNlKSB7CgkJCQl2YXIgbmFtZVJhbmdlID0gX3Y0LmE7CgkJCQl2YXIgbmFtZSA9IF92NC5iOwoJCQkJdmFyIHJhbmdlID0gZnVuY3Rpb24gKCkgewoJCQkJCXZhciBfdjUgPSBhcmdzUmV2ZXJzZS5zeW50YXg7CgkJCQkJaWYgKCFfdjUuYikgewoJCQkJCQlyZXR1cm4gbmFtZVJhbmdlOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjYgPSBfdjUuYTsKCQkJCQkJdmFyIGxhc3RBcmdSYW5nZSA9IF92Ni5hOwoJCQkJCQlyZXR1cm4ge2VuZDogbGFzdEFyZ1JhbmdlLmVuZCwgc3RhcnQ6IG5hbWVSYW5nZS5zdGFydH07CgkJCQkJfQoJCQkJfSgpOwoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBhcmdzUmV2ZXJzZS5jb21tZW50cywgYWZ0ZXJTdGFydE5hbWUpLAoJCQkJCXN5bnRheDogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJcmFuZ2UsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiROYW1lZFBhdHRlcm4sCgkJCQkJCQluYW1lLAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkcmV2ZXJzZShhcmdzUmV2ZXJzZS5zeW50YXgpKSkKCQkJCX07CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHF1YWxpZmllZE5hbWVSZWZOb2RlLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvcHRpbWlzdGljTGF5b3V0LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkbWFueVdpdGhvdXRSZXZlcnNlKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkcG9zaXRpdmVseUluZGVudGVkRm9sbG93ZWRCeSgKCQkJCUEzKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCQkJRjIoCgkJCQkJCWZ1bmN0aW9uIChhcmcsIGNvbW1lbnRzQWZ0ZXJBcmcpIHsKCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlckFyZywgYXJnLmNvbW1lbnRzKSwKCQkJCQkJCQlzeW50YXg6IGFyZy5zeW50YXgKCQkJCQkJCX07CgkJCQkJCX0pLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRwYXR0ZXJuTm90RGlyZWN0bHlDb21wb3NpbmcoKSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCkpKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhdHRlcm5Ob3REaXJlY3RseUNvbXBvc2luZygpIHsKCXJldHVybiBBOSgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkdmFyUGF0dGVybiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRxdWFsaWZpZWRQYXR0ZXJuV2l0aG91dENvbnN1bWVBcmdzLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGFsbFBhdHRlcm4sCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhcmVuc1BhdHRlcm4oKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRyZWNvcmRQYXR0ZXJuLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHN0cmluZ1BhdHRlcm4sCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJGxpc3RQYXR0ZXJuKCksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkbnVtYmVyUGFydCwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjaGFyUGF0dGVybik7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJGxpc3RQYXR0ZXJuKCkgewoJcmV0dXJuIEEzKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJXaXRoUmFuZ2UsCgkJRjMoCgkJCWZ1bmN0aW9uIChyYW5nZSwgY29tbWVudHNCZWZvcmVFbGVtZW50cywgbWF5YmVFbGVtZW50cykgewoJCQkJaWYgKG1heWJlRWxlbWVudHMuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IGNvbW1lbnRzQmVmb3JlRWxlbWVudHMsCgkJCQkJCXN5bnRheDogQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLCByYW5nZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcGF0dGVybkxpc3RFbXB0eSkKCQkJCQl9OwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgZWxlbWVudHMgPSBtYXliZUVsZW1lbnRzLmE7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgZWxlbWVudHMuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlRWxlbWVudHMpLAoJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJcmFuZ2UsCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRQYXR0ZXJuJExpc3RQYXR0ZXJuKGVsZW1lbnRzLnN5bnRheCkpCgkJCQkJfTsKCQkJCX0KCQkJfSksCgkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJ1snLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwgJ10nLCAkZWxtJGNvcmUkTWF5YmUkTm90aGluZyksCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZm9sbG93ZWRCeVN5bWJvbCwKCQkJCSddJywKCQkJCUE0KAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDMsCgkJCQkJRjMoCgkJCQkJCWZ1bmN0aW9uIChoZWFkLCBjb21tZW50c0FmdGVySGVhZCwgdGFpbCkgewoJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCXsKCQkJCQkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJY29tbWVudHNBZnRlckhlYWQsCgkJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIHRhaWwuY29tbWVudHMsIGhlYWQuY29tbWVudHMpKSwKCQkJCQkJCQkJc3ludGF4OiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBoZWFkLnN5bnRheCwgdGFpbC5zeW50YXgpCgkJCQkJCQkJfSk7CgkJCQkJCX0pLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRwYXR0ZXJuKCksCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkbWFueSgKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCQkJJywnLAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlQXJvdW5kQm90aFNpZGVzKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRwYXR0ZXJuKCkpKSkpKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRtYXliZUNvbXBvc2VkV2l0aCgpIHsKCXJldHVybiBBMygKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjJPclN1Y2NlZWQsCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LAoJCQknYXMnLAoJCQlBMygKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCQlGMigKCQkJCQlmdW5jdGlvbiAoY29tbWVudHNBZnRlckFzLCBuYW1lKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQljb21tZW50czogY29tbWVudHNBZnRlckFzLAoJCQkJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRQYXR0ZXJuQ29tcG9zZWRXaXRoQXMobmFtZSkKCQkJCQkJfTsKCQkJCQl9KSwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVOb2RlKSksCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCSc6OicsCgkJCUEzKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJCUYyKAoJCQkJCWZ1bmN0aW9uIChjb21tZW50c0FmdGVyQ29ucywgcGF0dGVyblJlc3VsdCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgcGF0dGVyblJlc3VsdC5jb21tZW50cywgY29tbWVudHNBZnRlckNvbnMpLAoJCQkJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRQYXR0ZXJuQ29tcG9zZWRXaXRoQ29ucyhwYXR0ZXJuUmVzdWx0LnN5bnRheCkKCQkJCQkJfTsKCQkJCQl9KSwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRwYXR0ZXJuKCkpKSwKCQl7CgkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRQYXR0ZXJuQ29tcG9zZWRXaXRoTm90aGluZyhfVXRpbHNfVHVwbGUwKQoJCX0pOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRwYXJlbnNQYXR0ZXJuKCkgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJJygnLAoJCUEzKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyV2l0aFJhbmdlLAoJCQlGMygKCQkJCWZ1bmN0aW9uIChyYW5nZSwgY29tbWVudHNCZWZvcmVIZWFkLCBjb250ZW50UmVzdWx0KSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29udGVudFJlc3VsdC5jb21tZW50cywgY29tbWVudHNCZWZvcmVIZWFkKSwKCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXsKCQkJCQkJCQllbmQ6IHJhbmdlLmVuZCwKCQkJCQkJCQlzdGFydDoge2NvbHVtbjogcmFuZ2Uuc3RhcnQuY29sdW1uIC0gMSwgcm93OiByYW5nZS5zdGFydC5yb3d9CgkJCQkJCQl9LAoJCQkJCQkJY29udGVudFJlc3VsdC5zeW50YXgpCgkJCQkJfTsKCQkJCX0pLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCQkJQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQkJCScpJywKCQkJCQl7Y29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LCBzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kVW5pdFBhdHRlcm59KSwKCQkJCUE0KAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDMsCgkJCQkJRjMoCgkJCQkJCWZ1bmN0aW9uIChoZWFkUmVzdWx0LCBjb21tZW50c0FmdGVySGVhZCwgdGFpbFJlc3VsdCkgewoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJdGFpbFJlc3VsdC5jb21tZW50cywKCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVySGVhZCwgaGVhZFJlc3VsdC5jb21tZW50cykpLAoJCQkJCQkJCXN5bnRheDogZnVuY3Rpb24gKCkgewoJCQkJCQkJCQl2YXIgX3YxID0gdGFpbFJlc3VsdC5zeW50YXg7CgkJCQkJCQkJCWlmIChfdjEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRQYXJlbnRoZXNpemVkUGF0dGVybihoZWFkUmVzdWx0LnN5bnRheCk7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQl2YXIgc2Vjb25kQW5kTWF5YmVUaGlyZFBhcnQgPSBfdjEuYTsKCQkJCQkJCQkJCXZhciBfdjIgPSBzZWNvbmRBbmRNYXliZVRoaXJkUGFydC5tYXliZVRoaXJkUGFydDsKCQkJCQkJCQkJCWlmIChfdjIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFBhdHRlcm4kVHVwbGVQYXR0ZXJuKAoJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQlbaGVhZFJlc3VsdC5zeW50YXgsIHNlY29uZEFuZE1heWJlVGhpcmRQYXJ0LnNlY29uZFBhcnRdKSk7CgkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCXZhciB0aGlyZFBhcnQgPSBfdjIuYTsKCQkJCQkJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUGF0dGVybiRUdXBsZVBhdHRlcm4oCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVtoZWFkUmVzdWx0LnN5bnRheCwgc2Vjb25kQW5kTWF5YmVUaGlyZFBhcnQuc2Vjb25kUGFydCwgdGhpcmRQYXJ0XSkpOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfSgpCgkJCQkJCQl9OwoJCQkJCQl9KSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcGF0dGVybigpLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwKCQkJCQkJCScpJywKCQkJCQkJCXtjb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksIHN5bnRheDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSwKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCQkJJywnLAoJCQkJCQkJQTUoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNCwKCQkJCQkJCQlGNCgKCQkJCQkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCBzZWNvbmRQYXJ0LCBjb21tZW50c0FmdGVyLCBtYXliZVRoaXJkUGFydCkgewoJCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJCQkJbWF5YmVUaGlyZFBhcnQuY29tbWVudHMsCgkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJCQkJY29tbWVudHNBZnRlciwKCQkJCQkJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgc2Vjb25kUGFydC5jb21tZW50cywgY29tbWVudHNCZWZvcmUpKSksCgkJCQkJCQkJCQkJc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQkJCQkJe21heWJlVGhpcmRQYXJ0OiBtYXliZVRoaXJkUGFydC5zeW50YXgsIHNlY29uZFBhcnQ6IHNlY29uZFBhcnQuc3ludGF4fSkKCQkJCQkJCQkJCX07CgkJCQkJCQkJCX0pLAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcGF0dGVybigpLAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwKCQkJCQkJCQkJCScpJywKCQkJCQkJCQkJCXtjb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksIHN5bnRheDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCQkJCQkJJywnLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZm9sbG93ZWRCeVN5bWJvbCwKCQkJCQkJCQkJCQknKScsCgkJCQkJCQkJCQkJQTQoCgkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDMsCgkJCQkJCQkJCQkJCUYzKAoJCQkJCQkJCQkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCB0aGlyZFBhcnQsIGNvbW1lbnRzQWZ0ZXIpIHsKCQkJCQkJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQkJCQkJCQljb21tZW50c0FmdGVyLAoJCQkJCQkJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCB0aGlyZFBhcnQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKSksCgkJCQkJCQkJCQkJCQkJCXN5bnRheDogJGVsbSRjb3JlJE1heWJlJEp1c3QodGhpcmRQYXJ0LnN5bnRheCkKCQkJCQkJCQkJCQkJCQl9OwoJCQkJCQkJCQkJCQkJfSksCgkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhdHRlcm4oKSwKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSkpKSkpKSkpKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhdHRlcm4oKSB7CglyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbGF6eSgKCQlmdW5jdGlvbiAoX3YwKSB7CgkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkY29tcG9zYWJsZVBhdHRlcm5UcnlUb0NvbXBvc2UoKTsKCQl9KTsKfQp0cnkgewoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGNvbXBvc2FibGVQYXR0ZXJuVHJ5VG9Db21wb3NlID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJGNvbXBvc2FibGVQYXR0ZXJuVHJ5VG9Db21wb3NlKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkY29tcG9zYWJsZVBhdHRlcm5UcnlUb0NvbXBvc2UgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGNvbXBvc2FibGVQYXR0ZXJuVHJ5VG9Db21wb3NlOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjb21wb3NhYmxlUGF0dGVybiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRjb21wb3NhYmxlUGF0dGVybigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJGNvbXBvc2FibGVQYXR0ZXJuID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjb21wb3NhYmxlUGF0dGVybjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcXVhbGlmaWVkUGF0dGVybldpdGhDb25zdW1lQXJncyA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRxdWFsaWZpZWRQYXR0ZXJuV2l0aENvbnN1bWVBcmdzKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcXVhbGlmaWVkUGF0dGVybldpdGhDb25zdW1lQXJncyA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcXVhbGlmaWVkUGF0dGVybldpdGhDb25zdW1lQXJnczsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcGF0dGVybk5vdERpcmVjdGx5Q29tcG9zaW5nID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhdHRlcm5Ob3REaXJlY3RseUNvbXBvc2luZygpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhdHRlcm5Ob3REaXJlY3RseUNvbXBvc2luZyA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcGF0dGVybk5vdERpcmVjdGx5Q29tcG9zaW5nOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRsaXN0UGF0dGVybiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRsaXN0UGF0dGVybigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJGxpc3RQYXR0ZXJuID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRsaXN0UGF0dGVybjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkbWF5YmVDb21wb3NlZFdpdGggPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkbWF5YmVDb21wb3NlZFdpdGgoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJGN5Y2xpYyRtYXliZUNvbXBvc2VkV2l0aCA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkbWF5YmVDb21wb3NlZFdpdGg7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHBhcmVuc1BhdHRlcm4gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcGFyZW5zUGF0dGVybigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhcmVuc1BhdHRlcm4gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHBhcmVuc1BhdHRlcm47Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHBhdHRlcm4gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRjeWNsaWMkcGF0dGVybigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkY3ljbGljJHBhdHRlcm4gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHBhdHRlcm47Cgl9Owp9IGNhdGNoICgkKSB7Cgl0aHJvdyAnU29tZSB0b3AtbGV2ZWwgZGVmaW5pdGlvbnMgZnJvbSBgRWxtLlBhcnNlci5QYXR0ZXJuc2AgYXJlIGNhdXNpbmcgaW5maW5pdGUgcmVjdXJzaW9uOlxuXG4gIOKUjOKUgOKUgOKUgOKUgOKUgOKUkFxuICDilIIgICAgY29tcG9zYWJsZVBhdHRlcm5UcnlUb0NvbXBvc2VcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGNvbXBvc2FibGVQYXR0ZXJuXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBxdWFsaWZpZWRQYXR0ZXJuV2l0aENvbnN1bWVBcmdzXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwYXR0ZXJuTm90RGlyZWN0bHlDb21wb3NpbmdcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGxpc3RQYXR0ZXJuXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBtYXliZUNvbXBvc2VkV2l0aFxuICDilIIgICAgIOKGk1xuICDilIIgICAgcGFyZW5zUGF0dGVyblxuICDilIIgICAgIOKGk1xuICDilIIgICAgcGF0dGVyblxuICDilJTilIDilIDilIDilIDilIDilJhcblxuVGhlc2UgZXJyb3JzIGFyZSB2ZXJ5IHRyaWNreSwgc28gcmVhZCBodHRwczovL2VsbS1sYW5nLm9yZy8wLjE5LjEvYmFkLXJlY3Vyc2lvbiB0byBsZWFybiBob3cgdG8gZml4IGl0ISc7fQp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyR1bnRpbCA9IEYyKAoJZnVuY3Rpb24gKGVuZCwgZWxlbWVudCkgewoJCXJldHVybiBBNSgKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFVudGlsLAoJCQllbmQsCgkJCWVsZW1lbnQsCgkJCV9VdGlsc19UdXBsZTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksIF9MaXN0X05pbCksCgkJCUYyKAoJCQkJZnVuY3Rpb24gKHBSZXN1bHQsIF92MCkgewoJCQkJCXZhciBjb21tZW50c1NvRmFyID0gX3YwLmE7CgkJCQkJdmFyIGl0ZW1zU29GYXIgPSBfdjAuYjsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBwUmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c1NvRmFyKSwKCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgcFJlc3VsdC5zeW50YXgsIGl0ZW1zU29GYXIpKTsKCQkJCX0pLAoJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQl2YXIgY29tbWVudHNTb0ZhciA9IF92MS5hOwoJCQkJdmFyIGl0ZW1zU29GYXIgPSBfdjEuYjsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IGNvbW1lbnRzU29GYXIsCgkJCQkJc3ludGF4OiAkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKGl0ZW1zU29GYXIpCgkJCQl9OwoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwYXJhbWV0ZXJQYXR0ZXJuc0VxdWFsID0gQTIoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJHVudGlsLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGVxdWFsLAoJQTMoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQlGMigKCQkJZnVuY3Rpb24gKHBhdHRlcm5SZXN1bHQsIGNvbW1lbnRzQWZ0ZXJQYXR0ZXJuKSB7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJQYXR0ZXJuLCBwYXR0ZXJuUmVzdWx0LmNvbW1lbnRzKSwKCQkJCQlzeW50YXg6IHBhdHRlcm5SZXN1bHQuc3ludGF4CgkJCQl9OwoJCQl9KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRwYXR0ZXJuTm90RGlyZWN0bHlDb21wb3NpbmcsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkcG9zaXRpdmVseUluZGVudGVkUGx1c0ZvbGxvd2VkQnkgPSBGMigKCWZ1bmN0aW9uIChleHRyYUluZGVudCwgbmV4dFBhcnNlcikgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb2x1bW5JbmRlbnRBbmRUaGVuKAoJCQlGMigKCQkJCWZ1bmN0aW9uIChjb2x1bW4sIGluZGVudCkgewoJCQkJCXJldHVybiAoX1V0aWxzX2NtcChjb2x1bW4sIGluZGVudCArIGV4dHJhSW5kZW50KSA+IDApID8gbmV4dFBhcnNlciA6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRwcm9ibGVtUG9zaXRpdmVseUluZGVudGVkOwoJCQkJfSkpOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByb2JsZW1DYW5ub3RNaXhOb25Bc3NvY2lhdGl2ZUluZml4T3BlcmF0b3JzID0gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkcHJvYmxlbSgnY2Fubm90IG1peCBub24tYXNzb2NpYXRpdmUgaW5maXggb3BlcmF0b3JzIHdpdGhvdXQgcGFyZW50aGVzaXMnKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcmFuZ2VNb3ZlU3RhcnRMZWZ0QnlPbmVDb2x1bW4gPSBmdW5jdGlvbiAocmFuZ2UpIHsKCXJldHVybiB7CgkJZW5kOiByYW5nZS5lbmQsCgkJc3RhcnQ6IHtjb2x1bW46IHJhbmdlLnN0YXJ0LmNvbHVtbiAtIDEsIHJvdzogcmFuZ2Uuc3RhcnQucm93fQoJfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kUmVjb3JkQWNjZXNzRnVuY3Rpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUmVjb3JkQWNjZXNzRnVuY3Rpb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcmVjb3JkQWNjZXNzRnVuY3Rpb25FeHByZXNzaW9uID0gQTIoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJJy4nLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU1hcFdpdGhSYW5nZSgKCQlGMigKCQkJZnVuY3Rpb24gKHJhbmdlLCBmaWVsZCkgewoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQkJc3ludGF4OiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHJhbmdlTW92ZVN0YXJ0TGVmdEJ5T25lQ29sdW1uKHJhbmdlKSwKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRSZWNvcmRBY2Nlc3NGdW5jdGlvbignLicgKyBmaWVsZCkpCgkJCQl9OwoJCQl9KSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRGbG9hdGFibGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRmxvYXRhYmxlJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJEhleCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdIZXgnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kSW50ZWdlciA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdJbnRlZ2VyJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwME9yTW9yZURpZ2l0czBUbzkgPSBGMigKCWZ1bmN0aW9uIChvZmZzZXQsIHNyYykgewoJCXNraXAwT3JNb3JlRGlnaXRzMFRvOToKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgX3YwID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQlzd2l0Y2ggKF92MCkgewoJCQkJY2FzZSAnMCc6CgkJCQkJdmFyICR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIHNraXAwT3JNb3JlRGlnaXRzMFRvOTsKCQkJCWNhc2UgJzEnOgoJCQkJCXZhciAkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBza2lwME9yTW9yZURpZ2l0czBUbzk7CgkJCQljYXNlICcyJzoKCQkJCQl2YXIgJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgc2tpcDBPck1vcmVEaWdpdHMwVG85OwoJCQkJY2FzZSAnMyc6CgkJCQkJdmFyICR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIHNraXAwT3JNb3JlRGlnaXRzMFRvOTsKCQkJCWNhc2UgJzQnOgoJCQkJCXZhciAkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBza2lwME9yTW9yZURpZ2l0czBUbzk7CgkJCQljYXNlICc1JzoKCQkJCQl2YXIgJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgc2tpcDBPck1vcmVEaWdpdHMwVG85OwoJCQkJY2FzZSAnNic6CgkJCQkJdmFyICR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIHNraXAwT3JNb3JlRGlnaXRzMFRvOTsKCQkJCWNhc2UgJzcnOgoJCQkJCXZhciAkdGVtcCRvZmZzZXQgPSBvZmZzZXQgKyAxLAoJCQkJCQkkdGVtcCRzcmMgPSBzcmM7CgkJCQkJb2Zmc2V0ID0gJHRlbXAkb2Zmc2V0OwoJCQkJCXNyYyA9ICR0ZW1wJHNyYzsKCQkJCQljb250aW51ZSBza2lwME9yTW9yZURpZ2l0czBUbzk7CgkJCQljYXNlICc4JzoKCQkJCQl2YXIgJHRlbXAkb2Zmc2V0ID0gb2Zmc2V0ICsgMSwKCQkJCQkJJHRlbXAkc3JjID0gc3JjOwoJCQkJCW9mZnNldCA9ICR0ZW1wJG9mZnNldDsKCQkJCQlzcmMgPSAkdGVtcCRzcmM7CgkJCQkJY29udGludWUgc2tpcDBPck1vcmVEaWdpdHMwVG85OwoJCQkJY2FzZSAnOSc6CgkJCQkJdmFyICR0ZW1wJG9mZnNldCA9IG9mZnNldCArIDEsCgkJCQkJCSR0ZW1wJHNyYyA9IHNyYzsKCQkJCQlvZmZzZXQgPSAkdGVtcCRvZmZzZXQ7CgkJCQkJc3JjID0gJHRlbXAkc3JjOwoJCQkJCWNvbnRpbnVlIHNraXAwT3JNb3JlRGlnaXRzMFRvOTsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG9mZnNldDsKCQkJfQoJCX0KCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcDFPck1vcmVEaWdpdHMwVG85ID0gRjIoCglmdW5jdGlvbiAob2Zmc2V0LCBzcmMpIHsKCQl2YXIgX3YwID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0LCBvZmZzZXQgKyAxLCBzcmMpOwoJCXN3aXRjaCAoX3YwKSB7CgkJCWNhc2UgJzAnOgoJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXAwT3JNb3JlRGlnaXRzMFRvOSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnMSc6CgkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcDBPck1vcmVEaWdpdHMwVG85LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICcyJzoKCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwME9yTW9yZURpZ2l0czBUbzksIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzMnOgoJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXAwT3JNb3JlRGlnaXRzMFRvOSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnNCc6CgkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcDBPck1vcmVEaWdpdHMwVG85LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICc1JzoKCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwME9yTW9yZURpZ2l0czBUbzksIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzYnOgoJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXAwT3JNb3JlRGlnaXRzMFRvOSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnNyc6CgkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcDBPck1vcmVEaWdpdHMwVG85LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICc4JzoKCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwME9yTW9yZURpZ2l0czBUbzksIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzknOgoJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXAwT3JNb3JlRGlnaXRzMFRvOSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAtMTsKCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBBZnRlckZsb2F0RXhwb25lbnRNYXJrID0gRjIoCglmdW5jdGlvbiAob2Zmc2V0LCBzcmMpIHsKCQl2YXIgX3YwID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0LCBvZmZzZXQgKyAxLCBzcmMpOwoJCXN3aXRjaCAoX3YwKSB7CgkJCWNhc2UgJysnOgoJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXAxT3JNb3JlRGlnaXRzMFRvOSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJY2FzZSAnLSc6CgkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcDFPck1vcmVEaWdpdHMwVG85LCBvZmZzZXQgKyAxLCBzcmMpOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXAxT3JNb3JlRGlnaXRzMFRvOSwgb2Zmc2V0LCBzcmMpOwoJCX0KCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcEZsb2F0QWZ0ZXJJbnRlZ2VyRGVjaW1hbCA9IEYyKAoJZnVuY3Rpb24gKG9mZnNldCwgc3JjKSB7CgkJdmFyIF92MCA9IEEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMSwgc3JjKTsKCQlzd2l0Y2ggKF92MCkgewoJCQljYXNlICcuJzoKCQkJCXZhciBvZmZzZXRBZnRlckRpZ2l0cyA9IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXAxT3JNb3JlRGlnaXRzMFRvOSwgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJCWlmIChfVXRpbHNfZXEob2Zmc2V0QWZ0ZXJEaWdpdHMsIC0xKSkgewoJCQkJCXJldHVybiAtMTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIF92MSA9IEEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldEFmdGVyRGlnaXRzLCBvZmZzZXRBZnRlckRpZ2l0cyArIDEsIHNyYyk7CgkJCQkJc3dpdGNoIChfdjEpIHsKCQkJCQkJY2FzZSAnZSc6CgkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcEFmdGVyRmxvYXRFeHBvbmVudE1hcmssIG9mZnNldEFmdGVyRGlnaXRzICsgMSwgc3JjKTsKCQkJCQkJY2FzZSAnRSc6CgkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcEFmdGVyRmxvYXRFeHBvbmVudE1hcmssIG9mZnNldEFmdGVyRGlnaXRzICsgMSwgc3JjKTsKCQkJCQkJZGVmYXVsdDoKCQkJCQkJCXJldHVybiBvZmZzZXRBZnRlckRpZ2l0czsKCQkJCQl9CgkJCQl9CgkJCWNhc2UgJ2UnOgoJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBBZnRlckZsb2F0RXhwb25lbnRNYXJrLCBvZmZzZXQgKyAxLCBzcmMpOwoJCQljYXNlICdFJzoKCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRza2lwQWZ0ZXJGbG9hdEV4cG9uZW50TWFyaywgb2Zmc2V0ICsgMSwgc3JjKTsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAtMTsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRTdHJpbmckdG9GbG9hdCA9IF9TdHJpbmdfdG9GbG9hdDsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGZsb2F0T3JJbnRlZ2VyRGVjaW1hbE9ySGV4YWRlY2ltYWxNYXBXaXRoUmFuZ2UgPSBGMygKCWZ1bmN0aW9uIChyYW5nZUFuZEZsb2F0VG9SZXMsIHJhbmdlQW5kSW50RGVjaW1hbFRvUmVzLCByYW5nZUFuZEludEhleGFkZWNpbWFsVG9SZXMpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBzMSA9IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnRJbnRlZ2VyRGVjaW1hbE9ySGV4YWRlY2ltYWwsIHMwLm9mZnNldCwgczAuc3JjKTsKCQkJCWlmIChfVXRpbHNfZXEoczEub2Zmc2V0QW5kSW50Lm9mZnNldCwgLTEpKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCWZhbHNlLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdOdW1iZXIsIHMwLnJvdywgczAuY29sKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBvZmZzZXRBZnRlckZsb2F0ID0gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc2tpcEZsb2F0QWZ0ZXJJbnRlZ2VyRGVjaW1hbCwgczEub2Zmc2V0QW5kSW50Lm9mZnNldCwgczAuc3JjKTsKCQkJCQlpZiAoX1V0aWxzX2VxKG9mZnNldEFmdGVyRmxvYXQsIC0xKSkgewoJCQkJCQl2YXIgbmV3Q29sdW1uID0gczAuY29sICsgKHMxLm9mZnNldEFuZEludC5vZmZzZXQgLSBzMC5vZmZzZXQpOwoJCQkJCQl2YXIgcmFuZ2UgPSB7CgkJCQkJCQllbmQ6IHtjb2x1bW46IG5ld0NvbHVtbiwgcm93OiBzMC5yb3d9LAoJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJCX07CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJCQkJdmFyIF92MCA9IHMxLmJhc2U7CgkJCQkJCQkJaWYgKF92MC4kID09PSAnRGVjaW1hbCcpIHsKCQkJCQkJCQkJcmV0dXJuIEEyKHJhbmdlQW5kSW50RGVjaW1hbFRvUmVzLCByYW5nZSwgczEub2Zmc2V0QW5kSW50Ll9pbnQpOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXJldHVybiBBMihyYW5nZUFuZEludEhleGFkZWNpbWFsVG9SZXMsIHJhbmdlLCBzMS5vZmZzZXRBbmRJbnQuX2ludCk7CgkJCQkJCQkJfQoJCQkJCQkJfSgpLAoJCQkJCQkJe2NvbDogbmV3Q29sdW1uLCBpbmRlbnQ6IHMwLmluZGVudCwgb2Zmc2V0OiBzMS5vZmZzZXRBbmRJbnQub2Zmc2V0LCByb3c6IHMwLnJvdywgc3JjOiBzMC5zcmN9KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgX3YxID0gJGVsbSRjb3JlJFN0cmluZyR0b0Zsb2F0KAoJCQkJCQkJQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgczAub2Zmc2V0LCBvZmZzZXRBZnRlckZsb2F0LCBzMC5zcmMpKTsKCQkJCQkJaWYgKF92MS4kID09PSAnSnVzdCcpIHsKCQkJCQkJCXZhciBfZmxvYXQgPSBfdjEuYTsKCQkJCQkJCXZhciBuZXdDb2x1bW4gPSBzMC5jb2wgKyAob2Zmc2V0QWZ0ZXJGbG9hdCAtIHMwLm9mZnNldCk7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCQlBMigKCQkJCQkJCQkJcmFuZ2VBbmRGbG9hdFRvUmVzLAoJCQkJCQkJCQl7CgkJCQkJCQkJCQllbmQ6IHtjb2x1bW46IG5ld0NvbHVtbiwgcm93OiBzMC5yb3d9LAoJCQkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJCQkJCX0sCgkJCQkJCQkJCV9mbG9hdCksCgkJCQkJCQkJe2NvbDogbmV3Q29sdW1uLCBpbmRlbnQ6IHMwLmluZGVudCwgb2Zmc2V0OiBvZmZzZXRBZnRlckZsb2F0LCByb3c6IHMwLnJvdywgc3JjOiBzMC5zcmN9KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCQkJZmFsc2UsCgkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nTnVtYmVyLCBzMC5yb3csIHMwLmNvbCkpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRudW1iZXJFeHByZXNzaW9uID0gQTMoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmbG9hdE9ySW50ZWdlckRlY2ltYWxPckhleGFkZWNpbWFsTWFwV2l0aFJhbmdlLAoJRjIoCgkJZnVuY3Rpb24gKHJhbmdlLCBuKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJEZsb2F0YWJsZShuKSkKCQkJfTsKCQl9KSwKCUYyKAoJCWZ1bmN0aW9uIChyYW5nZSwgbikgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJcmFuZ2UsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRJbnRlZ2VyKG4pKQoJCQl9OwoJCX0pLAoJRjIoCgkJZnVuY3Rpb24gKHJhbmdlLCBuKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJEhleChuKSkKCQkJfTsKCQl9KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJEZ1bmN0aW9uT3JWYWx1ZSA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdGdW5jdGlvbk9yVmFsdWUnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaWZGb2xsb3dlZEJ5V2hpbGVWYWxpZGF0ZVdpdGhvdXRMaW5lYnJlYWsgPSBGMygKCWZ1bmN0aW9uIChmaXJzdElzT2theSwgYWZ0ZXJGaXJzdElzT2theSwgcmVzdWx0SXNPa2F5KSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBmaXJzdE9mZnNldCA9IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGlzU3ViQ2hhcldpdGhvdXRMaW5lYnJlYWssIGZpcnN0SXNPa2F5LCBzLm9mZnNldCwgcy5zcmMpOwoJCQkJaWYgKF9VdGlsc19lcShmaXJzdE9mZnNldCwgLTEpKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCWZhbHNlLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdDaGFyU2F0aXNmeWluZ1ByZWRpY2F0ZSwgcy5yb3csIHMuY29sKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBzMSA9IEE2KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtIZWxwLCBhZnRlckZpcnN0SXNPa2F5LCBmaXJzdE9mZnNldCwgcy5yb3csIHMuY29sICsgMSwgcy5zcmMsIHMuaW5kZW50KTsKCQkJCQl2YXIgbmFtZSA9IEEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIHMub2Zmc2V0LCBzMS5vZmZzZXQsIHMuc3JjKTsKCQkJCQlyZXR1cm4gcmVzdWx0SXNPa2F5KG5hbWUpID8gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwgbmFtZSwgczEpIDogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJZmFsc2UsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ1N0cmluZ1NhdGlzZnlpbmdQcmVkaWNhdGUsIHMucm93LCBzLmNvbCArIDEpKTsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWUgPSBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZVZhbGlkYXRlV2l0aG91dExpbmVicmVhaywgJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkdW5pY29kZUlzTG93ZXJGYXN0LCAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSR1bmljb2RlSXNBbHBoYU51bU9yVW5kZXJzY29yZUZhc3QsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRpc05vdFJlc2VydmVkKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMk1hcCA9IEY0KAoJZnVuY3Rpb24gKGZpcnN0VG9DaG9pY2UsIF92MCwgc2Vjb25kVG9DaG9pY2UsIF92MSkgewoJCXZhciBhdHRlbXB0Rmlyc3QgPSBfdjAuYTsKCQl2YXIgYXR0ZW1wdFNlY29uZCA9IF92MS5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQl2YXIgX3YyID0gYXR0ZW1wdEZpcnN0KHMpOwoJCQkJaWYgKF92Mi4kID09PSAnR29vZCcpIHsKCQkJCQl2YXIgZmlyc3QgPSBfdjIuYTsKCQkJCQl2YXIgczEgPSBfdjIuYjsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCWZpcnN0VG9DaG9pY2UoZmlyc3QpLAoJCQkJCQlzMSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBmaXJzdENvbW1pdHRlZCA9IF92Mi5hOwoJCQkJCXZhciBmaXJzdFggPSBfdjIuYjsKCQkJCQlpZiAoZmlyc3RDb21taXR0ZWQpIHsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgZmlyc3RDb21taXR0ZWQsIGZpcnN0WCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIF92MyA9IGF0dGVtcHRTZWNvbmQocyk7CgkJCQkJCWlmIChfdjMuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQl2YXIgc2Vjb25kID0gX3YzLmE7CgkJCQkJCQl2YXIgczEgPSBfdjMuYjsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJCXNlY29uZFRvQ2hvaWNlKHNlY29uZCksCgkJCQkJCQkJczEpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIHNlY29uZENvbW1pdHRlZCA9IF92My5hOwoJCQkJCQkJdmFyIHNlY29uZFggPSBfdjMuYjsKCQkJCQkJCXJldHVybiBzZWNvbmRDb21taXR0ZWQgPyBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHNlY29uZENvbW1pdHRlZCwgc2Vjb25kWCkgOiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsCgkJCQkJCQkJZmFsc2UsCgkJCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nT25lT2YsIGZpcnN0WCwgc2Vjb25kWCwgX0xpc3RfTmlsKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvclN1Y2NlZWQgPSBGMigKCWZ1bmN0aW9uIChfdjAsIHNlY29uZFJlcykgewoJCXZhciBhdHRlbXB0Rmlyc3QgPSBfdjAuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIF92MSA9IGF0dGVtcHRGaXJzdChzKTsKCQkJCWlmIChfdjEuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJdmFyIGZpcnN0R29vZCA9IF92MTsKCQkJCQlyZXR1cm4gZmlyc3RHb29kOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgZmlyc3RCYWQgPSBfdjE7CgkJCQkJdmFyIGZpcnN0Q29tbWl0dGVkID0gZmlyc3RCYWQuYTsKCQkJCQlyZXR1cm4gZmlyc3RDb21taXR0ZWQgPyBmaXJzdEJhZCA6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsIHNlY29uZFJlcywgcyk7CgkJCQl9CgkJCX0pOwoJfSk7CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJG1heWJlRG90UmVmZXJlbmNlRXhwcmVzc2lvblR1cGxlKCkgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9yU3VjY2VlZCwKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJJy4nLAoJCQlBNCgKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMk1hcCwKCQkJCSRlbG0kY29yZSRNYXliZSRKdXN0LAoJCQkJQTMoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJCQlGMigKCQkJCQkJZnVuY3Rpb24gKGZpcnN0TmFtZSwgYWZ0ZXIpIHsKCQkJCQkJCWlmIChhZnRlci4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMyhfTGlzdF9OaWwsIGZpcnN0TmFtZSwgX0xpc3RfTmlsKTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIF92MSA9IGFmdGVyLmE7CgkJCQkJCQkJdmFyIHF1YWxpZmljYXRpb25BZnRlciA9IF92MS5hOwoJCQkJCQkJCXZhciB1bnF1YWxpZmllZCA9IF92MS5iOwoJCQkJCQkJCXZhciByZWNvcmRBY2Nlc3MgPSBfdjEuYzsKCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMygKCQkJCQkJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZmlyc3ROYW1lLCBxdWFsaWZpY2F0aW9uQWZ0ZXIpLAoJCQkJCQkJCQl1bnF1YWxpZmllZCwKCQkJCQkJCQkJcmVjb3JkQWNjZXNzKTsKCQkJCQkJCX0KCQkJCQkJfSksCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxhenkoCgkJCQkJCWZ1bmN0aW9uIChfdjIpIHsKCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRtYXliZURvdFJlZmVyZW5jZUV4cHJlc3Npb25UdXBsZSgpOwoJCQkJCQl9KSksCgkJCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCQkJQTMoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJCQlGMigKCQkJCQkJZnVuY3Rpb24gKG5hbWUsIHJlY29yZEFjY2Vzc2VzKSB7CgkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJX1V0aWxzX1R1cGxlMyhfTGlzdF9OaWwsIG5hbWUsIHJlY29yZEFjY2Vzc2VzKSk7CgkJCQkJCX0pLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWUsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRtdWx0aVJlY29yZEFjY2VzcykpKSwKCQkkZWxtJGNvcmUkTWF5YmUkTm90aGluZyk7Cn0KdHJ5IHsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG1heWJlRG90UmVmZXJlbmNlRXhwcmVzc2lvblR1cGxlID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbWF5YmVEb3RSZWZlcmVuY2VFeHByZXNzaW9uVHVwbGUoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJG1heWJlRG90UmVmZXJlbmNlRXhwcmVzc2lvblR1cGxlID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG1heWJlRG90UmVmZXJlbmNlRXhwcmVzc2lvblR1cGxlOwoJfTsKfSBjYXRjaCAoJCkgewoJdGhyb3cgJ1NvbWUgdG9wLWxldmVsIGRlZmluaXRpb25zIGZyb20gYEVsbS5QYXJzZXIuRXhwcmVzc2lvbmAgYXJlIGNhdXNpbmcgaW5maW5pdGUgcmVjdXJzaW9uOlxuXG4gIOKUjOKUgOKUgOKUgOKUgOKUgOKUkFxuICDilIIgICAgbWF5YmVEb3RSZWZlcmVuY2VFeHByZXNzaW9uVHVwbGVcbiAg4pSU4pSA4pSA4pSA4pSA4pSA4pSYXG5cblRoZXNlIGVycm9ycyBhcmUgdmVyeSB0cmlja3ksIHNvIHJlYWQgaHR0cHM6Ly9lbG0tbGFuZy5vcmcvMC4xOS4xL2JhZC1yZWN1cnNpb24gdG8gbGVhcm4gaG93IHRvIGZpeCBpdCEnO30KdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcXVhbGlmaWVkT3JWYXJpYW50T3JSZWNvcmRDb25zdHJ1Y3RvclJlZmVyZW5jZUV4cHJlc3Npb25Gb2xsb3dlZEJ5UmVjb3JkQWNjZXNzID0gQTMoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyV2l0aFJhbmdlLAoJRjMoCgkJZnVuY3Rpb24gKHJhbmdlLCBmaXJzdE5hbWUsIGFmdGVyKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IGZ1bmN0aW9uICgpIHsKCQkJCQlpZiAoYWZ0ZXIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXJhbmdlLAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRGdW5jdGlvbk9yVmFsdWUsIF9MaXN0X05pbCwgZmlyc3ROYW1lKSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIF92MSA9IGFmdGVyLmE7CgkJCQkJCXZhciBxdWFsaWZpY2F0aW9uQWZ0ZXIgPSBfdjEuYTsKCQkJCQkJdmFyIHVucXVhbGlmaWVkID0gX3YxLmI7CgkJCQkJCXZhciByZWNvcmRBY2Nlc3NlcyA9IF92MS5jOwoJCQkJCQlpZiAoIXJlY29yZEFjY2Vzc2VzLmIpIHsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJcmFuZ2UsCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kRnVuY3Rpb25PclZhbHVlLAoJCQkJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBmaXJzdE5hbWUsIHF1YWxpZmljYXRpb25BZnRlciksCgkJCQkJCQkJCXVucXVhbGlmaWVkKSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgX3YzID0gcmVjb3JkQWNjZXNzZXMuYTsKCQkJCQkJCXZhciBmaXJzdFJlY29yZEFjY2Vzc1JhbmdlID0gX3YzLmE7CgkJCQkJCQl2YXIgcmVmZXJlbmNlTm9kZSA9IEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQl7CgkJCQkJCQkJCWVuZDoge2NvbHVtbjogZmlyc3RSZWNvcmRBY2Nlc3NSYW5nZS5zdGFydC5jb2x1bW4gLSAxLCByb3c6IGZpcnN0UmVjb3JkQWNjZXNzUmFuZ2Uuc3RhcnQucm93fSwKCQkJCQkJCQkJc3RhcnQ6IHJhbmdlLnN0YXJ0CgkJCQkJCQkJfSwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRGdW5jdGlvbk9yVmFsdWUsCgkJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGZpcnN0TmFtZSwgcXVhbGlmaWNhdGlvbkFmdGVyKSwKCQkJCQkJCQkJdW5xdWFsaWZpZWQpKTsKCQkJCQkJCXJldHVybiBBMygKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJCQkJCQlGMigKCQkJCQkJCQkJZnVuY3Rpb24gKGZpZWxkTm9kZSwgbGVmdE5vZGUpIHsKCQkJCQkJCQkJCXZhciBmaWVsZFJhbmdlID0gZmllbGROb2RlLmE7CgkJCQkJCQkJCQl2YXIgbGVmdFJhbmdlID0gbGVmdE5vZGUuYTsKCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJCQkJe2VuZDogZmllbGRSYW5nZS5lbmQsIHN0YXJ0OiBsZWZ0UmFuZ2Uuc3RhcnR9LAoJCQkJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kUmVjb3JkQWNjZXNzLCBsZWZ0Tm9kZSwgZmllbGROb2RlKSk7CgkJCQkJCQkJCX0pLAoJCQkJCQkJCXJlZmVyZW5jZU5vZGUsCgkJCQkJCQkJcmVjb3JkQWNjZXNzZXMpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSgpCgkJCX07CgkJfSksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHlwZU5hbWUsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG1heWJlRG90UmVmZXJlbmNlRXhwcmVzc2lvblR1cGxlKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kdW5xdWFsaWZpZWRGdW5jdGlvblJlZmVyZW5jZUV4cHJlc3Npb25Gb2xsb3dlZEJ5UmVjb3JkQWNjZXNzID0gQTMoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJRjIoCgkJZnVuY3Rpb24gKGxlZnRlc3RSZXN1bHQsIHJlY29yZEFjY2Vzc2VzKSB7CgkJCWlmICghcmVjb3JkQWNjZXNzZXMuYikgewoJCQkJcmV0dXJuIGxlZnRlc3RSZXN1bHQ7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBsZWZ0ZXN0UmVzdWx0LmNvbW1lbnRzLAoJCQkJCXN5bnRheDogQTMoCgkJCQkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkJCQlGMigKCQkJCQkJCWZ1bmN0aW9uIChmaWVsZE5vZGUsIGxlZnROb2RlKSB7CgkJCQkJCQkJdmFyIGZpZWxkUmFuZ2UgPSBmaWVsZE5vZGUuYTsKCQkJCQkJCQl2YXIgbGVmdFJhbmdlID0gbGVmdE5vZGUuYTsKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQkJe2VuZDogZmllbGRSYW5nZS5lbmQsIHN0YXJ0OiBsZWZ0UmFuZ2Uuc3RhcnR9LAoJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJFJlY29yZEFjY2VzcywgbGVmdE5vZGUsIGZpZWxkTm9kZSkpOwoJCQkJCQkJfSksCgkJCQkJCWxlZnRlc3RSZXN1bHQuc3ludGF4LAoJCQkJCQlyZWNvcmRBY2Nlc3NlcykKCQkJCX07CgkJCX0KCQl9KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVNYXBXaXRoUmFuZ2UoCgkJRjIoCgkJCWZ1bmN0aW9uIChyYW5nZSwgdW5xdWFsaWZpZWQpIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJCXN5bnRheDogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJcmFuZ2UsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kRnVuY3Rpb25PclZhbHVlLCBfTGlzdF9OaWwsIHVucXVhbGlmaWVkKSkKCQkJCX07CgkJCX0pKSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbXVsdGlSZWNvcmRBY2Nlc3MpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRyZWZlcmVuY2VPck51bWJlckV4cHJlc3Npb24gPSBBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjMsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcXVhbGlmaWVkT3JWYXJpYW50T3JSZWNvcmRDb25zdHJ1Y3RvclJlZmVyZW5jZUV4cHJlc3Npb25Gb2xsb3dlZEJ5UmVjb3JkQWNjZXNzLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHVucXVhbGlmaWVkRnVuY3Rpb25SZWZlcmVuY2VFeHByZXNzaW9uRm9sbG93ZWRCeVJlY29yZEFjY2VzcywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRudW1iZXJFeHByZXNzaW9uKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEJhY2t0cmFja2FibGVGb2xsb3dlZEJ5ID0gRjIoCglmdW5jdGlvbiAoc3RyLCBfdjApIHsKCQl2YXIgcGFyc2VOZXh0ID0gX3YwLmE7CgkJdmFyIHN0ckxlbmd0aCA9ICRlbG0kY29yZSRTdHJpbmckbGVuZ3RoKHN0cik7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMpIHsKCQkJCXZhciBuZXdPZmZzZXQgPSBzLm9mZnNldCArIHN0ckxlbmd0aDsKCQkJCXJldHVybiBfVXRpbHNfZXEoCgkJCQkJQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgcy5vZmZzZXQsIG5ld09mZnNldCwgcy5zcmMpLAoJCQkJCXN0ciArICcnKSA/IHBhcnNlTmV4dCgKCQkJCQl7Y29sOiBzLmNvbCArIHN0ckxlbmd0aCwgaW5kZW50OiBzLmluZGVudCwgb2Zmc2V0OiBuZXdPZmZzZXQsIHJvdzogcy5yb3csIHNyYzogcy5zcmN9KSA6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQlmYWxzZSwKCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdTeW1ib2wsIHMucm93LCBzLmNvbCwgc3RyKSk7CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xXaXRoRW5kTG9jYXRpb24gPSBGMigKCWZ1bmN0aW9uIChzdHIsIGVuZExvY2F0aW9uVG9SZXMpIHsKCQl2YXIgc3RyTGVuZ3RoID0gJGVsbSRjb3JlJFN0cmluZyRsZW5ndGgoc3RyKTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIG5ld09mZnNldCA9IHMub2Zmc2V0ICsgc3RyTGVuZ3RoOwoJCQkJaWYgKF9VdGlsc19lcSgKCQkJCQlBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBzLm9mZnNldCwgbmV3T2Zmc2V0LCBzLnNyYyksCgkJCQkJc3RyICsgJycpKSB7CgkJCQkJdmFyIG5ld0NvbCA9IHMuY29sICsgc3RyTGVuZ3RoOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJZW5kTG9jYXRpb25Ub1JlcygKCQkJCQkJCXtjb2x1bW46IG5ld0NvbCwgcm93OiBzLnJvd30pLAoJCQkJCQl7Y29sOiBuZXdDb2wsIGluZGVudDogcy5pbmRlbnQsIG9mZnNldDogbmV3T2Zmc2V0LCByb3c6IHMucm93LCBzcmM6IHMuc3JjfSk7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQlmYWxzZSwKCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nU3ltYm9sLCBzLnJvdywgcy5jb2wsIHN0cikpOwoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiR0ZW1wb3JhcnlFcnJQcmVjZWRlbmNlVG9vSGlnaCA9ICRlbG0kY29yZSRSZXN1bHQkRXJyKCdpbmZpeCBvcGVyYXRvciBwcmVjZWRlbmNlIHRvbyBoaWdoJyk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRGaWVsZHNBZnRlck5hbWUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRmllbGRzQWZ0ZXJOYW1lJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRGdW5jdGlvblR5cGVBbm5vdGF0aW9uID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0Z1bmN0aW9uVHlwZUFubm90YXRpb24nLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kR2VuZXJpY1JlY29yZCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdHZW5lcmljUmVjb3JkJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJFJlY29yZCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdSZWNvcmQnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJFJlY29yZEV4dGVuc2lvbkV4cHJlc3Npb25BZnRlck5hbWUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUmVjb3JkRXh0ZW5zaW9uRXhwcmVzc2lvbkFmdGVyTmFtZScsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kVHVwbGVkID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1R1cGxlZCcsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kVHlwZWQgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnVHlwZWQnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kVW5pdCA9IHskOiAnVW5pdCd9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kR2VuZXJpY1R5cGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnR2VuZXJpY1R5cGUnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGdlbmVyaWNUeXBlQW5ub3RhdGlvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVNYXBXaXRoUmFuZ2UoCglGMigKCQlmdW5jdGlvbiAocmFuZ2UsIF92YXIpIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJCXN5bnRheDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXJhbmdlLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJEdlbmVyaWNUeXBlKF92YXIpKQoJCQl9OwoJCX0pKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDNXaXRoUmFuZ2UgPSBGNCgKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSwgX3YyKSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQl2YXIgcGFyc2VDID0gX3YyLmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgX3YzID0gcGFyc2VBKHMwKTsKCQkJCWlmIChfdjMuJCA9PT0gJ0JhZCcpIHsKCQkJCQl2YXIgY29tbWl0dGVkID0gX3YzLmE7CgkJCQkJdmFyIHggPSBfdjMuYjsKCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBjb21taXR0ZWQsIHgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYSA9IF92My5hOwoJCQkJCXZhciBzMSA9IF92My5iOwoJCQkJCXZhciBfdjQgPSBwYXJzZUIoczEpOwoJCQkJCWlmIChfdjQuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJdmFyIHggPSBfdjQuYjsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGIgPSBfdjQuYTsKCQkJCQkJdmFyIHMyID0gX3Y0LmI7CgkJCQkJCXZhciBfdjUgPSBwYXJzZUMoczIpOwoJCQkJCQlpZiAoX3Y1LiQgPT09ICdCYWQnKSB7CgkJCQkJCQl2YXIgeCA9IF92NS5iOwoJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYyA9IF92NS5hOwoJCQkJCQkJdmFyIHMzID0gX3Y1LmI7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCQlBNCgKCQkJCQkJCQkJZnVuYywKCQkJCQkJCQkJewoJCQkJCQkJCQkJZW5kOiB7Y29sdW1uOiBzMy5jb2wsIHJvdzogczMucm93fSwKCQkJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzMC5jb2wsIHJvdzogczAucm93fQoJCQkJCQkJCQl9LAoJCQkJCQkJCQlhLAoJCQkJCQkJCQliLAoJCQkJCQkJCQljKSwKCQkJCQkJCQlzMyk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA2V2l0aFJhbmdlID0gRjcoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIF92MiwgX3YzLCBfdjQsIF92NSkgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXZhciBwYXJzZUQgPSBfdjMuYTsKCQl2YXIgcGFyc2VFID0gX3Y0LmE7CgkJdmFyIHBhcnNlRiA9IF92NS5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92NiA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3Y2LiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGNvbW1pdHRlZCA9IF92Ni5hOwoJCQkJCXZhciB4ID0gX3Y2LmI7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgY29tbWl0dGVkLCB4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjYuYTsKCQkJCQl2YXIgczEgPSBfdjYuYjsKCQkJCQl2YXIgX3Y3ID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3Y3LiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3Y3LmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3Y3LmE7CgkJCQkJCXZhciBzMiA9IF92Ny5iOwoJCQkJCQl2YXIgX3Y4ID0gcGFyc2VDKHMyKTsKCQkJCQkJaWYgKF92OC4kID09PSAnQmFkJykgewoJCQkJCQkJdmFyIHggPSBfdjguYjsKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIGMgPSBfdjguYTsKCQkJCQkJCXZhciBzMyA9IF92OC5iOwoJCQkJCQkJdmFyIF92OSA9IHBhcnNlRChzMyk7CgkJCQkJCQlpZiAoX3Y5LiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJdmFyIHggPSBfdjkuYjsKCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIGQgPSBfdjkuYTsKCQkJCQkJCQl2YXIgczQgPSBfdjkuYjsKCQkJCQkJCQl2YXIgX3YxMCA9IHBhcnNlRShzNCk7CgkJCQkJCQkJaWYgKF92MTAuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJdmFyIHggPSBfdjEwLmI7CgkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBlID0gX3YxMC5hOwoJCQkJCQkJCQl2YXIgczUgPSBfdjEwLmI7CgkJCQkJCQkJCXZhciBfdjExID0gcGFyc2VGKHM1KTsKCQkJCQkJCQkJaWYgKF92MTEuJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCQkJCXZhciB4ID0gX3YxMS5iOwoJCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQl2YXIgZiA9IF92MTEuYTsKCQkJCQkJCQkJCXZhciBzNiA9IF92MTEuYjsKCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJCQkJCUE3KAoJCQkJCQkJCQkJCQlmdW5jLAoJCQkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJCQllbmQ6IHtjb2x1bW46IHM2LmNvbCwgcm93OiBzNi5yb3d9LAoJCQkJCQkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCWEsCgkJCQkJCQkJCQkJCWIsCgkJCQkJCQkJCQkJCWMsCgkJCQkJCQkJCQkJCWQsCgkJCQkJCQkJCQkJCWUsCgkJCQkJCQkJCQkJCWYpLAoJCQkJCQkJCQkJCXM2KTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJG1heWJlRG90VHlwZU5hbWVzVHVwbGUoKSB7CglyZXR1cm4gQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMk9yU3VjY2VlZCwKCQlGMigKCQkJZnVuY3Rpb24gKGZpcnN0TmFtZSwgYWZ0ZXJGaXJzdE5hbWUpIHsKCQkJCWlmIChhZnRlckZpcnN0TmFtZS4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCV9VdGlsc19UdXBsZTIoX0xpc3RfTmlsLCBmaXJzdE5hbWUpKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIF92MSA9IGFmdGVyRmlyc3ROYW1lLmE7CgkJCQkJdmFyIHF1YWxpZmljYXRpb25BZnRlciA9IF92MS5hOwoJCQkJCXZhciB1bnF1YWxpZmllZCA9IF92MS5iOwoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGZpcnN0TmFtZSwgcXVhbGlmaWNhdGlvbkFmdGVyKSwKCQkJCQkJCXVucXVhbGlmaWVkKSk7CgkJCQl9CgkJCX0pLAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICcuJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsYXp5KAoJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJG1heWJlRG90VHlwZU5hbWVzVHVwbGUoKTsKCQkJfSksCgkJJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpOwp9CnRyeSB7Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kbWF5YmVEb3RUeXBlTmFtZXNUdXBsZSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRtYXliZURvdFR5cGVOYW1lc1R1cGxlKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkbWF5YmVEb3RUeXBlTmFtZXNUdXBsZSA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kbWF5YmVEb3RUeXBlTmFtZXNUdXBsZTsKCX07Cn0gY2F0Y2ggKCQpIHsKCXRocm93ICdTb21lIHRvcC1sZXZlbCBkZWZpbml0aW9ucyBmcm9tIGBFbG0uUGFyc2VyLlR5cGVBbm5vdGF0aW9uYCBhcmUgY2F1c2luZyBpbmZpbml0ZSByZWN1cnNpb246XG5cbiAg4pSM4pSA4pSA4pSA4pSA4pSA4pSQXG4gIOKUgiAgICBtYXliZURvdFR5cGVOYW1lc1R1cGxlXG4gIOKUlOKUgOKUgOKUgOKUgOKUgOKUmFxuXG5UaGVzZSBlcnJvcnMgYXJlIHZlcnkgdHJpY2t5LCBzbyByZWFkIGh0dHBzOi8vZWxtLWxhbmcub3JnLzAuMTkuMS9iYWQtcmVjdXJzaW9uIHRvIGxlYXJuIGhvdyB0byBmaXggaXQhJzt9CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjQgPSBGNCgKCWZ1bmN0aW9uIChfdjAsIF92MSwgX3YyLCBfdjMpIHsKCQl2YXIgYXR0ZW1wdEZpcnN0ID0gX3YwLmE7CgkJdmFyIGF0dGVtcHRTZWNvbmQgPSBfdjEuYTsKCQl2YXIgYXR0ZW1wdFRoaXJkID0gX3YyLmE7CgkJdmFyIGF0dGVtcHRGb3VydGggPSBfdjMuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAocykgewoJCQkJdmFyIF92NCA9IGF0dGVtcHRGaXJzdChzKTsKCQkJCWlmIChfdjQuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJdmFyIGZpcnN0R29vZCA9IF92NDsKCQkJCQlyZXR1cm4gZmlyc3RHb29kOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgZmlyc3RCYWQgPSBfdjQ7CgkJCQkJdmFyIGZpcnN0Q29tbWl0dGVkID0gZmlyc3RCYWQuYTsKCQkJCQl2YXIgZmlyc3RYID0gZmlyc3RCYWQuYjsKCQkJCQlpZiAoZmlyc3RDb21taXR0ZWQpIHsKCQkJCQkJcmV0dXJuIGZpcnN0QmFkOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjUgPSBhdHRlbXB0U2Vjb25kKHMpOwoJCQkJCQlpZiAoX3Y1LiQgPT09ICdHb29kJykgewoJCQkJCQkJdmFyIHNlY29uZEdvb2QgPSBfdjU7CgkJCQkJCQlyZXR1cm4gc2Vjb25kR29vZDsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBzZWNvbmRCYWQgPSBfdjU7CgkJCQkJCQl2YXIgc2Vjb25kQ29tbWl0dGVkID0gc2Vjb25kQmFkLmE7CgkJCQkJCQl2YXIgc2Vjb25kWCA9IHNlY29uZEJhZC5iOwoJCQkJCQkJaWYgKHNlY29uZENvbW1pdHRlZCkgewoJCQkJCQkJCXJldHVybiBzZWNvbmRCYWQ7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBfdjYgPSBhdHRlbXB0VGhpcmQocyk7CgkJCQkJCQkJaWYgKF92Ni4kID09PSAnR29vZCcpIHsKCQkJCQkJCQkJdmFyIHRoaXJkR29vZCA9IF92NjsKCQkJCQkJCQkJcmV0dXJuIHRoaXJkR29vZDsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgdGhpcmRCYWQgPSBfdjY7CgkJCQkJCQkJCXZhciB0aGlyZENvbW1pdHRlZCA9IHRoaXJkQmFkLmE7CgkJCQkJCQkJCXZhciB0aGlyZFggPSB0aGlyZEJhZC5iOwoJCQkJCQkJCQlpZiAodGhpcmRDb21taXR0ZWQpIHsKCQkJCQkJCQkJCXJldHVybiB0aGlyZEJhZDsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCXZhciBfdjcgPSBhdHRlbXB0Rm91cnRoKHMpOwoJCQkJCQkJCQkJaWYgKF92Ny4kID09PSAnR29vZCcpIHsKCQkJCQkJCQkJCQl2YXIgZm91cnRoR29vZCA9IF92NzsKCQkJCQkJCQkJCQlyZXR1cm4gZm91cnRoR29vZDsKCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJdmFyIGZvdXJ0aEJhZCA9IF92NzsKCQkJCQkJCQkJCQl2YXIgZm91cnRoQ29tbWl0dGVkID0gZm91cnRoQmFkLmE7CgkJCQkJCQkJCQkJdmFyIGZvdXJ0aFggPSBmb3VydGhCYWQuYjsKCQkJCQkJCQkJCQlyZXR1cm4gZm91cnRoQ29tbWl0dGVkID8gZm91cnRoQmFkIDogQTIoCgkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJCQkJCQkJZmFsc2UsCgkJCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nT25lT2YsCgkJCQkJCQkJCQkJCQlmaXJzdFgsCgkJCQkJCQkJCQkJCQlzZWNvbmRYLAoJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCVt0aGlyZFgsIGZvdXJ0aFhdKSkpOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZUFubm90YXRpb25SZWNvcmRFbXB0eSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJFJlY29yZChfTGlzdF9OaWwpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZWRUeXBlQW5ub3RhdGlvbldpdGhvdXRBcmd1bWVudHMgPSBBMygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJXaXRoUmFuZ2UsCglGMygKCQlmdW5jdGlvbiAocmFuZ2UsIHN0YXJ0TmFtZSwgYWZ0ZXJTdGFydE5hbWUpIHsKCQkJdmFyIG5hbWUgPSBmdW5jdGlvbiAoKSB7CgkJCQlpZiAoYWZ0ZXJTdGFydE5hbWUuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoX0xpc3RfTmlsLCBzdGFydE5hbWUpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YxID0gYWZ0ZXJTdGFydE5hbWUuYTsKCQkJCQl2YXIgcXVhbGlmaWNhdGlvbkFmdGVyU3RhcnROYW1lID0gX3YxLmE7CgkJCQkJdmFyIHVucXVhbGlmaWVkID0gX3YxLmI7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHN0YXJ0TmFtZSwgcXVhbGlmaWNhdGlvbkFmdGVyU3RhcnROYW1lKSwKCQkJCQkJdW5xdWFsaWZpZWQpOwoJCQkJfQoJCQl9KCk7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlyYW5nZSwKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kVHlwZWQsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwgcmFuZ2UsIG5hbWUpLAoJCQkJCQlfTGlzdF9OaWwpKQoJCQl9OwoJCX0pLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kbWF5YmVEb3RUeXBlTmFtZXNUdXBsZSk7CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlQW5ub3RhdGlvbk5vRm5JbmNsdWRpbmdUeXBlZFdpdGhBcmd1bWVudHMoKSB7CglyZXR1cm4gQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2Y0LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRwYXJlbnNUeXBlQW5ub3RhdGlvbigpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlZFR5cGVBbm5vdGF0aW9uV2l0aEFyZ3VtZW50c09wdGltaXN0aWNMYXlvdXQoKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRnZW5lcmljVHlwZUFubm90YXRpb24sCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHJlY29yZFR5cGVBbm5vdGF0aW9uKCkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlZFR5cGVBbm5vdGF0aW9uV2l0aEFyZ3VtZW50c09wdGltaXN0aWNMYXlvdXQoKSB7CglyZXR1cm4gQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQlGMygKCQkJZnVuY3Rpb24gKG5hbWVOb2RlLCBjb21tZW50c0FmdGVyTmFtZSwgYXJnc1JldmVyc2UpIHsKCQkJCXZhciBuYW1lUmFuZ2UgPSBuYW1lTm9kZS5hOwoJCQkJdmFyIHJhbmdlID0gZnVuY3Rpb24gKCkgewoJCQkJCXZhciBfdjggPSBhcmdzUmV2ZXJzZS5zeW50YXg7CgkJCQkJaWYgKCFfdjguYikgewoJCQkJCQlyZXR1cm4gbmFtZVJhbmdlOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjkgPSBfdjguYTsKCQkJCQkJdmFyIGxhc3RBcmdSYW5nZSA9IF92OS5hOwoJCQkJCQlyZXR1cm4ge2VuZDogbGFzdEFyZ1JhbmdlLmVuZCwgc3RhcnQ6IG5hbWVSYW5nZS5zdGFydH07CgkJCQkJfQoJCQkJfSgpOwoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBhcmdzUmV2ZXJzZS5jb21tZW50cywgY29tbWVudHNBZnRlck5hbWUpLAoJCQkJCXN5bnRheDogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJcmFuZ2UsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kVHlwZWQsCgkJCQkJCQluYW1lTm9kZSwKCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoYXJnc1JldmVyc2Uuc3ludGF4KSkpCgkJCQl9OwoJCQl9KSwKCQlBMygKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhSYW5nZSwKCQkJRjMoCgkJCQlmdW5jdGlvbiAocmFuZ2UsIHN0YXJ0TmFtZSwgYWZ0ZXJTdGFydE5hbWUpIHsKCQkJCQl2YXIgbmFtZSA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJaWYgKGFmdGVyU3RhcnROYW1lLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoX0xpc3RfTmlsLCBzdGFydE5hbWUpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIF92MTEgPSBhZnRlclN0YXJ0TmFtZS5hOwoJCQkJCQkJdmFyIHF1YWxpZmljYXRpb25BZnRlclN0YXJ0TmFtZSA9IF92MTEuYTsKCQkJCQkJCXZhciB1bnF1YWxpZmllZCA9IF92MTEuYjsKCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHN0YXJ0TmFtZSwgcXVhbGlmaWNhdGlvbkFmdGVyU3RhcnROYW1lKSwKCQkJCQkJCQl1bnF1YWxpZmllZCk7CgkJCQkJCX0KCQkJCQl9KCk7CgkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwgcmFuZ2UsIG5hbWUpOwoJCQkJfSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyR0eXBlTmFtZSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kbWF5YmVEb3RUeXBlTmFtZXNUdXBsZSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQsCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyRtYW55V2l0aG91dFJldmVyc2UoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRwb3NpdGl2ZWx5SW5kZW50ZWRGb2xsb3dlZEJ5KAoJCQkJQTMoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJCQlGMigKCQkJCQkJZnVuY3Rpb24gKHR5cGVBbm5vdGF0aW9uUmVzdWx0LCBjb21tZW50c0FmdGVyKSB7CgkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXIsIHR5cGVBbm5vdGF0aW9uUmVzdWx0LmNvbW1lbnRzKSwKCQkJCQkJCQlzeW50YXg6IHR5cGVBbm5vdGF0aW9uUmVzdWx0LnN5bnRheAoJCQkJCQkJfTsKCQkJCQkJfSksCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVBbm5vdGF0aW9uTm9GbkV4Y2x1ZGluZ1R5cGVkV2l0aEFyZ3VtZW50cygpLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvcHRpbWlzdGljTGF5b3V0KSkpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb25Ob0ZuRXhjbHVkaW5nVHlwZWRXaXRoQXJndW1lbnRzKCkgewoJcmV0dXJuIEE0KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mNCwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkcGFyZW5zVHlwZUFubm90YXRpb24oKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiR0eXBlZFR5cGVBbm5vdGF0aW9uV2l0aG91dEFyZ3VtZW50cywKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRnZW5lcmljVHlwZUFubm90YXRpb24sCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHJlY29yZFR5cGVBbm5vdGF0aW9uKCkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRwYXJlbnNUeXBlQW5ub3RhdGlvbigpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCScoJywKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbFdpdGhFbmRMb2NhdGlvbiwKCQkJCScpJywKCQkJCWZ1bmN0aW9uIChlbmQpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQl7CgkJCQkJCQkJZW5kOiBlbmQsCgkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IGVuZC5jb2x1bW4gLSAyLCByb3c6IGVuZC5yb3d9CgkJCQkJCQl9LAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kVW5pdCkKCQkJCQl9OwoJCQkJfSksCgkJCUE1KAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNFdpdGhSYW5nZSwKCQkJCUY1KAoJCQkJCWZ1bmN0aW9uIChyYW5nZUFmdGVyT3BlbmluZ1BhcmVucywgY29tbWVudHNCZWZvcmVGaXJzdFBhcnQsIGZpcnN0UGFydCwgY29tbWVudHNBZnRlckZpcnN0UGFydCwgbGFzdFRvU2Vjb25kUGFydCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQlsYXN0VG9TZWNvbmRQYXJ0LmNvbW1lbnRzLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCWNvbW1lbnRzQWZ0ZXJGaXJzdFBhcnQsCgkJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgZmlyc3RQYXJ0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZUZpcnN0UGFydCkpKSwKCQkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCXsKCQkJCQkJCQkJZW5kOiByYW5nZUFmdGVyT3BlbmluZ1BhcmVucy5lbmQsCgkJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiByYW5nZUFmdGVyT3BlbmluZ1BhcmVucy5zdGFydC5jb2x1bW4gLSAxLCByb3c6IHJhbmdlQWZ0ZXJPcGVuaW5nUGFyZW5zLnN0YXJ0LnJvd30KCQkJCQkJCQl9LAoJCQkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCQkJdmFyIF92NSA9IGxhc3RUb1NlY29uZFBhcnQuc3ludGF4OwoJCQkJCQkJCQlpZiAoX3Y1LiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJCQkJdmFyIF92NiA9IGZpcnN0UGFydC5zeW50YXg7CgkJCQkJCQkJCQl2YXIgZmlyc3RQYXJ0VHlwZSA9IF92Ni5iOwoJCQkJCQkJCQkJcmV0dXJuIGZpcnN0UGFydFR5cGU7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQl2YXIgZmlyc3RBbmRNYXliZVRoaXJkUGFydCA9IF92NS5hOwoJCQkJCQkJCQkJdmFyIF92NyA9IGZpcnN0QW5kTWF5YmVUaGlyZFBhcnQubWF5YmVUaGlyZFBhcnQ7CgkJCQkJCQkJCQlpZiAoX3Y3LiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRUdXBsZWQoCgkJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJCVtmaXJzdFBhcnQuc3ludGF4LCBmaXJzdEFuZE1heWJlVGhpcmRQYXJ0LnNlY29uZFBhcnRdKSk7CgkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCXZhciB0aGlyZFBhcnQgPSBfdjcuYTsKCQkJCQkJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkVHlwZUFubm90YXRpb24kVHVwbGVkKAoJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQlbZmlyc3RQYXJ0LnN5bnRheCwgZmlyc3RBbmRNYXliZVRoaXJkUGFydC5zZWNvbmRQYXJ0LCB0aGlyZFBhcnRdKSk7CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9KCkpCgkJCQkJCX07CgkJCQkJfSksCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb24oKSwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCUEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQkJCQknKScsCgkJCQkJCXtjb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksIHN5bnRheDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSwKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJCQkJJywnLAoJCQkJCQlBNSgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDQsCgkJCQkJCQlGNCgKCQkJCQkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmUsIHNlY29uZFBhcnRSZXN1bHQsIGNvbW1lbnRzQWZ0ZXIsIG1heWJlVGhpcmRQYXJ0UmVzdWx0KSB7CgkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJCWNvbW1lbnRzQWZ0ZXIsCgkJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBzZWNvbmRQYXJ0UmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZSkpLAoJCQkJCQkJCQkJc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQkJCQl7bWF5YmVUaGlyZFBhcnQ6IG1heWJlVGhpcmRQYXJ0UmVzdWx0LnN5bnRheCwgc2Vjb25kUGFydDogc2Vjb25kUGFydFJlc3VsdC5zeW50YXh9KQoJCQkJCQkJCQl9OwoJCQkJCQkJCX0pLAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVBbm5vdGF0aW9uKCksCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkJCQlBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwKCQkJCQkJCQkJJyknLAoJCQkJCQkJCQl7Y29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LCBzeW50YXg6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nfSksCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQkJCQkJCScsJywKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U3ltYm9sLAoJCQkJCQkJCQkJJyknLAoJCQkJCQkJCQkJQTQoCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQkJCQkJCQkJCQlGMygKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCB0aGlyZFBhcnRSZXN1bHQsIGNvbW1lbnRzQWZ0ZXIpIHsKCQkJCQkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQkJCQkJCWNvbW1lbnRzQWZ0ZXIsCgkJCQkJCQkJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgdGhpcmRQYXJ0UmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZSkpLAoJCQkJCQkJCQkJCQkJCXN5bnRheDogJGVsbSRjb3JlJE1heWJlJEp1c3QodGhpcmRQYXJ0UmVzdWx0LnN5bnRheCkKCQkJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQkJCX0pLAoJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb24oKSwKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpKSkpKSkpKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRyZWNvcmRUeXBlQW5ub3RhdGlvbigpIHsKCXJldHVybiBBMygKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyV2l0aFJhbmdlLAoJCUYzKAoJCQlmdW5jdGlvbiAocmFuZ2UsIGNvbW1lbnRzQmVmb3JlLCBhZnRlckN1cmx5KSB7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGFmdGVyQ3VybHkuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKSwKCQkJCQlzeW50YXg6IGZ1bmN0aW9uICgpIHsKCQkJCQkJdmFyIF92MyA9IGFmdGVyQ3VybHkuc3ludGF4OwoJCQkJCQlpZiAoX3YzLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwgcmFuZ2UsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVBbm5vdGF0aW9uUmVjb3JkRW1wdHkpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIGFmdGVyQ3VybHlSZXN1bHQgPSBfdjMuYTsKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsIHJhbmdlLCBhZnRlckN1cmx5UmVzdWx0KTsKCQkJCQkJfQoJCQkJCX0oKQoJCQkJfTsKCQkJfSksCgkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJ3snLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZm9sbG93ZWRCeVN5bWJvbCwKCQkJCSd9JywKCQkJCUE0KAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDMsCgkJCQkJRjMoCgkJCQkJCWZ1bmN0aW9uIChmaXJzdE5hbWVOb2RlLCBjb21tZW50c0FmdGVyRmlyc3ROYW1lLCBhZnRlckZpcnN0TmFtZSkgewoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBhZnRlckZpcnN0TmFtZS5jb21tZW50cywgY29tbWVudHNBZnRlckZpcnN0TmFtZSksCgkJCQkJCQkJc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQkJZnVuY3Rpb24gKCkgewoJCQkJCQkJCQkJdmFyIF92NCA9IGFmdGVyRmlyc3ROYW1lLnN5bnRheDsKCQkJCQkJCQkJCWlmIChfdjQuJCA9PT0gJ1JlY29yZEV4dGVuc2lvbkV4cHJlc3Npb25BZnRlck5hbWUnKSB7CgkJCQkJCQkJCQkJdmFyIGZpZWxkcyA9IF92NC5hOwoJCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRUeXBlQW5ub3RhdGlvbiRHZW5lcmljUmVjb3JkLCBmaXJzdE5hbWVOb2RlLCBmaWVsZHMpOwoJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQl2YXIgZmllbGRzQWZ0ZXJOYW1lID0gX3Y0LmE7CgkJCQkJCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJFJlY29yZCgKCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRjb21iaW5lLCAkZWxtJGNvcmUkVHVwbGUkcGFpciwgZmlyc3ROYW1lTm9kZSwgZmllbGRzQWZ0ZXJOYW1lLmZpcnN0RmllbGRWYWx1ZSksCgkJCQkJCQkJCQkJCQlmaWVsZHNBZnRlck5hbWUudGFpbEZpZWxkcykpOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9KCkpCgkJCQkJCQl9OwoJCQkJCQl9KSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lTm9kZSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkJQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCQkJJ3wnLAoJCQkJCQkJQTQoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwM1dpdGhSYW5nZSwKCQkJCQkJCQlGNCgKCQkJCQkJCQkJZnVuY3Rpb24gKHJhbmdlLCBjb21tZW50c0JlZm9yZSwgaGVhZCwgdGFpbCkgewoJCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJCQkJdGFpbC5jb21tZW50cywKCQkJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBoZWFkLmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZSkpLAoJCQkJCQkJCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kUmVjb3JkRXh0ZW5zaW9uRXhwcmVzc2lvbkFmdGVyTmFtZSgKCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJCQkJCQlyYW5nZSwKCQkJCQkJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGhlYWQuc3ludGF4LCB0YWlsLnN5bnRheCkpKQoJCQkJCQkJCQkJfTsKCQkJCQkJCQkJfSksCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRyZWNvcmRGaWVsZERlZmluaXRpb24oKSwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJG1hbnkoCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJCQkJCQkJCScsJywKCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCQkJCQkJCQkJRjIoCgkJCQkJCQkJCQkJCWZ1bmN0aW9uIChjb21tZW50c0JlZm9yZSwgZmllbGQpIHsKCQkJCQkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgZmllbGQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKSwKCQkJCQkJCQkJCQkJCQlzeW50YXg6IGZpZWxkLnN5bnRheAoJCQkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCQkJfSksCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRyZWNvcmRGaWVsZERlZmluaXRpb24oKSkpKSkpLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQkJCQknOicsCgkJCQkJCQlBNSgKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0LAoJCQkJCQkJCUY0KAoJCQkJCQkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmVGaXJzdEZpZWxkVmFsdWUsIGZpcnN0RmllbGRWYWx1ZSwgY29tbWVudHNBZnRlckZpcnN0RmllbGRWYWx1ZSwgdGFpbEZpZWxkcykgewoJCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJCQkJdGFpbEZpZWxkcy5jb21tZW50cywKCQkJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQkJCQljb21tZW50c0FmdGVyRmlyc3RGaWVsZFZhbHVlLAoJCQkJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBmaXJzdEZpZWxkVmFsdWUuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlRmlyc3RGaWVsZFZhbHVlKSkpLAoJCQkJCQkJCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kRmllbGRzQWZ0ZXJOYW1lKAoJCQkJCQkJCQkJCQl7Zmlyc3RGaWVsZFZhbHVlOiBmaXJzdEZpZWxkVmFsdWUuc3ludGF4LCB0YWlsRmllbGRzOiB0YWlsRmllbGRzLnN5bnRheH0pCgkJCQkJCQkJCQl9OwoJCQkJCQkJCQl9KSwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVBbm5vdGF0aW9uKCksCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvclN1Y2NlZWQsCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJCQkJCQkJCScsJywKCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRyZWNvcmRGaWVsZHNUeXBlQW5ub3RhdGlvbigpKSwKCQkJCQkJCQkJe2NvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwgc3ludGF4OiBfTGlzdF9OaWx9KSkpKSkpLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwKCQkJCSd9JywKCQkJCXtjb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksIHN5bnRheDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRyZWNvcmRGaWVsZHNUeXBlQW5ub3RhdGlvbigpIHsKCXJldHVybiBBNCgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzLAoJCUYzKAoJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmUsIGhlYWQsIHRhaWwpIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCXRhaWwuY29tbWVudHMsCgkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgaGVhZC5jb21tZW50cywgY29tbWVudHNCZWZvcmUpKSwKCQkJCQlzeW50YXg6IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGhlYWQuc3ludGF4LCB0YWlsLnN5bnRheCkKCQkJCX07CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkcmVjb3JkRmllbGREZWZpbml0aW9uKCksCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyRtYW55KAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQknLCcsCgkJCQlBMygKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJCUYyKAoJCQkJCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmUsIGZpZWxkKSB7CgkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGZpZWxkLmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZSksCgkJCQkJCQkJc3ludGF4OiBmaWVsZC5zeW50YXgKCQkJCQkJCX07CgkJCQkJCX0pLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkcmVjb3JkRmllbGREZWZpbml0aW9uKCkpKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRyZWNvcmRGaWVsZERlZmluaXRpb24oKSB7CglyZXR1cm4gQTcoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNldpdGhSYW5nZSwKCQlGNygKCQkJZnVuY3Rpb24gKHJhbmdlLCBjb21tZW50c0JlZm9yZUZ1bmN0aW9uTmFtZSwgbmFtZSwgY29tbWVudHNBZnRlckZ1bmN0aW9uTmFtZSwgY29tbWVudHNBZnRlckNvbG9uLCB2YWx1ZSwgY29tbWVudHNBZnRlclZhbHVlKSB7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQljb21tZW50c0FmdGVyVmFsdWUsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJdmFsdWUuY29tbWVudHMsCgkJCQkJCQlBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJY29tbWVudHNBZnRlckNvbG9uLAoJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlckZ1bmN0aW9uTmFtZSwgY29tbWVudHNCZWZvcmVGdW5jdGlvbk5hbWUpKSkpLAoJCQkJCXN5bnRheDogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJcmFuZ2UsCgkJCQkJCV9VdGlsc19UdXBsZTIobmFtZSwgdmFsdWUuc3ludGF4KSkKCQkJCX07CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lTm9kZSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJzonLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlQW5ub3RhdGlvbigpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVBbm5vdGF0aW9uKCkgewoJcmV0dXJuIEE0KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDMsCgkJRjMoCgkJCWZ1bmN0aW9uIChpblR5cGUsIGNvbW1lbnRzQWZ0ZXJJbiwgbWF5YmVPdXQpIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCW1heWJlT3V0LmNvbW1lbnRzLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJJbiwgaW5UeXBlLmNvbW1lbnRzKSksCgkJCQkJc3ludGF4OiBmdW5jdGlvbiAoKSB7CgkJCQkJCXZhciBfdjAgPSBtYXliZU91dC5zeW50YXg7CgkJCQkJCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQlyZXR1cm4gaW5UeXBlLnN5bnRheDsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBvdXQgPSBfdjAuYTsKCQkJCQkJCXJldHVybiBBMygkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGNvbWJpbmUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFR5cGVBbm5vdGF0aW9uJEZ1bmN0aW9uVHlwZUFubm90YXRpb24sIGluVHlwZS5zeW50YXgsIG91dCk7CgkJCQkJCX0KCQkJCQl9KCkKCQkJCX07CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxhenkoCgkJCWZ1bmN0aW9uIChfdjEpIHsKCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb25Ob0ZuSW5jbHVkaW5nVHlwZWRXaXRoQXJndW1lbnRzKCk7CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvcHRpbWlzdGljTGF5b3V0LAoJCUE0KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyT3JTdWNjZWVkLAoJCQlGMigKCQkJCWZ1bmN0aW9uIChjb21tZW50c0FmdGVyQXJyb3csIHR5cGVBbm5vdGF0aW9uUmVzdWx0KSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgdHlwZUFubm90YXRpb25SZXN1bHQuY29tbWVudHMsIGNvbW1lbnRzQWZ0ZXJBcnJvdyksCgkJCQkJCXN5bnRheDogJGVsbSRjb3JlJE1heWJlJEp1c3QodHlwZUFubm90YXRpb25SZXN1bHQuc3ludGF4KQoJCQkJCX07CgkJCQl9KSwKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJJy0+JywKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRwb3NpdGl2ZWx5SW5kZW50ZWRQbHVzRm9sbG93ZWRCeSwgMiwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxhenkoCgkJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlQW5ub3RhdGlvbigpOwoJCQkJfSksCgkJCXtjb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksIHN5bnRheDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSk7Cn0KdHJ5IHsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiR0eXBlQW5ub3RhdGlvbk5vRm5JbmNsdWRpbmdUeXBlZFdpdGhBcmd1bWVudHMgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb25Ob0ZuSW5jbHVkaW5nVHlwZWRXaXRoQXJndW1lbnRzKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb25Ob0ZuSW5jbHVkaW5nVHlwZWRXaXRoQXJndW1lbnRzID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiR0eXBlQW5ub3RhdGlvbk5vRm5JbmNsdWRpbmdUeXBlZFdpdGhBcmd1bWVudHM7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVkVHlwZUFubm90YXRpb25XaXRoQXJndW1lbnRzT3B0aW1pc3RpY0xheW91dCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlZFR5cGVBbm5vdGF0aW9uV2l0aEFyZ3VtZW50c09wdGltaXN0aWNMYXlvdXQoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyR0eXBlZFR5cGVBbm5vdGF0aW9uV2l0aEFyZ3VtZW50c09wdGltaXN0aWNMYXlvdXQgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVkVHlwZUFubm90YXRpb25XaXRoQXJndW1lbnRzT3B0aW1pc3RpY0xheW91dDsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZUFubm90YXRpb25Ob0ZuRXhjbHVkaW5nVHlwZWRXaXRoQXJndW1lbnRzID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVBbm5vdGF0aW9uTm9GbkV4Y2x1ZGluZ1R5cGVkV2l0aEFyZ3VtZW50cygpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVBbm5vdGF0aW9uTm9GbkV4Y2x1ZGluZ1R5cGVkV2l0aEFyZ3VtZW50cyA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZUFubm90YXRpb25Ob0ZuRXhjbHVkaW5nVHlwZWRXaXRoQXJndW1lbnRzOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRwYXJlbnNUeXBlQW5ub3RhdGlvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRwYXJlbnNUeXBlQW5ub3RhdGlvbigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHBhcmVuc1R5cGVBbm5vdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRwYXJlbnNUeXBlQW5ub3RhdGlvbjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kcmVjb3JkVHlwZUFubm90YXRpb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkcmVjb3JkVHlwZUFubm90YXRpb24oKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJGN5Y2xpYyRyZWNvcmRUeXBlQW5ub3RhdGlvbiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kcmVjb3JkVHlwZUFubm90YXRpb247Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHJlY29yZEZpZWxkc1R5cGVBbm5vdGF0aW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHJlY29yZEZpZWxkc1R5cGVBbm5vdGF0aW9uKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkcmVjb3JkRmllbGRzVHlwZUFubm90YXRpb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHJlY29yZEZpZWxkc1R5cGVBbm5vdGF0aW9uOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRyZWNvcmRGaWVsZERlZmluaXRpb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkcmVjb3JkRmllbGREZWZpbml0aW9uKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkcmVjb3JkRmllbGREZWZpbml0aW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRyZWNvcmRGaWVsZERlZmluaXRpb247Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVBbm5vdGF0aW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kY3ljbGljJHR5cGVBbm5vdGF0aW9uKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiRjeWNsaWMkdHlwZUFubm90YXRpb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVBbm5vdGF0aW9uOwoJfTsKfSBjYXRjaCAoJCkgewoJdGhyb3cgJ1NvbWUgdG9wLWxldmVsIGRlZmluaXRpb25zIGZyb20gYEVsbS5QYXJzZXIuVHlwZUFubm90YXRpb25gIGFyZSBjYXVzaW5nIGluZmluaXRlIHJlY3Vyc2lvbjpcblxuICDilIzilIDilIDilIDilIDilIDilJBcbiAg4pSCICAgIHR5cGVBbm5vdGF0aW9uTm9GbkluY2x1ZGluZ1R5cGVkV2l0aEFyZ3VtZW50c1xuICDilIIgICAgIOKGk1xuICDilIIgICAgdHlwZWRUeXBlQW5ub3RhdGlvbldpdGhBcmd1bWVudHNPcHRpbWlzdGljTGF5b3V0XG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICB0eXBlQW5ub3RhdGlvbk5vRm5FeGNsdWRpbmdUeXBlZFdpdGhBcmd1bWVudHNcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHBhcmVuc1R5cGVBbm5vdGF0aW9uXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICByZWNvcmRUeXBlQW5ub3RhdGlvblxuICDilIIgICAgIOKGk1xuICDilIIgICAgcmVjb3JkRmllbGRzVHlwZUFubm90YXRpb25cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHJlY29yZEZpZWxkRGVmaW5pdGlvblxuICDilIIgICAgIOKGk1xuICDilIIgICAgdHlwZUFubm90YXRpb25cbiAg4pSU4pSA4pSA4pSA4pSA4pSA4pSYXG5cblRoZXNlIGVycm9ycyBhcmUgdmVyeSB0cmlja3ksIHNvIHJlYWQgaHR0cHM6Ly9lbG0tbGFuZy5vcmcvMC4xOS4xL2JhZC1yZWN1cnNpb24gdG8gbGVhcm4gaG93IHRvIGZpeCBpdCEnO30KdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHZhbGlkYXRlID0gRjMoCglmdW5jdGlvbiAoaXNPa2F5LCBwcm9ibGVtT25Ob3RPa2F5LCBfdjApIHsKCQl2YXIgcGFyc2VBID0gX3YwLmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgX3YxID0gcGFyc2VBKHMwKTsKCQkJCWlmIChfdjEuJCA9PT0gJ0JhZCcpIHsKCQkJCQl2YXIgY29tbWl0dGVkID0gX3YxLmE7CgkJCQkJdmFyIHggPSBfdjEuYjsKCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBjb21taXR0ZWQsIHgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgZ29vZCA9IF92MTsKCQkJCQl2YXIgYSA9IGdvb2QuYTsKCQkJCQl2YXIgczEgPSBnb29kLmI7CgkJCQkJcmV0dXJuIGlzT2theShhKSA/IGdvb2QgOiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQl0cnVlLAoJCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRFeHBlY3RpbmdDdXN0b20sIHMxLnJvdywgczEuY29sLCBwcm9ibGVtT25Ob3RPa2F5KSk7CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aGlsZVdpdGhvdXRMaW5lYnJlYWtBbmQyUGFydFV0ZjE2VG9SZXN1bHRBbmRUaGVuID0gRjMoCglmdW5jdGlvbiAod2hpbGVDaGFySXNPa2F5LCBjb25zdW1lZFN0cmluZ1RvSW50ZXJtZWRpYXRlT3JFcnIsIGludGVybWVkaWF0ZVRvRm9sbG93dXBQYXJzZXIpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBzMU9mZnNldCA9IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtBbmQyUGFydFV0ZjE2SGVscCwgd2hpbGVDaGFySXNPa2F5LCBzMC5vZmZzZXQsIHMwLnNyYyk7CgkJCQl2YXIgd2hpbGVDb250ZW50ID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgczAub2Zmc2V0LCBzMU9mZnNldCwgczAuc3JjKTsKCQkJCXZhciBfdjAgPSBjb25zdW1lZFN0cmluZ1RvSW50ZXJtZWRpYXRlT3JFcnIod2hpbGVDb250ZW50KTsKCQkJCWlmIChfdjAuJCA9PT0gJ0VycicpIHsKCQkJCQl2YXIgcHJvYmxlbU1lc3NhZ2UgPSBfdjAuYTsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJZmFsc2UsCgkJCQkJCUEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ0N1c3RvbSwgczAucm93LCBzMC5jb2wsIHByb2JsZW1NZXNzYWdlKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBpbnRlcm1lZGlhdGUgPSBfdjAuYTsKCQkJCQl2YXIgczFDb2x1bW4gPSBzMC5jb2wgKyAoczFPZmZzZXQgLSBzMC5vZmZzZXQpOwoJCQkJCXZhciBfdjEgPSBpbnRlcm1lZGlhdGVUb0ZvbGxvd3VwUGFyc2VyKGludGVybWVkaWF0ZSk7CgkJCQkJdmFyIHBhcnNlRm9sbG93dXAgPSBfdjEuYTsKCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkcFN0ZXBDb21taXQoCgkJCQkJCXBhcnNlRm9sbG93dXAoCgkJCQkJCQl7Y29sOiBzMUNvbHVtbiwgaW5kZW50OiBzMC5pbmRlbnQsIG9mZnNldDogczFPZmZzZXQsIHJvdzogczAucm93LCBzcmM6IHMwLnNyY30pKTsKCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNoYW5nZUluZGVudCA9IEYyKAoJZnVuY3Rpb24gKG5ld0luZGVudCwgcykgewoJCXJldHVybiB7Y29sOiBzLmNvbCwgaW5kZW50OiBuZXdJbmRlbnQsIG9mZnNldDogcy5vZmZzZXQsIHJvdzogcy5yb3csIHNyYzogcy5zcmN9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aXRoSW5kZW50U2V0VG9Db2x1bW4gPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgcGFyc2UgPSBfdjAuYTsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJZnVuY3Rpb24gKHMwKSB7CgkJCXZhciBfdjEgPSBwYXJzZSgKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNoYW5nZUluZGVudCwgczAuY29sLCBzMCkpOwoJCQlpZiAoX3YxLiQgPT09ICdHb29kJykgewoJCQkJdmFyIGEgPSBfdjEuYTsKCQkJCXZhciBzMSA9IF92MS5iOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJYSwKCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjaGFuZ2VJbmRlbnQsIHMwLmluZGVudCwgczEpKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBiYWQgPSBfdjE7CgkJCQlyZXR1cm4gYmFkOwoJCQl9CgkJfSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aXRoSW5kZW50U2V0VG9Db2x1bW5NaW51cyA9IEYyKAoJZnVuY3Rpb24gKGNvbHVtblRvTW92ZUluZGVudGF0aW9uQmFzZUJhY2tCeSwgX3YwKSB7CgkJdmFyIHBhcnNlID0gX3YwLmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgX3YxID0gcGFyc2UoCgkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkY2hhbmdlSW5kZW50LCBzMC5jb2wgLSBjb2x1bW5Ub01vdmVJbmRlbnRhdGlvbkJhc2VCYWNrQnksIHMwKSk7CgkJCQlpZiAoX3YxLiQgPT09ICdHb29kJykgewoJCQkJCXZhciBhID0gX3YxLmE7CgkJCQkJdmFyIHMxID0gX3YxLmI7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQlhLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjaGFuZ2VJbmRlbnQsIHMwLmluZGVudCwgczEpKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGJhZCA9IF92MTsKCQkJCQlyZXR1cm4gYmFkOwoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRleHRlbmRlZFN1YkV4cHJlc3Npb25PcHRpbWlzdGljTGF5b3V0ID0gRjIoCglmdW5jdGlvbiAodG9SZXN1bHQsIGFmdGVyQ29tbWl0dGluZykgewoJCXJldHVybiBBNCgKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbG9vcFdoaWxlU3VjY2VlZHNPbnRvUmVzdWx0RnJvbVBhcnNlciwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHBvc2l0aXZlbHlJbmRlbnRlZEZvbGxvd2VkQnkoCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4T3BlcmF0b3JBbmRUaGVuLCB0b1Jlc3VsdCwgYWZ0ZXJDb21taXR0aW5nKSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHN1YkV4cHJlc3Npb25NYXliZUFwcGxpZWRPcHRpbWlzdGljTGF5b3V0KCksCgkJCUYyKAoJCQkJZnVuY3Rpb24gKGV4dGVuc2lvblJpZ2h0UmVzdWx0LCBsZWZ0Tm9kZVdpdGhDb21tZW50cykgewoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGV4dGVuc2lvblJpZ2h0UmVzdWx0LmNvbW1lbnRzLCBsZWZ0Tm9kZVdpdGhDb21tZW50cy5jb21tZW50cyksCgkJCQkJCXN5bnRheDogQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRhcHBseUV4dGVuc2lvblJpZ2h0LCBleHRlbnNpb25SaWdodFJlc3VsdC5zeW50YXgsIGxlZnROb2RlV2l0aENvbW1lbnRzLnN5bnRheCkKCQkJCQl9OwoJCQkJfSksCgkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHkpOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4TGVmdCA9IEYyKAoJZnVuY3Rpb24gKGxlZnRQcmVjZWRlbmNlLCBzeW1ib2wpIHsKCQlyZXR1cm4gewoJCQlleHRlbnNpb25SaWdodDogQTMoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJRjIoCgkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlRmlyc3QsIGZpcnN0KSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBmaXJzdC5jb21tZW50cywgY29tbWVudHNCZWZvcmVGaXJzdCksCgkJCQkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kRXh0ZW5kUmlnaHRCeU9wZXJhdGlvbigKCQkJCQkJCQl7ZGlyZWN0aW9uOiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRJbmZpeCRMZWZ0LCBleHByZXNzaW9uOiBmaXJzdC5zeW50YXgsIHN5bWJvbDogc3ltYm9sfSkKCQkJCQkJfTsKCQkJCQl9KSwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCUEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kZXh0ZW5kZWRTdWJFeHByZXNzaW9uT3B0aW1pc3RpY0xheW91dCwKCQkJCQlmdW5jdGlvbiAoaW5mbykgewoJCQkJCQlyZXR1cm4gKF9VdGlsc19jbXAoaW5mby5sZWZ0UHJlY2VkZW5jZSwgbGVmdFByZWNlZGVuY2UpID4gMCkgPyAkZWxtJGNvcmUkUmVzdWx0JE9rKGluZm8pIDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiR0ZW1wb3JhcnlFcnJQcmVjZWRlbmNlVG9vSGlnaDsKCQkJCQl9LAoJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCXJldHVybiAkLmV4dGVuc2lvblJpZ2h0OwoJCQkJCX0pKSwKCQkJbGVmdFByZWNlZGVuY2U6IGxlZnRQcmVjZWRlbmNlLAoJCQlzeW1ib2w6IHN5bWJvbAoJCX07Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhOb25Bc3NvY2lhdGl2ZSA9IEYyKAoJZnVuY3Rpb24gKGxlZnRQcmVjZWRlbmNlLCBzeW1ib2wpIHsKCQlyZXR1cm4gewoJCQlleHRlbnNpb25SaWdodDogQTMoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJRjIoCgkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCByaWdodCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgcmlnaHQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKSwKCQkJCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRFeHRlbmRSaWdodEJ5T3BlcmF0aW9uKAoJCQkJCQkJCXtkaXJlY3Rpb246ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEluZml4JE5vbiwgZXhwcmVzc2lvbjogcmlnaHQuc3ludGF4LCBzeW1ib2w6IHN5bWJvbH0pCgkJCQkJCX07CgkJCQkJfSksCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQlBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGV4dGVuZGVkU3ViRXhwcmVzc2lvbk9wdGltaXN0aWNMYXlvdXQsCgkJCQkJZnVuY3Rpb24gKGluZm8pIHsKCQkJCQkJcmV0dXJuIChfVXRpbHNfY21wKGluZm8ubGVmdFByZWNlZGVuY2UsIGxlZnRQcmVjZWRlbmNlKSA+IC0xKSA/ICRlbG0kY29yZSRSZXN1bHQkT2soaW5mbykgOiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHRlbXBvcmFyeUVyclByZWNlZGVuY2VUb29IaWdoOwoJCQkJCX0sCgkJCQkJZnVuY3Rpb24gKGluZm8pIHsKCQkJCQkJcmV0dXJuIF9VdGlsc19lcShpbmZvLmxlZnRQcmVjZWRlbmNlLCBsZWZ0UHJlY2VkZW5jZSkgPyAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByb2JsZW1DYW5ub3RNaXhOb25Bc3NvY2lhdGl2ZUluZml4T3BlcmF0b3JzIDogaW5mby5leHRlbnNpb25SaWdodDsKCQkJCQl9KSksCgkJCWxlZnRQcmVjZWRlbmNlOiBsZWZ0UHJlY2VkZW5jZSwKCQkJc3ltYm9sOiBzeW1ib2wKCQl9OwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4T3BlcmF0b3JBbmRUaGVuID0gRjIoCglmdW5jdGlvbiAodG9SZXN1bHQsIGFmdGVyQ29tbWl0dGluZykgewoJCXJldHVybiBBMygKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkd2hpbGVXaXRob3V0TGluZWJyZWFrQW5kMlBhcnRVdGYxNlRvUmVzdWx0QW5kVGhlbiwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGlzT3BlcmF0b3JTeW1ib2xDaGFyLAoJCQlmdW5jdGlvbiAob3BlcmF0b3IpIHsKCQkJCXN3aXRjaCAob3BlcmF0b3IpIHsKCQkJCQljYXNlICd8Pic6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2UxQXBSKCkpOwoJCQkJCWNhc2UgJysrJzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTVhcHBlbmQoKSk7CgkJCQkJY2FzZSAnPHwnOgoJCQkJCQlyZXR1cm4gdG9SZXN1bHQoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlMUFwTCgpKTsKCQkJCQljYXNlICc+Pic6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U5Q29tcG9zZVIoKSk7CgkJCQkJY2FzZSAnPT0nOgoJCQkJCQlyZXR1cm4gdG9SZXN1bHQoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNEVxKCkpOwoJCQkJCWNhc2UgJyonOgoJCQkJCQlyZXR1cm4gdG9SZXN1bHQoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlN011bCgpKTsKCQkJCQljYXNlICc6Oic6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U1Q29ucygpKTsKCQkJCQljYXNlICcrJzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTZBZGQoKSk7CgkJCQkJY2FzZSAnLSc6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U2U3ViKCkpOwoJCQkJCWNhc2UgJ3wuJzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTZJZ25vcmUoKSk7CgkJCQkJY2FzZSAnJiYnOgoJCQkJCQlyZXR1cm4gdG9SZXN1bHQoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlM0FuZCgpKTsKCQkJCQljYXNlICd8PSc6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U1S2VlcCgpKTsKCQkJCQljYXNlICc8PCc6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U5Q29tcG9zZUwoKSk7CgkJCQkJY2FzZSAnLz0nOgoJCQkJCQlyZXR1cm4gdG9SZXN1bHQoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNE5lcSgpKTsKCQkJCQljYXNlICcvLyc6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U3SWRpdigpKTsKCQkJCQljYXNlICcvJzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTdGZGl2KCkpOwoJCQkJCWNhc2UgJzwvPic6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U3U2xhc2goKSk7CgkJCQkJY2FzZSAnfHwnOgoJCQkJCQlyZXR1cm4gdG9SZXN1bHQoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlMk9yKCkpOwoJCQkJCWNhc2UgJzw9JzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRMZSgpKTsKCQkJCQljYXNlICc+PSc6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0R2UoKSk7CgkJCQkJY2FzZSAnPic6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0R3QoKSk7CgkJCQkJY2FzZSAnPD8+JzoKCQkJCQkJcmV0dXJuIHRvUmVzdWx0KAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZThRdWVzdGlvbk1hcmsoKSk7CgkJCQkJY2FzZSAnPCc6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0THQoKSk7CgkJCQkJY2FzZSAnXic6CgkJCQkJCXJldHVybiB0b1Jlc3VsdCgKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U4UG93KCkpOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGVyclVua25vd25JbmZpeE9wZXJhdG9yOwoJCQkJfQoJCQl9LAoJCQlhZnRlckNvbW1pdHRpbmcpOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4UmlnaHQgPSBGMigKCWZ1bmN0aW9uIChsZWZ0UHJlY2VkZW5jZSwgc3ltYm9sKSB7CgkJcmV0dXJuIHsKCQkJZXh0ZW5zaW9uUmlnaHQ6IEEzKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJCUYyKAoJCQkJCWZ1bmN0aW9uIChjb21tZW50c0JlZm9yZUZpcnN0LCBmaXJzdCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgZmlyc3QuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlRmlyc3QpLAoJCQkJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJEV4dGVuZFJpZ2h0QnlPcGVyYXRpb24oCgkJCQkJCQkJe2RpcmVjdGlvbjogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkSW5maXgkUmlnaHQsIGV4cHJlc3Npb246IGZpcnN0LnN5bnRheCwgc3ltYm9sOiBzeW1ib2x9KQoJCQkJCQl9OwoJCQkJCX0pLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRleHRlbmRlZFN1YkV4cHJlc3Npb25PcHRpbWlzdGljTGF5b3V0LAoJCQkJCWZ1bmN0aW9uIChpbmZvKSB7CgkJCQkJCXJldHVybiAoX1V0aWxzX2NtcChpbmZvLmxlZnRQcmVjZWRlbmNlLCBsZWZ0UHJlY2VkZW5jZSkgPiAtMSkgPyAkZWxtJGNvcmUkUmVzdWx0JE9rKGluZm8pIDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiR0ZW1wb3JhcnlFcnJQcmVjZWRlbmNlVG9vSGlnaDsKCQkJCQl9LAoJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCXJldHVybiAkLmV4dGVuc2lvblJpZ2h0OwoJCQkJCX0pKSwKCQkJbGVmdFByZWNlZGVuY2U6IGxlZnRQcmVjZWRlbmNlLAoJCQlzeW1ib2w6IHN5bWJvbAoJCX07Cgl9KTsKZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0T3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb24oKSB7CglyZXR1cm4gQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldEV4cHJlc3Npb24oKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHVucXVhbGlmaWVkRnVuY3Rpb25SZWZlcmVuY2VFeHByZXNzaW9uRm9sbG93ZWRCeVJlY29yZEFjY2Vzcyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0RXhwcmVzc2lvbigpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwKCQknbGV0JywKCQlBNCgKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwM1dpdGhTdGFydExvY2F0aW9uLAoJCQlGNCgKCQkJCWZ1bmN0aW9uIChzdGFydCwgZGVjbGFyYXRpb25zLCBjb21tZW50c0FmdGVySW4sIGV4cHJlc3Npb25SZXN1bHQpIHsKCQkJCQl2YXIgX3YzOCA9IGV4cHJlc3Npb25SZXN1bHQuc3ludGF4OwoJCQkJCXZhciBleHByZXNzaW9uUmFuZ2UgPSBfdjM4LmE7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJZXhwcmVzc2lvblJlc3VsdC5jb21tZW50cywKCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlckluLCBkZWNsYXJhdGlvbnMuY29tbWVudHMpKSwKCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXsKCQkJCQkJCQllbmQ6IGV4cHJlc3Npb25SYW5nZS5lbmQsCgkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHN0YXJ0LmNvbHVtbiAtIDMsIHJvdzogc3RhcnQucm93fQoJCQkJCQkJfSwKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kTGV0RXhwcmVzc2lvbigKCQkJCQkJCQl7ZGVjbGFyYXRpb25zOiBkZWNsYXJhdGlvbnMuZGVjbGFyYXRpb25zLCBleHByZXNzaW9uOiBleHByZXNzaW9uUmVzdWx0LnN5bnRheH0pKQoJCQkJCX07CgkJCQl9KSwKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aXRoSW5kZW50U2V0VG9Db2x1bW5NaW51cywKCQkJCTMsCgkJCQlBMygKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJCUYyKAoJCQkJCQlmdW5jdGlvbiAoY29tbWVudHNBZnRlckxldCwgZGVjbGFyYXRpb25zKSB7CgkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGRlY2xhcmF0aW9ucy5jb21tZW50cywgY29tbWVudHNBZnRlckxldCksCgkJCQkJCQkJZGVjbGFyYXRpb25zOiBkZWNsYXJhdGlvbnMuc3ludGF4CgkJCQkJCQl9OwoJCQkJCQl9KSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkd2l0aEluZGVudFNldFRvQ29sdW1uKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXREZWNsYXJhdGlvbnNJbigpKSkpLAoJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkcG9zaXRpdmVseUluZGVudGVkUGx1c0ZvbGxvd2VkQnksIDIsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldERlY2xhcmF0aW9uc0luKCkgewoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvblRvcEluZGVudGF0aW9uRm9sbG93ZWRCeSgKCQlBNCgKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQkJRjMoCgkJCQlmdW5jdGlvbiAoaGVhZExldFJlc3VsdCwgY29tbWVudHNBZnRlciwgdGFpbExldFJlc3VsdCkgewoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCXRhaWxMZXRSZXN1bHQuY29tbWVudHMsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXIsIGhlYWRMZXRSZXN1bHQuY29tbWVudHMpKSwKCQkJCQkJc3ludGF4OiBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBoZWFkTGV0UmVzdWx0LnN5bnRheCwgdGFpbExldFJlc3VsdC5zeW50YXgpCgkJCQkJfTsKCQkJCX0pLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldEZ1bmN0aW9uKCksCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXREZXN0cnVjdHVyaW5nRGVjbGFyYXRpb24oKSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvcHRpbWlzdGljTGF5b3V0LAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkdW50aWwsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkaW5Ub2tlbiwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGJsb2NrRWxlbWVudCgpKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGJsb2NrRWxlbWVudCgpIHsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb25Ub3BJbmRlbnRhdGlvbkZvbGxvd2VkQnkoCgkJQTMoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCUYyKAoJCQkJZnVuY3Rpb24gKGxldERlY2xhcmF0aW9uUmVzdWx0LCBjb21tZW50c0FmdGVyKSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlciwgbGV0RGVjbGFyYXRpb25SZXN1bHQuY29tbWVudHMpLAoJCQkJCQlzeW50YXg6IGxldERlY2xhcmF0aW9uUmVzdWx0LnN5bnRheAoJCQkJCX07CgkJCQl9KSwKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXRGdW5jdGlvbigpLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0RGVzdHJ1Y3R1cmluZ0RlY2xhcmF0aW9uKCkpLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGNhc2VPclVucXVhbGlmaWVkUmVmZXJlbmNlRXhwcmVzc2lvbigpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkY2FzZUV4cHJlc3Npb24oKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHVucXVhbGlmaWVkRnVuY3Rpb25SZWZlcmVuY2VFeHByZXNzaW9uRm9sbG93ZWRCeVJlY29yZEFjY2Vzcyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkY2FzZUV4cHJlc3Npb24oKSB7CglyZXR1cm4gQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZEZvbGxvd2VkQnksCgkJJ2Nhc2UnLAoJCUE2KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA1V2l0aFN0YXJ0TG9jYXRpb24sCgkJCUY2KAoJCQkJZnVuY3Rpb24gKHN0YXJ0LCBjb21tZW50c0FmdGVyQ2FzZSwgY2FzZWRFeHByZXNzaW9uUmVzdWx0LCBjb21tZW50c0JlZm9yZU9mLCBjb21tZW50c0FmdGVyT2YsIGNhc2VzUmVzdWx0KSB7CgkJCQkJdmFyIF92MzIgPSBjYXNlc1Jlc3VsdC5zeW50YXg7CgkJCQkJdmFyIGZpcnN0Q2FzZSA9IF92MzIuYTsKCQkJCQl2YXIgbGFzdFRvU2Vjb25kQ2FzZSA9IF92MzIuYjsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQljYXNlc1Jlc3VsdC5jb21tZW50cywKCQkJCQkJCUEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQljb21tZW50c0FmdGVyT2YsCgkJCQkJCQkJQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJY29tbWVudHNCZWZvcmVPZiwKCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjYXNlZEV4cHJlc3Npb25SZXN1bHQuY29tbWVudHMsIGNvbW1lbnRzQWZ0ZXJDYXNlKSkpKSwKCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXsKCQkJCQkJCQllbmQ6IGZ1bmN0aW9uICgpIHsKCQkJCQkJCQkJaWYgKGxhc3RUb1NlY29uZENhc2UuYikgewoJCQkJCQkJCQkJdmFyIF92MzQgPSBsYXN0VG9TZWNvbmRDYXNlLmE7CgkJCQkJCQkJCQl2YXIgX3YzNSA9IF92MzQuYjsKCQkJCQkJCQkJCXZhciBsYXN0Q2FzZUV4cHJlc3Npb25SYW5nZSA9IF92MzUuYTsKCQkJCQkJCQkJCXJldHVybiBsYXN0Q2FzZUV4cHJlc3Npb25SYW5nZS5lbmQ7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQl2YXIgX3YzNiA9IGZpcnN0Q2FzZTsKCQkJCQkJCQkJCXZhciBfdjM3ID0gX3YzNi5iOwoJCQkJCQkJCQkJdmFyIGZpcnN0Q2FzZUV4cHJlc3Npb25SYW5nZSA9IF92MzcuYTsKCQkJCQkJCQkJCXJldHVybiBmaXJzdENhc2VFeHByZXNzaW9uUmFuZ2UuZW5kOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSgpLAoJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzdGFydC5jb2x1bW4gLSA0LCByb3c6IHN0YXJ0LnJvd30KCQkJCQkJCX0sCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJENhc2VFeHByZXNzaW9uKAoJCQkJCQkJCXsKCQkJCQkJCQkJY2FzZXM6IEEyKAoJCQkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCQkJCWZpcnN0Q2FzZSwKCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UobGFzdFRvU2Vjb25kQ2FzZSkpLAoJCQkJCQkJCQlleHByZXNzaW9uOiBjYXNlZEV4cHJlc3Npb25SZXN1bHQuc3ludGF4CgkJCQkJCQkJfSkpCgkJCQkJfTsKCQkJCX0pLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwgJ29mJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkd2l0aEluZGVudFNldFRvQ29sdW1uKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkY2FzZVN0YXRlbWVudHMoKSkpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRjYXNlU3RhdGVtZW50cygpIHsKCXJldHVybiBBNigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA1LAoJCUY1KAoJCQlmdW5jdGlvbiAoZmlyc3RDYXNlUGF0dGVyblJlc3VsdCwgY29tbWVudHNBZnRlckZpcnN0Q2FzZVBhdHRlcm4sIGNvbW1lbnRzQWZ0ZXJGaXJzdENhc2VBcnJvd1JpZ2h0LCBmaXJzdENhc2VFeHByZXNzaW9uUmVzdWx0LCBsYXN0VG9TZWNvbmRDYXNlKSB7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQlsYXN0VG9TZWNvbmRDYXNlLmNvbW1lbnRzLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCWZpcnN0Q2FzZUV4cHJlc3Npb25SZXN1bHQuY29tbWVudHMsCgkJCQkJCQlBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJY29tbWVudHNBZnRlckZpcnN0Q2FzZUFycm93UmlnaHQsCgkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyRmlyc3RDYXNlUGF0dGVybiwgZmlyc3RDYXNlUGF0dGVyblJlc3VsdC5jb21tZW50cykpKSksCgkJCQkJc3ludGF4OiBfVXRpbHNfVHVwbGUyKAoJCQkJCQlfVXRpbHNfVHVwbGUyKGZpcnN0Q2FzZVBhdHRlcm5SZXN1bHQuc3ludGF4LCBmaXJzdENhc2VFeHByZXNzaW9uUmVzdWx0LnN5bnRheCksCgkJCQkJCWxhc3RUb1NlY29uZENhc2Uuc3ludGF4KQoJCQkJfTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcGF0dGVybiwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJy0+JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uKCksCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyRtYW55V2l0aG91dFJldmVyc2UoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGNhc2VTdGF0ZW1lbnQoKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGNhc2VTdGF0ZW1lbnQoKSB7CglyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9uVG9wSW5kZW50YXRpb25Gb2xsb3dlZEJ5KAoJCUE1KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0LAoJCQlGNCgKCQkJCWZ1bmN0aW9uIChwYXR0ZXJuLCBjb21tZW50c0JlZm9yZUFycm93UmlnaHQsIGNvbW1lbnRzQWZ0ZXJBcnJvd1JpZ2h0LCBleHByKSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJZXhwci5jb21tZW50cywKCQkJCQkJCUEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQljb21tZW50c0FmdGVyQXJyb3dSaWdodCwKCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQmVmb3JlQXJyb3dSaWdodCwgcGF0dGVybi5jb21tZW50cykpKSwKCQkJCQkJc3ludGF4OiBfVXRpbHNfVHVwbGUyKHBhdHRlcm4uc3ludGF4LCBleHByLnN5bnRheCkKCQkJCQl9OwoJCQkJfSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFBhdHRlcm5zJHBhdHRlcm4sCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJy0+JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkZXhwcmVzc2lvbigpKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkdHVwbGVkRXhwcmVzc2lvbklmTmVjZXNzYXJ5Rm9sbG93ZWRCeVJlY29yZEFjY2VzcygpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCScoJywKCQlBMygKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YzLAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbFdpdGhFbmRMb2NhdGlvbiwKCQkJCScpJywKCQkJCWZ1bmN0aW9uIChlbmQpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQl7CgkJCQkJCQkJZW5kOiBlbmQsCgkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IGVuZC5jb2x1bW4gLSAyLCByb3c6IGVuZC5yb3d9CgkJCQkJCQl9LAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRVbml0RXhwcikKCQkJCQl9OwoJCQkJfSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kYWxsb3dlZFByZWZpeE9wZXJhdG9yRm9sbG93ZWRCeUNsb3NpbmdQYXJlbnNPbmVPZiwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkdHVwbGVkRXhwcmVzc2lvbklubmVyQWZ0ZXJPcGVuaW5nUGFyZW5zKCkpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyR0dXBsZWRFeHByZXNzaW9uSW5uZXJBZnRlck9wZW5pbmdQYXJlbnMoKSB7CglyZXR1cm4gQTUoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNFdpdGhSYW5nZSwKCQlGNSgKCQkJZnVuY3Rpb24gKHJhbmdlQWZ0ZXJPcGVuaW5nUGFyZW5zLCBjb21tZW50c0JlZm9yZUZpcnN0UGFydCwgZmlyc3RQYXJ0LCBjb21tZW50c0FmdGVyRmlyc3RQYXJ0LCB0YWlsUGFydHMpIHsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCXRhaWxQYXJ0cy5jb21tZW50cywKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQljb21tZW50c0FmdGVyRmlyc3RQYXJ0LAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBmaXJzdFBhcnQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlRmlyc3RQYXJ0KSkpLAoJCQkJCXN5bnRheDogZnVuY3Rpb24gKCkgewoJCQkJCQl2YXIgX3YyNyA9IHRhaWxQYXJ0cy5zeW50YXg7CgkJCQkJCWlmIChfdjI3LiQgPT09ICdUdXBsZWRQYXJlbnRoZXNpemVkRm9sbG93ZWRCeVJlY29yZEFjY2Vzc2VzJykgewoJCQkJCQkJdmFyIHJlY29yZEFjY2Vzc2VzID0gX3YyNy5hOwoJCQkJCQkJaWYgKCFyZWNvcmRBY2Nlc3Nlcy5iKSB7CgkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJCXsKCQkJCQkJCQkJCWVuZDogcmFuZ2VBZnRlck9wZW5pbmdQYXJlbnMuZW5kLAoJCQkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHJhbmdlQWZ0ZXJPcGVuaW5nUGFyZW5zLnN0YXJ0LmNvbHVtbiAtIDEsIHJvdzogcmFuZ2VBZnRlck9wZW5pbmdQYXJlbnMuc3RhcnQucm93fQoJCQkJCQkJCQl9LAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uKGZpcnN0UGFydC5zeW50YXgpKTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIF92MjkgPSByZWNvcmRBY2Nlc3Nlcy5hOwoJCQkJCQkJCXZhciBmaXJzdFJlY29yZEFjY2Vzc1JhbmdlID0gX3YyOS5hOwoJCQkJCQkJCXZhciByYW5nZSA9IHsKCQkJCQkJCQkJZW5kOiB7Y29sdW1uOiBmaXJzdFJlY29yZEFjY2Vzc1JhbmdlLnN0YXJ0LmNvbHVtbiAtIDEsIHJvdzogZmlyc3RSZWNvcmRBY2Nlc3NSYW5nZS5zdGFydC5yb3d9LAoJCQkJCQkJCQlzdGFydDoge2NvbHVtbjogcmFuZ2VBZnRlck9wZW5pbmdQYXJlbnMuc3RhcnQuY29sdW1uIC0gMSwgcm93OiByYW5nZUFmdGVyT3BlbmluZ1BhcmVucy5zdGFydC5yb3d9CgkJCQkJCQkJfTsKCQkJCQkJCQl2YXIgcGFyZW50aGVzaXplZE5vZGUgPSBBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCQlyYW5nZSwKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihmaXJzdFBhcnQuc3ludGF4KSk7CgkJCQkJCQkJcmV0dXJuIEEzKAoJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJCQkJCQkJRjIoCgkJCQkJCQkJCQlmdW5jdGlvbiAoZmllbGROb2RlLCBsZWZ0Tm9kZSkgewoJCQkJCQkJCQkJCXZhciBmaWVsZFJhbmdlID0gZmllbGROb2RlLmE7CgkJCQkJCQkJCQkJdmFyIGxlZnRSYW5nZSA9IGxlZnROb2RlLmE7CgkJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJCQkJCXtlbmQ6IGZpZWxkUmFuZ2UuZW5kLCBzdGFydDogbGVmdFJhbmdlLnN0YXJ0fSwKCQkJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRSZWNvcmRBY2Nlc3MsIGxlZnROb2RlLCBmaWVsZE5vZGUpKTsKCQkJCQkJCQkJCX0pLAoJCQkJCQkJCQlwYXJlbnRoZXNpemVkTm9kZSwKCQkJCQkJCQkJcmVjb3JkQWNjZXNzZXMpOwoJCQkJCQkJfQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIF92MzAgPSBfdjI3LmE7CgkJCQkJCQl2YXIgc2Vjb25kUGFydCA9IF92MzAuYTsKCQkJCQkJCXZhciBtYXliZVRoaXJkUGFydCA9IF92MzAuYjsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJewoJCQkJCQkJCQllbmQ6IHJhbmdlQWZ0ZXJPcGVuaW5nUGFyZW5zLmVuZCwKCQkJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHJhbmdlQWZ0ZXJPcGVuaW5nUGFyZW5zLnN0YXJ0LmNvbHVtbiAtIDEsIHJvdzogcmFuZ2VBZnRlck9wZW5pbmdQYXJlbnMuc3RhcnQucm93fQoJCQkJCQkJCX0sCgkJCQkJCQkJZnVuY3Rpb24gKCkgewoJCQkJCQkJCQlpZiAobWF5YmVUaGlyZFBhcnQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRUdXBsZWRFeHByZXNzaW9uKAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJW2ZpcnN0UGFydC5zeW50YXgsIHNlY29uZFBhcnRdKSk7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQl2YXIgdGhpcmRQYXJ0ID0gbWF5YmVUaGlyZFBhcnQuYTsKCQkJCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJFR1cGxlZEV4cHJlc3Npb24oCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbZmlyc3RQYXJ0LnN5bnRheCwgc2Vjb25kUGFydCwgdGhpcmRQYXJ0XSkpOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSgpKTsKCQkJCQkJfQoJCQkJCX0oKQoJCQkJfTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJJyknLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRtdWx0aVJlY29yZEFjY2Vzc01hcCgKCQkJCQlmdW5jdGlvbiAocmVjb3JkQWNjZXNzZXMpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRUdXBsZWRQYXJlbnRoZXNpemVkRm9sbG93ZWRCeVJlY29yZEFjY2Vzc2VzKHJlY29yZEFjY2Vzc2VzKQoJCQkJCQl9OwoJCQkJCX0pKSwKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJJywnLAoJCQkJQTUoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNCwKCQkJCQlGNCgKCQkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCBwYXJ0UmVzdWx0LCBjb21tZW50c0FmdGVyLCBtYXliZVRoaXJkUGFydCkgewoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJbWF5YmVUaGlyZFBhcnQuY29tbWVudHMsCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJY29tbWVudHNBZnRlciwKCQkJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgcGFydFJlc3VsdC5jb21tZW50cywgY29tbWVudHNCZWZvcmUpKSksCgkJCQkJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJFR1cGxlZFR3b09yVGhyZWUoCgkJCQkJCQkJCV9VdGlsc19UdXBsZTIocGFydFJlc3VsdC5zeW50YXgsIG1heWJlVGhpcmRQYXJ0LnN5bnRheCkpCgkJCQkJCQl9OwoJCQkJCQl9KSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkZXhwcmVzc2lvbigpLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwKCQkJCQkJCScpJywKCQkJCQkJCXtjb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksIHN5bnRheDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmd9KSwKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQkJCQkJJywnLAoJCQkJCQkJQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZm9sbG93ZWRCeVN5bWJvbCwKCQkJCQkJCQknKScsCgkJCQkJCQkJQTQoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDMsCgkJCQkJCQkJCUYzKAoJCQkJCQkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCBwYXJ0UmVzdWx0LCBjb21tZW50c0FmdGVyKSB7CgkJCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJCQkJY29tbWVudHNBZnRlciwKCQkJCQkJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgcGFydFJlc3VsdC5jb21tZW50cywgY29tbWVudHNCZWZvcmUpKSwKCQkJCQkJCQkJCQkJc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkSnVzdChwYXJ0UmVzdWx0LnN5bnRheCkKCQkJCQkJCQkJCQl9OwoJCQkJCQkJCQkJfSksCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkZXhwcmVzc2lvbigpLAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpKSkpKSkpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRyZWNvcmRFeHByZXNzaW9uRm9sbG93ZWRCeVJlY29yZEFjY2VzcygpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCSd7JywKCQlBMygKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJRjIoCgkJCQlmdW5jdGlvbiAobGVmdGVzdFJlc3VsdCwgcmVjb3JkQWNjZXNzZXMpIHsKCQkJCQlpZiAoIXJlY29yZEFjY2Vzc2VzLmIpIHsKCQkJCQkJcmV0dXJuIGxlZnRlc3RSZXN1bHQ7CgkJCQkJfSBlbHNlIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWNvbW1lbnRzOiBsZWZ0ZXN0UmVzdWx0LmNvbW1lbnRzLAoJCQkJCQkJc3ludGF4OiBBMygKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJCQkJCQlGMigKCQkJCQkJCQkJZnVuY3Rpb24gKGZpZWxkTm9kZSwgbGVmdE5vZGUpIHsKCQkJCQkJCQkJCXZhciBmaWVsZFJhbmdlID0gZmllbGROb2RlLmE7CgkJCQkJCQkJCQl2YXIgbGVmdFJhbmdlID0gbGVmdE5vZGUuYTsKCQkJCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJCQkJe2VuZDogZmllbGRSYW5nZS5lbmQsIHN0YXJ0OiBsZWZ0UmFuZ2Uuc3RhcnR9LAoJCQkJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kUmVjb3JkQWNjZXNzLCBsZWZ0Tm9kZSwgZmllbGROb2RlKSk7CgkJCQkJCQkJCX0pLAoJCQkJCQkJCWxlZnRlc3RSZXN1bHQuc3ludGF4LAoJCQkJCQkJCXJlY29yZEFjY2Vzc2VzKQoJCQkJCQl9OwoJCQkJCX0KCQkJCX0pLAoJCQlBMygKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJXaXRoUmFuZ2UsCgkJCQlGMygKCQkJCQlmdW5jdGlvbiAocmFuZ2UsIGNvbW1lbnRzQmVmb3JlLCBhZnRlckN1cmx5KSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBhZnRlckN1cmx5LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZSksCgkJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHJhbmdlTW92ZVN0YXJ0TGVmdEJ5T25lQ29sdW1uKHJhbmdlKSwKCQkJCQkJCQlhZnRlckN1cmx5LnN5bnRheCkKCQkJCQkJfTsKCQkJCQl9KSwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHJlY29yZENvbnRlbnRzQ3VybHlFbmQoKSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbXVsdGlSZWNvcmRBY2Nlc3MpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRyZWNvcmRDb250ZW50c0N1cmx5RW5kKCkgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMiwKCQlBNigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNSwKCQkJRjUoCgkJCQlmdW5jdGlvbiAobmFtZU5vZGUsIGNvbW1lbnRzQWZ0ZXJGdW5jdGlvbk5hbWUsIGFmdGVyTmFtZUJlZm9yZUZpZWxkcywgdGFpbEZpZWxkcywgY29tbWVudHNCZWZvcmVDbG9zaW5nQ3VybHkpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQljb21tZW50c0JlZm9yZUNsb3NpbmdDdXJseSwKCQkJCQkJCUEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQl0YWlsRmllbGRzLmNvbW1lbnRzLAoJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgYWZ0ZXJOYW1lQmVmb3JlRmllbGRzLmNvbW1lbnRzLCBjb21tZW50c0FmdGVyRnVuY3Rpb25OYW1lKSkpLAoJCQkJCQlzeW50YXg6IGZ1bmN0aW9uICgpIHsKCQkJCQkJCXZhciBfdjI1ID0gYWZ0ZXJOYW1lQmVmb3JlRmllbGRzLnN5bnRheDsKCQkJCQkJCWlmIChfdjI1LiQgPT09ICdSZWNvcmRVcGRhdGVGaXJzdFNldHRlcicpIHsKCQkJCQkJCQl2YXIgZmlyc3RGaWVsZCA9IF92MjUuYTsKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kUmVjb3JkVXBkYXRlRXhwcmVzc2lvbiwKCQkJCQkJCQkJbmFtZU5vZGUsCgkJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGZpcnN0RmllbGQsIHRhaWxGaWVsZHMuc3ludGF4KSk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBmaXJzdEZpZWxkVmFsdWUgPSBfdjI1LmE7CgkJCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kUmVjb3JkRXhwcigKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRjb21iaW5lLCAkZWxtJGNvcmUkVHVwbGUkcGFpciwgbmFtZU5vZGUsIGZpcnN0RmllbGRWYWx1ZSksCgkJCQkJCQkJCQl0YWlsRmllbGRzLnN5bnRheCkpOwoJCQkJCQkJfQoJCQkJCQl9KCkKCQkJCQl9OwoJCQkJfSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVOb2RlLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCQkJQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJCQknfCcsCgkJCQkJQTMoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCQkJCUYyKAoJCQkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCBzZXR0ZXJSZXN1bHQpIHsKCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBzZXR0ZXJSZXN1bHQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKSwKCQkJCQkJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJFJlY29yZFVwZGF0ZUZpcnN0U2V0dGVyKHNldHRlclJlc3VsdC5zeW50YXgpCgkJCQkJCQkJfTsKCQkJCQkJCX0pLAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHJlY29yZFNldHRlck5vZGVXaXRoTGF5b3V0KCkpKSwKCQkJCUEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQkJJz0nLAoJCQkJCUE0KAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzLAoJCQkJCQlGMygKCQkJCQkJCWZ1bmN0aW9uIChjb21tZW50c0JlZm9yZSwgZXhwcmVzc2lvblJlc3VsdCwgY29tbWVudHNBZnRlcikgewoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJCWNvbW1lbnRzQWZ0ZXIsCgkJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGV4cHJlc3Npb25SZXN1bHQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKSksCgkJCQkJCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRGaWVsZHNGaXJzdFZhbHVlKGV4cHJlc3Npb25SZXN1bHQuc3ludGF4KQoJCQkJCQkJCX07CgkJCQkJCQl9KSwKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uKCksCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCkpKSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcmVjb3JkRmllbGRzKCksCgkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGZvbGxvd2VkQnlTeW1ib2wsICd9JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSksCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwKCQkJJ30nLAoJCQl7CgkJCQljb21tZW50czogJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkZW1wdHksCgkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kUmVjb3JkRXhwcihfTGlzdF9OaWwpCgkJCX0pKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRyZWNvcmRGaWVsZHMoKSB7CglyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyRtYW55KAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQknLCcsCgkJCUEzKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJCUYyKAoJCQkJCWZ1bmN0aW9uIChjb21tZW50c0JlZm9yZSwgc2V0dGVyUmVzdWx0KSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBzZXR0ZXJSZXN1bHQuY29tbWVudHMsIGNvbW1lbnRzQmVmb3JlKSwKCQkJCQkJCXN5bnRheDogc2V0dGVyUmVzdWx0LnN5bnRheAoJCQkJCQl9OwoJCQkJCX0pLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcmVjb3JkU2V0dGVyTm9kZVdpdGhMYXlvdXQoKSkpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRyZWNvcmRTZXR0ZXJOb2RlV2l0aExheW91dCgpIHsKCXJldHVybiBBNigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA1V2l0aFJhbmdlLAoJCUY2KAoJCQlmdW5jdGlvbiAocmFuZ2UsIG5hbWUsIGNvbW1lbnRzQWZ0ZXJGdW5jdGlvbk5hbWUsIGNvbW1lbnRzQWZ0ZXJFcXVhbHMsIGV4cHJlc3Npb25SZXN1bHQsIGNvbW1lbnRzQWZ0ZXJFeHByZXNzaW9uKSB7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQljb21tZW50c0FmdGVyRXhwcmVzc2lvbiwKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQlleHByZXNzaW9uUmVzdWx0LmNvbW1lbnRzLAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyRXF1YWxzLCBjb21tZW50c0FmdGVyRnVuY3Rpb25OYW1lKSkpLAoJCQkJCXN5bnRheDogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJcmFuZ2UsCgkJCQkJCV9VdGlsc19UdXBsZTIobmFtZSwgZXhwcmVzc2lvblJlc3VsdC5zeW50YXgpKQoJCQkJfTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICc9JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uKCksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXRGdW5jdGlvbigpIHsKCXJldHVybiBBMygKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR2YWxpZGF0ZSwKCQlmdW5jdGlvbiAocmVzdWx0KSB7CgkJCXZhciBfdjE4ID0gcmVzdWx0LnN5bnRheDsKCQkJdmFyIGxldERlY2xhcmF0aW9uID0gX3YxOC5iOwoJCQlpZiAobGV0RGVjbGFyYXRpb24uJCA9PT0gJ0xldERlc3RydWN0dXJpbmcnKSB7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfSBlbHNlIHsKCQkJCXZhciBsZXRGdW5jdGlvbkRlY2xhcmF0aW9uID0gbGV0RGVjbGFyYXRpb24uYTsKCQkJCXZhciBfdjIwID0gbGV0RnVuY3Rpb25EZWNsYXJhdGlvbi5zaWduYXR1cmU7CgkJCQlpZiAoX3YyMC4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIF92MjEgPSBfdjIwLmE7CgkJCQkJdmFyIHNpZ25hdHVyZSA9IF92MjEuYjsKCQkJCQl2YXIgX3YyMiA9IHNpZ25hdHVyZS5uYW1lOwoJCQkJCXZhciBzaWduYXR1cmVOYW1lID0gX3YyMi5iOwoJCQkJCXZhciBfdjIzID0gbGV0RnVuY3Rpb25EZWNsYXJhdGlvbi5kZWNsYXJhdGlvbjsKCQkJCQl2YXIgaW1wbGVtZW50YXRpb24gPSBfdjIzLmI7CgkJCQkJdmFyIF92MjQgPSBpbXBsZW1lbnRhdGlvbi5uYW1lOwoJCQkJCXZhciBpbXBsZW1lbnRhdGlvbk5hbWUgPSBfdjI0LmI7CgkJCQkJcmV0dXJuIF9VdGlsc19lcShpbXBsZW1lbnRhdGlvbk5hbWUsIHNpZ25hdHVyZU5hbWUgKyAnJyk7CgkJCQl9CgkJCX0KCQl9LAoJCSdFeHBlY3RlZCB0byBmaW5kIHRoZSBzYW1lIG5hbWUgZm9yIGRlY2xhcmF0aW9uIGFuZCBzaWduYXR1cmUnLAoJCUE3KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA2V2l0aFN0YXJ0TG9jYXRpb24sCgkJCUY3KAoJCQkJZnVuY3Rpb24gKHN0YXJ0TmFtZVN0YXJ0LCBzdGFydE5hbWVOb2RlLCBjb21tZW50c0FmdGVyU3RhcnROYW1lLCBtYXliZVNpZ25hdHVyZSwgX2FyZ3VtZW50cywgY29tbWVudHNBZnRlckVxdWFsLCBleHByZXNzaW9uUmVzdWx0KSB7CgkJCQkJdmFyIGFsbENvbW1lbnRzID0gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJZXhwcmVzc2lvblJlc3VsdC5jb21tZW50cywKCQkJCQkJQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQljb21tZW50c0FmdGVyRXF1YWwsCgkJCQkJCQlBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJX2FyZ3VtZW50cy5jb21tZW50cywKCQkJCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJCQkJCWlmIChtYXliZVNpZ25hdHVyZS4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQkJCXJldHVybiBjb21tZW50c0FmdGVyU3RhcnROYW1lOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJdmFyIHNpZ25hdHVyZSA9IG1heWJlU2lnbmF0dXJlLmE7CgkJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBzaWduYXR1cmUuY29tbWVudHMsIGNvbW1lbnRzQWZ0ZXJTdGFydE5hbWUpOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSgpKSkpOwoJCQkJCWlmIChtYXliZVNpZ25hdHVyZS4kID09PSAnTm90aGluZycpIHsKCQkJCQkJdmFyIF92MTQgPSBleHByZXNzaW9uUmVzdWx0LnN5bnRheDsKCQkJCQkJdmFyIGV4cHJlc3Npb25SYW5nZSA9IF92MTQuYTsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWNvbW1lbnRzOiBhbGxDb21tZW50cywKCQkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCXtlbmQ6IGV4cHJlc3Npb25SYW5nZS5lbmQsIHN0YXJ0OiBzdGFydE5hbWVTdGFydH0sCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRMZXRGdW5jdGlvbigKCQkJCQkJCQkJewoJCQkJCQkJCQkJZGVjbGFyYXRpb246IEEyKAoJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQkJCQl7ZW5kOiBleHByZXNzaW9uUmFuZ2UuZW5kLCBzdGFydDogc3RhcnROYW1lU3RhcnR9LAoJCQkJCQkJCQkJCXtfYXJndW1lbnRzOiBfYXJndW1lbnRzLnN5bnRheCwgZXhwcmVzc2lvbjogZXhwcmVzc2lvblJlc3VsdC5zeW50YXgsIG5hbWU6IHN0YXJ0TmFtZU5vZGV9KSwKCQkJCQkJCQkJCWRvY3VtZW50YXRpb246ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLAoJCQkJCQkJCQkJc2lnbmF0dXJlOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZwoJCQkJCQkJCQl9KSkKCQkJCQkJfTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgc2lnbmF0dXJlID0gbWF5YmVTaWduYXR1cmUuYTsKCQkJCQkJdmFyIF92MTUgPSBzaWduYXR1cmUuaW1wbGVtZW50YXRpb25OYW1lOwoJCQkJCQl2YXIgaW1wbGVtZW50YXRpb25OYW1lUmFuZ2UgPSBfdjE1LmE7CgkJCQkJCXZhciBfdjE2ID0gZXhwcmVzc2lvblJlc3VsdC5zeW50YXg7CgkJCQkJCXZhciBleHByZXNzaW9uUmFuZ2UgPSBfdjE2LmE7CgkJCQkJCXJldHVybiB7CgkJCQkJCQljb21tZW50czogYWxsQ29tbWVudHMsCgkJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQl7ZW5kOiBleHByZXNzaW9uUmFuZ2UuZW5kLCBzdGFydDogc3RhcnROYW1lU3RhcnR9LAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cHJlc3Npb24kTGV0RnVuY3Rpb24oCgkJCQkJCQkJCXsKCQkJCQkJCQkJCWRlY2xhcmF0aW9uOiBBMigKCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJCQkJe2VuZDogZXhwcmVzc2lvblJhbmdlLmVuZCwgc3RhcnQ6IGltcGxlbWVudGF0aW9uTmFtZVJhbmdlLnN0YXJ0fSwKCQkJCQkJCQkJCQl7X2FyZ3VtZW50czogX2FyZ3VtZW50cy5zeW50YXgsIGV4cHJlc3Npb246IGV4cHJlc3Npb25SZXN1bHQuc3ludGF4LCBuYW1lOiBzaWduYXR1cmUuaW1wbGVtZW50YXRpb25OYW1lfSksCgkJCQkJCQkJCQlkb2N1bWVudGF0aW9uOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywKCQkJCQkJCQkJCXNpZ25hdHVyZTogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCQkJQTMoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSRjb21iaW5lLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRTaWduYXR1cmUkU2lnbmF0dXJlLCBzdGFydE5hbWVOb2RlLCBzaWduYXR1cmUudHlwZUFubm90YXRpb24pKQoJCQkJCQkJCQl9KSkKCQkJCQkJfTsKCQkJCQl9CgkJCQl9KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUsCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJQTYoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0T3JTdWNjZWVkLAoJCQkJRjQoCgkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlVHlwZUFubm90YXRpb24sIHR5cGVBbm5vdGF0aW9uUmVzdWx0LCBpbXBsZW1lbnRhdGlvbk5hbWUsIGFmdGVySW1wbGVtZW50YXRpb25OYW1lKSB7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCXsKCQkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJYWZ0ZXJJbXBsZW1lbnRhdGlvbk5hbWUsCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJaW1wbGVtZW50YXRpb25OYW1lLmNvbW1lbnRzLAoJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCB0eXBlQW5ub3RhdGlvblJlc3VsdC5jb21tZW50cywgY29tbWVudHNCZWZvcmVUeXBlQW5ub3RhdGlvbikpKSwKCQkJCQkJCQlpbXBsZW1lbnRhdGlvbk5hbWU6IGltcGxlbWVudGF0aW9uTmFtZS5zeW50YXgsCgkJCQkJCQkJdHlwZUFubm90YXRpb246IHR5cGVBbm5vdGF0aW9uUmVzdWx0LnN5bnRheAoJCQkJCQkJfSk7CgkJCQkJfSksCgkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAnOicsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiR0eXBlQW5ub3RhdGlvbiwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRsYXlvdXRTdHJpY3RGb2xsb3dlZEJ5KCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVOb2RlKSwKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCSRlbG0kY29yZSRNYXliZSROb3RoaW5nKSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwYXJhbWV0ZXJQYXR0ZXJuc0VxdWFsLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKSkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldERlc3RydWN0dXJpbmdEZWNsYXJhdGlvbigpIHsKCXJldHVybiBBNSgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA0LAoJCUY0KAoJCQlmdW5jdGlvbiAocGF0dGVybiwgY29tbWVudHNBZnRlclBhdHRlcm4sIGNvbW1lbnRzQWZ0ZXJFcXVhbHMsIGV4cHJlc3Npb25SZXN1bHQpIHsKCQkJCXZhciBfdjExID0gcGF0dGVybi5zeW50YXg7CgkJCQl2YXIgc3RhcnQgPSBfdjExLmEuc3RhcnQ7CgkJCQl2YXIgX3YxMiA9IGV4cHJlc3Npb25SZXN1bHQuc3ludGF4OwoJCQkJdmFyIGVuZCA9IF92MTIuYS5lbmQ7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQlleHByZXNzaW9uUmVzdWx0LmNvbW1lbnRzLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCWNvbW1lbnRzQWZ0ZXJFcXVhbHMsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJQYXR0ZXJuLCBwYXR0ZXJuLmNvbW1lbnRzKSkpLAoJCQkJCXN5bnRheDogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJe2VuZDogZW5kLCBzdGFydDogc3RhcnR9LAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJExldERlc3RydWN0dXJpbmcsIHBhdHRlcm4uc3ludGF4LCBleHByZXNzaW9uUmVzdWx0LnN5bnRheCkpCgkJCQl9OwoJCQl9KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRwYXR0ZXJuTm90RGlyZWN0bHlDb21wb3NpbmcsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICc9JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uKCkpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxhbWJkYUV4cHJlc3Npb24oKSB7CglyZXR1cm4gQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQknXFwnLAoJCUE3KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA2V2l0aFN0YXJ0TG9jYXRpb24sCgkJCUY3KAoJCQkJZnVuY3Rpb24gKHN0YXJ0LCBjb21tZW50c0FmdGVyQmFja3NsYXNoLCBmaXJzdEFyZywgY29tbWVudHNBZnRlckZpcnN0QXJnLCBzZWNvbmRVcEFyZ3MsIGNvbW1lbnRzQWZ0ZXJBcnJvdywgZXhwcmVzc2lvblJlc3VsdCkgewoJCQkJCXZhciBfdjEwID0gZXhwcmVzc2lvblJlc3VsdC5zeW50YXg7CgkJCQkJdmFyIGV4cHJlc3Npb25SYW5nZSA9IF92MTAuYTsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQlleHByZXNzaW9uUmVzdWx0LmNvbW1lbnRzLAoJCQkJCQkJQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCWNvbW1lbnRzQWZ0ZXJBcnJvdywKCQkJCQkJCQlBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQlzZWNvbmRVcEFyZ3MuY29tbWVudHMsCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJY29tbWVudHNBZnRlckZpcnN0QXJnLAoJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBmaXJzdEFyZy5jb21tZW50cywgY29tbWVudHNBZnRlckJhY2tzbGFzaCkpKSkpLAoJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJewoJCQkJCQkJCWVuZDogZXhwcmVzc2lvblJhbmdlLmVuZCwKCQkJCQkJCQlzdGFydDoge2NvbHVtbjogc3RhcnQuY29sdW1uIC0gMSwgcm93OiBzdGFydC5yb3d9CgkJCQkJCQl9LAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRMYW1iZGFFeHByZXNzaW9uKAoJCQkJCQkJCXsKCQkJCQkJCQkJYXJnczogQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZmlyc3RBcmcuc3ludGF4LCBzZWNvbmRVcEFyZ3Muc3ludGF4KSwKCQkJCQkJCQkJZXhwcmVzc2lvbjogZXhwcmVzc2lvblJlc3VsdC5zeW50YXgKCQkJCQkJCQl9KSkKCQkJCQl9OwoJCQkJfSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcGF0dGVybk5vdERpcmVjdGx5Q29tcG9zaW5nLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyR1bnRpbCwKCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbCwgJy0+JywgX1V0aWxzX1R1cGxlMCksCgkJCQlBMygKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJCUYyKAoJCQkJCQlmdW5jdGlvbiAocGF0dGVyblJlc3VsdCwgY29tbWVudHNBZnRlcikgewoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyLCBwYXR0ZXJuUmVzdWx0LmNvbW1lbnRzKSwKCQkJCQkJCQlzeW50YXg6IHBhdHRlcm5SZXN1bHQuc3ludGF4CgkJCQkJCQl9OwoJCQkJCQl9KSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRQYXR0ZXJucyRwYXR0ZXJuTm90RGlyZWN0bHlDb21wb3NpbmcsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkZXhwcmVzc2lvbigpKSk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkaWZPclVucXVhbGlmaWVkUmVmZXJlbmNlRXhwcmVzc2lvbigpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkaWZCbG9ja0V4cHJlc3Npb24oKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHVucXVhbGlmaWVkRnVuY3Rpb25SZWZlcmVuY2VFeHByZXNzaW9uRm9sbG93ZWRCeVJlY29yZEFjY2Vzcyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkaWZCbG9ja0V4cHJlc3Npb24oKSB7CglyZXR1cm4gQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZEZvbGxvd2VkQnksCgkJJ2lmJywKCQlBOSgKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwOFdpdGhTdGFydExvY2F0aW9uLAoJCQlGOSgKCQkJCWZ1bmN0aW9uIChzdGFydCwgY29tbWVudHNBZnRlcklmLCBjb25kaXRpb24sIGNvbW1lbnRzQmVmb3JlVGhlbiwgY29tbWVudHNBZnRlclRoZW4sIGlmVHJ1ZSwgY29tbWVudHNCZWZvcmVFbHNlLCBjb21tZW50c0FmdGVyRWxzZSwgaWZGYWxzZSkgewoJCQkJCXZhciBfdjkgPSBpZkZhbHNlLnN5bnRheDsKCQkJCQl2YXIgaWZGYWxzZVJhbmdlID0gX3Y5LmE7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJaWZGYWxzZS5jb21tZW50cywKCQkJCQkJCUEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQljb21tZW50c0FmdGVyRWxzZSwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQljb21tZW50c0JlZm9yZUVsc2UsCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJaWZUcnVlLmNvbW1lbnRzLAoJCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCQkJCWNvbW1lbnRzQWZ0ZXJUaGVuLAoJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQkJCWNvbW1lbnRzQmVmb3JlVGhlbiwKCQkJCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb25kaXRpb24uY29tbWVudHMsIGNvbW1lbnRzQWZ0ZXJJZikpKSkpKSksCgkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQl7CgkJCQkJCQkJZW5kOiBpZkZhbHNlUmFuZ2UuZW5kLAoJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzdGFydC5jb2x1bW4gLSAyLCByb3c6IHN0YXJ0LnJvd30KCQkJCQkJCX0sCgkJCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJElmQmxvY2ssIGNvbmRpdGlvbi5zeW50YXgsIGlmVHJ1ZS5zeW50YXgsIGlmRmFsc2Uuc3ludGF4KSkKCQkJCQl9OwoJCQkJfSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkZXhwcmVzc2lvbigpLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LCAndGhlbicsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwgJ2Vsc2UnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uKCkpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsaXN0T3JHbHNsRXhwcmVzc2lvbigpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCSdbJywKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uQWZ0ZXJPcGVuaW5nU3F1YXJlQnJhY2tldCgpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uQWZ0ZXJPcGVuaW5nU3F1YXJlQnJhY2tldCgpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRnbHNsRXhwcmVzc2lvbkFmdGVyT3BlbmluZ1NxdWFyZUJyYWNrZXQsCgkJQTMoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJXaXRoUmFuZ2UsCgkJCUYzKAoJCQkJZnVuY3Rpb24gKHJhbmdlLCBjb21tZW50c0JlZm9yZSwgZWxlbWVudHMpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBlbGVtZW50cy5jb21tZW50cywgY29tbWVudHNCZWZvcmUpLAoJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJewoJCQkJCQkJCWVuZDogcmFuZ2UuZW5kLAoJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiByYW5nZS5zdGFydC5jb2x1bW4gLSAxLCByb3c6IHJhbmdlLnN0YXJ0LnJvd30KCQkJCQkJCX0sCgkJCQkJCQllbGVtZW50cy5zeW50YXgpCgkJCQkJfTsKCQkJCX0pLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJCQkJQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLAoJCQkJCSddJywKCQkJCQl7CgkJCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJExpc3RFeHByKF9MaXN0X05pbCkKCQkJCQl9KSwKCQkJCUEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGZvbGxvd2VkQnlTeW1ib2wsCgkJCQkJJ10nLAoJCQkJCUE0KAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzLAoJCQkJCQlGMygKCQkJCQkJCWZ1bmN0aW9uIChoZWFkLCBjb21tZW50c0FmdGVySGVhZCwgdGFpbCkgewoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQkJCXRhaWwuY29tbWVudHMsCgkJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJIZWFkLCBoZWFkLmNvbW1lbnRzKSksCgkJCQkJCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwcmVzc2lvbiRMaXN0RXhwcigKCQkJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGhlYWQuc3ludGF4LCB0YWlsLnN5bnRheCkpCgkJCQkJCQkJfTsKCQkJCQkJCX0pLAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uKCksCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyRtYW55KAoJCQkJCQkJQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkJCQkJCQknLCcsCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlQXJvdW5kQm90aFNpZGVzKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uKCkpKSkpKSkpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uKCkgewoJcmV0dXJuIEEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kZXh0ZW5kZWRTdWJFeHByZXNzaW9uT3B0aW1pc3RpY0xheW91dCwKCQkkZWxtJGNvcmUkUmVzdWx0JE9rLAoJCWZ1bmN0aW9uICgkKSB7CgkJCXJldHVybiAkLmV4dGVuc2lvblJpZ2h0OwoJCX0pOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U5Q29tcG9zZUwoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeExlZnQsIDksICc8PCcpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U4UXVlc3Rpb25NYXJrKCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhMZWZ0LCA4LCAnPD8+Jyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTdNdWwoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeExlZnQsIDcsICcqJyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTdJZGl2KCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhMZWZ0LCA3LCAnLy8nKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlN0ZkaXYoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeExlZnQsIDcsICcvJyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTZTdWIoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeExlZnQsIDYsICctJyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTZJZ25vcmUoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeExlZnQsIDYsICd8LicpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U2QWRkKCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhMZWZ0LCA2LCAnKycpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U1S2VlcCgpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4TGVmdCwgNSwgJ3w9Jyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTFBcFIoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeExlZnQsIDEsICd8PicpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0TmVxKCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhOb25Bc3NvY2lhdGl2ZSwgNCwgJy89Jyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRMdCgpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4Tm9uQXNzb2NpYXRpdmUsIDQsICc8Jyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRMZSgpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4Tm9uQXNzb2NpYXRpdmUsIDQsICc8PScpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0R3QoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeE5vbkFzc29jaWF0aXZlLCA0LCAnPicpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0R2UoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeE5vbkFzc29jaWF0aXZlLCA0LCAnPj0nKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNEVxKCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhOb25Bc3NvY2lhdGl2ZSwgNCwgJz09Jyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTlDb21wb3NlUigpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGluZml4UmlnaHQsIDksICc+PicpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U4UG93KCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhSaWdodCwgOCwgJ14nKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlN1NsYXNoKCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhSaWdodCwgNywgJzwvPicpOwp9CmZ1bmN0aW9uICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U1YXBwZW5kKCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhSaWdodCwgNSwgJysrJyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTVDb25zKCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhSaWdodCwgNSwgJzo6Jyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTNBbmQoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeFJpZ2h0LCAzLCAnJiYnKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlMk9yKCkgewoJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaW5maXhSaWdodCwgMiwgJ3x8Jyk7Cn0KZnVuY3Rpb24gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTFBcEwoKSB7CglyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRpbmZpeFJpZ2h0LCAxLCAnPHwnKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRuZWdhdGlvbkFmdGVyTWludXMoKSB7CglyZXR1cm4gQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwLAoJCWZ1bmN0aW9uIChzdWJFeHByZXNzaW9uUmVzdWx0KSB7CgkJCXZhciBfdjYgPSBzdWJFeHByZXNzaW9uUmVzdWx0LnN5bnRheDsKCQkJdmFyIHN1YkV4cHJlc3Npb25SYW5nZSA9IF92Ni5hOwoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6IHN1YkV4cHJlc3Npb25SZXN1bHQuY29tbWVudHMsCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQl7CgkJCQkJCWVuZDogc3ViRXhwcmVzc2lvblJhbmdlLmVuZCwKCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHN1YkV4cHJlc3Npb25SYW5nZS5zdGFydC5jb2x1bW4gLSAxLCByb3c6IHN1YkV4cHJlc3Npb25SYW5nZS5zdGFydC5yb3d9CgkJCQkJfSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJE5lZ2F0aW9uKHN1YkV4cHJlc3Npb25SZXN1bHQuc3ludGF4KSkKCQkJfTsKCQl9LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGxhenkoCgkJCWZ1bmN0aW9uIChfdjcpIHsKCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRzdWJFeHByZXNzaW9uKCk7CgkJCX0pKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRuZWdhdGlvbk9wZXJhdGlvbigpIHsKCXJldHVybiBBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xCYWNrdHJhY2thYmxlRm9sbG93ZWRCeSwKCQknLScsCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb2Zmc2V0U291cmNlQW5kVGhlbigKCQkJRjIoCgkJCQlmdW5jdGlvbiAob2Zmc2V0LCBzb3VyY2UpIHsKCQkJCQl2YXIgX3Y1ID0gQTMoJGVsbSRjb3JlJFN0cmluZyRzbGljZSwgb2Zmc2V0IC0gMiwgb2Zmc2V0IC0gMSwgc291cmNlKTsKCQkJCQlzd2l0Y2ggKF92NSkgewoJCQkJCQljYXNlICcgJzoKCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRuZWdhdGlvbkFmdGVyTWludXMoKTsKCQkJCQkJY2FzZSAnKCc6CgkJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbmVnYXRpb25BZnRlck1pbnVzKCk7CgkJCQkJCWNhc2UgJyknOgoJCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJG5lZ2F0aW9uQWZ0ZXJNaW51cygpOwoJCQkJCQljYXNlICd9JzoKCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRuZWdhdGlvbkFmdGVyTWludXMoKTsKCQkJCQkJY2FzZSAnJzoKCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRuZWdhdGlvbkFmdGVyTWludXMoKTsKCQkJCQkJZGVmYXVsdDoKCQkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG5lZ2F0aW9uV2hpdGVzcGFjZVByb2JsZW07CgkJCQkJfQoJCQkJfSkpKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRzdWJFeHByZXNzaW9uKCkgewoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9mZnNldFNvdXJjZUFuZFRoZW4oCgkJRjIoCgkJCWZ1bmN0aW9uIChvZmZzZXQsIHNvdXJjZSkgewoJCQkJdmFyIF92NCA9IEEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIG9mZnNldCwgb2Zmc2V0ICsgMSwgc291cmNlKTsKCQkJCXN3aXRjaCAoX3Y0KSB7CgkJCQkJY2FzZSAnXCInOgoJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRsaXRlcmFsRXhwcmVzc2lvbjsKCQkJCQljYXNlICcoJzoKCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHR1cGxlZEV4cHJlc3Npb25JZk5lY2Vzc2FyeUZvbGxvd2VkQnlSZWNvcmRBY2Nlc3MoKTsKCQkJCQljYXNlICdbJzoKCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxpc3RPckdsc2xFeHByZXNzaW9uKCk7CgkJCQkJY2FzZSAneyc6CgkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRyZWNvcmRFeHByZXNzaW9uRm9sbG93ZWRCeVJlY29yZEFjY2VzcygpOwoJCQkJCWNhc2UgJ2MnOgoJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkY2FzZU9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uKCk7CgkJCQkJY2FzZSAnXFwnOgoJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGFtYmRhRXhwcmVzc2lvbigpOwoJCQkJCWNhc2UgJ2wnOgoJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0T3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb24oKTsKCQkJCQljYXNlICdpJzoKCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGlmT3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb24oKTsKCQkJCQljYXNlICcuJzoKCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcmVjb3JkQWNjZXNzRnVuY3Rpb25FeHByZXNzaW9uOwoJCQkJCWNhc2UgJy0nOgoJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbmVnYXRpb25PcGVyYXRpb24oKTsKCQkJCQljYXNlICdcJyc6CgkJCQkJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGNoYXJMaXRlcmFsRXhwcmVzc2lvbjsKCQkJCQlkZWZhdWx0OgoJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRyZWZlcmVuY2VPck51bWJlckV4cHJlc3Npb247CgkJCQl9CgkJCX0pKTsKfQpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRzdWJFeHByZXNzaW9uTWF5YmVBcHBsaWVkT3B0aW1pc3RpY0xheW91dCgpIHsKCXJldHVybiBBNCgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzLAoJCUYzKAoJCQlmdW5jdGlvbiAobGVmdEV4cHJlc3Npb25SZXN1bHQsIGNvbW1lbnRzQmVmb3JlRXh0ZW5zaW9uLCBtYXliZUFyZ3NSZXZlcnNlKSB7CgkJCQlyZXR1cm4gewoJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQltYXliZUFyZ3NSZXZlcnNlLmNvbW1lbnRzLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQmVmb3JlRXh0ZW5zaW9uLCBsZWZ0RXhwcmVzc2lvblJlc3VsdC5jb21tZW50cykpLAoJCQkJCXN5bnRheDogZnVuY3Rpb24gKCkgewoJCQkJCQl2YXIgX3YwID0gbWF5YmVBcmdzUmV2ZXJzZS5zeW50YXg7CgkJCQkJCWlmICghX3YwLmIpIHsKCQkJCQkJCXJldHVybiBsZWZ0RXhwcmVzc2lvblJlc3VsdC5zeW50YXg7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYXJnc1JldmVyc2UgPSBfdjA7CgkJCQkJCQl2YXIgX3YxID0gYXJnc1JldmVyc2UuYTsKCQkJCQkJCXZhciBsYXN0QXJnUmFuZ2UgPSBfdjEuYTsKCQkJCQkJCXZhciBsZWZ0Tm9kZSA9IGxlZnRFeHByZXNzaW9uUmVzdWx0LnN5bnRheDsKCQkJCQkJCXZhciBsZWZ0UmFuZ2UgPSBsZWZ0Tm9kZS5hOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQl7ZW5kOiBsYXN0QXJnUmFuZ2UuZW5kLCBzdGFydDogbGVmdFJhbmdlLnN0YXJ0fSwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHByZXNzaW9uJEFwcGxpY2F0aW9uKAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJCQkJCQlsZWZ0Tm9kZSwKCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoYXJnc1JldmVyc2UpKSkpOwoJCQkJCQl9CgkJCQkJfSgpCgkJCQl9OwoJCQl9KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRsYXp5KAoJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkc3ViRXhwcmVzc2lvbigpOwoJCQl9KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCwKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJG1hbnlXaXRob3V0UmV2ZXJzZSgKCQkJQTMoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJRjIoCgkJCQkJZnVuY3Rpb24gKGFyZywgY29tbWVudHNBZnRlcikgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlciwgYXJnLmNvbW1lbnRzKSwKCQkJCQkJCXN5bnRheDogYXJnLnN5bnRheAoJCQkJCQl9OwoJCQkJCX0pLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHBvc2l0aXZlbHlJbmRlbnRlZEZvbGxvd2VkQnkoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbGF6eSgKCQkJCQkJZnVuY3Rpb24gKF92MykgewoJCQkJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHN1YkV4cHJlc3Npb24oKTsKCQkJCQkJfSkpLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQpKSk7Cn0KdHJ5IHsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGxldE9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0T3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb24oKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldE9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGxldE9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGxldEV4cHJlc3Npb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXRFeHByZXNzaW9uKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXRFeHByZXNzaW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGxldEV4cHJlc3Npb247Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbGV0RGVjbGFyYXRpb25zSW4gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsZXREZWNsYXJhdGlvbnNJbigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0RGVjbGFyYXRpb25zSW4gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbGV0RGVjbGFyYXRpb25zSW47Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kYmxvY2tFbGVtZW50ID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkYmxvY2tFbGVtZW50KCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRibG9ja0VsZW1lbnQgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kYmxvY2tFbGVtZW50OwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGNhc2VPclVucXVhbGlmaWVkUmVmZXJlbmNlRXhwcmVzc2lvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGNhc2VPclVucXVhbGlmaWVkUmVmZXJlbmNlRXhwcmVzc2lvbigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkY2FzZU9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGNhc2VPclVucXVhbGlmaWVkUmVmZXJlbmNlRXhwcmVzc2lvbjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjYXNlRXhwcmVzc2lvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGNhc2VFeHByZXNzaW9uKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRjYXNlRXhwcmVzc2lvbiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjYXNlRXhwcmVzc2lvbjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjYXNlU3RhdGVtZW50cyA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGNhc2VTdGF0ZW1lbnRzKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRjYXNlU3RhdGVtZW50cyA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjYXNlU3RhdGVtZW50czsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjYXNlU3RhdGVtZW50ID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkY2FzZVN0YXRlbWVudCgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkY2FzZVN0YXRlbWVudCA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjYXNlU3RhdGVtZW50OwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHR1cGxlZEV4cHJlc3Npb25JZk5lY2Vzc2FyeUZvbGxvd2VkQnlSZWNvcmRBY2Nlc3MgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyR0dXBsZWRFeHByZXNzaW9uSWZOZWNlc3NhcnlGb2xsb3dlZEJ5UmVjb3JkQWNjZXNzKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyR0dXBsZWRFeHByZXNzaW9uSWZOZWNlc3NhcnlGb2xsb3dlZEJ5UmVjb3JkQWNjZXNzID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHR1cGxlZEV4cHJlc3Npb25JZk5lY2Vzc2FyeUZvbGxvd2VkQnlSZWNvcmRBY2Nlc3M7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kdHVwbGVkRXhwcmVzc2lvbklubmVyQWZ0ZXJPcGVuaW5nUGFyZW5zID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkdHVwbGVkRXhwcmVzc2lvbklubmVyQWZ0ZXJPcGVuaW5nUGFyZW5zKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyR0dXBsZWRFeHByZXNzaW9uSW5uZXJBZnRlck9wZW5pbmdQYXJlbnMgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kdHVwbGVkRXhwcmVzc2lvbklubmVyQWZ0ZXJPcGVuaW5nUGFyZW5zOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHJlY29yZEV4cHJlc3Npb25Gb2xsb3dlZEJ5UmVjb3JkQWNjZXNzID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcmVjb3JkRXhwcmVzc2lvbkZvbGxvd2VkQnlSZWNvcmRBY2Nlc3MoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHJlY29yZEV4cHJlc3Npb25Gb2xsb3dlZEJ5UmVjb3JkQWNjZXNzID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHJlY29yZEV4cHJlc3Npb25Gb2xsb3dlZEJ5UmVjb3JkQWNjZXNzOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHJlY29yZENvbnRlbnRzQ3VybHlFbmQgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRyZWNvcmRDb250ZW50c0N1cmx5RW5kKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRyZWNvcmRDb250ZW50c0N1cmx5RW5kID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHJlY29yZENvbnRlbnRzQ3VybHlFbmQ7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcmVjb3JkRmllbGRzID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcmVjb3JkRmllbGRzKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRyZWNvcmRGaWVsZHMgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcmVjb3JkRmllbGRzOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHJlY29yZFNldHRlck5vZGVXaXRoTGF5b3V0ID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcmVjb3JkU2V0dGVyTm9kZVdpdGhMYXlvdXQoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHJlY29yZFNldHRlck5vZGVXaXRoTGF5b3V0ID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHJlY29yZFNldHRlck5vZGVXaXRoTGF5b3V0OwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGxldEZ1bmN0aW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0RnVuY3Rpb24oKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldEZ1bmN0aW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGxldEZ1bmN0aW9uOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGxldERlc3RydWN0dXJpbmdEZWNsYXJhdGlvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGxldERlc3RydWN0dXJpbmdEZWNsYXJhdGlvbigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGV0RGVzdHJ1Y3R1cmluZ0RlY2xhcmF0aW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGxldERlc3RydWN0dXJpbmdEZWNsYXJhdGlvbjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRsYW1iZGFFeHByZXNzaW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGFtYmRhRXhwcmVzc2lvbigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGFtYmRhRXhwcmVzc2lvbiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRsYW1iZGFFeHByZXNzaW9uOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGlmT3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRpZk9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRpZk9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGlmT3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb247Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaWZCbG9ja0V4cHJlc3Npb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRpZkJsb2NrRXhwcmVzc2lvbigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkaWZCbG9ja0V4cHJlc3Npb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kaWZCbG9ja0V4cHJlc3Npb247Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbGlzdE9yR2xzbEV4cHJlc3Npb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRsaXN0T3JHbHNsRXhwcmVzc2lvbigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbGlzdE9yR2xzbEV4cHJlc3Npb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbGlzdE9yR2xzbEV4cHJlc3Npb247Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kZXhwcmVzc2lvbkFmdGVyT3BlbmluZ1NxdWFyZUJyYWNrZXQgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRleHByZXNzaW9uQWZ0ZXJPcGVuaW5nU3F1YXJlQnJhY2tldCgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkZXhwcmVzc2lvbkFmdGVyT3BlbmluZ1NxdWFyZUJyYWNrZXQgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kZXhwcmVzc2lvbkFmdGVyT3BlbmluZ1NxdWFyZUJyYWNrZXQ7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kZXhwcmVzc2lvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24oKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJGV4cHJlc3Npb24gPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kZXhwcmVzc2lvbjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlOUNvbXBvc2VMID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTlDb21wb3NlTCgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTlDb21wb3NlTCA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlOUNvbXBvc2VMOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U4UXVlc3Rpb25NYXJrID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZThRdWVzdGlvbk1hcmsoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U4UXVlc3Rpb25NYXJrID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U4UXVlc3Rpb25NYXJrOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U3TXVsID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTdNdWwoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U3TXVsID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U3TXVsOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U3SWRpdiA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U3SWRpdigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTdJZGl2ID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U3SWRpdjsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlN0ZkaXYgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlN0ZkaXYoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U3RmRpdiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlN0ZkaXY7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTZTdWIgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNlN1YigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTZTdWIgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTZTdWI7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTZJZ25vcmUgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNklnbm9yZSgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTZJZ25vcmUgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTZJZ25vcmU7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTZBZGQgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNkFkZCgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTZBZGQgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTZBZGQ7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTVLZWVwID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTVLZWVwKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNUtlZXAgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTVLZWVwOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2UxQXBSID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTFBcFIoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2UxQXBSID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2UxQXBSOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U0TmVxID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTROZXEoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0TmVxID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U0TmVxOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U0THQgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNEx0KCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNEx0ID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U0THQ7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTRMZSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0TGUoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0TGUgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTRMZTsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNEd0ID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRHdCgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTRHdCA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlNEd0OwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U0R2UgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNEdlKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNEdlID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U0R2U7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTRFcSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0RXEoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U0RXEgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTRFcTsKCX07Cgl2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlOUNvbXBvc2VSID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTlDb21wb3NlUigpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTlDb21wb3NlUiA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRwcmVjZWRlbmNlOUNvbXBvc2VSOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U4UG93ID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZThQb3coKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2U4UG93ID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U4UG93OwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U3U2xhc2ggPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlN1NsYXNoKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlN1NsYXNoID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2U3U2xhc2g7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTVhcHBlbmQgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNWFwcGVuZCgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTVhcHBlbmQgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTVhcHBlbmQ7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTVDb25zID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTVDb25zKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlNUNvbnMgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTVDb25zOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2UzQW5kID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTNBbmQoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJHByZWNlZGVuY2UzQW5kID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2UzQW5kOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2UyT3IgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlMk9yKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlMk9yID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHByZWNlZGVuY2UyT3I7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTFBcEwgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRwcmVjZWRlbmNlMUFwTCgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkcHJlY2VkZW5jZTFBcEwgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kcHJlY2VkZW5jZTFBcEw7Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbmVnYXRpb25BZnRlck1pbnVzID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbmVnYXRpb25BZnRlck1pbnVzKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRuZWdhdGlvbkFmdGVyTWludXMgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kbmVnYXRpb25BZnRlck1pbnVzOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG5lZ2F0aW9uT3BlcmF0aW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkbmVnYXRpb25PcGVyYXRpb24oKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kY3ljbGljJG5lZ2F0aW9uT3BlcmF0aW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJG5lZ2F0aW9uT3BlcmF0aW9uOwoJfTsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHN1YkV4cHJlc3Npb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRzdWJFeHByZXNzaW9uKCk7Cgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRzdWJFeHByZXNzaW9uID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJHN1YkV4cHJlc3Npb247Cgl9OwoJdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kc3ViRXhwcmVzc2lvbk1heWJlQXBwbGllZE9wdGltaXN0aWNMYXlvdXQgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHByZXNzaW9uJGN5Y2xpYyRzdWJFeHByZXNzaW9uTWF5YmVBcHBsaWVkT3B0aW1pc3RpY0xheW91dCgpOwoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRjeWNsaWMkc3ViRXhwcmVzc2lvbk1heWJlQXBwbGllZE9wdGltaXN0aWNMYXlvdXQgPSBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kc3ViRXhwcmVzc2lvbk1heWJlQXBwbGllZE9wdGltaXN0aWNMYXlvdXQ7Cgl9Owp9IGNhdGNoICgkKSB7Cgl0aHJvdyAnU29tZSB0b3AtbGV2ZWwgZGVmaW5pdGlvbnMgZnJvbSBgRWxtLlBhcnNlci5FeHByZXNzaW9uYCBhcmUgY2F1c2luZyBpbmZpbml0ZSByZWN1cnNpb246XG5cbiAg4pSM4pSA4pSA4pSA4pSA4pSA4pSQXG4gIOKUgiAgICBsZXRPclVucXVhbGlmaWVkUmVmZXJlbmNlRXhwcmVzc2lvblxuICDilIIgICAgIOKGk1xuICDilIIgICAgbGV0RXhwcmVzc2lvblxuICDilIIgICAgIOKGk1xuICDilIIgICAgbGV0RGVjbGFyYXRpb25zSW5cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGJsb2NrRWxlbWVudFxuICDilIIgICAgIOKGk1xuICDilIIgICAgY2FzZU9yVW5xdWFsaWZpZWRSZWZlcmVuY2VFeHByZXNzaW9uXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBjYXNlRXhwcmVzc2lvblxuICDilIIgICAgIOKGk1xuICDilIIgICAgY2FzZVN0YXRlbWVudHNcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGNhc2VTdGF0ZW1lbnRcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHR1cGxlZEV4cHJlc3Npb25JZk5lY2Vzc2FyeUZvbGxvd2VkQnlSZWNvcmRBY2Nlc3NcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHR1cGxlZEV4cHJlc3Npb25Jbm5lckFmdGVyT3BlbmluZ1BhcmVuc1xuICDilIIgICAgIOKGk1xuICDilIIgICAgcmVjb3JkRXhwcmVzc2lvbkZvbGxvd2VkQnlSZWNvcmRBY2Nlc3NcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHJlY29yZENvbnRlbnRzQ3VybHlFbmRcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHJlY29yZEZpZWxkc1xuICDilIIgICAgIOKGk1xuICDilIIgICAgcmVjb3JkU2V0dGVyTm9kZVdpdGhMYXlvdXRcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGxldEZ1bmN0aW9uXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBsZXREZXN0cnVjdHVyaW5nRGVjbGFyYXRpb25cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGxhbWJkYUV4cHJlc3Npb25cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGlmT3JVbnF1YWxpZmllZFJlZmVyZW5jZUV4cHJlc3Npb25cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGlmQmxvY2tFeHByZXNzaW9uXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBsaXN0T3JHbHNsRXhwcmVzc2lvblxuICDilIIgICAgIOKGk1xuICDilIIgICAgZXhwcmVzc2lvbkFmdGVyT3BlbmluZ1NxdWFyZUJyYWNrZXRcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGV4cHJlc3Npb25cbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGV4dGVuZGVkU3ViRXhwcmVzc2lvbk9wdGltaXN0aWNMYXlvdXRcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U5Q29tcG9zZUxcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U4UXVlc3Rpb25NYXJrXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwcmVjZWRlbmNlN011bFxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTdJZGl2XG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwcmVjZWRlbmNlN0ZkaXZcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U2U3ViXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwcmVjZWRlbmNlNklnbm9yZVxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTZBZGRcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U1S2VlcFxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTFBcFJcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGluZml4TGVmdFxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTROZXFcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U0THRcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U0TGVcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U0R3RcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U0R2VcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U0RXFcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGluZml4Tm9uQXNzb2NpYXRpdmVcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIGluZml4T3BlcmF0b3JBbmRUaGVuXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwcmVjZWRlbmNlOUNvbXBvc2VSXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBwcmVjZWRlbmNlOFBvd1xuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTdTbGFzaFxuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTVhcHBlbmRcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2U1Q29uc1xuICDilIIgICAgIOKGk1xuICDilIIgICAgcHJlY2VkZW5jZTNBbmRcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2UyT3JcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIHByZWNlZGVuY2UxQXBMXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBpbmZpeFJpZ2h0XG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBuZWdhdGlvbkFmdGVyTWludXNcbiAg4pSCICAgICDihpNcbiAg4pSCICAgIG5lZ2F0aW9uT3BlcmF0aW9uXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBzdWJFeHByZXNzaW9uXG4gIOKUgiAgICAg4oaTXG4gIOKUgiAgICBzdWJFeHByZXNzaW9uTWF5YmVBcHBsaWVkT3B0aW1pc3RpY0xheW91dFxuICDilJTilIDilIDilIDilIDilIDilJhcblxuVGhlc2UgZXJyb3JzIGFyZSB2ZXJ5IHRyaWNreSwgc28gcmVhZCBodHRwczovL2VsbS1sYW5nLm9yZy8wLjE5LjEvYmFkLXJlY3Vyc2lvbiB0byBsZWFybiBob3cgdG8gZml4IGl0ISc7fQp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNiA9IEY3KAoJZnVuY3Rpb24gKGZ1bmMsIF92MCwgX3YxLCBfdjIsIF92MywgX3Y0LCBfdjUpIHsKCQl2YXIgcGFyc2VBID0gX3YwLmE7CgkJdmFyIHBhcnNlQiA9IF92MS5hOwoJCXZhciBwYXJzZUMgPSBfdjIuYTsKCQl2YXIgcGFyc2VEID0gX3YzLmE7CgkJdmFyIHBhcnNlRSA9IF92NC5hOwoJCXZhciBwYXJzZUYgPSBfdjUuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjYgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92Ni4kID09PSAnQmFkJykgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjYuYTsKCQkJCQl2YXIgeCA9IF92Ni5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3Y2LmE7CgkJCQkJdmFyIHMxID0gX3Y2LmI7CgkJCQkJdmFyIF92NyA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92Ny4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92Ny5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92Ny5hOwoJCQkJCQl2YXIgczIgPSBfdjcuYjsKCQkJCQkJdmFyIF92OCA9IHBhcnNlQyhzMik7CgkJCQkJCWlmIChfdjguJCA9PT0gJ0JhZCcpIHsKCQkJCQkJCXZhciB4ID0gX3Y4LmI7CgkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBjID0gX3Y4LmE7CgkJCQkJCQl2YXIgczMgPSBfdjguYjsKCQkJCQkJCXZhciBfdjkgPSBwYXJzZUQoczMpOwoJCQkJCQkJaWYgKF92OS4kID09PSAnQmFkJykgewoJCQkJCQkJCXZhciB4ID0gX3Y5LmI7CgkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBkID0gX3Y5LmE7CgkJCQkJCQkJdmFyIHM0ID0gX3Y5LmI7CgkJCQkJCQkJdmFyIF92MTAgPSBwYXJzZUUoczQpOwoJCQkJCQkJCWlmIChfdjEwLiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCXZhciB4ID0gX3YxMC5iOwoJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgZSA9IF92MTAuYTsKCQkJCQkJCQkJdmFyIHM1ID0gX3YxMC5iOwoJCQkJCQkJCQl2YXIgX3YxMSA9IHBhcnNlRihzNSk7CgkJCQkJCQkJCWlmIChfdjExLiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCQl2YXIgeCA9IF92MTEuYjsKCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJdmFyIGYgPSBfdjExLmE7CgkJCQkJCQkJCQl2YXIgczYgPSBfdjExLmI7CgkJCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCQkJCQlBNihmdW5jLCBhLCBiLCBjLCBkLCBlLCBmKSwKCQkJCQkJCQkJCQlzNik7CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkcGFyYW1ldGVyUGF0dGVybnNFcXVhbCA9IEEyKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyR1bnRpbCwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRlcXVhbCwKCUEzKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJRjIoCgkJCWZ1bmN0aW9uIChwYXR0ZXJuUmVzdWx0LCBjb21tZW50c0FmdGVyUGF0dGVybikgewoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyUGF0dGVybiwgcGF0dGVyblJlc3VsdC5jb21tZW50cyksCgkJCQkJc3ludGF4OiBwYXR0ZXJuUmVzdWx0LnN5bnRheAoJCQkJfTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkUGF0dGVybnMkcGF0dGVybk5vdERpcmVjdGx5Q29tcG9zaW5nLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGZ1bmN0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uID0gQTcoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA2LAoJRjYoCgkJZnVuY3Rpb24gKHN0YXJ0TmFtZSwgY29tbWVudHNBZnRlclN0YXJ0TmFtZSwgbWF5YmVTaWduYXR1cmUsIF9hcmd1bWVudHMsIGNvbW1lbnRzQWZ0ZXJFcXVhbCwgcmVzdWx0KSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCXJlc3VsdC5jb21tZW50cywKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQljb21tZW50c0FmdGVyRXF1YWwsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJX2FyZ3VtZW50cy5jb21tZW50cywKCQkJCQkJCWZ1bmN0aW9uICgpIHsKCQkJCQkJCQlpZiAobWF5YmVTaWduYXR1cmUuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQkJCXJldHVybiBjb21tZW50c0FmdGVyU3RhcnROYW1lOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciBzaWduYXR1cmUgPSBtYXliZVNpZ25hdHVyZS5hOwoJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBzaWduYXR1cmUuY29tbWVudHMsIGNvbW1lbnRzQWZ0ZXJTdGFydE5hbWUpOwoJCQkJCQkJCX0KCQkJCQkJCX0oKSkpKSwKCQkJCXN5bnRheDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJEZ1bmN0aW9uRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24oCgkJCQkJewoJCQkJCQlfYXJndW1lbnRzOiBfYXJndW1lbnRzLnN5bnRheCwKCQkJCQkJZXhwcmVzc2lvbjogcmVzdWx0LnN5bnRheCwKCQkJCQkJc2lnbmF0dXJlOiBBMigKCQkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQkJCXJldHVybiAkLnN5bnRheDsKCQkJCQkJCX0sCgkJCQkJCQltYXliZVNpZ25hdHVyZSksCgkJCQkJCXN0YXJ0TmFtZTogc3RhcnROYW1lCgkJCQkJfSkKCQkJfTsKCQl9KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVOb2RlLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJQTYoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNE9yU3VjY2VlZCwKCQlGNCgKCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlVHlwZUFubm90YXRpb24sIHR5cGVBbm5vdGF0aW9uUmVzdWx0LCBpbXBsZW1lbnRhdGlvbk5hbWUsIGFmdGVySW1wbGVtZW50YXRpb25OYW1lKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJewoJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQlhZnRlckltcGxlbWVudGF0aW9uTmFtZSwKCQkJCQkJCUEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCQlpbXBsZW1lbnRhdGlvbk5hbWUuY29tbWVudHMsCgkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCB0eXBlQW5ub3RhdGlvblJlc3VsdC5jb21tZW50cywgY29tbWVudHNCZWZvcmVUeXBlQW5ub3RhdGlvbikpKSwKCQkJCQkJc3ludGF4OiB7aW1wbGVtZW50YXRpb25OYW1lOiBpbXBsZW1lbnRhdGlvbk5hbWUuc3ludGF4LCB0eXBlQW5ub3RhdGlvbjogdHlwZUFubm90YXRpb25SZXN1bHQuc3ludGF4fQoJCQkJCX0pOwoJCQl9KSwKCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAnOicsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZUFubm90YXRpb24sCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGxheW91dFN0cmljdEZvbGxvd2VkQnkoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkkZWxtJGNvcmUkTWF5YmUkTm90aGluZyksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkcGFyYW1ldGVyUGF0dGVybnNFcXVhbCwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cHJlc3Npb24kZXhwcmVzc2lvbik7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbGF5b3V0U3RyaWN0Rm9sbG93ZWRCeVdpdGhDb21tZW50cyA9IGZ1bmN0aW9uIChuZXh0UGFyc2VyKSB7CglyZXR1cm4gQTMoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQlGMigKCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCBhZnRlcikgewoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBhZnRlci5jb21tZW50cywgY29tbWVudHNCZWZvcmUpLAoJCQkJCXN5bnRheDogYWZ0ZXIuc3ludGF4CgkJCQl9OwoJCQl9KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb25Ub3BJbmRlbnRhdGlvbkZvbGxvd2VkQnkobmV4dFBhcnNlcikpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJFBvcnREZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQb3J0RGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRwb3J0RGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24gPSBBNigKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDUsCglGNSgKCQlmdW5jdGlvbiAoY29tbWVudHNBZnRlclBvcnQsIG5hbWUsIGNvbW1lbnRzQWZ0ZXJOYW1lLCBjb21tZW50c0FmdGVyQ29sb24sIHR5cGVBbm5vdGF0aW9uUmVzdWx0KSB7CgkJCXZhciBuYW1lUmFuZ2UgPSBuYW1lLmE7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCWNvbW1lbnRzQWZ0ZXJDb2xvbiwKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQl0eXBlQW5ub3RhdGlvblJlc3VsdC5jb21tZW50cywKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyTmFtZSwgY29tbWVudHNBZnRlclBvcnQpKSksCgkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRQb3J0RGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24oCgkJCQkJewoJCQkJCQluYW1lOiBuYW1lLAoJCQkJCQlzdGFydExvY2F0aW9uOiB7Y29sdW1uOiAxLCByb3c6IG5hbWVSYW5nZS5zdGFydC5yb3d9LAoJCQkJCQl0eXBlQW5ub3RhdGlvbjogdHlwZUFubm90YXRpb25SZXN1bHQuc3ludGF4CgkJCQkJfSkKCQkJfTsKCQl9KSwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LCAncG9ydCcsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lTm9kZSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICc6JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVBbm5vdGF0aW9uKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkcmFuZ2UgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgciA9IF92MC5hOwoJcmV0dXJuIHI7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkVHlwZURlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1R5cGVEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbicsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHR5cGVHZW5lcmljTGlzdEVxdWFscyA9IEEyKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyR1bnRpbCwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRlcXVhbCwKCUEzKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJRjIoCgkJCWZ1bmN0aW9uIChuYW1lLCBjb21tZW50c0FmdGVyTmFtZSkgewoJCQkJcmV0dXJuIHtjb21tZW50czogY29tbWVudHNBZnRlck5hbWUsIHN5bnRheDogbmFtZX07CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVOb2RlLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaWZGb2xsb3dlZEJ5V2hpbGVNYXBXaXRoUmFuZ2VXaXRob3V0TGluZWJyZWFrID0gRjMoCglmdW5jdGlvbiAocmFuZ2VBbmRDb25zdW1lZFN0cmluZ1RvUmVzLCBmaXJzdElzT2theSwgYWZ0ZXJGaXJzdElzT2theSkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIGZpcnN0T2Zmc2V0ID0gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaXNTdWJDaGFyV2l0aG91dExpbmVicmVhaywgZmlyc3RJc09rYXksIHMwLm9mZnNldCwgczAuc3JjKTsKCQkJCWlmIChfVXRpbHNfZXEoZmlyc3RPZmZzZXQsIC0xKSkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCQlmYWxzZSwKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nQ2hhclNhdGlzZnlpbmdQcmVkaWNhdGUsIHMwLnJvdywgczAuY29sKSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBzMSA9IEE2KCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHNraXBXaGlsZVdpdGhvdXRMaW5lYnJlYWtIZWxwLCBhZnRlckZpcnN0SXNPa2F5LCBmaXJzdE9mZnNldCwgczAucm93LCBzMC5jb2wgKyAxLCBzMC5zcmMsIHMwLmluZGVudCk7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQlBMigKCQkJCQkJCXJhbmdlQW5kQ29uc3VtZWRTdHJpbmdUb1JlcywKCQkJCQkJCXsKCQkJCQkJCQllbmQ6IHtjb2x1bW46IHMxLmNvbCwgcm93OiBzMS5yb3d9LAoJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzMC5jb2wsIHJvdzogczAucm93fQoJCQkJCQkJfSwKCQkJCQkJCUEzKCRlbG0kY29yZSRTdHJpbmckc2xpY2UsIHMwLm9mZnNldCwgczEub2Zmc2V0LCBzMC5zcmMpKSwKCQkJCQkJczEpOwoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lTm9kZSA9IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGlmRm9sbG93ZWRCeVdoaWxlTWFwV2l0aFJhbmdlV2l0aG91dExpbmVicmVhaywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLCAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSR1bmljb2RlSXNVcHBlckZhc3QsICRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJHVuaWNvZGVJc0FscGhhTnVtT3JVbmRlcnNjb3JlRmFzdCk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkdmFsdWVDb25zdHJ1Y3Rvck9wdGltaXN0aWNMYXlvdXQgPSBBNCgKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDMsCglGMygKCQlmdW5jdGlvbiAobmFtZSwgY29tbWVudHNBZnRlck5hbWUsIGFyZ3VtZW50c1JldmVyc2UpIHsKCQkJdmFyIG5hbWVSYW5nZSA9IG5hbWUuYTsKCQkJdmFyIGZ1bGxSYW5nZSA9IGZ1bmN0aW9uICgpIHsKCQkJCXZhciBfdjAgPSBhcmd1bWVudHNSZXZlcnNlLnN5bnRheDsKCQkJCWlmIChfdjAuYikgewoJCQkJCXZhciBfdjEgPSBfdjAuYTsKCQkJCQl2YXIgbGFzdEFyZ1JhbmdlID0gX3YxLmE7CgkJCQkJcmV0dXJuIHtlbmQ6IGxhc3RBcmdSYW5nZS5lbmQsIHN0YXJ0OiBuYW1lUmFuZ2Uuc3RhcnR9OwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gbmFtZVJhbmdlOwoJCQkJfQoJCQl9KCk7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBhcmd1bWVudHNSZXZlcnNlLmNvbW1lbnRzLCBjb21tZW50c0FmdGVyTmFtZSksCgkJCQlzeW50YXg6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQlmdWxsUmFuZ2UsCgkJCQkJewoJCQkJCQlfYXJndW1lbnRzOiAkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKGFyZ3VtZW50c1JldmVyc2Uuc3ludGF4KSwKCQkJCQkJbmFtZTogbmFtZQoJCQkJCX0pCgkJCX07CgkJfSksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHlwZU5hbWVOb2RlLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQsCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyV2l0aENvbW1lbnRzJG1hbnlXaXRob3V0UmV2ZXJzZSgKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkcG9zaXRpdmVseUluZGVudGVkRm9sbG93ZWRCeSgKCQkJQTMoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQkJRjIoCgkJCQkJZnVuY3Rpb24gKHR5cGVBbm5vdGF0aW9uUmVzdWx0LCBjb21tZW50c0FmdGVyKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyLCB0eXBlQW5ub3RhdGlvblJlc3VsdC5jb21tZW50cyksCgkJCQkJCQlzeW50YXg6IHR5cGVBbm5vdGF0aW9uUmVzdWx0LnN5bnRheAoJCQkJCQl9OwoJCQkJCX0pLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVHlwZUFubm90YXRpb24kdHlwZUFubm90YXRpb25Ob0ZuRXhjbHVkaW5nVHlwZWRXaXRoQXJndW1lbnRzLAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQpKSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGN1c3RvbVR5cGVEZWZpbml0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uQWZ0ZXJUeXBlUHJlZml4ID0gQTcoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA2LAoJRjYoCgkJZnVuY3Rpb24gKG5hbWUsIGNvbW1lbnRzQWZ0ZXJOYW1lLCBwYXJhbWV0ZXJzLCBjb21tZW50c0FmdGVyRXF1YWwsIGhlYWRWYXJpYW50LCB0YWlsVmFyaWFudHNSZXZlcnNlKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCXRhaWxWYXJpYW50c1JldmVyc2UuY29tbWVudHMsCgkJCQkJQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJaGVhZFZhcmlhbnQuY29tbWVudHMsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJY29tbWVudHNBZnRlckVxdWFsLAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBwYXJhbWV0ZXJzLmNvbW1lbnRzLCBjb21tZW50c0FmdGVyTmFtZSkpKSksCgkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRUeXBlRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24oCgkJCQkJe2hlYWRWYXJpYW50OiBoZWFkVmFyaWFudC5zeW50YXgsIG5hbWU6IG5hbWUsIHBhcmFtZXRlcnM6IHBhcmFtZXRlcnMuc3ludGF4LCB0YWlsVmFyaWFudHNSZXZlcnNlOiB0YWlsVmFyaWFudHNSZXZlcnNlLnN5bnRheH0pCgkJCX07CgkJfSksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHlwZU5hbWVOb2RlLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHR5cGVHZW5lcmljTGlzdEVxdWFscywKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyR2YWx1ZUNvbnN0cnVjdG9yT3B0aW1pc3RpY0xheW91dCwKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkbWFueVdpdGhvdXRSZXZlcnNlKAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LAoJCQknfCcsCgkJCUEyKAoJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHBvc2l0aXZlbHlJbmRlbnRlZFBsdXNGb2xsb3dlZEJ5LAoJCQkJMSwKCQkJCUEzKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJCQkJRjIoCgkJCQkJCWZ1bmN0aW9uIChjb21tZW50c0JlZm9yZVBpcGUsIHZhcmlhbnRSZXN1bHQpIHsKCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgdmFyaWFudFJlc3VsdC5jb21tZW50cywgY29tbWVudHNCZWZvcmVQaXBlKSwKCQkJCQkJCQlzeW50YXg6IHZhcmlhbnRSZXN1bHQuc3ludGF4CgkJCQkJCQl9OwoJCQkJCQl9KSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHZhbHVlQ29uc3RydWN0b3JPcHRpbWlzdGljTGF5b3V0KSkpKSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkVHlwZUFsaWFzRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVHlwZUFsaWFzRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyR0eXBlQWxpYXNEZWZpbml0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uQWZ0ZXJUeXBlUHJlZml4ID0gQTcoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA2LAoJRjYoCgkJZnVuY3Rpb24gKGNvbW1lbnRzQWZ0ZXJBbGlhcywgbmFtZSwgY29tbWVudHNBZnRlck5hbWUsIHBhcmFtZXRlcnMsIGNvbW1lbnRzQWZ0ZXJFcXVhbHMsIHR5cGVBbm5vdGF0aW9uUmVzdWx0KSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCXR5cGVBbm5vdGF0aW9uUmVzdWx0LmNvbW1lbnRzLAoJCQkJCUEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCWNvbW1lbnRzQWZ0ZXJFcXVhbHMsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJcGFyYW1ldGVycy5jb21tZW50cywKCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlck5hbWUsIGNvbW1lbnRzQWZ0ZXJBbGlhcykpKSksCgkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRUeXBlQWxpYXNEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbigKCQkJCQl7bmFtZTogbmFtZSwgcGFyYW1ldGVyczogcGFyYW1ldGVycy5zeW50YXgsIHR5cGVBbm5vdGF0aW9uOiB0eXBlQW5ub3RhdGlvblJlc3VsdC5zeW50YXh9KQoJCQl9OwoJCX0pLAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZEZvbGxvd2VkQnksICdhbGlhcycsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHlwZU5hbWVOb2RlLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHR5cGVHZW5lcmljTGlzdEVxdWFscywKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVBbm5vdGF0aW9uKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyR0eXBlT3JUeXBlQWxpYXNEZWZpbml0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uID0gQTMoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJRjIoCgkJZnVuY3Rpb24gKGNvbW1lbnRzQWZ0ZXJUeXBlLCBkZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbikgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgZGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24uY29tbWVudHMsIGNvbW1lbnRzQWZ0ZXJUeXBlKSwKCQkJCXN5bnRheDogZGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24uc3ludGF4CgkJCX07CgkJfSksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwgJ3R5cGUnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkdHlwZUFsaWFzRGVmaW5pdGlvbkFmdGVyRG9jdW1lbnRhdGlvbkFmdGVyVHlwZVByZWZpeCwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGN1c3RvbVR5cGVEZWZpbml0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uQWZ0ZXJUeXBlUHJlZml4KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkZGVjbGFyYXRpb25XaXRoRG9jdW1lbnRhdGlvbiA9IEEzKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkdmFsaWRhdGUsCglmdW5jdGlvbiAocmVzdWx0KSB7CgkJdmFyIF92MTEgPSByZXN1bHQuc3ludGF4OwoJCXZhciBkZWNsID0gX3YxMS5iOwoJCWlmIChkZWNsLiQgPT09ICdGdW5jdGlvbkRlY2xhcmF0aW9uJykgewoJCQl2YXIgbGV0RnVuY3Rpb25EZWNsYXJhdGlvbiA9IGRlY2wuYTsKCQkJdmFyIF92MTMgPSBsZXRGdW5jdGlvbkRlY2xhcmF0aW9uLnNpZ25hdHVyZTsKCQkJaWYgKF92MTMuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfSBlbHNlIHsKCQkJCXZhciBfdjE0ID0gX3YxMy5hOwoJCQkJdmFyIHNpZ25hdHVyZSA9IF92MTQuYjsKCQkJCXZhciBfdjE1ID0gc2lnbmF0dXJlLm5hbWU7CgkJCQl2YXIgc2lnbmF0dXJlTmFtZSA9IF92MTUuYjsKCQkJCXZhciBfdjE2ID0gbGV0RnVuY3Rpb25EZWNsYXJhdGlvbi5kZWNsYXJhdGlvbjsKCQkJCXZhciBpbXBsZW1lbnRhdGlvbiA9IF92MTYuYjsKCQkJCXZhciBfdjE3ID0gaW1wbGVtZW50YXRpb24ubmFtZTsKCQkJCXZhciBpbXBsZW1lbnRhdGlvbk5hbWUgPSBfdjE3LmI7CgkJCQlyZXR1cm4gX1V0aWxzX2VxKGltcGxlbWVudGF0aW9uTmFtZSwgc2lnbmF0dXJlTmFtZSArICcnKTsKCQkJfQoJCX0gZWxzZSB7CgkJCXJldHVybiB0cnVlOwoJCX0KCX0sCgknRXhwZWN0ZWQgdG8gZmluZCB0aGUgc2FtZSBuYW1lIGZvciBkZWNsYXJhdGlvbiBhbmQgc2lnbmF0dXJlJywKCUEzKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCgkJRjIoCgkJCWZ1bmN0aW9uIChkb2N1bWVudGF0aW9uLCBhZnRlckRvY3VtZW50YXRpb24pIHsKCQkJCXZhciBzdGFydCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkcmFuZ2UoZG9jdW1lbnRhdGlvbikuc3RhcnQ7CgkJCQl2YXIgX3YwID0gYWZ0ZXJEb2N1bWVudGF0aW9uLnN5bnRheDsKCQkJCXN3aXRjaCAoX3YwLiQpIHsKCQkJCQljYXNlICdGdW5jdGlvbkRlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uJzoKCQkJCQkJdmFyIGZ1bmN0aW9uRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24gPSBfdjAuYTsKCQkJCQkJdmFyIF92MSA9IGZ1bmN0aW9uRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24uc2lnbmF0dXJlOwoJCQkJCQlpZiAoX3YxLiQgPT09ICdKdXN0JykgewoJCQkJCQkJdmFyIHNpZ25hdHVyZSA9IF92MS5hOwoJCQkJCQkJdmFyIF92MiA9IHNpZ25hdHVyZS5pbXBsZW1lbnRhdGlvbk5hbWU7CgkJCQkJCQl2YXIgaW1wbGVtZW50YXRpb25OYW1lUmFuZ2UgPSBfdjIuYTsKCQkJCQkJCXZhciBfdjMgPSBmdW5jdGlvbkRlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLmV4cHJlc3Npb247CgkJCQkJCQl2YXIgZXhwcmVzc2lvblJhbmdlID0gX3YzLmE7CgkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCWNvbW1lbnRzOiBhZnRlckRvY3VtZW50YXRpb24uY29tbWVudHMsCgkJCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCQl7ZW5kOiBleHByZXNzaW9uUmFuZ2UuZW5kLCBzdGFydDogc3RhcnR9LAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREZWNsYXJhdGlvbiRGdW5jdGlvbkRlY2xhcmF0aW9uKAoJCQkJCQkJCQkJewoJCQkJCQkJCQkJCWRlY2xhcmF0aW9uOiBBMigKCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCQkJCQl7ZW5kOiBleHByZXNzaW9uUmFuZ2UuZW5kLCBzdGFydDogaW1wbGVtZW50YXRpb25OYW1lUmFuZ2Uuc3RhcnR9LAoJCQkJCQkJCQkJCQl7X2FyZ3VtZW50czogZnVuY3Rpb25EZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5fYXJndW1lbnRzLCBleHByZXNzaW9uOiBmdW5jdGlvbkRlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLmV4cHJlc3Npb24sIG5hbWU6IHNpZ25hdHVyZS5pbXBsZW1lbnRhdGlvbk5hbWV9KSwKCQkJCQkJCQkJCQlkb2N1bWVudGF0aW9uOiAkZWxtJGNvcmUkTWF5YmUkSnVzdChkb2N1bWVudGF0aW9uKSwKCQkJCQkJCQkJCQlzaWduYXR1cmU6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGNvbWJpbmUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFNpZ25hdHVyZSRTaWduYXR1cmUsIGZ1bmN0aW9uRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24uc3RhcnROYW1lLCBzaWduYXR1cmUudHlwZUFubm90YXRpb24pKQoJCQkJCQkJCQkJfSkpCgkJCQkJCQl9OwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIF92NCA9IGZ1bmN0aW9uRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24uc3RhcnROYW1lOwoJCQkJCQkJdmFyIHN0YXJ0TmFtZVJhbmdlID0gX3Y0LmE7CgkJCQkJCQl2YXIgX3Y1ID0gZnVuY3Rpb25EZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5leHByZXNzaW9uOwoJCQkJCQkJdmFyIGV4cHJlc3Npb25SYW5nZSA9IF92NS5hOwoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQljb21tZW50czogYWZ0ZXJEb2N1bWVudGF0aW9uLmNvbW1lbnRzLAoJCQkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQkJe2VuZDogZXhwcmVzc2lvblJhbmdlLmVuZCwgc3RhcnQ6IHN0YXJ0fSwKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRGVjbGFyYXRpb24kRnVuY3Rpb25EZWNsYXJhdGlvbigKCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQlkZWNsYXJhdGlvbjogQTIoCgkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQkJCQkJe2VuZDogZXhwcmVzc2lvblJhbmdlLmVuZCwgc3RhcnQ6IHN0YXJ0TmFtZVJhbmdlLnN0YXJ0fSwKCQkJCQkJCQkJCQkJe19hcmd1bWVudHM6IGZ1bmN0aW9uRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24uX2FyZ3VtZW50cywgZXhwcmVzc2lvbjogZnVuY3Rpb25EZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5leHByZXNzaW9uLCBuYW1lOiBmdW5jdGlvbkRlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLnN0YXJ0TmFtZX0pLAoJCQkJCQkJCQkJCWRvY3VtZW50YXRpb246ICRlbG0kY29yZSRNYXliZSRKdXN0KGRvY3VtZW50YXRpb24pLAoJCQkJCQkJCQkJCXNpZ25hdHVyZTogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcKCQkJCQkJCQkJCX0pKQoJCQkJCQkJfTsKCQkJCQkJfQoJCQkJCWNhc2UgJ1R5cGVEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbic6CgkJCQkJCXZhciB0eXBlRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24gPSBfdjAuYTsKCQkJCQkJdmFyIGVuZCA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJCXZhciBfdjYgPSB0eXBlRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24udGFpbFZhcmlhbnRzUmV2ZXJzZTsKCQkJCQkJCWlmIChfdjYuYikgewoJCQkJCQkJCXZhciBfdjcgPSBfdjYuYTsKCQkJCQkJCQl2YXIgcmFuZ2UgPSBfdjcuYTsKCQkJCQkJCQlyZXR1cm4gcmFuZ2UuZW5kOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgX3Y4ID0gdHlwZURlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLmhlYWRWYXJpYW50OwoJCQkJCQkJCXZhciBoZWFkVmFyaWFudFJhbmdlID0gX3Y4LmE7CgkJCQkJCQkJcmV0dXJuIGhlYWRWYXJpYW50UmFuZ2UuZW5kOwoJCQkJCQkJfQoJCQkJCQl9KCk7CgkJCQkJCXJldHVybiB7CgkJCQkJCQljb21tZW50czogYWZ0ZXJEb2N1bWVudGF0aW9uLmNvbW1lbnRzLAoJCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJe2VuZDogZW5kLCBzdGFydDogc3RhcnR9LAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJEN1c3RvbVR5cGVEZWNsYXJhdGlvbigKCQkJCQkJCQkJewoJCQkJCQkJCQkJY29uc3RydWN0b3JzOiBBMigKCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQkJCXR5cGVEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5oZWFkVmFyaWFudCwKCQkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKHR5cGVEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi50YWlsVmFyaWFudHNSZXZlcnNlKSksCgkJCQkJCQkJCQlkb2N1bWVudGF0aW9uOiAkZWxtJGNvcmUkTWF5YmUkSnVzdChkb2N1bWVudGF0aW9uKSwKCQkJCQkJCQkJCWdlbmVyaWNzOiB0eXBlRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24ucGFyYW1ldGVycywKCQkJCQkJCQkJCW5hbWU6IHR5cGVEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5uYW1lCgkJCQkJCQkJCX0pKQoJCQkJCQl9OwoJCQkJCWNhc2UgJ1R5cGVBbGlhc0RlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uJzoKCQkJCQkJdmFyIHR5cGVBbGlhc0RlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uID0gX3YwLmE7CgkJCQkJCXZhciBfdjkgPSB0eXBlQWxpYXNEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi50eXBlQW5ub3RhdGlvbjsKCQkJCQkJdmFyIHR5cGVBbm5vdGF0aW9uUmFuZ2UgPSBfdjkuYTsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWNvbW1lbnRzOiBhZnRlckRvY3VtZW50YXRpb24uY29tbWVudHMsCgkJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQl7ZW5kOiB0eXBlQW5ub3RhdGlvblJhbmdlLmVuZCwgc3RhcnQ6IHN0YXJ0fSwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREZWNsYXJhdGlvbiRBbGlhc0RlY2xhcmF0aW9uKAoJCQkJCQkJCQl7CgkJCQkJCQkJCQlkb2N1bWVudGF0aW9uOiAkZWxtJGNvcmUkTWF5YmUkSnVzdChkb2N1bWVudGF0aW9uKSwKCQkJCQkJCQkJCWdlbmVyaWNzOiB0eXBlQWxpYXNEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5wYXJhbWV0ZXJzLAoJCQkJCQkJCQkJbmFtZTogdHlwZUFsaWFzRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24ubmFtZSwKCQkJCQkJCQkJCXR5cGVBbm5vdGF0aW9uOiB0eXBlQWxpYXNEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi50eXBlQW5ub3RhdGlvbgoJCQkJCQkJCQl9KSkKCQkJCQkJfTsKCQkJCQlkZWZhdWx0OgoJCQkJCQl2YXIgcG9ydERlY2xhcmF0aW9uQWZ0ZXJOYW1lID0gX3YwLmE7CgkJCQkJCXZhciBfdjEwID0gcG9ydERlY2xhcmF0aW9uQWZ0ZXJOYW1lLnR5cGVBbm5vdGF0aW9uOwoJCQkJCQl2YXIgdHlwZUFubm90YXRpb25SYW5nZSA9IF92MTAuYTsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRmaWxsZWRQcmVwZW5kVG8sCgkJCQkJCQkJYWZ0ZXJEb2N1bWVudGF0aW9uLmNvbW1lbnRzLAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJG9uZShkb2N1bWVudGF0aW9uKSksCgkJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQl7ZW5kOiB0eXBlQW5ub3RhdGlvblJhbmdlLmVuZCwgc3RhcnQ6IHBvcnREZWNsYXJhdGlvbkFmdGVyTmFtZS5zdGFydExvY2F0aW9ufSwKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREZWNsYXJhdGlvbiRQb3J0RGVjbGFyYXRpb24oCgkJCQkJCQkJCXtuYW1lOiBwb3J0RGVjbGFyYXRpb25BZnRlck5hbWUubmFtZSwgdHlwZUFubm90YXRpb246IHBvcnREZWNsYXJhdGlvbkFmdGVyTmFtZS50eXBlQW5ub3RhdGlvbn0pKQoJCQkJCQl9OwoJCQkJfQoJCQl9KSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRDb21tZW50cyRkZWNsYXJhdGlvbkRvY3VtZW50YXRpb24sCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGxheW91dFN0cmljdEZvbGxvd2VkQnlXaXRoQ29tbWVudHMoCgkJCUEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGZ1bmN0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkdHlwZU9yVHlwZUFsaWFzRGVmaW5pdGlvbkFmdGVyRG9jdW1lbnRhdGlvbiwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHBvcnREZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbikpKSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkZnVuY3Rpb25OYW1lTm90SW5maXhOb2RlID0gQTQoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZVZhbGlkYXRlTWFwV2l0aFJhbmdlV2l0aG91dExpbmVicmVhaywKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCSRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJHVuaWNvZGVJc0xvd2VyRmFzdCwKCSRzdGlsNG0kZWxtX3N5bnRheCRDaGFyJEV4dHJhJHVuaWNvZGVJc0FscGhhTnVtT3JVbmRlcnNjb3JlRmFzdCwKCWZ1bmN0aW9uIChuYW1lKSB7CgkJcmV0dXJuIChuYW1lICE9PSAnaW5maXgnKSAmJiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkaXNOb3RSZXNlcnZlZChuYW1lKTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGZ1bmN0aW9uRGVjbGFyYXRpb25XaXRob3V0RG9jdW1lbnRhdGlvbiA9IEEzKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkdmFsaWRhdGUsCglmdW5jdGlvbiAocmVzdWx0KSB7CgkJdmFyIF92NSA9IHJlc3VsdC5zeW50YXg7CgkJdmFyIGRlY2wgPSBfdjUuYjsKCQlpZiAoZGVjbC4kID09PSAnRnVuY3Rpb25EZWNsYXJhdGlvbicpIHsKCQkJdmFyIGxldEZ1bmN0aW9uRGVjbGFyYXRpb24gPSBkZWNsLmE7CgkJCXZhciBfdjcgPSBsZXRGdW5jdGlvbkRlY2xhcmF0aW9uLnNpZ25hdHVyZTsKCQkJaWYgKF92Ny4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiB0cnVlOwoJCQl9IGVsc2UgewoJCQkJdmFyIF92OCA9IF92Ny5hOwoJCQkJdmFyIHNpZ25hdHVyZSA9IF92OC5iOwoJCQkJdmFyIF92OSA9IHNpZ25hdHVyZS5uYW1lOwoJCQkJdmFyIHNpZ25hdHVyZU5hbWUgPSBfdjkuYjsKCQkJCXZhciBfdjEwID0gbGV0RnVuY3Rpb25EZWNsYXJhdGlvbi5kZWNsYXJhdGlvbjsKCQkJCXZhciBpbXBsZW1lbnRhdGlvbiA9IF92MTAuYjsKCQkJCXZhciBfdjExID0gaW1wbGVtZW50YXRpb24ubmFtZTsKCQkJCXZhciBpbXBsZW1lbnRhdGlvbk5hbWUgPSBfdjExLmI7CgkJCQlyZXR1cm4gX1V0aWxzX2VxKGltcGxlbWVudGF0aW9uTmFtZSwgc2lnbmF0dXJlTmFtZSArICcnKTsKCQkJfQoJCX0gZWxzZSB7CgkJCXJldHVybiB0cnVlOwoJCX0KCX0sCgknRXhwZWN0ZWQgdG8gZmluZCB0aGUgc2FtZSBuYW1lIGZvciBkZWNsYXJhdGlvbiBhbmQgc2lnbmF0dXJlJywKCUE3KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDZXaXRoU3RhcnRMb2NhdGlvbiwKCQlGNygKCQkJZnVuY3Rpb24gKHN0YXJ0TmFtZVN0YXJ0LCBzdGFydE5hbWVOb2RlLCBjb21tZW50c0FmdGVyU3RhcnROYW1lLCBtYXliZVNpZ25hdHVyZSwgX2FyZ3VtZW50cywgY29tbWVudHNBZnRlckVxdWFsLCByZXN1bHQpIHsKCQkJCXZhciBhbGxDb21tZW50cyA9IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQlyZXN1bHQuY29tbWVudHMsCgkJCQkJQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJY29tbWVudHNBZnRlckVxdWFsLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCV9hcmd1bWVudHMuY29tbWVudHMsCgkJCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJCQkJaWYgKG1heWJlU2lnbmF0dXJlLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJCQlyZXR1cm4gY29tbWVudHNBZnRlclN0YXJ0TmFtZTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgc2lnbmF0dXJlID0gbWF5YmVTaWduYXR1cmUuYTsKCQkJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgc2lnbmF0dXJlLmNvbW1lbnRzLCBjb21tZW50c0FmdGVyU3RhcnROYW1lKTsKCQkJCQkJCQl9CgkJCQkJCQl9KCkpKSk7CgkJCQlpZiAobWF5YmVTaWduYXR1cmUuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJdmFyIF92MSA9IHJlc3VsdC5zeW50YXg7CgkJCQkJdmFyIGV4cHJlc3Npb25SYW5nZSA9IF92MS5hOwoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiBhbGxDb21tZW50cywKCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXtlbmQ6IGV4cHJlc3Npb25SYW5nZS5lbmQsIHN0YXJ0OiBzdGFydE5hbWVTdGFydH0sCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREZWNsYXJhdGlvbiRGdW5jdGlvbkRlY2xhcmF0aW9uKAoJCQkJCQkJCXsKCQkJCQkJCQkJZGVjbGFyYXRpb246IEEyKAoJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJCQkJe2VuZDogZXhwcmVzc2lvblJhbmdlLmVuZCwgc3RhcnQ6IHN0YXJ0TmFtZVN0YXJ0fSwKCQkJCQkJCQkJCXtfYXJndW1lbnRzOiBfYXJndW1lbnRzLnN5bnRheCwgZXhwcmVzc2lvbjogcmVzdWx0LnN5bnRheCwgbmFtZTogc3RhcnROYW1lTm9kZX0pLAoJCQkJCQkJCQlkb2N1bWVudGF0aW9uOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywKCQkJCQkJCQkJc2lnbmF0dXJlOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZwoJCQkJCQkJCX0pKQoJCQkJCX07CgkJCQl9IGVsc2UgewoJCQkJCXZhciBzaWduYXR1cmUgPSBtYXliZVNpZ25hdHVyZS5hOwoJCQkJCXZhciBfdjIgPSBzaWduYXR1cmUuaW1wbGVtZW50YXRpb25OYW1lOwoJCQkJCXZhciBpbXBsZW1lbnRhdGlvbk5hbWVSYW5nZSA9IF92Mi5hOwoJCQkJCXZhciBfdjMgPSByZXN1bHQuc3ludGF4OwoJCQkJCXZhciBleHByZXNzaW9uUmFuZ2UgPSBfdjMuYTsKCQkJCQlyZXR1cm4gewoJCQkJCQljb21tZW50czogYWxsQ29tbWVudHMsCgkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQl7ZW5kOiBleHByZXNzaW9uUmFuZ2UuZW5kLCBzdGFydDogc3RhcnROYW1lU3RhcnR9LAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRGVjbGFyYXRpb24kRnVuY3Rpb25EZWNsYXJhdGlvbigKCQkJCQkJCQl7CgkJCQkJCQkJCWRlY2xhcmF0aW9uOiBBMigKCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCQkJCXtlbmQ6IGV4cHJlc3Npb25SYW5nZS5lbmQsIHN0YXJ0OiBpbXBsZW1lbnRhdGlvbk5hbWVSYW5nZS5zdGFydH0sCgkJCQkJCQkJCQl7X2FyZ3VtZW50czogX2FyZ3VtZW50cy5zeW50YXgsIGV4cHJlc3Npb246IHJlc3VsdC5zeW50YXgsIG5hbWU6IHNpZ25hdHVyZS5pbXBsZW1lbnRhdGlvbk5hbWV9KSwKCQkJCQkJCQkJZG9jdW1lbnRhdGlvbjogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsCgkJCQkJCQkJCXNpZ25hdHVyZTogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCQlBMygkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJGNvbWJpbmUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFNpZ25hdHVyZSRTaWduYXR1cmUsIHN0YXJ0TmFtZU5vZGUsIHNpZ25hdHVyZS50eXBlQW5ub3RhdGlvbikpCgkJCQkJCQkJfSkpCgkJCQkJfTsKCQkJCX0KCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vdEluZml4Tm9kZSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJQTYoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDRPclN1Y2NlZWQsCgkJCUY0KAoJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlVHlwZUFubm90YXRpb24sIHR5cGVBbm5vdGF0aW9uUmVzdWx0LCBpbXBsZW1lbnRhdGlvbk5hbWUsIGFmdGVySW1wbGVtZW50YXRpb25OYW1lKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQl7CgkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCWFmdGVySW1wbGVtZW50YXRpb25OYW1lLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCWltcGxlbWVudGF0aW9uTmFtZS5jb21tZW50cywKCQkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCB0eXBlQW5ub3RhdGlvblJlc3VsdC5jb21tZW50cywgY29tbWVudHNCZWZvcmVUeXBlQW5ub3RhdGlvbikpKSwKCQkJCQkJCWltcGxlbWVudGF0aW9uTmFtZTogaW1wbGVtZW50YXRpb25OYW1lLnN5bnRheCwKCQkJCQkJCXR5cGVBbm5vdGF0aW9uOiB0eXBlQW5ub3RhdGlvblJlc3VsdC5zeW50YXgKCQkJCQkJfSk7CgkJCQl9KSwKCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJzonLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiR0eXBlQW5ub3RhdGlvbiwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGxheW91dFN0cmljdEZvbGxvd2VkQnkoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUpLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCSRlbG0kY29yZSRNYXliZSROb3RoaW5nKSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkcGFyYW1ldGVyUGF0dGVybnNFcXVhbCwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwcmVzc2lvbiRleHByZXNzaW9uKSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREZWNsYXJhdGlvbiRJbmZpeERlY2xhcmF0aW9uID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0luZml4RGVjbGFyYXRpb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRpbmZpeERpcmVjdGlvbiA9IEEzKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YzLAoJQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwV2l0aFJhbmdlLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkLCAncmlnaHQnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRJbmZpeCRSaWdodCkpLAoJQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwV2l0aFJhbmdlLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkLCAnbGVmdCcsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEluZml4JExlZnQpKSwKCUEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcFdpdGhSYW5nZSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZCwgJ25vbicsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEluZml4JE5vbikpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGVycm9yQXNPZmZzZXRBbmRJbnQgPSB7X2ludDogMCwgb2Zmc2V0OiAtMX07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRjb252ZXJ0SW50ZWdlckRlY2ltYWwgPSBGMigKCWZ1bmN0aW9uIChvZmZzZXQsIHNyYykgewoJCXZhciBfdjAgPSBBMygkZWxtJGNvcmUkU3RyaW5nJHNsaWNlLCBvZmZzZXQsIG9mZnNldCArIDEsIHNyYyk7CgkJc3dpdGNoIChfdjApIHsKCQkJY2FzZSAnMCc6CgkJCQlyZXR1cm4ge19pbnQ6IDAsIG9mZnNldDogb2Zmc2V0ICsgMX07CgkJCWNhc2UgJzEnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDEsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzInOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDIsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzMnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDMsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzQnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDQsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzUnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDUsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzYnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDYsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzcnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDcsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzgnOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDgsIG9mZnNldCArIDEsIHNyYyk7CgkJCWNhc2UgJzknOgoJCQkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnQwT3JNb3JlMFRvOXMsIDksIG9mZnNldCArIDEsIHNyYyk7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZXJyb3JBc09mZnNldEFuZEludDsKCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGludGVnZXJEZWNpbWFsTWFwV2l0aFJhbmdlID0gZnVuY3Rpb24gKHJhbmdlQW5kSW50VG9SZXMpIHsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJZnVuY3Rpb24gKHMwKSB7CgkJCXZhciBzMSA9IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbnZlcnRJbnRlZ2VyRGVjaW1hbCwgczAub2Zmc2V0LCBzMC5zcmMpOwoJCQlpZiAoX1V0aWxzX2VxKHMxLm9mZnNldCwgLTEpKSB7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLAoJCQkJCWZhbHNlLAoJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEV4cGVjdGluZ051bWJlciwgczAucm93LCBzMC5jb2wpKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBuZXdDb2x1bW4gPSBzMC5jb2wgKyAoczEub2Zmc2V0IC0gczAub2Zmc2V0KTsKCQkJCXJldHVybiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCUEyKAoJCQkJCQlyYW5nZUFuZEludFRvUmVzLAoJCQkJCQl7CgkJCQkJCQllbmQ6IHtjb2x1bW46IG5ld0NvbHVtbiwgcm93OiBzMC5yb3d9LAoJCQkJCQkJc3RhcnQ6IHtjb2x1bW46IHMwLmNvbCwgcm93OiBzMC5yb3d9CgkJCQkJCX0sCgkJCQkJCXMxLl9pbnQpLAoJCQkJCXtjb2w6IG5ld0NvbHVtbiwgaW5kZW50OiBzMC5pbmRlbnQsIG9mZnNldDogczEub2Zmc2V0LCByb3c6IHMwLnJvdywgc3JjOiBzMC5zcmN9KTsKCQkJfQoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwOVdpdGhSYW5nZSA9IGZ1bmN0aW9uIChmdW5jKSB7CglyZXR1cm4gZnVuY3Rpb24gKF92MCkgewoJCXJldHVybiBmdW5jdGlvbiAoX3YxKSB7CgkJCXJldHVybiBmdW5jdGlvbiAoX3YyKSB7CgkJCQlyZXR1cm4gZnVuY3Rpb24gKF92MykgewoJCQkJCXJldHVybiBmdW5jdGlvbiAoX3Y0KSB7CgkJCQkJCXJldHVybiBmdW5jdGlvbiAoX3Y1KSB7CgkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKF92NikgewoJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoX3Y3KSB7CgkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoX3Y4KSB7CgkJCQkJCQkJCQl2YXIgcGFyc2VBID0gX3YwLmE7CgkJCQkJCQkJCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJCQkJCQkJCQl2YXIgcGFyc2VDID0gX3YyLmE7CgkJCQkJCQkJCQl2YXIgcGFyc2VEID0gX3YzLmE7CgkJCQkJCQkJCQl2YXIgcGFyc2VFID0gX3Y0LmE7CgkJCQkJCQkJCQl2YXIgcGFyc2VGID0gX3Y1LmE7CgkJCQkJCQkJCQl2YXIgcGFyc2VHID0gX3Y2LmE7CgkJCQkJCQkJCQl2YXIgcGFyc2VIID0gX3Y3LmE7CgkJCQkJCQkJCQl2YXIgcGFyc2VJID0gX3Y4LmE7CgkJCQkJCQkJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQkJCQkJCQkJCWZ1bmN0aW9uIChzMCkgewoJCQkJCQkJCQkJCQl2YXIgX3Y5ID0gcGFyc2VBKHMwKTsKCQkJCQkJCQkJCQkJaWYgKF92OS4kID09PSAnQmFkJykgewoJCQkJCQkJCQkJCQkJdmFyIGNvbW1pdHRlZCA9IF92OS5hOwoJCQkJCQkJCQkJCQkJdmFyIHggPSBfdjkuYjsKCQkJCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQl2YXIgYSA9IF92OS5hOwoJCQkJCQkJCQkJCQkJdmFyIHMxID0gX3Y5LmI7CgkJCQkJCQkJCQkJCQl2YXIgX3YxMCA9IHBhcnNlQihzMSk7CgkJCQkJCQkJCQkJCQlpZiAoX3YxMC4kID09PSAnQmFkJykgewoJCQkJCQkJCQkJCQkJCXZhciB4ID0gX3YxMC5iOwoJCQkJCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCQl2YXIgYiA9IF92MTAuYTsKCQkJCQkJCQkJCQkJCQl2YXIgczIgPSBfdjEwLmI7CgkJCQkJCQkJCQkJCQkJdmFyIF92MTEgPSBwYXJzZUMoczIpOwoJCQkJCQkJCQkJCQkJCWlmIChfdjExLiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCQkJCQkJCXZhciB4ID0gX3YxMS5iOwoJCQkJCQkJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQl2YXIgYyA9IF92MTEuYTsKCQkJCQkJCQkJCQkJCQkJdmFyIHMzID0gX3YxMS5iOwoJCQkJCQkJCQkJCQkJCQl2YXIgX3YxMiA9IHBhcnNlRChzMyk7CgkJCQkJCQkJCQkJCQkJCWlmIChfdjEyLiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCQkJCQkJCQl2YXIgeCA9IF92MTIuYjsKCQkJCQkJCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQkJdmFyIGQgPSBfdjEyLmE7CgkJCQkJCQkJCQkJCQkJCQl2YXIgczQgPSBfdjEyLmI7CgkJCQkJCQkJCQkJCQkJCQl2YXIgX3YxMyA9IHBhcnNlRShzNCk7CgkJCQkJCQkJCQkJCQkJCQlpZiAoX3YxMy4kID09PSAnQmFkJykgewoJCQkJCQkJCQkJCQkJCQkJCXZhciB4ID0gX3YxMy5iOwoJCQkJCQkJCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgZSA9IF92MTMuYTsKCQkJCQkJCQkJCQkJCQkJCQl2YXIgczUgPSBfdjEzLmI7CgkJCQkJCQkJCQkJCQkJCQkJdmFyIF92MTQgPSBwYXJzZUYoczUpOwoJCQkJCQkJCQkJCQkJCQkJCWlmIChfdjE0LiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCQkJCQkJCQkJCXZhciB4ID0gX3YxNC5iOwoJCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQkJCQl2YXIgZiA9IF92MTQuYTsKCQkJCQkJCQkJCQkJCQkJCQkJdmFyIHM2ID0gX3YxNC5iOwoJCQkJCQkJCQkJCQkJCQkJCQl2YXIgX3YxNSA9IHBhcnNlRyhzNik7CgkJCQkJCQkJCQkJCQkJCQkJCWlmIChfdjE1LiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgeCA9IF92MTUuYjsKCQkJCQkJCQkJCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQkJCQkJdmFyIGcgPSBfdjE1LmE7CgkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgczcgPSBfdjE1LmI7CgkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgX3YxNiA9IHBhcnNlSChzNyk7CgkJCQkJCQkJCQkJCQkJCQkJCQlpZiAoX3YxNi4kID09PSAnQmFkJykgewoJCQkJCQkJCQkJCQkJCQkJCQkJCXZhciB4ID0gX3YxNi5iOwoJCQkJCQkJCQkJCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgaCA9IF92MTYuYTsKCQkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgczggPSBfdjE2LmI7CgkJCQkJCQkJCQkJCQkJCQkJCQkJdmFyIF92MTcgPSBwYXJzZUkoczgpOwoJCQkJCQkJCQkJCQkJCQkJCQkJCWlmIChfdjE3LiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCQkJCQkJCQkJCQkJCXZhciB4ID0gX3YxNy5iOwoJCQkJCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQkJCQkJCQl2YXIgaSA9IF92MTcuYTsKCQkJCQkJCQkJCQkJCQkJCQkJCQkJdmFyIHM5ID0gX3YxNy5iOwoJCQkJCQkJCQkJCQkJCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJZnVuYygKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCWVuZDoge2NvbHVtbjogczkuY29sLCByb3c6IHM5LnJvd30sCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCXN0YXJ0OiB7Y29sdW1uOiBzMC5jb2wsIHJvdzogczAucm93fQoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCX0pKGEpKGIpKGMpKGQpKGUpKGYpKGcpKGgpKGkpLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJczkpOwoJCQkJCQkJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQl9OwoJCQkJCQkJCX07CgkJCQkJCQl9OwoJCQkJCQl9OwoJCQkJCX07CgkJCQl9OwoJCQl9OwoJCX07Cgl9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGluZml4RGVjbGFyYXRpb24gPSAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA5V2l0aFJhbmdlKAoJZnVuY3Rpb24gKHJhbmdlKSB7CgkJcmV0dXJuIGZ1bmN0aW9uIChjb21tZW50c0FmdGVySW5maXgpIHsKCQkJcmV0dXJuIGZ1bmN0aW9uIChkaXJlY3Rpb24pIHsKCQkJCXJldHVybiBmdW5jdGlvbiAoY29tbWVudHNBZnRlckRpcmVjdGlvbikgewoJCQkJCXJldHVybiBmdW5jdGlvbiAocHJlY2VkZW5jZSkgewoJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKGNvbW1lbnRzQWZ0ZXJQcmVjZWRlbmNlKSB7CgkJCQkJCQlyZXR1cm4gZnVuY3Rpb24gKG9wZXJhdG9yKSB7CgkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChjb21tZW50c0FmdGVyT3BlcmF0b3IpIHsKCQkJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uIChjb21tZW50c0FmdGVyRXF1YWwpIHsKCQkJCQkJCQkJCXJldHVybiBmdW5jdGlvbiAoZm4pIHsKCQkJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJCQljb21tZW50czogQTIoCgkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQkJCQljb21tZW50c0FmdGVyRXF1YWwsCgkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQkJCQkJY29tbWVudHNBZnRlck9wZXJhdG9yLAoJCQkJCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJCQkJCQkJCWNvbW1lbnRzQWZ0ZXJQcmVjZWRlbmNlLAoJCQkJCQkJCQkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJEaXJlY3Rpb24sIGNvbW1lbnRzQWZ0ZXJJbmZpeCkpKSksCgkJCQkJCQkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQkJCQkJCQlyYW5nZSwKCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJEluZml4RGVjbGFyYXRpb24oCgkJCQkJCQkJCQkJCQkJe2RpcmVjdGlvbjogZGlyZWN0aW9uLCBfZnVuY3Rpb246IGZuLCBvcGVyYXRvcjogb3BlcmF0b3IsIHByZWNlZGVuY2U6IHByZWNlZGVuY2V9KSkKCQkJCQkJCQkJCQl9OwoJCQkJCQkJCQkJfTsKCQkJCQkJCQkJfTsKCQkJCQkJCQl9OwoJCQkJCQkJfTsKCQkJCQkJfTsKCQkJCQl9OwoJCQkJfTsKCQkJfTsKCQl9OwoJfSkoCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwgJ2luZml4JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSkoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJGluZml4RGlyZWN0aW9uKSgkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaW50ZWdlckRlY2ltYWxNYXBXaXRoUmFuZ2UoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlKSkoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSgKCUEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJJygnLAoJCUE0KAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCR3aGlsZVdpdGhvdXRMaW5lYnJlYWtBbmQyUGFydFV0ZjE2VmFsaWRhdGVNYXBXaXRoUmFuZ2VCYWNrdHJhY2thYmxlRm9sbG93ZWRCeVN5bWJvbCwKCQkJRjIoCgkJCQlmdW5jdGlvbiAob3BlcmF0b3JSYW5nZSwgb3BlcmF0b3IpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJewoJCQkJCQkJZW5kOiB7Y29sdW1uOiBvcGVyYXRvclJhbmdlLmVuZC5jb2x1bW4gKyAxLCByb3c6IG9wZXJhdG9yUmFuZ2UuZW5kLnJvd30sCgkJCQkJCQlzdGFydDoge2NvbHVtbjogb3BlcmF0b3JSYW5nZS5zdGFydC5jb2x1bW4gLSAxLCByb3c6IG9wZXJhdG9yUmFuZ2Uuc3RhcnQucm93fQoJCQkJCQl9LAoJCQkJCQlvcGVyYXRvcik7CgkJCQl9KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGlzT3BlcmF0b3JTeW1ib2xDaGFyLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkaXNBbGxvd2VkT3BlcmF0b3JUb2tlbiwKCQkJJyknKSkpKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCkoCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAnPScsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCkpKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVOb2RlKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mNSA9IEY1KAoJZnVuY3Rpb24gKF92MCwgX3YxLCBfdjIsIF92MywgX3Y0KSB7CgkJdmFyIGF0dGVtcHRGaXJzdCA9IF92MC5hOwoJCXZhciBhdHRlbXB0U2Vjb25kID0gX3YxLmE7CgkJdmFyIGF0dGVtcHRUaGlyZCA9IF92Mi5hOwoJCXZhciBhdHRlbXB0Rm91cnRoID0gX3YzLmE7CgkJdmFyIGF0dGVtcHRGaWZ0aCA9IF92NC5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzKSB7CgkJCQl2YXIgX3Y1ID0gYXR0ZW1wdEZpcnN0KHMpOwoJCQkJaWYgKF92NS4kID09PSAnR29vZCcpIHsKCQkJCQl2YXIgZmlyc3RHb29kID0gX3Y1OwoJCQkJCXJldHVybiBmaXJzdEdvb2Q7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBmaXJzdEJhZCA9IF92NTsKCQkJCQl2YXIgZmlyc3RDb21taXR0ZWQgPSBmaXJzdEJhZC5hOwoJCQkJCXZhciBmaXJzdFggPSBmaXJzdEJhZC5iOwoJCQkJCWlmIChmaXJzdENvbW1pdHRlZCkgewoJCQkJCQlyZXR1cm4gZmlyc3RCYWQ7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIF92NiA9IGF0dGVtcHRTZWNvbmQocyk7CgkJCQkJCWlmIChfdjYuJCA9PT0gJ0dvb2QnKSB7CgkJCQkJCQl2YXIgc2Vjb25kR29vZCA9IF92NjsKCQkJCQkJCXJldHVybiBzZWNvbmRHb29kOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIHNlY29uZEJhZCA9IF92NjsKCQkJCQkJCXZhciBzZWNvbmRDb21taXR0ZWQgPSBzZWNvbmRCYWQuYTsKCQkJCQkJCXZhciBzZWNvbmRYID0gc2Vjb25kQmFkLmI7CgkJCQkJCQlpZiAoc2Vjb25kQ29tbWl0dGVkKSB7CgkJCQkJCQkJcmV0dXJuIHNlY29uZEJhZDsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdmFyIF92NyA9IGF0dGVtcHRUaGlyZChzKTsKCQkJCQkJCQlpZiAoX3Y3LiQgPT09ICdHb29kJykgewoJCQkJCQkJCQl2YXIgdGhpcmRHb29kID0gX3Y3OwoJCQkJCQkJCQlyZXR1cm4gdGhpcmRHb29kOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXZhciB0aGlyZEJhZCA9IF92NzsKCQkJCQkJCQkJdmFyIHRoaXJkQ29tbWl0dGVkID0gdGhpcmRCYWQuYTsKCQkJCQkJCQkJdmFyIHRoaXJkWCA9IHRoaXJkQmFkLmI7CgkJCQkJCQkJCWlmICh0aGlyZENvbW1pdHRlZCkgewoJCQkJCQkJCQkJcmV0dXJuIHRoaXJkQmFkOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJdmFyIF92OCA9IGF0dGVtcHRGb3VydGgocyk7CgkJCQkJCQkJCQlpZiAoX3Y4LiQgPT09ICdHb29kJykgewoJCQkJCQkJCQkJCXZhciBmb3VydGhHb29kID0gX3Y4OwoJCQkJCQkJCQkJCXJldHVybiBmb3VydGhHb29kOwoJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQl2YXIgZm91cnRoQmFkID0gX3Y4OwoJCQkJCQkJCQkJCXZhciBmb3VydGhDb21taXR0ZWQgPSBmb3VydGhCYWQuYTsKCQkJCQkJCQkJCQl2YXIgZm91cnRoWCA9IGZvdXJ0aEJhZC5iOwoJCQkJCQkJCQkJCWlmIChmb3VydGhDb21taXR0ZWQpIHsKCQkJCQkJCQkJCQkJcmV0dXJuIGZvdXJ0aEJhZDsKCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQl2YXIgX3Y5ID0gYXR0ZW1wdEZpZnRoKHMpOwoJCQkJCQkJCQkJCQlpZiAoX3Y5LiQgPT09ICdHb29kJykgewoJCQkJCQkJCQkJCQkJdmFyIGZpZnRoR29vZCA9IF92OTsKCQkJCQkJCQkJCQkJCXJldHVybiBmaWZ0aEdvb2Q7CgkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQl2YXIgZmlmdGhCYWQgPSBfdjk7CgkJCQkJCQkJCQkJCQl2YXIgZmlmdGhDb21taXR0ZWQgPSBmaWZ0aEJhZC5hOwoJCQkJCQkJCQkJCQkJdmFyIGZpZnRoWCA9IGZpZnRoQmFkLmI7CgkJCQkJCQkJCQkJCQlyZXR1cm4gZmlmdGhDb21taXR0ZWQgPyBmaWZ0aEJhZCA6IEEyKAoJCQkJCQkJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwKCQkJCQkJCQkJCQkJCQlmYWxzZSwKCQkJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkRXhwZWN0aW5nT25lT2YsCgkJCQkJCQkJCQkJCQkJCWZpcnN0WCwKCQkJCQkJCQkJCQkJCQkJc2Vjb25kWCwKCQkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQkJW3RoaXJkWCwgZm91cnRoWCwgZmlmdGhYXSkpKTsKCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRwb3J0RGVjbGFyYXRpb25XaXRob3V0RG9jdW1lbnRhdGlvbiA9IEE2KAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNSwKCUY1KAoJCWZ1bmN0aW9uIChjb21tZW50c0FmdGVyUG9ydCwgbmFtZSwgY29tbWVudHNBZnRlck5hbWUsIGNvbW1lbnRzQWZ0ZXJDb2xvbiwgdHlwZUFubm90YXRpb25SZXN1bHQpIHsKCQkJdmFyIG5hbWVSYW5nZSA9IG5hbWUuYTsKCQkJdmFyIF92MCA9IHR5cGVBbm5vdGF0aW9uUmVzdWx0LnN5bnRheDsKCQkJdmFyIGVuZCA9IF92MC5hLmVuZDsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJdHlwZUFubm90YXRpb25SZXN1bHQuY29tbWVudHMsCgkJCQkJQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJY29tbWVudHNBZnRlckNvbG9uLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJOYW1lLCBjb21tZW50c0FmdGVyUG9ydCkpKSwKCQkJCXN5bnRheDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXsKCQkJCQkJZW5kOiBlbmQsCgkJCQkJCXN0YXJ0OiB7Y29sdW1uOiAxLCByb3c6IG5hbWVSYW5nZS5zdGFydC5yb3d9CgkJCQkJfSwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCREZWNsYXJhdGlvbiRQb3J0RGVjbGFyYXRpb24oCgkJCQkJCXtuYW1lOiBuYW1lLCB0eXBlQW5ub3RhdGlvbjogdHlwZUFubm90YXRpb25SZXN1bHQuc3ludGF4fSkpCgkJCX07CgkJfSksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwgJ3BvcnQnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZU5vZGUsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAnOicsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUeXBlQW5ub3RhdGlvbiR0eXBlQW5ub3RhdGlvbik7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkVHlwZURlY2xhcmF0aW9uV2l0aG91dERvY3VtZW50YXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVHlwZURlY2xhcmF0aW9uV2l0aG91dERvY3VtZW50YXRpb24nLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRjdXN0b21UeXBlRGVmaW5pdGlvbldpdGhvdXREb2N1bWVudGF0aW9uQWZ0ZXJUeXBlUHJlZml4ID0gQTcoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA2LAoJRjYoCgkJZnVuY3Rpb24gKG5hbWUsIGNvbW1lbnRzQWZ0ZXJOYW1lLCBwYXJhbWV0ZXJzLCBjb21tZW50c0FmdGVyRXF1YWwsIGhlYWRWYXJpYW50LCB0YWlsVmFyaWFudHNSZXZlcnNlKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCXRhaWxWYXJpYW50c1JldmVyc2UuY29tbWVudHMsCgkJCQkJQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJaGVhZFZhcmlhbnQuY29tbWVudHMsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJY29tbWVudHNBZnRlckVxdWFsLAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBwYXJhbWV0ZXJzLmNvbW1lbnRzLCBjb21tZW50c0FmdGVyTmFtZSkpKSksCgkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRUeXBlRGVjbGFyYXRpb25XaXRob3V0RG9jdW1lbnRhdGlvbigKCQkJCQl7aGVhZFZhcmlhbnQ6IGhlYWRWYXJpYW50LnN5bnRheCwgbmFtZTogbmFtZSwgcGFyYW1ldGVyczogcGFyYW1ldGVycy5zeW50YXgsIHRhaWxWYXJpYW50c1JldmVyc2U6IHRhaWxWYXJpYW50c1JldmVyc2Uuc3ludGF4fSkKCQkJfTsKCQl9KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyR0eXBlTmFtZU5vZGUsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkdHlwZUdlbmVyaWNMaXN0RXF1YWxzLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHZhbHVlQ29uc3RydWN0b3JPcHRpbWlzdGljTGF5b3V0LAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyRtYW55V2l0aG91dFJldmVyc2UoCgkJQTIoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCSd8JywKCQkJQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkcG9zaXRpdmVseUluZGVudGVkUGx1c0ZvbGxvd2VkQnksCgkJCQkxLAoJCQkJQTMoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQkJCQlGMigKCQkJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlUGlwZSwgdmFyaWFudFJlc3VsdCkgewoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCB2YXJpYW50UmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZVBpcGUpLAoJCQkJCQkJCXN5bnRheDogdmFyaWFudFJlc3VsdC5zeW50YXgKCQkJCQkJCX07CgkJCQkJCX0pLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkdmFsdWVDb25zdHJ1Y3Rvck9wdGltaXN0aWNMYXlvdXQpKSkpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJXaXRoU3RhcnRMb2NhdGlvbiA9IEYzKAoJZnVuY3Rpb24gKGZ1bmMsIF92MCwgX3YxKSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjIgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92Mi4kID09PSAnQmFkJykgewoJCQkJCXZhciBjb21taXR0ZWQgPSBfdjIuYTsKCQkJCQl2YXIgeCA9IF92Mi5iOwoJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIGNvbW1pdHRlZCwgeCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3YyLmE7CgkJCQkJdmFyIHMxID0gX3YyLmI7CgkJCQkJdmFyIF92MyA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92My4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92My5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92My5hOwoJCQkJCQl2YXIgczIgPSBfdjMuYjsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCUEzKAoJCQkJCQkJCWZ1bmMsCgkJCQkJCQkJe2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30sCgkJCQkJCQkJYSwKCQkJCQkJCQliKSwKCQkJCQkJCXMyKTsKCQkJCQl9CgkJCQl9CgkJCX0pOwoJfSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkVHlwZUFsaWFzRGVjbGFyYXRpb25XaXRob3V0RG9jdW1lbnRhdGlvbiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUeXBlQWxpYXNEZWNsYXJhdGlvbldpdGhvdXREb2N1bWVudGF0aW9uJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkdHlwZUFsaWFzRGVmaW5pdGlvbldpdGhvdXREb2N1bWVudGF0aW9uQWZ0ZXJUeXBlUHJlZml4ID0gQTcoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA2LAoJRjYoCgkJZnVuY3Rpb24gKGNvbW1lbnRzQWZ0ZXJBbGlhcywgbmFtZSwgY29tbWVudHNBZnRlck5hbWUsIHBhcmFtZXRlcnMsIGNvbW1lbnRzQWZ0ZXJFcXVhbCwgdHlwZUFubm90YXRpb25SZXN1bHQpIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJdHlwZUFubm90YXRpb25SZXN1bHQuY29tbWVudHMsCgkJCQkJQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJY29tbWVudHNBZnRlckVxdWFsLAoJCQkJCQlBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCXBhcmFtZXRlcnMuY29tbWVudHMsCgkJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJOYW1lLCBjb21tZW50c0FmdGVyQWxpYXMpKSkpLAoJCQkJc3ludGF4OiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkVHlwZUFsaWFzRGVjbGFyYXRpb25XaXRob3V0RG9jdW1lbnRhdGlvbigKCQkJCQl7bmFtZTogbmFtZSwgcGFyYW1ldGVyczogcGFyYW1ldGVycy5zeW50YXgsIHR5cGVBbm5vdGF0aW9uOiB0eXBlQW5ub3RhdGlvblJlc3VsdC5zeW50YXh9KQoJCQl9OwoJCX0pLAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZEZvbGxvd2VkQnksICdhbGlhcycsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkdHlwZU5hbWVOb2RlLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRGVjbGFyYXRpb25zJHR5cGVHZW5lcmljTGlzdEVxdWFscywKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFR5cGVBbm5vdGF0aW9uJHR5cGVBbm5vdGF0aW9uKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyR0eXBlT3JUeXBlQWxpYXNEZWZpbml0aW9uV2l0aG91dERvY3VtZW50YXRpb24gPSBBMygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJXaXRoU3RhcnRMb2NhdGlvbiwKCUYzKAoJCWZ1bmN0aW9uIChzdGFydCwgY29tbWVudHNBZnRlclR5cGUsIGFmdGVyU3RhcnQpIHsKCQkJdmFyIGFsbENvbW1lbnRzID0gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBhZnRlclN0YXJ0LmNvbW1lbnRzLCBjb21tZW50c0FmdGVyVHlwZSk7CgkJCXZhciBfdjAgPSBhZnRlclN0YXJ0LnN5bnRheDsKCQkJaWYgKF92MC4kID09PSAnVHlwZURlY2xhcmF0aW9uV2l0aG91dERvY3VtZW50YXRpb24nKSB7CgkJCQl2YXIgdHlwZURlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uID0gX3YwLmE7CgkJCQl2YXIgZW5kID0gZnVuY3Rpb24gKCkgewoJCQkJCXZhciBfdjEgPSB0eXBlRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24udGFpbFZhcmlhbnRzUmV2ZXJzZTsKCQkJCQlpZiAoX3YxLmIpIHsKCQkJCQkJdmFyIF92MiA9IF92MS5hOwoJCQkJCQl2YXIgcmFuZ2UgPSBfdjIuYTsKCQkJCQkJcmV0dXJuIHJhbmdlLmVuZDsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgX3YzID0gdHlwZURlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLmhlYWRWYXJpYW50OwoJCQkJCQl2YXIgaGVhZFZhcmlhbnRSYW5nZSA9IF92My5hOwoJCQkJCQlyZXR1cm4gaGVhZFZhcmlhbnRSYW5nZS5lbmQ7CgkJCQkJfQoJCQkJfSgpOwoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogYWxsQ29tbWVudHMsCgkJCQkJc3ludGF4OiBBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQl7ZW5kOiBlbmQsIHN0YXJ0OiBzdGFydH0sCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJEN1c3RvbVR5cGVEZWNsYXJhdGlvbigKCQkJCQkJCXsKCQkJCQkJCQljb25zdHJ1Y3RvcnM6IEEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQl0eXBlRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24uaGVhZFZhcmlhbnQsCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UodHlwZURlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLnRhaWxWYXJpYW50c1JldmVyc2UpKSwKCQkJCQkJCQlkb2N1bWVudGF0aW9uOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywKCQkJCQkJCQlnZW5lcmljczogdHlwZURlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLnBhcmFtZXRlcnMsCgkJCQkJCQkJbmFtZTogdHlwZURlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLm5hbWUKCQkJCQkJCX0pKQoJCQkJfTsKCQkJfSBlbHNlIHsKCQkJCXZhciB0eXBlQWxpYXNEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbiA9IF92MC5hOwoJCQkJdmFyIF92NCA9IHR5cGVBbGlhc0RlY2xhcmF0aW9uQWZ0ZXJEb2N1bWVudGF0aW9uLnR5cGVBbm5vdGF0aW9uOwoJCQkJdmFyIHR5cGVBbm5vdGF0aW9uUmFuZ2UgPSBfdjQuYTsKCQkJCXJldHVybiB7CgkJCQkJY29tbWVudHM6IGFsbENvbW1lbnRzLAoJCQkJCXN5bnRheDogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJe2VuZDogdHlwZUFubm90YXRpb25SYW5nZS5lbmQsIHN0YXJ0OiBzdGFydH0sCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JERlY2xhcmF0aW9uJEFsaWFzRGVjbGFyYXRpb24oCgkJCQkJCQl7ZG9jdW1lbnRhdGlvbjogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsIGdlbmVyaWNzOiB0eXBlQWxpYXNEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5wYXJhbWV0ZXJzLCBuYW1lOiB0eXBlQWxpYXNEZWNsYXJhdGlvbkFmdGVyRG9jdW1lbnRhdGlvbi5uYW1lLCB0eXBlQW5ub3RhdGlvbjogdHlwZUFsaWFzRGVjbGFyYXRpb25BZnRlckRvY3VtZW50YXRpb24udHlwZUFubm90YXRpb259KSkKCQkJCX07CgkJCX0KCQl9KSwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LCAndHlwZScsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjIsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyR0eXBlQWxpYXNEZWZpbml0aW9uV2l0aG91dERvY3VtZW50YXRpb25BZnRlclR5cGVQcmVmaXgsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRjdXN0b21UeXBlRGVmaW5pdGlvbldpdGhvdXREb2N1bWVudGF0aW9uQWZ0ZXJUeXBlUHJlZml4KSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkZGVjbGFyYXRpb24gPSBBNSgkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRvbmVPZjUsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRmdW5jdGlvbkRlY2xhcmF0aW9uV2l0aG91dERvY3VtZW50YXRpb24sICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRkZWNsYXJhdGlvbldpdGhEb2N1bWVudGF0aW9uLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkdHlwZU9yVHlwZUFsaWFzRGVmaW5pdGlvbldpdGhvdXREb2N1bWVudGF0aW9uLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciREZWNsYXJhdGlvbnMkcG9ydERlY2xhcmF0aW9uV2l0aG91dERvY3VtZW50YXRpb24sICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRpbmZpeERlY2xhcmF0aW9uKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbHVtbkFuZFRoZW4gPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJZnVuY3Rpb24gKHMpIHsKCQkJdmFyIF92MCA9IGNhbGxiYWNrKHMuY29sKTsKCQkJdmFyIHBhcnNlID0gX3YwLmE7CgkJCXJldHVybiBwYXJzZShzKTsKCQl9KTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRwcm9ibGVtTW9kdWxlTGV2ZWxJbmRlbnRhdGlvbiA9ICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHByb2JsZW0oJ211c3QgYmUgb24gbW9kdWxlLWxldmVsIGluZGVudGF0aW9uJyk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbW9kdWxlTGV2ZWxJbmRlbnRhdGlvbkZvbGxvd2VkQnkgPSBmdW5jdGlvbiAobmV4dFBhcnNlcikgewoJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGNvbHVtbkFuZFRoZW4oCgkJZnVuY3Rpb24gKGNvbHVtbikgewoJCQlyZXR1cm4gKGNvbHVtbiA9PT0gMSkgPyBuZXh0UGFyc2VyIDogJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JHByb2JsZW1Nb2R1bGVMZXZlbEluZGVudGF0aW9uOwoJCX0pOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRmlsZSRmaWxlRGVjbGFyYXRpb25zID0gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyRtYW55KAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1vZHVsZUxldmVsSW5kZW50YXRpb25Gb2xsb3dlZEJ5KAoJCUEzKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyLAoJCQlGMigKCQkJCWZ1bmN0aW9uIChkZWNsYXJhdGlvblBhcnNlZCwgY29tbWVudHNBZnRlcikgewoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXIsIGRlY2xhcmF0aW9uUGFyc2VkLmNvbW1lbnRzKSwKCQkJCQkJc3ludGF4OiBkZWNsYXJhdGlvblBhcnNlZC5zeW50YXgKCQkJCQl9OwoJCQkJfSksCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJERlY2xhcmF0aW9ucyRkZWNsYXJhdGlvbiwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQpKSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHBvc2luZyRBbGwgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnQWxsJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHBvc2luZyRFeHBsaWNpdCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdFeHBsaWNpdCcsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwb3NpbmckRnVuY3Rpb25FeHBvc2UgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRnVuY3Rpb25FeHBvc2UnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cG9zZSRmdW5jdGlvbkV4cG9zZSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyRmdW5jdGlvbk5hbWVNYXBXaXRoUmFuZ2UoCglGMigKCQlmdW5jdGlvbiAocmFuZ2UsIG5hbWUpIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiAkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSwKCQkJCXN5bnRheDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXJhbmdlLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cG9zaW5nJEZ1bmN0aW9uRXhwb3NlKG5hbWUpKQoJCQl9OwoJCX0pKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cG9zaW5nJEluZml4RXhwb3NlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0luZml4RXhwb3NlJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRUb2tlbnMkcGFyZW5zRW5kID0gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sLCAnKScsIF9VdGlsc19UdXBsZTApOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwb3NlJGluZml4RXhwb3NlID0gQTMoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyV2l0aFJhbmdlLAoJRjMoCgkJZnVuY3Rpb24gKHJhbmdlLCBpbmZpeE5hbWUsIF92MCkgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJcmFuZ2UsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwb3NpbmckSW5maXhFeHBvc2UoaW5maXhOYW1lKSkKCQkJfTsKCQl9KSwKCUEyKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJJygnLAoJCUEyKAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRpZkZvbGxvd2VkQnlXaGlsZVdpdGhvdXRMaW5lYnJlYWssCgkJCWZ1bmN0aW9uIChjKSB7CgkJCQlzd2l0Y2ggKGMudmFsdWVPZigpKSB7CgkJCQkJY2FzZSAnKSc6CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQljYXNlICdcbic6CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQljYXNlICcgJzoKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXJldHVybiB0cnVlOwoJCQkJfQoJCQl9LAoJCQlmdW5jdGlvbiAoYykgewoJCQkJc3dpdGNoIChjLnZhbHVlT2YoKSkgewoJCQkJCWNhc2UgJyknOgoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJY2FzZSAnXG4nOgoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJY2FzZSAnICc6CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQlkZWZhdWx0OgoJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCX0KCQkJfSkpLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHBhcmVuc0VuZCk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRFeHBvc2luZyRUeXBlRXhwb3NlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1R5cGVFeHBvc2UnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cG9zaW5nJFR5cGVPckFsaWFzRXhwb3NlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1R5cGVPckFsaWFzRXhwb3NlJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyV2l0aFJhbmdlT3JTdWNjZWVkID0gRjQoCglmdW5jdGlvbiAoZnVuYywgX3YwLCBfdjEsIGZhbGxiYWNrKSB7CgkJdmFyIHBhcnNlQSA9IF92MC5hOwoJCXZhciBwYXJzZUIgPSBfdjEuYTsKCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkUGFyc2VyKAoJCQlmdW5jdGlvbiAoczApIHsKCQkJCXZhciBfdjIgPSBwYXJzZUEoczApOwoJCQkJaWYgKF92Mi4kID09PSAnQmFkJykgewoJCQkJCXZhciBjMSA9IF92Mi5hOwoJCQkJCXZhciB4ID0gX3YyLmI7CgkJCQkJcmV0dXJuIGMxID8gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KSA6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsIGZhbGxiYWNrLCBzMCk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhID0gX3YyLmE7CgkJCQkJdmFyIHMxID0gX3YyLmI7CgkJCQkJdmFyIF92MyA9IHBhcnNlQihzMSk7CgkJCQkJaWYgKF92My4kID09PSAnQmFkJykgewoJCQkJCQl2YXIgeCA9IF92My5iOwoJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYiA9IF92My5hOwoJCQkJCQl2YXIgczIgPSBfdjMuYjsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwKCQkJCQkJCUEzKAoJCQkJCQkJCWZ1bmMsCgkJCQkJCQkJewoJCQkJCQkJCQllbmQ6IHtjb2x1bW46IHMyLmNvbCwgcm93OiBzMi5yb3d9LAoJCQkJCQkJCQlzdGFydDoge2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30KCQkJCQkJCQl9LAoJCQkJCQkJCWEsCgkJCQkJCQkJYiksCgkJCQkJCQlzMik7CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwb3NlJHR5cGVFeHBvc2UgPSBBNCgKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDMsCglGMygKCQlmdW5jdGlvbiAoX3YwLCBjb21tZW50c0JlZm9yZU1heWJlT3BlbiwgbWF5YmVPcGVuKSB7CgkJCXZhciB0eXBlTmFtZVJhbmdlID0gX3YwLmE7CgkJCXZhciB0eXBlTmFtZSA9IF92MC5iOwoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgbWF5YmVPcGVuLmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZU1heWJlT3BlbiksCgkJCQlzeW50YXg6IGZ1bmN0aW9uICgpIHsKCQkJCQl2YXIgX3YxID0gbWF5YmVPcGVuLnN5bnRheDsKCQkJCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQl0eXBlTmFtZVJhbmdlLAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkRXhwb3NpbmckVHlwZU9yQWxpYXNFeHBvc2UodHlwZU5hbWUpKTsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgb3BlblJhbmdlID0gX3YxLmE7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXtlbmQ6IG9wZW5SYW5nZS5lbmQsIHN0YXJ0OiB0eXBlTmFtZVJhbmdlLnN0YXJ0fSwKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cG9zaW5nJFR5cGVFeHBvc2UoCgkJCQkJCQkJe25hbWU6IHR5cGVOYW1lLCBvcGVuOiBtYXliZU9wZW4uc3ludGF4fSkpOwoJCQkJCX0KCQkJCX0oKQoJCQl9OwoJCX0pLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lTm9kZSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvcHRpbWlzdGljTGF5b3V0LAoJQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhSYW5nZU9yU3VjY2VlZCwKCQlGMygKCQkJZnVuY3Rpb24gKHJhbmdlLCBsZWZ0LCByaWdodCkgewoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCByaWdodCwgbGVmdCksCgkJCQkJc3ludGF4OiAkZWxtJGNvcmUkTWF5YmUkSnVzdChyYW5nZSkKCQkJCX07CgkJCX0pLAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICcoJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCQlBMigKCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZm9sbG93ZWRCeVN5bWJvbCwKCQkJJyknLAoJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAnLi4nLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpKSwKCQl7Y29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGVtcHR5LCBzeW50YXg6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nfSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwb3NlJGV4cG9zYWJsZSA9IEEzKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG9uZU9mMywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwb3NlJGZ1bmN0aW9uRXhwb3NlLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHBvc2UkdHlwZUV4cG9zZSwgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwb3NlJGluZml4RXhwb3NlKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cG9zZSRleHBvc2luZ0xpc3RJbm5lciA9IEEyKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YyLAoJQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMywKCQlGMygKCQkJZnVuY3Rpb24gKGhlYWRFbGVtZW50LCBjb21tZW50c0FmdGVySGVhZEVsZW1lbnQsIHRhaWxFbGVtZW50cykgewoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJdGFpbEVsZW1lbnRzLmNvbW1lbnRzLAoJCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQWZ0ZXJIZWFkRWxlbWVudCwgaGVhZEVsZW1lbnQuY29tbWVudHMpKSwKCQkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cG9zaW5nJEV4cGxpY2l0KAoJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBoZWFkRWxlbWVudC5zeW50YXgsIHRhaWxFbGVtZW50cy5zeW50YXgpKQoJCQkJfTsKCQkJfSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwb3NlJGV4cG9zYWJsZSwKCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyRtYW55KAoJCQlBMigKCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQknLCcsCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVBcm91bmRCb3RoU2lkZXMoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwb3NlJGV4cG9zYWJsZSkpKSksCglBMigKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXBXaXRoUmFuZ2UsCgkJRjIoCgkJCWZ1bmN0aW9uIChyYW5nZSwgY29tbWVudHNBZnRlckRvdERvdCkgewoJCQkJcmV0dXJuIHsKCQkJCQljb21tZW50czogY29tbWVudHNBZnRlckRvdERvdCwKCQkJCQlzeW50YXg6ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JEV4cG9zaW5nJEFsbChyYW5nZSkKCQkJCX07CgkJCX0pLAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICcuLicsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCkpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cG9zZSRleHBvc2VEZWZpbml0aW9uID0gQTQoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAzV2l0aFJhbmdlLAoJRjQoCgkJZnVuY3Rpb24gKHJhbmdlLCBjb21tZW50c0FmdGVyRXhwb3NpbmcsIGNvbW1lbnRzQmVmb3JlLCBleHBvc2luZ0xpc3RJbm5lclJlc3VsdCkgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6IEEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQlleHBvc2luZ0xpc3RJbm5lclJlc3VsdC5jb21tZW50cywKCQkJCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGNvbW1lbnRzQmVmb3JlLCBjb21tZW50c0FmdGVyRXhwb3NpbmcpKSwKCQkJCXN5bnRheDogQTIoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLCByYW5nZSwgZXhwb3NpbmdMaXN0SW5uZXJSZXN1bHQuc3ludGF4KQoJCQl9OwoJCX0pLAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwgJ2V4cG9zaW5nJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICcoJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQpLAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkZm9sbG93ZWRCeVN5bWJvbCwgJyknLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRFeHBvc2UkZXhwb3NpbmdMaXN0SW5uZXIpKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDNPclN1Y2NlZWQgPSBGNSgKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSwgX3YyLCBmYWxsYmFjaykgewoJCXZhciBwYXJzZUEgPSBfdjAuYTsKCQl2YXIgcGFyc2VCID0gX3YxLmE7CgkJdmFyIHBhcnNlQyA9IF92Mi5hOwoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRQYXJzZXIoCgkJCWZ1bmN0aW9uIChzMCkgewoJCQkJdmFyIF92MyA9IHBhcnNlQShzMCk7CgkJCQlpZiAoX3YzLiQgPT09ICdCYWQnKSB7CgkJCQkJdmFyIGMxID0gX3YzLmE7CgkJCQkJdmFyIHggPSBfdjMuYjsKCQkJCQlyZXR1cm4gYzEgPyBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpIDogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkR29vZCwgZmFsbGJhY2ssIHMwKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGEgPSBfdjMuYTsKCQkJCQl2YXIgczEgPSBfdjMuYjsKCQkJCQl2YXIgX3Y0ID0gcGFyc2VCKHMxKTsKCQkJCQlpZiAoX3Y0LiQgPT09ICdCYWQnKSB7CgkJCQkJCXZhciB4ID0gX3Y0LmI7CgkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBiID0gX3Y0LmE7CgkJCQkJCXZhciBzMiA9IF92NC5iOwoJCQkJCQl2YXIgX3Y1ID0gcGFyc2VDKHMyKTsKCQkJCQkJaWYgKF92NS4kID09PSAnQmFkJykgewoJCQkJCQkJdmFyIHggPSBfdjUuYjsKCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIGMgPSBfdjUuYTsKCQkJCQkJCXZhciBzMyA9IF92NS5iOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEdvb2QsCgkJCQkJCQkJQTMoZnVuYywgYSwgYiwgYyksCgkJCQkJCQkJczMpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwpmdW5jdGlvbiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRCYXNlJGN5Y2xpYyRtb2R1bGVOYW1lT3JFbXB0eSgpIHsKCXJldHVybiBBNCgKCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXAyT3JTdWNjZWVkLAoJCUYyKAoJCQlmdW5jdGlvbiAoaGVhZCwgdGFpbCkgewoJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGhlYWQsIHRhaWwpOwoJCQl9KSwKCQlBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRzeW1ib2xGb2xsb3dlZEJ5LCAnLicsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyR0eXBlTmFtZSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbGF6eSgKCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEJhc2UkY3ljbGljJG1vZHVsZU5hbWVPckVtcHR5KCk7CgkJCX0pLAoJCV9MaXN0X05pbCk7Cn0KdHJ5IHsKCXZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRCYXNlJG1vZHVsZU5hbWVPckVtcHR5ID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQmFzZSRjeWNsaWMkbW9kdWxlTmFtZU9yRW1wdHkoKTsKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEJhc2UkY3ljbGljJG1vZHVsZU5hbWVPckVtcHR5ID0gZnVuY3Rpb24gKCkgewoJCXJldHVybiAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRCYXNlJG1vZHVsZU5hbWVPckVtcHR5OwoJfTsKfSBjYXRjaCAoJCkgewoJdGhyb3cgJ1NvbWUgdG9wLWxldmVsIGRlZmluaXRpb25zIGZyb20gYEVsbS5QYXJzZXIuQmFzZWAgYXJlIGNhdXNpbmcgaW5maW5pdGUgcmVjdXJzaW9uOlxuXG4gIOKUjOKUgOKUgOKUgOKUgOKUgOKUkFxuICDilIIgICAgbW9kdWxlTmFtZU9yRW1wdHlcbiAg4pSU4pSA4pSA4pSA4pSA4pSA4pSYXG5cblRoZXNlIGVycm9ycyBhcmUgdmVyeSB0cmlja3ksIHNvIHJlYWQgaHR0cHM6Ly9lbG0tbGFuZy5vcmcvMC4xOS4xL2JhZC1yZWN1cnNpb24gdG8gbGVhcm4gaG93IHRvIGZpeCBpdCEnO30KdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEJhc2UkbW9kdWxlTmFtZSA9IEEzKAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMldpdGhSYW5nZSwKCUYzKAoJCWZ1bmN0aW9uIChyYW5nZSwgaGVhZCwgdGFpbCkgewoJCQlyZXR1cm4gQTIoCgkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQlyYW5nZSwKCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIGhlYWQsIHRhaWwpKTsKCQl9KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyR0eXBlTmFtZSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEJhc2UkbW9kdWxlTmFtZU9yRW1wdHkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJHR5cGVOYW1lTWFwV2l0aFJhbmdlID0gZnVuY3Rpb24gKHJhbmdlQW5kTmFtZVRvUmVzKSB7CglyZXR1cm4gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkaWZGb2xsb3dlZEJ5V2hpbGVNYXBXaXRoUmFuZ2VXaXRob3V0TGluZWJyZWFrLCByYW5nZUFuZE5hbWVUb1JlcywgJHN0aWw0bSRlbG1fc3ludGF4JENoYXIkRXh0cmEkdW5pY29kZUlzVXBwZXJGYXN0LCAkc3RpbDRtJGVsbV9zeW50YXgkQ2hhciRFeHRyYSR1bmljb2RlSXNBbHBoYU51bU9yVW5kZXJzY29yZUZhc3QpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkSW1wb3J0cyRpbXBvcnREZWZpbml0aW9uID0gQTYoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA1V2l0aFN0YXJ0TG9jYXRpb24sCglGNigKCQlmdW5jdGlvbiAoc3RhcnQsIGNvbW1lbnRzQWZ0ZXJJbXBvcnQsIG1vZCwgY29tbWVudHNBZnRlck1vZHVsZU5hbWUsIG1heWJlTW9kdWxlQWxpYXMsIG1heWJlRXhwb3NpbmdMaXN0KSB7CgkJCXZhciBjb21tZW50c0JlZm9yZUFsaWFzID0gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyTW9kdWxlTmFtZSwgY29tbWVudHNBZnRlckltcG9ydCk7CgkJCWlmIChtYXliZU1vZHVsZUFsaWFzLiQgPT09ICdOb3RoaW5nJykgewoJCQkJaWYgKG1heWJlRXhwb3NpbmdMaXN0LiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXZhciBfdjIgPSBtb2Q7CgkJCQkJdmFyIG1vZFJhbmdlID0gX3YyLmE7CgkJCQkJcmV0dXJuIHsKCQkJCQkJY29tbWVudHM6IGNvbW1lbnRzQmVmb3JlQWxpYXMsCgkJCQkJCXN5bnRheDogQTIoCgkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCQl7ZW5kOiBtb2RSYW5nZS5lbmQsIHN0YXJ0OiBzdGFydH0sCgkJCQkJCQl7ZXhwb3NpbmdMaXN0OiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZywgbW9kdWxlQWxpYXM6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLCBtb2R1bGVOYW1lOiBtb2R9KQoJCQkJCX07CgkJCQl9IGVsc2UgewoJCQkJCXZhciBleHBvc2luZ0xpc3RWYWx1ZSA9IG1heWJlRXhwb3NpbmdMaXN0LmE7CgkJCQkJdmFyIF92MyA9IGV4cG9zaW5nTGlzdFZhbHVlLnN5bnRheDsKCQkJCQl2YXIgZXhwb3NpbmdSYW5nZSA9IF92My5hOwoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIGV4cG9zaW5nTGlzdFZhbHVlLmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZUFsaWFzKSwKCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXtlbmQ6IGV4cG9zaW5nUmFuZ2UuZW5kLCBzdGFydDogc3RhcnR9LAoJCQkJCQkJewoJCQkJCQkJCWV4cG9zaW5nTGlzdDogJGVsbSRjb3JlJE1heWJlJEp1c3QoZXhwb3NpbmdMaXN0VmFsdWUuc3ludGF4KSwKCQkJCQkJCQltb2R1bGVBbGlhczogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsCgkJCQkJCQkJbW9kdWxlTmFtZTogbW9kCgkJCQkJCQl9KQoJCQkJCX07CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQl2YXIgbW9kdWxlQWxpYXNSZXN1bHQgPSBtYXliZU1vZHVsZUFsaWFzLmE7CgkJCQlpZiAobWF5YmVFeHBvc2luZ0xpc3QuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJdmFyIF92NSA9IG1vZHVsZUFsaWFzUmVzdWx0LnN5bnRheDsKCQkJCQl2YXIgYWxpYXNSYW5nZSA9IF92NS5hOwoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sIG1vZHVsZUFsaWFzUmVzdWx0LmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZUFsaWFzKSwKCQkJCQkJc3ludGF4OiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkTm9kZSwKCQkJCQkJCXtlbmQ6IGFsaWFzUmFuZ2UuZW5kLCBzdGFydDogc3RhcnR9LAoJCQkJCQkJewoJCQkJCQkJCWV4cG9zaW5nTGlzdDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsCgkJCQkJCQkJbW9kdWxlQWxpYXM6ICRlbG0kY29yZSRNYXliZSRKdXN0KG1vZHVsZUFsaWFzUmVzdWx0LnN5bnRheCksCgkJCQkJCQkJbW9kdWxlTmFtZTogbW9kCgkJCQkJCQl9KQoJCQkJCX07CgkJCQl9IGVsc2UgewoJCQkJCXZhciBleHBvc2luZ0xpc3RWYWx1ZSA9IG1heWJlRXhwb3NpbmdMaXN0LmE7CgkJCQkJdmFyIF92NiA9IGV4cG9zaW5nTGlzdFZhbHVlLnN5bnRheDsKCQkJCQl2YXIgZXhwb3NpbmdSYW5nZSA9IF92Ni5hOwoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCWV4cG9zaW5nTGlzdFZhbHVlLmNvbW1lbnRzLAoJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBtb2R1bGVBbGlhc1Jlc3VsdC5jb21tZW50cywgY29tbWVudHNCZWZvcmVBbGlhcykpLAoJCQkJCQlzeW50YXg6IEEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCQkJe2VuZDogZXhwb3NpbmdSYW5nZS5lbmQsIHN0YXJ0OiBzdGFydH0sCgkJCQkJCQl7CgkJCQkJCQkJZXhwb3NpbmdMaXN0OiAkZWxtJGNvcmUkTWF5YmUkSnVzdChleHBvc2luZ0xpc3RWYWx1ZS5zeW50YXgpLAoJCQkJCQkJCW1vZHVsZUFsaWFzOiAkZWxtJGNvcmUkTWF5YmUkSnVzdChtb2R1bGVBbGlhc1Jlc3VsdC5zeW50YXgpLAoJCQkJCQkJCW1vZHVsZU5hbWU6IG1vZAoJCQkJCQkJfSkKCQkJCQl9OwoJCQkJfQoJCQl9CgkJfSksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwgJ2ltcG9ydCcsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRCYXNlJG1vZHVsZU5hbWUsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkb3B0aW1pc3RpY0xheW91dCwKCUE1KAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDNPclN1Y2NlZWQsCgkJRjMoCgkJCWZ1bmN0aW9uIChjb21tZW50c0JlZm9yZSwgbW9kdWxlQWxpYXNOb2RlLCBjb21tZW50c0FmdGVyKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJewoJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyLCBjb21tZW50c0JlZm9yZSksCgkJCQkJCXN5bnRheDogbW9kdWxlQWxpYXNOb2RlCgkJCQkJfSk7CgkJCX0pLAoJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LCAnYXMnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyR0eXBlTmFtZU1hcFdpdGhSYW5nZSgKCQkJRjIoCgkJCQlmdW5jdGlvbiAocmFuZ2UsIG1vZHVsZUFsaWFzKSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJCXJhbmdlLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbbW9kdWxlQWxpYXNdKSk7CgkJCQl9KSksCgkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQsCgkJJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpLAoJQTQoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMk9yU3VjY2VlZCwKCQlGMigKCQkJZnVuY3Rpb24gKGV4cG9zaW5nUmVzdWx0LCBjb21tZW50c0FmdGVyKSB7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJewoJCQkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyLCBleHBvc2luZ1Jlc3VsdC5jb21tZW50cyksCgkJCQkJCXN5bnRheDogZXhwb3NpbmdSZXN1bHQuc3ludGF4CgkJCQkJfSk7CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cG9zZSRleHBvc2VEZWZpbml0aW9uLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvcHRpbWlzdGljTGF5b3V0LAoJCSRlbG0kY29yZSRNYXliZSROb3RoaW5nKSk7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkZW5kc1RvcEluZGVudGVkID0gZnVuY3Rpb24gKHBhcnNlcikgewoJcmV0dXJuIEEzKAoJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHZhbGlkYXRlRW5kQ29sdW1uSW5kZW50YXRpb24sCgkJRjIoCgkJCWZ1bmN0aW9uIChjb2x1bW4sIGluZGVudCkgewoJCQkJcmV0dXJuICEoY29sdW1uIC0gaW5kZW50KTsKCQkJfSksCgkJJ211c3QgYmUgb24gdG9wIGluZGVudGF0aW9uJywKCQlwYXJzZXIpOwp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGxheW91dFN0cmljdCA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRlbmRzVG9wSW5kZW50ZWQoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG9wdGltaXN0aWNMYXlvdXQpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGxheW91dFN0cmljdEZvbGxvd2VkQnlDb21tZW50cyA9IGZ1bmN0aW9uIChuZXh0UGFyc2VyKSB7CglyZXR1cm4gQTMoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwMiwKCQlGMigKCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlLCBhZnRlckNvbW1lbnRzKSB7CgkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBhZnRlckNvbW1lbnRzLCBjb21tZW50c0JlZm9yZSk7CgkJCX0pLAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvcHRpbWlzdGljTGF5b3V0LAoJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRvblRvcEluZGVudGF0aW9uRm9sbG93ZWRCeShuZXh0UGFyc2VyKSk7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGUkRWZmZWN0TW9kdWxlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0VmZmVjdE1vZHVsZScsIGE6IGF9Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTW9kdWxlcyRlZmZlY3RXaGVyZUNsYXVzZSA9IEE1KAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkbWFwNCwKCUY0KAoJCWZ1bmN0aW9uIChmbk5hbWUsIGNvbW1lbnRzQWZ0ZXJGbk5hbWUsIGNvbW1lbnRzQWZ0ZXJFcXVhbCwgdHlwZU5hbWVfKSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyRXF1YWwsIGNvbW1lbnRzQWZ0ZXJGbk5hbWUpLAoJCQkJc3ludGF4OiBfVXRpbHNfVHVwbGUyKGZuTmFtZSwgdHlwZU5hbWVfKQoJCQl9OwoJCX0pLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkVG9rZW5zJGZ1bmN0aW9uTmFtZSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksICc9JywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJFRva2VucyR0eXBlTmFtZU5vZGUpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JExpc3QkRXh0cmEkZmluZCA9IEYyKAoJZnVuY3Rpb24gKHByZWRpY2F0ZSwgbGlzdCkgewoJCWZpbmQ6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFsaXN0LmIpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJfSBlbHNlIHsKCQkJCXZhciB4ID0gbGlzdC5hOwoJCQkJdmFyIHhzID0gbGlzdC5iOwoJCQkJaWYgKHByZWRpY2F0ZSh4KSkgewoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCh4KTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyICR0ZW1wJHByZWRpY2F0ZSA9IHByZWRpY2F0ZSwKCQkJCQkJJHRlbXAkbGlzdCA9IHhzOwoJCQkJCXByZWRpY2F0ZSA9ICR0ZW1wJHByZWRpY2F0ZTsKCQkJCQlsaXN0ID0gJHRlbXAkbGlzdDsKCQkJCQljb250aW51ZSBmaW5kOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkVHVwbGUkc2Vjb25kID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIHkgPSBfdjAuYjsKCXJldHVybiB5Owp9Owp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTW9kdWxlcyR3aGVyZUJsb2NrID0gQTIoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRmb2xsb3dlZEJ5U3ltYm9sLAoJJ30nLAoJQTIoCgkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkc3ltYm9sRm9sbG93ZWRCeSwKCQkneycsCgkJQTUoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDQsCgkJCUY0KAoJCQkJZnVuY3Rpb24gKGNvbW1lbnRzQmVmb3JlSGVhZCwgaGVhZCwgY29tbWVudHNBZnRlckhlYWQsIHRhaWwpIHsKCQkJCQl2YXIgcGFpcnMgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBoZWFkLnN5bnRheCwgdGFpbC5zeW50YXgpOwoJCQkJCXJldHVybiB7CgkJCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywKCQkJCQkJCXRhaWwuY29tbWVudHMsCgkJCQkJCQlBMigKCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCQkJY29tbWVudHNBZnRlckhlYWQsCgkJCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBoZWFkLmNvbW1lbnRzLCBjb21tZW50c0JlZm9yZUhlYWQpKSksCgkJCQkJCXN5bnRheDogewoJCQkJCQkJY29tbWFuZDogQTIoCgkJCQkJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJCQkJCQkkZWxtJGNvcmUkVHVwbGUkc2Vjb25kLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkTGlzdCRFeHRyYSRmaW5kLAoJCQkJCQkJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQkJCQkJCQl2YXIgZm5OYW1lID0gX3YwLmE7CgkJCQkJCQkJCQlyZXR1cm4gZm5OYW1lID09PSAnY29tbWFuZCc7CgkJCQkJCQkJCX0sCgkJCQkJCQkJCXBhaXJzKSksCgkJCQkJCQlzdWJzY3JpcHRpb246IEEyKAoJCQkJCQkJCSRlbG0kY29yZSRNYXliZSRtYXAsCgkJCQkJCQkJJGVsbSRjb3JlJFR1cGxlJHNlY29uZCwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JExpc3QkRXh0cmEkZmluZCwKCQkJCQkJCQkJZnVuY3Rpb24gKF92MSkgewoJCQkJCQkJCQkJdmFyIGZuTmFtZSA9IF92MS5hOwoJCQkJCQkJCQkJcmV0dXJuIGZuTmFtZSA9PT0gJ3N1YnNjcmlwdGlvbic7CgkJCQkJCQkJCX0sCgkJCQkJCQkJCXBhaXJzKSkKCQkJCQkJfQoJCQkJCX07CgkJCQl9KSwKCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRNb2R1bGVzJGVmZmVjdFdoZXJlQ2xhdXNlLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJXaXRoQ29tbWVudHMkbWFueSgKCQkJCUEyKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JHN5bWJvbEZvbGxvd2VkQnksCgkJCQkJJywnLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUFyb3VuZEJvdGhTaWRlcygkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRNb2R1bGVzJGVmZmVjdFdoZXJlQ2xhdXNlKSkpKSkpOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTW9kdWxlcyRlZmZlY3RXaGVyZUNsYXVzZXMgPSBBMygKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDIsCglGMigKCQlmdW5jdGlvbiAoY29tbWVudHNCZWZvcmUsIHdoZXJlUmVzdWx0KSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCB3aGVyZVJlc3VsdC5jb21tZW50cywgY29tbWVudHNCZWZvcmUpLAoJCQkJc3ludGF4OiB3aGVyZVJlc3VsdC5zeW50YXgKCQkJfTsKCQl9KSwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LCAnd2hlcmUnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTW9kdWxlcyR3aGVyZUJsb2NrKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDdXaXRoUmFuZ2UgPSBGOCgKCWZ1bmN0aW9uIChmdW5jLCBfdjAsIF92MSwgX3YyLCBfdjMsIF92NCwgX3Y1LCBfdjYpIHsKCQl2YXIgcGFyc2VBID0gX3YwLmE7CgkJdmFyIHBhcnNlQiA9IF92MS5hOwoJCXZhciBwYXJzZUMgPSBfdjIuYTsKCQl2YXIgcGFyc2VEID0gX3YzLmE7CgkJdmFyIHBhcnNlRSA9IF92NC5hOwoJCXZhciBwYXJzZUYgPSBfdjUuYTsKCQl2YXIgcGFyc2VHID0gX3Y2LmE7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JFBhcnNlcigKCQkJZnVuY3Rpb24gKHMwKSB7CgkJCQl2YXIgX3Y3ID0gcGFyc2VBKHMwKTsKCQkJCWlmIChfdjcuJCA9PT0gJ0JhZCcpIHsKCQkJCQl2YXIgY29tbWl0dGVkID0gX3Y3LmE7CgkJCQkJdmFyIHggPSBfdjcuYjsKCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCBjb21taXR0ZWQsIHgpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgYSA9IF92Ny5hOwoJCQkJCXZhciBzMSA9IF92Ny5iOwoJCQkJCXZhciBfdjggPSBwYXJzZUIoczEpOwoJCQkJCWlmIChfdjguJCA9PT0gJ0JhZCcpIHsKCQkJCQkJdmFyIHggPSBfdjguYjsKCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGIgPSBfdjguYTsKCQkJCQkJdmFyIHMyID0gX3Y4LmI7CgkJCQkJCXZhciBfdjkgPSBwYXJzZUMoczIpOwoJCQkJCQlpZiAoX3Y5LiQgPT09ICdCYWQnKSB7CgkJCQkJCQl2YXIgeCA9IF92OS5iOwoJCQkJCQkJcmV0dXJuIEEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JEJhZCwgdHJ1ZSwgeCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgYyA9IF92OS5hOwoJCQkJCQkJdmFyIHMzID0gX3Y5LmI7CgkJCQkJCQl2YXIgX3YxMCA9IHBhcnNlRChzMyk7CgkJCQkJCQlpZiAoX3YxMC4kID09PSAnQmFkJykgewoJCQkJCQkJCXZhciB4ID0gX3YxMC5iOwoJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgZCA9IF92MTAuYTsKCQkJCQkJCQl2YXIgczQgPSBfdjEwLmI7CgkJCQkJCQkJdmFyIF92MTEgPSBwYXJzZUUoczQpOwoJCQkJCQkJCWlmIChfdjExLiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCXZhciB4ID0gX3YxMS5iOwoJCQkJCQkJCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkQmFkLCB0cnVlLCB4KTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl2YXIgZSA9IF92MTEuYTsKCQkJCQkJCQkJdmFyIHM1ID0gX3YxMS5iOwoJCQkJCQkJCQl2YXIgX3YxMiA9IHBhcnNlRihzNSk7CgkJCQkJCQkJCWlmIChfdjEyLiQgPT09ICdCYWQnKSB7CgkJCQkJCQkJCQl2YXIgeCA9IF92MTIuYjsKCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJdmFyIGYgPSBfdjEyLmE7CgkJCQkJCQkJCQl2YXIgczYgPSBfdjEyLmI7CgkJCQkJCQkJCQl2YXIgX3YxMyA9IHBhcnNlRyhzNik7CgkJCQkJCQkJCQlpZiAoX3YxMy4kID09PSAnQmFkJykgewoJCQkJCQkJCQkJCXZhciB4ID0gX3YxMy5iOwoJCQkJCQkJCQkJCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRCYWQsIHRydWUsIHgpOwoJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQl2YXIgZyA9IF92MTMuYTsKCQkJCQkJCQkJCQl2YXIgczcgPSBfdjEzLmI7CgkJCQkJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRHb29kLAoJCQkJCQkJCQkJCQlBOCgKCQkJCQkJCQkJCQkJCWZ1bmMsCgkJCQkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJCQkJZW5kOiB7Y29sdW1uOiBzNy5jb2wsIHJvdzogczcucm93fSwKCQkJCQkJCQkJCQkJCQlzdGFydDoge2NvbHVtbjogczAuY29sLCByb3c6IHMwLnJvd30KCQkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCQlhLAoJCQkJCQkJCQkJCQkJYiwKCQkJCQkJCQkJCQkJCWMsCgkJCQkJCQkJCQkJCQlkLAoJCQkJCQkJCQkJCQkJZSwKCQkJCQkJCQkJCQkJCWYsCgkJCQkJCQkJCQkJCQlnKSwKCQkJCQkJCQkJCQkJczcpOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTW9kdWxlcyRlZmZlY3RNb2R1bGVEZWZpbml0aW9uID0gQTgoCgkkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRtYXA3V2l0aFJhbmdlLAoJRjgoCgkJZnVuY3Rpb24gKHJhbmdlLCBjb21tZW50c0FmdGVyRWZmZWN0LCBjb21tZW50c0FmdGVyTW9kdWxlLCBuYW1lLCBjb21tZW50c0FmdGVyTmFtZSwgd2hlcmVDbGF1c2VzLCBjb21tZW50c0FmdGVyV2hlcmVDbGF1c2VzLCBleHApIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJZXhwLmNvbW1lbnRzLAoJCQkJCUEyKAoJCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJCWNvbW1lbnRzQWZ0ZXJXaGVyZUNsYXVzZXMsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJd2hlcmVDbGF1c2VzLmNvbW1lbnRzLAoJCQkJCQkJQTIoCgkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJCWNvbW1lbnRzQWZ0ZXJOYW1lLAoJCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlck1vZHVsZSwgY29tbWVudHNBZnRlckVmZmVjdCkpKSkpLAoJCQkJc3ludGF4OiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCROb2RlJE5vZGUsCgkJCQkJcmFuZ2UsCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlJEVmZmVjdE1vZHVsZSgKCQkJCQkJe2NvbW1hbmQ6IHdoZXJlQ2xhdXNlcy5zeW50YXguY29tbWFuZCwgZXhwb3NpbmdMaXN0OiBleHAuc3ludGF4LCBtb2R1bGVOYW1lOiBuYW1lLCBzdWJzY3JpcHRpb246IHdoZXJlQ2xhdXNlcy5zeW50YXguc3Vic2NyaXB0aW9ufSkpCgkJCX07CgkJfSksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwgJ2VmZmVjdCcsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwgJ21vZHVsZScsICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRCYXNlJG1vZHVsZU5hbWUsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQsCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRNb2R1bGVzJGVmZmVjdFdoZXJlQ2xhdXNlcywKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cG9zZSRleHBvc2VEZWZpbml0aW9uKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE1vZHVsZSROb3JtYWxNb2R1bGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnTm9ybWFsTW9kdWxlJywgYTogYX07Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRNb2R1bGVzJG5vcm1hbE1vZHVsZURlZmluaXRpb24gPSBBNSgKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDRXaXRoUmFuZ2UsCglGNSgKCQlmdW5jdGlvbiAocmFuZ2UsIGNvbW1lbnRzQWZ0ZXJNb2R1bGUsIG1vZHVsZU5hbWUsIGNvbW1lbnRzQWZ0ZXJNb2R1bGVOYW1lLCBleHBvc2luZ0xpc3QpIHsKCQkJcmV0dXJuIHsKCQkJCWNvbW1lbnRzOiBBMigKCQkJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRwcmVwZW5kVG8sCgkJCQkJZXhwb3NpbmdMaXN0LmNvbW1lbnRzLAoJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgY29tbWVudHNBZnRlck1vZHVsZU5hbWUsIGNvbW1lbnRzQWZ0ZXJNb2R1bGUpKSwKCQkJCXN5bnRheDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXJhbmdlLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE1vZHVsZSROb3JtYWxNb2R1bGUoCgkJCQkJCXtleHBvc2luZ0xpc3Q6IGV4cG9zaW5nTGlzdC5zeW50YXgsIG1vZHVsZU5hbWU6IG1vZHVsZU5hbWV9KSkKCQkJfTsKCQl9KSwKCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JGtleXdvcmRGb2xsb3dlZEJ5LCAnbW9kdWxlJywgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0KSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEJhc2UkbW9kdWxlTmFtZSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRtYXliZUxheW91dCwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEV4cG9zZSRleHBvc2VEZWZpbml0aW9uKTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE1vZHVsZSRQb3J0TW9kdWxlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1BvcnRNb2R1bGUnLCBhOiBhfTsKfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJE1vZHVsZXMkcG9ydE1vZHVsZURlZmluaXRpb24gPSBBNigKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDVXaXRoUmFuZ2UsCglGNigKCQlmdW5jdGlvbiAocmFuZ2UsIGNvbW1lbnRzQWZ0ZXJQb3J0LCBjb21tZW50c0FmdGVyTW9kdWxlLCBtb2R1bGVOYW1lLCBjb21tZW50c0FmdGVyTW9kdWxlTmFtZSwgZXhwb3NpbmdMaXN0KSB7CgkJCXJldHVybiB7CgkJCQljb21tZW50czogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCWV4cG9zaW5nTGlzdC5jb21tZW50cywKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQljb21tZW50c0FmdGVyTW9kdWxlTmFtZSwKCQkJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLCBjb21tZW50c0FmdGVyTW9kdWxlLCBjb21tZW50c0FmdGVyUG9ydCkpKSwKCQkJCXN5bnRheDogQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSROb2RlLAoJCQkJCXJhbmdlLAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE1vZHVsZSRQb3J0TW9kdWxlKAoJCQkJCQl7ZXhwb3NpbmdMaXN0OiBleHBvc2luZ0xpc3Quc3ludGF4LCBtb2R1bGVOYW1lOiBtb2R1bGVOYW1lfSkpCgkJCX07CgkJfSksCglBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRrZXl3b3JkRm9sbG93ZWRCeSwgJ3BvcnQnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qka2V5d29yZEZvbGxvd2VkQnksICdtb2R1bGUnLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbWF5YmVMYXlvdXQpLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQmFzZSRtb2R1bGVOYW1lLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JG1heWJlTGF5b3V0LAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkRXhwb3NlJGV4cG9zZURlZmluaXRpb24pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTW9kdWxlcyRtb2R1bGVEZWZpbml0aW9uID0gQTMoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkb25lT2YzLCAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRNb2R1bGVzJG5vcm1hbE1vZHVsZURlZmluaXRpb24sICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJE1vZHVsZXMkcG9ydE1vZHVsZURlZmluaXRpb24sICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJE1vZHVsZXMkZWZmZWN0TW9kdWxlRGVmaW5pdGlvbik7CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRDb21tZW50cyRtb2R1bGVEb2N1bWVudGF0aW9uID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkQ29tbWVudHMkZGVjbGFyYXRpb25Eb2N1bWVudGF0aW9uOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcm9wZUxpa2VseUZpbGxlZFRvTGlzdEludG8gPSBGMigKCWZ1bmN0aW9uIChpbml0aWFsQWNjLCByb3BlTGlrZWx5RmlsbGVkKSB7CgkJcm9wZUxpa2VseUZpbGxlZFRvTGlzdEludG86CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKHJvcGVMaWtlbHlGaWxsZWQuJCA9PT0gJ0xlYWYnKSB7CgkJCQl2YXIgb25seUVsZW1lbnQgPSByb3BlTGlrZWx5RmlsbGVkLmE7CgkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgb25seUVsZW1lbnQsIGluaXRpYWxBY2MpOwoJCQl9IGVsc2UgewoJCQkJdmFyIGxlZnQgPSByb3BlTGlrZWx5RmlsbGVkLmE7CgkJCQl2YXIgcmlnaHQgPSByb3BlTGlrZWx5RmlsbGVkLmI7CgkJCQl2YXIgJHRlbXAkaW5pdGlhbEFjYyA9IEEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHJvcGVMaWtlbHlGaWxsZWRUb0xpc3RJbnRvLCBpbml0aWFsQWNjLCByaWdodCksCgkJCQkJJHRlbXAkcm9wZUxpa2VseUZpbGxlZCA9IGxlZnQ7CgkJCQlpbml0aWFsQWNjID0gJHRlbXAkaW5pdGlhbEFjYzsKCQkJCXJvcGVMaWtlbHlGaWxsZWQgPSAkdGVtcCRyb3BlTGlrZWx5RmlsbGVkOwoJCQkJY29udGludWUgcm9wZUxpa2VseUZpbGxlZFRvTGlzdEludG87CgkJCX0KCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHRvTGlzdCA9IGZ1bmN0aW9uIChyb3BlKSB7CglpZiAocm9wZS4kID09PSAnTm90aGluZycpIHsKCQlyZXR1cm4gX0xpc3RfTmlsOwoJfSBlbHNlIHsKCQl2YXIgcm9wZUxpa2VseUZpbGxlZCA9IHJvcGUuYTsKCQlyZXR1cm4gQTIoJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcm9wZUxpa2VseUZpbGxlZFRvTGlzdEludG8sIF9MaXN0X05pbCwgcm9wZUxpa2VseUZpbGxlZCk7Cgl9Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRGaWxlJGZpbGUgPSBBNSgKCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDQsCglGNCgKCQlmdW5jdGlvbiAobW9kdWxlRGVmaW5pdGlvbiwgbW9kdWxlQ29tbWVudHMsIGltcG9ydHMsIGRlY2xhcmF0aW9ucykgewoJCQlyZXR1cm4gewoJCQkJY29tbWVudHM6ICRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHRvTGlzdCgKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQlkZWNsYXJhdGlvbnMuY29tbWVudHMsCgkJCQkJCUEyKAoJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkcHJlcGVuZFRvLAoJCQkJCQkJaW1wb3J0cy5jb21tZW50cywKCQkJCQkJCUEyKCRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJHByZXBlbmRUbywgbW9kdWxlQ29tbWVudHMsIG1vZHVsZURlZmluaXRpb24uY29tbWVudHMpKSkpLAoJCQkJZGVjbGFyYXRpb25zOiBkZWNsYXJhdGlvbnMuc3ludGF4LAoJCQkJaW1wb3J0czogaW1wb3J0cy5zeW50YXgsCgkJCQltb2R1bGVEZWZpbml0aW9uOiBtb2R1bGVEZWZpbml0aW9uLnN5bnRheAoJCQl9OwoJCX0pLAoJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTGF5b3V0JGxheW91dFN0cmljdEZvbGxvd2VkQnlXaXRoQ29tbWVudHMoJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkTW9kdWxlcyRtb2R1bGVEZWZpbml0aW9uKSwKCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJExheW91dCRsYXlvdXRTdHJpY3RGb2xsb3dlZEJ5Q29tbWVudHMoCgkJQTQoCgkJCSRzdGlsNG0kZWxtX3N5bnRheCRQYXJzZXJGYXN0JG1hcDJPclN1Y2NlZWQsCgkJCUYyKAoJCQkJZnVuY3Rpb24gKG1vZHVsZURvY3VtZW50YXRpb24sIGNvbW1lbnRzQWZ0ZXIpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRSb3BlJGZpbGxlZFByZXBlbmRUbywKCQkJCQkJY29tbWVudHNBZnRlciwKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFJvcGUkb25lKG1vZHVsZURvY3VtZW50YXRpb24pKTsKCQkJCX0pLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRDb21tZW50cyRtb2R1bGVEb2N1bWVudGF0aW9uLAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRMYXlvdXQkbGF5b3V0U3RyaWN0LAoJCQkkc3RpbDRtJGVsbV9zeW50YXgkUm9wZSRlbXB0eSkpLAoJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlcldpdGhDb21tZW50cyRtYW55KCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEltcG9ydHMkaW1wb3J0RGVmaW5pdGlvbiksCgkkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRGaWxlJGZpbGVEZWNsYXJhdGlvbnMpOwp2YXIgJGVsbSRwYXJzZXIkUGFyc2VyJEV4cGVjdGluZ0VuZCA9IHskOiAnRXhwZWN0aW5nRW5kJ307CnZhciAkZWxtJHBhcnNlciRQYXJzZXIkRXhwZWN0aW5nS2V5d29yZCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdFeHBlY3RpbmdLZXl3b3JkJywgYTogYX07Cn07CnZhciAkZWxtJHBhcnNlciRQYXJzZXIkRXhwZWN0aW5nTnVtYmVyID0geyQ6ICdFeHBlY3RpbmdOdW1iZXInfTsKdmFyICRlbG0kcGFyc2VyJFBhcnNlciRFeHBlY3RpbmdTeW1ib2wgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnRXhwZWN0aW5nU3ltYm9sJywgYTogYX07Cn07CnZhciAkZWxtJHBhcnNlciRQYXJzZXIkUHJvYmxlbSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQcm9ibGVtJywgYTogYX07Cn07CnZhciAkZWxtJHBhcnNlciRQYXJzZXIkVW5leHBlY3RlZENoYXIgPSB7JDogJ1VuZXhwZWN0ZWRDaGFyJ307CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRyb3BlRmlsbGVkVG9MaXN0ID0gRjIoCglmdW5jdGlvbiAocHJvYmxlbVRvQ29udmVydCwgc29GYXIpIHsKCQlzd2l0Y2ggKHByb2JsZW1Ub0NvbnZlcnQuJCkgewoJCQljYXNlICdFeHBlY3RpbmdPbmVPZic6CgkJCQl2YXIgZmlyc3RUcnkgPSBwcm9ibGVtVG9Db252ZXJ0LmE7CgkJCQl2YXIgc2Vjb25kVHJ5ID0gcHJvYmxlbVRvQ29udmVydC5iOwoJCQkJdmFyIHRoaXJkVHJ5VXAgPSBwcm9ibGVtVG9Db252ZXJ0LmM7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkcm9wZUZpbGxlZFRvTGlzdCwKCQkJCQlmaXJzdFRyeSwKCQkJCQlBMigKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkcm9wZUZpbGxlZFRvTGlzdCwKCQkJCQkJc2Vjb25kVHJ5LAoJCQkJCQlBMygkZWxtJGNvcmUkTGlzdCRmb2xkciwgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkcm9wZUZpbGxlZFRvTGlzdCwgc29GYXIsIHRoaXJkVHJ5VXApKSk7CgkJCWNhc2UgJ0V4cGVjdGluZ051bWJlcic6CgkJCQl2YXIgcm93ID0gcHJvYmxlbVRvQ29udmVydC5hOwoJCQkJdmFyIGNvbCA9IHByb2JsZW1Ub0NvbnZlcnQuYjsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCXtjb2w6IGNvbCwgcHJvYmxlbTogJGVsbSRwYXJzZXIkUGFyc2VyJEV4cGVjdGluZ051bWJlciwgcm93OiByb3d9LAoJCQkJCXNvRmFyKTsKCQkJY2FzZSAnRXhwZWN0aW5nU3ltYm9sJzoKCQkJCXZhciByb3cgPSBwcm9ibGVtVG9Db252ZXJ0LmE7CgkJCQl2YXIgY29sID0gcHJvYmxlbVRvQ29udmVydC5iOwoJCQkJdmFyIHN5bWJvbFN0cmluZyA9IHByb2JsZW1Ub0NvbnZlcnQuYzsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCXsKCQkJCQkJY29sOiBjb2wsCgkJCQkJCXByb2JsZW06ICRlbG0kcGFyc2VyJFBhcnNlciRFeHBlY3RpbmdTeW1ib2woc3ltYm9sU3RyaW5nKSwKCQkJCQkJcm93OiByb3cKCQkJCQl9LAoJCQkJCXNvRmFyKTsKCQkJY2FzZSAnRXhwZWN0aW5nQW55Q2hhcic6CgkJCQl2YXIgcm93ID0gcHJvYmxlbVRvQ29udmVydC5hOwoJCQkJdmFyIGNvbCA9IHByb2JsZW1Ub0NvbnZlcnQuYjsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCXsKCQkJCQkJY29sOiBjb2wsCgkJCQkJCXByb2JsZW06ICRlbG0kcGFyc2VyJFBhcnNlciRQcm9ibGVtKCdleHBlY3RpbmcgYW55IGNoYXInKSwKCQkJCQkJcm93OiByb3cKCQkJCQl9LAoJCQkJCXNvRmFyKTsKCQkJY2FzZSAnRXhwZWN0aW5nS2V5d29yZCc6CgkJCQl2YXIgcm93ID0gcHJvYmxlbVRvQ29udmVydC5hOwoJCQkJdmFyIGNvbCA9IHByb2JsZW1Ub0NvbnZlcnQuYjsKCQkJCXZhciBrZXl3b3JkU3RyaW5nID0gcHJvYmxlbVRvQ29udmVydC5jOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJewoJCQkJCQljb2w6IGNvbCwKCQkJCQkJcHJvYmxlbTogJGVsbSRwYXJzZXIkUGFyc2VyJEV4cGVjdGluZ0tleXdvcmQoa2V5d29yZFN0cmluZyksCgkJCQkJCXJvdzogcm93CgkJCQkJfSwKCQkJCQlzb0Zhcik7CgkJCWNhc2UgJ0V4cGVjdGluZ0NoYXJTYXRpc2Z5aW5nUHJlZGljYXRlJzoKCQkJCXZhciByb3cgPSBwcm9ibGVtVG9Db252ZXJ0LmE7CgkJCQl2YXIgY29sID0gcHJvYmxlbVRvQ29udmVydC5iOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJe2NvbDogY29sLCBwcm9ibGVtOiAkZWxtJHBhcnNlciRQYXJzZXIkVW5leHBlY3RlZENoYXIsIHJvdzogcm93fSwKCQkJCQlzb0Zhcik7CgkJCWNhc2UgJ0V4cGVjdGluZ1N0cmluZ1NhdGlzZnlpbmdQcmVkaWNhdGUnOgoJCQkJdmFyIHJvdyA9IHByb2JsZW1Ub0NvbnZlcnQuYTsKCQkJCXZhciBjb2wgPSBwcm9ibGVtVG9Db252ZXJ0LmI7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQl7CgkJCQkJCWNvbDogY29sLAoJCQkJCQlwcm9ibGVtOiAkZWxtJHBhcnNlciRQYXJzZXIkUHJvYmxlbSgnZXhwZWN0ZWQgc3RyaW5nIHRvIHBhc3MgdmFsaWRhdGlvbicpLAoJCQkJCQlyb3c6IHJvdwoJCQkJCX0sCgkJCQkJc29GYXIpOwoJCQlkZWZhdWx0OgoJCQkJdmFyIHJvdyA9IHByb2JsZW1Ub0NvbnZlcnQuYTsKCQkJCXZhciBjb2wgPSBwcm9ibGVtVG9Db252ZXJ0LmI7CgkJCQl2YXIgY3VzdG9tTWVzc2FnZSA9IHByb2JsZW1Ub0NvbnZlcnQuYzsKCQkJCXJldHVybiBBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCXsKCQkJCQkJY29sOiBjb2wsCgkJCQkJCXByb2JsZW06ICRlbG0kcGFyc2VyJFBhcnNlciRQcm9ibGVtKGN1c3RvbU1lc3NhZ2UpLAoJCQkJCQlyb3c6IHJvdwoJCQkJCX0sCgkJCQkJc29GYXIpOwoJCX0KCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3QkcnVuID0gRjIoCglmdW5jdGlvbiAoX3YwLCBzcmMpIHsKCQl2YXIgcGFyc2UgPSBfdjAuYTsKCQl2YXIgX3YxID0gcGFyc2UoCgkJCXtjb2w6IDEsIGluZGVudDogMSwgb2Zmc2V0OiAwLCByb3c6IDEsIHNyYzogc3JjfSk7CgkJaWYgKF92MS4kID09PSAnR29vZCcpIHsKCQkJdmFyIHZhbHVlID0gX3YxLmE7CgkJCXZhciBmaW5hbFN0YXRlID0gX3YxLmI7CgkJCXJldHVybiAoIShmaW5hbFN0YXRlLm9mZnNldCAtICRlbG0kY29yZSRTdHJpbmckbGVuZ3RoKGZpbmFsU3RhdGUuc3JjKSkpID8gJGVsbSRjb3JlJFJlc3VsdCRPayh2YWx1ZSkgOiAkZWxtJGNvcmUkUmVzdWx0JEVycigKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCXtjb2w6IGZpbmFsU3RhdGUuY29sLCBwcm9ibGVtOiAkZWxtJHBhcnNlciRQYXJzZXIkRXhwZWN0aW5nRW5kLCByb3c6IGZpbmFsU3RhdGUucm93fQoJCQkJCV0pKTsKCQl9IGVsc2UgewoJCQl2YXIgZGVhZEVuZHMgPSBfdjEuYjsKCQkJcmV0dXJuICRlbG0kY29yZSRSZXN1bHQkRXJyKAoJCQkJQTIoJHN0aWw0bSRlbG1fc3ludGF4JFBhcnNlckZhc3Qkcm9wZUZpbGxlZFRvTGlzdCwgZGVhZEVuZHMsIF9MaXN0X05pbCkpOwoJCX0KCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkcGFyc2VUb0ZpbGUgPSBmdW5jdGlvbiAoaW5wdXQpIHsKCXJldHVybiBBMigkc3RpbDRtJGVsbV9zeW50YXgkUGFyc2VyRmFzdCRydW4sICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJEZpbGUkZmlsZSwgaW5wdXQpOwp9Owp2YXIgJGVsbSRjb3JlJFJlc3VsdCR0b01heWJlID0gZnVuY3Rpb24gKHJlc3VsdCkgewoJaWYgKHJlc3VsdC4kID09PSAnT2snKSB7CgkJdmFyIHYgPSByZXN1bHQuYTsKCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3Qodik7Cgl9IGVsc2UgewoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkaW5pdExhbmd1YWdlU2VydmljZVN0YXRlID0gZnVuY3Rpb24gKGVsbUNvcmVNb2R1bGVzKSB7Cgl2YXIgZWxtQ29yZU1vZHVsZXNQYXJzZVJlc3VsdHMgPSBBMigKCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsCgkJZnVuY3Rpb24gKGNvcmVNb2R1bGUpIHsKCQkJcmV0dXJuIEEyKAoJCQkJJGVsbSRjb3JlJE1heWJlJG1hcCwKCQkJCWZ1bmN0aW9uIChzeW50YXgpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQlpbXBsaWNpdEltcG9ydDogY29yZU1vZHVsZS5pbXBsaWNpdEltcG9ydCwKCQkJCQkJcGFyc2VSZXN1bHQ6IHsKCQkJCQkJCWNvbXBsZXRpb25JdGVtczogJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRjb21wbGV0aW9uSXRlbXNGcm9tTW9kdWxlKAoJCQkJCQkJCXtmaWxlVXJpOiAnZWxtLWNvcmUnLCBzeW50YXg6IHN5bnRheCwgdGV4dDogY29yZU1vZHVsZS5tb2R1bGVUZXh0fSksCgkJCQkJCQlmaWxlVXJpOiAnZWxtLWNvcmUnLAoJCQkJCQkJc3ludGF4OiBzeW50YXgsCgkJCQkJCQl0ZXh0OiBjb3JlTW9kdWxlLm1vZHVsZVRleHQKCQkJCQkJfQoJCQkJCX07CgkJCQl9LAoJCQkJJGVsbSRjb3JlJFJlc3VsdCR0b01heWJlKAoJCQkJCSRzdGlsNG0kZWxtX3N5bnRheCRFbG0kUGFyc2VyJHBhcnNlVG9GaWxlKGNvcmVNb2R1bGUubW9kdWxlVGV4dCkpKTsKCQl9LAoJCWVsbUNvcmVNb2R1bGVzKTsKCXJldHVybiB7Y29yZU1vZHVsZXNDYWNoZTogZWxtQ29yZU1vZHVsZXNQYXJzZVJlc3VsdHMsIGRvY3VtZW50Q2FjaGU6ICRlbG0kY29yZSREaWN0JGVtcHR5LCBlbG1QYWNrYWdlczogX0xpc3RfTmlsfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VXb3JrZXIkaW5pdExhbmd1YWdlU2VydmljZVN0YXRlID0gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRpbml0TGFuZ3VhZ2VTZXJ2aWNlU3RhdGUoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZVdvcmtlciRlbG1Db3JlTW9kdWxlcyk7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkRmFpbHVyZSA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdGYWlsdXJlJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRGaWVsZCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdGaWVsZCcsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkSW5kZXggPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnSW5kZXgnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJE9uZU9mID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ09uZU9mJywgYTogYX07Cn07CnZhciAkZWxtJGNvcmUkU3RyaW5nJGFsbCA9IF9TdHJpbmdfYWxsOwp2YXIgJGVsbSRqc29uJEpzb24kRW5jb2RlJGVuY29kZSA9IF9Kc29uX2VuY29kZTsKdmFyICRlbG0kY29yZSRTdHJpbmckZnJvbUludCA9IF9TdHJpbmdfZnJvbU51bWJlcjsKdmFyICRlbG0kY29yZSRTdHJpbmckc3BsaXQgPSBGMigKCWZ1bmN0aW9uIChzZXAsIHN0cmluZykgewoJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCUEyKF9TdHJpbmdfc3BsaXQsIHNlcCwgc3RyaW5nKSk7Cgl9KTsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRpbmRlbnQgPSBmdW5jdGlvbiAoc3RyKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJFN0cmluZyRqb2luLAoJCSdcbiAgICAnLAoJCUEyKCRlbG0kY29yZSRTdHJpbmckc3BsaXQsICdcbicsIHN0cikpOwp9Owp2YXIgJGVsbSRjb3JlJENoYXIkaXNMb3dlciA9IGZ1bmN0aW9uIChfY2hhcikgewoJdmFyIGNvZGUgPSAkZWxtJGNvcmUkQ2hhciR0b0NvZGUoX2NoYXIpOwoJcmV0dXJuICg5NyA8PSBjb2RlKSAmJiAoY29kZSA8PSAxMjIpOwp9Owp2YXIgJGVsbSRjb3JlJENoYXIkaXNVcHBlciA9IGZ1bmN0aW9uIChfY2hhcikgewoJdmFyIGNvZGUgPSAkZWxtJGNvcmUkQ2hhciR0b0NvZGUoX2NoYXIpOwoJcmV0dXJuIChjb2RlIDw9IDkwKSAmJiAoNjUgPD0gY29kZSk7Cn07CnZhciAkZWxtJGNvcmUkQ2hhciRpc0FscGhhID0gZnVuY3Rpb24gKF9jaGFyKSB7CglyZXR1cm4gJGVsbSRjb3JlJENoYXIkaXNMb3dlcihfY2hhcikgfHwgJGVsbSRjb3JlJENoYXIkaXNVcHBlcihfY2hhcik7Cn07CnZhciAkZWxtJGNvcmUkQ2hhciRpc0RpZ2l0ID0gZnVuY3Rpb24gKF9jaGFyKSB7Cgl2YXIgY29kZSA9ICRlbG0kY29yZSRDaGFyJHRvQ29kZShfY2hhcik7CglyZXR1cm4gKGNvZGUgPD0gNTcpICYmICg0OCA8PSBjb2RlKTsKfTsKdmFyICRlbG0kY29yZSRDaGFyJGlzQWxwaGFOdW0gPSBmdW5jdGlvbiAoX2NoYXIpIHsKCXJldHVybiAkZWxtJGNvcmUkQ2hhciRpc0xvd2VyKF9jaGFyKSB8fCAoJGVsbSRjb3JlJENoYXIkaXNVcHBlcihfY2hhcikgfHwgJGVsbSRjb3JlJENoYXIkaXNEaWdpdChfY2hhcikpOwp9Owp2YXIgJGVsbSRjb3JlJFN0cmluZyR1bmNvbnMgPSBfU3RyaW5nX3VuY29uczsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRlcnJvck9uZU9mID0gRjIoCglmdW5jdGlvbiAoaSwgZXJyb3IpIHsKCQlyZXR1cm4gJ1xuXG4oJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoaSArIDEpICsgKCcpICcgKyAkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZW50KAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZXJyb3JUb1N0cmluZyhlcnJvcikpKSk7Cgl9KTsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRlcnJvclRvU3RyaW5nID0gZnVuY3Rpb24gKGVycm9yKSB7CglyZXR1cm4gQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGVycm9yVG9TdHJpbmdIZWxwLCBlcnJvciwgX0xpc3RfTmlsKTsKfTsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRlcnJvclRvU3RyaW5nSGVscCA9IEYyKAoJZnVuY3Rpb24gKGVycm9yLCBjb250ZXh0KSB7CgkJZXJyb3JUb1N0cmluZ0hlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJc3dpdGNoIChlcnJvci4kKSB7CgkJCQljYXNlICdGaWVsZCc6CgkJCQkJdmFyIGYgPSBlcnJvci5hOwoJCQkJCXZhciBlcnIgPSBlcnJvci5iOwoJCQkJCXZhciBpc1NpbXBsZSA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJdmFyIF92MSA9ICRlbG0kY29yZSRTdHJpbmckdW5jb25zKGYpOwoJCQkJCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIF92MiA9IF92MS5hOwoJCQkJCQkJdmFyIF9jaGFyID0gX3YyLmE7CgkJCQkJCQl2YXIgcmVzdCA9IF92Mi5iOwoJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRDaGFyJGlzQWxwaGEoX2NoYXIpICYmIEEyKCRlbG0kY29yZSRTdHJpbmckYWxsLCAkZWxtJGNvcmUkQ2hhciRpc0FscGhhTnVtLCByZXN0KTsKCQkJCQkJfQoJCQkJCX0oKTsKCQkJCQl2YXIgZmllbGROYW1lID0gaXNTaW1wbGUgPyAoJy4nICsgZikgOiAoJ1tcJycgKyAoZiArICdcJ10nKSk7CgkJCQkJdmFyICR0ZW1wJGVycm9yID0gZXJyLAoJCQkJCQkkdGVtcCRjb250ZXh0ID0gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgZmllbGROYW1lLCBjb250ZXh0KTsKCQkJCQllcnJvciA9ICR0ZW1wJGVycm9yOwoJCQkJCWNvbnRleHQgPSAkdGVtcCRjb250ZXh0OwoJCQkJCWNvbnRpbnVlIGVycm9yVG9TdHJpbmdIZWxwOwoJCQkJY2FzZSAnSW5kZXgnOgoJCQkJCXZhciBpID0gZXJyb3IuYTsKCQkJCQl2YXIgZXJyID0gZXJyb3IuYjsKCQkJCQl2YXIgaW5kZXhOYW1lID0gJ1snICsgKCRlbG0kY29yZSRTdHJpbmckZnJvbUludChpKSArICddJyk7CgkJCQkJdmFyICR0ZW1wJGVycm9yID0gZXJyLAoJCQkJCQkkdGVtcCRjb250ZXh0ID0gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgaW5kZXhOYW1lLCBjb250ZXh0KTsKCQkJCQllcnJvciA9ICR0ZW1wJGVycm9yOwoJCQkJCWNvbnRleHQgPSAkdGVtcCRjb250ZXh0OwoJCQkJCWNvbnRpbnVlIGVycm9yVG9TdHJpbmdIZWxwOwoJCQkJY2FzZSAnT25lT2YnOgoJCQkJCXZhciBlcnJvcnMgPSBlcnJvci5hOwoJCQkJCWlmICghZXJyb3JzLmIpIHsKCQkJCQkJcmV0dXJuICdSYW4gaW50byBhIEpzb24uRGVjb2RlLm9uZU9mIHdpdGggbm8gcG9zc2liaWxpdGllcycgKyBmdW5jdGlvbiAoKSB7CgkJCQkJCQlpZiAoIWNvbnRleHQuYikgewoJCQkJCQkJCXJldHVybiAnISc7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXJldHVybiAnIGF0IGpzb24nICsgQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQkJJycsCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoY29udGV4dCkpOwoJCQkJCQkJfQoJCQkJCQl9KCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJaWYgKCFlcnJvcnMuYi5iKSB7CgkJCQkJCQl2YXIgZXJyID0gZXJyb3JzLmE7CgkJCQkJCQl2YXIgJHRlbXAkZXJyb3IgPSBlcnIsCgkJCQkJCQkJJHRlbXAkY29udGV4dCA9IGNvbnRleHQ7CgkJCQkJCQllcnJvciA9ICR0ZW1wJGVycm9yOwoJCQkJCQkJY29udGV4dCA9ICR0ZW1wJGNvbnRleHQ7CgkJCQkJCQljb250aW51ZSBlcnJvclRvU3RyaW5nSGVscDsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBzdGFydGVyID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJCWlmICghY29udGV4dC5iKSB7CgkJCQkJCQkJCXJldHVybiAnSnNvbi5EZWNvZGUub25lT2YnOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXJldHVybiAnVGhlIEpzb24uRGVjb2RlLm9uZU9mIGF0IGpzb24nICsgQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQkJCQknJywKCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoY29udGV4dCkpOwoJCQkJCQkJCX0KCQkJCQkJCX0oKTsKCQkJCQkJCXZhciBpbnRyb2R1Y3Rpb24gPSBzdGFydGVyICsgKCcgZmFpbGVkIGluIHRoZSBmb2xsb3dpbmcgJyArICgkZWxtJGNvcmUkU3RyaW5nJGZyb21JbnQoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkbGVuZ3RoKGVycm9ycykpICsgJyB3YXlzOicpKTsKCQkJCQkJCXJldHVybiBBMigKCQkJCQkJCQkkZWxtJGNvcmUkU3RyaW5nJGpvaW4sCgkJCQkJCQkJJ1xuXG4nLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25zLAoJCQkJCQkJCQlpbnRyb2R1Y3Rpb24sCgkJCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGluZGV4ZWRNYXAsICRlbG0kanNvbiRKc29uJERlY29kZSRlcnJvck9uZU9mLCBlcnJvcnMpKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQlkZWZhdWx0OgoJCQkJCXZhciBtc2cgPSBlcnJvci5hOwoJCQkJCXZhciBqc29uID0gZXJyb3IuYjsKCQkJCQl2YXIgaW50cm9kdWN0aW9uID0gZnVuY3Rpb24gKCkgewoJCQkJCQlpZiAoIWNvbnRleHQuYikgewoJCQkJCQkJcmV0dXJuICdQcm9ibGVtIHdpdGggdGhlIGdpdmVuIHZhbHVlOlxuXG4nOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJcmV0dXJuICdQcm9ibGVtIHdpdGggdGhlIHZhbHVlIGF0IGpzb24nICsgKEEyKAoJCQkJCQkJCSRlbG0kY29yZSRTdHJpbmckam9pbiwKCQkJCQkJCQknJywKCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRyZXZlcnNlKGNvbnRleHQpKSArICc6XG5cbiAgICAnKTsKCQkJCQkJfQoJCQkJCX0oKTsKCQkJCQlyZXR1cm4gaW50cm9kdWN0aW9uICsgKCRlbG0kanNvbiRKc29uJERlY29kZSRpbmRlbnQoCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJEVuY29kZSRlbmNvZGUsIDQsIGpzb24pKSArICgnXG5cbicgKyBtc2cpKTsKCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJEFycmF5JGJyYW5jaEZhY3RvciA9IDMyOwp2YXIgJGVsbSRjb3JlJEFycmF5JEFycmF5X2VsbV9idWlsdGluID0gRjQoCglmdW5jdGlvbiAoYSwgYiwgYywgZCkgewoJCXJldHVybiB7JDogJ0FycmF5X2VsbV9idWlsdGluJywgYTogYSwgYjogYiwgYzogYywgZDogZH07Cgl9KTsKdmFyICRlbG0kY29yZSRFbG0kSnNBcnJheSRlbXB0eSA9IF9Kc0FycmF5X2VtcHR5Owp2YXIgJGVsbSRjb3JlJEJhc2ljcyRjZWlsaW5nID0gX0Jhc2ljc19jZWlsaW5nOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRmZGl2ID0gX0Jhc2ljc19mZGl2Owp2YXIgJGVsbSRjb3JlJEJhc2ljcyRsb2dCYXNlID0gRjIoCglmdW5jdGlvbiAoYmFzZSwgbnVtYmVyKSB7CgkJcmV0dXJuIF9CYXNpY3NfbG9nKG51bWJlcikgLyBfQmFzaWNzX2xvZyhiYXNlKTsKCX0pOwp2YXIgJGVsbSRjb3JlJEFycmF5JHNoaWZ0U3RlcCA9ICRlbG0kY29yZSRCYXNpY3MkY2VpbGluZygKCUEyKCRlbG0kY29yZSRCYXNpY3MkbG9nQmFzZSwgMiwgJGVsbSRjb3JlJEFycmF5JGJyYW5jaEZhY3RvcikpOwp2YXIgJGVsbSRjb3JlJEFycmF5JGVtcHR5ID0gQTQoJGVsbSRjb3JlJEFycmF5JEFycmF5X2VsbV9idWlsdGluLCAwLCAkZWxtJGNvcmUkQXJyYXkkc2hpZnRTdGVwLCAkZWxtJGNvcmUkRWxtJEpzQXJyYXkkZW1wdHksICRlbG0kY29yZSRFbG0kSnNBcnJheSRlbXB0eSk7CnZhciAkZWxtJGNvcmUkRWxtJEpzQXJyYXkkaW5pdGlhbGl6ZSA9IF9Kc0FycmF5X2luaXRpYWxpemU7CnZhciAkZWxtJGNvcmUkQXJyYXkkTGVhZiA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdMZWFmJywgYTogYX07Cn07CnZhciAkZWxtJGNvcmUkQmFzaWNzJGFwTCA9IEYyKAoJZnVuY3Rpb24gKGYsIHgpIHsKCQlyZXR1cm4gZih4KTsKCX0pOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRmbG9vciA9IF9CYXNpY3NfZmxvb3I7CnZhciAkZWxtJGNvcmUkRWxtJEpzQXJyYXkkbGVuZ3RoID0gX0pzQXJyYXlfbGVuZ3RoOwp2YXIgJGVsbSRjb3JlJEJhc2ljcyRtYXggPSBGMigKCWZ1bmN0aW9uICh4LCB5KSB7CgkJcmV0dXJuIChfVXRpbHNfY21wKHgsIHkpID4gMCkgPyB4IDogeTsKCX0pOwp2YXIgJGVsbSRjb3JlJEFycmF5JFN1YlRyZWUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnU3ViVHJlZScsIGE6IGF9Owp9Owp2YXIgJGVsbSRjb3JlJEVsbSRKc0FycmF5JGluaXRpYWxpemVGcm9tTGlzdCA9IF9Kc0FycmF5X2luaXRpYWxpemVGcm9tTGlzdDsKdmFyICRlbG0kY29yZSRBcnJheSRjb21wcmVzc05vZGVzID0gRjIoCglmdW5jdGlvbiAobm9kZXMsIGFjYykgewoJCWNvbXByZXNzTm9kZXM6CgkJd2hpbGUgKHRydWUpIHsKCQkJdmFyIF92MCA9IEEyKCRlbG0kY29yZSRFbG0kSnNBcnJheSRpbml0aWFsaXplRnJvbUxpc3QsICRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3IsIG5vZGVzKTsKCQkJdmFyIG5vZGUgPSBfdjAuYTsKCQkJdmFyIHJlbWFpbmluZ05vZGVzID0gX3YwLmI7CgkJCXZhciBuZXdBY2MgPSBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkkZWxtJGNvcmUkQXJyYXkkU3ViVHJlZShub2RlKSwKCQkJCWFjYyk7CgkJCWlmICghcmVtYWluaW5nTm9kZXMuYikgewoJCQkJcmV0dXJuICRlbG0kY29yZSRMaXN0JHJldmVyc2UobmV3QWNjKTsKCQkJfSBlbHNlIHsKCQkJCXZhciAkdGVtcCRub2RlcyA9IHJlbWFpbmluZ05vZGVzLAoJCQkJCSR0ZW1wJGFjYyA9IG5ld0FjYzsKCQkJCW5vZGVzID0gJHRlbXAkbm9kZXM7CgkJCQlhY2MgPSAkdGVtcCRhY2M7CgkJCQljb250aW51ZSBjb21wcmVzc05vZGVzOwoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkVHVwbGUkZmlyc3QgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgeCA9IF92MC5hOwoJcmV0dXJuIHg7Cn07CnZhciAkZWxtJGNvcmUkQXJyYXkkdHJlZUZyb21CdWlsZGVyID0gRjIoCglmdW5jdGlvbiAobm9kZUxpc3QsIG5vZGVMaXN0U2l6ZSkgewoJCXRyZWVGcm9tQnVpbGRlcjoKCQl3aGlsZSAodHJ1ZSkgewoJCQl2YXIgbmV3Tm9kZVNpemUgPSAkZWxtJGNvcmUkQmFzaWNzJGNlaWxpbmcobm9kZUxpc3RTaXplIC8gJGVsbSRjb3JlJEFycmF5JGJyYW5jaEZhY3Rvcik7CgkJCWlmIChuZXdOb2RlU2l6ZSA9PT0gMSkgewoJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRFbG0kSnNBcnJheSRpbml0aWFsaXplRnJvbUxpc3QsICRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3IsIG5vZGVMaXN0KS5hOwoJCQl9IGVsc2UgewoJCQkJdmFyICR0ZW1wJG5vZGVMaXN0ID0gQTIoJGVsbSRjb3JlJEFycmF5JGNvbXByZXNzTm9kZXMsIG5vZGVMaXN0LCBfTGlzdF9OaWwpLAoJCQkJCSR0ZW1wJG5vZGVMaXN0U2l6ZSA9IG5ld05vZGVTaXplOwoJCQkJbm9kZUxpc3QgPSAkdGVtcCRub2RlTGlzdDsKCQkJCW5vZGVMaXN0U2l6ZSA9ICR0ZW1wJG5vZGVMaXN0U2l6ZTsKCQkJCWNvbnRpbnVlIHRyZWVGcm9tQnVpbGRlcjsKCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJEFycmF5JGJ1aWxkZXJUb0FycmF5ID0gRjIoCglmdW5jdGlvbiAocmV2ZXJzZU5vZGVMaXN0LCBidWlsZGVyKSB7CgkJaWYgKCFidWlsZGVyLm5vZGVMaXN0U2l6ZSkgewoJCQlyZXR1cm4gQTQoCgkJCQkkZWxtJGNvcmUkQXJyYXkkQXJyYXlfZWxtX2J1aWx0aW4sCgkJCQkkZWxtJGNvcmUkRWxtJEpzQXJyYXkkbGVuZ3RoKGJ1aWxkZXIudGFpbCksCgkJCQkkZWxtJGNvcmUkQXJyYXkkc2hpZnRTdGVwLAoJCQkJJGVsbSRjb3JlJEVsbSRKc0FycmF5JGVtcHR5LAoJCQkJYnVpbGRlci50YWlsKTsKCQl9IGVsc2UgewoJCQl2YXIgdHJlZUxlbiA9IGJ1aWxkZXIubm9kZUxpc3RTaXplICogJGVsbSRjb3JlJEFycmF5JGJyYW5jaEZhY3RvcjsKCQkJdmFyIGRlcHRoID0gJGVsbSRjb3JlJEJhc2ljcyRmbG9vcigKCQkJCUEyKCRlbG0kY29yZSRCYXNpY3MkbG9nQmFzZSwgJGVsbSRjb3JlJEFycmF5JGJyYW5jaEZhY3RvciwgdHJlZUxlbiAtIDEpKTsKCQkJdmFyIGNvcnJlY3ROb2RlTGlzdCA9IHJldmVyc2VOb2RlTGlzdCA/ICRlbG0kY29yZSRMaXN0JHJldmVyc2UoYnVpbGRlci5ub2RlTGlzdCkgOiBidWlsZGVyLm5vZGVMaXN0OwoJCQl2YXIgdHJlZSA9IEEyKCRlbG0kY29yZSRBcnJheSR0cmVlRnJvbUJ1aWxkZXIsIGNvcnJlY3ROb2RlTGlzdCwgYnVpbGRlci5ub2RlTGlzdFNpemUpOwoJCQlyZXR1cm4gQTQoCgkJCQkkZWxtJGNvcmUkQXJyYXkkQXJyYXlfZWxtX2J1aWx0aW4sCgkJCQkkZWxtJGNvcmUkRWxtJEpzQXJyYXkkbGVuZ3RoKGJ1aWxkZXIudGFpbCkgKyB0cmVlTGVuLAoJCQkJQTIoJGVsbSRjb3JlJEJhc2ljcyRtYXgsIDUsIGRlcHRoICogJGVsbSRjb3JlJEFycmF5JHNoaWZ0U3RlcCksCgkJCQl0cmVlLAoJCQkJYnVpbGRlci50YWlsKTsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRCYXNpY3MkaWRpdiA9IF9CYXNpY3NfaWRpdjsKdmFyICRlbG0kY29yZSRBcnJheSRpbml0aWFsaXplSGVscCA9IEY1KAoJZnVuY3Rpb24gKGZuLCBmcm9tSW5kZXgsIGxlbiwgbm9kZUxpc3QsIHRhaWwpIHsKCQlpbml0aWFsaXplSGVscDoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoZnJvbUluZGV4IDwgMCkgewoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRBcnJheSRidWlsZGVyVG9BcnJheSwKCQkJCQlmYWxzZSwKCQkJCQl7bm9kZUxpc3Q6IG5vZGVMaXN0LCBub2RlTGlzdFNpemU6IChsZW4gLyAkZWxtJGNvcmUkQXJyYXkkYnJhbmNoRmFjdG9yKSB8IDAsIHRhaWw6IHRhaWx9KTsKCQkJfSBlbHNlIHsKCQkJCXZhciBsZWFmID0gJGVsbSRjb3JlJEFycmF5JExlYWYoCgkJCQkJQTMoJGVsbSRjb3JlJEVsbSRKc0FycmF5JGluaXRpYWxpemUsICRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3IsIGZyb21JbmRleCwgZm4pKTsKCQkJCXZhciAkdGVtcCRmbiA9IGZuLAoJCQkJCSR0ZW1wJGZyb21JbmRleCA9IGZyb21JbmRleCAtICRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3IsCgkJCQkJJHRlbXAkbGVuID0gbGVuLAoJCQkJCSR0ZW1wJG5vZGVMaXN0ID0gQTIoJGVsbSRjb3JlJExpc3QkY29ucywgbGVhZiwgbm9kZUxpc3QpLAoJCQkJCSR0ZW1wJHRhaWwgPSB0YWlsOwoJCQkJZm4gPSAkdGVtcCRmbjsKCQkJCWZyb21JbmRleCA9ICR0ZW1wJGZyb21JbmRleDsKCQkJCWxlbiA9ICR0ZW1wJGxlbjsKCQkJCW5vZGVMaXN0ID0gJHRlbXAkbm9kZUxpc3Q7CgkJCQl0YWlsID0gJHRlbXAkdGFpbDsKCQkJCWNvbnRpbnVlIGluaXRpYWxpemVIZWxwOwoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkQmFzaWNzJHJlbWFpbmRlckJ5ID0gX0Jhc2ljc19yZW1haW5kZXJCeTsKdmFyICRlbG0kY29yZSRBcnJheSRpbml0aWFsaXplID0gRjIoCglmdW5jdGlvbiAobGVuLCBmbikgewoJCWlmIChsZW4gPD0gMCkgewoJCQlyZXR1cm4gJGVsbSRjb3JlJEFycmF5JGVtcHR5OwoJCX0gZWxzZSB7CgkJCXZhciB0YWlsTGVuID0gbGVuICUgJGVsbSRjb3JlJEFycmF5JGJyYW5jaEZhY3RvcjsKCQkJdmFyIHRhaWwgPSBBMygkZWxtJGNvcmUkRWxtJEpzQXJyYXkkaW5pdGlhbGl6ZSwgdGFpbExlbiwgbGVuIC0gdGFpbExlbiwgZm4pOwoJCQl2YXIgaW5pdGlhbEZyb21JbmRleCA9IChsZW4gLSB0YWlsTGVuKSAtICRlbG0kY29yZSRBcnJheSRicmFuY2hGYWN0b3I7CgkJCXJldHVybiBBNSgkZWxtJGNvcmUkQXJyYXkkaW5pdGlhbGl6ZUhlbHAsIGZuLCBpbml0aWFsRnJvbUluZGV4LCBsZW4sIF9MaXN0X05pbCwgdGFpbCk7CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkUmVzdWx0JGlzT2sgPSBmdW5jdGlvbiAocmVzdWx0KSB7CglpZiAocmVzdWx0LiQgPT09ICdPaycpIHsKCQlyZXR1cm4gdHJ1ZTsKCX0gZWxzZSB7CgkJcmV0dXJuIGZhbHNlOwoJfQp9Owp2YXIgJGVsbSRjb3JlJFBsYXRmb3JtJENtZCRiYXRjaCA9IF9QbGF0Zm9ybV9iYXRjaDsKdmFyICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkbm9uZSA9ICRlbG0kY29yZSRQbGF0Zm9ybSRDbWQkYmF0Y2goX0xpc3RfTmlsKTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VXb3JrZXIkaW5pdCA9IGZ1bmN0aW9uIChfdjApIHsKCXJldHVybiBfVXRpbHNfVHVwbGUyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VXb3JrZXIkaW5pdExhbmd1YWdlU2VydmljZVN0YXRlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZVdvcmtlciRSZXF1ZXN0RXZlbnQgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnUmVxdWVzdEV2ZW50JywgYTogYX07Cn07CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkdmFsdWUgPSBfSnNvbl9kZWNvZGVWYWx1ZTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VXb3JrZXIkcmVjZWl2ZVJlcXVlc3QgPSBfUGxhdGZvcm1faW5jb21pbmdQb3J0KCdyZWNlaXZlUmVxdWVzdCcsICRlbG0kanNvbiRKc29uJERlY29kZSR2YWx1ZSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlV29ya2VyJHN1YnNjcmlwdGlvbnMgPSBmdW5jdGlvbiAoX3YwKSB7CglyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZVdvcmtlciRyZWNlaXZlUmVxdWVzdCgkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlV29ya2VyJFJlcXVlc3RFdmVudCk7Cn07CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCA9IF9Kc29uX3N1Y2NlZWQ7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkZGVjb2RlVmFsdWUgPSBfSnNvbl9ydW47CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFByb3ZpZGVDb21wbGV0aW9uSXRlbXNSZXNwb25zZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQcm92aWRlQ29tcGxldGlvbkl0ZW1zUmVzcG9uc2UnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkUHJvdmlkZURlZmluaXRpb25SZXNwb25zZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQcm92aWRlRGVmaW5pdGlvblJlc3BvbnNlJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFByb3ZpZGVIb3ZlclJlc3BvbnNlID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1Byb3ZpZGVIb3ZlclJlc3BvbnNlJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFRleHREb2N1bWVudFJlZmVyZW5jZXNSZXNwb25zZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUZXh0RG9jdW1lbnRSZWZlcmVuY2VzUmVzcG9uc2UnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkVGV4dERvY3VtZW50UmVuYW1lUmVzcG9uc2UgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVGV4dERvY3VtZW50UmVuYW1lUmVzcG9uc2UnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkVGV4dERvY3VtZW50U3ltYm9sUmVzcG9uc2UgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVGV4dERvY3VtZW50U3ltYm9sUmVzcG9uc2UnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkV29ya3NwYWNlU3VtbWFyeVJlc3BvbnNlID0geyQ6ICdXb3Jrc3BhY2VTdW1tYXJ5UmVzcG9uc2UnfTsKdmFyICRlbG0kY29yZSRCYXNpY3MkY29tcGFyZSA9IF9VdGlsc19jb21wYXJlOwp2YXIgJGVsbSRjb3JlJERpY3QkZ2V0ID0gRjIoCglmdW5jdGlvbiAodGFyZ2V0S2V5LCBkaWN0KSB7CgkJZ2V0OgoJCXdoaWxlICh0cnVlKSB7CgkJCWlmIChkaWN0LiQgPT09ICdSQkVtcHR5X2VsbV9idWlsdGluJykgewoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQl9IGVsc2UgewoJCQkJdmFyIGtleSA9IGRpY3QuYjsKCQkJCXZhciB2YWx1ZSA9IGRpY3QuYzsKCQkJCXZhciBsZWZ0ID0gZGljdC5kOwoJCQkJdmFyIHJpZ2h0ID0gZGljdC5lOwoJCQkJdmFyIF92MSA9IEEyKCRlbG0kY29yZSRCYXNpY3MkY29tcGFyZSwgdGFyZ2V0S2V5LCBrZXkpOwoJCQkJc3dpdGNoIChfdjEuJCkgewoJCQkJCWNhc2UgJ0xUJzoKCQkJCQkJdmFyICR0ZW1wJHRhcmdldEtleSA9IHRhcmdldEtleSwKCQkJCQkJCSR0ZW1wJGRpY3QgPSBsZWZ0OwoJCQkJCQl0YXJnZXRLZXkgPSAkdGVtcCR0YXJnZXRLZXk7CgkJCQkJCWRpY3QgPSAkdGVtcCRkaWN0OwoJCQkJCQljb250aW51ZSBnZXQ7CgkJCQkJY2FzZSAnRVEnOgoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QodmFsdWUpOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCXZhciAkdGVtcCR0YXJnZXRLZXkgPSB0YXJnZXRLZXksCgkJCQkJCQkkdGVtcCRkaWN0ID0gcmlnaHQ7CgkJCQkJCXRhcmdldEtleSA9ICR0ZW1wJHRhcmdldEtleTsKCQkJCQkJZGljdCA9ICR0ZW1wJGRpY3Q7CgkJCQkJCWNvbnRpbnVlIGdldDsKCQkJCX0KCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJERpY3QkQmxhY2sgPSB7JDogJ0JsYWNrJ307CnZhciAkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4gPSBGNSgKCWZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlKSB7CgkJcmV0dXJuIHskOiAnUkJOb2RlX2VsbV9idWlsdGluJywgYTogYSwgYjogYiwgYzogYywgZDogZCwgZTogZX07Cgl9KTsKdmFyICRlbG0kY29yZSREaWN0JFJlZCA9IHskOiAnUmVkJ307CnZhciAkZWxtJGNvcmUkRGljdCRiYWxhbmNlID0gRjUoCglmdW5jdGlvbiAoY29sb3IsIGtleSwgdmFsdWUsIGxlZnQsIHJpZ2h0KSB7CgkJaWYgKChyaWdodC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgJiYgKHJpZ2h0LmEuJCA9PT0gJ1JlZCcpKSB7CgkJCXZhciBfdjEgPSByaWdodC5hOwoJCQl2YXIgcksgPSByaWdodC5iOwoJCQl2YXIgclYgPSByaWdodC5jOwoJCQl2YXIgckxlZnQgPSByaWdodC5kOwoJCQl2YXIgclJpZ2h0ID0gcmlnaHQuZTsKCQkJaWYgKChsZWZ0LiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSAmJiAobGVmdC5hLiQgPT09ICdSZWQnKSkgewoJCQkJdmFyIF92MyA9IGxlZnQuYTsKCQkJCXZhciBsSyA9IGxlZnQuYjsKCQkJCXZhciBsViA9IGxlZnQuYzsKCQkJCXZhciBsTGVmdCA9IGxlZnQuZDsKCQkJCXZhciBsUmlnaHQgPSBsZWZ0LmU7CgkJCQlyZXR1cm4gQTUoCgkJCQkJJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLAoJCQkJCSRlbG0kY29yZSREaWN0JFJlZCwKCQkJCQlrZXksCgkJCQkJdmFsdWUsCgkJCQkJQTUoJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLCAkZWxtJGNvcmUkRGljdCRCbGFjaywgbEssIGxWLCBsTGVmdCwgbFJpZ2h0KSwKCQkJCQlBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JEJsYWNrLCBySywgclYsIHJMZWZ0LCByUmlnaHQpKTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiBBNSgKCQkJCQkkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sCgkJCQkJY29sb3IsCgkJCQkJckssCgkJCQkJclYsCgkJCQkJQTUoJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLCAkZWxtJGNvcmUkRGljdCRSZWQsIGtleSwgdmFsdWUsIGxlZnQsIHJMZWZ0KSwKCQkJCQlyUmlnaHQpOwoJCQl9CgkJfSBlbHNlIHsKCQkJaWYgKCgoKGxlZnQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChsZWZ0LmEuJCA9PT0gJ1JlZCcpKSAmJiAobGVmdC5kLiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSkgJiYgKGxlZnQuZC5hLiQgPT09ICdSZWQnKSkgewoJCQkJdmFyIF92NSA9IGxlZnQuYTsKCQkJCXZhciBsSyA9IGxlZnQuYjsKCQkJCXZhciBsViA9IGxlZnQuYzsKCQkJCXZhciBfdjYgPSBsZWZ0LmQ7CgkJCQl2YXIgX3Y3ID0gX3Y2LmE7CgkJCQl2YXIgbGxLID0gX3Y2LmI7CgkJCQl2YXIgbGxWID0gX3Y2LmM7CgkJCQl2YXIgbGxMZWZ0ID0gX3Y2LmQ7CgkJCQl2YXIgbGxSaWdodCA9IF92Ni5lOwoJCQkJdmFyIGxSaWdodCA9IGxlZnQuZTsKCQkJCXJldHVybiBBNSgKCQkJCQkkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sCgkJCQkJJGVsbSRjb3JlJERpY3QkUmVkLAoJCQkJCWxLLAoJCQkJCWxWLAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkQmxhY2ssIGxsSywgbGxWLCBsbExlZnQsIGxsUmlnaHQpLAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkQmxhY2ssIGtleSwgdmFsdWUsIGxSaWdodCwgcmlnaHQpKTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiBBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sIGNvbG9yLCBrZXksIHZhbHVlLCBsZWZ0LCByaWdodCk7CgkJCX0KCQl9Cgl9KTsKdmFyICRlbG0kY29yZSREaWN0JGluc2VydEhlbHAgPSBGMygKCWZ1bmN0aW9uIChrZXksIHZhbHVlLCBkaWN0KSB7CgkJaWYgKGRpY3QuJCA9PT0gJ1JCRW1wdHlfZWxtX2J1aWx0aW4nKSB7CgkJCXJldHVybiBBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JFJlZCwga2V5LCB2YWx1ZSwgJGVsbSRjb3JlJERpY3QkUkJFbXB0eV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkUkJFbXB0eV9lbG1fYnVpbHRpbik7CgkJfSBlbHNlIHsKCQkJdmFyIG5Db2xvciA9IGRpY3QuYTsKCQkJdmFyIG5LZXkgPSBkaWN0LmI7CgkJCXZhciBuVmFsdWUgPSBkaWN0LmM7CgkJCXZhciBuTGVmdCA9IGRpY3QuZDsKCQkJdmFyIG5SaWdodCA9IGRpY3QuZTsKCQkJdmFyIF92MSA9IEEyKCRlbG0kY29yZSRCYXNpY3MkY29tcGFyZSwga2V5LCBuS2V5KTsKCQkJc3dpdGNoIChfdjEuJCkgewoJCQkJY2FzZSAnTFQnOgoJCQkJCXJldHVybiBBNSgKCQkJCQkJJGVsbSRjb3JlJERpY3QkYmFsYW5jZSwKCQkJCQkJbkNvbG9yLAoJCQkJCQluS2V5LAoJCQkJCQluVmFsdWUsCgkJCQkJCUEzKCRlbG0kY29yZSREaWN0JGluc2VydEhlbHAsIGtleSwgdmFsdWUsIG5MZWZ0KSwKCQkJCQkJblJpZ2h0KTsKCQkJCWNhc2UgJ0VRJzoKCQkJCQlyZXR1cm4gQTUoJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLCBuQ29sb3IsIG5LZXksIHZhbHVlLCBuTGVmdCwgblJpZ2h0KTsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIEE1KAoJCQkJCQkkZWxtJGNvcmUkRGljdCRiYWxhbmNlLAoJCQkJCQluQ29sb3IsCgkJCQkJCW5LZXksCgkJCQkJCW5WYWx1ZSwKCQkJCQkJbkxlZnQsCgkJCQkJCUEzKCRlbG0kY29yZSREaWN0JGluc2VydEhlbHAsIGtleSwgdmFsdWUsIG5SaWdodCkpOwoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkRGljdCRpbnNlcnQgPSBGMygKCWZ1bmN0aW9uIChrZXksIHZhbHVlLCBkaWN0KSB7CgkJdmFyIF92MCA9IEEzKCRlbG0kY29yZSREaWN0JGluc2VydEhlbHAsIGtleSwgdmFsdWUsIGRpY3QpOwoJCWlmICgoX3YwLiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSAmJiAoX3YwLmEuJCA9PT0gJ1JlZCcpKSB7CgkJCXZhciBfdjEgPSBfdjAuYTsKCQkJdmFyIGsgPSBfdjAuYjsKCQkJdmFyIHYgPSBfdjAuYzsKCQkJdmFyIGwgPSBfdjAuZDsKCQkJdmFyIHIgPSBfdjAuZTsKCQkJcmV0dXJuIEE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkQmxhY2ssIGssIHYsIGwsIHIpOwoJCX0gZWxzZSB7CgkJCXZhciB4ID0gX3YwOwoJCQlyZXR1cm4geDsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkYWRkRmlsZSA9IEYyKAoJZnVuY3Rpb24gKF92MCwgc3RhdGVCZWZvcmUpIHsKCQl2YXIgZmlsZVVyaSA9IF92MC5hOwoJCXZhciBmaWxlQ29udGVudCA9IF92MC5iOwoJCXZhciBtYXliZVRleHRDb250ZW50ID0gZnVuY3Rpb24gKCkgewoJCQl2YXIgX3Y0ID0gZmlsZUNvbnRlbnQuYXNUZXh0OwoJCQlpZiAoX3Y0LiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQl9IGVsc2UgewoJCQkJdmFyIGFzU3RyaW5nID0gX3Y0LmE7CgkJCQl2YXIgcGFyc2VkRmlsZSA9IGZ1bmN0aW9uICgpIHsKCQkJCQl2YXIgX3Y1ID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRQYXJzZXIkcGFyc2VUb0ZpbGUoYXNTdHJpbmcpOwoJCQkJCWlmIChfdjUuJCA9PT0gJ0VycicpIHsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBzeW50YXggPSBfdjUuYTsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJewoJCQkJCQkJCWNvbXBsZXRpb25JdGVtczogJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRjb21wbGV0aW9uSXRlbXNGcm9tTW9kdWxlKAoJCQkJCQkJCQl7ZmlsZVVyaTogZmlsZVVyaSwgc3ludGF4OiBzeW50YXgsIHRleHQ6IGFzU3RyaW5nfSksCgkJCQkJCQkJZmlsZVVyaTogZmlsZVVyaSwKCQkJCQkJCQlzeW50YXg6IHN5bnRheCwKCQkJCQkJCQl0ZXh0OiBhc1N0cmluZwoJCQkJCQkJfSk7CgkJCQkJfQoJCQkJfSgpOwoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCXtwYXJzZWRGaWxlOiBwYXJzZWRGaWxlLCB0ZXh0OiBhc1N0cmluZ30pOwoJCQl9CgkJfSgpOwoJCXZhciBtYXliZVByZXZpb3VzQ2FjaGVkID0gQTIoJGVsbSRjb3JlJERpY3QkZ2V0LCBmaWxlVXJpLCBzdGF0ZUJlZm9yZS5kb2N1bWVudENhY2hlKTsKCQl2YXIgcGFyc2VkRmlsZUZyb21QcmV2aW91c2x5Q2FjaGVkID0gZnVuY3Rpb24gKCkgewoJCQlpZiAobWF5YmVQcmV2aW91c0NhY2hlZC4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJfSBlbHNlIHsKCQkJCXZhciBwcmV2aW91c0NhY2hlZCA9IG1heWJlUHJldmlvdXNDYWNoZWQuYTsKCQkJCXJldHVybiBwcmV2aW91c0NhY2hlZC5wYXJzZWRGaWxlTGFzdFN1Y2Nlc3M7CgkJCX0KCQl9KCk7CgkJdmFyIHBhcnNlZEZpbGVMYXN0U3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKCQkJaWYgKG1heWJlVGV4dENvbnRlbnQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQlyZXR1cm4gcGFyc2VkRmlsZUZyb21QcmV2aW91c2x5Q2FjaGVkOwoJCQl9IGVsc2UgewoJCQkJdmFyIHRleHRDb250ZW50ID0gbWF5YmVUZXh0Q29udGVudC5hOwoJCQkJdmFyIF92MiA9IHRleHRDb250ZW50LnBhcnNlZEZpbGU7CgkJCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiBwYXJzZWRGaWxlRnJvbVByZXZpb3VzbHlDYWNoZWQ7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBwYXJzZWRGaWxlID0gX3YyLmE7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KHBhcnNlZEZpbGUpOwoJCQkJfQoJCQl9CgkJfSgpOwoJCXZhciBkb2N1bWVudENhY2hlID0gQTMoCgkJCSRlbG0kY29yZSREaWN0JGluc2VydCwKCQkJZmlsZVVyaSwKCQkJe3BhcnNlZEZpbGVMYXN0U3VjY2VzczogcGFyc2VkRmlsZUxhc3RTdWNjZXNzLCBzb3VyY2VCYXNlNjQ6IGZpbGVDb250ZW50LmFzQmFzZTY0LCB0ZXh0Q29udGVudDogbWF5YmVUZXh0Q29udGVudH0sCgkJCXN0YXRlQmVmb3JlLmRvY3VtZW50Q2FjaGUpOwoJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFdvcmtzcGFjZVN1bW1hcnlSZXNwb25zZSwKCQkJX1V0aWxzX3VwZGF0ZSgKCQkJCXN0YXRlQmVmb3JlLAoJCQkJe2RvY3VtZW50Q2FjaGU6IGRvY3VtZW50Q2FjaGV9KSk7Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUgPSBmdW5jdGlvbiAoX3YwKSB7Cgl2YXIgdiA9IF92MC5iOwoJcmV0dXJuIHY7Cn07CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGUkbW9kdWxlTmFtZSA9IGZ1bmN0aW9uIChtKSB7Cglzd2l0Y2ggKG0uJCkgewoJCWNhc2UgJ05vcm1hbE1vZHVsZSc6CgkJCXZhciB4ID0gbS5hOwoJCQlyZXR1cm4gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTm9kZSR2YWx1ZSh4Lm1vZHVsZU5hbWUpOwoJCWNhc2UgJ1BvcnRNb2R1bGUnOgoJCQl2YXIgeCA9IG0uYTsKCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoeC5tb2R1bGVOYW1lKTsKCQlkZWZhdWx0OgoJCQl2YXIgeCA9IG0uYTsKCQkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE5vZGUkdmFsdWUoeC5tb2R1bGVOYW1lKTsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkaGFuZGxlUmVxdWVzdEFkZFBhY2thZ2UgPSBGMygKCWZ1bmN0aW9uIChwYWNrYWdlVmVyc2lvbklkZW50aWZlciwgcGFja2FnZU1vZHVsZXMsIHN0YXRlQmVmb3JlKSB7CgkJdmFyIHBhcnNlZE1vZHVsZXMgPSBBMigKCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLAoJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQl2YXIgbW9kdWxlUGF0aCA9IF92MC5hOwoJCQkJdmFyIGZpbGVDb250ZW50ID0gX3YwLmI7CgkJCQl2YXIgX3YxID0gZmlsZUNvbnRlbnQuYXNUZXh0OwoJCQkJaWYgKF92MS4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBhc1N0cmluZyA9IF92MS5hOwoJCQkJCXZhciBfdjIgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRwYXJzZVRvRmlsZShhc1N0cmluZyk7CgkJCQkJaWYgKF92Mi4kID09PSAnRXJyJykgewoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIHN5bnRheCA9IF92Mi5hOwoJCQkJCQl2YXIgX3YzID0gc3ludGF4Lm1vZHVsZURlZmluaXRpb247CgkJCQkJCXZhciBtb2R1bGVEZWZpbml0aW9uID0gX3YzLmI7CgkJCQkJCXZhciBtb2R1bGVOYW1lID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlJG1vZHVsZU5hbWUobW9kdWxlRGVmaW5pdGlvbik7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJbW9kdWxlTmFtZSwKCQkJCQkJCQlfVXRpbHNfVHVwbGUzKAoJCQkJCQkJCQltb2R1bGVQYXRoLAoJCQkJCQkJCQlzeW50YXgsCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkY29tcGxldGlvbkl0ZW1zRnJvbU1vZHVsZSgKCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQlmaWxlVXJpOiBBMigkZWxtJGNvcmUkU3RyaW5nJGpvaW4sICcvJywgbW9kdWxlUGF0aCksCgkJCQkJCQkJCQkJc3ludGF4OiBzeW50YXgsCgkJCQkJCQkJCQkJdGV4dDogYXNTdHJpbmcKCQkJCQkJCQkJCX0pKSkpOwoJCQkJCX0KCQkJCX0KCQkJfSwKCQkJcGFja2FnZU1vZHVsZXMpOwoJCXZhciBzdGF0ZSA9IF9VdGlsc191cGRhdGUoCgkJCXN0YXRlQmVmb3JlLAoJCQl7CgkJCQllbG1QYWNrYWdlczogQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQlfVXRpbHNfVHVwbGUyKHBhY2thZ2VWZXJzaW9uSWRlbnRpZmVyLCBwYXJzZWRNb2R1bGVzKSwKCQkJCQlzdGF0ZUJlZm9yZS5lbG1QYWNrYWdlcykKCQkJfSk7CgkJcmV0dXJuIF9VdGlsc19UdXBsZTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRXb3Jrc3BhY2VTdW1tYXJ5UmVzcG9uc2UsIHN0YXRlKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0Q29tbWVudHNGcm9tRGVjbGFyYXRpb24gPSBmdW5jdGlvbiAoZGVjbGFyYXRpb24pIHsKCXN3aXRjaCAoZGVjbGFyYXRpb24uJCkgewoJCWNhc2UgJ0Z1bmN0aW9uRGVjbGFyYXRpb24nOgoJCQl2YXIgX2Z1bmN0aW9uID0gZGVjbGFyYXRpb24uYTsKCQkJdmFyIF92MSA9IF9mdW5jdGlvbi5kb2N1bWVudGF0aW9uOwoJCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJfSBlbHNlIHsKCQkJCXZhciBkb2N1bWVudGF0aW9uID0gX3YxLmE7CgkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCVtkb2N1bWVudGF0aW9uXSk7CgkJCX0KCQljYXNlICdBbGlhc0RlY2xhcmF0aW9uJzoKCQkJdmFyIHR5cGVBbGlhcyA9IGRlY2xhcmF0aW9uLmE7CgkJCXZhciBfdjIgPSB0eXBlQWxpYXMuZG9jdW1lbnRhdGlvbjsKCQkJaWYgKF92Mi4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCX0gZWxzZSB7CgkJCQl2YXIgZG9jdW1lbnRhdGlvbiA9IF92Mi5hOwoJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbZG9jdW1lbnRhdGlvbl0pOwoJCQl9CgkJY2FzZSAnQ3VzdG9tVHlwZURlY2xhcmF0aW9uJzoKCQkJdmFyIHR5cGVEZWNsYXJhdGlvbiA9IGRlY2xhcmF0aW9uLmE7CgkJCXZhciBfdjMgPSB0eXBlRGVjbGFyYXRpb24uZG9jdW1lbnRhdGlvbjsKCQkJaWYgKF92My4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCX0gZWxzZSB7CgkJCQl2YXIgZG9jdW1lbnRhdGlvbiA9IF92My5hOwoJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQlbZG9jdW1lbnRhdGlvbl0pOwoJCQl9CgkJY2FzZSAnUG9ydERlY2xhcmF0aW9uJzoKCQkJcmV0dXJuIF9MaXN0X05pbDsKCQljYXNlICdJbmZpeERlY2xhcmF0aW9uJzoKCQkJcmV0dXJuIF9MaXN0X05pbDsKCQlkZWZhdWx0OgoJCQlyZXR1cm4gX0xpc3RfTmlsOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0Q29tbWVudHNJbkZpbGUgPSBmdW5jdGlvbiAocGFyc2VkTW9kdWxlKSB7Cgl2YXIgZnJvbURlY2xhcmF0aW9ucyA9IEEyKAoJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQlmdW5jdGlvbiAoX3YwKSB7CgkJCXZhciBkZWNsYXJhdGlvbiA9IF92MC5iOwoJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0Q29tbWVudHNGcm9tRGVjbGFyYXRpb24oZGVjbGFyYXRpb24pOwoJCX0sCgkJcGFyc2VkTW9kdWxlLmRlY2xhcmF0aW9ucyk7CglyZXR1cm4gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJW3BhcnNlZE1vZHVsZS5jb21tZW50cywgZnJvbURlY2xhcmF0aW9uc10pKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmFuZ2VJbnRlcnNlY3RzTG9jYXRpb24gPSBGMigKCWZ1bmN0aW9uIChsb2NhdGlvbiwgcmFuZ2UpIHsKCQl2YXIgc3RhcnQgPSByYW5nZS5zdGFydDsKCQl2YXIgc3RhcnRDb2x1bW4gPSBzdGFydC5jb2x1bW47CgkJdmFyIHN0YXJ0Um93ID0gc3RhcnQucm93OwoJCXZhciBsb2NhdGlvblJvdyA9IGxvY2F0aW9uLnJvdzsKCQl2YXIgZW5kID0gcmFuZ2UuZW5kOwoJCXZhciBlbmRSb3cgPSBlbmQucm93OwoJCXJldHVybiAoX1V0aWxzX2NtcChsb2NhdGlvblJvdywgc3RhcnRSb3cpIDwgMCkgPyBmYWxzZSA6ICgoX1V0aWxzX2NtcChsb2NhdGlvblJvdywgZW5kUm93KSA+IDApID8gZmFsc2UgOiAoKF9VdGlsc19lcShsb2NhdGlvblJvdywgc3RhcnRSb3cpICYmIF9VdGlsc19lcShsb2NhdGlvblJvdywgZW5kUm93KSkgPyAoKF9VdGlsc19jbXAobG9jYXRpb24uY29sdW1uLCBzdGFydENvbHVtbikgPCAwKSA/IGZhbHNlIDogKChfVXRpbHNfY21wKGxvY2F0aW9uLmNvbHVtbiwgZW5kLmNvbHVtbikgPiAwKSA/IGZhbHNlIDogdHJ1ZSkpIDogKF9VdGlsc19lcShsb2NhdGlvblJvdywgc3RhcnRSb3cpID8gKChfVXRpbHNfY21wKGxvY2F0aW9uLmNvbHVtbiwgc3RhcnRDb2x1bW4pIDwgMCkgPyBmYWxzZSA6IHRydWUpIDogKF9VdGlsc19lcShsb2NhdGlvblJvdywgZW5kUm93KSA/ICgoX1V0aWxzX2NtcChsb2NhdGlvbi5jb2x1bW4sIGVuZC5jb2x1bW4pID4gMCkgPyBmYWxzZSA6IHRydWUpIDogdHJ1ZSkpKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbG9jYXRpb25Jc0luQ29tbWVudCA9IEYyKAoJZnVuY3Rpb24gKGxvY2F0aW9uLCBwYXJzZWRNb2R1bGUpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRMaXN0JGFueSwKCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJdmFyIGNvbW1lbnRSYW5nZSA9IF92MC5hOwoJCQkJdmFyIGNvbW1lbnQgPSBfdjAuYjsKCQkJCXZhciByYW5nZSA9IEEyKCRlbG0kY29yZSRTdHJpbmckc3RhcnRzV2l0aCwgJy0tJywgY29tbWVudCkgPyBfVXRpbHNfdXBkYXRlKAoJCQkJCWNvbW1lbnRSYW5nZSwKCQkJCQl7CgkJCQkJCWVuZDoge2NvbHVtbjogY29tbWVudFJhbmdlLmVuZC5jb2x1bW4gKyA5OTk5LCByb3c6IGNvbW1lbnRSYW5nZS5lbmQucm93fQoJCQkJCX0pIDogY29tbWVudFJhbmdlOwoJCQkJcmV0dXJuIEEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmFuZ2VJbnRlcnNlY3RzTG9jYXRpb24sIGxvY2F0aW9uLCByYW5nZSk7CgkJCX0sCgkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdENvbW1lbnRzSW5GaWxlKHBhcnNlZE1vZHVsZSkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJG1vbmFjb0NvbXBsZXRpb25JdGVtRnJvbUNvbXBsZXRpb25JdGVtID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIGxhYmVsID0gX3YwLmE7Cgl2YXIgaW5zZXJ0VGV4dCA9IF92MC5iOwoJdmFyIGtpbmQgPSBfdjAuYzsKCXZhciBkb2N1bWVudGF0aW9uID0gX3YwLmQ7CglyZXR1cm4ge2RvY3VtZW50YXRpb246IGRvY3VtZW50YXRpb24sIGluc2VydFRleHQ6IGluc2VydFRleHQsIGtpbmQ6IGtpbmQsIGxhYmVsOiBsYWJlbH07Cn07CnZhciAkZWxtJGNvcmUkTWF5YmUkYW5kVGhlbiA9IEYyKAoJZnVuY3Rpb24gKGNhbGxiYWNrLCBtYXliZVZhbHVlKSB7CgkJaWYgKG1heWJlVmFsdWUuJCA9PT0gJ0p1c3QnKSB7CgkJCXZhciB2YWx1ZSA9IG1heWJlVmFsdWUuYTsKCQkJcmV0dXJuIGNhbGxiYWNrKHZhbHVlKTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGNoYXJJc0FsbG93ZWRJbkRlY2xhcmF0aW9uTmFtZSA9IGZ1bmN0aW9uIChfY2hhcikgewoJcmV0dXJuICRlbG0kY29yZSRDaGFyJGlzQWxwaGFOdW0oX2NoYXIpIHx8IF9VdGlsc19lcSgKCQlfY2hhciwKCQlfVXRpbHNfY2hyKCdfJykpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRXb3Jrc3BhY2VGaWxlTG9jYXRpb24gPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnV29ya3NwYWNlRmlsZUxvY2F0aW9uJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJEVsbVBhY2thZ2VGaWxlTG9jYXRpb24gPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnRWxtUGFja2FnZUZpbGVMb2NhdGlvbicsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGlzSXRlbUltcGxpY2l0bHlFeHBvc2VkID0gRjIoCglmdW5jdGlvbiAobW9kdWxlTmFtZSwgX3YwKSB7CgkJdmFyIGl0ZW1JbnNlcnRUZXh0ID0gX3YwLmI7CgkJX3YxJDY6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKG1vZHVsZU5hbWUuYikgewoJCQkJaWYgKCFtb2R1bGVOYW1lLmIuYikgewoJCQkJCXN3aXRjaCAobW9kdWxlTmFtZS5hKSB7CgkJCQkJCWNhc2UgJ0Jhc2ljcyc6CgkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJY2FzZSAnU3RyaW5nJzoKCQkJCQkJCWlmIChpdGVtSW5zZXJ0VGV4dCA9PT0gJ1N0cmluZycpIHsKCQkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCQkJfQoJCQkJCQljYXNlICdNYXliZSc6CgkJCQkJCQlzd2l0Y2ggKGl0ZW1JbnNlcnRUZXh0KSB7CgkJCQkJCQkJY2FzZSAnTWF5YmUnOgoJCQkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJCQljYXNlICdKdXN0JzoKCQkJCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJCQkJY2FzZSAnTm90aGluZyc6CgkJCQkJCQkJCXJldHVybiB0cnVlOwoJCQkJCQkJCWRlZmF1bHQ6CgkJCQkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQkJCX0KCQkJCQkJY2FzZSAnTGlzdCc6CgkJCQkJCQlpZiAoaXRlbUluc2VydFRleHQgPT09ICdMaXN0JykgewoJCQkJCQkJCXJldHVybiB0cnVlOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCQl9CgkJCQkJCWNhc2UgJ1Jlc3VsdCc6CgkJCQkJCQlzd2l0Y2ggKGl0ZW1JbnNlcnRUZXh0KSB7CgkJCQkJCQkJY2FzZSAnUmVzdWx0JzoKCQkJCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJCQkJY2FzZSAnT2snOgoJCQkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJCQljYXNlICdFcnInOgoJCQkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJCQlkZWZhdWx0OgoJCQkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCQl9CgkJCQkJCWRlZmF1bHQ6CgkJCQkJCQlicmVhayBfdjEkNjsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCWlmICgoKG1vZHVsZU5hbWUuYSA9PT0gJ1BsYXRmb3JtJykgJiYgKG1vZHVsZU5hbWUuYi5hID09PSAnQ21kJykpICYmICghbW9kdWxlTmFtZS5iLmIuYikpIHsKCQkJCQkJdmFyIF92NiA9IG1vZHVsZU5hbWUuYjsKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJfSBlbHNlIHsKCQkJCQkJYnJlYWsgX3YxJDY7CgkJCQkJfQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJYnJlYWsgX3YxJDY7CgkJCX0KCQl9CgkJcmV0dXJuIGZhbHNlOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGNvbW1vbkltcGxpY2l0VG9wTGV2ZWxJbXBvcnRzTmV3ID0gZnVuY3Rpb24gKGxhbmd1YWdlU2VydmljZVN0YXRlKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCWZ1bmN0aW9uIChfdjApIHsKCQkJdmFyIHBhY2thZ2VWZXJzaW9uSWRlbnRpZmVyID0gX3YwLmE7CgkJCXZhciBwYWNrYWdlTW9kdWxlcyA9IF92MC5iOwoJCQlpZiAocGFja2FnZVZlcnNpb25JZGVudGlmZXIuYSA9PT0gJ2VsbS9jb3JlJykgewoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQkJCXZhciBtb2R1bGVOYW1lID0gX3YyLmE7CgkJCQkJCXZhciBfdjMgPSBfdjIuYjsKCQkJCQkJdmFyIG1vZHVsZUZpbGVQYXRoID0gX3YzLmE7CgkJCQkJCXZhciBtb2R1bGVDb21wbGV0aW9uSXRlbXMgPSBfdjMuYzsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLAoJCQkJCQkJZnVuY3Rpb24gKGl0ZW0pIHsKCQkJCQkJCQlyZXR1cm4gaXRlbS5pc0V4cG9zZWQgPyAoQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRpc0l0ZW1JbXBsaWNpdGx5RXhwb3NlZCwgbW9kdWxlTmFtZSwgaXRlbS5jb21wbGV0aW9uSXRlbSkgPyAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRFbG1QYWNrYWdlRmlsZUxvY2F0aW9uLCBwYWNrYWdlVmVyc2lvbklkZW50aWZlciwgbW9kdWxlRmlsZVBhdGgpLAoJCQkJCQkJCQkJCWl0ZW0ucmFuZ2UpLAoJCQkJCQkJCQkJaXRlbS5jb21wbGV0aW9uSXRlbSkpIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCQl9LAoJCQkJCQkJbW9kdWxlQ29tcGxldGlvbkl0ZW1zLmZyb21Ub3BMZXZlbCk7CgkJCQkJfSwKCQkJCQlwYWNrYWdlTW9kdWxlcyk7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQl9CgkJfSwKCQlsYW5ndWFnZVNlcnZpY2VTdGF0ZS5lbG1QYWNrYWdlcyk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGNvbW1vbkltcGxpY2l0VG9wTGV2ZWxJbXBvcnRzT2xkID0gZnVuY3Rpb24gKGxhbmd1YWdlU2VydmljZVN0YXRlKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCWZ1bmN0aW9uIChjb3JlTW9kdWxlKSB7CgkJCXZhciBtb2R1bGVDb21wbGV0aW9uSXRlbXMgPSBjb3JlTW9kdWxlLnBhcnNlUmVzdWx0LmNvbXBsZXRpb25JdGVtczsKCQkJdmFyIF92MCA9IGNvcmVNb2R1bGUucGFyc2VSZXN1bHQuc3ludGF4Lm1vZHVsZURlZmluaXRpb247CgkJCXZhciBtb2R1bGVEZWZpbml0aW9uID0gX3YwLmI7CgkJCXZhciBtb2R1bGVOYW1lID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlJG1vZHVsZU5hbWUobW9kdWxlRGVmaW5pdGlvbik7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlck1hcCwKCQkJCWZ1bmN0aW9uIChpdGVtKSB7CgkJCQkJcmV0dXJuIGl0ZW0uaXNFeHBvc2VkID8gKEEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkaXNJdGVtSW1wbGljaXRseUV4cG9zZWQsIG1vZHVsZU5hbWUsIGl0ZW0uY29tcGxldGlvbkl0ZW0pID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCV9VdGlsc19UdXBsZTIoaXRlbS5yYW5nZSwgaXRlbS5jb21wbGV0aW9uSXRlbSkpIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9LAoJCQkJbW9kdWxlQ29tcGxldGlvbkl0ZW1zLmZyb21Ub3BMZXZlbCk7CgkJfSwKCQlsYW5ndWFnZVNlcnZpY2VTdGF0ZS5jb3JlTW9kdWxlc0NhY2hlKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkY29tbW9uSW1wbGljaXRUb3BMZXZlbEltcG9ydHMgPSBmdW5jdGlvbiAobGFuZ3VhZ2VTZXJ2aWNlU3RhdGUpIHsKCXJldHVybiBfVXRpbHNfZXEobGFuZ3VhZ2VTZXJ2aWNlU3RhdGUuZWxtUGFja2FnZXMsIF9MaXN0X05pbCkgPyBBMigKCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJZnVuY3Rpb24gKF92MCkgewoJCQl2YXIgcmFuZ2UgPSBfdjAuYTsKCQkJdmFyIGNvbXBsZXRpb25JdGVtID0gX3YwLmI7CgkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFdvcmtzcGFjZUZpbGVMb2NhdGlvbignZWxtL2NvcmUnKSwKCQkJCQlyYW5nZSksCgkJCQljb21wbGV0aW9uSXRlbSk7CgkJfSwKCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGNvbW1vbkltcGxpY2l0VG9wTGV2ZWxJbXBvcnRzT2xkKGxhbmd1YWdlU2VydmljZVN0YXRlKSkgOiAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGNvbW1vbkltcGxpY2l0VG9wTGV2ZWxJbXBvcnRzTmV3KGxhbmd1YWdlU2VydmljZVN0YXRlKTsKfTsKdmFyICRlbG0kY29yZSRMaXN0JGhlYWQgPSBmdW5jdGlvbiAobGlzdCkgewoJaWYgKGxpc3QuYikgewoJCXZhciB4ID0gbGlzdC5hOwoJCXZhciB4cyA9IGxpc3QuYjsKCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoeCk7Cgl9IGVsc2UgewoJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCX0KfTsKdmFyICRlbG0kY29yZSRMaXN0JGZpbHRlciA9IEYyKAoJZnVuY3Rpb24gKGlzR29vZCwgbGlzdCkgewoJCXJldHVybiBBMygKCQkJJGVsbSRjb3JlJExpc3QkZm9sZHIsCgkJCUYyKAoJCQkJZnVuY3Rpb24gKHgsIHhzKSB7CgkJCQkJcmV0dXJuIGlzR29vZCh4KSA/IEEyKCRlbG0kY29yZSRMaXN0JGNvbnMsIHgsIHhzKSA6IHhzOwoJCQkJfSksCgkJCV9MaXN0X05pbCwKCQkJbGlzdCk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21tb24kbGlzdE1hcEZpbmQgPSBGMigKCWZ1bmN0aW9uIChtYXBJdGVtLCBsaXN0KSB7CgkJbGlzdE1hcEZpbmQ6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFsaXN0LmIpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJfSBlbHNlIHsKCQkJCXZhciBpdGVtID0gbGlzdC5hOwoJCQkJdmFyIHJlc3QgPSBsaXN0LmI7CgkJCQl2YXIgX3YxID0gbWFwSXRlbShpdGVtKTsKCQkJCWlmIChfdjEuJCA9PT0gJ0p1c3QnKSB7CgkJCQkJdmFyIGl0ZW1PayA9IF92MS5hOwoJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChpdGVtT2spOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgJHRlbXAkbWFwSXRlbSA9IG1hcEl0ZW0sCgkJCQkJCSR0ZW1wJGxpc3QgPSByZXN0OwoJCQkJCW1hcEl0ZW0gPSAkdGVtcCRtYXBJdGVtOwoJCQkJCWxpc3QgPSAkdGVtcCRsaXN0OwoJCQkJCWNvbnRpbnVlIGxpc3RNYXBGaW5kOwoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGltcG9ydEV4cG9zaW5nc0Zyb21GaWxlID0gRjIoCglmdW5jdGlvbiAoZmlsZU9wZW5lZEluRWRpdG9yLCBsYW5ndWFnZVNlcnZpY2VTdGF0ZSkgewoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQl2YXIgaW1wb3J0U3ludGF4ID0gX3YwLmI7CgkJCQl2YXIgX3YxID0gaW1wb3J0U3ludGF4LmV4cG9zaW5nTGlzdDsKCQkJCWlmIChfdjEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIF92MiA9IF92MS5hOwoJCQkJCXZhciBleHBvc2luZ0xpc3QgPSBfdjIuYjsKCQkJCQl2YXIgX3YzID0gaW1wb3J0U3ludGF4Lm1vZHVsZU5hbWU7CgkJCQkJdmFyIGNhbm9uaWNhbE5hbWUgPSBfdjMuYjsKCQkJCQl2YXIgX3Y0ID0gQTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21tb24kbGlzdE1hcEZpbmQsCgkJCQkJCWZ1bmN0aW9uIChfdjUpIHsKCQkJCQkJCXZhciBmaWxlQ2FjaGUgPSBfdjUuYjsKCQkJCQkJCXZhciBfdjYgPSBmaWxlQ2FjaGUucGFyc2VkRmlsZUxhc3RTdWNjZXNzOwoJCQkJCQkJaWYgKF92Ni4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBtb2R1bGVDYW5kaWRhdGUgPSBfdjYuYTsKCQkJCQkJCQl2YXIgX3Y3ID0gbW9kdWxlQ2FuZGlkYXRlLnN5bnRheC5tb2R1bGVEZWZpbml0aW9uOwoJCQkJCQkJCXZhciBjYW5kaWRhdGVNb2R1bGVEZWZpbml0aW9uID0gX3Y3LmI7CgkJCQkJCQkJcmV0dXJuIF9VdGlsc19lcSgKCQkJCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlJG1vZHVsZU5hbWUoY2FuZGlkYXRlTW9kdWxlRGVmaW5pdGlvbiksCgkJCQkJCQkJCWNhbm9uaWNhbE5hbWUpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QobW9kdWxlQ2FuZGlkYXRlKSA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCQkJfQoJCQkJCQl9LAoJCQkJCQkkZWxtJGNvcmUkRGljdCR0b0xpc3QobGFuZ3VhZ2VTZXJ2aWNlU3RhdGUuZG9jdW1lbnRDYWNoZSkpOwoJCQkJCWlmIChfdjQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIGltcG9ydGVkUGFyc2VkTW9kdWxlID0gX3Y0LmE7CgkJCQkJCXZhciBpbXBvcnRlZE1vZHVsZUl0ZW1zID0gQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsCgkJCQkJCQlmdW5jdGlvbiAoaXRlbSkgewoJCQkJCQkJCXJldHVybiBpdGVtLmlzRXhwb3NlZCA/ICRlbG0kY29yZSRNYXliZSRKdXN0KGl0ZW0uY29tcGxldGlvbkl0ZW0pIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCQl9LAoJCQkJCQkJaW1wb3J0ZWRQYXJzZWRNb2R1bGUuY29tcGxldGlvbkl0ZW1zLmZyb21Ub3BMZXZlbCk7CgkJCQkJCWlmIChleHBvc2luZ0xpc3QuJCA9PT0gJ0FsbCcpIHsKCQkJCQkJCXJldHVybiBpbXBvcnRlZE1vZHVsZUl0ZW1zOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIHRvcExldmVsRXhwb3NpbmdzID0gZXhwb3NpbmdMaXN0LmE7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCQkJCWZ1bmN0aW9uIChfdjkpIHsKCQkJCQkJCQkJdmFyIHRvcExldmVsRXhwb3NlID0gX3Y5LmI7CgkJCQkJCQkJCXZhciBleHBvc2VkTmFtZSA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJCQkJCXN3aXRjaCAodG9wTGV2ZWxFeHBvc2UuJCkgewoJCQkJCQkJCQkJCWNhc2UgJ0luZml4RXhwb3NlJzoKCQkJCQkJCQkJCQkJdmFyIG5hbWUgPSB0b3BMZXZlbEV4cG9zZS5hOwoJCQkJCQkJCQkJCQlyZXR1cm4gbmFtZTsKCQkJCQkJCQkJCQljYXNlICdGdW5jdGlvbkV4cG9zZSc6CgkJCQkJCQkJCQkJCXZhciBuYW1lID0gdG9wTGV2ZWxFeHBvc2UuYTsKCQkJCQkJCQkJCQkJcmV0dXJuIG5hbWU7CgkJCQkJCQkJCQkJY2FzZSAnVHlwZU9yQWxpYXNFeHBvc2UnOgoJCQkJCQkJCQkJCQl2YXIgbmFtZSA9IHRvcExldmVsRXhwb3NlLmE7CgkJCQkJCQkJCQkJCXJldHVybiBuYW1lOwoJCQkJCQkJCQkJCWRlZmF1bHQ6CgkJCQkJCQkJCQkJCXZhciB0eXBlRXhwb3NlID0gdG9wTGV2ZWxFeHBvc2UuYTsKCQkJCQkJCQkJCQkJcmV0dXJuIHR5cGVFeHBvc2UubmFtZTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfSgpOwoJCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXIsCgkJCQkJCQkJCQlmdW5jdGlvbiAoX3YxMCkgewoJCQkJCQkJCQkJCXZhciBpbnNlcnRUZXh0ID0gX3YxMC5iOwoJCQkJCQkJCQkJCXJldHVybiBfVXRpbHNfZXEoaW5zZXJ0VGV4dCwgZXhwb3NlZE5hbWUpOwoJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCWltcG9ydGVkTW9kdWxlSXRlbXMpOwoJCQkJCQkJCX0sCgkJCQkJCQkJdG9wTGV2ZWxFeHBvc2luZ3MpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9LAoJCQlmaWxlT3BlbmVkSW5FZGl0b3Iuc3ludGF4LmltcG9ydHMpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGVsbUNvcmVNb2R1bGVJc0ltcGxpY2l0bHlJbXBvcnRlZCA9IGZ1bmN0aW9uIChtb2R1bGVOYW1lKSB7CglfdjAkNjoKCXdoaWxlICh0cnVlKSB7CgkJaWYgKG1vZHVsZU5hbWUuYiAmJiAoIW1vZHVsZU5hbWUuYi5iKSkgewoJCQlzd2l0Y2ggKG1vZHVsZU5hbWUuYSkgewoJCQkJY2FzZSAnQmFzaWNzJzoKCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCWNhc2UgJ0xpc3QnOgoJCQkJCXJldHVybiB0cnVlOwoJCQkJY2FzZSAnTWF5YmUnOgoJCQkJCXJldHVybiB0cnVlOwoJCQkJY2FzZSAnUmVzdWx0JzoKCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCWNhc2UgJ1N0cmluZyc6CgkJCQkJcmV0dXJuIHRydWU7CgkJCQljYXNlICdQbGF0Zm9ybSc6CgkJCQkJcmV0dXJuIHRydWU7CgkJCQlkZWZhdWx0OgoJCQkJCWJyZWFrIF92MCQ2OwoJCQl9CgkJfSBlbHNlIHsKCQkJYnJlYWsgX3YwJDY7CgkJfQoJfQoJcmV0dXJuIGZhbHNlOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRmaW5kTW9kdWxlSW5QYWNrYWdlc0J5TW9kdWxlTmFtZSA9IEYyKAoJZnVuY3Rpb24gKG1vZHVsZU5hbWUsIGxhbmd1YWdlU2VydmljZVN0YXRlKSB7CgkJcmV0dXJuIEEyKAoJCQkkYXV0aG9yJHByb2plY3QkQ29tbW9uJGxpc3RNYXBGaW5kLAoJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQl2YXIgcGFja2FnZVZlcnNpb25JZGVudGlmZXIgPSBfdjAuYTsKCQkJCXZhciBwYWNrYWdlTW9kdWxlcyA9IF92MC5iOwoJCQkJdmFyIF92MSA9ICRlbG0kY29yZSRMaXN0JGhlYWQoCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlck1hcCwKCQkJCQkJZnVuY3Rpb24gKF92MikgewoJCQkJCQkJdmFyIG1vZHVsZU1vZHVsZU5hbWUgPSBfdjIuYTsKCQkJCQkJCXZhciBfdjMgPSBfdjIuYjsKCQkJCQkJCXZhciBtb2R1bGVQYXRoID0gX3YzLmE7CgkJCQkJCQl2YXIgbW9kdWxlU3ludGF4ID0gX3YzLmI7CgkJCQkJCQl2YXIgbW9kdWxlQ29tcGxldGlvbkl0ZW1zID0gX3YzLmM7CgkJCQkJCQlyZXR1cm4gX1V0aWxzX2VxKG1vZHVsZU1vZHVsZU5hbWUsIG1vZHVsZU5hbWUpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJX1V0aWxzX1R1cGxlMygKCQkJCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRFbG1QYWNrYWdlRmlsZUxvY2F0aW9uLCBwYWNrYWdlVmVyc2lvbklkZW50aWZlciwgbW9kdWxlUGF0aCksCgkJCQkJCQkJCW1vZHVsZVN5bnRheCwKCQkJCQkJCQkJbW9kdWxlQ29tcGxldGlvbkl0ZW1zKSkgOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQkJfSwKCQkJCQkJcGFja2FnZU1vZHVsZXMpKTsKCQkJCWlmIChfdjEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgbW9kdWxlQ29tcGxldGlvbkl0ZW1zID0gX3YxLmE7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KG1vZHVsZUNvbXBsZXRpb25JdGVtcyk7CgkJCQl9CgkJCX0sCgkJCWxhbmd1YWdlU2VydmljZVN0YXRlLmVsbVBhY2thZ2VzKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRtb2R1bGVzQXZhaWxhYmxlRm9ySW1wb3J0RnJvbVN0YXRlID0gZnVuY3Rpb24gKGxhbmd1YWdlU2VydmljZVN0YXRlKSB7CglyZXR1cm4gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsCgkJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQkJdmFyIGZpbGVDYWNoZSA9IF92MC5iOwoJCQkJCXJldHVybiBmaWxlQ2FjaGUucGFyc2VkRmlsZUxhc3RTdWNjZXNzOwoJCQkJfSwKCQkJCSRlbG0kY29yZSREaWN0JHRvTGlzdChsYW5ndWFnZVNlcnZpY2VTdGF0ZS5kb2N1bWVudENhY2hlKSksCgkJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJcmV0dXJuICQucGFyc2VSZXN1bHQ7CgkJCQl9LAoJCQkJbGFuZ3VhZ2VTZXJ2aWNlU3RhdGUuY29yZU1vZHVsZXNDYWNoZSkKCQkJXSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRpbXBvcnRlZE1vZHVsZXNGcm9tRmlsZSA9IEYyKAoJZnVuY3Rpb24gKGZpbGVTeW50YXgsIGxhbmd1YWdlU2VydmljZVN0YXRlKSB7CgkJdmFyIHBhcnNlZE1vZHVsZUZyb21Nb2R1bGVOYW1lID0gZnVuY3Rpb24gKGNhbm9uaWNhbE1vZHVsZU5hbWUpIHsKCQkJdmFyIF92MTEgPSBBMigKCQkJCSRhdXRob3IkcHJvamVjdCRDb21tb24kbGlzdE1hcEZpbmQsCgkJCQlmdW5jdGlvbiAobW9kdWxlQXZhaWxhYmxlKSB7CgkJCQkJdmFyIF92MTIgPSBtb2R1bGVBdmFpbGFibGUuc3ludGF4Lm1vZHVsZURlZmluaXRpb247CgkJCQkJdmFyIG1vZHVsZURlZmluaXRpb24gPSBfdjEyLmI7CgkJCQkJcmV0dXJuIF9VdGlsc19lcSgKCQkJCQkJJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlJG1vZHVsZU5hbWUobW9kdWxlRGVmaW5pdGlvbiksCgkJCQkJCWNhbm9uaWNhbE1vZHVsZU5hbWUpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCV9VdGlsc19UdXBsZTMoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFdvcmtzcGFjZUZpbGVMb2NhdGlvbihtb2R1bGVBdmFpbGFibGUuZmlsZVVyaSksCgkJCQkJCQltb2R1bGVBdmFpbGFibGUuc3ludGF4LAoJCQkJCQkJbW9kdWxlQXZhaWxhYmxlLmNvbXBsZXRpb25JdGVtcykpIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9LAoJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRtb2R1bGVzQXZhaWxhYmxlRm9ySW1wb3J0RnJvbVN0YXRlKGxhbmd1YWdlU2VydmljZVN0YXRlKSk7CgkJCWlmIChfdjExLiQgPT09ICdKdXN0JykgewoJCQkJdmFyIGZyb21Xb3Jrc3BhY2UgPSBfdjExLmE7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoZnJvbVdvcmtzcGFjZSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgX3YxMyA9IEEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkZmluZE1vZHVsZUluUGFja2FnZXNCeU1vZHVsZU5hbWUsIGNhbm9uaWNhbE1vZHVsZU5hbWUsIGxhbmd1YWdlU2VydmljZVN0YXRlKTsKCQkJCWlmIChfdjEzLiQgPT09ICdKdXN0JykgewoJCQkJCXZhciBmcm9tUGFja2FnZSA9IF92MTMuYTsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoZnJvbVBhY2thZ2UpOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9CgkJCX0KCQl9OwoJCXZhciBpbXBsaWNpdGx5SW1wb3J0ZWRNb2R1bGVzT2xkID0gQTIoCgkJCSRlbG0kY29yZSRMaXN0JGZpbHRlck1hcCwKCQkJZnVuY3Rpb24gKGNvcmVNb2R1bGUpIHsKCQkJCWlmIChjb3JlTW9kdWxlLmltcGxpY2l0SW1wb3J0KSB7CgkJCQkJdmFyIF92MTAgPSBjb3JlTW9kdWxlLnBhcnNlUmVzdWx0LnN5bnRheC5tb2R1bGVEZWZpbml0aW9uOwoJCQkJCXZhciBtb2R1bGVEZWZpbml0aW9uID0gX3YxMC5iOwoJCQkJCXZhciBjYW5vbmljYWxOYW1lID0gJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkTW9kdWxlJG1vZHVsZU5hbWUobW9kdWxlRGVmaW5pdGlvbik7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQl7CgkJCQkJCQljYW5vbmljYWxOYW1lOiBjYW5vbmljYWxOYW1lLAoJCQkJCQkJZmlsZUxvY2F0aW9uOiAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFdvcmtzcGFjZUZpbGVMb2NhdGlvbihjb3JlTW9kdWxlLnBhcnNlUmVzdWx0LmZpbGVVcmkpLAoJCQkJCQkJaW1wb3J0ZWROYW1lOiBjYW5vbmljYWxOYW1lLAoJCQkJCQkJcGFyc2VkTW9kdWxlOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQlfVXRpbHNfVHVwbGUyKGNvcmVNb2R1bGUucGFyc2VSZXN1bHQuc3ludGF4LCBjb3JlTW9kdWxlLnBhcnNlUmVzdWx0LmNvbXBsZXRpb25JdGVtcykpLAoJCQkJCQkJcmVmZXJlbmNlc1JhbmdlczogX0xpc3RfTmlsCgkJCQkJCX0pOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9CgkJCX0sCgkJCWxhbmd1YWdlU2VydmljZVN0YXRlLmNvcmVNb2R1bGVzQ2FjaGUpOwoJCXZhciBpbXBsaWNpdGx5SW1wb3J0ZWRNb2R1bGVzID0gQTIoCgkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJZnVuY3Rpb24gKF92NikgewoJCQkJdmFyIHBhY2thZ2VWZXJzaW9uSWRlbnRpZmVyID0gX3Y2LmE7CgkJCQl2YXIgcGFja2FnZU1vZHVsZXMgPSBfdjYuYjsKCQkJCWlmIChwYWNrYWdlVmVyc2lvbklkZW50aWZlci5hID09PSAnZWxtL2NvcmUnKSB7CgkJCQkJdmFyIGltcGxpY2l0bHlJbXBvcnRlZCA9IEEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsCgkJCQkJCWZ1bmN0aW9uIChfdjgpIHsKCQkJCQkJCXZhciBtb2R1bGVNb2R1bGVOYW1lID0gX3Y4LmE7CgkJCQkJCQl2YXIgX3Y5ID0gX3Y4LmI7CgkJCQkJCQl2YXIgbW9kdWxlUGF0aCA9IF92OS5hOwoJCQkJCQkJdmFyIG1vZHVsZVN5bnRheCA9IF92OS5iOwoJCQkJCQkJdmFyIG1vZHVsZUNvbXBsZXRpb25JdGVtcyA9IF92OS5jOwoJCQkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkZWxtQ29yZU1vZHVsZUlzSW1wbGljaXRseUltcG9ydGVkKG1vZHVsZU1vZHVsZU5hbWUpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJewoJCQkJCQkJCQljYW5vbmljYWxOYW1lOiBtb2R1bGVNb2R1bGVOYW1lLAoJCQkJCQkJCQlmaWxlTG9jYXRpb246IEEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkRWxtUGFja2FnZUZpbGVMb2NhdGlvbiwgcGFja2FnZVZlcnNpb25JZGVudGlmZXIsIG1vZHVsZVBhdGgpLAoJCQkJCQkJCQlpbXBvcnRlZE5hbWU6IG1vZHVsZU1vZHVsZU5hbWUsCgkJCQkJCQkJCXBhcnNlZE1vZHVsZTogJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKG1vZHVsZVN5bnRheCwgbW9kdWxlQ29tcGxldGlvbkl0ZW1zKSksCgkJCQkJCQkJCXJlZmVyZW5jZXNSYW5nZXM6IF9MaXN0X05pbAoJCQkJCQkJCX0pIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCX0sCgkJCQkJCXBhY2thZ2VNb2R1bGVzKTsKCQkJCQlyZXR1cm4gaW1wbGljaXRseUltcG9ydGVkOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQkJfQoJCQl9LAoJCQlsYW5ndWFnZVNlcnZpY2VTdGF0ZS5lbG1QYWNrYWdlcyk7CgkJdmFyIGV4cGxpY2l0bHlJbXBvcnRlZE1vZHVsZXMgPSBBMigKCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLAoJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQl2YXIgaW1wb3J0U3ludGF4ID0gX3YwLmI7CgkJCQl2YXIgX3YxID0gaW1wb3J0U3ludGF4Lm1vZHVsZU5hbWU7CgkJCQl2YXIgbW9kdWxlTmFtZVJhbmdlID0gX3YxLmE7CgkJCQl2YXIgY2Fub25pY2FsTmFtZSA9IF92MS5iOwoJCQkJdmFyIGltcG9ydGVkTmFtZSA9IGZ1bmN0aW9uICgpIHsKCQkJCQl2YXIgX3Y0ID0gaW1wb3J0U3ludGF4Lm1vZHVsZUFsaWFzOwoJCQkJCWlmIChfdjQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiBjYW5vbmljYWxOYW1lOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjUgPSBfdjQuYTsKCQkJCQkJdmFyIG1vZHVsZUFsaWFzID0gX3Y1LmI7CgkJCQkJCXJldHVybiBtb2R1bGVBbGlhczsKCQkJCQl9CgkJCQl9KCk7CgkJCQl2YXIgX3YyID0gcGFyc2VkTW9kdWxlRnJvbU1vZHVsZU5hbWUoY2Fub25pY2FsTmFtZSk7CgkJCQlpZiAoX3YyLiQgPT09ICdKdXN0JykgewoJCQkJCXZhciBfdjMgPSBfdjIuYTsKCQkJCQl2YXIgbW9kdWxlRmlsZUxvY2F0aW9uID0gX3YzLmE7CgkJCQkJdmFyIG1vZHVsZVN5bnRheCA9IF92My5iOwoJCQkJCXZhciBtb2R1bGVDb21wbGV0aW9uSXRlbXMgPSBfdjMuYzsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCXsKCQkJCQkJCWNhbm9uaWNhbE5hbWU6IGNhbm9uaWNhbE5hbWUsCgkJCQkJCQlmaWxlTG9jYXRpb246IG1vZHVsZUZpbGVMb2NhdGlvbiwKCQkJCQkJCWltcG9ydGVkTmFtZTogaW1wb3J0ZWROYW1lLAoJCQkJCQkJcGFyc2VkTW9kdWxlOiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQlfVXRpbHNfVHVwbGUyKG1vZHVsZVN5bnRheCwgbW9kdWxlQ29tcGxldGlvbkl0ZW1zKSksCgkJCQkJCQlyZWZlcmVuY2VzUmFuZ2VzOiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJW21vZHVsZU5hbWVSYW5nZV0pCgkJCQkJCX0pOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9CgkJCX0sCgkJCWZpbGVTeW50YXguaW1wb3J0cyk7CgkJcmV0dXJuICRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJW2ltcGxpY2l0bHlJbXBvcnRlZE1vZHVsZXMsIGltcGxpY2l0bHlJbXBvcnRlZE1vZHVsZXNPbGQsIGV4cGxpY2l0bHlJbXBvcnRlZE1vZHVsZXNdKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21tb24kbGlzdEZpbmQgPSBGMigKCWZ1bmN0aW9uIChwcmVkaWNhdGUsIGxpc3QpIHsKCQlsaXN0RmluZDoKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIWxpc3QuYikgewoJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQl9IGVsc2UgewoJCQkJaWYgKGxpc3QuYi5iKSB7CgkJCQkJdmFyIGZpcnN0ID0gbGlzdC5hOwoJCQkJCXZhciBfdjEgPSBsaXN0LmI7CgkJCQkJdmFyIHNlY29uZCA9IF92MS5hOwoJCQkJCXZhciByZXN0ID0gX3YxLmI7CgkJCQkJaWYgKHByZWRpY2F0ZShmaXJzdCkpIHsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KGZpcnN0KTsKCQkJCQl9IGVsc2UgewoJCQkJCQlpZiAocHJlZGljYXRlKHNlY29uZCkpIHsKCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChzZWNvbmQpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyICR0ZW1wJHByZWRpY2F0ZSA9IHByZWRpY2F0ZSwKCQkJCQkJCQkkdGVtcCRsaXN0ID0gcmVzdDsKCQkJCQkJCXByZWRpY2F0ZSA9ICR0ZW1wJHByZWRpY2F0ZTsKCQkJCQkJCWxpc3QgPSAkdGVtcCRsaXN0OwoJCQkJCQkJY29udGludWUgbGlzdEZpbmQ7CgkJCQkJCX0KCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCXZhciBmaXJzdCA9IGxpc3QuYTsKCQkJCQl2YXIgcmVzdCA9IGxpc3QuYjsKCQkJCQlpZiAocHJlZGljYXRlKGZpcnN0KSkgewoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoZmlyc3QpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciAkdGVtcCRwcmVkaWNhdGUgPSBwcmVkaWNhdGUsCgkJCQkJCQkkdGVtcCRsaXN0ID0gcmVzdDsKCQkJCQkJcHJlZGljYXRlID0gJHRlbXAkcHJlZGljYXRlOwoJCQkJCQlsaXN0ID0gJHRlbXAkbGlzdDsKCQkJCQkJY29udGludWUgbGlzdEZpbmQ7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCRtZW1iZXIgPSBGMigKCWZ1bmN0aW9uICh4LCB4cykgewoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJExpc3QkYW55LAoJCQlmdW5jdGlvbiAoYSkgewoJCQkJcmV0dXJuIF9VdGlsc19lcShhLCB4KTsKCQkJfSwKCQkJeHMpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJE1vZHVsZUNvbXBsZXRpb25JdGVtS2luZCA9IHskOiAnTW9kdWxlQ29tcGxldGlvbkl0ZW1LaW5kJ307CnZhciAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRSYW5nZSRjb21wYXJlTG9jYXRpb25zID0gRjIoCglmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHsKCQlyZXR1cm4gKF9VdGlsc19jbXAobGVmdC5yb3csIHJpZ2h0LnJvdykgPCAwKSA/ICRlbG0kY29yZSRCYXNpY3MkTFQgOiAoKF9VdGlsc19jbXAobGVmdC5yb3csIHJpZ2h0LnJvdykgPiAwKSA/ICRlbG0kY29yZSRCYXNpY3MkR1QgOiBBMigkZWxtJGNvcmUkQmFzaWNzJGNvbXBhcmUsIGxlZnQuY29sdW1uLCByaWdodC5jb2x1bW4pKTsKCX0pOwp2YXIgJHN0aWw0bSRlbG1fc3ludGF4JEVsbSRTeW50YXgkUmFuZ2UkY29tYmluZUhlbHAgPSBGMygKCWZ1bmN0aW9uIChyYW5nZXMsIHByZXZpb3VzU3RhcnQsIHByZXZpb3VzRW5kKSB7CgkJY29tYmluZUhlbHA6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFyYW5nZXMuYikgewoJCQkJcmV0dXJuIHtlbmQ6IHByZXZpb3VzRW5kLCBzdGFydDogcHJldmlvdXNTdGFydH07CgkJCX0gZWxzZSB7CgkJCQl2YXIgc3RhcnQgPSByYW5nZXMuYS5zdGFydDsKCQkJCXZhciBlbmQgPSByYW5nZXMuYS5lbmQ7CgkJCQl2YXIgcmVzdCA9IHJhbmdlcy5iOwoJCQkJdmFyIG5ld1N0YXJ0ID0gZnVuY3Rpb24gKCkgewoJCQkJCXZhciBfdjIgPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRSYW5nZSRjb21wYXJlTG9jYXRpb25zLCBzdGFydCwgcHJldmlvdXNTdGFydCk7CgkJCQkJaWYgKF92Mi4kID09PSAnTFQnKSB7CgkJCQkJCXJldHVybiBzdGFydDsKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gcHJldmlvdXNTdGFydDsKCQkJCQl9CgkJCQl9KCk7CgkJCQl2YXIgbmV3RW5kID0gZnVuY3Rpb24gKCkgewoJCQkJCXZhciBfdjEgPSBBMigkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRSYW5nZSRjb21wYXJlTG9jYXRpb25zLCBlbmQsIHByZXZpb3VzRW5kKTsKCQkJCQlpZiAoX3YxLiQgPT09ICdHVCcpIHsKCQkJCQkJcmV0dXJuIGVuZDsKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gcHJldmlvdXNFbmQ7CgkJCQkJfQoJCQkJfSgpOwoJCQkJdmFyICR0ZW1wJHJhbmdlcyA9IHJlc3QsCgkJCQkJJHRlbXAkcHJldmlvdXNTdGFydCA9IG5ld1N0YXJ0LAoJCQkJCSR0ZW1wJHByZXZpb3VzRW5kID0gbmV3RW5kOwoJCQkJcmFuZ2VzID0gJHRlbXAkcmFuZ2VzOwoJCQkJcHJldmlvdXNTdGFydCA9ICR0ZW1wJHByZXZpb3VzU3RhcnQ7CgkJCQlwcmV2aW91c0VuZCA9ICR0ZW1wJHByZXZpb3VzRW5kOwoJCQkJY29udGludWUgY29tYmluZUhlbHA7CgkJCX0KCQl9Cgl9KTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFJhbmdlJGVtcHR5ID0gewoJZW5kOiB7Y29sdW1uOiAwLCByb3c6IDB9LAoJc3RhcnQ6IHtjb2x1bW46IDAsIHJvdzogMH0KfTsKdmFyICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFJhbmdlJGNvbWJpbmUgPSBmdW5jdGlvbiAocmFuZ2VzKSB7CglpZiAoIXJhbmdlcy5iKSB7CgkJcmV0dXJuICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFJhbmdlJGVtcHR5OwoJfSBlbHNlIHsKCQl2YXIgaGVhZCA9IHJhbmdlcy5hOwoJCXZhciB0YWlsID0gcmFuZ2VzLmI7CgkJcmV0dXJuIEEzKCRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JFJhbmdlJGNvbWJpbmVIZWxwLCB0YWlsLCBoZWFkLnN0YXJ0LCBoZWFkLmVuZCk7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGRvY3VtZW50YXRpb25TdHJpbmdGcm9tTW9kdWxlU3ludGF4ID0gZnVuY3Rpb24gKHBhcnNlZE1vZHVsZSkgewoJdmFyIGltcG9ydHNBbmREZWNsYXJhdGlvbnNSYW5nZXMgPSAkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlBMigKCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCWZ1bmN0aW9uIChfdjYpIHsKCQkJCQl2YXIgcmFuZ2UgPSBfdjYuYTsKCQkJCQlyZXR1cm4gcmFuZ2U7CgkJCQl9LAoJCQkJcGFyc2VkTW9kdWxlLmltcG9ydHMpLAoJCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQlmdW5jdGlvbiAoX3Y3KSB7CgkJCQkJdmFyIHJhbmdlID0gX3Y3LmE7CgkJCQkJcmV0dXJuIHJhbmdlOwoJCQkJfSwKCQkJCXBhcnNlZE1vZHVsZS5kZWNsYXJhdGlvbnMpCgkJCV0pKTsKCXZhciBpbXBvcnRzQW5kRGVjbGFyYXRpb25zUmFuZ2UgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRSYW5nZSRjb21iaW5lKGltcG9ydHNBbmREZWNsYXJhdGlvbnNSYW5nZXMpOwoJdmFyIF92MCA9IHBhcnNlZE1vZHVsZS5tb2R1bGVEZWZpbml0aW9uOwoJdmFyIG1vZHVsZURlZmluaXRpb25SYW5nZSA9IF92MC5hOwoJdmFyIG1heWJlTW9kdWxlQ29tbWVudCA9IEEzKAoJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCUYyKAoJCQlmdW5jdGlvbiAoY29tbWVudCwgbWF5YmVDb21tZW50KSB7CgkJCQl2YXIgX3YzID0gY29tbWVudDsKCQkJCXZhciBjb21tZW50UmFuZ2UgPSBfdjMuYTsKCQkJCWlmIChtYXliZUNvbW1lbnQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuICgoX1V0aWxzX2NtcChjb21tZW50UmFuZ2Uuc3RhcnQucm93LCBtb2R1bGVEZWZpbml0aW9uUmFuZ2Uuc3RhcnQucm93KSA+IDApICYmIChfVXRpbHNfY21wKGNvbW1lbnRSYW5nZS5zdGFydC5yb3csIGltcG9ydHNBbmREZWNsYXJhdGlvbnNSYW5nZS5zdGFydC5yb3cpIDwgMCkpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoY29tbWVudCkgOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHByZXZDb21tZW50ID0gbWF5YmVDb21tZW50LmE7CgkJCQkJdmFyIF92NSA9IHByZXZDb21tZW50OwoJCQkJCXZhciBwcmV2Q29tbWVudFJhbmdlID0gX3Y1LmE7CgkJCQkJcmV0dXJuICgoX1V0aWxzX2NtcChjb21tZW50UmFuZ2Uuc3RhcnQucm93LCBwcmV2Q29tbWVudFJhbmdlLmVuZC5yb3cpID4gMCkgJiYgKF9VdGlsc19jbXAoY29tbWVudFJhbmdlLnN0YXJ0LnJvdywgaW1wb3J0c0FuZERlY2xhcmF0aW9uc1JhbmdlLnN0YXJ0LnJvdykgPCAwKSkgPyAkZWxtJGNvcmUkTWF5YmUkSnVzdChjb21tZW50KSA6ICRlbG0kY29yZSRNYXliZSRKdXN0KHByZXZDb21tZW50KTsKCQkJCX0KCQkJfSksCgkJJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsCgkJcGFyc2VkTW9kdWxlLmNvbW1lbnRzKTsKCWlmIChtYXliZU1vZHVsZUNvbW1lbnQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJfSBlbHNlIHsKCQl2YXIgX3YyID0gbWF5YmVNb2R1bGVDb21tZW50LmE7CgkJdmFyIGNvbW1lbnROb2RlID0gX3YyLmI7CgkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHJlbW92ZVdyYXBwaW5nRnJvbU11bHRpbGluZUNvbW1lbnQoY29tbWVudE5vZGUpKTsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbW9kdWxlQ29tcGxldGlvbkl0ZW1Gcm9tTW9kdWxlU3ludGF4ID0gRjIoCglmdW5jdGlvbiAoX3YwLCBtb2R1bGVTeW50YXgpIHsKCQl2YXIgaW1wb3J0ZWRNb2R1bGVOYW1lUmVzdEFmdGVyUHJlZml4ID0gX3YwLmltcG9ydGVkTW9kdWxlTmFtZVJlc3RBZnRlclByZWZpeDsKCQl2YXIgaW1wb3J0ZWROYW1lID0gX3YwLmltcG9ydGVkTmFtZTsKCQl2YXIgZG9jdW1lbnRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKCQkJdmFyIF92NCA9ICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkZG9jdW1lbnRhdGlvblN0cmluZ0Zyb21Nb2R1bGVTeW50YXgobW9kdWxlU3ludGF4KTsKCQkJaWYgKF92NC4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiAnJzsKCQkJfSBlbHNlIHsKCQkJCXZhciBkb2N1bWVudGF0aW9uU3RyaW5nID0gX3Y0LmE7CgkJCQlyZXR1cm4gZG9jdW1lbnRhdGlvblN0cmluZzsKCQkJfQoJCX0oKTsKCQl2YXIgX3YxID0gbW9kdWxlU3ludGF4Lm1vZHVsZURlZmluaXRpb247CgkJdmFyIG1vZHVsZURlZmluaXRpb24gPSBfdjEuYjsKCQl2YXIgY2Fub25pY2FsTmFtZSA9ICRzdGlsNG0kZWxtX3N5bnRheCRFbG0kU3ludGF4JE1vZHVsZSRtb2R1bGVOYW1lKG1vZHVsZURlZmluaXRpb24pOwoJCXZhciBpbnNlcnRUZXh0ID0gZnVuY3Rpb24gKCkgewoJCQlpZiAoaW1wb3J0ZWRNb2R1bGVOYW1lUmVzdEFmdGVyUHJlZml4LiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy4nLCBjYW5vbmljYWxOYW1lKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBtb2R1bGVOYW1lUmVzdEFmdGVyUHJlZml4ID0gaW1wb3J0ZWRNb2R1bGVOYW1lUmVzdEFmdGVyUHJlZml4LmE7CgkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJFN0cmluZyRqb2luLCAnLicsIG1vZHVsZU5hbWVSZXN0QWZ0ZXJQcmVmaXgpOwoJCQl9CgkJfSgpOwoJCXZhciBsYWJlbCA9IGZ1bmN0aW9uICgpIHsKCQkJaWYgKGltcG9ydGVkTmFtZS4kID09PSAnTm90aGluZycpIHsKCQkJCXJldHVybiBpbnNlcnRUZXh0OwoJCQl9IGVsc2UgewoJCQkJdmFyIGltcG9ydGVkTmFtZV8gPSBpbXBvcnRlZE5hbWUuYTsKCQkJCXJldHVybiBfVXRpbHNfZXEoaW1wb3J0ZWROYW1lXywgY2Fub25pY2FsTmFtZSkgPyBpbnNlcnRUZXh0IDogKEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy4nLCBjYW5vbmljYWxOYW1lKSArICgnIGFzICcgKyBpbnNlcnRUZXh0KSk7CgkJCX0KCQl9KCk7CgkJcmV0dXJuIEE0KCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkQ29tcGxldGlvbkl0ZW0sIGxhYmVsLCBpbnNlcnRUZXh0LCAkYXV0aG9yJHByb2plY3QkRnJvbnRlbmQkTW9uYWNvRWRpdG9yJE1vZHVsZUNvbXBsZXRpb25JdGVtS2luZCwgZG9jdW1lbnRhdGlvbik7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmFuZ2VDb250YWluc0xvY2F0aW9uID0gRjIoCglmdW5jdGlvbiAoX3YwLCBfdjEpIHsKCQl2YXIgcm93ID0gX3YwLmE7CgkJdmFyIGNvbHVtbiA9IF92MC5iOwoJCXZhciBfdjIgPSBfdjEuYTsKCQl2YXIgc3RhcnRSb3cgPSBfdjIuYTsKCQl2YXIgc3RhcnRDb2x1bW4gPSBfdjIuYjsKCQl2YXIgX3YzID0gX3YxLmI7CgkJdmFyIGVuZFJvdyA9IF92My5hOwoJCXZhciBlbmRDb2x1bW4gPSBfdjMuYjsKCQl2YXIgc3RhcnRSb3dJbnQgPSBzdGFydFJvdyAtIDE7CgkJdmFyIHN0YXJ0Q29sdW1uSW50ID0gc3RhcnRDb2x1bW4gLSAxOwoJCXZhciByb3dJbnQgPSByb3cgLSAxOwoJCXZhciBlbmRSb3dJbnQgPSBlbmRSb3cgLSAxOwoJCXZhciBlbmRDb2x1bW5JbnQgPSBlbmRDb2x1bW4gLSAxOwoJCXZhciBjb2x1bW5JbnQgPSBjb2x1bW4gLSAxOwoJCXJldHVybiAoX1V0aWxzX2NtcChyb3dJbnQsIHN0YXJ0Um93SW50KSA8IDApID8gZmFsc2UgOiAoKF9VdGlsc19jbXAocm93SW50LCBlbmRSb3dJbnQpID4gMCkgPyBmYWxzZSA6ICgoX1V0aWxzX2VxKHJvd0ludCwgc3RhcnRSb3dJbnQpICYmIF9VdGlsc19lcShyb3dJbnQsIGVuZFJvd0ludCkpID8gKChfVXRpbHNfY21wKGNvbHVtbkludCwgc3RhcnRDb2x1bW5JbnQpIDwgMCkgPyBmYWxzZSA6ICgoX1V0aWxzX2NtcChjb2x1bW5JbnQsIGVuZENvbHVtbkludCkgPiAwKSA/IGZhbHNlIDogdHJ1ZSkpIDogKF9VdGlsc19lcShyb3dJbnQsIHN0YXJ0Um93SW50KSA/ICgoX1V0aWxzX2NtcChjb2x1bW5JbnQsIHN0YXJ0Q29sdW1uSW50KSA8IDApID8gZmFsc2UgOiB0cnVlKSA6IChfVXRpbHNfZXEocm93SW50LCBlbmRSb3dJbnQpID8gKChfVXRpbHNfY21wKGNvbHVtbkludCwgZW5kQ29sdW1uSW50KSA+IDApID8gZmFsc2UgOiB0cnVlKSA6IHRydWUpKSkpOwoJfSk7CnZhciAkZWxtJGNvcmUkTGlzdCRzb3J0QnkgPSBfTGlzdF9zb3J0Qnk7CnZhciAkZWxtJGNvcmUkU3RyaW5nJGZyb21MaXN0ID0gX1N0cmluZ19mcm9tTGlzdDsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdENoYXJTcGxpdEJ5Q2hhciA9IEYyKAoJZnVuY3Rpb24gKGNoYXJTcGxpdHMsIGNoYXJzKSB7CgkJdmFyIF92MCA9IEEzKAoJCQkkZWxtJGNvcmUkTGlzdCRmb2xkbCwKCQkJRjIoCgkJCQlmdW5jdGlvbiAoX2NoYXIsIF92MSkgewoJCQkJCXZhciBjb21wbGV0ZWQgPSBfdjEuYTsKCQkJCQl2YXIgY3VycmVudCA9IF92MS5iOwoJCQkJCXJldHVybiBjaGFyU3BsaXRzKF9jaGFyKSA/IF9VdGlsc19UdXBsZTIoCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoY3VycmVudCksCgkJCQkJCQljb21wbGV0ZWQpLAoJCQkJCQlfTGlzdF9OaWwpIDogX1V0aWxzX1R1cGxlMigKCQkJCQkJY29tcGxldGVkLAoJCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBfY2hhciwgY3VycmVudCkpOwoJCQkJfSksCgkJCV9VdGlsc19UdXBsZTIoX0xpc3RfTmlsLCBfTGlzdF9OaWwpLAoJCQljaGFycyk7CgkJdmFyIGNvbXBsZXRlZCA9IF92MC5hOwoJCXZhciBjdXJyZW50ID0gX3YwLmI7CgkJcmV0dXJuICRlbG0kY29yZSRMaXN0JHJldmVyc2UoCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkY29ucywKCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoY3VycmVudCksCgkJCQljb21wbGV0ZWQpKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRzdHJpbmdTcGxpdEJ5Q2hhciA9IEYyKAoJZnVuY3Rpb24gKGNoYXJTcGxpdHMsIHN0cmluZykgewoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkkZWxtJGNvcmUkU3RyaW5nJGZyb21MaXN0LAoJCQlBMigKCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdENoYXJTcGxpdEJ5Q2hhciwKCQkJCWNoYXJTcGxpdHMsCgkJCQkkZWxtJGNvcmUkU3RyaW5nJHRvTGlzdChzdHJpbmcpKSk7Cgl9KTsKdmFyICRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCA9IEYyKAoJZnVuY3Rpb24gKF9kZWZhdWx0LCBtYXliZSkgewoJCWlmIChtYXliZS4kID09PSAnSnVzdCcpIHsKCQkJdmFyIHZhbHVlID0gbWF5YmUuYTsKCQkJcmV0dXJuIHZhbHVlOwoJCX0gZWxzZSB7CgkJCXJldHVybiBfZGVmYXVsdDsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcHJvdmlkZUNvbXBsZXRpb25JdGVtc0luTW9kdWxlID0gRjIoCglmdW5jdGlvbiAocmVxdWVzdCwgbGFuZ3VhZ2VTZXJ2aWNlU3RhdGUpIHsKCQl2YXIgbW9kdWxlc0F2YWlsYWJsZUZvckltcG9ydCA9ICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbW9kdWxlc0F2YWlsYWJsZUZvckltcG9ydEZyb21TdGF0ZShsYW5ndWFnZVNlcnZpY2VTdGF0ZSk7CgkJdmFyIGxpbmVUZXh0ID0gQTIoCgkJCSRlbG0kY29yZSRNYXliZSR3aXRoRGVmYXVsdCwKCQkJJycsCgkJCSRlbG0kY29yZSRMaXN0JGhlYWQoCgkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRkcm9wLAoJCQkJCXJlcXVlc3QuY3Vyc29yTGluZU51bWJlciAtIDEsCgkJCQkJJGVsbSRjb3JlJFN0cmluZyRsaW5lcyhyZXF1ZXN0Lm5ld1RleHQpKSkpOwoJCXZhciBsaW5lVW50aWxQb3NpdGlvbiA9IEEyKCRlbG0kY29yZSRTdHJpbmckbGVmdCwgcmVxdWVzdC5jdXJzb3JDb2x1bW4gLSAxLCBsaW5lVGV4dCk7CgkJdmFyIGxpbmVVbnRpbFBvc2l0aW9uV29yZHMgPSBBMigKCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRzdHJpbmdTcGxpdEJ5Q2hhciwKCQkJZnVuY3Rpb24gKGMpIHsKCQkJCXJldHVybiAhKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkY2hhcklzQWxsb3dlZEluRGVjbGFyYXRpb25OYW1lKGMpIHx8IF9VdGlsc19lcSgKCQkJCQljLAoJCQkJCV9VdGlsc19jaHIoJy4nKSkpOwoJCQl9LAoJCQlsaW5lVW50aWxQb3NpdGlvbik7CgkJdmFyIGltcG9ydGVkTW9kdWxlcyA9IEEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkaW1wb3J0ZWRNb2R1bGVzRnJvbUZpbGUsIHJlcXVlc3QuZmlsZU9wZW5lZEluRWRpdG9yLnN5bnRheCwgbGFuZ3VhZ2VTZXJ2aWNlU3RhdGUpOwoJCXZhciBpbXBvcnRFeHBvc2luZ3MgPSAkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQlBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGltcG9ydEV4cG9zaW5nc0Zyb21GaWxlLCByZXF1ZXN0LmZpbGVPcGVuZWRJbkVkaXRvciwgbGFuZ3VhZ2VTZXJ2aWNlU3RhdGUpLAoJCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkkZWxtJGNvcmUkVHVwbGUkc2Vjb25kLAoJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkY29tbW9uSW1wbGljaXRUb3BMZXZlbEltcG9ydHMobGFuZ3VhZ2VTZXJ2aWNlU3RhdGUpKQoJCQkJXSkpOwoJCXZhciBjdXJyZW50TW9kdWxlRGVjbGFyYXRpb25zID0gcmVxdWVzdC5maWxlT3BlbmVkSW5FZGl0b3IuY29tcGxldGlvbkl0ZW1zOwoJCXZhciBmcm9tTG9jYWxzID0gQTIoCgkJCSRlbG0kY29yZSRMaXN0JGZpbHRlck1hcCwKCQkJZnVuY3Rpb24gKF92MTYpIHsKCQkJCXZhciBjb21wbGV0aW9uSXRlbSA9IF92MTYuYTsKCQkJCXZhciBzY29wZVJhbmdlID0gX3YxNi5jOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmFuZ2VDb250YWluc0xvY2F0aW9uLAoJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCXJlcXVlc3QuY3Vyc29yTGluZU51bWJlciwKCQkJCQkJJGVsbSRjb3JlJFN0cmluZyRsZW5ndGgobGluZVVudGlsUG9zaXRpb24pKSwKCQkJCQlzY29wZVJhbmdlKSA/ICRlbG0kY29yZSRNYXliZSRKdXN0KGNvbXBsZXRpb25JdGVtKSA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQl9LAoJCQljdXJyZW50TW9kdWxlRGVjbGFyYXRpb25zLmZyb21Mb2NhbHMpOwoJCXZhciBsb2NhbERlY2xhcmF0aW9uc0FuZEltcG9ydEV4cG9zaW5ncyA9ICRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQlmdW5jdGlvbiAoJCkgewoJCQkJCQlyZXR1cm4gJC5jb21wbGV0aW9uSXRlbTsKCQkJCQl9LAoJCQkJCWN1cnJlbnRNb2R1bGVEZWNsYXJhdGlvbnMuZnJvbVRvcExldmVsKSwKCQkJCQlpbXBvcnRFeHBvc2luZ3MsCgkJCQkJZnJvbUxvY2FscwoJCQkJXSkpOwoJCXZhciBjb21wbGV0aW9uUHJlZml4ID0gZnVuY3Rpb24gKCkgewoJCQl2YXIgX3YxNSA9ICRlbG0kY29yZSRMaXN0JHJldmVyc2UobGluZVVudGlsUG9zaXRpb25Xb3Jkcyk7CgkJCWlmICghX3YxNS5iKSB7CgkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQl9IGVsc2UgewoJCQkJdmFyIHdvcmQgPSBfdjE1LmE7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkZHJvcCwKCQkJCQkxLAoJCQkJCSRlbG0kY29yZSRMaXN0JHJldmVyc2UoCgkJCQkJCUEyKCRlbG0kY29yZSRTdHJpbmckc3BsaXQsICcuJywgd29yZCkpKTsKCQkJfQoJCX0oKTsKCQl2YXIgY29tcGxldGlvblByZWZpeElzTmFtZXNwYWNlID0gZnVuY3Rpb24gKCkgewoJCQlpZiAoIWNvbXBsZXRpb25QcmVmaXguYikgewoJCQkJcmV0dXJuIHRydWU7CgkJCX0gZWxzZSB7CgkJCQl2YXIgcHJlZml4Rmlyc3RFbGVtZW50ID0gY29tcGxldGlvblByZWZpeC5hOwoJCQkJdmFyIF92MTMgPSAkZWxtJGNvcmUkU3RyaW5nJHVuY29ucyhwcmVmaXhGaXJzdEVsZW1lbnQpOwoJCQkJaWYgKF92MTMuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuIHRydWU7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfdjE0ID0gX3YxMy5hOwoJCQkJCXZhciBmaXJzdENoYXIgPSBfdjE0LmE7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRDaGFyJGlzVXBwZXIoZmlyc3RDaGFyKTsKCQkJCX0KCQkJfQoJCX0oKTsKCQl2YXIgaW1wb3J0ZWRNb2R1bGVzQWZ0ZXJQcmVmaXggPSBBMigKCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLAoJCQlmdW5jdGlvbiAoaW1wb3J0ZWRNb2R1bGUpIHsKCQkJCWlmIChfVXRpbHNfZXEoCgkJCQkJQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JHRha2UsCgkJCQkJCSRlbG0kY29yZSRMaXN0JGxlbmd0aChjb21wbGV0aW9uUHJlZml4KSwKCQkJCQkJaW1wb3J0ZWRNb2R1bGUuaW1wb3J0ZWROYW1lKSwKCQkJCQljb21wbGV0aW9uUHJlZml4KSkgewoJCQkJCXZhciBfdjExID0gQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JGRyb3AsCgkJCQkJCSRlbG0kY29yZSRMaXN0JGxlbmd0aChjb21wbGV0aW9uUHJlZml4KSwKCQkJCQkJaW1wb3J0ZWRNb2R1bGUuaW1wb3J0ZWROYW1lKTsKCQkJCQlpZiAoIV92MTEuYikgewoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIHJlc3RBZnRlclByZWZpeCA9IF92MTE7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCV9VdGlsc19UdXBsZTIocmVzdEFmdGVyUHJlZml4LCBpbXBvcnRlZE1vZHVsZSkpOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJfQoJCQl9LAoJCQlpbXBvcnRlZE1vZHVsZXMpOwoJCXZhciBmcm9tSW1wb3J0cyA9IEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsCgkJCWZ1bmN0aW9uIChfdjgpIHsKCQkJCXZhciBpbXBvcnRlZE1vZHVsZU5hbWVSZXN0QWZ0ZXJQcmVmaXggPSBfdjguYTsKCQkJCXZhciBpbXBvcnRlZE1vZHVsZSA9IF92OC5iOwoJCQkJdmFyIF92OSA9IGltcG9ydGVkTW9kdWxlLnBhcnNlZE1vZHVsZTsKCQkJCWlmIChfdjkuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YxMCA9IF92OS5hOwoJCQkJCXZhciBpbXBvcnRlZE1vZHVsZVBhcnNlZFN5bnRheCA9IF92MTAuYTsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCUEyKAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRtb2R1bGVDb21wbGV0aW9uSXRlbUZyb21Nb2R1bGVTeW50YXgsCgkJCQkJCQl7CgkJCQkJCQkJaW1wb3J0ZWRNb2R1bGVOYW1lUmVzdEFmdGVyUHJlZml4OiAkZWxtJGNvcmUkTWF5YmUkSnVzdChpbXBvcnRlZE1vZHVsZU5hbWVSZXN0QWZ0ZXJQcmVmaXgpLAoJCQkJCQkJCWltcG9ydGVkTmFtZTogJGVsbSRjb3JlJE1heWJlJEp1c3QoaW1wb3J0ZWRNb2R1bGUuaW1wb3J0ZWROYW1lKQoJCQkJCQkJfSwKCQkJCQkJCWltcG9ydGVkTW9kdWxlUGFyc2VkU3ludGF4KSk7CgkJCQl9CgkJCX0sCgkJCWltcG9ydGVkTW9kdWxlc0FmdGVyUHJlZml4KTsKCQl2YXIgbG9jYWxEZWNsYXJhdGlvbnNBZnRlclByZWZpeCA9IGZ1bmN0aW9uICgpIHsKCQkJaWYgKF9VdGlsc19lcShjb21wbGV0aW9uUHJlZml4LCBfTGlzdF9OaWwpKSB7CgkJCQlyZXR1cm4gbG9jYWxEZWNsYXJhdGlvbnNBbmRJbXBvcnRFeHBvc2luZ3M7CgkJCX0gZWxzZSB7CgkJCQl2YXIgX3Y2ID0gQTIoCgkJCQkJJGVsbSRjb3JlJE1heWJlJGFuZFRoZW4sCgkJCQkJZnVuY3Rpb24gKCQpIHsKCQkJCQkJcmV0dXJuICQucGFyc2VkTW9kdWxlOwoJCQkJCX0sCgkJCQkJQTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21tb24kbGlzdEZpbmQsCgkJCQkJCWZ1bmN0aW9uIChpbXBvcnRlZE1vZHVsZSkgewoJCQkJCQkJcmV0dXJuIF9VdGlsc19lcShpbXBvcnRlZE1vZHVsZS5pbXBvcnRlZE5hbWUsIGNvbXBsZXRpb25QcmVmaXgpOwoJCQkJCQl9LAoJCQkJCQlpbXBvcnRlZE1vZHVsZXMpKTsKCQkJCWlmIChfdjYuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIF92NyA9IF92Ni5hOwoJCQkJCXZhciByZWZlcmVuY2VkTW9kdWxlQ29tcGxldGlvbkl0ZW1zID0gX3Y3LmI7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsCgkJCQkJCWZ1bmN0aW9uIChpdGVtKSB7CgkJCQkJCQlyZXR1cm4gaXRlbS5pc0V4cG9zZWQgPyAkZWxtJGNvcmUkTWF5YmUkSnVzdChpdGVtLmNvbXBsZXRpb25JdGVtKSA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCQl9LAoJCQkJCQlyZWZlcmVuY2VkTW9kdWxlQ29tcGxldGlvbkl0ZW1zLmZyb21Ub3BMZXZlbCk7CgkJCQl9CgkJCX0KCQl9KCk7CgkJdmFyIF92MCA9IHJlcXVlc3QuZmlsZU9wZW5lZEluRWRpdG9yLnN5bnRheC5tb2R1bGVEZWZpbml0aW9uOwoJCXZhciBtb2R1bGVEZWZpbml0aW9uID0gX3YwLmI7CgkJdmFyIGZpbGVPcGVuZWRJbkVkaXRvck1vZHVsZU5hbWUgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGUkbW9kdWxlTmFtZShtb2R1bGVEZWZpbml0aW9uKTsKCQl2YXIgbW9kdWxlTmFtZXNUb05vdFN1Z2dlc3RGb3JJbXBvcnQgPSBfTGlzdF9mcm9tQXJyYXkoCgkJCVtmaWxlT3BlbmVkSW5FZGl0b3JNb2R1bGVOYW1lXSk7CgkJdmFyIG1vZHVsZXNUb1N1Z2dlc3RGb3JJbXBvcnQgPSBBMigKCQkJJGVsbSRjb3JlJExpc3Qkc29ydEJ5LAoJCQlmdW5jdGlvbiAoX3Y1KSB7CgkJCQl2YXIgYXZhaWxhYmxlTW9kdWxlTmFtZSA9IF92NS5iOwoJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy4nLCBhdmFpbGFibGVNb2R1bGVOYW1lKTsKCQkJfSwKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsCgkJCQlmdW5jdGlvbiAoYXZhaWxhYmxlTW9kdWxlKSB7CgkJCQkJdmFyIGF2YWlsYWJsZU1vZHVsZVN5bnRheCA9IGF2YWlsYWJsZU1vZHVsZS5zeW50YXg7CgkJCQkJdmFyIF92NCA9IGF2YWlsYWJsZU1vZHVsZVN5bnRheC5tb2R1bGVEZWZpbml0aW9uOwoJCQkJCXZhciBhdmFpbGFibGVNb2R1bGVEZWZpbml0aW9uID0gX3Y0LmI7CgkJCQkJdmFyIGF2YWlsYWJsZU1vZHVsZU5hbWUgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFN5bnRheCRNb2R1bGUkbW9kdWxlTmFtZShhdmFpbGFibGVNb2R1bGVEZWZpbml0aW9uKTsKCQkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkbWVtYmVyLCBhdmFpbGFibGVNb2R1bGVOYW1lLCBtb2R1bGVOYW1lc1RvTm90U3VnZ2VzdEZvckltcG9ydCkgPyAkZWxtJGNvcmUkTWF5YmUkTm90aGluZyA6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQlfVXRpbHNfVHVwbGUyKGF2YWlsYWJsZU1vZHVsZSwgYXZhaWxhYmxlTW9kdWxlTmFtZSkpOwoJCQkJfSwKCQkJCW1vZHVsZXNBdmFpbGFibGVGb3JJbXBvcnQpKTsKCQlpZiAobGluZVVudGlsUG9zaXRpb25Xb3Jkcy5iICYmIChsaW5lVW50aWxQb3NpdGlvbldvcmRzLmEgPT09ICdpbXBvcnQnKSkgewoJCQlyZXR1cm4gQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQlmdW5jdGlvbiAoX3YyKSB7CgkJCQkJdmFyIGF2YWlsYWJsZU1vZHVsZSA9IF92Mi5hOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRtb2R1bGVDb21wbGV0aW9uSXRlbUZyb21Nb2R1bGVTeW50YXgsCgkJCQkJCXtpbXBvcnRlZE1vZHVsZU5hbWVSZXN0QWZ0ZXJQcmVmaXg6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLCBpbXBvcnRlZE5hbWU6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nfSwKCQkJCQkJYXZhaWxhYmxlTW9kdWxlLnN5bnRheCk7CgkJCQl9LAoJCQkJbW9kdWxlc1RvU3VnZ2VzdEZvckltcG9ydCk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIGNvbXBsZXRpb25QcmVmaXhJc05hbWVzcGFjZSA/ICRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCWZyb21JbXBvcnRzLAoJCQkJCQlBMigKCQkJCQkJJGVsbSRjb3JlJExpc3Qkc29ydEJ5LAoJCQkJCQlmdW5jdGlvbiAoX3YzKSB7CgkJCQkJCQl2YXIgbGFiZWwgPSBfdjMuYTsKCQkJCQkJCXJldHVybiBsYWJlbDsKCQkJCQkJfSwKCQkJCQkJbG9jYWxEZWNsYXJhdGlvbnNBZnRlclByZWZpeCkKCQkJCQldKSkgOiBfTGlzdF9OaWw7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHByb3ZpZGVDb21wbGV0aW9uSXRlbXMgPSBGMigKCWZ1bmN0aW9uIChyZXF1ZXN0LCBsYW5ndWFnZVNlcnZpY2VTdGF0ZSkgewoJCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkRGljdCRnZXQsIHJlcXVlc3QuZmlsZVBhdGhPcGVuZWRJbkVkaXRvciwgbGFuZ3VhZ2VTZXJ2aWNlU3RhdGUuZG9jdW1lbnRDYWNoZSk7CgkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIF9MaXN0X05pbDsKCQl9IGVsc2UgewoJCQl2YXIgY3VycmVudEZpbGVDYWNoZUl0ZW0gPSBfdjAuYTsKCQkJdmFyIGN1cnNvcklzSW5Db21tZW50SW5Db21wbGV0ZVN5bnRheCA9IGZ1bmN0aW9uICgpIHsKCQkJCXZhciBfdjMgPSBjdXJyZW50RmlsZUNhY2hlSXRlbS50ZXh0Q29udGVudDsKCQkJCWlmIChfdjMuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgdGV4dENvbnRlbnQgPSBfdjMuYTsKCQkJCQl2YXIgX3Y0ID0gdGV4dENvbnRlbnQucGFyc2VkRmlsZTsKCQkJCQlpZiAoX3Y0LiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIHBhcnNlZEZpbGUgPSBfdjQuYTsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsb2NhdGlvbklzSW5Db21tZW50LAoJCQkJCQkJe2NvbHVtbjogcmVxdWVzdC5jdXJzb3JDb2x1bW4sIHJvdzogcmVxdWVzdC5jdXJzb3JMaW5lTnVtYmVyfSwKCQkJCQkJCXBhcnNlZEZpbGUuc3ludGF4KTsKCQkJCQl9CgkJCQl9CgkJCX0oKTsKCQkJaWYgKGN1cnNvcklzSW5Db21tZW50SW5Db21wbGV0ZVN5bnRheCkgewoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJfSBlbHNlIHsKCQkJCXZhciBfdjEgPSBjdXJyZW50RmlsZUNhY2hlSXRlbS5wYXJzZWRGaWxlTGFzdFN1Y2Nlc3M7CgkJCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBmaWxlT3BlbmVkSW5FZGl0b3IgPSBfdjEuYTsKCQkJCQl2YXIgdGV4dCA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJdmFyIF92MiA9IGN1cnJlbnRGaWxlQ2FjaGVJdGVtLnRleHRDb250ZW50OwoJCQkJCQlpZiAoX3YyLiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJcmV0dXJuIGZpbGVPcGVuZWRJbkVkaXRvci50ZXh0OwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIHRleHRDb250ZW50ID0gX3YyLmE7CgkJCQkJCQlyZXR1cm4gdGV4dENvbnRlbnQudGV4dDsKCQkJCQkJfQoJCQkJCX0oKTsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRtb25hY29Db21wbGV0aW9uSXRlbUZyb21Db21wbGV0aW9uSXRlbSwKCQkJCQkJQTIoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHByb3ZpZGVDb21wbGV0aW9uSXRlbXNJbk1vZHVsZSwKCQkJCQkJCXtjdXJzb3JDb2x1bW46IHJlcXVlc3QuY3Vyc29yQ29sdW1uLCBjdXJzb3JMaW5lTnVtYmVyOiByZXF1ZXN0LmN1cnNvckxpbmVOdW1iZXIsIGZpbGVPcGVuZWRJbkVkaXRvcjogZmlsZU9wZW5lZEluRWRpdG9yLCBuZXdUZXh0OiB0ZXh0fSwKCQkJCQkJCWxhbmd1YWdlU2VydmljZVN0YXRlKSk7CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkTG9jYXRpb25JbkZpbGUgPSBGMigKCWZ1bmN0aW9uIChhLCBiKSB7CgkJcmV0dXJuIHskOiAnTG9jYXRpb25JbkZpbGUnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbW1vbiRhc3NvY0xpc3RHZXQgPSBGMigKCWZ1bmN0aW9uIChrZXksIGxpc3QpIHsKCQlhc3NvY0xpc3RHZXQ6CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFsaXN0LmIpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJfSBlbHNlIHsKCQkJCXZhciBfdjEgPSBsaXN0LmE7CgkJCQl2YXIgZmlyc3RLZXkgPSBfdjEuYTsKCQkJCXZhciBmaXJzdFZhbHVlID0gX3YxLmI7CgkJCQl2YXIgcmVzdCA9IGxpc3QuYjsKCQkJCWlmIChfVXRpbHNfZXEoZmlyc3RLZXksIGtleSkpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJEp1c3QoZmlyc3RWYWx1ZSk7CgkJCQl9IGVsc2UgewoJCQkJCXZhciAkdGVtcCRrZXkgPSBrZXksCgkJCQkJCSR0ZW1wJGxpc3QgPSByZXN0OwoJCQkJCWtleSA9ICR0ZW1wJGtleTsKCQkJCQlsaXN0ID0gJHRlbXAkbGlzdDsKCQkJCQljb250aW51ZSBhc3NvY0xpc3RHZXQ7CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkU3ludGF4Tm9kZSA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdTeW50YXhOb2RlJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRlbG0kY29yZSRMaXN0JHN1bSA9IGZ1bmN0aW9uIChudW1iZXJzKSB7CglyZXR1cm4gQTMoJGVsbSRjb3JlJExpc3QkZm9sZGwsICRlbG0kY29yZSRCYXNpY3MkYWRkLCAwLCBudW1iZXJzKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNGcm9tUGF0dGVybiA9IGZ1bmN0aW9uIChfdjApIHsKCWxpc3RSZWZlcmVuY2VzRnJvbVBhdHRlcm46Cgl3aGlsZSAodHJ1ZSkgewoJCXZhciBwYXR0ZXJuUmFuZ2UgPSBfdjAuYTsKCQl2YXIgcGF0dGVybiA9IF92MC5iOwoJCXN3aXRjaCAocGF0dGVybi4kKSB7CgkJCWNhc2UgJ1R1cGxlUGF0dGVybic6CgkJCQl2YXIgdHVwbGVQYXR0ZXJuID0gcGF0dGVybi5hOwoJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0Zyb21QYXR0ZXJuLCB0dXBsZVBhdHRlcm4pOwoJCQljYXNlICdVbkNvbnNQYXR0ZXJuJzoKCQkJCXZhciBoZWFkID0gcGF0dGVybi5hOwoJCQkJdmFyIHRhaWwgPSBwYXR0ZXJuLmI7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNGcm9tUGF0dGVybiwKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVtoZWFkLCB0YWlsXSkpOwoJCQljYXNlICdMaXN0UGF0dGVybic6CgkJCQl2YXIgbGlzdFBhdHRlcm4gPSBwYXR0ZXJuLmE7CgkJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLCAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3RSZWZlcmVuY2VzRnJvbVBhdHRlcm4sIGxpc3RQYXR0ZXJuKTsKCQkJY2FzZSAnVmFyUGF0dGVybic6CgkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQljYXNlICdOYW1lZFBhdHRlcm4nOgoJCQkJdmFyIG5hbWVkID0gcGF0dGVybi5hOwoJCQkJdmFyIF9hcmd1bWVudHMgPSBwYXR0ZXJuLmI7CgkJCQl2YXIgcmFuZ2VTdGFydFJvdyA9IHBhdHRlcm5SYW5nZS5zdGFydC5yb3c7CgkJCQl2YXIgcmFuZ2VTdGFydE9mZnNldCA9ICRlbG0kY29yZSRMaXN0JHN1bSgKCQkJCQlBMigkZWxtJGNvcmUkTGlzdCRtYXAsICRlbG0kY29yZSRTdHJpbmckbGVuZ3RoLCBuYW1lZC5tb2R1bGVOYW1lKSkgKyAkZWxtJGNvcmUkTGlzdCRsZW5ndGgobmFtZWQubW9kdWxlTmFtZSk7CgkJCQl2YXIgbmFtZVN0YXJ0Q29sdW1uID0gcGF0dGVyblJhbmdlLnN0YXJ0LmNvbHVtbiArIHJhbmdlU3RhcnRPZmZzZXQ7CgkJCQl2YXIgbmFtZUVuZENvbHVtbiA9IG5hbWVTdGFydENvbHVtbiArICRlbG0kY29yZSRTdHJpbmckbGVuZ3RoKG5hbWVkLm5hbWUpOwoJCQkJdmFyIG5hbWVSYW5nZSA9IEEyKAoJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkUmFuZ2UsCgkJCQkJX1V0aWxzX1R1cGxlMihyYW5nZVN0YXJ0Um93LCBuYW1lU3RhcnRDb2x1bW4pLAoJCQkJCV9VdGlsc19UdXBsZTIocmFuZ2VTdGFydFJvdywgbmFtZUVuZENvbHVtbikpOwoJCQkJcmV0dXJuICRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCVsKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJFN5bnRheE5vZGUsCgkJCQkJCQkJbmFtZVJhbmdlLAoJCQkJCQkJCV9VdGlsc19UdXBsZTIobmFtZWQubW9kdWxlTmFtZSwgbmFtZWQubmFtZSkpCgkJCQkJCQldKSwKCQkJCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0Zyb21QYXR0ZXJuLCBfYXJndW1lbnRzKQoJCQkJCQldKSk7CgkJCWNhc2UgJ1BhcmVudGhlc2l6ZWRQYXR0ZXJuJzoKCQkJCXZhciBwYXJlbnRoZXNpemVkID0gcGF0dGVybi5hOwoJCQkJdmFyICR0ZW1wJF92MCA9IHBhcmVudGhlc2l6ZWQ7CgkJCQlfdjAgPSAkdGVtcCRfdjA7CgkJCQljb250aW51ZSBsaXN0UmVmZXJlbmNlc0Zyb21QYXR0ZXJuOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQl9Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3RUeXBlUmVmZXJlbmNlc0Zyb21UeXBlQW5ub3RhdGlvbiA9IGZ1bmN0aW9uIChfdjApIHsKCXZhciB0eXBlQW5ub3RhdGlvbiA9IF92MC5iOwoJc3dpdGNoICh0eXBlQW5ub3RhdGlvbi4kKSB7CgkJY2FzZSAnR2VuZXJpY1R5cGUnOgoJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCWNhc2UgJ1R5cGVkJzoKCQkJdmFyIF92MiA9IHR5cGVBbm5vdGF0aW9uLmE7CgkJCXZhciBpbnN0YW50aWF0ZWRSYW5nZVJlY29yZCA9IF92Mi5hOwoJCQl2YXIgaW5zdGFudGlhdGVkVmFsID0gX3YyLmI7CgkJCXZhciBfYXJndW1lbnRzID0gdHlwZUFubm90YXRpb24uYjsKCQkJdmFyIGluc3RhbnRpYXRlZFJhbmdlID0gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRyYW5nZUZyb21SZWNvcmRSYW5nZShpbnN0YW50aWF0ZWRSYW5nZVJlY29yZCk7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQlBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJFN5bnRheE5vZGUsIGluc3RhbnRpYXRlZFJhbmdlLCBpbnN0YW50aWF0ZWRWYWwpLAoJCQkJQTIoJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLCAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3RUeXBlUmVmZXJlbmNlc0Zyb21UeXBlQW5ub3RhdGlvbiwgX2FyZ3VtZW50cykpOwoJCWNhc2UgJ1VuaXQnOgoJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCWNhc2UgJ1R1cGxlZCc6CgkJCXZhciB0dXBsZWQgPSB0eXBlQW5ub3RhdGlvbi5hOwoJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLCAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3RUeXBlUmVmZXJlbmNlc0Zyb21UeXBlQW5ub3RhdGlvbiwgdHVwbGVkKTsKCQljYXNlICdSZWNvcmQnOgoJCQl2YXIgcmVjb3JkID0gdHlwZUFubm90YXRpb24uYTsKCQkJcmV0dXJuIEEyKAoJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJZnVuY3Rpb24gKF92MykgewoJCQkJCXZhciBfdjQgPSBfdjMuYjsKCQkJCQl2YXIgdmFsdWUgPSBfdjQuYjsKCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0VHlwZVJlZmVyZW5jZXNGcm9tVHlwZUFubm90YXRpb24odmFsdWUpOwoJCQkJfSwKCQkJCXJlY29yZCk7CgkJY2FzZSAnR2VuZXJpY1JlY29yZCc6CgkJCXZhciBfdjUgPSB0eXBlQW5ub3RhdGlvbi5iOwoJCQl2YXIgcmVjb3JkID0gX3Y1LmI7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJCWZ1bmN0aW9uIChfdjYpIHsKCQkJCQl2YXIgX3Y3ID0gX3Y2LmI7CgkJCQkJdmFyIHZhbHVlID0gX3Y3LmI7CgkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFR5cGVSZWZlcmVuY2VzRnJvbVR5cGVBbm5vdGF0aW9uKHZhbHVlKTsKCQkJCX0sCgkJCQlyZWNvcmQpOwoJCWRlZmF1bHQ6CgkJCXZhciBpbnB1dCA9IHR5cGVBbm5vdGF0aW9uLmE7CgkJCXZhciBfcmV0dXJuID0gdHlwZUFubm90YXRpb24uYjsKCQkJcmV0dXJuIEEyKAoJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0VHlwZVJlZmVyZW5jZXNGcm9tVHlwZUFubm90YXRpb24sCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJW2lucHV0LCBfcmV0dXJuXSkpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0ZvckZ1bmN0aW9uID0gZnVuY3Rpb24gKF9mdW5jdGlvbikgewoJdmFyIHNpZ25hdHVyZVJlZmVyZW5jZXMgPSBmdW5jdGlvbiAoKSB7CgkJdmFyIF92MTEgPSBfZnVuY3Rpb24uc2lnbmF0dXJlOwoJCWlmIChfdjExLiQgPT09ICdOb3RoaW5nJykgewoJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCX0gZWxzZSB7CgkJCXZhciBfdjEyID0gX3YxMS5hOwoJCQl2YXIgc2lnbmF0dXJlID0gX3YxMi5iOwoJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0VHlwZVJlZmVyZW5jZXNGcm9tVHlwZUFubm90YXRpb24oc2lnbmF0dXJlLnR5cGVBbm5vdGF0aW9uKTsKCQl9Cgl9KCk7Cgl2YXIgX3YxMCA9IF9mdW5jdGlvbi5kZWNsYXJhdGlvbjsKCXZhciBmdW5jdGlvbkRlY2xhcmF0aW9uID0gX3YxMC5iOwoJdmFyIF9hcmd1bWVudHMgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNGcm9tUGF0dGVybiwgZnVuY3Rpb25EZWNsYXJhdGlvbi5fYXJndW1lbnRzKTsKCXZhciBleHByZXNzaW9uTm9kZXMgPSAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3RSZWZlcmVuY2VzSW5FeHByZXNzaW9uKGZ1bmN0aW9uRGVjbGFyYXRpb24uZXhwcmVzc2lvbik7CglyZXR1cm4gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJW3NpZ25hdHVyZVJlZmVyZW5jZXMsIF9hcmd1bWVudHMsIGV4cHJlc3Npb25Ob2Rlc10pKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNJbkV4cHJlc3Npb24gPSBmdW5jdGlvbiAoX3YyKSB7CglsaXN0UmVmZXJlbmNlc0luRXhwcmVzc2lvbjoKCXdoaWxlICh0cnVlKSB7CgkJdmFyIGV4cHJlc3Npb25SYW5nZSA9IF92Mi5hOwoJCXZhciBleHByZXNzaW9uID0gX3YyLmI7CgkJc3dpdGNoIChleHByZXNzaW9uLiQpIHsKCQkJY2FzZSAnVW5pdEV4cHInOgoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJY2FzZSAnQXBwbGljYXRpb24nOgoJCQkJdmFyIGFwcGxpY2F0aW9uID0gZXhwcmVzc2lvbi5hOwoJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0luRXhwcmVzc2lvbiwgYXBwbGljYXRpb24pOwoJCQljYXNlICdPcGVyYXRvckFwcGxpY2F0aW9uJzoKCQkJCXZhciBsZWZ0RXhwciA9IGV4cHJlc3Npb24uYzsKCQkJCXZhciByaWdodEV4cHIgPSBleHByZXNzaW9uLmQ7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNJbkV4cHJlc3Npb24sCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbbGVmdEV4cHIsIHJpZ2h0RXhwcl0pKTsKCQkJY2FzZSAnRnVuY3Rpb25PclZhbHVlJzoKCQkJCXZhciBtb2R1bGVOYW1lID0gZXhwcmVzc2lvbi5hOwoJCQkJdmFyIGxvY2FsTmFtZSA9IGV4cHJlc3Npb24uYjsKCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlBMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRTeW50YXhOb2RlLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHJhbmdlRnJvbVJlY29yZFJhbmdlKGV4cHJlc3Npb25SYW5nZSksCgkJCQkJCV9VdGlsc19UdXBsZTIobW9kdWxlTmFtZSwgbG9jYWxOYW1lKSkKCQkJCQldKTsKCQkJY2FzZSAnSWZCbG9jayc6CgkJCQl2YXIgaWZFeHByID0gZXhwcmVzc2lvbi5hOwoJCQkJdmFyIHRoZW5FeHByID0gZXhwcmVzc2lvbi5iOwoJCQkJdmFyIGVsc2VFeHByID0gZXhwcmVzc2lvbi5jOwoJCQkJcmV0dXJuIEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3RSZWZlcmVuY2VzSW5FeHByZXNzaW9uLAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJW2lmRXhwciwgdGhlbkV4cHIsIGVsc2VFeHByXSkpOwoJCQljYXNlICdQcmVmaXhPcGVyYXRvcic6CgkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQljYXNlICdPcGVyYXRvcic6CgkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQljYXNlICdJbnRlZ2VyJzoKCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCWNhc2UgJ0hleCc6CgkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQljYXNlICdGbG9hdGFibGUnOgoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJY2FzZSAnTmVnYXRpb24nOgoJCQkJdmFyIG5lZ2F0aW9uID0gZXhwcmVzc2lvbi5hOwoJCQkJdmFyICR0ZW1wJF92MiA9IG5lZ2F0aW9uOwoJCQkJX3YyID0gJHRlbXAkX3YyOwoJCQkJY29udGludWUgbGlzdFJlZmVyZW5jZXNJbkV4cHJlc3Npb247CgkJCWNhc2UgJ0xpdGVyYWwnOgoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJY2FzZSAnQ2hhckxpdGVyYWwnOgoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJY2FzZSAnVHVwbGVkRXhwcmVzc2lvbic6CgkJCQl2YXIgdHVwbGVkID0gZXhwcmVzc2lvbi5hOwoJCQkJcmV0dXJuIEEyKCRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0luRXhwcmVzc2lvbiwgdHVwbGVkKTsKCQkJY2FzZSAnUGFyZW50aGVzaXplZEV4cHJlc3Npb24nOgoJCQkJdmFyIHBhcmVudGhlc2l6ZWQgPSBleHByZXNzaW9uLmE7CgkJCQl2YXIgJHRlbXAkX3YyID0gcGFyZW50aGVzaXplZDsKCQkJCV92MiA9ICR0ZW1wJF92MjsKCQkJCWNvbnRpbnVlIGxpc3RSZWZlcmVuY2VzSW5FeHByZXNzaW9uOwoJCQljYXNlICdMZXRFeHByZXNzaW9uJzoKCQkJCXZhciBsZXRCbG9jayA9IGV4cHJlc3Npb24uYTsKCQkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3RSZWZlcmVuY2VzSW5MZXRCbG9jayhsZXRCbG9jayk7CgkJCWNhc2UgJ0Nhc2VFeHByZXNzaW9uJzoKCQkJCXZhciBjYXNlQmxvY2sgPSBleHByZXNzaW9uLmE7CgkJCQlyZXR1cm4gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0luRXhwcmVzc2lvbihjYXNlQmxvY2suZXhwcmVzc2lvbiksCgkJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJCQkJCWZ1bmN0aW9uIChfdjQpIHsKCQkJCQkJCQl2YXIgY2FzZVBhdHRlcm4gPSBfdjQuYTsKCQkJCQkJCQl2YXIgY2FzZUJyYW5jaCA9IF92NC5iOwoJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3RSZWZlcmVuY2VzRnJvbVBhdHRlcm4oY2FzZVBhdHRlcm4pLAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNJbkV4cHJlc3Npb24oY2FzZUJyYW5jaCkKCQkJCQkJCQkJCV0pKTsKCQkJCQkJCX0sCgkJCQkJCQljYXNlQmxvY2suY2FzZXMpCgkJCQkJCV0pKTsKCQkJY2FzZSAnTGFtYmRhRXhwcmVzc2lvbic6CgkJCQl2YXIgbGFtYmRhID0gZXhwcmVzc2lvbi5hOwoJCQkJdmFyICR0ZW1wJF92MiA9IGxhbWJkYS5leHByZXNzaW9uOwoJCQkJX3YyID0gJHRlbXAkX3YyOwoJCQkJY29udGludWUgbGlzdFJlZmVyZW5jZXNJbkV4cHJlc3Npb247CgkJCWNhc2UgJ1JlY29yZEV4cHInOgoJCQkJdmFyIHJlY29yZEV4cHIgPSBleHByZXNzaW9uLmE7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCWZ1bmN0aW9uIChfdjUpIHsKCQkJCQkJdmFyIF92NiA9IF92NS5iOwoJCQkJCQl2YXIgcmVjb3JkRmllbGQgPSBfdjYuYjsKCQkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNJbkV4cHJlc3Npb24ocmVjb3JkRmllbGQpOwoJCQkJCX0sCgkJCQkJcmVjb3JkRXhwcik7CgkJCWNhc2UgJ0xpc3RFeHByJzoKCQkJCXZhciBsaXN0RXhwciA9IGV4cHJlc3Npb24uYTsKCQkJCXJldHVybiBBMigkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNJbkV4cHJlc3Npb24sIGxpc3RFeHByKTsKCQkJY2FzZSAnUmVjb3JkQWNjZXNzJzoKCQkJCXZhciByZWNvcmRBY2Nlc3MgPSBleHByZXNzaW9uLmE7CgkJCQl2YXIgJHRlbXAkX3YyID0gcmVjb3JkQWNjZXNzOwoJCQkJX3YyID0gJHRlbXAkX3YyOwoJCQkJY29udGludWUgbGlzdFJlZmVyZW5jZXNJbkV4cHJlc3Npb247CgkJCWNhc2UgJ1JlY29yZEFjY2Vzc0Z1bmN0aW9uJzoKCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCWNhc2UgJ1JlY29yZFVwZGF0ZUV4cHJlc3Npb24nOgoJCQkJdmFyIF92NyA9IGV4cHJlc3Npb24uYTsKCQkJCXZhciByZWNvcmROYW1lUmFuZ2UgPSBfdjcuYTsKCQkJCXZhciByZWNvcmROYW1lID0gX3Y3LmI7CgkJCQl2YXIgcmVjb3JkVXBkYXRlRXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uYjsKCQkJCXJldHVybiAkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRTeW50YXhOb2RlLAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmFuZ2VGcm9tUmVjb3JkUmFuZ2UocmVjb3JkTmFtZVJhbmdlKSwKCQkJCQkJCQlfVXRpbHNfVHVwbGUyKF9MaXN0X05pbCwgcmVjb3JkTmFtZSkpCgkJCQkJCQldKSwKCQkJCQkJCUEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQkJCQkJZnVuY3Rpb24gKF92OCkgewoJCQkJCQkJCXZhciBfdjkgPSBfdjguYjsKCQkJCQkJCQl2YXIgcmVjb3JkRmllbGQgPSBfdjkuYjsKCQkJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0luRXhwcmVzc2lvbihyZWNvcmRGaWVsZCk7CgkJCQkJCQl9LAoJCQkJCQkJcmVjb3JkVXBkYXRlRXhwcmVzc2lvbikKCQkJCQkJXSkpOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQl9Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3RSZWZlcmVuY2VzSW5MZXRCbG9jayA9IGZ1bmN0aW9uIChsZXRCbG9jaykgewoJcmV0dXJuICRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKCRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0luTGV0RGVjbGFyYXRpb24sIGxldEJsb2NrLmRlY2xhcmF0aW9ucyksCgkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3RSZWZlcmVuY2VzSW5FeHByZXNzaW9uKGxldEJsb2NrLmV4cHJlc3Npb24pCgkJCV0pKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNJbkxldERlY2xhcmF0aW9uID0gZnVuY3Rpb24gKGRlY2xhcmF0aW9uTm9kZSkgewoJdmFyIF92MCA9IGRlY2xhcmF0aW9uTm9kZTsKCXZhciBkZWNsYXJhdGlvbiA9IF92MC5iOwoJaWYgKGRlY2xhcmF0aW9uLiQgPT09ICdMZXRGdW5jdGlvbicpIHsKCQl2YXIgX2Z1bmN0aW9uID0gZGVjbGFyYXRpb24uYTsKCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0ZvckZ1bmN0aW9uKF9mdW5jdGlvbik7Cgl9IGVsc2UgewoJCXZhciBsZXREZXN0cnVjdHVyaW5nID0gZGVjbGFyYXRpb24uYjsKCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0luRXhwcmVzc2lvbihsZXREZXN0cnVjdHVyaW5nKTsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNGcm9tVHlwZURlY2xhcmF0aW9uID0gZnVuY3Rpb24gKGNob2ljZVR5cGVEZWNsYXJhdGlvbikgewoJcmV0dXJuIEEyKAoJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQlmdW5jdGlvbiAoX3YwKSB7CgkJCXZhciBjb25zdHJ1Y3RvciA9IF92MC5iOwoJCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLCAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3RUeXBlUmVmZXJlbmNlc0Zyb21UeXBlQW5ub3RhdGlvbiwgY29uc3RydWN0b3IuX2FyZ3VtZW50cyk7CgkJfSwKCQljaG9pY2VUeXBlRGVjbGFyYXRpb24uY29uc3RydWN0b3JzKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmVmZXJlbmNlc0ZvckFsaWFzRGVjbGFyYXRpb24gPSBmdW5jdGlvbiAoYWxpYXNEZWNsYXJhdGlvbikgewoJcmV0dXJuICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFR5cGVSZWZlcmVuY2VzRnJvbVR5cGVBbm5vdGF0aW9uKGFsaWFzRGVjbGFyYXRpb24udHlwZUFubm90YXRpb24pOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0luRGVjbGFyYXRpb24gPSBmdW5jdGlvbiAoZGVjbGFyYXRpb25Ob2RlKSB7Cgl2YXIgX3YwID0gZGVjbGFyYXRpb25Ob2RlOwoJdmFyIGRlY2xhcmF0aW9uID0gX3YwLmI7Cglzd2l0Y2ggKGRlY2xhcmF0aW9uLiQpIHsKCQljYXNlICdGdW5jdGlvbkRlY2xhcmF0aW9uJzoKCQkJdmFyIF9mdW5jdGlvbiA9IGRlY2xhcmF0aW9uLmE7CgkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3RSZWZlcmVuY2VzRm9yRnVuY3Rpb24oX2Z1bmN0aW9uKTsKCQljYXNlICdBbGlhc0RlY2xhcmF0aW9uJzoKCQkJdmFyIGFsaWFzRGVjbGFyYXRpb24gPSBkZWNsYXJhdGlvbi5hOwoJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRyZWZlcmVuY2VzRm9yQWxpYXNEZWNsYXJhdGlvbihhbGlhc0RlY2xhcmF0aW9uKTsKCQljYXNlICdDdXN0b21UeXBlRGVjbGFyYXRpb24nOgoJCQl2YXIgY2hvaWNlVHlwZURlY2xhcmF0aW9uID0gZGVjbGFyYXRpb24uYTsKCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNGcm9tVHlwZURlY2xhcmF0aW9uKGNob2ljZVR5cGVEZWNsYXJhdGlvbik7CgkJY2FzZSAnUG9ydERlY2xhcmF0aW9uJzoKCQkJcmV0dXJuIF9MaXN0X05pbDsKCQljYXNlICdJbmZpeERlY2xhcmF0aW9uJzoKCQkJcmV0dXJuIF9MaXN0X05pbDsKCQlkZWZhdWx0OgoJCQlyZXR1cm4gX0xpc3RfTmlsOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0luRXhwb3NpbmdMaXN0ID0gZnVuY3Rpb24gKGV4cG9zaW5nTGlzdCkgewoJaWYgKGV4cG9zaW5nTGlzdC4kID09PSAnQWxsJykgewoJCXJldHVybiBfTGlzdF9OaWw7Cgl9IGVsc2UgewoJCXZhciB0b3BMZXZlbEV4cG9zaW5ncyA9IGV4cG9zaW5nTGlzdC5hOwoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQl2YXIgdG9wTGV2ZWxFeHBvc2VSYW5nZVJlY29yZCA9IF92MS5hOwoJCQkJdmFyIHRvcExldmVsRXhwb3NlID0gX3YxLmI7CgkJCQl2YXIgdG9wTGV2ZWxFeHBvc2VSYW5nZSA9ICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmFuZ2VGcm9tUmVjb3JkUmFuZ2UodG9wTGV2ZWxFeHBvc2VSYW5nZVJlY29yZCk7CgkJCQlzd2l0Y2ggKHRvcExldmVsRXhwb3NlLiQpIHsKCQkJCQljYXNlICdJbmZpeEV4cG9zZSc6CgkJCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCQkJY2FzZSAnRnVuY3Rpb25FeHBvc2UnOgoJCQkJCQl2YXIgZnVuY3Rpb25OYW1lID0gdG9wTGV2ZWxFeHBvc2UuYTsKCQkJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQlBMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJFN5bnRheE5vZGUsCgkJCQkJCQkJdG9wTGV2ZWxFeHBvc2VSYW5nZSwKCQkJCQkJCQlfVXRpbHNfVHVwbGUyKF9MaXN0X05pbCwgZnVuY3Rpb25OYW1lKSkKCQkJCQkJCV0pOwoJCQkJCWNhc2UgJ1R5cGVPckFsaWFzRXhwb3NlJzoKCQkJCQkJdmFyIHR5cGVPckFsaWFzTmFtZSA9IHRvcExldmVsRXhwb3NlLmE7CgkJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRTeW50YXhOb2RlLAoJCQkJCQkJCXRvcExldmVsRXhwb3NlUmFuZ2UsCgkJCQkJCQkJX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIHR5cGVPckFsaWFzTmFtZSkpCgkJCQkJCQldKTsKCQkJCQlkZWZhdWx0OgoJCQkJCQl2YXIgdHlwZUV4cG9zZSA9IHRvcExldmVsRXhwb3NlLmE7CgkJCQkJCXZhciB0b3BMZXZlbEV4cG9zZVJhbmdlU3RhcnRSZWNvcmQgPSB0b3BMZXZlbEV4cG9zZVJhbmdlUmVjb3JkLnN0YXJ0OwoJCQkJCQl2YXIgcmFuZ2VTdGFydFJvdyA9IHRvcExldmVsRXhwb3NlUmFuZ2VTdGFydFJlY29yZC5yb3c7CgkJCQkJCXZhciByYW5nZVN0YXJ0Q29sdW1uID0gdG9wTGV2ZWxFeHBvc2VSYW5nZVN0YXJ0UmVjb3JkLmNvbHVtbjsKCQkJCQkJdmFyIHJhbmdlRW5kQ29sdW1uID0gcmFuZ2VTdGFydENvbHVtbiArICRlbG0kY29yZSRTdHJpbmckbGVuZ3RoKHR5cGVFeHBvc2UubmFtZSk7CgkJCQkJCXZhciByYW5nZSA9IEEyKAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRSYW5nZSwKCQkJCQkJCV9VdGlsc19UdXBsZTIocmFuZ2VTdGFydFJvdywgcmFuZ2VTdGFydENvbHVtbiksCgkJCQkJCQlfVXRpbHNfVHVwbGUyKHJhbmdlU3RhcnRSb3csIHJhbmdlRW5kQ29sdW1uKSk7CgkJCQkJCXJldHVybiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbCgkJCQkJCQkJQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRTeW50YXhOb2RlLAoJCQkJCQkJCXJhbmdlLAoJCQkJCQkJCV9VdGlsc19UdXBsZTIoX0xpc3RfTmlsLCB0eXBlRXhwb3NlLm5hbWUpKQoJCQkJCQkJXSk7CgkJCQl9CgkJCX0sCgkJCXRvcExldmVsRXhwb3NpbmdzKTsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNJbkZpbGUgPSBmdW5jdGlvbiAoZmlsZVN5bnRheCkgewoJdmFyIGZyb21FeHBvc2luZyA9IGZ1bmN0aW9uICgpIHsKCQl2YXIgX3YwID0gZmlsZVN5bnRheC5tb2R1bGVEZWZpbml0aW9uOwoJCXN3aXRjaCAoX3YwLmIuJCkgewoJCQljYXNlICdOb3JtYWxNb2R1bGUnOgoJCQkJdmFyIG5vcm1hbE1vZHVsZSA9IF92MC5iLmE7CgkJCQl2YXIgX3YxID0gbm9ybWFsTW9kdWxlLmV4cG9zaW5nTGlzdDsKCQkJCXZhciBleHBvc2luZ0xpc3QgPSBfdjEuYjsKCQkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGxpc3RSZWZlcmVuY2VzSW5FeHBvc2luZ0xpc3QoZXhwb3NpbmdMaXN0KTsKCQkJY2FzZSAnRWZmZWN0TW9kdWxlJzoKCQkJCXZhciBlZmZlY3RNb2R1bGUgPSBfdjAuYi5hOwoJCQkJdmFyIF92MiA9IGVmZmVjdE1vZHVsZS5leHBvc2luZ0xpc3Q7CgkJCQl2YXIgZXhwb3NpbmdMaXN0ID0gX3YyLmI7CgkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0luRXhwb3NpbmdMaXN0KGV4cG9zaW5nTGlzdCk7CgkJCWRlZmF1bHQ6CgkJCQl2YXIgcG9ydE1vZHVsZSA9IF92MC5iLmE7CgkJCQl2YXIgX3YzID0gcG9ydE1vZHVsZS5leHBvc2luZ0xpc3Q7CgkJCQl2YXIgZXhwb3NpbmdMaXN0ID0gX3YzLmI7CgkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRsaXN0UmVmZXJlbmNlc0luRXhwb3NpbmdMaXN0KGV4cG9zaW5nTGlzdCk7CgkJfQoJfSgpOwoJdmFyIGZyb21EZWNsYXJhdGlvbnMgPSBBMigkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNJbkRlY2xhcmF0aW9uLCBmaWxlU3ludGF4LmRlY2xhcmF0aW9ucyk7CglyZXR1cm4gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJW2Zyb21FeHBvc2luZywgZnJvbURlY2xhcmF0aW9uc10pKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkaG92ZXJJdGVtc0Zyb21QYXJzZWRNb2R1bGUgPSBGMigKCWZ1bmN0aW9uIChfdjAsIGxhbmd1YWdlU2VydmljZVN0YXRlKSB7CgkJdmFyIHBhcnNlZE1vZHVsZVN5bnRheCA9IF92MC5hOwoJCXZhciBjdXJyZW50TW9kdWxlRGVjbGFyYXRpb25zID0gX3YwLmI7CgkJdmFyIGN1cnJlbnRNb2R1bGVGaWxlTG9jYXRpb24gPSBfdjAuYzsKCQl2YXIgcGFyc2VkUmVmZXJlbmNlcyA9ICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbGlzdFJlZmVyZW5jZXNJbkZpbGUocGFyc2VkTW9kdWxlU3ludGF4KTsKCQl2YXIgbG9jYWxEZWNsYXJhdGlvbnNBbmRJbXBvcnRFeHBvc2luZ3MgPSAkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXQoCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlBMigKCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCWZ1bmN0aW9uIChmcm9tVG9wTGV2ZWwpIHsKCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMygKCQkJCQkJCQkJX1V0aWxzX1R1cGxlMihjdXJyZW50TW9kdWxlRmlsZUxvY2F0aW9uLCBmcm9tVG9wTGV2ZWwucmFuZ2UpLAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJFRvcExldmVsU2NvcGUsCgkJCQkJCQkJCWZyb21Ub3BMZXZlbC5jb21wbGV0aW9uSXRlbSk7CgkJCQkJCQl9LAoJCQkJCQkJY3VycmVudE1vZHVsZURlY2xhcmF0aW9ucy5mcm9tVG9wTGV2ZWwpLAoJCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJCQlmdW5jdGlvbiAoX3YzMykgewoJCQkJCQkJCXZhciBkZWNsUmFuZ2UgPSBfdjMzLmE7CgkJCQkJCQkJdmFyIGNvbXBsZXRpb25JdGVtID0gX3YzMy5iOwoJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUzKGRlY2xSYW5nZSwgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRUb3BMZXZlbFNjb3BlLCBjb21wbGV0aW9uSXRlbSk7CgkJCQkJCQl9LAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRjb21tb25JbXBsaWNpdFRvcExldmVsSW1wb3J0cyhsYW5ndWFnZVNlcnZpY2VTdGF0ZSkpCgkJCQkJCV0pKSwKCQkJCQlBMigKCQkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQkJZnVuY3Rpb24gKF92MzQpIHsKCQkJCQkJdmFyIGNvbXBsZXRpb25JdGVtID0gX3YzNC5hOwoJCQkJCQl2YXIgZGVjbFJhbmdlID0gX3YzNC5iOwoJCQkJCQl2YXIgc2NvcGVSYW5nZSA9IF92MzQuYzsKCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTMoCgkJCQkJCQlfVXRpbHNfVHVwbGUyKGN1cnJlbnRNb2R1bGVGaWxlTG9jYXRpb24sIGRlY2xSYW5nZSksCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJExvY2FsU2NvcGUoc2NvcGVSYW5nZSksCgkJCQkJCQljb21wbGV0aW9uSXRlbSk7CgkJCQkJfSwKCQkJCQljdXJyZW50TW9kdWxlRGVjbGFyYXRpb25zLmZyb21Mb2NhbHMpCgkJCQldKSk7CgkJdmFyIGxvY2FsTW9kdWxlSXRlbXNCZWZvcmVGaWx0ZXJpbmcgPSBBMigKCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQlmdW5jdGlvbiAoX3YyOSkgewoJCQkJdmFyIF92MzAgPSBfdjI5LmE7CgkJCQl2YXIgZGVjbEZpbGVMb2NhdGlvbiA9IF92MzAuYTsKCQkJCXZhciBkZWNsUmFuZ2UgPSBfdjMwLmI7CgkJCQl2YXIgc2NvcGUgPSBfdjI5LmI7CgkJCQl2YXIgY29tcGxldGlvbkl0ZW0gPSBfdjI5LmM7CgkJCQl2YXIgY29tcGxldGlvbkl0ZW1MYWJlbCA9IGNvbXBsZXRpb25JdGVtLmE7CgkJCQl2YXIgX3YzMSA9IGZ1bmN0aW9uICgpIHsKCQkJCQlpZiAoc2NvcGUuJCA9PT0gJ1RvcExldmVsU2NvcGUnKSB7CgkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKCRlbG0kY29yZSRNYXliZSROb3RoaW5nLCBkZWNsUmFuZ2UpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBzY29wZVJhbmdlID0gc2NvcGUuYTsKCQkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdChzY29wZVJhbmdlKSwKCQkJCQkJCWRlY2xSYW5nZSk7CgkJCQkJfQoJCQkJfSgpOwoJCQkJdmFyIG1heWJlRmlsdGVyUmFuZ2UgPSBfdjMxLmE7CgkJCQl2YXIgY29tcGxldGlvbkl0ZW1SYW5nZSA9IF92MzEuYjsKCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCWNvbXBsZXRpb25JdGVtTGFiZWwsCgkJCQkJX1V0aWxzX1R1cGxlMygKCQkJCQkJbWF5YmVGaWx0ZXJSYW5nZSwKCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRMb2NhdGlvbkluRmlsZSwgZGVjbEZpbGVMb2NhdGlvbiwgY29tcGxldGlvbkl0ZW1SYW5nZSksCgkJCQkJCWNvbXBsZXRpb25JdGVtKSk7CgkJCX0sCgkJCWxvY2FsRGVjbGFyYXRpb25zQW5kSW1wb3J0RXhwb3NpbmdzKTsKCQl2YXIgaW1wb3J0ZWRNb2R1bGVzID0gQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRpbXBvcnRlZE1vZHVsZXNGcm9tRmlsZSwgcGFyc2VkTW9kdWxlU3ludGF4LCBsYW5ndWFnZVNlcnZpY2VTdGF0ZSk7CgkJdmFyIGltcG9ydGVkTW9kdWxlc0NvbXBsZXRpb25JdGVtcyA9IEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCWZ1bmN0aW9uIChpbXBvcnRlZE1vZHVsZSkgewoJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJaW1wb3J0ZWRNb2R1bGUuaW1wb3J0ZWROYW1lLAoJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCWltcG9ydGVkTW9kdWxlLAoJCQkJCQlmdW5jdGlvbiAoKSB7CgkJCQkJCQl2YXIgX3YyNyA9IGltcG9ydGVkTW9kdWxlLnBhcnNlZE1vZHVsZTsKCQkJCQkJCWlmIChfdjI3LiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJCXJldHVybiB7ZnJvbUxvY2FsczogX0xpc3RfTmlsLCBmcm9tVG9wTGV2ZWw6IF9MaXN0X05pbH07CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXZhciBfdjI4ID0gX3YyNy5hOwoJCQkJCQkJCXZhciBpbXBvcnRlZENvbXBsZXRpb25JdGVtcyA9IF92MjguYjsKCQkJCQkJCQlyZXR1cm4gaW1wb3J0ZWRDb21wbGV0aW9uSXRlbXM7CgkJCQkJCQl9CgkJCQkJCX0oKSkpOwoJCQl9LAoJCQlpbXBvcnRlZE1vZHVsZXMpOwoJCXZhciBnZXRIb3ZlckZvckZ1bmN0aW9uT3JOYW1lID0gZnVuY3Rpb24gKF92MjMpIHsKCQkJdmFyIF92MjQgPSBfdjIzLmE7CgkJCXZhciBfdjI1ID0gX3YyNC5hOwoJCQl2YXIgc3RhcnRSb3cgPSBfdjI1LmE7CgkJCXZhciBzdGFydENvbHVtbiA9IF92MjUuYjsKCQkJdmFyIF92MjYgPSBfdjIzLmI7CgkJCXZhciBtb2R1bGVOYW1lID0gX3YyNi5hOwoJCQl2YXIgbmFtZUluTW9kdWxlID0gX3YyNi5iOwoJCQlpZiAoX1V0aWxzX2VxKG1vZHVsZU5hbWUsIF9MaXN0X05pbCkpIHsKCQkJCXZhciBfdjE2ID0gQTIoJGF1dGhvciRwcm9qZWN0JENvbW1vbiRhc3NvY0xpc3RHZXQsIG5hbWVJbk1vZHVsZSwgbG9jYWxNb2R1bGVJdGVtc0JlZm9yZUZpbHRlcmluZyk7CgkJCQlpZiAoX3YxNi4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfdjE3ID0gX3YxNi5hOwoJCQkJCXZhciBtYXliZUZpbHRlclJhbmdlID0gX3YxNy5hOwoJCQkJCXZhciBsb2NhdGlvblVuZGVyRmlsZVBhdGggPSBfdjE3LmI7CgkJCQkJdmFyIF92MTggPSBfdjE3LmM7CgkJCQkJdmFyIGNvbXBsZXRpb25JdGVtRG9jdW1lbnRhdGlvbiA9IF92MTguZDsKCQkJCQlpZiAobWF5YmVGaWx0ZXJSYW5nZS4kID09PSAnTm90aGluZycpIHsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJX1V0aWxzX1R1cGxlMihsb2NhdGlvblVuZGVyRmlsZVBhdGgsIGNvbXBsZXRpb25JdGVtRG9jdW1lbnRhdGlvbikpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBmaWx0ZXJSYW5nZSA9IG1heWJlRmlsdGVyUmFuZ2UuYTsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRyYW5nZUNvbnRhaW5zTG9jYXRpb24sCgkJCQkJCQlfVXRpbHNfVHVwbGUyKHN0YXJ0Um93LCBzdGFydENvbHVtbiksCgkJCQkJCQlmaWx0ZXJSYW5nZSkgPyAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCV9VdGlsc19UdXBsZTIobG9jYXRpb25VbmRlckZpbGVQYXRoLCBjb21wbGV0aW9uSXRlbURvY3VtZW50YXRpb24pKSA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCX0KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXZhciBfdjIwID0gQTIoJGF1dGhvciRwcm9qZWN0JENvbW1vbiRhc3NvY0xpc3RHZXQsIG1vZHVsZU5hbWUsIGltcG9ydGVkTW9kdWxlc0NvbXBsZXRpb25JdGVtcyk7CgkJCQlpZiAoX3YyMC4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQl9IGVsc2UgewoJCQkJCXZhciBfdjIxID0gX3YyMC5hOwoJCQkJCXZhciByZWZlcmVuY2VkTW9kdWxlID0gX3YyMS5hOwoJCQkJCXZhciBtb2R1bGVDb21wbGV0aW9uSXRlbXMgPSBfdjIxLmI7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tbW9uJGxpc3RNYXBGaW5kLAoJCQkJCQlmdW5jdGlvbiAoaXRlbSkgewoJCQkJCQkJdmFyIF92MjIgPSBpdGVtLmNvbXBsZXRpb25JdGVtOwoJCQkJCQkJdmFyIGl0ZW1JbnNlcnRUZXh0ID0gX3YyMi5iOwoJCQkJCQkJdmFyIGl0ZW1Eb2N1bWVudGF0aW9uID0gX3YyMi5kOwoJCQkJCQkJcmV0dXJuIChfVXRpbHNfZXEoaXRlbUluc2VydFRleHQsIG5hbWVJbk1vZHVsZSkgJiYgaXRlbS5pc0V4cG9zZWQpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoCgkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRMb2NhdGlvbkluRmlsZSwgcmVmZXJlbmNlZE1vZHVsZS5maWxlTG9jYXRpb24sIGl0ZW0ucmFuZ2UpLAoJCQkJCQkJCQlpdGVtRG9jdW1lbnRhdGlvbikpIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCX0sCgkJCQkJCW1vZHVsZUNvbXBsZXRpb25JdGVtcy5mcm9tVG9wTGV2ZWwpOwoJCQkJfQoJCQl9CgkJfTsKCQl2YXIgZ2V0Rm9ySG92ZXJzRm9yUmVmZXJlbmNlTm9kZSA9IGZ1bmN0aW9uIChmdW5jdGlvbk9yTmFtZU5vZGUpIHsKCQkJdmFyIF92NSA9IGZ1bmN0aW9uT3JOYW1lTm9kZTsKCQkJdmFyIHdob2xlUmFuZ2UgPSBfdjUuYTsKCQkJdmFyIF92NiA9IF92NS5iOwoJCQl2YXIgbW9kdWxlTmFtZSA9IF92Ni5hOwoJCQl2YXIgbmFtZUluTW9kdWxlID0gX3Y2LmI7CgkJCXZhciBfdjcgPSB3aG9sZVJhbmdlOwoJCQl2YXIgX3Y4ID0gX3Y3LmE7CgkJCXZhciB3aG9sZVJhbmdlU3RhcnRMaW5lID0gX3Y4LmE7CgkJCXZhciB3aG9sZVJhbmdlU3RhcnRDb2x1bW4gPSBfdjguYjsKCQkJdmFyIF92OSA9IF92Ny5iOwoJCQl2YXIgd2hvbGVSYW5nZUVuZExpbmUgPSBfdjkuYTsKCQkJdmFyIHdob2xlUmFuZ2VFbmRDb2x1bW4gPSBfdjkuYjsKCQkJdmFyIGZvck5hbWVJbk1vZHVsZVJhbmdlID0gQTIoCgkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJFJhbmdlLAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQl3aG9sZVJhbmdlU3RhcnRMaW5lLAoJCQkJCXdob2xlUmFuZ2VFbmRDb2x1bW4gLSAkZWxtJGNvcmUkU3RyaW5nJGxlbmd0aChuYW1lSW5Nb2R1bGUpKSwKCQkJCV9VdGlsc19UdXBsZTIod2hvbGVSYW5nZUVuZExpbmUsIHdob2xlUmFuZ2VFbmRDb2x1bW4pKTsKCQkJdmFyIGZvck5hbWVJbk1vZHVsZSA9IGZ1bmN0aW9uICgpIHsKCQkJCXZhciBfdjE0ID0gZ2V0SG92ZXJGb3JGdW5jdGlvbk9yTmFtZShmdW5jdGlvbk9yTmFtZU5vZGUpOwoJCQkJaWYgKF92MTQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIF92MTUgPSBfdjE0LmE7CgkJCQkJdmFyIHNvdXJjZUxvY2F0aW9uID0gX3YxNS5hOwoJCQkJCXZhciBob3ZlciA9IF92MTUuYjsKCQkJCQlyZXR1cm4gX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQlfVXRpbHNfVHVwbGUzKGZvck5hbWVJbk1vZHVsZVJhbmdlLCBzb3VyY2VMb2NhdGlvbiwgaG92ZXIpCgkJCQkJCV0pOwoJCQkJfQoJCQl9KCk7CgkJCXZhciByYW5nZU1vZHVsZVBhcnQgPSBBMigKCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkUmFuZ2UsCgkJCQlfVXRpbHNfVHVwbGUyKHdob2xlUmFuZ2VTdGFydExpbmUsIHdob2xlUmFuZ2VTdGFydENvbHVtbiksCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCXdob2xlUmFuZ2VFbmRMaW5lLAoJCQkJCSh3aG9sZVJhbmdlRW5kQ29sdW1uIC0gJGVsbSRjb3JlJFN0cmluZyRsZW5ndGgobmFtZUluTW9kdWxlKSkgLSAxKSk7CgkJCXZhciBmb3JNb2R1bGUgPSBmdW5jdGlvbiAoKSB7CgkJCQlpZiAoX1V0aWxzX2VxKG1vZHVsZU5hbWUsIF9MaXN0X05pbCkpIHsKCQkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgX3YxMCA9IEEyKAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tbW9uJGxpc3RGaW5kLAoJCQkJCQlmdW5jdGlvbiAoaW1wb3J0ZWRNb2R1bGUpIHsKCQkJCQkJCXJldHVybiBfVXRpbHNfZXEoaW1wb3J0ZWRNb2R1bGUuaW1wb3J0ZWROYW1lLCBtb2R1bGVOYW1lKTsKCQkJCQkJfSwKCQkJCQkJaW1wb3J0ZWRNb2R1bGVzKTsKCQkJCQlpZiAoX3YxMC4kID09PSAnTm90aGluZycpIHsKCQkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgcmVmZXJlbmNlZE1vZHVsZSA9IF92MTAuYTsKCQkJCQkJdmFyIF92MTEgPSByZWZlcmVuY2VkTW9kdWxlLnBhcnNlZE1vZHVsZTsKCQkJCQkJaWYgKF92MTEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIF92MTIgPSBfdjExLmE7CgkJCQkJCQl2YXIgcmVmZXJlbmNlZE1vZHVsZVBhcnNlZFN5bnRheCA9IF92MTIuYTsKCQkJCQkJCXZhciBfdjEzID0gQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRtb2R1bGVDb21wbGV0aW9uSXRlbUZyb21Nb2R1bGVTeW50YXgsCgkJCQkJCQkJewoJCQkJCQkJCQlpbXBvcnRlZE1vZHVsZU5hbWVSZXN0QWZ0ZXJQcmVmaXg6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nLAoJCQkJCQkJCQlpbXBvcnRlZE5hbWU6ICRlbG0kY29yZSRNYXliZSRKdXN0KG1vZHVsZU5hbWUpCgkJCQkJCQkJfSwKCQkJCQkJCQlyZWZlcmVuY2VkTW9kdWxlUGFyc2VkU3ludGF4KTsKCQkJCQkJCXZhciBkb2N1bWVudGF0aW9uID0gX3YxMy5kOwoJCQkJCQkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCV9VdGlsc19UdXBsZTMoCgkJCQkJCQkJCXJhbmdlTW9kdWxlUGFydCwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJExvY2F0aW9uSW5GaWxlLAoJCQkJCQkJCQkJcmVmZXJlbmNlZE1vZHVsZS5maWxlTG9jYXRpb24sCgkJCQkJCQkJCQlBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJERlY2xhcmF0aW9uUmFuZ2UsIHJhbmdlTW9kdWxlUGFydCwgX0xpc3RfTmlsKSksCgkJCQkJCQkJCWRvY3VtZW50YXRpb24pCgkJCQkJCQkJXSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0oKTsKCQkJcmV0dXJuICRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbZm9yTW9kdWxlLCBmb3JOYW1lSW5Nb2R1bGVdKSk7CgkJfTsKCQl2YXIgZnJvbUltcG9ydFN5bnRheCA9IEEyKAoJCQkkZWxtJGNvcmUkTGlzdCRjb25jYXRNYXAsCgkJCWZ1bmN0aW9uIChpbXBvcnRlZE1vZHVsZSkgewoJCQkJdmFyIF92MiA9IGltcG9ydGVkTW9kdWxlLnBhcnNlZE1vZHVsZTsKCQkJCWlmIChfdjIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIF92MyA9IF92Mi5hOwoJCQkJCXZhciBpbXBvcnRlZE1vZHVsZVBhcnNlZFN5bnRheCA9IF92My5hOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQlmdW5jdGlvbiAocmFuZ2UpIHsKCQkJCQkJCXZhciBfdjQgPSBBMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJG1vZHVsZUNvbXBsZXRpb25JdGVtRnJvbU1vZHVsZVN5bnRheCwKCQkJCQkJCQl7CgkJCQkJCQkJCWltcG9ydGVkTW9kdWxlTmFtZVJlc3RBZnRlclByZWZpeDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcsCgkJCQkJCQkJCWltcG9ydGVkTmFtZTogJGVsbSRjb3JlJE1heWJlJEp1c3QoaW1wb3J0ZWRNb2R1bGUuaW1wb3J0ZWROYW1lKQoJCQkJCQkJCX0sCgkJCQkJCQkJaW1wb3J0ZWRNb2R1bGVQYXJzZWRTeW50YXgpOwoJCQkJCQkJdmFyIGRvY3VtZW50YXRpb24gPSBfdjQuZDsKCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmFuZ2VGcm9tUmVjb3JkUmFuZ2UocmFuZ2UpLAoJCQkJCQkJCWRvY3VtZW50YXRpb24pOwoJCQkJCQl9LAoJCQkJCQlpbXBvcnRlZE1vZHVsZS5yZWZlcmVuY2VzUmFuZ2VzKTsKCQkJCX0KCQkJfSwKCQkJaW1wb3J0ZWRNb2R1bGVzKTsKCQl2YXIgZnJvbURlY2xhcmF0aW9ucyA9IEEyKCRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwgZ2V0Rm9ySG92ZXJzRm9yUmVmZXJlbmNlTm9kZSwgcGFyc2VkUmVmZXJlbmNlcyk7CgkJdmFyIGZyb21EZWNsYXJhdGlvbnNMZXNzU291cmNlTG9jYXRpb24gPSBBMigKCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQl2YXIgcmFuZ2UgPSBfdjEuYTsKCQkJCXZhciBkb2N1bWVudGF0aW9uID0gX3YxLmM7CgkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihyYW5nZSwgZG9jdW1lbnRhdGlvbik7CgkJCX0sCgkJCWZyb21EZWNsYXJhdGlvbnMpOwoJCXZhciBob3Zlckl0ZW1zID0gJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQlbZnJvbUltcG9ydFN5bnRheCwgZnJvbURlY2xhcmF0aW9uc0xlc3NTb3VyY2VMb2NhdGlvbl0pKTsKCQlyZXR1cm4ge2Zyb21EZWNsYXJhdGlvbnM6IGZyb21EZWNsYXJhdGlvbnMsIGhvdmVySXRlbXM6IGhvdmVySXRlbXN9OwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHByb3ZpZGVEZWZpbml0aW9uSW50ZXJuYWwgPSBGMigKCWZ1bmN0aW9uIChyZXF1ZXN0LCBsYW5ndWFnZVNlcnZpY2VTdGF0ZSkgewoJCXZhciBfdjAgPSByZXF1ZXN0LmZpbGVMb2NhdGlvbjsKCQlpZiAoX3YwLiQgPT09ICdXb3Jrc3BhY2VGaWxlTG9jYXRpb24nKSB7CgkJCXZhciBmaWxlUGF0aCA9IF92MC5hOwoJCQl2YXIgX3YxID0gQTIoJGVsbSRjb3JlJERpY3QkZ2V0LCBmaWxlUGF0aCwgbGFuZ3VhZ2VTZXJ2aWNlU3RhdGUuZG9jdW1lbnRDYWNoZSk7CgkJCWlmIChfdjEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQl9IGVsc2UgewoJCQkJdmFyIGN1cnJlbnRGaWxlQ2FjaGVJdGVtID0gX3YxLmE7CgkJCQl2YXIgX3YyID0gY3VycmVudEZpbGVDYWNoZUl0ZW0ucGFyc2VkRmlsZUxhc3RTdWNjZXNzOwoJCQkJaWYgKF92Mi4kID09PSAnTm90aGluZycpIHsKCQkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgcGFyc2VkRmlsZUxhc3RTdWNjZXNzID0gX3YyLmE7CgkJCQkJdmFyIF92MyA9IEEyKAoJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJGhvdmVySXRlbXNGcm9tUGFyc2VkTW9kdWxlLAoJCQkJCQlfVXRpbHNfVHVwbGUzKHBhcnNlZEZpbGVMYXN0U3VjY2Vzcy5zeW50YXgsIHBhcnNlZEZpbGVMYXN0U3VjY2Vzcy5jb21wbGV0aW9uSXRlbXMsIHJlcXVlc3QuZmlsZUxvY2F0aW9uKSwKCQkJCQkJbGFuZ3VhZ2VTZXJ2aWNlU3RhdGUpOwoJCQkJCXZhciBmcm9tRGVjbGFyYXRpb25zID0gX3YzLmZyb21EZWNsYXJhdGlvbnM7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGNvcmUkTGlzdCRmaWx0ZXJNYXAsCgkJCQkJCWZ1bmN0aW9uIChfdjQpIHsKCQkJCQkJCXZhciByZWZSYW5nZSA9IF92NC5hOwoJCQkJCQkJdmFyIGxvY2F0aW9uVW5kZXJGaWxlID0gX3Y0LmI7CgkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRyYW5nZUNvbnRhaW5zTG9jYXRpb24sCgkJCQkJCQkJX1V0aWxzX1R1cGxlMihyZXF1ZXN0LnBvc2l0aW9uTGluZU51bWJlciwgcmVxdWVzdC5wb3NpdGlvbkNvbHVtbiksCgkJCQkJCQkJcmVmUmFuZ2UpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QobG9jYXRpb25VbmRlckZpbGUpIDogJGVsbSRjb3JlJE1heWJlJE5vdGhpbmc7CgkJCQkJCX0sCgkJCQkJCWZyb21EZWNsYXJhdGlvbnMpOwoJCQkJfQoJCQl9CgkJfSBlbHNlIHsKCQkJdmFyIHBhY2thZ2VWZXJzaW9uSWRlbnRpZmVyID0gX3YwLmE7CgkJCXZhciBtb2R1bGVQYXRoID0gX3YwLmI7CgkJCXJldHVybiBfTGlzdF9OaWw7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHByb3ZpZGVEZWZpbml0aW9uID0gRjIoCglmdW5jdGlvbiAocmVxdWVzdCwgbGFuZ3VhZ2VTZXJ2aWNlU3RhdGUpIHsKCQlyZXR1cm4gQTIoCgkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJdmFyIGZpbGVMb2NhdGlvbiA9IF92MC5hOwoJCQkJdmFyIF92MSA9IF92MC5iOwoJCQkJdmFyIF92MiA9IF92MS5hOwoJCQkJdmFyIF92MyA9IF92Mi5hOwoJCQkJdmFyIHN0YXJ0Um93ID0gX3YzLmE7CgkJCQl2YXIgc3RhcnRDb2x1bW4gPSBfdjMuYjsKCQkJCXZhciBfdjQgPSBfdjIuYjsKCQkJCXZhciBlbmRSb3cgPSBfdjQuYTsKCQkJCXZhciBlbmRDb2x1bW4gPSBfdjQuYjsKCQkJCXJldHVybiB7CgkJCQkJZmlsZUxvY2F0aW9uOiBmaWxlTG9jYXRpb24sCgkJCQkJcmFuZ2U6IHtlbmRDb2x1bW46IGVuZENvbHVtbiwgZW5kTGluZU51bWJlcjogZW5kUm93LCBzdGFydENvbHVtbjogc3RhcnRDb2x1bW4sIHN0YXJ0TGluZU51bWJlcjogc3RhcnRSb3d9CgkJCQl9OwoJCQl9LAoJCQlBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHByb3ZpZGVEZWZpbml0aW9uSW50ZXJuYWwsIHJlcXVlc3QsIGxhbmd1YWdlU2VydmljZVN0YXRlKSk7Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcHJvdmlkZUhvdmVyID0gRjIoCglmdW5jdGlvbiAocmVxdWVzdCwgbGFuZ3VhZ2VTZXJ2aWNlU3RhdGUpIHsKCQl2YXIgX3YwID0gcmVxdWVzdC5maWxlTG9jYXRpb247CgkJaWYgKF92MC4kID09PSAnV29ya3NwYWNlRmlsZUxvY2F0aW9uJykgewoJCQl2YXIgZmlsZVBhdGggPSBfdjAuYTsKCQkJdmFyIF92MSA9IEEyKCRlbG0kY29yZSREaWN0JGdldCwgZmlsZVBhdGgsIGxhbmd1YWdlU2VydmljZVN0YXRlLmRvY3VtZW50Q2FjaGUpOwoJCQlpZiAoX3YxLiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJfSBlbHNlIHsKCQkJCXZhciBjdXJyZW50RmlsZUNhY2hlSXRlbSA9IF92MS5hOwoJCQkJdmFyIF92MiA9IGN1cnJlbnRGaWxlQ2FjaGVJdGVtLnBhcnNlZEZpbGVMYXN0U3VjY2VzczsKCQkJCWlmIChfdjIuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHBhcnNlZEZpbGVMYXN0U3VjY2VzcyA9IF92Mi5hOwoJCQkJCXZhciBfdjMgPSBBMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRob3Zlckl0ZW1zRnJvbVBhcnNlZE1vZHVsZSwKCQkJCQkJX1V0aWxzX1R1cGxlMyhwYXJzZWRGaWxlTGFzdFN1Y2Nlc3Muc3ludGF4LCBwYXJzZWRGaWxlTGFzdFN1Y2Nlc3MuY29tcGxldGlvbkl0ZW1zLCByZXF1ZXN0LmZpbGVMb2NhdGlvbiksCgkJCQkJCWxhbmd1YWdlU2VydmljZVN0YXRlKTsKCQkJCQl2YXIgaG92ZXJJdGVtcyA9IF92My5ob3Zlckl0ZW1zOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLAoJCQkJCQlmdW5jdGlvbiAoX3Y0KSB7CgkJCQkJCQl2YXIgaG92ZXJSYW5nZSA9IF92NC5hOwoJCQkJCQkJdmFyIGhvdmVyVGV4dCA9IF92NC5iOwoJCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcmFuZ2VDb250YWluc0xvY2F0aW9uLAoJCQkJCQkJCV9VdGlsc19UdXBsZTIocmVxdWVzdC5wb3NpdGlvbkxpbmVOdW1iZXIsIHJlcXVlc3QucG9zaXRpb25Db2x1bW4pLAoJCQkJCQkJCWhvdmVyUmFuZ2UpID8gJGVsbSRjb3JlJE1heWJlJEp1c3QoaG92ZXJUZXh0KSA6ICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCQl9LAoJCQkJCQlob3Zlckl0ZW1zKTsKCQkJCX0KCQkJfQoJCX0gZWxzZSB7CgkJCXZhciBwYWNrYWdlVmVyc2lvbklkZW50aWZlciA9IF92MC5hOwoJCQl2YXIgbW9kdWxlUGF0aCA9IF92MC5iOwoJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJERpY3QkZ2V0TWluID0gZnVuY3Rpb24gKGRpY3QpIHsKCWdldE1pbjoKCXdoaWxlICh0cnVlKSB7CgkJaWYgKChkaWN0LiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSAmJiAoZGljdC5kLiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSkgewoJCQl2YXIgbGVmdCA9IGRpY3QuZDsKCQkJdmFyICR0ZW1wJGRpY3QgPSBsZWZ0OwoJCQlkaWN0ID0gJHRlbXAkZGljdDsKCQkJY29udGludWUgZ2V0TWluOwoJCX0gZWxzZSB7CgkJCXJldHVybiBkaWN0OwoJCX0KCX0KfTsKdmFyICRlbG0kY29yZSREaWN0JG1vdmVSZWRMZWZ0ID0gZnVuY3Rpb24gKGRpY3QpIHsKCWlmICgoKGRpY3QuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChkaWN0LmQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpKSAmJiAoZGljdC5lLiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSkgewoJCWlmICgoZGljdC5lLmQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChkaWN0LmUuZC5hLiQgPT09ICdSZWQnKSkgewoJCQl2YXIgY2xyID0gZGljdC5hOwoJCQl2YXIgayA9IGRpY3QuYjsKCQkJdmFyIHYgPSBkaWN0LmM7CgkJCXZhciBfdjEgPSBkaWN0LmQ7CgkJCXZhciBsQ2xyID0gX3YxLmE7CgkJCXZhciBsSyA9IF92MS5iOwoJCQl2YXIgbFYgPSBfdjEuYzsKCQkJdmFyIGxMZWZ0ID0gX3YxLmQ7CgkJCXZhciBsUmlnaHQgPSBfdjEuZTsKCQkJdmFyIF92MiA9IGRpY3QuZTsKCQkJdmFyIHJDbHIgPSBfdjIuYTsKCQkJdmFyIHJLID0gX3YyLmI7CgkJCXZhciByViA9IF92Mi5jOwoJCQl2YXIgckxlZnQgPSBfdjIuZDsKCQkJdmFyIF92MyA9IHJMZWZ0LmE7CgkJCXZhciBybEsgPSByTGVmdC5iOwoJCQl2YXIgcmxWID0gckxlZnQuYzsKCQkJdmFyIHJsTCA9IHJMZWZ0LmQ7CgkJCXZhciBybFIgPSByTGVmdC5lOwoJCQl2YXIgclJpZ2h0ID0gX3YyLmU7CgkJCXJldHVybiBBNSgKCQkJCSRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwKCQkJCSRlbG0kY29yZSREaWN0JFJlZCwKCQkJCXJsSywKCQkJCXJsViwKCQkJCUE1KAoJCQkJCSRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwKCQkJCQkkZWxtJGNvcmUkRGljdCRCbGFjaywKCQkJCQlrLAoJCQkJCXYsCgkJCQkJQTUoJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLCAkZWxtJGNvcmUkRGljdCRSZWQsIGxLLCBsViwgbExlZnQsIGxSaWdodCksCgkJCQkJcmxMKSwKCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkQmxhY2ssIHJLLCByViwgcmxSLCByUmlnaHQpKTsKCQl9IGVsc2UgewoJCQl2YXIgY2xyID0gZGljdC5hOwoJCQl2YXIgayA9IGRpY3QuYjsKCQkJdmFyIHYgPSBkaWN0LmM7CgkJCXZhciBfdjQgPSBkaWN0LmQ7CgkJCXZhciBsQ2xyID0gX3Y0LmE7CgkJCXZhciBsSyA9IF92NC5iOwoJCQl2YXIgbFYgPSBfdjQuYzsKCQkJdmFyIGxMZWZ0ID0gX3Y0LmQ7CgkJCXZhciBsUmlnaHQgPSBfdjQuZTsKCQkJdmFyIF92NSA9IGRpY3QuZTsKCQkJdmFyIHJDbHIgPSBfdjUuYTsKCQkJdmFyIHJLID0gX3Y1LmI7CgkJCXZhciByViA9IF92NS5jOwoJCQl2YXIgckxlZnQgPSBfdjUuZDsKCQkJdmFyIHJSaWdodCA9IF92NS5lOwoJCQlpZiAoY2xyLiQgPT09ICdCbGFjaycpIHsKCQkJCXJldHVybiBBNSgKCQkJCQkkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sCgkJCQkJJGVsbSRjb3JlJERpY3QkQmxhY2ssCgkJCQkJaywKCQkJCQl2LAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkUmVkLCBsSywgbFYsIGxMZWZ0LCBsUmlnaHQpLAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkUmVkLCBySywgclYsIHJMZWZ0LCByUmlnaHQpKTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiBBNSgKCQkJCQkkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sCgkJCQkJJGVsbSRjb3JlJERpY3QkQmxhY2ssCgkJCQkJaywKCQkJCQl2LAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkUmVkLCBsSywgbFYsIGxMZWZ0LCBsUmlnaHQpLAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkUmVkLCBySywgclYsIHJMZWZ0LCByUmlnaHQpKTsKCQkJfQoJCX0KCX0gZWxzZSB7CgkJcmV0dXJuIGRpY3Q7Cgl9Cn07CnZhciAkZWxtJGNvcmUkRGljdCRtb3ZlUmVkUmlnaHQgPSBmdW5jdGlvbiAoZGljdCkgewoJaWYgKCgoZGljdC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgJiYgKGRpY3QuZC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykpICYmIChkaWN0LmUuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpKSB7CgkJaWYgKChkaWN0LmQuZC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgJiYgKGRpY3QuZC5kLmEuJCA9PT0gJ1JlZCcpKSB7CgkJCXZhciBjbHIgPSBkaWN0LmE7CgkJCXZhciBrID0gZGljdC5iOwoJCQl2YXIgdiA9IGRpY3QuYzsKCQkJdmFyIF92MSA9IGRpY3QuZDsKCQkJdmFyIGxDbHIgPSBfdjEuYTsKCQkJdmFyIGxLID0gX3YxLmI7CgkJCXZhciBsViA9IF92MS5jOwoJCQl2YXIgX3YyID0gX3YxLmQ7CgkJCXZhciBfdjMgPSBfdjIuYTsKCQkJdmFyIGxsSyA9IF92Mi5iOwoJCQl2YXIgbGxWID0gX3YyLmM7CgkJCXZhciBsbExlZnQgPSBfdjIuZDsKCQkJdmFyIGxsUmlnaHQgPSBfdjIuZTsKCQkJdmFyIGxSaWdodCA9IF92MS5lOwoJCQl2YXIgX3Y0ID0gZGljdC5lOwoJCQl2YXIgckNsciA9IF92NC5hOwoJCQl2YXIgcksgPSBfdjQuYjsKCQkJdmFyIHJWID0gX3Y0LmM7CgkJCXZhciByTGVmdCA9IF92NC5kOwoJCQl2YXIgclJpZ2h0ID0gX3Y0LmU7CgkJCXJldHVybiBBNSgKCQkJCSRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwKCQkJCSRlbG0kY29yZSREaWN0JFJlZCwKCQkJCWxLLAoJCQkJbFYsCgkJCQlBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JEJsYWNrLCBsbEssIGxsViwgbGxMZWZ0LCBsbFJpZ2h0KSwKCQkJCUE1KAoJCQkJCSRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwKCQkJCQkkZWxtJGNvcmUkRGljdCRCbGFjaywKCQkJCQlrLAoJCQkJCXYsCgkJCQkJbFJpZ2h0LAoJCQkJCUE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkUmVkLCBySywgclYsIHJMZWZ0LCByUmlnaHQpKSk7CgkJfSBlbHNlIHsKCQkJdmFyIGNsciA9IGRpY3QuYTsKCQkJdmFyIGsgPSBkaWN0LmI7CgkJCXZhciB2ID0gZGljdC5jOwoJCQl2YXIgX3Y1ID0gZGljdC5kOwoJCQl2YXIgbENsciA9IF92NS5hOwoJCQl2YXIgbEsgPSBfdjUuYjsKCQkJdmFyIGxWID0gX3Y1LmM7CgkJCXZhciBsTGVmdCA9IF92NS5kOwoJCQl2YXIgbFJpZ2h0ID0gX3Y1LmU7CgkJCXZhciBfdjYgPSBkaWN0LmU7CgkJCXZhciByQ2xyID0gX3Y2LmE7CgkJCXZhciBySyA9IF92Ni5iOwoJCQl2YXIgclYgPSBfdjYuYzsKCQkJdmFyIHJMZWZ0ID0gX3Y2LmQ7CgkJCXZhciByUmlnaHQgPSBfdjYuZTsKCQkJaWYgKGNsci4kID09PSAnQmxhY2snKSB7CgkJCQlyZXR1cm4gQTUoCgkJCQkJJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLAoJCQkJCSRlbG0kY29yZSREaWN0JEJsYWNrLAoJCQkJCWssCgkJCQkJdiwKCQkJCQlBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JFJlZCwgbEssIGxWLCBsTGVmdCwgbFJpZ2h0KSwKCQkJCQlBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JFJlZCwgckssIHJWLCByTGVmdCwgclJpZ2h0KSk7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gQTUoCgkJCQkJJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLAoJCQkJCSRlbG0kY29yZSREaWN0JEJsYWNrLAoJCQkJCWssCgkJCQkJdiwKCQkJCQlBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JFJlZCwgbEssIGxWLCBsTGVmdCwgbFJpZ2h0KSwKCQkJCQlBNSgkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sICRlbG0kY29yZSREaWN0JFJlZCwgckssIHJWLCByTGVmdCwgclJpZ2h0KSk7CgkJCX0KCQl9Cgl9IGVsc2UgewoJCXJldHVybiBkaWN0OwoJfQp9Owp2YXIgJGVsbSRjb3JlJERpY3QkcmVtb3ZlSGVscFByZXBFUUdUID0gRjcoCglmdW5jdGlvbiAodGFyZ2V0S2V5LCBkaWN0LCBjb2xvciwga2V5LCB2YWx1ZSwgbGVmdCwgcmlnaHQpIHsKCQlpZiAoKGxlZnQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChsZWZ0LmEuJCA9PT0gJ1JlZCcpKSB7CgkJCXZhciBfdjEgPSBsZWZ0LmE7CgkJCXZhciBsSyA9IGxlZnQuYjsKCQkJdmFyIGxWID0gbGVmdC5jOwoJCQl2YXIgbExlZnQgPSBsZWZ0LmQ7CgkJCXZhciBsUmlnaHQgPSBsZWZ0LmU7CgkJCXJldHVybiBBNSgKCQkJCSRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwKCQkJCWNvbG9yLAoJCQkJbEssCgkJCQlsViwKCQkJCWxMZWZ0LAoJCQkJQTUoJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLCAkZWxtJGNvcmUkRGljdCRSZWQsIGtleSwgdmFsdWUsIGxSaWdodCwgcmlnaHQpKTsKCQl9IGVsc2UgewoJCQlfdjIkMjoKCQkJd2hpbGUgKHRydWUpIHsKCQkJCWlmICgocmlnaHQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChyaWdodC5hLiQgPT09ICdCbGFjaycpKSB7CgkJCQkJaWYgKHJpZ2h0LmQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpIHsKCQkJCQkJaWYgKHJpZ2h0LmQuYS4kID09PSAnQmxhY2snKSB7CgkJCQkJCQl2YXIgX3YzID0gcmlnaHQuYTsKCQkJCQkJCXZhciBfdjQgPSByaWdodC5kOwoJCQkJCQkJdmFyIF92NSA9IF92NC5hOwoJCQkJCQkJcmV0dXJuICRlbG0kY29yZSREaWN0JG1vdmVSZWRSaWdodChkaWN0KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWJyZWFrIF92MiQyOwoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJdmFyIF92NiA9IHJpZ2h0LmE7CgkJCQkJCXZhciBfdjcgPSByaWdodC5kOwoJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJERpY3QkbW92ZVJlZFJpZ2h0KGRpY3QpOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJYnJlYWsgX3YyJDI7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIGRpY3Q7CgkJfQoJfSk7CnZhciAkZWxtJGNvcmUkRGljdCRyZW1vdmVNaW4gPSBmdW5jdGlvbiAoZGljdCkgewoJaWYgKChkaWN0LiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSAmJiAoZGljdC5kLiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSkgewoJCXZhciBjb2xvciA9IGRpY3QuYTsKCQl2YXIga2V5ID0gZGljdC5iOwoJCXZhciB2YWx1ZSA9IGRpY3QuYzsKCQl2YXIgbGVmdCA9IGRpY3QuZDsKCQl2YXIgbENvbG9yID0gbGVmdC5hOwoJCXZhciBsTGVmdCA9IGxlZnQuZDsKCQl2YXIgcmlnaHQgPSBkaWN0LmU7CgkJaWYgKGxDb2xvci4kID09PSAnQmxhY2snKSB7CgkJCWlmICgobExlZnQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChsTGVmdC5hLiQgPT09ICdSZWQnKSkgewoJCQkJdmFyIF92MyA9IGxMZWZ0LmE7CgkJCQlyZXR1cm4gQTUoCgkJCQkJJGVsbSRjb3JlJERpY3QkUkJOb2RlX2VsbV9idWlsdGluLAoJCQkJCWNvbG9yLAoJCQkJCWtleSwKCQkJCQl2YWx1ZSwKCQkJCQkkZWxtJGNvcmUkRGljdCRyZW1vdmVNaW4obGVmdCksCgkJCQkJcmlnaHQpOwoJCQl9IGVsc2UgewoJCQkJdmFyIF92NCA9ICRlbG0kY29yZSREaWN0JG1vdmVSZWRMZWZ0KGRpY3QpOwoJCQkJaWYgKF92NC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgewoJCQkJCXZhciBuQ29sb3IgPSBfdjQuYTsKCQkJCQl2YXIgbktleSA9IF92NC5iOwoJCQkJCXZhciBuVmFsdWUgPSBfdjQuYzsKCQkJCQl2YXIgbkxlZnQgPSBfdjQuZDsKCQkJCQl2YXIgblJpZ2h0ID0gX3Y0LmU7CgkJCQkJcmV0dXJuIEE1KAoJCQkJCQkkZWxtJGNvcmUkRGljdCRiYWxhbmNlLAoJCQkJCQluQ29sb3IsCgkJCQkJCW5LZXksCgkJCQkJCW5WYWx1ZSwKCQkJCQkJJGVsbSRjb3JlJERpY3QkcmVtb3ZlTWluKG5MZWZ0KSwKCQkJCQkJblJpZ2h0KTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSREaWN0JFJCRW1wdHlfZWxtX2J1aWx0aW47CgkJCQl9CgkJCX0KCQl9IGVsc2UgewoJCQlyZXR1cm4gQTUoCgkJCQkkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sCgkJCQljb2xvciwKCQkJCWtleSwKCQkJCXZhbHVlLAoJCQkJJGVsbSRjb3JlJERpY3QkcmVtb3ZlTWluKGxlZnQpLAoJCQkJcmlnaHQpOwoJCX0KCX0gZWxzZSB7CgkJcmV0dXJuICRlbG0kY29yZSREaWN0JFJCRW1wdHlfZWxtX2J1aWx0aW47Cgl9Cn07CnZhciAkZWxtJGNvcmUkRGljdCRyZW1vdmVIZWxwID0gRjIoCglmdW5jdGlvbiAodGFyZ2V0S2V5LCBkaWN0KSB7CgkJaWYgKGRpY3QuJCA9PT0gJ1JCRW1wdHlfZWxtX2J1aWx0aW4nKSB7CgkJCXJldHVybiAkZWxtJGNvcmUkRGljdCRSQkVtcHR5X2VsbV9idWlsdGluOwoJCX0gZWxzZSB7CgkJCXZhciBjb2xvciA9IGRpY3QuYTsKCQkJdmFyIGtleSA9IGRpY3QuYjsKCQkJdmFyIHZhbHVlID0gZGljdC5jOwoJCQl2YXIgbGVmdCA9IGRpY3QuZDsKCQkJdmFyIHJpZ2h0ID0gZGljdC5lOwoJCQlpZiAoX1V0aWxzX2NtcCh0YXJnZXRLZXksIGtleSkgPCAwKSB7CgkJCQlpZiAoKGxlZnQuJCA9PT0gJ1JCTm9kZV9lbG1fYnVpbHRpbicpICYmIChsZWZ0LmEuJCA9PT0gJ0JsYWNrJykpIHsKCQkJCQl2YXIgX3Y0ID0gbGVmdC5hOwoJCQkJCXZhciBsTGVmdCA9IGxlZnQuZDsKCQkJCQlpZiAoKGxMZWZ0LiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSAmJiAobExlZnQuYS4kID09PSAnUmVkJykpIHsKCQkJCQkJdmFyIF92NiA9IGxMZWZ0LmE7CgkJCQkJCXJldHVybiBBNSgKCQkJCQkJCSRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwKCQkJCQkJCWNvbG9yLAoJCQkJCQkJa2V5LAoJCQkJCQkJdmFsdWUsCgkJCQkJCQlBMigkZWxtJGNvcmUkRGljdCRyZW1vdmVIZWxwLCB0YXJnZXRLZXksIGxlZnQpLAoJCQkJCQkJcmlnaHQpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBfdjcgPSAkZWxtJGNvcmUkRGljdCRtb3ZlUmVkTGVmdChkaWN0KTsKCQkJCQkJaWYgKF92Ny4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgewoJCQkJCQkJdmFyIG5Db2xvciA9IF92Ny5hOwoJCQkJCQkJdmFyIG5LZXkgPSBfdjcuYjsKCQkJCQkJCXZhciBuVmFsdWUgPSBfdjcuYzsKCQkJCQkJCXZhciBuTGVmdCA9IF92Ny5kOwoJCQkJCQkJdmFyIG5SaWdodCA9IF92Ny5lOwoJCQkJCQkJcmV0dXJuIEE1KAoJCQkJCQkJCSRlbG0kY29yZSREaWN0JGJhbGFuY2UsCgkJCQkJCQkJbkNvbG9yLAoJCQkJCQkJCW5LZXksCgkJCQkJCQkJblZhbHVlLAoJCQkJCQkJCUEyKCRlbG0kY29yZSREaWN0JHJlbW92ZUhlbHAsIHRhcmdldEtleSwgbkxlZnQpLAoJCQkJCQkJCW5SaWdodCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlyZXR1cm4gJGVsbSRjb3JlJERpY3QkUkJFbXB0eV9lbG1fYnVpbHRpbjsKCQkJCQkJfQoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIEE1KAoJCQkJCQkkZWxtJGNvcmUkRGljdCRSQk5vZGVfZWxtX2J1aWx0aW4sCgkJCQkJCWNvbG9yLAoJCQkJCQlrZXksCgkJCQkJCXZhbHVlLAoJCQkJCQlBMigkZWxtJGNvcmUkRGljdCRyZW1vdmVIZWxwLCB0YXJnZXRLZXksIGxlZnQpLAoJCQkJCQlyaWdodCk7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJERpY3QkcmVtb3ZlSGVscEVRR1QsCgkJCQkJdGFyZ2V0S2V5LAoJCQkJCUE3KCRlbG0kY29yZSREaWN0JHJlbW92ZUhlbHBQcmVwRVFHVCwgdGFyZ2V0S2V5LCBkaWN0LCBjb2xvciwga2V5LCB2YWx1ZSwgbGVmdCwgcmlnaHQpKTsKCQkJfQoJCX0KCX0pOwp2YXIgJGVsbSRjb3JlJERpY3QkcmVtb3ZlSGVscEVRR1QgPSBGMigKCWZ1bmN0aW9uICh0YXJnZXRLZXksIGRpY3QpIHsKCQlpZiAoZGljdC4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgewoJCQl2YXIgY29sb3IgPSBkaWN0LmE7CgkJCXZhciBrZXkgPSBkaWN0LmI7CgkJCXZhciB2YWx1ZSA9IGRpY3QuYzsKCQkJdmFyIGxlZnQgPSBkaWN0LmQ7CgkJCXZhciByaWdodCA9IGRpY3QuZTsKCQkJaWYgKF9VdGlsc19lcSh0YXJnZXRLZXksIGtleSkpIHsKCQkJCXZhciBfdjEgPSAkZWxtJGNvcmUkRGljdCRnZXRNaW4ocmlnaHQpOwoJCQkJaWYgKF92MS4kID09PSAnUkJOb2RlX2VsbV9idWlsdGluJykgewoJCQkJCXZhciBtaW5LZXkgPSBfdjEuYjsKCQkJCQl2YXIgbWluVmFsdWUgPSBfdjEuYzsKCQkJCQlyZXR1cm4gQTUoCgkJCQkJCSRlbG0kY29yZSREaWN0JGJhbGFuY2UsCgkJCQkJCWNvbG9yLAoJCQkJCQltaW5LZXksCgkJCQkJCW1pblZhbHVlLAoJCQkJCQlsZWZ0LAoJCQkJCQkkZWxtJGNvcmUkRGljdCRyZW1vdmVNaW4ocmlnaHQpKTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSREaWN0JFJCRW1wdHlfZWxtX2J1aWx0aW47CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gQTUoCgkJCQkJJGVsbSRjb3JlJERpY3QkYmFsYW5jZSwKCQkJCQljb2xvciwKCQkJCQlrZXksCgkJCQkJdmFsdWUsCgkJCQkJbGVmdCwKCQkJCQlBMigkZWxtJGNvcmUkRGljdCRyZW1vdmVIZWxwLCB0YXJnZXRLZXksIHJpZ2h0KSk7CgkJCX0KCQl9IGVsc2UgewoJCQlyZXR1cm4gJGVsbSRjb3JlJERpY3QkUkJFbXB0eV9lbG1fYnVpbHRpbjsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSREaWN0JHJlbW92ZSA9IEYyKAoJZnVuY3Rpb24gKGtleSwgZGljdCkgewoJCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkRGljdCRyZW1vdmVIZWxwLCBrZXksIGRpY3QpOwoJCWlmICgoX3YwLiQgPT09ICdSQk5vZGVfZWxtX2J1aWx0aW4nKSAmJiAoX3YwLmEuJCA9PT0gJ1JlZCcpKSB7CgkJCXZhciBfdjEgPSBfdjAuYTsKCQkJdmFyIGsgPSBfdjAuYjsKCQkJdmFyIHYgPSBfdjAuYzsKCQkJdmFyIGwgPSBfdjAuZDsKCQkJdmFyIHIgPSBfdjAuZTsKCQkJcmV0dXJuIEE1KCRlbG0kY29yZSREaWN0JFJCTm9kZV9lbG1fYnVpbHRpbiwgJGVsbSRjb3JlJERpY3QkQmxhY2ssIGssIHYsIGwsIHIpOwoJCX0gZWxzZSB7CgkJCXZhciB4ID0gX3YwOwoJCQlyZXR1cm4geDsKCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkZmluZFJlZmVyZW5jZXMgPSBGMigKCWZ1bmN0aW9uIChfdjAsIGxhbmd1YWdlU2VydmljZVN0YXRlKSB7CgkJdmFyIHRhcmdldERlZmluaXRpb25GaWxlUGF0aCA9IF92MC5hOwoJCXZhciB0YXJnZXREZWZpbml0aW9uUmFuZ2UgPSBfdjAuYjsKCQl2YXIgZmluZFJlZmVyZW5jZXNJbk1vZHVsZSA9IGZ1bmN0aW9uIChwYXJzZWRNb2R1bGUpIHsKCQkJdmFyIF92MiA9IEEyKAoJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRob3Zlckl0ZW1zRnJvbVBhcnNlZE1vZHVsZSwKCQkJCV9VdGlsc19UdXBsZTMoCgkJCQkJcGFyc2VkTW9kdWxlLnN5bnRheCwKCQkJCQlwYXJzZWRNb2R1bGUuY29tcGxldGlvbkl0ZW1zLAoJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkV29ya3NwYWNlRmlsZUxvY2F0aW9uKHBhcnNlZE1vZHVsZS5maWxlVXJpKSksCgkJCQlsYW5ndWFnZVNlcnZpY2VTdGF0ZSk7CgkJCXZhciBmcm9tRGVjbGFyYXRpb25zID0gX3YyLmZyb21EZWNsYXJhdGlvbnM7CgkJCXZhciByYW5nZXMgPSBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlck1hcCwKCQkJCWZ1bmN0aW9uIChfdjMpIHsKCQkJCQl2YXIgcmFuZ2UgPSBfdjMuYTsKCQkJCQl2YXIgX3Y0ID0gX3YzLmI7CgkJCQkJdmFyIGRlZkZpbGVQYXRoID0gX3Y0LmE7CgkJCQkJdmFyIF92NSA9IF92NC5iOwoJCQkJCXZhciBkZWZSYW5nZSA9IF92NS5hOwoJCQkJCXJldHVybiAoX1V0aWxzX2VxKGRlZkZpbGVQYXRoLCB0YXJnZXREZWZpbml0aW9uRmlsZVBhdGgpICYmIF9VdGlsc19lcShkZWZSYW5nZSwgdGFyZ2V0RGVmaW5pdGlvblJhbmdlKSkgPyAkZWxtJGNvcmUkTWF5YmUkSnVzdChyYW5nZSkgOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCX0sCgkJCQlmcm9tRGVjbGFyYXRpb25zKTsKCQkJcmV0dXJuIF9VdGlsc19lcShyYW5nZXMsIF9MaXN0X05pbCkgPyAkZWxtJGNvcmUkTWF5YmUkTm90aGluZyA6ICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFdvcmtzcGFjZUZpbGVMb2NhdGlvbihwYXJzZWRNb2R1bGUuZmlsZVVyaSksCgkJCQkJcmFuZ2VzKSk7CgkJfTsKCQl2YXIgYWxsUGFyc2VkTW9kdWxlcyA9ICRlbG0kY29yZSRMaXN0JGNvbmNhdCgKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWwoJCQkJCUEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGZpbHRlck1hcCwKCQkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJCXZhciBibG9iID0gX3YxLmI7CgkJCQkJCXJldHVybiBibG9iLnBhcnNlZEZpbGVMYXN0U3VjY2VzczsKCQkJCQl9LAoJCQkJCSRlbG0kY29yZSREaWN0JHRvTGlzdChsYW5ndWFnZVNlcnZpY2VTdGF0ZS5kb2N1bWVudENhY2hlKSksCgkJCQkJQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCWZ1bmN0aW9uICgkKSB7CgkJCQkJCXJldHVybiAkLnBhcnNlUmVzdWx0OwoJCQkJCX0sCgkJCQkJbGFuZ3VhZ2VTZXJ2aWNlU3RhdGUuY29yZU1vZHVsZXNDYWNoZSkKCQkJCV0pKTsKCQlyZXR1cm4gQTIoJGVsbSRjb3JlJExpc3QkZmlsdGVyTWFwLCBmaW5kUmVmZXJlbmNlc0luTW9kdWxlLCBhbGxQYXJzZWRNb2R1bGVzKTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSR0ZXh0RG9jdW1lbnRSZWZlcmVuY2VzR3JvdXBlZEJ5RmlsZVBhdGggPSBGMigKCWZ1bmN0aW9uIChyZWZlcmVuY2VSZXF1ZXN0LCBsYW5ndWFnZVNlcnZpY2VTdGF0ZSkgewoJCXZhciBtYXliZURlZmluaXRpb24gPSAkZWxtJGNvcmUkTGlzdCRoZWFkKAoJCQlBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHByb3ZpZGVEZWZpbml0aW9uSW50ZXJuYWwsIHJlZmVyZW5jZVJlcXVlc3QsIGxhbmd1YWdlU2VydmljZVN0YXRlKSk7CgkJaWYgKG1heWJlRGVmaW5pdGlvbi4kID09PSAnSnVzdCcpIHsKCQkJdmFyIF92MSA9IG1heWJlRGVmaW5pdGlvbi5hOwoJCQl2YXIgZGVmaW5pdGlvbkZpbGVMb2NhdGlvbiA9IF92MS5hOwoJCQl2YXIgZGVmaW5pdGlvbkxvY2F0aW9uUmFuZ2UgPSBfdjEuYjsKCQkJdmFyIF92MiA9IGRlZmluaXRpb25Mb2NhdGlvblJhbmdlOwoJCQl2YXIgZGVmaW5pdGlvbkxvY2F0aW9uUmFuZ2VXaG9sZSA9IF92Mi5hOwoJCQl2YXIgcmVmZXJlbmNlcyA9IEEyKAoJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRmaW5kUmVmZXJlbmNlcywKCQkJCV9VdGlsc19UdXBsZTIoZGVmaW5pdGlvbkZpbGVMb2NhdGlvbiwgZGVmaW5pdGlvbkxvY2F0aW9uUmFuZ2VXaG9sZSksCgkJCQlsYW5ndWFnZVNlcnZpY2VTdGF0ZSk7CgkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJX1V0aWxzX1R1cGxlMihkZWZpbml0aW9uRmlsZUxvY2F0aW9uLCBkZWZpbml0aW9uTG9jYXRpb25SYW5nZSksCgkJCQkJcmVmZXJlbmNlcykpOwoJCX0gZWxzZSB7CgkJCXZhciBfdjMgPSByZWZlcmVuY2VSZXF1ZXN0LmZpbGVMb2NhdGlvbjsKCQkJaWYgKF92My4kID09PSAnRWxtUGFja2FnZUZpbGVMb2NhdGlvbicpIHsKCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJfSBlbHNlIHsKCQkJCXZhciBmaWxlUGF0aE9wZW5lZEluRWRpdG9yID0gX3YzLmE7CgkJCQl2YXIgX3Y0ID0gQTIoJGVsbSRjb3JlJERpY3QkZ2V0LCBmaWxlUGF0aE9wZW5lZEluRWRpdG9yLCBsYW5ndWFnZVNlcnZpY2VTdGF0ZS5kb2N1bWVudENhY2hlKTsKCQkJCWlmIChfdjQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgY3VycmVudEZpbGVDYWNoZUl0ZW0gPSBfdjQuYTsKCQkJCQl2YXIgX3Y1ID0gY3VycmVudEZpbGVDYWNoZUl0ZW0ucGFyc2VkRmlsZUxhc3RTdWNjZXNzOwoJCQkJCWlmIChfdjUuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgcGFyc2VkRmlsZSA9IF92NS5hOwoJCQkJCQl2YXIgcG9zID0gX1V0aWxzX1R1cGxlMihyZWZlcmVuY2VSZXF1ZXN0LnBvc2l0aW9uTGluZU51bWJlciwgcmVmZXJlbmNlUmVxdWVzdC5wb3NpdGlvbkNvbHVtbik7CgkJCQkJCXZhciBtYXliZVRvcExldmVsRGVmaW5pdGlvbkxvY2F0aW9uID0gQTIoCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tbW9uJGxpc3RNYXBGaW5kLAoJCQkJCQkJZnVuY3Rpb24gKGRlY2wpIHsKCQkJCQkJCQl2YXIgX3Y5ID0gZGVjbC5yYW5nZTsKCQkJCQkJCQl2YXIgZGVjbFJhbmdlc05hbWUgPSBfdjkuYjsKCQkJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JGFueSwKCQkJCQkJCQkJZnVuY3Rpb24gKHJhbmdlKSB7CgkJCQkJCQkJCQlyZXR1cm4gQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRyYW5nZUNvbnRhaW5zTG9jYXRpb24sIHBvcywgcmFuZ2UpOwoJCQkJCQkJCQl9LAoJCQkJCQkJCQlkZWNsUmFuZ2VzTmFtZSkgPyAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkV29ya3NwYWNlRmlsZUxvY2F0aW9uKHBhcnNlZEZpbGUuZmlsZVVyaSksCgkJCQkJCQkJCQlkZWNsLnJhbmdlKSkgOiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQkJCX0sCgkJCQkJCQlwYXJzZWRGaWxlLmNvbXBsZXRpb25JdGVtcy5mcm9tVG9wTGV2ZWwpOwoJCQkJCQlpZiAobWF5YmVUb3BMZXZlbERlZmluaXRpb25Mb2NhdGlvbi4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBzeW50aGV0aWNEZWZpbml0aW9uTG9jYXRpb24gPSBtYXliZVRvcExldmVsRGVmaW5pdGlvbkxvY2F0aW9uLmE7CgkJCQkJCQl2YXIgX3Y3ID0gc3ludGhldGljRGVmaW5pdGlvbkxvY2F0aW9uOwoJCQkJCQkJdmFyIGRlZmluaXRpb25GaWxlTG9jYXRpb24gPSBfdjcuYTsKCQkJCQkJCXZhciBfdjggPSBfdjcuYjsKCQkJCQkJCXZhciBkZWZpbml0aW9uUmFuZ2UgPSBfdjguYTsKCQkJCQkJCXZhciByZWZlcmVuY2VzID0gQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRmaW5kUmVmZXJlbmNlcywKCQkJCQkJCQlfVXRpbHNfVHVwbGUyKGRlZmluaXRpb25GaWxlTG9jYXRpb24sIGRlZmluaXRpb25SYW5nZSksCgkJCQkJCQkJbGFuZ3VhZ2VTZXJ2aWNlU3RhdGUpOwoJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCV9VdGlsc19UdXBsZTIoc3ludGhldGljRGVmaW5pdGlvbkxvY2F0aW9uLCByZWZlcmVuY2VzKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkdGV4dERvY3VtZW50UmVmZXJlbmNlcyA9IEYyKAoJZnVuY3Rpb24gKHJlZmVyZW5jZVJlcXVlc3QsIGxhbmd1YWdlU2VydmljZVN0YXRlKSB7CgkJdmFyIF92MCA9IEEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkdGV4dERvY3VtZW50UmVmZXJlbmNlc0dyb3VwZWRCeUZpbGVQYXRoLCByZWZlcmVuY2VSZXF1ZXN0LCBsYW5ndWFnZVNlcnZpY2VTdGF0ZSk7CgkJaWYgKF92MC4kID09PSAnTm90aGluZycpIHsKCQkJcmV0dXJuIF9MaXN0X05pbDsKCQl9IGVsc2UgewoJCQl2YXIgX3YxID0gX3YwLmE7CgkJCXZhciByZWZlcmVuY2VzID0gX3YxLmI7CgkJCXJldHVybiBBMigKCQkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJCWZ1bmN0aW9uIChfdjIpIHsKCQkJCQl2YXIgZmlsZUxvY2F0aW9uID0gX3YyLmE7CgkJCQkJdmFyIHJhbmdlcyA9IF92Mi5iOwoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQlmdW5jdGlvbiAoX3YzKSB7CgkJCQkJCQl2YXIgX3Y0ID0gX3YzLmE7CgkJCQkJCQl2YXIgc3RhcnRSb3cgPSBfdjQuYTsKCQkJCQkJCXZhciBzdGFydENvbHVtbiA9IF92NC5iOwoJCQkJCQkJdmFyIF92NSA9IF92My5iOwoJCQkJCQkJdmFyIGVuZFJvdyA9IF92NS5hOwoJCQkJCQkJdmFyIGVuZENvbHVtbiA9IF92NS5iOwoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQlmaWxlTG9jYXRpb246IGZpbGVMb2NhdGlvbiwKCQkJCQkJCQlyYW5nZToge2VuZENvbHVtbjogZW5kQ29sdW1uLCBlbmRMaW5lTnVtYmVyOiBlbmRSb3csIHN0YXJ0Q29sdW1uOiBzdGFydENvbHVtbiwgc3RhcnRMaW5lTnVtYmVyOiBzdGFydFJvd30KCQkJCQkJCX07CgkJCQkJCX0sCgkJCQkJCXJhbmdlcyk7CgkJCQl9LAoJCQkJcmVmZXJlbmNlcyk7CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJG1vbmFjb1JhbmdlRnJvbVJhbmdlID0gZnVuY3Rpb24gKF92MCkgewoJdmFyIF92MSA9IF92MC5hOwoJdmFyIHN0YXJ0Um93ID0gX3YxLmE7Cgl2YXIgc3RhcnRDb2x1bW4gPSBfdjEuYjsKCXZhciBfdjIgPSBfdjAuYjsKCXZhciBlbmRSb3cgPSBfdjIuYTsKCXZhciBlbmRDb2x1bW4gPSBfdjIuYjsKCXJldHVybiB7ZW5kQ29sdW1uOiBlbmRDb2x1bW4sIGVuZExpbmVOdW1iZXI6IGVuZFJvdywgc3RhcnRDb2x1bW46IHN0YXJ0Q29sdW1uLCBzdGFydExpbmVOdW1iZXI6IHN0YXJ0Um93fTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkdGV4dERvY3VtZW50UmVuYW1lID0gRjIoCglmdW5jdGlvbiAocmVuYW1lUGFyYW1zLCBsYW5ndWFnZVNlcnZpY2VTdGF0ZSkgewoJCXZhciBfdjAgPSBBMigKCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSR0ZXh0RG9jdW1lbnRSZWZlcmVuY2VzR3JvdXBlZEJ5RmlsZVBhdGgsCgkJCXsKCQkJCWZpbGVMb2NhdGlvbjogJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRXb3Jrc3BhY2VGaWxlTG9jYXRpb24ocmVuYW1lUGFyYW1zLmZpbGVQYXRoKSwKCQkJCXBvc2l0aW9uQ29sdW1uOiByZW5hbWVQYXJhbXMucG9zaXRpb25Db2x1bW4sCgkJCQlwb3NpdGlvbkxpbmVOdW1iZXI6IHJlbmFtZVBhcmFtcy5wb3NpdGlvbkxpbmVOdW1iZXIKCQkJfSwKCQkJbGFuZ3VhZ2VTZXJ2aWNlU3RhdGUpOwoJCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiBfTGlzdF9OaWw7CgkJfSBlbHNlIHsKCQkJaWYgKF92MC5hLmEuYS4kID09PSAnRWxtUGFja2FnZUZpbGVMb2NhdGlvbicpIHsKCQkJCXZhciBfdjEgPSBfdjAuYTsKCQkJCXZhciBfdjIgPSBfdjEuYTsKCQkJCXZhciBfdjMgPSBfdjIuYTsKCQkJCXJldHVybiBfTGlzdF9OaWw7CgkJCX0gZWxzZSB7CgkJCQl2YXIgX3Y0ID0gX3YwLmE7CgkJCQl2YXIgX3Y1ID0gX3Y0LmE7CgkJCQl2YXIgZGVjbEZpbGVQYXRoID0gX3Y1LmEuYTsKCQkJCXZhciBfdjYgPSBfdjUuYjsKCQkJCXZhciBkZWNsTmFtZXNSYW5nZXMgPSBfdjYuYjsKCQkJCXZhciByZWZlcmVuY2VzR3JvdXBlZEJ5RmlsZVBhdGggPSBfdjQuYjsKCQkJCXZhciBuZXdOYW1lID0gcmVuYW1lUGFyYW1zLm5ld05hbWU7CgkJCQl2YXIgb3RoZXJGaWxlc1JlZmVyZW5jZXNFZGl0cyA9IEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbmNhdE1hcCwKCQkJCQlmdW5jdGlvbiAoX3Y4KSB7CgkJCQkJCXZhciBmaWxlTG9jYXRpb24gPSBfdjguYTsKCQkJCQkJdmFyIHJhbmdlcyA9IF92OC5iOwoJCQkJCQlpZiAoZmlsZUxvY2F0aW9uLiQgPT09ICdXb3Jrc3BhY2VGaWxlTG9jYXRpb24nKSB7CgkJCQkJCQl2YXIgZmlsZVBhdGggPSBmaWxlTG9jYXRpb24uYTsKCQkJCQkJCXJldHVybiBfVXRpbHNfZXEoZmlsZVBhdGgsIGRlY2xGaWxlUGF0aCkgPyBfTGlzdF9OaWwgOiBfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQl7CgkJCQkJCQkJCWVkaXRzOiBBMigKCQkJCQkJCQkJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQkJCQkJCQkJCWZ1bmN0aW9uIChyYW5nZSkgewoJCQkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQkJCW5ld1RleHQ6IG5ld05hbWUsCgkJCQkJCQkJCQkJCXJhbmdlOiAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJG1vbmFjb1JhbmdlRnJvbVJhbmdlKHJhbmdlKQoJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJcmFuZ2VzKSwKCQkJCQkJCQkJZmlsZVBhdGg6IGZpbGVQYXRoCgkJCQkJCQkJfQoJCQkJCQkJCV0pOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJcmV0dXJuIF9MaXN0X05pbDsKCQkJCQkJfQoJCQkJCX0sCgkJCQkJcmVmZXJlbmNlc0dyb3VwZWRCeUZpbGVQYXRoKTsKCQkJCXZhciBkZWNsYXJhdGlvbkZpbGVSZWZlcmVuY2VzRWRpdHMgPSBmdW5jdGlvbiAoKSB7CgkJCQkJdmFyIF92NyA9IEEyKAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tbW9uJGFzc29jTGlzdEdldCwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRXb3Jrc3BhY2VGaWxlTG9jYXRpb24oZGVjbEZpbGVQYXRoKSwKCQkJCQkJcmVmZXJlbmNlc0dyb3VwZWRCeUZpbGVQYXRoKTsKCQkJCQlpZiAoX3Y3LiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciByYW5nZXMgPSBfdjcuYTsKCQkJCQkJcmV0dXJuIEEyKAoJCQkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCQkJZnVuY3Rpb24gKHJhbmdlKSB7CgkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJbmV3VGV4dDogbmV3TmFtZSwKCQkJCQkJCQkJcmFuZ2U6ICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkbW9uYWNvUmFuZ2VGcm9tUmFuZ2UocmFuZ2UpCgkJCQkJCQkJfTsKCQkJCQkJCX0sCgkJCQkJCQlyYW5nZXMpOwoJCQkJCX0KCQkJCX0oKTsKCQkJCXZhciBkZWNsYXJhdGlvbkVkaXRzID0gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCWZ1bmN0aW9uIChyYW5nZSkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmV3VGV4dDogbmV3TmFtZSwKCQkJCQkJCXJhbmdlOiAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJG1vbmFjb1JhbmdlRnJvbVJhbmdlKHJhbmdlKQoJCQkJCQl9OwoJCQkJCX0sCgkJCQkJZGVjbE5hbWVzUmFuZ2VzKTsKCQkJCXZhciB3b3Jrc3BhY2VFZGl0cyA9IEEyKAoJCQkJCSRlbG0kY29yZSRMaXN0JGNvbnMsCgkJCQkJewoJCQkJCQllZGl0czogJGVsbSRjb3JlJExpc3QkY29uY2F0KAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVtkZWNsYXJhdGlvbkVkaXRzLCBkZWNsYXJhdGlvbkZpbGVSZWZlcmVuY2VzRWRpdHNdKSksCgkJCQkJCWZpbGVQYXRoOiBkZWNsRmlsZVBhdGgKCQkJCQl9LAoJCQkJCW90aGVyRmlsZXNSZWZlcmVuY2VzRWRpdHMpOwoJCQkJcmV0dXJuIHdvcmtzcGFjZUVkaXRzOwoJCQl9CgkJfQoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJERvY3VtZW50U3ltYm9sID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0RvY3VtZW50U3ltYm9sJywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfRW51bSA9IHskOiAnU3ltYm9sS2luZF9FbnVtJ307CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfRW51bU1lbWJlciA9IHskOiAnU3ltYm9sS2luZF9FbnVtTWVtYmVyJ307CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfRnVuY3Rpb24gPSB7JDogJ1N5bWJvbEtpbmRfRnVuY3Rpb24nfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkU3ltYm9sS2luZF9Nb2R1bGUgPSB7JDogJ1N5bWJvbEtpbmRfTW9kdWxlJ307CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfU3RydWN0ID0geyQ6ICdTeW1ib2xLaW5kX1N0cnVjdCd9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSR0ZXh0RG9jdW1lbnRTeW1ib2xGcm9tQ29tcGxldGlvbkl0ZW1zID0gZnVuY3Rpb24gKGNvbXBsZXRpb25JdGVtcykgewoJcmV0dXJuIEEyKAoJCSRlbG0kY29yZSRMaXN0JG1hcCwKCQlmdW5jdGlvbiAoY29tcGxldGlvbkl0ZW0pIHsKCQkJdmFyIF92MCA9IGNvbXBsZXRpb25JdGVtLnJhbmdlOwoJCQl2YXIgaXRlbVJhbmdlV2hvbGUgPSBfdjAuYTsKCQkJdmFyIG1vbmFjb1JhbmdlID0gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRtb25hY29SYW5nZUZyb21SYW5nZShpdGVtUmFuZ2VXaG9sZSk7CgkJCXZhciBfdjEgPSBjb21wbGV0aW9uSXRlbS5jb21wbGV0aW9uSXRlbTsKCQkJdmFyIGxhYmVsID0gX3YxLmE7CgkJCXZhciBjb21wbGV0aW9uSXRlbUtpbmQgPSBfdjEuYzsKCQkJdmFyIHN5bWJvbEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkJCQlzd2l0Y2ggKGNvbXBsZXRpb25JdGVtS2luZC4kKSB7CgkJCQkJY2FzZSAnQ29uc3RydWN0b3JDb21wbGV0aW9uSXRlbUtpbmQnOgoJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRTeW1ib2xLaW5kX0VudW1NZW1iZXI7CgkJCQkJY2FzZSAnRW51bUNvbXBsZXRpb25JdGVtS2luZCc6CgkJCQkJCXJldHVybiAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFN5bWJvbEtpbmRfRW51bTsKCQkJCQljYXNlICdFbnVtTWVtYmVyQ29tcGxldGlvbkl0ZW1LaW5kJzoKCQkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkU3ltYm9sS2luZF9FbnVtTWVtYmVyOwoJCQkJCWNhc2UgJ0Z1bmN0aW9uQ29tcGxldGlvbkl0ZW1LaW5kJzoKCQkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkU3ltYm9sS2luZF9GdW5jdGlvbjsKCQkJCQljYXNlICdNb2R1bGVDb21wbGV0aW9uSXRlbUtpbmQnOgoJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRTeW1ib2xLaW5kX01vZHVsZTsKCQkJCQlkZWZhdWx0OgoJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRTeW1ib2xLaW5kX1N0cnVjdDsKCQkJCX0KCQkJfSgpOwoJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSREb2N1bWVudFN5bWJvbCgKCQkJCXtjaGlsZHJlbjogX0xpc3RfTmlsLCBraW5kOiBzeW1ib2xLaW5kLCBuYW1lOiBsYWJlbCwgcmFuZ2U6IG1vbmFjb1JhbmdlLCBzZWxlY3Rpb25SYW5nZTogbW9uYWNvUmFuZ2V9KTsKCQl9LAoJCWNvbXBsZXRpb25JdGVtcy5mcm9tVG9wTGV2ZWwpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSR0ZXh0RG9jdW1lbnRTeW1ib2wgPSBGMigKCWZ1bmN0aW9uIChmaWxlVXJpLCBsYW5ndWFnZVNlcnZpY2VTdGF0ZSkgewoJCXZhciBfdjAgPSBBMigkZWxtJGNvcmUkRGljdCRnZXQsIGZpbGVVcmksIGxhbmd1YWdlU2VydmljZVN0YXRlLmRvY3VtZW50Q2FjaGUpOwoJCWlmIChfdjAuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCXJldHVybiBfTGlzdF9OaWw7CgkJfSBlbHNlIHsKCQkJdmFyIGN1cnJlbnRGaWxlQ2FjaGVJdGVtID0gX3YwLmE7CgkJCXZhciBfdjEgPSBjdXJyZW50RmlsZUNhY2hlSXRlbS5wYXJzZWRGaWxlTGFzdFN1Y2Nlc3M7CgkJCWlmIChfdjEuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQlyZXR1cm4gX0xpc3RfTmlsOwoJCQl9IGVsc2UgewoJCQkJdmFyIHBhcnNlZEZpbGVMYXN0U3VjY2VzcyA9IF92MS5hOwoJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkdGV4dERvY3VtZW50U3ltYm9sRnJvbUNvbXBsZXRpb25JdGVtcyhwYXJzZWRGaWxlTGFzdFN1Y2Nlc3MuY29tcGxldGlvbkl0ZW1zKTsKCQkJfQoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRoYW5kbGVSZXF1ZXN0SW5DdXJyZW50V29ya3NwYWNlID0gRjIoCglmdW5jdGlvbiAocmVxdWVzdCwgc3RhdGVCZWZvcmUpIHsKCQl2YXIgX3YwID0gZnVuY3Rpb24gKCkgewoJCQlzd2l0Y2ggKHJlcXVlc3QuJCkgewoJCQkJY2FzZSAnQWRkV29ya3NwYWNlRmlsZVJlcXVlc3QnOgoJCQkJCXZhciBmaWxlVXJpID0gcmVxdWVzdC5hOwoJCQkJCXZhciBmaWxlQ29udGVudCA9IHJlcXVlc3QuYjsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkYWRkRmlsZSwKCQkJCQkJX1V0aWxzX1R1cGxlMihmaWxlVXJpLCBmaWxlQ29udGVudCksCgkJCQkJCXN0YXRlQmVmb3JlKTsKCQkJCWNhc2UgJ0RlbGV0ZVdvcmtzcGFjZUZpbGVSZXF1ZXN0JzoKCQkJCQl2YXIgZmlsZVVyaSA9IHJlcXVlc3QuYTsKCQkJCQl2YXIgZG9jdW1lbnRDYWNoZSA9IEEyKCRlbG0kY29yZSREaWN0JHJlbW92ZSwgZmlsZVVyaSwgc3RhdGVCZWZvcmUuZG9jdW1lbnRDYWNoZSk7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkV29ya3NwYWNlU3VtbWFyeVJlc3BvbnNlLAoJCQkJCQlfVXRpbHNfdXBkYXRlKAoJCQkJCQkJc3RhdGVCZWZvcmUsCgkJCQkJCQl7ZG9jdW1lbnRDYWNoZTogZG9jdW1lbnRDYWNoZX0pKTsKCQkJCWNhc2UgJ0FkZEVsbVBhY2thZ2VWZXJzaW9uUmVxdWVzdCc6CgkJCQkJdmFyIHBhY2thZ2VWZXJzaW9uSWRlbnRpZmVyID0gcmVxdWVzdC5hOwoJCQkJCXZhciBwYWNrYWdlTW9kdWxlcyA9IHJlcXVlc3QuYjsKCQkJCQlyZXR1cm4gQTMoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRoYW5kbGVSZXF1ZXN0QWRkUGFja2FnZSwgcGFja2FnZVZlcnNpb25JZGVudGlmZXIsIHBhY2thZ2VNb2R1bGVzLCBzdGF0ZUJlZm9yZSk7CgkJCQljYXNlICdQcm92aWRlSG92ZXJSZXF1ZXN0JzoKCQkJCQl2YXIgcHJvdmlkZUhvdmVyUmVxdWVzdCA9IHJlcXVlc3QuYTsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRQcm92aWRlSG92ZXJSZXNwb25zZSgKCQkJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcHJvdmlkZUhvdmVyLCBwcm92aWRlSG92ZXJSZXF1ZXN0LCBzdGF0ZUJlZm9yZSkpLAoJCQkJCQlzdGF0ZUJlZm9yZSk7CgkJCQljYXNlICdQcm92aWRlQ29tcGxldGlvbkl0ZW1zUmVxdWVzdCc6CgkJCQkJdmFyIHByb3ZpZGVDb21wbGV0aW9uSXRlbXNSZXF1ZXN0ID0gcmVxdWVzdC5hOwoJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKAoJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFByb3ZpZGVDb21wbGV0aW9uSXRlbXNSZXNwb25zZSgKCQkJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkcHJvdmlkZUNvbXBsZXRpb25JdGVtcywgcHJvdmlkZUNvbXBsZXRpb25JdGVtc1JlcXVlc3QsIHN0YXRlQmVmb3JlKSksCgkJCQkJCXN0YXRlQmVmb3JlKTsKCQkJCWNhc2UgJ1Byb3ZpZGVEZWZpbml0aW9uUmVxdWVzdCc6CgkJCQkJdmFyIHByb3ZpZGVEZWZpbml0aW9uUmVxdWVzdCA9IHJlcXVlc3QuYTsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRQcm92aWRlRGVmaW5pdGlvblJlc3BvbnNlKAoJCQkJCQkJQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRwcm92aWRlRGVmaW5pdGlvbiwgcHJvdmlkZURlZmluaXRpb25SZXF1ZXN0LCBzdGF0ZUJlZm9yZSkpLAoJCQkJCQlzdGF0ZUJlZm9yZSk7CgkJCQljYXNlICdUZXh0RG9jdW1lbnRTeW1ib2xSZXF1ZXN0JzoKCQkJCQl2YXIgZmlsZVBhdGggPSByZXF1ZXN0LmE7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkVGV4dERvY3VtZW50U3ltYm9sUmVzcG9uc2UoCgkJCQkJCQlBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHRleHREb2N1bWVudFN5bWJvbCwgZmlsZVBhdGgsIHN0YXRlQmVmb3JlKSksCgkJCQkJCXN0YXRlQmVmb3JlKTsKCQkJCWNhc2UgJ1RleHREb2N1bWVudFJlZmVyZW5jZXNSZXF1ZXN0JzoKCQkJCQl2YXIgcmVmZXJlbmNlUmVxdWVzdCA9IHJlcXVlc3QuYTsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRUZXh0RG9jdW1lbnRSZWZlcmVuY2VzUmVzcG9uc2UoCgkJCQkJCQlBMigkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHRleHREb2N1bWVudFJlZmVyZW5jZXMsIHJlZmVyZW5jZVJlcXVlc3QsIHN0YXRlQmVmb3JlKSksCgkJCQkJCXN0YXRlQmVmb3JlKTsKCQkJCWRlZmF1bHQ6CgkJCQkJdmFyIHJlbmFtZVBhcmFtcyA9IHJlcXVlc3QuYTsKCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMigKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRUZXh0RG9jdW1lbnRSZW5hbWVSZXNwb25zZSgKCQkJCQkJCUEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkdGV4dERvY3VtZW50UmVuYW1lLCByZW5hbWVQYXJhbXMsIHN0YXRlQmVmb3JlKSksCgkJCQkJCXN0YXRlQmVmb3JlKTsKCQkJfQoJCX0oKTsKCQl2YXIgc2VydmljZVJlc3BvbnNlID0gX3YwLmE7CgkJdmFyIHN0YXRlID0gX3YwLmI7CgkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCSRlbG0kY29yZSRSZXN1bHQkT2soc2VydmljZVJlc3BvbnNlKSwKCQkJc3RhdGUpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkZmxhdExpc3RPZkJsb2JzRnJvbUZpbGVUcmVlTm9kZSA9IGZ1bmN0aW9uICh0cmVlTm9kZSkgewoJaWYgKHRyZWVOb2RlLiQgPT09ICdCbG9iTm9kZScpIHsKCQl2YXIgYmxvYiA9IHRyZWVOb2RlLmE7CgkJcmV0dXJuIF9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJX1V0aWxzX1R1cGxlMihfTGlzdF9OaWwsIGJsb2IpCgkJCV0pOwoJfSBlbHNlIHsKCQl2YXIgdHJlZUVudHJpZXMgPSB0cmVlTm9kZS5hOwoJCXJldHVybiBBMigKCQkJJGVsbSRjb3JlJExpc3QkY29uY2F0TWFwLAoJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQl2YXIgY2hpbGROYW1lID0gX3YxLmE7CgkJCQl2YXIgY2hpbGRDb250ZW50ID0gX3YxLmI7CgkJCQlyZXR1cm4gQTIoCgkJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJCSRlbG0kY29yZSRUdXBsZSRtYXBGaXJzdCgKCQkJCQkJJGVsbSRjb3JlJExpc3QkY29ucyhjaGlsZE5hbWUpKSwKCQkJCQkkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkZmxhdExpc3RPZkJsb2JzRnJvbUZpbGVUcmVlTm9kZShjaGlsZENvbnRlbnQpKTsKCQkJfSwKCQkJdHJlZUVudHJpZXMpOwoJfQp9Owp2YXIgJGVsbSRjb3JlJERpY3QkZnJvbUxpc3QgPSBmdW5jdGlvbiAoYXNzb2NzKSB7CglyZXR1cm4gQTMoCgkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJRjIoCgkJCWZ1bmN0aW9uIChfdjAsIGRpY3QpIHsKCQkJCXZhciBrZXkgPSBfdjAuYTsKCQkJCXZhciB2YWx1ZSA9IF92MC5iOwoJCQkJcmV0dXJuIEEzKCRlbG0kY29yZSREaWN0JGluc2VydCwga2V5LCB2YWx1ZSwgZGljdCk7CgkJCX0pLAoJCSRlbG0kY29yZSREaWN0JGVtcHR5LAoJCWFzc29jcyk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlJHVwZGF0ZUxhbmd1YWdlU2VydmljZVN0YXRlID0gRjIoCglmdW5jdGlvbiAoZmlsZVRyZWUsIHN0YXRlKSB7CgkJdmFyIGNvbXBpbGVGaWxlQ2FjaGVFbnRyeSA9IGZ1bmN0aW9uIChfdjgpIHsKCQkJdmFyIGJsb2JQYXRoID0gX3Y4LmE7CgkJCXZhciBmaWxlVHJlZUJsb2IgPSBfdjguYjsKCQkJdmFyIG1heWJlUHJldmlvdXNDYWNoZWQgPSBBMigkZWxtJGNvcmUkRGljdCRnZXQsIGJsb2JQYXRoLCBzdGF0ZS5kb2N1bWVudENhY2hlKTsKCQkJdmFyIGJ1aWxkTmV3RW50cnkgPSBmdW5jdGlvbiAoX3Y3KSB7CgkJCQl2YXIgdGV4dENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7CgkJCQkJdmFyIF92NSA9IGZpbGVUcmVlQmxvYi5hc1RleHQ7CgkJCQkJaWYgKF92NS4kID09PSAnTm90aGluZycpIHsKCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBhc1N0cmluZyA9IF92NS5hOwoJCQkJCQl2YXIgcGFyc2VkRmlsZSA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJCXZhciBfdjYgPSAkc3RpbDRtJGVsbV9zeW50YXgkRWxtJFBhcnNlciRwYXJzZVRvRmlsZShhc1N0cmluZyk7CgkJCQkJCQlpZiAoX3Y2LiQgPT09ICdFcnInKSB7CgkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSROb3RoaW5nOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgc3ludGF4ID0gX3Y2LmE7CgkJCQkJCQkJcmV0dXJuICRlbG0kY29yZSRNYXliZSRKdXN0KAoJCQkJCQkJCQl7CgkJCQkJCQkJCQljb21wbGV0aW9uSXRlbXM6ICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkY29tcGxldGlvbkl0ZW1zRnJvbU1vZHVsZSgKCQkJCQkJCQkJCQl7ZmlsZVVyaTogYmxvYlBhdGgsIHN5bnRheDogc3ludGF4LCB0ZXh0OiBhc1N0cmluZ30pLAoJCQkJCQkJCQkJZmlsZVVyaTogYmxvYlBhdGgsCgkJCQkJCQkJCQlzeW50YXg6IHN5bnRheCwKCQkJCQkJCQkJCXRleHQ6IGFzU3RyaW5nCgkJCQkJCQkJCX0pOwoJCQkJCQkJfQoJCQkJCQl9KCk7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdCgKCQkJCQkJCXtwYXJzZWRGaWxlOiBwYXJzZWRGaWxlLCB0ZXh0OiBhc1N0cmluZ30pOwoJCQkJCX0KCQkJCX0oKTsKCQkJCXZhciBwYXJzZWRGaWxlRnJvbVByZXZpb3VzbHlDYWNoZWQgPSBmdW5jdGlvbiAoKSB7CgkJCQkJaWYgKG1heWJlUHJldmlvdXNDYWNoZWQuJCA9PT0gJ05vdGhpbmcnKSB7CgkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkTm90aGluZzsKCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgcHJldmlvdXNDYWNoZWQgPSBtYXliZVByZXZpb3VzQ2FjaGVkLmE7CgkJCQkJCXJldHVybiBwcmV2aW91c0NhY2hlZC5wYXJzZWRGaWxlTGFzdFN1Y2Nlc3M7CgkJCQkJfQoJCQkJfSgpOwoJCQkJcmV0dXJuIHsKCQkJCQlwYXJzZWRGaWxlTGFzdFN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHsKCQkJCQkJaWYgKHRleHRDb250ZW50LiQgPT09ICdOb3RoaW5nJykgewoJCQkJCQkJcmV0dXJuIHBhcnNlZEZpbGVGcm9tUHJldmlvdXNseUNhY2hlZDsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBmcm9tVGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudC5hOwoJCQkJCQkJdmFyIF92MyA9IGZyb21UZXh0Q29udGVudC5wYXJzZWRGaWxlOwoJCQkJCQkJaWYgKF92My4kID09PSAnTm90aGluZycpIHsKCQkJCQkJCQlyZXR1cm4gcGFyc2VkRmlsZUZyb21QcmV2aW91c2x5Q2FjaGVkOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl2YXIgcGFyc2VkRmlsZSA9IF92My5hOwoJCQkJCQkJCXJldHVybiAkZWxtJGNvcmUkTWF5YmUkSnVzdChwYXJzZWRGaWxlKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0oKSwKCQkJCQlzb3VyY2VCYXNlNjQ6IGZpbGVUcmVlQmxvYi5hc0Jhc2U2NCwKCQkJCQl0ZXh0Q29udGVudDogdGV4dENvbnRlbnQKCQkJCX07CgkJCX07CgkJCWlmIChtYXliZVByZXZpb3VzQ2FjaGVkLiQgPT09ICdOb3RoaW5nJykgewoJCQkJcmV0dXJuIGJ1aWxkTmV3RW50cnkoX1V0aWxzX1R1cGxlMCk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgcHJldmlvdXNDYWNoZWQgPSBtYXliZVByZXZpb3VzQ2FjaGVkLmE7CgkJCQlyZXR1cm4gX1V0aWxzX2VxKHByZXZpb3VzQ2FjaGVkLnNvdXJjZUJhc2U2NCwgZmlsZVRyZWVCbG9iLmFzQmFzZTY0KSA/IHByZXZpb3VzQ2FjaGVkIDogYnVpbGROZXdFbnRyeShfVXRpbHNfVHVwbGUwKTsKCQkJfQoJCX07CgkJdmFyIGRvY3VtZW50Q2FjaGUgPSAkZWxtJGNvcmUkRGljdCRmcm9tTGlzdCgKCQkJQTIoCgkJCQkkZWxtJGNvcmUkTGlzdCRtYXAsCgkJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQkJdmFyIGZpbGVQYXRoID0gX3YwLmE7CgkJCQkJdmFyIGZpbGVDb250ZW50ID0gX3YwLmI7CgkJCQkJdmFyIGZpbGVQYXRoRmxhdCA9IEEyKCRlbG0kY29yZSRTdHJpbmckam9pbiwgJy8nLCBmaWxlUGF0aCk7CgkJCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQkJCWZpbGVQYXRoRmxhdCwKCQkJCQkJY29tcGlsZUZpbGVDYWNoZUVudHJ5KAoJCQkJCQkJX1V0aWxzX1R1cGxlMihmaWxlUGF0aEZsYXQsIGZpbGVDb250ZW50KSkpOwoJCQkJfSwKCQkJCSRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRmbGF0TGlzdE9mQmxvYnNGcm9tRmlsZVRyZWVOb2RlKGZpbGVUcmVlKSkpOwoJCXJldHVybiBfVXRpbHNfdXBkYXRlKAoJCQlzdGF0ZSwKCQkJe2RvY3VtZW50Q2FjaGU6IGRvY3VtZW50Q2FjaGV9KTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRoYW5kbGVSZXF1ZXN0ID0gRjIoCglmdW5jdGlvbiAocmVxdWVzdEluV29ya3NwYWNlLCBzdGF0ZUJlZm9yZSkgewoJCXZhciBsYW5ndWFnZVNlcnZpY2VTdGF0ZSA9IEEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkdXBkYXRlTGFuZ3VhZ2VTZXJ2aWNlU3RhdGUsIHJlcXVlc3RJbldvcmtzcGFjZS53b3Jrc3BhY2UsIHN0YXRlQmVmb3JlKTsKCQlyZXR1cm4gQTIoJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZSRoYW5kbGVSZXF1ZXN0SW5DdXJyZW50V29ya3NwYWNlLCByZXF1ZXN0SW5Xb3Jrc3BhY2UucmVxdWVzdCwgbGFuZ3VhZ2VTZXJ2aWNlU3RhdGUpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkQmxvYk5vZGUgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnQmxvYk5vZGUnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRGaWxlVHJlZSRUcmVlTm9kZSA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdUcmVlTm9kZScsIGE6IGF9Owp9Owp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkID0gX0pzb25fZGVjb2RlRmllbGQ7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXggPSBfSnNvbl9kZWNvZGVJbmRleDsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRsaXN0ID0gX0pzb25fZGVjb2RlTGlzdDsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX19nZW5lcmljX0xpc3QgPSAkZWxtJGpzb24kSnNvbiREZWNvZGUkbGlzdDsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRhbmRUaGVuID0gX0pzb25fYW5kVGhlbjsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRsYXp5ID0gZnVuY3Rpb24gKHRodW5rKSB7CglyZXR1cm4gQTIoCgkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGFuZFRoZW4sCgkJdGh1bmssCgkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoX1V0aWxzX1R1cGxlMCkpOwp9Owp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCA9IF9Kc29uX21hcDE7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwMiA9IF9Kc29uX21hcDI7CnZhciAkZWxtJGpzb24kSnNvbiREZWNvZGUkb25lT2YgPSBfSnNvbl9vbmVPZjsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcgPSBfSnNvbl9kZWNvZGVTdHJpbmc7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9GaWxlVHJlZV9GaWxlVHJlZU5vZGUgPSBmdW5jdGlvbiAoanNvbkRlY29kZV90eXBlX3BhcmFtZXRlcl9ibG9iU3RydWN0dXJlKSB7CglyZXR1cm4gJGVsbSRqc29uJEpzb24kRGVjb2RlJG9uZU9mKAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJQTIoCgkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCQknQmxvYk5vZGUnLAoJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJCQlyZXR1cm4gQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCQkJJGF1dGhvciRwcm9qZWN0JEZpbGVUcmVlJEJsb2JOb2RlLAoJCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LCAwLCBqc29uRGVjb2RlX3R5cGVfcGFyYW1ldGVyX2Jsb2JTdHJ1Y3R1cmUpKTsKCQkJCQl9KSksCgkJCQlBMigKCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJCSdUcmVlTm9kZScsCgkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJCXJldHVybiBBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkRmlsZVRyZWUkVHJlZU5vZGUsCgkJCQkJCQlBMigKCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkJMCwKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9fZ2VuZXJpY19MaXN0KAoJCQkJCQkJCQlBMygKCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAyLAoJCQkJCQkJCQkJRjIoCgkJCQkJCQkJCQkJZnVuY3Rpb24gKGl0ZW1fMCwgaXRlbV8xKSB7CgkJCQkJCQkJCQkJCXJldHVybiBfVXRpbHNfVHVwbGUyKGl0ZW1fMCwgaXRlbV8xKTsKCQkJCQkJCQkJCQl9KSwKCQkJCQkJCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwgMCwgJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkJCQkJMSwKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9GaWxlVHJlZV9GaWxlVHJlZU5vZGUoanNvbkRlY29kZV90eXBlX3BhcmFtZXRlcl9ibG9iU3RydWN0dXJlKSkpKSkpOwoJCQkJCX0pKQoJCQldKSk7Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJEFkZEVsbVBhY2thZ2VWZXJzaW9uUmVxdWVzdCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdBZGRFbG1QYWNrYWdlVmVyc2lvblJlcXVlc3QnLCBhOiBhLCBiOiBifTsKCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRBZGRXb3Jrc3BhY2VGaWxlUmVxdWVzdCA9IEYyKAoJZnVuY3Rpb24gKGEsIGIpIHsKCQlyZXR1cm4geyQ6ICdBZGRXb3Jrc3BhY2VGaWxlUmVxdWVzdCcsIGE6IGEsIGI6IGJ9OwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJERlbGV0ZVdvcmtzcGFjZUZpbGVSZXF1ZXN0ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ0RlbGV0ZVdvcmtzcGFjZUZpbGVSZXF1ZXN0JywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFByb3ZpZGVDb21wbGV0aW9uSXRlbXNSZXF1ZXN0ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1Byb3ZpZGVDb21wbGV0aW9uSXRlbXNSZXF1ZXN0JywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFByb3ZpZGVEZWZpbml0aW9uUmVxdWVzdCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQcm92aWRlRGVmaW5pdGlvblJlcXVlc3QnLCBhOiBhfTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkUHJvdmlkZUhvdmVyUmVxdWVzdCA9IGZ1bmN0aW9uIChhKSB7CglyZXR1cm4geyQ6ICdQcm92aWRlSG92ZXJSZXF1ZXN0JywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFRleHREb2N1bWVudFJlZmVyZW5jZXNSZXF1ZXN0ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1RleHREb2N1bWVudFJlZmVyZW5jZXNSZXF1ZXN0JywgYTogYX07Cn07CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFRleHREb2N1bWVudFJlbmFtZVJlcXVlc3QgPSBmdW5jdGlvbiAoYSkgewoJcmV0dXJuIHskOiAnVGV4dERvY3VtZW50UmVuYW1lUmVxdWVzdCcsIGE6IGF9Owp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRUZXh0RG9jdW1lbnRTeW1ib2xSZXF1ZXN0ID0gZnVuY3Rpb24gKGEpIHsKCXJldHVybiB7JDogJ1RleHREb2N1bWVudFN5bWJvbFJlcXVlc3QnLCBhOiBhfTsKfTsKdmFyICRlbG0kanNvbiRKc29uJERlY29kZSRpbnQgPSBfSnNvbl9kZWNvZGVJbnQ7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJEVsbVBhY2thZ2VWZXJzaW9uMDE5SWRlbnRpZmVyID0gRjIoCglmdW5jdGlvbiAoYSwgYikgewoJCXJldHVybiB7JDogJ0VsbVBhY2thZ2VWZXJzaW9uMDE5SWRlbnRpZmVyJywgYTogYSwgYjogYn07Cgl9KTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9FbG1QYWNrYWdlVmVyc2lvbklkZW50aWZlciA9ICRlbG0kanNvbiRKc29uJERlY29kZSRvbmVPZigKCV9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdFbG1QYWNrYWdlVmVyc2lvbjAxOUlkZW50aWZlcicsCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRsYXp5KAoJCQkJZnVuY3Rpb24gKF92MCkgewoJCQkJCXJldHVybiBBMygKCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcDIsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkRWxtUGFja2FnZVZlcnNpb24wMTlJZGVudGlmZXIsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwgMCwgJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwgMSwgJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZykpOwoJCQkJfSkpCgkJXSkpOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0ZpbGVMb2NhdGlvbiA9ICRlbG0kanNvbiRKc29uJERlY29kZSRvbmVPZigKCV9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdFbG1QYWNrYWdlRmlsZUxvY2F0aW9uJywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3YwKSB7CgkJCQkJcmV0dXJuIEEzKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwMiwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRFbG1QYWNrYWdlRmlsZUxvY2F0aW9uLAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsIDAsICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9FbG1QYWNrYWdlVmVyc2lvbklkZW50aWZlciksCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LAoJCQkJCQkJMSwKCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX19nZW5lcmljX0xpc3QoJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZykpKTsKCQkJCX0pKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ1dvcmtzcGFjZUZpbGVMb2NhdGlvbicsCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRsYXp5KAoJCQkJZnVuY3Rpb24gKF92MSkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRXb3Jrc3BhY2VGaWxlTG9jYXRpb24sCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwgMCwgJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZykpOwoJCQkJfSkpCgkJXSkpOwp2YXIgJGVsbSRqc29uJEpzb24kRGVjb2RlJG51bGwgPSBfSnNvbl9kZWNvZGVOdWxsOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfX2dlbmVyaWNfTWF5YmUgPSBmdW5jdGlvbiAoZGVjb2RlcikgewoJcmV0dXJuICRlbG0kanNvbiRKc29uJERlY29kZSRvbmVPZigKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCUEyKAoJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQkJJ05vdGhpbmcnLAoJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoJGVsbSRjb3JlJE1heWJlJE5vdGhpbmcpKSwKCQkJCUEyKAoJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQkJJ0p1c3QnLAoJCQkJQTIoCgkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkkZWxtJGNvcmUkTWF5YmUkSnVzdCwKCQkJCQlBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsIDAsIGRlY29kZXIpKSksCgkJCQlBMigKCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJCSdKdXN0JywKCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsICRlbG0kY29yZSRNYXliZSRKdXN0LCBkZWNvZGVyKSksCgkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbnVsbCgkZWxtJGNvcmUkTWF5YmUkTm90aGluZykKCQkJXSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwID0gJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcDIoJGVsbSRjb3JlJEJhc2ljcyRhcFIpOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzID0gRjMoCglmdW5jdGlvbiAoZmllbGROYW1lLCBhbHRlcm5hdGVOYW1lcywgZGVjb2RlcikgewoJCXJldHVybiAkZWxtJGpzb24kSnNvbiREZWNvZGUkb25lT2YoCgkJCUEyKAoJCQkJJGVsbSRjb3JlJExpc3QkbWFwLAoJCQkJZnVuY3Rpb24gKG5hbWUpIHsKCQkJCQlyZXR1cm4gQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLCBuYW1lLCBkZWNvZGVyKTsKCQkJCX0sCgkJCQlBMigkZWxtJGNvcmUkTGlzdCRjb25zLCBmaWVsZE5hbWUsIGFsdGVybmF0ZU5hbWVzKSkpOwoJfSk7CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9MYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2VfUmVxdWVzdCA9ICRlbG0kanNvbiRKc29uJERlY29kZSRvbmVPZigKCV9MaXN0X2Zyb21BcnJheSgKCQlbCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdBZGRFbG1QYWNrYWdlVmVyc2lvblJlcXVlc3QnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjApIHsKCQkJCQlyZXR1cm4gQTMoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAyLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJEFkZEVsbVBhY2thZ2VWZXJzaW9uUmVxdWVzdCwKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LCAwLCAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9MYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2VfRWxtUGFja2FnZVZlcnNpb25JZGVudGlmZXIpLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwKCQkJCQkJCTEsCgkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9fZ2VuZXJpY19MaXN0KAoJCQkJCQkJCUEzKAoJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwMiwKCQkJCQkJCQkJRjIoCgkJCQkJCQkJCQlmdW5jdGlvbiAoaXRlbV8wLCBpdGVtXzEpIHsKCQkJCQkJCQkJCQlyZXR1cm4gX1V0aWxzX1R1cGxlMihpdGVtXzAsIGl0ZW1fMSk7CgkJCQkJCQkJCQl9KSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkJCQkwLAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfX2dlbmVyaWNfTGlzdCgkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LAoJCQkJCQkJCQkJMSwKCQkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCQknYXNUZXh0JywKCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJWydBc1RleHQnXSksCgkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX19nZW5lcmljX01heWJlKCRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpKSwKCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQkJCSdhc0Jhc2U2NCcsCgkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJWydBc0Jhc2U2NCddKSwKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJCQkJCUYyKAoJCQkJCQkJCQkJCQkJCWZ1bmN0aW9uIChhc0Jhc2U2NCwgYXNUZXh0KSB7CgkJCQkJCQkJCQkJCQkJCXJldHVybiB7YXNCYXNlNjQ6IGFzQmFzZTY0LCBhc1RleHQ6IGFzVGV4dH07CgkJCQkJCQkJCQkJCQkJfSkpKSkpKSkpKTsKCQkJCX0pKSwKCQkJQTIoCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRmaWVsZCwKCQkJJ0FkZFdvcmtzcGFjZUZpbGVSZXF1ZXN0JywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3YxKSB7CgkJCQkJcmV0dXJuIEEzKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwMiwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRBZGRXb3Jrc3BhY2VGaWxlUmVxdWVzdCwKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LCAwLCAkZWxtJGpzb24kSnNvbiREZWNvZGUkc3RyaW5nKSwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkxLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCUEzKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCSdhc1RleHQnLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbJ0FzVGV4dCddKSwKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfX2dlbmVyaWNfTWF5YmUoJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZykpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJJ2FzQmFzZTY0JywKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbJ0FzQmFzZTY0J10pLAoJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCQkJCQkJRjIoCgkJCQkJCQkJCQkJZnVuY3Rpb24gKGFzQmFzZTY0LCBhc1RleHQpIHsKCQkJCQkJCQkJCQkJcmV0dXJuIHthc0Jhc2U2NDogYXNCYXNlNjQsIGFzVGV4dDogYXNUZXh0fTsKCQkJCQkJCQkJCQl9KSkpKSkpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknRGVsZXRlV29ya3NwYWNlRmlsZVJlcXVlc3QnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjIpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkRGVsZXRlV29ya3NwYWNlRmlsZVJlcXVlc3QsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwgMCwgJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZykpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknUHJvdmlkZUNvbXBsZXRpb25JdGVtc1JlcXVlc3QnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjMpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkUHJvdmlkZUNvbXBsZXRpb25JdGVtc1JlcXVlc3QsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LAoJCQkJCQkJMCwKCQkJCQkJCUEyKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQlBMygKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQknY3Vyc29yQ29sdW1uJywKCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJWydDdXJzb3JDb2x1bW4nXSksCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJJ2N1cnNvckxpbmVOdW1iZXInLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsnQ3Vyc29yTGluZU51bWJlciddKSwKCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQknZmlsZVBhdGhPcGVuZWRJbkVkaXRvcicsCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbJ0ZpbGVQYXRoT3BlbmVkSW5FZGl0b3InXSksCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJCQlGMygKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKGZpbGVQYXRoT3BlbmVkSW5FZGl0b3IsIGN1cnNvckxpbmVOdW1iZXIsIGN1cnNvckNvbHVtbikgewoJCQkJCQkJCQkJCQkJcmV0dXJuIHtjdXJzb3JDb2x1bW46IGN1cnNvckNvbHVtbiwgY3Vyc29yTGluZU51bWJlcjogY3Vyc29yTGluZU51bWJlciwgZmlsZVBhdGhPcGVuZWRJbkVkaXRvcjogZmlsZVBhdGhPcGVuZWRJbkVkaXRvcn07CgkJCQkJCQkJCQkJCX0pKSkpKSkpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknUHJvdmlkZURlZmluaXRpb25SZXF1ZXN0JywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3Y0KSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFByb3ZpZGVEZWZpbml0aW9uUmVxdWVzdCwKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsCgkJCQkJCQkwLAoJCQkJCQkJQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCUEzKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCSdwb3NpdGlvbkNvbHVtbicsCgkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCVsnUG9zaXRpb25Db2x1bW4nXSksCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbnQpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJJ3Bvc2l0aW9uTGluZU51bWJlcicsCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWydQb3NpdGlvbkxpbmVOdW1iZXInXSksCgkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW50KSwKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQlBMygKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCQkJJ2ZpbGVMb2NhdGlvbicsCgkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQlbJ0ZpbGVMb2NhdGlvbiddKSwKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9MYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2VfRmlsZUxvY2F0aW9uKSwKCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCQkJCQkJCUYzKAoJCQkJCQkJCQkJCQlmdW5jdGlvbiAoZmlsZUxvY2F0aW9uLCBwb3NpdGlvbkxpbmVOdW1iZXIsIHBvc2l0aW9uQ29sdW1uKSB7CgkJCQkJCQkJCQkJCQlyZXR1cm4ge2ZpbGVMb2NhdGlvbjogZmlsZUxvY2F0aW9uLCBwb3NpdGlvbkNvbHVtbjogcG9zaXRpb25Db2x1bW4sIHBvc2l0aW9uTGluZU51bWJlcjogcG9zaXRpb25MaW5lTnVtYmVyfTsKCQkJCQkJCQkJCQkJfSkpKSkpKSk7CgkJCQl9KSksCgkJCUEyKAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkZmllbGQsCgkJCSdQcm92aWRlSG92ZXJSZXF1ZXN0JywKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGxhenkoCgkJCQlmdW5jdGlvbiAoX3Y1KSB7CgkJCQkJcmV0dXJuIEEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbWFwLAoJCQkJCQkkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlJFByb3ZpZGVIb3ZlclJlcXVlc3QsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LAoJCQkJCQkJMCwKCQkJCQkJCUEyKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQlBMygKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkncG9zaXRpb25Db2x1bW4nLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbJ1Bvc2l0aW9uQ29sdW1uJ10pLAoJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW50KSwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQlBMygKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCSdwb3NpdGlvbkxpbmVOdW1iZXInLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsnUG9zaXRpb25MaW5lTnVtYmVyJ10pLAoJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCSdmaWxlTG9jYXRpb24nLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWydGaWxlTG9jYXRpb24nXSksCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0ZpbGVMb2NhdGlvbiksCgkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJCQlGMygKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKGZpbGVMb2NhdGlvbiwgcG9zaXRpb25MaW5lTnVtYmVyLCBwb3NpdGlvbkNvbHVtbikgewoJCQkJCQkJCQkJCQkJcmV0dXJuIHtmaWxlTG9jYXRpb246IGZpbGVMb2NhdGlvbiwgcG9zaXRpb25Db2x1bW46IHBvc2l0aW9uQ29sdW1uLCBwb3NpdGlvbkxpbmVOdW1iZXI6IHBvc2l0aW9uTGluZU51bWJlcn07CgkJCQkJCQkJCQkJCX0pKSkpKSkpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknVGV4dERvY3VtZW50UmVmZXJlbmNlc1JlcXVlc3QnLAoJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkbGF6eSgKCQkJCWZ1bmN0aW9uIChfdjYpIHsKCQkJCQlyZXR1cm4gQTIoCgkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRtYXAsCgkJCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2UkVGV4dERvY3VtZW50UmVmZXJlbmNlc1JlcXVlc3QsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGluZGV4LAoJCQkJCQkJMCwKCQkJCQkJCUEyKAoJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCQkJCQlBMygKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkncG9zaXRpb25Db2x1bW4nLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbJ1Bvc2l0aW9uQ29sdW1uJ10pLAoJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkaW50KSwKCQkJCQkJCQlBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQlBMygKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCSdwb3NpdGlvbkxpbmVOdW1iZXInLAoJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCVsnUG9zaXRpb25MaW5lTnVtYmVyJ10pLAoJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCSdmaWxlTG9jYXRpb24nLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWydGaWxlTG9jYXRpb24nXSksCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0ZpbGVMb2NhdGlvbiksCgkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJCQkJCQkJCQlGMygKCQkJCQkJCQkJCQkJZnVuY3Rpb24gKGZpbGVMb2NhdGlvbiwgcG9zaXRpb25MaW5lTnVtYmVyLCBwb3NpdGlvbkNvbHVtbikgewoJCQkJCQkJCQkJCQkJcmV0dXJuIHtmaWxlTG9jYXRpb246IGZpbGVMb2NhdGlvbiwgcG9zaXRpb25Db2x1bW46IHBvc2l0aW9uQ29sdW1uLCBwb3NpdGlvbkxpbmVOdW1iZXI6IHBvc2l0aW9uTGluZU51bWJlcn07CgkJCQkJCQkJCQkJCX0pKSkpKSkpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknVGV4dERvY3VtZW50UmVuYW1lUmVxdWVzdCcsCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRsYXp5KAoJCQkJZnVuY3Rpb24gKF92NykgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRUZXh0RG9jdW1lbnRSZW5hbWVSZXF1ZXN0LAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRpbmRleCwKCQkJCQkJCTAsCgkJCQkJCQlBMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJQTMoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJJ25ld05hbWUnLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbJ05ld05hbWUnXSksCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJJ3Bvc2l0aW9uQ29sdW1uJywKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbJ1Bvc2l0aW9uQ29sdW1uJ10pLAoJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJCSdwb3NpdGlvbkxpbmVOdW1iZXInLAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWydQb3NpdGlvbkxpbmVOdW1iZXInXSksCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGludCksCgkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCQkJQTMoCgkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkJCQkJCQkJJ2ZpbGVQYXRoJywKCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJWydGaWxlUGF0aCddKSwKCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN1Y2NlZWQoCgkJCQkJCQkJCQkJCUY0KAoJCQkJCQkJCQkJCQkJZnVuY3Rpb24gKGZpbGVQYXRoLCBwb3NpdGlvbkxpbmVOdW1iZXIsIHBvc2l0aW9uQ29sdW1uLCBuZXdOYW1lKSB7CgkJCQkJCQkJCQkJCQkJcmV0dXJuIHtmaWxlUGF0aDogZmlsZVBhdGgsIG5ld05hbWU6IG5ld05hbWUsIHBvc2l0aW9uQ29sdW1uOiBwb3NpdGlvbkNvbHVtbiwgcG9zaXRpb25MaW5lTnVtYmVyOiBwb3NpdGlvbkxpbmVOdW1iZXJ9OwoJCQkJCQkJCQkJCQkJfSkpKSkpKSkpOwoJCQkJfSkpLAoJCQlBMigKCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJGZpZWxkLAoJCQknVGV4dERvY3VtZW50U3ltYm9sUmVxdWVzdCcsCgkJCSRlbG0kanNvbiRKc29uJERlY29kZSRsYXp5KAoJCQkJZnVuY3Rpb24gKF92OCkgewoJCQkJCXJldHVybiBBMigKCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJG1hcCwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZUludGVyZmFjZSRUZXh0RG9jdW1lbnRTeW1ib2xSZXF1ZXN0LAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkaW5kZXgsIDAsICRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpKTsKCQkJCX0pKQoJCV0pKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlXzQyMzc0MTMwNSA9IEEyKAoJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJQTMoCgkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCSdpZCcsCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbJ0lkJ10pLAoJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdHJpbmcpLAoJQTIoCgkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCUEzKAoJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCSdyZXF1ZXN0JywKCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJWydSZXF1ZXN0J10pLAoJCQlBMigKCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2FuZE1hcCwKCQkJCUEzKAoJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRGVjb2RlX2ZpZWxkX3dpdGhBbHRlcm5hdGVOYW1lcywKCQkJCQkncmVxdWVzdCcsCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbJ1JlcXVlc3QnXSksCgkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX1JlcXVlc3QpLAoJCQkJQTIoCgkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCUEzKAoJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCSd3b3Jrc3BhY2UnLAoJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQlbJ1dvcmtzcGFjZSddKSwKCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfRmlsZVRyZWVfRmlsZVRyZWVOb2RlKAoJCQkJCQkJQTIoCgkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfYW5kTWFwLAoJCQkJCQkJCUEzKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9maWVsZF93aXRoQWx0ZXJuYXRlTmFtZXMsCgkJCQkJCQkJCSdhc1RleHQnLAoJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQlbJ0FzVGV4dCddKSwKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfX2dlbmVyaWNfTWF5YmUoJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZykpLAoJCQkJCQkJCUEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV9hbmRNYXAsCgkJCQkJCQkJCUEzKAoJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVfZmllbGRfd2l0aEFsdGVybmF0ZU5hbWVzLAoJCQkJCQkJCQkJJ2FzQmFzZTY0JywKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbJ0FzQmFzZTY0J10pLAoJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRGVjb2RlJHN0cmluZyksCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCQkJCQkJRjIoCgkJCQkJCQkJCQkJZnVuY3Rpb24gKGFzQmFzZTY0LCBhc1RleHQpIHsKCQkJCQkJCQkJCQkJcmV0dXJuIHthc0Jhc2U2NDogYXNCYXNlNjQsIGFzVGV4dDogYXNUZXh0fTsKCQkJCQkJCQkJCQl9KSkpKSkpLAoJCQkJCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKAoJCQkJCQlGMigKCQkJCQkJCWZ1bmN0aW9uICh3b3Jrc3BhY2UsIHJlcXVlc3QpIHsKCQkJCQkJCQlyZXR1cm4ge3JlcXVlc3Q6IHJlcXVlc3QsIHdvcmtzcGFjZTogd29ya3NwYWNlfTsKCQkJCQkJCX0pKSkpKSwKCQkkZWxtJGpzb24kSnNvbiREZWNvZGUkc3VjY2VlZCgKCQkJRjIoCgkJCQlmdW5jdGlvbiAocmVxdWVzdCwgaWQpIHsKCQkJCQlyZXR1cm4ge2lkOiBpZCwgcmVxdWVzdDogcmVxdWVzdH07CgkJCQl9KSkpKTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVMYW5ndWFnZVNlcnZpY2VSZXF1ZXN0SW5Xb3Jrc3BhY2UgPSAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkRlY29kZV80MjM3NDEzMDU7CnZhciAkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50ID0gX0pzb25fd3JhcDsKdmFyICRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0ID0gRjIoCglmdW5jdGlvbiAoZnVuYywgZW50cmllcykgewoJCXJldHVybiBfSnNvbl93cmFwKAoJCQlBMygKCQkJCSRlbG0kY29yZSRMaXN0JGZvbGRsLAoJCQkJX0pzb25fYWRkRW50cnkoZnVuYyksCgkJCQlfSnNvbl9lbXB0eUFycmF5KF9VdGlsc19UdXBsZTApLAoJCQkJZW50cmllcykpOwoJfSk7CnZhciAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0ID0gZnVuY3Rpb24gKHBhaXJzKSB7CglyZXR1cm4gX0pzb25fd3JhcCgKCQlBMygKCQkJJGVsbSRjb3JlJExpc3QkZm9sZGwsCgkJCUYyKAoJCQkJZnVuY3Rpb24gKF92MCwgb2JqKSB7CgkJCQkJdmFyIGsgPSBfdjAuYTsKCQkJCQl2YXIgdiA9IF92MC5iOwoJCQkJCXJldHVybiBBMyhfSnNvbl9hZGRGaWVsZCwgaywgdiwgb2JqKTsKCQkJCX0pLAoJCQlfSnNvbl9lbXB0eU9iamVjdChfVXRpbHNfVHVwbGUwKSwKCQkJcGFpcnMpKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0Zyb250ZW5kX01vbmFjb0VkaXRvcl9Db21wbGV0aW9uSXRlbUtpbmQgPSBmdW5jdGlvbiAodmFsdWVUb0VuY29kZSkgewoJc3dpdGNoICh2YWx1ZVRvRW5jb2RlLiQpIHsKCQljYXNlICdDb25zdHJ1Y3RvckNvbXBsZXRpb25JdGVtS2luZCc6CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ0NvbnN0cnVjdG9yQ29tcGxldGlvbkl0ZW1LaW5kJywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQkJXSkpOwoJCWNhc2UgJ0VudW1Db21wbGV0aW9uSXRlbUtpbmQnOgoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdFbnVtQ29tcGxldGlvbkl0ZW1LaW5kJywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQkJXSkpOwoJCWNhc2UgJ0VudW1NZW1iZXJDb21wbGV0aW9uSXRlbUtpbmQnOgoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdFbnVtTWVtYmVyQ29tcGxldGlvbkl0ZW1LaW5kJywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQkJXSkpOwoJCWNhc2UgJ0Z1bmN0aW9uQ29tcGxldGlvbkl0ZW1LaW5kJzoKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknRnVuY3Rpb25Db21wbGV0aW9uSXRlbUtpbmQnLAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwgJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwgX0xpc3RfTmlsKSkKCQkJCQldKSk7CgkJY2FzZSAnTW9kdWxlQ29tcGxldGlvbkl0ZW1LaW5kJzoKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknTW9kdWxlQ29tcGxldGlvbkl0ZW1LaW5kJywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQkJXSkpOwoJCWRlZmF1bHQ6CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ1N0cnVjdENvbXBsZXRpb25JdGVtS2luZCcsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LCAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LCBfTGlzdF9OaWwpKQoJCQkJCV0pKTsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9TeW1ib2xLaW5kID0gZnVuY3Rpb24gKHZhbHVlVG9FbmNvZGUpIHsKCXN3aXRjaCAodmFsdWVUb0VuY29kZS4kKSB7CgkJY2FzZSAnU3ltYm9sS2luZF9BcnJheSc6CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ1N5bWJvbEtpbmRfQXJyYXknLAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwgJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwgX0xpc3RfTmlsKSkKCQkJCQldKSk7CgkJY2FzZSAnU3ltYm9sS2luZF9Cb29sZWFuJzoKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknU3ltYm9sS2luZF9Cb29sZWFuJywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQkJXSkpOwoJCWNhc2UgJ1N5bWJvbEtpbmRfQ2xhc3MnOgoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdTeW1ib2xLaW5kX0NsYXNzJywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQkJXSkpOwoJCWNhc2UgJ1N5bWJvbEtpbmRfQ29uc3RhbnQnOgoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdTeW1ib2xLaW5kX0NvbnN0YW50JywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQkJXSkpOwoJCWNhc2UgJ1N5bWJvbEtpbmRfRW51bSc6CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ1N5bWJvbEtpbmRfRW51bScsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LCAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LCBfTGlzdF9OaWwpKQoJCQkJCV0pKTsKCQljYXNlICdTeW1ib2xLaW5kX0VudW1NZW1iZXInOgoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdTeW1ib2xLaW5kX0VudW1NZW1iZXInLAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwgJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwgX0xpc3RfTmlsKSkKCQkJCQldKSk7CgkJY2FzZSAnU3ltYm9sS2luZF9GaWxlJzoKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknU3ltYm9sS2luZF9GaWxlJywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQkJXSkpOwoJCWNhc2UgJ1N5bWJvbEtpbmRfRnVuY3Rpb24nOgoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdTeW1ib2xLaW5kX0Z1bmN0aW9uJywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQkJXSkpOwoJCWNhc2UgJ1N5bWJvbEtpbmRfSW50ZXJmYWNlJzoKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknU3ltYm9sS2luZF9JbnRlcmZhY2UnLAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwgJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwgX0xpc3RfTmlsKSkKCQkJCQldKSk7CgkJY2FzZSAnU3ltYm9sS2luZF9Nb2R1bGUnOgoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdTeW1ib2xLaW5kX01vZHVsZScsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LCAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LCBfTGlzdF9OaWwpKQoJCQkJCV0pKTsKCQljYXNlICdTeW1ib2xLaW5kX05hbWVzcGFjZSc6CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ1N5bWJvbEtpbmRfTmFtZXNwYWNlJywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQkJXSkpOwoJCWNhc2UgJ1N5bWJvbEtpbmRfTnVtYmVyJzoKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknU3ltYm9sS2luZF9OdW1iZXInLAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwgJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwgX0xpc3RfTmlsKSkKCQkJCQldKSk7CgkJY2FzZSAnU3ltYm9sS2luZF9QYWNrYWdlJzoKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknU3ltYm9sS2luZF9QYWNrYWdlJywKCQkJCQkJQTIoJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsICRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksIF9MaXN0X05pbCkpCgkJCQkJXSkpOwoJCWNhc2UgJ1N5bWJvbEtpbmRfU3RyaW5nJzoKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknU3ltYm9sS2luZF9TdHJpbmcnLAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwgJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwgX0xpc3RfTmlsKSkKCQkJCQldKSk7CgkJZGVmYXVsdDoKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknU3ltYm9sS2luZF9TdHJ1Y3QnLAoJCQkJCQlBMigkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwgJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwgX0xpc3RfTmlsKSkKCQkJCQldKSk7Cgl9Cn07CnZhciAkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9fZ2VuZXJpY19MaXN0ID0gJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3Q7CnZhciAkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nID0gX0pzb25fd3JhcDsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9Eb2N1bWVudFN5bWJvbCA9IGZ1bmN0aW9uICh2YWx1ZVRvRW5jb2RlKSB7Cgl2YXIgdGFnQXJndW1lbnQwID0gdmFsdWVUb0VuY29kZS5hOwoJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJX0xpc3RfZnJvbUFycmF5KAoJCQlbCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ0RvY3VtZW50U3ltYm9sJywKCQkJCUEyKAoJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQlbCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJJ25hbWUnLAoJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHRhZ0FyZ3VtZW50MC5uYW1lKSksCgkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCSdraW5kJywKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX1N5bWJvbEtpbmQodGFnQXJndW1lbnQwLmtpbmQpKSwKCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJJ3JhbmdlJywKCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCSdzdGFydExpbmVOdW1iZXInLAoJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KHRhZ0FyZ3VtZW50MC5yYW5nZS5zdGFydExpbmVOdW1iZXIpKSwKCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJJ3N0YXJ0Q29sdW1uJywKCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludCh0YWdBcmd1bWVudDAucmFuZ2Uuc3RhcnRDb2x1bW4pKSwKCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJJ2VuZExpbmVOdW1iZXInLAoJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KHRhZ0FyZ3VtZW50MC5yYW5nZS5lbmRMaW5lTnVtYmVyKSksCgkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCSdlbmRDb2x1bW4nLAoJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KHRhZ0FyZ3VtZW50MC5yYW5nZS5lbmRDb2x1bW4pKQoJCQkJCQkJCQkJCV0pKSksCgkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCSdzZWxlY3Rpb25SYW5nZScsCgkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQknc3RhcnRMaW5lTnVtYmVyJywKCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludCh0YWdBcmd1bWVudDAuc2VsZWN0aW9uUmFuZ2Uuc3RhcnRMaW5lTnVtYmVyKSksCgkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCSdzdGFydENvbHVtbicsCgkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodGFnQXJndW1lbnQwLnNlbGVjdGlvblJhbmdlLnN0YXJ0Q29sdW1uKSksCgkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCSdlbmRMaW5lTnVtYmVyJywKCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludCh0YWdBcmd1bWVudDAuc2VsZWN0aW9uUmFuZ2UuZW5kTGluZU51bWJlcikpLAoJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQknZW5kQ29sdW1uJywKCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludCh0YWdBcmd1bWVudDAuc2VsZWN0aW9uUmFuZ2UuZW5kQ29sdW1uKSkKCQkJCQkJCQkJCQldKSkpLAoJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQknY2hpbGRyZW4nLAoJCQkJCQkJCQlBMigKCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX19nZW5lcmljX0xpc3QsCgkJCQkJCQkJCQlmdW5jdGlvbiAodHlwZV9hcmcpIHsKCQkJCQkJCQkJCQlyZXR1cm4gJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0RvY3VtZW50U3ltYm9sKHR5cGVfYXJnKTsKCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQl0YWdBcmd1bWVudDAuY2hpbGRyZW4pKQoJCQkJCQkJCV0pKQoJCQkJCQldKSkpCgkJCV0pKTsKfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9FbG1QYWNrYWdlVmVyc2lvbklkZW50aWZlciA9IGZ1bmN0aW9uICh2YWx1ZVRvRW5jb2RlKSB7Cgl2YXIgdGFnQXJndW1lbnQwID0gdmFsdWVUb0VuY29kZS5hOwoJdmFyIHRhZ0FyZ3VtZW50MSA9IHZhbHVlVG9FbmNvZGUuYjsKCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCV9MaXN0X2Zyb21BcnJheSgKCQkJWwoJCQkJX1V0aWxzX1R1cGxlMigKCQkJCSdFbG1QYWNrYWdlVmVyc2lvbjAxOUlkZW50aWZlcicsCgkJCQlBMigKCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJWwoJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0YWdBcmd1bWVudDApLAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0YWdBcmd1bWVudDEpCgkJCQkJCV0pKSkKCQkJXSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0ZpbGVMb2NhdGlvbiA9IGZ1bmN0aW9uICh2YWx1ZVRvRW5jb2RlKSB7CglpZiAodmFsdWVUb0VuY29kZS4kID09PSAnRWxtUGFja2FnZUZpbGVMb2NhdGlvbicpIHsKCQl2YXIgdGFnQXJndW1lbnQwID0gdmFsdWVUb0VuY29kZS5hOwoJCXZhciB0YWdBcmd1bWVudDEgPSB2YWx1ZVRvRW5jb2RlLmI7CgkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCSdFbG1QYWNrYWdlRmlsZUxvY2F0aW9uJywKCQkJCQlBMigKCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsCgkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCVsKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9MYW5ndWFnZVNlcnZpY2VJbnRlcmZhY2VfRWxtUGFja2FnZVZlcnNpb25JZGVudGlmZXIodGFnQXJndW1lbnQwKSwKCQkJCQkJCQlBMigKCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9fZ2VuZXJpY19MaXN0LAoJCQkJCQkJCWZ1bmN0aW9uICh0eXBlX2FyZykgewoJCQkJCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0eXBlX2FyZyk7CgkJCQkJCQkJfSwKCQkJCQkJCQl0YWdBcmd1bWVudDEpCgkJCQkJCQldKSkpCgkJCQldKSk7Cgl9IGVsc2UgewoJCXZhciB0YWdBcmd1bWVudDAgPSB2YWx1ZVRvRW5jb2RlLmE7CgkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCVsKCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCSdXb3Jrc3BhY2VGaWxlTG9jYXRpb24nLAoJCQkJCUEyKAoJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwKCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJWwoJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodGFnQXJndW1lbnQwKQoJCQkJCQkJXSkpKQoJCQkJXSkpOwoJfQp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX1Jlc3BvbnNlID0gZnVuY3Rpb24gKHZhbHVlVG9FbmNvZGUpIHsKCXN3aXRjaCAodmFsdWVUb0VuY29kZS4kKSB7CgkJY2FzZSAnUHJvdmlkZUNvbXBsZXRpb25JdGVtc1Jlc3BvbnNlJzoKCQkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknUHJvdmlkZUNvbXBsZXRpb25JdGVtc1Jlc3BvbnNlJywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQlBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfX2dlbmVyaWNfTGlzdCwKCQkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCQkJCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQknbGFiZWwnLAoJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0eXBlX2FyZy5sYWJlbCkpLAoJCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJCSdraW5kJywKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0Zyb250ZW5kX01vbmFjb0VkaXRvcl9Db21wbGV0aW9uSXRlbUtpbmQodHlwZV9hcmcua2luZCkpLAoJCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJCSdkb2N1bWVudGF0aW9uJywKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodHlwZV9hcmcuZG9jdW1lbnRhdGlvbikpLAoJCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJCSdpbnNlcnRUZXh0JywKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRzdHJpbmcodHlwZV9hcmcuaW5zZXJ0VGV4dCkpCgkJCQkJCQkJCQkJCV0pKTsKCQkJCQkJCQkJfSwKCQkJCQkJCQkJdGFnQXJndW1lbnQwKQoJCQkJCQkJCV0pKSkKCQkJCQldKSk7CgkJY2FzZSAnUHJvdmlkZURlZmluaXRpb25SZXNwb25zZSc6CgkJCXZhciB0YWdBcmd1bWVudDAgPSB2YWx1ZVRvRW5jb2RlLmE7CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ1Byb3ZpZGVEZWZpbml0aW9uUmVzcG9uc2UnLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9fZ2VuZXJpY19MaXN0LAoJCQkJCQkJCQlmdW5jdGlvbiAodHlwZV9hcmcpIHsKCQkJCQkJCQkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJCSdmaWxlTG9jYXRpb24nLAoJCQkJCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfTGFuZ3VhZ2VTZXJ2aWNlSW50ZXJmYWNlX0ZpbGVMb2NhdGlvbih0eXBlX2FyZy5maWxlTG9jYXRpb24pKSwKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkncmFuZ2UnLAoJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkJCQknc3RhcnRMaW5lTnVtYmVyJywKCQkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodHlwZV9hcmcucmFuZ2Uuc3RhcnRMaW5lTnVtYmVyKSksCgkJCQkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJCQkJJ3N0YXJ0Q29sdW1uJywKCQkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodHlwZV9hcmcucmFuZ2Uuc3RhcnRDb2x1bW4pKSwKCQkJCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkJCQknZW5kTGluZU51bWJlcicsCgkJCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KHR5cGVfYXJnLnJhbmdlLmVuZExpbmVOdW1iZXIpKSwKCQkJCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQkJCQknZW5kQ29sdW1uJywKCQkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodHlwZV9hcmcucmFuZ2UuZW5kQ29sdW1uKSkKCQkJCQkJCQkJCQkJCQkJXSkpKQoJCQkJCQkJCQkJCQldKSk7CgkJCQkJCQkJCX0sCgkJCQkJCQkJCXRhZ0FyZ3VtZW50MCkKCQkJCQkJCQldKSkpCgkJCQkJXSkpOwoJCWNhc2UgJ1Byb3ZpZGVIb3ZlclJlc3BvbnNlJzoKCQkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknUHJvdmlkZUhvdmVyUmVzcG9uc2UnLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkJJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSwKCQkJCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQkJCQlbCgkJCQkJCQkJCUEyKAoJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9fZ2VuZXJpY19MaXN0LAoJCQkJCQkJCQlmdW5jdGlvbiAodHlwZV9hcmcpIHsKCQkJCQkJCQkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHR5cGVfYXJnKTsKCQkJCQkJCQkJfSwKCQkJCQkJCQkJdGFnQXJndW1lbnQwKQoJCQkJCQkJCV0pKSkKCQkJCQldKSk7CgkJY2FzZSAnVGV4dERvY3VtZW50UmVmZXJlbmNlc1Jlc3BvbnNlJzoKCQkJdmFyIHRhZ0FyZ3VtZW50MCA9IHZhbHVlVG9FbmNvZGUuYTsKCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJWwoJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQknVGV4dERvY3VtZW50UmVmZXJlbmNlc1Jlc3BvbnNlJywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQlBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfX2dlbmVyaWNfTGlzdCwKCQkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCQkJCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQknZmlsZUxvY2F0aW9uJywKCQkJCQkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9GaWxlTG9jYXRpb24odHlwZV9hcmcuZmlsZUxvY2F0aW9uKSksCgkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJJ3JhbmdlJywKCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQlbCgkJCQkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJCQkJJ3N0YXJ0TGluZU51bWJlcicsCgkJCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KHR5cGVfYXJnLnJhbmdlLnN0YXJ0TGluZU51bWJlcikpLAoJCQkJCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJCQkJCSdzdGFydENvbHVtbicsCgkJCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KHR5cGVfYXJnLnJhbmdlLnN0YXJ0Q29sdW1uKSksCgkJCQkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJCQkJJ2VuZExpbmVOdW1iZXInLAoJCQkJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGludCh0eXBlX2FyZy5yYW5nZS5lbmRMaW5lTnVtYmVyKSksCgkJCQkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJCQkJJ2VuZENvbHVtbicsCgkJCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KHR5cGVfYXJnLnJhbmdlLmVuZENvbHVtbikpCgkJCQkJCQkJCQkJCQkJCV0pKSkKCQkJCQkJCQkJCQkJXSkpOwoJCQkJCQkJCQl9LAoJCQkJCQkJCQl0YWdBcmd1bWVudDApCgkJCQkJCQkJXSkpKQoJCQkJCV0pKTsKCQljYXNlICdUZXh0RG9jdW1lbnRSZW5hbWVSZXNwb25zZSc6CgkJCXZhciB0YWdBcmd1bWVudDAgPSB2YWx1ZVRvRW5jb2RlLmE7CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ1RleHREb2N1bWVudFJlbmFtZVJlc3BvbnNlJywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCSRlbG0kY29yZSRCYXNpY3MkaWRlbnRpdHksCgkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJWwoJCQkJCQkJCQlBMigKCQkJCQkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfX2dlbmVyaWNfTGlzdCwKCQkJCQkJCQkJZnVuY3Rpb24gKHR5cGVfYXJnKSB7CgkJCQkJCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCQkJCQkJCQknZmlsZVBhdGgnLAoJCQkJCQkJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0eXBlX2FyZy5maWxlUGF0aCkpLAoJCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJCSdlZGl0cycsCgkJCQkJCQkJCQkJCQlBMigKCQkJCQkJCQkJCQkJCQkkYXV0aG9yJHByb2plY3QkQ29tcGlsYXRpb25JbnRlcmZhY2UkR2VuZXJhdGVKc29uQ29udmVydGVycyRHZW5lcmF0ZWRfSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZV9fZ2VuZXJpY19MaXN0LAoJCQkJCQkJCQkJCQkJCWZ1bmN0aW9uICh0eXBlX2FyZ18pIHsKCQkJCQkJCQkJCQkJCQkJcmV0dXJuICRlbG0kanNvbiRKc29uJEVuY29kZSRvYmplY3QoCgkJCQkJCQkJCQkJCQkJCQlfTGlzdF9mcm9tQXJyYXkoCgkJCQkJCQkJCQkJCQkJCQkJWwoJCQkJCQkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJCQkJCQkncmFuZ2UnLAoJCQkJCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJCQkJCQkJCQkJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCQkJCQkJCQkJCQkJCVsKCQkJCQkJCQkJCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJCQkJCQkJCQkJJ3N0YXJ0TGluZU51bWJlcicsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodHlwZV9hcmdfLnJhbmdlLnN0YXJ0TGluZU51bWJlcikpLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJCQkJCQkJCQknc3RhcnRDb2x1bW4nLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkaW50KHR5cGVfYXJnXy5yYW5nZS5zdGFydENvbHVtbikpLAoJCQkJCQkJCQkJCQkJCQkJCQkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJCQkJCQkJCQkJCQkJCQkJCQknZW5kTGluZU51bWJlcicsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodHlwZV9hcmdfLnJhbmdlLmVuZExpbmVOdW1iZXIpKSwKCQkJCQkJCQkJCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJCQkJCQkJCQkJJ2VuZENvbHVtbicsCgkJCQkJCQkJCQkJCQkJCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRpbnQodHlwZV9hcmdfLnJhbmdlLmVuZENvbHVtbikpCgkJCQkJCQkJCQkJCQkJCQkJCQkJXSkpKSwKCQkJCQkJCQkJCQkJCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJCQkJCQkJCQkJCQkJJ25ld1RleHQnLAoJCQkJCQkJCQkJCQkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHR5cGVfYXJnXy5uZXdUZXh0KSkKCQkJCQkJCQkJCQkJCQkJCQldKSk7CgkJCQkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQkJCQl0eXBlX2FyZy5lZGl0cykpCgkJCQkJCQkJCQkJCV0pKTsKCQkJCQkJCQkJfSwKCQkJCQkJCQkJdGFnQXJndW1lbnQwKQoJCQkJCQkJCV0pKSkKCQkJCQldKSk7CgkJY2FzZSAnVGV4dERvY3VtZW50U3ltYm9sUmVzcG9uc2UnOgoJCQl2YXIgdGFnQXJndW1lbnQwID0gdmFsdWVUb0VuY29kZS5hOwoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdUZXh0RG9jdW1lbnRTeW1ib2xSZXNwb25zZScsCgkJCQkJCUEyKAoJCQkJCQkJJGVsbSRqc29uJEpzb24kRW5jb2RlJGxpc3QsCgkJCQkJCQkkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVsKCQkJCQkJCQkJQTIoCgkJCQkJCQkJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX19nZW5lcmljX0xpc3QsCgkJCQkJCQkJCWZ1bmN0aW9uICh0eXBlX2FyZykgewoJCQkJCQkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9Eb2N1bWVudFN5bWJvbCh0eXBlX2FyZyk7CgkJCQkJCQkJCX0sCgkJCQkJCQkJCXRhZ0FyZ3VtZW50MCkKCQkJCQkJCQldKSkpCgkJCQkJXSkpOwoJCWRlZmF1bHQ6CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ1dvcmtzcGFjZVN1bW1hcnlSZXNwb25zZScsCgkJCQkJCUEyKCRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LCAkZWxtJGNvcmUkQmFzaWNzJGlkZW50aXR5LCBfTGlzdF9OaWwpKQoJCQkJCV0pKTsKCX0KfTsKdmFyICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX19nZW5lcmljX1Jlc3VsdCA9IEYzKAoJZnVuY3Rpb24gKGVuY29kZUVyciwgZW5jb2RlT2ssIHZhbHVlVG9FbmNvZGUpIHsKCQlpZiAodmFsdWVUb0VuY29kZS4kID09PSAnRXJyJykgewoJCQl2YXIgdmFsdWVUb0VuY29kZUVycm9yID0gdmFsdWVUb0VuY29kZS5hOwoJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQkJCV9MaXN0X2Zyb21BcnJheSgKCQkJCQlbCgkJCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkJCSdFcnInLAoJCQkJCQlBMigKCQkJCQkJCSRlbG0kanNvbiRKc29uJEVuY29kZSRsaXN0LAoJCQkJCQkJZW5jb2RlRXJyLAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVt2YWx1ZVRvRW5jb2RlRXJyb3JdKSkpCgkJCQkJXSkpOwoJCX0gZWxzZSB7CgkJCXZhciB2YWx1ZVRvRW5jb2RlT2sgPSB2YWx1ZVRvRW5jb2RlLmE7CgkJCXJldHVybiAkZWxtJGpzb24kSnNvbiRFbmNvZGUkb2JqZWN0KAoJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCVsKCQkJCQkJX1V0aWxzX1R1cGxlMigKCQkJCQkJJ09rJywKCQkJCQkJQTIoCgkJCQkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkbGlzdCwKCQkJCQkJCWVuY29kZU9rLAoJCQkJCQkJX0xpc3RfZnJvbUFycmF5KAoJCQkJCQkJCVt2YWx1ZVRvRW5jb2RlT2tdKSkpCgkJCQkJXSkpOwoJCX0KCX0pOwp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfMzc0Njc1NzI0NyA9IGZ1bmN0aW9uICh2YWx1ZVRvRW5jb2RlKSB7CglyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJG9iamVjdCgKCQlfTGlzdF9mcm9tQXJyYXkoCgkJCVsKCQkJCV9VdGlsc19UdXBsZTIoCgkJCQkncmVzcG9uc2UnLAoJCQkJQTMoCgkJCQkJJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfX2dlbmVyaWNfUmVzdWx0LAoJCQkJCWZ1bmN0aW9uICh0eXBlX2FyZykgewoJCQkJCQlyZXR1cm4gJGVsbSRqc29uJEpzb24kRW5jb2RlJHN0cmluZyh0eXBlX2FyZyk7CgkJCQkJfSwKCQkJCQlmdW5jdGlvbiAodHlwZV9hcmcpIHsKCQkJCQkJcmV0dXJuICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJEdlbmVyYXRlZF9Kc29uQ29udmVydGVycyRqc29uRW5jb2RlX0xhbmd1YWdlU2VydmljZUludGVyZmFjZV9SZXNwb25zZSh0eXBlX2FyZyk7CgkJCQkJfSwKCQkJCQl2YWx1ZVRvRW5jb2RlLnJlc3BvbnNlKSksCgkJCQlfVXRpbHNfVHVwbGUyKAoJCQkJJ3JlcXVlc3RJZCcsCgkJCQkkZWxtJGpzb24kSnNvbiRFbmNvZGUkc3RyaW5nKHZhbHVlVG9FbmNvZGUucmVxdWVzdElkKSkKCQkJXSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkanNvbkVuY29kZUxhbmd1YWdlU2VydmljZVJlc3BvbnNlID0gJGF1dGhvciRwcm9qZWN0JENvbXBpbGF0aW9uSW50ZXJmYWNlJEdlbmVyYXRlSnNvbkNvbnZlcnRlcnMkR2VuZXJhdGVkX0pzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVfMzc0Njc1NzI0NzsKdmFyICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VXb3JrZXIkc2VuZFJlc3BvbnNlID0gX1BsYXRmb3JtX291dGdvaW5nUG9ydCgnc2VuZFJlc3BvbnNlJywgJGVsbSRjb3JlJEJhc2ljcyRpZGVudGl0eSk7CnZhciAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlV29ya2VyJHNlbmRSZXNwb25zZUNtZCA9IGZ1bmN0aW9uIChyZXNwb25zZSkgewoJcmV0dXJuICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VXb3JrZXIkc2VuZFJlc3BvbnNlKAoJCSRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJGpzb25FbmNvZGVMYW5ndWFnZVNlcnZpY2VSZXNwb25zZShyZXNwb25zZSkpOwp9Owp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZVdvcmtlciR1cGRhdGUgPSBGMigKCWZ1bmN0aW9uIChldmVudCwgc3RhdGVCZWZvcmUpIHsKCQl2YXIgcmVxdWVzdEpzb24gPSBldmVudC5hOwoJCXZhciBfdjEgPSBBMigkZWxtJGpzb24kSnNvbiREZWNvZGUkZGVjb2RlVmFsdWUsICRhdXRob3IkcHJvamVjdCRDb21waWxhdGlvbkludGVyZmFjZSRHZW5lcmF0ZUpzb25Db252ZXJ0ZXJzJGpzb25EZWNvZGVMYW5ndWFnZVNlcnZpY2VSZXF1ZXN0SW5Xb3Jrc3BhY2UsIHJlcXVlc3RKc29uKTsKCQlpZiAoX3YxLiQgPT09ICdFcnInKSB7CgkJCXJldHVybiBfVXRpbHNfVHVwbGUyKHN0YXRlQmVmb3JlLCAkZWxtJGNvcmUkUGxhdGZvcm0kQ21kJG5vbmUpOwoJCX0gZWxzZSB7CgkJCXZhciByZXF1ZXN0SW5Xb3Jrc3BhY2UgPSBfdjEuYTsKCQkJdmFyIF92MiA9IEEyKCRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2UkaGFuZGxlUmVxdWVzdCwgcmVxdWVzdEluV29ya3NwYWNlLnJlcXVlc3QsIHN0YXRlQmVmb3JlKTsKCQkJdmFyIHJlc3VsdCA9IF92Mi5hOwoJCQl2YXIgc3RhdGUgPSBfdjIuYjsKCQkJcmV0dXJuIF9VdGlsc19UdXBsZTIoCgkJCQlzdGF0ZSwKCQkJCSRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VXb3JrZXIkc2VuZFJlc3BvbnNlQ21kKAoJCQkJCXtyZXF1ZXN0SWQ6IHJlcXVlc3RJbldvcmtzcGFjZS5pZCwgcmVzcG9uc2U6IHJlc3VsdH0pKTsKCQl9Cgl9KTsKdmFyICRlbG0kY29yZSRQbGF0Zm9ybSR3b3JrZXIgPSBfUGxhdGZvcm1fd29ya2VyOwp2YXIgJGF1dGhvciRwcm9qZWN0JExhbmd1YWdlU2VydmljZVdvcmtlciRtYWluID0gJGVsbSRjb3JlJFBsYXRmb3JtJHdvcmtlcigKCXtpbml0OiAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlV29ya2VyJGluaXQsIHN1YnNjcmlwdGlvbnM6ICRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VXb3JrZXIkc3Vic2NyaXB0aW9ucywgdXBkYXRlOiAkYXV0aG9yJHByb2plY3QkTGFuZ3VhZ2VTZXJ2aWNlV29ya2VyJHVwZGF0ZX0pOwpfUGxhdGZvcm1fZXhwb3J0KHsnTGFuZ3VhZ2VTZXJ2aWNlV29ya2VyJzp7J2luaXQnOiRhdXRob3IkcHJvamVjdCRMYW5ndWFnZVNlcnZpY2VXb3JrZXIkbWFpbigKCSRlbG0kanNvbiRKc29uJERlY29kZSRzdWNjZWVkKF9VdGlsc19UdXBsZTApKSgwKX19KTt9KHRoaXMpKTs=" }